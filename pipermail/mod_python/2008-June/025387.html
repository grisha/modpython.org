<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Re: mod_python 3.3.1 bug report
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20mod_python%203.3.1%20bug%20report&In-Reply-To=E23A82BD-6FAB-4668-B688-69004D01CE1F%40cs.depaul.edu">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025386.html">
   <LINK REL="Next"  HREF="025388.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Re: mod_python 3.3.1 bug report</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20mod_python%203.3.1%20bug%20report&In-Reply-To=E23A82BD-6FAB-4668-B688-69004D01CE1F%40cs.depaul.edu"
       TITLE="[mod_python] Re: mod_python 3.3.1 bug report">graham.dumpleton at gmail.com
       </A><BR>
    <I>Mon Jun 23 05:16:29 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="025386.html">[mod_python] Re: mod_python 3.3.1 bug report
</A></li>
        <LI>Next message: <A HREF="025388.html">[mod_python] Duplicated statements using the publisher handler
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25387">[ date ]</a>
              <a href="thread.html#25387">[ thread ]</a>
              <a href="subject.html#25387">[ subject ]</a>
              <a href="author.html#25387">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please keep replies on list.

2008/6/23 Massimo Di Pierro &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">MDiPierro at cs.depaul.edu</A>&gt;:
&gt;<i> I agree it makes perfect sense within mod_python. But how Django must write
</I>&gt;<i> in os.environ in order to use it on top of mod_wsgi. Am I wrong?
</I>
I meant to say 'It is okay read only, which is how Django uses it'. If
you think it makes perfect sense in mod_python, then I am not sure how
as that isn't what I meant to say. :-)

Django itself doesn't write to os.environ. As a hack they allow
mod_python adapter for Django to write into it, but that is outside of
Django proper. Rather poorly, they do it on every request. Technically
this would be bad if the value changes on every request, but in
general it wouldn't change, so just redundant.

In mod_wsgi it is the WSGI script which sets up the Django instance
that needs to write to os.environ before importing Django. This is
only done when the script is first loaded however and not on every
request.

Either way, a WSGI friendly application would have a configuration
parameter passed through the WSGI environment dictionary and as such
be able to be changed on every request if need be. Trac for example
does this, and because they properly isolate project areas, can thus
host multiple project areas in one interpreter instance.

Graham

&gt;<i>
</I>&gt;<i> Massimo
</I>&gt;<i>
</I>&gt;<i> On Jun 22, 2008, at 9:32 PM, Graham Dumpleton wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> It is okay read only, which is how mod_python uses it.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 2008/6/23 Massimo Di Pierro &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">MDiPierro at cs.depaul.edu</A>&gt;:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Am I wrong or using os.environ is not even thread safe?
</I>&gt;&gt;&gt;<i> Are you also saying that Django 1.0 will continue to use os.environ?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Massimo
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> On Jun 22, 2008, at 9:10 PM, Graham Dumpleton wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> It wasn't listed because I believe it was already stated by OP that it
</I>&gt;&gt;&gt;&gt;<i> worked with WSGI and thus they knew that already. I therefore didn't
</I>&gt;&gt;&gt;&gt;<i> need to tell him.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> As much as many frameworks can run on WSGI and may even state or aim
</I>&gt;&gt;&gt;&gt;<i> to be 100% WSGI compliant, that doesn't mean they fit with some of the
</I>&gt;&gt;&gt;&gt;<i> greater ideals of WSGI that some would like to see. The thing which
</I>&gt;&gt;&gt;&gt;<i> Django folks will not be addressing is their reliance on os.environ to
</I>&gt;&gt;&gt;&gt;<i> define location of configuration information. WSGI doesn't say they
</I>&gt;&gt;&gt;&gt;<i> can't do this, but relying on global data like that in any WSGI
</I>&gt;&gt;&gt;&gt;<i> compliant framework limits one to having one instance of that
</I>&gt;&gt;&gt;&gt;<i> framework within a Python interpreter instance. This makes it
</I>&gt;&gt;&gt;&gt;<i> impossible with one Python interpreter instance to mount more than one
</I>&gt;&gt;&gt;&gt;<i> application reliant on that framework. Thus one is forced to use
</I>&gt;&gt;&gt;&gt;<i> multiple processes and/or interpreters instead.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Graham
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> 2008/6/22 Massimo Di Pierro &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mdipierro at cs.depaul.edu</A>&gt;:
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> I read the post again and I noticed you omitted web2py from the list of
</I>&gt;&gt;&gt;&gt;&gt;<i> &quot;major frameworks&quot; that support wsgi. I would like to add that web2py
</I>&gt;&gt;&gt;&gt;&gt;<i> uses
</I>&gt;&gt;&gt;&gt;&gt;<i> the cherrypy 3.0 wsgiserver (unmodified) so it is as wsgi compliant as
</I>&gt;&gt;&gt;&gt;&gt;<i> cherrypy is. Django instead, for example, lists &quot;Making Django 100%
</I>&gt;&gt;&gt;&gt;&gt;<i> WSGI
</I>&gt;&gt;&gt;&gt;&gt;<i> compliant.&quot; as one of the roadmark targets for version 1.0.
</I>&gt;&gt;&gt;&gt;&gt;<i> Massimo
</I>&gt;&gt;&gt;&gt;&gt;<i> On Jun 21, 2008, at 9:44 AM, Massimo Di Pierro wrote:
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Dear Graham,
</I>&gt;&gt;&gt;&gt;&gt;<i> a couple of months ago you send me some very constructive comments
</I>&gt;&gt;&gt;&gt;&gt;<i> about
</I>&gt;&gt;&gt;&gt;&gt;<i> web2py. In particular you suggested that we replaced all relative paths
</I>&gt;&gt;&gt;&gt;&gt;<i> with
</I>&gt;&gt;&gt;&gt;&gt;<i> absolutes paths. I really appreciate your advice and this issue was
</I>&gt;&gt;&gt;&gt;&gt;<i> addressed within one week of your email. If there is any other issue
</I>&gt;&gt;&gt;&gt;&gt;<i> that
</I>&gt;&gt;&gt;&gt;&gt;<i> you find with the web2py source code, please let us know and it will be
</I>&gt;&gt;&gt;&gt;&gt;<i> addresses. At this point we are not aware of any open issue.
</I>&gt;&gt;&gt;&gt;&gt;<i> You also refer to &quot;heard various critiques by others about it&quot;. Could
</I>&gt;&gt;&gt;&gt;&gt;<i> you
</I>&gt;&gt;&gt;&gt;&gt;<i> be
</I>&gt;&gt;&gt;&gt;&gt;<i> more explicit? Unfortunately there are many incorrect posts online
</I>&gt;&gt;&gt;&gt;&gt;<i> about
</I>&gt;&gt;&gt;&gt;&gt;<i> web2py written by people who have not tried it or read the specs.
</I>&gt;&gt;&gt;&gt;&gt;<i> Massimo
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Graham Dumpleton graham.dumpleton at gmail.com write:
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> All the major frameworks support WSGI, Django, TurboGears, Pylons,
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> CherryPy, web.py and up and comers such as Werkzeug.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> Although Django may say use mod_python, general consensus is rapidly
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> moving to use of mod_wsgi, it is just that developers who maintain web
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> site haven't decided yet to make a statement that mod_wsgi is equally
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> as capable as mod_python.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> As to web2py, it would not be one of my first choices. It may be more
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> glitzy and have better marketing speak around it, but having seen some
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> of the code in it and heard various critiques by others about it, I'd
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> be looking elsewhere. I'd probably suggest Django for high level
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> framework and Werkzeug if you want a more low level nuts and bolts
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> approach.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> Graham&lt;ATT00001.txt&gt;
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;&gt;&gt;<i> Mod_python mailing list
</I>&gt;&gt;&gt;&gt;&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;&gt;&gt;&gt;&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025386.html">[mod_python] Re: mod_python 3.3.1 bug report
</A></li>
	<LI>Next message: <A HREF="025388.html">[mod_python] Duplicated statements using the publisher handler
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25387">[ date ]</a>
              <a href="thread.html#25387">[ thread ]</a>
              <a href="subject.html#25387">[ subject ]</a>
              <a href="author.html#25387">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
