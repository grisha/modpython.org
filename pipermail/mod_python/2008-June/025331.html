<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Trouble importing files through mod_python
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Trouble%20importing%20files%20through%20mod_python&In-Reply-To=a89a6a430806021258u52cc6ceeu5458a92998f025c%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025330.html">
   <LINK REL="Next"  HREF="025333.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Trouble importing files through mod_python</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Trouble%20importing%20files%20through%20mod_python&In-Reply-To=a89a6a430806021258u52cc6ceeu5458a92998f025c%40mail.gmail.com"
       TITLE="[mod_python] Trouble importing files through mod_python">graham.dumpleton at gmail.com
       </A><BR>
    <I>Mon Jun  2 17:41:43 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="025330.html">[mod_python] Trouble importing files through mod_python
</A></li>
        <LI>Next message: <A HREF="025333.html">[mod_python] Trouble importing files through mod_python
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25331">[ date ]</a>
              <a href="thread.html#25331">[ thread ]</a>
              <a href="subject.html#25331">[ subject ]</a>
              <a href="author.html#25331">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>You PythonPath is wrong for a start and would cause various issues,
although not the immediate one here. You have:

PythonPath &quot;['/home/me/scratch', '/home/me/scratch/ImportTest',
'/usr/lib/python2.5/', '/usr/lib/python2.5/lib-dynload/',
'/usr/lib/python2.5/site-packages/']&quot;

It should be:

PythonPath &quot;['/home/me/scratch', '/home/me/scratch/ImportTest'] + sys.path&quot;

That is, you need to extend existing path, not replace it.

Other than that, problems like this are generally due to the user that
Apache runs as not being able to read files being imported. Thus,
check whether permissions on your account directory and stuff in it
are too restrictive and wouldn't allow another user to read the files
contained there in.

Graham

2008/6/3 <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">hungrybackspace at gmail.com</A> &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">hungrybackspace at gmail.com</A>&gt;:
&gt;<i> Greetings,
</I>&gt;<i>
</I>&gt;<i> We're having a bit of a time importing modules that aren't in the
</I>&gt;<i> standard library while using mod_python on this particular server.  We
</I>&gt;<i> have had, however, success with other servers.  We're trying to run a
</I>&gt;<i> tiny application that looks like this:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> on the console side:
</I>&gt;<i> ~/scratch/
</I>&gt;<i>          RunImportTest.py
</I>&gt;<i>          __init__.py
</I>&gt;<i>          ImportTest/
</I>&gt;<i>                     ImportTest.py
</I>&gt;<i>                     __init__.py
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ...and the web side:
</I>&gt;<i> /home/httpd/html/beta/
</I>&gt;<i>                      RunImportTestModPython.py
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Below, the contents of the three files:
</I>&gt;<i>
</I>&gt;<i> RunImportTest.py:
</I>&gt;<i> =================
</I>&gt;<i> from ImportTest.ImportTest import TEST_CONSTANT
</I>&gt;<i>
</I>&gt;<i> print TEST_CONSTANT
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> RunImportTestModPython.py:
</I>&gt;<i> ==========================
</I>&gt;<i> from mod_python import apache
</I>&gt;<i> from ImportTest.ImportTest import TEST_CONSTANT
</I>&gt;<i>
</I>&gt;<i> def handler(req):
</I>&gt;<i>    req.content_type = 'text/plain'
</I>&gt;<i>    req.write(TEST_CONSTANT)
</I>&gt;<i>    return apache.OK
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ImportTest/ImportTest.py:
</I>&gt;<i> =========================
</I>&gt;<i> TEST_CONSTANT = &quot;success&quot;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Output from the import test from command line:
</I>&gt;<i> ~/scratch&gt; python RunImportTest.py
</I>&gt;<i> success
</I>&gt;<i>
</I>&gt;<i> So we know the little program does indeed work.  Here is the output
</I>&gt;<i> from Apache via mod_python:
</I>&gt;<i>
</I>&gt;<i> ========================
</I>&gt;<i> MOD_PYTHON ERROR
</I>&gt;<i>
</I>&gt;<i> ProcessId:      18704
</I>&gt;<i> Interpreter:    'beta.company.com'
</I>&gt;<i>
</I>&gt;<i> ServerName:     'beta.company.com'
</I>&gt;<i> DocumentRoot:   '/home/httpd/html/beta'
</I>&gt;<i>
</I>&gt;<i> URI:            '/RunImportTestModPython.py'
</I>&gt;<i> Location:       None
</I>&gt;<i> Directory:      '/home/httpd/html/beta/'
</I>&gt;<i> Filename:       '/home/httpd/html/beta/RunImportTestModPython.py'
</I>&gt;<i> PathInfo:       ''
</I>&gt;<i>
</I>&gt;<i> Phase:          'PythonHandler'
</I>&gt;<i> Handler:        'RunImportTestModPython'
</I>&gt;<i>
</I>&gt;<i> Traceback (most recent call last):
</I>&gt;<i>
</I>&gt;<i>  File &quot;/usr/local/lib/python2.5/site-packages/mod_python/importer.py&quot;,
</I>&gt;<i> line 1537, in HandlerDispatch
</I>&gt;<i>    default=default_handler, arg=req, silent=hlist.silent)
</I>&gt;<i>
</I>&gt;<i>  File &quot;/usr/local/lib/python2.5/site-packages/mod_python/importer.py&quot;,
</I>&gt;<i> line 1202, in _process_target
</I>&gt;<i>    module = import_module(module_name, path=path)
</I>&gt;<i>
</I>&gt;<i>  File &quot;/usr/local/lib/python2.5/site-packages/mod_python/importer.py&quot;,
</I>&gt;<i> line 296, in import_module
</I>&gt;<i>    log, import_path)
</I>&gt;<i>
</I>&gt;<i>  File &quot;/usr/local/lib/python2.5/site-packages/mod_python/importer.py&quot;,
</I>&gt;<i> line 680, in import_module
</I>&gt;<i>    execfile(file, module.__dict__)
</I>&gt;<i>
</I>&gt;<i>  File &quot;/home/httpd/html/beta/RunImportTestModPython.py&quot;, line 2, in &lt;module&gt;
</I>&gt;<i>    from ImportTest.ImportTest import TEST_CONSTANT
</I>&gt;<i>
</I>&gt;<i> ImportError: No module named ImportTest.ImportTest
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> MODULE CACHE DETAILS
</I>&gt;<i>
</I>&gt;<i> Accessed:       Mon Jun  2 14:21:49 2008
</I>&gt;<i> Generation:     0
</I>&gt;<i>
</I>&gt;<i> _mp_df6c4429391f4fb65dc56704a2c1e0e2 {
</I>&gt;<i>  FileName:     '/home/httpd/html/beta/RunImportTestModPython.py'
</I>&gt;<i>  Instance:     1 [IMPORT]
</I>&gt;<i>  Generation:   0 [ERROR]
</I>&gt;<i>  Modified:     Mon Jun  2 11:49:11 2008
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ...and here's an .htaccess file we're using in the directory
</I>&gt;<i> /home/httpd/html/beta, the directory that RunImportTestModPython.py is
</I>&gt;<i> in:
</I>&gt;<i> =========================
</I>&gt;<i> Options Indexes FollowSymLinks MultiViews
</I>&gt;<i> AddHandler mod_python .py
</I>&gt;<i> PythonDebug On
</I>&gt;<i> PythonHandler RunImportTestModPython
</I>&gt;<i> PythonAutoReload On
</I>&gt;<i> PythonPath &quot;['/home/me/scratch', '/home/me/scratch/ImportTest',
</I>&gt;<i> '/usr/lib/python2.5/', '/usr/lib/python2.5/lib-dynload/',
</I>&gt;<i> '/usr/lib/python2.5/site-packages/']&quot;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ...where /home/me is the user directory referenced at the top of the message.
</I>&gt;<i>
</I>&gt;<i> It's quite likely we're overlooking something very simple--but this
</I>&gt;<i> same setup works without hitch on another system (granted, versions of
</I>&gt;<i> OS, Apache, mod_python and Python are slightly different...).  This
</I>&gt;<i> non-functioning setup is:
</I>&gt;<i>
</I>&gt;<i> * CentOS 5
</I>&gt;<i> * Apache 2.2.8
</I>&gt;<i> * PHP 5.2.6
</I>&gt;<i> * Python 2.5.2
</I>&gt;<i> * mod_python 3.3.1
</I>&gt;<i> * cx_oracle 4.3.3
</I>&gt;<i>
</I>&gt;<i> some of those are kind of irrelevant for the specific application
</I>&gt;<i> here, but there might be hidden conflicts that I'm not aware of. I
</I>&gt;<i> have read some stuff about using mod_python's native import methods,
</I>&gt;<i> and I'd very much like to use the standard python import method
</I>&gt;<i> instead, as it preserves command-line execution without having to add
</I>&gt;<i> a lot of overhead.  And in fact, I shouldn't have to because this
</I>&gt;<i> setup works on another server.  Unfortunately, I can't simply use the
</I>&gt;<i> other server...
</I>&gt;<i>
</I>&gt;<i> Hope this isn't all too much information--I'm very grateful for any
</I>&gt;<i> help anyone may provide.
</I>&gt;<i>
</I>&gt;<i> many thanks,
</I>&gt;<i> MC
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I></PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025330.html">[mod_python] Trouble importing files through mod_python
</A></li>
	<LI>Next message: <A HREF="025333.html">[mod_python] Trouble importing files through mod_python
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25331">[ date ]</a>
              <a href="thread.html#25331">[ thread ]</a>
              <a href="subject.html#25331">[ subject ]</a>
              <a href="author.html#25331">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
