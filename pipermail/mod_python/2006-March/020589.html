<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Bug with document root.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Bug%20with%20document%20root.&In-Reply-To=44143A8F.3070201%40jgassociates.ca">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020588.html">
   <LINK REL="Next"  HREF="020591.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Bug with document root.</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Wouter van Marle</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Bug%20with%20document%20root.&In-Reply-To=44143A8F.3070201%40jgassociates.ca"
       TITLE="[mod_python] Bug with document root.">wouter at squirrel-systems.com
       </A><BR>
    <I>Sun Mar 12 10:28:02 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020588.html">[mod_python] Bug with document root.
</A></li>
        <LI>Next message: <A HREF="020591.html">[mod_python] Bug with document root.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20589">[ date ]</a>
              <a href="thread.html#20589">[ thread ]</a>
              <a href="subject.html#20589">[ subject ]</a>
              <a href="author.html#20589">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, 2006-03-12 at 10:13 -0500, Jim Gallacher wrote:

&gt;<i> Hi Wouter,
</I>&gt;<i> 
</I>&gt;<i> Which version of mod_python are you using?
</I>

apache2-mod_python-2.0.50_3.1.3-1mdk, Installed from rpm.


&gt;<i> Could you also provide the 2 different configurations and a snippet of 
</I>&gt;<i> the code that is causing the problem? Maybe it should be obvious from 
</I>&gt;<i> the traceback, but after reading the first 3 lines this morning my brain 
</I>&gt;<i> seized. ;)
</I>

The difference is in the definition of DocumentRoot in either the
httpd2.conf or the Vhosts file. I've now commented out the Vhost
completely, and set DocumentRoot in httpd2.conf. For the rest no
changes.

The Vhost definition:
&lt;VirtualHost jaimys&gt;
       ServerAdmin <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">wouter at jaimysoutdoorkitchens.com</A>
       ServerName www.jaimysoutdoorkitchens.com
       ServerAlias jaimys
       DocumentRoot /var/www/html/jaimys/
       &lt;Location /&gt;
               AddHandler mod_python .py
               PythonDebug On
       &lt;/Location&gt;
       PythonHandler mod_python.publisher
       ErrorLog /var/log/jaimys-error.log
&lt;/VirtualHost&gt;

Wouter.


&gt;<i> 
</I>&gt;<i> Jim
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Wouter van Marle wrote:
</I>&gt;<i> &gt; Hi all,
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I think I ran into a bug of mod_python, regarding sessions. If I define
</I>&gt;<i> &gt; my site (and document root) in the Vhosts section, I get the below
</I>&gt;<i> &gt; error. If it is defined in the main configuration of apache (single
</I>&gt;<i> &gt; site) then there is no problem. Very strange, as the Vhosts idea used to
</I>&gt;<i> &gt; work (well... that is... Apache recognises and uses only the first
</I>&gt;<i> &gt; definition, so not all goes that great). Running Mandrake 10.1.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Wouter.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Mod_python error: &quot;PythonHandler mod_python.publisher&quot;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Traceback (most recent call last):
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;   File &quot;/usr/lib/python2.3/site-packages/mod_python/apache.py&quot;, line
</I>&gt;<i> &gt; 299, in HandlerDispatch
</I>&gt;<i> &gt;     result = object(req)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;   File &quot;/usr/lib/python2.3/site-packages/mod_python/publisher.py&quot;, line
</I>&gt;<i> &gt; 136, in handler
</I>&gt;<i> &gt;     result = util.apply_fs_data(object, req.form, req=req)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;   File &quot;/usr/lib/python2.3/site-packages/mod_python/util.py&quot;, line 361,
</I>&gt;<i> &gt; in apply_fs_data
</I>&gt;<i> &gt;     return object(**args)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;   File &quot;/var/www/html/jaimys/python/main.py&quot;, line 38, in home
</I>&gt;<i> &gt;     req.session = util.getSession(req)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;   File &quot;/var/www/html/jaimys/python/util.py&quot;, line 80, in getSession
</I>&gt;<i> &gt;     sess = Session.Session(req)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;   File &quot;/usr/lib/python2.3/site-packages/mod_python/Session.py&quot;, line
</I>&gt;<i> &gt; 389, in Session
</I>&gt;<i> &gt;     timeout=timeout, lock=lock)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;   File &quot;/usr/lib/python2.3/site-packages/mod_python/Session.py&quot;, line
</I>&gt;<i> &gt; 294, in __init__
</I>&gt;<i> &gt;     timeout=timeout, lock=lock)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;   File &quot;/usr/lib/python2.3/site-packages/mod_python/Session.py&quot;, line
</I>&gt;<i> &gt; 132, in __init__
</I>&gt;<i> &gt;     Cookie.add_cookie(self._req, self.make_cookie())
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;   File &quot;/usr/lib/python2.3/site-packages/mod_python/Session.py&quot;, line
</I>&gt;<i> &gt; 160, in make_cookie
</I>&gt;<i> &gt;     c.path = dirpath[len(docroot):]
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; TypeError: unsubscriptable objectMod_python error: &quot;PythonHandler
</I>&gt;<i> &gt; mod_python.publisher&quot;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Traceback (most recent call last):
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;   File &quot;/usr/lib/python2.3/site-packages/mod_python/apache.py&quot;, line
</I>&gt;<i> &gt; 299, in HandlerDispatch
</I>&gt;<i> &gt;     result = object(req)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;   File &quot;/usr/lib/python2.3/site-packages/mod_python/publisher.py&quot;, line
</I>&gt;<i> &gt; 136, in handler
</I>&gt;<i> &gt;     result = util.apply_fs_data(object, req.form, req=req)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;   File &quot;/usr/lib/python2.3/site-packages/mod_python/util.py&quot;, line 361,
</I>&gt;<i> &gt; in apply_fs_data
</I>&gt;<i> &gt;     return object(**args)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;   File &quot;/var/www/html/jaimys/python/main.py&quot;, line 38, in home
</I>&gt;<i> &gt;     req.session = util.getSession(req)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;   File &quot;/var/www/html/jaimys/python/util.py&quot;, line 80, in getSession
</I>&gt;<i> &gt;     sess = Session.Session(req)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;   File &quot;/usr/lib/python2.3/site-packages/mod_python/Session.py&quot;, line
</I>&gt;<i> &gt; 389, in Session
</I>&gt;<i> &gt;     timeout=timeout, lock=lock)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;   File &quot;/usr/lib/python2.3/site-packages/mod_python/Session.py&quot;, line
</I>&gt;<i> &gt; 294, in __init__
</I>&gt;<i> &gt;     timeout=timeout, lock=lock)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;   File &quot;/usr/lib/python2.3/site-packages/mod_python/Session.py&quot;, line
</I>&gt;<i> &gt; 132, in __init__
</I>&gt;<i> &gt;     Cookie.add_cookie(self._req, self.make_cookie())
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;   File &quot;/usr/lib/python2.3/site-packages/mod_python/Session.py&quot;, line
</I>&gt;<i> &gt; 160, in make_cookie
</I>&gt;<i> &gt;     c.path = dirpath[len(docroot):]
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; TypeError: unsubscriptable object
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; ------------------------------------------------------------------------
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Mod_python mailing list
</I>&gt;<i> &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20060312/33bd1528/attachment.html">http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20060312/33bd1528/attachment.html</A>
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020588.html">[mod_python] Bug with document root.
</A></li>
	<LI>Next message: <A HREF="020591.html">[mod_python] Bug with document root.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20589">[ date ]</a>
              <a href="thread.html#20589">[ thread ]</a>
              <a href="subject.html#20589">[ subject ]</a>
              <a href="author.html#20589">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
