<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] publisher handler not working on FreeBSD,	Apache
	1.3 and modpython 2.7
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20publisher%20handler%20not%20working%20on%20FreeBSD%2C%09Apache%0A%091.3%20and%20modpython%202.7&In-Reply-To=4af508d8efeb055b92fb3a9d713f2611%40dscpl.com.au">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020658.html">
   <LINK REL="Next"  HREF="020660.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] publisher handler not working on FreeBSD,	Apache
	1.3 and modpython 2.7</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Jorey Bump</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20publisher%20handler%20not%20working%20on%20FreeBSD%2C%09Apache%0A%091.3%20and%20modpython%202.7&In-Reply-To=4af508d8efeb055b92fb3a9d713f2611%40dscpl.com.au"
       TITLE="[mod_python] publisher handler not working on FreeBSD,	Apache
	1.3 and modpython 2.7">list at joreybump.com
       </A><BR>
    <I>Sun Mar 26 12:33:58 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020658.html">[mod_python] publisher handler not working on FreeBSD,
	Apache 1.3 and modpython 2.7
</A></li>
        <LI>Next message: <A HREF="020660.html">[mod_python] publisher handler not working on FreeBSD,	Apache
	1.3 and modpython 2.7
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20659">[ date ]</a>
              <a href="thread.html#20659">[ thread ]</a>
              <a href="subject.html#20659">[ subject ]</a>
              <a href="author.html#20659">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Graham Dumpleton wrote:
&gt;<i> 
</I>&gt;<i> On 26/03/2006, at 8:45 AM, Alberto Ruiz wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> So you are saying that I have to modify my calls to my python scrypts to
</I>&gt;&gt;<i> be propman.py/index , instead of just propman.py, right?
</I>
Yes.

&gt;<i> It should be sufficient to use &quot;propman.py&quot; even if you were to use
</I>&gt;<i> mod_python.publisher as it will fallback to calling &quot;index()&quot;.
</I>
This is not true with mod_python 2.7.10. As the OP states, it returns a 
404 error when calling the script directly. Calling the script with a 
trailing slash returns this error:

Mod_python error: &quot;PythonHandler mod_python.publisher&quot;

Traceback (most recent call last):

   File &quot;/usr/lib/python2.1/site-packages/mod_python/apache.py&quot;, line 
193, in Dispatch
     result = object(req)

   File &quot;/usr/lib/python2.1/site-packages/mod_python/publisher.py&quot;, line 
90, in handler
     if func_path[-1] == &quot;.&quot;:

IndexError: string index out of range

See this for more information:

<A HREF="http://www.modpython.org/live/mod_python-2.7.8/doc-html/hand-pub-alg-trav.html">http://www.modpython.org/live/mod_python-2.7.8/doc-html/hand-pub-alg-trav.html</A>

I believe someone has posted a patch to add more modern index traversal 
to 2.7.x versions of mod_python. You'll need to search the archives.

My recommendation to Publisher beginners is to avoid using modules named 
  index.py and index() functions until they thoroughly understand how 
mod_python works. Index traversal is a special case in 3.x, and it's 
nearly impossible to understand coming from a different background. The 
documentation can also be misleading (note that this is for mod_python 
3.x, not 2.x!):

<A HREF="http://www.modpython.org/live/current/doc-html/hand-pub-alg-trav.html">http://www.modpython.org/live/current/doc-html/hand-pub-alg-trav.html</A>

&gt;&gt;<i> The version of modpython in my old system was 2.7.10, so I assumed that
</I>&gt;&gt;<i> they weren't that many changes.
</I>
They are very different in some key ways, enough to cause you grief. Be 
sure to consult the right documentation.

&gt;&gt;<i> So is there a way to change the call to my scripts so I don't to
</I>&gt;&gt;<i> append /index ?
</I>&gt;<i> 
</I>&gt;<i> If you have control over this box, I would highly recommend you upgrade
</I>&gt;<i> to Apache 2.2 and mod_python 3.2.8.
</I>
If this isn't possible, you can plan ahead and reorganize things a bit. 
Designate a directory that will only serve modules via Publisher. Then 
always set an explicit function to be the target. So if you set up an 
app/ directory, and use SetHandler instead of AddHandler, your URL might 
look like this:

  <A HREF="http://host/app/propman/foo">http://host/app/propman/foo</A>

Where foo() is the function that returns your content. You don't have to 
have an index() function in your module. Yes, people will get strange 
errors if they try to go places they shouldn't, but that'll learn 'em. :)

I use this approach on some Debian Woody systems I still have in 
production, and it works fine. When you move to an Apache 2.x/mod_python 
3.x system, you can start to take advantage of the convenient, but 
totally unnecessary, index traversal capabilities.

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020658.html">[mod_python] publisher handler not working on FreeBSD,
	Apache 1.3 and modpython 2.7
</A></li>
	<LI>Next message: <A HREF="020660.html">[mod_python] publisher handler not working on FreeBSD,	Apache
	1.3 and modpython 2.7
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20659">[ date ]</a>
              <a href="thread.html#20659">[ thread ]</a>
              <a href="subject.html#20659">[ subject ]</a>
              <a href="author.html#20659">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
