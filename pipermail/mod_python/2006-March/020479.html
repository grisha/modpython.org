<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Getting the script name with publisher
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Getting%20the%20script%20name%20with%20publisher&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020480.html">
   <LINK REL="Next"  HREF="020481.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Getting the script name with publisher</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Getting%20the%20script%20name%20with%20publisher&In-Reply-To="
       TITLE="[mod_python] Getting the script name with publisher">grahamd at dscpl.com.au
       </A><BR>
    <I>Wed Mar  1 16:48:49 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020480.html">[mod_python] Path related problems with PSP (possibly a bug)
</A></li>
        <LI>Next message: <A HREF="020481.html">[mod_python] Getting the script name with publisher
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20479">[ date ]</a>
              <a href="thread.html#20479">[ thread ]</a>
              <a href="subject.html#20479">[ subject ]</a>
              <a href="author.html#20479">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Bart Whiteley wrote ..
&gt;<i> Thanks.  I didn't know about __file__.  I how have this which seems to
</I>&gt;<i> work in all cases: 
</I>&gt;<i> 
</I>&gt;<i> def _baseScript(req):
</I>&gt;<i>     drlen = len(req.subprocess_env['DOCUMENT_ROOT'])
</I>&gt;<i>     if os.path.basename(__file__) == 'index.py':
</I>&gt;<i>         return os.path.dirname(__file__)[drlen:]
</I>&gt;<i>     else:
</I>&gt;<i>         return __file__[drlen:-3]
</I>
Will not work when files are in a user account served up by mod_userdir
or where Alias directive is used to map in files outside of the directories
under document root.

Trying to do what you want is actually quite hard and there are a lot of
gotchas. When I get some time I'll try and respond properly.

Graham
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020480.html">[mod_python] Path related problems with PSP (possibly a bug)
</A></li>
	<LI>Next message: <A HREF="020481.html">[mod_python] Getting the script name with publisher
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20479">[ date ]</a>
              <a href="thread.html#20479">[ thread ]</a>
              <a href="subject.html#20479">[ subject ]</a>
              <a href="author.html#20479">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
