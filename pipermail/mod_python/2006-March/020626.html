<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] the domain name in mod_python's
	session/cookiemanagement
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20the%20domain%20name%20in%20mod_python%27s%0A%09session/cookiemanagement&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020625.html">
   <LINK REL="Next"  HREF="020627.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] the domain name in mod_python's
	session/cookiemanagement</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20the%20domain%20name%20in%20mod_python%27s%0A%09session/cookiemanagement&In-Reply-To="
       TITLE="[mod_python] the domain name in mod_python's
	session/cookiemanagement">grahamd at dscpl.com.au
       </A><BR>
    <I>Mon Mar 20 17:37:37 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020625.html">[mod_python] the domain name in mod_python's session/cookie
	management
</A></li>
        <LI>Next message: <A HREF="020627.html">[mod_python] the domain name in mod_python's session/cookie
	management
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20626">[ date ]</a>
              <a href="thread.html#20626">[ thread ]</a>
              <a href="subject.html#20626">[ subject ]</a>
              <a href="author.html#20626">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Kevin Wang wrote ..
&gt;<i> Hi All,
</I>&gt;<i> 
</I>&gt;<i> When a new session/cookie is created on mod_python side, from the source
</I>&gt;<i> code (mod_python/Session.py, mod_python/Cookie.py), I don't see how 
</I>&gt;<i> mod_python sets the domain name for the Set-Cookie http header.
</I>&gt;<i> 
</I>&gt;<i> Without the domain name, the cookie set in the browser is useless (at least
</I>&gt;<i> in IE). 
</I>
In what way is it useless? The session code has been the way it has for
quite a while and no one has complained previously.

&gt;<i> How does it work?  Am I missed anything?
</I>&gt;<i> 
</I>&gt;<i> Any help or input is appreciated.
</I>
I am not a cookie expert, but reading the cookie FAQ, it says:

  If Domain is not set explicitly, then it defaults to the full domain of the
  document creating the cookie.

I take this to mean though that if a domain isn't set it would be up to the
browser to ensure that it only uses the cookie against the original site
that issued it. Thus, that mod_python doesn't set it should not be an
issue.

It could be said though that the current session implementation is a
bit limiting though in that it precludes cross site session cookies within
an enclosing domain. The code could perhaps be enhanced to allow an
option to be set to force the inclusion of a &quot;domain&quot; attribute in the
cookie for the session much like it currently allows with the &quot;path&quot;
attribute. The option for the latter is &quot;ApplicationPath&quot;. As noted in:

  <A HREF="https://issues.apache.org/jira/browse/MODPYTHON-127">https://issues.apache.org/jira/browse/MODPYTHON-127</A>

there is an intent to properly namespace these mod_python options
so maybe there should be an option:

  mod_python.Session.application_domain

with Session code implementin:

        if config.has_key(&quot;mod_python.Session.application_domain&quot;):
            c.domain = config[&quot;mod_python.Session.application_domain&quot;]

Setting the domain though would only be required if you want cross
site session cookies within an enclosing domain, it would not be required
for a single site.

If you are having some problem with even a single site, maybe it is
that the site issues too many cookies and the browser is throwing away
the least used ones:

  Both Internet Explorer and Netscape conform to the RFC 2109 limitations
  on your total cookie count to 300 (this includes a limit of 20 cookies per
  individual domain). If you exceed this, the browser will discard your
  least-used cookies to make room for the new ones.

In other words, maybe the site code is broken in some way and
generating spurious cookies on every request.

FYI, the cookie FAQ can be found at:

  <A HREF="http://www.cookiecentral.com/faq/">http://www.cookiecentral.com/faq/</A>

Graham


</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020625.html">[mod_python] the domain name in mod_python's session/cookie
	management
</A></li>
	<LI>Next message: <A HREF="020627.html">[mod_python] the domain name in mod_python's session/cookie
	management
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20626">[ date ]</a>
              <a href="thread.html#20626">[ thread ]</a>
              <a href="subject.html#20626">[ subject ]</a>
              <a href="author.html#20626">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
