<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] I need to create a Zip file on the fly and write
	it to	the stream without any temp files or in memory file creation?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20I%20need%20to%20create%20a%20Zip%20file%20on%20the%20fly%20and%20write%0A%09it%20to%09the%20stream%20without%20any%20temp%20files%20or%20in%20memory%20file%20creation%3F&In-Reply-To=2389d4730603061631x57fc5476i3b680db335fc84f4%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020550.html">
   <LINK REL="Next"  HREF="020557.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] I need to create a Zip file on the fly and write
	it to	the stream without any temp files or in memory file creation?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Mike Looijmans</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20I%20need%20to%20create%20a%20Zip%20file%20on%20the%20fly%20and%20write%0A%09it%20to%09the%20stream%20without%20any%20temp%20files%20or%20in%20memory%20file%20creation%3F&In-Reply-To=2389d4730603061631x57fc5476i3b680db335fc84f4%40mail.gmail.com"
       TITLE="[mod_python] I need to create a Zip file on the fly and write
	it to	the stream without any temp files or in memory file creation?">nlv11281 at natlab.research.philips.com
       </A><BR>
    <I>Tue Mar  7 01:25:16 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020550.html">[mod_python] I need to create a Zip file on the fly and write it
	to the stream without any temp files or in memory file creation?
</A></li>
        <LI>Next message: <A HREF="020557.html">[mod_python] I need to create a Zip file on the fly and write
	it to	the stream without any temp files or in memory file creation?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20556">[ date ]</a>
              <a href="thread.html#20556">[ thread ]</a>
              <a href="subject.html#20556">[ subject ]</a>
              <a href="author.html#20556">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Use TarFile (python 2.3 or higher) instead of zip.

Most &quot;winzip&quot; alike programs can handle TAR files just fine, so your 
users won't notice the difference. TAR files are designed to be 
streamable (Tape ARchive) and the python interface won't need tell(). 
You can stream anything that supports read() to a TAR  stream.

TAR does not support compression, but it is common to (g)zip the tar 
stream, which yields a streamable compressed result (and still delivers 
a tar file on the other side if you use a content-encoding of x-gzip)

Mike Looijmans
Philips Natlab / Topic Automation


jarrod roberson wrote:
&gt;<i> just to stop the responses now mod_deflate is NOT what I need. I need 
</I>&gt;<i> the end user to get a pop up that allows them to down load the contents 
</I>&gt;<i> of a directory as one big zip file.
</I>&gt;<i> 
</I>&gt;<i> I have a servlet in Java that does just this using the ZipOutputStream 
</I>&gt;<i> and it works great! You can download giant directorys with very very 
</I>&gt;<i> little load on the server since I am doing a ZERO level compression.
</I>&gt;<i> 
</I>&gt;<i> The reason I am looking at a mod_python solution is the way we have 
</I>&gt;<i> mod_dav set up right now it takes over the namespace that we need to do 
</I>&gt;<i> redirects from and can't get Apache to redirect the URL to the Java 
</I>&gt;<i> Servlet, and we have a big time crunch and can't re-archtiect the entire 
</I>&gt;<i> directory layout to try and fix it right now.
</I>&gt;<i> 
</I>&gt;<i> I saw a post recommending to use ZipFile, ZipFile won't work, it needs 
</I>&gt;<i> .tell(). It updates all the zip headers after the fact.
</I>&gt;<i> I found something called zipstream.py, but alas, it does the same thing!
</I>&gt;<i> 
</I>&gt;<i> Before I go and write a ZipOutputStream wrapper around the request 
</I>&gt;<i> object, I wanted to see if any of you know of anythign out there that 
</I>&gt;<i> does this.
</I>&gt;<i> 
</I>&gt;<i> Thanks again, and remember mod_deflate is NOT going to work.
</I>
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020550.html">[mod_python] I need to create a Zip file on the fly and write it
	to the stream without any temp files or in memory file creation?
</A></li>
	<LI>Next message: <A HREF="020557.html">[mod_python] I need to create a Zip file on the fly and write
	it to	the stream without any temp files or in memory file creation?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20556">[ date ]</a>
              <a href="thread.html#20556">[ thread ]</a>
              <a href="subject.html#20556">[ subject ]</a>
              <a href="author.html#20556">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
