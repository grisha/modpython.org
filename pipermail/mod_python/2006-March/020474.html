<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Getting the script name with publisher
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Getting%20the%20script%20name%20with%20publisher&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020473.html">
   <LINK REL="Next"  HREF="020476.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Getting the script name with publisher</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Bart Whiteley</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Getting%20the%20script%20name%20with%20publisher&In-Reply-To="
       TITLE="[mod_python] Getting the script name with publisher">bwhiteley at novell.com
       </A><BR>
    <I>Wed Mar  1 15:19:33 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020473.html">[mod_python] ./configure error
</A></li>
        <LI>Next message: <A HREF="020476.html">[mod_python] Getting the script name with publisher
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20474">[ date ]</a>
              <a href="thread.html#20474">[ thread ]</a>
              <a href="subject.html#20474">[ subject ]</a>
              <a href="author.html#20474">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>In order to generate hyperlinks, I need a reliable way to determine the
script name while using the publisher handler.  I hunted around for a
bit, and only found this from years ago that wasn't answered: 
<A HREF="http://www.modpython.org/pipermail/mod_python/2003-September/014133.html">http://www.modpython.org/pipermail/mod_python/2003-September/014133.html</A>

I was doing this for a while: 
  req.uri[:-len(req.path_info)]

This worked until I renamed my script to index.py, then it fell apart.
So, I guess what I really need is not the script name, but the portion
of the URI prior to the method name.  In some cases this might be the
script name (possibly without the '.py').  In the case of index.py, it
might be the folder containing index.py.  

As an example, I've set up a script loosely based on hello.py: 
<A HREF="http://modpython.org/live/current/doc-html/hand-pub-intro.html">http://modpython.org/live/current/doc-html/hand-pub-intro.html</A>

I place it in /srv/www/htdocs/mptest/index.py (docroot
is /srv/www/htdocs).
When I access it like this: <A HREF="http://www/mptest/say/hello,">http://www/mptest/say/hello,</A> 
I see the following vars: 
SCRIPT_FILENAME		/srv/www/htdocs/mptest/say
PATH_INFO		/hello
SCRIPT_NAME		/mptest/say

In this example, I'd like to isolate &quot;/mptest&quot;.

Does anyone have a way to reliable isolate the script name, or the
folder containing index.py? 

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020473.html">[mod_python] ./configure error
</A></li>
	<LI>Next message: <A HREF="020476.html">[mod_python] Getting the script name with publisher
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20474">[ date ]</a>
              <a href="thread.html#20474">[ thread ]</a>
              <a href="subject.html#20474">[ subject ]</a>
              <a href="author.html#20474">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
