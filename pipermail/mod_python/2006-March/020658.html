<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] publisher handler not working on FreeBSD,
	Apache 1.3 and modpython 2.7
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20publisher%20handler%20not%20working%20on%20FreeBSD%2C%0A%09Apache%201.3%20and%20modpython%202.7&In-Reply-To=1143326712.28136.40.camel%40localhost.localdomain">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020657.html">
   <LINK REL="Next"  HREF="020659.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] publisher handler not working on FreeBSD,
	Apache 1.3 and modpython 2.7</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20publisher%20handler%20not%20working%20on%20FreeBSD%2C%0A%09Apache%201.3%20and%20modpython%202.7&In-Reply-To=1143326712.28136.40.camel%40localhost.localdomain"
       TITLE="[mod_python] publisher handler not working on FreeBSD,
	Apache 1.3 and modpython 2.7">grahamd at dscpl.com.au
       </A><BR>
    <I>Sat Mar 25 20:34:28 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020657.html">[mod_python] publisher handler not working on FreeBSD,	Apache
	1.3 and modpython 2.7
</A></li>
        <LI>Next message: <A HREF="020659.html">[mod_python] publisher handler not working on FreeBSD,	Apache
	1.3 and modpython 2.7
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20658">[ date ]</a>
              <a href="thread.html#20658">[ thread ]</a>
              <a href="subject.html#20658">[ subject ]</a>
              <a href="author.html#20658">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 26/03/2006, at 8:45 AM, Alberto Ruiz wrote:

&gt;<i> Thanks for replying so quickly.
</I>&gt;<i>
</I>&gt;<i> This is the part that is confusing.  Everything worked fine on a Linux
</I>&gt;<i> Debian system.  So now that I migrated to a FreeBSD system, I have to
</I>&gt;<i> create other functions?  What's different?
</I>
Are you sure you were using mod_python before and not just a CGI script
written in Python? They are different things and you do not need
mod_python to write CGI scripts. In CGI scripts you don't need the
functions as script are executed in total each time. Thus, the fact
you didn't have functions before suggests to me you weren't truly
using mod_python before.

Can you post a small but complete self contained example of what you
were using before.

&gt;<i> My main function is labeled
</I>&gt;<i> 'index': Here is a snipet of what I have in propman.py:
</I>&gt;<i>
</I>&gt;<i> from mod_python import Cookie
</I>&gt;<i> def index (req,LLRuser='',LLRpw=''):
</I>&gt;<i> 	global R; R=req; R.content_type=&quot;text/html&quot;
</I>&gt;<i> 	cur=DBconnectpropman.DB.cursor()
</I>&gt;<i> ......
</I>
This code is poorly written. You should NOT assign a &quot;req&quot; object to
a global variable because if you ever upgrade to Apache 2.0 and use
a multithread Apache MPM then multiple requests could be executing in
index() at the same time and they will interfere with each other. You
should pass the &quot;req&quot; object to other functions if they need to access
it.

&gt;<i> So you are saying that I have to modify my calls to my python scrypts 
</I>&gt;<i> to
</I>&gt;<i> be propman.py/index , instead of just propman.py, right?
</I>
It should be sufficient to use &quot;propman.py&quot; even if you were to use
mod_python.publisher as it will fallback to calling &quot;index()&quot;.

&gt;<i> The version of modpython in my old system was 2.7.10, so I assumed that
</I>&gt;<i> they weren't that many changes.
</I>&gt;<i> So is there a way to change the call to my scripts so I don't to
</I>&gt;<i> append /index ?
</I>
If you have control over this box, I would highly recommend you upgrade
to Apache 2.2 and mod_python 3.2.8.

Graham


&gt;<i> On Sat, 2006-03-25 at 17:10 -0500, Jorey Bump wrote:
</I>&gt;&gt;<i> Alberto Ruiz wrote:
</I>&gt;&gt;&gt;<i> I've looked at the documentation and the faq section but I can't 
</I>&gt;&gt;&gt;<i> figure
</I>&gt;&gt;&gt;<i> out what I'm doing wrong.   The test script works fine as seen below 
</I>&gt;&gt;&gt;<i> in
</I>&gt;&gt;&gt;<i> the first &lt;Directory&gt; directive.  But when I try to use the publisher
</I>&gt;&gt;&gt;<i> handler, I get error not found (404).  If I add 'SetHandler', it 
</I>&gt;&gt;&gt;<i> dumps
</I>&gt;&gt;&gt;<i> the script code.   What am I missing? Or what else can I do to
</I>&gt;&gt;&gt;<i> troubleshoot the issue.  Let me know if I need to post more of the
</I>&gt;&gt;&gt;<i> httpd.conf.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> URLS tried:
</I>&gt;&gt;&gt;<i> <A HREF="http://www.brianheadrentals.com/cgi-bin/test.py">http://www.brianheadrentals.com/cgi-bin/test.py</A>
</I>&gt;&gt;&gt;<i> <A HREF="http://www.brianheadrentals.com/propman.py">http://www.brianheadrentals.com/propman.py</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Go back and read the documentation on Publisher (for your version of
</I>&gt;&gt;<i> mod_python). Create a function within the module to use as your 
</I>&gt;&gt;<i> target:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>   <A HREF="http://www.brianheadrentals.com/propman.py/somefunction">http://www.brianheadrentals.com/propman.py/somefunction</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020657.html">[mod_python] publisher handler not working on FreeBSD,	Apache
	1.3 and modpython 2.7
</A></li>
	<LI>Next message: <A HREF="020659.html">[mod_python] publisher handler not working on FreeBSD,	Apache
	1.3 and modpython 2.7
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20658">[ date ]</a>
              <a href="thread.html#20658">[ thread ]</a>
              <a href="subject.html#20658">[ subject ]</a>
              <a href="author.html#20658">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
