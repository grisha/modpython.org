<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Mod_python Security
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Mod_python%20Security&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020490.html">
   <LINK REL="Next"  HREF="020494.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Mod_python Security</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Mod_python%20Security&In-Reply-To="
       TITLE="[mod_python] Mod_python Security">grahamd at dscpl.com.au
       </A><BR>
    <I>Thu Mar  2 16:21:57 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020490.html">[mod_python] problem setting up mod_python under Ubuntu Breezy
</A></li>
        <LI>Next message: <A HREF="020494.html">[mod_python] Mod_python Security
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20488">[ date ]</a>
              <a href="thread.html#20488">[ thread ]</a>
              <a href="subject.html#20488">[ subject ]</a>
              <a href="author.html#20488">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Another one, an important one at that.

7. Be aware that a security hole was found in mod_python. Unfortunately,
I can't seem to find the proper security advisory for it on mod_python
site. Only reference seems to be:

  <A HREF="http://www.modpython.org/3.1.4.html">http://www.modpython.org/3.1.4.html</A>

I could be blind, but I would have thought it would have been important
to keep the notice on the main page.

If using 2.X stream, ensure you are using 2.7.11 or make sure your
distribution has patched 2.7.10 if that is what they are using.

If using 3.X stream. ensure you are using 3.1.4 or make sure your
distribution has patched 3.0.X or 3.1.3 if that is what they are using.

Graham
  
Graham Dumpleton wrote ..
&gt;<i> Some more.
</I>&gt;<i> 
</I>&gt;<i> 1. If using mod_python.psp and you have PythonDebug enabled
</I>&gt;<i> the source code for your PSP pages can be visible by virtue of
</I>&gt;<i> putting an underscore on the end of the extension. Eg. &quot;.psp_&quot;.
</I>&gt;<i> 
</I>&gt;<i> It is thus a good idea not to have PyhthonDebug enabled for production
</I>&gt;<i> and/or public web site if using mod_python.psp. If you really need
</I>&gt;<i> PythonDebug to be on, only enable it for requests coming from
</I>&gt;<i> you own client machine in some way.
</I>&gt;<i> 
</I>&gt;<i> 2. If Apache has write access to directories, it can drop &quot;.pyc&quot; files
</I>&gt;<i> into the directories for modules loaded. This extension isn't generally
</I>&gt;<i> protected and people can download the &quot;.pyc&quot; files and potentially
</I>&gt;<i> work out what your code is. Use something like:
</I>&gt;<i> 
</I>&gt;<i>    &lt;Files *.pyc&gt;
</I>&gt;<i>    deny from all
</I>&gt;<i>    &lt;/Files&gt;
</I>&gt;<i> 
</I>&gt;<i> Depending on platform, may have to block access to &quot;.pyo&quot; files as
</I>&gt;<i> well.
</I>&gt;<i> 
</I>&gt;<i> 3. PythonDebug in general can reveal stack traces to a client when
</I>&gt;<i> something goes wrong. In worst case, this may reveal secret information.
</I>&gt;<i> 
</I>&gt;<i> 4. Try to avoid putting source code in actual directories visible to
</I>&gt;<i> Apache. Especially do not put sensitive information in such files.
</I>&gt;<i> The reason here is that it only takes one mistake in Apache  
</I>&gt;<i> configuration
</I>&gt;<i> and all your code would be visible.
</I>&gt;<i> 
</I>&gt;<i> 5. If using an extension such as &quot;.html&quot; with AddHandler to map to
</I>&gt;<i> handler code in actual directory, ensure you block access to &quot;.py&quot;
</I>&gt;<i> extension if need be.
</I>&gt;<i> 
</I>&gt;<i>    &lt;Files *.py&gt;
</I>&gt;<i>    deny from all
</I>&gt;<i>    &lt;/Files&gt;
</I>&gt;<i> 
</I>&gt;<i> 6. If writing a custom handler, if wanting to return apache.DECLINED,
</I>&gt;<i> make sure you understand what it does. Specifically, it will cause the
</I>&gt;<i> builtin default Apache handler to still run, which will serve up static
</I>&gt;<i> files. Like above, you may need to deny access to certain files as a
</I>&gt;<i> result.
</I>&gt;<i> 
</I>&gt;<i> That is all I can think of for now. Sorry if some of it makes no sense,
</I>&gt;<i> am in a rush.
</I>&gt;<i> 
</I>&gt;<i> Graham
</I>&gt;<i> 
</I>&gt;<i> On 03/03/2006, at 12:54 AM, Nicolas Lehuen wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; There's an important rule :
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; If you use the publisher, everything which is defined in a published
</I>&gt;<i> &gt; module is generally accessible from the web, except if its name begins
</I>&gt;<i> &gt; with an underscore.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; For example :
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; # index.py
</I>&gt;<i> &gt; # BAD !
</I>&gt;<i> &gt; secret_password = &quot;foobar&quot;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; def index(req,password):
</I>&gt;<i> &gt;     if password != secret_password:
</I>&gt;<i> &gt;         return util.redirect(req,'/rejected.html')
</I>&gt;<i> &gt;     else:
</I>&gt;<i> &gt;         return &quot;Welcome !&quot;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Your secret password in accessible through
</I>&gt;<i> &gt; <A HREF="http://my_server/my_folder/index.py/secret_password">http://my_server/my_folder/index.py/secret_password</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; To make sure it won't be accessed, rename secret_password to  
</I>&gt;<i> &gt; _secret_password.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; There are exceptions to this &quot;everything is accessible&quot; rule, namely
</I>&gt;<i> &gt; imported modules, new-styles classes and built-in functions cannot be
</I>&gt;<i> &gt; traversed nor published. This prevents basic leaks like being able to
</I>&gt;<i> &gt; call sys.exit() from any published module that imports sys. Those
</I>&gt;<i> &gt; rules are specified in the lib/python/mod_python/publisher.py file, if
</I>&gt;<i> &gt; you are curious.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; But in any case, be aware that any string defined in a published
</I>&gt;<i> &gt; module is accessible unless its name is prefixed by an underscore,
</I>&gt;<i> &gt; which includes your precious database password.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Regards,
</I>&gt;<i> &gt; Nicolas
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 2006/3/2, Mike Looijmans &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">nlv11281 at natlab.research.philips.com</A>&gt;:
</I>&gt;<i> &gt;&gt; As with any server-side scripting, there's:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; - Cross-site scripting
</I>&gt;<i> &gt;&gt; - Code injection
</I>&gt;<i> &gt;&gt; - SQL injection
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; But that's typically 'your' fault...
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Mike Looijmans
</I>&gt;<i> &gt;&gt; Philips Natlab / Topic Automation
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; marinus van aswegen wrote:
</I>&gt;<i> &gt;&gt;&gt; Hi
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; I'd like to publish my page but I'm not sure what security issues
</I>&gt;<i> &gt;&gt;&gt; mod_python typically face.
</I>&gt;<i> &gt;&gt;&gt; Any recommendations?
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; Regards
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; --------------------------------------------------------------------
</I>&gt;<i> &gt;&gt;&gt; ----
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; _______________________________________________
</I>&gt;<i> &gt;&gt;&gt; Mod_python mailing list
</I>&gt;<i> &gt;&gt;&gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> &gt;&gt;&gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; _______________________________________________
</I>&gt;<i> &gt;&gt; Mod_python mailing list
</I>&gt;<i> &gt;&gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> &gt;&gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Mod_python mailing list
</I>&gt;<i> &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I></PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020490.html">[mod_python] problem setting up mod_python under Ubuntu Breezy
</A></li>
	<LI>Next message: <A HREF="020494.html">[mod_python] Mod_python Security
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20488">[ date ]</a>
              <a href="thread.html#20488">[ thread ]</a>
              <a href="subject.html#20488">[ subject ]</a>
              <a href="author.html#20488">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
