<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] extending util.FieldStorage
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20extending%20util.FieldStorage&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014318.html">
   <LINK REL="Next"  HREF="014320.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] extending util.FieldStorage</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Daniel J. Popowich</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20extending%20util.FieldStorage&In-Reply-To="
       TITLE="[mod_python] extending util.FieldStorage">dpopowich at mtrsd.k12.ma.us
       </A><BR>
    <I>Wed Oct 15 12:31:41 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="014318.html">[mod_python] autoreload with mod_pthon 3.1.0a
</A></li>
        <LI>Next message: <A HREF="014320.html">[mod_python] extending util.FieldStorage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14319">[ date ]</a>
              <a href="thread.html#14319">[ thread ]</a>
              <a href="subject.html#14319">[ subject ]</a>
              <a href="author.html#14319">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
I found myself wanting methods of util.FieldStorage that are found in
the cgi module since python 2.2, getfirst and getlist.  They save tons
of code of the form:

       if form.has_key('foo'):
           foo = form['foo']
           if type(foo) is not type([]):
               foo = [foo]
       else:
           foo = []

which can cause code-clutter if you have a number of form variables.
Instead, one can simply write:

      foo = form.getlist('foo')

See the cgi documentation for 2.2 or later for details about these
methods and how they can help you reduce code and write safer code to
protect against malformed requests.

I extended util.FieldStorage to add those two methods plus a get()
(which behaves like a standard dict.get) and thought others might like
the code (which I didn't write in whole, but stole mostly from modules
cgi and UserDict).

If found useful by many, perhaps they can be included in the 3.1
distribution?

Enjoy,

Daniel Popowich
Network Specialist
MTRSD

======================================================================

from mod_python import util

class form(util.FieldStorage):

    def get(self, key, default=None):
        if not self.has_key(key):
            return default
        return self[key]

    def getfirst(self, key, default=None):

        if self.has_key(key):
            value = self[key]
            if type(value) is type([]):
                return value[0]
            else:
                return value
        else:
            return default

    def getlist(self, key):

        if self.has_key(key):
            value = self[key]
            if type(value) is type([]):
                return value
            else:
                return [value]
        else:
            return []


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014318.html">[mod_python] autoreload with mod_pthon 3.1.0a
</A></li>
	<LI>Next message: <A HREF="014320.html">[mod_python] extending util.FieldStorage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14319">[ date ]</a>
              <a href="thread.html#14319">[ thread ]</a>
              <a href="subject.html#14319">[ subject ]</a>
              <a href="author.html#14319">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
