<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] form, req problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20form%2C%20req%20problem&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003226.html">
   <LINK REL="Next"  HREF="003233.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] form, req problem</H1>
    <B>Julio Mendoza</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20form%2C%20req%20problem&In-Reply-To="
       TITLE="[mod_python] form, req problem">jm at eemsystems.cjb.net
       </A><BR>
    <I>Wed Oct 15 15:03:24 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="003226.html">[mod_python] Having 2 scripts with the same name
</A></li>
        <LI>Next message: <A HREF="003233.html">[mod_python] form, req problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3232">[ date ]</a>
              <a href="thread.html#3232">[ thread ]</a>
              <a href="subject.html#3232">[ subject ]</a>
              <a href="author.html#3232">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>this scrips was working good, but now i can't find what is the problem.

This was working in the following manner:

the firt time you call testpy control=''

then testpy return a html form with the variable: Fecha_Inicial,
Fecha_Final (in this case) an a hidden control with value '1'

The form action is the same function testpy, then in the second pass
control must be '1'... but this is not actualy the case.

I'm using python from debian/unstable



***********************************************************************

def testpy(req,control=''):
	if control=='':
		    return
aaa.simpleform2('./testpy',&quot;Fecha_Inicial,Fecha_Final&quot;,&quot;Pacientes por
Medicos&quot;)
	elif control=='1':
		[Fecha_Inicial,Fecha_Final]=[req.form[&quot;Fecha_Inicial&quot;],req.form[&quot;Fecha_Final&quot;]]
		if len(Fecha_Final)&lt;3:
				Fecha_Final=Fecha_Inicial
	return Fecha_Inicial,Fecha_Final,control

************************************************************************
#module: aaa


def simpleform2(action,strparametros,titulo='',insertar=''):
	import string
	s='''&lt;form method=&quot;post&quot; action=&quot;''' +action+ '&quot;&gt;&lt;input type=&quot;hidden&quot;
name=&quot;control&quot; value=&quot;1&quot;&gt;'
	parametros=string.split(strparametros,',')
	if len(strparametros)&gt;2:
		s=s+&quot;&quot;&quot;&lt;table&gt;&lt;caption&gt;&quot;&quot;&quot;+titulo+&quot;&quot;&quot;&lt;/caption&gt;&quot;&quot;&quot;
		for i in parametros:
			s=s+&quot;&quot;&quot;&lt;tr&gt;&lt;td&gt;&quot;&quot;&quot;+i+''':&lt;/td&gt;
	&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;'''+i+'''&quot; size=&quot;20&quot; maxlength=&quot;30&quot;
value=&quot;&quot;&gt;
	&lt;/td&gt;
	&lt;/tr&gt;'''
		s=s+'&lt;/table&gt;'
	s=s+insertar+'&lt;br&gt;&lt;input TYPE=&quot;submit&quot; VALUE=&quot;Aceptar&quot;&gt;&lt;/form&gt;'
	return s
***************************************************************************

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003226.html">[mod_python] Having 2 scripts with the same name
</A></li>
	<LI>Next message: <A HREF="003233.html">[mod_python] form, req problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3232">[ date ]</a>
              <a href="thread.html#3232">[ thread ]</a>
              <a href="subject.html#3232">[ subject ]</a>
              <a href="author.html#3232">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
