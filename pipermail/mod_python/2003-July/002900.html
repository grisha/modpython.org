<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] 2.7.8: import exceptions -&gt; os.error no longer ==
	OSError 
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%202.7.8%3A%20import%20exceptions%20-%3E%20os.error%20no%20longer%20%3D%3D%0A%09OSError%20&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002902.html">
   <LINK REL="Next"  HREF="002903.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] 2.7.8: import exceptions -&gt; os.error no longer ==
	OSError </H1>
    <B>Gregory Bond</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%202.7.8%3A%20import%20exceptions%20-%3E%20os.error%20no%20longer%20%3D%3D%0A%09OSError%20&In-Reply-To="
       TITLE="[mod_python] 2.7.8: import exceptions -&gt; os.error no longer ==
	OSError ">gnb at itga.com.au
       </A><BR>
    <I>Mon Jul 21 17:48:14 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="002902.html">[mod_python] 2.7.8: os.error no longer == OSError
</A></li>
        <LI>Next message: <A HREF="002903.html">[mod_python] Errors off of a fresh install.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2900">[ date ]</a>
              <a href="thread.html#2900">[ thread ]</a>
              <a href="subject.html#2900">[ subject ]</a>
              <a href="author.html#2900">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I've done some more work and it appears that doing
	import exceptions
from inside mod_python buggers things more than somewhat for every mod_python 
script run in that process from then on.

(This was in some old and unconverted python 1.3-era code)

------------
def handler(req):
        req.send_http_header()
        req.write(&quot;before import exceptions\n&quot;)
        req.write(&quot;OSError is %d\n&quot; % id(OSError))
        req.write(&quot;os.error is %d\n&quot; % id(os.error))
        import exceptions
        req.write(&quot;after import exceptions\n&quot;)
        req.write(&quot;OSError is %d\n&quot; % id(OSError))
        req.write(&quot;os.error is %d\n&quot; % id(os.error))

        return apache.OK

------------
before import exceptions
OSError is 539788
os.error is 539788
after import exceptions
OSError is 1258380
os.error is 539788

----------
But if I run the same code (writing to stdout, rather than a req structure) 
from the command line it works OK:
----
import os, sys
req = sys.stdout

req.write(&quot;before import exceptions\n&quot;)
req.write(&quot;OSError is %d\n&quot; % id(OSError))
req.write(&quot;os.error is %d\n&quot; % id(os.error))
import exceptions
req.write(&quot;after import exceptions\n&quot;)
req.write(&quot;OSError is %d\n&quot; % id(OSError))
req.write(&quot;os.error is %d\n&quot; % id(os.error))
-----
lightning$ python t.py
before import exceptions
OSError is 900204
os.error is 900204
after import exceptions
OSError is 900204
os.error is 900204


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002902.html">[mod_python] 2.7.8: os.error no longer == OSError
</A></li>
	<LI>Next message: <A HREF="002903.html">[mod_python] Errors off of a fresh install.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2900">[ date ]</a>
              <a href="thread.html#2900">[ thread ]</a>
              <a href="subject.html#2900">[ subject ]</a>
              <a href="author.html#2900">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
