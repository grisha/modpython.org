<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Problem with win32 installation - can't authenticate
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Problem%20with%20win32%20installation%20-%20can%27t%20authenticate&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002860.html">
   <LINK REL="Next"  HREF="002862.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Problem with win32 installation - can't authenticate</H1>
    <B>Jacob Martinson</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Problem%20with%20win32%20installation%20-%20can%27t%20authenticate&In-Reply-To="
       TITLE="[mod_python] Problem with win32 installation - can't authenticate">jmartinson at info234.com
       </A><BR>
    <I>Thu Jul 10 17:00:03 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="002860.html">[mod_python] missing path element in path_info
</A></li>
        <LI>Next message: <A HREF="002862.html">[mod_python] Problem with win32 installation - can't authenticate
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2861">[ date ]</a>
              <a href="thread.html#2861">[ thread ]</a>
              <a href="subject.html#2861">[ subject ]</a>
              <a href="author.html#2861">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>My problem: after installing apache(win32), python(win32) and 
modpython(win32) the basic test works for returning 'hello world' but when 
i try the authentication example from the documentation, I am not able to 
authenticate.  After a little investigation, I find that both req.user and 
req.get_basic_auth_pw() are None.

I am prompted for username/password, but I can't authenticate 
successfully.  Also, if I ignore req.user and password and just return 
apache.OK, it allows me to access the file I am requesting.

Here's the relevant parts of my apache config:

LoadModule python_module modules/mod_python.so

&lt;Directory &quot;c:\Documents and Settings\jmartinson\docroot&quot;&gt;
   AddHandler python-program .py
   PythonHandler mptest
   PythonDebug On
&lt;/Directory&gt;

&lt;Directory &quot;c:\Documents and Settings\jmartinson\docroot\test1&quot;&gt;
     AddHandler python-program .py
     PythonHandler myscript
     PythonAuthenHandler myscript
     PythonDebug Off
     AuthType Basic
     AuthName &quot;Restricted Area&quot;
     require valid-user
&lt;/Directory&gt;

Here's my handler (myscript.py):

from mod_python import apache
def authenhandler(req):
         user = req.user
         pw = req.get_basic_auth_pw()
         req.write( str(user) + ':' + str(pw) + str('\n') )
         return apache.OK

         if user == &quot;spam&quot;:
                 return apache.OK
         else:
                 return apache.HTTP_UNAUTHORIZED

I put in the first &quot;return apache.OK&quot; for testing purposes.  If I take that 
out authentication still won't work.  I also took out the second half of 
the if statement testing the password too.

Version info:
apache: 
<A HREF="http://apache.oregonstate.edu/httpd/binaries/win32/apache_2.0.47-win32-x86-no_ssl.msi">http://apache.oregonstate.edu/httpd/binaries/win32/apache_2.0.47-win32-x86-no_ssl.msi</A>
modpython: 
<A HREF="http://apache.webmeta.com/httpd/modpython/win/3.0.3/mod_python-3.0.3.win32.exe">http://apache.webmeta.com/httpd/modpython/win/3.0.3/mod_python-3.0.3.win32.exe</A>
python: <A HREF="http://python.org/ftp/python/2.2.3/Python-2.2.3.exe">http://python.org/ftp/python/2.2.3/Python-2.2.3.exe</A>

I would much rather be using modpython under a unix environment, but I am 
doing this on my work laptop and I don't have the option of eliminating the 
Windows environment and I can't get apache to compile under cygwin.

Any information or suggestions are greatly appreciated!

-Jacob 

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002860.html">[mod_python] missing path element in path_info
</A></li>
	<LI>Next message: <A HREF="002862.html">[mod_python] Problem with win32 installation - can't authenticate
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2861">[ date ]</a>
              <a href="thread.html#2861">[ thread ]</a>
              <a href="subject.html#2861">[ subject ]</a>
              <a href="author.html#2861">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
