<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Source code displayed by Mozilla/Firefox
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Source%20code%20displayed%20by%20Mozilla/Firefox&In-Reply-To=20050605160447.95587.qmail%40web25510.mail.ukl.yahoo.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018280.html">
   <LINK REL="Next"  HREF="018290.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Source code displayed by Mozilla/Firefox</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Source%20code%20displayed%20by%20Mozilla/Firefox&In-Reply-To=20050605160447.95587.qmail%40web25510.mail.ukl.yahoo.com"
       TITLE="[mod_python] Source code displayed by Mozilla/Firefox">grahamd at dscpl.com.au
       </A><BR>
    <I>Sun Jun  5 18:14:37 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="018280.html">[mod_python] Source code displayed by Mozilla/Firefox
</A></li>
        <LI>Next message: <A HREF="018290.html">[mod_python] Source code displayed by Mozilla/Firefox
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18282">[ date ]</a>
              <a href="thread.html#18282">[ thread ]</a>
              <a href="subject.html#18282">[ subject ]</a>
              <a href="author.html#18282">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 06/06/2005, at 2:04 AM, Colin Doherty wrote:
&gt;<i> I'm using mod_python servlets and psp and although the
</I>&gt;<i> code works correctly for IE, the source code of the
</I>&gt;<i> template is displayed with Mozilla and Firefox when
</I>&gt;<i> called from the servlet.
</I>&gt;<i>
</I>&gt;<i> I'm setting the content type within the servlet:
</I>&gt;<i>
</I>&gt;<i> class test(Servlet):
</I>&gt;<i>   content_type = 'text/html'
</I>&gt;<i>
</I>&gt;<i> and calling the template thus:
</I>&gt;<i>
</I>&gt;<i>   def respond(self):
</I>&gt;<i>     Servlet.respond(self)
</I>&gt;<i>     template = PSP(self.req, filename='test.html')
</I>&gt;<i>     template.run({'servlet':self})
</I>&gt;<i>     return True
</I>&gt;<i>
</I>&gt;<i> Any suggestions appreciated.
</I>
Are you using mpservlets as the actual handler, ie.:

   AddHandler python-program .mps
   PythonHandler mod_python.servlet

or triggering mpservlets from a handler of your own creation somehow?

What is the URL you are using for the request? Are you using &quot;test.mps&quot;,
&quot;test.html&quot; or just &quot;test&quot; with no extension?

Given you say it works for one browser and not another, then can only
speculate that based on request headers sent by browser Apache is making
a different decision as to what to serve up. This though could only
be the case though if &quot;MultiViews&quot; was enabled and you were using URL
of just &quot;test&quot; with no extension and Apache was as a result was having 
to
make a choice between serving up &quot;test.html&quot; as a static file or running
the mod_python handler for &quot;test.mps&quot;.

If these assumptions are somehow right, make sure you disable MultiViews
by specifying in your Apache configuration:

   Options -MultiViews

for that part of the directory heirachy, and make sure you always use
&quot;test.mps&quot; explicitly. You might lesson the risk of a problem by still
calling your PSP file &quot;test.psp&quot; and not &quot;test.html&quot; and then forbidding
direct access to all .psp files using:

   &lt;Files *.psp&gt;
   deny from all
   &lt;/Files&gt;

in your Apache configuration.

BTW, why specifically are you using mpservlets as when using PSP you may
find they don't mesh very well? For example, one of the points of using
mpservlets is that by supplying its own write/writeln methods in the
servlet it does its own buffering of output. Because PSP is going to
write direct to the request object using req.write(), the buffering in
mpservlets is bypassed. Another reason people use mpservlets is that it
has some session support, but then so does PSP.

Overall, only thing I see where you perhaps gain something from 
mpservlets
with the way you are using it, is the fact that it can dispatch to 
different
handlers contained in separate files in the same directory. If this is
all you are really after, you may find it less complicated to use 
Vampire.
If you are using mpservlets because the handler is then an object, that
is easy enough to accomplish with basic handlers as the handler can be
any callable object anyway and it would be straight forward to write 
your
own servlet like handler better suited to how you want to do things.

Graham






</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018280.html">[mod_python] Source code displayed by Mozilla/Firefox
</A></li>
	<LI>Next message: <A HREF="018290.html">[mod_python] Source code displayed by Mozilla/Firefox
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18282">[ date ]</a>
              <a href="thread.html#18282">[ thread ]</a>
              <a href="subject.html#18282">[ subject ]</a>
              <a href="author.html#18282">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
