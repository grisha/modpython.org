<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Problems with mod_python on MacOS
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Problems%20with%20mod_python%20on%20MacOS&In-Reply-To=1119750342.28967.34.camel%40cm61-18-245-172.hkcable.com.hk">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018510.html">
   <LINK REL="Next"  HREF="018513.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Problems with mod_python on MacOS</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Problems%20with%20mod_python%20on%20MacOS&In-Reply-To=1119750342.28967.34.camel%40cm61-18-245-172.hkcable.com.hk"
       TITLE="[mod_python] Problems with mod_python on MacOS">grahamd at dscpl.com.au
       </A><BR>
    <I>Sun Jun 26 03:38:48 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="018510.html">[mod_python] Problems with mod_python on MacOS
</A></li>
        <LI>Next message: <A HREF="018513.html">[mod_python] Problems with mod_python on MacOS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18511">[ date ]</a>
              <a href="thread.html#18511">[ thread ]</a>
              <a href="subject.html#18511">[ subject ]</a>
              <a href="author.html#18511">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>There is an alternate solution somewhere down below. :-)

On 26/06/2005, at 11:45 AM, Wouter van Marle wrote:

&gt;<i>  On Sat, 2005-06-25 at 20:27 -0400, Paul Sholtz wrote:
</I>&gt;<i>
</I>&gt;&gt;<i>  Thanks for the advice. In fact, I already checked that Web page
</I>&gt;&gt;<i>  before I posted on this list, but .... for some reason it's still not
</I>&gt;&gt;<i>  working.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  I'm baffled b/c the Web page says if you get an &quot;Internal Server
</I>&gt;&gt;<i>  Error&quot;, it probably means that Apache hasn't loaded mod_python yet,
</I>&gt;&gt;<i>  but per what I'm seeing in error_log, and per the sig I can in my
</I>&gt;&gt;<i>  apache error messages, it looks like mod_python has in fact been
</I>&gt;&gt;<i>  loaded...
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  If your script does not return any output to apache to display, then
</I>&gt;<i> you also get an internal server error. So check your script!
</I>
For the &quot;mptest&quot; example I don't think this is the case.

If one is using mod_python.publisher and you don't write back a response
explicitly and let the function return None, then yes you will get a 500
error, but not so with mptest.

For example, for mptest.py, if you have:

   def handler(req):
     req.content_type = &quot;text/plain&quot;
     req.send_http_header()
     req.write(&quot;XXX&quot;)

Ie., leave off return of apache.OK, you will get an error in the browser
like:

XXX
&lt;pre&gt;
Mod_python error: &quot;PythonHandler mptest&quot;

Traceback (most recent call last):

   File  
&quot;/System/Library/Frameworks/Python.framework/Versions/2.3/lib/ 
python2.3/site-packages/mod_python/apache.py&quot;, line 310, in  
HandlerDispatch
     assert (type(result) == type(int())), \

AssertionError: Handler 'mptest' returned invalid return code.

&lt;/pre&gt;

With the Python error details also appearing in the Apache error log.

If you simply don't return any content, ie.,

   def handler(req):
     return apache.OK

The browser will get a 200 and may well timeout waiting for content.

I am inclined to think that what may be happening is that the original
poster is running up against problems associated with:

   <A HREF="http://issues.apache.org/jira/browse/MODPYTHON-35">http://issues.apache.org/jira/browse/MODPYTHON-35</A>

This is where 500 errors are occurring in some strange situations in
the mod_python.c code file but reasons for the 500 errors aren't logged.

This exact issue was hitting someone else before with Mac OS X. It
came down to being caused by a known Mac OS X specific problem but where
rather than causing the Apache process to crash as it had for other
people, it was causing 500 errors.

End result is that original poster should try applying the patches
detailed at:

   <A HREF="http://www.dscpl.com.au/projects/vampire/patches.html">http://www.dscpl.com.au/projects/vampire/patches.html</A>

These actually address something multithreading issues, but also
include a Mac OS X specific workaround for the problem which can cause
these Apache crashes or 500 errors on that platform.

Graham

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018510.html">[mod_python] Problems with mod_python on MacOS
</A></li>
	<LI>Next message: <A HREF="018513.html">[mod_python] Problems with mod_python on MacOS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18511">[ date ]</a>
              <a href="thread.html#18511">[ thread ]</a>
              <a href="subject.html#18511">[ subject ]</a>
              <a href="author.html#18511">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
