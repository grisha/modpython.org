<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] mod_python crashes Apache under Windows XP
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python%20crashes%20Apache%20under%20Windows%20XP&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018521.html">
   <LINK REL="Next"  HREF="018517.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] mod_python crashes Apache under Windows XP</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Patrick Fitzsimmons</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python%20crashes%20Apache%20under%20Windows%20XP&In-Reply-To="
       TITLE="[mod_python] mod_python crashes Apache under Windows XP">patfitz at gmail.com
       </A><BR>
    <I>Mon Jun 27 02:56:55 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="018521.html">[mod_python] Problems with mod_python on MacOS
</A></li>
        <LI>Next message: <A HREF="018517.html">[mod_python] mod_python crashes Apache under Windows XP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18516">[ date ]</a>
              <a href="thread.html#18516">[ thread ]</a>
              <a href="subject.html#18516">[ subject ]</a>
              <a href="author.html#18516">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I am running mod_python 3.1 under Apache 2.0.50.0 and Windows XP.  I
am building a database driven web site using Python Server Pages and a
MySQL back end (using the ADOdb module).  The site is up and working
fine.  My problem is that when I try and do a primitive load test by
reloading the pages very, very quickly, two critical bugs appear.

The first problem is that sometimes the req.uri mysteriously changes
from &quot;/home.html&quot; to &quot;other.html&quot;

Here's the source code in my handler script:

----------------------------------------------
from mod_python import apache, psp, Session, util
##import wingdbstub
import sys
import os
import traceback
import time
import initModule


def handler(req):
    #Standard out should print to the browser for debugging
    oldstdout = sys.stdout
    sys.stdout = req

    print req.uri       # Here req.uri always prints out &quot;/home.html&quot;,
even when reloading quickly
    print &quot;1&quot;
    init = initModule.InitClass()
    init.req = req
    print init.req.uri   # Here req.uri also prints out &quot;/home.html&quot;
until I start reloading too quickly.  Then it prints out &quot;/other.html&quot;

What's going on here?  Are somehow the two requests trying to access
the same object?  But why does it say &quot;/other.html&quot;?  From what I can
tell, the word other.html is not used a single time in any of my
scripts nor does other.html exist as a file.  I've gotten the same
problem in both Firefox and IE.  I never have any problems running PHP
scripts.


The second problem is that sometimes the request just hangs, and then
Windows gives me a message saying &quot;Apache.exe encountered a critical
error and was forced to shut down&quot;

I thought that some kind of threading problems might be the issue. 
I've looked through all my modules though, and from what I can tell
not once do I modify module variables  (I only read the variables and
call functions).  Also, for the database connection I am using a pool,
whereby new connections are created if existing ones are being used. 
I do have PHP installed in the same Apache, but it's not being
actively used.

I also edited the Apache conf file and set MaxRequestPerChild to 1,
but that did not solve the problem either.

Has anyone else had these problems? Can anyone help me?  I'm going to
try uploading the site to my Linux Virtual Private Server (I'm only
running mod_python on XP so that I can do development on my laptop). 
Hopefully this problem is just a Windows issue.  Otherwise I don't see
how I can use mod_python.

Help greatly appreciated,
Patrick

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018521.html">[mod_python] Problems with mod_python on MacOS
</A></li>
	<LI>Next message: <A HREF="018517.html">[mod_python] mod_python crashes Apache under Windows XP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18516">[ date ]</a>
              <a href="thread.html#18516">[ thread ]</a>
              <a href="subject.html#18516">[ subject ]</a>
              <a href="author.html#18516">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
