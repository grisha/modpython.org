<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Oops, found a small bug in the session code
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Oops%2C%20found%20a%20small%20bug%20in%20the%20session%20code&In-Reply-To=42B0A096.1070407%40sympatico.ca">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018377.html">
   <LINK REL="Next"  HREF="018379.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Oops, found a small bug in the session code</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Dan Eloff</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Oops%2C%20found%20a%20small%20bug%20in%20the%20session%20code&In-Reply-To=42B0A096.1070407%40sympatico.ca"
       TITLE="[mod_python] Oops, found a small bug in the session code">dan.eloff at gmail.com
       </A><BR>
    <I>Wed Jun 15 19:29:33 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="018377.html">[mod_python] Question about Session security
</A></li>
        <LI>Next message: <A HREF="018379.html">[mod_python] Question about Session security
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18380">[ date ]</a>
              <a href="thread.html#18380">[ thread ]</a>
              <a href="subject.html#18380">[ subject ]</a>
              <a href="author.html#18380">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Just discovered this.

# XXX Not sure why, but on Win32 hlist.directory
# may contain a trailing \ - need to investigate,
# this value is given to us directly by httpd
if os.name == 'nt' and c.path[-1] == '\\':
    c.path = c.path[:-1]
        
# Sometimes there is no path, e.g. when Location
# is used. When Alias or UserDir are used, then
# the path wouldn't match the URI. In those cases
# just default to '/'
if not c.path or not self._req.uri.startswith(c.path):
    c.path = '/'

In the first if statement, c.path[-1] will throw IndexError if c.path
is empty (which is possible if you read the next comment). You should
change it to:

if os.name == 'nt' and (c.path and c.path[-1] == '\\'):
    c.path = c.path[:-1]

The chance of collisions for the md5 algo is very low, comparable to
the chance of that asteroid landing on your house, but if you're
worried you could always create two hashes, and md5, and a sha maybe
and concatenate them to form the sid. But to be honest the possibility
that someone intercepts your sid and takes advantage of that is higher
than a collision. If people need real security they will doubtless
make their own subclass and use ssl.

Cheers,
-Dan

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018377.html">[mod_python] Question about Session security
</A></li>
	<LI>Next message: <A HREF="018379.html">[mod_python] Question about Session security
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18380">[ date ]</a>
              <a href="thread.html#18380">[ thread ]</a>
              <a href="subject.html#18380">[ subject ]</a>
              <a href="author.html#18380">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
