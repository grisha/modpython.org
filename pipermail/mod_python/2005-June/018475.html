<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] This is just friggin' weird...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20This%20is%20just%20friggin%27%20weird...&In-Reply-To=f6babae41296428f7275664b5a5493e7%40flowtheory.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018466.html">
   <LINK REL="Next"  HREF="018479.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] This is just friggin' weird...</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Jim Gallacher</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20This%20is%20just%20friggin%27%20weird...&In-Reply-To=f6babae41296428f7275664b5a5493e7%40flowtheory.net"
       TITLE="[mod_python] This is just friggin' weird...">jg.lists at sympatico.ca
       </A><BR>
    <I>Thu Jun 23 17:01:11 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="018466.html">[mod_python] This is just friggin' weird...
</A></li>
        <LI>Next message: <A HREF="018479.html">[mod_python] This is just friggin' weird...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18475">[ date ]</a>
              <a href="thread.html#18475">[ thread ]</a>
              <a href="subject.html#18475">[ subject ]</a>
              <a href="author.html#18475">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Nothing obvious comes to mind with the information, but I'll comment 
anyway. :)

Joshua Ginsberg wrote:
&gt;<i> I have an application that I developed using PSP pages. It is seven 
</I>&gt;<i> steps to sign somebody up with our company. It worked just great 
</I>&gt;<i> yesterday, this morning, it hangs going from step 1 to step 2, but only 
</I>&gt;<i> with certain input data. 
</I>
Is it always the *same* data? What is different about that data?

&gt;<i> 
</I>&gt;<i> I have a development server for it that queries the same MySQL and MSSQL 
</I>&gt;<i> databases -- it hangs too at the same point. I inserted some debug 
</I>&gt;<i> output in the development server to see where it's hanging up.
</I>
Not clear in the following where it is hanging. It either hangs at one 
point or the other. Can't hang at 2 places at once, so which is it?

&gt;<i> When I don't have a Session defined, it hangs up at a section that is:
</I>&gt;<i> - a call to an API that inserts some data in a MySQL server
</I>&gt;<i> - a call to psp.redirect (which should throw an error because i've 
</I>&gt;<i> already returned stuff to the client, but it doesn't throw an error)
</I>
Does psp.redirect get called or are you saying it hangs before it 
reaches the redirect?. The beauty of python is you can jump right it and 
change it. Stick a self.req.log_error() into the psp.redirect method in 
psp.py and make sure it actually reaches that point if you are in doubt.

&gt;<i> Trying that API from command line by hand works like a charm, so I'm not 
</I>&gt;<i> convinced it's the API.
</I>&gt;<i> 
</I>&gt;<i> When I do have a Session defined, it hangs up on trying to import the 
</I>&gt;<i> session. 
</I>
Import the session or create the session? ie
import Session
    vs.
sess = Session.DbmSession(req)

If you mean creating the session, it sounds like a deadlock issue. There 
are known problems when using sessions in conjunction with psp pages, 
where you create a session before calling a psp page which contains a 
variable named 'session'. You'll need to manually save and unlock the 
session before calling the psp run method.

If you are on Windows there is a double whammy if you are trying to use 
DbmSession in your handler code. The psp code will try to create a new 
session instance but using MemorySession instead of DbmSession. (It's 
not really Windows specific, it just that the default apache mpm on 
Windows is threaded and so MemorySession is selected as the default. 
And, it's is not actually a deadlock issue, but it will make it appear 
like your session data is getting lost.)

These issues will be fixed in the soon to be released (we all hope) 
version 3.2.

&gt;<i> I've got a wrapper around the Session,DbmSession class which 
</I>&gt;<i> basically does nothing but return an empty string instead of raising an 
</I>&gt;<i> error if a key doesn't exist.
</I>
So could this be masking some important information if an exception is 
being raised?

&gt;<i> I've already cleared the dbm file, started 
</I>&gt;<i> over from scratch, and ensured that the dbm file is readable/writable by 
</I>&gt;<i> apache.
</I>&gt;<i> 
</I>&gt;<i> I cleared the semaphore array for Apache, I've restarted Apache, I've 
</I>&gt;<i> restarted MySQL, and none of it has helped...
</I>&gt;<i> 
</I>&gt;<i> Anybody have any ideas? I'm just stumped at this point. If you need code 
</I>&gt;<i> snippets or the site to test it out on, let me know. Thanks!
</I>&gt;<i> 
</I>
Sorry I couldn't really help, but at least there a few more things for 
you to think about.

Regards,
Jim

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018466.html">[mod_python] This is just friggin' weird...
</A></li>
	<LI>Next message: <A HREF="018479.html">[mod_python] This is just friggin' weird...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18475">[ date ]</a>
              <a href="thread.html#18475">[ thread ]</a>
              <a href="subject.html#18475">[ subject ]</a>
              <a href="author.html#18475">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
