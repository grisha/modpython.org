<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Thread safety
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Thread%20safety&In-Reply-To=e8de4ab5f6533f7aaf724abc9b3e8bb6%40dscpl.com.au">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018313.html">
   <LINK REL="Next"  HREF="018305.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Thread safety</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Dan Eloff</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Thread%20safety&In-Reply-To=e8de4ab5f6533f7aaf724abc9b3e8bb6%40dscpl.com.au"
       TITLE="[mod_python] Thread safety">dan.eloff at gmail.com
       </A><BR>
    <I>Thu Jun  9 13:41:51 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="018313.html">[mod_python] Thread safety
</A></li>
        <LI>Next message: <A HREF="018305.html">[mod_python] Thread safety
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18335">[ date ]</a>
              <a href="thread.html#18335">[ thread ]</a>
              <a href="subject.html#18335">[ subject ]</a>
              <a href="author.html#18335">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks for that information, I appreciate it. I'm just going to not
worry about threaded mpms right now, in my mind it creates so many
points of potential failure and added complexity that the speed
improvement does not seem like a good trade. There's enough problems
with importing alone to make me think twice. Later when the code is
mature I'll probably go through it all and make it threadsafe.

-Dan

On 6/7/05, Graham Dumpleton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">grahamd at dscpl.com.au</A>&gt; wrote:
&gt;<i> 
</I>&gt;<i> On 07/06/2005, at 6:42 AM, Dan Eloff wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; When using a request handler, mod_python calls handler(req) for every
</I>&gt;<i> &gt; incoming request. I would say it's a safe guess that this implies that
</I>&gt;<i> &gt; handler can be called concurrently in different threads and anything
</I>&gt;<i> &gt; done in this function and any functions it calls must be thread safe.
</I>&gt;<i> &gt; I didn't find any mention of this in the docs (I didn't look too
</I>&gt;<i> &gt; hard), so I thought I'd verify with the people sure to know.
</I>&gt;<i> 
</I>&gt;<i> BTW, you might want to read this old posting to the mailing list.
</I>&gt;<i> 
</I>&gt;<i>    <A HREF="http://www.modpython.org/pipermail/mod_python/2004-October/016605.html">http://www.modpython.org/pipermail/mod_python/2004-October/016605.html</A>
</I>&gt;<i> 
</I>&gt;<i> Using threading and having automatic module reloading enabled at the
</I>&gt;<i> same time can be quite dangerous. Most of the problems arise because
</I>&gt;<i> of how apache.import_module() is implemented so as to use standard
</I>&gt;<i> Python module importing mechanisms and storage of modules in
</I>&gt;<i> sys.modules.
</I>&gt;<i> 
</I>&gt;<i> Some of these problems are eliminated by systems such as Vampire and
</I>&gt;<i> mpservlets which have their own module loading mechanism which does
</I>&gt;<i> not reload on top of an existing module. Vampire goes a bit further
</I>&gt;<i> than mpservlets in as much as Vampire provides a means of still
</I>&gt;<i> preserving
</I>&gt;<i> data across module reloads under strict user control so that thread
</I>&gt;<i> locking issues can be addressed.
</I>&gt;<i> 
</I>&gt;<i> Note, I posted this a fair time ago and I hope it is still accurate. I
</I>&gt;<i> understand things a bit better now and so possibly I may know of
</I>&gt;<i> simpler ways around the problems. :-)
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Graham
</I>&gt;<i> 
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018313.html">[mod_python] Thread safety
</A></li>
	<LI>Next message: <A HREF="018305.html">[mod_python] Thread safety
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18335">[ date ]</a>
              <a href="thread.html#18335">[ thread ]</a>
              <a href="subject.html#18335">[ subject ]</a>
              <a href="author.html#18335">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
