<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] StringField encoding?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20StringField%20encoding%3F&In-Reply-To=42B5A4CC.2040209%40dharana.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018419.html">
   <LINK REL="Next"  HREF="018420.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] StringField encoding?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Nicolas Lehuen</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20StringField%20encoding%3F&In-Reply-To=42B5A4CC.2040209%40dharana.net"
       TITLE="[mod_python] StringField encoding?">nicolas.lehuen at gmail.com
       </A><BR>
    <I>Sun Jun 19 13:42:31 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="018419.html">[mod_python] StringField encoding?
</A></li>
        <LI>Next message: <A HREF="018420.html">[mod_python] StringField encoding?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18418">[ date ]</a>
              <a href="thread.html#18418">[ thread ]</a>
              <a href="subject.html#18418">[ subject ]</a>
              <a href="author.html#18418">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Two things to remember :

1) str are sequences of bytes (think bytes, not chars)
2) unicode strings are sequences of unicode characters

An encoding is simply a mapping (sometimes an incomplete mapping)
between the two forms.

The UTF-8 encoding of a unicode string is a sequence of byte that can
perfectly be stored in a str. There is no information loss, you could
store japanese kanji or even klingon in UTF-8 form in a str instance.
In fact, any binary encoding of unicode can be stored into a str,
since a str can contain any binary content.

There are two ways of loosing information :

1) You pick an encoding which don't know how to encode your unicode
characters. For example, the ASCII encoding won't be able to encode
european accuated characters, not mentioning Japanese Kanji.
Fortunately, UTF-8 and UTF-16 can encode any unicode string, so there
should not be any encoding problem here.

2) You forget what encoding was used to get the sequence of bytes
found in a str and try to decode it with the wrong encoding. This may
be the problem you have with StringField : you get a sequence of byte,
but you don't know the encoding you should use (the parameter you
should pass to str.decode()). If you think that Apache and mod_python
are passing you UTF-8 encoded strings, then decode(&quot;UTF8&quot;) should be
sufficient. If it's not, then it means that the encoding used by
Apache and/or mod_python is not UTF8...

Regards,
Nicolas

2005/6/19, dharana &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">dharana at dharana.net</A>&gt;:
&gt;<i> But if I understand it correctly (I doubt it anyway). How are you going to store
</I>&gt;<i> an UTF-8 string into a str without loosing information? Let's say, a japanese kanji?
</I>&gt;<i> 
</I>&gt;<i> If every string is converted to str (when assigning to StringField) instead of
</I>&gt;<i> unicode it won't be possible to recover the original string. Please tell me I'm
</I>&gt;<i> wrong.
</I>&gt;<i> 
</I>&gt;<i> Nick wrote:
</I>&gt;<i> &gt; You could try explicity setting the media type in the content type to be
</I>&gt;<i> &gt; ISO-8859-1 (or whatever character set you want to use) instead of unicode.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Nick
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; dharana wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; Hello,
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; I have a form in one page. I send it with accented chars. Apache is
</I>&gt;<i> &gt;&gt; configured to send content as UTF-8 and browser is Firefox so I
</I>&gt;<i> &gt;&gt; presume Modpython gets utf-8 encoded data.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; StringField inherits from str so, in this case, what kind of encoding
</I>&gt;<i> &gt;&gt; should I pressume it has? I'm having trouble trying to decode('utf-8')
</I>&gt;<i> &gt;&gt; the StringField instance, that's why I ask.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> 
</I>&gt;<i> --
</I>&gt;<i> dharana
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I>
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018419.html">[mod_python] StringField encoding?
</A></li>
	<LI>Next message: <A HREF="018420.html">[mod_python] StringField encoding?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18418">[ date ]</a>
              <a href="thread.html#18418">[ thread ]</a>
              <a href="subject.html#18418">[ subject ]</a>
              <a href="author.html#18418">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
