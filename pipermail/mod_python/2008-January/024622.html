<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] apache.SERVER_RETURN and chunked encoding
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20apache.SERVER_RETURN%20and%20chunked%20encoding&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024621.html">
   <LINK REL="Next"  HREF="024623.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] apache.SERVER_RETURN and chunked encoding</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Matthew Dennis</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20apache.SERVER_RETURN%20and%20chunked%20encoding&In-Reply-To="
       TITLE="[mod_python] apache.SERVER_RETURN and chunked encoding">mdennis at merfer.net
       </A><BR>
    <I>Wed Jan  2 17:57:33 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="024621.html">[mod_python] [SPAM] January promo on w4tches WfVu
</A></li>
        <LI>Next message: <A HREF="024623.html">[mod_python] apache.SERVER_RETURN and chunked encoding
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24622">[ date ]</a>
              <a href="thread.html#24622">[ thread ]</a>
              <a href="subject.html#24622">[ subject ]</a>
              <a href="author.html#24622">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have a handler that streams large amounts of data.  Using chunked encoding
in necessary as the total size is not known upfront.  If there is an error
during the generation, I raise a apache.SERVER_RETURN (with
HTTP_PARTIAL_RESPONSE I believe).  The problem is that it looks like
mod_python and/or apache just appends some error html to the output stream
and continues with the chunked encoding like there was no error.  In other
words, some data chunks come from the server, then a chunk with the error
html in it, then the last chunk.  Thus, the client has no way of knowing
that the data is incomplete (not all of it was generated) and corrupt
(random html appended onto the end).  Am I just missing something, or is
this a bug?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080102/2d18ed60/attachment.html">http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080102/2d18ed60/attachment.html</A>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024621.html">[mod_python] [SPAM] January promo on w4tches WfVu
</A></li>
	<LI>Next message: <A HREF="024623.html">[mod_python] apache.SERVER_RETURN and chunked encoding
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24622">[ date ]</a>
              <a href="thread.html#24622">[ thread ]</a>
              <a href="subject.html#24622">[ subject ]</a>
              <a href="author.html#24622">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
