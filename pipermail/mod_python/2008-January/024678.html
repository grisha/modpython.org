<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] A question about running 2 apps with mod_python
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20A%20question%20about%20running%202%20apps%20with%20mod_python&In-Reply-To=7.0.0.16.2.20080116165955.0275ec58%40bbn.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024677.html">
   <LINK REL="Next"  HREF="024673.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] A question about running 2 apps with mod_python</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20A%20question%20about%20running%202%20apps%20with%20mod_python&In-Reply-To=7.0.0.16.2.20080116165955.0275ec58%40bbn.com"
       TITLE="[mod_python] A question about running 2 apps with mod_python">graham.dumpleton at gmail.com
       </A><BR>
    <I>Wed Jan 16 19:52:13 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="024677.html">[mod_python] A question about running 2 apps with
  mod_python
</A></li>
        <LI>Next message: <A HREF="024673.html">[mod_python] How do I do this - mimic a browser calling javascript
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24678">[ date ]</a>
              <a href="thread.html#24678">[ thread ]</a>
              <a href="subject.html#24678">[ subject ]</a>
              <a href="author.html#24678">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 17/01/2008, Chris Guin &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">cguin at bbn.com</A>&gt; wrote:
&gt;<i> Thanks for the response!
</I>&gt;<i>
</I>&gt;<i> My httpd.conf was not set up to use VirtualHosts at all - it simply
</I>&gt;<i> uses different Location defintions, separated by distinct
</I>&gt;<i> PythonInterpreter directives, to send URLs to the correct Django
</I>&gt;<i> application.  Just to make sure there wasn't some arcane httpd
</I>&gt;<i> feature that required the definition of at least 1 VirtualHost, I
</I>&gt;<i> enclosed all my Location definitions in one VirtualHost and restarted
</I>&gt;<i> httpd to no avail.  (httpd -S seemed to like my VirtualHost
</I>&gt;<i> definition, so I know it is at least syntactically correct).
</I>&gt;<i>
</I>&gt;<i> The problem is still largely random, but only seems to occur when 20
</I>&gt;<i> or more users are logged in, and can sometimes be fixed by restarting
</I>&gt;<i> httpd.  The Django documentation suggests that httpd.worker should
</I>&gt;<i> not be used, but without giving any reason for it.  It may be that my
</I>&gt;<i> problem is more Django related than mod_python related, so I'll see
</I>&gt;<i> what if anyone on the boards over in Django land can help.
</I>
Use of worker MPM shouldn't have anything to do with it.

Am a bit overloaded at the moment so don't have time to really dig
further, so only quick thing I can suggest is to use mod_wsgi instead
and delegate your separate applications to run in separate daemon
process groups using its daemon mode. Or, if one is more important
than the other, continue to run it in embedded mode and run the others
in daemon mode.

This way each application is in a separate set of processes and if it
is a problem with mod_python/Python in some way, it shouldn't occur
again because of the different way that mod_wsgi works. If it does
still occur, then it has to be an issue with your Apache configuration
or something to do with page caching in Apache, a proxy or the
browser, although nothing should cache 404 pages.

Graham

&gt;<i> Thanks,
</I>&gt;<i> Chris Guin
</I>&gt;<i>
</I>&gt;<i> At 06:15 PM 1/15/2008, you wrote:
</I>&gt;<i> &gt;Have you defined NameVirtualHost directive properly. Lack of this
</I>&gt;<i> &gt;directive when using multiple VirtualHost definitions is normally the
</I>&gt;<i> &gt;cause of such mixing of site pages.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;Graham
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;On 16/01/2008, Chris Guin &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">cguin at bbn.com</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; We've recently switched to using worker mpm instead of prefork, and
</I>&gt;<i> &gt; &gt; things have mostly been going smoothly.  Our server is running 2
</I>&gt;<i> &gt; &gt; Django applications, one of which is forum software.  Their URL
</I>&gt;<i> &gt; &gt; spaces are entirely distinct, and each &quot;Location&quot; in httpd.conf has
</I>&gt;<i> &gt; &gt; been set to use one of two different PythonInterpreters depending on
</I>&gt;<i> &gt; &gt; the app it services.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; We've noticed that regular accesses to the forum pages will randomly
</I>&gt;<i> &gt; &gt; (about 50% of the time) call up the 404 page for the other
</I>&gt;<i> &gt; &gt; application.  We've noticed no similar problems in the reverse
</I>&gt;<i> &gt; &gt; direction (from the other app to the forums).  Refreshing the 404
</I>&gt;<i> &gt; &gt; page eventually gets us to the forum.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; The randomness of the error suggests to me that it has to do with
</I>&gt;<i> &gt; &gt; which httpd.worker process or thread is picking up the request, but I
</I>&gt;<i> &gt; &gt; can't explain what difference it would make.  Since we have switched
</I>&gt;<i> &gt; &gt; to worker from prefork, I suspect this may be at fault somehow.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Any insight would be tremendously appreciated!
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Chris Guin
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; _______________________________________________
</I>&gt;<i> &gt; &gt; Mod_python mailing list
</I>&gt;<i> &gt; &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> &gt; &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i> &gt; &gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024677.html">[mod_python] A question about running 2 apps with
  mod_python
</A></li>
	<LI>Next message: <A HREF="024673.html">[mod_python] How do I do this - mimic a browser calling javascript
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24678">[ date ]</a>
              <a href="thread.html#24678">[ thread ]</a>
              <a href="subject.html#24678">[ subject ]</a>
              <a href="author.html#24678">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
