<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Mod_python and kerberos authentication
	(mod_auth_kerb)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Mod_python%20and%20kerberos%20authentication%0A%09%28mod_auth_kerb%29&In-Reply-To=BC53C974C3B9E542BC0A9BD4C5B1168A03EB07B9%40NEWMAIL.manord.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024669.html">
   <LINK REL="Next"  HREF="024680.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Mod_python and kerberos authentication
	(mod_auth_kerb)</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Mod_python%20and%20kerberos%20authentication%0A%09%28mod_auth_kerb%29&In-Reply-To=BC53C974C3B9E542BC0A9BD4C5B1168A03EB07B9%40NEWMAIL.manord.com"
       TITLE="[mod_python] Mod_python and kerberos authentication
	(mod_auth_kerb)">graham.dumpleton at gmail.com
       </A><BR>
    <I>Wed Jan 16 01:03:56 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="024669.html">[mod_python] Mod_python and kerberos authentication
	(mod_auth_kerb)
</A></li>
        <LI>Next message: <A HREF="024680.html">[mod_python] Mod_python and kerberos authentication
	(mod_auth_kerb)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24672">[ date ]</a>
              <a href="thread.html#24672">[ thread ]</a>
              <a href="subject.html#24672">[ subject ]</a>
              <a href="author.html#24672">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I remember now.

See:

  <A HREF="http://issues.apache.org/jira/browse/MODPYTHON-47">http://issues.apache.org/jira/browse/MODPYTHON-47</A>

Use same workaround as described in their for using Digest auth with publisher.

Graham

On 16/01/2008, Cassiano, Marco &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mcassiano at manord.com</A>&gt; wrote:
&gt;<i> Graham,
</I>&gt;<i>
</I>&gt;<i> here is the information from mod_python.testhandler.
</I>&gt;<i> The kerberos authentication worked fine with testhandler.
</I>&gt;<i> I can't see anything strange in the output....
</I>&gt;<i> Thank
</I>&gt;<i>
</I>&gt;<i> marco
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> -----------------------------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> General information
</I>&gt;<i> Apache version  Apache
</I>&gt;<i> Apache threaded MPM     No (single thread MPM)
</I>&gt;<i> Apache forked MPM       Yes, maximum 256 processes
</I>&gt;<i> Apache server root      /etc/httpd/
</I>&gt;<i> Apache document root    /var/www/html/site
</I>&gt;<i> Apache error log        /var/log/www/error.log (view last 100 lines)
</I>&gt;<i> Python sys.version      2.4.2 (#1, Jan 30 2006, 15:30:03) [GCC 3.2.3 20030502 (Red Hat Linux 3.2.3-53)]
</I>&gt;<i> Python sys.path
</I>&gt;<i>
</I>&gt;<i> /var/www/cgi/testkerb/
</I>&gt;<i> /usr/local/lib/python2.4/site-packages/setuptools-0.6c5-py2.4.egg
</I>&gt;<i> /usr/local/lib/python24.zip
</I>&gt;<i> /usr/local/lib/python2.4
</I>&gt;<i> /usr/local/lib/python2.4/plat-linux2
</I>&gt;<i> /usr/local/lib/python2.4/lib-tk
</I>&gt;<i> /usr/local/lib/python2.4/lib-dynload
</I>&gt;<i> /usr/local/lib/python2.4/site-packages
</I>&gt;<i> /usr/local/lib/python2.4/site-packages/PIL
</I>&gt;<i> /usr/local/lib/python2.4/site-packages/barcode
</I>&gt;<i> /usr/local/lib/python2.4/site-packages/MySQLdb
</I>&gt;<i> /usr/local/lib/python2.4/site-packages/_xmlplus
</I>&gt;<i> /usr/local/lib/python2.4/site-packages/reportlab
</I>&gt;<i>
</I>&gt;<i> Python interpreter name apache.foo.com
</I>&gt;<i> mod_python.publisher available  Yes
</I>&gt;<i> mod_python.psp available        Yes
</I>&gt;<i> Request input headers
</I>&gt;<i> Key     Value
</I>&gt;<i> Host    apache.foo.com
</I>&gt;<i> User-Agent      Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.11) Gecko/20071127 Firefox/2.0.0.11
</I>&gt;<i> Accept  text/xml,application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5
</I>&gt;<i> Accept-Language en-us,en;q=0.5
</I>&gt;<i> Accept-Encoding gzip,deflate
</I>&gt;<i> Accept-Charset  ISO-8859-1,utf-8;q=0.7,*;q=0.7
</I>&gt;<i> Keep-Alive      300
</I>&gt;<i> Connection      keep-alive
</I>&gt;<i> Authorization   Negotiate Y....4
</I>&gt;<i> Request environment
</I>&gt;<i> Key     Value
</I>&gt;<i> SCRIPT_URL      /test/domain_login1.py/check_user
</I>&gt;<i> SCRIPT_URI      <A HREF="http://apache.foo.com/test/domain_login1.py/check_user">http://apache.foo.com/test/domain_login1.py/check_user</A>
</I>&gt;<i> GATEWAY_INTERFACE       CGI/1.1
</I>&gt;<i> SERVER_PROTOCOL HTTP/1.1
</I>&gt;<i> REQUEST_METHOD  GET
</I>&gt;<i> QUERY_STRING
</I>&gt;<i> REQUEST_URI     /test/domain_login1.py/check_user
</I>&gt;<i> SCRIPT_NAME     /test/domain_login1.py
</I>&gt;<i> PATH_INFO       /check_user
</I>&gt;<i> PATH_TRANSLATED /var/www/check_user
</I>&gt;<i> HTTP_HOST       apache.foo.com
</I>&gt;<i> HTTP_USER_AGENT Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.11) Gecko/20071127 Firefox/2.0.0.11
</I>&gt;<i> HTTP_ACCEPT     text/xml,application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5
</I>&gt;<i> HTTP_ACCEPT_LANGUAGE    en-us,en;q=0.5
</I>&gt;<i> HTTP_ACCEPT_ENCODING    gzip,deflate
</I>&gt;<i> HTTP_ACCEPT_CHARSET     ISO-8859-1,utf-8;q=0.7,*;q=0.7
</I>&gt;<i> HTTP_KEEP_ALIVE 300
</I>&gt;<i> HTTP_CONNECTION keep-alive
</I>&gt;<i> PATH    /usr/local/bin:/sbin:/usr/sbin:/bin:/usr/bin:/usr/X11R6/bin
</I>&gt;<i> SERVER_SIGNATURE
</I>&gt;<i> SERVER_SOFTWARE Apache
</I>&gt;<i> SERVER_NAME     apache.foo.com
</I>&gt;<i> SERVER_ADDR     192.168.1.150
</I>&gt;<i> SERVER_PORT     80
</I>&gt;<i> REMOTE_ADDR     192.168.1.1
</I>&gt;<i> DOCUMENT_ROOT   /var/www/html/site
</I>&gt;<i> SERVER_ADMIN    <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">admin at foo.com</A>
</I>&gt;<i> SCRIPT_FILENAME /var/www/cgi/testkerb/domain_login1.py
</I>&gt;<i> REMOTE_PORT     1681
</I>&gt;<i> REMOTE_USER     admin@@FOO.COM
</I>&gt;<i> AUTH_TYPE       Negotiate
</I>&gt;<i> Request configuration
</I>&gt;<i> Key     Value
</I>&gt;<i> PythonAutoReload        1
</I>&gt;<i> PythonDebug     1
</I>&gt;<i> Request options
</I>&gt;<i> Key     Value
</I>&gt;<i> ApplicationPath /
</I>&gt;<i> SessionDbm      /var/www/html/sid/session.dbm
</I>&gt;<i> session_directory       /var/www/html/sid/session
</I>&gt;<i> Request notes
</I>&gt;<i> Key     Value
</I>&gt;<i> python_init_ran 1
</I>&gt;<i> mod_rewrite_rewritten   0
</I>&gt;<i> Server configuration
</I>&gt;<i> Key     Value
</I>&gt;<i> PythonAutoReload        1
</I>&gt;<i> PythonDebug     1
</I>&gt;<i> PythonPath      sys.path+['/var/www/cgi/common','/var/www/cgi/devel']
</I>&gt;<i> Server options
</I>&gt;<i> Key     Value
</I>&gt;<i> Server configuration tree
</I>&gt;<i>
</I>&gt;<i> ServerTokens Prod
</I>&gt;<i> PidFile run/httpd.pid
</I>&gt;<i> Timeout 120
</I>&gt;<i> KeepAlive On
</I>&gt;<i> MaxKeepAliveRequests 3
</I>&gt;<i> KeepAliveTimeout 15
</I>&gt;<i> StartServers 8
</I>&gt;<i> MinSpareServers 5
</I>&gt;<i> MaxSpareServers 20
</I>&gt;<i> ServerLimit 256
</I>&gt;<i> MaxClients 256
</I>&gt;<i> MaxRequestsPerChild 50
</I>&gt;<i> Listen 0.0.0.0:80
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>         SetHandler default-handler
</I>&gt;<i> Alias /test/ &quot;/var/www/cgi/testkerb/&quot;
</I>&gt;<i>
</I>&gt;<i>     AuthType Kerberos
</I>&gt;<i>     KrbAuthRealm FOO.COM
</I>&gt;<i>     KrbServiceName HTTP/<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">apache.foo.com at FOO.COM</A>
</I>&gt;<i>     Krb5Keytab /etc/httpd//conf/sviluppotab
</I>&gt;<i>     KrbMethodNegotiate on
</I>&gt;<i>     KrbMethodK5Passwd off
</I>&gt;<i>     Require valid-user
</I>&gt;<i>     Order Deny,Allow
</I>&gt;<i>     Deny from all
</I>&gt;<i>     Allow from 192.168.1
</I>&gt;<i>     Allow from 127.0.0.1
</I>&gt;<i>     SetHandler mod_python
</I>&gt;<i>     PythonHandler mod_python.testhandler | .py
</I>&gt;<i>     PythonAutoReload on
</I>&gt;<i>     PythonDebug on
</I>&gt;<i>     PythonOption ApplicationPath '/'
</I>&gt;<i>     PythonOption SessionDbm '/var/www/html/authdata/sid/session.dbm'
</I>&gt;<i>     PythonOption session_directory '/var/www/html/authdata/sid/session'
</I>&gt;<i>
</I>&gt;<i> RewriteEngine on
</I>&gt;<i> RewriteCond %{REQUEST_METHOD} ^(TRACE|TRACK)
</I>&gt;<i> RewriteRule .* - [F]
</I>&gt;<i> ExtendedStatus On
</I>&gt;<i> User apache
</I>&gt;<i> Group apache
</I>&gt;<i> ServerAdmin <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">admin at foo.com</A>
</I>&gt;<i> ServerName apache.foo.com
</I>&gt;<i> UseCanonicalName Off
</I>&gt;<i> DocumentRoot &quot;/var/www/html/site&quot;
</I>&gt;<i>
</I>&gt;<i>     Options None
</I>&gt;<i>     AllowOverride None
</I>&gt;<i>     Order Deny,Allow
</I>&gt;<i>
</I>&gt;<i> UserDir disable root
</I>&gt;<i> DirectoryIndex index.html index.html.var
</I>&gt;<i> AccessFileName .htaccess
</I>&gt;<i>
</I>&gt;<i>     Order allow,deny
</I>&gt;<i>     Deny from all
</I>&gt;<i> TypesConfig /etc/mime.types
</I>&gt;<i> DefaultType text/plain
</I>&gt;<i> HostnameLookups Off
</I>&gt;<i> ErrorLog /var/log/www/error.log
</I>&gt;<i> LogLevel debug
</I>&gt;<i> LogFormat &quot;%h %l %u %t \&quot;%r\&quot; %&gt;s %b \&quot;%{Referer}i\&quot; \&quot;%{User-Agent}i\&quot;&quot; combined
</I>&gt;<i> LogFormat &quot;%h %l %u %t \&quot;%r\&quot; %&gt;s %b&quot; common
</I>&gt;<i> LogFormat &quot;%{Referer}i -&gt; %U&quot; referer
</I>&gt;<i> LogFormat &quot;%{User-agent}i&quot; agent
</I>&gt;<i> CustomLog /var/log/www/access.log combined
</I>&gt;<i> ServerSignature Off
</I>&gt;<i> IndexOptions FancyIndexing VersionSort NameWidth=*
</I>&gt;<i> AddIconByEncoding (CMP,/icons/compressed.gif) x-compress x-gzip
</I>&gt;<i> AddIconByType (TXT,/icons/text.gif) text/*
</I>&gt;<i> AddIconByType (IMG,/icons/image2.gif) image/*
</I>&gt;<i> AddIconByType (SND,/icons/sound2.gif) audio/*
</I>&gt;<i> AddIconByType (VID,/icons/movie.gif) video/*
</I>&gt;<i> AddIcon /icons/binary.gif .bin .exe
</I>&gt;<i> AddIcon /icons/binhex.gif .hqx
</I>&gt;<i> AddIcon /icons/tar.gif .tar
</I>&gt;<i> AddIcon /icons/world2.gif .wrl .wrl.gz .vrml .vrm .iv
</I>&gt;<i> AddIcon /icons/compressed.gif .Z .z .tgz .gz .zip
</I>&gt;<i> AddIcon /icons/a.gif .ps .ai .eps
</I>&gt;<i> AddIcon /icons/layout.gif .html .shtml .htm .pdf
</I>&gt;<i> AddIcon /icons/text.gif .txt
</I>&gt;<i> AddIcon /icons/c.gif .c
</I>&gt;<i> AddIcon /icons/p.gif .pl .py
</I>&gt;<i> AddIcon /icons/f.gif .for
</I>&gt;<i> AddIcon /icons/dvi.gif .dvi
</I>&gt;<i> AddIcon /icons/uuencoded.gif .uu
</I>&gt;<i> AddIcon /icons/script.gif .conf .sh .shar .csh .ksh .tcl
</I>&gt;<i> AddIcon /icons/tex.gif .tex
</I>&gt;<i> AddIcon /icons/bomb.gif core
</I>&gt;<i> AddIcon /icons/back.gif ..
</I>&gt;<i> AddIcon /icons/hand.right.gif README
</I>&gt;<i> AddIcon /icons/folder.gif ^^DIRECTORY^^
</I>&gt;<i> AddIcon /icons/blank.gif ^^BLANKICON^^
</I>&gt;<i> DefaultIcon /icons/unknown.gif
</I>&gt;<i> ReadmeName README.html
</I>&gt;<i> HeaderName HEADER.html
</I>&gt;<i> IndexIgnore .??* *~ *# HEADER* README* RCS CVS *,v *,t
</I>&gt;<i> AddLanguage en .en
</I>&gt;<i> AddLanguage it .it
</I>&gt;<i> LanguagePriority en it
</I>&gt;<i> AddDefaultCharset ISO-8859-1
</I>&gt;<i> AddCharset ISO-8859-1  .iso8859-1  .latin1
</I>&gt;<i> AddCharset ISO-8859-2  .iso8859-2  .latin2 .cen
</I>&gt;<i> AddCharset ISO-8859-3  .iso8859-3  .latin3
</I>&gt;<i> AddCharset ISO-8859-4  .iso8859-4  .latin4
</I>&gt;<i> AddCharset UTF-8       .utf8
</I>&gt;<i> AddCharset utf-8       .utf8
</I>&gt;<i> AddType application/x-compress .Z
</I>&gt;<i> AddType application/x-gzip .gz .tgz
</I>&gt;<i> AddHandler imap-file map
</I>&gt;<i> AddHandler type-map var
</I>&gt;<i> AddType text/html .shtml
</I>&gt;<i> AddOutputFilter INCLUDES .shtml
</I>&gt;<i> Alias /error/ &quot;/var/www/error/&quot;
</I>&gt;<i>
</I>&gt;<i>     AllowOverride None
</I>&gt;<i>     Options IncludesNoExec
</I>&gt;<i>     AddOutputFilter Includes html
</I>&gt;<i>     AddHandler type-map var
</I>&gt;<i>     Order allow,deny
</I>&gt;<i>     Allow from all
</I>&gt;<i>     LanguagePriority en es de fr
</I>&gt;<i>     ForceLanguagePriority Prefer Fallback
</I>&gt;<i> BrowserMatch &quot;Mozilla/2&quot; nokeepalive
</I>&gt;<i> BrowserMatch &quot;MSIE 4\.0b2;&quot; nokeepalive downgrade-1.0 force-response-1.0
</I>&gt;<i> BrowserMatch &quot;RealPlayer 4\.0&quot; force-response-1.0
</I>&gt;<i> BrowserMatch &quot;Java/1\.0&quot; force-response-1.0
</I>&gt;<i> BrowserMatch &quot;JDK/1\.0&quot; force-response-1.0
</I>&gt;<i> BrowserMatch &quot;Microsoft Data Access Internet Publishing Provider&quot; redirect-carefully
</I>&gt;<i> BrowserMatch &quot;^WebDrive&quot; redirect-carefully
</I>&gt;<i> BrowserMatch &quot;^WebDAVFS/1.[012]&quot; redirect-carefully
</I>&gt;<i> BrowserMatch &quot;^gnome-vfs&quot; redirect-carefully
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Marco Cassiano
</I>&gt;<i>
</I>&gt;<i> Manifatture del Nord srl unipersonale
</I>&gt;<i> Gruppo MaxMara
</I>&gt;<i>
</I>&gt;<i> via Mazzacurati 6
</I>&gt;<i> 42100 Reggio Emilia RE
</I>&gt;<i> ITALY
</I>&gt;<i>
</I>&gt;<i> Tel. +39 0522 358215
</I>&gt;<i> Fax +39 0522 268715
</I>&gt;<i> email : <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mcassiano at manord.com</A>
</I>&gt;<i> www.pennyblack.com
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ---------------------------------------------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i> Il contenuto della presente comunicazione &#232; riservato e destinato esclusivamente ai destinatari indicati. Nel caso in cui sia ricevuto da persona diversa dal destinatario sono proibite la diffusione, la distribuzione e la copia. Nel caso riceveste la presente per errore, Vi preghiamo di informarci e di distruggerlo e/o cancellarlo dal Vostro computer, senza utilizzare i dati contenuti.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> La presente comunicazione (comprensiva dei documenti allegati) non avr&#224; valore di proposta contrattuale e/o accettazione di proposte provenienti dal destinatario, n&#232; rinuncia o riconoscimento di diritti, debiti e/o crediti, n&#232; sar&#224; impegnativa, qualora non sia sottoscritto successivo accordo da chi pu&#242; validamente obbligarci. Non deriver&#224; alcuna responsabilit&#224; precontrattuale a ns. carico, se la presente non sia seguita da contratto sottoscritto dalle parti.
</I>&gt;<i>
</I>&gt;<i> ---------------------------------------------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i> The contents of the present communication is strictly confidential and reserved solely to the referred addressees. In the event was received by person different from the addressee, it is forbidden the diffusion, distribution and copy. In the event you have received it mistakenly we ask you to inform us and to destroy and/or to delete it by your computer, without using the data herein contained.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> The present message (eventual annexes inclusive) shall not be considered any contractual proposal and/or acceptance of offer coming from the addressee, nor waiver neither recognizance of rights, debts and/or credits, and it shall not be binding, when it is not executed a subsequent agreement by person who could lawfully represent us. No pre-contractual liability shall derive to us, when the present communication is not followed by any binding agreement between the parties.
</I>&gt;<i>
</I>&gt;<i> ---------------------------------------------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> -----Original Message-----
</I>&gt;<i> From: Graham Dumpleton [mailto:<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>]
</I>&gt;<i> Sent: Monday, January 14, 2008 10:28 PM
</I>&gt;<i> To: Cassiano, Marco
</I>&gt;<i> Cc: <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython.org</A>
</I>&gt;<i> Subject: Re: [mod_python] Mod_python and kerberos authentication (mod_auth_kerb)
</I>&gt;<i>
</I>&gt;<i> No access to mod_python code right now to do any checking so only
</I>&gt;<i> thing I can suggest is to set handler to be mod_python.testhandler and
</I>&gt;<i> have a look at what it returns and see if you can see anything strange
</I>&gt;<i> about the request details that make it through. You might scrub what
</I>&gt;<i> it shows of any sensitive data and post it.
</I>&gt;<i>
</I>&gt;<i> Graham
</I>&gt;<i>
</I>&gt;<i> On 14/01/2008, Cassiano, Marco &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mcassiano at manord.com</A>&gt; wrote:
</I>&gt;<i> &gt; Graham,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; thank you for your answer.
</I>&gt;<i> &gt; I've made a very simple test script named domain_login.py. Here it is :
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; def check_user(req):
</I>&gt;<i> &gt;         return 'ok'
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; and I call it with the URL  <A HREF="http://apache.foo.com/login/domain_login.py/check_user">http://apache.foo.com/login/domain_login.py/check_user</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; So, to answer your question, the request is a GET.
</I>&gt;<i> &gt; It is strange that if I put in the URL a wrong (non-existent) name, for example :
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;  <A HREF="http://apache.foo.com/login/domain_login.py/wrong_call">http://apache.foo.com/login/domain_login.py/wrong_call</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I got the same Bad Request error. So the problem seems to occur before the execution of the script.
</I>&gt;<i> &gt; In the apache error log I only see that the kerberos authentication was ok and then nothing else...
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; [Mon Jan 14 10:04:35 2008] [debug] src/mod_auth_kerb.c(1485): [client 192.168.1.25] kerb_authenticate_user entered with user (NULL) and auth_type Kerberos
</I>&gt;<i> &gt; [Mon Jan 14 10:04:35 2008] [debug] src/mod_auth_kerb.c(1485): [client 192.168.1.25] kerb_authenticate_user entered with user (NULL) and auth_type Kerberos
</I>&gt;<i> &gt; [Mon Jan 14 10:04:35 2008] [debug] src/mod_auth_kerb.c(1172): [client 192.168.1.25] Acquiring creds for HTTP/<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">sviluppo.manord.com at MANORD.COM</A>
</I>&gt;<i> &gt; [Mon Jan 14 10:04:35 2008] [debug] src/mod_auth_kerb.c(1316): [client 192.168.1.25] Verifying client data using SPNEGO GSS-API
</I>&gt;<i> &gt; [Mon Jan 14 10:04:35 2008] [debug] src/mod_auth_kerb.c(1332): [client 192.168.1.25] Verification returned code 0
</I>&gt;<i> &gt; [Mon Jan 14 10:04:35 2008] [debug] src/mod_auth_kerb.c(1350): [client 192.168.1.25] GSS-API token of length 151 bytes will be sent back
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; In the apache access.log I see two entries
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 192.168.1.25 - - [14/Jan/2008:10:56:04 +0100] &quot;GET /login/domain_login1.py/check_user HTTP/1.1&quot; 401 401 &quot;-&quot; &quot;Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.11) Gecko/20071127 Firefox/2.0.0.11&quot;
</I>&gt;<i> &gt; 192.168.1.25 - <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">myuser at FOO.COM</A> [14/Jan/2008:10:56:04 +0100] &quot;GET /login/domain_login1.py/check_user HTTP/1.1&quot; 404 231 &quot;-&quot; &quot;Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.11) Gecko/20071127 Firefox/2.0.0.11&quot;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; In the second line the windows domain user is correctly reported so it seems the kerberos authentication worked...
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; If I remove the kerberos authentication, the script works ok.
</I>&gt;<i> &gt; If I remove the mod_python handler from the directory and I ask for a plain html page the kerberos authentication works...
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; We also tried with mod_python.servlet (PythonHandler mod_python.servlet)
</I>&gt;<i> &gt; and the kerberos authentication works perfectly. The script is executed and we can retrieve the username in req.user.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; So it seems a problem related to the publisher....
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Thank you
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Marco Cassiano
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Manifatture del Nord srl unipersonale
</I>&gt;<i> &gt; Gruppo MaxMara
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; via Mazzacurati 6
</I>&gt;<i> &gt; 42100 Reggio Emilia RE
</I>&gt;<i> &gt; ITALY
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Tel. +39 0522 358215
</I>&gt;<i> &gt; Fax +39 0522 268715
</I>&gt;<i> &gt; email : <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mcassiano at manord.com</A>
</I>&gt;<i> &gt; www.pennyblack.com
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The contents of the present communication is strictly confidential and reserved solely to the referred addressees. In the event was received by person different from the addressee, it is forbidden the diffusion, distribution and copy. In the event you have received it mistakenly we ask you to inform us and to destroy and/or to delete it by your computer, without using the data herein contained.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The present message (eventual annexes inclusive) shall not be considered any contractual proposal and/or acceptance of offer coming from the addressee, nor waiver neither recognizance of rights, debts and/or credits, and it shall not be binding, when it is not executed a subsequent agreement by person who could lawfully represent us. No pre-contractual liability shall derive to us, when the present communication is not followed by any binding agreement between the parties.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; -----Original Message-----
</I>&gt;<i> &gt; From: Graham Dumpleton [mailto:<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>]
</I>&gt;<i> &gt; Sent: Friday, January 11, 2008 10:24 PM
</I>&gt;<i> &gt; To: Cassiano, Marco
</I>&gt;<i> &gt; Cc: <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython.org</A>
</I>&gt;<i> &gt; Subject: Re: [mod_python] Mod_python and kerberos authentication (mod_auth_kerb)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; When using mod_python.publisher, you would get a Bad Request error if
</I>&gt;<i> &gt; the request wasn't either a GET or POST. What is the type of HTTP
</I>&gt;<i> &gt; request?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Graham
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On 12/01/2008, Cassiano, Marco &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mcassiano at manord.com</A>&gt; wrote:
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Hi all,
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; I've just configured our apache server (Linux RedHat) for kerberos
</I>&gt;<i> &gt; &gt; authentication to allow our windows domain users to access it without having
</I>&gt;<i> &gt; &gt; to reauthenticate.
</I>&gt;<i> &gt; &gt; Everything works fine for a plain html directory, so I'm pretty sure that
</I>&gt;<i> &gt; &gt; the kerberos configuration for the apache server is working.
</I>&gt;<i> &gt; &gt; When I try to specify Kerberos authentication together with mod_python it's
</I>&gt;<i> &gt; &gt; not working. I got the message :
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Bad Request
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Your browser sent a request that this server could not understand.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; My httpd configuration is :
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Alias /login/ &quot;/var/www/kerb/login/&quot;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; &lt;Directory &quot;/var/www/kerb/login&quot;&gt;
</I>&gt;<i> &gt; &gt; ##  AuthName &quot;Kerberos Login&quot;
</I>&gt;<i> &gt; &gt;   AuthType Kerberos
</I>&gt;<i> &gt; &gt;   KrbAuthRealm FOO.COM
</I>&gt;<i> &gt; &gt;   KrbServiceName HTTP/<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">apache.foo.com at FOO.COM</A>
</I>&gt;<i> &gt; &gt;   Krb5Keytab /etc/httpd/conf/apache.tab
</I>&gt;<i> &gt; &gt;   KrbMethodNegotiate on
</I>&gt;<i> &gt; &gt;   KrbMethodK5Passwd off
</I>&gt;<i> &gt; &gt; #  KrbSaveCredentials off
</I>&gt;<i> &gt; &gt; #  KrbVerifyKDC off
</I>&gt;<i> &gt; &gt;   Require valid-user
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;   Order Deny,Allow
</I>&gt;<i> &gt; &gt;   Deny from all
</I>&gt;<i> &gt; &gt;   Allow from foo.com
</I>&gt;<i> &gt; &gt;   Allow from 127.0.0.1
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;   SetHandler mod_python
</I>&gt;<i> &gt; &gt;   PythonHandler mod_python.publisher | .py
</I>&gt;<i> &gt; &gt;   PythonDebug on
</I>&gt;<i> &gt; &gt;   PythonOption ApplicationPath '/'
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; &lt;/Directory&gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Thanks in advance for your advice
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Marco Cassiano
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Manifatture del Nord srl
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Italy
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; ---------------------------------------------------------------------------------------------
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Il contenuto della presente comunicazione &#232; riservato e destinato
</I>&gt;<i> &gt; &gt; esclusivamente ai destinatari indicati. Nel caso in cui sia ricevuto da
</I>&gt;<i> &gt; &gt; persona diversa dal destinatario sono proibite la diffusione, la
</I>&gt;<i> &gt; &gt; distribuzione e la copia. Nel caso riceveste la presente per errore, Vi
</I>&gt;<i> &gt; &gt; preghiamo di informarci e di distruggerlo e/o cancellarlo dal Vostro
</I>&gt;<i> &gt; &gt; computer, senza utilizzare i dati contenuti.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; La presente comunicazione (comprensiva dei documenti allegati) non avr&#224;
</I>&gt;<i> &gt; &gt; valore di proposta contrattuale e/o accettazione di proposte provenienti dal
</I>&gt;<i> &gt; &gt; destinatario, n&#232; rinuncia o riconoscimento di diritti, debiti e/o crediti,
</I>&gt;<i> &gt; &gt; n&#232; sar&#224; impegnativa, qualora non sia sottoscritto successivo accordo da chi
</I>&gt;<i> &gt; &gt; pu&#242; validamente obbligarci. Non deriver&#224; alcuna responsabilit&#224;
</I>&gt;<i> &gt; &gt; precontrattuale a ns. carico, se la presente non sia seguita da contratto
</I>&gt;<i> &gt; &gt; sottoscritto dalle parti.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; ---------------------------------------------------------------------------------------------
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; The contents of the present communication is strictly confidential and
</I>&gt;<i> &gt; &gt; reserved solely to the referred addressees. In the event was received by
</I>&gt;<i> &gt; &gt; person different from the addressee, it is forbidden the diffusion,
</I>&gt;<i> &gt; &gt; distribution and copy. In the event you have received it mistakenly we ask
</I>&gt;<i> &gt; &gt; you to inform us and to destroy and/or to delete it by your computer,
</I>&gt;<i> &gt; &gt; without using the data herein contained.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; The present message (eventual annexes inclusive) shall not be considered any
</I>&gt;<i> &gt; &gt; contractual proposal and/or acceptance of offer coming from the addressee,
</I>&gt;<i> &gt; &gt; nor waiver neither recognizance of rights, debts and/or credits, and it
</I>&gt;<i> &gt; &gt; shall not be binding, when it is not executed a subsequent agreement by
</I>&gt;<i> &gt; &gt; person who could lawfully represent us. No pre-contractual liability shall
</I>&gt;<i> &gt; &gt; derive to us, when the present communication is not followed by any binding
</I>&gt;<i> &gt; &gt; agreement between the parties.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; ---------------------------------------------------------------------------------------------
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; _______________________________________________
</I>&gt;<i> &gt; &gt; Mod_python mailing list
</I>&gt;<i> &gt; &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> &gt; &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024669.html">[mod_python] Mod_python and kerberos authentication
	(mod_auth_kerb)
</A></li>
	<LI>Next message: <A HREF="024680.html">[mod_python] Mod_python and kerberos authentication
	(mod_auth_kerb)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24672">[ date ]</a>
              <a href="thread.html#24672">[ thread ]</a>
              <a href="subject.html#24672">[ subject ]</a>
              <a href="author.html#24672">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
