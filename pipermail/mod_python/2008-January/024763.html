<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Problem getting the Publisher handler to return
	nothing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Problem%20getting%20the%20Publisher%20handler%20to%20return%0A%09nothing&In-Reply-To=b44a81310801281616p22f031aib79434412d46594e%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024762.html">
   <LINK REL="Next"  HREF="024774.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Problem getting the Publisher handler to return
	nothing</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Problem%20getting%20the%20Publisher%20handler%20to%20return%0A%09nothing&In-Reply-To=b44a81310801281616p22f031aib79434412d46594e%40mail.gmail.com"
       TITLE="[mod_python] Problem getting the Publisher handler to return
	nothing">graham.dumpleton at gmail.com
       </A><BR>
    <I>Mon Jan 28 19:19:36 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="024762.html">[mod_python] Problem getting the Publisher handler to return
	nothing
</A></li>
        <LI>Next message: <A HREF="024774.html">[mod_python] Problem getting the Publisher handler to return
	nothing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24763">[ date ]</a>
              <a href="thread.html#24763">[ thread ]</a>
              <a href="subject.html#24763">[ subject ]</a>
              <a href="author.html#24763">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Then the content type can't be getting sent back properly.

Under FireFox use live headers extension to see what headers are
actually being returned.

Make sure nothing has cached your page and thus a set of old headers.

BTW, is there any reason why you cant use just:

def launch(req):
   req.content_type = 'text/plain'
   return ''

Graham

On 29/01/2008, Charles Collis &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">charles.collis at gmail.com</A>&gt; wrote:
&gt;<i> Thanks Graham.
</I>&gt;<i>
</I>&gt;<i> No I don't have any associated applications for .py files with my browser(s)
</I>&gt;<i> - I have checked the list of applications in Firefox preferences (on Ubuntu
</I>&gt;<i> machine) also this behaviour is happens on my Mac using Safari...
</I>&gt;<i>
</I>&gt;<i> Seems a bit odd!
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Jan 28, 2008 5:58 AM, Graham Dumpleton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i> &gt; That might be the case if you have through the browser associated the
</I>&gt;<i> &gt; .py extension with some helper application for opening it. In other
</I>&gt;<i> &gt; words, nothing to do with mod_python but your personal machine, or at
</I>&gt;<i> &gt; least the browsers you are using. Try ensuring that any knowledge
</I>&gt;<i> &gt; within browser configuration for .py extension is cleared.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Graham
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On 28/01/2008, Charles Collis &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">charles.collis at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; Thanks Graham.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; It now works as intended, although only with Konqueror - Firefox and
</I>&gt;<i> Safari
</I>&gt;<i> &gt; &gt; both blank the page and the URL in address bar goes to
</I>&gt;<i> &gt; &gt; <A HREF="http://localhost/python/launch,">http://localhost/python/launch,</A> rather than staying at the page they
</I>&gt;<i> were on
</I>&gt;<i> &gt; &gt; before. Here is the new code as suggested:
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; def launch(req):
</I>&gt;<i> &gt; &gt;    req.content_type = 'text/plain'
</I>&gt;<i> &gt; &gt;    raise apache.SERVER_RETURN, apache.OK
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; The only other way I have been able to get it to simulate not leaving
</I>&gt;<i> the
</I>&gt;<i> &gt; &gt; current page is by returning a short bit of html containing some
</I>&gt;<i> javascript
</I>&gt;<i> &gt; &gt; that automatically goes back one page (from the new blank page) - but
</I>&gt;<i> this
</I>&gt;<i> &gt; &gt; is pretty ugly!
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; On Jan 27, 2008 9:12 PM, Graham Dumpleton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>&gt;
</I>&gt;<i> &gt; &gt; wrote:
</I>&gt;<i> &gt; &gt; &gt; You still must set the response content type else the browser tries to
</I>&gt;<i> &gt; &gt; &gt; work out what to do based on the extension in the URL. So, use:
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;  req.content_type = 'text/plain'
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; Graham
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; On 28/01/2008, Charles Collis &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">charles.collis at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; &gt; &gt; Hi.
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; I wonder if anyone can help - I am having problems getting the
</I>&gt;<i> Publisher
</I>&gt;<i> &gt; &gt; &gt; &gt; handler to return nothing.
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; I am wanting the publisher handler to return nothing when clicking
</I>&gt;<i> on a
</I>&gt;<i> &gt; &gt; link
</I>&gt;<i> &gt; &gt; &gt; &gt; that points to a particular function which will perform a system
</I>&gt;<i> &gt; &gt; command,
</I>&gt;<i> &gt; &gt; &gt; &gt; and I am using the recommended 'raise apache.SERVER_RETURN,
</I>&gt;<i> apache.OK'
</I>&gt;<i> &gt; &gt; &gt; &gt; trick.
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; This does indeed stop the page contents refreshing, but has the odd
</I>&gt;<i> &gt; &gt; &gt; &gt; side-effect of the browser asking wanting to download a file (of
</I>&gt;<i> 'python
</I>&gt;<i> &gt; &gt; &gt; &gt; script' type). This behaviour happens in both Firefox 3 beta2 and
</I>&gt;<i> &gt; &gt; Konqueror.
</I>&gt;<i> &gt; &gt; &gt; &gt; It even does it if the function doesn't do anything:
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; def launch():
</I>&gt;<i> &gt; &gt; &gt; &gt;    pass
</I>&gt;<i> &gt; &gt; &gt; &gt;    raise apache.SERVER_RETURN, apache.OK
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; I am running Ubuntu Gutsy.
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; Apache and mod_python details:
</I>&gt;<i> &gt; &gt; &gt; &gt; Apache/2.2.4 (Ubuntu) mod_python/3.3.1 Python/2.5.1
</I>&gt;<i> PHP/5.2.3-1ubuntu6.3
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; Any pointers appreciated. Thanks.
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; Charles Collis.
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; _______________________________________________
</I>&gt;<i> &gt; &gt; &gt; &gt; Mod_python mailing list
</I>&gt;<i> &gt; &gt; &gt; &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i>
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024762.html">[mod_python] Problem getting the Publisher handler to return
	nothing
</A></li>
	<LI>Next message: <A HREF="024774.html">[mod_python] Problem getting the Publisher handler to return
	nothing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24763">[ date ]</a>
              <a href="thread.html#24763">[ thread ]</a>
              <a href="subject.html#24763">[ subject ]</a>
              <a href="author.html#24763">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
