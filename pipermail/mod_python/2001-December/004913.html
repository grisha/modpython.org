<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] HTTP response codes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20HTTP%20response%20codes&In-Reply-To=20011231135138.D3328%40liberty.sba2.netlojix.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004911.html">
   <LINK REL="Next"  HREF="004912.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] HTTP response codes</H1>
    <B>Gregory (Grisha) Trubetskoy</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20HTTP%20response%20codes&In-Reply-To=20011231135138.D3328%40liberty.sba2.netlojix.net"
       TITLE="[mod_python] HTTP response codes">grisha at modpython.org
       </A><BR>
    <I>Mon Dec 31 17:37:01 EST 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="004911.html">[mod_python] HTTP response codes
</A></li>
        <LI>Next message: <A HREF="004912.html">[mod_python] Mea culpa
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4913">[ date ]</a>
              <a href="thread.html#4913">[ thread ]</a>
              <a href="subject.html#4913">[ subject ]</a>
              <a href="author.html#4913">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<table border=0 width="100%"><tr><td>
<!--beginarticle-->
<PRE>By returning an error code, you're asking Apache to deal with your error.
Apache will then display a stock error page, and will send error headers
(req.err_headers_out instead of req.headers_out), which is why you didn't
see your header amongst them.

What you want to do instead is handle everything yourself, and then let
Apache know it's done by returning apache.OK.

Something like this should work (this is from the FAQ, btw):

 def handler(req):
     req.headers_out['location'] = '<A HREF="http://www.modpython.org/'">http://www.modpython.org/'</A>
     req.status = apache.HTTP_MOVED_TEMPORARILY
     req.send_http_header()
     return apache.OK

Grisha


On Mon, 31 Dec 2001, Clarence Gardner wrote:

&gt;<i>
</I>&gt;<i> I'm not seeing a way to do much with the response code. In particular,
</I>&gt;<i> I want to do a redirection, which requires a 3xx response and a Location
</I>&gt;<i> header.
</I>&gt;<i>
</I>&gt;<i> If I just return HTTP_MOVED_PERMANENTLY, the server sends an HTML
</I>&gt;<i> document containing an empty link, with a status of 301. If I set
</I>&gt;<i> the header, call send_http_header, and then return that status, I
</I>&gt;<i> get the same HTML, but with a 200 status (and my Location header
</I>&gt;<i> isn't included anyway).
</I>&gt;<i>
</I>&gt;<i> Have I missed something?
</I>&gt;<i> Thanks.
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Clarence Gardner
</I>&gt;<i> Software Engineer
</I>&gt;<i> NetLojix Communications
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">clarence at netlojix.com</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://www.modpython.org/mailman/listinfo/mod_python">http://www.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I>

</PRE>
<!--endarticle-->
</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004911.html">[mod_python] HTTP response codes
</A></li>
	<LI>Next message: <A HREF="004912.html">[mod_python] Mea culpa
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4913">[ date ]</a>
              <a href="thread.html#4913">[ thread ]</a>
              <a href="subject.html#4913">[ subject ]</a>
              <a href="author.html#4913">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
