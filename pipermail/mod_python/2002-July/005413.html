<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] new to mod_python, with a question.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20new%20to%20mod_python%2C%20with%20a%20question.&In-Reply-To=1026773181.12028.7.camel%40locutus">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005356.html">
   <LINK REL="Next"  HREF="005414.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] new to mod_python, with a question.</H1>
    <B>Jeff Davis</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20new%20to%20mod_python%2C%20with%20a%20question.&In-Reply-To=1026773181.12028.7.camel%40locutus"
       TITLE="[mod_python] new to mod_python, with a question.">list-mod_python at empires.org
       </A><BR>
    <I>Tue Jul 16 13:38:19 EST 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="005356.html">[mod_python] new to mod_python, with a question.
</A></li>
        <LI>Next message: <A HREF="005414.html">[mod_python] new to mod_python, with a question.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5413">[ date ]</a>
              <a href="thread.html#5413">[ thread ]</a>
              <a href="subject.html#5413">[ subject ]</a>
              <a href="author.html#5413">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<table border=0 width="100%"><tr><td>
<!--beginarticle-->
<PRE>Is is possible that you're using the publisher handler? The publisher handler 
basically does a req.write() on whatever is returned by your function. So, it 
looks like it's printing the actual text of apache.OK after all of your 
req.write()s. Look in your apache config for possible use of 
mod_python.publisher, or perhaps something else that might print the return 
of your function.

Regards,
	Jeff

On Monday 15 July 2002 03:46 pm, Bill Anderson wrote:
&gt;<i> OK, so here is what I am doing. I am using PageTemplates (from zope) and
</I>&gt;<i> mod_python. or at least, I am trying to. :)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> if I do _NOT_ use the request object (i.e. I return a fully formed html
</I>&gt;<i> string/document), it works fine. but of course, that means no use of
</I>&gt;<i> mod-python's request objects functions such as cookie/header
</I>&gt;<i> construction, usage, etc.
</I>&gt;<i>
</I>&gt;<i> To wit:
</I>&gt;<i> def sayit(req,x=12):
</I>&gt;<i> 	if not x:
</I>&gt;<i> 		return &quot;I need x&quot;
</I>&gt;<i> 	if not master:
</I>&gt;<i> 		return &quot;I need a master object&quot;
</I>&gt;<i> 	pt=PageTemplate()
</I>&gt;<i> 	filestring =
</I>&gt;<i> &quot;&quot;.join(open(&quot;/home/ucntcme/public_html/pythonapps/test.pt&quot;).readlines())
</I>&gt;<i> 	pt.write(filestring)
</I>&gt;<i> 	myx=int(x)
</I>&gt;<i>         req.content_type=&quot;text/html&quot;
</I>&gt;<i>         req.send_http_headers()
</I>&gt;<i> 	req.write( pt(x=myx,master=master) )
</I>&gt;<i> 	return apache.OK
</I>&gt;<i>
</I>&gt;<i> returns my rendered template, but at the bottom has:
</I>&gt;<i>
</I>&gt;<i> HTTP/1.1 200 OK Date: Mon, 15 Jul 2002 22:44:27 GMT Server:
</I>&gt;<i> Apache/1.3.22 (Unix) (Red-Hat/Linux) mod_python/2.7.8 Python/2.2.1
</I>&gt;<i> mod_ssl/2.8.5 OpenSSL/0.9.6b DAV/1.0.2 PHP/4.0.6 mod_perl/1.26
</I>&gt;<i> Connection: close Transfer-Encoding: chunked Content-Type: text/html;
</I>&gt;<i> charset=iso-8859-1
</I>&gt;<i> OK
</I>&gt;<i> The server encountered an internal error or misconfiguration and was
</I>&gt;<i> unable to complete your request.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Debug is on, and there are no mesages in the error_log.
</I>&gt;<i>
</I>&gt;<i> Now, if I just return the content using return (content), it works fine.
</I>&gt;<i>
</I>&gt;<i> Why is this/what am I doing wrong here?
</I>&gt;<i>
</I>&gt;<i> Cheers, Bill
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://www.modpython.org/mailman/listinfo/mod_python">http://www.modpython.org/mailman/listinfo/mod_python</A>
</I>

</PRE>
<!--endarticle-->
</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005356.html">[mod_python] new to mod_python, with a question.
</A></li>
	<LI>Next message: <A HREF="005414.html">[mod_python] new to mod_python, with a question.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5413">[ date ]</a>
              <a href="thread.html#5413">[ thread ]</a>
              <a href="subject.html#5413">[ subject ]</a>
              <a href="author.html#5413">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
