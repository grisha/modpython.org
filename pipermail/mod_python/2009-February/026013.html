<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Thread safety issue in Apache 2 Threaded MPM
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Thread%20safety%20issue%20in%20Apache%202%20Threaded%20MPM&In-Reply-To=b66ddc900902140313t706c64ebkace08a796a76d069%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026012.html">
   <LINK REL="Next"  HREF="026014.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Thread safety issue in Apache 2 Threaded MPM</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Thread%20safety%20issue%20in%20Apache%202%20Threaded%20MPM&In-Reply-To=b66ddc900902140313t706c64ebkace08a796a76d069%40mail.gmail.com"
       TITLE="[mod_python] Thread safety issue in Apache 2 Threaded MPM">graham.dumpleton at gmail.com
       </A><BR>
    <I>Sat Feb 14 06:28:26 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="026012.html">[mod_python] Thread safety issue in Apache 2 Threaded MPM
</A></li>
        <LI>Next message: <A HREF="026014.html">[mod_python] problem with input filter and POST data (fileupload)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26013">[ date ]</a>
              <a href="thread.html#26013">[ thread ]</a>
              <a href="subject.html#26013">[ subject ]</a>
              <a href="author.html#26013">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>2009/2/14 howard chen &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">howachen at gmail.com</A>&gt;:
&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i> I am a newbie to mod_python...as I am from PHP...
</I>&gt;<i>
</I>&gt;<i> Here are the story...
</I>&gt;<i>
</I>&gt;<i> In PHP's world, they recommend to use Apache 1.x or 2.x in prefork
</I>&gt;<i> mode, to avoid the potential thread safety problem...their reasons
</I>&gt;<i> are...
</I>&gt;<i>
</I>&gt;<i> ------------------------
</I>&gt;<i> PHP is glue. It is the glue used to build cool web applications by
</I>&gt;<i> sticking dozens of 3rd-party libraries together and making it all
</I>&gt;<i> appear as one coherent entity through an intuitive and easy to learn
</I>&gt;<i> language interface. The flexibility and power of PHP relies on the
</I>&gt;<i> stability and robustness of the underlying platform. It needs a
</I>&gt;<i> working OS, a working web server and working 3rd-party libraries to
</I>&gt;<i> glue together. When any of these stop working PHP needs ways to
</I>&gt;<i> identify the problems and fix them quickly. When you make the
</I>&gt;<i> underlying framework more complex by not having completely separate
</I>&gt;<i> execution threads, completely separate memory segments and a strong
</I>&gt;<i> sandbox for each request to play in, feet of clay are introduced into
</I>&gt;<i> PHP's system....
</I>&gt;<i> ------------------------
</I>
Which looks in part like an admission that they aren't capable of
writing thread safe code, nor trust developers of third party
extensions for PHP to write thread safe code, or even trust the users
of PHP to write thread safe code. :-)

The issue is probably more that the heritage of PHP is such that
originally it wasn't written with multithreading in mind and so the
code that implements PHP and perhaps the language itself doesn't lend
itself to writing mutithread safe code. Thus, perhaps more poor design
decisions than it being a hard problem to solve.

&gt;<i> So it is the same with mod_python?
</I>&gt;<i>
</I>&gt;<i> So should I recommended to use Apache 1.x to avoid the potential
</I>&gt;<i> thread safety issue?
</I>&gt;<i> (Yes I know it is very rare, maybe even 0.0000001%, but just want to confirm)
</I>
Unlike PHP, the Python core and extensions modules available for it
are pretty well all thread safe. There are a few exceptions, but they
aren't commonly used packages.

Thus, what it really comes down to is whether you yourself think you
are capable of writing thread safe code. FWIW, it is much easier to
write thread safe code in Python than it is many other languages. But
if you don't think you understand multi thread programming enough to
do it properly, then use Apache 2.X and prefork MPM.

Do not use Apache 1.X, the version of mod_python available for it is
very old and buggy.

Of course, if you are working on Windows you have no choice as Apache
is only available in a multithread configuration on that platform.

Graham
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026012.html">[mod_python] Thread safety issue in Apache 2 Threaded MPM
</A></li>
	<LI>Next message: <A HREF="026014.html">[mod_python] problem with input filter and POST data (fileupload)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26013">[ date ]</a>
              <a href="thread.html#26013">[ thread ]</a>
              <a href="subject.html#26013">[ subject ]</a>
              <a href="author.html#26013">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
