<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] PythonAutoReload?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20PythonAutoReload%3F&In-Reply-To=4129690F.2000007%40apnic.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016177.html">
   <LINK REL="Next"  HREF="016182.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] PythonAutoReload?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Malcolm Lockyer</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20PythonAutoReload%3F&In-Reply-To=4129690F.2000007%40apnic.net"
       TITLE="[mod_python] PythonAutoReload?">maxp at orcon.net.nz
       </A><BR>
    <I>Mon Aug 23 17:53:51 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="016177.html">[mod_python] PythonAutoReload?
</A></li>
        <LI>Next message: <A HREF="016182.html">[mod_python] PythonAutoReload?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16180">[ date ]</a>
              <a href="thread.html#16180">[ thread ]</a>
              <a href="subject.html#16180">[ subject ]</a>
              <a href="author.html#16180">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks for the reply.


Gah this is frustrating.. so far I've tried -&gt;

* Reloading the module on each page of the handler
* Changing the MaxRequestsPerChild to 1
* Changing the StartServers, MinSpareServers and MaxSpareServers to 1

With no change. Each approach seemed to slightly modify the behavior, 
with the reloading and with all the server directives set to 1 - it 
started alternating between the two outcomes (obviously apache has a 
sense of humor :P). I currently can't figure out weither the actual 
updating is triggered by the number of refreshes, or the time - since I 
havn't had any reproducable results with either. Seems to range between 
40 seconds and 1min 30, and 60 and 170 refreshes. Its like its picking a 
random number of time and requests and actually reloading the module 
when either of them is reached (even though I know its not, thats what 
it looks like). Also after re-reading the documentation again it says: 
&quot;&quot;&quot;By default, mod_python checks the time-stamp of the file and reloads 
the module if the module's file modification date is later than the last 
import or reload. This way changed modules get automatically reimported, 
eliminating the need to restart the server for every change.&quot;&quot;&quot;

So I've checked the time on my linux box, and ntp is still functioning 
properly. The time differnce between my two machines is &lt;1 second as far 
as I can tell. Also the file modify time (with ls) is clearly earlier 
than the current &quot;date&quot; - and it still doesn't reload.

Its just mocking me now :S...

Anyhow - enough time wasted, guess I'll be restarting apache alot. 
Thanks for your help though.

:<i>'(
</I>
M


Byron Ellacott wrote:

&gt;<i> Malcolm Lockyer wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> from mod_python import apache
</I>&gt;&gt;<i> from application import Authentication
</I>&gt;&gt;<i> I noticed the PythonAutoReload directive, even though it defaults to 
</I>&gt;&gt;<i> on, I added it to my .htaccess with no change. Also there isn't just 
</I>&gt;&gt;<i> a .pyc in the application folder I can delete.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I'm not sure if this is really what goes on, but I believe the 
</I>&gt;<i> PythonAutoReload directive tells mod_python that when it needs a 
</I>&gt;<i> module to handle a request, it should automatically reload any changed 
</I>&gt;<i> modules.
</I>&gt;<i>
</I>&gt;<i> This doesn't tell Python itself that all imports should reload changed 
</I>&gt;<i> modules.
</I>&gt;<i>
</I>&gt;<i> There are two solutions here.  The first is to configure your Apache 
</I>&gt;<i> process to be more conducive to debugging: MaxRequestsPerChild of 1, 
</I>&gt;<i> or start it in single process mode, or something similar.  The second 
</I>&gt;<i> is to use:
</I>&gt;<i>
</I>&gt;<i> from application import Authentication
</I>&gt;<i> if DEBUG_ON: reload(Authentication)
</I>&gt;<i>
</I>&gt;<i> I'd probably go with the first solution, if practical.
</I>&gt;<i>
</I>
</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016177.html">[mod_python] PythonAutoReload?
</A></li>
	<LI>Next message: <A HREF="016182.html">[mod_python] PythonAutoReload?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16180">[ date ]</a>
              <a href="thread.html#16180">[ thread ]</a>
              <a href="subject.html#16180">[ subject ]</a>
              <a href="author.html#16180">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
