<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] HTTP-Keep alive bug?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20HTTP-Keep%20alive%20bug%3F&In-Reply-To=D01B6030-E9BC-11D8-A8AA-003065966802%40mac.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016013.html">
   <LINK REL="Next"  HREF="016019.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] HTTP-Keep alive bug?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Gregory (Grisha) Trubetskoy</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20HTTP-Keep%20alive%20bug%3F&In-Reply-To=D01B6030-E9BC-11D8-A8AA-003065966802%40mac.com"
       TITLE="[mod_python] HTTP-Keep alive bug?">grisha at modpython.org
       </A><BR>
    <I>Mon Aug  9 11:12:50 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="016013.html">[mod_python] HTTP-Keep alive bug?
</A></li>
        <LI>Next message: <A HREF="016019.html">[mod_python] HTTP-Keep alive bug?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16017">[ date ]</a>
              <a href="thread.html#16017">[ thread ]</a>
              <a href="subject.html#16017">[ subject ]</a>
              <a href="author.html#16017">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

On Sun, 8 Aug 2004, [ISO-8859-1] S?bastien Arnaud wrote:

&gt;<i> First, I was wrong when I said mod_python was forcing the HTTP Header 
</I>&gt;<i> &quot;Connection: Close&quot;, it is in fact responding to a client request http 
</I>&gt;<i> keep-alive, but it is missing an important part: the HTTP header 
</I>&gt;<i> &quot;Content-Length: xxx&quot;!
</I>
If this is HTTP 1.1, then absense of content-length indicates that the 
browser wants chunked-encoding, which means that the output is a number 
indicating size, followed by a chunk of data. With HTTP 1.1 content-length 
is obsolete. There is a pretty good description of it here:

<A HREF="http://www.apacheweek.com/features/http11">http://www.apacheweek.com/features/http11</A>

&gt;<i> Since it is the only way browsers can keep connections alive (to know 
</I>&gt;<i> how much bytes they need to expect back from the server),
</I>
...not with HTTP 1.1

&gt;<i> without it, most browsers will NOT keep the connection alive (maybe your 
</I>&gt;<i> version of Firefox is sensitive to this missing header and tries to wait 
</I>&gt;<i> for more content to come back from the server)
</I>
No, this doesn't make a lot of sense. :-) The browser isn't keeping it 
alive because it is seeing a Connection: close, most likely.

&gt;<i> For the record I got mistaken in my early tests because I used Lynx to get 
</I>&gt;<i> the HTTP headers back, and found out that Lynx did not send a valid HTTP 1.1 
</I>&gt;<i> request with keep-alive (duh!), therefore it was ok to receive a &quot;Connection: 
</I>&gt;<i> Close&quot; back then.
</I>&gt;<i>
</I>&gt;<i> Anyway, I think it would be nice to have an explanation why mod_python is not 
</I>&gt;<i> setting by default the Content-Length HTTP header when it is already setting 
</I>&gt;<i> the &quot;Connection: Keep-alive&quot; HTTP header in response to a keep-alive request 
</I>&gt;<i> from the client.
</I>
Mod_python does not set the connection header anywhere in the code, but 
other code in Apache probably does. In my experience it is very smart 
about it, so there is more than likely a good reason for it. Something is 
telling Apache to send a &quot;close&quot;... It could the configuration, some 
module in Apache, and it could be something that the browser has caused 
(without seeing the actual headers its hard to tell).

Grisha
</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016013.html">[mod_python] HTTP-Keep alive bug?
</A></li>
	<LI>Next message: <A HREF="016019.html">[mod_python] HTTP-Keep alive bug?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16017">[ date ]</a>
              <a href="thread.html#16017">[ thread ]</a>
              <a href="subject.html#16017">[ subject ]</a>
              <a href="author.html#16017">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
