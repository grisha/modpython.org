<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Lifespan of objects
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Lifespan%20of%20objects&In-Reply-To=87smaiol5y.fsf%40tapsellferrier.co.uk">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016153.html">
   <LINK REL="Next"  HREF="016164.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Lifespan of objects</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Antonio Rodriguez</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Lifespan%20of%20objects&In-Reply-To=87smaiol5y.fsf%40tapsellferrier.co.uk"
       TITLE="[mod_python] Lifespan of objects">Antonio at Memora.com
       </A><BR>
    <I>Thu Aug 19 18:59:47 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="016153.html">[mod_python] Lifespan of objects
</A></li>
        <LI>Next message: <A HREF="016164.html">[mod_python] Lifespan of objects
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16154">[ date ]</a>
              <a href="thread.html#16154">[ thread ]</a>
              <a href="subject.html#16154">[ subject ]</a>
              <a href="author.html#16154">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> When I started playing with DB API stuff I thought that destruction
</I>&gt;<i> would close the connection, but it didn't seem to. I had to
</I>&gt;<i> specifically close them.
</I>
How do you specifically close them especially when mod_python is 
performing the module reload automatically? Is there some sort of 
unload hook?

I can think that an alternative is to put all of the db connection code 
in a dbmodule.py and then import from there for the script your working 
on. Since this dbmodule.py will not change as you work on your code, 
its global dict (and therefore your connection object) should stay in 
scope the whole time (unless you change dbmodule.py).

Does this make sense?

AR

On Aug 19, 2004, at 5:47 PM, Nic Ferrier wrote:

&gt;<i> Svenne Krap &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">svenne at krap.dk</A>&gt; writes:
</I>&gt;<i>
</I>&gt;&gt;<i> I don't realize how I am using a single connection in parallel.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> While running apache, it forks new processes if there are simultanious
</I>&gt;&gt;<i> connections. Each of these should open exactly one connection and
</I>&gt;&gt;<i> use that.
</I>&gt;<i>
</I>&gt;<i> Sorry, I missed what mpm you were using.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> I thought, that my example was a simple connection pool (I never need
</I>&gt;&gt;<i> more than one cursor open per process anyhow), if I am in error, 
</I>&gt;&gt;<i> please
</I>&gt;&gt;<i> provide pointers to a good connection pool (I haven't been able to
</I>&gt;&gt;<i> locate any through google. Just a mailing-list suggestion that 
</I>&gt;&gt;<i> resembles
</I>&gt;&gt;<i> my solution).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It seems however, when I modify the .py-file the amount of connections
</I>&gt;&gt;<i> grow. Is my program &quot;losing&quot; connections when the module is reloaded
</I>&gt;&gt;<i> ?
</I>&gt;<i>
</I>&gt;<i> If you modify the .py I'm sure you'll lose them. The old instances
</I>&gt;<i> will go out of scope and not be closed.
</I>&gt;<i>
</I>&gt;<i> When I started playing with DB API stuff I thought that destruction
</I>&gt;<i> would close the connection, but it didn't seem to. I had to
</I>&gt;<i> specifically close them.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Nic
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I>
</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016153.html">[mod_python] Lifespan of objects
</A></li>
	<LI>Next message: <A HREF="016164.html">[mod_python] Lifespan of objects
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16154">[ date ]</a>
              <a href="thread.html#16154">[ thread ]</a>
              <a href="subject.html#16154">[ subject ]</a>
              <a href="author.html#16154">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
