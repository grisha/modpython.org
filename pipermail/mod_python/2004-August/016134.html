<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> Weirdness. Re: [mod_python] Help with apache.import_module
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=Weirdness.%20Re%3A%20%5Bmod_python%5D%20Help%20with%20apache.import_module&In-Reply-To=1092850338.5283.14.camel%40sleek">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016133.html">
   <LINK REL="Next"  HREF="016135.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Weirdness. Re: [mod_python] Help with apache.import_module</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>donnie</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=Weirdness.%20Re%3A%20%5Bmod_python%5D%20Help%20with%20apache.import_module&In-Reply-To=1092850338.5283.14.camel%40sleek"
       TITLE="Weirdness. Re: [mod_python] Help with apache.import_module">donnie at darthik.com
       </A><BR>
    <I>Wed Aug 18 15:01:20 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="016133.html">[mod_python] Help with apache.import_module
</A></li>
        <LI>Next message: <A HREF="016135.html">Weirdness. Re: [mod_python] Help with apache.import_module
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16134">[ date ]</a>
              <a href="thread.html#16134">[ thread ]</a>
              <a href="subject.html#16134">[ subject ]</a>
              <a href="author.html#16134">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Well, I thought I had it completely working...
I have found that I can only get the module that I am trying to import
to be found if I load that module through the url:
<A HREF="http://localhost/python/mymodule.py/mytest">http://localhost/python/mymodule.py/mytest</A>
before trying to access the module in the url:
<A HREF="http://localhost/python/blah.py/main">http://localhost/python/blah.py/main</A>

I guess apache can find the module once it has been loaded into memory,
but is not finding the module if it has not been loaded first?
This boggles my mind....?
Thanks.

--
Donnie

On Wed, 2004-08-18 at 13:32, donnie wrote:
&gt;<i> On Wed, 2004-08-18 at 12:39, donnie wrote:
</I>&gt;<i> &gt; I am having problems importing a module when using mod_python.
</I>&gt;<i> &gt; Here is the error I receive...
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; --------begin-----------
</I>&gt;<i> &gt; Mod_python error: &quot;PythonHandler mod_python.publisher&quot;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Traceback (most recent call last):
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;   File &quot;/usr/lib/python2.3/site-packages/mod_python/apache.py&quot;, line 299, in HandlerDispatch
</I>&gt;<i> &gt;     result = object(req)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;   File &quot;/usr/lib/python2.3/site-packages/mod_python/publisher.py&quot;, line 98, in handler
</I>&gt;<i> &gt;     path=[path])
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;   File &quot;/usr/lib/python2.3/site-packages/mod_python/apache.py&quot;, line 457, in import_module
</I>&gt;<i> &gt;     module = imp.load_module(mname, f, p, d)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;   File &quot;/var/www/python/blah.py&quot;, line 2, in ?
</I>&gt;<i> &gt;     mymodule = apache.import_module('mymodule', log=1)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;   File &quot;/usr/lib/python2.3/site-packages/mod_python/apache.py&quot;, line 454, in import_module
</I>&gt;<i> &gt;     f, p, d = imp.find_module(parts[i], path)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; ImportError: No module named mymodule
</I>&gt;<i> &gt; ----------end---------
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; This is the file I am executing.
</I>&gt;<i> &gt; filename: blah.py
</I>&gt;<i> &gt; --------begin-----------
</I>&gt;<i> &gt; from mod_python import apache
</I>&gt;<i> &gt; mymodule = apache.import_module('mymodule', log=1)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; def main(req):
</I>&gt;<i> &gt;   num = 100
</I>&gt;<i> &gt;   blah = mymodule.mytest(num)
</I>&gt;<i> &gt;   req.write(&quot;this is a test, blah = %s&quot; % blah)
</I>&gt;<i> &gt;   return
</I>&gt;<i> &gt; ---------end----------
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Here is the file that contains the module that I am trying to import.
</I>&gt;<i> &gt; filename: mymodule.py
</I>&gt;<i> &gt; --------begin----------
</I>&gt;<i> &gt; def mytest(num):
</I>&gt;<i> &gt;   blah = num
</I>&gt;<i> &gt;   return blah
</I>&gt;<i> &gt; --------end------------
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I am not sure what I am doing wrong....
</I>&gt;<i> &gt; The files are located in /var/www/python/
</I>&gt;<i> &gt; and blah.py is loaded like this: <A HREF="http://localhost/python/blah.py">http://localhost/python/blah.py</A>
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Any help would be greatly appreciated.
</I>&gt;<i> &gt; I am very new to python and modpython, but I am hooked!
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Thank you.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; --
</I>&gt;<i> &gt; Donnie
</I>&gt;<i> &gt; 
</I>&gt;<i> 
</I>&gt;<i> Well, after testing and testing and trying again and again, I got it to
</I>&gt;<i> work!  haha... simple errors always get ya. ;-)
</I>&gt;<i> 
</I>&gt;<i> First problem, I wasn't calling the function in my url.
</I>&gt;<i> <A HREF="http://localhost/python/blah.py/main">http://localhost/python/blah.py/main</A>
</I>&gt;<i> That got the file to load, but mozilla was asking me to save the file
</I>&gt;<i> b.c it didn't know how to handle the file.
</I>&gt;<i> 
</I>&gt;<i> Second problem, I forgot to add:
</I>&gt;<i> req.content_type = &quot;text/html&quot;
</I>&gt;<i> req.send_http_header()
</I>&gt;<i> 
</I>&gt;<i> Well, hope that helps anyone else in the future.
</I>&gt;<i> Thanks.
</I>&gt;<i> 
</I>&gt;<i> --
</I>&gt;<i> Donnie
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> ______________________________________________________________________
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
Url : <A HREF="http://modpython.org/pipermail/mod_python/attachments/20040818/d0126531/attachment.bin">http://modpython.org/pipermail/mod_python/attachments/20040818/d0126531/attachment.bin</A>
</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016133.html">[mod_python] Help with apache.import_module
</A></li>
	<LI>Next message: <A HREF="016135.html">Weirdness. Re: [mod_python] Help with apache.import_module
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16134">[ date ]</a>
              <a href="thread.html#16134">[ thread ]</a>
              <a href="subject.html#16134">[ subject ]</a>
              <a href="author.html#16134">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
