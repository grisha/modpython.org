<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Problems inheriting BaseSession
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Problems%20inheriting%20BaseSession&In-Reply-To=412F9504.4030000%40virgilio.it">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016245.html">
   <LINK REL="Next"  HREF="016253.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Problems inheriting BaseSession</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Byron Ellacott</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Problems%20inheriting%20BaseSession&In-Reply-To=412F9504.4030000%40virgilio.it"
       TITLE="[mod_python] Problems inheriting BaseSession">bje at apnic.net
       </A><BR>
    <I>Mon Aug 30 10:41:09 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="016245.html">[mod_python] Problems inheriting BaseSession
</A></li>
        <LI>Next message: <A HREF="016253.html">[mod_python] Nested loops in PSP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16252">[ date ]</a>
              <a href="thread.html#16252">[ thread ]</a>
              <a href="subject.html#16252">[ subject ]</a>
              <a href="author.html#16252">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>R. Pelizzi wrote:
&gt;<i> A few days ago i was trying to implement a &quot;counter&quot; for a site... i had 
</I>&gt;<i> to keep track of the number of active sessions and i was asking for a 
</I>&gt;<i> way to store variables global to the whole server. There was no way to 
</I>&gt;<i> do that, so i tought i could implement a dbm db file and pickle the 
</I>&gt;<i> values. I can't see any way to implement an efficient locking mechanism 
</I>&gt;<i> (since semaphores cannot be shared between interpreters), what would you 
</I>&gt;<i> use? Would using files as semaphores be very inefficient?
</I>&gt;<i> Anyway, i thought i would just implement locking later, and i started 
</I>&gt;<i> the implementation. I created a class called Application, which is 
</I>&gt;<i> perfectly working (tough not thread-safe as i explained before) and can 
</I>&gt;<i> be access like a dictionary.
</I>
I suggest you look at Session.py.  It demonstrates how to use the Apache 
APIs to create global locks and how to set cleanup handlers. 
Interestingly, there is only one reason you couldn't use 
Session.Session() directly: you can't create a session with a 
predetermined session ID.  If you create that out of band, or alter 
Session.py to allow a fixed sid or create a session with a given sid, 
you could just use:

app_obj = Session.Session(req, 'MyGlobalSID')

And there's your dbm or memory backed global session.  Note that if it's 
a memory session you'll lose your data each time the server restarts; if 
that's a problem you should create a DbmSession directly instead.

Updating the Session module to allow a constant sid would perhaps 
involve altering the base __init__() to have a new optional argument of 
&quot;fixed=0.&quot;  Then add checks to the bits in __init__ dealing with session 
IDs, to neither check nor create cookies, and not create a new sid if 
the session couldn't be loaded.

-- 
bje
</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016245.html">[mod_python] Problems inheriting BaseSession
</A></li>
	<LI>Next message: <A HREF="016253.html">[mod_python] Nested loops in PSP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16252">[ date ]</a>
              <a href="thread.html#16252">[ thread ]</a>
              <a href="subject.html#16252">[ subject ]</a>
              <a href="author.html#16252">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
