<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Cookies &amp; Redirects
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Cookies%20%26%20Redirects&In-Reply-To=41296DC9.3070205%40apnic.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016179.html">
   <LINK REL="Next"  HREF="016171.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Cookies &amp; Redirects</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Jim Dabell</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Cookies%20%26%20Redirects&In-Reply-To=41296DC9.3070205%40apnic.net"
       TITLE="[mod_python] Cookies &amp; Redirects">jim-mod-python at jimdabell.com
       </A><BR>
    <I>Mon Aug 23 07:06:03 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="016179.html">[mod_python] Cookies &amp; Redirects
</A></li>
        <LI>Next message: <A HREF="016171.html">[mod_python] Why do I get a 405 ERROR on HEAD REQUEST? 
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16181">[ date ]</a>
              <a href="thread.html#16181">[ thread ]</a>
              <a href="subject.html#16181">[ subject ]</a>
              <a href="author.html#16181">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Monday 23 August 2004 05:08, Byron Ellacott wrote:
&gt;<i> Jim Dabell wrote:
</I>&gt;<i> &gt; Under what circumstances is having separate sets of headers useful?  Does
</I>&gt;<i>
</I>&gt;<i> def handle_response():
</I>&gt;<i>      set_content_type()
</I>&gt;<i>      set_cache_controls()
</I>&gt;<i>      set_content_length()
</I>&gt;<i>      do_fallible_operation()
</I>&gt;<i>      return apache.OK
</I>&gt;<i>
</I>&gt;<i> ... and if do_fallible_operation() happens to raise an exception,
</I>&gt;<i> assuming it's handled correctly and an appropriate error message is
</I>&gt;<i> generated for the user and a 5xx return code is raised, then the content
</I>&gt;<i> type, length and cache controls that have been set are no longer
</I>&gt;<i> appropriate.
</I>
I see what you mean, but surely it's a bad idea to assume success and output 
headers before you try do_fallible_operation()?  Wouldn't it be far better to 
attempt do_fallible_operation() before outputting headers that depend upon 
success?

On the flip side, there are all sorts of situations where it's a pain in the 
neck - caching 410 responses, setting the correct media type/character 
encoding, debugging information, etc.  It's not a good idea to assume headers 
wouldn't apply to error conditions.

It just seems to me that it's an optimisation that only works for poorly 
structured handlers and can get in the way of other people.  If somebody 
outputs headers and then realises the headers are wrong later in the program, 
well then they should either use a better design or take the headers back out 
again before raising an exception.

Is there a list somewhere of which items in headers_out get used in error 
conditions?  The Location header is, but what about others?  A quick skim of 
the source didn't reveal much, but I don't really know my way around it that 
well yet.

-- 
Jim Dabell

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016179.html">[mod_python] Cookies &amp; Redirects
</A></li>
	<LI>Next message: <A HREF="016171.html">[mod_python] Why do I get a 405 ERROR on HEAD REQUEST? 
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16181">[ date ]</a>
              <a href="thread.html#16181">[ thread ]</a>
              <a href="subject.html#16181">[ subject ]</a>
              <a href="author.html#16181">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
