<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Caching issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Caching%20issues&In-Reply-To=88e286470901112119k7e86cdbbpacc30aee397c9de8%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025929.html">
   <LINK REL="Next"  HREF="025931.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Caching issues</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Tim Valenta</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Caching%20issues&In-Reply-To=88e286470901112119k7e86cdbbpacc30aee397c9de8%40mail.gmail.com"
       TITLE="[mod_python] Caching issues">tonightslastsong at gmail.com
       </A><BR>
    <I>Tue Jan 13 00:17:46 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="025929.html">[mod_python] Caching issues
</A></li>
        <LI>Next message: <A HREF="025931.html">[mod_python] Caching issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25930">[ date ]</a>
              <a href="thread.html#25930">[ thread ]</a>
              <a href="subject.html#25930">[ subject ]</a>
              <a href="author.html#25930">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> You just need to ensure you set mod_python's own module search path,
</I>&gt;<i> ie. mod_python.importer.path
</I>
And yet, as I've now removed my www directory from my PythonPath, I
actually get limited functionality out of the mod_python imports.
I've got my apache conf file globally applying the option:

	PythonOption mod_python.importer.path &quot;['~']&quot;
Also have tried using an absolute path, which is producing the same
functionality:
	PythonOption mod_python.importer.path &quot;['V:/www/']&quot;

My main module ('A') is requested by Apache in my browser, which uses
import_module to find and import file B.  File B is in the same
directory as A, and they only way it was found was through my apache
conf noted above.  This part works just fine, but two cases develop
from here:

1) If I use module B to import a third module 'C', I can't seem to
make it find module C if it's in a subdirectory.  For instance, doing
either 'import subDirectory.moduleC' or doing
'apache.import_module(&quot;subDirectory/moduleC&quot;)' results in a failure to
find the module.  Note that in this case of subdirectories, I'm
intentionally avoiding absolute paths to reach my modules.  I only
want to get absolute in my Apache conf.  On the flip side, if module C
is in the same local directory as A and B, then mod_python finds
module C just fine.

2 ) If I place C in the same directory as A and B, so that mod_python
finds it, I tried using the natural Python 'import' keyword in B to
import C.  According to what I understand, this should be fine for
auto-reloading, since A imports B via import_module, and so then B can
use either importing strategy to get C in the picture because
mod_python uses import_module behind the scenes anyway.  In this
setup, my caching issue remains, and changes to C are definitely not
reflected in apache until a server restart.  Again note that it
doesn't matter if I make B use the 'import' keyword or the
apache.import_module() method.  Both result in failure to reload.

I can't seem to diagnose what's even wrong, since the only reason
module A, B, or C is being found in the first place is because of my
importer.path variable is set in httpd.conf.  I've been using
practically empty files to test this.  Each file contains no more than
5 lines to get the modules imported and then to write out a
confirmation to the screen that it worked.

Wisdom to offer?

&gt;<i> Now you do realise you don't need to convert 'import' to
</I>&gt;<i> import_module() everywhere?
</I>&gt;<i>
</I>&gt;<i> The 'import' directive when used inside a file which was already
</I>&gt;<i> managed by mod_python calls import_module() internally anyway.
</I>&gt;<i>
</I>&gt;<i> You just need to ensure you set mod_python's own module search path,
</I>&gt;<i> ie. mod_python.importer.path
</I>&gt;<i>
</I>&gt;<i> Graham
</I>&gt;<i>
</I>&gt;<i> 2009/1/12 Tim Valenta &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">tonightslastsong at gmail.com</A>&gt;:
</I>&gt;<i> &gt; Okay, I think I'm on the same page as you now-- I've been playing
</I>&gt;<i> &gt; around with it and it seems that when I leave my PythonPath to find my
</I>&gt;<i> &gt; import modules, I definitely get no auto reloading goodness, while
</I>&gt;<i> &gt; when I specify the root path to find them as files, rather than as
</I>&gt;<i> &gt; modules (as explained in that documentation you linked to), things
</I>&gt;<i> &gt; seem to work as expected.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I wasn't getting any warnings in my apache log, and after putting
</I>&gt;<i> &gt; together the details, I shouldn't be expecting any of that behavior
</I>&gt;<i> &gt; with two of the same module in memory.  My issue seems to be simply in
</I>&gt;<i> &gt; avoiding letting my PythonPath find my code.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Thank you much,
</I>&gt;<i> &gt; Tim
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On Sun, Jan 11, 2009 at 9:39 PM, Graham Dumpleton
</I>&gt;<i> &gt; &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt;&gt; 2009/1/12 Tim Valenta &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">tonightslastsong at gmail.com</A>&gt;:
</I>&gt;<i> &gt;&gt;&gt; Okay, that makes sense.  My PythonPath system var definitely includes
</I>&gt;<i> &gt;&gt;&gt; my www directory.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; That in itself may not be enough to cause problem. You should actually
</I>&gt;<i> &gt;&gt; see a warning in Apache error log complaining you have done this. That
</I>&gt;<i> &gt;&gt; is, overlapped sys.path with directories that mod_python module
</I>&gt;<i> &gt;&gt; importer uses.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; The real problem with doing this overlapping is that a module which
</I>&gt;<i> &gt;&gt; wasn't one managed by mod_python, ie., standard Python module, imports
</I>&gt;<i> &gt;&gt; something from the www directory, which also happens to be a handler
</I>&gt;<i> &gt;&gt; module, there will actually be too copies in memory and so can give
</I>&gt;<i> &gt;&gt; unexpected results.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Graham
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; I had been using a forced path in my apache conf
</I>&gt;<i> &gt;&gt;&gt; file to point to '~', for simple reference for the time being.
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; I think my problem is simply that the modules I'm trying to import
</I>&gt;<i> &gt;&gt;&gt; aren't 'candidates' for reloading.  Other than that, all other modules
</I>&gt;<i> &gt;&gt;&gt; should already have been chained together with these
</I>&gt;<i> &gt;&gt;&gt; apache.load_module calls.  My test case was pretty simple-- just two
</I>&gt;<i> &gt;&gt;&gt; scripts, the first loading the second.
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; Tim
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; On Sun, Jan 11, 2009 at 8:25 PM, Graham Dumpleton
</I>&gt;<i> &gt;&gt;&gt; &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt;&gt;&gt;&gt; 2009/1/12 Tim Valenta &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">tonightslastsong at gmail.com</A>&gt;:
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; Apologies for more trouble on the caching issue-- I've been adapting
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; some of my scripts over to this apache.load_module function, but I
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; don't think I'm seeing resolution to the issue.  If I've read the
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; documentation properly, it seems that the PythonOption for
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; auto-reloading is set to On by default, so to be clear, I haven't put
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; a line for that in my httpd.conf file.  Are there any other tricks, or
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; have I simply misread the documentation?  I still have to restart the
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; Apache service in order to push the changes.
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt; Reloading does not work for any Python modules/packages installed in
</I>&gt;<i> &gt;&gt;&gt;&gt; standard Python module search path. Thus, if you have set PythonPath
</I>&gt;<i> &gt;&gt;&gt;&gt; to some directory where you store your modules, or if they are in
</I>&gt;<i> &gt;&gt;&gt;&gt; system site-packages directory, they are not candidates for reloading.
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt; Where are the modules you are modifying and expecting to be reloading
</I>&gt;<i> &gt;&gt;&gt;&gt; located? Is that location on sys.path, or have you explicitly setup
</I>&gt;<i> &gt;&gt;&gt;&gt; mod_python module importer path to tell it where they are?
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt; From within running application, print out __name__ from the module
</I>&gt;<i> &gt;&gt;&gt;&gt; you have loaded and are expecting to be reloadable, What is it? Does
</I>&gt;<i> &gt;&gt;&gt;&gt; it look like a normal module name or something magic?
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt; How was that module imported? There needs to be a chain from
</I>&gt;<i> &gt;&gt;&gt;&gt; mod_python handler for imports right down through to all modules you
</I>&gt;<i> &gt;&gt;&gt;&gt; want reloadable. If there aren't, for example, you are using
</I>&gt;<i> &gt;&gt;&gt;&gt; import_module() from a normal Python module which isn't a candidate
</I>&gt;<i> &gt;&gt;&gt;&gt; for reloading, you will not see the depth checking for reloading
</I>&gt;<i> &gt;&gt;&gt;&gt; occurring as you might expect.
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt; Graham
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; Tim
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; On Sun, Jan 11, 2009 at 2:32 PM, Tim Valenta &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">tonightslastsong at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; Despite the jab at Windows, the site will be deployed on a Unix
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; machine.  I just prefer Windows for ease of use, especially since my
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; wife has zero experience on a unix terminal or in the dearth of truly
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; professional software found on the Unix/Linux platform.  So yes, in
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; the end it will be on a &quot;real&quot; operating system,  But for now I'm
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; willingly sticking to a more user-friendly environment for the simple
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; folk.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; Given the characteristics of PHP that allow it to circumvent this
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; caching stuff, I still think a nice little friendly red-flag reminder
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; on the main mod_python tutorial should point out this limitation of an
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; Apache module like this, for those of us like me, who would have gone
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; many months more before having every accidentally found this manual
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; import method.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; On Sun, Jan 11, 2009 at 2:23 PM, Graham Dumpleton
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; 2009/1/12 Tim Valenta &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">tonightslastsong at gmail.com</A>&gt;:
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; Still not short enough, so much so I stopped part way through.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt; And for that I apologize.  I do appreciate the straight answer given,
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt; though I would appreciate much more the addition of that fact in some
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt; point-blank documentation that was easy to find.  I have scoured the
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt; mod_python archives by search engine and came out utterly empty
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt; handed.  I knew what the problem was, but I could find nothing to
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt; remedy the issue.  I haven't encountered anything quite like this in
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt; my adventures with PHP, perl, or other similar scripting languages
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt; piloted by Apache.  It raises a valid concern to which I ideally
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt; should have found answers very quickly.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt; I hope this cures the subsequent issue given in the latter half of my message.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; PHP is specifically designed for web applications and it purposely
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; throws away all code at the end of each request and thus is reloading
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; it all on every request. Have a read of:
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;  <A HREF="http://blog.ianbicking.org/2008/01/12/what-php-deployment-gets-right/">http://blog.ianbicking.org/2008/01/12/what-php-deployment-gets-right/</A>
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; I would be very surprised if mod_perl auto reloaded code as it is
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; similar to Python in that you are applying a non web language to the
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; web. Only way perl code would be reload is if you were running them as
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; CGI scripts. If you run Python as CGI scripts you will get reloading
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; as well, but as with anything CGI, much slower.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; BTW, maybe read:
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;  <A HREF="http://blog.dscpl.com.au/2008/12/using-modwsgi-when-developing-django.html">http://blog.dscpl.com.au/2008/12/using-modwsgi-when-developing-django.html</A>
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; For WSGI hosted Python web application, this provides auto reloading
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; on code changes. You do need to use a real operating system though,
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; and not Windows.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; Graham
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt; Tim
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt; On Sat, Jan 10, 2009 at 10:23 PM, Graham Dumpleton
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt; &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; 2009/1/11 Tim Valenta &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">tonightslastsong at gmail.com</A>&gt;:
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; Hello all-- I've been experiencing a caching issue from the
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; very beginning of my use of mod_python...  It's been at least 2 months now,
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; and I keep running into actual issues that prevent me from coding.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; I have a knack for over-explaining, so I'll try to keep this concise yet
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; descriptive.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; Still not short enough, so much so I stopped part way through.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; The simple matter of it is that mod_python does not do deep checking
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; of code for changes, nor does it automatically restart the process
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; when code is changed. Thus the need to restart Apache when you make
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; code changes to anything imported from sys.path is expected and normal
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; behaviour.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; The only time any code is automatically reloaded is the direct code
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; files imported by mod_python using its own special module importer.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; This is documented under 'import_module()' function in:
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt;  <A HREF="http://www.modpython.org/live/current/doc-html/pyapi-apmeth.html">http://www.modpython.org/live/current/doc-html/pyapi-apmeth.html</A>
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; Graham
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; I'm developing a site on my local machine, Windows Vista, using Apache 2.2.x
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; and mod_python 3.3.1 .  I'm a programmer for a living, and I'm not quick to
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; point the finger at the language, *but* (you knew that was coming, eh?) I
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; know my code isn't to blame for the issue:
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; I write some basic code for an 'index.py' file, using the
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; mod_python.publisher handler.  'index.py' includes other modules which I've
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; coded from that same location, etc, etc.  Nothing fancy.  Any changes I make
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; in the 'index.py' file will be reflected immediately on my local web server.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt;  On the other hand, any changes I make to the modules included via import
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; from within 'index.py' are completely ignored by the web server.  It took me
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; a while to realize that my pages didn't reflect my code.  I also discovered
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; that the .pyc files had nothing to do with it.  I finally just restarted the
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; apache web service (which in fact runs as a service on my machine), and then
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; my code finally gets pushed through to the web server.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; I've been looking around practically every other day for documentation on
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; how to make apache/mod_python simply cut it out and stop caching my python
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; code, but I've found nothing.  You can imagine the annoyance this presents,
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; since I have to restart my web server every single time I make even the
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; slightest change to a 'utility.py' file, etc.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; I've been coping with the problem for a while now, but then I've found far
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; more annoying issues recently.  To abbreviate the problem into short terms,
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; I've got a main module 'MAIN' which imports another module for a class
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; 'CLASS'.  CLASS also has a few imports, such as 'backend' stuff for
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; interfacing with various databases, etc.  We'll call the 'backend' module
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; &quot;BACKEND&quot;.  Given the setup, any changes I make to CLASS or BACKEND require
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; an apache restart in order to take effect.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; I have a function in CLASS which calls a function from it's imported BACKEND
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; module.  I tried adding a parameter to the BACKEND function in question, and
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; properly passed said parameter while in CLASS, yet the mod_python debugger
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; spits out an error about me having passed 3 arguments, when the BACKEND
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; function takes exactly 2.  This is outright false, since my function in
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; BACKEND looks like:
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; def getUsers(self, req, terms):
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; and I'm calling it with
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; self.backend.getUsers(self.req, search)
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; In reality, my code dictates that I'm passing 3 (including the implicit
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; 'self' argument), and BACKEND's 'getUsers' does in fact take exactly 3
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; arguments.  Yet, the debugger is telling me that it takes only 2.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; I was trying to pass it 'req' because I wanted to investigate a little error
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; in the code by printing something to the output HTML.  So, my attempt is
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; foiled, since somewhere something isn't being updated to what my most
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; current code actually says.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; Just to test, I made the 'getUsers' function return immediately with a
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; string of gibberish, like 'return &quot;adsfasdfadsfa&quot;'.  this should make my
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; other code spin wildly out of control and encounter errors, yet when I
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; restart apache and test it... lo and behold, it's completely ignoring my
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; goofy 'return' statement.  The 'getUsers' function is still somehow
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; returning valid data, as if the 'return' wasn't there at all!
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; So then I tried causing actual syntax errors.  The debugger caught this,
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; much to my inner joy.  So I tried causing a semantic error instead:
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; referencing a non-existent attribute of a non-existent variable:
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; madeUpVar.moo = 42
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; Syntactically, nothing wrong, but at run time it should most definitely
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; encounter a NameError or something equally as realistic.  But I restart
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; apache, and... nothing.  The line is completely ignored.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; Which leads me to believe that it's not actually being 'ignored' per se, but
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; rather the code being compiled is not the same as the code in play within
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; the web server.  When I delete my .pyc files and restart apache and visit
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; the URL that triggers my python code, my .py files are in fact being
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; recompiled down to their byte code .pyc files.  And clearly the interpreter
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; is processing my code, since it flags me on improper syntax.  Yet, no matter
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; what kind of syntactically-sound nonsense I put into my code, the changes
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; aren't being reflected in my web server.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; These problems come and go, and I've go better explanation than over zealous
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; caching.  I imagine that by tomorrow sometime when I start my computer up,
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; the problem will have disappeared for the time being.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; I've cursed this computer up and down as I've tried to figure out ANYTHING
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; that I can do to alleviate the issue, by to no avail.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; Anybody with counsel to spare my tired brain is welcome to share...
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; _______________________________________________
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; Mod_python mailing list
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; _______________________________________________
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; Mod_python mailing list
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025929.html">[mod_python] Caching issues
</A></li>
	<LI>Next message: <A HREF="025931.html">[mod_python] Caching issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25930">[ date ]</a>
              <a href="thread.html#25930">[ thread ]</a>
              <a href="subject.html#25930">[ subject ]</a>
              <a href="author.html#25930">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
