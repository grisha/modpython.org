<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Reload problem - again!
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Reload%20problem%20-%20again%21&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008488.html">
   <LINK REL="Next"  HREF="008490.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
<table border=0 width="100%"><tr><td valign="top">
   <H1>[mod_python] Reload problem - again!</H1>
    <B>Ole Hansen</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Reload%20problem%20-%20again%21&In-Reply-To="
       TITLE="[mod_python] Reload problem - again!">dsl45393 at vip.cybercity.dk
       </A><BR>
    <I>Mon Oct 15 23:59:41 EST 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="008488.html">[mod_python] Segfaults with modpython2.7.6
</A></li>
        <LI>Next message: <A HREF="008490.html">[mod_python] Reload problem - again!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8489">[ date ]</a>
              <a href="thread.html#8489">[ thread ]</a>
              <a href="subject.html#8489">[ subject ]</a>
              <a href="author.html#8489">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I still have a reload problem when using mod_python. From the error_log below 
it can be seen (last line) that apache searches for a file called 'myfile.p'. 
What happend to the last 'y' in '.py' ?

I'm still using my homemade workaround, but I'm not sure this is the right 
way to do it. I'm using python 2.2.1 and I have just installed mod_python 
2.7.6 and apache 1.3.20, but the reload problem is still there. Is this 
really only a problem on my system?

My homemade workaround in apache.py (line 356,359) is as follows:

            # check also .py and take the newest
            ## if os.path.exists(filepath[:-1]) :
            if os.path.exists(filepath[:]):

                # get the time of the .py file
                ## mod = os.stat(filepath[:-1])
                mod = os.stat(filepath[:])
                mtime = max(mtime, mod[stat.ST_MTIME])


In filepath[:-1] I have just removed '-1'. Well, it works for me at the 
moment, but I'm afraid that someday nothing will work because of this 
modification. Could there be something else wrong with my configuration? If 
anybody have an idea I'm happy to hear about it.

Thanks in advance!
Br.
Ole Hansen


error_log: (with original apache.py)
----------------------------------------
[Mon Oct 15 22:49:15 2001] [error] PythonHandler mod_python.publisher: 
Traceback (most recent call last):
[Mon Oct 15 22:49:15 2001] [error] PythonHandler mod_python.publisher:   File 
&quot;/usr/local/lib/python2.1/site-packages/mod_python/apache.py&quot;, line 193, in 
Dispatch
    result = object(req)
[Mon Oct 15 22:49:15 2001] [error] PythonHandler mod_python.publisher:   File 
&quot;/usr/local/lib/python2.1/site-packages/mod_python/publisher.py&quot;, line 128, 
in handler
    module = apache.import_module(module_name, _req, [path])
[Mon Oct 15 22:49:15 2001] [error] PythonHandler mod_python.publisher:   File 
&quot;/usr/local/lib/python2.1/site-packages/mod_python/apache.py&quot;, line 356, in 
import_module
    if os.path.exists(filepath[:-1]) :
[Mon Oct 15 22:49:15 2001] [error] PythonHandler mod_python.publisher:   File 
&quot;/usr/local/lib/python2.1/posixpath.py&quot;, line 171, in exists
    st = os.stat(path)
[Mon Oct 15 22:49:15 2001] [error] PythonHandler mod_python.publisher: 
OSError: [Errno 2] No such file or directory:
'/usr/local/apache/htdocs/myfile.p'

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008488.html">[mod_python] Segfaults with modpython2.7.6
</A></li>
	<LI>Next message: <A HREF="008490.html">[mod_python] Reload problem - again!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8489">[ date ]</a>
              <a href="thread.html#8489">[ thread ]</a>
              <a href="subject.html#8489">[ subject ]</a>
              <a href="author.html#8489">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
