<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] problem using regular expressions in CGI scripts
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20problem%20using%20regular%20expressions%20in%20CGI%20scripts&In-Reply-To=20000518152302.A7535%40silicon.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007404.html">
   <LINK REL="Next"  HREF="007406.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
<table border=0 width="100%"><tr><td valign="top">
   <H1>[mod_python] problem using regular expressions in CGI scripts</H1>
    <B>Gregory Trubetskoy</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20problem%20using%20regular%20expressions%20in%20CGI%20scripts&In-Reply-To=20000518152302.A7535%40silicon.org"
       TITLE="[mod_python] problem using regular expressions in CGI scripts">grisha at modpython.org
       </A><BR>
    <I>Fri May 19 19:47:06 EST 2000</I>
    <P><UL>
        <LI>Previous message: <A HREF="007404.html">[mod_python] SOLVED: problem using regular expressions in CGI
 scripts
</A></li>
        <LI>Next message: <A HREF="007406.html">[mod_python] apache compile problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7405">[ date ]</a>
              <a href="thread.html#7405">[ thread ]</a>
              <a href="subject.html#7405">[ subject ]</a>
              <a href="author.html#7405">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm unable to reproduce this. Tried it as DSO, on Linux and FreeBSD and it
works fine...

Anybody else on the list want to try it?

Grisha


On Thu, 18 May 2000, Ralf Canis wrote:

&gt;<i> On Thu, May 18, 2000 at 09:15:50AM -0400, Gregory Trubetskoy wrote:
</I>&gt;<i> 
</I>&gt;<i> Hi Grisha,
</I>&gt;<i> 
</I>&gt;<i> same errors, here's one for example.
</I>&gt;<i> 
</I>&gt;<i> Ralf
</I>&gt;<i> 
</I>&gt;<i> ---snip---
</I>&gt;<i> \nERROR mod_python: &quot;PythonHandler myhandler&quot;
</I>&gt;<i> 
</I>&gt;<i> Traceback (innermost last):
</I>&gt;<i> 
</I>&gt;<i>   File &quot;/usr/lib/python1.5/site-packages/mod_python/apache.py&quot;, line 110, in Dispatch
</I>&gt;<i>     result = object(req)
</I>&gt;<i> 
</I>&gt;<i>   File &quot;./myhandler.py&quot;, line 8, in handler
</I>&gt;<i>     re.compile( r'foo(\(.+\))bar' )
</I>&gt;<i> 
</I>&gt;<i>   File &quot;/usr/lib/python1.5/re.py&quot;, line 79, in compile
</I>&gt;<i>     code=pcre_compile(pattern, flags, groupindex)
</I>&gt;<i> 
</I>&gt;<i> pcre.error: ('missing )', 2493)
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> NOTE: More output from other handlers, if any, may follow.
</I>&gt;<i> This will NOT happen, and request processing will STOP
</I>&gt;<i> at this point when you remove PythonDebug directive.
</I>&gt;<i> ---snip---
</I>&gt;<i> 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Can you try running the same code in your own handler, and see where that
</I>&gt;<i> &gt; takes you, in other words:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; httpd.conf:
</I>&gt;<i> &gt; AddHandler python-program .py
</I>&gt;<i> &gt; PythonHandler myhandler
</I>&gt;<i> &gt; PythonDebug
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Then the myhandler.py file would have something like
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; --- snip ---
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; from mod_python import apache
</I>&gt;<i> &gt; import re, sys
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; def handler(req):
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;     req.content_type = 'text/plain'
</I>&gt;<i> &gt;     req.send_http_header()
</I>&gt;<i> &gt;     re.compile( r'foo(\(.+\))bar' )
</I>&gt;<i> &gt;     req.write('ok')
</I>&gt;<i> &gt;     return apache.OK
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; --- snip ---
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Note that it is not necessary to print out the traceback - mod_python does
</I>&gt;<i> &gt; that for you if PythonDebug directive is specified.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Grisha
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; On Thu, 18 May 2000, Ralf Canis wrote:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &gt; On Thu, May 18, 2000 at 02:39:46PM +0300, Erno Kuusela wrote:
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; Hello Erno,
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; i haven't even installed mod_python yet, but a debugging idea
</I>&gt;<i> &gt; &gt; &gt; came to mind...
</I>&gt;<i> &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; if you compile your regular expressions, they will have a .pattern
</I>&gt;<i> &gt; &gt; &gt; attribute that contains your regexp. it seem to me something
</I>&gt;<i> &gt; &gt; &gt; in mod_python may be munging/interpreting \-escapes, so if
</I>&gt;<i> &gt; &gt; &gt; you print the pattern out and it looks different from the
</I>&gt;<i> &gt; &gt; &gt; one you put in, you might be closer to figuring out what
</I>&gt;<i> &gt; &gt; &gt; is going on..
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; Yes, I thought so, too. Therefor I modified re.py in lib/python1.5
</I>&gt;<i> &gt; &gt; at line 79 (re.compile) to print the pattern right before calling
</I>&gt;<i> &gt; &gt; pcre_compile - it's the pattern I call it with :(
</I>&gt;<i> &gt; &gt; Regarding this, I guess the problem is in prce_compile, but I did
</I>&gt;<i> &gt; &gt; not investigate this further.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> -- 
</I>&gt;<i> Ralf Canis            <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">ralf at silicon.org</A>
</I>&gt;<i> Germany               <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">canis at bigfoot.com</A>
</I>&gt;<i> 
</I>

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007404.html">[mod_python] SOLVED: problem using regular expressions in CGI
 scripts
</A></li>
	<LI>Next message: <A HREF="007406.html">[mod_python] apache compile problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7405">[ date ]</a>
              <a href="thread.html#7405">[ thread ]</a>
              <a href="subject.html#7405">[ subject ]</a>
              <a href="author.html#7405">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
