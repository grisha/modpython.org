<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] evaluation psp for inclusion in psp
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20evaluation%20psp%20for%20inclusion%20in%20psp&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021223.html">
   <LINK REL="Next"  HREF="021225.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] evaluation psp for inclusion in psp</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>David Bear</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20evaluation%20psp%20for%20inclusion%20in%20psp&In-Reply-To="
       TITLE="[mod_python] evaluation psp for inclusion in psp">David.Bear at asu.edu
       </A><BR>
    <I>Tue May 23 21:42:16 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021223.html">[mod_python] apache.OK and Cookies
</A></li>
        <LI>Next message: <A HREF="021225.html">[mod_python] clarity on request.form 
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21224">[ date ]</a>
              <a href="thread.html#21224">[ thread ]</a>
              <a href="subject.html#21224">[ subject ]</a>
              <a href="author.html#21224">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I am using publisher.

I have one psp template that I would like to evaluate for inclusion
into another psp template.

I thought I could do something like this:

==================================
def _get_psp(req, name=&quot;blank.ptml&quot;, vars={}, docroot=THISROOT, template=TEMPLATES):
    '''
    expects a docroot, template path and name of footer,
    returns a string containing the contents of the file named
    name'''
    fn = os.path.join(docroot, template, name)
    try:
        os.path.exists(fn)
    except IOError:
        inc = &quot;File %s NOT Found&quot; % fn
    ipsp = psp.PSP(req, filename=fn)
    ipsp.run(vars)
    return ipsp
==================================

then use it like this:

==================================
def index(req):
    '''
    default page
    '''
    fd = {}
    pspinclude = _get_psp(req, &quot;registrationForm.ptml&quot;, {&quot;submit&quot;:
&quot;http:&quot;})
    fd[&quot;formname&quot;]=&quot;regform1&quot;
    fd[&quot;form&quot;]=pspinclude
    return _any_page(req, fd, MAINTEMPLATE )
==================================

But the psp.run method writes directly to the req object and the prior
to anything being returned from _any_page(). I want a psp method that
returns a string of html (base on a psp template). Is there a psp
method that does that?

btw, perhaps my thinking is skewed on using psp. I'm trying structure
things similar to the way zope page templates TAL and METAL work...
but that may be too much of a stretch for psp and publisher.

-- 
David Bear
phone: 	480-965-8257
fax: 	480-965-9189
College of Public Programs/ASU
Wilson Hall 232
Tempe, AZ 85287-0803
 &quot;Beware the IP portfolio, everyone will be suspect of trespassing&quot;
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021223.html">[mod_python] apache.OK and Cookies
</A></li>
	<LI>Next message: <A HREF="021225.html">[mod_python] clarity on request.form 
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21224">[ date ]</a>
              <a href="thread.html#21224">[ thread ]</a>
              <a href="subject.html#21224">[ subject ]</a>
              <a href="author.html#21224">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
