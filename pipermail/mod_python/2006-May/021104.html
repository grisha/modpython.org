<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] How to change charset on the Content-Type line throu
	mod_python.publisher
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20How%20to%20change%20charset%20on%20the%20Content-Type%20line%20throu%0A%09mod_python.publisher&In-Reply-To=4464DCAD.90806%40ribosome.natur.cuni.cz">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021102.html">
   <LINK REL="Next"  HREF="021103.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] How to change charset on the Content-Type line throu
	mod_python.publisher</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20How%20to%20change%20charset%20on%20the%20Content-Type%20line%20throu%0A%09mod_python.publisher&In-Reply-To=4464DCAD.90806%40ribosome.natur.cuni.cz"
       TITLE="[mod_python] How to change charset on the Content-Type line throu
	mod_python.publisher">grahamd at dscpl.com.au
       </A><BR>
    <I>Fri May 12 18:19:21 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021102.html">[mod_python] How to change charset on the Content-Type line throu
	mod_python.publisher
</A></li>
        <LI>Next message: <A HREF="021103.html">[mod_python] error with test template system
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21104">[ date ]</a>
              <a href="thread.html#21104">[ thread ]</a>
              <a href="subject.html#21104">[ subject ]</a>
              <a href="author.html#21104">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 13/05/2006, at 5:06 AM, Martin MOKREJ&#352; wrote:

&gt;<i> Hi,
</I>&gt;<i>   I am trying to figure out how to affect my charset other than use
</I>&gt;<i> AddCharset Apache directive, which works over file extensions.
</I>&gt;<i> I don't think it makes sense to assign say 'utf8' to .html file  
</I>&gt;<i> extension.
</I>&gt;<i> When the HTML code is generated through mod_python.publisher, I should
</I>&gt;<i> be able to do it.
</I>&gt;<i>   The only examples how to alter Content-Type: is to use your own
</I>&gt;<i> handler. No, I don't need it, thanks. I'd immediately fall into the  
</I>&gt;<i> trap
</I>&gt;<i> with need to use 'req.write', 'return apache.OK', etc. somewhere in my
</I>&gt;<i> code.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.modpython.org/live/current/doc-html/pyapi-mprequest-">http://www.modpython.org/live/current/doc-html/pyapi-mprequest-</A> 
</I>&gt;<i> mem.html
</I>&gt;<i>
</I>&gt;<i> &lt;QUOTE&gt;
</I>&gt;<i> content_languages
</I>&gt;<i>     Tuple. List of strings representing the content languages.
</I>&gt;<i>
</I>&gt;<i> handler
</I>&gt;<i>     The name of the handler currently being processed. This is the  
</I>&gt;<i> handler
</I>&gt;<i>     set by mod_mime, not the mod_python handler. In most cases it  
</I>&gt;<i> will be
</I>&gt;<i>     &quot;&quot;mod_python&quot;. (Read-Only)
</I>&gt;<i>
</I>&gt;<i> content_encoding
</I>&gt;<i>     String. Content encoding. (Read-Only)
</I>&gt;<i> &lt;/QUOTE&gt;
</I>
I believe that content_encoding is only relevant to the received  
request.
Even if settable, nothing consults it in respect of updating anything  
in a
response.

&gt;<i>
</I>&gt;<i>   I awfully lack examples in the documentation. So, how can I make  
</I>&gt;<i> publisher
</I>&gt;<i> change my charset away from the site-wide defined value?
</I>
If using mod_python.publisher and returning your page content as the
return value, add &quot;req&quot; as one of the function input parameters and do:

   def index(req):
     req.content_type = 'text/html; charset=UTF8'
     return &quot;&lt;html&gt;....&lt;/html&gt;&quot;

Provided you are using mod_python 3.2.8, if the publisher function  
returns
a Unicode string, then mod_python.publisher will automatically attempt
to fill out the charset in the content type header for you.

&gt;<i> Please update the
</I>&gt;<i> docs. I very much appreciate the effort Graham and Nicolas does to  
</I>&gt;<i> support
</I>&gt;<i> this email list but save yourself some time and fix the docs for  
</I>&gt;<i> yourself! ;)
</I>
Some updates are made, but because they in source code repository copy
of documentation, you will not see them until next major release of  
mod_python.

Also, Nicolas, Jim and I all have limited time. Our job would be made  
easier
though if users of mod_python would like to offer up the examples and  
show
where to put them in the documentation. Remember, our focus is not  
likely
to be where your focus lies and so we wouldn't even think to update a  
certain
bit of documentation unless it is pointed out to us specifically with  
examples
of what to put in it to make it better.

Any documentation changes/enhancements can be logged at:

   <A HREF="http://issues.apache.org/jira/browse/MODPYTHON">http://issues.apache.org/jira/browse/MODPYTHON</A>

There is no point posting them just to the mailing list as they  
inevitably get lost.
If on JIRA, they have to be dealt with eventually.

Graham
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021102.html">[mod_python] How to change charset on the Content-Type line throu
	mod_python.publisher
</A></li>
	<LI>Next message: <A HREF="021103.html">[mod_python] error with test template system
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21104">[ date ]</a>
              <a href="thread.html#21104">[ thread ]</a>
              <a href="subject.html#21104">[ subject ]</a>
              <a href="author.html#21104">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
