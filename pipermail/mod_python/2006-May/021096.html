<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Graham's New Importer
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Graham%27s%20New%20Importer&In-Reply-To=41362E48-242C-4B01-86BD-245699781BDB%40dscpl.com.au">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021095.html">
   <LINK REL="Next"  HREF="021087.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Graham's New Importer</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Dan Eloff</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Graham%27s%20New%20Importer&In-Reply-To=41362E48-242C-4B01-86BD-245699781BDB%40dscpl.com.au"
       TITLE="[mod_python] Graham's New Importer">dan.eloff at gmail.com
       </A><BR>
    <I>Wed May 10 12:18:09 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021095.html">[mod_python] Graham's New Importer
</A></li>
        <LI>Next message: <A HREF="021087.html">[mod_python] syntax errors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21096">[ date ]</a>
              <a href="thread.html#21096">[ thread ]</a>
              <a href="subject.html#21096">[ subject ]</a>
              <a href="author.html#21096">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i>Perhaps you can explain the sys.path bit in some more detail.
</I>
Modifying sys.path is not a good idea, but what I wanted to accomplish
is to make sure that when your module importer falls back to python's
import, the modules are not suddenly unable to be found. It is
possible that that is completely unnecessary, I don't know under what
circumstances you fall back to python's import. As long as it stays
consistent regardless of PythonAutoReload or PythonDebug or
PythonOptimize for a given module then it works perfectly.

&gt;<i>    from mod_python import apache
</I>&gt;<i>    __info__.path.extend(eval(apache.main_server.get_options().get
</I>&gt;<i> ('my_import_path','[]')))
</I>&gt;<i>
</I>
I like that, but I agree __info__.path is not ideal.

&gt;<i> Overall, I have been thinking whether the following naming changes
</I>&gt;<i> should be
</I>&gt;<i> made:
</I>&gt;<i>
</I>&gt;<i>    __info__ --&gt; __mp__
</I>&gt;<i>
</I>&gt;<i>    __clone__ --&gt; __mp_clone__
</I>&gt;<i>    __purge__ --&gt; __mp_purge__
</I>&gt;<i>
</I>&gt;<i> Ie., use &quot;mp&quot; designator to make it clear that this is mod_python stuff.
</I>
Yes, perfect, do that.

&gt;<i> At the same time, could add:
</I>&gt;<i>
</I>&gt;<i>    __mp_path__ == __mp__.path
</I>
I don't really see __mp_path__ and an improvement over __mp__.path,
and if you go with the latter you don't have to fiddle with alias or
worry about assignment. I'll leave the call to you though, I'm sure
whatever you decide will be fine.

&gt;<i> By a module explicitly adding items to the embedded search path, it
</I>&gt;<i> would be
</I>&gt;<i> more predictable perhaps than blindly always using what the option
</I>&gt;<i> may be set
</I>&gt;<i> to, as by adding the code in you are making a conscious decision that
</I>&gt;<i> you want
</I>&gt;<i> it to work that way. You need not even use an option to obtain what
</I>&gt;<i> the path
</I>&gt;<i> should be set to, you could also use hard coded paths, or a path
</I>&gt;<i> determined by
</I>&gt;<i> taking a relative path and adding it to the dirname of the __file__
</I>&gt;<i> attribute of the
</I>&gt;<i> module.
</I>
Not ideal for me, since I would simply add this to the top of every
single python file. But I can live with that because it does solve all
the issues related to a global setting. All in all a pretty good
solution.

&gt;<i> If you understand the feature above I am describing, will be
</I>&gt;<i> interested in your
</I>&gt;<i> comments as to usability and also as to what naming conventions
</I>&gt;<i> should be
</I>&gt;<i> used. It is because I hadn't worked out naming that I hadn't
</I>&gt;<i> mentioned this
</I>&gt;<i> feature before.
</I>
When you make the changes let me know and I'll update from the cvs and
give it a try. I suspect it is a good balance between power and
flexibility.

-Dan

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021095.html">[mod_python] Graham's New Importer
</A></li>
	<LI>Next message: <A HREF="021087.html">[mod_python] syntax errors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21096">[ date ]</a>
              <a href="thread.html#21096">[ thread ]</a>
              <a href="subject.html#21096">[ subject ]</a>
              <a href="author.html#21096">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
