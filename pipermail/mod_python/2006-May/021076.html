<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] publisher + cheetah 
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20publisher%20%2B%20cheetah%20&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021078.html">
   <LINK REL="Next"  HREF="021077.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] publisher + cheetah </H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20publisher%20%2B%20cheetah%20&In-Reply-To="
       TITLE="[mod_python] publisher + cheetah ">grahamd at dscpl.com.au
       </A><BR>
    <I>Tue May  9 01:38:49 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021078.html">[mod_python] Graham's New Importer
</A></li>
        <LI>Next message: <A HREF="021077.html">[mod_python] ./configure fails on freebsd 6.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21076">[ date ]</a>
              <a href="thread.html#21076">[ thread ]</a>
              <a href="subject.html#21076">[ subject ]</a>
              <a href="author.html#21076">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Luis M. Gonzalez wrote ..
&gt;<i> &gt; Is there a reason you don't want to have to compile them first?
</I>&gt;<i> 
</I>&gt;<i>   Not really. I just thought I was doing something wrong, because I read
</I>&gt;<i> many posts about &quot;cheetah handlers&quot; and I couldn't believe the way I was
</I>&gt;<i> using cheetah was the correct one (or the most recommended).
</I>&gt;<i>   The only benefit I can think of, is that I would avoid the extra step
</I>&gt;<i> of compiling when testing code...
</I>&gt;<i> 
</I>&gt;<i> &gt; There is a performance hit by not doing so.
</I>&gt;<i> 
</I>&gt;<i>   That's good to know. So, why the heck do people write cheetah handlers
</I>&gt;<i> ?
</I>&gt;<i>  
</I>&gt;<i> &gt; Anyway, just want to make sure I understand you reasons before
</I>&gt;<i> &gt; I suggest a solution.
</I>&gt;<i> 
</I>&gt;<i>   Well, I still wonder why people write cheetah handlers... :-)
</I>
Note that I am not an expert on Cheetah and it has been a while since I
have looked at it, so don't take the follow as gospel.

There are different ways in which Cheetah can be used, thus the way you
use it will to a degree dictate what you need to do to integrate it with
mod_python.

First off, you can store templates as text and not precompile them to
Python source code, or you can precompile them.

In the first case you need to instantiate a Cheetah Template class
instance on each access to the page unless you implement yourself some
caching mechanism which uses last loaded page and only recreates it when
it is detected that file on disk has changed. If the template has to be
recreated every time, performance will be affected.

In the case of precompiled templates where Python code resides on
disk, the actual code file is loaded as a Python module. In this case,
sys.modules is acting like a cache for you and performance will be
faster than having to create Template instance on every access. Dealing
with changes to template/code on disk is problematic with precompiled
templates stored on disk, but I'll get to that later (maybe not this email).

That is one choice that exists and I my partial understanding is that
by not using precompiled templates, you do loose some features,
or maybe how you have to do it is different. Specifically, when using
precompiled templates you have the ability to derive a template from
another template. Thus, you can have a base template which defines
a skeleton for a site layout. Individual pages can then extend this base
template and override just the body or other bits as necessary.

The next choice one has that one can make is how you put together
all the data which may be required to fill out a page when it is being
rendered. Here you can either construct a big dictionary containing
all the data precalculated before you even try to render the page, or,
you can initiate the rendering of the page and have it internally
collect the data.

In simple terms, you are either providing the data to the template, or
the template can make callouts to get the data.

Which want you want to work here can affect how you use mod_python
handlers to integrate things together. If you are going to precalculate
all the data, then it effectively means you are going to have a customised
handler or publisher function corresponding to each resource where
such data needs to be calculated. If instead the template is going to
call out to get the data, you can possibly get away with a generic
handler which passes in just the request object and the template does
any necessary imports of other modules to get access to data.

Anyway, my head isn't thinking straight right now so I am going to
leave it at that for now, leaving issues of module importing and reloading
when using precompiled templates another time. I hope from the above
you might see that depending on how you want to do things, a custom
handler may well work, but if perhaps you want to deal with page
caching issues and/or templates calling out to get data as opposed to
passing it in, a generic handler may work better as it hides the details
away and you don't have to duplicate them in each custom handler.

Sorry, brain is giving up. Time for me to go home and sleep I think. :-)

Graham
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021078.html">[mod_python] Graham's New Importer
</A></li>
	<LI>Next message: <A HREF="021077.html">[mod_python] ./configure fails on freebsd 6.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21076">[ date ]</a>
              <a href="thread.html#21076">[ thread ]</a>
              <a href="subject.html#21076">[ subject ]</a>
              <a href="author.html#21076">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
