<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] FieldStorage and POST data
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20FieldStorage%20and%20POST%20data&In-Reply-To=200605251120.45970.gary%40plasmaperfect.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021248.html">
   <LINK REL="Next"  HREF="021250.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] FieldStorage and POST data</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Jim Gallacher</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20FieldStorage%20and%20POST%20data&In-Reply-To=200605251120.45970.gary%40plasmaperfect.net"
       TITLE="[mod_python] FieldStorage and POST data">jpg at jgassociates.ca
       </A><BR>
    <I>Thu May 25 07:48:48 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021248.html">[mod_python] FieldStorage and POST data
</A></li>
        <LI>Next message: <A HREF="021250.html">[mod_python] conditions for a 404
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21249">[ date ]</a>
              <a href="thread.html#21249">[ thread ]</a>
              <a href="subject.html#21249">[ subject ]</a>
              <a href="author.html#21249">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Not enough information here to say for sure, but be aware that you can 
only create one instance of FieldStorage per request, as the body of the 
request gets &quot;consumed&quot;. So if you do something like:

form1 = FieldStorage(req)
form2 = FieldStorage(req)

form1 will be populated with the contents of the POST but form2 will not.

When the FieldStorage instance is being created it will always parse the 
query string so you will always get those fields for a GET. For POST, 
the form data is encoded in the body of the request which FieldStorage 
treats as a file stream and creating form1 reads to the end of the 
stream. When you create form2, you are already at the end of the stream, 
so there is nothing to process.

Note that publisher automatically creates a FieldStorage instance as 
req.form. If you are using publisher, don't create your own instance. 
Use the one stuffed into req.form.

Jim

Gary Broadbent wrote:
&gt;<i> Sorry if this is a silly question, but:
</I>&gt;<i> 
</I>&gt;<i> I am having some issues trying to retrieve POST data from a form.
</I>&gt;<i> 
</I>&gt;<i> If I set the form method to GET, FieldStorage gets populated, but as soon as I 
</I>&gt;<i> set the method to POST, I dont retrieve and data.
</I>&gt;<i> 
</I>&gt;<i> Please refer to the following output:
</I>&gt;<i> 
</I>&gt;<i> ***** GET method used **********
</I>&gt;<i> FieldStorage  	
</I>&gt;<i> = [Field('num', '0'),
</I>&gt;<i>  Field('search', 'sear'),
</I>&gt;<i>  Field('company', 'comp'),
</I>&gt;<i>  Field('location', 'loca')]
</I>&gt;<i> 
</I>&gt;<i> the_request 
</I>&gt;<i> = 'GET /sipnificant/results?num=0&amp;search=sear&amp;company=comp&amp;location=loca 
</I>&gt;<i> HTTP/1.1'
</I>&gt;<i> 
</I>&gt;<i> subprocess_env  	
</I>&gt;<i> = {'DOCUMENT_ROOT': '/home/***/html',
</I>&gt;<i>  'GATEWAY_INTERFACE': 'CGI/1.1',
</I>&gt;<i>  'HTTP_ACCEPT': 'text/xml,application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5',
</I>&gt;<i>  'HTTP_ACCEPT_CHARSET': 'ISO-8859-1,utf-8;q=0.7,*;q=0.7',
</I>&gt;<i>  'HTTP_ACCEPT_ENCODING': 'gzip,deflate',
</I>&gt;<i>  'HTTP_ACCEPT_LANGUAGE': 'en-us,en;q=0.5',
</I>&gt;<i>  'HTTP_CONNECTION': 'keep-alive',
</I>&gt;<i>  'HTTP_COOKIE': 'taskware_lang=en; style=A; 
</I>&gt;<i> AWSUSER_ID=awsuser_id1143973127792r5484; colour=white',
</I>&gt;<i>  'HTTP_HOST': 'plasmaperfect.net',
</I>&gt;<i>  'HTTP_KEEP_ALIVE': '300',
</I>&gt;<i>  'HTTP_REFERER': '<A HREF="http://plasmaperfect.net/****/',">http://plasmaperfect.net/****/',</A>
</I>&gt;<i>  'HTTP_USER_AGENT': 'Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.8.0.1) 
</I>&gt;<i> Gecko/20060222 Firefox/1.5.0.1',
</I>&gt;<i>  'PATH': '/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/sbin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/bin:/usr/x86_64-pc-linux-gnu/gcc-bin/3.4.5',
</I>&gt;<i>  'QUERY_STRING': 'num=0&amp;search=sear&amp;company=comp&amp;location=loca',
</I>&gt;<i>  'REMOTE_ADDR': '192.168.0.4',
</I>&gt;<i>  'REMOTE_PORT': '53695',
</I>&gt;<i>  'REQUEST_METHOD': 'GET',
</I>&gt;<i>  'REQUEST_URI': '/****/results?num=0&amp;search=sear&amp;company=comp&amp;location=loca',
</I>&gt;<i>  'SCRIPT_FILENAME': '/home/***/sipnificant/results',
</I>&gt;<i>  'SCRIPT_NAME': '/sipnificant/results',
</I>&gt;<i>  'SERVER_ADDR': '192.168.0.2',
</I>&gt;<i>  'SERVER_ADMIN': '<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">hostmaster at plasmaperfect.net</A>',
</I>&gt;<i>  'SERVER_NAME': 'plasmaperfect.net',
</I>&gt;<i>  'SERVER_PORT': '80',
</I>&gt;<i>  'SERVER_PROTOCOL': 'HTTP/1.1',
</I>&gt;<i>  'SERVER_SIGNATURE': '',
</I>&gt;<i> 
</I>&gt;<i> unparsed_uri  	
</I>&gt;<i> = '/sipnificant/results?num=0&amp;search=sear&amp;company=comp&amp;location=loca'
</I>&gt;<i> 
</I>&gt;<i> uri 	
</I>&gt;<i> = '/sipnificant/results'
</I>&gt;<i> 
</I>&gt;<i> filename 	
</I>&gt;<i> = '/home/***/sipnificant/results'
</I>&gt;<i> 
</I>&gt;<i> canonical_filename 	
</I>&gt;<i> = '/home/***/sipnificant/results'
</I>&gt;<i> 
</I>&gt;<i> path_info 	
</I>&gt;<i> = ''
</I>&gt;<i> args 	
</I>&gt;<i> = 'num=0&amp;search=sear&amp;company=comp&amp;location=loca'
</I>&gt;<i> 
</I>&gt;<i> finfo 	
</I>&gt;<i> = None
</I>&gt;<i> 
</I>&gt;<i> parsed_uri 	
</I>&gt;<i> = (None,
</I>&gt;<i>  None,
</I>&gt;<i>  None,
</I>&gt;<i>  None,
</I>&gt;<i>  None,
</I>&gt;<i>  None,
</I>&gt;<i>  '/sipnificant/results',
</I>&gt;<i>  'num=0&amp;search=sear&amp;company=comp&amp;location=loca',
</I>&gt;<i>  None)
</I>&gt;<i> 
</I>&gt;<i> parsed_uri 	
</I>&gt;<i> = (None,
</I>&gt;<i>  None,
</I>&gt;<i>  None,
</I>&gt;<i>  None,
</I>&gt;<i>  None,
</I>&gt;<i>  None,
</I>&gt;<i>  '/sipnificant/results',
</I>&gt;<i>  'num=0&amp;search=sear&amp;company=comp&amp;location=loca',
</I>&gt;<i>  None)
</I>&gt;<i> 
</I>&gt;<i> ***** POST method used **********
</I>&gt;<i> FieldStorage  	
</I>&gt;<i> = []
</I>&gt;<i> 
</I>&gt;<i> the_request  	
</I>&gt;<i> = 'POST /sipnificant/results HTTP/1.1'
</I>&gt;<i> 
</I>&gt;<i> subprocess_env  	
</I>&gt;<i> = {'CONTENT_LENGTH': '44',
</I>&gt;<i>  'CONTENT_TYPE': 'application/x-www-form-urlencoded',
</I>&gt;<i>  'DOCUMENT_ROOT': '/home/***/html',
</I>&gt;<i>  'GATEWAY_INTERFACE': 'CGI/1.1',
</I>&gt;<i>  'HTTP_ACCEPT': 'text/xml,application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5',
</I>&gt;<i>  'HTTP_ACCEPT_CHARSET': 'ISO-8859-1,utf-8;q=0.7,*;q=0.7',
</I>&gt;<i>  'HTTP_ACCEPT_ENCODING': 'gzip,deflate',
</I>&gt;<i>  'HTTP_ACCEPT_LANGUAGE': 'en-us,en;q=0.5',
</I>&gt;<i>  'HTTP_CONNECTION': 'keep-alive',
</I>&gt;<i>  'HTTP_COOKIE': 'taskware_lang=en; style=A; 
</I>&gt;<i> AWSUSER_ID=awsuser_id1143973127792r5484; colour=white',
</I>&gt;<i>  'HTTP_HOST': 'plasmaperfect.net',
</I>&gt;<i>  'HTTP_KEEP_ALIVE': '300',
</I>&gt;<i>  'HTTP_REFERER': '<A HREF="http://plasmaperfect.net/sipnificant/',">http://plasmaperfect.net/sipnificant/',</A>
</I>&gt;<i>  'HTTP_USER_AGENT': 'Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.8.0.1) 
</I>&gt;<i> Gecko/20060222 Firefox/1.5.0.1',
</I>&gt;<i>  'PATH': '/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/sbin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/bin:/usr/x86_64-pc-linux-gnu/gcc-bin/3.4.5',
</I>&gt;<i>  'QUERY_STRING': '',
</I>&gt;<i>  'REMOTE_ADDR': '192.168.0.4',
</I>&gt;<i>  'REMOTE_PORT': '37766',
</I>&gt;<i>  'REQUEST_METHOD': 'POST',
</I>&gt;<i>  'REQUEST_URI': '/sipnificant/results',
</I>&gt;<i>  'SCRIPT_FILENAME': '/home/****/sipnificant/results',
</I>&gt;<i>  'SCRIPT_NAME': '/sipnificant/results',
</I>&gt;<i>  'SERVER_ADDR': '192.168.0.2',
</I>&gt;<i>  'SERVER_ADMIN': '<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">hostmaster at plasmaperfect.net</A>',
</I>&gt;<i>  'SERVER_NAME': 'plasmaperfect.net',
</I>&gt;<i>  'SERVER_PORT': '80',
</I>&gt;<i>  'SERVER_PROTOCOL': 'HTTP/1.1',
</I>&gt;<i>  'SERVER_SIGNATURE': '',
</I>&gt;<i>  'SERVER_SOFTWARE': 'Apache'}
</I>&gt;<i> 
</I>&gt;<i> unparsed_uri  	
</I>&gt;<i> = '/sipnificant/results'
</I>&gt;<i> 
</I>&gt;<i> uri 	
</I>&gt;<i> = '/sipnificant/results'
</I>&gt;<i> 
</I>&gt;<i> args  	
</I>&gt;<i> = None
</I>&gt;<i> 
</I>&gt;<i> finfo 	
</I>&gt;<i> = None
</I>&gt;<i> 
</I>&gt;<i> parsed_uri 	
</I>&gt;<i> = (None, None, None, None, None, None, '/sipnificant/results', None, None)
</I>&gt;<i> 
</I>&gt;<i> parsed_uri 	
</I>&gt;<i> = (None, None, None, None, None, None, '/sipnificant/results', None, None)
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Thank you in advance,
</I>&gt;<i> 
</I>&gt;<i> Gary Stidston-Broadbent
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i> 
</I>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021248.html">[mod_python] FieldStorage and POST data
</A></li>
	<LI>Next message: <A HREF="021250.html">[mod_python] conditions for a 404
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21249">[ date ]</a>
              <a href="thread.html#21249">[ thread ]</a>
              <a href="subject.html#21249">[ subject ]</a>
              <a href="author.html#21249">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
