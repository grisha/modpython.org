<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Custom Login with redirection back to referer
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Custom%20Login%20with%20redirection%20back%20to%20referer&In-Reply-To=BEECFD3D-33D3-4E12-B5AE-67239367300C%40dscpl.com.au">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021183.html">
   <LINK REL="Next"  HREF="021167.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Custom Login with redirection back to referer</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Deron Meranda</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Custom%20Login%20with%20redirection%20back%20to%20referer&In-Reply-To=BEECFD3D-33D3-4E12-B5AE-67239367300C%40dscpl.com.au"
       TITLE="[mod_python] Custom Login with redirection back to referer">deron.meranda at gmail.com
       </A><BR>
    <I>Sun May 21 00:47:57 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021183.html">[mod_python] Custom Login with redirection back to referer
</A></li>
        <LI>Next message: <A HREF="021167.html">[mod_python] Form upload
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21180">[ date ]</a>
              <a href="thread.html#21180">[ thread ]</a>
              <a href="subject.html#21180">[ subject ]</a>
              <a href="author.html#21180">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 5/20/06, Graham Dumpleton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">grahamd at dscpl.com.au</A>&gt; wrote:
&gt;<i> Can't one use JavaScript or HTTP-EQUIV header in 40x error response
</I>&gt;<i> to get browser to redirect automatically?
</I>
If your response is HTML (as is typically the case), yes you can
do that.  But again, being somewhat of a &quot;purist&quot; I wouldn't. The
http-equiv is really there to &quot;store&quot; any important HTTP headers
which affect how the page may be interpreted, such as content-type
or charset, so the page can be properly rendered statically while
offline (i.e., not over HTTP).  Any http-equiv meta elements in your
document should correspond exactly to the same HTTP headers
you serve up with that document.  In fact, I've gone so far as to
enforce this in the mini-frameworks I build on top of mod_python,
so I never have an http-equiv which doesn't match exactly a real
HTTP header.

If you really want an automatic redirect, you probably should just
go ahead and use one of the 30x responses...or use some
javascript to reload the error page to the login page after a
suitable delay.

&gt;<i> What is you attitude on having the login form in the 40x error page
</I>&gt;<i> itself?
</I>
I guess that is a possibility.  It really depends on your needs
and the complexity of your login form processing---using
captchas or SecureID, etc, may be challenging to do from
within an error response page.  But, I've never tried that.
I do know that Apache tends makes it hard to do anything
sophisticated on an error response page.  I'm also not sure
if there might be some strange interactions with some browser
form-remembering features.  It would be interesting to try.

An important point though is that I use 403's in many different
&quot;permission denied&quot; cases, some of which are because the user
isn't logged in, and others when logging in won't make any
difference (a simple example is &quot;directly listing is prohibited&quot;).  So
you still want your 403 error page to look like an error page,
notifying the user that there could be any number of reasons
why they may not have permissions to retrieve the resource; and
then suggesting that they may try logging in (but with no promises).

Technically, a 401 would be more appropriate than a 403 for
this very reason; but then you are restricted to using a standard
authentication mechanism, or one that the browsers understand
(not a form-based login).


One thing that would be nice to be able to do is to pass
information to the Apache error page, so it can be more
specific in the human-readable part of the reponse. Perhaps
the new SSI hooks you added might make that possible ??

Looking forward to seeing your code.  I'm excited about many of
the auth* integration features you added, but haven't had time to
play with them in the trunk yet.
-- 
Deron Meranda

</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021183.html">[mod_python] Custom Login with redirection back to referer
</A></li>
	<LI>Next message: <A HREF="021167.html">[mod_python] Form upload
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21180">[ date ]</a>
              <a href="thread.html#21180">[ thread ]</a>
              <a href="subject.html#21180">[ subject ]</a>
              <a href="author.html#21180">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
