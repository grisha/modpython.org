<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] undefined symbol: apr_table_compress ??
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20undefined%20symbol%3A%20apr_table_compress%20%3F%3F&In-Reply-To=20060517120634.GC11850%40geodata.soton.ac.uk">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021132.html">
   <LINK REL="Next"  HREF="021135.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] undefined symbol: apr_table_compress ??</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Jim Gallacher</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20undefined%20symbol%3A%20apr_table_compress%20%3F%3F&In-Reply-To=20060517120634.GC11850%40geodata.soton.ac.uk"
       TITLE="[mod_python] undefined symbol: apr_table_compress ??">jpg at jgassociates.ca
       </A><BR>
    <I>Wed May 17 08:35:34 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021132.html">[mod_python] undefined symbol: apr_table_compress ??
</A></li>
        <LI>Next message: <A HREF="021135.html">[mod_python] undefined symbol: apr_table_compress ??
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21133">[ date ]</a>
              <a href="thread.html#21133">[ thread ]</a>
              <a href="subject.html#21133">[ subject ]</a>
              <a href="author.html#21133">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">hrz at geodata.soton.ac.uk</A> wrote:
&gt;<i> I've just come across the problem defined below using mod_python
</I>&gt;<i> 3.2.8. After some hunting around, it transpires that the problem is
</I>&gt;<i> that the installed APR has been stripped (we're using Red Hat) as
</I>&gt;<i> described very nicely at:
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://search.cpan.org/dist/mod_perl/docs/user/troubleshooting/troubleshooting.pod#undefined_symbol%3A_apr_table_compress">http://search.cpan.org/dist/mod_perl/docs/user/troubleshooting/troubleshooting.pod#undefined_symbol%3A_apr_table_compress</A>
</I>&gt;<i> 
</I>&gt;<i> The attached patch to the 3.2.8 configure.in file seemed to catch the
</I>&gt;<i> error (autoconf needs to be run after applying this). After looking at
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://www.modpython.org/pipermail/mod_python/2006-February/020286.html">http://www.modpython.org/pipermail/mod_python/2006-February/020286.html</A>
</I>&gt;<i> 
</I>&gt;<i> some better solution using apr-config might be better to ensure that
</I>&gt;<i> APR is as required.
</I>&gt;<i> 
</I>
The fact that the library is stripped is not relevant to your problem. 
All the libs on Debian are stripped and everything works fine for me. 
Stripping just removes debugging symbols, making the lib smaller on disk 
and in memory.

I took a quick glance at the debian src for apache 2.0.55, and it looks 
like apr_table_compress was added in apr 0.9.4, so you might want to 
check your apr version with

$ apr-config --version

I'm not sure when we started to use apr_table_compress, but I have a 
feeling this may have been done in 3.2.x to fix a bug. I don't have time 
to investigate right now, but I will check the svn logs tonight.

Jim

&gt;<i> Kind regards,
</I>&gt;<i> 
</I>&gt;<i> Homme.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;&gt;<i> I've downloaded mod_python 3.2.5b (Beta) and compiled it using
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> ./configure --with-apxs=/usr/sbin/apxs --with-python=/usr/local/bin/ 
</I>&gt;&gt;&gt;<i> python2.3
</I>&gt;&gt;&gt;<i> make
</I>&gt;&gt;&gt;<i> make install
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> just as the documentation says. But when I add LoadModule... to my
</I>&gt;&gt;&gt;<i> httpd.conf and restart Apache 2.0.46 I get the error message
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Cannot load /etc/httpd/modules/mod_python.so into server:
</I>&gt;&gt;&gt;<i> /etc/httpd/modules/mod_python.so: undefined symbol: apr_table_compress
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> any ideas on how to fix this??
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Regards
</I>&gt;&gt;&gt;<i> Martin
</I>&gt;&gt;<i> Martin, did you ever sort this out? I appreciate no help was  
</I>&gt;&gt;<i> forthcoming on
</I>&gt;&gt;<i> the list. It doesn't seem to be anything we have specifically seen.  
</I>&gt;&gt;<i> Thus, bar
</I>&gt;&gt;<i> suggesting a rebuild of Apache and mod_python from scratch, probably
</I>&gt;&gt;<i> nothing else anyone could think of to suggest.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Graham
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> ------------------------------------------------------------------------
</I>&gt;<i> 
</I>&gt;<i> --- configure.in
</I>&gt;<i> +++ configure.in
</I>&gt;<i> @@ -117,6 +117,15 @@
</I>&gt;<i>      AC_MSG_ERROR([This version of mod_python only works with Apache 2. The one you have seems to be $ver.])
</I>&gt;<i>    fi
</I>&gt;<i>  
</I>&gt;<i> +  # ensure the apr_* symbols can be read
</I>&gt;<i> +  AC_CHECK_LIB(apr-0, apr_table_compress, [], 
</I>&gt;<i> +  [
</I>&gt;<i> +    AC_MSG_ERROR([Apache Portable Runtime (apr) library not found. This may be due to one of:
</I>&gt;<i> +    - APR not being installed on the system
</I>&gt;<i> +    - The shared object (libapr-0) being stripped
</I>&gt;<i> +    - An installed APR that does not support the apr_table_compress() function])
</I>&gt;<i> +  ])
</I>&gt;<i> +  
</I>&gt;<i>    # determine LIBEXEC
</I>&gt;<i>    AC_MSG_CHECKING(for Apache libexec directory)
</I>&gt;<i>    LIBEXECDIR=`${APXS} -q LIBEXECDIR`
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> ------------------------------------------------------------------------
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>
</PRE>





















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021132.html">[mod_python] undefined symbol: apr_table_compress ??
</A></li>
	<LI>Next message: <A HREF="021135.html">[mod_python] undefined symbol: apr_table_compress ??
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21133">[ date ]</a>
              <a href="thread.html#21133">[ thread ]</a>
              <a href="subject.html#21133">[ subject ]</a>
              <a href="author.html#21133">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
