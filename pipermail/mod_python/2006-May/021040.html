<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Re: Mod_python.publisher behavior - sending .py file
	tobrowser not processing it in pyton
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20Mod_python.publisher%20behavior%20-%20sending%20.py%20file%0A%09tobrowser%20not%20processing%20it%20in%20pyton&In-Reply-To=5f56302b0605040317o4f327f4fob58a1c824dbf3124%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021039.html">
   <LINK REL="Next"  HREF="021041.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Re: Mod_python.publisher behavior - sending .py file
	tobrowser not processing it in pyton</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20Mod_python.publisher%20behavior%20-%20sending%20.py%20file%0A%09tobrowser%20not%20processing%20it%20in%20pyton&In-Reply-To=5f56302b0605040317o4f327f4fob58a1c824dbf3124%40mail.gmail.com"
       TITLE="[mod_python] Re: Mod_python.publisher behavior - sending .py file
	tobrowser not processing it in pyton">grahamd at dscpl.com.au
       </A><BR>
    <I>Thu May  4 06:56:17 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021039.html">[mod_python] Re: Mod_python.publisher behavior - sending .py file
	tobrowser not processing it in pyton
</A></li>
        <LI>Next message: <A HREF="021041.html">[mod_python] Mod_python.publisher behavior - sending .py file
	tobrowser not processing it in pyton
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21040">[ date ]</a>
              <a href="thread.html#21040">[ thread ]</a>
              <a href="subject.html#21040">[ subject ]</a>
              <a href="author.html#21040">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 04/05/2006, at 8:17 PM, Daniel Nogradi wrote:

&gt;&gt;<i> &gt; Just getting started with modpython. And i am not sure if I  
</I>&gt;&gt;<i> understand
</I>&gt;&gt;<i> &gt; the
</I>&gt;&gt;<i> &gt; documentation, specifically section 6.1.2 Publishing algorithm  
</I>&gt;&gt;<i> so I hope
</I>&gt;&gt;<i> &gt; someone can set me straight.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; My setup is on a laptop
</I>&gt;&gt;<i> &gt; Apache/2.0.54 (Win32) mod_python/3.2.8 Python/2.4.1 Server
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Using mod_python.publisher with the following setup in my  
</I>&gt;&gt;<i> http.conf file;
</I>&gt;&gt;<i> &gt; &lt;Directory &quot;C:\Program Files\Apache Group\Apache2\htdocs\app/&quot;&gt;
</I>&gt;&gt;<i> &gt;     SetHandler mod_python
</I>&gt;&gt;<i> &gt;     AddHandler mod_python .py
</I>&gt;&gt;<i> &gt;     AddHandler mod_python .pyw
</I>&gt;&gt;<i> &gt;     AddHandler mod_python .pyc
</I>&gt;&gt;<i> &gt;     PythonHandler mod_python.publisher
</I>&gt;&gt;<i> &gt;     PythonDebug On
</I>&gt;&gt;<i> &gt; &lt;/Directory&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Running out the door, so can't explain in detail. But you should not
</I>&gt;&gt;<i> be setting both SetHandler and AddHandler. Just use SetHandler and
</I>&gt;&gt;<i> see what happens.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> As Graham pointed out SetHandler and AddHandler should not be used at
</I>&gt;<i> the same time. &quot;SetHandler mod_python&quot; causes all files to be served
</I>&gt;<i> by mod_python and when you refer to them in your browser you don't
</I>&gt;<i> need to specify any extension such as .py and &quot;AddHandler mod_python
</I>&gt;<i> .py&quot; causes all files ending in .py to be served by mod_python but in
</I>&gt;<i> this case when referring to a file in your browser you should add the
</I>&gt;<i> .py extension. So if you have
</I>&gt;<i>
</I>&gt;<i> &lt;Directory '/your_document_root/whatever'&gt;
</I>&gt;<i>    SetHandler mod_python
</I>&gt;<i>    PythonHandler mod_python.publisher
</I>&gt;<i> &lt;/Directory&gt;
</I>&gt;<i>
</I>&gt;<i> and you have a file /whatever/foo.py with a function bar( ) then in
</I>&gt;<i> your browser you would type <A HREF="http://yourserver/whatever/foo/bar,">http://yourserver/whatever/foo/bar,</A>
</I>
When using SetHandler you should still be able to use:

   <A HREF="http://yourserver/whatever/foo.py/bar">http://yourserver/whatever/foo.py/bar</A>

Your mileage may vary though depending on how some of the
other bits of Apache configuration are set. See some of previous
rants for possibly useful about this.

   <A HREF="http://www.modpython.org/pipermail/mod_python/2005-August/018828.html">http://www.modpython.org/pipermail/mod_python/2005-August/018828.html</A>
   <A HREF="http://www.modpython.org/pipermail/mod_python/2005-August/018829.html">http://www.modpython.org/pipermail/mod_python/2005-August/018829.html</A>
   <A HREF="http://www.modpython.org/pipermail/mod_python/2006-March/020501.html">http://www.modpython.org/pipermail/mod_python/2006-March/020501.html</A>

&gt;<i> whereas with
</I>&gt;<i>
</I>&gt;<i> &lt;Directory '/your_document_root/whatever'&gt;
</I>&gt;<i>    AddHandler mod_python .py
</I>&gt;<i>    PythonHandler mod_python.publisher
</I>&gt;<i> &lt;/Directory&gt;
</I>&gt;<i>
</I>&gt;<i> you would need <A HREF="http://yourserver/whatever/foo.py/bar">http://yourserver/whatever/foo.py/bar</A>
</I>
As long as you have content negotiation directives set correctly, you
don't have to use .py extension when AddHandler is used. See my linked
rants above for details.

&gt;<i> So it's really up to you which behaviour you like, you want *all*
</I>&gt;<i> files to be served by mod_python or only those that have a specific
</I>&gt;<i> extension and then you set either AddHandler or SetHandler. But not
</I>&gt;<i> both :) And in any case, you certainly don't want your .pyc files to
</I>&gt;<i> be served at all, so you should probably remove &quot;AddHandler mod_python
</I>&gt;<i> .pyc&quot;.
</I>
If using AddHandler and Apache has write permission to directory, it is
actually a good idea to have:

   &lt;Files *.pyc&gt;
   deny from all
   &lt;/Files&gt;

This will prevent the pyc files being accessible.

Using AddHandler for pyc extension will probably actually cause it to
execute the file as publisher, just like if py extension was used.  
This is
because mod_python.publisher will quite happily drop the pyc extension
and use basename to match to .py file.

Besides the fact that AddHandler allows you to mix other file types in
the same directory, the main difference between SetHandler and  
AddHandler
as far as mod_python.publisher goes is that when SetHandler is used a
request against the directory is passed through direct to  
mod_python.publisher
and it resolves request to index.py.

When AddHandler is used, a request against the directory results in  
mod_dir
trying to match for a file listed in DirectoryIndex directive. In  
order for
mod_python.publisher to be triggered, you would need to list index.py
in the DirectoryIndex directive.

Other than that, with the correct Apache directives defined related  
to content
negotiation, both ways should allow for optional use of extension.

Graham

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021039.html">[mod_python] Re: Mod_python.publisher behavior - sending .py file
	tobrowser not processing it in pyton
</A></li>
	<LI>Next message: <A HREF="021041.html">[mod_python] Mod_python.publisher behavior - sending .py file
	tobrowser not processing it in pyton
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21040">[ date ]</a>
              <a href="thread.html#21040">[ thread ]</a>
              <a href="subject.html#21040">[ subject ]</a>
              <a href="author.html#21040">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
