<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] undefined symbol: apr_table_compress ??
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20undefined%20symbol%3A%20apr_table_compress%20%3F%3F&In-Reply-To=20060517120634.GC11850%40geodata.soton.ac.uk">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021135.html">
   <LINK REL="Next"  HREF="021142.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] undefined symbol: apr_table_compress ??</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20undefined%20symbol%3A%20apr_table_compress%20%3F%3F&In-Reply-To=20060517120634.GC11850%40geodata.soton.ac.uk"
       TITLE="[mod_python] undefined symbol: apr_table_compress ??">grahamd at dscpl.com.au
       </A><BR>
    <I>Wed May 17 08:43:58 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021135.html">[mod_python] undefined symbol: apr_table_compress ??
</A></li>
        <LI>Next message: <A HREF="021142.html">[mod_python] Strange Issue with modules &quot;disappearing&quot; while server
	is running.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21134">[ date ]</a>
              <a href="thread.html#21134">[ thread ]</a>
              <a href="subject.html#21134">[ subject ]</a>
              <a href="author.html#21134">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>That the APR library has been stripped is not the problem in itself
as the symbol should still be in there, you just may not be able to see
it on some platforms when using nm. The real problem is probably
that the wrong APR library version has been used and the symbol
was not in the library, stripped or not stripped. Thus the real essence
of what the web page you refer to is telling you is to ensure the  
correct
APR library version is used when mod_perl (mod_python in our
case) is being built. In practice this should not be an issue if the  
correct
version of apxs is found when configuring mod_python source code.
If not finding the correct version, the --with-apxs option can be used
to configure. But then, if your runtime library search path causes
Apache to still pick up the wrong version when run, you'll still have
problems.

Thus, also determine if LD_LIBRARY_PATH is set in environment which
Apache runs under. With that same value of LD_LIBRARY_PATH
set and exported, run &quot;ldd&quot; on &quot;httpd&quot; binary to see what APR library
is being found. Work out what version that library may be. Work out
if this is the version that it should be using based on what Apache was
built against. If they are different, that will be the more probable  
cause.

Graham

On 17/05/2006, at 10:06 PM, <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">hrz at geodata.soton.ac.uk</A> wrote:

&gt;<i> I've just come across the problem defined below using mod_python
</I>&gt;<i> 3.2.8. After some hunting around, it transpires that the problem is
</I>&gt;<i> that the installed APR has been stripped (we're using Red Hat) as
</I>&gt;<i> described very nicely at:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://search.cpan.org/dist/mod_perl/docs/user/troubleshooting/">http://search.cpan.org/dist/mod_perl/docs/user/troubleshooting/</A> 
</I>&gt;<i> troubleshooting.pod#undefined_symbol%3A_apr_table_compress
</I>&gt;<i>
</I>&gt;<i> The attached patch to the 3.2.8 configure.in file seemed to catch the
</I>&gt;<i> error (autoconf needs to be run after applying this). After looking at
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.modpython.org/pipermail/mod_python/2006-February/">http://www.modpython.org/pipermail/mod_python/2006-February/</A> 
</I>&gt;<i> 020286.html
</I>&gt;<i>
</I>&gt;<i> some better solution using apr-config might be better to ensure that
</I>&gt;<i> APR is as required.
</I>&gt;<i>
</I>&gt;<i> Kind regards,
</I>&gt;<i>
</I>&gt;<i> Homme.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;&gt;<i> I've downloaded mod_python 3.2.5b (Beta) and compiled it using
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> ./configure --with-apxs=/usr/sbin/apxs --with-python=/usr/local/bin/
</I>&gt;&gt;&gt;<i> python2.3
</I>&gt;&gt;&gt;<i> make
</I>&gt;&gt;&gt;<i> make install
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> just as the documentation says. But when I add LoadModule... to my
</I>&gt;&gt;&gt;<i> httpd.conf and restart Apache 2.0.46 I get the error message
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Cannot load /etc/httpd/modules/mod_python.so into server:
</I>&gt;&gt;&gt;<i> /etc/httpd/modules/mod_python.so: undefined symbol:  
</I>&gt;&gt;&gt;<i> apr_table_compress
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> any ideas on how to fix this??
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Regards
</I>&gt;&gt;&gt;<i> Martin
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Martin, did you ever sort this out? I appreciate no help was
</I>&gt;&gt;<i> forthcoming on
</I>&gt;&gt;<i> the list. It doesn't seem to be anything we have specifically seen.
</I>&gt;&gt;<i> Thus, bar
</I>&gt;&gt;<i> suggesting a rebuild of Apache and mod_python from scratch, probably
</I>&gt;&gt;<i> nothing else anyone could think of to suggest.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Graham
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &lt;configure.in.patch&gt;
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>
</PRE>





















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021135.html">[mod_python] undefined symbol: apr_table_compress ??
</A></li>
	<LI>Next message: <A HREF="021142.html">[mod_python] Strange Issue with modules &quot;disappearing&quot; while server
	is running.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21134">[ date ]</a>
              <a href="thread.html#21134">[ thread ]</a>
              <a href="subject.html#21134">[ subject ]</a>
              <a href="author.html#21134">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
