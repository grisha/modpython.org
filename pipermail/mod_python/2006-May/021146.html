<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Problem with html quoted/unquoted
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Problem%20with%20html%20quoted/unquoted&In-Reply-To=1147881203.8449.140.camel%40cm222-167-159-88.hkcable.com.hk">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021141.html">
   <LINK REL="Next"  HREF="021200.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Problem with html quoted/unquoted</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Jim Gallacher</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Problem%20with%20html%20quoted/unquoted&In-Reply-To=1147881203.8449.140.camel%40cm222-167-159-88.hkcable.com.hk"
       TITLE="[mod_python] Problem with html quoted/unquoted">jpg at jgassociates.ca
       </A><BR>
    <I>Wed May 17 18:09:07 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021141.html">[mod_python] Problem with html quoted/unquoted
</A></li>
        <LI>Next message: <A HREF="021200.html">[mod_python] Problem with html quoted/unquoted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21146">[ date ]</a>
              <a href="thread.html#21146">[ thread ]</a>
              <a href="subject.html#21146">[ subject ]</a>
              <a href="author.html#21146">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Wouter van Marle wrote:
&gt;<i> On Wed, 2006-05-17 at 11:46 -0400, Jim Gallacher wrote:
</I>&gt;&gt;<i> Wouter van Marle wrote:
</I>&gt;&gt;&gt;<i> Dear Deron,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Thank you for the comments. I understand your ideas; unfortunately it
</I>&gt;&gt;&gt;<i> does not solve my problem.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The info I get from another website, this origin gives me the info in
</I>&gt;&gt;&gt;<i> the ampersand form (that third party site is a Netscape server by the
</I>&gt;&gt;&gt;<i> way! Didn't know they are still in use, very remarkable). And I like
</I>&gt;&gt;&gt;<i> that.
</I>&gt;&gt;&gt;<i> The main reason to continue using that format is the &quot; (double-quotes)
</I>&gt;&gt;&gt;<i> and ' (single quotes). These characters are used in the data that I try
</I>&gt;&gt;&gt;<i> to store in the mysql base, and that fantastically messes up with the
</I>&gt;&gt;&gt;<i> queries....
</I>&gt;&gt;&gt;<i> imagine: s = &quot;this is 'a' string&quot;
</I>&gt;&gt;&gt;<i> then say query = &quot;&quot;&quot; SELECT * FROM base WHERE field = &quot;%s&quot;;&quot;&quot;&quot;% s
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> But what about when s can be 'this is &quot;a&quot; string'
</I>&gt;&gt;&gt;<i> or s = &quot;&quot;&quot;this is a 5&quot;, 'b' sized thing&quot;&quot;&quot;.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Don't build your query string that way, *especially* if you are getting 
</I>&gt;&gt;<i> data from an untrusted source. You are laying yourself open to a SQL 
</I>&gt;&gt;<i> injection attack. You want to use parameter passing. (for MySQLdb)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> cur.execute(&quot;SELECT * FROM base WHERE field = %s&quot;, s)
</I>&gt;<i> 
</I>&gt;<i> I have tried this (once) with MySQLdb, and it doesn't seem to work like
</I>&gt;<i> that. (v1.2.1g2) Didn't pursue the issue further.
</I>
You must be doing something wrong. A quick test on my system:

 &gt;&gt;&gt; s = &quot;&quot;&quot;This is 'some' stuff with &quot;quotes&quot; and stuff&quot;&quot;&quot;
 &gt;&gt;&gt; cursor.execute('insert into testtable (data) values (%s)', s)
1L

mysql.log output
----------------

060517 17:27:39	     75 Query       insert into testtable (data) values 
('This is \'some\' stuff with \&quot;quotes\&quot; and stuff')

This really is the correct way to pass parameters to your query.

&gt;<i> I am aware of the issues of SQL injection. For that reason I've given
</I>&gt;<i> the web script a special user with only very limited capabilities, to at
</I>&gt;<i> least make it a little harder for attackers.
</I>
Don't make it hard, make it impossible. Bugtraq has reports of SQL 
injection attacks in PHP applications almost every day. This sort of 
problem can be avoided in python by using the appropriate mechanism for 
executing SQL queries, so do yourself a favour and get in the habit of 
doing it the right way. DB access should be restricted to the bare 
minimum required for your app to work anyway, but should not be a 
substitute for writing a secure application in the first place. Your 
requirements may change in the future which necessitate relaxing the db 
restrictions, and then you are faced with auditing your code to correct 
the deficiencies, or even worse you'll have completely forgotten about 
the security issue.

I hope I'm not sounding too harsh here Wouter, as that is not my 
intention. I'm just trying to help.

Jim
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021141.html">[mod_python] Problem with html quoted/unquoted
</A></li>
	<LI>Next message: <A HREF="021200.html">[mod_python] Problem with html quoted/unquoted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21146">[ date ]</a>
              <a href="thread.html#21146">[ thread ]</a>
              <a href="subject.html#21146">[ subject ]</a>
              <a href="author.html#21146">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
