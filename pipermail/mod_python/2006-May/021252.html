<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] conditions for a 404
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20conditions%20for%20a%20404&In-Reply-To=20060525174155.GB9617%40asu.edu">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021254.html">
   <LINK REL="Next"  HREF="021253.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] conditions for a 404</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Jorey Bump</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20conditions%20for%20a%20404&In-Reply-To=20060525174155.GB9617%40asu.edu"
       TITLE="[mod_python] conditions for a 404">list at joreybump.com
       </A><BR>
    <I>Thu May 25 14:55:25 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021254.html">[mod_python] conditions for a 404
</A></li>
        <LI>Next message: <A HREF="021253.html">[mod_python] conditions for a 404
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21252">[ date ]</a>
              <a href="thread.html#21252">[ thread ]</a>
              <a href="subject.html#21252">[ subject ]</a>
              <a href="author.html#21252">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>David Bear wrote:
&gt;<i> I have a file called tddb.py which contains
</I>&gt;<i> 
</I>&gt;<i> &quot;&quot;&quot;
</I>&gt;<i> from mod_python import session
</I>&gt;<i> 
</I>&gt;<i> def index(req):
</I>&gt;<i>   req.content_type = &quot;text/plain&quot;
</I>&gt;<i>   req.send_http_header()
</I>&gt;<i>   req.write(&quot;hello world&quot;)
</I>
These statements are unnecessary when using Publisher.

&gt;<i>   keys = req.keys()
</I>
req has no keys method.

&gt;<i>   for k in keys:
</I>&gt;<i>     req.write(&quot;object name is %s &quot; % k)
</I>&gt;<i>   req.write(&quot;done&quot;)
</I>
req.write is unnecessary with Publisher, although it may be useful in 
some cases.

&gt;<i>   return apache.OK
</I>
This is also unnecessary. It's usually best to return a string from your 
functions when using Publisher. In most cases, this will be a complete 
HTML page, but could also be plain text. In either case, Publisher will 
write the correct headers.

Here is a simplified version of your module:

def index(req):
     return &quot;\n&quot;.join([&quot;object name is %s &quot; % (i,) for i in dir(req)])

&gt;<i> It lives in a directory where publisher is set as the handler for all
</I>&gt;<i> .py files.
</I>&gt;<i> 
</I>&gt;<i> When I run this via url <A HREF="http://myserver/tddb.py">http://myserver/tddb.py</A> apache returns a 404
</I>&gt;<i> error.
</I>
With Publisher, you must call a function within the module. These are 
equivalent:

<A HREF="http://host/tddb.py/index">http://host/tddb.py/index</A>
<A HREF="http://host/tddb/index">http://host/tddb/index</A>

And, because of the special way Publisher handles index():

<A HREF="http://host/tddb.py/">http://host/tddb.py/</A>
<A HREF="http://host/tddb/">http://host/tddb/</A>

Your URL should also have worked, but it is bad form and maybe you are 
not using a recent version of mod_python. That would be a mistake. You 
should upgrade.

&gt;<i> I've checked that the file perms on 755 and group own by the webserver
</I>&gt;<i> group.
</I>&gt;<i> 
</I>&gt;<i> I'm getting lost here. the more I use modpython the less I understand
</I>&gt;<i> it. What could be wrong?
</I>
It is very different from other web application languages, so forget 
everything you know about PHP or CGI for now, as they will only create 
false expectations. Pretend that you are learning web programming from 
scratch, and you may eventually find that it makes a lot of sense. There 
are caveats, however, and mod_python itself is a bit of a moving target 
while it is evolving. Be sure to read the documentation aimed at your 
specific version, and always report your apache/mod_python versions when 
asking for help.

I recommend that beginners master Publisher and ignore PSP for the 
timebeing. That will help you get in the right frame of mind, and 
Publisher is simple (yet powerful) enough to study when/if you decide to 
write your own handler.


</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021254.html">[mod_python] conditions for a 404
</A></li>
	<LI>Next message: <A HREF="021253.html">[mod_python] conditions for a 404
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21252">[ date ]</a>
              <a href="thread.html#21252">[ thread ]</a>
              <a href="subject.html#21252">[ subject ]</a>
              <a href="author.html#21252">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
