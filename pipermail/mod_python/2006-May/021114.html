<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Re: sending headers directly to the client
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20sending%20headers%20directly%20to%20the%20client&In-Reply-To=446823DA.7040109%40natlab.research.philips.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021113.html">
   <LINK REL="Next"  HREF="021115.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Re: sending headers directly to the client</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20sending%20headers%20directly%20to%20the%20client&In-Reply-To=446823DA.7040109%40natlab.research.philips.com"
       TITLE="[mod_python] Re: sending headers directly to the client">grahamd at dscpl.com.au
       </A><BR>
    <I>Mon May 15 05:31:22 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021113.html">[mod_python] Re: sending headers directly to the client
</A></li>
        <LI>Next message: <A HREF="021115.html">[mod_python] Re: sending headers directly to the client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21114">[ date ]</a>
              <a href="thread.html#21114">[ thread ]</a>
              <a href="subject.html#21114">[ subject ]</a>
              <a href="author.html#21114">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 15/05/2006, at 4:46 PM, Mike Looijmans wrote:

&gt;<i> When the user submits the request, immediately return a page that  
</I>&gt;<i> says something like &quot;processing your request, please wait...&quot;.
</I>&gt;<i>
</I>&gt;<i> The simplest thing to do is to just output that on the result page,  
</I>&gt;<i> and flush() the request output. Then do as you normally do.
</I>&gt;<i>
</I>&gt;<i> The &quot;please wait&quot; could be removed with javascript or so.
</I>&gt;<i>
</I>&gt;<i> Another option is to first return a &quot;please wait&quot; HTML page. This  
</I>&gt;<i> page has a redirect header, that loads the actual result page. The  
</I>&gt;<i> user gets to see the redirecting page until the result page is done.
</I>
Noting though that you may need a caching system for the result of  
database
query which is accessible from multiple processes. This is because if  
Apache
prefork MPM being used, or even worker with multiple processes, the
subsequent request to get the results of the query will not  
necessarily end
up at the same Apache child process. Thus, you can't rely on caching  
within
an Apache child process.

Graham

&gt;<i>
</I>&gt;<i> Mike Looijmans
</I>&gt;<i> Philips Natlab / Topic Automation
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Stefan Wehr wrote:
</I>&gt;&gt;<i> Hi!
</I>&gt;&gt;<i> Mike Looijmans &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">nlv11281 at natlab.research.philips.com</A>&gt; wrote::
</I>&gt;&gt;&gt;<i> First explain what is so special about your request that you  
</I>&gt;&gt;&gt;<i> cannot just send out regular data and have to delay sending the  
</I>&gt;&gt;&gt;<i> response headers?
</I>&gt;&gt;<i> Answering some of our requests can take up to 30 seconds. We often
</I>&gt;&gt;<i> have the problem that users are getting nervous, hit the 'Cancel'
</I>&gt;&gt;<i> button of their browser, and reload the page. Now our system tries to
</I>&gt;&gt;<i> answer two requests, which can lead to strange results: The database
</I>&gt;&gt;<i> transaction started by the first request wins over the database
</I>&gt;&gt;<i> transaction started by the second request, although the user
</I>&gt;&gt;<i> explicitly stopped the first request.
</I>&gt;&gt;&gt;<i> Awaiting your reply - could a simple (periodic) redirect solve  
</I>&gt;&gt;&gt;<i> your problem?
</I>&gt;&gt;<i> How what such a redirect work?
</I>&gt;&gt;<i> Stefan
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Mod_python mailing list
</I>&gt;&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021113.html">[mod_python] Re: sending headers directly to the client
</A></li>
	<LI>Next message: <A HREF="021115.html">[mod_python] Re: sending headers directly to the client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21114">[ date ]</a>
              <a href="thread.html#21114">[ thread ]</a>
              <a href="subject.html#21114">[ subject ]</a>
              <a href="author.html#21114">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
