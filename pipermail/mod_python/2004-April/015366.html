<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] session example
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20session%20example&In-Reply-To=1081245722.2679.2.camel%40localhost.localdomain">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015361.html">
   <LINK REL="Next"  HREF="015368.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] session example</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Gregory (Grisha) Trubetskoy</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20session%20example&In-Reply-To=1081245722.2679.2.camel%40localhost.localdomain"
       TITLE="[mod_python] session example">grisha at modpython.org
       </A><BR>
    <I>Tue Apr  6 10:23:45 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="015361.html">[mod_python] session example
</A></li>
        <LI>Next message: <A HREF="015368.html">[mod_python] session example
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15366">[ date ]</a>
              <a href="thread.html#15366">[ thread ]</a>
              <a href="subject.html#15366">[ subject ]</a>
              <a href="author.html#15366">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

On Tue, 6 Apr 2004, John Mudd wrote:

&gt;<i> I may be way off so feel free to correct me but here what I've come to
</I>&gt;<i> believe.  It's necessary to write cookies before any other writes.
</I>
As someone explained it later, the first write flushes the headers, so the
cookie must be set before anything is written.

&gt;<i> So you need to save the session (which writes it's cookie) before any
</I>&gt;<i> other writes.
</I>
The cookie is set in the __init__ method of the session object, so saving
the session and the cookie are not related.

Also keep in mind that the cookie is set only once - when the session is
new. After that there is no need for it, it's the client who has to send
the cookie to the server every time, the server does not need to &quot;return&quot;
it. So if your session persists over 100 HTTP requests, 1 will have a
cookie header, and 99 will not.

Grisha

&gt;<i>
</I>&gt;<i> John
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Tue, 2004-04-06 at 04:13, <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">pascalbarbedor at free.fr</A> wrote:
</I>&gt;<i> &gt; hi
</I>&gt;<i> &gt; thanks for preceeding answer but I cant make it work.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; what's wrong with this:
</I>&gt;<i> &gt; ---------------------------------------
</I>&gt;<i> &gt; sess=Session.Session(req)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; if sess.is_new():
</I>&gt;<i> &gt;     req.write(sess.id())
</I>&gt;<i> &gt; else :
</I>&gt;<i> &gt;     req.write('used session %s'%sess.id())
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; sess['login']='toto'
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; req.write(&quot;%s&quot;%sess)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; sess.save()
</I>&gt;<i> &gt; ----------------------------------------
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; shouldn't it display session used on second reload of the page ?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; thanks
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Mod_python mailing list
</I>&gt;<i> &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I></PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015361.html">[mod_python] session example
</A></li>
	<LI>Next message: <A HREF="015368.html">[mod_python] session example
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15366">[ date ]</a>
              <a href="thread.html#15366">[ thread ]</a>
              <a href="subject.html#15366">[ subject ]</a>
              <a href="author.html#15366">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
