<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] mod_python.publisher weirdness
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python.publisher%20weirdness&In-Reply-To=20040414133150.75d5267f.kamil%40nvstudio.pl">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015406.html">
   <LINK REL="Next"  HREF="015415.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] mod_python.publisher weirdness</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Kamil Niechajewicz</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python.publisher%20weirdness&In-Reply-To=20040414133150.75d5267f.kamil%40nvstudio.pl"
       TITLE="[mod_python] mod_python.publisher weirdness">kamil at nvstudio.pl
       </A><BR>
    <I>Wed Apr 14 14:14:38 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="015406.html">[mod_python] mod_python.publisher weirdness
</A></li>
        <LI>Next message: <A HREF="015415.html">[mod_python] mod_python.publisher weirdness
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15408">[ date ]</a>
              <a href="thread.html#15408">[ thread ]</a>
              <a href="subject.html#15408">[ subject ]</a>
              <a href="author.html#15408">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> and btw. i often get this error, don't know why this happens, unreferenced
</I>&gt;<i> variable is very common error and should be handled somehow because there
</I>&gt;<i> is high possibility that it will occur somewhere:
</I>&gt;<i> 
</I>&gt;<i>   File &quot;/usr/lib/python2.3/site-packages/mod_python/apache.py&quot;, line 481, in import_module
</I>&gt;<i>     if mtime &gt; oldmtime:
</I>&gt;<i> 
</I>&gt;<i> UnboundLocalError: local variable 'oldmtime' referenced before assignment
</I>
I guess I found what causes this problem, in apache.py:

   if not file or (path and not filter(file.startswith, path)):
       # there is a script by this name already imported, but it's in
       # a different directory, therefore it's a different script
       mtime, oldtime = 0, -1
                ^
                |_ should be oldmtime, right?

I'm going to run through this file and find importing mechanism, maybe
there is a solution for importing wrong modules of the same name.. Someone
once wrote here that it's the matter of using 'startswith' that matches
both directories, and picking wrong module because of that..

/Kamil
</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015406.html">[mod_python] mod_python.publisher weirdness
</A></li>
	<LI>Next message: <A HREF="015415.html">[mod_python] mod_python.publisher weirdness
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15408">[ date ]</a>
              <a href="thread.html#15408">[ thread ]</a>
              <a href="subject.html#15408">[ subject ]</a>
              <a href="author.html#15408">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
