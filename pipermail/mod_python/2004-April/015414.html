<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] mod_python.publisher weirdness
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python.publisher%20weirdness&In-Reply-To=03f501c421d3%2494a31bb0%246702a8c0%40gato">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015399.html">
   <LINK REL="Next"  HREF="015425.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] mod_python.publisher weirdness</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Gregory (Grisha) Trubetskoy</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python.publisher%20weirdness&In-Reply-To=03f501c421d3%2494a31bb0%246702a8c0%40gato"
       TITLE="[mod_python] mod_python.publisher weirdness">grisha at modpython.org
       </A><BR>
    <I>Wed Apr 14 10:40:43 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="015399.html">[mod_python] mod_python.publisher weirdness
</A></li>
        <LI>Next message: <A HREF="015425.html">[mod_python] mod_python.publisher weirdness
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15414">[ date ]</a>
              <a href="thread.html#15414">[ thread ]</a>
              <a href="subject.html#15414">[ subject ]</a>
              <a href="author.html#15414">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

I think this is becoming a FAQ....

You cannot have modules with the same name in one Python interpreter.
Since both of the below directories execute within the same
subinterpreter, if you use same names for modules (index.py) as well as
any global variables, you will have name clashes and rather unpredictable
behaviour.

The solution is to either name things differently, or configure Apache
such that mrt and mrtJDB run in different subinterpreters.

I recommend reading this part of the manual:

<A HREF="http://www.modpython.org/live/current/doc-html/pyapi-interps.html">http://www.modpython.org/live/current/doc-html/pyapi-interps.html</A>

Grisha


On Tue, 13 Apr 2004, Jeff Hinrichs wrote:

&gt;<i> mod_python: 3.1.3
</I>&gt;<i> OS: FreeBSD 4.9 Stable
</I>&gt;<i> Apache: Apache/2.0.49 (Unix) mod_python/3.1.3 Python/2.3.3
</I>&gt;<i>
</I>&gt;<i> httpd.conf:
</I>&gt;<i> &lt;Directory &quot;/usr/local/www/data/mrt&quot;&gt;
</I>&gt;<i>     SetHandler mod_python
</I>&gt;<i>     PythonHandler mod_python.publisher
</I>&gt;<i>     PythonDebug On
</I>&gt;<i> &lt;/Directory&gt;
</I>&gt;<i> &lt;Directory &quot;/usr/local/www/data/mrtJDB&quot;&gt;
</I>&gt;<i>     SetHandler mod_python
</I>&gt;<i>     PythonHandler mod_python.publisher
</I>&gt;<i>     PythonDebug On
</I>&gt;<i> &lt;/Directory&gt;
</I>&gt;<i>
</I>&gt;<i> I have an index.py in each of the two directories.  On both pages a link to
</I>&gt;<i>  <A HREF="http://mysite/mrt/">http://mysite/mrt/</A>  exists.
</I>&gt;<i>
</I>&gt;<i> Events to recreate:
</I>&gt;<i>  <A HREF="http://mysite/mrt/">http://mysite/mrt/</A>
</I>&gt;<i>  click on a form to do a post to <A HREF="http://mysite/mrt/xlogon">http://mysite/mrt/xlogon</A> (a method in
</I>&gt;<i> /mrt/index.py)
</I>&gt;<i>  Edit the URL in the browser to <A HREF="http://mysite/mrtJDB/">http://mysite/mrtJDB/</A>
</I>&gt;<i>  When that page appears click on the link to <A HREF="http://mysite/mrt/">http://mysite/mrt/</A>
</I>&gt;<i>
</I>&gt;<i> The page reloads and URL says, <A HREF="http://mysite/mrt/">http://mysite/mrt/</A> the apache log agrees,
</I>&gt;<i> and no errors reported in the error log. However, the page is still the
</I>&gt;<i> <A HREF="http://mysite/mrtJDB/">http://mysite/mrtJDB/</A> page. If I click on the link 2 or 3 more times then
</I>&gt;<i> I get the <A HREF="http://mysite/mrt/">http://mysite/mrt/</A> page.
</I>&gt;<i>
</I>&gt;<i> Now things get really silly, if I continue to click on the href that points
</I>&gt;<i> to <A HREF="http://mysite/mrt/">http://mysite/mrt/</A> I sometimes get the <A HREF="http://mysite/mrtJDB/">http://mysite/mrtJDB/</A> page and now
</I>&gt;<i> by clicking on the link repeatedly I haphazardly jump back and forth between
</I>&gt;<i> the two pages.  It's as if mod_python.publisher is getting confused.
</I>&gt;<i>
</I>&gt;<i> This same occurence will also play out if the directories are arranged as:
</I>&gt;<i> <A HREF="http://mysite/mrt/">http://mysite/mrt/</A>
</I>&gt;<i> <A HREF="http://mysite/mrt/mrtJDB/">http://mysite/mrt/mrtJDB/</A>
</I>&gt;<i> and making the necessary changes to the apache conf
</I>&gt;<i> httpd.conf:
</I>&gt;<i> &lt;Directory &quot;/usr/local/www/data/mrt&quot;&gt;
</I>&gt;<i>     SetHandler mod_python
</I>&gt;<i>     PythonHandler mod_python.publisher
</I>&gt;<i>     PythonDebug On
</I>&gt;<i> &lt;/Directory&gt;
</I>&gt;<i> &lt;Directory &quot;/usr/local/www/data/mrt/mrtJDB&quot;&gt;
</I>&gt;<i>     SetHandler mod_python
</I>&gt;<i>     PythonHandler mod_python.publisher
</I>&gt;<i>     PythonDebug On
</I>&gt;<i> &lt;/Directory&gt;
</I>&gt;<i>  and restarting apache.
</I>&gt;<i>
</I>&gt;<i> I've tried from Moz 1.7, FireFox 0.8, and IE6
</I>&gt;<i> I've dumped caches and turned on forced reloads
</I>&gt;<i> I've put pragma no-cache and page expirations in the meta tags
</I>&gt;<i> I've tried req.headers_out.add(&quot;Cache-Control:&quot;,&quot;no-cache&quot;)
</I>&gt;<i> and req.headers_out.add(&quot;Pragma:&quot;,&quot;no-cache&quot;)
</I>&gt;<i>
</I>&gt;<i> I'm at a loss and googled myself silly.
</I>&gt;<i>
</I>&gt;<i> I must be doing something very wrong but I'm just not seeing it right now.
</I>&gt;<i>
</I>&gt;<i> help.
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i>
</I>&gt;<i> Jeff Hinrichs
</I>&gt;<i>
</I>&gt;<i> p.s. &quot;mysite&quot; is just a place holder for the actual webserver name.
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I></PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015399.html">[mod_python] mod_python.publisher weirdness
</A></li>
	<LI>Next message: <A HREF="015425.html">[mod_python] mod_python.publisher weirdness
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15414">[ date ]</a>
              <a href="thread.html#15414">[ thread ]</a>
              <a href="subject.html#15414">[ subject ]</a>
              <a href="author.html#15414">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
