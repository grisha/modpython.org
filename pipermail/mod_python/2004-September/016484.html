<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] sys.path shared?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20sys.path%20shared%3F&In-Reply-To=1095860296.12184.2.camel%40bigmac.taumu.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016482.html">
   <LINK REL="Next"  HREF="016490.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] sys.path shared?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Brian Bird</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20sys.path%20shared%3F&In-Reply-To=1095860296.12184.2.camel%40bigmac.taumu.com"
       TITLE="[mod_python] sys.path shared?">brian.bird at securetrading.com
       </A><BR>
    <I>Wed Sep 22 15:58:32 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="016482.html">[mod_python] sys.path shared?
</A></li>
        <LI>Next message: <A HREF="016490.html">[mod_python] sys.path shared?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16484">[ date ]</a>
              <a href="thread.html#16484">[ thread ]</a>
              <a href="subject.html#16484">[ subject ]</a>
              <a href="author.html#16484">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Not sure that's actually evidence against threads. In my case I do actually
want to share variables (I want only one database connection shared across
all requests and I also have a global variable counting the number of
requests which each reuqest updates)

I've got my sys.path set up in the apache config so it only has to be
initialised once. The (potential) problem with forking is the amount of
extra overhead required for each request. Mind you, apache seems to do a
pretty good job of reducing the overhead so it's not really a problem. But
to share something like a database connection using a forking model... I'm
not sure that's even possible is it?

Brian

-----Original Message-----
From: <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python-bounces at modpython.org</A>
[mailto:<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python-bounces at modpython.org</A>] On Behalf Of Terry MacDonald
Sent: 22 September 2004 14:38
To: mod_python user mailing list
Subject: RE: [mod_python] sys.path shared?


ah-ah! More evidence against threads in the threads versus processes debate.
;3)

On Wed, 2004-09-22 at 14:10, Brian Bird wrote:
&gt;<i> Sorry, I should have given this a bit more thought. If you're using a 
</I>&gt;<i> forked process environment then I would expect the sys.path variables 
</I>&gt;<i> to be separate for each request. If you're using a threaded mpm (which 
</I>&gt;<i> is what I
</I>&gt;<i> use) then I assume sys.path would work like global variables which are
</I>&gt;<i> shared across requests.
</I>&gt;<i> 
</I>&gt;<i> Brian
</I>&gt;<i> 
</I>&gt;<i> -----Original Message-----
</I>&gt;<i> From: <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python-bounces at modpython.org</A> 
</I>&gt;<i> [mailto:<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python-bounces at modpython.org</A>] On Behalf Of Terry MacDonald
</I>&gt;<i> Sent: 22 September 2004 13:54
</I>&gt;<i> To: mod_python user mailing list
</I>&gt;<i> Subject: RE: [mod_python] sys.path shared?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Can anyone put me right on my understanding of the way mod_python 
</I>&gt;<i> works in an apache forked process environment.  Each process has its 
</I>&gt;<i> own embedded interpreter and therefore its own sys.path variable.
</I>&gt;<i> 
</I>&gt;<i> How is it possible for an apache instance/process with its own 
</I>&gt;<i> embedded interpreter to 'reach' across and use/inherit another 
</I>&gt;<i> processes/interpreters sys.path?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On Wed, 2004-09-22 at 09:58, Brian Bird wrote:
</I>&gt;<i> &gt; Might be best to try it: Write a cgi script which prints the 
</I>&gt;<i> &gt; sys.path
</I>&gt;<i> &gt; at the start and at the end. Put a long sleep in the middle then you 
</I>&gt;<i> &gt; can visit your script twice with a browser (start the second visit 
</I>&gt;<i> &gt; while the first one is still running) and see what the sys.path is of 
</I>&gt;<i> &gt; your second visit.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; My gut feeling would be that it would be possible but I'm pretty new
</I>&gt;<i> &gt; to mod_python so I wouldn't rely on that! :-)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Brian
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; -----Original Message-----
</I>&gt;<i> &gt; From: <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python-bounces at modpython.org</A>
</I>&gt;<i> &gt; [mailto:<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python-bounces at modpython.org</A>] On Behalf Of Terry MacDonald
</I>&gt;<i> &gt; Sent: 21 September 2004 23:44
</I>&gt;<i> &gt; To: mod_python user mailing list
</I>&gt;<i> &gt; Subject: Re: [mod_python] sys.path shared?
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Each apache instance/process has its own interpreter therefore its 
</I>&gt;<i> &gt; own
</I>&gt;<i> &gt; sys.path.  So I would say it is not possible.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; On Tue, 2004-09-21 at 23:24, Adrian Holovaty wrote:
</I>&gt;<i> &gt; &gt; I have mod_python code that appends a directory to sys.path and 
</I>&gt;<i> &gt; &gt; deletes that directory from sys.path at the end of the handler. Is 
</I>&gt;<i> &gt; &gt; it possible that, between that push and pop, another Apache 
</I>&gt;<i> &gt; &gt; instance running the same code
</I>&gt;<i> 
</I>&gt;<i> &gt; &gt; might get the non-popped sys.path, making its sys.path out of sync 
</I>&gt;<i> &gt; &gt; with
</I>&gt;<i> &gt; the
</I>&gt;<i> &gt; &gt; other Apaches?
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; Adrian
</I>&gt;<i> &gt; &gt; _______________________________________________
</I>&gt;<i> &gt; &gt; Mod_python mailing list
</I>&gt;<i> &gt; &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A> 
</I>&gt;<i> &gt; &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>-- 
Terry
Registered Linux User # 311806
www.taumu.com


_______________________________________________
Mod_python mailing list
<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016482.html">[mod_python] sys.path shared?
</A></li>
	<LI>Next message: <A HREF="016490.html">[mod_python] sys.path shared?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16484">[ date ]</a>
              <a href="thread.html#16484">[ thread ]</a>
              <a href="subject.html#16484">[ subject ]</a>
              <a href="author.html#16484">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
