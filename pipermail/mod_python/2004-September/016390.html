<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] inithandler never called?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20inithandler%20never%20called%3F&In-Reply-To=2c8d48d704090910423a0d595b%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016387.html">
   <LINK REL="Next"  HREF="016391.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] inithandler never called?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Ross M Karchner</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20inithandler%20never%20called%3F&In-Reply-To=2c8d48d704090910423a0d595b%40mail.gmail.com"
       TITLE="[mod_python] inithandler never called?">rosskarchner at gmail.com
       </A><BR>
    <I>Thu Sep  9 15:03:28 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="016387.html">[mod_python] inithandler never called?
</A></li>
        <LI>Next message: <A HREF="016391.html">[mod_python] inithandler never called?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16390">[ date ]</a>
              <a href="thread.html#16390">[ thread ]</a>
              <a href="subject.html#16390">[ subject ]</a>
              <a href="author.html#16390">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>the 3.1 documentation says that InitHandler can't be used in a &lt;Directory&gt;

&quot;&quot;&quot;Note: When this phase of the request is processed, the URI has not
yet been translated into a path name, therefore this directive could
never be executed by Apache if it could specified within &lt;Directory&gt;,
&lt;Location&gt;, &lt;File&gt;
directives or in an '.htaccess' file. The only place this directive is
allowed is the main configuration file, and the
code for it will execute in the main interpreter. And because this
phase happens before any identification of the type
of content being requested is done (i.e. is this a python program or a
gif?), the python routine specified with this
handler will be called for ALL requests on this server&quot;&quot;&quot;


On Thu, 9 Sep 2004 11:42:57 -0600, Jerry Seutter &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">jseutter at gmail.com</A>&gt; wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> I'm trying to use mod_python's PythonInitHandler hook and it never
</I>&gt;<i> seems to be called.  I'm pretty sure I'm doing something stupid, but I
</I>&gt;<i> can't figure out what it is.
</I>&gt;<i> 
</I>&gt;<i> Here is the relevant section from my httpd.conf:
</I>&gt;<i> 
</I>&gt;<i> =======================================
</I>&gt;<i> Alias &quot;/mod_python&quot; &quot;/var/www/mod_python&quot;
</I>&gt;<i> 
</I>&gt;<i> &lt;Directory &quot;/var/www/mod_python&quot;&gt;
</I>&gt;<i>     AddHandler python-program .py
</I>&gt;<i>     PythonInitHandler mod_python_test
</I>&gt;<i>     PythonAccessHandler mod_python_test
</I>&gt;<i>     PythonAuthenHandler mod_python_test
</I>&gt;<i>     PythonFixupHandler mod_python_test
</I>&gt;<i>     PythonHandler mod_python_test
</I>&gt;<i>     PythonPath &quot;sys.path+['/var/www/mod_python','/usr/lib/python2.2/site-packages/mod_python']&quot;
</I>&gt;<i> &lt;/Directory&gt;
</I>&gt;<i> =======================================
</I>&gt;<i> 
</I>&gt;<i> Here is the mod_python_test.py:
</I>&gt;<i> 
</I>&gt;<i> =======================================
</I>&gt;<i> import apache
</I>&gt;<i> import sys
</I>&gt;<i> 
</I>&gt;<i> myvar = &quot;not initted&quot;
</I>&gt;<i> 
</I>&gt;<i> def inithandler(req):
</I>&gt;<i>     global myvar
</I>&gt;<i>     sys.stderr.write('inithandler called\n')
</I>&gt;<i>     sys.stderr.flush()
</I>&gt;<i>     myvar = &quot;I have been initted!!!&quot;
</I>&gt;<i>     return apache.OK
</I>&gt;<i> 
</I>&gt;<i> def accesshandler(req):
</I>&gt;<i>     return apache.OK
</I>&gt;<i> 
</I>&gt;<i> def authenhandler(req):
</I>&gt;<i>     return apache.OK
</I>&gt;<i> 
</I>&gt;<i> def handler(req):
</I>&gt;<i>     req.content_type = &quot;text/html&quot;
</I>&gt;<i>     req.write('&lt;html&gt;&lt;body&gt;')
</I>&gt;<i>     req.write('%s&lt;br&gt;' %(myvar))
</I>&gt;<i>     req.write('&lt;/body&gt;&lt;/html&gt;')
</I>&gt;<i> 
</I>&gt;<i>     return apache.OK
</I>&gt;<i> =======================================
</I>&gt;<i> 
</I>&gt;<i> and here is what I get when I hit
</I>&gt;<i> <A HREF="http://localhost/mod_python/mod_python_test.py:">http://localhost/mod_python/mod_python_test.py:</A>
</I>&gt;<i> 
</I>&gt;<i> =======================================
</I>&gt;<i> &lt;html&gt;&lt;body&gt;not initted&lt;br&gt;&lt;/body&gt;&lt;/html&gt;
</I>&gt;<i> =======================================
</I>&gt;<i> 
</I>&gt;<i> I'm using:
</I>&gt;<i> mod_python-3.0.3-2.ent
</I>&gt;<i> python-2.2.3-26
</I>&gt;<i> httpd-2.0.46-25.ent
</I>&gt;<i> (on redhat as 3)
</I>&gt;<i> 
</I>&gt;<i> If anyone knows what I'm doing wrong and feels like telling me, thanks!
</I>&gt;<i> 
</I>&gt;<i> Jerry Seutter
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i> 
</I>&gt;<i>
</I></PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016387.html">[mod_python] inithandler never called?
</A></li>
	<LI>Next message: <A HREF="016391.html">[mod_python] inithandler never called?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16390">[ date ]</a>
              <a href="thread.html#16390">[ thread ]</a>
              <a href="subject.html#16390">[ subject ]</a>
              <a href="author.html#16390">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
