<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Image handling handler
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Image%20handling%20handler&In-Reply-To=20040921145326.GA10208%40legolas.on.net.mk">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016472.html">
   <LINK REL="Next"  HREF="016500.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Image handling handler</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Terry MacDonald</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Image%20handling%20handler&In-Reply-To=20040921145326.GA10208%40legolas.on.net.mk"
       TITLE="[mod_python] Image handling handler">terry.macdonald at dsl.pipex.com
       </A><BR>
    <I>Wed Sep 22 00:22:08 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="016472.html">[mod_python] Image handling handler
</A></li>
        <LI>Next message: <A HREF="016500.html">[mod_python] Image handling handler
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16473">[ date ]</a>
              <a href="thread.html#16473">[ thread ]</a>
              <a href="subject.html#16473">[ subject ]</a>
              <a href="author.html#16473">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm probably missing something obvious here, but in the 'handle_thumb'
and 'handle_size' class methods if the image is not cached (or is older)
where is the method sending the image file back to the client? 
It appears only to resize and cache the image not return it.

On Tue, 2004-09-21 at 15:53, Damjan wrote:
&gt;<i> I've hacked this last evening (stayed a bit longer that should've).
</I>&gt;<i> Its an handler that allows modifications of images on the fly, but also
</I>&gt;<i> cache's the results... its a bit hackish but anyway I'll sahre it here
</I>&gt;<i> as a demo of mod_python.
</I>&gt;<i> 
</I>&gt;<i> I enable it with this .htaccess file
</I>&gt;<i> 	AcceptPathInfo On
</I>&gt;<i> 	AddHandler mod_python .png .py .jpg .jpeg
</I>&gt;<i> 	PythonHandler image | .png .jpg .jpeg
</I>&gt;<i> 	PythonHandler mptest | .py
</I>&gt;<i> 	PythonDebug On
</I>&gt;<i> 	PythonOption Cache on
</I>&gt;<i> 	PythonOption CacheDir /tmp/cache
</I>&gt;<i> 
</I>&gt;<i> Ok what exactly the modules does?
</I>&gt;<i> Say you have e picture at the /images/me.jpg URL
</I>&gt;<i> 
</I>&gt;<i> Retrieving /images/me.jpg will let Apache handle the request
</I>&gt;<i> (apache.DECLINED), that way proper caching is allowed etc.
</I>&gt;<i> 
</I>&gt;<i> But getting /images/me.jpg/size?width=100;height=200 will resize the
</I>&gt;<i> image with PIL, store the resized image as
</I>&gt;<i> /tmp/cache/images/me.jpg/size?width=100;height=200 (but only if 
</I>&gt;<i> &quot;Cache on&quot;) and send back the resized image to the user.
</I>&gt;<i> 
</I>&gt;<i> Other methods are also possible, there's also /thumb?... similar to /size?
</I>&gt;<i> but retains the aspect-ratio of the original. /datemodified returns
</I>&gt;<i> text/plain content with the data of the last modification of the image
</I>&gt;<i> file.
</I>&gt;<i> Other methods could extract other meta info from images, implement other
</I>&gt;<i> transformations, filters etc...
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> TODO:
</I>&gt;<i> - more error checking is needed
</I>
</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016472.html">[mod_python] Image handling handler
</A></li>
	<LI>Next message: <A HREF="016500.html">[mod_python] Image handling handler
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16473">[ date ]</a>
              <a href="thread.html#16473">[ thread ]</a>
              <a href="subject.html#16473">[ subject ]</a>
              <a href="author.html#16473">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
