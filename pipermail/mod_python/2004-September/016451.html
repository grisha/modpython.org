<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Detecting http vs. https
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Detecting%20http%20vs.%20https&In-Reply-To=414A1ABB.5010402%40dd.revealed.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016450.html">
   <LINK REL="Next"  HREF="016452.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Detecting http vs. https</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Niklas Aldergren</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Detecting%20http%20vs.%20https&In-Reply-To=414A1ABB.5010402%40dd.revealed.net"
       TITLE="[mod_python] Detecting http vs. https">niklas at chimney.se
       </A><BR>
    <I>Fri Sep 17 02:15:31 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="016450.html">[mod_python] Detecting http vs. https
</A></li>
        <LI>Next message: <A HREF="016452.html">[mod_python] Detecting http vs. https
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16451">[ date ]</a>
              <a href="thread.html#16451">[ thread ]</a>
              <a href="subject.html#16451">[ subject ]</a>
              <a href="author.html#16451">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 17 sep 2004, at 00.59, Nick wrote:

&gt;<i> The HTTPS variable will be set in the environment.
</I>&gt;<i>
</I>&gt;<i> Nick
</I>&gt;<i>
</I>&gt;<i> Adrian Holovaty wrote:
</I>&gt;&gt;<i> Hey everybody,
</I>&gt;&gt;<i> What's the easiest and most reliable way for me to detect if a 
</I>&gt;&gt;<i> request has come in via https vs. http?
</I>&gt;&gt;<i> It'd be best if I didn't have to parse any of the request attributes 
</I>&gt;&gt;<i> manually.
</I>&gt;&gt;<i> Thanks,
</I>&gt;&gt;<i> Adrian
</I>
In Apache 2, mod_ssl can be made to set all sorts of fancy environment 
variables,
like HTTPS, etc. But, seeing as the interpreter is embedded in the 
actual
server process I'm guessing this can't actually be set since a new 
process is
never created. Try looking at os.environ -- what I find there is the 
environment
for the server process.

A strikingly unreliable way to detect http/https would be to look at 
what
local port the request came in on, either at req.server.port or 
req.connection.local_addr.

Otherwise, it's bound to be in the Apache internals somewhere.

/Niklas

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016450.html">[mod_python] Detecting http vs. https
</A></li>
	<LI>Next message: <A HREF="016452.html">[mod_python] Detecting http vs. https
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16451">[ date ]</a>
              <a href="thread.html#16451">[ thread ]</a>
              <a href="subject.html#16451">[ subject ]</a>
              <a href="author.html#16451">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
