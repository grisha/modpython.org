<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] import errors
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20import%20errors&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016432.html">
   <LINK REL="Next"  HREF="016444.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] import errors</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Craig Warren</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20import%20errors&In-Reply-To="
       TITLE="[mod_python] import errors">craig.warren at encorp.com
       </A><BR>
    <I>Wed Sep 15 13:37:41 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="016432.html">[mod_python] OpenBSD's Apache and mod_python
</A></li>
        <LI>Next message: <A HREF="016444.html">[mod_python] attention bakers:  UI mockups posted]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16443">[ date ]</a>
              <a href="thread.html#16443">[ thread ]</a>
              <a href="subject.html#16443">[ subject ]</a>
              <a href="author.html#16443">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I am just starting to use mod_python and I am see a strange
behavior.  I have a handler (XMLRPC) that is import another file of mine
(node.py).  The imported file seems to get imported for every thread (ie
the code gets run multiple times, once for each tread (I think)). 
Anybody have any ideas why? I have checked and it is using the same
interpreter.  I would think that once it is imported, it wouldn't get
imported again and the code wouldn't run.

In my handler xmlrpc.py  I have the following

  node = apache.import_module('mod_python.node',1,1)

and I have also used  (with the same affect)

   from mod_python import node

In my node.py file I have the following to print to the log

def log(msg):
    if debug:  
        apache.log_error('DEBUG:%s' % msg)
import sys
log('Importing node.py...') 
log('module is in sys.modules Modules for sys.modules:%s' %
sys.modules['mod_python.node'])


Below is output from the error_log that I printed to.   You can see it
gets imported 8 times. In my httpd.conf file I have the following
configuration.
&lt;IfModule prefork.c&gt;
StartServers       8
MinSpareServers    5
MaxSpareServers   20
MaxClients       150
MaxRequestsPerChild  4000
&lt;/IfModule&gt;


Log File:
[Wed Sep 15 12:16:16 2004] [error] DEBUG:Importing node.py...
[Wed Sep 15 12:16:16 2004] [error] DEBUG:module is in sys.modules
Modules for sys.modules:&lt;module 'mod_python.node' from
'/usr/lib/python2.3/site-packages/mod_python/node.py'&gt;
[Wed Sep 15 12:16:16 2004] [error] DEBUG:Importing node.py...
[Wed Sep 15 12:16:16 2004] [error] DEBUG:module is in sys.modules
Modules for sys.modules:&lt;module 'mod_python.node' from
'/usr/lib/python2.3/site-packages/mod_python/node.py'&gt;
[Wed Sep 15 12:16:18 2004] [error] DEBUG:Importing node.py...
[Wed Sep 15 12:16:18 2004] [error] DEBUG:module is in sys.modules
Modules for sys.modules:&lt;module 'mod_python.node' from
'/usr/lib/python2.3/site-packages/mod_python/node.py'&gt;
[Wed Sep 15 12:16:20 2004] [error] DEBUG:Importing node.py...
[Wed Sep 15 12:16:20 2004] [error] DEBUG:module is in sys.modules
Modules for sys.modules:&lt;module 'mod_python.node' from
'/usr/lib/python2.3/site-packages/mod_python/node.py'&gt;
[Wed Sep 15 12:16:22 2004] [error] DEBUG:Importing node.py...
[Wed Sep 15 12:16:22 2004] [error] DEBUG:module is in sys.modules
Modules for sys.modules:&lt;module 'mod_python.node' from
'/usr/lib/python2.3/site-packages/mod_python/node.py'&gt;
[Wed Sep 15 12:16:24 2004] [error] DEBUG:Importing node.py...
[Wed Sep 15 12:16:24 2004] [error] DEBUG:module is in sys.modules
Modules for sys.modules:&lt;module 'mod_python.node' from
'/usr/lib/python2.3/site-packages/mod_python/node.py'&gt;
[Wed Sep 15 12:16:26 2004] [error] DEBUG:Importing node.py...
[Wed Sep 15 12:16:26 2004] [error] DEBUG:module is in sys.modules
Modules for sys.modules:&lt;module 'mod_python.node' from
'/usr/lib/python2.3/site-packages/mod_python/node.py'&gt;
[Wed Sep 15 12:16:28 2004] [error] DEBUG:Importing node.py...
[Wed Sep 15 12:16:28 2004] [error] DEBUG:module is in sys.modules
Modules for sys.modules:&lt;module 'mod_python.node' from
'/usr/lib/python2.3/site-packages/mod_python/node.py'&gt;


Thanks for any help in advance.

Craig Warren

-- 
Craig Warren
Senior Programmer       
Encorp
<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">craig.warren at encorp.co</A>

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016432.html">[mod_python] OpenBSD's Apache and mod_python
</A></li>
	<LI>Next message: <A HREF="016444.html">[mod_python] attention bakers:  UI mockups posted]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16443">[ date ]</a>
              <a href="thread.html#16443">[ thread ]</a>
              <a href="subject.html#16443">[ subject ]</a>
              <a href="author.html#16443">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
