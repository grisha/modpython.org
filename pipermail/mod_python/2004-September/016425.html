<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Servlet and images.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Servlet%20and%20images.&In-Reply-To=9AC36478-0434-11D9-A78B-000A9575BCC8%40myamail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016426.html">
   <LINK REL="Next"  HREF="016427.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Servlet and images.</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Servlet%20and%20images.&In-Reply-To=9AC36478-0434-11D9-A78B-000A9575BCC8%40myamail.com"
       TITLE="[mod_python] Servlet and images.">grahamd at dscpl.com.au
       </A><BR>
    <I>Sun Sep 12 19:14:40 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="016426.html">[mod_python] Servlet and images.
</A></li>
        <LI>Next message: <A HREF="016427.html">[mod_python] Servlet and images.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16425">[ date ]</a>
              <a href="thread.html#16425">[ thread ]</a>
              <a href="subject.html#16425">[ subject ]</a>
              <a href="author.html#16425">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 12/09/2004, at 6:53 AM, FC wrote:

&gt;<i>
</I>&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i> I'm playing with mod_python and the servlet module from Daniel 
</I>&gt;<i> Popowich and I wanted to know how can I have python code and images in 
</I>&gt;<i> the same directory.
</I>&gt;<i>
</I>&gt;<i> My htaccess file look like this:
</I>&gt;<i>
</I>&gt;<i> SetHandler mod_python
</I>&gt;<i> PythonHandler mod_python.servlet
</I>&gt;<i> PythonDebug on
</I>&gt;<i>
</I>&gt;<i> Apache try to run every file through the servelet module. I have also 
</I>&gt;<i> try to change SetHandler in my htaccess file to AddHander mod_python 
</I>&gt;<i> .mps and AddHandler mod_python .py but that doesn't work.
</I>
I haven't used mpservlets and can't try it as I don't have Apache 2.0, 
so take the
following however you want. :-)

In the code for mpservlets it has:

     # get the filname which is either an apache-configured
     # UberServlet (one servlet to handle all requests) or possibly a
     # modpython servlet.
     filename = req.get_options().get('UberServlet') or 
_sm.verify_filename(req)

     # if the file doesn't exist return 404
     if not os.path.isfile(filename):
         return apache.HTTP_NOT_FOUND

     # if it's not a mps file, decline the request
     base, ext = os.path.splitext(filename)
     if ext != MPS:
         return apache.DECLINED

The end result of this is that if mpservlets doesn't think it can do 
anything
with the request, it will return apache.DECLINED. When this happens, 
one should
expect Apache then to take over, and provided the image file exists 
which the
code above already actually checked for, Apache should serve it up 
normally.

In my experience, this is what happens with mod_python 2.7.10 and 
Apache 1.3,
although having MultiViews on as an option in Apache can sometimes 
screw it
up a bit. Thus I run with:

   Options -MultiViews

The only thing therefore which I can see which would stuff it up is the 
first
part of the code above. Ie., the fiddling to get the actual filename. 
If an
UberServlet was defined, it wouldn't work as I described, nor would it 
if the
name of the image file began with an underscore or dot as 
verify_filename()
marks them as forbidden. The filename being requested must also have an
extension. If it doesn't the verify_filename() code will add the 
mpservlets
extension on the end and look for that instead.

Don't know if this will help or not, but that is how the code looks 
like it
works to me.

--
Graham Dumpleton (<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">grahamd at dscpl.com.au</A>)

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016426.html">[mod_python] Servlet and images.
</A></li>
	<LI>Next message: <A HREF="016427.html">[mod_python] Servlet and images.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16425">[ date ]</a>
              <a href="thread.html#16425">[ thread ]</a>
              <a href="subject.html#16425">[ subject ]</a>
              <a href="author.html#16425">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
