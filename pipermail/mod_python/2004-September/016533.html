<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] PSP content-type problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20PSP%20content-type%20problem&In-Reply-To=20040927103633.V96647%40onyx.ispol.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016528.html">
   <LINK REL="Next"  HREF="016524.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] PSP content-type problem</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Robert Fendt</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20PSP%20content-type%20problem&In-Reply-To=20040927103633.V96647%40onyx.ispol.com"
       TITLE="[mod_python] PSP content-type problem">rmfendt at web.de
       </A><BR>
    <I>Tue Sep 28 01:24:43 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="016528.html">[mod_python] PSP content-type problem
</A></li>
        <LI>Next message: <A HREF="016524.html">[mod_python] PSP content-type problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16533">[ date ]</a>
              <a href="thread.html#16533">[ thread ]</a>
              <a href="subject.html#16533">[ subject ]</a>
              <a href="author.html#16533">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>And thus spake &quot;Gregory (Grisha) Trubetskoy&quot; &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">grisha at modpython.org</A>&gt;
Mon, 27 Sep 2004 10:40:50 -0400 (EDT):

&gt;<i> But how would that work? The PSP object uses the request object to send 
</I>&gt;<i> its output, which in turn sends it out the filter stack and out to the 
</I>&gt;<i> socket.
</I>&gt;<i> 
</I>&gt;<i> To get a string, you'd need a fake request object that uses a StringIO or 
</I>&gt;<i> something to buffer the output, but this output isn't going to reflect the 
</I>&gt;<i> real picture because it would not be subject to any other filter/module in 
</I>&gt;<i> httpd, and if the PSP page makes use of any request specific features 
</I>&gt;<i> (e.g. internal redirect), the fake request object isn't going to support 
</I>&gt;<i> it. The bottom line is not nearly as simple as it seems. :-)
</I>
Okay, point taken. But its behaviour has to be at least properly
documented. IMHO the docs are seriously lacking in regard to PSP, anyway.

The problem about the content-type remains, however. I still cannot
understand why the default has to be set outside the PSP object at all. Doing it like that is error-prone and produces redundant code.

I may not be a Python guru, but usually something like that is done in an
object's constructor (i.e., __init__() in Python). So what would by the
problem about doing it during instantiation? It would be much cleaner and
you would not have to check if it is initialised at various parts of the
code. Or we do not initialise it, and the request object itself checks it
upon first call to write(), setting it to text/html if needed. What about
that?

Regards,
Robert

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016528.html">[mod_python] PSP content-type problem
</A></li>
	<LI>Next message: <A HREF="016524.html">[mod_python] PSP content-type problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16533">[ date ]</a>
              <a href="thread.html#16533">[ thread ]</a>
              <a href="subject.html#16533">[ subject ]</a>
              <a href="author.html#16533">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
