<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Complicated GET configuration
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Complicated%20GET%20configuration&In-Reply-To=1029518551.1517.29.camel%40jade.biology.duke.edu">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005446.html">
   <LINK REL="Next"  HREF="005454.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Complicated GET configuration</H1>
    <B>Johannes Erdfelt</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Complicated%20GET%20configuration&In-Reply-To=1029518551.1517.29.camel%40jade.biology.duke.edu"
       TITLE="[mod_python] Complicated GET configuration">johannes at erdfelt.com
       </A><BR>
    <I>Fri Aug 16 16:09:07 EST 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="005446.html">[mod_python] Complicated GET configuration
</A></li>
        <LI>Next message: <A HREF="005454.html">[ian@veryfresh.com: Re: [mod_python] Complicated GET configuration]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5443">[ date ]</a>
              <a href="thread.html#5443">[ thread ]</a>
              <a href="subject.html#5443">[ subject ]</a>
              <a href="author.html#5443">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<table border=0 width="100%"><tr><td>
<!--beginarticle-->
<PRE>On Fri, Aug 16, 2002, Hunter Matthews &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">thm at duke.edu</A>&gt; wrote:
&gt;<i> 
</I>&gt;<i> I've got a configuration requirement for mod_python that I'm not sure
</I>&gt;<i> how to fill. I think I'm about 90% of the way there, but...
</I>&gt;<i> 
</I>&gt;<i> Basically I'm writing a server for a client I don't control. The client
</I>&gt;<i> can put out 2 kinds of requests.
</I>&gt;<i> 
</I>&gt;<i> POST requests that are simple XMLRPC calls. 
</I>&gt;<i> One of the idiosyncrases of the client is that the URL that is requested
</I>&gt;<i> is ALWAYS just /XMLRPC  - there is no script name or whatever.
</I>&gt;<i> I can handler these fine with the following config snippet:
</I>&gt;<i> 
</I>&gt;<i> &lt;Location /XMLRPC&gt;
</I>&gt;<i>     SetHandler python-program
</I>&gt;<i>     PythonHandler current_apache
</I>&gt;<i> &lt;/Location&gt;
</I>&gt;<i> 
</I>&gt;<i> The GET requests have me stymied - to transfer big files, the client
</I>&gt;<i> uses GET requests. I'd like to have apache itself do the actual shifting
</I>&gt;<i> of bits, and just let my server application handle the authentication
</I>&gt;<i> that is required.
</I>&gt;<i> 
</I>&gt;<i> What I had as a first attempt was:
</I>&gt;<i> &lt;Location /XMLRPC/$RHN&gt;
</I>&gt;<i>     SetHandler python-program
</I>&gt;<i>     PythonAuthzHandler current_apache
</I>&gt;<i> &lt;/Location&gt;
</I>&gt;<i> 
</I>&gt;<i> But this is clearly wrong (and it doesn't work, either :) 
</I>&gt;<i> Because I have the SetHandler, mod_python tries to handle ALL the
</I>&gt;<i> different parts of the request, when I only want it to handle the Authz
</I>&gt;<i> stage: if that PythonAuthzHandler returns  apache.OK, then I would like 
</I>&gt;<i> apache to pick up the URL and just fling it back at the client - the
</I>&gt;<i> python part is done.
</I>&gt;<i> 
</I>&gt;<i> If any other information is needed, please let me know.
</I>
Drop the SetHandler then. All you need is the PythonAuthzHandler portion
and it'll do the right thing.

I do something like this:

  &lt;FilesMatch &quot;\.(m3u|mp3)$&quot;&gt;
    PythonPath &quot;sys.path+['/web/americandnb.com/python']&quot;
    PythonAccessHandler m3u
  &lt;/FilesMatch&gt;

And the m3u module does referer checking so people don't link directly
to the mp3's. If the Referer fails, we redirect to the main HTML for
that file (specific to our setup).

JE


</PRE>
<!--endarticle-->
</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005446.html">[mod_python] Complicated GET configuration
</A></li>
	<LI>Next message: <A HREF="005454.html">[ian@veryfresh.com: Re: [mod_python] Complicated GET configuration]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5443">[ date ]</a>
              <a href="thread.html#5443">[ thread ]</a>
              <a href="subject.html#5443">[ subject ]</a>
              <a href="author.html#5443">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
