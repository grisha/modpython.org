<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] how to configure sys.path when installing not into 
	python's lib directory?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20how%20to%20configure%20sys.path%20when%20installing%20not%20into%20%0A%09python%27s%20lib%20directory%3F&In-Reply-To=1248749300-sup-1090%40nixos">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026283.html">
   <LINK REL="Next"  HREF="026285.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] how to configure sys.path when installing not into 
	python's lib directory?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20how%20to%20configure%20sys.path%20when%20installing%20not%20into%20%0A%09python%27s%20lib%20directory%3F&In-Reply-To=1248749300-sup-1090%40nixos"
       TITLE="[mod_python] how to configure sys.path when installing not into 
	python's lib directory?">graham.dumpleton at gmail.com
       </A><BR>
    <I>Tue Jul 28 00:32:38 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="026283.html">[mod_python] how to configure sys.path when installing not into 
	python's lib directory?
</A></li>
        <LI>Next message: <A HREF="026285.html">[mod_python] HTTP mime header decoding
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26284">[ date ]</a>
              <a href="thread.html#26284">[ thread ]</a>
              <a href="subject.html#26284">[ subject ]</a>
              <a href="author.html#26284">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>2009/7/28 Marc Weber &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">marco-oweber at gmx.de</A>&gt;:
&gt;<i> Hi Graham,
</I>&gt;<i>
</I>&gt;<i> mod_python looks in:
</I>&gt;<i> &#160;'$PYTHON_INSALL_LOCATION/lib/python25.zip'
</I>&gt;<i> &#160;'$PYTHON_INSALL_LOCATION/lib/python2.5'
</I>&gt;<i> &#160;'$PYTHON_INSALL_LOCATION/lib/python2.5/plat-linux2'
</I>&gt;<i> &#160;'$PYTHON_INSALL_LOCATION/lib/python2.5/lib-tk'
</I>&gt;<i> &#160;'$PYTHON_INSALL_LOCATION/lib/python2.5/lib-dynload'
</I>&gt;<i> &#160;'$PYTHON_INSALL_LOCATION/lib/python2.5/site-packages'
</I>&gt;<i> It only contains default paths of the python installation.
</I>&gt;<i>
</I>&gt;<i> mod_python has been installed to:
</I>&gt;<i>
</I>&gt;<i> &#160;$PACKAGE_DIR/nix/store/axq79wn5py4sfi2n142jfc4arvgyr957-python-2.5.4/lib/python2.5/site-packages/mod_python/*
</I>&gt;<i> &#160;$PACKAGE_DIR/modules/mod_python.so
</I>&gt;<i>
</I>&gt;<i> PACKAGE_DIR &#160; &#160; &#160; &#160; &#160; &#160;= /nix/store/ax9qlhyfjlsnc9lxa3p80gy1qsrjpn2m-apache-httpd-mod-python-3.3.1
</I>&gt;<i> PYTHON_INSALL_LOCATION = /nix/store/axq79wn5py4sfi2n142jfc4arvgyr957-python-2.5.4
</I>
So mod_python Python modules are installed in:

  /nix/store/ax9qlhyfjlsnc9lxa3p80gy1qsrjpn2m-apache-httpd-mod-python-3.3.1//nix/store/axq79wn5py4sfi2n142jfc4arvgyr957-python-2.5.4/lib/python2.5/site-packages/mod_python/*

Are you sure you got things right?

&gt;<i> both are different. Goto www.nixos.org to read up more details about
</I>&gt;<i> this packaging scheme if you're interested.
</I>&gt;<i>
</I>&gt;&gt;<i> /nix/store/axq79wn5py4sfi2n142jfc4arvgyr957-python-2.5.4/lib/python2.5/site-packages
</I>&gt;&gt;<i> unless the Python installation has been mightily fiddled with as well.
</I>&gt;<i> Yes, I did so to make it install into its own directory. After python
</I>&gt;<i> has been build no other build process is allowed to write into
</I>&gt;<i> $PYTHON_INSALL_LOCATION for purity reasons.
</I>&gt;<i>
</I>&gt;&gt;<i> You can't use SetEnv to control environment variables that Python
</I>&gt;&gt;<i> might be able to use at initialisation time.
</I>&gt;<i> So can I do PYTHONPATH=foo $RUN_APACHE instead? I'll try.
</I>
No.

Depending on mod_python will even work doing it this way, can only
suggest you use 'virtualenv' to create a Python virtual environment in
your own writable space.

Then when you build mod_python use --with-python option to configure
to point at the Python in the virtual environment.

When installed, this should install mod_python stuff in virtual environment.

To get Apache/mod_python to then use this virtual environment at run
time however, you need to be able to set PYTHONHOME in environment of
Apache. Unless you are going to run 'httpd' by hand all the time,
can't usually do that.

If the Apache installation follows a standard ASF install structure,
there should be a 'envvars' file in  the same directory as 'httpd'
executable. PYTHONHOME should be set and exported in that. If however
that is in non writable directory as well, then you are stuffed and
likely cannot do it easily with your mod_python installation.

In mod_wsgi you wouldn't need to use 'envvars' as can set
WSGIPythonHome directive in Apache configuration file instead. Even
then, wouldn't be needed normally as you could just use standard
Python installation. Although in your case, since you can't install
other modules into standard site-packages, virtual environments with
mod_wsgi can still be useful. See:

  <A HREF="http://code.google.com/p/modwsgi/wiki/VirtualEnvironments">http://code.google.com/p/modwsgi/wiki/VirtualEnvironments</A>

Personally I would suggest using a sane Linux distribution such as Ubuntu.

Graham

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026283.html">[mod_python] how to configure sys.path when installing not into 
	python's lib directory?
</A></li>
	<LI>Next message: <A HREF="026285.html">[mod_python] HTTP mime header decoding
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26284">[ date ]</a>
              <a href="thread.html#26284">[ thread ]</a>
              <a href="subject.html#26284">[ subject ]</a>
              <a href="author.html#26284">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
