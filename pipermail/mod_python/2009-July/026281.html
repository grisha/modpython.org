<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] how to configure sys.path when installing not into
	python's lib directory?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20how%20to%20configure%20sys.path%20when%20installing%20not%20into%0A%09python%27s%20lib%20directory%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026275.html">
   <LINK REL="Next"  HREF="026282.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] how to configure sys.path when installing not into
	python's lib directory?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Marc Weber</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20how%20to%20configure%20sys.path%20when%20installing%20not%20into%0A%09python%27s%20lib%20directory%3F&In-Reply-To="
       TITLE="[mod_python] how to configure sys.path when installing not into
	python's lib directory?">marco-oweber at gmx.de
       </A><BR>
    <I>Mon Jul 27 21:24:09 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="026275.html">[mod_python] [SPAM] mod_python/mod_wsgi and the apache processing
	pipeline
</A></li>
        <LI>Next message: <A HREF="026282.html">[mod_python] how to configure sys.path when installing not into 
	python's lib directory?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26281">[ date ]</a>
              <a href="thread.html#26281">[ thread ]</a>
              <a href="subject.html#26281">[ subject ]</a>
              <a href="author.html#26281">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi

I'd lite to play with mod_python. I'm running nixos using the nix
package manager. It's special because every package is installed into
its own package diroctory by default.

It compiles fine but of course the import path is not correct then:

  [Tue Jul 28 00:59:43 2009] [error] make_obcallback: could not import mod_python.apache.\n
  ImportError: No module named mod_python.apache
  [Tue Jul 28 00:59:43 2009] [error] make_obcallback: Python path being used &quot;['/nix/store/axq79wn5py4sfi2n142jfc4arvgyr957-python-2.5.4/lib/python25.zip', '/nix/store/axq79wn5py4sfi2n142jfc4arvgyr957-python-2.5.4/lib/python2.5', '/nix/store/axq79wn5py4sfi2n142jfc4arvgyr957-python-2.5.4/lib/python2.5/plat-linux2', '/nix/store/axq79wn5py4sfi2n142jfc4arvgyr957-python-2.5.4/lib/python2.5/lib-tk', '/nix/store/axq79wn5py4sfi2n142jfc4arvgyr957-python-2.5.4/lib/python2.5/lib-dynload', '/nix/store/axq79wn5py4sfi2n142jfc4arvgyr957-python-2.5.4/lib/python2.5/site-packages']&quot;.

I read from docs that I can use

  PythonOption mod_python.importer.path &quot;['path']&quot;

but this didn't work? Is it added after the lines
    m = PyImport_ImportModule(&quot;mod_python.apache&quot;);
are executed (mod_python.c)

The README also contains a hint:

  - Running your own version of mod_python without installing it is possible and 
  useful if you cannot be root, but you're a bit on your own, sorry. You'll have 
  to make sure MOD_PYTHON/testconf.py points to the right version of 
  mod_python.so and tweak Apache user's PYTHONPATH environment variable so that
  mod_python can find its Python modules.

What is the Apache user's PYTHONPATH environment variable?
I tried adding to my apache config:
  SetEnv PYTHONPATH $PACKAGE_DIR/nix/store/axq79wn5py4sfi2n142jfc4arvgyr957-python-2.5.4/lib/python2.5/site-packages

A php test &quot;echo getenv('PYTHONPATH');&quot; showed that the var got assigned.
Still the path isn't added to the import list.

Is there something else I can try?

Of course I can patch the python install receipt making it install
mod_python as well. However that's suboptimal.

Can I automatically patch the .c code to add that module directory?

Marc Weber
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026275.html">[mod_python] [SPAM] mod_python/mod_wsgi and the apache processing
	pipeline
</A></li>
	<LI>Next message: <A HREF="026282.html">[mod_python] how to configure sys.path when installing not into 
	python's lib directory?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26281">[ date ]</a>
              <a href="thread.html#26281">[ thread ]</a>
              <a href="subject.html#26281">[ subject ]</a>
              <a href="author.html#26281">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
