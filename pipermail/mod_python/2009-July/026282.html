<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] how to configure sys.path when installing not into 
	python's lib directory?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20how%20to%20configure%20sys.path%20when%20installing%20not%20into%20%0A%09python%27s%20lib%20directory%3F&In-Reply-To=1248744241-sup-5623%40nixos">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026281.html">
   <LINK REL="Next"  HREF="026283.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] how to configure sys.path when installing not into 
	python's lib directory?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20how%20to%20configure%20sys.path%20when%20installing%20not%20into%20%0A%09python%27s%20lib%20directory%3F&In-Reply-To=1248744241-sup-5623%40nixos"
       TITLE="[mod_python] how to configure sys.path when installing not into 
	python's lib directory?">graham.dumpleton at gmail.com
       </A><BR>
    <I>Mon Jul 27 22:31:56 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="026281.html">[mod_python] how to configure sys.path when installing not into
	python's lib directory?
</A></li>
        <LI>Next message: <A HREF="026283.html">[mod_python] how to configure sys.path when installing not into 
	python's lib directory?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26282">[ date ]</a>
              <a href="thread.html#26282">[ thread ]</a>
              <a href="subject.html#26282">[ subject ]</a>
              <a href="author.html#26282">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>2009/7/28 Marc Weber &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">marco-oweber at gmx.de</A>&gt;:
&gt;<i> Hi
</I>&gt;<i>
</I>&gt;<i> I'd lite to play with mod_python. I'm running nixos using the nix
</I>&gt;<i> package manager. It's special because every package is installed into
</I>&gt;<i> its own package diroctory by default.
</I>&gt;<i>
</I>&gt;<i> It compiles fine but of course the import path is not correct then:
</I>&gt;<i>
</I>&gt;<i> &#160;[Tue Jul 28 00:59:43 2009] [error] make_obcallback: could not import mod_python.apache.\n
</I>&gt;<i> &#160;ImportError: No module named mod_python.apache
</I>&gt;<i> &#160;[Tue Jul 28 00:59:43 2009] [error] make_obcallback: Python path being used &quot;['/nix/store/axq79wn5py4sfi2n142jfc4arvgyr957-python-2.5.4/lib/python25.zip', '/nix/store/axq79wn5py4sfi2n142jfc4arvgyr957-python-2.5.4/lib/python2.5', '/nix/store/axq79wn5py4sfi2n142jfc4arvgyr957-python-2.5.4/lib/python2.5/plat-linux2', '/nix/store/axq79wn5py4sfi2n142jfc4arvgyr957-python-2.5.4/lib/python2.5/lib-tk', '/nix/store/axq79wn5py4sfi2n142jfc4arvgyr957-python-2.5.4/lib/python2.5/lib-dynload', '/nix/store/axq79wn5py4sfi2n142jfc4arvgyr957-python-2.5.4/lib/python2.5/site-packages']&quot;.
</I>
Where did the Python modules for mod_python get installed to? By
rights they should still have been installed into:

  /nix/store/axq79wn5py4sfi2n142jfc4arvgyr957-python-2.5.4/lib/python2.5/site-packages

unless the Python installation has been mightily fiddled with as well.

&gt;<i> I read from docs that I can use
</I>&gt;<i>
</I>&gt;<i> &#160;PythonOption mod_python.importer.path &quot;['path']&quot;
</I>&gt;<i>
</I>&gt;<i> but this didn't work? Is it added after the lines
</I>&gt;<i> &#160; &#160;m = PyImport_ImportModule(&quot;mod_python.apache&quot;);
</I>&gt;<i> are executed (mod_python.c)
</I>
That option is totally unrelated, Ignore it.

&gt;<i> The README also contains a hint:
</I>&gt;<i>
</I>&gt;<i> &#160;- Running your own version of mod_python without installing it is possible and
</I>&gt;<i> &#160;useful if you cannot be root, but you're a bit on your own, sorry. You'll have
</I>&gt;<i> &#160;to make sure MOD_PYTHON/testconf.py points to the right version of
</I>&gt;<i> &#160;mod_python.so and tweak Apache user's PYTHONPATH environment variable so that
</I>&gt;<i> &#160;mod_python can find its Python modules.
</I>&gt;<i>
</I>&gt;<i> What is the Apache user's PYTHONPATH environment variable?
</I>&gt;<i> I tried adding to my apache config:
</I>&gt;<i> &#160;SetEnv PYTHONPATH $PACKAGE_DIR/nix/store/axq79wn5py4sfi2n142jfc4arvgyr957-python-2.5.4/lib/python2.5/site-packages
</I>
You can't use SetEnv to control environment variables that Python
might be able to use at initialisation time.

What is $PACKAGE_DIR anyway? Isn't the Python installation under:

  /nix/store/axq79wn5py4sfi2n142jfc4arvgyr957-python-2.5.4

Why is another prefix needed?

If Python isn't under that directory, then likely that Python command
line wouldn't work either.

&gt;<i> A php test &quot;echo getenv('PYTHONPATH');&quot; showed that the var got assigned.
</I>&gt;<i> Still the path isn't added to the import list.
</I>
Also, all that stuff you quote relates to running test scripts for
mod_python from the command line, not an installed installation.

&gt;<i> Is there something else I can try?
</I>
If all you want to do is host a WSGI capable Python application, then
mod_wsgi will likely be a lot easier to get working as it doesn't have
dependencies on installed Python code files for it itself to work. You
can also with mod_wsgi set an Apache configuration directive to tell
it where Python installation is, but then that shouldn't be required
unless the Python installation has been totally stuffed up with this
packaging scheme.

&gt;<i> Of course I can patch the python install receipt making it install
</I>&gt;<i> mod_python as well. However that's suboptimal.
</I>&gt;<i>
</I>&gt;<i> Can I automatically patch the .c code to add that module directory?
</I>
Sounds like the wrong way of going about it.

State where the Python modules for mod_python are installed and what
is required may be more obvious.

Graham

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026281.html">[mod_python] how to configure sys.path when installing not into
	python's lib directory?
</A></li>
	<LI>Next message: <A HREF="026283.html">[mod_python] how to configure sys.path when installing not into 
	python's lib directory?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26282">[ date ]</a>
              <a href="thread.html#26282">[ thread ]</a>
              <a href="subject.html#26282">[ subject ]</a>
              <a href="author.html#26282">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
