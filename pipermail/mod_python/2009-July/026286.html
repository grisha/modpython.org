<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] HTTP mime header decoding
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20HTTP%20mime%20header%20decoding&In-Reply-To=8F54C2FC4227C446AAB91AC0F40A4DC3F75B01%40ccpexch04.cantab.local">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026285.html">
   <LINK REL="Next"  HREF="026287.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] HTTP mime header decoding</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20HTTP%20mime%20header%20decoding&In-Reply-To=8F54C2FC4227C446AAB91AC0F40A4DC3F75B01%40ccpexch04.cantab.local"
       TITLE="[mod_python] HTTP mime header decoding">graham.dumpleton at gmail.com
       </A><BR>
    <I>Tue Jul 28 21:42:31 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="026285.html">[mod_python] HTTP mime header decoding
</A></li>
        <LI>Next message: <A HREF="026287.html">[mod_python] HTTP mime header decoding
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26286">[ date ]</a>
              <a href="thread.html#26286">[ thread ]</a>
              <a href="subject.html#26286">[ subject ]</a>
              <a href="author.html#26286">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>2009/7/29 Philip Scott &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Philip.Scott at cantabcapital.com</A>&gt;:
&gt;<i> Hi all,
</I>&gt;<i>
</I>&gt;<i> I was intending to post this to the -dev list, but it appears to have moved
</I>&gt;<i> somewhere I cannot find it, so hopefully this email will find the right
</I>&gt;<i> eyes.
</I>
No matter where you sent it, no one is actively developing or
maintaining mod_python.

All you can do is go to:

  <A HREF="https://issues.apache.org/jira/browse/MODPYTHON">https://issues.apache.org/jira/browse/MODPYTHON</A>

and log a description of the problem and the proposed patch and if
valid hope it may be addressed one day.

There are other unresolved bug reports about stuff in that same
section of code, but I believe they are for different issues.

Graham

&gt;<i> I recently upgraded our mod_python from an old version (circa 2004) to the
</I>&gt;<i> latest and greatest Ubuntu had to offer, and unfortunately this caused a bit
</I>&gt;<i> of a regression in our system. We have to interface with a rather obscure
</I>&gt;<i> client, which sends its data through a HTTP POST request as a multipart
</I>&gt;<i> message separated nicely with boundaries, but which does not add a new line
</I>&gt;<i> or carriage return&#160;after the final boundary. I am not sure whether this is
</I>&gt;<i> permitted in the standard, but it worked in the old version - I think some
</I>&gt;<i> changes to improve multi-line handling (adding the use of a boundary regex)
</I>&gt;<i> upset this.
</I>&gt;<i>
</I>&gt;<i> I have a very small patch for util.py which fixes this on my end, and I
</I>&gt;<i> think should be benign. If someone in the know would like to check it won't
</I>&gt;<i> have any unintended side effects, it would be great to stick it in the tree;
</I>&gt;<i> perhaps there are some more obscure clients that do this as well?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --- util.py.orig&#160;&#160;&#160;&#160;&#160;&#160;&#160; 2009-07-28 16:08:00.000000000 +0100
</I>&gt;<i> +++ util.py&#160;&#160;&#160;&#160; 2009-07-28 16:08:19.000000000 +0100
</I>&gt;<i> @@ -237,7 +237,7 @@
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; boundary = ctype[i+9:]
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; if len(boundary) &gt;= 2 and boundary[0] == boundary[-1] == '&quot;':
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; boundary = boundary[1:-1]
</I>&gt;<i> -&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; boundary = re.compile(&quot;--&quot; + re.escape(boundary) +
</I>&gt;<i> &quot;(--)?\r?\n&quot;)
</I>&gt;<i> +&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; boundary = re.compile(&quot;--&quot; + re.escape(boundary) +
</I>&gt;<i> &quot;(--)?\r?\n?&quot;)
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; except ValueError:
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; raise apache.SERVER_RETURN, apache.HTTP_BAD_REQUEST
</I>&gt;<i>
</I>&gt;<i> I think that since we get the line we compare to boundary using readline()
</I>&gt;<i> anyway, it is safe to make the final \n optional. It certainly appears to
</I>&gt;<i> work..
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i>
</I>&gt;<i> Philip
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I>&gt;<i>
</I>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026285.html">[mod_python] HTTP mime header decoding
</A></li>
	<LI>Next message: <A HREF="026287.html">[mod_python] HTTP mime header decoding
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26286">[ date ]</a>
              <a href="thread.html#26286">[ thread ]</a>
              <a href="subject.html#26286">[ subject ]</a>
              <a href="author.html#26286">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
