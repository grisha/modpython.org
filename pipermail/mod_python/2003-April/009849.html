<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Import Issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Import%20Issues&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009848.html">
   <LINK REL="Next"  HREF="009850.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
<table border=0 width="100%"><tr><td valign="top">
   <H1>[mod_python] Import Issues</H1>
    <B>Tommy !!</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Import%20Issues&In-Reply-To="
       TITLE="[mod_python] Import Issues">the_edge2020 at hotmail.com
       </A><BR>
    <I>Sun Apr  6 11:57:40 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="009848.html">[mod_python] Import Issues
</A></li>
        <LI>Next message: <A HREF="009850.html">[mod_python] Import Issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9849">[ date ]</a>
              <a href="thread.html#9849">[ thread ]</a>
              <a href="subject.html#9849">[ subject ]</a>
              <a href="author.html#9849">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Mike (and pascal),

Wouldn't mod_python be able to determine the directory it is executing in 
from the request (in a handler maybe)? Or, at the very least, in the Apache 
module itself, since mod_python must obviously know where the current script 
is being executed in order to actually execute it (see the request_rec 
structure in the Apache 2 C source code to see the relevant fields).

I would think that you could either:
a) modify the handler itself to check the request for the path to the 
module, and then use os.path.dir (? from memory) to grab the directory it's 
executing in, and then throw that into the sys.path?
b) take the same path that the Apache module itself does when it calls 
*sound of source code ruffling* PythonChildInitHandler (mod_python.c) and 
use the Python API to manipulate the sys.path global itself (except, 
obviously, from python_handler in the same file, where you *should* actually 
know where the file is located)

Anyways I'm going to have a bit of a hack around the source code and see 
what I come up with.

Thanks for your time guys, if you have any further comments I'd love to hear 
about it :)

Kind Regards,
Tom L




&gt;<i>From: Mike Verdone &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mike_verdone at shaw.ca</A>&gt;
</I>&gt;<i>To: Tommy !! &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">the_edge2020 at hotmail.com</A>&gt;, <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython.org</A>
</I>&gt;<i>Subject: Re: [mod_python] Import Issues
</I>&gt;<i>Date: Sat, 05 Apr 2003 11:20:26 -0700
</I>&gt;<i>MIME-Version: 1.0
</I>&gt;<i>Received: from mc5-f20.law1.hotmail.com ([65.54.252.27]) by 
</I>&gt;<i>mc5-s2.law1.hotmail.com with Microsoft SMTPSVC(5.0.2195.5600); Sat, 5 Apr 
</I>&gt;<i>2003 10:29:20 -0800
</I>&gt;<i>Received: from eden.ispol.com ([206.239.103.254]) by 
</I>&gt;<i>mc5-f20.law1.hotmail.com with Microsoft SMTPSVC(5.0.2195.5600); Sat, 5 Apr 
</I>&gt;<i>2003 10:28:26 -0800
</I>&gt;<i>Received: from eden.ispol.com (localhost.ispol.com [127.0.0.1])by 
</I>&gt;<i>eden.ispol.com (8.12.6/8.11.1) with ESMTP id h35IL4WT029214;Sat, 5 Apr 2003 
</I>&gt;<i>13:21:04 -0500 (EST)(envelope-from <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python-admin at modpython.org</A>)
</I>&gt;<i>Received: from pd6mo2so.prod.shaw.ca (shawidc-mo1.cg.shawcable.net 
</I>&gt;<i>[24.71.223.10])by eden.ispol.com (8.12.6/8.11.1) with ESMTP id 
</I>&gt;<i>h35IK9WT029190for &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython.org</A>&gt;; Sat, 5 Apr 2003 13:20:09 
</I>&gt;<i>-0500 (EST)(envelope-from <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mike_verdone at shaw.ca</A>)
</I>&gt;<i>Received: from pd3mr3so.prod.shaw.ca (pd3mr3so-ser.prod.shaw.ca 
</I>&gt;<i>[10.0.141.179]) by l-daemon (iPlanet Messaging Server 5.1 HotFix 0.8 (built 
</I>&gt;<i>May 12 2002)) with ESMTP id &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">0HCV004PCUXCO3 at l-daemon</A>&gt; for 
</I>&gt;<i><A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython.org</A>; Sat, 05 Apr 2003 11:20:00 -0700 (MST)
</I>&gt;<i>Received: from pn2ml5so.prod.shaw.ca (pn2ml5so-qfe0.prod.shaw.ca 
</I>&gt;<i>[10.0.121.149]) by l-daemon (iPlanet Messaging Server 5.1 HotFix 0.8 (built 
</I>&gt;<i>May 12 2002)) with ESMTP id &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">0HCV00BORUXCL2 at l-daemon</A>&gt; for 
</I>&gt;<i><A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython.org</A>; Sat, 05 Apr 2003 11:20:00 -0700 (MST)
</I>&gt;<i>Received: from 192.168.0.42 (h68-144-147-185.cg.shawcable.net 
</I>&gt;<i>[68.144.147.185]) by l-daemon (iPlanet Messaging Server 5.1 HotFix 0.8 
</I>&gt;<i>(built May 12 2002)) with ESMTP id &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">0HCV00F46UXCP9 at l-daemon</A>&gt; for 
</I>&gt;<i><A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython.org</A>; Sat, 05 Apr 2003 11:20:00 -0700 (MST)
</I>&gt;<i>X-Message-Info: pdGgd64CkwYBecCeulYyOTshuDTWlDUk
</I>&gt;<i>In-reply-to: &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">F46Y7ZggDttW3SC7g4Z0002e234 at hotmail.com</A>&gt;
</I>&gt;<i>Message-id: &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">200304051120.26133.mike_verdone at shaw.ca</A>&gt;
</I>&gt;<i>User-Agent: KMail/1.5.1
</I>&gt;<i>References: &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">F46Y7ZggDttW3SC7g4Z0002e234 at hotmail.com</A>&gt;
</I>&gt;<i>Sender: <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python-admin at modpython.org</A>
</I>&gt;<i>Errors-To: <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python-admin at modpython.org</A>
</I>&gt;<i>X-BeenThere: <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython.org</A>
</I>&gt;<i>X-Mailman-Version: 2.0.12
</I>&gt;<i>Precedence: bulk
</I>&gt;<i>List-Help: &lt;mailto:<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python-request at modpython.org</A>?subject=help&gt;
</I>&gt;<i>List-Post: &lt;mailto:<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython.org</A>&gt;
</I>&gt;<i>List-Subscribe: 
</I>&gt;<i>&lt;<A HREF="http://www.modpython.org/mailman/listinfo/mod_python">http://www.modpython.org/mailman/listinfo/mod_python</A>&gt;,&lt;mailto:<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python-request at modpython.org</A>?subject=subscribe&gt;
</I>&gt;<i>List-Id: mod_python user mailing list &lt;mod_python.modpython.org&gt;
</I>&gt;<i>List-Unsubscribe: 
</I>&gt;<i>&lt;<A HREF="http://www.modpython.org/mailman/listinfo/mod_python">http://www.modpython.org/mailman/listinfo/mod_python</A>&gt;,&lt;mailto:<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python-request at modpython.org</A>?subject=unsubscribe&gt;
</I>&gt;<i>List-Archive: &lt;<A HREF="http://www.modpython.org/pipermail/mod_python/">http://www.modpython.org/pipermail/mod_python/</A>&gt;
</I>&gt;<i>Return-Path: <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python-admin at modpython.org</A>
</I>&gt;<i>X-OriginalArrivalTime: 05 Apr 2003 18:28:28.0117 (UTC) 
</I>&gt;<i>FILETIME=[26ED0850:01C2FBA1]
</I>&gt;<i>
</I>&gt;<i>On April 5, 2003 10:53 am, Tommy !! wrote:
</I>&gt;<i> &gt; Hi all,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Just curious as to why (by design?) mod_python does not allow one to 
</I>&gt;<i>import
</I>&gt;<i> &gt; modules in the same directory as the executing script - instead you have 
</I>&gt;<i>to
</I>&gt;<i> &gt; resort to altering sys.path inside each script in order to get it 
</I>&gt;<i>importing
</I>&gt;<i> &gt; correctly.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; This is an issue if you don't have access to the web server to modify
</I>&gt;<i> &gt; httpd.conf and .htaccess files are disabled/limited. Additionally, I may
</I>&gt;<i> &gt; not have access to the site-packages directory, or any other directory, 
</I>&gt;<i>for
</I>&gt;<i> &gt; that matter, from which my script could import reusable components.
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i>The main problem is that mod_python doesn't know what directory it's in 
</I>&gt;<i>when
</I>&gt;<i>it executes a script except in two cases (as far as I can tell):
</I>&gt;<i>
</I>&gt;<i>1. You put the AddHandler directive in the .htaccess file in that 
</I>&gt;<i>directory.
</I>&gt;<i>
</I>&gt;<i>2. You enclose the AddHandler directive in a &lt;Directory&gt; block specifying 
</I>&gt;<i>the
</I>&gt;<i>full path in apache.conf.
</I>&gt;<i>
</I>&gt;<i>Otherwise mod_python has no idea where it's really executing from, and 
</I>&gt;<i>seems
</I>&gt;<i>to default to the apache dir. If your administrator has restricted 
</I>&gt;<i>.htaccess
</I>&gt;<i>and won't set up apache.conf for you, then you're kinda hooped.
</I>&gt;<i>
</I>&gt;<i>Have you looked at the PythonPath directive? You may be able to get away 
</I>&gt;<i>with
</I>&gt;<i>that in your .htacces. e.g.:
</I>&gt;<i>
</I>&gt;<i>PythonPath &quot;['/the/scripts/directory'] + sys.path&quot;
</I>&gt;<i>
</I>&gt;<i>Good luck!
</I>&gt;<i>
</I>&gt;<i>Mike.
</I>&gt;<i>
</I>&gt;<i>_______________________________________________
</I>&gt;<i>Mod_python mailing list
</I>&gt;<i><A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i><A HREF="http://www.modpython.org/mailman/listinfo/mod_python">http://www.modpython.org/mailman/listinfo/mod_python</A>
</I>

_________________________________________________________________
MSN Instant Messenger now available on Australian mobile phones.&#160;Go to  
<A HREF="http://ninemsn.com.au/mobilecentral/hotmail_messenger.asp">http://ninemsn.com.au/mobilecentral/hotmail_messenger.asp</A>


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009848.html">[mod_python] Import Issues
</A></li>
	<LI>Next message: <A HREF="009850.html">[mod_python] Import Issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9849">[ date ]</a>
              <a href="thread.html#9849">[ thread ]</a>
              <a href="subject.html#9849">[ subject ]</a>
              <a href="author.html#9849">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
