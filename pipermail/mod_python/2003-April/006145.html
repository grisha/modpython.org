<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Session Tracking
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Session%20Tracking&In-Reply-To=3E8D1B5A.40001%40rwsoft.ca">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006144.html">
   <LINK REL="Next"  HREF="006147.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Session Tracking</H1>
    <B>David Fraser</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Session%20Tracking&In-Reply-To=3E8D1B5A.40001%40rwsoft.ca"
       TITLE="[mod_python] Session Tracking">davidf at sjsoft.com
       </A><BR>
    <I>Fri Apr  4 08:21:06 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="006144.html">[mod_python] Session Tracking
</A></li>
        <LI>Next message: <A HREF="006147.html">[mod_python] Session Tracking
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6145">[ date ]</a>
              <a href="thread.html#6145">[ thread ]</a>
              <a href="subject.html#6145">[ subject ]</a>
              <a href="author.html#6145">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<table border=0 width="100%"><tr><td>
<!--beginarticle-->
<PRE>Ron Wills wrote:

&gt;<i> Hello All
</I>&gt;<i>
</I>&gt;<i> ~  There's something that I can't seem to find the in the docs. Currently
</I>&gt;<i> I have a set of PHP libs that I use, but was hoping to port my
</I>&gt;<i> authenication classes to mod_python. This could simplify things for me,
</I>&gt;<i> but I can seem to find anything to do session tracking (with cookies or
</I>&gt;<i> so on). Any help would be appretiated.
</I>&gt;<i>
</I>I've just done this for our application for mod_python.
Basically we use the getcookie and setcookie functions below to get and 
set the cookie
Then we have session objects, each of which has a unique session string, 
which is set in the cookie.
We have a global sessioncache dictionary that looks up a session object 
based on the session string.
We also use this for handling user login etc, so its a bit more 
complicated, but that's the basic
idea and you should be able to use the same idea.

When doing this, I was wondering whether some cookie methods could be 
added to the request object,
since that's where they seem to belong? Could pass in the class of 
cookie you want to use etc...
Any thoughts?

David

def getcookie(req):
  &quot;&quot;&quot;Reads in any cookie info from the request&quot;&quot;&quot;
  try:
    cookiestring = req.headers_in[&quot;Cookie&quot;]
  except:
    cookiestring = {}
  cookie = Cookie.SimpleCookie()
  cookie.load(cookiestring)
  cookiedict = {}
  for key, morsel in cookie.iteritems():
    cookiedict[key] = morsel.value
  return cookiedict

def setcookie(req, cookiedict):
  &quot;&quot;&quot;Puts the bits from the cookiedict into Morsels, sets the req cookie&quot;&quot;&quot;
  # construct the cookie from the cookiedict
  cookie = Cookie.SimpleCookie()
  for key, value in cookiedict.iteritems():
    cookie[key] = value
  # add the cookie headers to req.headers_out
  for key, morsel in cookie.iteritems():
    req.headers_out.add('Set-Cookie', morsel.OutputString())




</PRE>
<!--endarticle-->
</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006144.html">[mod_python] Session Tracking
</A></li>
	<LI>Next message: <A HREF="006147.html">[mod_python] Session Tracking
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6145">[ date ]</a>
              <a href="thread.html#6145">[ thread ]</a>
              <a href="subject.html#6145">[ subject ]</a>
              <a href="author.html#6145">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
