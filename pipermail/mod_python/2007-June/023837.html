<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] having modpython make a data base connection
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20having%20modpython%20make%20a%20data%20base%20connection&In-Reply-To=88e286470706121858s4204ef0dx32369c9459d50c41%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023833.html">
   <LINK REL="Next"  HREF="023838.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] having modpython make a data base connection</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>David Bear</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20having%20modpython%20make%20a%20data%20base%20connection&In-Reply-To=88e286470706121858s4204ef0dx32369c9459d50c41%40mail.gmail.com"
       TITLE="[mod_python] having modpython make a data base connection">David.Bear at asu.edu
       </A><BR>
    <I>Tue Jun 12 23:01:41 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023833.html">[mod_python] having modpython make a data base connection
</A></li>
        <LI>Next message: <A HREF="023838.html">[mod_python] having modpython make a data base connection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23837">[ date ]</a>
              <a href="thread.html#23837">[ thread ]</a>
              <a href="subject.html#23837">[ subject ]</a>
              <a href="author.html#23837">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Jun 13, 2007 at 11:58:06AM +1000, Graham Dumpleton wrote:
&gt;<i> For starters, if you haven't read:
</I>&gt;<i> 
</I>&gt;<i>  <A HREF="http://www.dscpl.com.au/wiki/ModPython/Articles/TheProcessInterpreterModel">http://www.dscpl.com.au/wiki/ModPython/Articles/TheProcessInterpreterModel</A>
</I>&gt;<i> 
</I>&gt;<i> do so.
</I>
If I structure the program to exist in a single file, make my db
connections from there, does this imply that I could have 'multiple'
connections made to the data base? 

I am using the worker mode of apache on linux. This means that I do
have multiple child apaches and threads in each. So, I'm not sure if I
have 5 children and 2 thread per child that would imply 10 connections
to the data base?

&gt;<i> 
</I>&gt;<i> Second, be very careful about putting database connection objects in
</I>&gt;<i> modules which are candidates for reloading. For stuff about how to
</I>&gt;<i> deal with this if you want to do that, read documentation for
</I>&gt;<i> import_module() in:
</I>
I don't know why a module would be reloaded. I'm still thinking in
terms of the cgi model where the script runs, connection made to db,
data is updated, connection closed, script dies, done.

Under what conditions would a module be reloaded? And if I use the
handler mode (no publisher or psp) and the data base connection is
made in the handler function, does that imply the connection is made
when apache is started (and the script is run for the first time) and
lives untill apache dies?

&gt;<i> 
</I>&gt;<i>  <A HREF="http://www.modpython.org/live/current/doc-html/pyapi-apmeth.html">http://www.modpython.org/live/current/doc-html/pyapi-apmeth.html</A>
</I>&gt;<i> 
</I>&gt;<i> I'll let others argue the merits of database connection pooling versus
</I>&gt;<i> a connection per request as not an area I have direct experience with.
</I>
As they say, I'm against premature optimization -- I don't know enough
to care at this point. I just want to run in 'safest way', that means
the most predictable.

&gt;<i> 
</I>&gt;<i> Graham
</I>&gt;<i> 
</I>&gt;<i> On 13/06/07, David Bear &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">David.Bear at asu.edu</A>&gt; wrote:
</I>&gt;<i> &gt;I don't want to start a flame ware here, but I'm starting to develop
</I>&gt;<i> &gt;and application that will connect to a postgresql server.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;I realize there are probably a dozen things I should know about
</I>&gt;<i> &gt;modpython before I begin.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;I will be use the standard python handler. I won't be using publisher
</I>&gt;<i> &gt;or psp (at least I think).
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;I am afraid of issues like having modpython make a db connection
</I>&gt;<i> &gt;object that is not shared properly --. The more terrifying question is
</I>&gt;<i> &gt;what should be be asking.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;I wonder if someone has develop a top ten rules of thumb when using
</I>&gt;<i> &gt;modpython with sql data base connections?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;--
</I>&gt;<i> &gt;David Bear
</I>&gt;<i> &gt;phone:  602-496-0424
</I>&gt;<i> &gt;fax:    602-496-0955
</I>&gt;<i> &gt;College of Public Programs/ASU
</I>&gt;<i> &gt;University Center Rm 622
</I>&gt;<i> &gt;411 N Central
</I>&gt;<i> &gt;Phoenix, AZ 85007-0685
</I>&gt;<i> &gt; &quot;Beware the IP portfolio, everyone will be suspect of trespassing&quot;
</I>&gt;<i> &gt;_______________________________________________
</I>&gt;<i> &gt;Mod_python mailing list
</I>&gt;<i> &gt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> &gt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i> &gt;
</I>
-- 
David Bear
phone: 	602-496-0424
fax: 	602-496-0955
College of Public Programs/ASU
University Center Rm 622
411 N Central
Phoenix, AZ 85007-0685
 &quot;Beware the IP portfolio, everyone will be suspect of trespassing&quot;
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023833.html">[mod_python] having modpython make a data base connection
</A></li>
	<LI>Next message: <A HREF="023838.html">[mod_python] having modpython make a data base connection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23837">[ date ]</a>
              <a href="thread.html#23837">[ thread ]</a>
              <a href="subject.html#23837">[ subject ]</a>
              <a href="author.html#23837">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
