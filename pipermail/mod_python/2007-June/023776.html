<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] better understanding of the req object
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20better%20understanding%20of%20the%20req%20object&In-Reply-To=20070604235819.GI28400%40asu.edu">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023775.html">
   <LINK REL="Next"  HREF="023777.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] better understanding of the req object</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20better%20understanding%20of%20the%20req%20object&In-Reply-To=20070604235819.GI28400%40asu.edu"
       TITLE="[mod_python] better understanding of the req object">graham.dumpleton at gmail.com
       </A><BR>
    <I>Mon Jun  4 20:15:02 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023775.html">[mod_python] better understanding of the req object
</A></li>
        <LI>Next message: <A HREF="023777.html">[mod_python] better understanding of the req object
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23776">[ date ]</a>
              <a href="thread.html#23776">[ thread ]</a>
              <a href="subject.html#23776">[ subject ]</a>
              <a href="author.html#23776">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The only problem with using the 'print' method as shown is that there
is no way to control buffering. As a result, every one of those little
strings gets written out by Apache separately which can slow down
throughput.

It is actually better to use the following if outputing lots of little
strings using 'print'.

  import StringIO

  data = StringIO.StringIO()

  print &gt;&gt; data, &quot;the uri is&quot;, req.uri

  req.write(data.getvalue())

Ie., perform only one call to write() with data accumulated using
StringIO (or cStringIO).

Graham

On 05/06/07, David Bear &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">David.Bear at asu.edu</A>&gt; wrote:
&gt;<i> Thanks.
</I>&gt;<i>
</I>&gt;<i> I was thinking in terms of using ',' string catenation like
</I>&gt;<i> print 'this ', 'is something'.. while using req.write method.
</I>&gt;<i>
</I>&gt;<i> I hate having to keep learning the same thing over and over...
</I>&gt;<i>
</I>&gt;<i> On Mon, Jun 04, 2007 at 04:47:48PM -0700, David Schachter wrote:
</I>&gt;<i> &gt; David--
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Try one of these:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; req.write(&quot;the uri is %s&quot; % req.uri)
</I>&gt;<i> &gt; print &gt;&gt; req, &quot;the uri is %s&quot; % req.uri
</I>&gt;<i> &gt; print &gt;&gt; req, &quot;the uri is&quot;, req.uri
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The latter two forms use the fact that the req object has a write()
</I>&gt;<i> &gt; method compatible with what the print keyword expects. It's a bit nicer
</I>&gt;<i> &gt; than the first form, imho.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; You tried to pass two strings to a function that takes only one string
</I>&gt;<i> &gt; and an optional boolean flag (flush=0). You are lucky the universe did
</I>&gt;<i> &gt; not invert into a black hole. Or perhaps unlucky; it depends on your
</I>&gt;<i> &gt; point of view, I suppose.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;                      -- David Schachter
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; David Bear wrote:
</I>&gt;<i> &gt; &gt;I'm trying to understand all the members/methods of the req object but
</I>&gt;<i> &gt; &gt;anytime I try something like
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;req.write('the uri is ', req.uri)
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;or req.write('the hostname is ', req.hostname)
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;I get an TypeError.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;I'm completely not understanding how to work with the req object.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;I assumed members would be 'callable' and return their value.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> David Bear
</I>&gt;<i> phone:  602-496-0424
</I>&gt;<i> fax:    602-496-0955
</I>&gt;<i> College of Public Programs/ASU
</I>&gt;<i> University Center Rm 622
</I>&gt;<i> 411 N Central
</I>&gt;<i> Phoenix, AZ 85007-0685
</I>&gt;<i>  &quot;Beware the IP portfolio, everyone will be suspect of trespassing&quot;
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023775.html">[mod_python] better understanding of the req object
</A></li>
	<LI>Next message: <A HREF="023777.html">[mod_python] better understanding of the req object
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23776">[ date ]</a>
              <a href="thread.html#23776">[ thread ]</a>
              <a href="subject.html#23776">[ subject ]</a>
              <a href="author.html#23776">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
