<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] mod_python 3.3 importer with &quot;import&quot; statement
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python%203.3%20importer%20with%20%22import%22%20statement&In-Reply-To=88e286470705310307h781cc2a7t2fa9ee9d9df5e93a%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="023765.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] mod_python 3.3 importer with &quot;import&quot; statement</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Ben Hoyt</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python%203.3%20importer%20with%20%22import%22%20statement&In-Reply-To=88e286470705310307h781cc2a7t2fa9ee9d9df5e93a%40mail.gmail.com"
       TITLE="[mod_python] mod_python 3.3 importer with &quot;import&quot; statement">ben at micropledge.com
       </A><BR>
    <I>Fri Jun  1 03:50:03 EDT 2007</I>
    <P><UL>
        
        <LI>Next message: <A HREF="023765.html">[mod_python] mod_python 3.3 importer with &quot;import&quot; statement
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23764">[ date ]</a>
              <a href="thread.html#23764">[ thread ]</a>
              <a href="subject.html#23764">[ subject ]</a>
              <a href="author.html#23764">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> By default VirtualHosts use distinct Python interpreter instances.
</I>

Thanks for that, Graham. That stuff about Python interpreter instances was
really helpful, and started us hunting down the right track. Anyway, the
problems we were having were caused by:

1) Moving/renaming our root code directory without deleting the *.pyc files.
I think this was adding to the confusion because we were seeing some path
strings from the .pyc files in the error messages.

2) Using mod_python 3.3 on our development servers and something older on
our live one. I think this was confusing us with regard to the import
problem and PythonPath.

3) Relying on relative paths in a few places in our actually (actually in
web.py's template handling, which we're using). We used os.chdir() to set
the current working directory, but of course (we realise now) that the cwd
is process-dependent rather than Python-interpreter dependent. So depending
on which process Apache picked, it'd use the other virtual host's template
directory and confuse everyone. I think I'll tell the web.py people that
depending on relative paths is pretty much a bug (at least with mod_python
-- maybe that's why they haven't seen the bug).

Anyone else using mod_python with web.py, just out of curiosity?

Anyway, it's fixed, and I've got my head around PythonInterpreter and
PythonPath and various other things now. Cheers!

Overriding import is more complicated than just replacing __import__. ;-)


I suspected that was the case. Looks like you've been there and done that.

Thanks,
Ben

-- 
Ben Hoyt, +64 21 331 841
<A HREF="http://www.benhoyt.com/">http://www.benhoyt.com/</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20070601/31e1012e/attachment.html">http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20070601/31e1012e/attachment.html</A>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="023765.html">[mod_python] mod_python 3.3 importer with &quot;import&quot; statement
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23764">[ date ]</a>
              <a href="thread.html#23764">[ thread ]</a>
              <a href="subject.html#23764">[ subject ]</a>
              <a href="author.html#23764">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
