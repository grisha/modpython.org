<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] mod_python + mod_authz_host w/o mod_auth_digest
	causes ~1Mb leak per apache graceful restart
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python%20%2B%20mod_authz_host%20w/o%20mod_auth_digest%0A%09causes%20%7E1Mb%20leak%20per%20apache%20graceful%20restart&In-Reply-To=88e286470706281512o2714d5a9vda7e06f41240ac05%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023936.html">
   <LINK REL="Next"  HREF="023946.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] mod_python + mod_authz_host w/o mod_auth_digest
	causes ~1Mb leak per apache graceful restart</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python%20%2B%20mod_authz_host%20w/o%20mod_auth_digest%0A%09causes%20%7E1Mb%20leak%20per%20apache%20graceful%20restart&In-Reply-To=88e286470706281512o2714d5a9vda7e06f41240ac05%40mail.gmail.com"
       TITLE="[mod_python] mod_python + mod_authz_host w/o mod_auth_digest
	causes ~1Mb leak per apache graceful restart">graham.dumpleton at gmail.com
       </A><BR>
    <I>Thu Jun 28 20:15:48 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023936.html">[mod_python] mod_python + mod_authz_host w/o mod_auth_digest
	causes ~1Mb leak per apache graceful restart
</A></li>
        <LI>Next message: <A HREF="023946.html">[mod_python] mod_python + mod_authz_host w/o mod_auth_digest
	causes ~1Mb leak per apache graceful restart
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23939">[ date ]</a>
              <a href="thread.html#23939">[ thread ]</a>
              <a href="subject.html#23939">[ subject ]</a>
              <a href="author.html#23939">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 29/06/07, Graham Dumpleton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>&gt; wrote:
&gt;<i> On 29/06/07, Aseem Mohanty &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">aseem at metaweb.com</A>&gt; wrote:
</I>&gt;<i> &gt; They sure look like good candidates, so should I be looking at mod_wsgi in
</I>&gt;<i> &gt; daemon mode (we are serving WSGI apps via an adapter). The reason I ask is that
</I>&gt;<i> &gt; we need the graceful restarts and cannot really do without it for now.
</I>&gt;<i>
</I>&gt;<i> Maybe not. When I look at it, mod_wsgi is also leaking on 'graceful'
</I>&gt;<i> and 'restart' as well. If these leaks are from Python itself not
</I>&gt;<i> cleaning things up properly, not sure what I am going to do. Unlike
</I>&gt;<i> mod_python I actually Py_Finalize() the interpreter in the main
</I>&gt;<i> process so that everything is properly reset back to a clean slate, so
</I>&gt;<i> I may actually be more susceptible to it than mod_python.
</I>&gt;<i>
</I>&gt;<i> I'll investigate the mod_wsgi problem and maybe that will throw some
</I>&gt;<i> light on why mod_python also has problems.
</I>
Its okay to try mod_wsgi now if you want to see whether you get memory
leaks there as well. Just make sure you update from repository if you
already had it checked out. Obviously, don't load mod_python at the
same time.

The change I made in mod_wsgi was to comment out trigger for recycling
Python interpreter in main Apache process. This was only being done
for Apache 2.X and not Apache 1.3, so I know not doing it doesn't
cause a problem. I do still see very minor leaks, but the same ones I
get without mod_wsgi.

I'll try now and see what happens with mod_wsgi when I add the auth
modules you are talking about. If that is okay with mod_wsgi, can try
with mod_python and see if I can work out what the differences are.

Graham
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023936.html">[mod_python] mod_python + mod_authz_host w/o mod_auth_digest
	causes ~1Mb leak per apache graceful restart
</A></li>
	<LI>Next message: <A HREF="023946.html">[mod_python] mod_python + mod_authz_host w/o mod_auth_digest
	causes ~1Mb leak per apache graceful restart
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23939">[ date ]</a>
              <a href="thread.html#23939">[ thread ]</a>
              <a href="subject.html#23939">[ subject ]</a>
              <a href="author.html#23939">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
