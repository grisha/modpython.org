<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] form POST, redirect to GET, lost POST
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20form%20POST%2C%20redirect%20to%20GET%2C%20lost%20POST&In-Reply-To=bf30be80706060414r124d991fi6a2282ca791b6a8%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023780.html">
   <LINK REL="Next"  HREF="023782.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] form POST, redirect to GET, lost POST</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20form%20POST%2C%20redirect%20to%20GET%2C%20lost%20POST&In-Reply-To=bf30be80706060414r124d991fi6a2282ca791b6a8%40mail.gmail.com"
       TITLE="[mod_python] form POST, redirect to GET, lost POST">graham.dumpleton at gmail.com
       </A><BR>
    <I>Wed Jun  6 07:28:15 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023780.html">[mod_python] form POST, redirect to GET, lost POST
</A></li>
        <LI>Next message: <A HREF="023782.html">[mod_python] form POST, redirect to GET, lost POST
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23781">[ date ]</a>
              <a href="thread.html#23781">[ thread ]</a>
              <a href="subject.html#23781">[ subject ]</a>
              <a href="author.html#23781">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 06/06/07, Ezequiel Panepucci &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">epanepucci at gmail.com</A>&gt; wrote:
&gt;<i> Client:
</I>&gt;<i>  * Firefox 2.0.0.3
</I>&gt;<i>
</I>&gt;<i> Server:
</I>&gt;<i>  * httpd: Apache 2.2.4
</I>&gt;<i>  * mod_python: 3.3.1
</I>&gt;<i>  * python 2.5
</I>&gt;<i>
</I>&gt;<i> Hi There,
</I>&gt;<i>
</I>&gt;<i> I have a &lt;form method=&quot;post&quot; action=&quot;/pyweb&quot;&gt; (see below for
</I>&gt;<i> httpd.conf). The &quot;/pyweb&quot; maps to &quot;/pyweb/index.py&quot; which contains
</I>&gt;<i> a &quot;def index(req)&quot;.
</I>&gt;<i>
</I>&gt;<i> When I submit the form, my httpd access_log shows:
</I>&gt;<i> *.*,*,* - - [date] &quot;POST /pyweb HTTP/1.1&quot; 301 241
</I>&gt;<i> *.*,*,* - - [date] &quot;GET /pyweb/ HTTP/1.1&quot; 302 62
</I>&gt;<i>
</I>&gt;<i> In the end, the &quot;def index(req)&quot; never sees what was POSTed.
</I>&gt;<i>
</I>&gt;<i> I understand that the POST form is lost when the request is turned
</I>&gt;<i> into GET by misbehavior of my trusty browser (see section 10.3.2 in
</I>&gt;<i> <A HREF="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html">http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html</A>)
</I>&gt;<i>
</I>&gt;<i> The workaround is to have action=&quot;/pyweb/&quot; as opposed
</I>&gt;<i> to  action=&quot;/pyweb&quot; so I prevent the &quot;301&quot;.
</I>&gt;<i>
</I>&gt;<i> Question: Is there a way to configure httpd or mod_python
</I>&gt;<i> so I do not have to worry about making sure that an ending
</I>&gt;<i> '/' is added to the action attribute of forms?
</I>&gt;<i>
</I>&gt;<i> Thanks much for any comments.
</I>
The trailing slash is actually very important. If your browser isn't
told that it must be there then all your relative page references can
be screwed up. Thus, you don't really have a choice but to ensure it
is there.

That said, I would highly discourage you from using a directory as a
target of a form post. Instead be explicit and use /pyweb/index.py
instead as target of form.

Any particular reason why you wouldn't want to do that?

Graham

&gt;<i> Cheers,
</I>&gt;<i>    Zac
</I>&gt;<i>
</I>&gt;<i> ###########
</I>&gt;<i> ########### httpd.conf
</I>&gt;<i> ###########
</I>&gt;<i>
</I>&gt;<i> Alias /pyweb /home/local/pyweb
</I>&gt;<i> &lt;Directory &quot;/home/local/pyweb&quot;&gt;
</I>&gt;<i>     SetHandler python-program
</I>&gt;<i>     PythonHandler mod_python.publisher
</I>&gt;<i>     PythonDebug On
</I>&gt;<i>
</I>&gt;<i>     Order allow,deny
</I>&gt;<i>     Allow from all
</I>&gt;<i> &lt;/Directory&gt;
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023780.html">[mod_python] form POST, redirect to GET, lost POST
</A></li>
	<LI>Next message: <A HREF="023782.html">[mod_python] form POST, redirect to GET, lost POST
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23781">[ date ]</a>
              <a href="thread.html#23781">[ thread ]</a>
              <a href="subject.html#23781">[ subject ]</a>
              <a href="author.html#23781">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
