<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Output filters for large files
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Output%20filters%20for%20large%20files&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023893.html">
   <LINK REL="Next"  HREF="023902.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Output filters for large files</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Robin Haswell</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Output%20filters%20for%20large%20files&In-Reply-To="
       TITLE="[mod_python] Output filters for large files">me at robhaswell.co.uk
       </A><BR>
    <I>Fri Jun 22 07:05:49 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023893.html">[mod_python] get post to a class
</A></li>
        <LI>Next message: <A HREF="023902.html">[mod_python] Output filters for large files
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23897">[ date ]</a>
              <a href="thread.html#23897">[ thread ]</a>
              <a href="subject.html#23897">[ subject ]</a>
              <a href="author.html#23897">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi there

I'm having issues writing an output filter that can handle large files.
My filter's primary purpose is to count the length of the output. Could
someone assist me please?

The code I have works very well except when a large file is passed
through it, at which point it eats up memory, probably equal to the size
of the file.

Any assistance would be much appreciated.

Here is my filter so far:

def outputfilter(filter):

    s = filter.read(4096)
    bytes = 0
    while s:
        filter.write(str(s))
        bytes += len(s)
        s = filter.read(4096)

    if s is None:
        filter.close()


Thanks in advance,

-Rob Haswell
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023893.html">[mod_python] get post to a class
</A></li>
	<LI>Next message: <A HREF="023902.html">[mod_python] Output filters for large files
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23897">[ date ]</a>
              <a href="thread.html#23897">[ thread ]</a>
              <a href="subject.html#23897">[ subject ]</a>
              <a href="author.html#23897">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
