<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Background threads in mod_python
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Background%20threads%20in%20mod_python&In-Reply-To=44CE23F6.8080708%40gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021698.html">
   <LINK REL="Next"  HREF="021702.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Background threads in mod_python</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Mike Looijmans</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Background%20threads%20in%20mod_python&In-Reply-To=44CE23F6.8080708%40gmail.com"
       TITLE="[mod_python] Background threads in mod_python">nlv11281 at natlab.research.philips.com
       </A><BR>
    <I>Tue Aug  1 01:33:08 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021698.html">[mod_python] Upload Progressbar for site.
</A></li>
        <LI>Next message: <A HREF="021702.html">[mod_python] Background threads in mod_python
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21699">[ date ]</a>
              <a href="thread.html#21699">[ thread ]</a>
              <a href="subject.html#21699">[ subject ]</a>
              <a href="author.html#21699">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> There is lots of needs for this in an Ajax world. For example Jetty 
</I>&gt;<i> (<A HREF="http://www.mortbay.com/MB/log/gregw/?permalink=ScalingConnections.html">http://www.mortbay.com/MB/log/gregw/?permalink=ScalingConnections.html</A>), 
</I>&gt;<i> Apache 2.2, and IIS a few years can do asynchronous processing. There 
</I>&gt;<i> are two ways to do asynchronous processing. The first is to lock onto 
</I>&gt;<i> the request and hold it and move it into a &quot;secondary&quot; processing area. 
</I>&gt;<i> The second is to start a task and then ask if any data has been 
</I>&gt;<i> generated. The running task will store in a cache that is then picked up 
</I>&gt;<i> by another request at another time.
</I>
And you have to ask yourself whether a WEB application is really what you want. Ajax is a framework 
for building non-web applications in browsers.

&gt;&gt;<i> When Apache is using multiple processes, it will terminate child 
</I>&gt;&gt;<i> processes for various reasons (for example, when 
</I>&gt;&gt;<i> max_requests_per_child has been reached). That will also terminate any 
</I>&gt;&gt;<i> thread you created in that process.
</I>&gt;&gt;<i>
</I>&gt;<i> Yeah I was looking at this and it is pain. On Windows Apache does not do 
</I>&gt;<i> this. They use only two processes and use threads within those processes.
</I>
Even more painful, there is no telling to which process your next request will go. So if you start a 
thread, and even if it survives, it will be an impossible task to reach it on the server, because 
your requests might end up at other processes.

&gt;<i> I would not say &quot;job&quot;. I would say long running tasks generating data. 
</I>&gt;<i> For example I like to read real-time feeds, and want to generate the 
</I>&gt;<i> data. But the client is in control of the task using parameters that are 
</I>&gt;<i> sent to server.
</I>
So, why not just let the client wait for the data? Neither server nor client have any objection 
keeping a connection open for an hour or longer. Some proxies will appreciate it if you send some 
data every now and then.

&gt;&gt;<i> A web service used within a web server is not redundant, it's just a 
</I>&gt;&gt;<i> way to delegate tasks to other machines or processes. This is 
</I>&gt;&gt;<i> typically done for security reasons.
</I>&gt;&gt;<i>
</I>&gt;<i> I don't really buy this argument. Let's say I do what you recommend and 
</I>&gt;<i> that is call an XML-RPC service. Why, do I need Apache in the first 
</I>&gt;<i> place? While I might get security I don't get any added value. If I am 
</I>&gt;<i> using web services then Apache is pretty well useless anyways because 
</I>&gt;<i> most web services don't use HTTP security. Most web service 
</I>&gt;<i> infrastructures use the WS-* specs, or some home-backed tokens that are 
</I>&gt;<i> added to the XML package.
</I>
There's more to security than authentication.

In a simple order database for example one might want to restrict access so that customers can only 
view their own orders. In DBMS level, this restriction is impossible to enforce (you cannot put 
access restrictions on rows), but when using an inbetween layer it is easy to implement.

Further, by restricting access to the DB so that only the &quot;business layer&quot; web service can access 
it, it is impossible to retrieve sensitive information from the system, even if the web server is 
compromised.

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021698.html">[mod_python] Upload Progressbar for site.
</A></li>
	<LI>Next message: <A HREF="021702.html">[mod_python] Background threads in mod_python
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21699">[ date ]</a>
              <a href="thread.html#21699">[ thread ]</a>
              <a href="subject.html#21699">[ subject ]</a>
              <a href="author.html#21699">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
