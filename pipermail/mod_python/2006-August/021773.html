<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Re: \\[mod_python\\] In ubuntu 6\\.06\\!
	make_obcallback\\(\\): could not import mod_python\\.apache
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20%5C%5C%5Bmod_python%5C%5C%5D%20In%20ubuntu%206%5C%5C.06%5C%5C%21%0A%09make_obcallback%5C%5C%28%5C%5C%29%3A%20could%20not%20import%20mod_python%5C%5C.apache&In-Reply-To=DA54572C-E4B6-4489-9472-FA5A515A8923%40dscpl.com.au">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021772.html">
   <LINK REL="Next"  HREF="021774.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Re: \\[mod_python\\] In ubuntu 6\\.06\\!
	make_obcallback\\(\\): could not import mod_python\\.apache</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Rob Sanderson</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20%5C%5C%5Bmod_python%5C%5C%5D%20In%20ubuntu%206%5C%5C.06%5C%5C%21%0A%09make_obcallback%5C%5C%28%5C%5C%29%3A%20could%20not%20import%20mod_python%5C%5C.apache&In-Reply-To=DA54572C-E4B6-4489-9472-FA5A515A8923%40dscpl.com.au"
       TITLE="[mod_python] Re: \\[mod_python\\] In ubuntu 6\\.06\\!
	make_obcallback\\(\\): could not import mod_python\\.apache">azaroth at liverpool.ac.uk
       </A><BR>
    <I>Wed Aug  9 08:40:33 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021772.html">[mod_python] Re: \\[mod_python\\] In ubuntu 6\\.06\\!
	make_obcallback\\(\\): could not import mod_python\\.apache
</A></li>
        <LI>Next message: <A HREF="021774.html">[mod_python] update from 3.2.8 to 3.2.10
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21773">[ date ]</a>
              <a href="thread.html#21773">[ thread ]</a>
              <a href="subject.html#21773">[ subject ]</a>
              <a href="author.html#21773">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Check that the path for whichever user (probably root) starts up the web
server has the right environment set.

For example, if I compile apache, python and mod_python as UserA and
install to a local directory, then start the web server as root (in
order to bind port 80), it uses the wrong python (system, not newly
installed).

If I instead write a script to export PATH, LD_LIBRARY_PATH and
LD_RUN_PATH before calling httpd, then it uses the right installation.
Setting the variables in envvars and envvars-std isn't sufficient (in my
experience)

Rob

On Wed, 2006-08-09 at 21:33 +1000, Graham Dumpleton wrote:
&gt;<i> Please use reply-all so responses go back to the mailing list.
</I>&gt;<i> 
</I>&gt;<i> On 09/08/2006, at 9:19 PM, yeqiwei wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; I can't understand.
</I>&gt;<i> &gt; In my ubuntu ,I install  python2.4 &amp; python2.4-dev. Does this cause  
</I>&gt;<i> &gt; such error?
</I>&gt;<i> 
</I>&gt;<i> Shouldn't, you need to have both. What I was thinking what that the
</I>&gt;<i> python2.4-dev didn't correspond to the exact same version of Python
</I>&gt;<i> that main python2.4 package was. Ie., python2.4 was Python 2.4.3
</I>&gt;<i> and python2.4-dev was 2.4.1a0. If you updated both at the same time
</I>&gt;<i> though, this should be unlikely though.
</I>&gt;<i> 
</I>&gt;<i> At this point, not sure what is really going on. If you got it working
</I>&gt;<i> with Python 2.3 versions of packages then just go with that.
</I>&gt;<i> 
</I>&gt;<i> Graham
</I>&gt;<i> 
</I>&gt;<i> &gt; #dpkg -L python2.4-dev,
</I>&gt;<i> &gt; I can't find any python file in /usr/bin or else dir in $PATH
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; Looks like your Python 2.4 installation has been stuffed up, or  
</I>&gt;<i> &gt;&gt; you have
</I>&gt;<i> &gt;&gt; Python 2.4.1a0 installed somewhere else on your box as well and that
</I>&gt;<i> &gt;&gt; is what is being found. One possibility is that Python 2.4 package is
</I>&gt;<i> &gt;&gt; split
</I>&gt;<i> &gt;&gt; into main and dev and you have main from Python 2.4.3 but dev from  
</I>&gt;<i> &gt;&gt; the
</I>&gt;<i> &gt;&gt; older Python 2.4.1a0 and that is stuffing things up.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Graham
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; On 09/08/2006, at 8:36 PM, yeqiwei wrote:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; Thanks!
</I>&gt;<i> &gt;&gt;&gt; In my os,the /usr/bin/python is linking to /usr/bin/python2.4.
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; I solved this problem by replacing libapache-mod-python2.4 with
</I>&gt;<i> &gt;&gt;&gt; libapache-mod-python2.3,
</I>&gt;<i> &gt;&gt;&gt; And using python2.3 instead of python2.4
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; the python2.4 version in ubuntu is python 2.4.3,
</I>&gt;<i> &gt;&gt;&gt; in apache log, I find that &quot;mod_python/2.7.10 Python/2.4.1a0&quot;
</I>&gt;<i> &gt;&gt;&gt; does this matter? 2.4.1a0 or  2.4.3
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt; These problems are always hard to debug when using mod_python  
</I>&gt;<i> &gt;&gt;&gt;&gt; 2.7.X.
</I>&gt;<i> &gt;&gt;&gt;&gt; Some extra debug was added in mod_python 3.2.10 to make it  
</I>&gt;<i> &gt;&gt;&gt;&gt; easier to
</I>&gt;<i> &gt;&gt;&gt;&gt; work out, but that requires Apache 2.0/2.2 and you can't use
</I>&gt;<i> &gt;&gt;&gt;&gt; Apache 1.3.
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt; Anyway, all I can think of is that the user that Apache runs as is
</I>&gt;<i> &gt;&gt;&gt;&gt; finding a
</I>&gt;<i> &gt;&gt;&gt;&gt; different version of the python executable on its PATH or it is
</I>&gt;<i> &gt;&gt;&gt;&gt; getting confused
</I>&gt;<i> &gt;&gt;&gt;&gt; by you having multiple versions installed. Do you have any other
</I>&gt;<i> &gt;&gt;&gt;&gt; versions
</I>&gt;<i> &gt;&gt;&gt;&gt; of Python installed, such as in /usr/local/bin, even perhaps a
</I>&gt;<i> &gt;&gt;&gt;&gt; symlink there
</I>&gt;<i> &gt;&gt;&gt;&gt; pointing to python2.3.
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt; Any chance of upgrading to Apache 2.2 and mod_python 3.2.10?
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt; Graham
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt; On 08/08/2006, at 5:24 PM, yeqiwei wrote:
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; My os is Ubuntu 6.06.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; Apache is 1.3.34
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; mod_python is 2.7.10
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; python 2.4.1a0
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; I install these software using the apt-get install command.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; apache documentroot is /var/www. And I make a dir test.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; in http.conf, I write this:
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; &lt;Directory /var/www/test&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; 		AddHandler python-program  .py
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; 		PythonHandler mptest
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;         PYtohnDebug On
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; &lt;/Directory&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; and in the modules.conf
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; LoadModule  python_module /usr/lib/apache/1.3/mod_python
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; in /var/www/test, I put a mptest.py file the content is
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; from mod_python import apache
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; def handler(req):
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;     req.send_http_header()
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;     req.write(&quot;Hello World!&quot;)
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;     return apache.OK
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; when I point to <A HREF="http://127.0.0.l/test/mptest.py,">http://127.0.0.l/test/mptest.py,</A>  get the 500
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; Internal Server Error
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; And I check the apache error.log,fount that
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; make_obcallback():could not import mod_python.apache
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; make_obcallback():could not call init
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; ........python_handler: make_obcallback returned no obCallBack!
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; I have install python2.3 and python 2.4,but the /usr/bin/python is
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; linked to
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; the /usr/bin/python2.4.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; And I run mptest.py in shell, the error information is that:
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; Traceback (most recent call last)
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;  File &quot;/var/www/test/mptest.py&quot;,line 1, in ?
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;    from mod_python import apache
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;  File &quot;/usr/lib/python2.4/site-packages/mod_python/apache.py&quot;,line
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; 55 in ?
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;    import _apache
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; ImportError: No module named _apache
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; How can I solve this problem?
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; _______________________________________________
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; Mod_python mailing list
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>-- 
Dr Robert Sanderson
Dept of Computer Science, University of Liverpool
Home:     <A HREF="http://www.csc.liv.ac.uk/~azaroth/">http://www.csc.liv.ac.uk/~azaroth/</A>
Cheshire: <A HREF="http://www.cheshire3.org/">http://www.cheshire3.org/</A>

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021772.html">[mod_python] Re: \\[mod_python\\] In ubuntu 6\\.06\\!
	make_obcallback\\(\\): could not import mod_python\\.apache
</A></li>
	<LI>Next message: <A HREF="021774.html">[mod_python] update from 3.2.8 to 3.2.10
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21773">[ date ]</a>
              <a href="thread.html#21773">[ thread ]</a>
              <a href="subject.html#21773">[ subject ]</a>
              <a href="author.html#21773">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
