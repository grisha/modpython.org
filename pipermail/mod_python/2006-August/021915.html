<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] http response code
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20http%20response%20code&In-Reply-To=44EAB16A.2090800%40cern.ch">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021914.html">
   <LINK REL="Next"  HREF="021917.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] http response code</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20http%20response%20code&In-Reply-To=44EAB16A.2090800%40cern.ch"
       TITLE="[mod_python] http response code">grahamd at dscpl.com.au
       </A><BR>
    <I>Tue Aug 22 04:27:55 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021914.html">[mod_python] http response code
</A></li>
        <LI>Next message: <A HREF="021917.html">[mod_python] http response code
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21915">[ date ]</a>
              <a href="thread.html#21915">[ thread ]</a>
              <a href="subject.html#21915">[ subject ]</a>
              <a href="author.html#21915">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 22/08/2006, at 5:25 PM, Ricardo Rocha wrote:

&gt;<i> Hi all.
</I>&gt;<i>
</I>&gt;<i> I'm not really sure if this is a mod_python or apache question, but  
</I>&gt;<i> i'll give it a try anyway. My setup is Apache 2.0.55 with  
</I>&gt;<i> mod_python 3.2.
</I>&gt;<i>
</I>&gt;<i> I've been looking for a way to send additional error messages along  
</I>&gt;<i> with the HTTP error codes. The first thing i did was to remove the  
</I>&gt;<i> default apache error messages by adding the following directives to  
</I>&gt;<i> the apache config:
</I>&gt;<i> ErrorDocument 400 &quot; &quot;
</I>&gt;<i> ErrorDocument 401 &quot; &quot;
</I>&gt;<i> ErrorDocument 404 &quot; &quot;
</I>&gt;<i> ErrorDocument 406 &quot; &quot;
</I>&gt;<i> ErrorDocument 409 &quot; &quot;
</I>&gt;<i> ErrorDocument 500 &quot; &quot;
</I>&gt;<i> ErrorDocument 501 &quot; &quot;
</I>&gt;<i>
</I>&gt;<i> Then i was hoping that returning the proper HTTP code from the  
</I>&gt;<i> handler would do it... and it does, as long as i haven't written  
</I>&gt;<i> anything back to the client before.
</I>&gt;<i>
</I>&gt;<i> If i do write something back inside the handler, if i try to return  
</I>&gt;<i> apache.HTTP_BAD_REQUEST (for example), it will always give a 200  
</I>&gt;<i> HTTP_OK code back to the client, along with the response text.
</I>&gt;<i>
</I>&gt;<i> Is there a way to overcome this and have both a response being  
</I>&gt;<i> written back and a specific HTTP code being returned?
</I>
Use:

   def handler(req):
     req.status = apache.HTTP_BAD_REQUEST
     req.content_type = 'text/html'
     req.write(....)
     return apache.DONE

Setting req.status and req.content_type must be done before first  
write as
you found at.

Setting req.status and returning apache.DONE is key as that is what  
tells
Apache not to format its own error response.

Graham
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021914.html">[mod_python] http response code
</A></li>
	<LI>Next message: <A HREF="021917.html">[mod_python] http response code
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21915">[ date ]</a>
              <a href="thread.html#21915">[ thread ]</a>
              <a href="subject.html#21915">[ subject ]</a>
              <a href="author.html#21915">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
