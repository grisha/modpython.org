<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] get_options() in apache module
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20get_options%28%29%20in%20apache%20module&In-Reply-To=778770d80608090253p2c87d7d5q68b752b189b489d2%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021767.html">
   <LINK REL="Next"  HREF="021769.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] get_options() in apache module</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20get_options%28%29%20in%20apache%20module&In-Reply-To=778770d80608090253p2c87d7d5q68b752b189b489d2%40mail.gmail.com"
       TITLE="[mod_python] get_options() in apache module">grahamd at dscpl.com.au
       </A><BR>
    <I>Wed Aug  9 06:14:20 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021767.html">[mod_python] get_options() in apache module
</A></li>
        <LI>Next message: <A HREF="021769.html">[mod_python] get_options() in apache module
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21768">[ date ]</a>
              <a href="thread.html#21768">[ thread ]</a>
              <a href="subject.html#21768">[ subject ]</a>
              <a href="author.html#21768">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Note though that apache._server in mod_python 3.2.10 possibly has a bug
in it, in that it may use the server object for the first virtual  
host accessed and not
the main server object. This was fixed in 3.3 as is mentioned under:

  <A HREF="http://issues.apache.org/jira/browse/MODPYTHON-144">http://issues.apache.org/jira/browse/MODPYTHON-144</A>

If you are going to rely on this, you might consider backporting the  
patches
from mod_python 3.3.

Graham

On 09/08/2006, at 7:53 PM, Alex Greif wrote:

&gt;<i> the apache._server.get_config() works fine
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i> Alex.
</I>&gt;<i>
</I>&gt;<i> On 8/9/06, Graham Dumpleton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">grahamd at dscpl.com.au</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On 09/08/2006, at 5:28 PM, Alex Greif wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; Hi,
</I>&gt;&gt;<i> &gt; in the docs I only find req.get_options()
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; But I need access to the options before the first request.
</I>&gt;&gt;<i> &gt; Is there a similar method in the  apache object? Unfortunately I  
</I>&gt;&gt;<i> did
</I>&gt;&gt;<i> &gt; not find one
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; &lt;Directory ...&gt;
</I>&gt;&gt;<i> &gt;  SetHandler mod_python
</I>&gt;&gt;<i> &gt;  PythonHandler mod_python.publisher
</I>&gt;&gt;<i> &gt;  PythonOption key &quot;value&quot;                       &lt;---- this one
</I>&gt;&gt;<i> &gt; &lt;/Directory&gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; The workaround I use now is to start apache with a -D and then call
</I>&gt;&gt;<i> &gt; apache.exists_config_define()
</I>&gt;&gt;<i> &gt; But for my needs this is a smelling workaround :((
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; So a apache.get_options() would be the best because the options are
</I>&gt;&gt;<i> &gt; global anyway, so I dont understand why access to them is only
</I>&gt;&gt;<i> &gt; possible through the request object
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> When you use req.get_options() the result is the combination of all
</I>&gt;&gt;<i> options
</I>&gt;&gt;<i> from global scope, through VirtualHost, Directory/Location/Files
</I>&gt;&gt;<i> and .htaccess
</I>&gt;&gt;<i> files which are relevant to the target of the request.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thus req.get_options() would already return the specific PythonOption
</I>&gt;&gt;<i> your
</I>&gt;&gt;<i> mail points at when executed from within a handler.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> There is also req.connection.base_server.get_options() which  
</I>&gt;&gt;<i> equates to
</I>&gt;&gt;<i> the combination of options down to VirtualHost level. This will not
</I>&gt;&gt;<i> contain
</I>&gt;&gt;<i> any overrides for specific options inside of Directory/Location/Files
</I>&gt;&gt;<i> directives
</I>&gt;&gt;<i> or .htaccess file relevant to the specific request.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> In mod_python 3.2.10, there is also req.server.get_options(). This is
</I>&gt;&gt;<i> similar to req.get_options(), but returns only the options defined at
</I>&gt;&gt;<i> global
</I>&gt;&gt;<i> scope within the Apache configuration. That is, outside of the
</I>&gt;&gt;<i> context of
</I>&gt;&gt;<i> any VirtualHost, Location, Directory or Files directives.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> In mod_python 3.3, one will also be able to access the main server
</I>&gt;&gt;<i> object
</I>&gt;&gt;<i> through apache.main_server. Thus apache.main_server.get_options()  
</I>&gt;&gt;<i> will
</I>&gt;&gt;<i> return the same as req.server.get_options() except that since it is
</I>&gt;&gt;<i> in the apache
</I>&gt;&gt;<i> module it can be used at global scope within modules at the time they
</I>&gt;&gt;<i> are
</I>&gt;&gt;<i> being imported.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The apache.main_server object in mod_python 3.3 did exist in  
</I>&gt;&gt;<i> mod_python
</I>&gt;&gt;<i> 3.2.10, but was called apache._server and wasn't officially part of
</I>&gt;&gt;<i> the public
</I>&gt;&gt;<i> API at that point.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thus apache.main_server may be what you want if you mean to be  
</I>&gt;&gt;<i> able to
</I>&gt;&gt;<i> access it outside of any handler (before a request arrives), but your
</I>&gt;&gt;<i> PythonOption
</I>&gt;&gt;<i> must be at global scope, not within the Directory directive as you
</I>&gt;&gt;<i> have it.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Graham
</I>&gt;&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021767.html">[mod_python] get_options() in apache module
</A></li>
	<LI>Next message: <A HREF="021769.html">[mod_python] get_options() in apache module
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21768">[ date ]</a>
              <a href="thread.html#21768">[ thread ]</a>
              <a href="subject.html#21768">[ subject ]</a>
              <a href="author.html#21768">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
