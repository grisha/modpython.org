<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Setting req-&gt;user for mod_dav_svn
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Setting%20req-%3Euser%20for%20mod_dav_svn&In-Reply-To=1154385180.32375%40dscpl.user.openhosting.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021702.html">
   <LINK REL="Next"  HREF="021701.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Setting req-&gt;user for mod_dav_svn</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Deron Meranda</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Setting%20req-%3Euser%20for%20mod_dav_svn&In-Reply-To=1154385180.32375%40dscpl.user.openhosting.com"
       TITLE="[mod_python] Setting req-&gt;user for mod_dav_svn">deron.meranda at gmail.com
       </A><BR>
    <I>Tue Aug  1 01:45:38 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021702.html">[mod_python] Background threads in mod_python
</A></li>
        <LI>Next message: <A HREF="021701.html">[mod_python] Setting req-&gt;user for mod_dav_svn
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21700">[ date ]</a>
              <a href="thread.html#21700">[ thread ]</a>
              <a href="subject.html#21700">[ subject ]</a>
              <a href="author.html#21700">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 7/31/06, Graham Dumpleton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">grahamd at dscpl.com.au</A>&gt; wrote:
&gt;<i> Deron Meranda wrote ..
</I>&gt;<i> &gt; I am using a PythonAccessHandler for all my authentication and
</I>&gt;<i> &gt; authorization needs; ...
</I>&gt;<i>
</I>&gt;<i> Are you using PythonAccessHandler at same time as PythonHandler?
</I>&gt;<i> Aren't you seeing the hideously bad memory leak finally uncovered
</I>&gt;<i> in the past day?
</I>
Yes, I use both, but I haven't really investigated if the leak bug is
hitting me yet.  I will look.  All of my requests go through a
PythonAccessHandler, and probably about 80% of them also go through
PythonHandler.  For some URLs I also use a multiple chained handler,
something like

  PythonAccessHandler one::accesshandler
  PythonHandler one::handler two::handler

The two phases communicate by pushing extra custom members into the
mod_python req object.  I also have a mix of different
PythonInterpreters too.

&gt;<i> &gt; But I'm now trying to set up a subversion mod_dav_svn module...
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Can I set the req-&gt;user member from within mod_python (the docs
</I>&gt;<i> &gt; say it is read-only),
</I>&gt;<i>
</I>&gt;<i> In 3.2.8+ it is writable, the documentation is wrong. The documentation
</I>&gt;<i> in 3.3 is correct.
</I>
Yes, after looking through the code I noticed it was a writable
member.  But I still had some doubt that I was overlooking something
because of the docs.  I should be able to verify tomorrow if this is
enough for mod_dav_svn.

&gt;<i> Using 3.2.10, you will have to continue to use an PythonAccessHandler to do
</I>&gt;<i> what you want anyway, as it is impossible with mod_python prior to 3.3 to write
</I>&gt;<i> a correct authentication handler in the style that they are supposed to be
</I>&gt;<i> written when using Apache.
</I>
Yes, I am aware of the many missing features and am glad you've been
working so hard adding those in.  Of course I'll also want to
eventually migrate up to Apache 2.2 as well.  The more modular auth
stuff, and its provider hooks, look quite useful.

&gt;<i> Anyway, the only place I can think you might have problems is if subversion
</I>&gt;<i> expects req.ap_auth_type to be set correctly as you will not have that ability
</I>&gt;<i> when using mod_python 3.2.10.
</I>
I don't think svn cares about the auth_type, but I'll find out soon enough.

There's a second, optional, subversion module mod_authz_svn which
provides fine grained access control for different branches, etc.  I
don't know how mod_python may interact with it (especially since it
runs during the authz phase too).  But at least in my case that's not
too important; because my own mod_python handler can do all the access
control decisions I need.

Thanks Graham.
-- 
Deron Meranda
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021702.html">[mod_python] Background threads in mod_python
</A></li>
	<LI>Next message: <A HREF="021701.html">[mod_python] Setting req-&gt;user for mod_dav_svn
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21700">[ date ]</a>
              <a href="thread.html#21700">[ thread ]</a>
              <a href="subject.html#21700">[ subject ]</a>
              <a href="author.html#21700">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
