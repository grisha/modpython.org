<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Setting req-&gt;user for mod_dav_svn
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Setting%20req-%3Euser%20for%20mod_dav_svn&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021700.html">
   <LINK REL="Next"  HREF="021703.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Setting req-&gt;user for mod_dav_svn</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Setting%20req-%3Euser%20for%20mod_dav_svn&In-Reply-To="
       TITLE="[mod_python] Setting req-&gt;user for mod_dav_svn">grahamd at dscpl.com.au
       </A><BR>
    <I>Tue Aug  1 02:04:57 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021700.html">[mod_python] Setting req-&gt;user for mod_dav_svn
</A></li>
        <LI>Next message: <A HREF="021703.html">[mod_python] Setting req-&gt;user for mod_dav_svn
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21701">[ date ]</a>
              <a href="thread.html#21701">[ thread ]</a>
              <a href="subject.html#21701">[ subject ]</a>
              <a href="author.html#21701">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Deron Meranda wrote ..
&gt;<i> On 7/31/06, Graham Dumpleton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">grahamd at dscpl.com.au</A>&gt; wrote:
</I>&gt;<i> &gt; Deron Meranda wrote ..
</I>&gt;<i> &gt; &gt; I am using a PythonAccessHandler for all my authentication and
</I>&gt;<i> &gt; &gt; authorization needs; ...
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Are you using PythonAccessHandler at same time as PythonHandler?
</I>&gt;<i> &gt; Aren't you seeing the hideously bad memory leak finally uncovered
</I>&gt;<i> &gt; in the past day?
</I>&gt;<i> 
</I>&gt;<i> Yes, I use both, but I haven't really investigated if the leak bug is
</I>&gt;<i> hitting me yet.  I will look.  All of my requests go through a
</I>&gt;<i> PythonAccessHandler, and probably about 80% of them also go through
</I>&gt;<i> PythonHandler.
</I>
You should see the memory leak occur for any which make it through to
the PythonHandler. From memory you are on dev list as well, but bug report
URL with change is at:

  <A HREF="https://issues.apache.org/jira/browse/MODPYTHON-181">https://issues.apache.org/jira/browse/MODPYTHON-181</A>

For about 5000 requests I would see memory use balloon from 5MB to 10MB
so leak was pretty severe.

&gt;<i> For some URLs I also use a multiple chained handler,
</I>&gt;<i> something like
</I>&gt;<i> 
</I>&gt;<i>   PythonAccessHandler one::accesshandler
</I>&gt;<i>   PythonHandler one::handler two::handler
</I>
The chained/stacked handlers within a single phase don't provide any
additional problems.

&gt;<i> &gt; Using 3.2.10, you will have to continue to use an PythonAccessHandler
</I>&gt;<i> to do
</I>&gt;<i> &gt; what you want anyway, as it is impossible with mod_python prior to 3.3
</I>&gt;<i> to write
</I>&gt;<i> &gt; a correct authentication handler in the style that they are supposed
</I>&gt;<i> to be
</I>&gt;<i> &gt; written when using Apache.
</I>&gt;<i> 
</I>&gt;<i> Yes, I am aware of the many missing features and am glad you've been
</I>&gt;<i> working so hard adding those in.  Of course I'll also want to
</I>&gt;<i> eventually migrate up to Apache 2.2 as well.  The more modular auth
</I>&gt;<i> stuff, and its provider hooks, look quite useful.
</I>
Hmmm, in the interests of getting out 3.3 sooner rather than later I was
probably going to defer trying to work in any support for auth providers,
although it is still very tempting cause they look quite useful as you say.

If I try to implement anything, I'd probably tackle first the ability for a
Python authentication handler to use a distinct auth provider. That way
you can easily use an existing mod_auth_ldap module within a Python
implemented form/session based login mechanism. This seems more
useful to me first up than making it possible to implement an auth
provider in Python and may encourage Python users to use some of
the existing and proven auth providers available for Apache and not
roll their own.

&gt;<i> There's a second, optional, subversion module mod_authz_svn which
</I>&gt;<i> provides fine grained access control for different branches, etc.  I
</I>&gt;<i> don't know how mod_python may interact with it (especially since it
</I>&gt;<i> runs during the authz phase too).  But at least in my case that's not
</I>&gt;<i> too important; because my own mod_python handler can do all the access
</I>&gt;<i> control decisions I need.
</I>
My understanding is that mod_authz_svn would base everything off the
req.user when matching up to stuff in the svnserve.conf file you point it
at. Thus see no problems with using mod_authz_svn.

Graham
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021700.html">[mod_python] Setting req-&gt;user for mod_dav_svn
</A></li>
	<LI>Next message: <A HREF="021703.html">[mod_python] Setting req-&gt;user for mod_dav_svn
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21701">[ date ]</a>
              <a href="thread.html#21701">[ thread ]</a>
              <a href="subject.html#21701">[ subject ]</a>
              <a href="author.html#21701">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
