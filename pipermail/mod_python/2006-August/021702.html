<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Background threads in mod_python
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Background%20threads%20in%20mod_python&In-Reply-To=44CEE794.7030503%40natlab.research.philips.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021699.html">
   <LINK REL="Next"  HREF="021700.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Background threads in mod_python</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Deron Meranda</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Background%20threads%20in%20mod_python&In-Reply-To=44CEE794.7030503%40natlab.research.philips.com"
       TITLE="[mod_python] Background threads in mod_python">deron.meranda at gmail.com
       </A><BR>
    <I>Tue Aug  1 02:20:31 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021699.html">[mod_python] Background threads in mod_python
</A></li>
        <LI>Next message: <A HREF="021700.html">[mod_python] Setting req-&gt;user for mod_dav_svn
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21702">[ date ]</a>
              <a href="thread.html#21702">[ thread ]</a>
              <a href="subject.html#21702">[ subject ]</a>
              <a href="author.html#21702">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> So, why not just let the client wait for the data? Neither server nor client have any objection
</I>&gt;<i> keeping a connection open for an hour or longer. Some proxies will appreciate it if you send some
</I>&gt;<i> data every now and then.
</I>
Of course if the connection is just sitting idle you'll be wasting a
lot of expensive resources too (namely the open socket and Apache
process/thread slot).  If you find yourself in this situation, then it
is really when you're departing from the native semantics of HTTP
(which doesn't mean its wrong, just that you may need something
different from HTTP).

The way to cobble this onto HTTP of course is to use one request to
initiate a background task, and subsequent request(s) to poll for the
result.  (This is where Ajax techniques can hide this cobbled approach
from the user so it appears seamless even though it's not).  It's not
perfect and far from the most efficient way, but it can be made to
work.  When mixing with the pure Apache architecture though, you're
best served if that background task is done in an independent process
than Apache itself.

Of course if you are really doing this sort of complex communications
a lot, perhaps HTTP just isn't the best fit.  Perhaps it might be just
enough to use something a little less HTTP-pure than Apache; such as a
standalone Twisted server or similar.  Or even something more serious
like CORBA (or any of the newer re-inventions of it) may be worth
investigating.  Those technologies often provide much better
asynchronous service models--which anything layered on top of HTTP
(including &quot;web services&quot;) can never do as well.

&gt;<i> There's more to security than authentication.
</I>&gt;<i> ...
</I>&gt;<i> Further, by restricting access to the DB so that only the &quot;business
</I>&gt;<i> layer&quot; web service can access it, it is impossible to retrieve
</I>&gt;<i> sensitive information from the system, even if the web server is
</I>&gt;<i> compromised.
</I>
Sometimes this separation is even necessary.  For instance I run with
a rather strict SELinux environment (which is the Linux version of
Mandatory Access Control (MAC)).  The OS kernel actually prevents my
Apache process (and hence my mod_python handlers) from accessing most
of the system's resources.  Apache can't for instance actually touch
the database, except through a very narrow (security-wise) IPC
channel.  Likewise for many other resources like filesystems.  So I'm
actually forced to put background tasks (synchronous or not) into a
separate process.
-- 
Deron Meranda
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021699.html">[mod_python] Background threads in mod_python
</A></li>
	<LI>Next message: <A HREF="021700.html">[mod_python] Setting req-&gt;user for mod_dav_svn
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21702">[ date ]</a>
              <a href="thread.html#21702">[ thread ]</a>
              <a href="subject.html#21702">[ subject ]</a>
              <a href="author.html#21702">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
