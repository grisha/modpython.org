<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Publisher + PSP + Sessions?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Publisher%20%2B%20PSP%20%2B%20Sessions%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021949.html">
   <LINK REL="Next"  HREF="021951.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Publisher + PSP + Sessions?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Publisher%20%2B%20PSP%20%2B%20Sessions%3F&In-Reply-To="
       TITLE="[mod_python] Publisher + PSP + Sessions?">grahamd at dscpl.com.au
       </A><BR>
    <I>Tue Aug 29 18:07:10 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021949.html">[mod_python] Publisher + PSP + Sessions?
</A></li>
        <LI>Next message: <A HREF="021951.html">[mod_python] session object error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21950">[ date ]</a>
              <a href="thread.html#21950">[ thread ]</a>
              <a href="subject.html#21950">[ subject ]</a>
              <a href="author.html#21950">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Fredrik Sandin wrote ..
&gt;<i> Hello!
</I>&gt;<i> 
</I>&gt;<i> Given the following configuration
</I>&gt;<i> 
</I>&gt;<i> &lt;Directory &quot;...&quot;&gt;
</I>&gt;<i>      ...
</I>&gt;<i>      SetHandler mod_python
</I>&gt;<i>      PythonHandler mod_python.publisher
</I>&gt;<i> &lt;/Directory&gt;
</I>&gt;<i> 
</I>&gt;<i> and a template loading meachanism similar to the one in
</I>&gt;<i> the example on the modpython homepage:
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://www.modpython.org/examples/psp_site/">http://www.modpython.org/examples/psp_site/</A>
</I>&gt;<i> 
</I>&gt;<i> how to access the session (dictionary) outside the psp
</I>&gt;<i> templates?
</I>&gt;<i> 
</I>&gt;<i> Within a psp template it is possible to write
</I>&gt;<i> 
</I>&gt;<i> &lt;%
</I>&gt;<i> if not session.has_key('myvar'):
</I>&gt;<i>      session['myvar'] = 0 # Default value
</I>&gt;<i> %&gt;
</I>&gt;<i> 
</I>&gt;<i> However, since the idea is to separate the template from
</I>&gt;<i> the logic, I would prefer to do this in the python function.
</I>&gt;<i> Example, inside myhandler.py:
</I>&gt;<i> 
</I>&gt;<i> def index(req):
</I>&gt;<i>      if not X.has_key('myvar'):
</I>&gt;<i>          X['myvar'] = 0 # Default value
</I>&gt;<i>      return _build_page(req, template='index')
</I>&gt;<i> 
</I>&gt;<i> How to define X such that session['myvar'] will be defined
</I>&gt;<i> inside the psp template for the index page?
</I>
If you are using mod_python 3.2.8 or later, you can say:

  def index(req):
       req.session = Session.Session(req)
       if not req.session.has_key('myvar'):
           req.session['myvar'] = 0 # Default value
       return _build_page(req, template='index')

Ie., PSP will use the session object you create and store in the request object as
req.session.

You still access the session object the same in the PSP page template. Ie., as
'session'. No need to reference it as 'req.session' in PSP page.

Graham
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021949.html">[mod_python] Publisher + PSP + Sessions?
</A></li>
	<LI>Next message: <A HREF="021951.html">[mod_python] session object error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21950">[ date ]</a>
              <a href="thread.html#21950">[ thread ]</a>
              <a href="subject.html#21950">[ subject ]</a>
              <a href="author.html#21950">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
