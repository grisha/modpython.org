<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] server shutdown [was] i beg...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20server%20shutdown%20%5Bwas%5D%20i%20beg...&In-Reply-To=1155681100.18799%40dscpl.user.openhosting.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021853.html">
   <LINK REL="Next"  HREF="021869.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] server shutdown [was] i beg...</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Richard Lewis</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20server%20shutdown%20%5Bwas%5D%20i%20beg...&In-Reply-To=1155681100.18799%40dscpl.user.openhosting.com"
       TITLE="[mod_python] server shutdown [was] i beg...">richardlewis at fastmail.co.uk
       </A><BR>
    <I>Fri Aug 18 05:48:52 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021853.html">[mod_python] i beg the developers to make mod_python can beimport
	in python command line.
</A></li>
        <LI>Next message: <A HREF="021869.html">[mod_python] server shutdown [was] i beg...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21868">[ date ]</a>
              <a href="thread.html#21868">[ thread ]</a>
              <a href="subject.html#21868">[ subject ]</a>
              <a href="author.html#21868">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tuesday 15 August 2006 23:31, Graham Dumpleton wrote:
&gt;<i> Richard Lewis wrote ..
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Do you mean that there will be no opportunity to have code run at server
</I>&gt;<i> &gt; shutdown?
</I>&gt;<i>
</I>&gt;<i> Correct. Reason being that it doesn't actually work most of the time
</I>&gt;<i> anyway.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Because of how Apache is implemented, there is no reliable/safe way of
</I>&gt;<i> implementing this feature. If one can't do it properly, it seems better not
</I>&gt;<i> to attempt it at all.
</I>&gt;<i>
</I>Goodness! So, in my mod_python applications I often acquire database handles 
and store them in objects outside of the handler() function so that they 
persist between requests. (This is to avoid the expense of acquiring a new 
handle for every request). I then use a cleanup() function to release those 
database handles.

The implication of this is that I will no longer be able to release the 
handles at server shutdown, yes? Can anyone suggest an alternative method of 
doing this? Are there any Python tricks where you can execute code when the 
interpreter itself is about to stop? Or could I have a Python script running 
in another process which &quot;looks in&quot; to the mod_python process and 
periodically cleanly releases database handles?

Cheers,
Richard
-- 
-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
Richard Lewis
Sonic Arts Research Archive
<A HREF="http://www.sara.uea.ac.uk/">http://www.sara.uea.ac.uk/</A>
JID: <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">ironchicken at jabber.earth.li</A>
-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021853.html">[mod_python] i beg the developers to make mod_python can beimport
	in python command line.
</A></li>
	<LI>Next message: <A HREF="021869.html">[mod_python] server shutdown [was] i beg...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21868">[ date ]</a>
              <a href="thread.html#21868">[ thread ]</a>
              <a href="subject.html#21868">[ subject ]</a>
              <a href="author.html#21868">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
