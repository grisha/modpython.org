<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Problem building apache+mod_python on AIX
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Problem%20building%20apache%2Bmod_python%20on%20AIX&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008025.html">
   <LINK REL="Next"  HREF="008021.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
<table border=0 width="100%"><tr><td valign="top">
   <H1>[mod_python] Problem building apache+mod_python on AIX</H1>
    <B>Serier, Kees</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Problem%20building%20apache%2Bmod_python%20on%20AIX&In-Reply-To="
       TITLE="[mod_python] Problem building apache+mod_python on AIX">kees.serier at relan.nl
       </A><BR>
    <I>Wed Mar 14 16:50:28 EST 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="008025.html">[mod_python] any production systems out there?
</A></li>
        <LI>Next message: <A HREF="008021.html">[mod_python] PythonImport failure
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8018">[ date ]</a>
              <a href="thread.html#8018">[ thread ]</a>
              <a href="subject.html#8018">[ subject ]</a>
              <a href="author.html#8018">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I have the following problem with building apache 1.3.19 with mod_python
2.7.2 on AIX 4.2.1
I had the same problem with apache 1.3.14 and mod_python 2.7.1, never got it
running,
but gave it a new try with gcc 2.95.2
I rebuild everything with gcc:
- python 1.5.2
- apache 1.3.19
- mod_python 2.7.2
When rebuilding apache with mod_pyhton, I got Undefined symbol errors from
ld
=============
This is what I did:

Apache 1.3.19:
-------------
   ./configure (default without DSO)
   gmake
   gmake install
   Testing: worked fine (as dit 1.3.14) with CGI and python

Python 1.5.2
------------
   ./configure
   gmake
   gmake test
   gmake install
   Testing with apache 1.3.19 and CGI: worked fine

mod_python 2.7.2:
   ./configure --with-apache=../apache_1.3.19 --with-python=../Python-1.5.2/
   gmake
   gmake install
   
apache 1.3.19:
    cd  /usr/local/src/apache_1.3.19
    ./configure --activate-module=src/modules/python/libpython.a
    gmake
==================
Here follows the last of stdout and stderr:

gmake[4]: Entering directory
`/usr/local/src/apache_1.3.19/src/modules/python'
gmake[4]: Nothing to be done for `all'.
gmake[4]: Leaving directory
`/usr/local/src/apache_1.3.19/src/modules/python'
&lt;=== src/modules/python
gmake[3]: Leaving directory `/usr/local/src/apache_1.3.19/src/modules'
&lt;=== src/modules
gcc -c  -I./os/unix -I./include   -DAIX=42 -U__STR__ -DAIX_BIND_PROCESSOR
-DUSE_HSREGEX -DUSE_EXPAT -I./lib/expat-lite -DNO_DL_NEEDED `./apaci`
modules.c
gcc -c  -I./os/unix -I./include   -DAIX=42 -U__STR__ -DAIX_BIND_PROCESSOR
-DUSE_HSREGEX -DUSE_EXPAT -I./lib/expat-lite -DNO_DL_NEEDED `./apaci`
buildmark.c
gcc  -DAIX=42 -U__STR__ -DAIX_BIND_PROCESSOR -DUSE_HSREGEX -DUSE_EXPAT
-I./lib/expat-lite -DNO_DL_NEEDED `./apaci` -lm   \
      -o httpd buildmark.o modules.o modules/python/libpython.a
modules/standard/libstandard.a main/libmain.a ./os/unix/libos.a ap/libap.a
regex/libregex.a lib/expat-lite/libexpat.a
ld: 0711-317 ERROR: Undefined symbol: .Py_NewInterpreter
ld: 0711-317 ERROR: Undefined symbol: .PyThreadState_Swap
ld: 0711-317 ERROR: Undefined symbol: .PyDict_GetItemString
ld: 0711-317 ERROR: Undefined symbol: .PyCObject_FromVoidPtr
ld: 0711-317 ERROR: Undefined symbol: .PyDict_SetItemString
ld: 0711-317 ERROR: Undefined symbol: .PyCObject_AsVoidPtr
ld: 0711-317 ERROR: Undefined symbol: .PyThreadState_New
ld: 0711-317 ERROR: Undefined symbol: .PyObject_CallFunction
ld: 0711-317 ERROR: Undefined symbol: .PyErr_Fetch
ld: 0711-317 ERROR: Undefined symbol: .PyObject_Str
ld: 0711-317 ERROR: Undefined symbol: .PyString_AsString
ld: 0711-317 ERROR: Undefined symbol: .PyThreadState_Delete
ld: 0711-317 ERROR: Undefined symbol: .Py_GetVersion
ld: 0711-317 ERROR: Undefined symbol: .Py_IsInitialized
ld: 0711-317 ERROR: Undefined symbol: .Py_Initialize
ld: 0711-317 ERROR: Undefined symbol: .PyDict_New
ld: 0711-317 ERROR: Undefined symbol: .PyArg_ParseTuple
ld: 0711-317 ERROR: Undefined symbol: .PyErr_NoMemory
ld: 0711-317 ERROR: Undefined symbol: PyExc_KeyError
ld: 0711-317 ERROR: Undefined symbol: .PyErr_SetObject
ld: 0711-317 ERROR: Undefined symbol: .PyString_FromString
ld: 0711-317 ERROR: Undefined symbol: PyString_Type
ld: 0711-317 ERROR: Undefined symbol: PyExc_TypeError
ld: 0711-317 ERROR: Undefined symbol: .PyErr_SetString
ld: 0711-317 ERROR: Undefined symbol: _Py_NoneStruct
ld: 0711-317 ERROR: Undefined symbol: .PyList_New
ld: 0711-317 ERROR: Undefined symbol: .PyList_SetItem
ld: 0711-317 ERROR: Undefined symbol: .PyInt_FromLong
ld: 0711-317 ERROR: Undefined symbol: .Py_FindMethod
ld: 0711-317 ERROR: Undefined symbol: .PyString_ConcatAndDel
ld: 0711-317 ERROR: Undefined symbol: PyExc_IndexError
ld: 0711-317 ERROR: Undefined symbol: .PyString_FromStringAndSize
ld: 0711-317 ERROR: Undefined symbol: PyExc_IOError
ld: 0711-317 ERROR: Undefined symbol: ._PyString_Resize
ld: 0711-317 ERROR: Undefined symbol: .PyCallable_Check
ld: 0711-317 ERROR: Undefined symbol: PyExc_ValueError
ld: 0711-317 ERROR: Undefined symbol: .PyErr_Clear
ld: 0711-317 ERROR: Undefined symbol: .Py_BuildValue
ld: 0711-317 ERROR: Undefined symbol: .PyMember_Get
ld: 0711-317 ERROR: Undefined symbol: PyExc_AttributeError
ld: 0711-317 ERROR: Undefined symbol: .PyMember_Set
ld: 0711-317 ERROR: Undefined symbol: .PyTuple_New
ld: 0711-317 ERROR: Undefined symbol: .PyTuple_SetItem
ld: 0711-317 ERROR: Undefined symbol: .PyErr_BadArgument
ld: 0711-317 ERROR: Undefined symbol: .PyList_Append
ld: 0711-317 ERROR: Undefined symbol: .PyList_Size
ld: 0711-317 ERROR: Undefined symbol: .PyMapping_HasKeyString
ld: 0711-317 ERROR: Undefined symbol: .PyDict_GetItem
ld: 0711-317 ERROR: Undefined symbol: .PyDict_SetItem
ld: 0711-317 ERROR: Undefined symbol: PyType_Type
ld: 0711-317 ERROR: Undefined symbol: .Py_InitModule4
ld: 0711-317 ERROR: Undefined symbol: .PyModule_GetDict
ld: 0711-317 ERROR: Undefined symbol: .PyErr_NewException
ld: 0711-317 ERROR: Undefined symbol: .PyImport_ImportModule
ld: 0711-317 ERROR: Undefined symbol: .PyObject_CallMethod
ld: 0711-317 ERROR: Undefined symbol: .PyEval_SaveThread
ld: 0711-317 ERROR: Undefined symbol: .PyEval_RestoreThread
ld: 0711-317 ERROR: Undefined symbol: PyInt_Type
ld: 0711-317 ERROR: Undefined symbol: .PyInt_AsLong
ld: 0711-317 ERROR: Undefined symbol: Py_OptimizeFlag
ld: 0711-317 ERROR: Undefined symbol: .Py_Finalize
ld: 0711-317 ERROR: Undefined symbol: .PyObject_GetAttrString
ld: 0711-317 ERROR: Undefined symbol: .PySequence_Index
ld: 0711-317 ERROR: Undefined symbol: .PyList_SetSlice
ld: 0711-317 ERROR: Undefined symbol: .PyErr_Occurred
ld: 0711-317 ERROR: Undefined symbol: .PyErr_Print
ld: 0711-345 Use the -bloadmap or -bnoquiet option to obtain more
information.
collect2: ld returned 8 exit status
gmake[2]: *** [target_static] Error 1
gmake[2]: Leaving directory `/usr/local/src/apache_1.3.19/src'
gmake[1]: *** [build-std] Error 2
gmake[1]: Leaving directory `/usr/local/src/apache_1.3.19'
gmake: *** [build] Error 2

find /usr/local/src -name libpython.a -exec ls -l {} \;
-rwxr-xr-x   1 root     begeer     98020 Mar 14 15:53
./apache_1.3.19/src/modules/python/libpython.a
-rw-r--r--   1 root     beheer     98020 Mar 14 15:53
./mod_python-2.7.2/src/libpython.a


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008025.html">[mod_python] any production systems out there?
</A></li>
	<LI>Next message: <A HREF="008021.html">[mod_python] PythonImport failure
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8018">[ date ]</a>
              <a href="thread.html#8018">[ thread ]</a>
              <a href="subject.html#8018">[ subject ]</a>
              <a href="author.html#8018">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
