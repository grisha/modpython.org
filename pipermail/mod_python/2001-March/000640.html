<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] problem with publisher.py File class w/ possible fix
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20problem%20with%20publisher.py%20File%20class%20w/%20possible%20fix&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000639.html">
   <LINK REL="Next"  HREF="000641.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] problem with publisher.py File class w/ possible fix</H1>
    <B>Marc Fiuczynski</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20problem%20with%20publisher.py%20File%20class%20w/%20possible%20fix&In-Reply-To="
       TITLE="[mod_python] problem with publisher.py File class w/ possible fix">marcf at becomm.com
       </A><BR>
    <I>Wed Mar 21 12:55:55 EST 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="000639.html">[mod_python] apache 1.3.14 + mod_python 2.7.2 + python 2.0/2.1b1 + PyGreSQL 3.
 1 + mxdatetime 2.0
</A></li>
        <LI>Next message: <A HREF="000641.html">[mod_python] problem with auto_reload in apache.py
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#640">[ date ]</a>
              <a href="thread.html#640">[ thread ]</a>
              <a href="subject.html#640">[ subject ]</a>
              <a href="author.html#640">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I am having a problem with the publisher.py File class, which I have fixed,
but I would like your approval.

My configuration is as follows:
mod_python 2.7.2
python 2.0
apache 1.3.14
Red Hat Linux 7.0

I am using mod python to do http_post operations with files.  This uses the
publisher.py File class.  The __init__ method of that class steals all of
the file-like methods, as shown below:

        # steal all the file-like methods
        methods = field.file.__methods__
        for m in methods:
            self.__dict__[m] = methods[m]

I was getting an error in that last line saying that 'm' needed to be an
int.  (Sorry, I forget the actual error).  I found some other code that was
doing the exact same thing and noticed that they were assigning the methods
in a different manner (using setattr).  See below:

        # steal all the file-like methods
        file = field.file
        for method in file.__methods__:
            setattr(self, method, getattr(file, method))

This seems to work.  I am too nascent to Python to understand the history of
the built-in __xyz__ fields in objects, and whether this is something
specific to Python 2.0 versus an older version of Python.  Please review and
if it is the right thing, then feel free to incorporate this change into
your mod_python code base.

Cheers,
Marc


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000639.html">[mod_python] apache 1.3.14 + mod_python 2.7.2 + python 2.0/2.1b1 + PyGreSQL 3.
 1 + mxdatetime 2.0
</A></li>
	<LI>Next message: <A HREF="000641.html">[mod_python] problem with auto_reload in apache.py
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#640">[ date ]</a>
              <a href="thread.html#640">[ thread ]</a>
              <a href="subject.html#640">[ subject ]</a>
              <a href="author.html#640">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
