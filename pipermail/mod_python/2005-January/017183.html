<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Quick question from mod_perl user
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Quick%20question%20from%20mod_perl%20user&In-Reply-To=1f060c4c05012212037d7684cf%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017181.html">
   <LINK REL="Next"  HREF="017184.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Quick question from mod_perl user</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Quick%20question%20from%20mod_perl%20user&In-Reply-To=1f060c4c05012212037d7684cf%40mail.gmail.com"
       TITLE="[mod_python] Quick question from mod_perl user">grahamd at dscpl.com.au
       </A><BR>
    <I>Sat Jan 22 21:35:32 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="017181.html">[mod_python] Quick question from mod_perl user
</A></li>
        <LI>Next message: <A HREF="017184.html">[mod_python] Quick question from mod_perl user
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17183">[ date ]</a>
              <a href="thread.html#17183">[ thread ]</a>
              <a href="subject.html#17183">[ subject ]</a>
              <a href="author.html#17183">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 23/01/2005, at 7:03 AM, snacktime wrote:

&gt;<i> I have an application that I need to write in mod_python, and I was
</I>&gt;<i> curious if global variables persist like they do in mod_perl, or is
</I>&gt;<i> that a non issue with mod_python?
</I>
I am not familiar with mod_perl, and thus not totally clear on what you
mean by &quot;persist&quot; in this particular case, but a global variable within
a module will in mod_python persist across distinct requests.

This global though is only accessible to that specific Python 
interpreter,
thus if using prefork mode of Apache, different processes obviously have
different versions of that global. If in one process, distinct 
interpreters
are created, again each interpreter, each has their own version of that
global.

Obviously, a global does not persist across restarts.

Note that if using a multithreaded MPM with Apache, the global will need
to be adequately threaded protected if access is more than read only.

There are also various issues that need to be dealt with if you enable
module reloading. This is because a global which is setup during module
import will be replaced when a module is reloaded unless you add extra
code to detect when a module reload is occurring and preserve the 
existing
copy of the global data, rather than replacing it.

I have rambled on about issues with globals, module reloading and 
threading
previous on the mailing list. One of these threads was:

   <A HREF="http://www.modpython.org/pipermail/mod_python/2004-October/016605.html">http://www.modpython.org/pipermail/mod_python/2004-October/016605.html</A>

There were possibly other threads as well, so you should search the
mailing list archive on the mod_python web site.

&gt;<i> Also, can I set the handler to use a .pyc file instead of the source
</I>&gt;<i> file (.py) ?  Such as:
</I>&gt;<i>
</I>&gt;<i> AddHandler mod_python .pyc
</I>
The extension for AddHandler isn't referring to the name of the Python 
code
file, but the extension which appears in the request URL. Thus, if you 
have:

   AddHandler mod_python .py
   PythonHandler mymodule

what it means is that if a request URL ends in &quot;.py&quot; extension, then 
your
Python module called &quot;mymodule&quot; will be used.

Because the basic import module mechanism used by mod_python is the 
same as
is used in normal Python imports, it will pick .py, .pyc or even .so 
variants
of modules. Thus, for a .py, if it has already been compiled into .pyc, 
it
will used the compiled module. If the user/group that Apache runs as is 
such
that it has permission to write a file into directory where .py exists, 
if
no .pyc file exists, it will write the compiled file automatically, and 
next
time the module is required, for example after a restart, the compiled 
module
will be used instead.

Graham

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017181.html">[mod_python] Quick question from mod_perl user
</A></li>
	<LI>Next message: <A HREF="017184.html">[mod_python] Quick question from mod_perl user
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17183">[ date ]</a>
              <a href="thread.html#17183">[ thread ]</a>
              <a href="subject.html#17183">[ subject ]</a>
              <a href="author.html#17183">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
