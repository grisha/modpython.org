<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] How do you make a subrequest?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20How%20do%20you%20make%20a%20subrequest%3F&In-Reply-To=819F4FA6-6B16-11D9-81CD-000A95D2D288%40apache.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017167.html">
   <LINK REL="Next"  HREF="017170.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] How do you make a subrequest?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Nicolas Lehuen</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20How%20do%20you%20make%20a%20subrequest%3F&In-Reply-To=819F4FA6-6B16-11D9-81CD-000A95D2D288%40apache.org"
       TITLE="[mod_python] How do you make a subrequest?">nicolas.lehuen at gmail.com
       </A><BR>
    <I>Thu Jan 20 14:52:26 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="017167.html">[mod_python] How do you make a subrequest?
</A></li>
        <LI>Next message: <A HREF="017170.html">[mod_python] How do you make a subrequest?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17169">[ date ]</a>
              <a href="thread.html#17169">[ thread ]</a>
              <a href="subject.html#17169">[ subject ]</a>
              <a href="author.html#17169">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, 20 Jan 2005 11:07:19 -0800, Scott Sanders &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">sanders at apache.org</A>&gt; wrote:
&gt;<i> I don't think that is what req.internal_redirect() does.  I want the
</I>&gt;<i> main request and the sub request to participate in the output, for
</I>&gt;<i> example, a server side include:
</I>&gt;<i> 
</I>&gt;<i> Main request puts out the html header information, then calls a sub
</I>&gt;<i> request to put out the menu html, then the main request takes over
</I>&gt;<i> again and outputs the rest of the page, etc.
</I>&gt;<i> 
</I>&gt;<i> I really need the sub request to return it content to me, and not to
</I>&gt;<i> the user.  With internal_redirect(), the original request loses control
</I>&gt;<i> over the process, when I would like it to participate again.
</I>&gt;<i> 
</I>&gt;<i> Scott
</I>
I wonder if this would be best solved by a mod_python level method
such as req.include_request or by a higher-level page composition
framework.

In the Java world, they solved it by a Portlet framework built above
the Servlet framework, but they may have chosen the high-level route
because it was too late to do thorough changes to the servlet API.

There is a problem if you want to compose pages from &quot;patches&quot; (in the
sense that your page becomes a &quot;patchwork&quot;) built by different
handlers (I assume that's what you mean by &quot;subrequest&quot;). Low-level
handlers are supposed to respond to an HTTP request and build an HTTP
message in response.

Typically, a handler will write on the request output stream. That's
not really a problem if you call the subrequest handlers at the
precise place you want them inserted into the patchwork, but there
still remains a problem with HTTP headers. So you could build a mock
request object, ask mod_python for the proper handler for a given
internal URI, run it with the mock request object and decide what you
do with its output HTTP headers and the generated content (typically,
discard the HTTP headers other than Set-Cookie and output the content
on the connection).

It could work, but it feels a bit like a hack, and I think that's why
the Java people opted for an independent content composition framework
(the Portlet API).

On the other hand, you can already do what you want by yourself,
without touching any part of mod_python, just by putting your various
patches in shared modules, importing those modules in the various
published modules or PSP pages, call your patches and expect them to
return a string to be included in your current document. What's the
problem with this approach ?

Regards,
Nicolas
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017167.html">[mod_python] How do you make a subrequest?
</A></li>
	<LI>Next message: <A HREF="017170.html">[mod_python] How do you make a subrequest?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17169">[ date ]</a>
              <a href="thread.html#17169">[ thread ]</a>
              <a href="subject.html#17169">[ subject ]</a>
              <a href="author.html#17169">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
