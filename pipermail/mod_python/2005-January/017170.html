<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] How do you make a subrequest?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20How%20do%20you%20make%20a%20subrequest%3F&In-Reply-To=c298f2d705012011527762de6e%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017169.html">
   <LINK REL="Next"  HREF="017161.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] How do you make a subrequest?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Nick</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20How%20do%20you%20make%20a%20subrequest%3F&In-Reply-To=c298f2d705012011527762de6e%40mail.gmail.com"
       TITLE="[mod_python] How do you make a subrequest?">nick at dd.revealed.net
       </A><BR>
    <I>Thu Jan 20 15:03:07 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="017169.html">[mod_python] How do you make a subrequest?
</A></li>
        <LI>Next message: <A HREF="017161.html">[mod_python] mptest.py works, other .py files don't
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17170">[ date ]</a>
              <a href="thread.html#17170">[ thread ]</a>
              <a href="subject.html#17170">[ subject ]</a>
              <a href="author.html#17170">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>You could just use urllib(2) to make requests back to the server to get the 
output from the page you want.  Not pretty, but it'll get the job done.

Nick

Nicolas Lehuen wrote:
&gt;<i> On Thu, 20 Jan 2005 11:07:19 -0800, Scott Sanders &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">sanders at apache.org</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i>I don't think that is what req.internal_redirect() does.  I want the
</I>&gt;&gt;<i>main request and the sub request to participate in the output, for
</I>&gt;&gt;<i>example, a server side include:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Main request puts out the html header information, then calls a sub
</I>&gt;&gt;<i>request to put out the menu html, then the main request takes over
</I>&gt;&gt;<i>again and outputs the rest of the page, etc.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>I really need the sub request to return it content to me, and not to
</I>&gt;&gt;<i>the user.  With internal_redirect(), the original request loses control
</I>&gt;&gt;<i>over the process, when I would like it to participate again.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Scott
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> I wonder if this would be best solved by a mod_python level method
</I>&gt;<i> such as req.include_request or by a higher-level page composition
</I>&gt;<i> framework.
</I>&gt;<i> 
</I>&gt;<i> In the Java world, they solved it by a Portlet framework built above
</I>&gt;<i> the Servlet framework, but they may have chosen the high-level route
</I>&gt;<i> because it was too late to do thorough changes to the servlet API.
</I>&gt;<i> 
</I>&gt;<i> There is a problem if you want to compose pages from &quot;patches&quot; (in the
</I>&gt;<i> sense that your page becomes a &quot;patchwork&quot;) built by different
</I>&gt;<i> handlers (I assume that's what you mean by &quot;subrequest&quot;). Low-level
</I>&gt;<i> handlers are supposed to respond to an HTTP request and build an HTTP
</I>&gt;<i> message in response.
</I>&gt;<i> 
</I>&gt;<i> Typically, a handler will write on the request output stream. That's
</I>&gt;<i> not really a problem if you call the subrequest handlers at the
</I>&gt;<i> precise place you want them inserted into the patchwork, but there
</I>&gt;<i> still remains a problem with HTTP headers. So you could build a mock
</I>&gt;<i> request object, ask mod_python for the proper handler for a given
</I>&gt;<i> internal URI, run it with the mock request object and decide what you
</I>&gt;<i> do with its output HTTP headers and the generated content (typically,
</I>&gt;<i> discard the HTTP headers other than Set-Cookie and output the content
</I>&gt;<i> on the connection).
</I>&gt;<i> 
</I>&gt;<i> It could work, but it feels a bit like a hack, and I think that's why
</I>&gt;<i> the Java people opted for an independent content composition framework
</I>&gt;<i> (the Portlet API).
</I>&gt;<i> 
</I>&gt;<i> On the other hand, you can already do what you want by yourself,
</I>&gt;<i> without touching any part of mod_python, just by putting your various
</I>&gt;<i> patches in shared modules, importing those modules in the various
</I>&gt;<i> published modules or PSP pages, call your patches and expect them to
</I>&gt;<i> return a string to be included in your current document. What's the
</I>&gt;<i> problem with this approach ?
</I>&gt;<i> 
</I>&gt;<i> Regards,
</I>&gt;<i> Nicolas
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017169.html">[mod_python] How do you make a subrequest?
</A></li>
	<LI>Next message: <A HREF="017161.html">[mod_python] mptest.py works, other .py files don't
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17170">[ date ]</a>
              <a href="thread.html#17170">[ thread ]</a>
              <a href="subject.html#17170">[ subject ]</a>
              <a href="author.html#17170">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
