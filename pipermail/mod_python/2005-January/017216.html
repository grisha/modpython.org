<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] module import
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20module%20import&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017220.html">
   <LINK REL="Next"  HREF="017218.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] module import</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20module%20import&In-Reply-To="
       TITLE="[mod_python] module import">grahamd at dscpl.com.au
       </A><BR>
    <I>Mon Jan 24 18:06:11 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="017220.html">[mod_python] Catalog of mod_python.publisher problems.
</A></li>
        <LI>Next message: <A HREF="017218.html">[mod_python] Installing mod_python for Python 2.4
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17216">[ date ]</a>
              <a href="thread.html#17216">[ thread ]</a>
              <a href="subject.html#17216">[ subject ]</a>
              <a href="author.html#17216">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Lionel Roubeyrie wrote ..
&gt;<i> Hi all,
</I>&gt;<i> new in the mod_python's world, I'm starting with a little problem of import.
</I>&gt;<i> The index.py page must import a package in the subdirectory where index.py
</I>&gt;<i> is, 
</I>&gt;<i> then I wrote:
</I>&gt;<i> import os, sys
</I>&gt;<i> current_path = os.getcwd()
</I>&gt;<i> top = os.path.join(current_path, '../')
</I>&gt;<i> if top not in sys.path : sys.path.append(top)
</I>&gt;<i> import my_mod
</I>&gt;<i> 
</I>&gt;<i> mod_python raise an error, but puting the lines in a python shell works!
</I>&gt;<i> Do I have to do anything else?
</I>
The value returned by os.getcwd() will be '/' and not the directory in which
the index.py resides. It is also not a good idea to be modifying sys.path
the way you are.

One option is to use the PythonPath directive to add additional directories
to search for Python modules and then just use &quot;import&quot; without any of
the other stuff.

You don't say whether you are using mod_python.publisher or whether
your index.py is listed as PythonHandler directly, which makes it a bit harder
to guess behaviour, but in various cases the directory in which the content
handler resides will be listed in sys.path anyway.

One final alternative to modifying PythonPath is to use:

  import os
  from mod_python import apache

  directory = os.path.dirname(__file__)
  my_mod = apache.import_module(&quot;my_mod&quot;,path=[directory])

At least I think that will work. :-)

Graham
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017220.html">[mod_python] Catalog of mod_python.publisher problems.
</A></li>
	<LI>Next message: <A HREF="017218.html">[mod_python] Installing mod_python for Python 2.4
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17216">[ date ]</a>
              <a href="thread.html#17216">[ thread ]</a>
              <a href="subject.html#17216">[ subject ]</a>
              <a href="author.html#17216">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
