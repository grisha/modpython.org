<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Threads running in restricted mode?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Threads%20running%20in%20restricted%20mode%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017140.html">
   <LINK REL="Next"  HREF="017131.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Threads running in restricted mode?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>John R. Wallace</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Threads%20running%20in%20restricted%20mode%3F&In-Reply-To="
       TITLE="[mod_python] Threads running in restricted mode?">jwallace at woti.com
       </A><BR>
    <I>Tue Jan 18 11:22:53 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="017140.html">[mod_python] Serving FS data
</A></li>
        <LI>Next message: <A HREF="017131.html">[mod_python] mod_python release?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17129">[ date ]</a>
              <a href="thread.html#17129">[ thread ]</a>
              <a href="subject.html#17129">[ subject ]</a>
              <a href="author.html#17129">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello all,

I am using both threads and mod_python in my current project, and it
appears that any new threads that I start are running in restricted mode
by default.  I was wondering if anyone has ever seen this, and/or how I
can get my threads to run in &quot;normal&quot; mode, so that they have access to
things like the file() constructor, for example.

Below is a small toy example that illustrates the problem that I am
having:

-----------------------
from mod_python import apache, util
import threading
import os

def run(request):
    try:
        os.system(&quot;ls&quot;)
        x = file(&quot;/tmp/test&quot;, &quot;w&quot;)
        x.write(&quot;Writing!  look at me!&quot;)
        x.close()
    except Exception, e:
        request.write(&quot;Oh no, exception in thread! &quot; + str(e) + &quot;\n&quot;)

def handler(request):    

    request.content_type = &quot;text/plain&quot;    
    request.send_http_header()


    thread = threading.Thread(target=run, args=(request,))
    thread.start()
    thread.join()
    
    try:
        x = file(&quot;/tmp/test&quot;, &quot;w&quot;)
        x.write(&quot;Writing!  look at me!&quot;)
        request.write(&quot;Wrote to file&quot;)
        x.close()
    except Exception, e:
        request.write(&quot;Oh no, exception! &quot; + str(e) + &quot;\n&quot;)

    return apache.OK

------------------

Running this code will result in:
Oh no, exception in thread! file() constructor not accessible in
restricted mode
Wrote to file

anyone have any brilliant ideas on how to disable the restricted mode?

BTW, if you've read this far, I'm running mod_python 3.1.3, Python 2.4, and apache 2.0.52

Thank you for your help,

John


</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017140.html">[mod_python] Serving FS data
</A></li>
	<LI>Next message: <A HREF="017131.html">[mod_python] mod_python release?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17129">[ date ]</a>
              <a href="thread.html#17129">[ thread ]</a>
              <a href="subject.html#17129">[ subject ]</a>
              <a href="author.html#17129">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
