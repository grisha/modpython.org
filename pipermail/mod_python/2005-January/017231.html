<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Apache1.3.33 + Python2.3.4 + mod_python - Can't get
	Python templates to work
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Apache1.3.33%20%2B%20Python2.3.4%20%2B%20mod_python%20-%20Can%27t%20get%0A%09Python%20templates%20to%20work&In-Reply-To=5.1.0.14.0.20050125071338.00bccda8%40pop3.direcway.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017230.html">
   <LINK REL="Next"  HREF="017236.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Apache1.3.33 + Python2.3.4 + mod_python - Can't get
	Python templates to work</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Nicolas Lehuen</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Apache1.3.33%20%2B%20Python2.3.4%20%2B%20mod_python%20-%20Can%27t%20get%0A%09Python%20templates%20to%20work&In-Reply-To=5.1.0.14.0.20050125071338.00bccda8%40pop3.direcway.com"
       TITLE="[mod_python] Apache1.3.33 + Python2.3.4 + mod_python - Can't get
	Python templates to work">nicolas.lehuen at gmail.com
       </A><BR>
    <I>Tue Jan 25 11:12:54 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="017230.html">[mod_python] Apache1.3.33 + Python2.3.4 + mod_python - Can't get
 Python templates to work
</A></li>
        <LI>Next message: <A HREF="017236.html">[mod_python] Apache1.3.33 + Python2.3.4 + mod_python - Can't get
	Python templates to work
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17231">[ date ]</a>
              <a href="thread.html#17231">[ thread ]</a>
              <a href="subject.html#17231">[ subject ]</a>
              <a href="author.html#17231">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I think the problem is the CWD, which is automatically set to / IIRC.
You have to give an absolute path to your template files. The best way
to do this is to use the __file__ variable, which gives you the
absolute path of the current .py file, and navigate from this file
using the os and os.path modules.

Regards,
Nicolas


On Tue, 25 Jan 2005 07:52:42 -0800, Brandon Masterson
&lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">bmasters at direcway.com</A>&gt; wrote:
&gt;<i>  I'm a perl templates user trying to learn Python and templates but I've run
</I>&gt;<i> into a brick wall with the inability to open any of the template files. 
</I>&gt;<i> I've tried Cheetah, Simpletal, and htmltmpl all with the same basic problem
</I>&gt;<i> so I suspect I've got something wrong with either my apache or mod_python
</I>&gt;<i> setup.  The problem is, when I attempt to run the .py files thru the
</I>&gt;<i> browser, the scripts get down to the open command and then can't find the
</I>&gt;<i> template files.  I can run scripts that don't have template accesses just
</I>&gt;<i> fine but attempts to open local directory files causes the errors below.
</I>&gt;<i> Also when I run the scripts calling templates on the command line with the
</I>&gt;<i> interpreter, they work fine.  One other thing I tried was to add the path to
</I>&gt;<i> the template names in the open commands but this resulted in a slightly
</I>&gt;<i> different error (see bottom of this email).
</I>&gt;<i> 
</I>&gt;<i>  For reference this is a Debian machine.  Here's the module versions
</I>&gt;<i> installed:
</I>&gt;<i>  <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">root at Knoppix</A>:/var/www/pythontest# apt-show-versions | sort | egrep
</I>&gt;<i> &quot;apache|python&quot;
</I>&gt;<i>  apache-common/testing uptodate 1.3.33-2
</I>&gt;<i>  apache-utils/testing uptodate 1.3.33-2
</I>&gt;<i>  apache/testing uptodate 1.3.33-2
</I>&gt;<i>  apache2-common/testing uptodate 2.0.52-3
</I>&gt;<i>  apache2-doc/testing uptodate 2.0.52-3
</I>&gt;<i>  apache2-mpm-worker/testing uptodate 2.0.52-3
</I>&gt;<i>  libapache-mod-python/testing uptodate 2:2.7.10-3
</I>&gt;<i>  libapache-mod-python2.3/testing uptodate 2:2.7.10-3
</I>&gt;<i>  libapache-mod-ssl/testing uptodate 2.8.22-1
</I>&gt;<i>  libapache2-svn/testing uptodate 1.1.1-2
</I>&gt;<i>  libboost-python1.31.0/testing uptodate 1.31.0-9
</I>&gt;<i>  python-cheetah/testing uptodate 0.9.15-5
</I>&gt;<i>  python-clearsilver/unstable upgradeable from 0.9.8-3 to 0.9.13-1
</I>&gt;<i>  python-dev/testing uptodate 2.3.4-5
</I>&gt;<i>  python-examples/testing uptodate 2.3.4-5
</I>&gt;<i>  python-mysqldb/testing uptodate 1.1.6-1
</I>&gt;<i>  python-sqlite/testing upgradeable from 1.0-2 to 1.0.1-1
</I>&gt;<i>  python-tk/testing upgradeable from 2.3.4-4 to 2.3.4-5
</I>&gt;<i>  python/testing upgradeable from 2.3.4-4 to 2.3.4-5
</I>&gt;<i>  python2.2-xml/testing upgradeable from 0.8.3-5 to 0.8.4-1
</I>&gt;<i>  python2.2-xmlbase/testing upgradeable from 2.2.3-11 to 2.2.3-12
</I>&gt;<i>  python2.2/testing upgradeable from 2.2.3-11 to 2.2.3-12
</I>&gt;<i>  python2.3-cheetah/testing uptodate 0.9.15-5
</I>&gt;<i>  python2.3-clearsilver/unstable upgradeable from 0.9.8-3 to 0.9.13-1
</I>&gt;<i>  python2.3-dev/testing uptodate 2.3.4-19
</I>&gt;<i>  python2.3-examples/testing upgradeable from 2.3.4-18 to 2.3.4-19
</I>&gt;<i>  python2.3-htmlgen/testing uptodate 2.2.2-10
</I>&gt;<i>  python2.3-htmltmpl/testing uptodate 1.22-5
</I>&gt;<i>  python2.3-mysqldb/testing uptodate 1.1.6-1
</I>&gt;<i>  python2.3-sqlite/testing upgradeable from 1.0-2 to 1.0.1-1
</I>&gt;<i>  python2.3-subversion/testing uptodate 1.1.1-2
</I>&gt;<i>  python2.3-tk/testing uptodate 2.3.4-19
</I>&gt;<i>  python2.3-zopeinterface/testing uptodate 3.0.0-2
</I>&gt;<i>  python2.3/testing uptodate 2.3.4-19
</I>&gt;<i> 
</I>&gt;<i>  Any help would be appreciated.
</I>&gt;<i> 
</I>&gt;<i>  SIMPLETAL ATTEMPT:
</I>&gt;<i>  from simpletal import simpleTAL, simpleTALES
</I>&gt;<i>  import sys
</I>&gt;<i>  import os
</I>&gt;<i>  templateFile = open (&quot;basic.html&quot;, 'r')
</I>&gt;<i>  templateFile.close()
</I>&gt;<i> 
</I>&gt;<i>  ERROR:
</I>&gt;<i>  Mod_python error: &quot;PythonHandler mod_python.publisher&quot;
</I>&gt;<i> 
</I>&gt;<i>  Traceback (most recent call last):
</I>&gt;<i> 
</I>&gt;<i>    File &quot;/usr/lib/python2.3/site-packages/mod_python/apache.py&quot;, line 193,
</I>&gt;<i> in Dispatch
</I>&gt;<i>      result = object(req)
</I>&gt;<i> 
</I>&gt;<i>    File &quot;/usr/lib/python2.3/site-packages/mod_python/publisher.py&quot;, line
</I>&gt;<i> 132, in handler
</I>&gt;<i>      module = apache.import_module(module_name, _req, [path])
</I>&gt;<i> 
</I>&gt;<i>    File &quot;/usr/lib/python2.3/site-packages/mod_python/apache.py&quot;, line 335,
</I>&gt;<i> in import_module
</I>&gt;<i>      module = imp.load_module(mname, f, p, d)
</I>&gt;<i> 
</I>&gt;<i>    File &quot;/var/www/pythontest/a.py&quot;, line 6, in ?
</I>&gt;<i>      templateFile = open (&quot;basic.html&quot;, 'r')
</I>&gt;<i> 
</I>&gt;<i>  IOError: [Errno 2] No such file or directory: 'basic.html'
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i>  CHEETAH ATTEMPT:
</I>&gt;<i>  from Cheetah.Template import Template
</I>&gt;<i>  templateFileName = 'cheetah.tmpl'
</I>&gt;<i>  t = Template(file=templateFileName, searchList=[{'records':[]},])
</I>&gt;<i> 
</I>&gt;<i>  ERROR:
</I>&gt;<i>  Mod_python error: &quot;PythonHandler mod_python.publisher&quot;
</I>&gt;<i> 
</I>&gt;<i>  Traceback (most recent call last):
</I>&gt;<i> 
</I>&gt;<i>    File &quot;/usr/lib/python2.3/site-packages/mod_python/apache.py&quot;, line 193,
</I>&gt;<i> in Dispatch
</I>&gt;<i>      result = object(req)
</I>&gt;<i> 
</I>&gt;<i>    File &quot;/usr/lib/python2.3/site-packages/mod_python/publisher.py&quot;, line
</I>&gt;<i> 132, in handler
</I>&gt;<i>      module = apache.import_module(module_name, _req, [path])
</I>&gt;<i> 
</I>&gt;<i>    File &quot;/usr/lib/python2.3/site-packages/mod_python/apache.py&quot;, line 335,
</I>&gt;<i> in import_module
</I>&gt;<i>      module = imp.load_module(mname, f, p, d)
</I>&gt;<i> 
</I>&gt;<i>    File &quot;/var/www/pythontest/b.py&quot;, line 6, in ?
</I>&gt;<i>      t = Template(file=templateFileName, searchList=[{'records':[]},])
</I>&gt;<i> 
</I>&gt;<i>    File &quot;/usr/lib/python2.3/site-packages/Cheetah/Template.py&quot;, line 156, in
</I>&gt;<i> __init__
</I>&gt;<i>      self.compile(source, file)
</I>&gt;<i> 
</I>&gt;<i>    File &quot;/usr/lib/python2.3/site-packages/Cheetah/Template.py&quot;, line 235, in
</I>&gt;<i> compile
</I>&gt;<i>      self._fileMtime = os.path.getmtime(file)
</I>&gt;<i> 
</I>&gt;<i>    File &quot;/usr/lib/python2.3/posixpath.py&quot;, line 146, in getmtime
</I>&gt;<i>      return os.stat(filename).st_mtime
</I>&gt;<i> 
</I>&gt;<i>  OSError: [Errno 2] No such file or directory: '/cheetah.tmpl'
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i>  HTMLTMPL ATTEMPT:
</I>&gt;<i>  from htmltmpl import TemplateManager, TemplateProcessor
</I>&gt;<i>  template = TemplateManager().prepare(&quot;template.tmpl&quot;)
</I>&gt;<i> 
</I>&gt;<i>  ERROR:
</I>&gt;<i>  Mod_python error: &quot;PythonHandler mod_python.publisher&quot;
</I>&gt;<i> 
</I>&gt;<i>  Traceback (most recent call last):
</I>&gt;<i> 
</I>&gt;<i>    File &quot;/usr/lib/python2.3/site-packages/mod_python/apache.py&quot;, line 193,
</I>&gt;<i> in Dispatch
</I>&gt;<i>      result = object(req)
</I>&gt;<i> 
</I>&gt;<i>    File &quot;/usr/lib/python2.3/site-packages/mod_python/publisher.py&quot;, line
</I>&gt;<i> 132, in handler
</I>&gt;<i>      module = apache.import_module(module_name, _req, [path])
</I>&gt;<i> 
</I>&gt;<i>    File &quot;/usr/lib/python2.3/site-packages/mod_python/apache.py&quot;, line 335,
</I>&gt;<i> in import_module
</I>&gt;<i>      module = imp.load_module(mname, f, p, d)
</I>&gt;<i> 
</I>&gt;<i>    File &quot;/var/www/pythontest/c.py&quot;, line 2, in ?
</I>&gt;<i>      template = TemplateManager().prepare(&quot;template.tmpl&quot;)
</I>&gt;<i> 
</I>&gt;<i>    File &quot;/usr/lib/python2.3/site-packages/htmltmpl.py&quot;, line 222, in prepare
</I>&gt;<i>      compiled = self.compile(file)
</I>&gt;<i> 
</I>&gt;<i>    File &quot;/usr/lib/python2.3/site-packages/htmltmpl.py&quot;, line 296, in compile
</I>&gt;<i>      self._debug).compile(file)
</I>&gt;<i> 
</I>&gt;<i>    File &quot;/usr/lib/python2.3/site-packages/htmltmpl.py&quot;, line 988, in compile
</I>&gt;<i>      tokens = self.parse(self.read(file))
</I>&gt;<i> 
</I>&gt;<i>    File &quot;/usr/lib/python2.3/site-packages/htmltmpl.py&quot;, line 1038, in read
</I>&gt;<i>      raise TemplateError, &quot;IO error while reading template '%s': &quot;\
</I>&gt;<i> 
</I>&gt;<i>  TemplateError: Htmltmpl error: IO error while reading template
</I>&gt;<i> 'template.tmpl': (2) No such file or directory
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i>  FILES:
</I>&gt;<i>  -rw-r--r--  1 www-data www-data  343 Jan 25 08:42 c.pyc
</I>&gt;<i>  -rwxr-xr-x  1 root     root      111 Jan 25 08:42 c.py
</I>&gt;<i>  -rw-r--r--  1 www-data www-data  332 Jan 25 08:36 b.pyc
</I>&gt;<i>  -rw-r--r--  1 www-data www-data  387 Jan 25 08:34 a.pyc
</I>&gt;<i>  -rw-r--r--  1 root     root      390 Jan 25 08:33 cheetah.tmpl
</I>&gt;<i>  -rw-r--r--  1 root     root      203 Jan 25 08:31 b.py
</I>&gt;<i>  -rwxr-xr-x  1 root     root      152 Jan 25 08:31 a.py
</I>&gt;<i>  -rw-r--r--  1 www-data www-data  882 Jan 24 23:40 template.tmplc
</I>&gt;<i>  -rw-r--r--  1 root     root      702 Jan 24 23:22 template.tmpl
</I>&gt;<i>  -rw-r--r--  1 root     root      239 Jan 23 18:49 basic.html
</I>&gt;<i> 
</I>&gt;<i>  APACHE CONFIG (PYTHON SPECIFIC):
</I>&gt;<i>  AddType text/plain .py
</I>&gt;<i>  &lt;Directory /var/www/pythontest&gt;
</I>&gt;<i>       Options -Indexes FollowSymLinks MultiViews
</I>&gt;<i>       AllowOverride None
</I>&gt;<i> 
</I>&gt;<i>       AddHandler python-program .py
</I>&gt;<i>       PythonHandler mod_python.publisher
</I>&gt;<i>       PythonDebug On
</I>&gt;<i> 
</I>&gt;<i>  &lt;/Directory&gt;
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i>  ERROR MESSAGES WITH FULL PATH (/var/www/pythontest/c.py) SPECIFIED:
</I>&gt;<i>  Not Found
</I>&gt;<i>  The requested URL /pythontest/c.py was not found on this server.
</I>&gt;<i>  Apache/1.3.33 Server at 192.168.0.12 Port 80
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i>  What am I missing?
</I>&gt;<i> 
</I>&gt;<i>  Thanks...
</I>&gt;<i> 
</I>&gt;<i>  Brandon
</I>&gt;<i>  
</I>&gt;<i>  
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>
</I></PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017230.html">[mod_python] Apache1.3.33 + Python2.3.4 + mod_python - Can't get
 Python templates to work
</A></li>
	<LI>Next message: <A HREF="017236.html">[mod_python] Apache1.3.33 + Python2.3.4 + mod_python - Can't get
	Python templates to work
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17231">[ date ]</a>
              <a href="thread.html#17231">[ thread ]</a>
              <a href="subject.html#17231">[ subject ]</a>
              <a href="author.html#17231">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
