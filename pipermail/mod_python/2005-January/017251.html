<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] mod_python with xmlrplib
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python%20with%20xmlrplib&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017271.html">
   <LINK REL="Next"  HREF="017252.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] mod_python with xmlrplib</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python%20with%20xmlrplib&In-Reply-To="
       TITLE="[mod_python] mod_python with xmlrplib">grahamd at dscpl.com.au
       </A><BR>
    <I>Wed Jan 26 18:36:40 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="017271.html">[mod_python] mod_python with xmlrplib
</A></li>
        <LI>Next message: <A HREF="017252.html">[mod_python] mod_python with xmlrplib
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17251">[ date ]</a>
              <a href="thread.html#17251">[ thread ]</a>
              <a href="subject.html#17251">[ subject ]</a>
              <a href="author.html#17251">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Marco Catunda wrote ..
&gt;<i> I haven't been able to use xmlrpclib with mod_python.
</I>&gt;<i> When I import xmlrpclib the apache server crash (segmentation fault),
</I>&gt;<i> the following code will be show it.
</I>&gt;<i> 
</I>&gt;<i> =====================================
</I>&gt;<i> from mod_python import apache
</I>&gt;<i> import xmlrpclib
</I>&gt;<i> 
</I>&gt;<i> def handler( req ):
</I>&gt;<i>          req.write(&quot;Hello World!&quot;)
</I>&gt;<i>          return apache.OK
</I>&gt;<i> =====================================
</I>&gt;<i> 
</I>&gt;<i> My system:
</I>&gt;<i>    RedHat ES 3
</I>&gt;<i>    Apache 2.0.52
</I>&gt;<i>    Python 2.4
</I>&gt;<i> 
</I>&gt;<i> Is there a way to fix it?
</I>
The xmlrpclib module uses a Python XML module which looks like it tries
to use expat.

&gt;&gt;&gt;<i> import xmlrpclib
</I>&gt;&gt;&gt;<i> import sys
</I>&gt;&gt;&gt;<i> sys.modules.keys()
</I>['cStringIO', 'copy_reg', 'sre_compile', '_sre', 'site', '__builtin__', 'xml.parsers.expat', 'xml._xmlplus', 'xml.parsers', 'xml.sys', '__main__', 'operator', 'xml.parsers.pyexpat', 'xml', 'posixpath', 'base64', 'binascii', 'pyexpat.errors', 'sre_constants', 're', 'os.path', 'stat', 'zipimport', 'string', 'warnings', 'UserDict', '_xmlplus', 'sys', 'readline', 'types', 'strop', 'sre', 'signal', 'xmlrpclib', 'linecache', 'posix', 'pyexpat.model', 'time', 'exceptions', 'sre_parse', 'os']

It is a frequent problem that the version of the expat shared library which
is used by the Python modules differs to that which Apache or PHP may
already be using. This difference can result in a server crash.

You should thus try to determine if you have multiple versions of expat
present and whether these different packages are using different versions.

On Linux, you might be able to use &quot;ldd&quot; to work this out by running it
on the &quot;httpd&quot; binary, as well as the appropriate .so Python module.

  ldd /somepath-to-apache-bin-dir/httpd
  ldd /somepath-to-python-module-dir/lib-dynload/pyexpat.so
  ldd /somepath-to-apache-module-dir/*php*.so

The paths will need to be adjusted obviously.

Please post the results of ldd if you can as am curious to see if this
does help, I have never suggested trying it before.

Graham
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017271.html">[mod_python] mod_python with xmlrplib
</A></li>
	<LI>Next message: <A HREF="017252.html">[mod_python] mod_python with xmlrplib
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17251">[ date ]</a>
              <a href="thread.html#17251">[ thread ]</a>
              <a href="subject.html#17251">[ subject ]</a>
              <a href="author.html#17251">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
