<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Serving FS data
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Serving%20FS%20data&In-Reply-To=c298f2d7050118074638900e24%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017138.html">
   <LINK REL="Next"  HREF="017129.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Serving FS data</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Serving%20FS%20data&In-Reply-To=c298f2d7050118074638900e24%40mail.gmail.com"
       TITLE="[mod_python] Serving FS data">grahamd at dscpl.com.au
       </A><BR>
    <I>Tue Jan 18 16:45:48 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="017138.html">[mod_python] Serving FS data
</A></li>
        <LI>Next message: <A HREF="017129.html">[mod_python] Threads running in restricted mode?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17140">[ date ]</a>
              <a href="thread.html#17140">[ thread ]</a>
              <a href="subject.html#17140">[ subject ]</a>
              <a href="author.html#17140">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>If you are using &quot;SetHandler&quot; to intercept all requests falling
below a directory and the raw files you want to send back are
under this directory with the correct location corresponding to
the request already, there are a couple of other things that
may also be appropriate.

First off, you can simply put:

   return apache.DECLINED

in your handler for any specific request you aren't doing anything
special for.

Doing this, control gets passed back to Apache and it will use
the standard mechanisms for returning the contents of any file
it finds at the location identified by the URL.

Second is that if all the files that need to be sent back use the
same extension, you can avoid triggering off mod_python in the
first place, by having in your httpd.conf/htaccess file something
like:

   SetHandler mymodule

   &lt;Files *.jpg&gt;
   SetHandler None
   &lt;/Files&gt;

This one is also useful where you are also using PHP.

   SetHandler mymodule

   &lt;Files *.php&gt;
   SetHandler None
   &lt;/Files&gt;

Doing this, you can mix PHP and mod_python stuff in the one directory
which can be handy if wanting to slowly migrate stuff from PHP to
mod_python. :-)

Graham


On Wednesday, January 19, 2005, at 02:46  AM, Nicolas Lehuen wrote:

&gt;<i> Use req.sendfile(). See :
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.modpython.org/pipermail/mod_python/2005-January/017118.html">http://www.modpython.org/pipermail/mod_python/2005-January/017118.html</A>
</I>&gt;<i>
</I>&gt;<i> Maybe we should add this to the FAQ 
</I>&gt;<i> (<A HREF="http://www.modpython.org/FAQ/faqw.py">http://www.modpython.org/FAQ/faqw.py</A>) ?
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i>
</I>&gt;<i> Nicolas
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Tue, 18 Jan 2005 16:21:04 +0100, Igor Stroh &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">igor at rulim.de</A>&gt; wrote:
</I>&gt;&gt;<i> Hi there,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I'm looking for a way to serve files from the filesystem
</I>&gt;&gt;<i> through mod_python. Right now I'm just doing stuff like
</I>&gt;&gt;<i> request.write(file(&lt;path&gt;).read())
</I>&gt;&gt;<i> but this is obviously quite expensive when the files are
</I>&gt;&gt;<i> big, since they're dumped at once into memory...
</I>&gt;&gt;<i> The whole thing would be ways faster if there would be
</I>&gt;&gt;<i> a way to just &quot;pipe&quot; those files through mod_python
</I>&gt;&gt;<i> directly to apache, i.e. just by pointing to a path
</I>&gt;&gt;<i> or a file descriptor... Any ideas?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> TIA,
</I>&gt;&gt;<i> Igor
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Mod_python mailing list
</I>&gt;&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017138.html">[mod_python] Serving FS data
</A></li>
	<LI>Next message: <A HREF="017129.html">[mod_python] Threads running in restricted mode?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17140">[ date ]</a>
              <a href="thread.html#17140">[ thread ]</a>
              <a href="subject.html#17140">[ subject ]</a>
              <a href="author.html#17140">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
