<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] psp_site example doesn't work
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20psp_site%20example%20doesn%27t%20work&In-Reply-To=41F552E7.4000805%40joreybump.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017207.html">
   <LINK REL="Next"  HREF="017232.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] psp_site example doesn't work</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Nicolas Lehuen</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20psp_site%20example%20doesn%27t%20work&In-Reply-To=41F552E7.4000805%40joreybump.com"
       TITLE="[mod_python] psp_site example doesn't work">nicolas.lehuen at gmail.com
       </A><BR>
    <I>Tue Jan 25 02:31:32 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="017207.html">[mod_python] psp_site example doesn't work
</A></li>
        <LI>Next message: <A HREF="017232.html">[mod_python] psp_site example doesn't work
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17224">[ date ]</a>
              <a href="thread.html#17224">[ thread ]</a>
              <a href="subject.html#17224">[ subject ]</a>
              <a href="author.html#17224">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, 24 Jan 2005 14:56:23 -0500, Jorey Bump &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">list at joreybump.com</A>&gt; wrote:
&gt;<i> Daniel Popowich wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; Thank you Jorey for your detailed email, but I have to disagree with
</I>&gt;<i> &gt; you when you wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     This is consistent with normal Python behaviour, where an
</I>&gt;<i> &gt;     interpreter loads modules from the current directory or
</I>&gt;<i> &gt;     PYTHONPATH. [1]
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I came to mod_python after *many* years of intensive python
</I>&gt;<i> &gt; programming and as a newbie to mod_python was caught by this issue for
</I>&gt;<i> &gt; days.  The way mod_python imports files all at the same root level is
</I>&gt;<i> &gt; very UN-pythonic.
</I>&gt;<i> 
</I>&gt;<i> Yes, I'll concede that. But, mod_python.publisher must remove leading
</I>&gt;<i> path information when the published modules are imported, otherwise
</I>&gt;<i> Python wouldn't import them (unless they happen to be in sys.path). It's
</I>&gt;<i> important to understand that the module in the URL is being imported by
</I>&gt;<i> another module, not run directly by the interpreter, as when you type
</I>&gt;<i> &quot;python app.py&quot; on the command line. It took a while for this to sink in
</I>&gt;<i> completely, myself.
</I>&gt;<i> 
</I>&gt;<i> There is no mechanism in Python to import a module by file path, so it's
</I>&gt;<i> consistent, but confusing. The alternative would have been to force a
</I>&gt;<i> working directory onto the user, much like a cgi-bin, and prepend that
</I>&gt;<i> to sys.path.
</I>
Jorey,

A lot of the problem caused by import_module() and the
mod_python.publisher come from two very simple mistakes :

1) it is not necessary IMHO to have published moduled imported in the
same namespace than other 'standard' modules.

2) Using the 'import' keyword or the 'imp' modules are not the only
ways to import modules. Like you wrote, import and imp use a dotted
naming scheme for the modules, and have a rather complicated search
path algorithm. This is NOT what should be used to import published
modules whose place in the filesystem follows a publication scheme
instead of a modularization scheme.

The daily message from a new puzzled user should remind us that
publishing a module is NOT the same thing as importing it in standard
Python parlance. mpservlets, Vampire and other publishers have shown
that it's quite easy to import modules without using import or imp.
Separating published modules from standard modules should be done
ASAP, and I think everybody will save mental health when it will be
done ;).

Another proof that mixing published and standard module is a bad
design choice is that you end up putting constraints (through the path
parameter in import_module) to make sure that only modules from the
published filesystem are published. This is inefficient at best. Have
a look at what CherryPy does, for example : function and object which
can be published are just marked as such. Anything else can't be
published. There's no need to worry about path restrictions and so on
and so forth.

I'm sorry to be a little harsh on the subject, but for now, I think
mod_python is far from being an user-friendly web development
environment. For power users who can wrap their head around the
various bugs^H^H^H^Hfeatures, it's perfect, but judging from the
volumes of &quot;Can't make mptest.py to run&quot; or &quot;Can't import yada_yada
module from index.py&quot; messages, there's still a lot of things to cope
with to get a bigger user base. I definitely think the import
mechanism and mod_python.publisher need urgent and radical
improvements.

Regards,
Nicolas
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017207.html">[mod_python] psp_site example doesn't work
</A></li>
	<LI>Next message: <A HREF="017232.html">[mod_python] psp_site example doesn't work
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17224">[ date ]</a>
              <a href="thread.html#17224">[ thread ]</a>
              <a href="subject.html#17224">[ subject ]</a>
              <a href="author.html#17224">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
