<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Newbie Publisher Handler questions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Newbie%20Publisher%20Handler%20questions&In-Reply-To=41D2D968.6050703%40joreybump.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017027.html">
   <LINK REL="Next"  HREF="017029.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Newbie Publisher Handler questions</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>John Ward</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Newbie%20Publisher%20Handler%20questions&In-Reply-To=41D2D968.6050703%40joreybump.com"
       TITLE="[mod_python] Newbie Publisher Handler questions">jbward at berkeley.edu
       </A><BR>
    <I>Mon Jan  3 15:53:40 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="017027.html">[mod_python] Problem getting mptest.py to work
</A></li>
        <LI>Next message: <A HREF="017029.html">[mod_python] Disable .py file serving in Apache
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17028">[ date ]</a>
              <a href="thread.html#17028">[ thread ]</a>
              <a href="subject.html#17028">[ subject ]</a>
              <a href="author.html#17028">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Jorey,

Thanks for the reply.  This information is helpful.  I wasn't familiar with 
the 'sets' module so I'll take a look at it.

Thanks again.

John



At 11:20 AM 12/29/2004 -0500, Jorey Bump wrote:
&gt;<i>John Ward wrote:
</I>&gt;<i>
</I>&gt;&gt;<i>1. With mod_python, do I no longer have to worry about limiting the path 
</I>&gt;&gt;<i>available to the script?  (I do my best to maintain an appropriate level 
</I>&gt;&gt;<i>of paranoia, so one thing I'd like to learn is what security mod_python 
</I>&gt;&gt;<i>handles for me and what security I need to write into my scripts.)
</I>&gt;<i>
</I>&gt;<i>Frankly, I'd leave the path alone. Depending on your environment, it could 
</I>&gt;<i>affect other users or applications. For example, if I set the environment 
</I>&gt;<i>path using mod_python in a virtual host, it also changes the path for perl 
</I>&gt;<i>CGI scripts, where the correct path is more likely to matter. It may seem 
</I>&gt;<i>fine in an environment you control, but makes your application less 
</I>&gt;<i>portable. If you must use popen, set up a variable that contains the 
</I>&gt;<i>complete path to your binary,  and change that when you deploy it 
</I>&gt;<i>somewhere else. With that said, your mod_python applications will have the 
</I>&gt;<i>same rights as the apache user, so plan accordingly.
</I>&gt;<i>
</I>&gt;<i>For mod_python newbies, here's a simple module to show your path, using 
</I>&gt;<i>the publisher handler:
</I>&gt;<i>
</I>&gt;<i># path.py
</I>&gt;<i>import os
</I>&gt;<i>
</I>&gt;<i>def show(req):
</I>&gt;<i>         # uncomment to set path
</I>&gt;<i>         # os.environ['PATH'] = '/usr/bin:/bin'
</I>&gt;<i>         return os.environ['PATH']
</I>&gt;<i>
</I>&gt;<i>Access it via <A HREF="http://host/path.py/show">http://host/path.py/show</A>
</I>&gt;<i>
</I>&gt;&gt;<i>2. How do mod_python programmers typically handle sanitizing form input?
</I>&gt;<i>
</I>&gt;<i>For me, this depends on the intended use of the data, and also partly on 
</I>&gt;<i>the version of python. For simple validation, I might turn the input into 
</I>&gt;<i>a list and check the members for illegal characters. The sets module 
</I>&gt;<i>introduced in python 2.3 is now a built-in in 2.4, making this a trivial 
</I>&gt;<i>task. But if your application might run under older versions of python, 
</I>&gt;<i>you'll have to use something a bit more universal.
</I>&gt;<i>
</I>&gt;<i>For database input, I use placeholders, somewhere along these lines:
</I>&gt;<i>
</I>&gt;<i>     query = &quot;&quot;&quot;INSERT INTO users ( name, quest ) VALUES ( %s, %s )&quot;&quot;&quot;
</I>&gt;<i>     cursor = dbh.cursor()
</I>&gt;<i>     cursor.execute(query, (req.formdata['name'], req.formdata['quest']))
</I>&gt;<i>
</I>&gt;<i>Note that this is *not* typical python string replacement. This construct 
</I>&gt;<i>allows you to send any VALUE string to the database, with necessary 
</I>&gt;<i>escapes inserted behind the scenes. It's very handy. You are encouraged to 
</I>&gt;<i>find out more about python and placeholders for your db and test it on 
</I>&gt;<i>your platform (I found a lot of misleading info, but the form above works 
</I>&gt;<i>best for me when using MySQLdb).
</I>&gt;<i>
</I>&gt;&gt;<i>3. Assuming one has an SMTP server listening on localhost, what is the 
</I>&gt;&gt;<i>recommended way to add messages to the mail queue?
</I>&gt;<i>
</I>&gt;<i>I prefer smtplib because it's portable, powerful, and offers excellent 
</I>&gt;<i>error handling. Of course, if you want the message queued instead of sent 
</I>&gt;<i>immediately, you'll need to configure your SMTP daemon to do so. You could 
</I>&gt;<i>do this for the MSA on port 587 to avoid running a separate instance.
</I>&gt;<i>
</I>&gt;&gt;<i>4. When writing CGI scripts in Perl using CGI.pm, one has the option of 
</I>&gt;&gt;<i>limiting the size of POSTs by setting a value for the '$MAX_POST' 
</I>&gt;&gt;<i>variable.  Is there a way to do this using mod_python?  Or is this even 
</I>&gt;&gt;<i>something I need to worry about?
</I>&gt;<i>
</I>&gt;<i>I haven't run into a need for this, but I do have some textarea form 
</I>&gt;<i>inputs that I'm concerned about, so I'd be interested if this is possible, 
</I>&gt;<i>as well.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>_______________________________________________
</I>&gt;<i>Mod_python mailing list
</I>&gt;<i><A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i><A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017027.html">[mod_python] Problem getting mptest.py to work
</A></li>
	<LI>Next message: <A HREF="017029.html">[mod_python] Disable .py file serving in Apache
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17028">[ date ]</a>
              <a href="thread.html#17028">[ thread ]</a>
              <a href="subject.html#17028">[ subject ]</a>
              <a href="author.html#17028">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
