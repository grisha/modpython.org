<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] psp_site example doesn't work
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20psp_site%20example%20doesn%27t%20work&In-Reply-To=c298f2d7050123230939196a6%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017196.html">
   <LINK REL="Next"  HREF="017198.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] psp_site example doesn't work</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20psp_site%20example%20doesn%27t%20work&In-Reply-To=c298f2d7050123230939196a6%40mail.gmail.com"
       TITLE="[mod_python] psp_site example doesn't work">grahamd at dscpl.com.au
       </A><BR>
    <I>Mon Jan 24 07:00:01 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="017196.html">[mod_python] psp_site example doesn't work
</A></li>
        <LI>Next message: <A HREF="017198.html">[mod_python] psp_site example doesn't work
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17197">[ date ]</a>
              <a href="thread.html#17197">[ thread ]</a>
              <a href="subject.html#17197">[ subject ]</a>
              <a href="author.html#17197">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 24/01/2005, at 6:09 PM, Nicolas Lehuen wrote:
&gt;&gt;<i> The consequences of this are that if requests cycle between the two
</I>&gt;&gt;<i> versions of &quot;index.py&quot;, on every access there will be a module reload.
</I>&gt;&gt;<i> This will be inefficient at least, but worse problems could arise if 
</I>&gt;&gt;<i> the
</I>&gt;&gt;<i> two instances of the module use similar names for global variables.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Package such as mpservlets and Vampire implement their own module
</I>&gt;&gt;<i> importing mechanisms in order to avoid this problem. Ie., with those
</I>&gt;&gt;<i> packages it is safe to have Python code files which are named the same
</I>&gt;&gt;<i> appearing in different directories managed by mod_python running
</I>&gt;&gt;<i> under the same interpreter.
</I>&gt;<i>
</I>&gt;<i> We had a discussion a few months ago about this issue, and I still
</I>&gt;<i> think it's a bug. Like Daniel Popovitch with mpservlets and you with
</I>&gt;<i> Vampire, I had to implement my own import mechanism to work around the
</I>&gt;<i> bug. I think it's time to fix it... I'll add a bug report and see what
</I>&gt;<i> we can do about it.
</I>
Probably a good thing. All my implementations of my module import system
however have worked on specifying the exact directory that the module
was expected to reside in. Thus I wasn't having to deal with the 
problems
of using sys.path and the unpredictability of which module you will pick
up if there are commonly named ones. I will thus have to have a good 
think
about how the mod_python one can be fixed and retain the same interface.
I can see a partial solution in my head, but not yet a complete one. :-)

Do we need to document properly first the perceived problems and some
examples of errornous behaviour? This will help to ensure we fix
everything and provide a basis for some tests of any new implementation.
I know that such information can be noted against the bug tracker item,
but is it easier to thrash it out here first.

In the back of my head, am thinking that relying on a search through
sys.path is always going to be problematic. Do we want to also consider
any alternative interfaces styles to module importing and caching. 
Perhaps
provide a parallel implementation that requires the exact directory to
be specified and if this proves better, promote a migration to this
style of interface while keeping the old.

Graham

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017196.html">[mod_python] psp_site example doesn't work
</A></li>
	<LI>Next message: <A HREF="017198.html">[mod_python] psp_site example doesn't work
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17197">[ date ]</a>
              <a href="thread.html#17197">[ thread ]</a>
              <a href="subject.html#17197">[ subject ]</a>
              <a href="author.html#17197">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
