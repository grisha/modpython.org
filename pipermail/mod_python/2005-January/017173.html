<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] PythonOption access
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20PythonOption%20access&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017177.html">
   <LINK REL="Next"  HREF="017174.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] PythonOption access</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20PythonOption%20access&In-Reply-To="
       TITLE="[mod_python] PythonOption access">grahamd at dscpl.com.au
       </A><BR>
    <I>Thu Jan 20 17:37:45 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="017177.html">[mod_python] PythonOption access
</A></li>
        <LI>Next message: <A HREF="017174.html">[mod_python] PythonOption access
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17173">[ date ]</a>
              <a href="thread.html#17173">[ thread ]</a>
              <a href="subject.html#17173">[ subject ]</a>
              <a href="author.html#17173">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Bo Lorentsen wrote ..
&gt;<i> Hi ...
</I>&gt;<i> 
</I>&gt;<i> I am a quite happy mod_python user (writting a payment system), and I 
</I>&gt;<i> really like the combination of a OO language like python and a web 
</I>&gt;<i> server like apache2. There have only been two real issues, I have been
</I>&gt;<i> annoyed about. One is the missing possibility to reload a imported 
</I>&gt;<i> module on update, and the other is the PythonOption access.
</I>&gt;<i> 
</I>&gt;<i> Will it be possible to access PythonOptions like log_error in a more 
</I>&gt;<i> global context (log_error is a function on the apache module), so that
</I>&gt;<i> global values can get there init value on module init and NOT on the 
</I>&gt;<i> first incomming request ? I have some code that work around this, but 
</I>&gt;<i> its not pretty, and I like things to be so, and I don't understand why
</I>&gt;<i> it has to be a method on the request module.
</I>&gt;<i> 
</I>&gt;<i> Is this completely impossible ?
</I>
If I understand your issue with PythonOption correctly, the underlying
reason that get_options() is only available through the request object
is most likely that the set of options returned is dependent on the URL
accessed. That is, they aren't strictly global and thus fixed.

Take for example a .htaccess file containing:

  PythonOption A 1
  PythonOption B 2

If a URL request maps to a file in that directory, get_options() will return:

  A =1 
  B =2

If you have a subdirectory with another .htaccess file containing:

  PythonOption B 3
  PythonOption C 4

If a URL request maps to a file in that subdirectory, get_options() will
return:

  A = 1
  B = 3
  C = 4

That is, the options from the parent directory are first inherited and
then overridden by any local to that directory sharing the same
name. Thus, all dependent on context and not global and fixed.

In terms of how to have global fixed options, what most people
probably do is have a special config module somewhere which
defines all their options as standard Python variables. Thus your
module simply imports the config module and accesses the
variables.

As to module reloading, there is the apache.import_module()
method. This is used to load the content handler defined by the
PythonHandler directive and if auto reload is turned on it will
be reloaded if that Python file changes. It will not however reload
a top level content handler if what is changed is something that
that content handler had in turn imported using &quot;import&quot;.

One can use import_module() in a content handler instead of
&quot;import&quot;, but needs to be done inside of actual handler() method
and there are still various problems with doing that. Vampire
tries to do a bit better job as far as the module importing system
goes to avoid these problems. It may or may not be useful to you.

If you want to explore the options better, you would be best off
posting some code examples of how you are achieving what you
want now.

Graham
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017177.html">[mod_python] PythonOption access
</A></li>
	<LI>Next message: <A HREF="017174.html">[mod_python] PythonOption access
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17173">[ date ]</a>
              <a href="thread.html#17173">[ thread ]</a>
              <a href="subject.html#17173">[ subject ]</a>
              <a href="author.html#17173">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
