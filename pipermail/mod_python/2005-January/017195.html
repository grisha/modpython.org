<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] psp_site example doesn't work
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20psp_site%20example%20doesn%27t%20work&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017193.html">
   <LINK REL="Next"  HREF="017196.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] psp_site example doesn't work</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20psp_site%20example%20doesn%27t%20work&In-Reply-To="
       TITLE="[mod_python] psp_site example doesn't work">grahamd at dscpl.com.au
       </A><BR>
    <I>Sun Jan 23 18:38:43 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="017193.html">[mod_python] psp_site example doesn't work
</A></li>
        <LI>Next message: <A HREF="017196.html">[mod_python] psp_site example doesn't work
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17195">[ date ]</a>
              <a href="thread.html#17195">[ thread ]</a>
              <a href="subject.html#17195">[ subject ]</a>
              <a href="author.html#17195">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Jorey Bump wrote ..
&gt;<i> Zach White wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; <A HREF="http://beta.rvmotel.com/index/index">http://beta.rvmotel.com/index/index</A>
</I>&gt;<i> &gt; <A HREF="http://beta.rvmotel.com/index.py/index">http://beta.rvmotel.com/index.py/index</A>
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Not a big deal, but not really ideal, either. It means I'll have to use
</I>&gt;<i> &gt; AddHandler and have an index.html or index.cgi that redirects the user
</I>&gt;<i> to
</I>&gt;<i> &gt; the real index page. From my own developing standpoint, I'd rather not
</I>&gt;<i> have
</I>&gt;<i> &gt; to do that. But from the standpoint of the people I'm doing this for,
</I>&gt;<i> it
</I>&gt;<i> &gt; doesn't matter.
</I>&gt;<i> 
</I>&gt;<i> I use the Publisher handler exclusively, and do all of my development 
</I>&gt;<i> this way, with one exception: I avoid using the name &quot;index&quot; like the 
</I>&gt;<i> plague in module or function names! AddHandler lets you add index.html
</I>&gt;<i> to the directory if you feel you must, but it doesn't even make sense to
</I>&gt;<i> try to include index.py in the DirectoryIndex; it would be like trying
</I>&gt;<i> to put 20 versions of example.exe in a Windows directory. Start off by
</I>&gt;<i> giving all of your applications unique names and you'll avoid namespace
</I>&gt;<i> pollution issues that trip up a lot of mod_python newbies.
</I>&gt;<i> 
</I>&gt;<i> To clarify, if you have a foo.py located *anywhere*, don't reuse the 
</I>&gt;<i> name in another module. Choose a sensible function to start with 
</I>&gt;<i> (remember, this is with Publisher in mind) and distribute the URL:
</I>&gt;<i> 
</I>&gt;<i>   <A HREF="http://host.dom/foo/login">http://host.dom/foo/login</A>
</I>&gt;<i> 
</I>&gt;<i> I've had no issues with users misunderstanding such URLs and achieve a
</I>&gt;<i> terrific hassle-free separation between applications this way. 
</I>&gt;<i> AddHandler lets me mix file types in a directory, and MultiViews lets me
</I>&gt;<i> drop the .py extension in the URL.
</I>
Possibly worth emphasising in this is the use of a common name, used
across multiple directories, and not unique names may cause subtle
problems with module reloading. This is why one should avoid it.

The problem here is that the mod_python module importing mechanism
uses the &quot;imp&quot; module, which has the same affect as &quot;import&quot; statement.
Because module imports are added into &quot;sys.modules&quot;, you have issues
when the same module name appears in two different directories. For
examples, if you have &quot;subdir1/index.py&quot; and &quot;subdir2/index.py&quot;.

If no &quot;index&quot; module has been loaded and &quot;subdir1/index.py&quot; is accessed,
it will be loaded. If now &quot;subdir2/index.py&quot; is accessed, the mod_python
module importing mechanism will note that the &quot;index&quot; module is located
at a different path and thus will load the latter. In doing this however, it
will override the existing &quot;index&quot; module already in &quot;sys.modules&quot;.

The consequences of this are that if requests cycle between the two
versions of &quot;index.py&quot;, on every access there will be a module reload.
This will be inefficient at least, but worse problems could arise if the
two instances of the module use similar names for global variables.

Package such as mpservlets and Vampire implement their own module
importing mechanisms in order to avoid this problem. Ie., with those
packages it is safe to have Python code files which are named the same
appearing in different directories managed by mod_python running
under the same interpreter.

Graham
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017193.html">[mod_python] psp_site example doesn't work
</A></li>
	<LI>Next message: <A HREF="017196.html">[mod_python] psp_site example doesn't work
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17195">[ date ]</a>
              <a href="thread.html#17195">[ thread ]</a>
              <a href="subject.html#17195">[ subject ]</a>
              <a href="author.html#17195">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
