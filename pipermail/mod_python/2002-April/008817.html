<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] strange runtime exception
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20strange%20runtime%20exception&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008833.html">
   <LINK REL="Next"  HREF="008823.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
<table border=0 width="100%"><tr><td valign="top">
   <H1>[mod_python] strange runtime exception</H1>
    <B>Sam Brauer</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20strange%20runtime%20exception&In-Reply-To="
       TITLE="[mod_python] strange runtime exception">sam at webslingerZ.com
       </A><BR>
    <I>Mon Apr  8 11:31:31 EST 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="008833.html">[mod_python] Announce: 2.7.7
</A></li>
        <LI>Next message: <A HREF="008823.html">[mod_python] Status for mod_python for Apache 2.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8817">[ date ]</a>
              <a href="thread.html#8817">[ thread ]</a>
              <a href="subject.html#8817">[ subject ]</a>
              <a href="author.html#8817">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have recently observed an intermittent exception that I think may be 
related to mod_python.  It may also be a Python problem, but I have only 
ever seen it occur under mod_python, so I thought I'd ask here first.

What happens is that I call code like this inside a handler:
utf8string = unicode(val, enc).encode('utf-8')
(where val is a string in an encoding identified by enc)

Most of the time (in fact, for days or even weeks) this works fine.  Then 
every so often I will get the following exception:

exceptions.RuntimeError: cannot unmarshal code objects in restricted 
execution mode
File &quot;/usr/local/lib/python2.2/encodings/__init__.py&quot;, line 51, in 
search_function
mod = __import__(modname,globals(),locals(),'*')

Once I encounter this exception, I can hit the same url again and may or
may not get the exception again.  There seems to be no pattern to its
occurrence. But generally, once it occurs it will recur &quot;at random&quot; until
apache is restarted.

Has anyone else seen this before, or have any idea why it's happening?

Many thanks,
Sam

-- 
Sam Brauer
Systems Programmer
<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">sam at webslingerZ.com</A>


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008833.html">[mod_python] Announce: 2.7.7
</A></li>
	<LI>Next message: <A HREF="008823.html">[mod_python] Status for mod_python for Apache 2.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8817">[ date ]</a>
              <a href="thread.html#8817">[ thread ]</a>
              <a href="subject.html#8817">[ subject ]</a>
              <a href="author.html#8817">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
