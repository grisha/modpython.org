<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] some bug fixes and new features in CVS
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20some%20bug%20fixes%20and%20new%20features%20in%20CVS&In-Reply-To=20000810135152.2096.qmail%40web2206.mail.yahoo.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000224.html">
   <LINK REL="Next"  HREF="000240.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] some bug fixes and new features in CVS</H1>
    <B>Gregory Trubetskoy</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20some%20bug%20fixes%20and%20new%20features%20in%20CVS&In-Reply-To=20000810135152.2096.qmail%40web2206.mail.yahoo.com"
       TITLE="[mod_python] some bug fixes and new features in CVS">grisha at modpython.org
       </A><BR>
    <I>Thu Aug 10 11:35:08 EST 2000</I>
    <P><UL>
        <LI>Previous message: <A HREF="000224.html">[mod_python] some bug fixes and new features in CVS
</A></li>
        <LI>Next message: <A HREF="000240.html">[mod_python] some bug fixes and new features in CVS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#225">[ date ]</a>
              <a href="thread.html#225">[ thread ]</a>
              <a href="subject.html#225">[ subject ]</a>
              <a href="author.html#225">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The CGI memory leak is not a problem with mod_python itself really. It has
to do with cgi.py and what it does. The thing to realize about mod_python
(or mod_perl, or php for that matter), is that code that is not careful
about memory allocation, will make apache process grow and grow.

I think that there are only two possible solutions - 

1. Some mod_python module that kills httpd when it reaches a certain
size. That's the technique mod_perl folks use.

2. A fix/rewrite of cgi.py.

The latter is the right thing to do, of course, but who knows when it will
happen....

I'd like to mention that this issue is certainly high on my TODO list, and
I'm open to any advice, suggetions, code snippets, patches, etc :-)

Grisha


On Thu, 10 Aug 2000, Alexis Iglauer wrote:

&gt;<i> Has the cgi memory leak been sorted out yet?  I am
</I>&gt;<i> having to restart my apache at least once a day to not
</I>&gt;<i> swamp my machine......
</I>&gt;<i> 
</I>&gt;<i> Keep up the excellent work!
</I>&gt;<i> Regards
</I>&gt;<i> Alexis
</I>&gt;<i> --- Gregory Trubetskoy &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">grisha at modpython.org</A>&gt; wrote:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Just FYI - 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I've checked in to the CVS server on sourceforge the
</I>&gt;<i> &gt; version of mod_python
</I>&gt;<i> &gt; that has a number of new features, fixes and
</I>&gt;<i> &gt; improvements. Some changes
</I>&gt;<i> &gt; were quite radical which is why I don't want to put
</I>&gt;<i> &gt; it out as a release
</I>&gt;<i> &gt; just yet.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; There are instructions on how to retrieve code from
</I>&gt;<i> &gt; CVS on 
</I>&gt;<i> &gt; <A HREF="http://sourceforge.net/cvs/?group_id=7107">http://sourceforge.net/cvs/?group_id=7107</A>
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Some of the most significant changes are:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; o New PythonEnablePdb directive that allows handlers
</I>&gt;<i> &gt; to be executed
</I>&gt;<i> &gt;   within pdb (Python debugger).
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; o Proper finalization - Py_Finalize() C API function
</I>&gt;<i> &gt; is called with a
</I>&gt;<i> &gt;   child proces exits, thus making sure all objects
</I>&gt;<i> &gt; are destroyed properly.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; o Dynamic handler registration. Now you can add
</I>&gt;<i> &gt; handlers from within
</I>&gt;<i> &gt;   handlers. Extremely useful if you want, for
</I>&gt;<i> &gt; example, to write an
</I>&gt;<i> &gt;   authentication handler that decides based on the
</I>&gt;<i> &gt; userid which handler
</I>&gt;<i> &gt;   will handle the request.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; o There is now a way to have multiple keys in a
</I>&gt;<i> &gt; table via the
</I>&gt;<i> &gt;   add() function. Having multiple keys is critical
</I>&gt;<i> &gt; to being able
</I>&gt;<i> &gt;   to set multiple cookies, as someone pointed out on
</I>&gt;<i> &gt; this list.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; o mod_python.c should compile with the -ansi option
</I>&gt;<i> &gt; without warnings.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; --
</I>&gt;<i> &gt;   Gregory (Grisha) Trubetskoy
</I>&gt;<i> &gt;        <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">grisha at modpython.org</A>
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Mod_python mailing list
</I>&gt;<i> &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> &gt; <A HREF="http://www.modpython.org/mailman/listinfo/mod_python">http://www.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> __________________________________________________
</I>&gt;<i> Do You Yahoo!?
</I>&gt;<i> Kick off your party with Yahoo! Invites.
</I>&gt;<i> <A HREF="http://invites.yahoo.com/">http://invites.yahoo.com/</A>
</I>&gt;<i> 
</I>

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000224.html">[mod_python] some bug fixes and new features in CVS
</A></li>
	<LI>Next message: <A HREF="000240.html">[mod_python] some bug fixes and new features in CVS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#225">[ date ]</a>
              <a href="thread.html#225">[ thread ]</a>
              <a href="subject.html#225">[ subject ]</a>
              <a href="author.html#225">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
