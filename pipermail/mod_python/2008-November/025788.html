<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] environment variables lost along the way
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20environment%20variables%20lost%20along%20the%20way&In-Reply-To=B8B326E4-58F7-4E12-959F-9F1663C20B13%40wcgltd.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025787.html">
   <LINK REL="Next"  HREF="025790.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] environment variables lost along the way</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20environment%20variables%20lost%20along%20the%20way&In-Reply-To=B8B326E4-58F7-4E12-959F-9F1663C20B13%40wcgltd.com"
       TITLE="[mod_python] environment variables lost along the way">graham.dumpleton at gmail.com
       </A><BR>
    <I>Tue Nov 25 18:06:50 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="025787.html">[mod_python] environment variables lost along the way
</A></li>
        <LI>Next message: <A HREF="025790.html">[mod_python] Cookies
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25788">[ date ]</a>
              <a href="thread.html#25788">[ thread ]</a>
              <a href="subject.html#25788">[ subject ]</a>
              <a href="author.html#25788">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>2008/11/26 Josh Forman &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">jforman at wcgltd.com</A>&gt;:
&gt;<i> hi.  i've been working with modpython 3.3 on ubuntu 8.10 with python 2.5.
</I>&gt;<i> i have a problem where, using a python module works in the python cli
</I>&gt;<i> without doing anything special, but not in a script being run through
</I>&gt;<i> apache.
</I>&gt;<i> the module is cx_Oracle, and the error logs complain about being unable to
</I>&gt;<i> acquire Oracle environment handle, and thus far everything i've read about
</I>&gt;<i> this error is related to environmental variables needing to be set to
</I>&gt;<i> something in particular.  so i have them set at boot by defining them in
</I>&gt;<i> /etc/profile.   that didn't work.
</I>
Apache startup wouldn't use that, so don't expect it would work.

You may have more luck putting it in 'envvars' file in same directory
as httpd binary. This is presuming you are using Apache compiled from
source code. If using package Apache that file will not exist as they
generally do things their own way.

&gt;<i> so i added them into the script being run by assigning them through
</I>&gt;<i> os.environ before i import cx_Oracle.
</I>
That should work. Did you restart Apache after making change to script?

&gt;<i> that didn't work either.
</I>&gt;<i> so i added them into the virtual host config file as pythonoption
</I>&gt;<i> directives, again with no luck.
</I>
That will not work, and neither will using SetEnv directive.

Graham

&gt;<i> i'm sure the error has to do with mod_python since the code in the python
</I>&gt;<i> script works if run through the cli, but i am not sure and i've been pulling
</I>&gt;<i> my hair out about this all day.
</I>&gt;<i>
</I>&gt;<i> the relevant part of the apache config is shown below:
</I>&gt;<i> &lt;Location /cdrs&gt;
</I>&gt;<i>        Options Indexes FollowSymLinks MultiViews
</I>&gt;<i>        SetHandler mod_python
</I>&gt;<i>        PythonPath &quot;['/var/www/freeswitch'] + sys.path&quot;
</I>&gt;<i>        PythonHandler freeswitch.cdrs
</I>&gt;<i>        PythonOption ORACLE_HOME /usr/lib/oracle/10.2.0.4/client64
</I>&gt;<i>        PythonOption PYTHON_EGG_CACHE /tmp/egg_basket
</I>&gt;<i>        PythonOption LD_LIBRARY_PATH /usr/lib/oracle/10.2.0.4/client64/lib
</I>&gt;<i> &lt;/Location&gt;
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I></PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025787.html">[mod_python] environment variables lost along the way
</A></li>
	<LI>Next message: <A HREF="025790.html">[mod_python] Cookies
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25788">[ date ]</a>
              <a href="thread.html#25788">[ thread ]</a>
              <a href="subject.html#25788">[ subject ]</a>
              <a href="author.html#25788">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
