<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Re: Cross compiling mod_python
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20Cross%20compiling%20mod_python&In-Reply-To=c50ba9940811280210j7499f149ra28a6718bcba2503%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025803.html">
   <LINK REL="Next"  HREF="025805.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Re: Cross compiling mod_python</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20Cross%20compiling%20mod_python&In-Reply-To=c50ba9940811280210j7499f149ra28a6718bcba2503%40mail.gmail.com"
       TITLE="[mod_python] Re: Cross compiling mod_python">graham.dumpleton at gmail.com
       </A><BR>
    <I>Fri Nov 28 07:07:54 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="025803.html">[mod_python] Re: Cross compiling mod_python
</A></li>
        <LI>Next message: <A HREF="025805.html">[mod_python] Re: Cross compiling mod_python
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25804">[ date ]</a>
              <a href="thread.html#25804">[ thread ]</a>
              <a href="subject.html#25804">[ subject ]</a>
              <a href="author.html#25804">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>2008/11/28 Paul Herring &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">pauljherring at gmail.com</A>&gt;:
&gt;<i> On Fri, Nov 28, 2008 at 9:17 AM, Graham Dumpleton
</I>&gt;<i> &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>&gt; wrote:
</I>&gt;<i> [...]
</I>&gt;&gt;&gt;<i> cannot open /usr/local/conf/build/config_vars.mk: No such file or
</I>&gt;&gt;&gt;<i> directory at /f15_nsb/usr/local/bin/apxs line 218.
</I>&gt;&gt;&gt;<i> ./configure: line 2714: /: is a directory
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This indicates that the apxs installation you are trying to use is
</I>&gt;&gt;<i> broken in some way.
</I>&gt;<i>
</I>&gt;<i> It's not broken. It also shouldn't be executed as part of the build process....
</I>
It has to be executed. You seem to fail to understand that 'apxs' is
the Apache tool for building Apache modules. You therefore can't avoid
it being used.

You would need to fudge a version of 'apxs' which is capable of doing
cross compilation. This will likely be non trivial as it is more than
just configuration but also it usage of 'libtool', which would also
need to be made cross compilation aware.

The 'httpd' is executed only to determine Apache version, that could
be hacked around, but you can't avoid 'apxs'. Even if you avoid it in
'configure' script, it is still used from Makefile to do the build.

Graham

&gt;&gt;<i> Specifically, appears to be looking in a location
</I>&gt;&gt;<i> for its files where they aren't.
</I>&gt;<i>
</I>&gt;<i> Indeed.
</I>&gt;<i>
</I>&gt;<i> Assuming that I should be/could run  target binaries on the host
</I>&gt;<i> system, apxs needs to look in the target directory of
</I>&gt;<i> /f15_nsb/usr/local/conf/build/config_vars.mk, for the cross compile to
</I>&gt;<i> work ( - instead it's looking in the host directory.)  Yes I realise
</I>&gt;<i> that apxs is a perl script, but further along in the configure script
</I>&gt;<i> it attempts to run httpd. Something that almost certainly shouldn't be
</I>&gt;<i> executed on the host during a cross compile.
</I>&gt;<i>
</I>&gt;<i> This goes back to my earlier comment about the ./configure script
</I>&gt;<i> trying to run the target binaries/whatever.
</I>&gt;<i>
</I>&gt;&gt;<i> On the command line run:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  /f15_nsb/usr/local/bin/apxs -q LIBDIR
</I>&gt;<i>
</I>&gt;<i> On the host system:
</I>&gt;<i>
</I>&gt;<i> =====&gt;8-----
</I>&gt;<i> cannot open /usr/local/conf/build/config_vars.mk: No such file or
</I>&gt;<i> directory at /f15_nsb/usr/local/bin/apxs line 218.
</I>&gt;<i> =====&gt;8-----
</I>&gt;<i>
</I>&gt;&gt;<i> If that errors, then definitely broken.
</I>&gt;<i>
</I>&gt;<i> It's not broken, it's just being run under circumstances it shouldn't.
</I>&gt;<i> It works fine when run on the target.
</I>&gt;<i>
</I>&gt;<i> In summary, during the build process:
</I>&gt;<i>
</I>&gt;<i> 1) I can't use the target version of apxs, since it's not running on
</I>&gt;<i> the target (and cannot find the files it needs in the places it
</I>&gt;<i> expects them.)
</I>&gt;<i> 2) I can't use the local/host version of apxs, since it doesn't refer
</I>&gt;<i> to the version of apache that will be on the target system.
</I>&gt;<i>
</I>&gt;<i> I'm currently looking into modifying configure.in to be able to supply
</I>&gt;<i> overrides to everything that currently uses target binaries, in much
</I>&gt;<i> the same way that httpd does.
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> PJH
</I>&gt;<i>
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025803.html">[mod_python] Re: Cross compiling mod_python
</A></li>
	<LI>Next message: <A HREF="025805.html">[mod_python] Re: Cross compiling mod_python
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25804">[ date ]</a>
              <a href="thread.html#25804">[ thread ]</a>
              <a href="subject.html#25804">[ subject ]</a>
              <a href="author.html#25804">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
