<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] compiling on solaris 9?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20compiling%20on%20solaris%209%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023419.html">
   <LINK REL="Next"  HREF="023421.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] compiling on solaris 9?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>John_Nowlan</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20compiling%20on%20solaris%209%3F&In-Reply-To="
       TITLE="[mod_python] compiling on solaris 9?">john_nowlan at carleton.ca
       </A><BR>
    <I>Thu Apr  5 13:55:08 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023419.html">[mod_python] Path/address bar contents
</A></li>
        <LI>Next message: <A HREF="023421.html">[mod_python] compiling on solaris 9?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23420">[ date ]</a>
              <a href="thread.html#23420">[ thread ]</a>
              <a href="subject.html#23420">[ subject ]</a>
              <a href="author.html#23420">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have built apache2.2.4 and python2.5. from source, with some tweaks as outlined in some previous emails, i.e. build shared (some relevant snipped bits below).

When I try and compile mod_python now I have a similar problem to what is outlined at:

<A HREF="http://mail-archives.apache.org/mod_mbox/httpd-python-dev/200309.mbox/%3COFD98EF736.64974D7D-ON85256DA2.0054DC15-85256DA2.0055AD14@EU.novartis.net%3E">http://mail-archives.apache.org/mod_mbox/httpd-python-dev/200309.mbox/%3COFD98EF736.64974D7D-ON85256DA2.0054DC15-85256DA2.0055AD14@EU.novartis.net%3E</A>

i.e. lots of 'ld: fatal: relocations remain against allocatable but non-writable sections'

Here is a fuller output:

ar -x `gcc -print-libgcc-file-name` _eprintf.o
ar -x `gcc -print-libgcc-file-name` _floatdidf.o
ar -x `gcc -print-libgcc-file-name` _muldi3.o

Compiling for DSO.

/usr/local/apache2/bin/apxs -I/files/app/modpython/mod_python-3.3.1/src/include -I/usr/local/apache2/in
clude -I/usr/local/include/python2.5 -c mod_python.c _apachemodule.c requestobject.c tableobject.c util
.c  serverobject.c connobject.c filterobject.c hlist.c  hlistobject.c finfoobject.c -L/usr/local/lib/py
thon2.5/config     -L/usr/local/lib -R/usr/local/lib -R/usr/lib -L/usr/lib -L/usr/openwin/lib -R/usr/op
enwin/lib -L/usr/local/ssl/lib -R/usr/local/ssl/lib -L/usr/local/BerkeleyDB.4.2/lib -R/usr/local/Berkel
eyDB.4.2/lib -lm  -lpython2.5   -lresolv -lsocket -lnsl -lrt -ldl  -lpthread   -lm _eprintf.o _floatdid
f.o _muldi3.o
/usr/local/apache2/build/libtool --silent --mode=compile gcc -prefer-pic   -DSOLARIS2=9 -D_POSIX_PTHREA
D_SEMANTICS -D_REENTRANT -D_LARGEFILE64_SOURCE -g -O2 -pthreads -I/usr/local/apache2/include  -I/usr/lo
cal/apache2/include   -I/usr/local/apache2/include -I/usr/local/include -I/files/app/modpython/mod_pyth
on-3.3.1/src/include -I/usr/local/apache2/include -I/usr/local/include/python2.5  -c -o mod_python.lo m
od_python.c &amp;&amp; touch mod_python.slo

snip...

*** Warning: Linking the shared library mod_python.la against the non-libtool
*** objects  _eprintf.o _floatdidf.o _muldi3.o is not portable!
Text relocation remains                         referenced
    against symbol                  offset      in file
&lt;unknown&gt;                           0x1ee4      /usr/local/lib/python2.5/config/libpython2.5.a(floatobj
ect.o)
&lt;unknown&gt; 
&lt;unknown&gt;                           0x1eec      /usr/local/lib/python2.5/config/libpython2.5.a(floatobj
ect.o)
&lt;unknown&gt;                           0x1ef0      /usr/local/lib/python2.5/config/libpython2.5.a(floatobj
ect.o)
&lt;unknown&gt;                           0x1ef4      /usr/local/lib/python2.5/config/libpython2.5.a(floatobj
ect.o)
&lt;unknown&gt;                           0x1ef8      /usr/local/lib/python2.5/config/libpython2.5.a(floatobj
ect.o)
&lt;unknown&gt;                           0x3474      /usr/local/lib/python2.5/config/libpython2.5.a(listobje
ct.o)
&lt;unknown&gt;                           0x3478      /usr/local/lib/python2.5/config/libpython2.5.a(listobje
ct.o)
&lt;unknown&gt;                           0x347c      /usr/local/lib/python2.5/config/libpython2.5.a(listobje
ct.o)
&lt;unknown&gt;                           0x3480      /usr/local/lib/python2.5/config/libpython2.5.a(listobje
ct.o)
&lt;unknown&gt;                           0x3484      /usr/local/lib/python2.5/config/libpython2.5.a(listobje
ct.o)
&lt;unknown&gt;                           0x3488      /usr/local/lib/python2.5/config/libpython2.5.a(listobje
ct.o)
&lt;unknown&gt;                           0x290       /usr/local/lib/python2.5/config/libpython2.5.a(methodob
ject.o)
&lt;unknown&gt;                           0x294       /usr/local/lib/python2.5/config/libpython2.5.a(methodob
ject.o)
...lots more like above unknown symbol, ending with

ld: fatal: relocations remain against allocatable but non-writable sections
collect2: ld returned 1 exit status
apxs:Error: Command failed with rc=65536
.
*** Error code 1
make: Fatal error: Command failed for target `mod_python.so'
Current working directory /files/app/modpython/mod_python-3.3.1/src
*** Error code 1
make: Fatal error: Command failed for target `do_dso'
========================================================

Does anyone have any suggestions as to what I might look for/try? 
The real unix admins are not available at the moment and I'm bruising my head. 

Note that I seemed to have a similar problem with apache2 build seeing the static libs and not the shared libs at first that was apparently caused by some incorrect some symbolic links. Without knowing any better it almost looks to me like it is not seeing /usr/local/lib/python2.5/config/libpython2.5.a as a shared lib or something like that, but what do I know.


&gt;<i> -----Original Message-----
</I>&gt;<i> From: <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python-bounces at modpython.org</A>
</I>&gt;<i> [mailto:<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python-bounces at modpython.org</A>]On Behalf Of Jose De Leon
</I>&gt;<i> Sent: Wednesday, February 28, 2007 1:16 PM
</I>&gt;<i> To: Graham Dumpleton
</I>&gt;<i> Cc: <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython.org</A>
</I>&gt;<i> Subject: Re: [mod_python] Mod_Python Make fails on Solaris 9
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Thank you Graham! You pointed me in the right direction :) ... l 
</I>&gt;<i> recompiled Python 2.5 with Shared Libraries instead of Static, when l 
</I>&gt;<i> recompiled Mod_Python it worked like a charm, thanks again :)
</I>&gt;<i> 
</I>&gt;<i> ./configure --with-shared
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20070405/cc28fed9/attachment.html">http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20070405/cc28fed9/attachment.html</A>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023419.html">[mod_python] Path/address bar contents
</A></li>
	<LI>Next message: <A HREF="023421.html">[mod_python] compiling on solaris 9?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23420">[ date ]</a>
              <a href="thread.html#23420">[ thread ]</a>
              <a href="subject.html#23420">[ subject ]</a>
              <a href="author.html#23420">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
