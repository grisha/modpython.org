<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Access checking against another path
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Access%20checking%20against%20another%20path&In-Reply-To=46368E34.1060008%40rogerbinns.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023538.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Access checking against another path</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Access%20checking%20against%20another%20path&In-Reply-To=46368E34.1060008%40rogerbinns.com"
       TITLE="[mod_python] Access checking against another path">graham.dumpleton at gmail.com
       </A><BR>
    <I>Mon Apr 30 21:32:35 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023538.html">[mod_python] Access checking against another path
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23539">[ date ]</a>
              <a href="thread.html#23539">[ thread ]</a>
              <a href="subject.html#23539">[ subject ]</a>
              <a href="author.html#23539">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 01/05/07, Roger Binns &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">rogerb at rogerbinns.com</A>&gt; wrote:
&gt;<i> -----BEGIN PGP SIGNED MESSAGE-----
</I>&gt;<i> Hash: SHA1
</I>&gt;<i>
</I>&gt;<i> Graham Dumpleton wrote:
</I>&gt;<i> &gt; Note that when using req.internal_redirect(), that called resource
</I>&gt;<i> &gt; then effectively generates the complete response. If you want the
</I>&gt;<i> &gt; output of the sub request to be included as a subcomponent of HTML of
</I>&gt;<i> &gt; parent, then you would really need to do a Python import to get access
</I>&gt;<i> &gt; to Python code for your sub handler and invoke direct as Python code.
</I>&gt;<i>
</I>&gt;<i> I still don't see how this helps me.  It is closer, but doesn't solve
</I>&gt;<i> the fundamental problem of wanting to check the access control.  My
</I>&gt;<i> handler code for /admin would look something like this:
</I>&gt;<i>
</I>&gt;<i> def handler(req):
</I>&gt;<i>   print &quot;Hello world&quot;
</I>&gt;<i>
</I>&gt;<i>   # I can't see how to do the next two lines which could have
</I>&gt;<i>   # different permissions
</I>&gt;<i>   ... check credentials in req against &quot;/api/object/list&quot;
</I>&gt;<i>   ... check credentials in req against &quot;/api/object3/delete&quot;
</I>&gt;<i>
</I>&gt;<i>   # The next two could be done by calling the code that
</I>&gt;<i>   # implements /api directly (or playing with internal_redirect)
</I>&gt;<i>   items=request(&quot;/api/object/list&quot;)
</I>&gt;<i>   request(&quot;/api/%s/delete&quot; % (items[3],))
</I>&gt;<i>
</I>&gt;<i>   print &quot;more output saying item3 was deleted&quot;
</I>
What type of authentication is being used? Is it 'Basic' for AuthType
or something entirely different?

The problem is that the way you are doing it is more or less
circumventing Apache's normal authentication mechanisms. Even if one
had access to the full Apache C API am not sure you could do it in a
way that would be seen as being correct for the way Apache works.

The only way I could conceive of you being able to do it then would be
using a session/cookie based mechanism as other person suggested, with
concept of user roles whereby user who hasn't logged in through web
form doesn't have rights to do stuff. Ie., the sub handlers when
called as Python objects would check what role session has and reject
call if not required rights.

Graham
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023538.html">[mod_python] Access checking against another path
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23539">[ date ]</a>
              <a href="thread.html#23539">[ thread ]</a>
              <a href="subject.html#23539">[ subject ]</a>
              <a href="author.html#23539">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
