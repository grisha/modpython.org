<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Mod_Python and RewriteRule
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Mod_Python%20and%20RewriteRule&In-Reply-To=8e3f377c0704111613w3ce238ffqd125dd47333de2d7%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023459.html">
   <LINK REL="Next"  HREF="023461.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Mod_Python and RewriteRule</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Mod_Python%20and%20RewriteRule&In-Reply-To=8e3f377c0704111613w3ce238ffqd125dd47333de2d7%40mail.gmail.com"
       TITLE="[mod_python] Mod_Python and RewriteRule">graham.dumpleton at gmail.com
       </A><BR>
    <I>Wed Apr 11 19:17:54 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023459.html">[mod_python] Mod_Python and RewriteRule
</A></li>
        <LI>Next message: <A HREF="023461.html">[mod_python] Mod_Python and RewriteRule
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23460">[ date ]</a>
              <a href="thread.html#23460">[ thread ]</a>
              <a href="subject.html#23460">[ subject ]</a>
              <a href="author.html#23460">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 12/04/07, Nathan C. Tresch &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">nathan at yapta.com</A>&gt; wrote:
&gt;<i> When I use [PT] both Firefox and IE continually reload the page and peg the
</I>&gt;<i> CPU at 100%, however, I get the content I'm after.
</I>
If you see the content you want but the browser is reloading, that
would suggest an issue with the page. Does the HTML for the page have
some meta data which forces a reload after some period. Can you use
some low level mechanism to get the page (curl, wget, telnet) and see
what the actual HTTP status code is and confirm it is just a 200 and
not some sort of redirection status. Also look to see if a Location
header is being returned which may be a target of a redirect.

Graham

&gt;<i> The other two options alter the debug output slightly, but still give the
</I>&gt;<i> same result.  The extra output just seems to specify it's setting the
</I>&gt;<i> MIME-type to mod_python
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 4/11/07, Graham Dumpleton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt; Does it make any difference if you use:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;   RewriteRule /trip-([0-9]*)/.*/
</I>&gt;<i> /user/trip.myt\?tab=airlines&amp;id=$1 [PT]
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; or:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;   RewriteRule /trip-([0-9]*)/.*/
</I>&gt;<i> /user/trip.myt\?tab=airlines&amp;id=$1
</I>&gt;<i> &gt; [H=mod_python]
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Can't remember if latter requires Apache 2.2 If older version of
</I>&gt;<i> &gt; Apache maybe try:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;   RewriteRule /trip-([0-9]*)/.*/
</I>&gt;<i> /user/trip.myt\?tab=airlines&amp;id=$1
</I>&gt;<i> &gt; [T=mod_python]
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Graham
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On 12/04/07, Nathan C. Tresch &lt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">nathan at yapta.com</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; Yes,  /user/trip.myt?tab=airline&amp;id=18335 works.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;     AddHandler mod_python .py
</I>&gt;<i> &gt; &gt;     AddHandler mod_python .myt
</I>&gt;<i> &gt; &gt;     PythonHandler myghty.ApacheHandler::handle
</I>&gt;<i> &gt; &gt;     PythonPath
</I>&gt;<i> &gt; &gt; &quot;[r'/usr/local/data/wwwdev/ntresch']+sys.path&quot;
</I>&gt;<i> &gt; &gt;     PythonOption MyghtyInterpreterName r&quot;ntresch_interp&quot;
</I>&gt;<i> &gt; &gt;     PythonOption MyghtyComponentRoot \
</I>&gt;<i> &gt; &gt;     &quot;[  \
</I>&gt;<i> &gt; &gt;         {'components':'/data/wwwdev/ntresch/public'}, \
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; {'templates':'/data/wwwdev/ntresch/myghty/templates'} \
</I>&gt;<i> &gt; &gt;     ]&quot;
</I>&gt;<i> &gt; &gt;     PythonOption MyghtyDataDir
</I>&gt;<i> &gt; &gt; r&quot;/data/wwwdev/ntresch/myghty/data&quot;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;     #PythonHandler mod_python.publisher
</I>&gt;<i> &gt; &gt;     PythonDebug On
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; These lines are located in the main apache config file.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; On 4/11/07, Graham Dumpleton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; &gt; Does using:
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;   /user/trip.myt?tab=airline&amp;id=18335
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; in the browser work?
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; What is the Apache configuration snippet you are using to enable
</I>&gt;<i> &gt; &gt; &gt; mod_python for this URL? Where is it located, main Apache
</I>&gt;<i> &gt; &gt; &gt; configuration or .htaccess file?
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; Graham
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; On 12/04/07, Nathan C. Tresch &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">nathan at yapta.com</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; &gt; &gt; So, here is what I get:
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; %tail -f rewrite_log
</I>&gt;<i> &gt; &gt; &gt; &gt; 67.42.99.238 - - [11/Apr/2007:15:44:23 --0700] [
</I>&gt;<i> &gt; &gt; &gt; &gt; dev.yapta.com/sid#80d05f0][rid#8d3c050/initial ]
</I>&gt;<i> (2)
</I>&gt;<i> &gt; &gt; init
</I>&gt;<i> &gt; &gt; &gt; &gt; rewrite engine with requested uri /trip-18335/Minneapolis/St.
</I>&gt;<i> &gt; &gt; &gt; &gt; Paul/Washington/
</I>&gt;<i> &gt; &gt; &gt; &gt; 67.42.99.238 - - [11/Apr/2007:15:44:23 --0700] [
</I>&gt;<i> &gt; &gt; &gt; &gt; dev.yapta.com/sid#80d05f0][rid#8d3c050/initial] (3)
</I>&gt;<i> &gt; &gt; &gt; &gt; applying pattern '/trip-([0-9]*)/.*/' to uri
</I>&gt;<i> &gt; &gt; '/trip-18335/Minneapolis/St.
</I>&gt;<i> &gt; &gt; &gt; &gt; Paul/Washington/'
</I>&gt;<i> &gt; &gt; &gt; &gt;  67.42.99.238 - - [11/Apr/2007:15:44:23 --0700] [
</I>&gt;<i> &gt; &gt; &gt; &gt; dev.yapta.com/sid#80d05f0][rid#8d3c050/initial] (2)
</I>&gt;<i> &gt; &gt; rewrite
</I>&gt;<i> &gt; &gt; &gt; &gt; '/trip-18335/Minneapolis/St. Paul/Washington/' -&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; '/user/trip.myt?tab=airline&amp;id=18335'
</I>&gt;<i> &gt; &gt; &gt; &gt; 67.42.99.238 - - [11/Apr/2007:15:44:23 --0700] [
</I>&gt;<i> &gt; &gt; &gt; &gt; dev.yapta.com/sid#80d05f0][rid#8d3c050/initial ]
</I>&gt;<i> (3)
</I>&gt;<i> &gt; &gt; split
</I>&gt;<i> &gt; &gt; &gt; &gt; uri=/user/trip.myt?tab=airline&amp;id=18335 -&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; uri=/user/trip.myt, args=tab=airline&amp;id=18335
</I>&gt;<i> &gt; &gt; &gt; &gt; 67.42.99.238 - - [11/Apr/2007:15:44:23 --0700] [
</I>&gt;<i> &gt; &gt; &gt; &gt; dev.yapta.com/sid#80d05f0][rid#8d3c050/initial] (2)
</I>&gt;<i> &gt; &gt; local
</I>&gt;<i> &gt; &gt; &gt; &gt; path result: /user/trip.myt
</I>&gt;<i> &gt; &gt; &gt; &gt; 67.42.99.238 - - [11/Apr/2007:15:44:23 --0700] [
</I>&gt;<i> &gt; &gt; &gt; &gt; dev.yapta.com/sid#80d05f0][rid#8d3c050/initial ]
</I>&gt;<i> (2)
</I>&gt;<i> &gt; &gt; &gt; &gt; prefixed with document_root to
</I>&gt;<i> &gt; &gt; &gt; &gt; /usr/local/data/wwwdev/ntresch/public/user/trip.myt
</I>&gt;<i> &gt; &gt; &gt; &gt; 67.42.99.238 - - [11/Apr/2007:15:44:23 --0700] [
</I>&gt;<i> &gt; &gt; &gt; &gt; dev.yapta.com/sid#80d05f0][rid#8d3c050/initial ]
</I>&gt;<i> (1)
</I>&gt;<i> &gt; &gt; &gt; &gt; go-ahead with
</I>&gt;<i> &gt; &gt; &gt; &gt; /usr/local/data/wwwdev/ntresch/public/user/trip.myt
</I>&gt;<i> &gt; &gt; [OK]
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; Yet my browser still gives me a 404.
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; I suspect it's because python/myghty is looking for something in the
</I>&gt;<i> &gt; &gt; &gt; &gt; origional path, it's modules maybe?  And it can't find anything
</I>&gt;<i> there.
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt;  On 4/11/07, Graham Dumpleton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; On 12/04/07, Nathan C. Tresch &lt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">nathan at yapta.com</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; We're using Myghty and Mod_Python.  The following RewriteRule
</I>&gt;<i> &gt; &gt; produces a
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; 404:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; RewriteRule /trip-([0-9]*)/.*/
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; /user/trip.myt\?tab=airlines&amp;id=$1 [L]
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; Previously, before we converted to PHP, the rule looked like
</I>&gt;<i> this:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; RewriteRule /trip-([0-9]*)/.*/
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; /user/trip.php\?tab=airlines&amp;id=$1 [L]
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; This worked.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; Can anyone tell me what gives?
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; Have you tried debugging what mod_rewrite is doing by increasing
</I>&gt;<i> its
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; logging output using the RewriteLogLevel directive etc? From that
</I>&gt;<i> you
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; can see what it finally rewrites it to. You can then try putting
</I>&gt;<i> that
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; URL into the browser directly and try and work out why any other
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; configuration may not be correct.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; Graham
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; --
</I>&gt;<i> &gt; &gt; &gt; &gt; Nathan C. Tresch
</I>&gt;<i> &gt; &gt; &gt; &gt; Software Engineer
</I>&gt;<i> &gt; &gt; &gt; &gt; YapTA! Inc.
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; --
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Nathan C. Tresch
</I>&gt;<i> &gt; &gt; Software Engineer
</I>&gt;<i> &gt; &gt; YapTA! Inc.
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i>
</I>&gt;<i> Nathan C. Tresch
</I>&gt;<i> Software Engineer
</I>&gt;<i> YapTA! Inc.
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023459.html">[mod_python] Mod_Python and RewriteRule
</A></li>
	<LI>Next message: <A HREF="023461.html">[mod_python] Mod_Python and RewriteRule
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23460">[ date ]</a>
              <a href="thread.html#23460">[ thread ]</a>
              <a href="subject.html#23460">[ subject ]</a>
              <a href="author.html#23460">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
