<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Getting query parameters when there is RewriteRule
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Getting%20query%20parameters%20when%20there%20is%20RewriteRule&In-Reply-To=BAY103-F109342CBF13C2B8F4F625ABD480%40phx.gbl">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023515.html">
   <LINK REL="Next"  HREF="023524.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Getting query parameters when there is RewriteRule</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Getting%20query%20parameters%20when%20there%20is%20RewriteRule&In-Reply-To=BAY103-F109342CBF13C2B8F4F625ABD480%40phx.gbl"
       TITLE="[mod_python] Getting query parameters when there is RewriteRule">graham.dumpleton at gmail.com
       </A><BR>
    <I>Wed Apr 25 23:05:00 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023515.html">[mod_python] Getting query parameters when there is RewriteRule
</A></li>
        <LI>Next message: <A HREF="023524.html">[mod_python] Getting query parameters when there is RewriteRule
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23516">[ date ]</a>
              <a href="thread.html#23516">[ thread ]</a>
              <a href="subject.html#23516">[ subject ]</a>
              <a href="author.html#23516">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 26/04/07, sliderw hotmail &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">sliderw at hotmail.com</A>&gt; wrote:
&gt;<i> In httpd.conf, I have:
</I>&gt;<i>
</I>&gt;<i> RewriteRule ^/dl/([^/\?]+)/([^/\?]+)/? /dl/myhandler.py?a=$1&amp;b=$2 [PT,L]
</I>&gt;<i>
</I>&gt;<i> and:
</I>&gt;<i>
</I>&gt;<i> Alias /dl/ &quot;/some/path/&quot;
</I>&gt;<i> &lt;Directory &quot;/some/path/&quot;&gt;
</I>&gt;<i>   ... mod_python stuff here for myhandler ...
</I>&gt;<i> &lt;/Directory&gt;
</I>&gt;<i>
</I>&gt;<i> myhandler gets the query parameters using qp =
</I>&gt;<i> req.parsed_uri[apache.URI_QUERY]. If I go to
</I>&gt;<i> <A HREF="http://www.mysite.com/dl/myhandler.py?a=1&amp;b=2,">http://www.mysite.com/dl/myhandler.py?a=1&amp;b=2,</A> qp is &quot;a=1&amp;b=2&quot;, as expected.
</I>&gt;<i> On the other hand, if I go to <A HREF="http://www.mysite.com/dl/1/2/,">http://www.mysite.com/dl/1/2/,</A> qp is None, but
</I>&gt;<i> I expect qp is &quot;a=1&amp;b=2&quot;. How can I make this work?
</I>
Have you enabled debug in mod_rewrite and looked at the rewrite log to
verify what that your rule matches and is getting rewritten to what
you expect it to? What does it show?

What is the 'mod_python stuff here for myhandler' which you are using?

Have you tried using 'req.args' instead of getting it out of req.parsed_uri?

There is possibly a better way of doing this which avoids mod_rewrite
altogether but will have to think about it first before I suggest some
code to actually try. In short though it involves using a fixuphandler
to trigger mod_python instead of the Apache configuration. One can be
explicit about handler you then want executed and pass what you are
passing through as args as attributes stored against the request
object. Avoids having to do form args processing in actual response
handler.

Graham
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023515.html">[mod_python] Getting query parameters when there is RewriteRule
</A></li>
	<LI>Next message: <A HREF="023524.html">[mod_python] Getting query parameters when there is RewriteRule
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23516">[ date ]</a>
              <a href="thread.html#23516">[ thread ]</a>
              <a href="subject.html#23516">[ subject ]</a>
              <a href="author.html#23516">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
