<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> FW: [mod_python] mod_python,
	python_handler error &quot;Can't get/create interpreter&quot;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=FW%3A%20%5Bmod_python%5D%20mod_python%2C%0A%09python_handler%20error%20%22Can%27t%20get/create%20interpreter%22&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023510.html">
   <LINK REL="Next"  HREF="023512.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>FW: [mod_python] mod_python,
	python_handler error &quot;Can't get/create interpreter&quot;</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Sean Glover</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=FW%3A%20%5Bmod_python%5D%20mod_python%2C%0A%09python_handler%20error%20%22Can%27t%20get/create%20interpreter%22&In-Reply-To="
       TITLE="FW: [mod_python] mod_python,
	python_handler error &quot;Can't get/create interpreter&quot;">seanglover at sympatico.ca
       </A><BR>
    <I>Tue Apr 24 20:00:34 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023510.html">[mod_python] cache.py Cache.__delitem__ bug
</A></li>
        <LI>Next message: <A HREF="023512.html">[mod_python] mod_python,
	python_handler error &quot;Can't get/create interpreter&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23511">[ date ]</a>
              <a href="thread.html#23511">[ thread ]</a>
              <a href="subject.html#23511">[ subject ]</a>
              <a href="author.html#23511">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Looks like 'hashlib' and '_hashlib' alike are installed ok.

Python 2.5 (r25:51908, Apr  9 2007, 20:22:40)
[GCC 3.4.4 [FreeBSD] 20050518] on freebsd6
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt;<i> import _hashlib
</I>&gt;&gt;&gt;<i> import hashlib
</I>&gt;&gt;&gt;<i> dir(_hashlib)
</I>['__doc__', '__file__', '__name__', 'new', 'openssl_md5', 'openssl_sha1',
'opens
sl_sha224', 'openssl_sha256', 'openssl_sha384', 'openssl_sha512']

Btw, appreciating the help so far! =)

-----Original Message-----
From: Graham Dumpleton [mailto:<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>] 
Sent: Monday, April 23, 2007 8:53 PM
To: Sean Glover
Cc: <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython.org</A>
Subject: Re: [mod_python] mod_python, python_handler error &quot;Can't get/create
interpreter&quot;

On 24/04/07, Sean Glover &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">seanglover at sympatico.ca</A>&gt; wrote:
&gt;<i> Graham,
</I>&gt;<i>
</I>&gt;<i> I removed the line from my httpd.conf that loaded the php5 module and
</I>&gt;<i> restarted:
</I>&gt;<i>
</I>&gt;<i> #LoadModule php5_module        libexec/apache22/libphp5.so
</I>&gt;<i>
</I>&gt;<i> Unfortunately, I still get the same error message.
</I>&gt;<i>
</I>&gt;<i> I loaded the 'md5' library in the python 2.5 terminal successfully, but
</I>was
&gt;<i> unable to load '_md5'.
</I>&gt;<i>
</I>&gt;<i> Python 2.5 (r25:51908, Apr  9 2007, 20:22:40)
</I>&gt;<i> [GCC 3.4.4 [FreeBSD] 20050518] on freebsd6
</I>&gt;<i> Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
</I>&gt;<i> &gt;&gt;&gt; import md5
</I>&gt;<i> &gt;&gt;&gt; import _md5
</I>&gt;<i> Traceback (most recent call last):
</I>&gt;<i>   File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
</I>&gt;<i> ImportError: No module named _md5
</I>
Hmmm, next time I should read the error messages properly. Problem is
that new Python 2.5 'hashlib' module is the one that is loading '_md5'
module. The 'hashlib' module being required by 'urllib2'.

The thing is that 'hashlib' shouldn't be trying to import '_md5' if
the '_hashlib' module imports okay from 'hashlib', which is what it
should use these days instead of '_md5'.

What do you get if you try importing '_hashlib' from command line
Python. If that doesn't work then your Python installed is borked in
some way and you will need to work out how to get 'hashlib' module to
import successfully from command line Python before you can get any
further.

Note that if 'hashlib' does import okay from command line, the problem
may be that '_hashlib' has shared library dependencies that can't be
resolved when imported under Apache. In that case you will need to
run:

  ldd _hashlib.so

from Python library directory and work out what libraries it uses and
where they are. If they are in a non standard location then you may
have to set directory in LD_LIBRARY_PATH for Apache to tell it where
they are. Ideally Python would be rebuilt while setting LD_RUN_PATH in
environment with that non standard library location so that directory
gets embedded in '_hashlib.so'.

Hopefully that makes half sense. :-)

Graham

&gt;<i> Error:
</I>&gt;<i>
</I>&gt;<i> [Mon Apr 23 20:21:28 2007] [error] make_obcallback: could not call init.\n
</I>&gt;<i> Traceback (most recent call last):
</I>&gt;<i>   File &quot;/usr/local/lib/python2.5/site-packages/mod_python/apache.py&quot;, line
</I>&gt;<i> 937, in init
</I>&gt;<i>     from mod_python import importer
</I>&gt;<i>   File &quot;/usr/local/lib/python2.5/site-packages/mod_python/importer.py&quot;,
</I>line
&gt;<i> 24, in &lt;module&gt;
</I>&gt;<i>     from mod_python import publisher
</I>&gt;<i>   File &quot;/usr/local/lib/python2.5/site-packages/mod_python/publisher.py&quot;,
</I>&gt;<i> line 50, in &lt;module&gt;
</I>&gt;<i>     from cache import ModuleCache, NOT_INITIALIZED
</I>&gt;<i>   File &quot;/usr/local/lib/python2.5/site-packages/mod_python/cache.py&quot;, line
</I>&gt;<i> 27, in &lt;module&gt;
</I>&gt;<i>     import urllib2
</I>&gt;<i>   File &quot;/usr/local/lib/python2.5/urllib2.py&quot;, line 88, in &lt;module&gt;
</I>&gt;<i>     import hashlib
</I>&gt;<i>   File &quot;/usr/local/lib/python2.5/hashlib.py&quot;, line 104, in &lt;module&gt;
</I>&gt;<i>     md5 = __get_builtin_constructor('md5')
</I>&gt;<i>   File &quot;/usr/local/lib/python2.5/hashlib.py&quot;, line 31, in
</I>&gt;<i> __get_builtin_constructor
</I>&gt;<i>     import _md5
</I>&gt;<i> ImportError: No module named _md5
</I>&gt;<i> [Mon Apr 23 20:21:28 2007] [error] get_interpreter: no interpreter
</I>callback
&gt;<i> found.
</I>&gt;<i> [Mon Apr 23 20:21:28 2007] [error] [client 76.64.190.137] python_handler:
</I>&gt;<i> Can't get/create interpreter., referer: <A HREF="http://randonom.com/test/python/">http://randonom.com/test/python/</A>
</I>&gt;<i>
</I>&gt;<i> Sean
</I>&gt;<i>
</I>&gt;<i> -----Original Message-----
</I>&gt;<i> From: Graham Dumpleton [mailto:<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>]
</I>&gt;<i> Sent: Monday, April 23, 2007 7:09 PM
</I>&gt;<i> To: Sean Glover
</I>&gt;<i> Cc: <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython.org</A>
</I>&gt;<i> Subject: Re: [mod_python] mod_python, python_handler error &quot;Can't
</I>get/create
&gt;<i> interpreter&quot;
</I>&gt;<i>
</I>&gt;<i> On 24/04/07, Sean Glover &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">seanglover at sympatico.ca</A>&gt; wrote:
</I>&gt;<i> &gt; [Mon Apr 23 18:52:47 2007] [error] make_obcallback: could not call
</I>init.\n
&gt;<i> &gt; Traceback (most recent call last):
</I>&gt;<i> &gt;   File &quot;/usr/local/lib/python2.5/site-packages/mod_python/apache.py&quot;,
</I>line
&gt;<i> &gt; 937,in init
</I>&gt;<i> &gt;     from mod_python import importer
</I>&gt;<i> &gt;   File &quot;/usr/local/lib/python2.5/site-packages/mod_python/importer.py&quot;,
</I>&gt;<i> line
</I>&gt;<i> &gt; 24, in &lt;module&gt;
</I>&gt;<i> &gt;     from mod_python import publisher
</I>&gt;<i> &gt;   File &quot;/usr/local/lib/python2.5/site-packages/mod_python/publisher.py&quot;,
</I>&gt;<i> &gt; line 50, in &lt;module&gt;
</I>&gt;<i> &gt;     from cache import ModuleCache, NOT_INITIALIZED
</I>&gt;<i> &gt;   File &quot;/usr/local/lib/python2.5/site-packages/mod_python/cache.py&quot;,
</I>line
&gt;<i> &gt; 27, in &lt;module&gt;
</I>&gt;<i> &gt;     import urllib2
</I>&gt;<i> &gt;   File &quot;/usr/local/lib/python2.5/urllib2.py&quot;, line 88, in &lt;module&gt;
</I>&gt;<i> &gt;     import hashlib
</I>&gt;<i> &gt;   File &quot;/usr/local/lib/python2.5/hashlib.py&quot;, line 104, in &lt;module&gt;
</I>&gt;<i> &gt;     md5 = __get_builtin_constructor('md5')
</I>&gt;<i> &gt;   File &quot;/usr/local/lib/python2.5/hashlib.py&quot;, line 31, in
</I>&gt;<i> &gt; __get_builtin_constructor
</I>&gt;<i> &gt;     import _md5
</I>&gt;<i> &gt; ImportError: No module named _md5
</I>&gt;<i> &gt; [Mon Apr 23 18:52:47 2007] [error] get_interpreter: no interpreter
</I>&gt;<i> callback
</I>&gt;<i> &gt; found.
</I>&gt;<i> &gt; [Mon Apr 23 18:52:47 2007] [error] [client 76.64.190.137]
</I>python_handler:
&gt;<i> &gt; Can't get/create interpreter.
</I>&gt;<i>
</I>&gt;<i> And there be the real problem. Either that version of Python hasn't
</I>&gt;<i> got the md5 module installed, or you are running PHP on the same
</I>&gt;<i> server and it is loading the mhash.so PHP module which has shown in
</I>&gt;<i> the past to conflict in bad ways with mod_python.
</I>&gt;<i>
</I>&gt;<i> Thus, check if from command line Python you can import 'md5' module.
</I>&gt;<i> If that works, disable PHP on web server and see if problem goes away.
</I>&gt;<i> If it does, work out how to disable PHP mhash.so so it doesn't load.
</I>&gt;<i>
</I>&gt;<i> Graham
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>                                                  

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023510.html">[mod_python] cache.py Cache.__delitem__ bug
</A></li>
	<LI>Next message: <A HREF="023512.html">[mod_python] mod_python,
	python_handler error &quot;Can't get/create interpreter&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23511">[ date ]</a>
              <a href="thread.html#23511">[ thread ]</a>
              <a href="subject.html#23511">[ subject ]</a>
              <a href="author.html#23511">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
