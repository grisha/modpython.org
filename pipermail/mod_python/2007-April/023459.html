<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Mod_Python and RewriteRule
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Mod_Python%20and%20RewriteRule&In-Reply-To=88e286470704111605s53ebc67fu8da69cbd6d39cfa9%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023458.html">
   <LINK REL="Next"  HREF="023460.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Mod_Python and RewriteRule</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Nathan C. Tresch</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Mod_Python%20and%20RewriteRule&In-Reply-To=88e286470704111605s53ebc67fu8da69cbd6d39cfa9%40mail.gmail.com"
       TITLE="[mod_python] Mod_Python and RewriteRule">nathan at yapta.com
       </A><BR>
    <I>Wed Apr 11 19:13:16 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023458.html">[mod_python] Mod_Python and RewriteRule
</A></li>
        <LI>Next message: <A HREF="023460.html">[mod_python] Mod_Python and RewriteRule
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23459">[ date ]</a>
              <a href="thread.html#23459">[ thread ]</a>
              <a href="subject.html#23459">[ subject ]</a>
              <a href="author.html#23459">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>When I use [PT] both Firefox and IE continually reload the page and peg the
CPU at 100%, however, I get the content I'm after.

The other two options alter the debug output slightly, but still give the
same result.  The extra output just seems to specify it's setting the
MIME-type to mod_python


On 4/11/07, Graham Dumpleton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> Does it make any difference if you use:
</I>&gt;<i>
</I>&gt;<i>   RewriteRule /trip-([0-9]*)/.*/ /user/trip.myt\?tab=airlines&amp;id=$1 [PT]
</I>&gt;<i>
</I>&gt;<i> or:
</I>&gt;<i>
</I>&gt;<i>   RewriteRule /trip-([0-9]*)/.*/ /user/trip.myt\?tab=airlines&amp;id=$1
</I>&gt;<i> [H=mod_python]
</I>&gt;<i>
</I>&gt;<i> Can't remember if latter requires Apache 2.2 If older version of
</I>&gt;<i> Apache maybe try:
</I>&gt;<i>
</I>&gt;<i>   RewriteRule /trip-([0-9]*)/.*/ /user/trip.myt\?tab=airlines&amp;id=$1
</I>&gt;<i> [T=mod_python]
</I>&gt;<i>
</I>&gt;<i> Graham
</I>&gt;<i>
</I>&gt;<i> On 12/04/07, Nathan C. Tresch &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">nathan at yapta.com</A>&gt; wrote:
</I>&gt;<i> &gt; Yes,  /user/trip.myt?tab=airline&amp;id=18335 works.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     AddHandler mod_python .py
</I>&gt;<i> &gt;     AddHandler mod_python .myt
</I>&gt;<i> &gt;     PythonHandler myghty.ApacheHandler::handle
</I>&gt;<i> &gt;     PythonPath
</I>&gt;<i> &gt; &quot;[r'/usr/local/data/wwwdev/ntresch']+sys.path&quot;
</I>&gt;<i> &gt;     PythonOption MyghtyInterpreterName r&quot;ntresch_interp&quot;
</I>&gt;<i> &gt;     PythonOption MyghtyComponentRoot \
</I>&gt;<i> &gt;     &quot;[  \
</I>&gt;<i> &gt;         {'components':'/data/wwwdev/ntresch/public'}, \
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; {'templates':'/data/wwwdev/ntresch/myghty/templates'} \
</I>&gt;<i> &gt;     ]&quot;
</I>&gt;<i> &gt;     PythonOption MyghtyDataDir
</I>&gt;<i> &gt; r&quot;/data/wwwdev/ntresch/myghty/data&quot;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     #PythonHandler mod_python.publisher
</I>&gt;<i> &gt;     PythonDebug On
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; These lines are located in the main apache config file.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On 4/11/07, Graham Dumpleton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; Does using:
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;   /user/trip.myt?tab=airline&amp;id=18335
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; in the browser work?
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; What is the Apache configuration snippet you are using to enable
</I>&gt;<i> &gt; &gt; mod_python for this URL? Where is it located, main Apache
</I>&gt;<i> &gt; &gt; configuration or .htaccess file?
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Graham
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; On 12/04/07, Nathan C. Tresch &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">nathan at yapta.com</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; &gt; So, here is what I get:
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; %tail -f rewrite_log
</I>&gt;<i> &gt; &gt; &gt; 67.42.99.238 - - [11/Apr/2007:15:44:23 --0700] [
</I>&gt;<i> &gt; &gt; &gt; dev.yapta.com/sid#80d05f0][rid#8d3c050/initial ] (2)
</I>&gt;<i> &gt; init
</I>&gt;<i> &gt; &gt; &gt; rewrite engine with requested uri /trip-18335/Minneapolis/St.
</I>&gt;<i> &gt; &gt; &gt; Paul/Washington/
</I>&gt;<i> &gt; &gt; &gt; 67.42.99.238 - - [11/Apr/2007:15:44:23 --0700] [
</I>&gt;<i> &gt; &gt; &gt; dev.yapta.com/sid#80d05f0][rid#8d3c050/initial] (3)
</I>&gt;<i> &gt; &gt; &gt; applying pattern '/trip-([0-9]*)/.*/' to uri
</I>&gt;<i> &gt; '/trip-18335/Minneapolis/St.
</I>&gt;<i> &gt; &gt; &gt; Paul/Washington/'
</I>&gt;<i> &gt; &gt; &gt;  67.42.99.238 - - [11/Apr/2007:15:44:23 --0700] [
</I>&gt;<i> &gt; &gt; &gt; dev.yapta.com/sid#80d05f0][rid#8d3c050/initial] (2)
</I>&gt;<i> &gt; rewrite
</I>&gt;<i> &gt; &gt; &gt; '/trip-18335/Minneapolis/St. Paul/Washington/' -&gt;
</I>&gt;<i> &gt; &gt; &gt; '/user/trip.myt?tab=airline&amp;id=18335'
</I>&gt;<i> &gt; &gt; &gt; 67.42.99.238 - - [11/Apr/2007:15:44:23 --0700] [
</I>&gt;<i> &gt; &gt; &gt; dev.yapta.com/sid#80d05f0][rid#8d3c050/initial] (3)
</I>&gt;<i> &gt; split
</I>&gt;<i> &gt; &gt; &gt; uri=/user/trip.myt?tab=airline&amp;id=18335 -&gt;
</I>&gt;<i> &gt; &gt; &gt; uri=/user/trip.myt, args=tab=airline&amp;id=18335
</I>&gt;<i> &gt; &gt; &gt; 67.42.99.238 - - [11/Apr/2007:15:44:23 --0700] [
</I>&gt;<i> &gt; &gt; &gt; dev.yapta.com/sid#80d05f0][rid#8d3c050/initial] (2)
</I>&gt;<i> &gt; local
</I>&gt;<i> &gt; &gt; &gt; path result: /user/trip.myt
</I>&gt;<i> &gt; &gt; &gt; 67.42.99.238 - - [11/Apr/2007:15:44:23 --0700] [
</I>&gt;<i> &gt; &gt; &gt; dev.yapta.com/sid#80d05f0][rid#8d3c050/initial] (2)
</I>&gt;<i> &gt; &gt; &gt; prefixed with document_root to
</I>&gt;<i> &gt; &gt; &gt; /usr/local/data/wwwdev/ntresch/public/user/trip.myt
</I>&gt;<i> &gt; &gt; &gt; 67.42.99.238 - - [11/Apr/2007:15:44:23 --0700] [
</I>&gt;<i> &gt; &gt; &gt; dev.yapta.com/sid#80d05f0][rid#8d3c050/initial ] (1)
</I>&gt;<i> &gt; &gt; &gt; go-ahead with
</I>&gt;<i> &gt; &gt; &gt; /usr/local/data/wwwdev/ntresch/public/user/trip.myt
</I>&gt;<i> &gt; [OK]
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; Yet my browser still gives me a 404.
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; I suspect it's because python/myghty is looking for something in the
</I>&gt;<i> &gt; &gt; &gt; origional path, it's modules maybe?  And it can't find anything
</I>&gt;<i> there.
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;  On 4/11/07, Graham Dumpleton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; &gt; &gt; On 12/04/07, Nathan C. Tresch &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">nathan at yapta.com</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; We're using Myghty and Mod_Python.  The following RewriteRule
</I>&gt;<i> &gt; produces a
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; 404:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; RewriteRule /trip-([0-9]*)/.*/
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; /user/trip.myt\?tab=airlines&amp;id=$1 [L]
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; Previously, before we converted to PHP, the rule looked like
</I>&gt;<i> this:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; RewriteRule /trip-([0-9]*)/.*/
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; /user/trip.php\?tab=airlines&amp;id=$1 [L]
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; This worked.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; Can anyone tell me what gives?
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; Have you tried debugging what mod_rewrite is doing by increasing
</I>&gt;<i> its
</I>&gt;<i> &gt; &gt; &gt; &gt; logging output using the RewriteLogLevel directive etc? From that
</I>&gt;<i> you
</I>&gt;<i> &gt; &gt; &gt; &gt; can see what it finally rewrites it to. You can then try putting
</I>&gt;<i> that
</I>&gt;<i> &gt; &gt; &gt; &gt; URL into the browser directly and try and work out why any other
</I>&gt;<i> &gt; &gt; &gt; &gt; configuration may not be correct.
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; Graham
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; --
</I>&gt;<i> &gt; &gt; &gt; Nathan C. Tresch
</I>&gt;<i> &gt; &gt; &gt; Software Engineer
</I>&gt;<i> &gt; &gt; &gt; YapTA! Inc.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; --
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Nathan C. Tresch
</I>&gt;<i> &gt; Software Engineer
</I>&gt;<i> &gt; YapTA! Inc.
</I>&gt;<i>
</I>


-- 
Nathan C. Tresch
Software Engineer
YapTA! Inc.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20070411/e2a316dc/attachment-0001.html">http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20070411/e2a316dc/attachment-0001.html</A>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023458.html">[mod_python] Mod_Python and RewriteRule
</A></li>
	<LI>Next message: <A HREF="023460.html">[mod_python] Mod_Python and RewriteRule
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23459">[ date ]</a>
              <a href="thread.html#23459">[ thread ]</a>
              <a href="subject.html#23459">[ subject ]</a>
              <a href="author.html#23459">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
