<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Streaming output
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Streaming%20output&In-Reply-To=928306280704231533g31951251lcd2f9936187e21f0%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023502.html">
   <LINK REL="Next"  HREF="023504.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Streaming output</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Streaming%20output&In-Reply-To=928306280704231533g31951251lcd2f9936187e21f0%40mail.gmail.com"
       TITLE="[mod_python] Streaming output">graham.dumpleton at gmail.com
       </A><BR>
    <I>Mon Apr 23 18:44:03 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023502.html">[mod_python] Streaming output
</A></li>
        <LI>Next message: <A HREF="023504.html">[mod_python] Streaming output
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23503">[ date ]</a>
              <a href="thread.html#23503">[ thread ]</a>
              <a href="subject.html#23503">[ subject ]</a>
              <a href="author.html#23503">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 24/04/07, Greg Fawcett &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">greg at vig.co.nz</A>&gt; wrote:
&gt;<i> Hi -
</I>&gt;<i>
</I>&gt;<i> Is there any way to stream output to a request object, instead of using
</I>&gt;<i> req.write()? My application has to serve PDF documents (sometimes several
</I>&gt;<i> tens of megabytes long). Access to these has to be controlled, and they are
</I>&gt;<i> encrypted, so I can't just expose them as normal files to apache. PHP has a
</I>&gt;<i> useful function passthru(command) which will run command and stream the
</I>&gt;<i> output directly back to the client - is there any equivalent in python?
</I>&gt;<i>
</I>&gt;<i> On a related note, how &quot;direct&quot; is req.write()? I'd hate it to be buffering
</I>&gt;<i> the whole PDF up somewhere along the line, before sending it to the client.
</I>
Check the documentation and I think you will find your answer.

  <A HREF="http://www.modpython.org/live/current/doc-html/pyapi-mprequest-meth.html">http://www.modpython.org/live/current/doc-html/pyapi-mprequest-meth.html</A>

For write():

write(string[, flush=1])
    Writes string directly to the client, then flushes the buffer,
unless flush is 0.

Thus, it defaults to flushing data as soon as written, but this can be
disabled and output will be buffered up until request is done.

sendfile(path[, offset, len])
    Sends len bytes of file path directly to the client, starting at
offset offset using the server's internal API. offset defaults to 0,
and len defaults to -1 (send the entire file).

    Returns the number of bytes sent, or raises an IOError exception on failure.

    This function provides the most efficient way to send a file to the client.

This passes the job of sending the file to Apache whereby it may be
able to use more efficient methods than you can use.

Graham
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023502.html">[mod_python] Streaming output
</A></li>
	<LI>Next message: <A HREF="023504.html">[mod_python] Streaming output
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23503">[ date ]</a>
              <a href="thread.html#23503">[ thread ]</a>
              <a href="subject.html#23503">[ subject ]</a>
              <a href="author.html#23503">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
