<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Modifying publisher for sensible URLs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Modifying%20publisher%20for%20sensible%20URLs&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005591.html">
   <LINK REL="Next"  HREF="005593.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Modifying publisher for sensible URLs</H1>
    <B>David Higgs</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Modifying%20publisher%20for%20sensible%20URLs&In-Reply-To="
       TITLE="[mod_python] Modifying publisher for sensible URLs">drh9296 at ritvax.rit.edu
       </A><BR>
    <I>Fri Sep  6 11:35:18 EST 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="005591.html">[mod_python] Modifying publisher for sensible URLs
</A></li>
        <LI>Next message: <A HREF="005593.html">[mod_python] Modifying publisher for sensible URLs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5592">[ date ]</a>
              <a href="thread.html#5592">[ thread ]</a>
              <a href="subject.html#5592">[ subject ]</a>
              <a href="author.html#5592">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<table border=0 width="100%"><tr><td>
<!--beginarticle-->
<PRE>&gt;<i> Could we discuss whether it were worth to change the publisher module so
</I>&gt;<i> that it offers some more flexibility as far as URLs are concerned? I'm afraid I
</I>&gt;<i> just don't know enough about the publisher to do some more serious
</I>&gt;<i> modifications. However, I've found some problems related to this issue:
</I>&gt;<i> 
</I>&gt;<i> 1. &quot;<A HREF="http://servername/path/script/&quot;">http://servername/path/script/&quot;</A> works, but
</I>&gt;<i> &quot;<A HREF="http://servername/path/script&quot;">http://servername/path/script&quot;</A> (without the trailing slash) doesn't. (I can imagine why, but don't know
</I>&gt;<i> how to fix it)
</I>
That functionality is already possible if you roll your own handler. 
Depending on the amount of functionality you want, you may only need 20 
lines of code (or less) to parse and dispatch the request.

With the setup below, <A HREF="http://www.domain.com/util">http://www.domain.com/util</A> will be a call to 
util_handler.py.  The 'main' method called is always handler().  You'll 
use request.filename and request.path_info to determine what what 
requested.  In this case, the filename would be 
/path/to/your/script/util/index.html, and the path_info would be an 
empty string.

Here's an approximation of my setup:

&lt;Location /util&gt;
     Options -Indexes
     SetHandler python-program
     PythonPath &quot;sys.path+['/path/to/your/script/util', 
'/path/to/your/modules']&quot;
     PythonHandler util_handler
&lt;/Location&gt;

bash$ cd /path/to/your/script/util/
bash$ ls
index.html      util_handler.py

The annoying part is that you *need* the index.html to prevent a 404 
error from happening before your script is called.  The content of 
index.html doesn't matter since it is never read; mine are all 
zero-length files.

I have also found that with multiple PythonHandlers, each script must be 
named differently to prevent caching issues.  This wasn't immediately 
obvious, since each httpd thread seemed to have a separate cache.

--david


</PRE>
<!--endarticle-->
</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005591.html">[mod_python] Modifying publisher for sensible URLs
</A></li>
	<LI>Next message: <A HREF="005593.html">[mod_python] Modifying publisher for sensible URLs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5592">[ date ]</a>
              <a href="thread.html#5592">[ thread ]</a>
              <a href="subject.html#5592">[ subject ]</a>
              <a href="author.html#5592">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
