<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Mod_python and Sub-Interpreter segregation
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Mod_python%20and%20Sub-Interpreter%20segregation&In-Reply-To=200209172106.52339.bryan%40eevolved.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001973.html">
   <LINK REL="Next"  HREF="001937.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Mod_python and Sub-Interpreter segregation</H1>
    <B>Martin Pool</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Mod_python%20and%20Sub-Interpreter%20segregation&In-Reply-To=200209172106.52339.bryan%40eevolved.com"
       TITLE="[mod_python] Mod_python and Sub-Interpreter segregation">mbp at samba.org
       </A><BR>
    <I>Wed Sep 25 18:33:50 EST 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="001973.html">[mod_python] Mod_python and Sub-Interpreter segregation
</A></li>
        <LI>Next message: <A HREF="001937.html">[mod_python] python-dev list
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1981">[ date ]</a>
              <a href="thread.html#1981">[ thread ]</a>
              <a href="subject.html#1981">[ subject ]</a>
              <a href="author.html#1981">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 17 Sep 2002, Bryan Mongeau &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">bryan at eevolved.com</A>&gt; wrote:
&gt;<i> On September 14, 2002 03:07 am, Michael Neel wrote:
</I>&gt;<i> &gt; Thank will work great, until you hit the 65th concurrent connection, at
</I>&gt;<i> &gt; wich point apache will give you another child.
</I>&gt;<i> 
</I>&gt;<i> Thanks Mike. It seems as if even when MaxClients is set to 64 apache will fork 
</I>&gt;<i> another child anyway on the 65th concurrent connection... Why? Do you know 
</I>&gt;<i> what is going on here? I would like to simply work around the issue by 
</I>&gt;<i> limiting the amount of concurrent clients.
</I>
I think if you go down the path of relying on data kept inside an
Apache instance you will regret it.  The right way to retain state on
the server is to keep it in some kind of external database. 

Here are a few reasons:

 - If you reconfigure apache (e.g. apachectl graceful) or need to
   restart it, the data in memory will be irretrievably lost.
   Perhaps at the moment you don't need strong persistence but most
   web apps find their storage needs grow, so you will in the future. 

 - Having multiple children is an important robustness feature of
   Apache.

 - Keeping shared data separate is a &quot;safer&quot; design -- if you need to  
   coordinate access between threads then there is a risk of race
   conditions or lockups.  For example, if one thread abnormally
   terminates, it might leave internal data structures in an
   inconsistent state.  If you use an external database things are
   more isolated and easier to debug.

 - Using something like Python's shelve module is nearly as easy as an
   in-memory variable.

This is a dead horse; there are plenty of other discussions of it on
the web.  Don't repeat mistakes that were learnt by others six years
ago.

-- 
Martin 

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001973.html">[mod_python] Mod_python and Sub-Interpreter segregation
</A></li>
	<LI>Next message: <A HREF="001937.html">[mod_python] python-dev list
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1981">[ date ]</a>
              <a href="thread.html#1981">[ thread ]</a>
              <a href="subject.html#1981">[ subject ]</a>
              <a href="author.html#1981">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
