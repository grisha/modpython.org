<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Mod_python and Sub-Interpreter segregation
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Mod_python%20and%20Sub-Interpreter%20segregation&In-Reply-To=200209131959.42086.bryan%40eevolved.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005633.html">
   <LINK REL="Next"  HREF="005670.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Mod_python and Sub-Interpreter segregation</H1>
    <B>Michael Neel</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Mod_python%20and%20Sub-Interpreter%20segregation&In-Reply-To=200209131959.42086.bryan%40eevolved.com"
       TITLE="[mod_python] Mod_python and Sub-Interpreter segregation">neel at mediapulse.com
       </A><BR>
    <I>Fri Sep 13 23:07:50 EST 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="005633.html">[mod_python] Mod_python and Sub-Interpreter segregation
</A></li>
        <LI>Next message: <A HREF="005670.html">[mod_python] Mod_python and Sub-Interpreter segregation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5639">[ date ]</a>
              <a href="thread.html#5639">[ thread ]</a>
              <a href="subject.html#5639">[ subject ]</a>
              <a href="author.html#5639">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<table border=0 width="100%"><tr><td>
<!--beginarticle-->
<PRE>Thank will work great, until you hit the 65th concurrent connection, at
wich point apache will give you another child. Another thing to keep in
mind is that if one thing goes wrong in any thread, there goes your
whole server.  (just a side note, to test a web server I use the ab tool
that comes with apache; it will let you set the concurrent number of
theard to try and get at once).

I saw a python tool mentioned in another thread;
<A HREF="http://www.object-craft.com.au/projects/albatross/">http://www.object-craft.com.au/projects/albatross/</A> which I'm looking at
myself right now, so I have no experience with, but after a first read
though looks very promising when used with mod_python and has several
options for saved states and should have some good choices for globals
in there.

Mike 

-----Original Message-----
From: <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python-admin at modpython.org</A>
[mailto:<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python-admin at modpython.org</A>] On Behalf Of Bryan Mongeau
Sent: Friday, September 13, 2002 4:00 PM
To: <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython.org</A>
Subject: Re: [mod_python] Mod_python and Sub-Interpreter segregation


Thanks for all the great replies everyone! I appreciate it.

On September 13, 2002 09:58 pm, Brian Hawthorne wrote:
&gt;<i> hmmm,
</I>&gt;<i> currently you can share global vars if you set apache to have exactly 
</I>&gt;<i> one child process (but to great performance detriment).  i was 
</I>&gt;<i> imagining you could do the same in the perthread server by setting the
</I>
&gt;<i> numprocs=1 and letting the numthreads grow/shrink (recouping the 
</I>&gt;<i> performace hit with extra threads).
</I>
Thanks alot for this idea! I compiled apache with the worker MPM, set 
StartServers to 1 and ThreadsPerChild to 64. The result? My shared
memory hit 
counter works perfectly and clocks about 50 hits/sec on my 800 Mhz,
which, 
according to my rough hand benchmarks, is actually a little faster than
using 
prefork with StartServers at 5!

Seems as if my problem is solved.. at least for now, thanks!

&gt;<i> actually, it should be pretty easy to wrap a bit of code around python
</I>
&gt;<i> shelve to turn some dbm file into a modpyglobal repository of python 
</I>&gt;<i> objs keyed by varname.  that's what i would do if i didn't feel like 
</I>&gt;<i> dealing with a real db.  also, if you don't use an external 
</I>&gt;<i> repository, you have to worry about server restarts and child procs 
</I>&gt;<i> getting killed etc.
</I>
This is almost exactly what I have in mind :) More later,
-- 
Bryan Mongeau
eEvolved Inc. - IT Consulting &amp; Custom Software <A HREF="http://eevolved.com/">http://eevolved.com/</A>
--
&quot;Let us understand what our own selfish genes are up to, because we may
then 
at least have a chance to upset their designs, something that no other 
species has ever aspired to do.&quot; -- Richard Dawkins

_______________________________________________
Mod_python mailing list
<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
<A HREF="http://www.modpython.org/mailman/listinfo/mod_python">http://www.modpython.org/mailman/listinfo/mod_python</A>


</PRE>
<!--endarticle-->
</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005633.html">[mod_python] Mod_python and Sub-Interpreter segregation
</A></li>
	<LI>Next message: <A HREF="005670.html">[mod_python] Mod_python and Sub-Interpreter segregation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5639">[ date ]</a>
              <a href="thread.html#5639">[ thread ]</a>
              <a href="subject.html#5639">[ subject ]</a>
              <a href="author.html#5639">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
