<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] more info about the segfault bug
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20more%20info%20about%20the%20segfault%20bug&In-Reply-To=200209131436.39544.list-mod_python%40empires.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013021.html">
   <LINK REL="Next"  HREF="013017.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] more info about the segfault bug</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Michael Neel</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20more%20info%20about%20the%20segfault%20bug&In-Reply-To=200209131436.39544.list-mod_python%40empires.org"
       TITLE="[mod_python] more info about the segfault bug">neel at mediapulse.com
       </A><BR>
    <I>Fri Sep 13 22:50:40 EST 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="013021.html">[mod_python] more info about the segfault bug
</A></li>
        <LI>Next message: <A HREF="013017.html">[mod_python] Mod_python 3.0 BETA / Apache2 segfault
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13031">[ date ]</a>
              <a href="thread.html#13031">[ thread ]</a>
              <a href="subject.html#13031">[ subject ]</a>
              <a href="author.html#13031">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks Jeff, this fixed the issue for me.  I'll keep watch on this list
and the new httpd.apache.org list for an official update, and for any
word what the side effects (if any, that change looks fairly harmless on
the surface) this has.

Mike

--
Michael C. Neel
There are only 10 types of people in the world;
those who understand binary and those who don't.

-----Original Message-----
From: <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python-admin at modpython.org</A>
[mailto:<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python-admin at modpython.org</A>] On Behalf Of Jeff Davis
Sent: Friday, September 13, 2002 5:37 PM
To: <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython.org</A>
Subject: [mod_python] more info about the segfault bug



Patch below. That variable &quot;ext&quot; is not being initialized appearently
(in the 
function python_handler in mod_python.c). So I suppose it's not passing
the 
&quot;if(req-&gt;filename)&quot; test, and so the call to apr_pstrcat just passes
garbage 
(&quot;ext&quot;) to the function. Perhaps we need an &quot;else&quot; safety clause, or 
something? I don't really know what's supposed to be happening there,
but if 
someone does maybe this will help them find the problem.

I will continue to look into the problem, but I'm not all that familiar
with 
writing apache modules.


Regards,
	Jeff

Note: patch is from distributed version to me new one. Disregard my
previous 
patch, which implemented Bryan Mongeau's solution.

--- mod_python.c.old	2002-09-13 13:51:09.000000000 -0700
+++ mod_python.c	2002-09-13 14:28:47.000000000 -0700
@@ -742,7 +742,7 @@
     int result;
     const char * interpreter = NULL;
     PyThreadState *tstate;
-    const char *ext;
+    char *ext = NULL;
     hl_entry *hle = NULL;
     hl_entry *dynhle = NULL;
 

_______________________________________________
Mod_python mailing list
<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
<A HREF="http://www.modpython.org/mailman/listinfo/mod_python">http://www.modpython.org/mailman/listinfo/mod_python</A>


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013021.html">[mod_python] more info about the segfault bug
</A></li>
	<LI>Next message: <A HREF="013017.html">[mod_python] Mod_python 3.0 BETA / Apache2 segfault
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13031">[ date ]</a>
              <a href="thread.html#13031">[ thread ]</a>
              <a href="subject.html#13031">[ subject ]</a>
              <a href="author.html#13031">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
