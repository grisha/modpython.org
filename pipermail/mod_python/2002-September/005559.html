<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Problems with -HEAD and Apache 2.0.40 on FreeBSD
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Problems%20with%20-HEAD%20and%20Apache%202.0.40%20on%20FreeBSD&In-Reply-To=20020901154053.GA1241%40lilith.ghaering.test">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005558.html">
   <LINK REL="Next"  HREF="005560.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Problems with -HEAD and Apache 2.0.40 on FreeBSD</H1>
    <B>Gregory (Grisha) Trubetskoy</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Problems%20with%20-HEAD%20and%20Apache%202.0.40%20on%20FreeBSD&In-Reply-To=20020901154053.GA1241%40lilith.ghaering.test"
       TITLE="[mod_python] Problems with -HEAD and Apache 2.0.40 on FreeBSD">grisha at modpython.org
       </A><BR>
    <I>Sun Sep  1 13:47:41 EST 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="005558.html">[mod_python] Problems with -HEAD and Apache 2.0.40 on FreeBSD
</A></li>
        <LI>Next message: <A HREF="005560.html">[mod_python] mptest.py fails with (8)Exec format error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5559">[ date ]</a>
              <a href="thread.html#5559">[ thread ]</a>
              <a href="subject.html#5559">[ subject ]</a>
              <a href="author.html#5559">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<table border=0 width="100%"><tr><td>
<!--beginarticle-->
<PRE>I haven't tried it on FreeBSD yet. Apache seemed (or seemed, don't know if
it's resolved in .40) to have some sort of a problem with FreeBSD threads
(thus prefork being the default MPM). Because of this I actually moved all
my development to Linux (to my dismay). So it's possible you have to do
everything without threads. If you figre this out out, please let me know.

Grisha

On Sun, 1 Sep 2002, Gerhard [iso-8859-1] H&#1044;ring wrote:

&gt;<i> I tried to get the CVS version working with Apache 2.0.40 on FreeBSD
</I>&gt;<i> 4.6-STABLE but had no luck :-(
</I>&gt;<i>
</I>&gt;<i> This is what I did:
</I>&gt;<i>
</I>&gt;<i> compiled the FreeBSD apache2 port using WITH_THREADS=1. Which seems to
</I>&gt;<i> have worked:
</I>&gt;<i>
</I>&gt;<i> gargamel# ldd /usr/local/sbin/httpd
</I>&gt;<i> /usr/local/sbin/httpd:
</I>&gt;<i> [...]
</I>&gt;<i> libc_r.so.4 =&gt; /usr/lib/libc_r.so.4 (0x28225000)
</I>&gt;<i> libc.so.4 =&gt; /usr/lib/libc.so.4 (0x282df000)
</I>&gt;<i>
</I>&gt;<i> I'm not sure if its ok to link against libc_r and libc at the same time,
</I>&gt;<i> though. But as is, Apache seems to display static pages fine. But then,
</I>&gt;<i> I have no experience with Apache2 whatsoever.
</I>&gt;<i>
</I>&gt;<i> gargamel# /usr/local/sbin/httpd -l
</I>&gt;<i> Compiled in modules:
</I>&gt;<i> core.c
</I>&gt;<i> prefork.c
</I>&gt;<i> http_core.c
</I>&gt;<i> mod_so.c
</I>&gt;<i>
</I>&gt;<i> So it looks like it's using the preforked model.
</I>&gt;<i>
</I>&gt;<i> The Python compiled against is the standard FreeBSD port with threads
</I>&gt;<i> enabled:
</I>&gt;<i> gargamel# ldd /usr/local/bin/python
</I>&gt;<i> /usr/local/bin/python:
</I>&gt;<i> libutil.so.3 =&gt; /usr/lib/libutil.so.3 (0x280e6000)
</I>&gt;<i> libm.so.2 =&gt; /usr/lib/libm.so.2 (0x280ef000)
</I>&gt;<i> libc_r.so.4 =&gt; /usr/lib/libc_r.so.4 (0x2810b000)
</I>&gt;<i>
</I>&gt;<i> mod_python.so is statically linked against libpython2.2.a, however again
</I>&gt;<i> is linked against the normal, nonthreaded libc (!):
</I>&gt;<i>
</I>&gt;<i> gargamel# ldd /usr/local/libexec/apache2/mod_python.so
</I>&gt;<i> /usr/local/libexec/apache2/mod_python.so:
</I>&gt;<i> libm.so.2 =&gt; /usr/lib/libm.so.2 (0x281d9000)
</I>&gt;<i> libutil.so.3 =&gt; /usr/lib/libutil.so.3 (0x281f5000)
</I>&gt;<i> libc.so.4 =&gt; /usr/lib/libc.so.4 (0x28069000)
</I>&gt;<i>
</I>&gt;<i> Needless to say, the results aren't that satisfactory:
</I>&gt;<i>
</I>&gt;<i> [Sun Sep 01 17:32:32 2002] [notice] Apache/2.0.40 (Unix) mod_python/3.0.0-BETA Python/2.2.1 configured -- resuming normal operations
</I>&gt;<i> [Sun Sep 01 17:32:39 2002] [notice] child pid 35323 exit signal Segmentation fault (11)
</I>&gt;<i> [Sun Sep 01 17:32:39 2002] [notice] child pid 35324 exit signal Segmentation fault (11)
</I>&gt;<i>
</I>&gt;<i> All I did was put this line in httpd.conf:
</I>&gt;<i> LoadModule python_module libexec/apache2/mod_python.so
</I>&gt;<i>
</I>&gt;<i> I didn't even call a Python handler, yet.
</I>&gt;<i>
</I>&gt;<i> Any clues?
</I>&gt;<i>
</I>&gt;<i> Gerhard
</I>&gt;<i> --
</I>&gt;<i> mail:   gerhard &lt;at&gt; bigfoot &lt;dot&gt; de       registered Linux user #64239
</I>&gt;<i> web:    <A HREF="http://www.cs.fhm.edu/~ifw00065/">http://www.cs.fhm.edu/~ifw00065/</A>    OpenPGP public key id AD24C930
</I>&gt;<i> public key fingerprint: 3FCC 8700 3012 0A9E B0C9  3667 814B 9CAA AD24 C930
</I>&gt;<i> reduce(lambda x,y:x+y,map(lambda x:chr(ord(x)^42),tuple('zS^BED\nX_FOY\x0b')))
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://www.modpython.org/mailman/listinfo/mod_python">http://www.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I>

</PRE>
<!--endarticle-->
</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005558.html">[mod_python] Problems with -HEAD and Apache 2.0.40 on FreeBSD
</A></li>
	<LI>Next message: <A HREF="005560.html">[mod_python] mptest.py fails with (8)Exec format error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5559">[ date ]</a>
              <a href="thread.html#5559">[ thread ]</a>
              <a href="subject.html#5559">[ subject ]</a>
              <a href="author.html#5559">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
