<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] execution time limit
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20execution%20time%20limit&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022958.html">
   <LINK REL="Next"  HREF="022960.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] execution time limit</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20execution%20time%20limit&In-Reply-To="
       TITLE="[mod_python] execution time limit">grahamd at dscpl.com.au
       </A><BR>
    <I>Tue Jan  9 18:10:09 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="022958.html">Fw: [mod_python] execution time limit
</A></li>
        <LI>Next message: <A HREF="022960.html">[mod_python] question on new import functionality (python 3.3.0b)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22959">[ date ]</a>
              <a href="thread.html#22959">[ thread ]</a>
              <a href="subject.html#22959">[ subject ]</a>
              <a href="author.html#22959">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Michael Rasmussen wrote ..
&gt;<i> &gt; You've lost me. What cookbook are you talking about?
</I>&gt;<i> &gt; 
</I>&gt;<i> Python cookbook: ISBN: 0-596-00167-3
</I>&gt;<i> 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Can you provide a better description?
</I>&gt;<i> &gt; 
</I>&gt;<i> 
</I>&gt;<i> Assuming we are called with this URL: <A HREF="http://www.some.domain/my/script">http://www.some.domain/my/script</A>
</I>&gt;<i> Assuming myscript.py is designated to handle requests for /my/script
</I>&gt;<i> Assuming myscript.py has implemented the function run
</I>&gt;<i> Assuming timeout is 30 sec.
</I>&gt;<i> 
</I>&gt;<i> But what really goes on is that this call are delegated to a controller
</I>&gt;<i> script which directs the call to a script on the server. E.g the server
</I>&gt;<i> has a controller which is delegated any request despite of the URL. It
</I>&gt;<i> splits the request up in main parts an then calls myscript.py. This call
</I>&gt;<i> is carrying out by starting myscript.py in a new thread in either of
</I>&gt;<i> two ways:
</I>&gt;<i> 
</I>&gt;<i> 1:
</I>&gt;<i>     t1 = myscript.MyScript()
</I>&gt;<i>     t1.start()
</I>&gt;<i>     t1.join(30.0)
</I>&gt;<i>     return http code 500 to caller
</I>&gt;<i> 
</I>&gt;<i> 2:
</I>&gt;<i>   (Assumption myscript.MyScript has implemented self destruction as the
</I>&gt;<i> example from the python cookbook)
</I>&gt;<i>     t1 = myscript.MyScript()
</I>&gt;<i>     t1.start()
</I>&gt;<i>     t1.join()
</I>&gt;<i>     return http code 500 to caller
</I>&gt;<i> 
</I>&gt;<i> The must elegant solution would be 2. IMHO.
</I>&gt;<i> 
</I>&gt;<i> So you see, it is not the apache child process I am killing but a
</I>&gt;<i> thread running inside that apache process. The apache process stays
</I>&gt;<i> alive and is unknowing of what actually goes on. I think this is
</I>&gt;<i> thread safe, at least when discussing the actual apache child
</I>&gt;<i> processes.
</I>
Which when you take out killing of process it is exactly what I was talking about
in my initial post. Posting again what I said:

   Either way you would have to program such ability within the script. Ie., if
   the script is performing some sort of calculation, it would need to
   occasionally check itself how long it has been going and abort if need be.
   If you are communicating with other processes, rather than block you are
   going to have to use some sort of mechanism which will allow you to timeout
   an operation. Database systems don't usually allow this though. Depending on
   the circumstances, you may be able to farm the operation off to a distinct
   thread with the parent waiting for the thread to complete, but if it doesn't
   complete in time for it to send back failure. The separate thread will still
   continue until it completes though as not easy to kill threads.

This sort of stuff very much has to be done by a user in their handlers, it can't
be done as a standard feature of mod_python as it would be impossible to
come up with something that would work for all users code.

Graham
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022958.html">Fw: [mod_python] execution time limit
</A></li>
	<LI>Next message: <A HREF="022960.html">[mod_python] question on new import functionality (python 3.3.0b)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22959">[ date ]</a>
              <a href="thread.html#22959">[ thread ]</a>
              <a href="subject.html#22959">[ subject ]</a>
              <a href="author.html#22959">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
