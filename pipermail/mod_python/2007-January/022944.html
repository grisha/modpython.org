<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Returned filename question (updated)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Returned%20filename%20question%20%28updated%29&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022970.html">
   <LINK REL="Next"  HREF="022947.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Returned filename question (updated)</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Martijn Moeling</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Returned%20filename%20question%20%28updated%29&In-Reply-To="
       TITLE="[mod_python] Returned filename question (updated)">martijn at xs4us.nu
       </A><BR>
    <I>Mon Jan  8 10:31:13 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="022970.html">[mod_python] Building Problems on OS X (intel macbook core2duo)
</A></li>
        <LI>Next message: <A HREF="022947.html">[mod_python] Returned filename question (updated)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22944">[ date ]</a>
              <a href="thread.html#22944">[ thread ]</a>
              <a href="subject.html#22944">[ subject ]</a>
              <a href="author.html#22944">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Perhaps my explanation was misunderstood, let me clarify

If I go to <A HREF="http://www.lokalos.nl">http://www.lokalos.nl</A> without a filename given (set By
Directoryindex in the apache config to index.py)

The returned filename seems to be a random generated filename (like
jkfdasadf.html)

/var/www/html/index.py is a symbolic link to
../Python_modules/generate.py

The Googlebot seems to remember the randomly generated filename, and
sure there is no /var/www/html/jkfdasadf.html, so it will 404

So google will get a 404 accessing the Index page and stops indexing
(as seen in the access_log)

I am puzzled by this.

I could set req.filename to &quot;index.py&quot; within my application, but I feel
this has something to do with the symbolic link. Anyway, where is the
jkfdasadf.html filename generated, would this be MP or apache? Is this
done before the MP handler is started, or after the index.py has done
its work?

As you can understand, the Indexing by searchengines is important for a
lot of websites,

Martijn

-----Oorspronkelijk bericht-----
Van: Graham Dumpleton [mailto:<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">grahamd at dscpl.com.au</A>] 
Verzonden: Sunday, January 07, 2007 1:32 AM
Aan: Martijn Moeling
CC: <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython.org</A>
Onderwerp: Re: [mod_python] Returned filename question (updated)


On 07/01/2007, at 12:32 AM, Martijn Moeling wrote:

&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> I was just checking my apache access_log to see if and how the  
</I>&gt;<i> spidering
</I>&gt;<i> by Google was going and I found some strange behavior I cannot  
</I>&gt;<i> explain:
</I>&gt;<i>
</I>&gt;<i> cat /var/log/httpd/access_log |grep Googlebot
</I>&gt;<i>
</I>&gt;<i> all the lines I see are like:
</I>&gt;<i>
</I>&gt;<i> 66.249.65.15 - - [01/Jan/2007:15:43:54 +0100] &quot;GET / 
</I>&gt;<i> zsswsirofodgrdu.html
</I>&gt;<i> HTTP/1.1&quot; 404 298 &quot;-&quot; &quot;Mozilla/5.0 (compatible; Googlebot/2.1;
</I>&gt;<i> +<A HREF="http://www.google.com/bot.html">http://www.google.com/bot.html</A>)&quot;
</I>&gt;<i>
</I>&gt;<i> Please note the: GET /zsswsirofodgrdu.html
</I>&gt;<i>
</I>&gt;<i> I am seeing this since I upgraded to MP 3.3.0b, I have searched the  
</I>&gt;<i> DOCs
</I>&gt;<i> but for some reason I cannot find out where Google gets the filename
</I>&gt;<i> from....
</I>&gt;<i>
</I>&gt;<i> It seems like MP is returning a random filename now.
</I>
Not likely to be anything to do with mod_python.

First off, it is Apache which logs to the access_log file and not  
mod_python.
Apache will use whatever is set in req.filename at the end of the  
request.
The value of req.filename isn't changed by mod_python although a user
level mod_python handler could change it.

That the HTTP status code is 404 though suggests that it isn't even  
getting
to a response handler and so mod_python isn't likely being invoked.  
It simply
looks like that is what Google is actually asking for.

Graham

&gt;<i> The requests send are always <A HREF="http://www2.lokalos.nl">http://www2.lokalos.nl</A> or
</I>&gt;<i> <A HREF="http://www2.lokalos.nl/?pr=drenthe">http://www2.lokalos.nl/?pr=drenthe</A>
</I>&gt;<i>
</I>&gt;<i> Should I include a filename in my URL's? if I do :
</I>&gt;<i> <A HREF="http://www2.lokalos.nl/index.py?pr=drenthe">http://www2.lokalos.nl/index.py?pr=drenthe</A>
</I>&gt;<i> Or is there any way I can force MP/Apace to return the filename  
</I>&gt;<i> index.py
</I>&gt;<i> an force to overwrite the automatic returned filename (like
</I>&gt;<i> fhgdjhlkgjhfhg.html)
</I>&gt;<i>
</I>&gt;<i> Martijn
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022970.html">[mod_python] Building Problems on OS X (intel macbook core2duo)
</A></li>
	<LI>Next message: <A HREF="022947.html">[mod_python] Returned filename question (updated)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22944">[ date ]</a>
              <a href="thread.html#22944">[ thread ]</a>
              <a href="subject.html#22944">[ subject ]</a>
              <a href="author.html#22944">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
