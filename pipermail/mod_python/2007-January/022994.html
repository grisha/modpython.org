<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] 2006 &quot;MySQL server has gone away&quot; failures
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%202006%20%22MySQL%20server%20has%20gone%20away%22%20failures&In-Reply-To=45A7C5EE.8070909%40joreybump.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022987.html">
   <LINK REL="Next"  HREF="022986.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] 2006 &quot;MySQL server has gone away&quot; failures</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Fred of UrlBit.Us</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%202006%20%22MySQL%20server%20has%20gone%20away%22%20failures&In-Reply-To=45A7C5EE.8070909%40joreybump.com"
       TITLE="[mod_python] 2006 &quot;MySQL server has gone away&quot; failures">fred at urlbit.us
       </A><BR>
    <I>Fri Jan 12 17:42:25 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="022987.html">[mod_python] 2006 &quot;MySQL server has gone away&quot; failures
</A></li>
        <LI>Next message: <A HREF="022986.html">[mod_python] Can't get/create handler errors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22994">[ date ]</a>
              <a href="thread.html#22994">[ thread ]</a>
              <a href="subject.html#22994">[ subject ]</a>
              <a href="author.html#22994">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Friday 12 January 2007 12:31, Jorey Bump uttered thusly:
&gt;<i> Martijn Moeling wrote:
</I>...
&gt;<i> &gt; Now the connections get closed nicely and mysql does not run out of
</I>&gt;<i> &gt; resources anymore.
</I>&gt;<i>
</I>&gt;<i> Interesting solution, but aren't you now (briefly) opening a database
</I>&gt;<i> connection for every page view, regardless of it actually needing one?
</I>
In my particular application most pages are hitting the database, so that's 
not really a problem.

&gt;<i> Also, it looks like the OP is using the PSP handler, not a custom one.
</I>
Actually, in my case I am calling the PSP class directly rather than using 
the Apache directives to do it. Most of the code will be in libraries and 
just a touch will actually be in PSP.

&gt;<i> In that case, the best solution might be to explicitly open and close
</I>&gt;<i> the db handle before and after every query (or tightly grouped series of
</I>&gt;<i> queries). Recent versions of MySQLdb have made it difficult to create
</I>&gt;<i> persistent db connections, and users are advised against it, since the
</I>&gt;<i> overhead of creating new connections is negligible. I had to rewrite a
</I>&gt;<i> number of applications that imported a shared db handle, due to this
</I>&gt;<i> change. Bummer. :(
</I>
Curious. This highlights some questions I have about what exactly mod_python 
is doing. Does mod_python behaves well with MPM? I would rather use MPM over 
the perforking I currently do (to mainly keep legacy PHP happy). Basically, 
what are the issues with regards the Global Interpreter Lock and MPM? And 
are there any other issues I need be concerned about with regards to states 
and sessions and loaded modules?

-- Fred
<A HREF="http://urlbit.us">http://urlbit.us</A>
Bite those long URLs!
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022987.html">[mod_python] 2006 &quot;MySQL server has gone away&quot; failures
</A></li>
	<LI>Next message: <A HREF="022986.html">[mod_python] Can't get/create handler errors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22994">[ date ]</a>
              <a href="thread.html#22994">[ thread ]</a>
              <a href="subject.html#22994">[ subject ]</a>
              <a href="author.html#22994">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
