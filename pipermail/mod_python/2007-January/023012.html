<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] how to define publisher when page not found
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20how%20to%20define%20publisher%20when%20page%20not%20found&In-Reply-To=1168895831.20396%40dscpl.user.openhosting.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023009.html">
   <LINK REL="Next"  HREF="023013.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] how to define publisher when page not found</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Maksim Kasimov</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20how%20to%20define%20publisher%20when%20page%20not%20found&In-Reply-To=1168895831.20396%40dscpl.user.openhosting.com"
       TITLE="[mod_python] how to define publisher when page not found">maksim.kasimov at gmail.com
       </A><BR>
    <I>Tue Jan 16 05:07:42 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023009.html">[mod_python] how to define publisher when page not found
</A></li>
        <LI>Next message: <A HREF="023013.html">[mod_python] how to define publisher when page not found
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23012">[ date ]</a>
              <a href="thread.html#23012">[ thread ]</a>
              <a href="subject.html#23012">[ subject ]</a>
              <a href="author.html#23012">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 1/15/07, Graham Dumpleton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">grahamd at dscpl.com.au</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> Maksim Kasimov wrote ..
</I>&gt;<i> &gt; hi,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; in apache conf file i use:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     &lt;Directory &quot;/mypath/mydir&quot;&gt;
</I>&gt;<i> &gt;         SetHandler python-program
</I>&gt;<i> &gt;         PythonHandler mod_python.publisher
</I>&gt;<i> &gt;     &lt;/Directory&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; there is file:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; in file  /mypath/mydir/index.py there some functions:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; def index(req):
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     return &quot;index&quot;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; def free(req):
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     return 'free'
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; def not_found(req):
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     # some computation
</I>&gt;<i> &gt;     return 'page not found'
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; and every thing is just fine and works as expected:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;        for <A HREF="http://myhostname.org/mydir/free">http://myhostname.org/mydir/free</A> i can see &quot;free&quot;
</I>&gt;<i> &gt;        for <A HREF="http://myhostname.org/mydir/">http://myhostname.org/mydir/</A> i can see &quot;index&quot;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; my question is: How to get output of &quot;not_found&quot; function for any other
</I>&gt;<i> &gt; uri,
</I>&gt;<i> &gt; such as &quot;<A HREF="http://myhostname.org/mydir/hello&quot;">http://myhostname.org/mydir/hello&quot;</A> ?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; many thanks for any advice.
</I>&gt;<i>
</I>&gt;<i> Use the Apache ErrorDocument directive, specifying the URL to the
</I>&gt;<i> not_found
</I>&gt;<i> function as the argument.
</I>&gt;<i>
</I>&gt;<i> Graham
</I>&gt;<i>
</I>
it is very inconveniently because:
    1) in the directory &quot;mydir&quot; there can be a lot of *.py scripts (not only
index.py), and i need to specify some default handler for each of module in
the directory.
    2) it makes superfluous redirections
So my question is still opened.

To provide this, temporary, i've changed resolve_object function in
publisher.py from mod_python in that way:

        try:
            #obj = getattr(obj, obj_str)
            obj = getattr(obj, obj_str, getattr(obj, '_default'))
        except AttributeError:
            raise apache.SERVER_RETURN, apache.HTTP_NOT_FOUND

than, i will define _default function in my /mypath/mydir/index.py or any
other modules in mydir.

i think it is very wrong to change standart libraries, but i did not found
the way, how to redifine this behavior in my index.py file.

is it possible to define some function in my module, to make it return
default attribute for getattr function?
or may be, if i dare, to expect such changes as above in future releases of
mod_python?

thanks for any help.

-- 
Maksim Kasimov
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20070116/167ade24/attachment.html">http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20070116/167ade24/attachment.html</A>
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023009.html">[mod_python] how to define publisher when page not found
</A></li>
	<LI>Next message: <A HREF="023013.html">[mod_python] how to define publisher when page not found
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23012">[ date ]</a>
              <a href="thread.html#23012">[ thread ]</a>
              <a href="subject.html#23012">[ subject ]</a>
              <a href="author.html#23012">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
