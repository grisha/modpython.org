<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] modpy3.2 + apache2.2 + odbc + dbisam -
	substitutetocgi ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20modpy3.2%20%2B%20apache2.2%20%2B%20odbc%20%2B%20dbisam%20-%0A%09substitutetocgi%20%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023111.html">
   <LINK REL="Next"  HREF="023095.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] modpy3.2 + apache2.2 + odbc + dbisam -
	substitutetocgi ?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20modpy3.2%20%2B%20apache2.2%20%2B%20odbc%20%2B%20dbisam%20-%0A%09substitutetocgi%20%3F&In-Reply-To="
       TITLE="[mod_python] modpy3.2 + apache2.2 + odbc + dbisam -
	substitutetocgi ?">grahamd at dscpl.com.au
       </A><BR>
    <I>Wed Jan 24 17:04:10 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023111.html">[mod_python] Is it  possible to stop  file uploading?
</A></li>
        <LI>Next message: <A HREF="023095.html">[mod_python] how to handle xforms with publisher handler
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23094">[ date ]</a>
              <a href="thread.html#23094">[ thread ]</a>
              <a href="subject.html#23094">[ subject ]</a>
              <a href="author.html#23094">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>durumdara wrote ..
&gt;<i> Hi!
</I>&gt;<i> 
</I>&gt;<i> Sorry, but I not understand it fully.
</I>&gt;<i> I thinking about that:
</I>&gt;<i> 
</I>&gt;<i>     If I do this, only one interpreter created.
</I>&gt;<i>     And this interpreter serve all of the requests.
</I>&gt;<i>     So any concurrent requests are &quot;need to pause&quot; until the interpreter
</I>&gt;<i>     getting free state, and  ready to serve the next request.
</I>&gt;<i> 
</I>&gt;<i> Or I thinking wrong?
</I>&gt;<i> If not, that is making &quot;slow&quot; serving, or not?
</I>
As I explained in posts in the last day or so in response to questions by
Suresh, how many Python subinterpreters are created has got nothing to do with
concurrency of requests. Subinterpreters are used merely to keep data from
different applications linked to different URLs separate so they do not
interfere with each other. Even if all requests are handled within the one
subinterpreter, there can still be concurrent requests being handled at the
same time within different threads where a multithreaded MPM is used such as on
Windows or with worker MPM on UNIX.

Thus, forcing the &quot;main_interpreter&quot; to be used is not an issue, will not slow
down handling of requests and may solve problems caused by poorly written
third party extensions for Python which expect to be run from the first Python
interpreter created within a process.

&gt;<i> Any question that if I must use cgi, can I use template system without
</I>&gt;<i> any problems? Rendering is need apache import? If yes, it is not working
</I>&gt;<i> in normal interpreter...
</I>
You can use any template system you want in CGI provided that it isn't dependent
on mod_python. Ie., you can't use mod_python.psp for example, and can otherwise
work with CGI environment.

Graham

&gt;<i> Thanks for your help:
</I>&gt;<i>     dd
</I>&gt;<i> 
</I>&gt;<i> Graham Dumpleton wrote:
</I>&gt;<i> &gt; If not doing so already, force all your mod_python request handlers to
</I>&gt;<i> run
</I>&gt;<i> &gt; within the context of the first Python interpreter instance created by
</I>&gt;<i> &gt; mod_python by using:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;   PythonInterpeter main_interpreter
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I think you need to have at least mod_python 3.2.10 for this to
</I>&gt;<i> &gt; be of any use because of bugs in earlier versions of mod_python.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; This can be required where third party Python modules are not written
</I>&gt;<i> &gt; correctly so as to be usable from secondary interpreters. For more
</I>&gt;<i> &gt; details on what this issue is about, see:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;   <A HREF="http://issues.apache.org/jira/browse/MODPYTHON-77">http://issues.apache.org/jira/browse/MODPYTHON-77</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; That said, this may not help at all and is just a guess.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Graham
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; durumdara wrote ..
</I>&gt;<i> &gt;   
</I>&gt;<i> &gt;&gt; Hi!
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; My problem is that:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; I need to use DBISAM databases.
</I>&gt;<i> &gt;&gt; There is no native Python driver for DBISAM, but DBISAM have ODBC driver.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; I build two sites with DBISAM local database, and with ODBC drived by
</I>&gt;<i> &gt;&gt; pywin32 odbc module.
</I>&gt;<i> &gt;&gt; Everything is worked good (it seems to be) if I drop my cursors on every
</I>&gt;<i> &gt;&gt; request.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; But now I needed to change ODBC to remote mode (to read remote database).
</I>&gt;<i> &gt;&gt; Yesterday I simple changed the settings of the driver, and next I found
</I>&gt;<i> &gt;&gt; me in the hell... :-(((
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; In every 2.-3. request the httpd.exe is crashed. No error msg. generated
</I>&gt;<i> &gt;&gt; (logs), only Windows create some dumps about it.
</I>&gt;<i> &gt;&gt; In the event log I see that ntdll.dll and sometimes the odbc.pyd is
</I>&gt;<i> the
</I>&gt;<i> &gt;&gt; source of the error.
</I>&gt;<i> &gt;&gt; Interesting thing, that my sites are working good with odbc.pyd and
</I>&gt;<i> &gt;&gt; DBISAM when they are not used remote databases.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; I tried everything: I set MaxReqPChild to 1 (to cleanup), close 
</I>&gt;<i> &gt;&gt; cursors/databases on finishing of scripts, etc.
</I>&gt;<i> &gt;&gt; When I try to do same thing with normal python interpreter, I cannot
</I>&gt;<i> do
</I>&gt;<i> &gt;&gt; it. I can open many-many connections, and they are cleaned up normally...
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Next I downloaded mxODBC, and tried it. It is working good, but it's
</I>&gt;<i> &gt;&gt; prices are not good for me.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Today I download the pyodbc package, but it is possible not thread-safe.
</I>&gt;<i> &gt;&gt; Or possible it is not working good later, I don't know.
</I>&gt;<i> &gt;&gt; I have not experienced with this.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; BUT IF WILL NOT WORKING, I WILL NEED SOME CHANGING.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; So:
</I>&gt;<i> &gt;&gt; I need some information to prepare to change if needed.
</I>&gt;<i> &gt;&gt; There is two way to working with dbisam + odbc under apache.
</I>&gt;<i> &gt;&gt; First: I need to write a database server (socketserver) that communicate
</I>&gt;<i> &gt;&gt; beetween my apache processes and ODBC database. It is payful.
</I>&gt;<i> &gt;&gt; Second: I need to change to cgi mode to avoid these problems.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Please help me: what you offer me when I want to use cgi? The modpy
</I>&gt;<i> &gt;&gt; library can supports this working mode? Or what I need to do for it?
</I>&gt;<i> &gt;&gt; Please offer me some library, and example to prepare if the problems
</I>&gt;<i> &gt;&gt; appearing!
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Thanks for your help:
</I>&gt;<i> &gt;&gt;     dd
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; _______________________________________________
</I>&gt;<i> &gt;&gt; Mod_python mailing list
</I>&gt;<i> &gt;&gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> &gt;&gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i> &gt;&gt;     
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;   
</I></PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023111.html">[mod_python] Is it  possible to stop  file uploading?
</A></li>
	<LI>Next message: <A HREF="023095.html">[mod_python] how to handle xforms with publisher handler
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23094">[ date ]</a>
              <a href="thread.html#23094">[ thread ]</a>
              <a href="subject.html#23094">[ subject ]</a>
              <a href="author.html#23094">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
