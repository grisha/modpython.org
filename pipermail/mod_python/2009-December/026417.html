<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Re: Django-mod_python taking time loading libraries
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20Django-mod_python%20taking%20time%20loading%20libraries&In-Reply-To=2613171a0912230250x3055e886se7b1c2dcdea37d7c%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026416.html">
   <LINK REL="Next"  HREF="026414.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Re: Django-mod_python taking time loading libraries</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20Django-mod_python%20taking%20time%20loading%20libraries&In-Reply-To=2613171a0912230250x3055e886se7b1c2dcdea37d7c%40mail.gmail.com"
       TITLE="[mod_python] Re: Django-mod_python taking time loading libraries">graham.dumpleton at gmail.com
       </A><BR>
    <I>Wed Dec 23 05:55:59 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="026416.html">[mod_python] Re: Django-mod_python taking time loading libraries
</A></li>
        <LI>Next message: <A HREF="026414.html">[mod_python] Re: Django-mod_python taking time loading libraries
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26417">[ date ]</a>
              <a href="thread.html#26417">[ thread ]</a>
              <a href="subject.html#26417">[ subject ]</a>
              <a href="author.html#26417">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>What else is your Apache being used for? If it is being use for other
stuff it may not be possible to tune Apache embedded in a way that is
best for Python web application as that will be too detriment of other
stuff you are hosting.

So, are you hosting static media on same Apache or using a separate
web server such as nginx for static media? Are you running PHP using
mod_php on same Apache? Are you running anything else using any
fastcgi/scgi/ajp hosting mechanisms?

In short, unless that Apache is dedicated to just the Python web
application, the trouble of trying to tune Apache for it is no worth
the trouble and just better off using daemon mode thus allowing you to
separately control things.

BTW, depends a bit on what your site is doing, but using nginx proxy
front end can be very advantageous as isolates Apache from slow
clients allowing Apache processes/threads to be better utilised.

Graham

2009/12/23 bharath venkatesh &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">bharathv6.project at gmail.com</A>&gt;:
&gt;<i> Hi Graham,
</I>&gt;<i>
</I>&gt;<i> &#160; &#160; &#160;Thanks for the link it was very informative
</I>&gt;<i> - Technically running embedded mode with prefork MPM should offer the best
</I>&gt;<i> performance, especially for machines with many cpus/cores.
</I>&gt;<i> - just because mod_wsgi embedded mode and prefork MPM may be the fastest
</I>&gt;<i> solution out there for Apache
</I>&gt;<i> As above lines (from link ) suggests ,can we use mod_wsgi embedded mode and
</I>&gt;<i> prefork MPM (as meantioned that it is best ) ?and tune apache not to load
</I>&gt;<i> libraries and intialise every thime&#160; (as our apache is already running as
</I>&gt;<i> prefork MPM and also our machines are multi core (8 cores) and has 16 AG
</I>&gt;<i> Ram) &#160;or we have to use mod_wsgi in daemon mode to pervent huge loading and
</I>&gt;<i> intialising time ? but &#160;as daemon mode is used with worker MPM we have to
</I>&gt;<i> recompile apache
</I>&gt;<i> Thanks,
</I>&gt;<i> Bharath
</I>&gt;<i>
</I>&gt;<i> On Wed, Dec 23, 2009 at 3:19 AM, Graham Dumpleton
</I>&gt;<i> &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 2009/12/23 bharath venkatesh &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">bharathv6.project at gmail.com</A>&gt;:
</I>&gt;&gt;<i> &gt; will mod wsgi in Daemon mode&#160; solve this issue&#160; as loading libraries and
</I>&gt;&gt;<i> &gt; initialising is done only once ?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Maybe.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> As documented in:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160;<A HREF="http://blog.dscpl.com.au/2009/03/load-spikes-and-excessive-memory-usage.html">http://blog.dscpl.com.au/2009/03/load-spikes-and-excessive-memory-usage.html</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> the OP is having problems because of how embedded mode Python
</I>&gt;&gt;<i> applications work in Apache. This may be &#160;exacerbated by using prefork
</I>&gt;&gt;<i> MPM with Apache. Same issues come up with mod_wsgi embedded mode as
</I>&gt;&gt;<i> with mod_python if you do not configure your Apache correctly for fat
</I>&gt;&gt;<i> Python web applications. If you are limited in being able to do that
</I>&gt;&gt;<i> because Apache is heavily used for static file serving or mod_php, you
</I>&gt;&gt;<i> really should use mod_wsgi daemon mode instead as described in that
</I>&gt;&gt;<i> post.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Why daemon mode will help is fixed number of persistent processes and
</I>&gt;&gt;<i> more specifically defaulting to one process, so you only incur startup
</I>&gt;&gt;<i> cost once and not for many processes, or in case of embedded mode also
</I>&gt;&gt;<i> not when the processes get recycled as is default for Apache.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Graham
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; On Tue, Dec 22, 2009 at 5:13 PM, bharath venkatesh
</I>&gt;&gt;<i> &gt; &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">bharathv6.project at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; Hi,
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; &#160; &#160; Django with mod python&#160; is taking time loading libraries . I am
</I>&gt;&gt;<i> &gt;&gt; using
</I>&gt;&gt;<i> &gt;&gt; python&#160; open source libraries like montylingua , simplejson and django
</I>&gt;&gt;<i> &gt;&gt; is
</I>&gt;&gt;<i> &gt;&gt; taking
</I>&gt;&gt;<i> &gt;&gt; time loading these libraries .
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; When django is run using python manage.py runserver first request takes
</I>&gt;&gt;<i> &gt;&gt; time but rest of the requests doesn't take time ( quite fast ) ,which
</I>&gt;&gt;<i> &gt;&gt; is
</I>&gt;&gt;<i> &gt;&gt; acceptable but when django is used along with apache and mod_python it
</I>&gt;&gt;<i> &gt;&gt; takes
</I>&gt;&gt;<i> &gt;&gt; time as much time as django takes for first request&#160; when run using
</I>&gt;&gt;<i> &gt;&gt; python
</I>&gt;&gt;<i> &gt;&gt; manage.py runserver for almost every request.
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; How to avoid this as our performance is greatly hindered by this
</I>&gt;&gt;<i> &gt;&gt; behaviour
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; is it possible to cache these external open source libraries&#160; ?
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; Thanks in Advance,
</I>&gt;&gt;<i> &gt;&gt; Bharath
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; _______________________________________________
</I>&gt;&gt;<i> &gt; Mod_python mailing list
</I>&gt;&gt;<i> &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;&gt;<i> &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026416.html">[mod_python] Re: Django-mod_python taking time loading libraries
</A></li>
	<LI>Next message: <A HREF="026414.html">[mod_python] Re: Django-mod_python taking time loading libraries
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26417">[ date ]</a>
              <a href="thread.html#26417">[ thread ]</a>
              <a href="subject.html#26417">[ subject ]</a>
              <a href="author.html#26417">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
