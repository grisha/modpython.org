<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Credential caching for Apache/mod_python
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Credential%20caching%20for%20Apache/mod_python&In-Reply-To=200912101757.57949.daniel.klaffenbach%40informatik.tu-chemnitz.de">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026399.html">
   <LINK REL="Next"  HREF="026402.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Credential caching for Apache/mod_python</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Credential%20caching%20for%20Apache/mod_python&In-Reply-To=200912101757.57949.daniel.klaffenbach%40informatik.tu-chemnitz.de"
       TITLE="[mod_python] Credential caching for Apache/mod_python">graham.dumpleton at gmail.com
       </A><BR>
    <I>Thu Dec 10 15:48:35 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="026399.html">[mod_python] Credential caching for Apache/mod_python
</A></li>
        <LI>Next message: <A HREF="026402.html">[mod_python] Credential caching for Apache/mod_python
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26401">[ date ]</a>
              <a href="thread.html#26401">[ thread ]</a>
              <a href="subject.html#26401">[ subject ]</a>
              <a href="author.html#26401">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>2009/12/11 Daniel Klaffenbach &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">daniel.klaffenbach at informatik.tu-chemnitz.de</A>&gt;:
&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> in my setup mod_python is being used for authentication (with
</I>&gt;<i> PythonAuthenHandler). The Authentication process is pretty complex (hybrid
</I>&gt;<i> mySQL/RADIUS).
</I>&gt;<i>
</I>&gt;<i> Authentication with mod_python itself works very well on this setup. However
</I>&gt;<i> there are some speed and server load issues. We are serving mostly SVN and
</I>&gt;<i> WebDAV stuff over https.
</I>&gt;<i>
</I>&gt;<i> Now whenever a user wants to upload a large number of small files to his/her
</I>&gt;<i> DAV share, quite a few WebDAV commands are being issued.
</I>&gt;<i>
</I>&gt;<i> The problem is that for every simple DAV command (PROPFIND, GET,
</I>&gt;<i> OPTIONS,...) the Python auth handler is being asked if the user-provided
</I>&gt;<i> credentials are valid - Apache does not seem to do any caching.
</I>&gt;<i>
</I>&gt;<i> As a result of this the RADIUS and mySQL Servers are being asked for a
</I>&gt;<i> username/password TWICE for every single file the user uploads, downloads or
</I>&gt;<i> just lists in a directory, which is *really* bad.
</I>&gt;<i>
</I>&gt;<i> So my question is: Is there a good way of telling Apache and/or mod_python
</I>&gt;<i> to cache the &quot;apache.OK&quot; reply from the Python auth handler for a few
</I>&gt;<i> seconds?
</I>&gt;<i>
</I>&gt;<i> BTW: I am on Scientific Linux 5.3 with Apache 2.2.3 and mod_python 3.2.8.
</I>
You should upgrade to mod_python 3.3.1 for a start, that older
versions has lots of bugs in it.

As to your issue, it is up to you to perform caching within your
authentication handler. You can keep a dictionary cache of whether
someone has successfully authenticated and when. If they requested
previously within some defined period, let them in again without
rechecking authentication. If period to great, expire information in
cache and reauthenticate them against the back end.

Graham
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026399.html">[mod_python] Credential caching for Apache/mod_python
</A></li>
	<LI>Next message: <A HREF="026402.html">[mod_python] Credential caching for Apache/mod_python
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26401">[ date ]</a>
              <a href="thread.html#26401">[ thread ]</a>
              <a href="subject.html#26401">[ subject ]</a>
              <a href="author.html#26401">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
