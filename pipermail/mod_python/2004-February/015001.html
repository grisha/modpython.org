<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python]  DocumentRoot / security / directory structure
	questions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20%20DocumentRoot%20/%20security%20/%20directory%20structure%0A%09questions&In-Reply-To=402714FB.1040207%40sponsera.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014985.html">
   <LINK REL="Next"  HREF="014992.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python]  DocumentRoot / security / directory structure
	questions</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Byron Ellacott</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20%20DocumentRoot%20/%20security%20/%20directory%20structure%0A%09questions&In-Reply-To=402714FB.1040207%40sponsera.com"
       TITLE="[mod_python]  DocumentRoot / security / directory structure
	questions">bje at apnic.net
       </A><BR>
    <I>Tue Feb 10 09:22:14 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="014985.html">[mod_python] 
	DocumentRoot / security / directory structure questions
</A></li>
        <LI>Next message: <A HREF="014992.html">[mod_python] Reload scripts without restarting Apache?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15001">[ date ]</a>
              <a href="thread.html#15001">[ thread ]</a>
              <a href="subject.html#15001">[ subject ]</a>
              <a href="author.html#15001">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, 2004-02-09 at 15:04, David Geller wrote:
&gt;<i> With mod_python, is it possible to keep your python files outside the 
</I>&gt;<i> DocumentRoot?  I guess it is, with all python files other than the one 
</I>&gt;<i> containing the handler,  but can you put the handler file outside the 
</I>&gt;<i> document root as well?
</I>
&lt;Directory /my/app&gt;
  PythonInterpreter myapp
  SetHandler python-program
  PythonHandler myhandler
&lt;/Directory&gt;

As long as myhandler is somewhere in sys.path, this will work just
fine.  Note that you can modify sys.path via the PythonPath directive:

  PythonPath &quot;sys.path.append('/opt/my/app/lib')&quot;

As long as your program doesn't further mess with sys.path, this is also
quite efficient, since mod_python doesn't redo PythonPath directives
it's already done.

&gt;<i> 2. Related question - (I think this was answered, but not quite 
</I>&gt;<i> sure...). If you want *all* your requests to come through your python 
</I>&gt;<i> handler, and you are *not* serving *directly* html or img, how do you do 
</I>&gt;<i> this? AND, you basically want to obfiscate the fact you are using 
</I>&gt;<i> python, and want only very generic-looking  file names to appear in the 
</I>&gt;<i> &quot;url&quot; bar (top browser bar).  Of course, your python might itself 
</I>&gt;<i> generate html that will contain references to images, javascript etc - 
</I>&gt;<i> and for these resources, it is fine, for them to be inside your document 
</I>&gt;<i> root
</I>
The above &lt;Directory ...&gt; directives (or the same directives in a
.htaccess) will pass all requests through myhandler.handler().  You can
fetch <A HREF="http://your.site/my/app/images/modpy_logo.png">http://your.site/my/app/images/modpy_logo.png</A> and it will call
your handler, even though those files don't exist.

The only gotcha is that DirectoryIndex won't work as expected.  Because
it tests for the existence of various files directly, it won't redirect
to index.html unless that file exists on disk.  I haven't looked into
solving the problem, but I'm sure you can. :)

&gt;<i> 3. And another related question: I have seen apps (e.g., written in PHP) 
</I>&gt;<i> that always have the same (original, simple) url appear in the top URL 
</I>&gt;<i> bar, no matter which URL's are generated by the underlying program (eg., 
</I>&gt;<i> during POST requests). How is this done?
</I>
&lt;form method=&quot;POST&quot;&gt;
&lt;input type=&quot;hidden&quot; name=&quot;target&quot; value=&quot;custdetails&quot;&gt;
...
&lt;/form&gt;

You can then check for &quot;target&quot; to know what you're supposed to do. 
Whether this is a useful or good practice is another matter, though. :)

-- 
bje
</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014985.html">[mod_python] 
	DocumentRoot / security / directory structure questions
</A></li>
	<LI>Next message: <A HREF="014992.html">[mod_python] Reload scripts without restarting Apache?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15001">[ date ]</a>
              <a href="thread.html#15001">[ thread ]</a>
              <a href="subject.html#15001">[ subject ]</a>
              <a href="author.html#15001">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
