<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] gzip and conditional get
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20gzip%20and%20conditional%20get&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014934.html">
   <LINK REL="Next"  HREF="014940.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] gzip and conditional get</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Khurram</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20gzip%20and%20conditional%20get&In-Reply-To="
       TITLE="[mod_python] gzip and conditional get">khurram at renai-soft.com
       </A><BR>
    <I>Tue Feb  3 17:55:29 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="014934.html">[mod_python] Any support for on-time Initialization?
</A></li>
        <LI>Next message: <A HREF="014940.html">[mod_python] O/S SendFile call
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14935">[ date ]</a>
              <a href="thread.html#14935">[ thread ]</a>
              <a href="subject.html#14935">[ subject ]</a>
              <a href="author.html#14935">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>An example of output compression.

import gzip

def getWriter(req):
    try:
        if req.headers_in['Accept-Encoding']=='gzip, deflate':
            return gzip.GZipFile('','wb',9,req)
    except:
        pass
    return req

def processRequest(req):
    writer = getWriter(req)
    writer.write(header)   
    writer.write(content)
    writer.write(footer)
    writer.close() # Good practice to do this. It does not try to close req
object
    return apache.OK

If you want to use it with Cheetah or another templating engine, most of them
accept writers and you will be better off passing the writer to them for quick
response.


Khurram Ijaz,
Renaissance Software.
<A HREF="http://www.renai-soft.com">http://www.renai-soft.com</A>

----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014934.html">[mod_python] Any support for on-time Initialization?
</A></li>
	<LI>Next message: <A HREF="014940.html">[mod_python] O/S SendFile call
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14935">[ date ]</a>
              <a href="thread.html#14935">[ thread ]</a>
              <a href="subject.html#14935">[ subject ]</a>
              <a href="author.html#14935">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
