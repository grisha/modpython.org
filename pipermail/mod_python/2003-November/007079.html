<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Sending a message to Apache children
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Sending%20a%20message%20to%20Apache%20children&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007076.html">
   <LINK REL="Next"  HREF="007077.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Sending a message to Apache children</H1>
    <B>perry.tew at cibavision.novartis.com</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Sending%20a%20message%20to%20Apache%20children&In-Reply-To="
       TITLE="[mod_python] Sending a message to Apache children">perry.tew at cibavision.novartis.com
       </A><BR>
    <I>Tue Nov 11 08:27:40 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="007076.html">[mod_python] Access to apache namespace in PythonPath
</A></li>
        <LI>Next message: <A HREF="007077.html">[mod_python] Sending a message to Apache children 
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7079">[ date ]</a>
              <a href="thread.html#7079">[ thread ]</a>
              <a href="subject.html#7079">[ subject ]</a>
              <a href="author.html#7079">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<table border=0 width="100%"><tr><td>
<!--beginarticle-->
<PRE>Something I've found useful is to use the CleanupHandler to handle this 
kind of thing.  I have a security realm that caches users, roles, and 
protected urls.  I have a cleanup handler that detects changes in the 
database and updates the cache.  Since this happens after the request has 
ended, there is no impact to the user.  Each child is updated after each 
one handles a request.  The only downside is that a single request must be 
served before the change is placed into effect.  However, given the number 
of requests my handlers serve, that's a very small issue compared to 
adding the overhead of checking for changes during every single request 
while the browser is waiting.

Just some thoughts,
Perry




On Nov 10, 2003, at 11:16 AM, Simon Willison wrote:

&gt;<i> Hi all,
</I>&gt;<i>
</I>&gt;<i> Is there a way of sending a &quot;message&quot; to all Apache children running a 
</I>&gt;<i> mod_python application? Here's the problem: we have a template system 
</I>&gt;<i> which compiles template strings in to an in-memory data structure. 
</I>&gt;<i> This structure is cached in memory in a global dictionary for each 
</I>&gt;<i> Apache child. At the moment templates are stored in the cache with a 
</I>&gt;<i> timestamp saying when they were loaded, and expire and are reloaded 
</I>&gt;<i> every 5 minutes. We want to be able to instantly invalidate a cached 
</I>&gt;<i> template if an urgent change needs to be made to the site.
</I>&gt;<i>
</I>&gt;<i> Is there a way of pushing out a message to all of the Apache children 
</I>&gt;<i> saying &quot;reload template X NOW&quot;, without having to hit the file system 
</I>&gt;<i> or database for every template request?
</I>
Do you check the timestamp on the template from the filesystem?  That 
might be better than to just throw away the template every 5 minutes. 
I can assume that most templates will be static for longer than 5 
minutes.

Seth

_______________________________________________
Mod_python mailing list
<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>



</PRE>
<!--endarticle-->
</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007076.html">[mod_python] Access to apache namespace in PythonPath
</A></li>
	<LI>Next message: <A HREF="007077.html">[mod_python] Sending a message to Apache children 
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7079">[ date ]</a>
              <a href="thread.html#7079">[ thread ]</a>
              <a href="subject.html#7079">[ subject ]</a>
              <a href="author.html#7079">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
