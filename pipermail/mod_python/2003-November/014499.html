<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] ValueError: Failed to acquire global mutex lock
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20ValueError%3A%20Failed%20to%20acquire%20global%20mutex%20lock&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014504.html">
   <LINK REL="Next"  HREF="014505.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] ValueError: Failed to acquire global mutex lock</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Julian Ciccale</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20ValueError%3A%20Failed%20to%20acquire%20global%20mutex%20lock&In-Reply-To="
       TITLE="[mod_python] ValueError: Failed to acquire global mutex lock">jciccale at mac.com
       </A><BR>
    <I>Mon Nov 24 10:44:17 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="014504.html">[mod_python] Wierd pyPGSQL stuff with mod_python 3.1.2b
</A></li>
        <LI>Next message: <A HREF="014505.html">[mod_python] Form-based authentication using mod_puthon / Apache
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14499">[ date ]</a>
              <a href="thread.html#14499">[ thread ]</a>
              <a href="subject.html#14499">[ subject ]</a>
              <a href="author.html#14499">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks, BTW the &quot;lock&quot; argument its only available through BaseSession's __init__ and not DbmSession/MemorySession. It would be interesting to have it.. There are cases where you may want to request be processed at the same time for the same session, for example if the users calls a pdf generating page and at the same time he opens another browser win to do soma other stuff.

It seems that my problem would be the scope stuff cause I dont get my data saved even by unlocking the session.
By now I've made a work around by calling unlock &amp; save when the request is done

Thanks,
Julian

I removed the definitions and I'm using directly mod_python's Session object. then action
On Monday, November 24, 2003, at 05:25AM, Gregory (Grisha) Trubetskoy &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">grisha at modpython.org</A>&gt; wrote:

&gt;<i>
</I>&gt;<i>
</I>&gt;<i>On Mon, 24 Nov 2003, Julian Ciccale wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Kind of. What I do is the followoing
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> try:
</I>&gt;&gt;<i>     from mod_python.Session import Session as DefaultSessionCall
</I>&gt;&gt;<i> except:
</I>&gt;&gt;<i>     def DefaultSessionCall( r ):
</I>&gt;&gt;<i>        return None
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> , this is a peice of code I use to make configurable the Session class
</I>&gt;&gt;<i> the user wants to use.
</I>&gt;<i>
</I>&gt;<i>This is fine, but make sure that after you do:
</I>&gt;<i>
</I>&gt;<i>   session = DefaultSessionCall(r)
</I>&gt;<i>
</I>&gt;<i>that the session variable is not referenced by anything after the request
</I>&gt;<i>is done. Or you can explicitely unlock it:
</I>&gt;<i>
</I>&gt;<i>   session.unlock()
</I>&gt;<i>
</I>&gt;&gt;<i> I also then try to call a setter method on a user's class to pass the
</I>&gt;&gt;<i> session he works on. How should I use the session? The locking mechanism
</I>&gt;&gt;<i> is needed for read/write or just write?
</I>&gt;<i>
</I>&gt;<i>You don't need to worry about locking for read and write, that locking is
</I>&gt;<i>taken care of automtically. You need session locking to make sure that no
</I>&gt;<i>two HTTP requests for the same session execute at the same time.
</I>&gt;<i>
</I>&gt;&gt;<i> I think I may write a session wrapper class to lock unlock on user call
</I>&gt;&gt;<i> to get/set properties..
</I>&gt;<i>
</I>&gt;<i>Your wrapper can avoid session locking altogether by instantiating it as
</I>&gt;<i>such:
</I>&gt;<i>
</I>&gt;<i>session = Session(req, lock=0)
</I>&gt;<i>
</I>&gt;<i>Grisha
</I>&gt;<i>
</I>&gt;<i>
</I></PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014504.html">[mod_python] Wierd pyPGSQL stuff with mod_python 3.1.2b
</A></li>
	<LI>Next message: <A HREF="014505.html">[mod_python] Form-based authentication using mod_puthon / Apache
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14499">[ date ]</a>
              <a href="thread.html#14499">[ thread ]</a>
              <a href="subject.html#14499">[ subject ]</a>
              <a href="author.html#14499">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
