<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Wierd pyPGSQL stuff with mod_python 3.1.2b
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Wierd%20pyPGSQL%20stuff%20with%20mod_python%203.1.2b&In-Reply-To=12600642.1069662777616.JavaMail.jciccale%40mac.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007104.html">
   <LINK REL="Next"  HREF="007105.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Wierd pyPGSQL stuff with mod_python 3.1.2b</H1>
    <B>Keith Randall</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Wierd%20pyPGSQL%20stuff%20with%20mod_python%203.1.2b&In-Reply-To=12600642.1069662777616.JavaMail.jciccale%40mac.com"
       TITLE="[mod_python] Wierd pyPGSQL stuff with mod_python 3.1.2b">randallk at cpsc.ucalgary.ca
       </A><BR>
    <I>Mon Nov 24 09:37:03 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="007104.html">[mod_python] Wierd pyPGSQL stuff with mod_python 3.1.2b
</A></li>
        <LI>Next message: <A HREF="007105.html">[mod_python] ValueError: Failed to acquire global mutex lock
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7110">[ date ]</a>
              <a href="thread.html#7110">[ thread ]</a>
              <a href="subject.html#7110">[ subject ]</a>
              <a href="author.html#7110">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<table border=0 width="100%"><tr><td>
<!--beginarticle-->
<PRE>


On Mon, 24 Nov 2003, Julian Ciccale wrote:

&gt;<i> Which python version are you using?
</I>&gt;<i> 
</I>&gt;<i> Are you sure the python interpreter that you use from the command line and the one that gets called wihthin httpd are the same?
</I>&gt;<i> 
</I>&gt;<i> Check it with
</I>&gt;<i> import sys
</I>&gt;<i> print sys.version
</I>&gt;<i> 
</I>
Yep, they're the same:

apache:
[Mon Nov 24 09:05:06 2003] [notice] Apache/2.0.48 (Unix) mod_python/3.1.2b Python/2.3.2 configured

vs.
python -v

Python 2.3.2 (#2, Nov 12 2003, 23:39:57)
[GCC 3.2.2 20030222 (Red Hat Linux 3.2.2-5)] on linux2

(and there's only one 2.3.2 installed ).

sys.path is identical for both as well ( except for the script's own directory, which is
chrooted to htdocs by apache as expected.)

Also the path to pyPgSQL is readable by all, everything was built from source, no rpms.

python 2.3.2
pyPgSQL 2.4
mod_python 3.1.2b
apache 2.0.48
postgresql 7.4

Keith

&gt;<i> 
</I>&gt;<i> On Monday, November 24, 2003, at 07:02AM, Keith Randall &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">randallk at cpsc.ucalgary.ca</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;Hi,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;I have a script that works fine with mod_python 2.7.8 + apache 1.3.28,
</I>&gt;<i> &gt;and I want to run it under apache 2.0.48 with mod_python 3.1.2b for
</I>&gt;<i> &gt;the session handling stuff.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;When I try to connect to my postgresql database in the following way:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;from pyPgSQL import PgSQL
</I>&gt;<i> &gt;pdb = PgSQL.connect( host = 'foo' , port='5432',database='foo',user='joe')
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;Apache error_log says:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;PythonHandler mod_python.publisher: AttributeError: 'module' object has no attribute 'connect'
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;and indeed when I do a dir(pgSQL), it lists no connect function.
</I>&gt;<i> &gt;When I do the same outside apache/mod_python I can see the connect function.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;Any thoughts?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;dir(PgSQL)
</I>&gt;<i> &gt;running within mod_python:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;['BooleanType', 'BufferType', 'BuiltinFunctionType',
</I>&gt;<i> &gt;'BuiltinMethodType', 'ClassType', 'CodeType', 'ComplexType',
</I>&gt;<i> &gt;'DateTime', 'DictProxyType', 'DictType', 'DictionaryType',
</I>&gt;<i> &gt;'EllipsisType', 'FileType', 'FloatType', 'FrameType', 'FunctionType',
</I>&gt;<i> &gt;'GeneratorType', 'InstanceType', 'IntType', 'LambdaType', 'ListType',
</I>&gt;<i> &gt;'LongType', 'MethodType', 'ModuleType', 'NoneType',
</I>&gt;<i> &gt;'NotImplementedType', 'ObjectType', 'SliceType', 'StringType',
</I>&gt;<i> &gt;'StringTypes', 'TracebackType', 'TupleType', 'TypeType',
</I>&gt;<i> &gt;'UnboundMethodType', 'UnicodeType', 'XRangeType', '__builtins__',
</I>&gt;<i> &gt;'__doc__', '__file__', '__name__', 'copy', 'getdefaultencoding',
</I>&gt;<i> &gt;'getrefcount', 'new', 'noWeakRef', 're', 'string', 'sys', 'weakref']
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;dir(PgSQL)
</I>&gt;<i> &gt;running outside mod_python:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;['BAD_RESPONSE', 'BINARY', 'BOOLEAN', 'BooleanType', 'BufferType',
</I>&gt;<i> &gt;'BuiltinFunctionType', 'BuiltinMethodType', 'COMMAND_OK',
</I>&gt;<i> &gt;'CONNECTION_BAD', 'CONNECTION_OK', 'COPY_IN', 'COPY_OUT', 'ClassType',
</I>&gt;<i> &gt;'CodeType', 'ComplexType', 'Connection', 'Cursor', 'DATETIME',
</I>&gt;<i> &gt;'DBAPITypeObject', 'DataError', 'DatabaseError', 'Date',
</I>&gt;<i> &gt;'DateFromTicks', 'DateTime', 'DateTimeDelta', 'DateTimeDeltaType',
</I>&gt;<i> &gt;'DateTimeType', 'DictProxyType', 'DictType', 'DictionaryType',
</I>&gt;<i> &gt;'EMPTY_QUERY', 'EllipsisType', 'Error', 'FATAL_ERROR', 'FileType',
</I>&gt;<i> &gt;'FloatType', 'FrameType', 'FunctionType', 'GeneratorType',
</I>&gt;<i> &gt;'HAVE_LONG_LONG_SUPPORT', 'INV_READ', 'INV_SEEK_CUR', 'INV_SEEK_END',
</I>&gt;<i> &gt;'INV_SEEK_SET', 'INV_WRITE', 'InstanceType', 'IntType',
</I>&gt;<i> &gt;'IntegrityError', 'InterfaceError', 'InternalError', 'LambdaType',
</I>&gt;<i> &gt;'ListType', 'LongType', 'MethodType', 'ModuleType', 'NONFATAL_ERROR',
</I>&gt;<i> &gt;'NUMBER', 'NoneType', 'NotImplementedType', 'NotSupportedError',
</I>&gt;<i> &gt;'OTHER', 'ObjectType', 'OperationalError', 'PG_ABSTIME', 'PG_ACLITEM',
</I>&gt;<i> &gt;'PG_BIGINT', 'PG_BLOB', 'PG_BOOL', 'PG_BOX', 'PG_BPCHAR', 'PG_BYTEA',
</I>&gt;<i> &gt;'PG_CASH', 'PG_CHAR', 'PG_CID', 'PG_CIDR', 'PG_CIRCLE', 'PG_DATE',
</I>&gt;<i> &gt;'PG_FLOAT', 'PG_FLOAT4', 'PG_FLOAT8', 'PG_False', 'PG_INET',
</I>&gt;<i> &gt;'PG_INT2', 'PG_INT2VECTOR', 'PG_INT4', 'PG_INT8', 'PG_INTEGER',
</I>&gt;<i> &gt;'PG_INTERVAL', 'PG_LINE', 'PG_LSEG', 'PG_MACADDR', 'PG_MONEY',
</I>&gt;<i> &gt;'PG_NAME', 'PG_NUMERIC', 'PG_OID', 'PG_OIDVECTOR', 'PG_PATH',
</I>&gt;<i> &gt;'PG_POINT', 'PG_POLYGON', 'PG_REFCURSOR', 'PG_REGPROC', 'PG_RELTIME',
</I>&gt;<i> &gt;'PG_ROWID', 'PG_SMALLINT', 'PG_TEXT', 'PG_TID', 'PG_TIME',
</I>&gt;<i> &gt;'PG_TIMESTAMP', 'PG_TIMESTAMPTZ', 'PG_TIMETZ', 'PG_TINTERVAL',
</I>&gt;<i> &gt;'PG_True', 'PG_UNKNOWN', 'PG_VARBIT', 'PG_VARCHAR', 'PG_XID',
</I>&gt;<i> &gt;'PG_ZPBIT', 'POLLING_ACTIVE', 'POLLING_FAILED', 'POLLING_OK',
</I>&gt;<i> &gt;'POLLING_READING', 'POLLING_WRITING', 'PQconndefaults', 'PQconnectdb',
</I>&gt;<i> &gt;'PQftypeName', 'PQresStatus', 'PQresType', 'PgArray', 'PgBoolean',
</I>&gt;<i> &gt;'PgBooleanFromInteger', 'PgBooleanFromString', 'PgBooleanType',
</I>&gt;<i> &gt;'PgBytea', 'PgConnectionType', 'PgInt2', 'PgInt2Type', 'PgInt8',
</I>&gt;<i> &gt;'PgInt8Type', 'PgLargeObject', 'PgLargeObjectType', 'PgMoney',
</I>&gt;<i> &gt;'PgNumeric', 'PgOther', 'PgQuoteBytea', 'PgQuoteString',
</I>&gt;<i> &gt;'PgResultSet', 'PgResultType', 'PgTypes', 'PgUnQuoteBytea',
</I>&gt;<i> &gt;'PgVersion', 'PgVersionType', 'ProgrammingError', 'RESULT_DDL',
</I>&gt;<i> &gt;'RESULT_DML', 'RESULT_DQL', 'RESULT_EMPTY', 'RESULT_ERROR', 'ROWID',
</I>&gt;<i> &gt;'STRING', 'SliceType', 'StringType', 'StringTypes', 'TUPLES_OK',
</I>&gt;<i> &gt;'Time', 'TimeFromTicks', 'Timestamp', 'TimestampFromTicks',
</I>&gt;<i> &gt;'TracebackType', 'TupleType', 'TypeCache', 'TypeType',
</I>&gt;<i> &gt;'UnboundMethodType', 'UnicodeType', 'Warning', 'XRangeType',
</I>&gt;<i> &gt;'__builtins__', '__doc__', '__file__', '__name__', '_handleArray',
</I>&gt;<i> &gt;'_quote', '_quoteall', 'apilevel', 'connect', 'copy',
</I>&gt;<i> &gt;'dateTimeDelta2Interval', 'fetchReturnsList', 'getdefaultencoding',
</I>&gt;<i> &gt;'getrefcount', 'libpq', 'make_PgResultSetClass', 'new',
</I>&gt;<i> &gt;'noPostgresCursor', 'noWeakRef', 'paramstyle', 're', 're_4UP',
</I>&gt;<i> &gt;'re_DQL', 're_DRI', 're_DRT', 'replace', 'string', 'sys',
</I>&gt;<i> &gt;'threadsafety', 'version', 'weakref']
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;httpd.conf:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;LoadModule python_module /var/www2/modules/mod_python.so
</I>&gt;<i> &gt;&lt;Directory /var/www2/htdocs/billing&gt;  
</I>&gt;<i> &gt;SetHandler python-program
</I>&gt;<i> &gt;PythonHandler mod_python.publisher
</I>&gt;<i> &gt;&lt;/Directory&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;_______________________________________________
</I>&gt;<i> &gt;Mod_python mailing list
</I>&gt;<i> &gt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> &gt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i> 
</I>

</PRE>
<!--endarticle-->
</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007104.html">[mod_python] Wierd pyPGSQL stuff with mod_python 3.1.2b
</A></li>
	<LI>Next message: <A HREF="007105.html">[mod_python] ValueError: Failed to acquire global mutex lock
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7110">[ date ]</a>
              <a href="thread.html#7110">[ thread ]</a>
              <a href="subject.html#7110">[ subject ]</a>
              <a href="author.html#7110">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
