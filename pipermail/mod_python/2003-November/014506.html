<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Form-based authentication using mod_puthon / Apache
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Form-based%20authentication%20using%20mod_puthon%20/%20Apache&In-Reply-To=C0FC22C08B82074A88B500617641577787A7CB%40johnson.mediapulse.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014505.html">
   <LINK REL="Next"  HREF="014507.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Form-based authentication using mod_puthon / Apache</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Michael S. Fischer</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Form-based%20authentication%20using%20mod_puthon%20/%20Apache&In-Reply-To=C0FC22C08B82074A88B500617641577787A7CB%40johnson.mediapulse.net"
       TITLE="[mod_python] Form-based authentication using mod_puthon / Apache">michael at dynamine.net
       </A><BR>
    <I>Mon Nov 24 11:10:44 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="014505.html">[mod_python] Form-based authentication using mod_puthon / Apache
</A></li>
        <LI>Next message: <A HREF="014507.html">[mod_python] Form-based authentication using mod_puthon / Apache
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14506">[ date ]</a>
              <a href="thread.html#14506">[ thread ]</a>
              <a href="subject.html#14506">[ subject ]</a>
              <a href="author.html#14506">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Michael C. Neel wrote:

&gt;<i> So what can you do if you want the sexy login fields, but still be
</I>&gt;<i> secure (as is possible)?  A lot of things, we may not be able to be 100%
</I>&gt;<i> secure, but that doesn't mean we have to make it easy.  Here is
</I>&gt;<i> something things to do (many thanks to the Albatross developers for
</I>&gt;<i> showing me much of this):
</I>&gt;<i> 
</I>&gt;<i> 1.  Build a string or object with as much detail about the client as
</I>&gt;<i> possible, (IP, user-agent, timestamp).
</I>&gt;<i> 2.  take this string/object gzip it (we have a space limit)
</I>&gt;<i> 3.  Sign this string with MD5 and a key only the server will ever know.
</I>&gt;<i> 4.  base64 encode the signed string to make sure all characters are
</I>&gt;<i> legit.
</I>&gt;<i> 
</I>&gt;<i> ...now when we decode the cookie...
</I>&gt;<i> 
</I>&gt;<i> 1.  base64 decode it, and check our md5 sig
</I>&gt;<i> 2.  ungzip the string and parse it back to it's object/string form
</I>&gt;<i> 3.  make sure the IP, user-agent match the current request
</I>&gt;<i> 4.  make sure the timestamp is within our limit for a login
</I>
This is pretty much what the Session handling code in mod_python does 
now, so there's really no need to bother re-inventing the wheel :-)

PS - Grisha, nice job implementing the Session classes.  I couldn't have 
done it better myself, and the code is a nice example of metaclasses and 
subclassing native types that's not well covered in the Python 2.2 
documentation.  (I had to read the PEPs to understand what was going on, 
but it was a rewarding process.)

--Michael

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014505.html">[mod_python] Form-based authentication using mod_puthon / Apache
</A></li>
	<LI>Next message: <A HREF="014507.html">[mod_python] Form-based authentication using mod_puthon / Apache
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14506">[ date ]</a>
              <a href="thread.html#14506">[ thread ]</a>
              <a href="subject.html#14506">[ subject ]</a>
              <a href="author.html#14506">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
