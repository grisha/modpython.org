<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] ValueError: Failed to acquire global mutex lock
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20ValueError%3A%20Failed%20to%20acquire%20global%20mutex%20lock&In-Reply-To=6232663.1069638580829.JavaMail.jciccale%40mac.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014495.html">
   <LINK REL="Next"  HREF="014492.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] ValueError: Failed to acquire global mutex lock</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Gregory (Grisha) Trubetskoy</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20ValueError%3A%20Failed%20to%20acquire%20global%20mutex%20lock&In-Reply-To=6232663.1069638580829.JavaMail.jciccale%40mac.com"
       TITLE="[mod_python] ValueError: Failed to acquire global mutex lock">grisha at modpython.org
       </A><BR>
    <I>Sun Nov 23 23:25:29 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="014495.html">[mod_python] ValueError: Failed to acquire global mutex lock
</A></li>
        <LI>Next message: <A HREF="014492.html">[mod_python] mod_dav phases question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14496">[ date ]</a>
              <a href="thread.html#14496">[ thread ]</a>
              <a href="subject.html#14496">[ subject ]</a>
              <a href="author.html#14496">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

On Mon, 24 Nov 2003, Julian Ciccale wrote:

&gt;<i> Kind of. What I do is the followoing
</I>&gt;<i>
</I>&gt;<i> try:
</I>&gt;<i>     from mod_python.Session import Session as DefaultSessionCall
</I>&gt;<i> except:
</I>&gt;<i>     def DefaultSessionCall( r ):
</I>&gt;<i>        return None
</I>&gt;<i>
</I>&gt;<i> , this is a peice of code I use to make configurable the Session class
</I>&gt;<i> the user wants to use.
</I>
This is fine, but make sure that after you do:

   session = DefaultSessionCall(r)

that the session variable is not referenced by anything after the request
is done. Or you can explicitely unlock it:

   session.unlock()

&gt;<i> I also then try to call a setter method on a user's class to pass the
</I>&gt;<i> session he works on. How should I use the session? The locking mechanism
</I>&gt;<i> is needed for read/write or just write?
</I>
You don't need to worry about locking for read and write, that locking is
taken care of automtically. You need session locking to make sure that no
two HTTP requests for the same session execute at the same time.

&gt;<i> I think I may write a session wrapper class to lock unlock on user call
</I>&gt;<i> to get/set properties..
</I>
Your wrapper can avoid session locking altogether by instantiating it as
such:

session = Session(req, lock=0)

Grisha
</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014495.html">[mod_python] ValueError: Failed to acquire global mutex lock
</A></li>
	<LI>Next message: <A HREF="014492.html">[mod_python] mod_dav phases question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14496">[ date ]</a>
              <a href="thread.html#14496">[ thread ]</a>
              <a href="subject.html#14496">[ subject ]</a>
              <a href="author.html#14496">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
