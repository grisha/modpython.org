<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] not using correct python library path
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20not%20using%20correct%20python%20library%20path&In-Reply-To=44FF21E8.4040700%40jgassociates.ca">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022029.html">
   <LINK REL="Next"  HREF="022032.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] not using correct python library path</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Grant Kelly</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20not%20using%20correct%20python%20library%20path&In-Reply-To=44FF21E8.4040700%40jgassociates.ca"
       TITLE="[mod_python] not using correct python library path">gkelly at gmail.com
       </A><BR>
    <I>Wed Sep  6 16:05:05 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="022029.html">[mod_python] not using correct python library path
</A></li>
        <LI>Next message: <A HREF="022032.html">[mod_python] not using correct python library path
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22030">[ date ]</a>
              <a href="thread.html#22030">[ thread ]</a>
              <a href="subject.html#22030">[ subject ]</a>
              <a href="author.html#22030">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I think I've solved my problem with mod_python. It had to do with
having a manual PYTHONPATH specified for root versus the user I
compiled mod_python with. root was using python2.3 (to run `make
install`) and the user was using python2.4, so mod_python.so was
compiled for 2.4 but when it ran, it was using the 2.3 library path.
This is my best guess at what happened...could be wrong, but it seems
to be working now.

Thanks,
Grant


On 9/6/06, Jim Gallacher &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">jpg at jgassociates.ca</A>&gt; wrote:
&gt;<i> Grant Kelly wrote:
</I>&gt;<i> &gt; Hello,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I'm having a problem with mod_python.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I have two versions of python:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;  The system version: /usr/bin/python (2.3)
</I>&gt;<i> &gt;  Local installed version: /usr/local/bin/python (2.4)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I configured mod_python with:
</I>&gt;<i> &gt; ./configure --with-apxs=/usr/sbin/apxs
</I>&gt;<i> &gt; --with-python=/usr/local/bin/python2.4
</I>&gt;<i> &gt; --with-python-src=/usr/local/src/python
</I>&gt;<i> &gt; ----------------------
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; But when I try to use mod_python, I receive the following in the
</I>&gt;<i> &gt; apache error log:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; [Wed Sep 06 10:23:12 2006] [error] make_obcallback: could not import
</I>&gt;<i> &gt; mod_python.apache.\n
</I>&gt;<i> &gt; Traceback (most recent call last):
</I>&gt;<i> &gt;  File &quot;/usr/local/lib/python2.4/site-packages/mod_python/apache.py&quot;,
</I>&gt;<i> &gt; line 24, in ?
</I>&gt;<i> &gt;    import pdb
</I>&gt;<i> &gt;  File &quot;/usr/lib/python2.3/pdb.py&quot;, line 13, in ?
</I>&gt;<i> &gt;    import re
</I>&gt;<i> &gt;  File &quot;/usr/lib/python2.3/re.py&quot;, line 5, in ?
</I>&gt;<i> &gt;    from sre import *
</I>&gt;<i> &gt;  File &quot;/usr/lib/python2.3/sre.py&quot;, line 97, in ?
</I>&gt;<i> &gt;    import sre_compile
</I>&gt;<i> &gt;  File &quot;/usr/lib/python2.3/sre_compile.py&quot;, line 17, in ?
</I>&gt;<i> &gt;    assert _sre.MAGIC == MAGIC, &quot;SRE module mismatch&quot;
</I>&gt;<i> &gt; AssertionError: SRE module mismatch
</I>&gt;<i> &gt; --------------------
</I>&gt;<i>
</I>&gt;<i> That looks completely messed up. The path for apache.py in the traceback
</I>&gt;<i> seems to indicate that apache is using python2.4, but then it quickly
</I>&gt;<i> goes pear shaped. What happens if you do the following from the command
</I>&gt;<i> line?
</I>&gt;<i>
</I>&gt;<i> $ /usr/local/bin/python2.4
</I>&gt;<i>  &gt;&gt;&gt; import pdb
</I>&gt;<i>
</I>&gt;<i> By the way, you don't need --with-python-src. Thats only required for
</I>&gt;<i> building the docs, which are already included in the source tarball.
</I>&gt;<i>
</I>&gt;<i> Jim
</I>&gt;<i>
</I></PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022029.html">[mod_python] not using correct python library path
</A></li>
	<LI>Next message: <A HREF="022032.html">[mod_python] not using correct python library path
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22030">[ date ]</a>
              <a href="thread.html#22030">[ thread ]</a>
              <a href="subject.html#22030">[ subject ]</a>
              <a href="author.html#22030">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
