<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Mod-Python Help
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Mod-Python%20Help&In-Reply-To=506kiDsbl1476S06.1157394518%40cmsweb06.cms.usa.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022006.html">
   <LINK REL="Next"  HREF="022010.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Mod-Python Help</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Nicolas Lehuen</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Mod-Python%20Help&In-Reply-To=506kiDsbl1476S06.1157394518%40cmsweb06.cms.usa.net"
       TITLE="[mod_python] Mod-Python Help">nicolas at lehuen.com
       </A><BR>
    <I>Mon Sep  4 14:41:29 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="022006.html">[mod_python] Mod-Python Help
</A></li>
        <LI>Next message: <A HREF="022010.html">[mod_python] Mod-Python Help
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22005">[ date ]</a>
              <a href="thread.html#22005">[ thread ]</a>
              <a href="subject.html#22005">[ subject ]</a>
              <a href="author.html#22005">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ooops sorry... I should learn to read questions better than that.

Have you tried to curl or wget the page to see the result ? Is this really
valid XML ?

What have you implemented ? A handler or a published module, i.e. do you use
the mod_python.publisher handler ? If this is the case, then since you are
returning apache.OK instead of returning the document itself, you may get an
additional '0' (the value of apache.OK) at the end of the response, which
may bother the XML parser. But a much better approach is to use send_file()
and return None (or implement a handler).

Another problem might be with the charset encoding of the document. Is it
specified in the XML header ? If not, then a different default charset
encoding between the server and the client platforms may cause the parsing
to fail.

Note that you should be able to add an error handling callback on the
XMLHttpRequest objec to have more info on the problem.

Regards,
Nicolas

2006/9/4, Ethan Toan Ton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">tton at stanfordalumni.org</A>&gt;:
&gt;<i>
</I>&gt;<i> Nicolas,
</I>&gt;<i>
</I>&gt;<i> The path isn't the problem.  The handler reads the file fine.  But when it
</I>&gt;<i> outputs to the requester, the formatting is done incorrectly so that it
</I>&gt;<i> can't
</I>&gt;<i> be parsed.
</I>&gt;<i>
</I>&gt;<i> Ethan
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ------ Original Message ------
</I>&gt;<i> Received: 11:25 AM PDT, 09/04/2006
</I>&gt;<i> From: &quot;Nicolas Lehuen&quot; &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">nicolas at lehuen.com</A>&gt;
</I>&gt;<i> To: &quot;Ethan Toan Ton&quot; &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">ethanton at ethanton.com</A>&gt;Cc: <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython.org</A>
</I>&gt;<i> Subject: Re: [mod_python] Mod-Python Help
</I>&gt;<i>
</I>&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> You have to provide absolute paths when accessing local file. This is
</I>&gt;<i> because the cwd is always /.
</I>&gt;<i>
</I>&gt;<i> I you want to built paths relative to the script you are writing, you can
</I>&gt;<i> use the __FILE__ meta variable :
</I>&gt;<i>
</I>&gt;<i> LOCAL_FILE = os.path.join(os.path.dirname(__FILE__),'myfile.txt')
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i> Nicolas
</I>&gt;<i>
</I>&gt;<i> 2006/9/4, Ethan Toan Ton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">ethanton at ethanton.com</A>&gt;:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Hi,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I'm not sure if this is the correct forum to be asking for help with
</I>&gt;<i> &gt; Mod-Python, but I figure I'd give it a shot.  I was wondering if anyone
</I>&gt;<i> &gt; had experience using a Mod-Python request handler to answer a javascript
</I>&gt;<i> &gt; xmlhttprequest().
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; When my javascript program does a request on the xml file directly, all
</I>&gt;<i> of
</I>&gt;<i> &gt; the javascript parsing of the xml works fine.  However, when I try to
</I>&gt;<i> call
</I>&gt;<i> &gt; the request handler and get it to read the file in and return the
</I>&gt;<i> request,
</I>&gt;<i> &gt; the javascript can't parse the xml.  Here's the code:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; LOCAL_FILE = 'htdocs/ethan/info.xml';
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; def get_request(req):
</I>&gt;<i> &gt;         if req.method == 'GET':
</I>&gt;<i> &gt;                 file = open(LOCAL_FILE, 'r')
</I>&gt;<i> &gt;                 req.content_type = &quot;application/xml&quot;
</I>&gt;<i> &gt;                 req.write(file.read())
</I>&gt;<i> &gt;         return apache.OK
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The same data is sent, but I'm not sure if there is a formatting problem
</I>&gt;<i> &gt; here.  I'm assuming that's the problem, but I'm at a loss as to the
</I>&gt;<i> &gt; solution.  req.sendfile(LOCAL_FILE) does not work either.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Any help would be greatly appreciated.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Ethan
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Mod_python mailing list
</I>&gt;<i> &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ____________________________________________________________________
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20060904/2d2115fc/attachment.html">http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20060904/2d2115fc/attachment.html</A>
</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022006.html">[mod_python] Mod-Python Help
</A></li>
	<LI>Next message: <A HREF="022010.html">[mod_python] Mod-Python Help
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22005">[ date ]</a>
              <a href="thread.html#22005">[ thread ]</a>
              <a href="subject.html#22005">[ subject ]</a>
              <a href="author.html#22005">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
