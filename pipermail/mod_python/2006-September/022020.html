<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Multiple returns to client
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Multiple%20returns%20to%20client&In-Reply-To=17680.69.236.163.99.1157526558.squirrel%40webmail.ethanton.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022019.html">
   <LINK REL="Next"  HREF="022021.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Multiple returns to client</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Mike Looijmans</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Multiple%20returns%20to%20client&In-Reply-To=17680.69.236.163.99.1157526558.squirrel%40webmail.ethanton.com"
       TITLE="[mod_python] Multiple returns to client">nlv11281 at natlab.research.philips.com
       </A><BR>
    <I>Wed Sep  6 03:24:57 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="022019.html">[mod_python] Multiple returns to client
</A></li>
        <LI>Next message: <A HREF="022021.html">[mod_python] Multiple returns to client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22020">[ date ]</a>
              <a href="thread.html#22020">[ thread ]</a>
              <a href="subject.html#22020">[ subject ]</a>
              <a href="author.html#22020">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Your output is buffered in multiple stages. In most cases, you can call 
&quot;req.flush()&quot; to send data to the client. This will usually work, unless 
you have a module or a filter installed that collects output until the 
final stage.

For example, this pattern shows how to send output from a slow query 
back to the user, so that he can see the results as they come back. By 
calling req.flush() at smart points, we make sure there's some feedback 
quite efficiently.

...
req.write(&quot;&lt;P&gt;Results:&lt;/P&gt;&lt;table&gt;&lt;tr&gt;&lt;th&gt;Name&lt;/th&gt;&lt;th&gt;Date&lt;/th&gt;&lt;/tr&gt;&quot;)
req.flush()
c=database.cursor()
c.execute(&quot;SELECT name,date FROM persons&quot;)
while 1:
    data = c.fetchmany()
    if not data:
        break
    for row in data:
        req.write(&quot;&lt;tr&gt;&lt;td&gt;%s&lt;/td&gt;&lt;td&gt;%s&lt;/td&gt;&lt;/tr&gt;&quot; % row)
    req.flush()
req.write(&quot;&lt;/table&gt;&quot;)
...


Mike Looijmans
Philips Natlab / Topic Automation


Ethan Toan Ton wrote:
&gt;<i> I was wondering if anyone knew of a way to return multiple times to a
</I>&gt;<i> client using a Mod-Python event handler.  Using the req.write() method
</I>&gt;<i> does nothing until the actual return statement sends all the data in one
</I>&gt;<i> message back to the client.  So before you get to the actual return
</I>&gt;<i> statement, can you output back to them more than once?
</I>
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022019.html">[mod_python] Multiple returns to client
</A></li>
	<LI>Next message: <A HREF="022021.html">[mod_python] Multiple returns to client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22020">[ date ]</a>
              <a href="thread.html#22020">[ thread ]</a>
              <a href="subject.html#22020">[ subject ]</a>
              <a href="author.html#22020">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
