<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] mod_dav_svn clobbering mod_python?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_dav_svn%20clobbering%20mod_python%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022007.html">
   <LINK REL="Next"  HREF="022009.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] mod_dav_svn clobbering mod_python?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_dav_svn%20clobbering%20mod_python%3F&In-Reply-To="
       TITLE="[mod_python] mod_dav_svn clobbering mod_python?">grahamd at dscpl.com.au
       </A><BR>
    <I>Mon Sep  4 18:12:54 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="022007.html">[mod_python] [ANN] markup.py 1.5 - a lightweight HTML/XML generator
</A></li>
        <LI>Next message: <A HREF="022009.html">[mod_python] How do you know if the current request is an
	internal redirect?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22008">[ date ]</a>
              <a href="thread.html#22008">[ thread ]</a>
              <a href="subject.html#22008">[ subject ]</a>
              <a href="author.html#22008">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Chad Whitacre wrote ..
&gt;<i> Nicolas,
</I>&gt;<i> 
</I>&gt;<i> Thanks for the reply.
</I>&gt;<i> 
</I>&gt;<i> &gt; Do you want to have both DAV and mod_python support on the same directory
</I>&gt;<i> ?
</I>&gt;<i> 
</I>&gt;<i> Yes, I was hoping to write some custom auth in python. I suppose I 
</I>&gt;<i> should look at the sources/doc for mod_dav_svn to see what it's doing.
</I>
In which phase are you trying to implement the authorisation? What does
your Apache configuration look like? What does your custom auth handler
look like?

The mod_authz_svn module registers two handler hooks. These are:

  static void register_hooks(apr_pool_t *p)
  {
    ap_hook_access_checker(access_checker, NULL, NULL, APR_HOOK_LAST);
    ap_hook_auth_checker(auth_checker, NULL, NULL, APR_HOOK_FIRST);
  }

These correspond to the PythonAccessHandler and PythonAuthzHandler
phases.

The problem you will have if you try and define your authorisation as
a PythonAuthzHandler is that the one in Subversion runs as APR_HOOK_FIRST
where as mod_python one runs as APR_HOOK_MIDDLE. As a result the
Subversion one takes precedence, so if it returns anything besides DECLINED
yours will never run. Thus, you probably can't use that phase.

Subversion doesn't use equivalent of PythonAuthHandler phase and so
stuff can be done there, but you still have to be able to trigger your handler
with an appropriate Apache configuration. It also isn't strictly possible to
right correct authentication handlers in mod_python prior to 3.3, but I
think it can be made to work well enough to satisfy Subversion.

Now depending on what you want to do,  you may want to have your handler
run in PythonFixupHandler phase. I posted on the mailing list recently an
example of this whereby commits against tagged versions of code were
prohibited.

Anyway, more information is required from you to be able to comment
further.

Graham
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022007.html">[mod_python] [ANN] markup.py 1.5 - a lightweight HTML/XML generator
</A></li>
	<LI>Next message: <A HREF="022009.html">[mod_python] How do you know if the current request is an
	internal redirect?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22008">[ date ]</a>
              <a href="thread.html#22008">[ thread ]</a>
              <a href="subject.html#22008">[ subject ]</a>
              <a href="author.html#22008">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
