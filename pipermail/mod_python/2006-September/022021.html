<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Multiple returns to client
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Multiple%20returns%20to%20client&In-Reply-To=44FE77C9.80202%40natlab.research.philips.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022020.html">
   <LINK REL="Next"  HREF="022022.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Multiple returns to client</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Ethan Toan Ton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Multiple%20returns%20to%20client&In-Reply-To=44FE77C9.80202%40natlab.research.philips.com"
       TITLE="[mod_python] Multiple returns to client">ethanton at ethanton.com
       </A><BR>
    <I>Wed Sep  6 05:23:02 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="022020.html">[mod_python] Multiple returns to client
</A></li>
        <LI>Next message: <A HREF="022022.html">[mod_python] Multiple returns to client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22021">[ date ]</a>
              <a href="thread.html#22021">[ thread ]</a>
              <a href="subject.html#22021">[ subject ]</a>
              <a href="author.html#22021">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Mike,

Thanks for the help.  req.flush() works for sending out the data. 
Unfortunately, at the same time, my python program is making requests and
receiving data from other http sources at the same time.  When I run the
req.flush(), it outputs some of the incoming data as well.  Not sure why
that is happening.

Ethan


&gt;<i> Your output is buffered in multiple stages. In most cases, you can call
</I>&gt;<i> &quot;req.flush()&quot; to send data to the client. This will usually work, unless
</I>&gt;<i> you have a module or a filter installed that collects output until the
</I>&gt;<i> final stage.
</I>&gt;<i>
</I>&gt;<i> For example, this pattern shows how to send output from a slow query
</I>&gt;<i> back to the user, so that he can see the results as they come back. By
</I>&gt;<i> calling req.flush() at smart points, we make sure there's some feedback
</I>&gt;<i> quite efficiently.
</I>&gt;<i>
</I>&gt;<i> ...
</I>&gt;<i> req.write(&quot;&lt;P&gt;Results:&lt;/P&gt;&lt;table&gt;&lt;tr&gt;&lt;th&gt;Name&lt;/th&gt;&lt;th&gt;Date&lt;/th&gt;&lt;/tr&gt;&quot;)
</I>&gt;<i> req.flush()
</I>&gt;<i> c=database.cursor()
</I>&gt;<i> c.execute(&quot;SELECT name,date FROM persons&quot;)
</I>&gt;<i> while 1:
</I>&gt;<i>     data = c.fetchmany()
</I>&gt;<i>     if not data:
</I>&gt;<i>         break
</I>&gt;<i>     for row in data:
</I>&gt;<i>         req.write(&quot;&lt;tr&gt;&lt;td&gt;%s&lt;/td&gt;&lt;td&gt;%s&lt;/td&gt;&lt;/tr&gt;&quot; % row)
</I>&gt;<i>     req.flush()
</I>&gt;<i> req.write(&quot;&lt;/table&gt;&quot;)
</I>&gt;<i> ...
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Mike Looijmans
</I>&gt;<i> Philips Natlab / Topic Automation
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Ethan Toan Ton wrote:
</I>&gt;&gt;<i> I was wondering if anyone knew of a way to return multiple times to a
</I>&gt;&gt;<i> client using a Mod-Python event handler.  Using the req.write() method
</I>&gt;&gt;<i> does nothing until the actual return statement sends all the data in one
</I>&gt;&gt;<i> message back to the client.  So before you get to the actual return
</I>&gt;&gt;<i> statement, can you output back to them more than once?
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I>

</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022020.html">[mod_python] Multiple returns to client
</A></li>
	<LI>Next message: <A HREF="022022.html">[mod_python] Multiple returns to client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22021">[ date ]</a>
              <a href="thread.html#22021">[ thread ]</a>
              <a href="subject.html#22021">[ subject ]</a>
              <a href="author.html#22021">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
