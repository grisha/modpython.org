<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Re: import requires apache restart?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20import%20requires%20apache%20restart%3F&In-Reply-To=ff9dt8%24pf5%241%40ger.gmane.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024354.html">
   <LINK REL="Next"  HREF="024356.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Re: import requires apache restart?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20import%20requires%20apache%20restart%3F&In-Reply-To=ff9dt8%24pf5%241%40ger.gmane.org"
       TITLE="[mod_python] Re: import requires apache restart?">graham.dumpleton at gmail.com
       </A><BR>
    <I>Fri Oct 19 01:21:45 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="024354.html">[mod_python] Re: import requires apache restart?
</A></li>
        <LI>Next message: <A HREF="024356.html">[mod_python] Apache Virtual Host and mod-python error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24355">[ date ]</a>
              <a href="thread.html#24355">[ thread ]</a>
              <a href="subject.html#24355">[ subject ]</a>
              <a href="author.html#24355">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 19/10/2007, apocalypznow &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">apocalypznow at gmail.com</A>&gt; wrote:
&gt;<i> But does apache.import_module() handle .pyc or .pyo files?
</I>
In mod_python 3.3.1 the answer is no in all cases.

In mod_python 3.2.X, mod_python.publisher didn't use
apache.import_module() and used its own module importer which didn't
generate or use .pyc or .pyo files.

In mod_python 3.2.X and older versions, how apache.import_module()
used .pyc/.pyo files gets a bit messy as it was broken and thus not
reliable in the way it dealt with .pyc/.pyo files. I'd rather not have
to go back and work out the ways it was wrong again just to explain
it. Just trust me when I say to use the latest version, it is more
predictable.

In terms of what you are trying to do, yes you can supply just
.pyc/.pyo files, but they must be installed as part of a package or as
a module on sys.path somewhere. If you need to change those files, you
must restart Apache, they will not be reloaded automatically. You also
shouldn't rely on using the base Python 'reload' mechanism either as
it doesn't entirely always work either and why it is being removed in
Python 3.0.

Graham

&gt;<i> Graham Dumpleton wrote:
</I>&gt;<i> &gt; This is quite normal behaviour. Standard Python modules and packages
</I>&gt;<i> &gt; are not candidates for reloading. Read the documentation for
</I>&gt;<i> &gt; import_module() in:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;   <A HREF="http://www.modpython.org/live/current/doc-html/pyapi-apmeth.html">http://www.modpython.org/live/current/doc-html/pyapi-apmeth.html</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; This explains the line of separation between when mod_python can and
</I>&gt;<i> &gt; can not automatically reload modules.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Graham
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On 19/10/2007, apocalypznow &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">apocalypznow at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt;I've noticed something, and I wonder if someone could please confirm if
</I>&gt;<i> &gt;&gt;this is the correct behaviour.  In my httpd.conf file, I've included the
</I>&gt;<i> &gt;&gt;path to a location where my python files are using the PythonPath
</I>&gt;<i> &gt;&gt;directive.  In my handler code file, I issue a standard &quot;import&quot;
</I>&gt;<i> &gt;&gt;statement rather than the mod_python (or for that matter,
</I>&gt;<i> &gt;&gt;vampire.importModule) versions of the import.  To give light protection
</I>&gt;<i> &gt;&gt;  (against authoring infringement) to my source files, after I
</I>&gt;<i> &gt;&gt;py_compile them, I delete the original .py files.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;Even after changing the source of the files in the PythonPath, and after
</I>&gt;<i> &gt;&gt;py_compiling them, and after removing the original .py files, I found
</I>&gt;<i> &gt;&gt;that an Apache restart is required for the changes to be effected.  Does
</I>&gt;<i> &gt;&gt;this make sense?  If that is the case, is there some copy of the python
</I>&gt;<i> &gt;&gt;file being made by mod_python somewhere?
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;_______________________________________________
</I>&gt;<i> &gt;&gt;Mod_python mailing list
</I>&gt;<i> &gt;&gt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> &gt;&gt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i> &gt;&gt;
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024354.html">[mod_python] Re: import requires apache restart?
</A></li>
	<LI>Next message: <A HREF="024356.html">[mod_python] Apache Virtual Host and mod-python error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24355">[ date ]</a>
              <a href="thread.html#24355">[ thread ]</a>
              <a href="subject.html#24355">[ subject ]</a>
              <a href="author.html#24355">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
