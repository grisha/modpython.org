<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Storing large amounts of data in RAM
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Storing%20large%20amounts%20of%20data%20in%20RAM&In-Reply-To=E05F0386-F4D8-4EFB-9E52-C30782D99E48%40gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024365.html">
   <LINK REL="Next"  HREF="024367.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Storing large amounts of data in RAM</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Storing%20large%20amounts%20of%20data%20in%20RAM&In-Reply-To=E05F0386-F4D8-4EFB-9E52-C30782D99E48%40gmail.com"
       TITLE="[mod_python] Storing large amounts of data in RAM">graham.dumpleton at gmail.com
       </A><BR>
    <I>Wed Oct 24 00:14:20 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="024365.html">[mod_python] Storing large amounts of data in RAM
</A></li>
        <LI>Next message: <A HREF="024367.html">[mod_python] Storing large amounts of data in RAM
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24366">[ date ]</a>
              <a href="thread.html#24366">[ thread ]</a>
              <a href="subject.html#24366">[ subject ]</a>
              <a href="author.html#24366">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 24/10/2007, Aaron Gallagher &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">habnabit at gmail.com</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> I'm working on a web-application port of a text game, and I'm just wondering
</I>&gt;<i> what the best way for me to implement this is.
</I>&gt;<i>
</I>&gt;<i> Game data is stored in a single python object which is pickleable. I'm not
</I>&gt;<i> sure of the exact size of the data in memory, but the pickled files are
</I>&gt;<i> between 600 and 900k uncompressed. I would like to store each object in
</I>&gt;<i> memory rather than saving and loading the object for each request. So, what
</I>&gt;<i> is the best way to do this? I'm pretty sure I remember from earlier posts
</I>&gt;<i> that it's not possible to have memory that's shared between multiple
</I>&gt;<i> interpreters. Is it possible to only use one interpreter and keep all of the
</I>&gt;<i> data objects in that interpreter?
</I>
I think you mean share between the same named interpreter in different
processes such as would be used on UNIX systems when using Apache. On
Windows, there is only one process so no problem there.

So, unless you are going to use Windows only, then the multiprocess
nature of Apache will cause you issues.

One option, depending on the complexity of your data, may be to use
memcached and store data in shared memory accessible to all.

&gt;<i> Also, other than having a cron job send an HTTP request to the server
</I>&gt;<i> intermittently, is there a way to have data objects save themselves to a
</I>&gt;<i> file if their player hasn't made a request in a certain amount of time?
</I>
You could use a distinct thread created the first time a request comes
in for the application. This though is also problematic in a
multiprocess web server as although one process may not have had a
request for a while, others may have.

If you really need everything to be done in one process, one option is
to run a backend Python server process which embeds an XML-RPC server
and have all your web interfaces use XML-RPC requests to the game
engine in that to do things.

Another option is to not use mod_python, instead base your web
application on a framework capable of being hosted on any WSGI server.
Then run this in standalone Python server process and use Apache to
proxy to it.

Basing it on a WSGI server, you could also then use daemon mode of
mod_wsgi but run with a single managed process. That way you don't
have the hassle of having to work out how to run up the backend
process as Apache will manage that for you.

For further information on data sharing issues in relation to
process/threading model of Apache see:

  <A HREF="http://code.google.com/p/modwsgi/wiki/ProcessesAndThreading">http://code.google.com/p/modwsgi/wiki/ProcessesAndThreading</A>

This talks about it in the context of mod_wsgi, but is more up to date
and accurate than older version of document I did for mod_python.

Graham
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024365.html">[mod_python] Storing large amounts of data in RAM
</A></li>
	<LI>Next message: <A HREF="024367.html">[mod_python] Storing large amounts of data in RAM
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24366">[ date ]</a>
              <a href="thread.html#24366">[ thread ]</a>
              <a href="subject.html#24366">[ subject ]</a>
              <a href="author.html#24366">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
