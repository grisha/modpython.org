<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Trouble on OSX - Leopard
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Trouble%20on%20OSX%20-%20Leopard&In-Reply-To=88e286470710291430u4040ac6qa0488e3d026c82c7%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024377.html">
   <LINK REL="Next"  HREF="024379.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Trouble on OSX - Leopard</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Ben Mitchell</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Trouble%20on%20OSX%20-%20Leopard&In-Reply-To=88e286470710291430u4040ac6qa0488e3d026c82c7%40mail.gmail.com"
       TITLE="[mod_python] Trouble on OSX - Leopard">ben at mitchellfamily.com
       </A><BR>
    <I>Mon Oct 29 23:50:54 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="024377.html">[mod_python] Trouble on OSX - Leopard
</A></li>
        <LI>Next message: <A HREF="024379.html">[mod_python] Trouble on OSX - Leopard
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24378">[ date ]</a>
              <a href="thread.html#24378">[ thread ]</a>
              <a href="subject.html#24378">[ subject ]</a>
              <a href="author.html#24378">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Graham,

Thanks for the help.  mod_wsgi didn't work either.  I've appended all  
the details below.

-Ben


[Macintosh:local/src/mod_wsgi-1.2] benha% ls
LICENCE		Makefile-2.X.in	configure	mod_wsgi.c
Makefile-1.X.in	README		configure.ac
[Macintosh:local/src/mod_wsgi-1.2] benha% ./configure
checking for apxs2... no
checking for apxs... /usr/sbin/apxs
checking for python... /usr/bin/python
checking Apache version... 2.2.6
configure: creating ./config.status
config.status: creating Makefile
[Macintosh:local/src/mod_wsgi-1.2] benha% make
/usr/sbin/apxs -c -I/System/Library/Frameworks/Python.framework/ 
Versions/2.5/include/python2.5 -DNDEBUG -DMACOSX -DENABLE_DTRACE   
mod_wsgi.c -framework Python -u _PyMac_Error -framework Python -ldl
/usr/share/apr-1/build-1/libtool --silent --mode=compile gcc    - 
DDARWIN -DSIGPROCMASK_SETS_THREAD_MASK -no-cpp-precomp  -I/usr/include/ 
apache2  -I/usr/include/apr-1   -I/usr/include/apr-1  -I/System/ 
Library/Frameworks/Python.framework/Versions/2.5/include/python2.5 - 
DNDEBUG -DMACOSX -DENABLE_DTRACE  -c -o mod_wsgi.lo mod_wsgi.c &amp;&amp;  
touch mod_wsgi.slo
/usr/share/apr-1/build-1/libtool --silent --mode=link gcc -o  
mod_wsgi.la  -rpath /usr/libexec/apache2 -module -avoid-version     
mod_wsgi.lo -framework Python -u _PyMac_Error -framework Python -ldl
[Macintosh:local/src/mod_wsgi-1.2] benha% sudo su
Password:
sh-3.2# make install
/usr/sbin/apxs -i -S LIBEXECDIR=/usr/libexec/apache2 -n 'mod_wsgi'  
mod_wsgi.la
/usr/share/httpd/build/instdso.sh SH_LIBTOOL='/usr/share/apr-1/build-1/ 
libtool' mod_wsgi.la /usr/libexec/apache2
/usr/share/apr-1/build-1/libtool --mode=install cp mod_wsgi.la /usr/ 
libexec/apache2/
cp .libs/mod_wsgi.so /usr/libexec/apache2/mod_wsgi.so
cp .libs/mod_wsgi.lai /usr/libexec/apache2/mod_wsgi.la
cp .libs/mod_wsgi.a /usr/libexec/apache2/mod_wsgi.a
ranlib /usr/libexec/apache2/mod_wsgi.a
chmod 644 /usr/libexec/apache2/mod_wsgi.a
----------------------------------------------------------------------
Libraries have been installed in:
    /usr/libexec/apache2

If you ever happen to want to link against installed libraries
in a given directory, LIBDIR, you must either use libtool, and
specify the full pathname of the library, or use the `-LLIBDIR'
flag during linking and do at least one of the following:
    - add LIBDIR to the `DYLD_LIBRARY_PATH' environment variable
      during execution

See any operating system documentation about shared libraries for
more information, such as the ld(1) and ld.so(8) manual pages.
----------------------------------------------------------------------
chmod 755 /usr/libexec/apache2/mod_wsgi.so
sh-3.2# exit
exit
[Macintosh:local/src/mod_wsgi-1.2] benha% sudo emacs /etc/apache2/ 
httpd.conf


ADDED the following line to httpd.conf:
LoadModule wsgi_module libexec/apache2/mod_wsgi.so


[Macintosh:local/src/mod_wsgi-1.2] benha% apachectl configtest
httpd: Syntax error on line 117 of /private/etc/apache2/httpd.conf:  
Cannot load /usr/libexec/apache2/mod_wsgi.so into server: dlopen(/usr/ 
libexec/apache2/mod_wsgi.so, 10): no suitable image found.  Did find:\n 
\t/usr/libexec/apache2/mod_wsgi.so: mach-o, but wrong architecture
[Macintosh:local/src/mod_wsgi-1.2] benha%





On Oct 29, 2007, at 2:30 PM, Graham Dumpleton wrote:

On 30/10/2007, Ben Mitchell &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">ben at mitchellfamily.com</A>&gt; wrote:
&gt;<i> Hi, folks.
</I>&gt;<i>
</I>&gt;<i> I'm working on getting Django running again after upgrading to  
</I>&gt;<i> Leopard.
</I>&gt;<i> I've hit a snag building / installing mod_python, and I'm hoping  
</I>&gt;<i> someone
</I>&gt;<i> might know what's going on.
</I>&gt;<i>
</I>&gt;<i> I did the following:
</I>&gt;<i> - downloaded the 3.3.1 source
</I>&gt;<i> - .config --with-apxs=/usr/sbin/apxs
</I>&gt;<i> - make
</I>&gt;<i> - sudo make install
</I>&gt;<i> - added to httpd.conf:  LoadModule python_module
</I>&gt;<i> libexec/apache2/mod_python.so
</I>&gt;<i>
</I>&gt;<i> I then ran apachectl configtest and got an error:
</I>&gt;<i>
</I>&gt;<i> % apachectl configtest
</I>&gt;<i> httpd: Syntax error on line 116 of
</I>&gt;<i> /private/etc/apache2/httpd.conf: Cannot load
</I>&gt;<i> /usr/libexec/apache2/mod_python.so into server:
</I>&gt;<i> dlopen(/usr/libexec/apache2/mod_python.so, 10): no suitable
</I>&gt;<i> image found.  Did
</I>&gt;<i> find:\n\t/usr/libexec/apache2/mod_python.so: no matching
</I>&gt;<i> architecture in universal wrapper
</I>&gt;<i> Any ideas?  I've tried a bunch of things tracking this down, but I  
</I>&gt;<i> get this
</I>&gt;<i> same error every time.
</I>
Can you do a quick test and see if you can install mod_wsgi
(<A HREF="http://www.modwsgi.org">http://www.modwsgi.org</A>) instead. This can replace mod_python if all
you want to host is Django, but more importantly it follows somewhat
how mod_python is installed but is less complicated in the way it does
it. It will be easier for me to debug what the problem is if mod_wsgi
has the same issue. Can then apply what is learned from that back to
mod_python and get it working.

BTW, I presume you are using standard OS version of Python. Which
version of Python does Leopard supply if that is the case?

If you try mod_wsgi and it also fails, supply the output from doing
the initial 'make' of it so can see all the compiler flags that are
being used to build it, plus any output from compiler.

Thanks.

Graham

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20071029/22859344/attachment.html">http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20071029/22859344/attachment.html</A>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024377.html">[mod_python] Trouble on OSX - Leopard
</A></li>
	<LI>Next message: <A HREF="024379.html">[mod_python] Trouble on OSX - Leopard
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24378">[ date ]</a>
              <a href="thread.html#24378">[ thread ]</a>
              <a href="subject.html#24378">[ subject ]</a>
              <a href="author.html#24378">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
