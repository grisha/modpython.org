<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Reading data from a POST using chuncked mode
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Reading%20data%20from%20a%20POST%20using%20chuncked%20mode&In-Reply-To=56707.194.2.158.33.1192536285.squirrel%40arlette.freesurf.fr">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024337.html">
   <LINK REL="Next"  HREF="024338.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Reading data from a POST using chuncked mode</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Reading%20data%20from%20a%20POST%20using%20chuncked%20mode&In-Reply-To=56707.194.2.158.33.1192536285.squirrel%40arlette.freesurf.fr"
       TITLE="[mod_python] Reading data from a POST using chuncked mode">graham.dumpleton at gmail.com
       </A><BR>
    <I>Tue Oct 16 08:24:45 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="024337.html">[mod_python] Reading data from a POST using chuncked mode
</A></li>
        <LI>Next message: <A HREF="024338.html">[mod_python] ValueError: Failed to acquire global mutex lock
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24339">[ date ]</a>
              <a href="thread.html#24339">[ thread ]</a>
              <a href="subject.html#24339">[ subject ]</a>
              <a href="author.html#24339">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Using chunked encoding on request content is not supported by mod_python. See:

  <A HREF="http://issues.apache.org/jira/browse/MODPYTHON-222">http://issues.apache.org/jira/browse/MODPYTHON-222</A>

I am surprised you even got as far as your handler executing as it
shouldn't have and you should instead have got an error sent back to
client saying content length expected.

Graham

On 16/10/2007, <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mohamed35 at freesurf.fr</A> &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mohamed35 at freesurf.fr</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> I used to use req.read() to retrieve raw data from a POST request
</I>&gt;<i> (application/pdf) which represents a quite large quantity of data (non
</I>&gt;<i> chunked mode).
</I>&gt;<i>
</I>&gt;<i> Now, client is using chunked transfer (HTTP_TRANSFER_ENCODING = chunked), to
</I>&gt;<i> avoid blocking a lot of memory at client (mime not used).
</I>&gt;<i>
</I>&gt;<i> I have problems retrieving the data (my saved files are 0 bytes size!) with
</I>&gt;<i> the chunked transfer
</I>&gt;<i>
</I>&gt;<i> According to mod_python documentation about the read():
</I>&gt;<i> &quot;This function relies on the client providing the Content-length  header.
</I>&gt;<i> Absence of the Content-length header will be treated as if Content-length: 0
</I>&gt;<i> was supplied.&quot;
</I>&gt;<i>
</I>&gt;<i> Is the problem due to the fact that no Content-length header is provided to
</I>&gt;<i> modpython by apache?
</I>&gt;<i>
</I>&gt;<i> Does anyone know what should be the proper way of handling chanked transfer
</I>&gt;<i> of data with mod_python? Is read() appropriate or any other coding necessary?
</I>&gt;<i>
</I>&gt;<i> Any help is very welcome,
</I>&gt;<i> Thanks,
</I>&gt;<i> Med
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I></PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024337.html">[mod_python] Reading data from a POST using chuncked mode
</A></li>
	<LI>Next message: <A HREF="024338.html">[mod_python] ValueError: Failed to acquire global mutex lock
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24339">[ date ]</a>
              <a href="thread.html#24339">[ thread ]</a>
              <a href="subject.html#24339">[ subject ]</a>
              <a href="author.html#24339">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
