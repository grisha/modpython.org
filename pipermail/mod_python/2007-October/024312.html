<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Mixing content_type not displaying correct info
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Mixing%20content_type%20not%20displaying%20correct%20info&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024310.html">
   <LINK REL="Next"  HREF="024313.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Mixing content_type not displaying correct info</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Jeff van Aswegen</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Mixing%20content_type%20not%20displaying%20correct%20info&In-Reply-To="
       TITLE="[mod_python] Mixing content_type not displaying correct info">jeffmess at gmail.com
       </A><BR>
    <I>Tue Oct  9 07:39:07 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="024310.html">[mod_python] Re: Running mod_python tests
</A></li>
        <LI>Next message: <A HREF="024313.html">[mod_python] Mixing content_type not displaying correct info
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24312">[ date ]</a>
              <a href="thread.html#24312">[ thread ]</a>
              <a href="subject.html#24312">[ subject ]</a>
              <a href="author.html#24312">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey guys

I am trying to display 2 content types under 1 function/webpage,
'image/jpeg' and 'text/html' but this is not working out. I am trying to
display a portion of an image and underneath that image have 3 text fields
that a capturer can enter some information on the image. This is what I have
so far.

def show_image(req):
    width, height = 1000, 1000

    img = Image.open('/home/jeffmess/images/taco/F0476544.JPG')
    img = img.resize((width,height), Image.ANTIALIAS)
    box = (300,335,740,680)
    region = img.crop(box)
    img.paste(region, box)
    s = StringIO()
    region.save(s, 'jpeg')
    file.write(s.getvalue())
    file.close()
    req.content_type = 'image/jpeg'

    req.write(s.getvalue())
    img.close()

    return apache.OK

Now on the same page if I include a random text field say,

    req.content_type = &quot;text/html&quot;
    req.write(&quot;&quot;&quot;&lt;INPUT TYPE='text' NAME='field0' ID='field0'
ONKEYDOWN='return tabOnEnter (this, event);' &gt;&quot;&quot;&quot;)

Browsing to the page will show the text field but the image will all be
jargon. Can anyone perhaps offer some advice or point me in the right
direction? Thanks

Regards

Jeff
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20071009/09bb6e74/attachment.html">http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20071009/09bb6e74/attachment.html</A>
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024310.html">[mod_python] Re: Running mod_python tests
</A></li>
	<LI>Next message: <A HREF="024313.html">[mod_python] Mixing content_type not displaying correct info
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24312">[ date ]</a>
              <a href="thread.html#24312">[ thread ]</a>
              <a href="subject.html#24312">[ subject ]</a>
              <a href="author.html#24312">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
