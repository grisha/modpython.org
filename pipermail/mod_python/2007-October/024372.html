<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Problems with Apache
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Problems%20with%20Apache&In-Reply-To=001a01c816af%2442590fc0%24fbfaa8c0%40cestra">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024371.html">
   <LINK REL="Next"  HREF="024373.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Problems with Apache</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Problems%20with%20Apache&In-Reply-To=001a01c816af%2442590fc0%24fbfaa8c0%40cestra"
       TITLE="[mod_python] Problems with Apache">graham.dumpleton at gmail.com
       </A><BR>
    <I>Wed Oct 24 23:00:20 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="024371.html">[mod_python] Problems with Apache
</A></li>
        <LI>Next message: <A HREF="024373.html">[mod_python] ValueError: Failed to acquire global mutex lock
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24372">[ date ]</a>
              <a href="thread.html#24372">[ thread ]</a>
              <a href="subject.html#24372">[ subject ]</a>
              <a href="author.html#24372">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 25/10/2007, Stefan Schulze &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">algroth at gmx.de</A>&gt; wrote:
&gt;<i> Hi there...
</I>&gt;<i>
</I>&gt;<i> I'm trying to teach my apache-server to understand python. The Apache 2.2.6
</I>&gt;<i> runs on NetBSD 3.1 with Python 2.4.4. I compiled the mod_python 3.2.10 with
</I>&gt;<i> pkgsrc and nothing strange happens while building the the lib. But when I
</I>&gt;<i> add &quot;LoadModule python_module lib/httpd/mod_python.so&quot; to my httpd.conf I
</I>&gt;<i> get lots of errors in the startup-log: [notice] mod_python: Creating 8
</I>&gt;<i> session mutexes based on 256 max processes and 0 max threads. [notice]
</I>&gt;<i> mod_python: using mutex_directory /tmp [error] (28)No space left on device:
</I>&gt;<i> mod_python: Failed to create global mutex 5 of 8 (/tmp/mpmtx208245). [error]
</I>&gt;<i> mod_python: We can probably continue, but with diminished ability to process
</I>&gt;<i> session locks. [error] mod_python: Hint: On Linux, the problem may be the
</I>&gt;<i> number of available semaphores, check 'sysctl kernel.sem'
</I>&gt;<i>
</I>&gt;<i> On /tmp is lots of space and it's seems not to be a permission-problem,
</I>&gt;<i> because the user pgsql can create files there. Everybody has &quot;rwt&quot;-rights on
</I>&gt;<i> /tmp.
</I>&gt;<i>
</I>&gt;<i> &quot;sysctl kernel.sem&quot; results in &quot;sysctl: top level name 'kernel' in
</I>&gt;<i> 'kernel.sem' is invalid&quot;.
</I>&gt;<i>
</I>&gt;<i> Can anybody give me a hint how to solve this problem?
</I>
The '/tmp' bit has nothing to do with.

The 'sysctl kernel.sem' is the Linux command to use. You will need to
work out the NetBSD way of listing how many kernel semaphores have
been configured. What ever is in use, it appears to be too low.

You can also configure mod_python to use less semaphores. Use the
option '--with-max-locks=4' to the 'configure' script when you are
building mod_python. If you don't know how to override that with
pkgsrc, then you can instead do it at run time by setting:

  PythonOption mod_python.mutex_locks 4

at global scope (outside of VirtualHost containers) in the Apache
configuration file.

Since a value of 4 would use up last semaphore, highly recommend you
increase number of kernel semaphores provided by OS.

Graham
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024371.html">[mod_python] Problems with Apache
</A></li>
	<LI>Next message: <A HREF="024373.html">[mod_python] ValueError: Failed to acquire global mutex lock
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24372">[ date ]</a>
              <a href="thread.html#24372">[ thread ]</a>
              <a href="subject.html#24372">[ subject ]</a>
              <a href="author.html#24372">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
