<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] python path and 3.3
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20python%20path%20and%203.3&In-Reply-To=a595de7a0612010503y6aa14249tda581394bd9a8cdc%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022730.html">
   <LINK REL="Next"  HREF="022736.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] python path and 3.3</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20python%20path%20and%203.3&In-Reply-To=a595de7a0612010503y6aa14249tda581394bd9a8cdc%40mail.gmail.com"
       TITLE="[mod_python] python path and 3.3">grahamd at dscpl.com.au
       </A><BR>
    <I>Fri Dec  1 16:41:05 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="022730.html">[mod_python] python path and 3.3
</A></li>
        <LI>Next message: <A HREF="022736.html">[mod_python] python path and 3.3
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22735">[ date ]</a>
              <a href="thread.html#22735">[ thread ]</a>
              <a href="subject.html#22735">[ subject ]</a>
              <a href="author.html#22735">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 02/12/2006, at 12:03 AM, Clodoaldo wrote:

&gt;<i> I'm trying to import a module with both the third and fourth
</I>&gt;<i> techniques you described but I'm having errors.
</I>&gt;<i>
</I>&gt;<i> This is the Virtual host config:
</I>&gt;<i>
</I>&gt;<i>    ServerName carconsumption.s0
</I>&gt;<i>    DocumentRoot /var/www/html/carconsumption.com
</I>&gt;<i>    SetHandler mod_python
</I>&gt;<i>    PythonHandler mod_python.publisher
</I>&gt;<i>    PythonDebug On
</I>&gt;<i>    PythonOption mod_python.importer.path &quot;['~/mod']&quot;
</I>&gt;<i>    PythonImport db_connection carconsumption.s0
</I>&gt;<i>
</I>&gt;<i> The module &quot;constants&quot; is in the mod directory under the document  
</I>&gt;<i> root:
</I>&gt;<i>
</I>&gt;<i> [<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">cpn at s0</A> mod]$ pwd
</I>&gt;<i> /var/www/html/carconsumption.com/mod
</I>&gt;<i> [<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">cpn at s0</A> mod]$ ll constants.py
</I>&gt;<i> -rwxr----- 1 cpn apache 28675 Nov 29 17:42 constants.py
</I>&gt;<i> [<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">cpn at s0</A> mod]$ ll -d ../mod
</I>&gt;<i> drwxrws--- 2 cpn apache 4096 Dec  1 12:26 ../mod
</I>&gt;<i>
</I>&gt;<i> Third technique. index.py contains:
</I>&gt;<i>
</I>&gt;<i> from mod_python import apache
</I>&gt;<i> C = apache.import_module('~/mod/constants.py')
</I>&gt;<i>
</I>&gt;<i> The error output:
</I>&gt;<i>
</I>&gt;<i> MOD_PYTHON ERROR
</I>&gt;<i>
</I>&gt;<i> ProcessId:      24982
</I>&gt;<i> Interpreter:    'carconsumption.s0'
</I>&gt;<i>
</I>&gt;<i> URI:            '/'
</I>&gt;<i> Location:       None
</I>&gt;<i> Directory:      None
</I>
The '~/' prefix will be replaced with the value of 'Directory' as  
shown here, but it
isn't set because you have the PythonHandler directive outside of any  
Directory
directive or .htaccess file. Thus, it can't know what the handler  
root is. Using:

    DocumentRoot /var/www/html/carconsumption.com
    &lt;Directory /var/www/html/carconsumption.com&gt;
    SetHandler mod_python
    PythonHandler mod_python.publisher
    PythonDebug On
    PythonOption mod_python.importer.path &quot;['~/mod']&quot;
    &lt;/Directory&gt;

should work, as will:

    DocumentRoot /var/www/html/carconsumption.com
    SetHandler mod_python
    PythonHandler mod_python.publisher
    PythonDebug On
    PythonOption mod_python.importer.path &quot;['/var/www/html/ 
carconsumption.com/mod']&quot;

Note, when inside a Location directive, '~/' will not work either as  
Location isn't
associated with a directory.

What I have to think about now is whether when both Directory and  
Location
directives aren't being used, that '~/' maps to DocumentRoot. I never  
thought
about this particular scenario.

Graham

&gt;<i> Filename:       '/var/www/html/carconsumption.com/index.py'
</I>&gt;<i> PathInfo:       ''
</I>&gt;<i>
</I>&gt;<i> Phase:          'PythonHandler'
</I>&gt;<i> Handler:        'mod_python.publisher'
</I>&gt;<i>
</I>&gt;<i> Traceback (most recent call last):
</I>&gt;<i>
</I>&gt;<i>  File &quot;/usr/lib/python2.4/site-packages/mod_python/importer.py&quot;, line
</I>&gt;<i> 1522, in HandlerDispatch
</I>&gt;<i>    default=default_handler, arg=req, silent=hlist.silent)
</I>&gt;<i>
</I>&gt;<i>  File &quot;/usr/lib/python2.4/site-packages/mod_python/importer.py&quot;, line
</I>&gt;<i> 1227, in _process_target
</I>&gt;<i>    result = _execute_target(config, req, object, arg)
</I>&gt;<i>
</I>&gt;<i>  File &quot;/usr/lib/python2.4/site-packages/mod_python/importer.py&quot;, line
</I>&gt;<i> 1126, in _execute_target
</I>&gt;<i>    result = object(arg)
</I>&gt;<i>
</I>&gt;<i>  File &quot;/usr/lib/python2.4/site-packages/mod_python/publisher.py&quot;,
</I>&gt;<i> line 204, in handler
</I>&gt;<i>    module = page_cache[req]
</I>&gt;<i>
</I>&gt;<i>  File &quot;/usr/lib/python2.4/site-packages/mod_python/importer.py&quot;, line
</I>&gt;<i> 1057, in __getitem__
</I>&gt;<i>    return import_module(req.filename)
</I>&gt;<i>
</I>&gt;<i>  File &quot;/usr/lib/python2.4/site-packages/mod_python/importer.py&quot;, line
</I>&gt;<i> 294, in import_module
</I>&gt;<i>    log, import_path)
</I>&gt;<i>
</I>&gt;<i>  File &quot;/usr/lib/python2.4/site-packages/mod_python/importer.py&quot;, line
</I>&gt;<i> 678, in import_module
</I>&gt;<i>    execfile(file, module.__dict__)
</I>&gt;<i>
</I>&gt;<i>  File &quot;/var/www/html/carconsumption.com/index.py&quot;, line 4, in ?
</I>&gt;<i>    C = apache.import_module('~/mod/constants.py')
</I>&gt;<i>
</I>&gt;<i>  File &quot;/usr/lib/python2.4/site-packages/mod_python/importer.py&quot;, line
</I>&gt;<i> 302, in import_module
</I>&gt;<i>    return __import__(module_name, {}, {}, ['*'])
</I>&gt;<i>
</I>&gt;<i> ImportError: No module named ~/mod/constants.py
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> MODULE CACHE DETAILS
</I>&gt;<i>
</I>&gt;<i> Accessed:       Fri Dec  1 12:33:24 2006
</I>&gt;<i> Generation:     0
</I>&gt;<i>
</I>&gt;<i> _mp_96eec165c095033cec4187d8d6982912 {
</I>&gt;<i>  FileName:     '/var/www/html/carconsumption.com/index.py'
</I>&gt;<i>  Instance:     1 [IMPORT]
</I>&gt;<i>  Generation:   0 [ERROR]
</I>&gt;<i>  Modified:     Fri Dec  1 12:31:11 2006
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> When i give the absolute path it works:
</I>&gt;<i> from mod_python import apache
</I>&gt;<i> C = apache.import_module('/var/www/html/carconsumption.com/mod/ 
</I>&gt;<i> constants.py')
</I>&gt;<i>
</I>&gt;<i> Fourth technique. index.py contains:
</I>&gt;<i>
</I>&gt;<i> import constants as C
</I>&gt;<i>
</I>&gt;<i> The error:
</I>&gt;<i>
</I>&gt;<i> MOD_PYTHON ERROR
</I>&gt;<i>
</I>&gt;<i> ProcessId:      24983
</I>&gt;<i> Interpreter:    'carconsumption.s0'
</I>&gt;<i>
</I>&gt;<i> URI:            '/'
</I>&gt;<i> Location:       None
</I>&gt;<i> Directory:      None
</I>&gt;<i> Filename:       '/var/www/html/carconsumption.com/index.py'
</I>&gt;<i> PathInfo:       ''
</I>&gt;<i>
</I>&gt;<i> Phase:          'PythonHandler'
</I>&gt;<i> Handler:        'mod_python.publisher'
</I>&gt;<i>
</I>&gt;<i> Traceback (most recent call last):
</I>&gt;<i>
</I>&gt;<i>  File &quot;/usr/lib/python2.4/site-packages/mod_python/importer.py&quot;, line
</I>&gt;<i> 1522, in HandlerDispatch
</I>&gt;<i>    default=default_handler, arg=req, silent=hlist.silent)
</I>&gt;<i>
</I>&gt;<i>  File &quot;/usr/lib/python2.4/site-packages/mod_python/importer.py&quot;, line
</I>&gt;<i> 1227, in _process_target
</I>&gt;<i>    result = _execute_target(config, req, object, arg)
</I>&gt;<i>
</I>&gt;<i>  File &quot;/usr/lib/python2.4/site-packages/mod_python/importer.py&quot;, line
</I>&gt;<i> 1126, in _execute_target
</I>&gt;<i>    result = object(arg)
</I>&gt;<i>
</I>&gt;<i>  File &quot;/usr/lib/python2.4/site-packages/mod_python/publisher.py&quot;,
</I>&gt;<i> line 204, in handler
</I>&gt;<i>    module = page_cache[req]
</I>&gt;<i>
</I>&gt;<i>  File &quot;/usr/lib/python2.4/site-packages/mod_python/importer.py&quot;, line
</I>&gt;<i> 1057, in __getitem__
</I>&gt;<i>    return import_module(req.filename)
</I>&gt;<i>
</I>&gt;<i>  File &quot;/usr/lib/python2.4/site-packages/mod_python/importer.py&quot;, line
</I>&gt;<i> 294, in import_module
</I>&gt;<i>    log, import_path)
</I>&gt;<i>
</I>&gt;<i>  File &quot;/usr/lib/python2.4/site-packages/mod_python/importer.py&quot;, line
</I>&gt;<i> 678, in import_module
</I>&gt;<i>    execfile(file, module.__dict__)
</I>&gt;<i>
</I>&gt;<i>  File &quot;/var/www/html/carconsumption.com/index.py&quot;, line 3, in ?
</I>&gt;<i>    import constants as C
</I>&gt;<i>
</I>&gt;<i> ImportError: No module named constants
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> MODULE CACHE DETAILS
</I>&gt;<i>
</I>&gt;<i> Accessed:       Fri Dec  1 12:34:55 2006
</I>&gt;<i> Generation:     0
</I>&gt;<i>
</I>&gt;<i> _mp_96eec165c095033cec4187d8d6982912 {
</I>&gt;<i>  FileName:     '/var/www/html/carconsumption.com/index.py'
</I>&gt;<i>  Instance:     1 [IMPORT]
</I>&gt;<i>  Generation:   0 [ERROR]
</I>&gt;<i>  Modified:     Fri Dec  1 12:34:19 2006
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i> -- 
</I>&gt;<i> Clodoaldo Pinto Neto
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022730.html">[mod_python] python path and 3.3
</A></li>
	<LI>Next message: <A HREF="022736.html">[mod_python] python path and 3.3
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22735">[ date ]</a>
              <a href="thread.html#22735">[ thread ]</a>
              <a href="subject.html#22735">[ subject ]</a>
              <a href="author.html#22735">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
