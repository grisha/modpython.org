<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] example of the PythonImport directive
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20example%20of%20the%20PythonImport%20directive&In-Reply-To=C546EEA4-368F-4B9A-8F16-7ED843D12FA7%40dscpl.com.au">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022878.html">
   <LINK REL="Next"  HREF="022885.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] example of the PythonImport directive</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>m.banaouas</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20example%20of%20the%20PythonImport%20directive&In-Reply-To=C546EEA4-368F-4B9A-8F16-7ED843D12FA7%40dscpl.com.au"
       TITLE="[mod_python] example of the PythonImport directive">banaouas.medialog at wanadoo.fr
       </A><BR>
    <I>Wed Dec 27 03:26:08 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="022878.html">[mod_python] example of the PythonImport directive
</A></li>
        <LI>Next message: <A HREF="022885.html">[mod_python] example of the PythonImport directive
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22884">[ date ]</a>
              <a href="thread.html#22884">[ thread ]</a>
              <a href="subject.html#22884">[ subject ]</a>
              <a href="author.html#22884">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I just started to use mod_python (2 weeks) version 3.2.10.
I understand that I would switch to version 3.3 (yet beta).
Concerning PythonImport directive, it seems like it is not the only 
(best?) way to init database connexions.
Is there any other way to do it late, I mean just before first 
call/usage from requests?
thanks

 &gt;
 &gt; On 27/12/2006, at 11:05 AM, m.banaouas wrote:
 &gt;
 &gt;&gt; hi,
 &gt;&gt; Can anyone give me an example of how the PythonImport directive/code 
works?
 &gt;&gt; I expect to use it to pre-open an sql database connexion, keep it 
opened and make it accessible from later requests.
 &gt;&gt; thanks for any suggestion
 &gt;
 &gt; Presuming you are using mod_python 3.3.0b, as per documentation at:
 &gt;
 &gt;   
<A HREF="http://www.modpython.org/live/mod_python-3.3.0b/doc-html/dir-other-pimp.html">http://www.modpython.org/live/mod_python-3.3.0b/doc-html/dir-other-pimp.html</A>
 &gt;
 &gt; use:
 &gt;
 &gt;   PythonImport module::function interpreter_name
 &gt;
 &gt; Change names as appropriate.
 &gt;
 &gt; Do the database initialisation within function() inside the module, 
not at global
 &gt; scope because if done at global scope and it fails and raises an 
exception it
 &gt; will cause import of module to fail and only way around that is an Apache
 &gt; restart.
 &gt;
 &gt; By doing it within the function, although it may still fail, a 
handler which requires
 &gt; the database stuff can always call the function still with it doing 
nothing if it did
 &gt; previously work at time of PythonImport, otherwise it would do 
delayed database
 &gt; initialisation at time of first request. If it still fails, handle 
can test for that and
 &gt; return an appropriate error page.
 &gt;
 &gt; Note that the module should not be a candidate for reloading if you 
are caching
 &gt; data at global scope such as database connection pool, unless you 
have specifically
 &gt; coded the module to be safe in the face of automatic module reloading.
 &gt;
 &gt; If you aren't using 3.3.0b, although you might get something going by 
having it
 &gt; done at global scope, it will not be reliable and also may suffer 
problems
 &gt; because of old importer bugs.
 &gt;
 &gt; Graham



</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022878.html">[mod_python] example of the PythonImport directive
</A></li>
	<LI>Next message: <A HREF="022885.html">[mod_python] example of the PythonImport directive
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22884">[ date ]</a>
              <a href="thread.html#22884">[ thread ]</a>
              <a href="subject.html#22884">[ subject ]</a>
              <a href="author.html#22884">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
