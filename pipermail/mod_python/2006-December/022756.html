<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Publisher and DEFLATE Filter
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Publisher%20and%20DEFLATE%20Filter&In-Reply-To=45721063.7020706%40joreybump.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022755.html">
   <LINK REL="Next"  HREF="022749.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Publisher and DEFLATE Filter</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Publisher%20and%20DEFLATE%20Filter&In-Reply-To=45721063.7020706%40joreybump.com"
       TITLE="[mod_python] Publisher and DEFLATE Filter">grahamd at dscpl.com.au
       </A><BR>
    <I>Sat Dec  2 18:59:52 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="022755.html">[mod_python] Publisher and DEFLATE Filter
</A></li>
        <LI>Next message: <A HREF="022749.html">[mod_python] Publisher and DEFLATE Filter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22756">[ date ]</a>
              <a href="thread.html#22756">[ thread ]</a>
              <a href="subject.html#22756">[ subject ]</a>
              <a href="author.html#22756">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 03/12/2006, at 10:46 AM, Jorey Bump wrote:

&gt;<i> Graham Dumpleton wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Of if using mod_python 3.3 just use:
</I>&gt;&gt;<i>   PythonFixupHandler install_filters
</I>&gt;&gt;<i> In that handler module have:
</I>&gt;&gt;<i>   from mod_python import apache
</I>&gt;&gt;<i>   def fixuphandler(req):
</I>&gt;&gt;<i>     if req.content_type == 'text/html':
</I>&gt;&gt;<i>       req.add_output_filter('INCLUDES')
</I>&gt;&gt;<i>     return apache.OK
</I>&gt;<i>
</I>&gt;<i> Should that be:
</I>&gt;<i>
</I>&gt;<i>     req.add_output_filter('DEFLATE')
</I>
Since I was using a .shtml extension which is what is used for server  
side
includes, I switched gears and simply showed an alternate filter in  
action
to what you guys were originally talking about. :-)

Maybe I should show both in action:

   from mod_python import apache
   def fixuphandler(req):
     if req.content_type == 'text/html':
       req.add_output_filter('INCLUDES')
       req.add_output_filter('DEFLATE')
     return apache.OK

&gt;&gt;<i> To me this is getting to what mod_python is really about, it is a  
</I>&gt;&gt;<i> means of programming
</I>&gt;&gt;<i> Apache by using all the various phases as they are intended and  
</I>&gt;&gt;<i> not just a jumping off
</I>&gt;&gt;<i> point for content handlers to WSGI, Django, TurboGears etc. :-)
</I>&gt;<i>
</I>&gt;<i> This *is* exciting, but when administering a server that supports  
</I>&gt;<i> mod_python, PHP, CGI, ColdFusion, static HTML, etc., it's more  
</I>&gt;<i> expedient to configure mod_deflate in the main httpd config, so  
</I>&gt;<i> that it applies to all virtual hosts and matching content.
</I>
True.

Although the fixup handler is run within the context of mod_python,  
it is still setting
up the output filter for all requests with that content type or  
extension, regardless
of how the content handler phase is implemented so as to provide that  
content.

Thus, the above fixuphandler would still apply to where content was  
produced by
PHP, CGI, ColdFusion, static HTML etc.

I am sure you realise this, but thought I would clarify this in case  
others thought
that it would only apply where mod_python was used for the content  
handler phase.

Graham
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022755.html">[mod_python] Publisher and DEFLATE Filter
</A></li>
	<LI>Next message: <A HREF="022749.html">[mod_python] Publisher and DEFLATE Filter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22756">[ date ]</a>
              <a href="thread.html#22756">[ thread ]</a>
              <a href="subject.html#22756">[ subject ]</a>
              <a href="author.html#22756">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
