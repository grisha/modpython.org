<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] why is this false: 'form' in dir(req)?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20why%20is%20this%20false%3A%20%27form%27%20in%20dir%28req%29%3F&In-Reply-To=1166048713.27495%40dscpl.user.openhosting.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022799.html">
   <LINK REL="Next"  HREF="022801.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] why is this false: 'form' in dir(req)?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Daniel Nogradi</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20why%20is%20this%20false%3A%20%27form%27%20in%20dir%28req%29%3F&In-Reply-To=1166048713.27495%40dscpl.user.openhosting.com"
       TITLE="[mod_python] why is this false: 'form' in dir(req)?">nogradi at gmail.com
       </A><BR>
    <I>Wed Dec 13 17:50:54 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="022799.html">[mod_python] why is this false: 'form' in dir(req)?
</A></li>
        <LI>Next message: <A HREF="022801.html">[mod_python] Apache as a Windows Service Question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22800">[ date ]</a>
              <a href="thread.html#22800">[ thread ]</a>
              <a href="subject.html#22800">[ subject ]</a>
              <a href="author.html#22800">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> &gt; &gt; &gt; Each mod_python request object has an attribute form (at least the
</I>&gt;<i> &gt; &gt; &gt; ones I came accross so far), yet the following is false:
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; 'form' in dir(req)
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; Any reason I'm not seeing why?
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; The request object is principally a C code based wrapper around the
</I>&gt;<i> Apache
</I>&gt;<i> &gt; &gt; request_rec structure. At the same time though, it still allows adding
</I>&gt;<i> &gt; of
</I>&gt;<i> &gt; &gt; attributes from within Python. None of those extra attributes however
</I>&gt;<i> &gt; show
</I>&gt;<i> &gt; &gt; up when using dir(), only those corresponding to attributes in the
</I>&gt;<i> &gt; &gt; request_rec
</I>&gt;<i> &gt; &gt; structure and a few others implemented at the C code level show up. It
</I>&gt;<i> &gt; is a
</I>&gt;<i> &gt; &gt; known shortcoming and probably could be fixed but no one has ever
</I>&gt;<i> probably
</I>&gt;<i> &gt; &gt; looked at it.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; BTW, using hasattr(req, 'form') does still work.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I see, thanks. The way it turned up for me was that I wanted to
</I>&gt;<i> &gt; inspect every attribute of the request object just to see what is
</I>&gt;<i> &gt; there and I did this with a loop over dir(req). So what would be the
</I>&gt;<i> &gt; good way to loop over every attribute (including the ones that dir
</I>&gt;<i> &gt; doesn't show)?
</I>&gt;<i>
</I>&gt;<i> As far as I know there isn't any way of doing it at present.
</I>&gt;<i>
</I>&gt;<i> I believe that dir() works by being able to access the __dict__ attribute of
</I>&gt;<i> objects, but the request object doesn't have one and fudging one on the fly
</I>&gt;<i> to
</I>&gt;<i> support dir() wouldn't necessarily be practical given how the request object
</I>&gt;<i> wrapper is currently implemented, nor would trying to have a fake dictionary
</I>&gt;<i> of
</I>&gt;<i> sorts always in place as it would have to be able to cope with special
</I>&gt;<i> setters/getters etc.
</I>&gt;<i>
</I>&gt;<i> FWIW, when SWIG is used to create Python wrappers for C code, dir() still
</I>&gt;<i> works
</I>&gt;<i> and shows both underlying C struct attributes as well as Python based
</I>&gt;<i> attributes. In SWIG, it maintains a __dict__ attribute but it is a special
</I>&gt;<i> fake
</I>&gt;<i> dictionary of sorts. One can still access attributes via __dict__ in a SWIG
</I>&gt;<i> object, but setting stuff in the wrapped object via __dict__ doesn't result
</I>&gt;<i> in
</I>&gt;<i> the wrapped object being changed. That value is still in the __dict__ though
</I>&gt;<i> and accessing __dict__ direct gets back the changed value rather than that
</I>&gt;<i> in
</I>&gt;<i> the wrapped object although using proper attribute access still gets value
</I>&gt;<i> from
</I>&gt;<i> wrapped object. Thus, SWIG behaviour isn't perfectly correct in that case,
</I>&gt;<i> but
</I>&gt;<i> then one shouldn't be accessing stuff via __dict__. :-)
</I>&gt;<i>
</I>&gt;<i> Anyway, what SWIG does is academic and mod_python doesn't use SWIG but uses
</I>&gt;<i> hand crafted C code for its wrapper objects.
</I>

Thanks a lot for the explanation. If anyone knows of other attributes
of req which are not shown by dir, please let me know. Not that it is
terribly important, just out of curiosity.
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022799.html">[mod_python] why is this false: 'form' in dir(req)?
</A></li>
	<LI>Next message: <A HREF="022801.html">[mod_python] Apache as a Windows Service Question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22800">[ date ]</a>
              <a href="thread.html#22800">[ thread ]</a>
              <a href="subject.html#22800">[ subject ]</a>
              <a href="author.html#22800">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
