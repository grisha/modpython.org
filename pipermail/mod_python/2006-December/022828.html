<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] PYTHONPATH and mod_python
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20PYTHONPATH%20and%20mod_python&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022827.html">
   <LINK REL="Next"  HREF="022830.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] PYTHONPATH and mod_python</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20PYTHONPATH%20and%20mod_python&In-Reply-To="
       TITLE="[mod_python] PYTHONPATH and mod_python">grahamd at dscpl.com.au
       </A><BR>
    <I>Wed Dec 20 16:31:45 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="022827.html">[mod_python] Mod_python as replacement for mod_rewrite
</A></li>
        <LI>Next message: <A HREF="022830.html">[mod_python] PYTHONPATH and mod_python
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22828">[ date ]</a>
              <a href="thread.html#22828">[ thread ]</a>
              <a href="subject.html#22828">[ subject ]</a>
              <a href="author.html#22828">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Soenke Ruempler - NorthClick  wrote ..
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> We're using a managed server and have our own apache + mod_python running.
</I>&gt;<i> All went fine until the server was rebooted by the provider.
</I>&gt;<i> 
</I>&gt;<i> Now I get:
</I>&gt;<i> 
</I>&gt;<i> [Wed Dec 20 11:22:07 2006] [notice] SIGHUP received.  Attempting to restart
</I>&gt;<i> [Wed Dec 20 11:22:07 2006] [notice] mod_python: Creating 8 session mutexes
</I>&gt;<i> based on 150 max processes and 0 max threads.
</I>&gt;<i> [Wed Dec 20 11:22:07 2006] [notice] mod_python: using mutex_directory
</I>&gt;<i> /www/94219_27474/local/tmp
</I>&gt;<i> [Wed Dec 20 11:22:07 2006] [notice] Apache/2.0.55 (Unix) DAV/2 SVN/1.3.2
</I>&gt;<i> mod_python/3.2.10 Python/2.5 configured -- resuming normal operations
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> [Doing the first HTTP request here]
</I>&gt;<i> 
</I>&gt;<i> [Wed Dec 20 11:22:13 2006] [error] make_obcallback: could not import
</I>&gt;<i> mod_python.apache.\n
</I>&gt;<i> ImportError: No module named mod_python.apache
</I>&gt;<i> [Wed Dec 20 11:22:13 2006] [error] make_obcallback: Python path being used
</I>&gt;<i> &quot;['/usr/lib/python25.zip', '/usr/lib/python2.5',
</I>&gt;<i> '/usr/lib/python2.5/plat-linux2', '/usr/lib/python2.5/lib-tk',
</I>&gt;<i> '/usr/lib/python2.5/lib-dynload', '/usr/lib/python2.5/site-packages',
</I>&gt;<i> '/usr/lib/python2.5/site-packages/PIL']&quot;.
</I>&gt;<i> [Wed Dec 20 11:22:13 2006] [error] python_handler: no interpreter callback
</I>&gt;<i> found.
</I>&gt;<i> [Wed Dec 20 11:22:13 2006] [error] [client xxx] python_handler: Can't
</I>&gt;<i> get/create interpreter.
</I>&gt;<i> 
</I>&gt;<i> [500 Interal Server Error]
</I>&gt;<i> 
</I>&gt;<i> I guess the problem is the PYTHONPATH is being ignored by apache+mod_python.
</I>&gt;<i> Mod_python is installed into some local dir and the PYTHONPATH is set:
</I>&gt;<i> 
</I>&gt;<i> # env | grep PY
</I>&gt;<i> PYTHONPATH=/www/94219_27474/local/lib/python2.5/site-packages/:/www/94219_27
</I>&gt;<i> 474/local/lib/svn-python:
</I>&gt;<i> 
</I>&gt;<i> The intepreter gets the path from commandline:
</I>&gt;<i> 
</I>&gt;<i> # python2.5
</I>&gt;<i> Python 2.5 (r25:51908, Sep 22 2006, 18:03:12)
</I>&gt;<i> [GCC 3.3.5  (Gentoo Linux 3.3.5-r1, ssp-3.3.2-3, pie-8.7.7.1)] on linux2
</I>&gt;<i> Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
</I>&gt;<i> &gt;&gt;&gt; import sys
</I>&gt;<i> &gt;&gt;&gt; sys.path
</I>&gt;<i> ['', '/www/94219_27474/local/lib/python2.5/site-packages',
</I>&gt;<i> '/www/94219_27474/local/lib/svn-python', '/kunden/94219_27474',
</I>&gt;<i> '/usr/lib/python25.zip', '/usr/lib/python2.5',
</I>&gt;<i> '/usr/lib/python2.5/plat-linux2', '/usr/lib/python2.5/lib-tk',
</I>&gt;<i> '/usr/lib/python2.5/lib-dynload', '/usr/lib/python2.5/site-packages',
</I>&gt;<i> '/usr/lib/python2.5/site-packages/PIL']
</I>&gt;<i> &gt;&gt;&gt; import mod_python.apache
</I>&gt;<i> Traceback (most recent call last):
</I>&gt;<i>   File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
</I>&gt;<i>   File &quot;usr/lib/python2.5/site-packages/mod_python/apache.py&quot;, line 28,
</I>&gt;<i> in
</I>&gt;<i> &lt;module&gt;
</I>&gt;<i> ImportError: No module named _apache
</I>&gt;<i> 
</I>&gt;<i> I guess this looks good (as I've seen it in some mail archives).
</I>&gt;<i> 
</I>&gt;<i> But somehow the PYTHONPATH is not used while mod_python initialization?!
</I>&gt;<i> 
</I>&gt;<i> Any help would be appreciated. :)
</I>
Apache is normally run as a separate user. The PYTHONPATH variable definition
has to be set in the environment of that user. If the way Apache is started at
reboot means it doesn't actually inherit the environment of that user, then it
would have to be set somehow in the Apache startup scripts.

At the moment I am assuming that you are only setting PYTHONPATH in your own
account and it has perhaps worked prior to the reboot as the means you were
using to restart Apache was inheriting it from your own environment.

Graham
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022827.html">[mod_python] Mod_python as replacement for mod_rewrite
</A></li>
	<LI>Next message: <A HREF="022830.html">[mod_python] PYTHONPATH and mod_python
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22828">[ date ]</a>
              <a href="thread.html#22828">[ thread ]</a>
              <a href="subject.html#22828">[ subject ]</a>
              <a href="author.html#22828">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
