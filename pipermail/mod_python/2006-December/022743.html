<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Import a module into a variable value
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Import%20a%20module%20into%20a%20variable%20value&In-Reply-To=a595de7a0612020226n596e685dj8e7225bf1d11183c%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022742.html">
   <LINK REL="Next"  HREF="022745.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Import a module into a variable value</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Jorey Bump</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Import%20a%20module%20into%20a%20variable%20value&In-Reply-To=a595de7a0612020226n596e685dj8e7225bf1d11183c%40mail.gmail.com"
       TITLE="[mod_python] Import a module into a variable value">list at joreybump.com
       </A><BR>
    <I>Sat Dec  2 09:51:46 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="022742.html">[mod_python] Import a module into a variable value
</A></li>
        <LI>Next message: <A HREF="022745.html">[mod_python] Import a module into a variable value
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22743">[ date ]</a>
              <a href="thread.html#22743">[ thread ]</a>
              <a href="subject.html#22743">[ subject ]</a>
              <a href="author.html#22743">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Clodoaldo wrote:
&gt;<i> I'm doing a very light templating in a publisher program.
</I>&gt;<i> 
</I>&gt;<i> There is a html template read from the index.html file in which
</I>&gt;<i> '%(variable)s' are replaced.
</I>&gt;<i> 
</I>&gt;<i> This code reads the template from the file:
</I>&gt;<i> 
</I>&gt;<i> f = open('/var/www/html/carconsumption.com/index.html', 'r')
</I>&gt;<i> _html = ''.join(f.readlines())
</I>&gt;<i> f.close()
</I>
Try putting this in a function.

&gt;<i> And then inside index() at return time the usual substitution:
</I>&gt;<i> 
</I>&gt;<i>   return C._html % _d
</I>
Call your function instead:

     return page(_d)

&gt;<i> Editing a file with the extension .html is nice with editors with html
</I>&gt;<i> syntax highlighting, completion and other things. 
</I>
Yes, that's true.

&gt;<i> The only problem
</I>&gt;<i> with this approach is that the file index.html is not reloaded when
</I>&gt;<i> changed.
</I>
There are times when I'll create a large HTML snippet in an editor, then 
copy and paste it into a string variable in a module. As you point out, 
it might not get reloaded. But it could depend on how/where you read in 
the template text.

&gt;<i> I know i could just use a generic handler with PSP as templating. But
</I>&gt;<i> the publisher is so convenient and as the new importer in 3.3 is full
</I>&gt;<i> of tricks like importing modules with any extension i would like to
</I>&gt;<i> know if there is some way to import a whole module into a variable
</I>&gt;<i> value preventing it from being interpreted as python code.
</I>
Regardless of the extension, an imported module should still contain 
Python code. If you are leveraging the new importer in 3.3, this 
shouldn't be much of a problem. When you finish editing your page, wrap 
in a string variable and save it as a module. Either maintain a master 
version to paste from, or comment out the variable wrapper whenever you 
open it in your HTML editor. I suspect that most edits will be so minor 
after the initial creation of your template, that you won't depend on 
the syntax highlighting.

&gt;<i> If the above is nonsense what would be a better approach for
</I>&gt;<i> templating within publisher programs or just to solve the not
</I>&gt;<i> reloadable index.html file?
</I>
Try the technique above, or store the page in a db, or check out an 
existing templating system... I have my own library for creating HTML, 
and build my templates from that. The way I normally do it means that 
it's vulnerable to the reloading issue (I put all of the code for my 
applications in packages), but it needn't be so, especially with the new 
importer.

</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022742.html">[mod_python] Import a module into a variable value
</A></li>
	<LI>Next message: <A HREF="022745.html">[mod_python] Import a module into a variable value
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22743">[ date ]</a>
              <a href="thread.html#22743">[ thread ]</a>
              <a href="subject.html#22743">[ subject ]</a>
              <a href="author.html#22743">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
