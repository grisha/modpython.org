<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] python path and 3.3
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20python%20path%20and%203.3&In-Reply-To=63A6E39C-F759-426F-BC1A-C733CA013D34%40dscpl.com.au">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022750.html">
   <LINK REL="Next"  HREF="022731.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] python path and 3.3</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20python%20path%20and%203.3&In-Reply-To=63A6E39C-F759-426F-BC1A-C733CA013D34%40dscpl.com.au"
       TITLE="[mod_python] python path and 3.3">grahamd at dscpl.com.au
       </A><BR>
    <I>Sat Dec  2 01:22:44 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="022750.html">[mod_python] python path and 3.3
</A></li>
        <LI>Next message: <A HREF="022731.html">[mod_python] python path and 3.3
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22740">[ date ]</a>
              <a href="thread.html#22740">[ thread ]</a>
              <a href="subject.html#22740">[ subject ]</a>
              <a href="author.html#22740">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 02/12/2006, at 8:41 AM, Graham Dumpleton wrote:

&gt;<i>
</I>&gt;<i> On 02/12/2006, at 12:03 AM, Clodoaldo wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> I'm trying to import a module with both the third and fourth
</I>&gt;&gt;<i> techniques you described but I'm having errors.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This is the Virtual host config:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    ServerName carconsumption.s0
</I>&gt;&gt;<i>    DocumentRoot /var/www/html/carconsumption.com
</I>&gt;&gt;<i>    SetHandler mod_python
</I>&gt;&gt;<i>    PythonHandler mod_python.publisher
</I>&gt;&gt;<i>    PythonDebug On
</I>&gt;&gt;<i>    PythonOption mod_python.importer.path &quot;['~/mod']&quot;
</I>&gt;&gt;<i>    PythonImport db_connection carconsumption.s0
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The module &quot;constants&quot; is in the mod directory under the document  
</I>&gt;&gt;<i> root:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> [<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">cpn at s0</A> mod]$ pwd
</I>&gt;&gt;<i> /var/www/html/carconsumption.com/mod
</I>&gt;&gt;<i> [<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">cpn at s0</A> mod]$ ll constants.py
</I>&gt;&gt;<i> -rwxr----- 1 cpn apache 28675 Nov 29 17:42 constants.py
</I>&gt;&gt;<i> [<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">cpn at s0</A> mod]$ ll -d ../mod
</I>&gt;&gt;<i> drwxrws--- 2 cpn apache 4096 Dec  1 12:26 ../mod
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Third technique. index.py contains:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> from mod_python import apache
</I>&gt;&gt;<i> C = apache.import_module('~/mod/constants.py')
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The error output:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> MOD_PYTHON ERROR
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> ProcessId:      24982
</I>&gt;&gt;<i> Interpreter:    'carconsumption.s0'
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> URI:            '/'
</I>&gt;&gt;<i> Location:       None
</I>&gt;&gt;<i> Directory:      None
</I>&gt;<i>
</I>&gt;<i> The '~/' prefix will be replaced with the value of 'Directory' as  
</I>&gt;<i> shown here, but it
</I>&gt;<i> isn't set because you have the PythonHandler directive outside of  
</I>&gt;<i> any Directory
</I>&gt;<i> directive or .htaccess file. Thus, it can't know what the handler  
</I>&gt;<i> root is. Using:
</I>&gt;<i>
</I>&gt;<i>    DocumentRoot /var/www/html/carconsumption.com
</I>&gt;<i>    &lt;Directory /var/www/html/carconsumption.com&gt;
</I>&gt;<i>    SetHandler mod_python
</I>&gt;<i>    PythonHandler mod_python.publisher
</I>&gt;<i>    PythonDebug On
</I>&gt;<i>    PythonOption mod_python.importer.path &quot;['~/mod']&quot;
</I>&gt;<i>    &lt;/Directory&gt;
</I>&gt;<i>
</I>&gt;<i> should work, as will:
</I>&gt;<i>
</I>&gt;<i>    DocumentRoot /var/www/html/carconsumption.com
</I>&gt;<i>    SetHandler mod_python
</I>&gt;<i>    PythonHandler mod_python.publisher
</I>&gt;<i>    PythonDebug On
</I>&gt;<i>    PythonOption mod_python.importer.path &quot;['/var/www/html/ 
</I>&gt;<i> carconsumption.com/mod']&quot;
</I>&gt;<i>
</I>&gt;<i> Note, when inside a Location directive, '~/' will not work either  
</I>&gt;<i> as Location isn't
</I>&gt;<i> associated with a directory.
</I>&gt;<i>
</I>&gt;<i> What I have to think about now is whether when both Directory and  
</I>&gt;<i> Location
</I>&gt;<i> directives aren't being used, that '~/' maps to DocumentRoot. I  
</I>&gt;<i> never thought
</I>&gt;<i> about this particular scenario.
</I>
If you get the latest version of source code for 3.3 from subversion  
repository, it
should now work without having to have the handler directive inside  
the context
of the Directory directive.

The code will now always have the handler root fallback to being the  
document
root if used in VirtualHost container or in main server context. It  
will also fallback
to using the document root if used in a Location directive as well.

Graham
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022750.html">[mod_python] python path and 3.3
</A></li>
	<LI>Next message: <A HREF="022731.html">[mod_python] python path and 3.3
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22740">[ date ]</a>
              <a href="thread.html#22740">[ thread ]</a>
              <a href="subject.html#22740">[ subject ]</a>
              <a href="author.html#22740">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
