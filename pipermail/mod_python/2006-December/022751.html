<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Publisher and DEFLATE Filter
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Publisher%20and%20DEFLATE%20Filter&In-Reply-To=45720480.4020206%40joreybump.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022748.html">
   <LINK REL="Next"  HREF="022754.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Publisher and DEFLATE Filter</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Publisher%20and%20DEFLATE%20Filter&In-Reply-To=45720480.4020206%40joreybump.com"
       TITLE="[mod_python] Publisher and DEFLATE Filter">grahamd at dscpl.com.au
       </A><BR>
    <I>Sat Dec  2 18:24:47 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="022748.html">[mod_python] Publisher and DEFLATE Filter
</A></li>
        <LI>Next message: <A HREF="022754.html">[mod_python] Publisher and DEFLATE Filter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22751">[ date ]</a>
              <a href="thread.html#22751">[ thread ]</a>
              <a href="subject.html#22751">[ subject ]</a>
              <a href="author.html#22751">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 03/12/2006, at 9:56 AM, Jorey Bump wrote:

&gt;<i> Clodoaldo wrote:
</I>&gt;&gt;<i> 2006/12/2, Jorey Bump &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">list at joreybump.com</A>&gt;:
</I>&gt;&gt;&gt;<i> Clodoaldo wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> &gt; As the Publisher does not require a py extension this obviously  
</I>&gt;&gt;&gt;<i> does
</I>&gt;&gt;&gt;<i> &gt; not work. The AddOutputFilterByType directive is said to be  
</I>&gt;&gt;&gt;<i> deprecated
</I>&gt;&gt;&gt;<i> &gt; in the 2.2.3 manual.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Do you have a link to that statement? I don't see it mentioned here:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>   <A HREF="http://httpd.apache.org/docs/2.2/mod/mod_deflate.html">http://httpd.apache.org/docs/2.2/mod/mod_deflate.html</A>
</I>&gt;&gt;<i> It is here:
</I>&gt;&gt;<i> <A HREF="http://httpd.apache.org/docs/2.2/mod/core.html#addoutputfilterbytype">http://httpd.apache.org/docs/2.2/mod/core.html#addoutputfilterbytype</A>
</I>&gt;&gt;<i> &quot;Because of certain problems discussed below, this directive is  
</I>&gt;&gt;<i> deprecated.&quot;
</I>&gt;<i>
</I>&gt;<i> Crap. Well, as long as the offical documentation for mod_deflate  
</I>&gt;<i> describes only the old method, it should be safe to use until the  
</I>&gt;<i> docs are updated with a new alternative. It's obviously best to  
</I>&gt;<i> operate on MIME types instead of file extensions, but try not to  
</I>&gt;<i> get greedy. Some browsers even have trouble dealing with compressed  
</I>&gt;<i> text/css. You'll get a lot of mileage out of compressing text/html,  
</I>&gt;<i> text/plain, and text/xml alone.
</I>
Of if using mod_python 3.3 just use:

   PythonFixupHandler install_filters

In that handler module have:

   from mod_python import apache

   def fixuphandler(req):
     if req.content_type == 'text/html':
       req.add_output_filter('INCLUDES')
     return apache.OK

Using a fixup handler is possibly going to give you more control  
anyway as you
may want to do other checks to determine when to set filters and the  
directives
may not give you that control. For example you might want to look at  
both
content type and extension.

   from mod_python import apache
   import os.path

   def fixuphandler(req):

     if req.content_type == 'text/html':
       req.add_output_filter('INCLUDES')
     else:
       extension = os.path.splitext(req.filename)[1]
       if extension = '.shtml':
         req.add_output_filter('INCLUDES')

     return apache.OK

To me this is getting to what mod_python is really about, it is a  
means of programming
Apache by using all the various phases as they are intended and not  
just a jumping off
point for content handlers to WSGI, Django, TurboGears etc. :-)

Graham
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022748.html">[mod_python] Publisher and DEFLATE Filter
</A></li>
	<LI>Next message: <A HREF="022754.html">[mod_python] Publisher and DEFLATE Filter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22751">[ date ]</a>
              <a href="thread.html#22751">[ thread ]</a>
              <a href="subject.html#22751">[ subject ]</a>
              <a href="author.html#22751">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
