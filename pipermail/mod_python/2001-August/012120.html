<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Authentication
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Authentication&In-Reply-To=20010824101244.A29899%40godel">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012122.html">
   <LINK REL="Next"  HREF="012121.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Authentication</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Richard Barrett</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Authentication&In-Reply-To=20010824101244.A29899%40godel"
       TITLE="[mod_python] Authentication">R.Barrett at ftel.co.uk
       </A><BR>
    <I>Fri Aug 24 10:09:26 EST 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="012122.html">[mod_python] Authentication
</A></li>
        <LI>Next message: <A HREF="012121.html">[mod_python] Authentication
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12120">[ date ]</a>
              <a href="thread.html#12120">[ thread ]</a>
              <a href="subject.html#12120">[ subject ]</a>
              <a href="author.html#12120">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Unfortunately there is nothing in HTTP (the protocol) that lets a server 
tell a client browser to &quot;forget&quot; the basic authentication credentials it 
has acquired from the user for a given Realm. And while it has those 
credentials, the client browser will continue to attach them to any request 
it makes to the server for a relevant URL.

The mistake is to view HTTP basic authentication as being a login process 
and as a consequence conclude there should be a complementary logout 
process. The authentication model for HTTP allows the server to demand some 
credentials from a user and have those credentials attached to subdsequent 
accesses to the server. If the user hasn't changed why does he need to log 
out?

As you have noted, you can trigger a re-authentication which, if the user 
cancels it, leads to the browser &quot;forgetting&quot; the credentials it has 
associated with the Realm. But this is the best you can do.

The only way to implement a conventional login/logout style is to use an 
HTML form to capture the login credentials, return some identification info 
in a cookie accompanying the response to the form input and specify the 
cookie so that it is attached to subsequent HTTP requests to the server. 
The advantage of this is that a logout process can, in effect, tell the 
browser to destroy cookie by setting its expiry date.

Before deciding which way to deal with this, ask yourself: why does the 
dialogue between the user and your server require a logout.

At 10:12 24/08/2001 +0200, <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">riesch at nieuw.nl</A> wrote:
&gt;<i>Hi there,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>I'm using the standard authentication now (with the authenhandler). This 
</I>&gt;<i>all works fine, but I can't seem to figure out how to let a user logout. 
</I>&gt;<i>I've tried to pass information about logout with the url. Something like:
</I>&gt;<i>
</I>&gt;<i><A HREF="http://www.site.com/?logout">http://www.site.com/?logout</A>
</I>&gt;<i>
</I>&gt;<i>def authenhandler(req):
</I>&gt;<i>    form = util.FieldStorage(req, keep_blank_values=1)
</I>&gt;<i>
</I>&gt;<i>    if form.has_key(logout):
</I>&gt;<i>       return apache.HTTP_UNAUTHORIZED
</I>&gt;<i>
</I>&gt;<i>    pw   = req.get_basic_auth_pw()
</I>&gt;<i>    user = req.connection.user
</I>&gt;<i>    if correct_user(user, pw):
</I>&gt;<i>       return apache.OK
</I>&gt;<i>    else:
</I>&gt;<i>       return apache.HTTP_UNAUTHORIZED
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>Unfortunately, this has the following effects:
</I>&gt;<i>-
</I>&gt;<i>The dialog pops up, even if the user is entering an area that's not 
</I>&gt;<i>protected. Not a very nice sollution, but workable (perhaps)
</I>&gt;<i>-
</I>&gt;<i>The url stays the same, which causes that the 'form' keeps logout-key. 
</I>&gt;<i>This results in repeatedly returing of HTTP_UNAUTHORIZED.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>Does anyone have experience with this, or have some hints or thoughts ?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>Thanks ahead,
</I>&gt;<i>Richard
</I>

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012122.html">[mod_python] Authentication
</A></li>
	<LI>Next message: <A HREF="012121.html">[mod_python] Authentication
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12120">[ date ]</a>
              <a href="thread.html#12120">[ thread ]</a>
              <a href="subject.html#12120">[ subject ]</a>
              <a href="author.html#12120">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
