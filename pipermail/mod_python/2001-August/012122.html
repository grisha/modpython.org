<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Authentication
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Authentication&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012119.html">
   <LINK REL="Next"  HREF="012120.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Authentication</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Peter McA'Nulty</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Authentication&In-Reply-To="
       TITLE="[mod_python] Authentication">peter at webreply.com
       </A><BR>
    <I>Fri Aug 24 08:32:46 EST 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="012119.html">[mod_python] Authentication
</A></li>
        <LI>Next message: <A HREF="012120.html">[mod_python] Authentication
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12122">[ date ]</a>
              <a href="thread.html#12122">[ thread ]</a>
              <a href="subject.html#12122">[ subject ]</a>
              <a href="author.html#12122">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> ...even if the user is entering an area that's not protected. Not a very
</I>nice sollution, but workable (perhaps)

The standard way of handling protected and unprotected data is something
like the config below.  You put protected files in one directory tree and
unprotected files in another tree (usually, the unprotected files include
all/most of your images, your css, etc)

&lt;directory /apache/htdocs/vhostdir&gt;
    PythonHandler pyhandler
    AddHandler python-program .py .phtml

    &lt;directory /apache/htdocs/vhostdir/protected&gt;
        PythonAuthenHandler authenhandler
        AuthType Basic
        AuthName &quot;admin.dthk2&quot;
        require valid-user
    &lt;/directory&gt;

    &lt;directory /apache/htdocs/vhostdir/UNprotected&gt;
    &lt;/directory&gt;
&lt;/directory&gt;


----- Original Message -----
From: &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">riesch at nieuw.nl</A>&gt;
To: &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython.org</A>&gt;
Sent: Friday, August 24, 2001 4:12 AM
Subject: [mod_python] Authentication


&gt;<i> Hi there,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I'm using the standard authentication now (with the authenhandler). This
</I>all works fine, but I can't seem to figure out how to let a user logout.
I've tried to pass information about logout with the url. Something like:
&gt;<i>
</I>&gt;<i> <A HREF="http://www.site.com/?logout">http://www.site.com/?logout</A>
</I>&gt;<i>
</I>&gt;<i> def authenhandler(req):
</I>&gt;<i>    form = util.FieldStorage(req, keep_blank_values=1)
</I>&gt;<i>
</I>&gt;<i>    if form.has_key(logout):
</I>&gt;<i>       return apache.HTTP_UNAUTHORIZED
</I>&gt;<i>
</I>&gt;<i>    pw   = req.get_basic_auth_pw()
</I>&gt;<i>    user = req.connection.user
</I>&gt;<i>    if correct_user(user, pw):
</I>&gt;<i>       return apache.OK
</I>&gt;<i>    else:
</I>&gt;<i>       return apache.HTTP_UNAUTHORIZED
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Unfortunately, this has the following effects:
</I>&gt;<i> -
</I>&gt;<i> The dialog pops up, even if the user is entering an area that's not
</I>protected. Not a very nice sollution, but workable (perhaps)
&gt;<i> -
</I>&gt;<i> The url stays the same, which causes that the 'form' keeps logout-key.
</I>This results in repeatedly returing of HTTP_UNAUTHORIZED.
&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Does anyone have experience with this, or have some hints or thoughts ?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thanks ahead,
</I>&gt;<i> Richard
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://www.modpython.org/mailman/listinfo/mod_python">http://www.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I>

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012119.html">[mod_python] Authentication
</A></li>
	<LI>Next message: <A HREF="012120.html">[mod_python] Authentication
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12122">[ date ]</a>
              <a href="thread.html#12122">[ thread ]</a>
              <a href="subject.html#12122">[ subject ]</a>
              <a href="author.html#12122">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
