<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] 
 Newbie question: setting all calls to a certain directory to beprocessed
 by a script
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20%0A%20Newbie%20question%3A%20setting%20all%20calls%20to%20a%20certain%20directory%20to%20beprocessed%0A%20by%20a%20script&In-Reply-To=3F4D52F3.1090405%40bath.ac.uk">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006686.html">
   <LINK REL="Next"  HREF="006688.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] 
 Newbie question: setting all calls to a certain directory to beprocessed
 by a script</H1>
    <B>Russell Nelson</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20%0A%20Newbie%20question%3A%20setting%20all%20calls%20to%20a%20certain%20directory%20to%20beprocessed%0A%20by%20a%20script&In-Reply-To=3F4D52F3.1090405%40bath.ac.uk"
       TITLE="[mod_python] 
 Newbie question: setting all calls to a certain directory to beprocessed
 by a script">nelson at crynwr.com
       </A><BR>
    <I>Wed Aug 27 22:23:27 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="006686.html">[mod_python]  Newbie question: setting all calls to a certain
 directory to beprocessed by a script
</A></li>
        <LI>Next message: <A HREF="006688.html">[mod_python]  Newbie question: setting all calls to a certain
 directory to beprocessed by a script
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6685">[ date ]</a>
              <a href="thread.html#6685">[ thread ]</a>
              <a href="subject.html#6685">[ subject ]</a>
              <a href="author.html#6685">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<table border=0 width="100%"><tr><td>
<!--beginarticle-->
<PRE>Simon Willison writes:
 &gt; my choice. If that isn't possible, I'd like to set it up so that all 
 &gt; requests within the directory in which my .htaccess file lives are 
 &gt; handled by the one handle() function.

Simon, Simon, Simon, where were you last week?  I could have read the
answer to your question, and avoided having to post my question
earlier this week.  It's pretty easy.  Do it like this:

&lt;Directory &quot;/var/www/ae.russnelson.com&quot;&gt;
SetHandler python-program
PythonHandler publish
&lt;/Directory&gt;

The SetHandler says that everything should be handled by the
python-program.  The PythonHandler says that the name of the script is
publish.py.  Here's a simple publish.py.  I'll be publishing a more
complicated example later once I finish porting my blogging code over
to mod_python.  It's currently stand-alone code that writes static
HTML pages.  The astute observer will notice the constant &quot;if 1&quot; whose
unreachable clause calls page().  That code returns an HTML document
given the pathname that the user handed in.  Note that you'll never
get the null string, but instead 'index.html' or as configured
elsewhere.

#!/usr/bin/env python

from mod_python import apache
import sys, os, re, string

homedir = &quot;/var/www/ae.russnelson.com/&quot;

def handler(req):
    if 1:
        req.content_type = &quot;text/plain&quot;
        req.send_http_header()
        req.write(&quot;Hello World!\n&quot;)
        req.write('uri:'+req.uri+'\n')
        req.write('filename:'+req.filename+'\n')
        req.write('path_info:'+req.path_info+'\n')
        if req.args: req.write('args:'+req.args+'\n')
    else:
        req.content_type = &quot;text/html&quot;
        req.send_http_header()
        req.write(page(req.filename[len(homedir):]))
    return apache.OK


-- 
--My blog is at angry-economist.russnelson.com  | Free markets express in the
Crynwr sells support for free software  | PGPok | practical world our belief
521 Pleasant Valley Rd. | +1 315 268 1925 voice | that there is that of God
Potsdam, NY 13676-3213  | +1 315 268 9201 FAX   | in all people. -Chris V.
</PRE>
<!--endarticle-->
</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006686.html">[mod_python]  Newbie question: setting all calls to a certain
 directory to beprocessed by a script
</A></li>
	<LI>Next message: <A HREF="006688.html">[mod_python]  Newbie question: setting all calls to a certain
 directory to beprocessed by a script
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6685">[ date ]</a>
              <a href="thread.html#6685">[ thread ]</a>
              <a href="subject.html#6685">[ subject ]</a>
              <a href="author.html#6685">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
