<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Persistent db connections
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Persistent%20db%20connections&In-Reply-To=3F326A93.5060505%40verio.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014014.html">
   <LINK REL="Next"  HREF="014017.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Persistent db connections</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Conrad Steenberg</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Persistent%20db%20connections&In-Reply-To=3F326A93.5060505%40verio.net"
       TITLE="[mod_python] Persistent db connections">conrad at hep.caltech.edu
       </A><BR>
    <I>Thu Aug  7 08:36:30 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="014014.html">[mod_python] Persistent db connections
</A></li>
        <LI>Next message: <A HREF="014017.html">[mod_python] Persistent db connections
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14016">[ date ]</a>
              <a href="thread.html#14016">[ thread ]</a>
              <a href="subject.html#14016">[ subject ]</a>
              <a href="author.html#14016">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Van

Doing it the way you describe would work, but depending on the DB and
Apache settings, you might have more Apache processes spawned than the
number of connections your DB can handle.

Using dbpool would make your web app fail more gracefully, i.e. get
slower with more connections, instead of giving some users an error that
it was unable to connect to the DB, as you often see on overloaded
discussion sites.

Cheers

Conrad

On Thu, 2003-08-07 at 08:04, VanL wrote:
&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i> I am using quixote+mod_python as a front-end for a database app.  Based 
</I>&gt;<i> on the example in the faq, it looks like I could just make the 
</I>&gt;<i> connection in a separate module and mod_python would automatically make 
</I>&gt;<i> the database connections persist. 
</I>&gt;<i> 
</I>&gt;<i> For example,
</I>&gt;<i> 
</I>&gt;<i> if I have code that is run by mod_python
</I>&gt;<i> 
</I>&gt;<i> === persistdb.py ==================
</I>&gt;<i> import psycopg as db
</I>&gt;<i> def connect():
</I>&gt;<i>     global connection
</I>&gt;<i>     try:
</I>&gt;<i>         conn = connection
</I>&gt;<i>         return conn
</I>&gt;<i>     except NameError:
</I>&gt;<i>         connection = db.connect(connection_string)
</I>&gt;<i>     return connection
</I>&gt;<i> 
</I>&gt;<i> === application.py ==================
</I>&gt;<i> import persistdb
</I>&gt;<i> conn = persistdb.connect()
</I>&gt;<i> # Use conn here
</I>&gt;<i> 
</I>&gt;<i>  From the FAQ, it appears that the db connection &quot;connection&quot; would 
</I>&gt;<i> persist transparently.  Is this a correct understanding?
</I>&gt;<i> If that is true, would there be any benefit to using dbpool, as opposed 
</I>&gt;<i> to the code posted above?
</I>&gt;<i> 
</I>&gt;<i> Thanks,
</I>&gt;<i> 
</I>&gt;<i> VanL
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>-- 

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014014.html">[mod_python] Persistent db connections
</A></li>
	<LI>Next message: <A HREF="014017.html">[mod_python] Persistent db connections
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14016">[ date ]</a>
              <a href="thread.html#14016">[ thread ]</a>
              <a href="subject.html#14016">[ subject ]</a>
              <a href="author.html#14016">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
