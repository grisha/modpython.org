<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] YAQA mod_python and the missing _apache module
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20YAQA%20mod_python%20and%20the%20missing%20_apache%20module&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002945.html">
   <LINK REL="Next"  HREF="002947.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] YAQA mod_python and the missing _apache module</H1>
    <B>William J. Fellows</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20YAQA%20mod_python%20and%20the%20missing%20_apache%20module&In-Reply-To="
       TITLE="[mod_python] YAQA mod_python and the missing _apache module">donegal at myrealbox.com
       </A><BR>
    <I>Thu Aug 14 00:39:43 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="002945.html">[mod_python]  Re: Cannot run test script: (Re)importing module
	'mptest'
</A></li>
        <LI>Next message: <A HREF="002947.html">[mod_python] YAQA mod_python and the missing _apache module
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2946">[ date ]</a>
              <a href="thread.html#2946">[ thread ]</a>
              <a href="subject.html#2946">[ subject ]</a>
              <a href="author.html#2946">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm sorry to trouble the list but I have not been able to get it
mod_python to work.  My setup is Python 2.2.2, Apache 2.0.47,
mod_python 3.0.3  Python root directory is e:\Python22  Apache's root
is E:\Program Files\Apache Group\Apache2  Windows 2k Professional

I have a sample python script sitting out in cgi-bin and it works just
fine.  The mptest file though, horks everytime.  Feel free to beat on
my server. 
<A HREF="http://65.26.28.214/cgi-bin/sample.py">http://65.26.28.214/cgi-bin/sample.py</A>
<A HREF="http://65.26.28.214/cgi-bin/mptest.py">http://65.26.28.214/cgi-bin/mptest.py</A>


The error message is:
Premature end of script headers: mptest.py
Traceback (most recent call last):
  File &quot;E:\Program Files\Apache Group\Apache2\cgi-bin\mptest.py&quot;, line 1, in ?
    from mod_python import apache
  File &quot;E:\Python22\Lib\site-packages\mod_python\apache.py&quot;, line 67, in ?
    import _apache
ImportError: No module named _apache


Been here,
<A HREF="http://www.modpython.org/FAQ/faqw.py?req=show&amp;file=faq02.001.htp">http://www.modpython.org/FAQ/faqw.py?req=show&amp;file=faq02.001.htp</A>
and I've been there
<A HREF="http://www.modpython.org/FAQ/faqw.py?req=show&amp;file=faq02.002.htp">http://www.modpython.org/FAQ/faqw.py?req=show&amp;file=faq02.002.htp</A>

I believe I understand what that says and everything I could find about
it from the archived email messages but unless Apache is invoking the
python enviroment outside of apache, I have no clue what's going
wrong.  And if it is doing it outside, I have no idea how it got that
way.

Saw both pythonhome and pythonpath referenced so I've touched both of
them.

PYTHONHOME=e:\python22
PYTHONPATH=e:\python22;e:\python22\lib;E:\Python22\Lib\site-packages\mod_python;E:\Python22\Lib\site-packages

I'm at my wits end.  I know I can get Python running under IIS but as
I don't feel like patching daily, I thought I'd give Apache a whirl.
I've dutifully scoured the archives and applied what I saw there but
no go so anyone with some insight to offer would be worshiped from
afar.

/bill

p.s.

The link for full archives does not work.
<A HREF="http://www.modpython.org/pipermail/mod_python.mbox/mod_python.mbox">http://www.modpython.org/pipermail/mod_python.mbox/mod_python.mbox</A>
Fortunately, wget -R -a.gz worked just fine.




The relevant parts of my conf file look like

=-=-=-=-=-=-=-=-BEGIN httpd.conf=-=-====-=-=-=-=-=-=--=-
LoadModule python_module modules/mod_python.so
ScriptInterpreterSource Registry

&lt;Directory &quot;E:/Program Files/Apache Group/Apache2/htdocs&quot;&gt;
    AddHandler python-program .py
#   I tried combinations of the next two lines but to no avail
#    AddHandler cgi-script .py
#    PythonHandler mptest

    PythonHandler mod_python.publisher
    PythonDebug On

    Options Indexes FollowSymLinks
    AllowOverride None
    Order allow,deny
    Allow from all

&lt;/Directory&gt;
=-=-=-=-=-=-=-=-END httpd.conf=-=-====-=-=-=-=-=-=--=-


=-=-=-=-=-=-=-=-BEGIN sample.py=-=-====-=-=-=-=-=-=--=-
print &quot;Content-type: text/html&quot;
print
print &quot;&lt;pre&gt;&quot;
import os, sys
print &quot;&lt;strong&gt;Python %s&lt;/strong&gt;&quot; % sys.version
for (x,y) in os.environ.items():
   print &quot;%s\t%s&quot; % (x, y)

print &quot;\nsys.path&quot;
for p in sys.path:
   print p
print &quot;&lt;/pre&gt;&quot;

=-=-=-=-=-=-=-=-END sample.py=-=-====-=-=-=-=-=-=--=-


=-=-=-=-=-=-=-=-BEGIN mptest.py=-=-====-=-=-=-=-=-=--=-
from mod_python import apache

def handler(req):
    req.write(&quot;Hello World!&quot;)
    return apache.OK

=-=-=-=-=-=-=-=-END mptest.py=-=-====-=-=-=-=-=-=--=-

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002945.html">[mod_python]  Re: Cannot run test script: (Re)importing module
	'mptest'
</A></li>
	<LI>Next message: <A HREF="002947.html">[mod_python] YAQA mod_python and the missing _apache module
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2946">[ date ]</a>
              <a href="thread.html#2946">[ thread ]</a>
              <a href="subject.html#2946">[ subject ]</a>
              <a href="author.html#2946">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
