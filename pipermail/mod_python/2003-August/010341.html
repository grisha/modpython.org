<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] YAQA mod_python and the missing _apache module
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20YAQA%20mod_python%20and%20the%20missing%20_apache%20module&In-Reply-To=1634432327.20030814003943%40myrealbox.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010340.html">
   <LINK REL="Next"  HREF="010342.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
<table border=0 width="100%"><tr><td valign="top">
   <H1>[mod_python] YAQA mod_python and the missing _apache module</H1>
    <B>David Fraser</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20YAQA%20mod_python%20and%20the%20missing%20_apache%20module&In-Reply-To=1634432327.20030814003943%40myrealbox.com"
       TITLE="[mod_python] YAQA mod_python and the missing _apache module">davidf at sjsoft.com
       </A><BR>
    <I>Thu Aug 14 09:25:36 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="010340.html">[mod_python] YAQA mod_python and the missing _apache module
</A></li>
        <LI>Next message: <A HREF="010342.html">[mod_python] Cookies and redirect...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10341">[ date ]</a>
              <a href="thread.html#10341">[ thread ]</a>
              <a href="subject.html#10341">[ subject ]</a>
              <a href="author.html#10341">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>William J. Fellows wrote:

&gt;<i>The error message is:
</I>&gt;<i>Premature end of script headers: mptest.py
</I>&gt;<i>Traceback (most recent call last):
</I>&gt;<i>  File &quot;E:\Program Files\Apache Group\Apache2\cgi-bin\mptest.py&quot;, line 1, in ?
</I>&gt;<i>    from mod_python import apache
</I>&gt;<i>  File &quot;E:\Python22\Lib\site-packages\mod_python\apache.py&quot;, line 67, in ?
</I>&gt;<i>    import _apache
</I>&gt;<i>ImportError: No module named _apache
</I>&gt;<i>
</I>&gt;<i>  
</I>&gt;<i>
</I> From this error, it means you are putting mptest.py in your cgi-bin 
directory. If it is in there it is probably being run as an external 
Python script, which is not what you want as you won't have access to 
the mod_python internals.
Try moving it to a standard directory, then in an .htaccess or 
&lt;Directory&gt; section for that directory, make sure you have
  AddHandler python-program .py
  PythonHandler mptest.py
  PythonDebug On
(that's the correct combination out of what you quoted below).
Then feed back if that doesn't work.

&gt;<i>Been here,
</I>&gt;<i><A HREF="http://www.modpython.org/FAQ/faqw.py?req=show&amp;file=faq02.001.htp">http://www.modpython.org/FAQ/faqw.py?req=show&amp;file=faq02.001.htp</A>
</I>&gt;<i>and I've been there
</I>&gt;<i><A HREF="http://www.modpython.org/FAQ/faqw.py?req=show&amp;file=faq02.002.htp">http://www.modpython.org/FAQ/faqw.py?req=show&amp;file=faq02.002.htp</A>
</I>&gt;<i>
</I>&gt;<i>I believe I understand what that says and everything I could find about
</I>&gt;<i>it from the archived email messages but unless Apache is invoking the
</I>&gt;<i>python enviroment outside of apache, I have no clue what's going
</I>&gt;<i>wrong.  And if it is doing it outside, I have no idea how it got that
</I>&gt;<i>way.
</I>&gt;<i>
</I>&gt;<i>Saw both pythonhome and pythonpath referenced so I've touched both of
</I>&gt;<i>them.
</I>&gt;<i>
</I>&gt;<i>PYTHONHOME=e:\python22
</I>&gt;<i>PYTHONPATH=e:\python22;e:\python22\lib;E:\Python22\Lib\site-packages\mod_python;E:\Python22\Lib\site-packages
</I>&gt;<i>  
</I>&gt;<i>
</I>It looks from your log above like the path is fine, as you are importing 
mod_python.apache OK.
You will only be able to import _apache if you are really running inside 
mod_python.
If you want to test the path, comment out the import of apache (you can 
return 200 instead of apache.OK) and import sys ; in the handler do 
req.write(&quot;Path: %r\n&quot; % sys.path) and you will get the actual value 
printed out.

Hope that helps
David


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010340.html">[mod_python] YAQA mod_python and the missing _apache module
</A></li>
	<LI>Next message: <A HREF="010342.html">[mod_python] Cookies and redirect...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10341">[ date ]</a>
              <a href="thread.html#10341">[ thread ]</a>
              <a href="subject.html#10341">[ subject ]</a>
              <a href="author.html#10341">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
