<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Strange caching problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Strange%20caching%20problem&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006689.html">
   <LINK REL="Next"  HREF="006691.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Strange caching problem</H1>
    <B>Simon Willison</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Strange%20caching%20problem&In-Reply-To="
       TITLE="[mod_python] Strange caching problem">cs1spw at bath.ac.uk
       </A><BR>
    <I>Wed Aug 27 22:51:32 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="006689.html">[mod_python]  Newbie question: setting all calls to a certain
 directory to beprocessed by a script
</A></li>
        <LI>Next message: <A HREF="006691.html">[mod_python] Strange caching problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6690">[ date ]</a>
              <a href="thread.html#6690">[ thread ]</a>
              <a href="subject.html#6690">[ subject ]</a>
              <a href="author.html#6690">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<table border=0 width="100%"><tr><td>
<!--beginarticle-->
<PRE>I'm experimenting with the idea that mod_python stays resident in 
memory. Here's the handler script I'm using:

from mod_python import apache

counter = 0

def handler(req):
     req.content_type = 'text/html'
     req.send_http_header()
     global counter
     counter = counter + 1
     req.write(&quot;Counter: %d&quot; % counter)
     return apache.OK

If I load it up in a browser and continuously hit refresh, the number 
only increments every 4 or 5 page loads. I was expecting it to increment 
each time. Don't worry - this isn't how I intend to implement a page 
counter, it's just an experiment I'm using to try and gain a better 
understanding of this capability.

The above problem is unsevere, but I've also been having issues with the 
following script:

from mod_python import apache

def handler(req):
     req.content_type = 'text/html'
     req.send_http_header()
     req.write('unparsed_uri: %s' % req.unparsed_uri)
     return apache.OK

When I visit the following URL:

<A HREF="http://myserver/~simon/1">http://myserver/~simon/1</A>

It displays this, as expected:

unparsed_uri: /~simon/1

If I then visit the following:

<A HREF="http://myserver/~simon/2">http://myserver/~simon/2</A>

It continues to show the same string. I have to hit enter in my 
browser's location bar several times before it will notice that I've 
entered a different URL.

This is a major problem, as my aim is to serve up different content 
depending on the URL. If the system isn't noticing the different URLs 
for some reason it becomes unusable!

Thanks,

Simon




</PRE>
<!--endarticle-->
</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006689.html">[mod_python]  Newbie question: setting all calls to a certain
 directory to beprocessed by a script
</A></li>
	<LI>Next message: <A HREF="006691.html">[mod_python] Strange caching problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6690">[ date ]</a>
              <a href="thread.html#6690">[ thread ]</a>
              <a href="subject.html#6690">[ subject ]</a>
              <a href="author.html#6690">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
