<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Child shutdowns?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Child%20shutdowns%3F&In-Reply-To=1062196846.4895.43.camel%40yyz">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014124.html">
   <LINK REL="Next"  HREF="014126.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Child shutdowns?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Greg Stein</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Child%20shutdowns%3F&In-Reply-To=1062196846.4895.43.camel%40yyz"
       TITLE="[mod_python] Child shutdowns?">gstein at lyra.org
       </A><BR>
    <I>Fri Aug 29 16:06:11 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="014124.html">[mod_python] Child shutdowns?
</A></li>
        <LI>Next message: <A HREF="014126.html">[mod_python] Child shutdowns?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14125">[ date ]</a>
              <a href="thread.html#14125">[ thread ]</a>
              <a href="subject.html#14125">[ subject ]</a>
              <a href="author.html#14125">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, Aug 29, 2003 at 06:40:46PM -0400, Barry Warsaw wrote:
&gt;<i> On Fri, 2003-08-29 at 18:23, Greg Stein wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; So it does what you want, but yah... a bit ugly. And it really doesn't
</I>&gt;<i> &gt; look thread-safe either. You could easily have two threads end up inside
</I>&gt;<i> &gt; the 'if' block, registering a cleanup.
</I>&gt;<i> 
</I>&gt;<i> Yep, but right now I'm using a prefork MPM, which I'll probably stick
</I>&gt;<i> with for reasons like this.  IIUC, each child process is single
</I>&gt;<i> threaded, right?
</I>
Yup, it sure is.

If you want to be a Real Man, then you can use _apache.mpm_query to verify
that you're running single-threaded :-)

btw, if you're going to rely on prefork, then why don't you just use the
exit handlers for the process rather than worrying about Apache's pool
cleanup handling? If you're doing the latter to work within the Apache
framework, then you really ought to keep threads in mind :-)

Cheers,
-g

-- 
Greg Stein, <A HREF="http://www.lyra.org/">http://www.lyra.org/</A>
</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014124.html">[mod_python] Child shutdowns?
</A></li>
	<LI>Next message: <A HREF="014126.html">[mod_python] Child shutdowns?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14125">[ date ]</a>
              <a href="thread.html#14125">[ thread ]</a>
              <a href="subject.html#14125">[ subject ]</a>
              <a href="author.html#14125">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
