From marknen at usa.net  Thu Nov  2 09:47:50 2000
From: marknen at usa.net (Mark Nenadov)
Date: Fri Jan  9 21:46:05 2004
Subject: [mod_python] (no subject)
Message-ID: <20001102144750.2386.qmail@nwcst291.netaddress.usa.net>

Hello all! I have a problem. I have attempted to install 'mod_python' on my
Windows 98 (4.10.1998) machine using the instructions that are given at
"http://www.modpython.org/live/mod_python-2.6/doc/windows.html".

When I start up my Apache server it gives me the following output:

   'import exceptions' failed; use -v for traceback
   Warning!  Falling back to string-based exceptions
   'import site' failed; use -v for traceback
   Apache/1.3.11 (Win32) mod_python/2.6 Python/1.5.2 running...
   'import exceptions' failed; use -v for traceback
   Warning!  Falling back to string-based exceptions
   'import site' failed; use -v for traceback

I am running Apache version 1.3.11 for Win32. I am using the Python code given
in the example for installing mod_python for Windows. I have ActivePython 2.0
(build 202) based on Python 2.0. That is the first "potential problem" that
comes to mind. When the documentation gives the requirement of "Python 1.5.2",
does it require that version specifically, or does it just mean 1.5.2 or
greater? 

I can easily switch back to 1.5.2 if thats what its going to take to make this
work. However, elsewhere on modpython.org it says : "At this time, mod_python
works with Python 1.5.2, 1.6 and 2.0".

From grisha at ispol.com  Thu Nov  2 10:52:30 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:46:05 2004
Subject: [mod_python] (no subject)
In-Reply-To: <20001102144750.2386.qmail@nwcst291.netaddress.usa.net>
Message-ID: <Pine.LNX.4.21.0011021049570.17431-100000@saturn.ispol.com>

I just put another DLL on the site compiled with Python 2.0 see if that
works. Also note that the 2.6 windows instructions had a typo in them in
the last step of "installing mod_python libraries". I updated the link on
the website to point to
http://www.modpython.org/live/mod_python-2.6.3/doc/windows.html

P.S. Why don't you use a real operating system? ;-)

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On 2 Nov 2000, Mark Nenadov wrote:

> Hello all! I have a problem. I have attempted to install 'mod_python' on my
> Windows 98 (4.10.1998) machine using the instructions that are given at
> "http://www.modpython.org/live/mod_python-2.6/doc/windows.html".


From jjp at connix.com  Thu Nov  2 12:00:54 2000
From: jjp at connix.com (John Posner)
Date: Fri Jan  9 21:46:05 2004
Subject: [mod_python] Virtual documents and mod_python
Message-ID: <001d01c044ee$772ae920$6e64fea9@jake>

Hi --

I've been successful using this technique to get a Python script to handle a
standard HTTP request:

<Directory <Document Root>/python>
  AddHandler python-program .py
  PythonHandler test
  PythonDebug on
</Directory>

But I don't want or need to create an actual directory containing the Python
script. I'd like to create a virtual document location:

<Location <Document Root>/py_xmlrpc>
  SetHandler python-script
  PythonHandler py_xmlrpc
</Location>

I've used this technique successfully with Perl, but it doesn't work with
Python. Apache thinks it's a request for a real document. And fooling around
with relative/absolute specs as the Location parameter doesn't make any
difference.

Can anyone help?

Tx,
John

--
John Posner, Editor           jjp@oreilly.com
O'Reilly & Associates         860-663-3147


From grisha at ispol.com  Thu Nov  2 17:50:27 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:46:05 2004
Subject: [mod_python] Virtual documents and mod_python
In-Reply-To: <001d01c044ee$772ae920$6e64fea9@jake>
Message-ID: <Pine.LNX.4.21.0011021736010.18432-100000@saturn.ispol.com>

It should work just fine. The only catch is that since <location>
directives have no physical path associated with them, you have to
make sure that your sripts are in PythonPath.

What problem are you having?

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Thu, 2 Nov 2000, John Posner wrote:

> Hi --
> 
> I've been successful using this technique to get a Python script to handle a
> standard HTTP request:
> 
> <Directory <Document Root>/python>
>   AddHandler python-program .py
>   PythonHandler test
>   PythonDebug on
> </Directory>
> 
> But I don't want or need to create an actual directory containing the Python
> script. I'd like to create a virtual document location:
> 
> <Location <Document Root>/py_xmlrpc>
>   SetHandler python-script
>   PythonHandler py_xmlrpc
> </Location>
> 
> I've used this technique successfully with Perl, but it doesn't work with
> Python. Apache thinks it's a request for a real document. And fooling around
> with relative/absolute specs as the Location parameter doesn't make any
> difference.
> 
> Can anyone help?
> 
> Tx,
> John
> 
> --
> John Posner, Editor           jjp@oreilly.com
> O'Reilly & Associates         860-663-3147
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From grisha at ispol.com  Thu Nov  2 18:30:43 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:46:05 2004
Subject: [mod_python] Virtual documents and mod_python
In-Reply-To: <3A01F325.F8B56ECD@infostreet.com>
Message-ID: <Pine.LNX.4.21.0011021828470.18644-100000@saturn.ispol.com>

Good catch! it *should* be python-program.

On Thu, 2 Nov 2000, Cameron La Rue wrote:
> 
> > > <Location <Document Root>/py_xmlrpc>
> > >   SetHandler python-script
> > >   PythonHandler py_xmlrpc
> > > </Location>
>
> I thought you had to say python-program, not python-script?


From dwallace at delanet.com  Fri Nov  3 21:54:59 2000
From: dwallace at delanet.com (Dave)
Date: Fri Jan  9 21:46:05 2004
Subject: [mod_python] Threaded Python and mod_python
Message-ID: <3A037A83.9070800@delanet.com>

Hi Greg,

I just downloaded the 2.6.3 version of mod_python and ran configure. In 
addition to checking my blood pressure ( a very nice feature, maybe 2.7 
can do a CAT scan), it reported the following warning:

****** WARNING ******
  Python is compiled with thread support. Apache 1.3 does not use threads.
  On some systems this will cause problems during compilation, on others
  it may result in unpredictable behaviour of your Apache server. Yet on
  others it will work just fine. The recommended approach is to compile
  Python without thread support in a separate location and specify it with
  --with-python option to this ./configure script.


It compiles and appears to work fine for me (Python 2.0, Apache 1.3.12, 
Linux 2.2.16), but of apparently this could bite at any time. Can you 
expound a little more on the nature of this problem and if there are 
other solutions than not having threads?

Dave.


From grisha at ispol.com  Fri Nov  3 23:04:16 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:46:05 2004
Subject: [mod_python] Threaded Python and mod_python
In-Reply-To: <3A037A83.9070800@delanet.com>
Message-ID: <Pine.LNX.4.21.0011032251040.23312-100000@saturn.ispol.com>

On Fri, 3 Nov 2000, Dave wrote:

> Hi Greg,
> 
> I just downloaded the 2.6.3 version of mod_python and ran configure. In 
> addition to checking my blood pressure 

:-)

> ( a very nice feature, maybe 2.7 can do a CAT scan), it reported the
> following warning:
> 
> ****** WARNING ******
>   Python is compiled with thread support. Apache 1.3 does not use threads.
>   On some systems this will cause problems during compilation, on others

This is platform dependend, and frankly I'm not much of a thread expert. I
know on FreeBSD you will get unresolved symbols at link time when trying
to mix threaded and non threaded code. This is because it links against
separate versions of C libraries.

I don't know if this applies to Linux or Solaris. I know some people have
reported segfaults on RH if mod_python is not the first module listed, and
I have a suspicion that it is thread-related.

So that warning is exactly that - just a warning.

Perhpas someone on this list more knoledgeale on the subject can shed some
light on this?

[P.S. lest someone reading this gets the wrong idea - mod_python *is*
thread safe, it couldn't run on Win32 if it wasn't]

Grisha


From jjp at connix.com  Fri Nov  3 23:04:40 2000
From: jjp at connix.com (John Posner)
Date: Fri Jan  9 21:46:05 2004
Subject: [mod_python] Where's Fredrik
Message-ID: <000101c04614$5cb945b0$6e64fea9@jake>

Does anyone know how to contact Fredrik Lundh, the author of the (only?)
Python XML-RPC implementation?

These don't seem to work for me:

  fredrik@pythonware.com
  effbot@telia.com


Thanks,
John

--
John Posner, Editor           jjp@oreilly.com
O'Reilly & Associates         860-663-3147


From randy at teamkern.net  Sat Nov  4 23:42:09 2000
From: randy at teamkern.net (Randall Kern)
Date: Fri Jan  9 21:46:05 2004
Subject: [mod_python] add_handler
Message-ID: <0cbc01c046fb$e7271e10$1f00a8c0@spoke.net>

Sorry if this has been covered before, I checked the archives and google, but couldn't find anything.

I am using a PythonTransHandler to map certain requests to files, and then invoke a PythonHandler for those files using request.add_handler.  However, my main handler function is never called.

in /foo/foo.py:

from mod_python import apache

def handler(req):
    req.send_http_header()
    req.write("Hello World!\nProcessing on behalf of %s\nFrom foo.py" % req.filename
    return apache.OK

def transhandler(req):

    if stuff:  # stuff is actually a rather complex bit of code...
        req.add_handler("PythonHandler", "foo::handler", "/foo")
        apache.log_error("just called add_handler")
        return apache.OK

    return apache.DECLINED




My error_log file does in fact get the entry "just called...", but the browser always gets the contents of req.filename, NOT the "Hello World..." message from foo.handler.

If I add a SetHandler python-program to my httpd.conf file, the handler() function gets called. It's only when I try to dynamically add the handler that it doesn't work.

Ideas?

Thanks,
-Randy

P.S. python 2.0, apache 1.3.14, mod_python 2.6.3
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20001104/65674beb/attachment.htm
From jhh at msu.edu  Wed Nov  8 04:24:47 2000
From: jhh at msu.edu (John H. Hayes)
Date: Fri Jan  9 21:46:05 2004
Subject: [mod_python] Python SCRIPT Fails When Running Through Python Module
Message-ID: <3A091BDF.6A5CA2F2@msu.edu>

When I attempt to run the test script that is described in the modpython
installation documentation
I get the following information in my web client:
Mod_python error: "PythonHandler test"

Traceback (most recent call last):

  File
"/usr/local/opt/Python-2.0/lib/python2.0/site-packages/mod_python/apache.py",
line 175, in Dispatch
    module = import_module(module_name, _req)

  File
"/usr/local/opt/Python-2.0/lib/python2.0/site-packages/mod_python/apache.py",
line 316, in import_module
    module = __import__(module_name)

ImportError: No module named test

It appears there is some configuration problem, but I set things up as
described.

If anybody can shed some light on this I would appreciate it.

Thanks,
John Hayes



From grisha at ispol.com  Thu Nov  9 09:10:47 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:46:05 2004
Subject: [mod_python] Re: mod_python
In-Reply-To: <3A0AA011.CF6E2C1C@jeremias.net>
Message-ID: <Pine.LNX.4.21.0011090906190.10075-100000@saturn.ispol.com>

[cc-ing the list in case someone has a better answer]

Unfortunately I don't have access to Mandrake and know next to nothing
about it. Is it supposed to be RedHat compatible?

The RPM on the site is RedHat-specific as it makes some assumptions about
what is in the httpd.conf file. I also don't know how compatible it is as
far as libc versions, etc.

Unless someone has a Mandrake RPM out there, my recommendation would be to
compile it from sources.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Thu, 9 Nov 2000, Jason Jeremias wrote:

> Okay,
> 
> OS: Linux Mandrake 7.2
> Apache 1.3.14 that came with it via RPM
> Python 1.5.2 also from mandrake rpm
> mod_python came from the website the RPM.
> 
> Standard config that came with the system.  With the exception of the
> mod_python stuff loaded in it. This is the output from the apache error
> log file.
> [Tue Nov  7 03:34:20 2000] [notice] Apache-AdvancedExtranetServer/1.3.14
> (Linux-Mandrake/2mdk) mod_python/2.6.3 Python/1.5.2 configured --
> resuming normal operations
> [Tue Nov  7 03:34:59 2000] [notice] child pid 32518 exit signal
> Segmentation fault (11)
> [Thu Nov  9 03:56:09 2000] [notice] child pid 32527 exit signal
> Segmentation fault (11)
> 
> let me know if there is anything else I can send you that may help.
> 
> I usually have PHP loaded in Apache as well but I was trying to get
> mod_python working before I put PHP in to eliminate some possible
> problems.
> 
> thanks for the reply.
> 
> -Jason 
> 


From aiglauer at yahoo.com  Fri Nov 10 00:58:04 2000
From: aiglauer at yahoo.com (Alexis Iglauer)
Date: Fri Jan  9 21:46:05 2004
Subject: [mod_python] Re: mod_python
Message-ID: <20001110085804.3371.qmail@web2204.mail.yahoo.com>

I have mod_python working on MDK 6.0, 7.0 and 7.1 - no
problem.  I get the DEAPI warning, which I happily
ignore.  I usually have to change apache.py and put
'/usr/lib/python1.5/site-packages/mod_python' in the
sys.path so that 'cgihandler.py' gets found, but that
is probably because I am too lazy to set PYTHONPATH. 
Problem has reduced since I now write my own handlers
:)

Apache 1.3.[4,6,12], mod_python 2.[0,2,6]

HTH
ax

--- Gregory Trubetskoy <grisha@ispol.com> wrote:
> 
> [cc-ing the list in case someone has a better
> answer]
> 
> Unfortunately I don't have access to Mandrake and
> know next to nothing
> about it. Is it supposed to be RedHat compatible?
> 
> The RPM on the site is RedHat-specific as it makes
> some assumptions about
> what is in the httpd.conf file. I also don't know
> how compatible it is as
> far as libc versions, etc.
> 
> Unless someone has a Mandrake RPM out there, my
> recommendation would be to
> compile it from sources.
> 
> --
>   Gregory (Grisha) Trubetskoy
>        grisha@ispol.com
> 
> On Thu, 9 Nov 2000, Jason Jeremias wrote:
> 
> > Okay,
> > 
> > OS: Linux Mandrake 7.2
> > Apache 1.3.14 that came with it via RPM
> > Python 1.5.2 also from mandrake rpm
> > mod_python came from the website the RPM.
> > 
> > Standard config that came with the system.  With
> the exception of the
> > mod_python stuff loaded in it. This is the output
> from the apache error
> > log file.
> > [Tue Nov  7 03:34:20 2000] [notice]
> Apache-AdvancedExtranetServer/1.3.14
> > (Linux-Mandrake/2mdk) mod_python/2.6.3
> Python/1.5.2 configured --
> > resuming normal operations
> > [Tue Nov  7 03:34:59 2000] [notice] child pid
> 32518 exit signal
> > Segmentation fault (11)
> > [Thu Nov  9 03:56:09 2000] [notice] child pid
> 32527 exit signal
> > Segmentation fault (11)
> > 
> > let me know if there is anything else I can send
> you that may help.
> > 
> > I usually have PHP loaded in Apache as well but I
> was trying to get
> > mod_python working before I put PHP in to
> eliminate some possible
> > problems.
> > 
> > thanks for the reply.
> > 
> > -Jason 
> > 
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python


__________________________________________________
Do You Yahoo!?
Thousands of Stores.  Millions of Products.  All in one Place.
http://shopping.yahoo.com/

From haering_python at gmx.de  Sat Nov 11 05:59:24 2000
From: haering_python at gmx.de (Gerhard =?ISO-8859-1?Q?H=E4ring?=)
Date: Fri Jan  9 21:46:05 2004
Subject: [mod_python] Corrupt win32 build
Message-ID: <11983.973918764@www33.gmx.net>

Hi folks,

I just wanted to test the win32 build for mod_python I got from the
project's homepage. Apache says that mod_python.dll is not a valid Windows image.
And if I try to examine the file with the Microsoft Dependency Walker, I get
more or less the same information. Maybe something did go wrong while the
contributor uploaded his files? Could you upload your files again, please?

Gerhard

-- 
Sent through GMX FreeMail - http://www.gmx.net


From haering_python at gmx.de  Sat Nov 11 06:32:27 2000
From: haering_python at gmx.de (Gerhard =?ISO-8859-1?Q?H=E4ring?=)
Date: Fri Jan  9 21:46:05 2004
Subject: [mod_python] Corrupt win32 build
References: <11983.973918764@www33.gmx.net>
Message-ID: <22208.973920747@www33.gmx.net>

Sorry, I was a fool. It was most probably my Netscape browser's fault that
I  got invalid binaries after downloading. I used wget and the download
worked. I installed mod_python and the test module described in the Win32
install page. Then I wanted to see how it was stability-wise.

/usr/sbin/ab -n 10000 http://lilith/python/test.py

worked fine, while the stress test with 5 parallel requests

/usr/sbin/ab -c 5 -n 10000 http://lilith/python/test.py

crashes Apache in the mod_python module several times. I have Windows
2000,  on a SMP machine, Apache 1.3.12 and ActiveState Python 2.0. Seems like a
threading issue to me ...

Gerhard

-- 
Sent through GMX FreeMail - http://www.gmx.net


From sbi at acse.be  Sun Nov 12 22:57:52 2000
From: sbi at acse.be (=?iso-8859-1?Q?St=E9phane_Bidoul?=)
Date: Fri Jan  9 21:46:05 2004
Subject: [mod_python] Corrupt win32 build
References: <11983.973918764@www33.gmx.net> <22208.973920747@www33.gmx.net>
Message-ID: <003201c04cf3$a1609840$cda679c1@cat>

The win32 version has got some basic testing and debugging
wrt threading; I'll test again with ab as soon as find time for that.
However, I've no SMP machine... so my test will be a bit biased.

-stephane

----- Original Message ----- 
From: "Gerhard H?ring" <haering_python@gmx.de>
To: <mod_python@modpython.org>
Sent: Saturday, November 11, 2000 6:32 AM
Subject: Re: [mod_python] Corrupt win32 build


> Sorry, I was a fool. It was most probably my Netscape browser's fault that
> I  got invalid binaries after downloading. I used wget and the download
> worked. I installed mod_python and the test module described in the Win32
> install page. Then I wanted to see how it was stability-wise.
> 
> /usr/sbin/ab -n 10000 http://lilith/python/test.py
> 
> worked fine, while the stress test with 5 parallel requests
> 
> /usr/sbin/ab -c 5 -n 10000 http://lilith/python/test.py
> 
> crashes Apache in the mod_python module several times. I have Windows
> 2000,  on a SMP machine, Apache 1.3.12 and ActiveState Python 2.0. Seems like a
> threading issue to me ...
> 
> Gerhard
> 
> -- 
> Sent through GMX FreeMail - http://www.gmx.net
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From phil at munen.net  Sun Nov 12 23:47:31 2000
From: phil at munen.net (phil suh)
Date: Fri Jan  9 21:46:05 2004
Subject: [mod_python] Apache warning: this module might crash under EAPI!
Message-ID: <Pine.LNX.4.10.10011122333140.10702-100000@sushi.munen.net>

I'm compiling Apache 1.3.14 w/ mod_so, mod_ssl, mod_perl baked in.
I want to add mod_python as a DSO. I had to recompile Python-2.0 without
threads since the BeOpen-Python 2.0 has threads turned on.

After compiling mod_python, editing httpd.conf, and restarting Apache, it
works, but Apache gives a warning:

$ sudo /etc/rc.d/init.d/httpd start
[Mon Nov 13 00:29:45 2000] [warn] Loaded DSO libexec/mod_python.so uses
plain Apache 1.3 API, this module might crash under EAPI! (please
recompile it with -DEAPI)
/etc/rc.d/init.d/httpd start: httpd started

I searched Google, and found a guy who claims that this is an mod_ssl
related thing, and if the mod doesn't use ssl, I don't need to worry
about it (http://www.geocrawler.com/archives/3/97/2000/3/0/3511640/).

Is this true?

Is there a way to recompile w/ -DEAPI? Can someone explain, step by step,
how to do it?  (I'd rather not have to live with that warning...bugs me).

Thanks in advance for your help.

Phil Suh
Apache compilng-newbie, python enthusiast.

P.S. How I compiled mod_python:

[phil mod_python-2.6.3] $ pwd
/usr/local/src/httpd/mod_python-2.6.3
[phil mod_python-2.6.3] $ ./configure \
> --with-python=/usr/local/src/Python-2.0 \ 
> --with-apxs=/usr/local/apache.org/httpd/bin/apxs \
> --with-apache=/usr/local/src/httpd/apache_1.3.14
[phil mod_python-2.6.3] $ make dso
[phil mod_python-2.6.3] $ sudo make install


==================================
phil@munen.net
http://munen.net/~phil/


From aiglauer at iname.com  Tue Nov 14 00:03:25 2000
From: aiglauer at iname.com (Alexis Iglauer)
Date: Fri Jan  9 21:46:05 2004
Subject: [mod_python] Graphs in a webpage
Message-ID: <006f01c04dc5$f93e9c60$0401a8c0@charis>

This may be the wrong forum for this, but......

I am writing an app which takes data out of text files and makes graphs.
The user interactively specifies the graphs in a browser, with everything
being done in Python as a handler.  The resulting page can have 10+ graphs
on it.

Problem is, my solution is sloooooow.  I am using gdchart to generate the
graphs on the fly (<img src="grph.py?color=0x0000ff" alt="xxx"> and plain
vanilla python for the rest.

I am not sure whether reading the ASCII files is slow and whether sticking
them into a database will be worth the effort (ideas, anyone?).  I get some
advantage when running apache single-threaded by checking whether my data is
already loaded, but as soon as I run apache normally this advantage
disappears.

I think the bottleneck is creating the graph, and in trying to solve that I
have a few questions regarding how mod_python works.  How long does an
instance of mod_python exist?  When is an instance destroyed?  What data can
be passed from one instance to the next?  Also, does anyone have any ideas
on how to efficiently generate graphs from a reasonably large number of
datapoints?

Thanks in advance
Alexis


From benno at sesgroup.net  Tue Nov 14 10:25:14 2000
From: benno at sesgroup.net (Ben Leslie)
Date: Fri Jan  9 21:46:05 2004
Subject: [mod_python] Graphs in a webpage
In-Reply-To: <006f01c04dc5$f93e9c60$0401a8c0@charis>; from aiglauer@iname.com on Tue, Nov 14, 2000 at 12:03:25AM +0100
References: <006f01c04dc5$f93e9c60$0401a8c0@charis>
Message-ID: <20001114102514.I14092@bob.sesgroup.net>

> This may be the wrong forum for this, but......

<snip>
 
> I am not sure whether reading the ASCII files is slow and whether sticking
> them into a database will be worth the effort (ideas, anyone?).  I get some
> advantage when running apache single-threaded by checking whether my data is
> already loaded, but as soon as I run apache normally this advantage
> disappears.

Database is almost always going to be slower than reading from ascii files.
 
> I think the bottleneck is creating the graph, and in trying to solve that I
> have a few questions regarding how mod_python works.  How long does an
> instance of mod_python exist?  When is an instance destroyed?  What data can
> be passed from one instance to the next? 

There is one insatnce of you handler is created for each apache thread. So
it will be there until the apache thread is killed. You can therfore cache
data between requests. I think you can communicate between different threads
but you probably don't want to.

I doubt mod_python would be your bottleneck. How long does graph.py take
to create a graph from the command line?

> Also, does anyone have any ideas
> on how to efficiently generate graphs from a reasonably large number of
> datapoints?

Gnuplot maybe.


Cheers,

Benno

From grisha at ispol.com  Mon Nov 13 22:07:38 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:46:05 2004
Subject: [mod_python] Graphs in a webpage
In-Reply-To: <006f01c04dc5$f93e9c60$0401a8c0@charis>
Message-ID: <Pine.LNX.4.21.0011132153470.3701-100000@saturn.ispol.com>

I used gd with nsapy on a windows machine in 1997 and it was very very
fast (considering computers were slow back then). Yahoo uses it on their
quotes.yahoo.com of all other tools, mrtg uses it, it's probably the
fastest thign out there.

The things that are the slowest are repetetive operations that involve
memory allocations - e.g. if you're building some large list from the
ascii files one byte at a time and your ascii file is 90K, it will be
slow. You will see a big improvement if you only build the list once and
cache it inside a module somewhere. 

If your content is dynamic and cannot be cached, then try to avoid things
like readlines() of the whole file, then copying it some list. A much
faster solution is to read the file as you need the data avoiding all
unnecessary mallocs.

A database may make things faster - it very much depends on what you
do. For example if you try to process data in some way, i.e. sort or
select records, etc, then most definitely a database, especially if ran on
a separate server will give you an improvement. 

If you're just using it as flat file storage, then it will be about as
fast as a file, perhaps a little slower.

mod_python interpreter lives as long the as the apache process (or in case
of win32 thread) lives. The simplest way to cache data is to use the
Python "import" mechanism - make a module that reads all your ascii files,
then import it from a script. Python only imports once the first time and
ignores all subsequent requests - perfect for caching.

HTH

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Tue, 14 Nov 2000, Alexis Iglauer wrote:

> This may be the wrong forum for this, but......
> 
> I am writing an app which takes data out of text files and makes graphs.
> The user interactively specifies the graphs in a browser, with everything
> being done in Python as a handler.  The resulting page can have 10+ graphs
> on it.
> 
> Problem is, my solution is sloooooow.  I am using gdchart to generate the
> graphs on the fly (<img src="grph.py?color=0x0000ff" alt="xxx"> and plain
> vanilla python for the rest.
> 
> I am not sure whether reading the ASCII files is slow and whether sticking
> them into a database will be worth the effort (ideas, anyone?).  I get some
> advantage when running apache single-threaded by checking whether my data is
> already loaded, but as soon as I run apache normally this advantage
> disappears.
> 
> I think the bottleneck is creating the graph, and in trying to solve that I
> have a few questions regarding how mod_python works.  How long does an
> instance of mod_python exist?  When is an instance destroyed?  What data can
> be passed from one instance to the next?  Also, does anyone have any ideas
> on how to efficiently generate graphs from a reasonably large number of
> datapoints?
> 
> Thanks in advance
> Alexis
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From aiglauer at yahoo.com  Tue Nov 14 02:45:56 2000
From: aiglauer at yahoo.com (Alexis Iglauer)
Date: Fri Jan  9 21:46:06 2004
Subject: [mod_python] Graphs in a webpage
Message-ID: <20001114104556.24954.qmail@web2205.mail.yahoo.com>

First of all, thank you to everyone for the pointers.
 
> I used gd with nsapy on a windows machine in 1997

Will check it out, thanks....

> The things that are the slowest are repetetive
> operations that involve
> memory allocations - e.g. if you're building some
> large list from the
> ascii files one byte at a time and your ascii file
> is 90K, it will be
> slow. You will see a big improvement if you only
> build the list once and
> cache it inside a module somewhere. 
> 

I am using the following construct often:

i = open (datafile)
l = i.readlines()
i.close()

on 200KB+ files - looks like that could be the problem
:)  Is it more efficient to loop using

for l in i.readlines():      ?

My datafiles are time series data, usually for 24
hours at a time, so I will have a whole bunch of
datafiles which make up a contiguous set of data over
several days/months/years.  The last datafile will
probably always be growing.  A two-stage caching
module may do the trick.

> If your content is dynamic and cannot be cached,
> then try to avoid things
> like readlines() of the whole file, then copying it
> some list. A much
> faster solution is to read the file as you need the
> data avoiding all
> unnecessary mallocs.
 

This seems to answer my question above in the
positive.  I will however still be reading all my
datafiles every time.

> Python "import" mechanism - make a module that reads
> all your ascii files,
> then import it from a script. Python only imports
> once the first time and
> ignores all subsequent requests - perfect for
> caching.

Does "first time" here mean the first time apache is
started or the first time an apache process is
(re)started?

> HTH

Yup, thanks
aei 




__________________________________________________
Do You Yahoo!?
Yahoo! Calendar - Get organized for the holidays!
http://calendar.yahoo.com/

From grisha at ispol.com  Tue Nov 14 10:22:48 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:46:06 2004
Subject: [mod_python] Graphs in a webpage
In-Reply-To: <20001114104556.24954.qmail@web2205.mail.yahoo.com>
Message-ID: <Pine.LNX.4.21.0011141015370.5926-100000@saturn.ispol.com>

On Tue, 14 Nov 2000, Alexis Iglauer wrote:
> 
> First of all, thank you to everyone for the pointers.
>  
> > I used gd with nsapy on a windows machine in 1997
> 
> Will check it out, thanks....

You're using it already.

> My datafiles are time series data, usually for 24
> hours at a time, so I will have a whole bunch of
> datafiles which make up a contiguous set of data over
> several days/months/years.

Sounds like you need a function that checks the file modification dat and
reads it only if it has been changed.

>  The last datafile will probably always be growing.  A two-stage
> caching module may do the trick.

I don't know what you're doing there, but I suspect you may benefit
from RRDTool (http://ee-staff.ethz.ch/~oetiker/webtools/rrdtool/)

> > Python "import" mechanism - make a module that reads all your
> > ascii files,
> 
> Does "first time" here mean the first time apache is started or the
> first time an apache process is (re)started?

It would be whenever that import statement is executed, which usually is
at the first hit after apache was (re) started. There is also a
PythonImport directive, which will allow you to do this at process start
up time rather than the first hit, but PythonImport has some caveats (read
the docs)

Grisha


From gps at trix.dircon.co.uk  Wed Nov 15 19:56:52 2000
From: gps at trix.dircon.co.uk (Graham Swallow)
Date: Fri Jan  9 21:46:06 2004
Subject: [mod_python] Re: Graphs in a webpage
In-Reply-To: <200011151200.MAA02390@mercury.ispol.com>
Message-ID: <Pine.LNX.4.04.10011151937590.752-100000@trix.dircon.co.uk>

On Tue, 14 Nov 2000, Alexis Iglauer wrote:

> My datafiles are time series data, usually for 24
> hours at a time, so I will have a whole bunch of
> datafiles which make up a contiguous set of data over
> several days/months/years.

	I have a similar situation, but not in apache_mod.  The data is
	an array of floats (binary portable), one every minute for a week,
	over the year.

	Repackaging last weeks data is slow, but you dont do that for
	every request.

	I use Array to get it as a string, then I use zlib to get a string,
	then I 'escape' the data for MySql (using the standard function)
	and write it into a blob field.

	The data comes back with no need for un-escaping (its so that it
	goes into an SQL statement).

	Then I call a C function to convert the floats to doubles and
	create a BLT/Vector. Its very quick.

	Using GD (or whatever) should not be slow, but a bit of C at the
	right place means you move chunks of data around, not iterate
	python over thousands of items.

	The 'most recent' file obviously needs special treatment.
	You could re-process today every hour (hint: move, start new file,
	then process the moved file, if fail - dont delete).

	That still leaves you with a 'double' data source, first SQL, then
	the additional file.  Alternatively, get the data collector to
	post the data ...

	Graham


From grisha at ispol.com  Wed Nov 15 21:35:42 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:46:06 2004
Subject: [mod_python] Re: Graphs in a webpage
In-Reply-To: <Pine.LNX.4.04.10011151937590.752-100000@trix.dircon.co.uk>
Message-ID: <Pine.LNX.4.21.0011152134060.11986-100000@saturn.ispol.com>

This is somewhat off-subject, but IMHO the best tool for time-series data
storing and charting is RRDtool. It can produce charts for a year of data
in a split second.

Grisha

On Wed, 15 Nov 2000, Graham Swallow wrote:

> On Tue, 14 Nov 2000, Alexis Iglauer wrote:
> 
> > My datafiles are time series data, usually for 24
> > hours at a time, so I will have a whole bunch of
> > datafiles which make up a contiguous set of data over
> > several days/months/years.
> 
> 	I have a similar situation, but not in apache_mod.  The data is
> 	an array of floats (binary portable), one every minute for a week,
> 	over the year.
> 
> 	Repackaging last weeks data is slow, but you dont do that for
> 	every request.
> 
> 	I use Array to get it as a string, then I use zlib to get a string,
> 	then I 'escape' the data for MySql (using the standard function)
> 	and write it into a blob field.
> 
> 	The data comes back with no need for un-escaping (its so that it
> 	goes into an SQL statement).
> 
> 	Then I call a C function to convert the floats to doubles and
> 	create a BLT/Vector. Its very quick.
> 
> 	Using GD (or whatever) should not be slow, but a bit of C at the
> 	right place means you move chunks of data around, not iterate
> 	python over thousands of items.
> 
> 	The 'most recent' file obviously needs special treatment.
> 	You could re-process today every hour (hint: move, start new file,
> 	then process the moved file, if fail - dont delete).
> 
> 	That still leaves you with a 'double' data source, first SQL, then
> 	the additional file.  Alternatively, get the data collector to
> 	post the data ...
> 
> 	Graham
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From octos at austin.rr.com  Sun Nov 19 16:55:01 2000
From: octos at austin.rr.com (Eric Adam)
Date: Fri Jan  9 21:46:06 2004
Subject: [mod_python] Modules?
Message-ID: <4.3.2.7.2.20001119165253.00d37d00@pop-server>

Is there a source of user-built modules for use with mod_python?

I'm looking for a module that will present the contents of a POST in 
dictionary or similar form and would rather not re-invent the wheel.

Thanks.



From benno at sesgroup.net  Mon Nov 20 10:13:18 2000
From: benno at sesgroup.net (Ben Leslie)
Date: Fri Jan  9 21:46:06 2004
Subject: [mod_python] Modules?
In-Reply-To: <4.3.2.7.2.20001119165253.00d37d00@pop-server>; from octos@austin.rr.com on Sun, Nov 19, 2000 at 04:55:01PM -0600
References: <4.3.2.7.2.20001119165253.00d37d00@pop-server>
Message-ID: <20001120101318.A25682@bob.sesgroup.net>

On Sun, 19 Nov 2000, Eric Adam wrote:

> Is there a source of user-built modules for use with mod_python?
> 
> I'm looking for a module that will present the contents of a POST in 
> dictionary or similar form and would rather not re-invent the wheel.
> 

Check out the cgi handler in the python core. It has a lot of useful 
things like this.

Cheers,

Benno

From grisha at ispol.com  Sun Nov 19 20:48:58 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:46:06 2004
Subject: [mod_python] Modules?
In-Reply-To: <4.3.2.7.2.20001119165253.00d37d00@pop-server>
Message-ID: <Pine.LNX.4.21.0011192044580.4402-100000@saturn.ispol.com>

The next version of mod_python will have a module called mod_python.util
that does just that. If you can't wait until the next version, you can
pull it off sourceforge CVS
http://cvs.sourceforge.net/cgi-bin/cvsweb.cgi/~checkout~/mod_python/lib/python/mod_python/util.py?rev=1.1&content-type=text/plain&cvsroot=modpython

(this is very beta code, of course)

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Sun, 19 Nov 2000, Eric Adam wrote:

> Is there a source of user-built modules for use with mod_python?
> 
> I'm looking for a module that will present the contents of a POST in 
> dictionary or similar form and would rather not re-invent the wheel.
> 
> Thanks.
> 
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From ftian at cs.wisc.edu  Mon Nov 20 01:19:32 2000
From: ftian at cs.wisc.edu (Feng Tian)
Date: Fri Jan  9 21:46:06 2004
Subject: [mod_python] Help on installation
Message-ID: <Pine.LNX.3.96L.1001120011504.27742A-100000@cobra.cs.wisc.edu>

Hi,

I am trying to get mod_python working on linux RedHat 6.2
I downloaded an RPM, and configed httpd.conf

The error log of httpd says
 
could not import mod_python.apache
could not call init

I tried to import mod_python.apache from an interactive
python shell, and got message 
_apache 
is missing.

What's the problem?  Fix?

Thanks.

Feng



From thepoet at texas.net  Tue Nov 21 08:21:25 2000
From: thepoet at texas.net (thepoet@texas.net)
Date: Fri Jan  9 21:46:06 2004
Subject: [mod_python] Q : persistent objects/vars
Message-ID: <200011211421.IAA02649@mw2.texas.net>

I've sifted through all the relevant documentation
and the mailing list archives, so please excuse this
email if there happens to be any repitition.

As I understand it, when the apache server starts up,
python is called and the directory in which I've placed
my files receives a subinterpreter.  In attempting to
persist an object, would it be as simple as making a
variable 'global' (would all processes know of the global
no matter what since it is in the same subint and that
subint is persistent across processes?), or must
I attempt to use one of the funcs from the apache module
itself like req (which according to the list is now a persistent
python object).  And if I were to use req, how would I
make sure that every instance of my script that is handled
by the subint can r-w that variable (say, a list of items)
and might there be an example of how to do this?  (I have
tried globals and req. without much luck). Thanks
in advance for any help you might be able to offer...and
kudos to the mod_python authors!

-Rick


From miguel at yorku.ca  Tue Nov 21 11:01:03 2000
From: miguel at yorku.ca (Miguel Marques)
Date: Fri Jan  9 21:46:06 2004
Subject: [mod_python] UNIQUE_ID from mod_python...
Message-ID: <20001121110103M.miguel@yorku.ca>

Greetings...

I need to access the unique id produced by mod_unique_id.  It gets set
as an environment variable for CGI scripts but not by the looks of it
for python scripts (I don't see it in os.environ).  I'm not all that
familiar with Apache internals so maybe there's something I'm missing.
If anyone has any idea on whether or not I can get the unique_id variable
please let me know.
Thanks for any input.

						Miguel

C. Miguel Marques, York University, Computing & Network Services
e-mail: miguel@yorku.ca, voice: (416)736-2100x22684, fax: (416)736-5830

From miguel at yorku.ca  Tue Nov 21 11:29:01 2000
From: miguel at yorku.ca (Miguel Marques)
Date: Fri Jan  9 21:46:06 2004
Subject: [mod_python] UNIQUE_ID from mod_python...
In-Reply-To: <20001121110103M.miguel@yorku.ca>
References: <20001121110103M.miguel@yorku.ca>
Message-ID: <20001121112901O.miguel@yorku.ca>

On Tue, 21 Nov 2000 11:01:03 -0500, Miguel Marques <miguel@yorku.ca> wrote:
> Greetings...
> 
> I need to access the unique id produced by mod_unique_id.  It gets set
> as an environment variable for CGI scripts but not by the looks of it
> for python scripts (I don't see it in os.environ).  I'm not all that
> familiar with Apache internals so maybe there's something I'm missing.
> If anyone has any idea on whether or not I can get the unique_id variable
> please let me know.
> Thanks for any input.

Never mind.
I was missing something.
It's in request.subprocess_env which actually should had been obvious
to me after I looked at the source code for unique_id.
Sigh...

							Miguel

C. Miguel Marques, York University, Computing & Network Services
e-mail: miguel@yorku.ca, voice: (416)736-2100x22684, fax: (416)736-5830


From grisha at ispol.com  Tue Nov 21 16:45:44 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:46:06 2004
Subject: [mod_python] Q : persistent objects/vars
In-Reply-To: <200011211421.IAA02649@mw2.texas.net>
Message-ID: <Pine.LNX.4.21.0011211644520.11647-100000@saturn.ispol.com>

I'm afraid mod_python does not provide any interprocess communication. To
communicate between processes you would have to use sockets or something
like that.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Tue, 21 Nov 2000 thepoet@texas.net wrote:

> I've sifted through all the relevant documentation
> and the mailing list archives, so please excuse this
> email if there happens to be any repitition.
> 
> As I understand it, when the apache server starts up,
> python is called and the directory in which I've placed
> my files receives a subinterpreter.  In attempting to
> persist an object, would it be as simple as making a
> variable 'global' (would all processes know of the global
> no matter what since it is in the same subint and that
> subint is persistent across processes?), or must
> I attempt to use one of the funcs from the apache module
> itself like req (which according to the list is now a persistent
> python object).  And if I were to use req, how would I
> make sure that every instance of my script that is handled
> by the subint can r-w that variable (say, a list of items)
> and might there be an example of how to do this?  (I have
> tried globals and req. without much luck). Thanks
> in advance for any help you might be able to offer...and
> kudos to the mod_python authors!
> 
> -Rick
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From grisha at ispol.com  Tue Nov 21 16:48:31 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:46:06 2004
Subject: [mod_python] UNIQUE_ID from mod_python...
In-Reply-To: <20001121110103M.miguel@yorku.ca>
Message-ID: <Pine.LNX.4.21.0011211646280.11647-100000@saturn.ispol.com>

If you're writing native mod_python handlers, then that id should be in
req.subprocess_env. If you're using cgihandler, you have no access to it,
since the CGI that the cgihandler emulates is 'fake', there is no forking
going on.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Tue, 21 Nov 2000, Miguel Marques wrote:

> Greetings...
> 
> I need to access the unique id produced by mod_unique_id.  It gets set
> as an environment variable for CGI scripts but not by the looks of it
> for python scripts (I don't see it in os.environ).  I'm not all that
> familiar with Apache internals so maybe there's something I'm missing.
> If anyone has any idea on whether or not I can get the unique_id variable
> please let me know.
> Thanks for any input.
> 
> 						Miguel
> 
> C. Miguel Marques, York University, Computing & Network Services
> e-mail: miguel@yorku.ca, voice: (416)736-2100x22684, fax: (416)736-5830
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From sahrens at uv.ruhr-uni-bochum.de  Fri Nov 24 18:09:04 2000
From: sahrens at uv.ruhr-uni-bochum.de (sa)
Date: Fri Jan  9 21:46:06 2004
Subject: [mod_python] please help...
Message-ID: <3A1EA0AF.818C1DD4@uv.ruhr-uni-bochum.de>

Hi folks,
I got the script which runs perfect on my linuxbox as long as it?s not
running inside mod_python. Below I show you the mod_python version that
is producing the error code you can see on the bottom of this mail. As I
am new to mod_python but can still remember such strange effects when
playing with mod_perl for the first time some years ago I think it?s
time for some guru?s advice
Maybe I didn?t get any global restrictions (like always using the strict
pragma under mod_perl) so far. Please give some hint where to look
further

    thanks a lot

            Sebastian

------the script------

from mod_python import apache
import string, os, re
import xml.dom.ext
from xml.xslt import XsltException
from xml.xslt.Processor import Processor


sheet = """
        <xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns="http://www.w3.org/TR/xhtml1/strict">

          <xsl:template match="main">
            <html><head>ein test</head><body>
                    <hr/>
                    <b><xsl:value-of select="/main/test"/></b>
                    <em><xsl:value-of select="/main/testBody"/></em>
            </body></html>
          </xsl:template>

        <xsl:apply-templates/>
        </xsl:stylesheet>
        """

def handler(req):
    req.content_type = "text/plain"
    req.send_http_header()
    the_req_file = req.the_request
    a = string.split(the_req_file, " ")
    tmp_file = string.split(a[1], "?")
    file_name = tmp_file[1]
    path_prefix = "/var/www"
    path = path_prefix+file_name
    raw_data = open(path).read()

    processor = xml.xslt.Processor.Processor()
    processor.appendStylesheetString(sheet)
    result = processor.runString(raw_data, ignorePis=1)
    req.write(result)
    return apache.OK


------- the error ---------


> Mod_python error: "PythonHandler xmlhandler"
>
> Traceback (innermost last):
>
>   File "/usr/lib/python1.5/site-packages/mod_python/apache.py", line 175, in Dispatch
>     module = import_module(module_name, _req)
>
>   File "/usr/lib/python1.5/site-packages/mod_python/apache.py", line 316, in import_module
>     module = __import__(module_name)
>
>   File "/var/www/xml/xmlhandler.py", line 3, in ?
>     import xml.dom.ext
>
>   File "/usr/lib/python1.5/site-packages/xml/dom/__init__.py", line 41, in ?
>     from xml.dom.html import HTMLDOMImplementation
>
>   File "/usr/lib/python1.5/site-packages/xml/dom/html/__init__.py", line 281, in ?
>     g_numCharEntityPattern = re.compile('?(\d+);')
>
>   File "/usr/lib/python1.5/re.py", line 79, in compile
>     code=pcre_compile(pattern, flags, groupindex)
>
> pcre.error: ('unmatched parentheses', 208)
>





-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20001124/a648c98d/attachment.htm
From grisha at ispol.com  Fri Nov 24 14:38:03 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:46:06 2004
Subject: [mod_python] please help...
In-Reply-To: <3A1EA0AF.818C1DD4@uv.ruhr-uni-bochum.de>
Message-ID: <Pine.LNX.4.21.0011241435090.22236-100000@saturn.ispol.com>

This error has something to do with a mismatch of pcre (regular
expression) libraries. AFAIK there is a version that is not backwards
compatible. You probably have one version linked in by virtue of using
some module which uses pcre (e.g. mod_php) and Python expects another
version.

It's hard to tell what the exact solution is, but would try pursuing that
line and see where it takes you.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Fri, 24 Nov 2000, sa wrote:

> Hi folks,
> I got the script which runs perfect on my linuxbox as long as it?s not
> running inside mod_python. Below I show you the mod_python version that
> is producing the error code you can see on the bottom of this mail. As I
> am new to mod_python but can still remember such strange effects when
> playing with mod_perl for the first time some years ago I think it?s
> time for some guru?s advice
> Maybe I didn?t get any global restrictions (like always using the strict
> pragma under mod_perl) so far. Please give some hint where to look
> further
> 
>     thanks a lot
> 
>             Sebastian
> 
> ------the script------
> 
> from mod_python import apache
> import string, os, re
> import xml.dom.ext
> from xml.xslt import XsltException
> from xml.xslt.Processor import Processor
> 
> 
> sheet = """
>         <xsl:stylesheet version="1.0"
> xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
> xmlns="http://www.w3.org/TR/xhtml1/strict">
> 
>           <xsl:template match="main">
>             <html><head>ein test</head><body>
>                     <hr/>
>                     <b><xsl:value-of select="/main/test"/></b>
>                     <em><xsl:value-of select="/main/testBody"/></em>
>             </body></html>
>           </xsl:template>
> 
>         <xsl:apply-templates/>
>         </xsl:stylesheet>
>         """
> 
> def handler(req):
>     req.content_type = "text/plain"
>     req.send_http_header()
>     the_req_file = req.the_request
>     a = string.split(the_req_file, " ")
>     tmp_file = string.split(a[1], "?")
>     file_name = tmp_file[1]
>     path_prefix = "/var/www"
>     path = path_prefix+file_name
>     raw_data = open(path).read()
> 
>     processor = xml.xslt.Processor.Processor()
>     processor.appendStylesheetString(sheet)
>     result = processor.runString(raw_data, ignorePis=1)
>     req.write(result)
>     return apache.OK
> 
> 
> ------- the error ---------
> 
> 
> > Mod_python error: "PythonHandler xmlhandler"
> >
> > Traceback (innermost last):
> >
> >   File "/usr/lib/python1.5/site-packages/mod_python/apache.py", line 175, in Dispatch
> >     module = import_module(module_name, _req)
> >
> >   File "/usr/lib/python1.5/site-packages/mod_python/apache.py", line 316, in import_module
> >     module = __import__(module_name)
> >
> >   File "/var/www/xml/xmlhandler.py", line 3, in ?
> >     import xml.dom.ext
> >
> >   File "/usr/lib/python1.5/site-packages/xml/dom/__init__.py", line 41, in ?
> >     from xml.dom.html import HTMLDOMImplementation
> >
> >   File "/usr/lib/python1.5/site-packages/xml/dom/html/__init__.py", line 281, in ?
> >     g_numCharEntityPattern = re.compile('?(\d+);')
> >
> >   File "/usr/lib/python1.5/re.py", line 79, in compile
> >     code=pcre_compile(pattern, flags, groupindex)
> >
> > pcre.error: ('unmatched parentheses', 208)
> >
> 
> 
> 
> 
> 
> 


From fschwiet at u.washington.edu  Fri Nov 24 12:22:24 2000
From: fschwiet at u.washington.edu (F. Schwieterman)
Date: Fri Jan  9 21:46:06 2004
Subject: [mod_python] Newbie says: "What and where is this ./configure script?"
Message-ID: <Pine.A41.4.21.0011241219200.66722-100000@dante59.u.washington.edu>

  I'm running Mandrake 7.2, with apache, python, mod_python all installed
from RPMs.  Apache 1.3.14, Python 1.5.2.

  The mod_python RPM installed a mod_python.so but not mod_python.c .  
Apache makes a complaint about mod_python.so and the installed
instructions say I have to build it anyhow so I assume I can't use this
.so.

  Thanks much.


From sahrens at uv.ruhr-uni-bochum.de  Sat Nov 25 13:24:45 2000
From: sahrens at uv.ruhr-uni-bochum.de (sa)
Date: Fri Jan  9 21:46:06 2004
Subject: [mod_python] please help...
References: <Pine.LNX.4.21.0011241435090.22236-100000@saturn.ispol.com>
Message-ID: <3A1FAF8D.2600DDAC@uv.ruhr-uni-bochum.de>

Gregory Trubetskoy wrote:

> This error has something to do with a mismatch of pcre (regular
> expression) libraries. AFAIK there is a version that is not backwards
> compatible. You probably have one version linked in by virtue of using
> some module which uses pcre (e.g. mod_php) and Python expects another
> version.
>

Hey man thanks a lot, it was just one '#' for the mod_php line in the httpd.conf and everything
ins working fine...


From ken at kenkinder.com  Sun Nov 26 01:17:26 2000
From: ken at kenkinder.com (Ken Kinder)
Date: Fri Jan  9 21:46:06 2004
Subject: [mod_python] compile problem
Message-ID: <20001126011726.A1489@kenkinder.com>

The odd thing is, on my Red Hat 7 Linux, this works fine, but on a Debian
2.1 box, it doesn't work. Here's what happens:

The error happened on make. Here's my configure command:

./configure --with-apache=../apache_1.3.14 --with-apxs=/usr/local/apache/bin/apxs

and make was make dso:

In file included from /usr/local/src/apache_1.3.14/src/include/ap_config.h:76,
                 from /usr/local/src/apache_1.3.14/src/include/httpd.h:71,
                 from /usr/local/src/mod_python-2.6.3/src/include/mod_python.h:85,
                 from mod_python.c:61:
/usr/local/src/apache_1.3.14/src/include/ap_config_auto.h:6: unterminated `#if' conditional
make[1]: *** [mod_python.o] Error 1
make[1]: Leaving directory `/usr/local/src/mod_python-2.6.3/src'
make: *** [do_dso] Error 2


-- 
Ken Kinder
www.kenkinder.com

From ken at rage.x13.com  Sun Nov 26 15:15:10 2000
From: ken at rage.x13.com (Ken Kinder)
Date: Fri Jan  9 21:46:06 2004
Subject: [mod_python] runtime error
Message-ID: <20001126151510.B14740@kenkinder.com>

I just got a new fresh copy of Apache, mod_ssl, mod_php, and some other fun stuff. All are from tarball. This is Debian/GNU Linux 2.2 (potato). I know
that mod_python is compiled into apache:

$ nm /usr/local/apache/bin/httpd | grep python
0810d5e1 b lib_python
08056754 T python_cleanup
08057788 T python_cleanup_handler
080f907c D python_commands
08056c5c t python_create_dir_config
08058890 t python_decref
08056f24 t python_directive
08058254 T python_finalize
08057200 t python_handler
080f906c d python_handlers
080f9064 d python_imports
08056b88 T python_init
08056dac t python_merge_dir_config
080f92c0 D python_module

But it doesn't seem to know about the directives that mod_python ads. I have this inside a virtualhost directive:

<Directory /home/staff/ken/public_html/static>
          AllowOverride FileInfo
          AddHandler python-program .py
          PythonHandler foo
          PythonDebug On
</Directory>

and when I try to do a configtest with apache, I get:

$ sudo /usr/local/apache/bin/apachectl configtest
Syntax error on line 1138 of /usr/local/apache/conf/httpd.conf:
Invalid command 'PythonHandler', perhaps mis-spelled or defined by a module not included in the server configuration

Any words of wisdom?

-- 
Ken Kinder
www.kenkinder.com

From peter at wslogic.com  Mon Nov 27 18:32:26 2000
From: peter at wslogic.com (peter@wslogic.com)
Date: Fri Jan  9 21:46:06 2004
Subject: [mod_python] problems with RH 7 RPM
Message-ID: <3A22EF0A.7DE907E0@wslogic.com>

has anyone had any problems with the Red Hat 7 and using the RPM.  When
I install the RPM it kills my httpd, and it won't work until I uninstall
mod_python?


-- 
Peter Halliday

From miguel at yorku.ca  Wed Nov 29 15:00:44 2000
From: miguel at yorku.ca (Miguel Marques)
Date: Fri Jan  9 21:46:06 2004
Subject: [mod_python] Problem with req.connection.user being readonly...
Message-ID: <20001129150044Z.miguel@yorku.ca>

Greetings...

I've rewritten a authentication handler I had written in mod_perl in
mod_python.   The handler does not use basic auth for authentication.
It uses it's own html form and then a cookie gets set which is checked
by the access handler.  This is a generic authentication handler which
I use to control access to a number of different applications. 

Most of those applications don't need req.connection.user (they look
at the cookie) but today I tried to migrate one that does.  Since
req.connection.user is read only I can't make things work.  In
mod_perl one simply assigns to that variable.  Is there any reason why
req.connection.user can't be made read/write?  
Thanks for any suggestions...

							Miguel

C. Miguel Marques, York University, Computing & Network Services
e-mail: miguel@yorku.ca, voice: (416)736-2100x22684, fax: (416)736-5830

From grisha at ispol.com  Wed Nov 29 16:22:48 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:46:06 2004
Subject: [mod_python] Problem with req.connection.user being readonly...
In-Reply-To: <20001129150044Z.miguel@yorku.ca>
Message-ID: <Pine.LNX.4.21.0011291622230.18389-100000@saturn.ispol.com>

I'll see about making it read/write in the next release.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Wed, 29 Nov 2000, Miguel Marques wrote:

> Greetings...
> 
> I've rewritten a authentication handler I had written in mod_perl in
> mod_python.   The handler does not use basic auth for authentication.
> It uses it's own html form and then a cookie gets set which is checked
> by the access handler.  This is a generic authentication handler which
> I use to control access to a number of different applications. 
> 
> Most of those applications don't need req.connection.user (they look
> at the cookie) but today I tried to migrate one that does.  Since
> req.connection.user is read only I can't make things work.  In
> mod_perl one simply assigns to that variable.  Is there any reason why
> req.connection.user can't be made read/write?  
> Thanks for any suggestions...
> 
> 							Miguel
> 
> C. Miguel Marques, York University, Computing & Network Services
> e-mail: miguel@yorku.ca, voice: (416)736-2100x22684, fax: (416)736-5830
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From miguel at yorku.ca  Wed Nov 29 17:53:24 2000
From: miguel at yorku.ca (Miguel Marques)
Date: Fri Jan  9 21:46:06 2004
Subject: [mod_python] Problem with req.connection.user being readonly...
In-Reply-To: <Pine.LNX.4.21.0011291622230.18389-100000@saturn.ispol.com>
References: <20001129150044Z.miguel@yorku.ca>
	<Pine.LNX.4.21.0011291622230.18389-100000@saturn.ispol.com>
Message-ID: <20001129175324S.miguel@yorku.ca>

On Wed, 29 Nov 2000 16:22:48 -0500 (EST), Gregory Trubetskoy <grisha@ispol.com> wrote:
> 
> I'll see about making it read/write in the next release.
> 
But, I was hoping you would say that you did that yesterday and I
should get mod_python from CVS.  ;-)

I needed to get this to work by tommorow so here's a diff in case it
might be useful to you.  Seems to work and not crash anything.
I just added it as method of the request object.

begin 660 user.diff
M*BHJ(')E<75E<W1O8FIE8W0N8PDR,# P+S$Q+S(Y(#(Q.C,Y.C,Q"3$N,0HM
M+2T@<F5Q=65S=&]B:F5C="YC"3(P,# O,3$O,CD@,C(Z,#$Z,#$**BHJ*BHJ
M*BHJ*BHJ*BHJ"BHJ*B V,S$L-C,V("HJ*BH*+2TM(#8S,2PV-3,@+2TM+0H@
M( H@('T*(" **R O*@HK(" J(')E<75E<W0N<V5T7V-O;FYE8W1I;VY?=7-E
M<BAR97%U97-T('-E;&8L('-T<FEN9R!U<V5R*0HK(" J"BL@("H@(" @($%L
M;&]W<R!S971T:6YG(&]F(')E<2T^8V]N;F5C=&EO;BT^=7-E<B!T;R!U<V5R
M('!A<F%M971E<@HK(" J+PHK('-T871I8R!0>4]B:F5C=" J<F5Q7W-E=%]C
M;VYN96-T:6]N7W5S97(H<F5Q=65S=&]B:F5C=" J<V5L9BP@4'E/8FIE8W0@
M*F%R9W,I"BL@>PHK(" @("!C:&%R("IT:&5U<V5R.PHK( HK(" @("!I9B H
M(2!0>4%R9U]087)S951U<&QE*&%R9W,L(")S(BP@)G1H975S97(I*2 **R @
M(" @(" @(')E='5R;B!.54Q,.PHK(" @(" **R @(" @<V5L9BT^<F5Q=65S
M=%]R96,M/F-O;FYE8W1I;VXM/G5S97(@/2!A<%]P<W1R9'5P*'-E;&8M/G)E
M<75E<W1?<F5C+3YP;V]L+"!T:&5U<V5R*3L**R @(" @4'E?24Y#4D5&*%!Y
M7TYO;F4I.PHK(" @("!R971U<FX@4'E?3F]N93L**R!]"BL@"B @<W1A=&EC
M(%!Y365T:&]D1&5F(')E<75E<W1O8FIE8W1M971H;V1S6UT@/2!["B @(" @
M('LB861D7V-O;6UO;E]V87)S(BP@(" @(" H4'E#1G5N8W1I;VXI(')E<5]A
M9&1?8V]M;6]N7W9A<G,L(" @(" @34542%]605)!4D=3?2P*(" @(" @>R)A
M9&1?:&%N9&QE<B(L(" @(" @(" @("A0>4-&=6YC=&EO;BD@<F5Q7V%D9%]H
M86YD;&5R+" @(" @(" @("!-151(7U9!4D%21U-]+ HJ*BHJ*BHJ*BHJ*BHJ
M*BH**BHJ(#8T-BPV-3$@*BHJ*@HM+2T@-C8S+#8V.2 M+2TM"B @(" @('LB
M<F5G:7-T97)?8VQE86YU<"(L(" @(" H4'E#1G5N8W1I;VXI(')E<5]R96=I
M<W1E<E]C;&5A;G5P+" @(" @34542%]605)!4D=3?2P*(" @(" @>R)S96YD
M7VAT='!?:&5A9&5R(BP@(" @("A0>4-&=6YC=&EO;BD@<F5Q7W-E;F1?:'1T
M<%]H96%D97(L(" @("!-151(7U9!4D%21U-]+ H@(" @("![(G=R:71E(BP@
M(" @(" @(" @(" @(" @*%!Y0T9U;F-T:6]N*2!R97%?=W)I=&4L(" @(" @
M(" @(" @(" @($U%5$A?5D%205)'4WTL"BL@(" @('LB<V5T7V-O;FYE8W1I
M;VY?=7-E<B(L(" H4'E#1G5N8W1I;VXI(')E<5]S971?8V]N;F5C=&EO;E]U
M<V5R+" @34542%]605)!4D=3?2P*(" @(" @>R!.54Q,+"!.54Q,('T@+RH@
4<V5N=&EN96P@*B\*("!].PH@( H*
 
end

Take care.

						Miguel

C. Miguel Marques, York University, Computing & Network Services
e-mail: miguel@yorku.ca, voice: (416)736-2100x22684, fax: (416)736-5830

From marknen at usa.net  Thu Nov  2 09:47:50 2000
From: marknen at usa.net (Mark Nenadov)
Date: Fri Jan  9 21:52:10 2004
Subject: [mod_python] (no subject)
Message-ID: <20001102144750.2386.qmail@nwcst291.netaddress.usa.net>

Hello all! I have a problem. I have attempted to install 'mod_python' on my
Windows 98 (4.10.1998) machine using the instructions that are given at
"http://www.modpython.org/live/mod_python-2.6/doc/windows.html".

When I start up my Apache server it gives me the following output:

   'import exceptions' failed; use -v for traceback
   Warning!  Falling back to string-based exceptions
   'import site' failed; use -v for traceback
   Apache/1.3.11 (Win32) mod_python/2.6 Python/1.5.2 running...
   'import exceptions' failed; use -v for traceback
   Warning!  Falling back to string-based exceptions
   'import site' failed; use -v for traceback

I am running Apache version 1.3.11 for Win32. I am using the Python code given
in the example for installing mod_python for Windows. I have ActivePython 2.0
(build 202) based on Python 2.0. That is the first "potential problem" that
comes to mind. When the documentation gives the requirement of "Python 1.5.2",
does it require that version specifically, or does it just mean 1.5.2 or
greater? 

I can easily switch back to 1.5.2 if thats what its going to take to make this
work. However, elsewhere on modpython.org it says : "At this time, mod_python
works with Python 1.5.2, 1.6 and 2.0".

From grisha at ispol.com  Thu Nov  2 10:52:30 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:10 2004
Subject: [mod_python] (no subject)
In-Reply-To: <20001102144750.2386.qmail@nwcst291.netaddress.usa.net>
Message-ID: <Pine.LNX.4.21.0011021049570.17431-100000@saturn.ispol.com>

I just put another DLL on the site compiled with Python 2.0 see if that
works. Also note that the 2.6 windows instructions had a typo in them in
the last step of "installing mod_python libraries". I updated the link on
the website to point to
http://www.modpython.org/live/mod_python-2.6.3/doc/windows.html

P.S. Why don't you use a real operating system? ;-)

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On 2 Nov 2000, Mark Nenadov wrote:

> Hello all! I have a problem. I have attempted to install 'mod_python' on my
> Windows 98 (4.10.1998) machine using the instructions that are given at
> "http://www.modpython.org/live/mod_python-2.6/doc/windows.html".


From jjp at connix.com  Thu Nov  2 12:00:54 2000
From: jjp at connix.com (John Posner)
Date: Fri Jan  9 21:52:10 2004
Subject: [mod_python] Virtual documents and mod_python
Message-ID: <001d01c044ee$772ae920$6e64fea9@jake>

Hi --

I've been successful using this technique to get a Python script to handle a
standard HTTP request:

<Directory <Document Root>/python>
  AddHandler python-program .py
  PythonHandler test
  PythonDebug on
</Directory>

But I don't want or need to create an actual directory containing the Python
script. I'd like to create a virtual document location:

<Location <Document Root>/py_xmlrpc>
  SetHandler python-script
  PythonHandler py_xmlrpc
</Location>

I've used this technique successfully with Perl, but it doesn't work with
Python. Apache thinks it's a request for a real document. And fooling around
with relative/absolute specs as the Location parameter doesn't make any
difference.

Can anyone help?

Tx,
John

--
John Posner, Editor           jjp@oreilly.com
O'Reilly & Associates         860-663-3147


From grisha at ispol.com  Thu Nov  2 17:50:27 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:10 2004
Subject: [mod_python] Virtual documents and mod_python
In-Reply-To: <001d01c044ee$772ae920$6e64fea9@jake>
Message-ID: <Pine.LNX.4.21.0011021736010.18432-100000@saturn.ispol.com>

It should work just fine. The only catch is that since <location>
directives have no physical path associated with them, you have to
make sure that your sripts are in PythonPath.

What problem are you having?

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Thu, 2 Nov 2000, John Posner wrote:

> Hi --
> 
> I've been successful using this technique to get a Python script to handle a
> standard HTTP request:
> 
> <Directory <Document Root>/python>
>   AddHandler python-program .py
>   PythonHandler test
>   PythonDebug on
> </Directory>
> 
> But I don't want or need to create an actual directory containing the Python
> script. I'd like to create a virtual document location:
> 
> <Location <Document Root>/py_xmlrpc>
>   SetHandler python-script
>   PythonHandler py_xmlrpc
> </Location>
> 
> I've used this technique successfully with Perl, but it doesn't work with
> Python. Apache thinks it's a request for a real document. And fooling around
> with relative/absolute specs as the Location parameter doesn't make any
> difference.
> 
> Can anyone help?
> 
> Tx,
> John
> 
> --
> John Posner, Editor           jjp@oreilly.com
> O'Reilly & Associates         860-663-3147
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From grisha at ispol.com  Thu Nov  2 18:30:43 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:10 2004
Subject: [mod_python] Virtual documents and mod_python
In-Reply-To: <3A01F325.F8B56ECD@infostreet.com>
Message-ID: <Pine.LNX.4.21.0011021828470.18644-100000@saturn.ispol.com>

Good catch! it *should* be python-program.

On Thu, 2 Nov 2000, Cameron La Rue wrote:
> 
> > > <Location <Document Root>/py_xmlrpc>
> > >   SetHandler python-script
> > >   PythonHandler py_xmlrpc
> > > </Location>
>
> I thought you had to say python-program, not python-script?


From dwallace at delanet.com  Fri Nov  3 21:54:59 2000
From: dwallace at delanet.com (Dave)
Date: Fri Jan  9 21:52:10 2004
Subject: [mod_python] Threaded Python and mod_python
Message-ID: <3A037A83.9070800@delanet.com>

Hi Greg,

I just downloaded the 2.6.3 version of mod_python and ran configure. In 
addition to checking my blood pressure ( a very nice feature, maybe 2.7 
can do a CAT scan), it reported the following warning:

****** WARNING ******
  Python is compiled with thread support. Apache 1.3 does not use threads.
  On some systems this will cause problems during compilation, on others
  it may result in unpredictable behaviour of your Apache server. Yet on
  others it will work just fine. The recommended approach is to compile
  Python without thread support in a separate location and specify it with
  --with-python option to this ./configure script.


It compiles and appears to work fine for me (Python 2.0, Apache 1.3.12, 
Linux 2.2.16), but of apparently this could bite at any time. Can you 
expound a little more on the nature of this problem and if there are 
other solutions than not having threads?

Dave.


From grisha at ispol.com  Fri Nov  3 23:04:16 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:10 2004
Subject: [mod_python] Threaded Python and mod_python
In-Reply-To: <3A037A83.9070800@delanet.com>
Message-ID: <Pine.LNX.4.21.0011032251040.23312-100000@saturn.ispol.com>

On Fri, 3 Nov 2000, Dave wrote:

> Hi Greg,
> 
> I just downloaded the 2.6.3 version of mod_python and ran configure. In 
> addition to checking my blood pressure 

:-)

> ( a very nice feature, maybe 2.7 can do a CAT scan), it reported the
> following warning:
> 
> ****** WARNING ******
>   Python is compiled with thread support. Apache 1.3 does not use threads.
>   On some systems this will cause problems during compilation, on others

This is platform dependend, and frankly I'm not much of a thread expert. I
know on FreeBSD you will get unresolved symbols at link time when trying
to mix threaded and non threaded code. This is because it links against
separate versions of C libraries.

I don't know if this applies to Linux or Solaris. I know some people have
reported segfaults on RH if mod_python is not the first module listed, and
I have a suspicion that it is thread-related.

So that warning is exactly that - just a warning.

Perhpas someone on this list more knoledgeale on the subject can shed some
light on this?

[P.S. lest someone reading this gets the wrong idea - mod_python *is*
thread safe, it couldn't run on Win32 if it wasn't]

Grisha


From jjp at connix.com  Fri Nov  3 23:04:40 2000
From: jjp at connix.com (John Posner)
Date: Fri Jan  9 21:52:10 2004
Subject: [mod_python] Where's Fredrik
Message-ID: <000101c04614$5cb945b0$6e64fea9@jake>

Does anyone know how to contact Fredrik Lundh, the author of the (only?)
Python XML-RPC implementation?

These don't seem to work for me:

  fredrik@pythonware.com
  effbot@telia.com


Thanks,
John

--
John Posner, Editor           jjp@oreilly.com
O'Reilly & Associates         860-663-3147


From randy at teamkern.net  Sat Nov  4 23:42:09 2000
From: randy at teamkern.net (Randall Kern)
Date: Fri Jan  9 21:52:10 2004
Subject: [mod_python] add_handler
Message-ID: <0cbc01c046fb$e7271e10$1f00a8c0@spoke.net>

Sorry if this has been covered before, I checked the archives and google, but couldn't find anything.

I am using a PythonTransHandler to map certain requests to files, and then invoke a PythonHandler for those files using request.add_handler.  However, my main handler function is never called.

in /foo/foo.py:

from mod_python import apache

def handler(req):
    req.send_http_header()
    req.write("Hello World!\nProcessing on behalf of %s\nFrom foo.py" % req.filename
    return apache.OK

def transhandler(req):

    if stuff:  # stuff is actually a rather complex bit of code...
        req.add_handler("PythonHandler", "foo::handler", "/foo")
        apache.log_error("just called add_handler")
        return apache.OK

    return apache.DECLINED




My error_log file does in fact get the entry "just called...", but the browser always gets the contents of req.filename, NOT the "Hello World..." message from foo.handler.

If I add a SetHandler python-program to my httpd.conf file, the handler() function gets called. It's only when I try to dynamically add the handler that it doesn't work.

Ideas?

Thanks,
-Randy

P.S. python 2.0, apache 1.3.14, mod_python 2.6.3
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20001104/65674beb/attachment-0001.htm
From jhh at msu.edu  Wed Nov  8 04:24:47 2000
From: jhh at msu.edu (John H. Hayes)
Date: Fri Jan  9 21:52:10 2004
Subject: [mod_python] Python SCRIPT Fails When Running Through Python Module
Message-ID: <3A091BDF.6A5CA2F2@msu.edu>

When I attempt to run the test script that is described in the modpython
installation documentation
I get the following information in my web client:
Mod_python error: "PythonHandler test"

Traceback (most recent call last):

  File
"/usr/local/opt/Python-2.0/lib/python2.0/site-packages/mod_python/apache.py",
line 175, in Dispatch
    module = import_module(module_name, _req)

  File
"/usr/local/opt/Python-2.0/lib/python2.0/site-packages/mod_python/apache.py",
line 316, in import_module
    module = __import__(module_name)

ImportError: No module named test

It appears there is some configuration problem, but I set things up as
described.

If anybody can shed some light on this I would appreciate it.

Thanks,
John Hayes



From grisha at ispol.com  Thu Nov  9 09:10:47 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:10 2004
Subject: [mod_python] Re: mod_python
In-Reply-To: <3A0AA011.CF6E2C1C@jeremias.net>
Message-ID: <Pine.LNX.4.21.0011090906190.10075-100000@saturn.ispol.com>

[cc-ing the list in case someone has a better answer]

Unfortunately I don't have access to Mandrake and know next to nothing
about it. Is it supposed to be RedHat compatible?

The RPM on the site is RedHat-specific as it makes some assumptions about
what is in the httpd.conf file. I also don't know how compatible it is as
far as libc versions, etc.

Unless someone has a Mandrake RPM out there, my recommendation would be to
compile it from sources.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Thu, 9 Nov 2000, Jason Jeremias wrote:

> Okay,
> 
> OS: Linux Mandrake 7.2
> Apache 1.3.14 that came with it via RPM
> Python 1.5.2 also from mandrake rpm
> mod_python came from the website the RPM.
> 
> Standard config that came with the system.  With the exception of the
> mod_python stuff loaded in it. This is the output from the apache error
> log file.
> [Tue Nov  7 03:34:20 2000] [notice] Apache-AdvancedExtranetServer/1.3.14
> (Linux-Mandrake/2mdk) mod_python/2.6.3 Python/1.5.2 configured --
> resuming normal operations
> [Tue Nov  7 03:34:59 2000] [notice] child pid 32518 exit signal
> Segmentation fault (11)
> [Thu Nov  9 03:56:09 2000] [notice] child pid 32527 exit signal
> Segmentation fault (11)
> 
> let me know if there is anything else I can send you that may help.
> 
> I usually have PHP loaded in Apache as well but I was trying to get
> mod_python working before I put PHP in to eliminate some possible
> problems.
> 
> thanks for the reply.
> 
> -Jason 
> 


From aiglauer at yahoo.com  Fri Nov 10 00:58:04 2000
From: aiglauer at yahoo.com (Alexis Iglauer)
Date: Fri Jan  9 21:52:10 2004
Subject: [mod_python] Re: mod_python
Message-ID: <20001110085804.3371.qmail@web2204.mail.yahoo.com>

I have mod_python working on MDK 6.0, 7.0 and 7.1 - no
problem.  I get the DEAPI warning, which I happily
ignore.  I usually have to change apache.py and put
'/usr/lib/python1.5/site-packages/mod_python' in the
sys.path so that 'cgihandler.py' gets found, but that
is probably because I am too lazy to set PYTHONPATH. 
Problem has reduced since I now write my own handlers
:)

Apache 1.3.[4,6,12], mod_python 2.[0,2,6]

HTH
ax

--- Gregory Trubetskoy <grisha@ispol.com> wrote:
> 
> [cc-ing the list in case someone has a better
> answer]
> 
> Unfortunately I don't have access to Mandrake and
> know next to nothing
> about it. Is it supposed to be RedHat compatible?
> 
> The RPM on the site is RedHat-specific as it makes
> some assumptions about
> what is in the httpd.conf file. I also don't know
> how compatible it is as
> far as libc versions, etc.
> 
> Unless someone has a Mandrake RPM out there, my
> recommendation would be to
> compile it from sources.
> 
> --
>   Gregory (Grisha) Trubetskoy
>        grisha@ispol.com
> 
> On Thu, 9 Nov 2000, Jason Jeremias wrote:
> 
> > Okay,
> > 
> > OS: Linux Mandrake 7.2
> > Apache 1.3.14 that came with it via RPM
> > Python 1.5.2 also from mandrake rpm
> > mod_python came from the website the RPM.
> > 
> > Standard config that came with the system.  With
> the exception of the
> > mod_python stuff loaded in it. This is the output
> from the apache error
> > log file.
> > [Tue Nov  7 03:34:20 2000] [notice]
> Apache-AdvancedExtranetServer/1.3.14
> > (Linux-Mandrake/2mdk) mod_python/2.6.3
> Python/1.5.2 configured --
> > resuming normal operations
> > [Tue Nov  7 03:34:59 2000] [notice] child pid
> 32518 exit signal
> > Segmentation fault (11)
> > [Thu Nov  9 03:56:09 2000] [notice] child pid
> 32527 exit signal
> > Segmentation fault (11)
> > 
> > let me know if there is anything else I can send
> you that may help.
> > 
> > I usually have PHP loaded in Apache as well but I
> was trying to get
> > mod_python working before I put PHP in to
> eliminate some possible
> > problems.
> > 
> > thanks for the reply.
> > 
> > -Jason 
> > 
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python


__________________________________________________
Do You Yahoo!?
Thousands of Stores.  Millions of Products.  All in one Place.
http://shopping.yahoo.com/

From haering_python at gmx.de  Sat Nov 11 05:59:24 2000
From: haering_python at gmx.de (Gerhard =?ISO-8859-1?Q?H=E4ring?=)
Date: Fri Jan  9 21:52:10 2004
Subject: [mod_python] Corrupt win32 build
Message-ID: <11983.973918764@www33.gmx.net>

Hi folks,

I just wanted to test the win32 build for mod_python I got from the
project's homepage. Apache says that mod_python.dll is not a valid Windows image.
And if I try to examine the file with the Microsoft Dependency Walker, I get
more or less the same information. Maybe something did go wrong while the
contributor uploaded his files? Could you upload your files again, please?

Gerhard

-- 
Sent through GMX FreeMail - http://www.gmx.net


From haering_python at gmx.de  Sat Nov 11 06:32:27 2000
From: haering_python at gmx.de (Gerhard =?ISO-8859-1?Q?H=E4ring?=)
Date: Fri Jan  9 21:52:10 2004
Subject: [mod_python] Corrupt win32 build
References: <11983.973918764@www33.gmx.net>
Message-ID: <22208.973920747@www33.gmx.net>

Sorry, I was a fool. It was most probably my Netscape browser's fault that
I  got invalid binaries after downloading. I used wget and the download
worked. I installed mod_python and the test module described in the Win32
install page. Then I wanted to see how it was stability-wise.

/usr/sbin/ab -n 10000 http://lilith/python/test.py

worked fine, while the stress test with 5 parallel requests

/usr/sbin/ab -c 5 -n 10000 http://lilith/python/test.py

crashes Apache in the mod_python module several times. I have Windows
2000,  on a SMP machine, Apache 1.3.12 and ActiveState Python 2.0. Seems like a
threading issue to me ...

Gerhard

-- 
Sent through GMX FreeMail - http://www.gmx.net


From sbi at acse.be  Sun Nov 12 22:57:52 2000
From: sbi at acse.be (=?iso-8859-1?Q?St=E9phane_Bidoul?=)
Date: Fri Jan  9 21:52:10 2004
Subject: [mod_python] Corrupt win32 build
References: <11983.973918764@www33.gmx.net> <22208.973920747@www33.gmx.net>
Message-ID: <003201c04cf3$a1609840$cda679c1@cat>

The win32 version has got some basic testing and debugging
wrt threading; I'll test again with ab as soon as find time for that.
However, I've no SMP machine... so my test will be a bit biased.

-stephane

----- Original Message ----- 
From: "Gerhard H?ring" <haering_python@gmx.de>
To: <mod_python@modpython.org>
Sent: Saturday, November 11, 2000 6:32 AM
Subject: Re: [mod_python] Corrupt win32 build


> Sorry, I was a fool. It was most probably my Netscape browser's fault that
> I  got invalid binaries after downloading. I used wget and the download
> worked. I installed mod_python and the test module described in the Win32
> install page. Then I wanted to see how it was stability-wise.
> 
> /usr/sbin/ab -n 10000 http://lilith/python/test.py
> 
> worked fine, while the stress test with 5 parallel requests
> 
> /usr/sbin/ab -c 5 -n 10000 http://lilith/python/test.py
> 
> crashes Apache in the mod_python module several times. I have Windows
> 2000,  on a SMP machine, Apache 1.3.12 and ActiveState Python 2.0. Seems like a
> threading issue to me ...
> 
> Gerhard
> 
> -- 
> Sent through GMX FreeMail - http://www.gmx.net
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From phil at munen.net  Sun Nov 12 23:47:31 2000
From: phil at munen.net (phil suh)
Date: Fri Jan  9 21:52:10 2004
Subject: [mod_python] Apache warning: this module might crash under EAPI!
Message-ID: <Pine.LNX.4.10.10011122333140.10702-100000@sushi.munen.net>

I'm compiling Apache 1.3.14 w/ mod_so, mod_ssl, mod_perl baked in.
I want to add mod_python as a DSO. I had to recompile Python-2.0 without
threads since the BeOpen-Python 2.0 has threads turned on.

After compiling mod_python, editing httpd.conf, and restarting Apache, it
works, but Apache gives a warning:

$ sudo /etc/rc.d/init.d/httpd start
[Mon Nov 13 00:29:45 2000] [warn] Loaded DSO libexec/mod_python.so uses
plain Apache 1.3 API, this module might crash under EAPI! (please
recompile it with -DEAPI)
/etc/rc.d/init.d/httpd start: httpd started

I searched Google, and found a guy who claims that this is an mod_ssl
related thing, and if the mod doesn't use ssl, I don't need to worry
about it (http://www.geocrawler.com/archives/3/97/2000/3/0/3511640/).

Is this true?

Is there a way to recompile w/ -DEAPI? Can someone explain, step by step,
how to do it?  (I'd rather not have to live with that warning...bugs me).

Thanks in advance for your help.

Phil Suh
Apache compilng-newbie, python enthusiast.

P.S. How I compiled mod_python:

[phil mod_python-2.6.3] $ pwd
/usr/local/src/httpd/mod_python-2.6.3
[phil mod_python-2.6.3] $ ./configure \
> --with-python=/usr/local/src/Python-2.0 \ 
> --with-apxs=/usr/local/apache.org/httpd/bin/apxs \
> --with-apache=/usr/local/src/httpd/apache_1.3.14
[phil mod_python-2.6.3] $ make dso
[phil mod_python-2.6.3] $ sudo make install


==================================
phil@munen.net
http://munen.net/~phil/


From aiglauer at iname.com  Tue Nov 14 00:03:25 2000
From: aiglauer at iname.com (Alexis Iglauer)
Date: Fri Jan  9 21:52:10 2004
Subject: [mod_python] Graphs in a webpage
Message-ID: <006f01c04dc5$f93e9c60$0401a8c0@charis>

This may be the wrong forum for this, but......

I am writing an app which takes data out of text files and makes graphs.
The user interactively specifies the graphs in a browser, with everything
being done in Python as a handler.  The resulting page can have 10+ graphs
on it.

Problem is, my solution is sloooooow.  I am using gdchart to generate the
graphs on the fly (<img src="grph.py?color=0x0000ff" alt="xxx"> and plain
vanilla python for the rest.

I am not sure whether reading the ASCII files is slow and whether sticking
them into a database will be worth the effort (ideas, anyone?).  I get some
advantage when running apache single-threaded by checking whether my data is
already loaded, but as soon as I run apache normally this advantage
disappears.

I think the bottleneck is creating the graph, and in trying to solve that I
have a few questions regarding how mod_python works.  How long does an
instance of mod_python exist?  When is an instance destroyed?  What data can
be passed from one instance to the next?  Also, does anyone have any ideas
on how to efficiently generate graphs from a reasonably large number of
datapoints?

Thanks in advance
Alexis


From benno at sesgroup.net  Tue Nov 14 10:25:14 2000
From: benno at sesgroup.net (Ben Leslie)
Date: Fri Jan  9 21:52:10 2004
Subject: [mod_python] Graphs in a webpage
In-Reply-To: <006f01c04dc5$f93e9c60$0401a8c0@charis>; from aiglauer@iname.com on Tue, Nov 14, 2000 at 12:03:25AM +0100
References: <006f01c04dc5$f93e9c60$0401a8c0@charis>
Message-ID: <20001114102514.I14092@bob.sesgroup.net>

> This may be the wrong forum for this, but......

<snip>
 
> I am not sure whether reading the ASCII files is slow and whether sticking
> them into a database will be worth the effort (ideas, anyone?).  I get some
> advantage when running apache single-threaded by checking whether my data is
> already loaded, but as soon as I run apache normally this advantage
> disappears.

Database is almost always going to be slower than reading from ascii files.
 
> I think the bottleneck is creating the graph, and in trying to solve that I
> have a few questions regarding how mod_python works.  How long does an
> instance of mod_python exist?  When is an instance destroyed?  What data can
> be passed from one instance to the next? 

There is one insatnce of you handler is created for each apache thread. So
it will be there until the apache thread is killed. You can therfore cache
data between requests. I think you can communicate between different threads
but you probably don't want to.

I doubt mod_python would be your bottleneck. How long does graph.py take
to create a graph from the command line?

> Also, does anyone have any ideas
> on how to efficiently generate graphs from a reasonably large number of
> datapoints?

Gnuplot maybe.


Cheers,

Benno

From grisha at ispol.com  Mon Nov 13 22:07:38 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:10 2004
Subject: [mod_python] Graphs in a webpage
In-Reply-To: <006f01c04dc5$f93e9c60$0401a8c0@charis>
Message-ID: <Pine.LNX.4.21.0011132153470.3701-100000@saturn.ispol.com>

I used gd with nsapy on a windows machine in 1997 and it was very very
fast (considering computers were slow back then). Yahoo uses it on their
quotes.yahoo.com of all other tools, mrtg uses it, it's probably the
fastest thign out there.

The things that are the slowest are repetetive operations that involve
memory allocations - e.g. if you're building some large list from the
ascii files one byte at a time and your ascii file is 90K, it will be
slow. You will see a big improvement if you only build the list once and
cache it inside a module somewhere. 

If your content is dynamic and cannot be cached, then try to avoid things
like readlines() of the whole file, then copying it some list. A much
faster solution is to read the file as you need the data avoiding all
unnecessary mallocs.

A database may make things faster - it very much depends on what you
do. For example if you try to process data in some way, i.e. sort or
select records, etc, then most definitely a database, especially if ran on
a separate server will give you an improvement. 

If you're just using it as flat file storage, then it will be about as
fast as a file, perhaps a little slower.

mod_python interpreter lives as long the as the apache process (or in case
of win32 thread) lives. The simplest way to cache data is to use the
Python "import" mechanism - make a module that reads all your ascii files,
then import it from a script. Python only imports once the first time and
ignores all subsequent requests - perfect for caching.

HTH

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Tue, 14 Nov 2000, Alexis Iglauer wrote:

> This may be the wrong forum for this, but......
> 
> I am writing an app which takes data out of text files and makes graphs.
> The user interactively specifies the graphs in a browser, with everything
> being done in Python as a handler.  The resulting page can have 10+ graphs
> on it.
> 
> Problem is, my solution is sloooooow.  I am using gdchart to generate the
> graphs on the fly (<img src="grph.py?color=0x0000ff" alt="xxx"> and plain
> vanilla python for the rest.
> 
> I am not sure whether reading the ASCII files is slow and whether sticking
> them into a database will be worth the effort (ideas, anyone?).  I get some
> advantage when running apache single-threaded by checking whether my data is
> already loaded, but as soon as I run apache normally this advantage
> disappears.
> 
> I think the bottleneck is creating the graph, and in trying to solve that I
> have a few questions regarding how mod_python works.  How long does an
> instance of mod_python exist?  When is an instance destroyed?  What data can
> be passed from one instance to the next?  Also, does anyone have any ideas
> on how to efficiently generate graphs from a reasonably large number of
> datapoints?
> 
> Thanks in advance
> Alexis
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From aiglauer at yahoo.com  Tue Nov 14 02:45:56 2000
From: aiglauer at yahoo.com (Alexis Iglauer)
Date: Fri Jan  9 21:52:10 2004
Subject: [mod_python] Graphs in a webpage
Message-ID: <20001114104556.24954.qmail@web2205.mail.yahoo.com>

First of all, thank you to everyone for the pointers.
 
> I used gd with nsapy on a windows machine in 1997

Will check it out, thanks....

> The things that are the slowest are repetetive
> operations that involve
> memory allocations - e.g. if you're building some
> large list from the
> ascii files one byte at a time and your ascii file
> is 90K, it will be
> slow. You will see a big improvement if you only
> build the list once and
> cache it inside a module somewhere. 
> 

I am using the following construct often:

i = open (datafile)
l = i.readlines()
i.close()

on 200KB+ files - looks like that could be the problem
:)  Is it more efficient to loop using

for l in i.readlines():      ?

My datafiles are time series data, usually for 24
hours at a time, so I will have a whole bunch of
datafiles which make up a contiguous set of data over
several days/months/years.  The last datafile will
probably always be growing.  A two-stage caching
module may do the trick.

> If your content is dynamic and cannot be cached,
> then try to avoid things
> like readlines() of the whole file, then copying it
> some list. A much
> faster solution is to read the file as you need the
> data avoiding all
> unnecessary mallocs.
 

This seems to answer my question above in the
positive.  I will however still be reading all my
datafiles every time.

> Python "import" mechanism - make a module that reads
> all your ascii files,
> then import it from a script. Python only imports
> once the first time and
> ignores all subsequent requests - perfect for
> caching.

Does "first time" here mean the first time apache is
started or the first time an apache process is
(re)started?

> HTH

Yup, thanks
aei 




__________________________________________________
Do You Yahoo!?
Yahoo! Calendar - Get organized for the holidays!
http://calendar.yahoo.com/

From grisha at ispol.com  Tue Nov 14 10:22:48 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:10 2004
Subject: [mod_python] Graphs in a webpage
In-Reply-To: <20001114104556.24954.qmail@web2205.mail.yahoo.com>
Message-ID: <Pine.LNX.4.21.0011141015370.5926-100000@saturn.ispol.com>

On Tue, 14 Nov 2000, Alexis Iglauer wrote:
> 
> First of all, thank you to everyone for the pointers.
>  
> > I used gd with nsapy on a windows machine in 1997
> 
> Will check it out, thanks....

You're using it already.

> My datafiles are time series data, usually for 24
> hours at a time, so I will have a whole bunch of
> datafiles which make up a contiguous set of data over
> several days/months/years.

Sounds like you need a function that checks the file modification dat and
reads it only if it has been changed.

>  The last datafile will probably always be growing.  A two-stage
> caching module may do the trick.

I don't know what you're doing there, but I suspect you may benefit
from RRDTool (http://ee-staff.ethz.ch/~oetiker/webtools/rrdtool/)

> > Python "import" mechanism - make a module that reads all your
> > ascii files,
> 
> Does "first time" here mean the first time apache is started or the
> first time an apache process is (re)started?

It would be whenever that import statement is executed, which usually is
at the first hit after apache was (re) started. There is also a
PythonImport directive, which will allow you to do this at process start
up time rather than the first hit, but PythonImport has some caveats (read
the docs)

Grisha


From gps at trix.dircon.co.uk  Wed Nov 15 19:56:52 2000
From: gps at trix.dircon.co.uk (Graham Swallow)
Date: Fri Jan  9 21:52:10 2004
Subject: [mod_python] Re: Graphs in a webpage
In-Reply-To: <200011151200.MAA02390@mercury.ispol.com>
Message-ID: <Pine.LNX.4.04.10011151937590.752-100000@trix.dircon.co.uk>

On Tue, 14 Nov 2000, Alexis Iglauer wrote:

> My datafiles are time series data, usually for 24
> hours at a time, so I will have a whole bunch of
> datafiles which make up a contiguous set of data over
> several days/months/years.

	I have a similar situation, but not in apache_mod.  The data is
	an array of floats (binary portable), one every minute for a week,
	over the year.

	Repackaging last weeks data is slow, but you dont do that for
	every request.

	I use Array to get it as a string, then I use zlib to get a string,
	then I 'escape' the data for MySql (using the standard function)
	and write it into a blob field.

	The data comes back with no need for un-escaping (its so that it
	goes into an SQL statement).

	Then I call a C function to convert the floats to doubles and
	create a BLT/Vector. Its very quick.

	Using GD (or whatever) should not be slow, but a bit of C at the
	right place means you move chunks of data around, not iterate
	python over thousands of items.

	The 'most recent' file obviously needs special treatment.
	You could re-process today every hour (hint: move, start new file,
	then process the moved file, if fail - dont delete).

	That still leaves you with a 'double' data source, first SQL, then
	the additional file.  Alternatively, get the data collector to
	post the data ...

	Graham


From grisha at ispol.com  Wed Nov 15 21:35:42 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:10 2004
Subject: [mod_python] Re: Graphs in a webpage
In-Reply-To: <Pine.LNX.4.04.10011151937590.752-100000@trix.dircon.co.uk>
Message-ID: <Pine.LNX.4.21.0011152134060.11986-100000@saturn.ispol.com>

This is somewhat off-subject, but IMHO the best tool for time-series data
storing and charting is RRDtool. It can produce charts for a year of data
in a split second.

Grisha

On Wed, 15 Nov 2000, Graham Swallow wrote:

> On Tue, 14 Nov 2000, Alexis Iglauer wrote:
> 
> > My datafiles are time series data, usually for 24
> > hours at a time, so I will have a whole bunch of
> > datafiles which make up a contiguous set of data over
> > several days/months/years.
> 
> 	I have a similar situation, but not in apache_mod.  The data is
> 	an array of floats (binary portable), one every minute for a week,
> 	over the year.
> 
> 	Repackaging last weeks data is slow, but you dont do that for
> 	every request.
> 
> 	I use Array to get it as a string, then I use zlib to get a string,
> 	then I 'escape' the data for MySql (using the standard function)
> 	and write it into a blob field.
> 
> 	The data comes back with no need for un-escaping (its so that it
> 	goes into an SQL statement).
> 
> 	Then I call a C function to convert the floats to doubles and
> 	create a BLT/Vector. Its very quick.
> 
> 	Using GD (or whatever) should not be slow, but a bit of C at the
> 	right place means you move chunks of data around, not iterate
> 	python over thousands of items.
> 
> 	The 'most recent' file obviously needs special treatment.
> 	You could re-process today every hour (hint: move, start new file,
> 	then process the moved file, if fail - dont delete).
> 
> 	That still leaves you with a 'double' data source, first SQL, then
> 	the additional file.  Alternatively, get the data collector to
> 	post the data ...
> 
> 	Graham
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From octos at austin.rr.com  Sun Nov 19 16:55:01 2000
From: octos at austin.rr.com (Eric Adam)
Date: Fri Jan  9 21:52:10 2004
Subject: [mod_python] Modules?
Message-ID: <4.3.2.7.2.20001119165253.00d37d00@pop-server>

Is there a source of user-built modules for use with mod_python?

I'm looking for a module that will present the contents of a POST in 
dictionary or similar form and would rather not re-invent the wheel.

Thanks.



From benno at sesgroup.net  Mon Nov 20 10:13:18 2000
From: benno at sesgroup.net (Ben Leslie)
Date: Fri Jan  9 21:52:10 2004
Subject: [mod_python] Modules?
In-Reply-To: <4.3.2.7.2.20001119165253.00d37d00@pop-server>; from octos@austin.rr.com on Sun, Nov 19, 2000 at 04:55:01PM -0600
References: <4.3.2.7.2.20001119165253.00d37d00@pop-server>
Message-ID: <20001120101318.A25682@bob.sesgroup.net>

On Sun, 19 Nov 2000, Eric Adam wrote:

> Is there a source of user-built modules for use with mod_python?
> 
> I'm looking for a module that will present the contents of a POST in 
> dictionary or similar form and would rather not re-invent the wheel.
> 

Check out the cgi handler in the python core. It has a lot of useful 
things like this.

Cheers,

Benno

From grisha at ispol.com  Sun Nov 19 20:48:58 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:10 2004
Subject: [mod_python] Modules?
In-Reply-To: <4.3.2.7.2.20001119165253.00d37d00@pop-server>
Message-ID: <Pine.LNX.4.21.0011192044580.4402-100000@saturn.ispol.com>

The next version of mod_python will have a module called mod_python.util
that does just that. If you can't wait until the next version, you can
pull it off sourceforge CVS
http://cvs.sourceforge.net/cgi-bin/cvsweb.cgi/~checkout~/mod_python/lib/python/mod_python/util.py?rev=1.1&content-type=text/plain&cvsroot=modpython

(this is very beta code, of course)

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Sun, 19 Nov 2000, Eric Adam wrote:

> Is there a source of user-built modules for use with mod_python?
> 
> I'm looking for a module that will present the contents of a POST in 
> dictionary or similar form and would rather not re-invent the wheel.
> 
> Thanks.
> 
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From ftian at cs.wisc.edu  Mon Nov 20 01:19:32 2000
From: ftian at cs.wisc.edu (Feng Tian)
Date: Fri Jan  9 21:52:10 2004
Subject: [mod_python] Help on installation
Message-ID: <Pine.LNX.3.96L.1001120011504.27742A-100000@cobra.cs.wisc.edu>

Hi,

I am trying to get mod_python working on linux RedHat 6.2
I downloaded an RPM, and configed httpd.conf

The error log of httpd says
 
could not import mod_python.apache
could not call init

I tried to import mod_python.apache from an interactive
python shell, and got message 
_apache 
is missing.

What's the problem?  Fix?

Thanks.

Feng



From thepoet at texas.net  Tue Nov 21 08:21:25 2000
From: thepoet at texas.net (thepoet@texas.net)
Date: Fri Jan  9 21:52:10 2004
Subject: [mod_python] Q : persistent objects/vars
Message-ID: <200011211421.IAA02649@mw2.texas.net>

I've sifted through all the relevant documentation
and the mailing list archives, so please excuse this
email if there happens to be any repitition.

As I understand it, when the apache server starts up,
python is called and the directory in which I've placed
my files receives a subinterpreter.  In attempting to
persist an object, would it be as simple as making a
variable 'global' (would all processes know of the global
no matter what since it is in the same subint and that
subint is persistent across processes?), or must
I attempt to use one of the funcs from the apache module
itself like req (which according to the list is now a persistent
python object).  And if I were to use req, how would I
make sure that every instance of my script that is handled
by the subint can r-w that variable (say, a list of items)
and might there be an example of how to do this?  (I have
tried globals and req. without much luck). Thanks
in advance for any help you might be able to offer...and
kudos to the mod_python authors!

-Rick


From miguel at yorku.ca  Tue Nov 21 11:01:03 2000
From: miguel at yorku.ca (Miguel Marques)
Date: Fri Jan  9 21:52:10 2004
Subject: [mod_python] UNIQUE_ID from mod_python...
Message-ID: <20001121110103M.miguel@yorku.ca>

Greetings...

I need to access the unique id produced by mod_unique_id.  It gets set
as an environment variable for CGI scripts but not by the looks of it
for python scripts (I don't see it in os.environ).  I'm not all that
familiar with Apache internals so maybe there's something I'm missing.
If anyone has any idea on whether or not I can get the unique_id variable
please let me know.
Thanks for any input.

						Miguel

C. Miguel Marques, York University, Computing & Network Services
e-mail: miguel@yorku.ca, voice: (416)736-2100x22684, fax: (416)736-5830

From miguel at yorku.ca  Tue Nov 21 11:29:01 2000
From: miguel at yorku.ca (Miguel Marques)
Date: Fri Jan  9 21:52:10 2004
Subject: [mod_python] UNIQUE_ID from mod_python...
In-Reply-To: <20001121110103M.miguel@yorku.ca>
References: <20001121110103M.miguel@yorku.ca>
Message-ID: <20001121112901O.miguel@yorku.ca>

On Tue, 21 Nov 2000 11:01:03 -0500, Miguel Marques <miguel@yorku.ca> wrote:
> Greetings...
> 
> I need to access the unique id produced by mod_unique_id.  It gets set
> as an environment variable for CGI scripts but not by the looks of it
> for python scripts (I don't see it in os.environ).  I'm not all that
> familiar with Apache internals so maybe there's something I'm missing.
> If anyone has any idea on whether or not I can get the unique_id variable
> please let me know.
> Thanks for any input.

Never mind.
I was missing something.
It's in request.subprocess_env which actually should had been obvious
to me after I looked at the source code for unique_id.
Sigh...

							Miguel

C. Miguel Marques, York University, Computing & Network Services
e-mail: miguel@yorku.ca, voice: (416)736-2100x22684, fax: (416)736-5830


From grisha at ispol.com  Tue Nov 21 16:45:44 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:11 2004
Subject: [mod_python] Q : persistent objects/vars
In-Reply-To: <200011211421.IAA02649@mw2.texas.net>
Message-ID: <Pine.LNX.4.21.0011211644520.11647-100000@saturn.ispol.com>

I'm afraid mod_python does not provide any interprocess communication. To
communicate between processes you would have to use sockets or something
like that.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Tue, 21 Nov 2000 thepoet@texas.net wrote:

> I've sifted through all the relevant documentation
> and the mailing list archives, so please excuse this
> email if there happens to be any repitition.
> 
> As I understand it, when the apache server starts up,
> python is called and the directory in which I've placed
> my files receives a subinterpreter.  In attempting to
> persist an object, would it be as simple as making a
> variable 'global' (would all processes know of the global
> no matter what since it is in the same subint and that
> subint is persistent across processes?), or must
> I attempt to use one of the funcs from the apache module
> itself like req (which according to the list is now a persistent
> python object).  And if I were to use req, how would I
> make sure that every instance of my script that is handled
> by the subint can r-w that variable (say, a list of items)
> and might there be an example of how to do this?  (I have
> tried globals and req. without much luck). Thanks
> in advance for any help you might be able to offer...and
> kudos to the mod_python authors!
> 
> -Rick
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From grisha at ispol.com  Tue Nov 21 16:48:31 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:11 2004
Subject: [mod_python] UNIQUE_ID from mod_python...
In-Reply-To: <20001121110103M.miguel@yorku.ca>
Message-ID: <Pine.LNX.4.21.0011211646280.11647-100000@saturn.ispol.com>

If you're writing native mod_python handlers, then that id should be in
req.subprocess_env. If you're using cgihandler, you have no access to it,
since the CGI that the cgihandler emulates is 'fake', there is no forking
going on.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Tue, 21 Nov 2000, Miguel Marques wrote:

> Greetings...
> 
> I need to access the unique id produced by mod_unique_id.  It gets set
> as an environment variable for CGI scripts but not by the looks of it
> for python scripts (I don't see it in os.environ).  I'm not all that
> familiar with Apache internals so maybe there's something I'm missing.
> If anyone has any idea on whether or not I can get the unique_id variable
> please let me know.
> Thanks for any input.
> 
> 						Miguel
> 
> C. Miguel Marques, York University, Computing & Network Services
> e-mail: miguel@yorku.ca, voice: (416)736-2100x22684, fax: (416)736-5830
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From sahrens at uv.ruhr-uni-bochum.de  Fri Nov 24 18:09:04 2000
From: sahrens at uv.ruhr-uni-bochum.de (sa)
Date: Fri Jan  9 21:52:11 2004
Subject: [mod_python] please help...
Message-ID: <3A1EA0AF.818C1DD4@uv.ruhr-uni-bochum.de>

Hi folks,
I got the script which runs perfect on my linuxbox as long as it?s not
running inside mod_python. Below I show you the mod_python version that
is producing the error code you can see on the bottom of this mail. As I
am new to mod_python but can still remember such strange effects when
playing with mod_perl for the first time some years ago I think it?s
time for some guru?s advice
Maybe I didn?t get any global restrictions (like always using the strict
pragma under mod_perl) so far. Please give some hint where to look
further

    thanks a lot

            Sebastian

------the script------

from mod_python import apache
import string, os, re
import xml.dom.ext
from xml.xslt import XsltException
from xml.xslt.Processor import Processor


sheet = """
        <xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns="http://www.w3.org/TR/xhtml1/strict">

          <xsl:template match="main">
            <html><head>ein test</head><body>
                    <hr/>
                    <b><xsl:value-of select="/main/test"/></b>
                    <em><xsl:value-of select="/main/testBody"/></em>
            </body></html>
          </xsl:template>

        <xsl:apply-templates/>
        </xsl:stylesheet>
        """

def handler(req):
    req.content_type = "text/plain"
    req.send_http_header()
    the_req_file = req.the_request
    a = string.split(the_req_file, " ")
    tmp_file = string.split(a[1], "?")
    file_name = tmp_file[1]
    path_prefix = "/var/www"
    path = path_prefix+file_name
    raw_data = open(path).read()

    processor = xml.xslt.Processor.Processor()
    processor.appendStylesheetString(sheet)
    result = processor.runString(raw_data, ignorePis=1)
    req.write(result)
    return apache.OK


------- the error ---------


> Mod_python error: "PythonHandler xmlhandler"
>
> Traceback (innermost last):
>
>   File "/usr/lib/python1.5/site-packages/mod_python/apache.py", line 175, in Dispatch
>     module = import_module(module_name, _req)
>
>   File "/usr/lib/python1.5/site-packages/mod_python/apache.py", line 316, in import_module
>     module = __import__(module_name)
>
>   File "/var/www/xml/xmlhandler.py", line 3, in ?
>     import xml.dom.ext
>
>   File "/usr/lib/python1.5/site-packages/xml/dom/__init__.py", line 41, in ?
>     from xml.dom.html import HTMLDOMImplementation
>
>   File "/usr/lib/python1.5/site-packages/xml/dom/html/__init__.py", line 281, in ?
>     g_numCharEntityPattern = re.compile('?(\d+);')
>
>   File "/usr/lib/python1.5/re.py", line 79, in compile
>     code=pcre_compile(pattern, flags, groupindex)
>
> pcre.error: ('unmatched parentheses', 208)
>





-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20001124/a648c98d/attachment-0001.htm
From grisha at ispol.com  Fri Nov 24 14:38:03 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:11 2004
Subject: [mod_python] please help...
In-Reply-To: <3A1EA0AF.818C1DD4@uv.ruhr-uni-bochum.de>
Message-ID: <Pine.LNX.4.21.0011241435090.22236-100000@saturn.ispol.com>

This error has something to do with a mismatch of pcre (regular
expression) libraries. AFAIK there is a version that is not backwards
compatible. You probably have one version linked in by virtue of using
some module which uses pcre (e.g. mod_php) and Python expects another
version.

It's hard to tell what the exact solution is, but would try pursuing that
line and see where it takes you.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Fri, 24 Nov 2000, sa wrote:

> Hi folks,
> I got the script which runs perfect on my linuxbox as long as it?s not
> running inside mod_python. Below I show you the mod_python version that
> is producing the error code you can see on the bottom of this mail. As I
> am new to mod_python but can still remember such strange effects when
> playing with mod_perl for the first time some years ago I think it?s
> time for some guru?s advice
> Maybe I didn?t get any global restrictions (like always using the strict
> pragma under mod_perl) so far. Please give some hint where to look
> further
> 
>     thanks a lot
> 
>             Sebastian
> 
> ------the script------
> 
> from mod_python import apache
> import string, os, re
> import xml.dom.ext
> from xml.xslt import XsltException
> from xml.xslt.Processor import Processor
> 
> 
> sheet = """
>         <xsl:stylesheet version="1.0"
> xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
> xmlns="http://www.w3.org/TR/xhtml1/strict">
> 
>           <xsl:template match="main">
>             <html><head>ein test</head><body>
>                     <hr/>
>                     <b><xsl:value-of select="/main/test"/></b>
>                     <em><xsl:value-of select="/main/testBody"/></em>
>             </body></html>
>           </xsl:template>
> 
>         <xsl:apply-templates/>
>         </xsl:stylesheet>
>         """
> 
> def handler(req):
>     req.content_type = "text/plain"
>     req.send_http_header()
>     the_req_file = req.the_request
>     a = string.split(the_req_file, " ")
>     tmp_file = string.split(a[1], "?")
>     file_name = tmp_file[1]
>     path_prefix = "/var/www"
>     path = path_prefix+file_name
>     raw_data = open(path).read()
> 
>     processor = xml.xslt.Processor.Processor()
>     processor.appendStylesheetString(sheet)
>     result = processor.runString(raw_data, ignorePis=1)
>     req.write(result)
>     return apache.OK
> 
> 
> ------- the error ---------
> 
> 
> > Mod_python error: "PythonHandler xmlhandler"
> >
> > Traceback (innermost last):
> >
> >   File "/usr/lib/python1.5/site-packages/mod_python/apache.py", line 175, in Dispatch
> >     module = import_module(module_name, _req)
> >
> >   File "/usr/lib/python1.5/site-packages/mod_python/apache.py", line 316, in import_module
> >     module = __import__(module_name)
> >
> >   File "/var/www/xml/xmlhandler.py", line 3, in ?
> >     import xml.dom.ext
> >
> >   File "/usr/lib/python1.5/site-packages/xml/dom/__init__.py", line 41, in ?
> >     from xml.dom.html import HTMLDOMImplementation
> >
> >   File "/usr/lib/python1.5/site-packages/xml/dom/html/__init__.py", line 281, in ?
> >     g_numCharEntityPattern = re.compile('?(\d+);')
> >
> >   File "/usr/lib/python1.5/re.py", line 79, in compile
> >     code=pcre_compile(pattern, flags, groupindex)
> >
> > pcre.error: ('unmatched parentheses', 208)
> >
> 
> 
> 
> 
> 
> 


From fschwiet at u.washington.edu  Fri Nov 24 12:22:24 2000
From: fschwiet at u.washington.edu (F. Schwieterman)
Date: Fri Jan  9 21:52:11 2004
Subject: [mod_python] Newbie says: "What and where is this ./configure script?"
Message-ID: <Pine.A41.4.21.0011241219200.66722-100000@dante59.u.washington.edu>

  I'm running Mandrake 7.2, with apache, python, mod_python all installed
from RPMs.  Apache 1.3.14, Python 1.5.2.

  The mod_python RPM installed a mod_python.so but not mod_python.c .  
Apache makes a complaint about mod_python.so and the installed
instructions say I have to build it anyhow so I assume I can't use this
.so.

  Thanks much.


From sahrens at uv.ruhr-uni-bochum.de  Sat Nov 25 13:24:45 2000
From: sahrens at uv.ruhr-uni-bochum.de (sa)
Date: Fri Jan  9 21:52:11 2004
Subject: [mod_python] please help...
References: <Pine.LNX.4.21.0011241435090.22236-100000@saturn.ispol.com>
Message-ID: <3A1FAF8D.2600DDAC@uv.ruhr-uni-bochum.de>

Gregory Trubetskoy wrote:

> This error has something to do with a mismatch of pcre (regular
> expression) libraries. AFAIK there is a version that is not backwards
> compatible. You probably have one version linked in by virtue of using
> some module which uses pcre (e.g. mod_php) and Python expects another
> version.
>

Hey man thanks a lot, it was just one '#' for the mod_php line in the httpd.conf and everything
ins working fine...


From ken at kenkinder.com  Sun Nov 26 01:17:26 2000
From: ken at kenkinder.com (Ken Kinder)
Date: Fri Jan  9 21:52:11 2004
Subject: [mod_python] compile problem
Message-ID: <20001126011726.A1489@kenkinder.com>

The odd thing is, on my Red Hat 7 Linux, this works fine, but on a Debian
2.1 box, it doesn't work. Here's what happens:

The error happened on make. Here's my configure command:

./configure --with-apache=../apache_1.3.14 --with-apxs=/usr/local/apache/bin/apxs

and make was make dso:

In file included from /usr/local/src/apache_1.3.14/src/include/ap_config.h:76,
                 from /usr/local/src/apache_1.3.14/src/include/httpd.h:71,
                 from /usr/local/src/mod_python-2.6.3/src/include/mod_python.h:85,
                 from mod_python.c:61:
/usr/local/src/apache_1.3.14/src/include/ap_config_auto.h:6: unterminated `#if' conditional
make[1]: *** [mod_python.o] Error 1
make[1]: Leaving directory `/usr/local/src/mod_python-2.6.3/src'
make: *** [do_dso] Error 2


-- 
Ken Kinder
www.kenkinder.com

From ken at rage.x13.com  Sun Nov 26 15:15:10 2000
From: ken at rage.x13.com (Ken Kinder)
Date: Fri Jan  9 21:52:11 2004
Subject: [mod_python] runtime error
Message-ID: <20001126151510.B14740@kenkinder.com>

I just got a new fresh copy of Apache, mod_ssl, mod_php, and some other fun stuff. All are from tarball. This is Debian/GNU Linux 2.2 (potato). I know
that mod_python is compiled into apache:

$ nm /usr/local/apache/bin/httpd | grep python
0810d5e1 b lib_python
08056754 T python_cleanup
08057788 T python_cleanup_handler
080f907c D python_commands
08056c5c t python_create_dir_config
08058890 t python_decref
08056f24 t python_directive
08058254 T python_finalize
08057200 t python_handler
080f906c d python_handlers
080f9064 d python_imports
08056b88 T python_init
08056dac t python_merge_dir_config
080f92c0 D python_module

But it doesn't seem to know about the directives that mod_python ads. I have this inside a virtualhost directive:

<Directory /home/staff/ken/public_html/static>
          AllowOverride FileInfo
          AddHandler python-program .py
          PythonHandler foo
          PythonDebug On
</Directory>

and when I try to do a configtest with apache, I get:

$ sudo /usr/local/apache/bin/apachectl configtest
Syntax error on line 1138 of /usr/local/apache/conf/httpd.conf:
Invalid command 'PythonHandler', perhaps mis-spelled or defined by a module not included in the server configuration

Any words of wisdom?

-- 
Ken Kinder
www.kenkinder.com

From peter at wslogic.com  Mon Nov 27 18:32:26 2000
From: peter at wslogic.com (peter@wslogic.com)
Date: Fri Jan  9 21:52:11 2004
Subject: [mod_python] problems with RH 7 RPM
Message-ID: <3A22EF0A.7DE907E0@wslogic.com>

has anyone had any problems with the Red Hat 7 and using the RPM.  When
I install the RPM it kills my httpd, and it won't work until I uninstall
mod_python?


-- 
Peter Halliday

From miguel at yorku.ca  Wed Nov 29 15:00:44 2000
From: miguel at yorku.ca (Miguel Marques)
Date: Fri Jan  9 21:52:11 2004
Subject: [mod_python] Problem with req.connection.user being readonly...
Message-ID: <20001129150044Z.miguel@yorku.ca>

Greetings...

I've rewritten a authentication handler I had written in mod_perl in
mod_python.   The handler does not use basic auth for authentication.
It uses it's own html form and then a cookie gets set which is checked
by the access handler.  This is a generic authentication handler which
I use to control access to a number of different applications. 

Most of those applications don't need req.connection.user (they look
at the cookie) but today I tried to migrate one that does.  Since
req.connection.user is read only I can't make things work.  In
mod_perl one simply assigns to that variable.  Is there any reason why
req.connection.user can't be made read/write?  
Thanks for any suggestions...

							Miguel

C. Miguel Marques, York University, Computing & Network Services
e-mail: miguel@yorku.ca, voice: (416)736-2100x22684, fax: (416)736-5830

From grisha at ispol.com  Wed Nov 29 16:22:48 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:11 2004
Subject: [mod_python] Problem with req.connection.user being readonly...
In-Reply-To: <20001129150044Z.miguel@yorku.ca>
Message-ID: <Pine.LNX.4.21.0011291622230.18389-100000@saturn.ispol.com>

I'll see about making it read/write in the next release.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Wed, 29 Nov 2000, Miguel Marques wrote:

> Greetings...
> 
> I've rewritten a authentication handler I had written in mod_perl in
> mod_python.   The handler does not use basic auth for authentication.
> It uses it's own html form and then a cookie gets set which is checked
> by the access handler.  This is a generic authentication handler which
> I use to control access to a number of different applications. 
> 
> Most of those applications don't need req.connection.user (they look
> at the cookie) but today I tried to migrate one that does.  Since
> req.connection.user is read only I can't make things work.  In
> mod_perl one simply assigns to that variable.  Is there any reason why
> req.connection.user can't be made read/write?  
> Thanks for any suggestions...
> 
> 							Miguel
> 
> C. Miguel Marques, York University, Computing & Network Services
> e-mail: miguel@yorku.ca, voice: (416)736-2100x22684, fax: (416)736-5830
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From miguel at yorku.ca  Wed Nov 29 17:53:24 2000
From: miguel at yorku.ca (Miguel Marques)
Date: Fri Jan  9 21:52:11 2004
Subject: [mod_python] Problem with req.connection.user being readonly...
In-Reply-To: <Pine.LNX.4.21.0011291622230.18389-100000@saturn.ispol.com>
References: <20001129150044Z.miguel@yorku.ca>
	<Pine.LNX.4.21.0011291622230.18389-100000@saturn.ispol.com>
Message-ID: <20001129175324S.miguel@yorku.ca>

On Wed, 29 Nov 2000 16:22:48 -0500 (EST), Gregory Trubetskoy <grisha@ispol.com> wrote:
> 
> I'll see about making it read/write in the next release.
> 
But, I was hoping you would say that you did that yesterday and I
should get mod_python from CVS.  ;-)

I needed to get this to work by tommorow so here's a diff in case it
might be useful to you.  Seems to work and not crash anything.
I just added it as method of the request object.

begin 660 user.diff
M*BHJ(')E<75E<W1O8FIE8W0N8PDR,# P+S$Q+S(Y(#(Q.C,Y.C,Q"3$N,0HM
M+2T@<F5Q=65S=&]B:F5C="YC"3(P,# O,3$O,CD@,C(Z,#$Z,#$**BHJ*BHJ
M*BHJ*BHJ*BHJ"BHJ*B V,S$L-C,V("HJ*BH*+2TM(#8S,2PV-3,@+2TM+0H@
M( H@('T*(" **R O*@HK(" J(')E<75E<W0N<V5T7V-O;FYE8W1I;VY?=7-E
M<BAR97%U97-T('-E;&8L('-T<FEN9R!U<V5R*0HK(" J"BL@("H@(" @($%L
M;&]W<R!S971T:6YG(&]F(')E<2T^8V]N;F5C=&EO;BT^=7-E<B!T;R!U<V5R
M('!A<F%M971E<@HK(" J+PHK('-T871I8R!0>4]B:F5C=" J<F5Q7W-E=%]C
M;VYN96-T:6]N7W5S97(H<F5Q=65S=&]B:F5C=" J<V5L9BP@4'E/8FIE8W0@
M*F%R9W,I"BL@>PHK(" @("!C:&%R("IT:&5U<V5R.PHK( HK(" @("!I9B H
M(2!0>4%R9U]087)S951U<&QE*&%R9W,L(")S(BP@)G1H975S97(I*2 **R @
M(" @(" @(')E='5R;B!.54Q,.PHK(" @(" **R @(" @<V5L9BT^<F5Q=65S
M=%]R96,M/F-O;FYE8W1I;VXM/G5S97(@/2!A<%]P<W1R9'5P*'-E;&8M/G)E
M<75E<W1?<F5C+3YP;V]L+"!T:&5U<V5R*3L**R @(" @4'E?24Y#4D5&*%!Y
M7TYO;F4I.PHK(" @("!R971U<FX@4'E?3F]N93L**R!]"BL@"B @<W1A=&EC
M(%!Y365T:&]D1&5F(')E<75E<W1O8FIE8W1M971H;V1S6UT@/2!["B @(" @
M('LB861D7V-O;6UO;E]V87)S(BP@(" @(" H4'E#1G5N8W1I;VXI(')E<5]A
M9&1?8V]M;6]N7W9A<G,L(" @(" @34542%]605)!4D=3?2P*(" @(" @>R)A
M9&1?:&%N9&QE<B(L(" @(" @(" @("A0>4-&=6YC=&EO;BD@<F5Q7V%D9%]H
M86YD;&5R+" @(" @(" @("!-151(7U9!4D%21U-]+ HJ*BHJ*BHJ*BHJ*BHJ
M*BH**BHJ(#8T-BPV-3$@*BHJ*@HM+2T@-C8S+#8V.2 M+2TM"B @(" @('LB
M<F5G:7-T97)?8VQE86YU<"(L(" @(" H4'E#1G5N8W1I;VXI(')E<5]R96=I
M<W1E<E]C;&5A;G5P+" @(" @34542%]605)!4D=3?2P*(" @(" @>R)S96YD
M7VAT='!?:&5A9&5R(BP@(" @("A0>4-&=6YC=&EO;BD@<F5Q7W-E;F1?:'1T
M<%]H96%D97(L(" @("!-151(7U9!4D%21U-]+ H@(" @("![(G=R:71E(BP@
M(" @(" @(" @(" @(" @*%!Y0T9U;F-T:6]N*2!R97%?=W)I=&4L(" @(" @
M(" @(" @(" @($U%5$A?5D%205)'4WTL"BL@(" @('LB<V5T7V-O;FYE8W1I
M;VY?=7-E<B(L(" H4'E#1G5N8W1I;VXI(')E<5]S971?8V]N;F5C=&EO;E]U
M<V5R+" @34542%]605)!4D=3?2P*(" @(" @>R!.54Q,+"!.54Q,('T@+RH@
4<V5N=&EN96P@*B\*("!].PH@( H*
 
end

Take care.

						Miguel

C. Miguel Marques, York University, Computing & Network Services
e-mail: miguel@yorku.ca, voice: (416)736-2100x22684, fax: (416)736-5830

From marknen at usa.net  Thu Nov  2 09:47:50 2000
From: marknen at usa.net (Mark Nenadov)
Date: Fri Jan  9 21:58:41 2004
Subject: [mod_python] (no subject)
Message-ID: <20001102144750.2386.qmail@nwcst291.netaddress.usa.net>

Hello all! I have a problem. I have attempted to install 'mod_python' on my
Windows 98 (4.10.1998) machine using the instructions that are given at
"http://www.modpython.org/live/mod_python-2.6/doc/windows.html".

When I start up my Apache server it gives me the following output:

   'import exceptions' failed; use -v for traceback
   Warning!  Falling back to string-based exceptions
   'import site' failed; use -v for traceback
   Apache/1.3.11 (Win32) mod_python/2.6 Python/1.5.2 running...
   'import exceptions' failed; use -v for traceback
   Warning!  Falling back to string-based exceptions
   'import site' failed; use -v for traceback

I am running Apache version 1.3.11 for Win32. I am using the Python code given
in the example for installing mod_python for Windows. I have ActivePython 2.0
(build 202) based on Python 2.0. That is the first "potential problem" that
comes to mind. When the documentation gives the requirement of "Python 1.5.2",
does it require that version specifically, or does it just mean 1.5.2 or
greater? 

I can easily switch back to 1.5.2 if thats what its going to take to make this
work. However, elsewhere on modpython.org it says : "At this time, mod_python
works with Python 1.5.2, 1.6 and 2.0".

From grisha at ispol.com  Thu Nov  2 10:52:30 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:41 2004
Subject: [mod_python] (no subject)
In-Reply-To: <20001102144750.2386.qmail@nwcst291.netaddress.usa.net>
Message-ID: <Pine.LNX.4.21.0011021049570.17431-100000@saturn.ispol.com>

I just put another DLL on the site compiled with Python 2.0 see if that
works. Also note that the 2.6 windows instructions had a typo in them in
the last step of "installing mod_python libraries". I updated the link on
the website to point to
http://www.modpython.org/live/mod_python-2.6.3/doc/windows.html

P.S. Why don't you use a real operating system? ;-)

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On 2 Nov 2000, Mark Nenadov wrote:

> Hello all! I have a problem. I have attempted to install 'mod_python' on my
> Windows 98 (4.10.1998) machine using the instructions that are given at
> "http://www.modpython.org/live/mod_python-2.6/doc/windows.html".


From jjp at connix.com  Thu Nov  2 12:00:54 2000
From: jjp at connix.com (John Posner)
Date: Fri Jan  9 21:58:41 2004
Subject: [mod_python] Virtual documents and mod_python
Message-ID: <001d01c044ee$772ae920$6e64fea9@jake>

Hi --

I've been successful using this technique to get a Python script to handle a
standard HTTP request:

<Directory <Document Root>/python>
  AddHandler python-program .py
  PythonHandler test
  PythonDebug on
</Directory>

But I don't want or need to create an actual directory containing the Python
script. I'd like to create a virtual document location:

<Location <Document Root>/py_xmlrpc>
  SetHandler python-script
  PythonHandler py_xmlrpc
</Location>

I've used this technique successfully with Perl, but it doesn't work with
Python. Apache thinks it's a request for a real document. And fooling around
with relative/absolute specs as the Location parameter doesn't make any
difference.

Can anyone help?

Tx,
John

--
John Posner, Editor           jjp@oreilly.com
O'Reilly & Associates         860-663-3147


From grisha at ispol.com  Thu Nov  2 17:50:27 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:41 2004
Subject: [mod_python] Virtual documents and mod_python
In-Reply-To: <001d01c044ee$772ae920$6e64fea9@jake>
Message-ID: <Pine.LNX.4.21.0011021736010.18432-100000@saturn.ispol.com>

It should work just fine. The only catch is that since <location>
directives have no physical path associated with them, you have to
make sure that your sripts are in PythonPath.

What problem are you having?

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Thu, 2 Nov 2000, John Posner wrote:

> Hi --
> 
> I've been successful using this technique to get a Python script to handle a
> standard HTTP request:
> 
> <Directory <Document Root>/python>
>   AddHandler python-program .py
>   PythonHandler test
>   PythonDebug on
> </Directory>
> 
> But I don't want or need to create an actual directory containing the Python
> script. I'd like to create a virtual document location:
> 
> <Location <Document Root>/py_xmlrpc>
>   SetHandler python-script
>   PythonHandler py_xmlrpc
> </Location>
> 
> I've used this technique successfully with Perl, but it doesn't work with
> Python. Apache thinks it's a request for a real document. And fooling around
> with relative/absolute specs as the Location parameter doesn't make any
> difference.
> 
> Can anyone help?
> 
> Tx,
> John
> 
> --
> John Posner, Editor           jjp@oreilly.com
> O'Reilly & Associates         860-663-3147
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From grisha at ispol.com  Thu Nov  2 18:30:43 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:41 2004
Subject: [mod_python] Virtual documents and mod_python
In-Reply-To: <3A01F325.F8B56ECD@infostreet.com>
Message-ID: <Pine.LNX.4.21.0011021828470.18644-100000@saturn.ispol.com>

Good catch! it *should* be python-program.

On Thu, 2 Nov 2000, Cameron La Rue wrote:
> 
> > > <Location <Document Root>/py_xmlrpc>
> > >   SetHandler python-script
> > >   PythonHandler py_xmlrpc
> > > </Location>
>
> I thought you had to say python-program, not python-script?


From dwallace at delanet.com  Fri Nov  3 21:54:59 2000
From: dwallace at delanet.com (Dave)
Date: Fri Jan  9 21:58:41 2004
Subject: [mod_python] Threaded Python and mod_python
Message-ID: <3A037A83.9070800@delanet.com>

Hi Greg,

I just downloaded the 2.6.3 version of mod_python and ran configure. In 
addition to checking my blood pressure ( a very nice feature, maybe 2.7 
can do a CAT scan), it reported the following warning:

****** WARNING ******
  Python is compiled with thread support. Apache 1.3 does not use threads.
  On some systems this will cause problems during compilation, on others
  it may result in unpredictable behaviour of your Apache server. Yet on
  others it will work just fine. The recommended approach is to compile
  Python without thread support in a separate location and specify it with
  --with-python option to this ./configure script.


It compiles and appears to work fine for me (Python 2.0, Apache 1.3.12, 
Linux 2.2.16), but of apparently this could bite at any time. Can you 
expound a little more on the nature of this problem and if there are 
other solutions than not having threads?

Dave.


From grisha at ispol.com  Fri Nov  3 23:04:16 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:41 2004
Subject: [mod_python] Threaded Python and mod_python
In-Reply-To: <3A037A83.9070800@delanet.com>
Message-ID: <Pine.LNX.4.21.0011032251040.23312-100000@saturn.ispol.com>

On Fri, 3 Nov 2000, Dave wrote:

> Hi Greg,
> 
> I just downloaded the 2.6.3 version of mod_python and ran configure. In 
> addition to checking my blood pressure 

:-)

> ( a very nice feature, maybe 2.7 can do a CAT scan), it reported the
> following warning:
> 
> ****** WARNING ******
>   Python is compiled with thread support. Apache 1.3 does not use threads.
>   On some systems this will cause problems during compilation, on others

This is platform dependend, and frankly I'm not much of a thread expert. I
know on FreeBSD you will get unresolved symbols at link time when trying
to mix threaded and non threaded code. This is because it links against
separate versions of C libraries.

I don't know if this applies to Linux or Solaris. I know some people have
reported segfaults on RH if mod_python is not the first module listed, and
I have a suspicion that it is thread-related.

So that warning is exactly that - just a warning.

Perhpas someone on this list more knoledgeale on the subject can shed some
light on this?

[P.S. lest someone reading this gets the wrong idea - mod_python *is*
thread safe, it couldn't run on Win32 if it wasn't]

Grisha


From jjp at connix.com  Fri Nov  3 23:04:40 2000
From: jjp at connix.com (John Posner)
Date: Fri Jan  9 21:58:41 2004
Subject: [mod_python] Where's Fredrik
Message-ID: <000101c04614$5cb945b0$6e64fea9@jake>

Does anyone know how to contact Fredrik Lundh, the author of the (only?)
Python XML-RPC implementation?

These don't seem to work for me:

  fredrik@pythonware.com
  effbot@telia.com


Thanks,
John

--
John Posner, Editor           jjp@oreilly.com
O'Reilly & Associates         860-663-3147


From randy at teamkern.net  Sat Nov  4 23:42:09 2000
From: randy at teamkern.net (Randall Kern)
Date: Fri Jan  9 21:58:41 2004
Subject: [mod_python] add_handler
Message-ID: <0cbc01c046fb$e7271e10$1f00a8c0@spoke.net>

Sorry if this has been covered before, I checked the archives and google, but couldn't find anything.

I am using a PythonTransHandler to map certain requests to files, and then invoke a PythonHandler for those files using request.add_handler.  However, my main handler function is never called.

in /foo/foo.py:

from mod_python import apache

def handler(req):
    req.send_http_header()
    req.write("Hello World!\nProcessing on behalf of %s\nFrom foo.py" % req.filename
    return apache.OK

def transhandler(req):

    if stuff:  # stuff is actually a rather complex bit of code...
        req.add_handler("PythonHandler", "foo::handler", "/foo")
        apache.log_error("just called add_handler")
        return apache.OK

    return apache.DECLINED




My error_log file does in fact get the entry "just called...", but the browser always gets the contents of req.filename, NOT the "Hello World..." message from foo.handler.

If I add a SetHandler python-program to my httpd.conf file, the handler() function gets called. It's only when I try to dynamically add the handler that it doesn't work.

Ideas?

Thanks,
-Randy

P.S. python 2.0, apache 1.3.14, mod_python 2.6.3
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20001104/65674beb/attachment-0002.htm
From jhh at msu.edu  Wed Nov  8 04:24:47 2000
From: jhh at msu.edu (John H. Hayes)
Date: Fri Jan  9 21:58:41 2004
Subject: [mod_python] Python SCRIPT Fails When Running Through Python Module
Message-ID: <3A091BDF.6A5CA2F2@msu.edu>

When I attempt to run the test script that is described in the modpython
installation documentation
I get the following information in my web client:
Mod_python error: "PythonHandler test"

Traceback (most recent call last):

  File
"/usr/local/opt/Python-2.0/lib/python2.0/site-packages/mod_python/apache.py",
line 175, in Dispatch
    module = import_module(module_name, _req)

  File
"/usr/local/opt/Python-2.0/lib/python2.0/site-packages/mod_python/apache.py",
line 316, in import_module
    module = __import__(module_name)

ImportError: No module named test

It appears there is some configuration problem, but I set things up as
described.

If anybody can shed some light on this I would appreciate it.

Thanks,
John Hayes



From grisha at ispol.com  Thu Nov  9 09:10:47 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:41 2004
Subject: [mod_python] Re: mod_python
In-Reply-To: <3A0AA011.CF6E2C1C@jeremias.net>
Message-ID: <Pine.LNX.4.21.0011090906190.10075-100000@saturn.ispol.com>

[cc-ing the list in case someone has a better answer]

Unfortunately I don't have access to Mandrake and know next to nothing
about it. Is it supposed to be RedHat compatible?

The RPM on the site is RedHat-specific as it makes some assumptions about
what is in the httpd.conf file. I also don't know how compatible it is as
far as libc versions, etc.

Unless someone has a Mandrake RPM out there, my recommendation would be to
compile it from sources.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Thu, 9 Nov 2000, Jason Jeremias wrote:

> Okay,
> 
> OS: Linux Mandrake 7.2
> Apache 1.3.14 that came with it via RPM
> Python 1.5.2 also from mandrake rpm
> mod_python came from the website the RPM.
> 
> Standard config that came with the system.  With the exception of the
> mod_python stuff loaded in it. This is the output from the apache error
> log file.
> [Tue Nov  7 03:34:20 2000] [notice] Apache-AdvancedExtranetServer/1.3.14
> (Linux-Mandrake/2mdk) mod_python/2.6.3 Python/1.5.2 configured --
> resuming normal operations
> [Tue Nov  7 03:34:59 2000] [notice] child pid 32518 exit signal
> Segmentation fault (11)
> [Thu Nov  9 03:56:09 2000] [notice] child pid 32527 exit signal
> Segmentation fault (11)
> 
> let me know if there is anything else I can send you that may help.
> 
> I usually have PHP loaded in Apache as well but I was trying to get
> mod_python working before I put PHP in to eliminate some possible
> problems.
> 
> thanks for the reply.
> 
> -Jason 
> 


From aiglauer at yahoo.com  Fri Nov 10 00:58:04 2000
From: aiglauer at yahoo.com (Alexis Iglauer)
Date: Fri Jan  9 21:58:42 2004
Subject: [mod_python] Re: mod_python
Message-ID: <20001110085804.3371.qmail@web2204.mail.yahoo.com>

I have mod_python working on MDK 6.0, 7.0 and 7.1 - no
problem.  I get the DEAPI warning, which I happily
ignore.  I usually have to change apache.py and put
'/usr/lib/python1.5/site-packages/mod_python' in the
sys.path so that 'cgihandler.py' gets found, but that
is probably because I am too lazy to set PYTHONPATH. 
Problem has reduced since I now write my own handlers
:)

Apache 1.3.[4,6,12], mod_python 2.[0,2,6]

HTH
ax

--- Gregory Trubetskoy <grisha@ispol.com> wrote:
> 
> [cc-ing the list in case someone has a better
> answer]
> 
> Unfortunately I don't have access to Mandrake and
> know next to nothing
> about it. Is it supposed to be RedHat compatible?
> 
> The RPM on the site is RedHat-specific as it makes
> some assumptions about
> what is in the httpd.conf file. I also don't know
> how compatible it is as
> far as libc versions, etc.
> 
> Unless someone has a Mandrake RPM out there, my
> recommendation would be to
> compile it from sources.
> 
> --
>   Gregory (Grisha) Trubetskoy
>        grisha@ispol.com
> 
> On Thu, 9 Nov 2000, Jason Jeremias wrote:
> 
> > Okay,
> > 
> > OS: Linux Mandrake 7.2
> > Apache 1.3.14 that came with it via RPM
> > Python 1.5.2 also from mandrake rpm
> > mod_python came from the website the RPM.
> > 
> > Standard config that came with the system.  With
> the exception of the
> > mod_python stuff loaded in it. This is the output
> from the apache error
> > log file.
> > [Tue Nov  7 03:34:20 2000] [notice]
> Apache-AdvancedExtranetServer/1.3.14
> > (Linux-Mandrake/2mdk) mod_python/2.6.3
> Python/1.5.2 configured --
> > resuming normal operations
> > [Tue Nov  7 03:34:59 2000] [notice] child pid
> 32518 exit signal
> > Segmentation fault (11)
> > [Thu Nov  9 03:56:09 2000] [notice] child pid
> 32527 exit signal
> > Segmentation fault (11)
> > 
> > let me know if there is anything else I can send
> you that may help.
> > 
> > I usually have PHP loaded in Apache as well but I
> was trying to get
> > mod_python working before I put PHP in to
> eliminate some possible
> > problems.
> > 
> > thanks for the reply.
> > 
> > -Jason 
> > 
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python


__________________________________________________
Do You Yahoo!?
Thousands of Stores.  Millions of Products.  All in one Place.
http://shopping.yahoo.com/

From haering_python at gmx.de  Sat Nov 11 05:59:24 2000
From: haering_python at gmx.de (Gerhard =?ISO-8859-1?Q?H=E4ring?=)
Date: Fri Jan  9 21:58:42 2004
Subject: [mod_python] Corrupt win32 build
Message-ID: <11983.973918764@www33.gmx.net>

Hi folks,

I just wanted to test the win32 build for mod_python I got from the
project's homepage. Apache says that mod_python.dll is not a valid Windows image.
And if I try to examine the file with the Microsoft Dependency Walker, I get
more or less the same information. Maybe something did go wrong while the
contributor uploaded his files? Could you upload your files again, please?

Gerhard

-- 
Sent through GMX FreeMail - http://www.gmx.net


From haering_python at gmx.de  Sat Nov 11 06:32:27 2000
From: haering_python at gmx.de (Gerhard =?ISO-8859-1?Q?H=E4ring?=)
Date: Fri Jan  9 21:58:42 2004
Subject: [mod_python] Corrupt win32 build
References: <11983.973918764@www33.gmx.net>
Message-ID: <22208.973920747@www33.gmx.net>

Sorry, I was a fool. It was most probably my Netscape browser's fault that
I  got invalid binaries after downloading. I used wget and the download
worked. I installed mod_python and the test module described in the Win32
install page. Then I wanted to see how it was stability-wise.

/usr/sbin/ab -n 10000 http://lilith/python/test.py

worked fine, while the stress test with 5 parallel requests

/usr/sbin/ab -c 5 -n 10000 http://lilith/python/test.py

crashes Apache in the mod_python module several times. I have Windows
2000,  on a SMP machine, Apache 1.3.12 and ActiveState Python 2.0. Seems like a
threading issue to me ...

Gerhard

-- 
Sent through GMX FreeMail - http://www.gmx.net


From sbi at acse.be  Sun Nov 12 22:57:52 2000
From: sbi at acse.be (=?iso-8859-1?Q?St=E9phane_Bidoul?=)
Date: Fri Jan  9 21:58:42 2004
Subject: [mod_python] Corrupt win32 build
References: <11983.973918764@www33.gmx.net> <22208.973920747@www33.gmx.net>
Message-ID: <003201c04cf3$a1609840$cda679c1@cat>

The win32 version has got some basic testing and debugging
wrt threading; I'll test again with ab as soon as find time for that.
However, I've no SMP machine... so my test will be a bit biased.

-stephane

----- Original Message ----- 
From: "Gerhard H?ring" <haering_python@gmx.de>
To: <mod_python@modpython.org>
Sent: Saturday, November 11, 2000 6:32 AM
Subject: Re: [mod_python] Corrupt win32 build


> Sorry, I was a fool. It was most probably my Netscape browser's fault that
> I  got invalid binaries after downloading. I used wget and the download
> worked. I installed mod_python and the test module described in the Win32
> install page. Then I wanted to see how it was stability-wise.
> 
> /usr/sbin/ab -n 10000 http://lilith/python/test.py
> 
> worked fine, while the stress test with 5 parallel requests
> 
> /usr/sbin/ab -c 5 -n 10000 http://lilith/python/test.py
> 
> crashes Apache in the mod_python module several times. I have Windows
> 2000,  on a SMP machine, Apache 1.3.12 and ActiveState Python 2.0. Seems like a
> threading issue to me ...
> 
> Gerhard
> 
> -- 
> Sent through GMX FreeMail - http://www.gmx.net
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From phil at munen.net  Sun Nov 12 23:47:31 2000
From: phil at munen.net (phil suh)
Date: Fri Jan  9 21:58:42 2004
Subject: [mod_python] Apache warning: this module might crash under EAPI!
Message-ID: <Pine.LNX.4.10.10011122333140.10702-100000@sushi.munen.net>

I'm compiling Apache 1.3.14 w/ mod_so, mod_ssl, mod_perl baked in.
I want to add mod_python as a DSO. I had to recompile Python-2.0 without
threads since the BeOpen-Python 2.0 has threads turned on.

After compiling mod_python, editing httpd.conf, and restarting Apache, it
works, but Apache gives a warning:

$ sudo /etc/rc.d/init.d/httpd start
[Mon Nov 13 00:29:45 2000] [warn] Loaded DSO libexec/mod_python.so uses
plain Apache 1.3 API, this module might crash under EAPI! (please
recompile it with -DEAPI)
/etc/rc.d/init.d/httpd start: httpd started

I searched Google, and found a guy who claims that this is an mod_ssl
related thing, and if the mod doesn't use ssl, I don't need to worry
about it (http://www.geocrawler.com/archives/3/97/2000/3/0/3511640/).

Is this true?

Is there a way to recompile w/ -DEAPI? Can someone explain, step by step,
how to do it?  (I'd rather not have to live with that warning...bugs me).

Thanks in advance for your help.

Phil Suh
Apache compilng-newbie, python enthusiast.

P.S. How I compiled mod_python:

[phil mod_python-2.6.3] $ pwd
/usr/local/src/httpd/mod_python-2.6.3
[phil mod_python-2.6.3] $ ./configure \
> --with-python=/usr/local/src/Python-2.0 \ 
> --with-apxs=/usr/local/apache.org/httpd/bin/apxs \
> --with-apache=/usr/local/src/httpd/apache_1.3.14
[phil mod_python-2.6.3] $ make dso
[phil mod_python-2.6.3] $ sudo make install


==================================
phil@munen.net
http://munen.net/~phil/


From aiglauer at iname.com  Tue Nov 14 00:03:25 2000
From: aiglauer at iname.com (Alexis Iglauer)
Date: Fri Jan  9 21:58:42 2004
Subject: [mod_python] Graphs in a webpage
Message-ID: <006f01c04dc5$f93e9c60$0401a8c0@charis>

This may be the wrong forum for this, but......

I am writing an app which takes data out of text files and makes graphs.
The user interactively specifies the graphs in a browser, with everything
being done in Python as a handler.  The resulting page can have 10+ graphs
on it.

Problem is, my solution is sloooooow.  I am using gdchart to generate the
graphs on the fly (<img src="grph.py?color=0x0000ff" alt="xxx"> and plain
vanilla python for the rest.

I am not sure whether reading the ASCII files is slow and whether sticking
them into a database will be worth the effort (ideas, anyone?).  I get some
advantage when running apache single-threaded by checking whether my data is
already loaded, but as soon as I run apache normally this advantage
disappears.

I think the bottleneck is creating the graph, and in trying to solve that I
have a few questions regarding how mod_python works.  How long does an
instance of mod_python exist?  When is an instance destroyed?  What data can
be passed from one instance to the next?  Also, does anyone have any ideas
on how to efficiently generate graphs from a reasonably large number of
datapoints?

Thanks in advance
Alexis


From benno at sesgroup.net  Tue Nov 14 10:25:14 2000
From: benno at sesgroup.net (Ben Leslie)
Date: Fri Jan  9 21:58:42 2004
Subject: [mod_python] Graphs in a webpage
In-Reply-To: <006f01c04dc5$f93e9c60$0401a8c0@charis>; from aiglauer@iname.com on Tue, Nov 14, 2000 at 12:03:25AM +0100
References: <006f01c04dc5$f93e9c60$0401a8c0@charis>
Message-ID: <20001114102514.I14092@bob.sesgroup.net>

> This may be the wrong forum for this, but......

<snip>
 
> I am not sure whether reading the ASCII files is slow and whether sticking
> them into a database will be worth the effort (ideas, anyone?).  I get some
> advantage when running apache single-threaded by checking whether my data is
> already loaded, but as soon as I run apache normally this advantage
> disappears.

Database is almost always going to be slower than reading from ascii files.
 
> I think the bottleneck is creating the graph, and in trying to solve that I
> have a few questions regarding how mod_python works.  How long does an
> instance of mod_python exist?  When is an instance destroyed?  What data can
> be passed from one instance to the next? 

There is one insatnce of you handler is created for each apache thread. So
it will be there until the apache thread is killed. You can therfore cache
data between requests. I think you can communicate between different threads
but you probably don't want to.

I doubt mod_python would be your bottleneck. How long does graph.py take
to create a graph from the command line?

> Also, does anyone have any ideas
> on how to efficiently generate graphs from a reasonably large number of
> datapoints?

Gnuplot maybe.


Cheers,

Benno

From grisha at ispol.com  Mon Nov 13 22:07:38 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:42 2004
Subject: [mod_python] Graphs in a webpage
In-Reply-To: <006f01c04dc5$f93e9c60$0401a8c0@charis>
Message-ID: <Pine.LNX.4.21.0011132153470.3701-100000@saturn.ispol.com>

I used gd with nsapy on a windows machine in 1997 and it was very very
fast (considering computers were slow back then). Yahoo uses it on their
quotes.yahoo.com of all other tools, mrtg uses it, it's probably the
fastest thign out there.

The things that are the slowest are repetetive operations that involve
memory allocations - e.g. if you're building some large list from the
ascii files one byte at a time and your ascii file is 90K, it will be
slow. You will see a big improvement if you only build the list once and
cache it inside a module somewhere. 

If your content is dynamic and cannot be cached, then try to avoid things
like readlines() of the whole file, then copying it some list. A much
faster solution is to read the file as you need the data avoiding all
unnecessary mallocs.

A database may make things faster - it very much depends on what you
do. For example if you try to process data in some way, i.e. sort or
select records, etc, then most definitely a database, especially if ran on
a separate server will give you an improvement. 

If you're just using it as flat file storage, then it will be about as
fast as a file, perhaps a little slower.

mod_python interpreter lives as long the as the apache process (or in case
of win32 thread) lives. The simplest way to cache data is to use the
Python "import" mechanism - make a module that reads all your ascii files,
then import it from a script. Python only imports once the first time and
ignores all subsequent requests - perfect for caching.

HTH

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Tue, 14 Nov 2000, Alexis Iglauer wrote:

> This may be the wrong forum for this, but......
> 
> I am writing an app which takes data out of text files and makes graphs.
> The user interactively specifies the graphs in a browser, with everything
> being done in Python as a handler.  The resulting page can have 10+ graphs
> on it.
> 
> Problem is, my solution is sloooooow.  I am using gdchart to generate the
> graphs on the fly (<img src="grph.py?color=0x0000ff" alt="xxx"> and plain
> vanilla python for the rest.
> 
> I am not sure whether reading the ASCII files is slow and whether sticking
> them into a database will be worth the effort (ideas, anyone?).  I get some
> advantage when running apache single-threaded by checking whether my data is
> already loaded, but as soon as I run apache normally this advantage
> disappears.
> 
> I think the bottleneck is creating the graph, and in trying to solve that I
> have a few questions regarding how mod_python works.  How long does an
> instance of mod_python exist?  When is an instance destroyed?  What data can
> be passed from one instance to the next?  Also, does anyone have any ideas
> on how to efficiently generate graphs from a reasonably large number of
> datapoints?
> 
> Thanks in advance
> Alexis
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From aiglauer at yahoo.com  Tue Nov 14 02:45:56 2000
From: aiglauer at yahoo.com (Alexis Iglauer)
Date: Fri Jan  9 21:58:42 2004
Subject: [mod_python] Graphs in a webpage
Message-ID: <20001114104556.24954.qmail@web2205.mail.yahoo.com>

First of all, thank you to everyone for the pointers.
 
> I used gd with nsapy on a windows machine in 1997

Will check it out, thanks....

> The things that are the slowest are repetetive
> operations that involve
> memory allocations - e.g. if you're building some
> large list from the
> ascii files one byte at a time and your ascii file
> is 90K, it will be
> slow. You will see a big improvement if you only
> build the list once and
> cache it inside a module somewhere. 
> 

I am using the following construct often:

i = open (datafile)
l = i.readlines()
i.close()

on 200KB+ files - looks like that could be the problem
:)  Is it more efficient to loop using

for l in i.readlines():      ?

My datafiles are time series data, usually for 24
hours at a time, so I will have a whole bunch of
datafiles which make up a contiguous set of data over
several days/months/years.  The last datafile will
probably always be growing.  A two-stage caching
module may do the trick.

> If your content is dynamic and cannot be cached,
> then try to avoid things
> like readlines() of the whole file, then copying it
> some list. A much
> faster solution is to read the file as you need the
> data avoiding all
> unnecessary mallocs.
 

This seems to answer my question above in the
positive.  I will however still be reading all my
datafiles every time.

> Python "import" mechanism - make a module that reads
> all your ascii files,
> then import it from a script. Python only imports
> once the first time and
> ignores all subsequent requests - perfect for
> caching.

Does "first time" here mean the first time apache is
started or the first time an apache process is
(re)started?

> HTH

Yup, thanks
aei 




__________________________________________________
Do You Yahoo!?
Yahoo! Calendar - Get organized for the holidays!
http://calendar.yahoo.com/

From grisha at ispol.com  Tue Nov 14 10:22:48 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:42 2004
Subject: [mod_python] Graphs in a webpage
In-Reply-To: <20001114104556.24954.qmail@web2205.mail.yahoo.com>
Message-ID: <Pine.LNX.4.21.0011141015370.5926-100000@saturn.ispol.com>

On Tue, 14 Nov 2000, Alexis Iglauer wrote:
> 
> First of all, thank you to everyone for the pointers.
>  
> > I used gd with nsapy on a windows machine in 1997
> 
> Will check it out, thanks....

You're using it already.

> My datafiles are time series data, usually for 24
> hours at a time, so I will have a whole bunch of
> datafiles which make up a contiguous set of data over
> several days/months/years.

Sounds like you need a function that checks the file modification dat and
reads it only if it has been changed.

>  The last datafile will probably always be growing.  A two-stage
> caching module may do the trick.

I don't know what you're doing there, but I suspect you may benefit
from RRDTool (http://ee-staff.ethz.ch/~oetiker/webtools/rrdtool/)

> > Python "import" mechanism - make a module that reads all your
> > ascii files,
> 
> Does "first time" here mean the first time apache is started or the
> first time an apache process is (re)started?

It would be whenever that import statement is executed, which usually is
at the first hit after apache was (re) started. There is also a
PythonImport directive, which will allow you to do this at process start
up time rather than the first hit, but PythonImport has some caveats (read
the docs)

Grisha


From gps at trix.dircon.co.uk  Wed Nov 15 19:56:52 2000
From: gps at trix.dircon.co.uk (Graham Swallow)
Date: Fri Jan  9 21:58:42 2004
Subject: [mod_python] Re: Graphs in a webpage
In-Reply-To: <200011151200.MAA02390@mercury.ispol.com>
Message-ID: <Pine.LNX.4.04.10011151937590.752-100000@trix.dircon.co.uk>

On Tue, 14 Nov 2000, Alexis Iglauer wrote:

> My datafiles are time series data, usually for 24
> hours at a time, so I will have a whole bunch of
> datafiles which make up a contiguous set of data over
> several days/months/years.

	I have a similar situation, but not in apache_mod.  The data is
	an array of floats (binary portable), one every minute for a week,
	over the year.

	Repackaging last weeks data is slow, but you dont do that for
	every request.

	I use Array to get it as a string, then I use zlib to get a string,
	then I 'escape' the data for MySql (using the standard function)
	and write it into a blob field.

	The data comes back with no need for un-escaping (its so that it
	goes into an SQL statement).

	Then I call a C function to convert the floats to doubles and
	create a BLT/Vector. Its very quick.

	Using GD (or whatever) should not be slow, but a bit of C at the
	right place means you move chunks of data around, not iterate
	python over thousands of items.

	The 'most recent' file obviously needs special treatment.
	You could re-process today every hour (hint: move, start new file,
	then process the moved file, if fail - dont delete).

	That still leaves you with a 'double' data source, first SQL, then
	the additional file.  Alternatively, get the data collector to
	post the data ...

	Graham


From grisha at ispol.com  Wed Nov 15 21:35:42 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:42 2004
Subject: [mod_python] Re: Graphs in a webpage
In-Reply-To: <Pine.LNX.4.04.10011151937590.752-100000@trix.dircon.co.uk>
Message-ID: <Pine.LNX.4.21.0011152134060.11986-100000@saturn.ispol.com>

This is somewhat off-subject, but IMHO the best tool for time-series data
storing and charting is RRDtool. It can produce charts for a year of data
in a split second.

Grisha

On Wed, 15 Nov 2000, Graham Swallow wrote:

> On Tue, 14 Nov 2000, Alexis Iglauer wrote:
> 
> > My datafiles are time series data, usually for 24
> > hours at a time, so I will have a whole bunch of
> > datafiles which make up a contiguous set of data over
> > several days/months/years.
> 
> 	I have a similar situation, but not in apache_mod.  The data is
> 	an array of floats (binary portable), one every minute for a week,
> 	over the year.
> 
> 	Repackaging last weeks data is slow, but you dont do that for
> 	every request.
> 
> 	I use Array to get it as a string, then I use zlib to get a string,
> 	then I 'escape' the data for MySql (using the standard function)
> 	and write it into a blob field.
> 
> 	The data comes back with no need for un-escaping (its so that it
> 	goes into an SQL statement).
> 
> 	Then I call a C function to convert the floats to doubles and
> 	create a BLT/Vector. Its very quick.
> 
> 	Using GD (or whatever) should not be slow, but a bit of C at the
> 	right place means you move chunks of data around, not iterate
> 	python over thousands of items.
> 
> 	The 'most recent' file obviously needs special treatment.
> 	You could re-process today every hour (hint: move, start new file,
> 	then process the moved file, if fail - dont delete).
> 
> 	That still leaves you with a 'double' data source, first SQL, then
> 	the additional file.  Alternatively, get the data collector to
> 	post the data ...
> 
> 	Graham
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From octos at austin.rr.com  Sun Nov 19 16:55:01 2000
From: octos at austin.rr.com (Eric Adam)
Date: Fri Jan  9 21:58:42 2004
Subject: [mod_python] Modules?
Message-ID: <4.3.2.7.2.20001119165253.00d37d00@pop-server>

Is there a source of user-built modules for use with mod_python?

I'm looking for a module that will present the contents of a POST in 
dictionary or similar form and would rather not re-invent the wheel.

Thanks.



From benno at sesgroup.net  Mon Nov 20 10:13:18 2000
From: benno at sesgroup.net (Ben Leslie)
Date: Fri Jan  9 21:58:42 2004
Subject: [mod_python] Modules?
In-Reply-To: <4.3.2.7.2.20001119165253.00d37d00@pop-server>; from octos@austin.rr.com on Sun, Nov 19, 2000 at 04:55:01PM -0600
References: <4.3.2.7.2.20001119165253.00d37d00@pop-server>
Message-ID: <20001120101318.A25682@bob.sesgroup.net>

On Sun, 19 Nov 2000, Eric Adam wrote:

> Is there a source of user-built modules for use with mod_python?
> 
> I'm looking for a module that will present the contents of a POST in 
> dictionary or similar form and would rather not re-invent the wheel.
> 

Check out the cgi handler in the python core. It has a lot of useful 
things like this.

Cheers,

Benno

From grisha at ispol.com  Sun Nov 19 20:48:58 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:42 2004
Subject: [mod_python] Modules?
In-Reply-To: <4.3.2.7.2.20001119165253.00d37d00@pop-server>
Message-ID: <Pine.LNX.4.21.0011192044580.4402-100000@saturn.ispol.com>

The next version of mod_python will have a module called mod_python.util
that does just that. If you can't wait until the next version, you can
pull it off sourceforge CVS
http://cvs.sourceforge.net/cgi-bin/cvsweb.cgi/~checkout~/mod_python/lib/python/mod_python/util.py?rev=1.1&content-type=text/plain&cvsroot=modpython

(this is very beta code, of course)

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Sun, 19 Nov 2000, Eric Adam wrote:

> Is there a source of user-built modules for use with mod_python?
> 
> I'm looking for a module that will present the contents of a POST in 
> dictionary or similar form and would rather not re-invent the wheel.
> 
> Thanks.
> 
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From ftian at cs.wisc.edu  Mon Nov 20 01:19:32 2000
From: ftian at cs.wisc.edu (Feng Tian)
Date: Fri Jan  9 21:58:42 2004
Subject: [mod_python] Help on installation
Message-ID: <Pine.LNX.3.96L.1001120011504.27742A-100000@cobra.cs.wisc.edu>

Hi,

I am trying to get mod_python working on linux RedHat 6.2
I downloaded an RPM, and configed httpd.conf

The error log of httpd says
 
could not import mod_python.apache
could not call init

I tried to import mod_python.apache from an interactive
python shell, and got message 
_apache 
is missing.

What's the problem?  Fix?

Thanks.

Feng



From thepoet at texas.net  Tue Nov 21 08:21:25 2000
From: thepoet at texas.net (thepoet@texas.net)
Date: Fri Jan  9 21:58:42 2004
Subject: [mod_python] Q : persistent objects/vars
Message-ID: <200011211421.IAA02649@mw2.texas.net>

I've sifted through all the relevant documentation
and the mailing list archives, so please excuse this
email if there happens to be any repitition.

As I understand it, when the apache server starts up,
python is called and the directory in which I've placed
my files receives a subinterpreter.  In attempting to
persist an object, would it be as simple as making a
variable 'global' (would all processes know of the global
no matter what since it is in the same subint and that
subint is persistent across processes?), or must
I attempt to use one of the funcs from the apache module
itself like req (which according to the list is now a persistent
python object).  And if I were to use req, how would I
make sure that every instance of my script that is handled
by the subint can r-w that variable (say, a list of items)
and might there be an example of how to do this?  (I have
tried globals and req. without much luck). Thanks
in advance for any help you might be able to offer...and
kudos to the mod_python authors!

-Rick


From miguel at yorku.ca  Tue Nov 21 11:01:03 2000
From: miguel at yorku.ca (Miguel Marques)
Date: Fri Jan  9 21:58:42 2004
Subject: [mod_python] UNIQUE_ID from mod_python...
Message-ID: <20001121110103M.miguel@yorku.ca>

Greetings...

I need to access the unique id produced by mod_unique_id.  It gets set
as an environment variable for CGI scripts but not by the looks of it
for python scripts (I don't see it in os.environ).  I'm not all that
familiar with Apache internals so maybe there's something I'm missing.
If anyone has any idea on whether or not I can get the unique_id variable
please let me know.
Thanks for any input.

						Miguel

C. Miguel Marques, York University, Computing & Network Services
e-mail: miguel@yorku.ca, voice: (416)736-2100x22684, fax: (416)736-5830

From miguel at yorku.ca  Tue Nov 21 11:29:01 2000
From: miguel at yorku.ca (Miguel Marques)
Date: Fri Jan  9 21:58:42 2004
Subject: [mod_python] UNIQUE_ID from mod_python...
In-Reply-To: <20001121110103M.miguel@yorku.ca>
References: <20001121110103M.miguel@yorku.ca>
Message-ID: <20001121112901O.miguel@yorku.ca>

On Tue, 21 Nov 2000 11:01:03 -0500, Miguel Marques <miguel@yorku.ca> wrote:
> Greetings...
> 
> I need to access the unique id produced by mod_unique_id.  It gets set
> as an environment variable for CGI scripts but not by the looks of it
> for python scripts (I don't see it in os.environ).  I'm not all that
> familiar with Apache internals so maybe there's something I'm missing.
> If anyone has any idea on whether or not I can get the unique_id variable
> please let me know.
> Thanks for any input.

Never mind.
I was missing something.
It's in request.subprocess_env which actually should had been obvious
to me after I looked at the source code for unique_id.
Sigh...

							Miguel

C. Miguel Marques, York University, Computing & Network Services
e-mail: miguel@yorku.ca, voice: (416)736-2100x22684, fax: (416)736-5830


From grisha at ispol.com  Tue Nov 21 16:45:44 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:42 2004
Subject: [mod_python] Q : persistent objects/vars
In-Reply-To: <200011211421.IAA02649@mw2.texas.net>
Message-ID: <Pine.LNX.4.21.0011211644520.11647-100000@saturn.ispol.com>

I'm afraid mod_python does not provide any interprocess communication. To
communicate between processes you would have to use sockets or something
like that.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Tue, 21 Nov 2000 thepoet@texas.net wrote:

> I've sifted through all the relevant documentation
> and the mailing list archives, so please excuse this
> email if there happens to be any repitition.
> 
> As I understand it, when the apache server starts up,
> python is called and the directory in which I've placed
> my files receives a subinterpreter.  In attempting to
> persist an object, would it be as simple as making a
> variable 'global' (would all processes know of the global
> no matter what since it is in the same subint and that
> subint is persistent across processes?), or must
> I attempt to use one of the funcs from the apache module
> itself like req (which according to the list is now a persistent
> python object).  And if I were to use req, how would I
> make sure that every instance of my script that is handled
> by the subint can r-w that variable (say, a list of items)
> and might there be an example of how to do this?  (I have
> tried globals and req. without much luck). Thanks
> in advance for any help you might be able to offer...and
> kudos to the mod_python authors!
> 
> -Rick
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From grisha at ispol.com  Tue Nov 21 16:48:31 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:42 2004
Subject: [mod_python] UNIQUE_ID from mod_python...
In-Reply-To: <20001121110103M.miguel@yorku.ca>
Message-ID: <Pine.LNX.4.21.0011211646280.11647-100000@saturn.ispol.com>

If you're writing native mod_python handlers, then that id should be in
req.subprocess_env. If you're using cgihandler, you have no access to it,
since the CGI that the cgihandler emulates is 'fake', there is no forking
going on.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Tue, 21 Nov 2000, Miguel Marques wrote:

> Greetings...
> 
> I need to access the unique id produced by mod_unique_id.  It gets set
> as an environment variable for CGI scripts but not by the looks of it
> for python scripts (I don't see it in os.environ).  I'm not all that
> familiar with Apache internals so maybe there's something I'm missing.
> If anyone has any idea on whether or not I can get the unique_id variable
> please let me know.
> Thanks for any input.
> 
> 						Miguel
> 
> C. Miguel Marques, York University, Computing & Network Services
> e-mail: miguel@yorku.ca, voice: (416)736-2100x22684, fax: (416)736-5830
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From sahrens at uv.ruhr-uni-bochum.de  Fri Nov 24 18:09:04 2000
From: sahrens at uv.ruhr-uni-bochum.de (sa)
Date: Fri Jan  9 21:58:42 2004
Subject: [mod_python] please help...
Message-ID: <3A1EA0AF.818C1DD4@uv.ruhr-uni-bochum.de>

Hi folks,
I got the script which runs perfect on my linuxbox as long as it?s not
running inside mod_python. Below I show you the mod_python version that
is producing the error code you can see on the bottom of this mail. As I
am new to mod_python but can still remember such strange effects when
playing with mod_perl for the first time some years ago I think it?s
time for some guru?s advice
Maybe I didn?t get any global restrictions (like always using the strict
pragma under mod_perl) so far. Please give some hint where to look
further

    thanks a lot

            Sebastian

------the script------

from mod_python import apache
import string, os, re
import xml.dom.ext
from xml.xslt import XsltException
from xml.xslt.Processor import Processor


sheet = """
        <xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns="http://www.w3.org/TR/xhtml1/strict">

          <xsl:template match="main">
            <html><head>ein test</head><body>
                    <hr/>
                    <b><xsl:value-of select="/main/test"/></b>
                    <em><xsl:value-of select="/main/testBody"/></em>
            </body></html>
          </xsl:template>

        <xsl:apply-templates/>
        </xsl:stylesheet>
        """

def handler(req):
    req.content_type = "text/plain"
    req.send_http_header()
    the_req_file = req.the_request
    a = string.split(the_req_file, " ")
    tmp_file = string.split(a[1], "?")
    file_name = tmp_file[1]
    path_prefix = "/var/www"
    path = path_prefix+file_name
    raw_data = open(path).read()

    processor = xml.xslt.Processor.Processor()
    processor.appendStylesheetString(sheet)
    result = processor.runString(raw_data, ignorePis=1)
    req.write(result)
    return apache.OK


------- the error ---------


> Mod_python error: "PythonHandler xmlhandler"
>
> Traceback (innermost last):
>
>   File "/usr/lib/python1.5/site-packages/mod_python/apache.py", line 175, in Dispatch
>     module = import_module(module_name, _req)
>
>   File "/usr/lib/python1.5/site-packages/mod_python/apache.py", line 316, in import_module
>     module = __import__(module_name)
>
>   File "/var/www/xml/xmlhandler.py", line 3, in ?
>     import xml.dom.ext
>
>   File "/usr/lib/python1.5/site-packages/xml/dom/__init__.py", line 41, in ?
>     from xml.dom.html import HTMLDOMImplementation
>
>   File "/usr/lib/python1.5/site-packages/xml/dom/html/__init__.py", line 281, in ?
>     g_numCharEntityPattern = re.compile('?(\d+);')
>
>   File "/usr/lib/python1.5/re.py", line 79, in compile
>     code=pcre_compile(pattern, flags, groupindex)
>
> pcre.error: ('unmatched parentheses', 208)
>





-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20001124/a648c98d/attachment-0002.htm
From grisha at ispol.com  Fri Nov 24 14:38:03 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:42 2004
Subject: [mod_python] please help...
In-Reply-To: <3A1EA0AF.818C1DD4@uv.ruhr-uni-bochum.de>
Message-ID: <Pine.LNX.4.21.0011241435090.22236-100000@saturn.ispol.com>

This error has something to do with a mismatch of pcre (regular
expression) libraries. AFAIK there is a version that is not backwards
compatible. You probably have one version linked in by virtue of using
some module which uses pcre (e.g. mod_php) and Python expects another
version.

It's hard to tell what the exact solution is, but would try pursuing that
line and see where it takes you.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Fri, 24 Nov 2000, sa wrote:

> Hi folks,
> I got the script which runs perfect on my linuxbox as long as it?s not
> running inside mod_python. Below I show you the mod_python version that
> is producing the error code you can see on the bottom of this mail. As I
> am new to mod_python but can still remember such strange effects when
> playing with mod_perl for the first time some years ago I think it?s
> time for some guru?s advice
> Maybe I didn?t get any global restrictions (like always using the strict
> pragma under mod_perl) so far. Please give some hint where to look
> further
> 
>     thanks a lot
> 
>             Sebastian
> 
> ------the script------
> 
> from mod_python import apache
> import string, os, re
> import xml.dom.ext
> from xml.xslt import XsltException
> from xml.xslt.Processor import Processor
> 
> 
> sheet = """
>         <xsl:stylesheet version="1.0"
> xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
> xmlns="http://www.w3.org/TR/xhtml1/strict">
> 
>           <xsl:template match="main">
>             <html><head>ein test</head><body>
>                     <hr/>
>                     <b><xsl:value-of select="/main/test"/></b>
>                     <em><xsl:value-of select="/main/testBody"/></em>
>             </body></html>
>           </xsl:template>
> 
>         <xsl:apply-templates/>
>         </xsl:stylesheet>
>         """
> 
> def handler(req):
>     req.content_type = "text/plain"
>     req.send_http_header()
>     the_req_file = req.the_request
>     a = string.split(the_req_file, " ")
>     tmp_file = string.split(a[1], "?")
>     file_name = tmp_file[1]
>     path_prefix = "/var/www"
>     path = path_prefix+file_name
>     raw_data = open(path).read()
> 
>     processor = xml.xslt.Processor.Processor()
>     processor.appendStylesheetString(sheet)
>     result = processor.runString(raw_data, ignorePis=1)
>     req.write(result)
>     return apache.OK
> 
> 
> ------- the error ---------
> 
> 
> > Mod_python error: "PythonHandler xmlhandler"
> >
> > Traceback (innermost last):
> >
> >   File "/usr/lib/python1.5/site-packages/mod_python/apache.py", line 175, in Dispatch
> >     module = import_module(module_name, _req)
> >
> >   File "/usr/lib/python1.5/site-packages/mod_python/apache.py", line 316, in import_module
> >     module = __import__(module_name)
> >
> >   File "/var/www/xml/xmlhandler.py", line 3, in ?
> >     import xml.dom.ext
> >
> >   File "/usr/lib/python1.5/site-packages/xml/dom/__init__.py", line 41, in ?
> >     from xml.dom.html import HTMLDOMImplementation
> >
> >   File "/usr/lib/python1.5/site-packages/xml/dom/html/__init__.py", line 281, in ?
> >     g_numCharEntityPattern = re.compile('?(\d+);')
> >
> >   File "/usr/lib/python1.5/re.py", line 79, in compile
> >     code=pcre_compile(pattern, flags, groupindex)
> >
> > pcre.error: ('unmatched parentheses', 208)
> >
> 
> 
> 
> 
> 
> 


From fschwiet at u.washington.edu  Fri Nov 24 12:22:24 2000
From: fschwiet at u.washington.edu (F. Schwieterman)
Date: Fri Jan  9 21:58:42 2004
Subject: [mod_python] Newbie says: "What and where is this ./configure script?"
Message-ID: <Pine.A41.4.21.0011241219200.66722-100000@dante59.u.washington.edu>

  I'm running Mandrake 7.2, with apache, python, mod_python all installed
from RPMs.  Apache 1.3.14, Python 1.5.2.

  The mod_python RPM installed a mod_python.so but not mod_python.c .  
Apache makes a complaint about mod_python.so and the installed
instructions say I have to build it anyhow so I assume I can't use this
.so.

  Thanks much.


From sahrens at uv.ruhr-uni-bochum.de  Sat Nov 25 13:24:45 2000
From: sahrens at uv.ruhr-uni-bochum.de (sa)
Date: Fri Jan  9 21:58:42 2004
Subject: [mod_python] please help...
References: <Pine.LNX.4.21.0011241435090.22236-100000@saturn.ispol.com>
Message-ID: <3A1FAF8D.2600DDAC@uv.ruhr-uni-bochum.de>

Gregory Trubetskoy wrote:

> This error has something to do with a mismatch of pcre (regular
> expression) libraries. AFAIK there is a version that is not backwards
> compatible. You probably have one version linked in by virtue of using
> some module which uses pcre (e.g. mod_php) and Python expects another
> version.
>

Hey man thanks a lot, it was just one '#' for the mod_php line in the httpd.conf and everything
ins working fine...


From ken at kenkinder.com  Sun Nov 26 01:17:26 2000
From: ken at kenkinder.com (Ken Kinder)
Date: Fri Jan  9 21:58:42 2004
Subject: [mod_python] compile problem
Message-ID: <20001126011726.A1489@kenkinder.com>

The odd thing is, on my Red Hat 7 Linux, this works fine, but on a Debian
2.1 box, it doesn't work. Here's what happens:

The error happened on make. Here's my configure command:

./configure --with-apache=../apache_1.3.14 --with-apxs=/usr/local/apache/bin/apxs

and make was make dso:

In file included from /usr/local/src/apache_1.3.14/src/include/ap_config.h:76,
                 from /usr/local/src/apache_1.3.14/src/include/httpd.h:71,
                 from /usr/local/src/mod_python-2.6.3/src/include/mod_python.h:85,
                 from mod_python.c:61:
/usr/local/src/apache_1.3.14/src/include/ap_config_auto.h:6: unterminated `#if' conditional
make[1]: *** [mod_python.o] Error 1
make[1]: Leaving directory `/usr/local/src/mod_python-2.6.3/src'
make: *** [do_dso] Error 2


-- 
Ken Kinder
www.kenkinder.com

From ken at rage.x13.com  Sun Nov 26 15:15:10 2000
From: ken at rage.x13.com (Ken Kinder)
Date: Fri Jan  9 21:58:42 2004
Subject: [mod_python] runtime error
Message-ID: <20001126151510.B14740@kenkinder.com>

I just got a new fresh copy of Apache, mod_ssl, mod_php, and some other fun stuff. All are from tarball. This is Debian/GNU Linux 2.2 (potato). I know
that mod_python is compiled into apache:

$ nm /usr/local/apache/bin/httpd | grep python
0810d5e1 b lib_python
08056754 T python_cleanup
08057788 T python_cleanup_handler
080f907c D python_commands
08056c5c t python_create_dir_config
08058890 t python_decref
08056f24 t python_directive
08058254 T python_finalize
08057200 t python_handler
080f906c d python_handlers
080f9064 d python_imports
08056b88 T python_init
08056dac t python_merge_dir_config
080f92c0 D python_module

But it doesn't seem to know about the directives that mod_python ads. I have this inside a virtualhost directive:

<Directory /home/staff/ken/public_html/static>
          AllowOverride FileInfo
          AddHandler python-program .py
          PythonHandler foo
          PythonDebug On
</Directory>

and when I try to do a configtest with apache, I get:

$ sudo /usr/local/apache/bin/apachectl configtest
Syntax error on line 1138 of /usr/local/apache/conf/httpd.conf:
Invalid command 'PythonHandler', perhaps mis-spelled or defined by a module not included in the server configuration

Any words of wisdom?

-- 
Ken Kinder
www.kenkinder.com

From peter at wslogic.com  Mon Nov 27 18:32:26 2000
From: peter at wslogic.com (peter@wslogic.com)
Date: Fri Jan  9 21:58:42 2004
Subject: [mod_python] problems with RH 7 RPM
Message-ID: <3A22EF0A.7DE907E0@wslogic.com>

has anyone had any problems with the Red Hat 7 and using the RPM.  When
I install the RPM it kills my httpd, and it won't work until I uninstall
mod_python?


-- 
Peter Halliday

From miguel at yorku.ca  Wed Nov 29 15:00:44 2000
From: miguel at yorku.ca (Miguel Marques)
Date: Fri Jan  9 21:58:42 2004
Subject: [mod_python] Problem with req.connection.user being readonly...
Message-ID: <20001129150044Z.miguel@yorku.ca>

Greetings...

I've rewritten a authentication handler I had written in mod_perl in
mod_python.   The handler does not use basic auth for authentication.
It uses it's own html form and then a cookie gets set which is checked
by the access handler.  This is a generic authentication handler which
I use to control access to a number of different applications. 

Most of those applications don't need req.connection.user (they look
at the cookie) but today I tried to migrate one that does.  Since
req.connection.user is read only I can't make things work.  In
mod_perl one simply assigns to that variable.  Is there any reason why
req.connection.user can't be made read/write?  
Thanks for any suggestions...

							Miguel

C. Miguel Marques, York University, Computing & Network Services
e-mail: miguel@yorku.ca, voice: (416)736-2100x22684, fax: (416)736-5830

From grisha at ispol.com  Wed Nov 29 16:22:48 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:42 2004
Subject: [mod_python] Problem with req.connection.user being readonly...
In-Reply-To: <20001129150044Z.miguel@yorku.ca>
Message-ID: <Pine.LNX.4.21.0011291622230.18389-100000@saturn.ispol.com>

I'll see about making it read/write in the next release.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Wed, 29 Nov 2000, Miguel Marques wrote:

> Greetings...
> 
> I've rewritten a authentication handler I had written in mod_perl in
> mod_python.   The handler does not use basic auth for authentication.
> It uses it's own html form and then a cookie gets set which is checked
> by the access handler.  This is a generic authentication handler which
> I use to control access to a number of different applications. 
> 
> Most of those applications don't need req.connection.user (they look
> at the cookie) but today I tried to migrate one that does.  Since
> req.connection.user is read only I can't make things work.  In
> mod_perl one simply assigns to that variable.  Is there any reason why
> req.connection.user can't be made read/write?  
> Thanks for any suggestions...
> 
> 							Miguel
> 
> C. Miguel Marques, York University, Computing & Network Services
> e-mail: miguel@yorku.ca, voice: (416)736-2100x22684, fax: (416)736-5830
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From miguel at yorku.ca  Wed Nov 29 17:53:24 2000
From: miguel at yorku.ca (Miguel Marques)
Date: Fri Jan  9 21:58:42 2004
Subject: [mod_python] Problem with req.connection.user being readonly...
In-Reply-To: <Pine.LNX.4.21.0011291622230.18389-100000@saturn.ispol.com>
References: <20001129150044Z.miguel@yorku.ca>
	<Pine.LNX.4.21.0011291622230.18389-100000@saturn.ispol.com>
Message-ID: <20001129175324S.miguel@yorku.ca>

On Wed, 29 Nov 2000 16:22:48 -0500 (EST), Gregory Trubetskoy <grisha@ispol.com> wrote:
> 
> I'll see about making it read/write in the next release.
> 
But, I was hoping you would say that you did that yesterday and I
should get mod_python from CVS.  ;-)

I needed to get this to work by tommorow so here's a diff in case it
might be useful to you.  Seems to work and not crash anything.
I just added it as method of the request object.

begin 660 user.diff
M*BHJ(')E<75E<W1O8FIE8W0N8PDR,# P+S$Q+S(Y(#(Q.C,Y.C,Q"3$N,0HM
M+2T@<F5Q=65S=&]B:F5C="YC"3(P,# O,3$O,CD@,C(Z,#$Z,#$**BHJ*BHJ
M*BHJ*BHJ*BHJ"BHJ*B V,S$L-C,V("HJ*BH*+2TM(#8S,2PV-3,@+2TM+0H@
M( H@('T*(" **R O*@HK(" J(')E<75E<W0N<V5T7V-O;FYE8W1I;VY?=7-E
M<BAR97%U97-T('-E;&8L('-T<FEN9R!U<V5R*0HK(" J"BL@("H@(" @($%L
M;&]W<R!S971T:6YG(&]F(')E<2T^8V]N;F5C=&EO;BT^=7-E<B!T;R!U<V5R
M('!A<F%M971E<@HK(" J+PHK('-T871I8R!0>4]B:F5C=" J<F5Q7W-E=%]C
M;VYN96-T:6]N7W5S97(H<F5Q=65S=&]B:F5C=" J<V5L9BP@4'E/8FIE8W0@
M*F%R9W,I"BL@>PHK(" @("!C:&%R("IT:&5U<V5R.PHK( HK(" @("!I9B H
M(2!0>4%R9U]087)S951U<&QE*&%R9W,L(")S(BP@)G1H975S97(I*2 **R @
M(" @(" @(')E='5R;B!.54Q,.PHK(" @(" **R @(" @<V5L9BT^<F5Q=65S
M=%]R96,M/F-O;FYE8W1I;VXM/G5S97(@/2!A<%]P<W1R9'5P*'-E;&8M/G)E
M<75E<W1?<F5C+3YP;V]L+"!T:&5U<V5R*3L**R @(" @4'E?24Y#4D5&*%!Y
M7TYO;F4I.PHK(" @("!R971U<FX@4'E?3F]N93L**R!]"BL@"B @<W1A=&EC
M(%!Y365T:&]D1&5F(')E<75E<W1O8FIE8W1M971H;V1S6UT@/2!["B @(" @
M('LB861D7V-O;6UO;E]V87)S(BP@(" @(" H4'E#1G5N8W1I;VXI(')E<5]A
M9&1?8V]M;6]N7W9A<G,L(" @(" @34542%]605)!4D=3?2P*(" @(" @>R)A
M9&1?:&%N9&QE<B(L(" @(" @(" @("A0>4-&=6YC=&EO;BD@<F5Q7V%D9%]H
M86YD;&5R+" @(" @(" @("!-151(7U9!4D%21U-]+ HJ*BHJ*BHJ*BHJ*BHJ
M*BH**BHJ(#8T-BPV-3$@*BHJ*@HM+2T@-C8S+#8V.2 M+2TM"B @(" @('LB
M<F5G:7-T97)?8VQE86YU<"(L(" @(" H4'E#1G5N8W1I;VXI(')E<5]R96=I
M<W1E<E]C;&5A;G5P+" @(" @34542%]605)!4D=3?2P*(" @(" @>R)S96YD
M7VAT='!?:&5A9&5R(BP@(" @("A0>4-&=6YC=&EO;BD@<F5Q7W-E;F1?:'1T
M<%]H96%D97(L(" @("!-151(7U9!4D%21U-]+ H@(" @("![(G=R:71E(BP@
M(" @(" @(" @(" @(" @*%!Y0T9U;F-T:6]N*2!R97%?=W)I=&4L(" @(" @
M(" @(" @(" @($U%5$A?5D%205)'4WTL"BL@(" @('LB<V5T7V-O;FYE8W1I
M;VY?=7-E<B(L(" H4'E#1G5N8W1I;VXI(')E<5]S971?8V]N;F5C=&EO;E]U
M<V5R+" @34542%]605)!4D=3?2P*(" @(" @>R!.54Q,+"!.54Q,('T@+RH@
4<V5N=&EN96P@*B\*("!].PH@( H*
 
end

Take care.

						Miguel

C. Miguel Marques, York University, Computing & Network Services
e-mail: miguel@yorku.ca, voice: (416)736-2100x22684, fax: (416)736-5830

From marknen at usa.net  Thu Nov  2 09:47:50 2000
From: marknen at usa.net (Mark Nenadov)
Date: Fri Jan  9 22:02:31 2004
Subject: [mod_python] (no subject)
Message-ID: <20001102144750.2386.qmail@nwcst291.netaddress.usa.net>

Hello all! I have a problem. I have attempted to install 'mod_python' on my
Windows 98 (4.10.1998) machine using the instructions that are given at
"http://www.modpython.org/live/mod_python-2.6/doc/windows.html".

When I start up my Apache server it gives me the following output:

   'import exceptions' failed; use -v for traceback
   Warning!  Falling back to string-based exceptions
   'import site' failed; use -v for traceback
   Apache/1.3.11 (Win32) mod_python/2.6 Python/1.5.2 running...
   'import exceptions' failed; use -v for traceback
   Warning!  Falling back to string-based exceptions
   'import site' failed; use -v for traceback

I am running Apache version 1.3.11 for Win32. I am using the Python code given
in the example for installing mod_python for Windows. I have ActivePython 2.0
(build 202) based on Python 2.0. That is the first "potential problem" that
comes to mind. When the documentation gives the requirement of "Python 1.5.2",
does it require that version specifically, or does it just mean 1.5.2 or
greater? 

I can easily switch back to 1.5.2 if thats what its going to take to make this
work. However, elsewhere on modpython.org it says : "At this time, mod_python
works with Python 1.5.2, 1.6 and 2.0".

From grisha at ispol.com  Thu Nov  2 10:52:30 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:31 2004
Subject: [mod_python] (no subject)
In-Reply-To: <20001102144750.2386.qmail@nwcst291.netaddress.usa.net>
Message-ID: <Pine.LNX.4.21.0011021049570.17431-100000@saturn.ispol.com>

I just put another DLL on the site compiled with Python 2.0 see if that
works. Also note that the 2.6 windows instructions had a typo in them in
the last step of "installing mod_python libraries". I updated the link on
the website to point to
http://www.modpython.org/live/mod_python-2.6.3/doc/windows.html

P.S. Why don't you use a real operating system? ;-)

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On 2 Nov 2000, Mark Nenadov wrote:

> Hello all! I have a problem. I have attempted to install 'mod_python' on my
> Windows 98 (4.10.1998) machine using the instructions that are given at
> "http://www.modpython.org/live/mod_python-2.6/doc/windows.html".


From jjp at connix.com  Thu Nov  2 12:00:54 2000
From: jjp at connix.com (John Posner)
Date: Fri Jan  9 22:02:31 2004
Subject: [mod_python] Virtual documents and mod_python
Message-ID: <001d01c044ee$772ae920$6e64fea9@jake>

Hi --

I've been successful using this technique to get a Python script to handle a
standard HTTP request:

<Directory <Document Root>/python>
  AddHandler python-program .py
  PythonHandler test
  PythonDebug on
</Directory>

But I don't want or need to create an actual directory containing the Python
script. I'd like to create a virtual document location:

<Location <Document Root>/py_xmlrpc>
  SetHandler python-script
  PythonHandler py_xmlrpc
</Location>

I've used this technique successfully with Perl, but it doesn't work with
Python. Apache thinks it's a request for a real document. And fooling around
with relative/absolute specs as the Location parameter doesn't make any
difference.

Can anyone help?

Tx,
John

--
John Posner, Editor           jjp@oreilly.com
O'Reilly & Associates         860-663-3147


From grisha at ispol.com  Thu Nov  2 17:50:27 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:31 2004
Subject: [mod_python] Virtual documents and mod_python
In-Reply-To: <001d01c044ee$772ae920$6e64fea9@jake>
Message-ID: <Pine.LNX.4.21.0011021736010.18432-100000@saturn.ispol.com>

It should work just fine. The only catch is that since <location>
directives have no physical path associated with them, you have to
make sure that your sripts are in PythonPath.

What problem are you having?

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Thu, 2 Nov 2000, John Posner wrote:

> Hi --
> 
> I've been successful using this technique to get a Python script to handle a
> standard HTTP request:
> 
> <Directory <Document Root>/python>
>   AddHandler python-program .py
>   PythonHandler test
>   PythonDebug on
> </Directory>
> 
> But I don't want or need to create an actual directory containing the Python
> script. I'd like to create a virtual document location:
> 
> <Location <Document Root>/py_xmlrpc>
>   SetHandler python-script
>   PythonHandler py_xmlrpc
> </Location>
> 
> I've used this technique successfully with Perl, but it doesn't work with
> Python. Apache thinks it's a request for a real document. And fooling around
> with relative/absolute specs as the Location parameter doesn't make any
> difference.
> 
> Can anyone help?
> 
> Tx,
> John
> 
> --
> John Posner, Editor           jjp@oreilly.com
> O'Reilly & Associates         860-663-3147
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From grisha at ispol.com  Thu Nov  2 18:30:43 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:31 2004
Subject: [mod_python] Virtual documents and mod_python
In-Reply-To: <3A01F325.F8B56ECD@infostreet.com>
Message-ID: <Pine.LNX.4.21.0011021828470.18644-100000@saturn.ispol.com>

Good catch! it *should* be python-program.

On Thu, 2 Nov 2000, Cameron La Rue wrote:
> 
> > > <Location <Document Root>/py_xmlrpc>
> > >   SetHandler python-script
> > >   PythonHandler py_xmlrpc
> > > </Location>
>
> I thought you had to say python-program, not python-script?


From dwallace at delanet.com  Fri Nov  3 21:54:59 2000
From: dwallace at delanet.com (Dave)
Date: Fri Jan  9 22:02:31 2004
Subject: [mod_python] Threaded Python and mod_python
Message-ID: <3A037A83.9070800@delanet.com>

Hi Greg,

I just downloaded the 2.6.3 version of mod_python and ran configure. In 
addition to checking my blood pressure ( a very nice feature, maybe 2.7 
can do a CAT scan), it reported the following warning:

****** WARNING ******
  Python is compiled with thread support. Apache 1.3 does not use threads.
  On some systems this will cause problems during compilation, on others
  it may result in unpredictable behaviour of your Apache server. Yet on
  others it will work just fine. The recommended approach is to compile
  Python without thread support in a separate location and specify it with
  --with-python option to this ./configure script.


It compiles and appears to work fine for me (Python 2.0, Apache 1.3.12, 
Linux 2.2.16), but of apparently this could bite at any time. Can you 
expound a little more on the nature of this problem and if there are 
other solutions than not having threads?

Dave.


From grisha at ispol.com  Fri Nov  3 23:04:16 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:31 2004
Subject: [mod_python] Threaded Python and mod_python
In-Reply-To: <3A037A83.9070800@delanet.com>
Message-ID: <Pine.LNX.4.21.0011032251040.23312-100000@saturn.ispol.com>

On Fri, 3 Nov 2000, Dave wrote:

> Hi Greg,
> 
> I just downloaded the 2.6.3 version of mod_python and ran configure. In 
> addition to checking my blood pressure 

:-)

> ( a very nice feature, maybe 2.7 can do a CAT scan), it reported the
> following warning:
> 
> ****** WARNING ******
>   Python is compiled with thread support. Apache 1.3 does not use threads.
>   On some systems this will cause problems during compilation, on others

This is platform dependend, and frankly I'm not much of a thread expert. I
know on FreeBSD you will get unresolved symbols at link time when trying
to mix threaded and non threaded code. This is because it links against
separate versions of C libraries.

I don't know if this applies to Linux or Solaris. I know some people have
reported segfaults on RH if mod_python is not the first module listed, and
I have a suspicion that it is thread-related.

So that warning is exactly that - just a warning.

Perhpas someone on this list more knoledgeale on the subject can shed some
light on this?

[P.S. lest someone reading this gets the wrong idea - mod_python *is*
thread safe, it couldn't run on Win32 if it wasn't]

Grisha


From jjp at connix.com  Fri Nov  3 23:04:40 2000
From: jjp at connix.com (John Posner)
Date: Fri Jan  9 22:02:31 2004
Subject: [mod_python] Where's Fredrik
Message-ID: <000101c04614$5cb945b0$6e64fea9@jake>

Does anyone know how to contact Fredrik Lundh, the author of the (only?)
Python XML-RPC implementation?

These don't seem to work for me:

  fredrik@pythonware.com
  effbot@telia.com


Thanks,
John

--
John Posner, Editor           jjp@oreilly.com
O'Reilly & Associates         860-663-3147


From randy at teamkern.net  Sat Nov  4 23:42:09 2000
From: randy at teamkern.net (Randall Kern)
Date: Fri Jan  9 22:02:31 2004
Subject: [mod_python] add_handler
Message-ID: <0cbc01c046fb$e7271e10$1f00a8c0@spoke.net>

Sorry if this has been covered before, I checked the archives and google, but couldn't find anything.

I am using a PythonTransHandler to map certain requests to files, and then invoke a PythonHandler for those files using request.add_handler.  However, my main handler function is never called.

in /foo/foo.py:

from mod_python import apache

def handler(req):
    req.send_http_header()
    req.write("Hello World!\nProcessing on behalf of %s\nFrom foo.py" % req.filename
    return apache.OK

def transhandler(req):

    if stuff:  # stuff is actually a rather complex bit of code...
        req.add_handler("PythonHandler", "foo::handler", "/foo")
        apache.log_error("just called add_handler")
        return apache.OK

    return apache.DECLINED




My error_log file does in fact get the entry "just called...", but the browser always gets the contents of req.filename, NOT the "Hello World..." message from foo.handler.

If I add a SetHandler python-program to my httpd.conf file, the handler() function gets called. It's only when I try to dynamically add the handler that it doesn't work.

Ideas?

Thanks,
-Randy

P.S. python 2.0, apache 1.3.14, mod_python 2.6.3
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20001104/65674beb/attachment-0003.htm
From jhh at msu.edu  Wed Nov  8 04:24:47 2000
From: jhh at msu.edu (John H. Hayes)
Date: Fri Jan  9 22:02:31 2004
Subject: [mod_python] Python SCRIPT Fails When Running Through Python Module
Message-ID: <3A091BDF.6A5CA2F2@msu.edu>

When I attempt to run the test script that is described in the modpython
installation documentation
I get the following information in my web client:
Mod_python error: "PythonHandler test"

Traceback (most recent call last):

  File
"/usr/local/opt/Python-2.0/lib/python2.0/site-packages/mod_python/apache.py",
line 175, in Dispatch
    module = import_module(module_name, _req)

  File
"/usr/local/opt/Python-2.0/lib/python2.0/site-packages/mod_python/apache.py",
line 316, in import_module
    module = __import__(module_name)

ImportError: No module named test

It appears there is some configuration problem, but I set things up as
described.

If anybody can shed some light on this I would appreciate it.

Thanks,
John Hayes



From grisha at ispol.com  Thu Nov  9 09:10:47 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:31 2004
Subject: [mod_python] Re: mod_python
In-Reply-To: <3A0AA011.CF6E2C1C@jeremias.net>
Message-ID: <Pine.LNX.4.21.0011090906190.10075-100000@saturn.ispol.com>

[cc-ing the list in case someone has a better answer]

Unfortunately I don't have access to Mandrake and know next to nothing
about it. Is it supposed to be RedHat compatible?

The RPM on the site is RedHat-specific as it makes some assumptions about
what is in the httpd.conf file. I also don't know how compatible it is as
far as libc versions, etc.

Unless someone has a Mandrake RPM out there, my recommendation would be to
compile it from sources.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Thu, 9 Nov 2000, Jason Jeremias wrote:

> Okay,
> 
> OS: Linux Mandrake 7.2
> Apache 1.3.14 that came with it via RPM
> Python 1.5.2 also from mandrake rpm
> mod_python came from the website the RPM.
> 
> Standard config that came with the system.  With the exception of the
> mod_python stuff loaded in it. This is the output from the apache error
> log file.
> [Tue Nov  7 03:34:20 2000] [notice] Apache-AdvancedExtranetServer/1.3.14
> (Linux-Mandrake/2mdk) mod_python/2.6.3 Python/1.5.2 configured --
> resuming normal operations
> [Tue Nov  7 03:34:59 2000] [notice] child pid 32518 exit signal
> Segmentation fault (11)
> [Thu Nov  9 03:56:09 2000] [notice] child pid 32527 exit signal
> Segmentation fault (11)
> 
> let me know if there is anything else I can send you that may help.
> 
> I usually have PHP loaded in Apache as well but I was trying to get
> mod_python working before I put PHP in to eliminate some possible
> problems.
> 
> thanks for the reply.
> 
> -Jason 
> 


From aiglauer at yahoo.com  Fri Nov 10 00:58:04 2000
From: aiglauer at yahoo.com (Alexis Iglauer)
Date: Fri Jan  9 22:02:31 2004
Subject: [mod_python] Re: mod_python
Message-ID: <20001110085804.3371.qmail@web2204.mail.yahoo.com>

I have mod_python working on MDK 6.0, 7.0 and 7.1 - no
problem.  I get the DEAPI warning, which I happily
ignore.  I usually have to change apache.py and put
'/usr/lib/python1.5/site-packages/mod_python' in the
sys.path so that 'cgihandler.py' gets found, but that
is probably because I am too lazy to set PYTHONPATH. 
Problem has reduced since I now write my own handlers
:)

Apache 1.3.[4,6,12], mod_python 2.[0,2,6]

HTH
ax

--- Gregory Trubetskoy <grisha@ispol.com> wrote:
> 
> [cc-ing the list in case someone has a better
> answer]
> 
> Unfortunately I don't have access to Mandrake and
> know next to nothing
> about it. Is it supposed to be RedHat compatible?
> 
> The RPM on the site is RedHat-specific as it makes
> some assumptions about
> what is in the httpd.conf file. I also don't know
> how compatible it is as
> far as libc versions, etc.
> 
> Unless someone has a Mandrake RPM out there, my
> recommendation would be to
> compile it from sources.
> 
> --
>   Gregory (Grisha) Trubetskoy
>        grisha@ispol.com
> 
> On Thu, 9 Nov 2000, Jason Jeremias wrote:
> 
> > Okay,
> > 
> > OS: Linux Mandrake 7.2
> > Apache 1.3.14 that came with it via RPM
> > Python 1.5.2 also from mandrake rpm
> > mod_python came from the website the RPM.
> > 
> > Standard config that came with the system.  With
> the exception of the
> > mod_python stuff loaded in it. This is the output
> from the apache error
> > log file.
> > [Tue Nov  7 03:34:20 2000] [notice]
> Apache-AdvancedExtranetServer/1.3.14
> > (Linux-Mandrake/2mdk) mod_python/2.6.3
> Python/1.5.2 configured --
> > resuming normal operations
> > [Tue Nov  7 03:34:59 2000] [notice] child pid
> 32518 exit signal
> > Segmentation fault (11)
> > [Thu Nov  9 03:56:09 2000] [notice] child pid
> 32527 exit signal
> > Segmentation fault (11)
> > 
> > let me know if there is anything else I can send
> you that may help.
> > 
> > I usually have PHP loaded in Apache as well but I
> was trying to get
> > mod_python working before I put PHP in to
> eliminate some possible
> > problems.
> > 
> > thanks for the reply.
> > 
> > -Jason 
> > 
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python


__________________________________________________
Do You Yahoo!?
Thousands of Stores.  Millions of Products.  All in one Place.
http://shopping.yahoo.com/

From haering_python at gmx.de  Sat Nov 11 05:59:24 2000
From: haering_python at gmx.de (Gerhard =?ISO-8859-1?Q?H=E4ring?=)
Date: Fri Jan  9 22:02:31 2004
Subject: [mod_python] Corrupt win32 build
Message-ID: <11983.973918764@www33.gmx.net>

Hi folks,

I just wanted to test the win32 build for mod_python I got from the
project's homepage. Apache says that mod_python.dll is not a valid Windows image.
And if I try to examine the file with the Microsoft Dependency Walker, I get
more or less the same information. Maybe something did go wrong while the
contributor uploaded his files? Could you upload your files again, please?

Gerhard

-- 
Sent through GMX FreeMail - http://www.gmx.net


From haering_python at gmx.de  Sat Nov 11 06:32:27 2000
From: haering_python at gmx.de (Gerhard =?ISO-8859-1?Q?H=E4ring?=)
Date: Fri Jan  9 22:02:31 2004
Subject: [mod_python] Corrupt win32 build
References: <11983.973918764@www33.gmx.net>
Message-ID: <22208.973920747@www33.gmx.net>

Sorry, I was a fool. It was most probably my Netscape browser's fault that
I  got invalid binaries after downloading. I used wget and the download
worked. I installed mod_python and the test module described in the Win32
install page. Then I wanted to see how it was stability-wise.

/usr/sbin/ab -n 10000 http://lilith/python/test.py

worked fine, while the stress test with 5 parallel requests

/usr/sbin/ab -c 5 -n 10000 http://lilith/python/test.py

crashes Apache in the mod_python module several times. I have Windows
2000,  on a SMP machine, Apache 1.3.12 and ActiveState Python 2.0. Seems like a
threading issue to me ...

Gerhard

-- 
Sent through GMX FreeMail - http://www.gmx.net


From sbi at acse.be  Sun Nov 12 22:57:52 2000
From: sbi at acse.be (=?iso-8859-1?Q?St=E9phane_Bidoul?=)
Date: Fri Jan  9 22:02:31 2004
Subject: [mod_python] Corrupt win32 build
References: <11983.973918764@www33.gmx.net> <22208.973920747@www33.gmx.net>
Message-ID: <003201c04cf3$a1609840$cda679c1@cat>

The win32 version has got some basic testing and debugging
wrt threading; I'll test again with ab as soon as find time for that.
However, I've no SMP machine... so my test will be a bit biased.

-stephane

----- Original Message ----- 
From: "Gerhard H?ring" <haering_python@gmx.de>
To: <mod_python@modpython.org>
Sent: Saturday, November 11, 2000 6:32 AM
Subject: Re: [mod_python] Corrupt win32 build


> Sorry, I was a fool. It was most probably my Netscape browser's fault that
> I  got invalid binaries after downloading. I used wget and the download
> worked. I installed mod_python and the test module described in the Win32
> install page. Then I wanted to see how it was stability-wise.
> 
> /usr/sbin/ab -n 10000 http://lilith/python/test.py
> 
> worked fine, while the stress test with 5 parallel requests
> 
> /usr/sbin/ab -c 5 -n 10000 http://lilith/python/test.py
> 
> crashes Apache in the mod_python module several times. I have Windows
> 2000,  on a SMP machine, Apache 1.3.12 and ActiveState Python 2.0. Seems like a
> threading issue to me ...
> 
> Gerhard
> 
> -- 
> Sent through GMX FreeMail - http://www.gmx.net
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From phil at munen.net  Sun Nov 12 23:47:31 2000
From: phil at munen.net (phil suh)
Date: Fri Jan  9 22:02:31 2004
Subject: [mod_python] Apache warning: this module might crash under EAPI!
Message-ID: <Pine.LNX.4.10.10011122333140.10702-100000@sushi.munen.net>

I'm compiling Apache 1.3.14 w/ mod_so, mod_ssl, mod_perl baked in.
I want to add mod_python as a DSO. I had to recompile Python-2.0 without
threads since the BeOpen-Python 2.0 has threads turned on.

After compiling mod_python, editing httpd.conf, and restarting Apache, it
works, but Apache gives a warning:

$ sudo /etc/rc.d/init.d/httpd start
[Mon Nov 13 00:29:45 2000] [warn] Loaded DSO libexec/mod_python.so uses
plain Apache 1.3 API, this module might crash under EAPI! (please
recompile it with -DEAPI)
/etc/rc.d/init.d/httpd start: httpd started

I searched Google, and found a guy who claims that this is an mod_ssl
related thing, and if the mod doesn't use ssl, I don't need to worry
about it (http://www.geocrawler.com/archives/3/97/2000/3/0/3511640/).

Is this true?

Is there a way to recompile w/ -DEAPI? Can someone explain, step by step,
how to do it?  (I'd rather not have to live with that warning...bugs me).

Thanks in advance for your help.

Phil Suh
Apache compilng-newbie, python enthusiast.

P.S. How I compiled mod_python:

[phil mod_python-2.6.3] $ pwd
/usr/local/src/httpd/mod_python-2.6.3
[phil mod_python-2.6.3] $ ./configure \
> --with-python=/usr/local/src/Python-2.0 \ 
> --with-apxs=/usr/local/apache.org/httpd/bin/apxs \
> --with-apache=/usr/local/src/httpd/apache_1.3.14
[phil mod_python-2.6.3] $ make dso
[phil mod_python-2.6.3] $ sudo make install


==================================
phil@munen.net
http://munen.net/~phil/


From aiglauer at iname.com  Tue Nov 14 00:03:25 2000
From: aiglauer at iname.com (Alexis Iglauer)
Date: Fri Jan  9 22:02:31 2004
Subject: [mod_python] Graphs in a webpage
Message-ID: <006f01c04dc5$f93e9c60$0401a8c0@charis>

This may be the wrong forum for this, but......

I am writing an app which takes data out of text files and makes graphs.
The user interactively specifies the graphs in a browser, with everything
being done in Python as a handler.  The resulting page can have 10+ graphs
on it.

Problem is, my solution is sloooooow.  I am using gdchart to generate the
graphs on the fly (<img src="grph.py?color=0x0000ff" alt="xxx"> and plain
vanilla python for the rest.

I am not sure whether reading the ASCII files is slow and whether sticking
them into a database will be worth the effort (ideas, anyone?).  I get some
advantage when running apache single-threaded by checking whether my data is
already loaded, but as soon as I run apache normally this advantage
disappears.

I think the bottleneck is creating the graph, and in trying to solve that I
have a few questions regarding how mod_python works.  How long does an
instance of mod_python exist?  When is an instance destroyed?  What data can
be passed from one instance to the next?  Also, does anyone have any ideas
on how to efficiently generate graphs from a reasonably large number of
datapoints?

Thanks in advance
Alexis


From benno at sesgroup.net  Tue Nov 14 10:25:14 2000
From: benno at sesgroup.net (Ben Leslie)
Date: Fri Jan  9 22:02:31 2004
Subject: [mod_python] Graphs in a webpage
In-Reply-To: <006f01c04dc5$f93e9c60$0401a8c0@charis>; from aiglauer@iname.com on Tue, Nov 14, 2000 at 12:03:25AM +0100
References: <006f01c04dc5$f93e9c60$0401a8c0@charis>
Message-ID: <20001114102514.I14092@bob.sesgroup.net>

> This may be the wrong forum for this, but......

<snip>
 
> I am not sure whether reading the ASCII files is slow and whether sticking
> them into a database will be worth the effort (ideas, anyone?).  I get some
> advantage when running apache single-threaded by checking whether my data is
> already loaded, but as soon as I run apache normally this advantage
> disappears.

Database is almost always going to be slower than reading from ascii files.
 
> I think the bottleneck is creating the graph, and in trying to solve that I
> have a few questions regarding how mod_python works.  How long does an
> instance of mod_python exist?  When is an instance destroyed?  What data can
> be passed from one instance to the next? 

There is one insatnce of you handler is created for each apache thread. So
it will be there until the apache thread is killed. You can therfore cache
data between requests. I think you can communicate between different threads
but you probably don't want to.

I doubt mod_python would be your bottleneck. How long does graph.py take
to create a graph from the command line?

> Also, does anyone have any ideas
> on how to efficiently generate graphs from a reasonably large number of
> datapoints?

Gnuplot maybe.


Cheers,

Benno

From grisha at ispol.com  Mon Nov 13 22:07:38 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:31 2004
Subject: [mod_python] Graphs in a webpage
In-Reply-To: <006f01c04dc5$f93e9c60$0401a8c0@charis>
Message-ID: <Pine.LNX.4.21.0011132153470.3701-100000@saturn.ispol.com>

I used gd with nsapy on a windows machine in 1997 and it was very very
fast (considering computers were slow back then). Yahoo uses it on their
quotes.yahoo.com of all other tools, mrtg uses it, it's probably the
fastest thign out there.

The things that are the slowest are repetetive operations that involve
memory allocations - e.g. if you're building some large list from the
ascii files one byte at a time and your ascii file is 90K, it will be
slow. You will see a big improvement if you only build the list once and
cache it inside a module somewhere. 

If your content is dynamic and cannot be cached, then try to avoid things
like readlines() of the whole file, then copying it some list. A much
faster solution is to read the file as you need the data avoiding all
unnecessary mallocs.

A database may make things faster - it very much depends on what you
do. For example if you try to process data in some way, i.e. sort or
select records, etc, then most definitely a database, especially if ran on
a separate server will give you an improvement. 

If you're just using it as flat file storage, then it will be about as
fast as a file, perhaps a little slower.

mod_python interpreter lives as long the as the apache process (or in case
of win32 thread) lives. The simplest way to cache data is to use the
Python "import" mechanism - make a module that reads all your ascii files,
then import it from a script. Python only imports once the first time and
ignores all subsequent requests - perfect for caching.

HTH

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Tue, 14 Nov 2000, Alexis Iglauer wrote:

> This may be the wrong forum for this, but......
> 
> I am writing an app which takes data out of text files and makes graphs.
> The user interactively specifies the graphs in a browser, with everything
> being done in Python as a handler.  The resulting page can have 10+ graphs
> on it.
> 
> Problem is, my solution is sloooooow.  I am using gdchart to generate the
> graphs on the fly (<img src="grph.py?color=0x0000ff" alt="xxx"> and plain
> vanilla python for the rest.
> 
> I am not sure whether reading the ASCII files is slow and whether sticking
> them into a database will be worth the effort (ideas, anyone?).  I get some
> advantage when running apache single-threaded by checking whether my data is
> already loaded, but as soon as I run apache normally this advantage
> disappears.
> 
> I think the bottleneck is creating the graph, and in trying to solve that I
> have a few questions regarding how mod_python works.  How long does an
> instance of mod_python exist?  When is an instance destroyed?  What data can
> be passed from one instance to the next?  Also, does anyone have any ideas
> on how to efficiently generate graphs from a reasonably large number of
> datapoints?
> 
> Thanks in advance
> Alexis
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From aiglauer at yahoo.com  Tue Nov 14 02:45:56 2000
From: aiglauer at yahoo.com (Alexis Iglauer)
Date: Fri Jan  9 22:02:31 2004
Subject: [mod_python] Graphs in a webpage
Message-ID: <20001114104556.24954.qmail@web2205.mail.yahoo.com>

First of all, thank you to everyone for the pointers.
 
> I used gd with nsapy on a windows machine in 1997

Will check it out, thanks....

> The things that are the slowest are repetetive
> operations that involve
> memory allocations - e.g. if you're building some
> large list from the
> ascii files one byte at a time and your ascii file
> is 90K, it will be
> slow. You will see a big improvement if you only
> build the list once and
> cache it inside a module somewhere. 
> 

I am using the following construct often:

i = open (datafile)
l = i.readlines()
i.close()

on 200KB+ files - looks like that could be the problem
:)  Is it more efficient to loop using

for l in i.readlines():      ?

My datafiles are time series data, usually for 24
hours at a time, so I will have a whole bunch of
datafiles which make up a contiguous set of data over
several days/months/years.  The last datafile will
probably always be growing.  A two-stage caching
module may do the trick.

> If your content is dynamic and cannot be cached,
> then try to avoid things
> like readlines() of the whole file, then copying it
> some list. A much
> faster solution is to read the file as you need the
> data avoiding all
> unnecessary mallocs.
 

This seems to answer my question above in the
positive.  I will however still be reading all my
datafiles every time.

> Python "import" mechanism - make a module that reads
> all your ascii files,
> then import it from a script. Python only imports
> once the first time and
> ignores all subsequent requests - perfect for
> caching.

Does "first time" here mean the first time apache is
started or the first time an apache process is
(re)started?

> HTH

Yup, thanks
aei 




__________________________________________________
Do You Yahoo!?
Yahoo! Calendar - Get organized for the holidays!
http://calendar.yahoo.com/

From grisha at ispol.com  Tue Nov 14 10:22:48 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:31 2004
Subject: [mod_python] Graphs in a webpage
In-Reply-To: <20001114104556.24954.qmail@web2205.mail.yahoo.com>
Message-ID: <Pine.LNX.4.21.0011141015370.5926-100000@saturn.ispol.com>

On Tue, 14 Nov 2000, Alexis Iglauer wrote:
> 
> First of all, thank you to everyone for the pointers.
>  
> > I used gd with nsapy on a windows machine in 1997
> 
> Will check it out, thanks....

You're using it already.

> My datafiles are time series data, usually for 24
> hours at a time, so I will have a whole bunch of
> datafiles which make up a contiguous set of data over
> several days/months/years.

Sounds like you need a function that checks the file modification dat and
reads it only if it has been changed.

>  The last datafile will probably always be growing.  A two-stage
> caching module may do the trick.

I don't know what you're doing there, but I suspect you may benefit
from RRDTool (http://ee-staff.ethz.ch/~oetiker/webtools/rrdtool/)

> > Python "import" mechanism - make a module that reads all your
> > ascii files,
> 
> Does "first time" here mean the first time apache is started or the
> first time an apache process is (re)started?

It would be whenever that import statement is executed, which usually is
at the first hit after apache was (re) started. There is also a
PythonImport directive, which will allow you to do this at process start
up time rather than the first hit, but PythonImport has some caveats (read
the docs)

Grisha


From gps at trix.dircon.co.uk  Wed Nov 15 19:56:52 2000
From: gps at trix.dircon.co.uk (Graham Swallow)
Date: Fri Jan  9 22:02:31 2004
Subject: [mod_python] Re: Graphs in a webpage
In-Reply-To: <200011151200.MAA02390@mercury.ispol.com>
Message-ID: <Pine.LNX.4.04.10011151937590.752-100000@trix.dircon.co.uk>

On Tue, 14 Nov 2000, Alexis Iglauer wrote:

> My datafiles are time series data, usually for 24
> hours at a time, so I will have a whole bunch of
> datafiles which make up a contiguous set of data over
> several days/months/years.

	I have a similar situation, but not in apache_mod.  The data is
	an array of floats (binary portable), one every minute for a week,
	over the year.

	Repackaging last weeks data is slow, but you dont do that for
	every request.

	I use Array to get it as a string, then I use zlib to get a string,
	then I 'escape' the data for MySql (using the standard function)
	and write it into a blob field.

	The data comes back with no need for un-escaping (its so that it
	goes into an SQL statement).

	Then I call a C function to convert the floats to doubles and
	create a BLT/Vector. Its very quick.

	Using GD (or whatever) should not be slow, but a bit of C at the
	right place means you move chunks of data around, not iterate
	python over thousands of items.

	The 'most recent' file obviously needs special treatment.
	You could re-process today every hour (hint: move, start new file,
	then process the moved file, if fail - dont delete).

	That still leaves you with a 'double' data source, first SQL, then
	the additional file.  Alternatively, get the data collector to
	post the data ...

	Graham


From grisha at ispol.com  Wed Nov 15 21:35:42 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:31 2004
Subject: [mod_python] Re: Graphs in a webpage
In-Reply-To: <Pine.LNX.4.04.10011151937590.752-100000@trix.dircon.co.uk>
Message-ID: <Pine.LNX.4.21.0011152134060.11986-100000@saturn.ispol.com>

This is somewhat off-subject, but IMHO the best tool for time-series data
storing and charting is RRDtool. It can produce charts for a year of data
in a split second.

Grisha

On Wed, 15 Nov 2000, Graham Swallow wrote:

> On Tue, 14 Nov 2000, Alexis Iglauer wrote:
> 
> > My datafiles are time series data, usually for 24
> > hours at a time, so I will have a whole bunch of
> > datafiles which make up a contiguous set of data over
> > several days/months/years.
> 
> 	I have a similar situation, but not in apache_mod.  The data is
> 	an array of floats (binary portable), one every minute for a week,
> 	over the year.
> 
> 	Repackaging last weeks data is slow, but you dont do that for
> 	every request.
> 
> 	I use Array to get it as a string, then I use zlib to get a string,
> 	then I 'escape' the data for MySql (using the standard function)
> 	and write it into a blob field.
> 
> 	The data comes back with no need for un-escaping (its so that it
> 	goes into an SQL statement).
> 
> 	Then I call a C function to convert the floats to doubles and
> 	create a BLT/Vector. Its very quick.
> 
> 	Using GD (or whatever) should not be slow, but a bit of C at the
> 	right place means you move chunks of data around, not iterate
> 	python over thousands of items.
> 
> 	The 'most recent' file obviously needs special treatment.
> 	You could re-process today every hour (hint: move, start new file,
> 	then process the moved file, if fail - dont delete).
> 
> 	That still leaves you with a 'double' data source, first SQL, then
> 	the additional file.  Alternatively, get the data collector to
> 	post the data ...
> 
> 	Graham
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From octos at austin.rr.com  Sun Nov 19 16:55:01 2000
From: octos at austin.rr.com (Eric Adam)
Date: Fri Jan  9 22:02:31 2004
Subject: [mod_python] Modules?
Message-ID: <4.3.2.7.2.20001119165253.00d37d00@pop-server>

Is there a source of user-built modules for use with mod_python?

I'm looking for a module that will present the contents of a POST in 
dictionary or similar form and would rather not re-invent the wheel.

Thanks.



From benno at sesgroup.net  Mon Nov 20 10:13:18 2000
From: benno at sesgroup.net (Ben Leslie)
Date: Fri Jan  9 22:02:31 2004
Subject: [mod_python] Modules?
In-Reply-To: <4.3.2.7.2.20001119165253.00d37d00@pop-server>; from octos@austin.rr.com on Sun, Nov 19, 2000 at 04:55:01PM -0600
References: <4.3.2.7.2.20001119165253.00d37d00@pop-server>
Message-ID: <20001120101318.A25682@bob.sesgroup.net>

On Sun, 19 Nov 2000, Eric Adam wrote:

> Is there a source of user-built modules for use with mod_python?
> 
> I'm looking for a module that will present the contents of a POST in 
> dictionary or similar form and would rather not re-invent the wheel.
> 

Check out the cgi handler in the python core. It has a lot of useful 
things like this.

Cheers,

Benno

From grisha at ispol.com  Sun Nov 19 20:48:58 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:31 2004
Subject: [mod_python] Modules?
In-Reply-To: <4.3.2.7.2.20001119165253.00d37d00@pop-server>
Message-ID: <Pine.LNX.4.21.0011192044580.4402-100000@saturn.ispol.com>

The next version of mod_python will have a module called mod_python.util
that does just that. If you can't wait until the next version, you can
pull it off sourceforge CVS
http://cvs.sourceforge.net/cgi-bin/cvsweb.cgi/~checkout~/mod_python/lib/python/mod_python/util.py?rev=1.1&content-type=text/plain&cvsroot=modpython

(this is very beta code, of course)

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Sun, 19 Nov 2000, Eric Adam wrote:

> Is there a source of user-built modules for use with mod_python?
> 
> I'm looking for a module that will present the contents of a POST in 
> dictionary or similar form and would rather not re-invent the wheel.
> 
> Thanks.
> 
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From ftian at cs.wisc.edu  Mon Nov 20 01:19:32 2000
From: ftian at cs.wisc.edu (Feng Tian)
Date: Fri Jan  9 22:02:31 2004
Subject: [mod_python] Help on installation
Message-ID: <Pine.LNX.3.96L.1001120011504.27742A-100000@cobra.cs.wisc.edu>

Hi,

I am trying to get mod_python working on linux RedHat 6.2
I downloaded an RPM, and configed httpd.conf

The error log of httpd says
 
could not import mod_python.apache
could not call init

I tried to import mod_python.apache from an interactive
python shell, and got message 
_apache 
is missing.

What's the problem?  Fix?

Thanks.

Feng



From thepoet at texas.net  Tue Nov 21 08:21:25 2000
From: thepoet at texas.net (thepoet@texas.net)
Date: Fri Jan  9 22:02:31 2004
Subject: [mod_python] Q : persistent objects/vars
Message-ID: <200011211421.IAA02649@mw2.texas.net>

I've sifted through all the relevant documentation
and the mailing list archives, so please excuse this
email if there happens to be any repitition.

As I understand it, when the apache server starts up,
python is called and the directory in which I've placed
my files receives a subinterpreter.  In attempting to
persist an object, would it be as simple as making a
variable 'global' (would all processes know of the global
no matter what since it is in the same subint and that
subint is persistent across processes?), or must
I attempt to use one of the funcs from the apache module
itself like req (which according to the list is now a persistent
python object).  And if I were to use req, how would I
make sure that every instance of my script that is handled
by the subint can r-w that variable (say, a list of items)
and might there be an example of how to do this?  (I have
tried globals and req. without much luck). Thanks
in advance for any help you might be able to offer...and
kudos to the mod_python authors!

-Rick


From miguel at yorku.ca  Tue Nov 21 11:01:03 2000
From: miguel at yorku.ca (Miguel Marques)
Date: Fri Jan  9 22:02:32 2004
Subject: [mod_python] UNIQUE_ID from mod_python...
Message-ID: <20001121110103M.miguel@yorku.ca>

Greetings...

I need to access the unique id produced by mod_unique_id.  It gets set
as an environment variable for CGI scripts but not by the looks of it
for python scripts (I don't see it in os.environ).  I'm not all that
familiar with Apache internals so maybe there's something I'm missing.
If anyone has any idea on whether or not I can get the unique_id variable
please let me know.
Thanks for any input.

						Miguel

C. Miguel Marques, York University, Computing & Network Services
e-mail: miguel@yorku.ca, voice: (416)736-2100x22684, fax: (416)736-5830

From miguel at yorku.ca  Tue Nov 21 11:29:01 2000
From: miguel at yorku.ca (Miguel Marques)
Date: Fri Jan  9 22:02:32 2004
Subject: [mod_python] UNIQUE_ID from mod_python...
In-Reply-To: <20001121110103M.miguel@yorku.ca>
References: <20001121110103M.miguel@yorku.ca>
Message-ID: <20001121112901O.miguel@yorku.ca>

On Tue, 21 Nov 2000 11:01:03 -0500, Miguel Marques <miguel@yorku.ca> wrote:
> Greetings...
> 
> I need to access the unique id produced by mod_unique_id.  It gets set
> as an environment variable for CGI scripts but not by the looks of it
> for python scripts (I don't see it in os.environ).  I'm not all that
> familiar with Apache internals so maybe there's something I'm missing.
> If anyone has any idea on whether or not I can get the unique_id variable
> please let me know.
> Thanks for any input.

Never mind.
I was missing something.
It's in request.subprocess_env which actually should had been obvious
to me after I looked at the source code for unique_id.
Sigh...

							Miguel

C. Miguel Marques, York University, Computing & Network Services
e-mail: miguel@yorku.ca, voice: (416)736-2100x22684, fax: (416)736-5830


From grisha at ispol.com  Tue Nov 21 16:45:44 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:32 2004
Subject: [mod_python] Q : persistent objects/vars
In-Reply-To: <200011211421.IAA02649@mw2.texas.net>
Message-ID: <Pine.LNX.4.21.0011211644520.11647-100000@saturn.ispol.com>

I'm afraid mod_python does not provide any interprocess communication. To
communicate between processes you would have to use sockets or something
like that.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Tue, 21 Nov 2000 thepoet@texas.net wrote:

> I've sifted through all the relevant documentation
> and the mailing list archives, so please excuse this
> email if there happens to be any repitition.
> 
> As I understand it, when the apache server starts up,
> python is called and the directory in which I've placed
> my files receives a subinterpreter.  In attempting to
> persist an object, would it be as simple as making a
> variable 'global' (would all processes know of the global
> no matter what since it is in the same subint and that
> subint is persistent across processes?), or must
> I attempt to use one of the funcs from the apache module
> itself like req (which according to the list is now a persistent
> python object).  And if I were to use req, how would I
> make sure that every instance of my script that is handled
> by the subint can r-w that variable (say, a list of items)
> and might there be an example of how to do this?  (I have
> tried globals and req. without much luck). Thanks
> in advance for any help you might be able to offer...and
> kudos to the mod_python authors!
> 
> -Rick
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From grisha at ispol.com  Tue Nov 21 16:48:31 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:32 2004
Subject: [mod_python] UNIQUE_ID from mod_python...
In-Reply-To: <20001121110103M.miguel@yorku.ca>
Message-ID: <Pine.LNX.4.21.0011211646280.11647-100000@saturn.ispol.com>

If you're writing native mod_python handlers, then that id should be in
req.subprocess_env. If you're using cgihandler, you have no access to it,
since the CGI that the cgihandler emulates is 'fake', there is no forking
going on.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Tue, 21 Nov 2000, Miguel Marques wrote:

> Greetings...
> 
> I need to access the unique id produced by mod_unique_id.  It gets set
> as an environment variable for CGI scripts but not by the looks of it
> for python scripts (I don't see it in os.environ).  I'm not all that
> familiar with Apache internals so maybe there's something I'm missing.
> If anyone has any idea on whether or not I can get the unique_id variable
> please let me know.
> Thanks for any input.
> 
> 						Miguel
> 
> C. Miguel Marques, York University, Computing & Network Services
> e-mail: miguel@yorku.ca, voice: (416)736-2100x22684, fax: (416)736-5830
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From sahrens at uv.ruhr-uni-bochum.de  Fri Nov 24 18:09:04 2000
From: sahrens at uv.ruhr-uni-bochum.de (sa)
Date: Fri Jan  9 22:02:32 2004
Subject: [mod_python] please help...
Message-ID: <3A1EA0AF.818C1DD4@uv.ruhr-uni-bochum.de>

Hi folks,
I got the script which runs perfect on my linuxbox as long as it?s not
running inside mod_python. Below I show you the mod_python version that
is producing the error code you can see on the bottom of this mail. As I
am new to mod_python but can still remember such strange effects when
playing with mod_perl for the first time some years ago I think it?s
time for some guru?s advice
Maybe I didn?t get any global restrictions (like always using the strict
pragma under mod_perl) so far. Please give some hint where to look
further

    thanks a lot

            Sebastian

------the script------

from mod_python import apache
import string, os, re
import xml.dom.ext
from xml.xslt import XsltException
from xml.xslt.Processor import Processor


sheet = """
        <xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns="http://www.w3.org/TR/xhtml1/strict">

          <xsl:template match="main">
            <html><head>ein test</head><body>
                    <hr/>
                    <b><xsl:value-of select="/main/test"/></b>
                    <em><xsl:value-of select="/main/testBody"/></em>
            </body></html>
          </xsl:template>

        <xsl:apply-templates/>
        </xsl:stylesheet>
        """

def handler(req):
    req.content_type = "text/plain"
    req.send_http_header()
    the_req_file = req.the_request
    a = string.split(the_req_file, " ")
    tmp_file = string.split(a[1], "?")
    file_name = tmp_file[1]
    path_prefix = "/var/www"
    path = path_prefix+file_name
    raw_data = open(path).read()

    processor = xml.xslt.Processor.Processor()
    processor.appendStylesheetString(sheet)
    result = processor.runString(raw_data, ignorePis=1)
    req.write(result)
    return apache.OK


------- the error ---------


> Mod_python error: "PythonHandler xmlhandler"
>
> Traceback (innermost last):
>
>   File "/usr/lib/python1.5/site-packages/mod_python/apache.py", line 175, in Dispatch
>     module = import_module(module_name, _req)
>
>   File "/usr/lib/python1.5/site-packages/mod_python/apache.py", line 316, in import_module
>     module = __import__(module_name)
>
>   File "/var/www/xml/xmlhandler.py", line 3, in ?
>     import xml.dom.ext
>
>   File "/usr/lib/python1.5/site-packages/xml/dom/__init__.py", line 41, in ?
>     from xml.dom.html import HTMLDOMImplementation
>
>   File "/usr/lib/python1.5/site-packages/xml/dom/html/__init__.py", line 281, in ?
>     g_numCharEntityPattern = re.compile('?(\d+);')
>
>   File "/usr/lib/python1.5/re.py", line 79, in compile
>     code=pcre_compile(pattern, flags, groupindex)
>
> pcre.error: ('unmatched parentheses', 208)
>





-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20001124/a648c98d/attachment-0003.htm
From grisha at ispol.com  Fri Nov 24 14:38:03 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:32 2004
Subject: [mod_python] please help...
In-Reply-To: <3A1EA0AF.818C1DD4@uv.ruhr-uni-bochum.de>
Message-ID: <Pine.LNX.4.21.0011241435090.22236-100000@saturn.ispol.com>

This error has something to do with a mismatch of pcre (regular
expression) libraries. AFAIK there is a version that is not backwards
compatible. You probably have one version linked in by virtue of using
some module which uses pcre (e.g. mod_php) and Python expects another
version.

It's hard to tell what the exact solution is, but would try pursuing that
line and see where it takes you.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Fri, 24 Nov 2000, sa wrote:

> Hi folks,
> I got the script which runs perfect on my linuxbox as long as it?s not
> running inside mod_python. Below I show you the mod_python version that
> is producing the error code you can see on the bottom of this mail. As I
> am new to mod_python but can still remember such strange effects when
> playing with mod_perl for the first time some years ago I think it?s
> time for some guru?s advice
> Maybe I didn?t get any global restrictions (like always using the strict
> pragma under mod_perl) so far. Please give some hint where to look
> further
> 
>     thanks a lot
> 
>             Sebastian
> 
> ------the script------
> 
> from mod_python import apache
> import string, os, re
> import xml.dom.ext
> from xml.xslt import XsltException
> from xml.xslt.Processor import Processor
> 
> 
> sheet = """
>         <xsl:stylesheet version="1.0"
> xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
> xmlns="http://www.w3.org/TR/xhtml1/strict">
> 
>           <xsl:template match="main">
>             <html><head>ein test</head><body>
>                     <hr/>
>                     <b><xsl:value-of select="/main/test"/></b>
>                     <em><xsl:value-of select="/main/testBody"/></em>
>             </body></html>
>           </xsl:template>
> 
>         <xsl:apply-templates/>
>         </xsl:stylesheet>
>         """
> 
> def handler(req):
>     req.content_type = "text/plain"
>     req.send_http_header()
>     the_req_file = req.the_request
>     a = string.split(the_req_file, " ")
>     tmp_file = string.split(a[1], "?")
>     file_name = tmp_file[1]
>     path_prefix = "/var/www"
>     path = path_prefix+file_name
>     raw_data = open(path).read()
> 
>     processor = xml.xslt.Processor.Processor()
>     processor.appendStylesheetString(sheet)
>     result = processor.runString(raw_data, ignorePis=1)
>     req.write(result)
>     return apache.OK
> 
> 
> ------- the error ---------
> 
> 
> > Mod_python error: "PythonHandler xmlhandler"
> >
> > Traceback (innermost last):
> >
> >   File "/usr/lib/python1.5/site-packages/mod_python/apache.py", line 175, in Dispatch
> >     module = import_module(module_name, _req)
> >
> >   File "/usr/lib/python1.5/site-packages/mod_python/apache.py", line 316, in import_module
> >     module = __import__(module_name)
> >
> >   File "/var/www/xml/xmlhandler.py", line 3, in ?
> >     import xml.dom.ext
> >
> >   File "/usr/lib/python1.5/site-packages/xml/dom/__init__.py", line 41, in ?
> >     from xml.dom.html import HTMLDOMImplementation
> >
> >   File "/usr/lib/python1.5/site-packages/xml/dom/html/__init__.py", line 281, in ?
> >     g_numCharEntityPattern = re.compile('?(\d+);')
> >
> >   File "/usr/lib/python1.5/re.py", line 79, in compile
> >     code=pcre_compile(pattern, flags, groupindex)
> >
> > pcre.error: ('unmatched parentheses', 208)
> >
> 
> 
> 
> 
> 
> 


From fschwiet at u.washington.edu  Fri Nov 24 12:22:24 2000
From: fschwiet at u.washington.edu (F. Schwieterman)
Date: Fri Jan  9 22:02:32 2004
Subject: [mod_python] Newbie says: "What and where is this ./configure script?"
Message-ID: <Pine.A41.4.21.0011241219200.66722-100000@dante59.u.washington.edu>

  I'm running Mandrake 7.2, with apache, python, mod_python all installed
from RPMs.  Apache 1.3.14, Python 1.5.2.

  The mod_python RPM installed a mod_python.so but not mod_python.c .  
Apache makes a complaint about mod_python.so and the installed
instructions say I have to build it anyhow so I assume I can't use this
.so.

  Thanks much.


From sahrens at uv.ruhr-uni-bochum.de  Sat Nov 25 13:24:45 2000
From: sahrens at uv.ruhr-uni-bochum.de (sa)
Date: Fri Jan  9 22:02:32 2004
Subject: [mod_python] please help...
References: <Pine.LNX.4.21.0011241435090.22236-100000@saturn.ispol.com>
Message-ID: <3A1FAF8D.2600DDAC@uv.ruhr-uni-bochum.de>

Gregory Trubetskoy wrote:

> This error has something to do with a mismatch of pcre (regular
> expression) libraries. AFAIK there is a version that is not backwards
> compatible. You probably have one version linked in by virtue of using
> some module which uses pcre (e.g. mod_php) and Python expects another
> version.
>

Hey man thanks a lot, it was just one '#' for the mod_php line in the httpd.conf and everything
ins working fine...


From ken at kenkinder.com  Sun Nov 26 01:17:26 2000
From: ken at kenkinder.com (Ken Kinder)
Date: Fri Jan  9 22:02:32 2004
Subject: [mod_python] compile problem
Message-ID: <20001126011726.A1489@kenkinder.com>

The odd thing is, on my Red Hat 7 Linux, this works fine, but on a Debian
2.1 box, it doesn't work. Here's what happens:

The error happened on make. Here's my configure command:

./configure --with-apache=../apache_1.3.14 --with-apxs=/usr/local/apache/bin/apxs

and make was make dso:

In file included from /usr/local/src/apache_1.3.14/src/include/ap_config.h:76,
                 from /usr/local/src/apache_1.3.14/src/include/httpd.h:71,
                 from /usr/local/src/mod_python-2.6.3/src/include/mod_python.h:85,
                 from mod_python.c:61:
/usr/local/src/apache_1.3.14/src/include/ap_config_auto.h:6: unterminated `#if' conditional
make[1]: *** [mod_python.o] Error 1
make[1]: Leaving directory `/usr/local/src/mod_python-2.6.3/src'
make: *** [do_dso] Error 2


-- 
Ken Kinder
www.kenkinder.com

From ken at rage.x13.com  Sun Nov 26 15:15:10 2000
From: ken at rage.x13.com (Ken Kinder)
Date: Fri Jan  9 22:02:32 2004
Subject: [mod_python] runtime error
Message-ID: <20001126151510.B14740@kenkinder.com>

I just got a new fresh copy of Apache, mod_ssl, mod_php, and some other fun stuff. All are from tarball. This is Debian/GNU Linux 2.2 (potato). I know
that mod_python is compiled into apache:

$ nm /usr/local/apache/bin/httpd | grep python
0810d5e1 b lib_python
08056754 T python_cleanup
08057788 T python_cleanup_handler
080f907c D python_commands
08056c5c t python_create_dir_config
08058890 t python_decref
08056f24 t python_directive
08058254 T python_finalize
08057200 t python_handler
080f906c d python_handlers
080f9064 d python_imports
08056b88 T python_init
08056dac t python_merge_dir_config
080f92c0 D python_module

But it doesn't seem to know about the directives that mod_python ads. I have this inside a virtualhost directive:

<Directory /home/staff/ken/public_html/static>
          AllowOverride FileInfo
          AddHandler python-program .py
          PythonHandler foo
          PythonDebug On
</Directory>

and when I try to do a configtest with apache, I get:

$ sudo /usr/local/apache/bin/apachectl configtest
Syntax error on line 1138 of /usr/local/apache/conf/httpd.conf:
Invalid command 'PythonHandler', perhaps mis-spelled or defined by a module not included in the server configuration

Any words of wisdom?

-- 
Ken Kinder
www.kenkinder.com

From peter at wslogic.com  Mon Nov 27 18:32:26 2000
From: peter at wslogic.com (peter@wslogic.com)
Date: Fri Jan  9 22:02:32 2004
Subject: [mod_python] problems with RH 7 RPM
Message-ID: <3A22EF0A.7DE907E0@wslogic.com>

has anyone had any problems with the Red Hat 7 and using the RPM.  When
I install the RPM it kills my httpd, and it won't work until I uninstall
mod_python?


-- 
Peter Halliday

From miguel at yorku.ca  Wed Nov 29 15:00:44 2000
From: miguel at yorku.ca (Miguel Marques)
Date: Fri Jan  9 22:02:32 2004
Subject: [mod_python] Problem with req.connection.user being readonly...
Message-ID: <20001129150044Z.miguel@yorku.ca>

Greetings...

I've rewritten a authentication handler I had written in mod_perl in
mod_python.   The handler does not use basic auth for authentication.
It uses it's own html form and then a cookie gets set which is checked
by the access handler.  This is a generic authentication handler which
I use to control access to a number of different applications. 

Most of those applications don't need req.connection.user (they look
at the cookie) but today I tried to migrate one that does.  Since
req.connection.user is read only I can't make things work.  In
mod_perl one simply assigns to that variable.  Is there any reason why
req.connection.user can't be made read/write?  
Thanks for any suggestions...

							Miguel

C. Miguel Marques, York University, Computing & Network Services
e-mail: miguel@yorku.ca, voice: (416)736-2100x22684, fax: (416)736-5830

From grisha at ispol.com  Wed Nov 29 16:22:48 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:32 2004
Subject: [mod_python] Problem with req.connection.user being readonly...
In-Reply-To: <20001129150044Z.miguel@yorku.ca>
Message-ID: <Pine.LNX.4.21.0011291622230.18389-100000@saturn.ispol.com>

I'll see about making it read/write in the next release.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Wed, 29 Nov 2000, Miguel Marques wrote:

> Greetings...
> 
> I've rewritten a authentication handler I had written in mod_perl in
> mod_python.   The handler does not use basic auth for authentication.
> It uses it's own html form and then a cookie gets set which is checked
> by the access handler.  This is a generic authentication handler which
> I use to control access to a number of different applications. 
> 
> Most of those applications don't need req.connection.user (they look
> at the cookie) but today I tried to migrate one that does.  Since
> req.connection.user is read only I can't make things work.  In
> mod_perl one simply assigns to that variable.  Is there any reason why
> req.connection.user can't be made read/write?  
> Thanks for any suggestions...
> 
> 							Miguel
> 
> C. Miguel Marques, York University, Computing & Network Services
> e-mail: miguel@yorku.ca, voice: (416)736-2100x22684, fax: (416)736-5830
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From miguel at yorku.ca  Wed Nov 29 17:53:24 2000
From: miguel at yorku.ca (Miguel Marques)
Date: Fri Jan  9 22:02:32 2004
Subject: [mod_python] Problem with req.connection.user being readonly...
In-Reply-To: <Pine.LNX.4.21.0011291622230.18389-100000@saturn.ispol.com>
References: <20001129150044Z.miguel@yorku.ca>
	<Pine.LNX.4.21.0011291622230.18389-100000@saturn.ispol.com>
Message-ID: <20001129175324S.miguel@yorku.ca>

On Wed, 29 Nov 2000 16:22:48 -0500 (EST), Gregory Trubetskoy <grisha@ispol.com> wrote:
> 
> I'll see about making it read/write in the next release.
> 
But, I was hoping you would say that you did that yesterday and I
should get mod_python from CVS.  ;-)

I needed to get this to work by tommorow so here's a diff in case it
might be useful to you.  Seems to work and not crash anything.
I just added it as method of the request object.

begin 660 user.diff
M*BHJ(')E<75E<W1O8FIE8W0N8PDR,# P+S$Q+S(Y(#(Q.C,Y.C,Q"3$N,0HM
M+2T@<F5Q=65S=&]B:F5C="YC"3(P,# O,3$O,CD@,C(Z,#$Z,#$**BHJ*BHJ
M*BHJ*BHJ*BHJ"BHJ*B V,S$L-C,V("HJ*BH*+2TM(#8S,2PV-3,@+2TM+0H@
M( H@('T*(" **R O*@HK(" J(')E<75E<W0N<V5T7V-O;FYE8W1I;VY?=7-E
M<BAR97%U97-T('-E;&8L('-T<FEN9R!U<V5R*0HK(" J"BL@("H@(" @($%L
M;&]W<R!S971T:6YG(&]F(')E<2T^8V]N;F5C=&EO;BT^=7-E<B!T;R!U<V5R
M('!A<F%M971E<@HK(" J+PHK('-T871I8R!0>4]B:F5C=" J<F5Q7W-E=%]C
M;VYN96-T:6]N7W5S97(H<F5Q=65S=&]B:F5C=" J<V5L9BP@4'E/8FIE8W0@
M*F%R9W,I"BL@>PHK(" @("!C:&%R("IT:&5U<V5R.PHK( HK(" @("!I9B H
M(2!0>4%R9U]087)S951U<&QE*&%R9W,L(")S(BP@)G1H975S97(I*2 **R @
M(" @(" @(')E='5R;B!.54Q,.PHK(" @(" **R @(" @<V5L9BT^<F5Q=65S
M=%]R96,M/F-O;FYE8W1I;VXM/G5S97(@/2!A<%]P<W1R9'5P*'-E;&8M/G)E
M<75E<W1?<F5C+3YP;V]L+"!T:&5U<V5R*3L**R @(" @4'E?24Y#4D5&*%!Y
M7TYO;F4I.PHK(" @("!R971U<FX@4'E?3F]N93L**R!]"BL@"B @<W1A=&EC
M(%!Y365T:&]D1&5F(')E<75E<W1O8FIE8W1M971H;V1S6UT@/2!["B @(" @
M('LB861D7V-O;6UO;E]V87)S(BP@(" @(" H4'E#1G5N8W1I;VXI(')E<5]A
M9&1?8V]M;6]N7W9A<G,L(" @(" @34542%]605)!4D=3?2P*(" @(" @>R)A
M9&1?:&%N9&QE<B(L(" @(" @(" @("A0>4-&=6YC=&EO;BD@<F5Q7V%D9%]H
M86YD;&5R+" @(" @(" @("!-151(7U9!4D%21U-]+ HJ*BHJ*BHJ*BHJ*BHJ
M*BH**BHJ(#8T-BPV-3$@*BHJ*@HM+2T@-C8S+#8V.2 M+2TM"B @(" @('LB
M<F5G:7-T97)?8VQE86YU<"(L(" @(" H4'E#1G5N8W1I;VXI(')E<5]R96=I
M<W1E<E]C;&5A;G5P+" @(" @34542%]605)!4D=3?2P*(" @(" @>R)S96YD
M7VAT='!?:&5A9&5R(BP@(" @("A0>4-&=6YC=&EO;BD@<F5Q7W-E;F1?:'1T
M<%]H96%D97(L(" @("!-151(7U9!4D%21U-]+ H@(" @("![(G=R:71E(BP@
M(" @(" @(" @(" @(" @*%!Y0T9U;F-T:6]N*2!R97%?=W)I=&4L(" @(" @
M(" @(" @(" @($U%5$A?5D%205)'4WTL"BL@(" @('LB<V5T7V-O;FYE8W1I
M;VY?=7-E<B(L(" H4'E#1G5N8W1I;VXI(')E<5]S971?8V]N;F5C=&EO;E]U
M<V5R+" @34542%]605)!4D=3?2P*(" @(" @>R!.54Q,+"!.54Q,('T@+RH@
4<V5N=&EN96P@*B\*("!].PH@( H*
 
end

Take care.

						Miguel

C. Miguel Marques, York University, Computing & Network Services
e-mail: miguel@yorku.ca, voice: (416)736-2100x22684, fax: (416)736-5830

