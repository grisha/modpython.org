<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Cookie problems
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Cookie%20problems&In-Reply-To=1138343930.21701.62.camel%40pistachio.squirrel">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020149.html">
   <LINK REL="Next"  HREF="020150.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Cookie problems</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Sean Jamieson</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Cookie%20problems&In-Reply-To=1138343930.21701.62.camel%40pistachio.squirrel"
       TITLE="[mod_python] Cookie problems">sean at barriescene.com
       </A><BR>
    <I>Fri Jan 27 12:59:58 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020149.html">[mod_python] Cookie problems
</A></li>
        <LI>Next message: <A HREF="020150.html">[mod_python] Cookie problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20138">[ date ]</a>
              <a href="thread.html#20138">[ thread ]</a>
              <a href="subject.html#20138">[ subject ]</a>
              <a href="author.html#20138">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>First, there cookies are supposed to be limited to 1 or 2KB MAX, this 
limit is enfoced by the browser, and therefore very subjective. You 
should not expect to be able to set more than 2kb for the entire set of 
cookies. If you are able to see more, then its the browser being 
non-standard :-)

Sean

Wouter van Marle wrote:

&gt;<i>Hi All,
</I>&gt;<i>
</I>&gt;<i>I'm fiddling around with cookies, and after wondering why I always lost
</I>&gt;<i>my settings information I did some testing, and ran into what seems a
</I>&gt;<i>very very strict limit in cookie length. The code here is based on the
</I>&gt;<i>examples of the web pages. From the documentation I find that there is
</I>&gt;<i>no strict limit on the size of the value in the cookies, the only limit
</I>&gt;<i>I found mentioned in the archives is a 4k http header limit from Apache.
</I>&gt;<i>I'd assume I'm way below that.
</I>&gt;<i>
</I>&gt;<i>Test 1 works correctly.
</I>&gt;<i>
</I>&gt;<i>Test 2, with a slightly larger data for the cookie, fails. It is for
</I>&gt;<i>some reason not recognised as a valid MarshalCookie! The value used in
</I>&gt;<i>this case (the rest of the code being identical):
</I>&gt;<i>value = {'egg': 32,
</I>&gt;<i>         'color': 'white',
</I>&gt;<i>         'foo': 'bar',
</I>&gt;<i>         'foobar': 5}
</I>&gt;<i>
</I>&gt;<i>Here the code of Test 1 (maybe with some extra line breaks due to e-mail
</I>&gt;<i>formatting):
</I>&gt;<i>
</I>&gt;<i>from mod_python import Cookie, apache
</I>&gt;<i>import time
</I>&gt;<i>
</I>&gt;<i>def handler(req):
</I>&gt;<i>
</I>&gt;<i>    req.content_type = &quot;text/html; charset=utf-8&quot;
</I>&gt;<i>
</I>&gt;<i>    cookies = Cookie.get_cookies(req, Cookie.MarshalCookie,
</I>&gt;<i>                                    secret='secret007')
</I>&gt;<i>    
</I>&gt;<i>    if cookies.has_key('spam'):
</I>&gt;<i>        spamcookie = cookies['spam']
</I>&gt;<i>
</I>&gt;<i>        req.write('Great, a spam cookie was found: %s\n' \
</I>&gt;<i>                                      % str(spamcookie))
</I>&gt;<i>        if type(spamcookie) is Cookie.MarshalCookie:
</I>&gt;<i>            req.write('Here is what it looks like decoded: %s=%s\n'
</I>&gt;<i>                      % (spamcookie.name, spamcookie.value))
</I>&gt;<i>        else:
</I>&gt;<i>            req.write('WARNING: The cookie found is not a \
</I>&gt;<i>                       MarshalCookie, it may have been tapered with!')
</I>&gt;<i>
</I>&gt;<i>    else:
</I>&gt;<i>
</I>&gt;<i>        value = {'egg': 32,
</I>&gt;<i>                 'color': 'white',
</I>&gt;<i>                 'foo': 'bar'}
</I>&gt;<i>        
</I>&gt;<i>        Cookie.add_cookie(req, Cookie.MarshalCookie('spam', value, 'secret007'))
</I>&gt;<i>        req.write('Spam cookie not found, but we just set one!\n')
</I>&gt;<i>
</I>&gt;<i>    return
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>_______________________________________________
</I>&gt;<i>Mod_python mailing list
</I>&gt;<i><A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i><A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  
</I>&gt;<i>
</I>
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020149.html">[mod_python] Cookie problems
</A></li>
	<LI>Next message: <A HREF="020150.html">[mod_python] Cookie problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20138">[ date ]</a>
              <a href="thread.html#20138">[ thread ]</a>
              <a href="subject.html#20138">[ subject ]</a>
              <a href="author.html#20138">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
