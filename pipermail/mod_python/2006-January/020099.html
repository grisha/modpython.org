<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Simple Issue, Baffling
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Simple%20Issue%2C%20Baffling&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020100.html">
   <LINK REL="Next"  HREF="020105.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Simple Issue, Baffling</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>David Worley</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Simple%20Issue%2C%20Baffling&In-Reply-To="
       TITLE="[mod_python] Simple Issue, Baffling">dworley at communityconnect.com
       </A><BR>
    <I>Thu Jan 26 16:19:18 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020100.html">[mod_python] Simple Issue, Baffling
</A></li>
        <LI>Next message: <A HREF="020105.html">[mod_python] Simple Issue, Baffling
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20099">[ date ]</a>
              <a href="thread.html#20099">[ thread ]</a>
              <a href="subject.html#20099">[ subject ]</a>
              <a href="author.html#20099">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>To clarify further:

<A HREF="http://localhost/some/file/system/directory/style.css">http://localhost/some/file/system/directory/style.css</A> is only ever
called from an HTML file, via a &lt;link&gt; tag. The HTML is valid. The HTML
page is NOT generated by mod_python. It's just a plain HTML file in the
folder. I created it just for testing dynamically created CSS files.

The separate issue of &quot;text/html&quot; content is, indeed, handled by another
handler. The two are unrelated. When text/css content wouldn't work, I
tried something simpler: plain HTML return content.

Simply put, req.write(xxx) returns content that my browser does not make
use of, whether CSS or HTML, despite the explicit declaration of
req.content_type. The browser just thinks it's text.

It may be more accurate to say that the server never returns HTML or
CSS, rather than saying that the browser never renders the file
returned.

===============================
David Worley
Senior Front End Developer
<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">dworley at communityconnect.com</A>
=============================== 

-----Original Message-----
From: Jim Gallacher [mailto:<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">jpg at jgassociates.ca</A>] 
Sent: Thursday, January 26, 2006 4:15 PM
To: David Worley
Cc: <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython.org</A>
Subject: Re: [mod_python] Simple Issue, Baffling

David Worley wrote:
&gt;<i> Hello, all. I'm new to mod_python and somewhat new to server side
</I>&gt;<i> programming.
</I>&gt;<i> 
</I>&gt;<i> I've read the documentation, and I can't seem to find out something
</I>&gt;<i> relatively simple.
</I>&gt;<i> 
</I>&gt;<i> I'm writing a CSS preprocessor. It's meant to grab a request for a
</I>.css
&gt;<i> file, process another file and return the result to the browser. The
</I>&gt;<i> issue I have is that I can't get the handler to return content the
</I>&gt;<i> browser actually uses.
</I>&gt;<i> 
</I>&gt;<i> To clarify, I'm running Apache 2.0, Python 2.4 on Windows XP.
</I>&gt;<i> 
</I>&gt;<i> So with the following httpd.conf entry:
</I>&gt;<i> 
</I>&gt;<i> &lt;Directory /some/file/system/directory&gt;
</I>&gt;<i> 	AddHandler python-program .sss
</I>&gt;<i> 	PythonHandler switch
</I>&gt;<i> 	PythonDebug On
</I>&gt;<i> &lt;/Directory&gt;
</I>&gt;<i> 
</I>&gt;<i> And the following Python code, in switch.py:
</I>&gt;<i> 
</I>&gt;<i> from mod_python import apache
</I>&gt;<i> 
</I>&gt;<i> def handler(req):
</I>&gt;<i> 	req.content_type = &quot;text/css&quot;
</I>&gt;<i> 	req.write(&quot;&quot;&quot;\
</I>&gt;<i> body { background-color: red; }&quot;&quot;&quot;)
</I>&gt;<i> 	return apache.OK
</I>&gt;<i> 
</I>&gt;<i> This works. It works great. When I request
</I>&gt;<i> <A HREF="http://localhost/some/file/system/directory/style.css,">http://localhost/some/file/system/directory/style.css,</A> I get the body
</I>&gt;<i> declaration above. BUT the browser doesn't use it!
</I>
Maybe I don't understand the question but why would it? The browser only

uses the stylesheet to render the page when it's specified in an html 
&lt;style&gt; tag.

&gt;<i> I have the same problem when declaring req.content_type = &quot;text/html&quot;:
</I>&gt;<i> the code is returned properly, but it isn't rendered as HTML. It's
</I>just
&gt;<i> text, as far as the browser is concerned.
</I>
You got me there, unless you are saying you are getting the python code 
as opposed to the html you send with req.write. Are you writing valid 
html? Any chance there is a typo in req.content_type = 'text/html'? Are 
you using a different handler for generating the html?

It would help if you can clarify your problem a little.

Jim




</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020100.html">[mod_python] Simple Issue, Baffling
</A></li>
	<LI>Next message: <A HREF="020105.html">[mod_python] Simple Issue, Baffling
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20099">[ date ]</a>
              <a href="thread.html#20099">[ thread ]</a>
              <a href="subject.html#20099">[ subject ]</a>
              <a href="author.html#20099">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
