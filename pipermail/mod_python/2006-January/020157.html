<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Various simple questions. I hope.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Various%20simple%20questions.%20I%20hope.&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020154.html">
   <LINK REL="Next"  HREF="020158.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Various simple questions. I hope.</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Bart</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Various%20simple%20questions.%20I%20hope.&In-Reply-To="
       TITLE="[mod_python] Various simple questions. I hope.">scarfboy at gmail.com
       </A><BR>
    <I>Sun Jan 29 16:47:25 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020154.html">[mod_python] string manipulation
</A></li>
        <LI>Next message: <A HREF="020158.html">[mod_python] Various simple questions. I hope.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20157">[ date ]</a>
              <a href="thread.html#20157">[ thread ]</a>
              <a href="subject.html#20157">[ subject ]</a>
              <a href="author.html#20157">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey all.

Question. When I write:
    def requesthandler(req):
        req.content_type = &quot;text/plain&quot;
        req.write(&quot;Hello World!&quot;)
        return apache.OK
...it returns &quot;Hello World!0&quot;, so that style will
corrupt particularly my non-HTML data, so I don't
use it. Thing is, it's copy-pasted from 3.1(.3)
documentation and I have 3.1.4 (-r1, in gentoo).

So is this a difference between using AddHandler
python-program and AddHandler mod_python?
Or do the docs accidentally describe 3.2 or and old
version?   (I use:
  AddHandler mod_python .py
  PythonHandler mod_python.publisher
  PythonDebug On
Is this unusual?)

It also leaves me a little baffled on what I should
return from a handler function. My code works,
I just don't know whether it should be written
the way it is.

People discuss apache.OK, and the difference
between it and apache.DONE and such, so I'm
guessing this is current code - but apparently
it works differently under publisher. Or my version.


It also left me confused about how to handle
success and errors.

It seems like you're suppose to return simple ones
and raise things on specific errors when you want
apache to use its error pages - but apparently
you set req.status for other cses yet, because where
does this leave things like the 304?
I use  req.status=apache.HTTP_NOT_MODIFIED
elsewhere to handle my manual ETags on
dynamically served images. Despite me just having
read that setting req.status doesn't actually do
anything, my header snooper tells me it does in
fact work. Reading somewhere else says it works,
is the way it should work, and should probably be
followed by a return apache.DONE.
But since that doesn't seem to apply to me, what
do I do? How do I get these apache.THINGS, since
they seem to be the way thing work for other people?

Am I just missing something obvious?


Also, because of the empty-string problem,
I had to return something (I chose a space) instead of
nothing, which I'm not sure is entirely up to HTTP specs
since the RFC tells me &quot;The 304 response MUST NOT
contain a message-body&quot;
What's the better way of doing this?

(&quot;empty-string problem&quot;: Returning an empty string after
  writing no data leads to borking out with 500/Internal Server
  Error, and a &quot;funtion x returned no data&quot; error in the logs.
  I'm guessing this is accepted, or at least expected behaviour,
  though I'd prefer if that only happened on return None
  (and implicitly on a lack of a return), but not on return &quot;&quot;)


So I suppose my real question is &quot;Is there a nice overview
of the varying behaviour under different versions and different
PyhonHandlers, particularly the current?&quot; Should I not be
using the publisher, since it seems to contradict the docs?


*If* I'm going to have to know a few innards to use mod_python
so be it, but right now I have a fragile environment with
no simple way of telling what'll work without testing it.

And I don't like to bug you guys too much with this sort
of &quot;huh, what? wah!&quot;, y'know :)


Thanks for your time,
--Bart Alewijnse

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020154.html">[mod_python] string manipulation
</A></li>
	<LI>Next message: <A HREF="020158.html">[mod_python] Various simple questions. I hope.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20157">[ date ]</a>
              <a href="thread.html#20157">[ thread ]</a>
              <a href="subject.html#20157">[ subject ]</a>
              <a href="author.html#20157">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
