<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Re: child process XXXX still did not exit,
	sending a SIGTERM
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20child%20process%20XXXX%20still%20did%20not%20exit%2C%0A%09sending%20a%20SIGTERM&In-Reply-To=8393fff0601021023h414383e1w1884b5ca9f5fd25f%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019838.html">
   <LINK REL="Next"  HREF="019840.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Re: child process XXXX still did not exit,
	sending a SIGTERM</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Martin Blais</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20child%20process%20XXXX%20still%20did%20not%20exit%2C%0A%09sending%20a%20SIGTERM&In-Reply-To=8393fff0601021023h414383e1w1884b5ca9f5fd25f%40mail.gmail.com"
       TITLE="[mod_python] Re: child process XXXX still did not exit,
	sending a SIGTERM">blais at furius.ca
       </A><BR>
    <I>Mon Jan  2 15:10:38 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="019838.html">[mod_python] child process XXXX still did not exit,
	sending a SIGTERM
</A></li>
        <LI>Next message: <A HREF="019840.html">[mod_python] Re: child process XXXX still did not exit,
	sending a SIGTERM
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19839">[ date ]</a>
              <a href="thread.html#19839">[ thread ]</a>
              <a href="subject.html#19839">[ subject ]</a>
              <a href="author.html#19839">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Before someone asks, I did not get seg faults in my log, so that's not
the problem.

On closer inspection though, I do have a few SSL error messages like these:

[Mon Jan 02 15:07:30 2006] [info] (70014)End of file found: SSL
handshake interrupted by system [Hint: Stop button pressed in
browser?!]
[Mon Jan 02 15:07:30 2006] [info] Connection to child 0 closed with
abortive shutdown(server furius.dyndns.biz:443, client 127.0.0.1)
[Mon Jan 02 15:07:31 2006] [info] Connection to child 9 established
(server furius.dyndns.biz:443, client 127.0.0.1)
[Mon Jan 02 15:07:31 2006] [info] Seeding PRNG with 136 bytes of entropy

... the number of which does not match the number of zombie children
(does not mean that it's not the problem though).

Any information/tips welcome.




On 1/2/06, Martin Blais &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">blais at furius.ca</A>&gt; wrote:
&gt;<i> Hi
</I>&gt;<i>
</I>&gt;<i> I'm getting messages like this in my apache2 log when I stop it after
</I>&gt;<i> running requests to a mod_python-based web app:
</I>&gt;<i>
</I>&gt;<i> ==&gt; /var/log/apache2/error_log &lt;==
</I>&gt;<i> [Mon Jan 02 13:04:12 2006] [warn] child process 21806 still did not
</I>&gt;<i> exit, sending a SIGTERM
</I>&gt;<i> [Mon Jan 02 13:04:12 2006] [warn] child process 21768 still did not
</I>&gt;<i> exit, sending a SIGTERM
</I>&gt;<i> [Mon Jan 02 13:04:12 2006] [warn] child process 21792 still did not
</I>&gt;<i> exit, sending a SIGTERM
</I>&gt;<i> [Mon Jan 02 13:04:14 2006] [warn] child process 21806 still did not
</I>&gt;<i> exit, sending a SIGTERM
</I>&gt;<i> [Mon Jan 02 13:04:14 2006] [warn] child process 21768 still did not
</I>&gt;<i> exit, sending a SIGTERM
</I>&gt;<i> [Mon Jan 02 13:04:14 2006] [warn] child process 21792 still did not
</I>&gt;<i> exit, sending a SIGTERM
</I>&gt;<i> [Mon Jan 02 13:04:16 2006] [warn] child process 21806 still did not
</I>&gt;<i> exit, sending a SIGTERM
</I>&gt;<i> [Mon Jan 02 13:04:16 2006] [warn] child process 21768 still did not
</I>&gt;<i> exit, sending a SIGTERM
</I>&gt;<i> [Mon Jan 02 13:04:16 2006] [warn] child process 21792 still did not
</I>&gt;<i> exit, sending a SIGTERM
</I>&gt;<i> [Mon Jan 02 13:04:18 2006] [error] child process 21806 still did not
</I>&gt;<i> exit, sending a SIGKILL
</I>&gt;<i> [Mon Jan 02 13:04:18 2006] [error] child process 21768 still did not
</I>&gt;<i> exit, sending a SIGKILL
</I>&gt;<i> [Mon Jan 02 13:04:18 2006] [error] child process 21792 still did not
</I>&gt;<i> exit, sending a SIGKILL
</I>&gt;<i> [Mon Jan 02 13:04:19 2006] [info] removed PID file
</I>&gt;<i> /var/run/apache2.pid (pid=21754)
</I>&gt;<i> [Mon Jan 02 13:04:19 2006] [notice] caught SIGTERM, shutting down
</I>&gt;<i>
</I>&gt;<i> I've been tracking the problem, and on exit, the cleanup function (in
</I>&gt;<i> Python) that I registered with the mod_python server does get called,
</I>&gt;<i> and exits.
</I>&gt;<i>
</I>&gt;<i> I saw somewhere that recompiling expat, and then all the rest (in my
</I>&gt;<i> case, python-2.4.2, apache2, mod_python-3.1.4, psycopg2) might fix the
</I>&gt;<i> issue (it would be due to a library incompatibility).  I did this, and
</I>&gt;<i> the problem still occurs.  I also tried using mod_python-3.2.5b and
</I>&gt;<i> the problem persists.  This is all running on Linux (Gentoo).
</I>&gt;<i>
</I>&gt;<i> Any clue on how to debug this issue further?  I'm currently trying to
</I>&gt;<i> run gdb on a non-daemon apache2, or trying to attach to a running
</I>&gt;<i> child.  The problem is a bit tricky to fix, since it does not happen
</I>&gt;<i> always -- but always happens at least after I run a lot of requests
</I>&gt;<i> e.g. my automated test suite for my web app.
</I>&gt;<i>
</I>&gt;<i> Any hints would be appreciated.
</I>&gt;<i>
</I>&gt;<i> cheers,
</I>&gt;<i>
</I>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019838.html">[mod_python] child process XXXX still did not exit,
	sending a SIGTERM
</A></li>
	<LI>Next message: <A HREF="019840.html">[mod_python] Re: child process XXXX still did not exit,
	sending a SIGTERM
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19839">[ date ]</a>
              <a href="thread.html#19839">[ thread ]</a>
              <a href="subject.html#19839">[ subject ]</a>
              <a href="author.html#19839">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
