<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Current Working Directory not set?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Current%20Working%20Directory%20not%20set%3F&In-Reply-To=43DA8A22.1060909%40barriescene.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020141.html">
   <LINK REL="Next"  HREF="020143.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Current Working Directory not set?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Current%20Working%20Directory%20not%20set%3F&In-Reply-To=43DA8A22.1060909%40barriescene.com"
       TITLE="[mod_python] Current Working Directory not set?">grahamd at dscpl.com.au
       </A><BR>
    <I>Fri Jan 27 16:10:30 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020141.html">[mod_python] Current Working Directory not set?
</A></li>
        <LI>Next message: <A HREF="020143.html">[mod_python] Current Working Directory not set?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20144">[ date ]</a>
              <a href="thread.html#20144">[ thread ]</a>
              <a href="subject.html#20144">[ subject ]</a>
              <a href="author.html#20144">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 28/01/2006, at 8:01 AM, Sean Jamieson wrote:

&gt;<i> Thanks for the quick response Deron.
</I>&gt;<i>
</I>&gt;<i> Disreguarding the apache issue, what would be the problem with the 
</I>&gt;<i> working directory being set for publisher scripts? personally I'd 
</I>&gt;<i> expect to be able to refernce files relative to the script's 
</I>&gt;<i> directory.
</I>&gt;<i> I understand that for generaic handlers this wouldn't quite make 
</I>&gt;<i> sense; but for publisher and PSP (I don't know if its an issue for 
</I>&gt;<i> PSP, as I don't use it), it makes sense to me.
</I>&gt;<i>
</I>&gt;<i> Any clarifiction would be appreciated.
</I>
You can't change the working directory full stop, even with publisher.

In a multithread MPM (default on Win32, optional on UNIX), distinct 
requests
arriving at the same time are handled in different threads. If each 
thread
needed to change the working directory they would interfere with each 
other
and could change the working directory when the other thread is 
expecting it
to be some other value. The only way around this is to acquire a thread 
lock
for the whole time of handling a request, which means that all requests 
are
serialised, which is going to slow your web server done in terms of how 
many
requests it can handle.

BTW, no major web framework (Python or otherwise) that I know of 
changes the
current working directory to specific values just for the period of a 
single
request. I know that CGI does and thus mod_python cgihandler does, but 
it
uses the lock above as described, which has the problems as described. 
The
CGI case shouldn't be used as a guide of what is good though.

Graham

&gt;<i> Deron Meranda wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> There are two problems with having the working directory set like you 
</I>&gt;&gt;<i> want
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 1. URLs don't have to map to actual directories (and many mod_python
</I>&gt;&gt;<i> users depend on this)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 2. The working directory is a process attribute.  Changing it would
</I>&gt;&gt;<i> cause all kinds of problems in a multithreaded environment (depending
</I>&gt;&gt;<i> on your Apache MPM)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Generally, you should either set your PythonPath, or expect to deal
</I>&gt;&gt;<i> with absolute pathnames or other such games.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> You may also want to look at the mod_python import_module() function,
</I>&gt;&gt;<i> which lets you specify a path.  Also the request member req.filename
</I>&gt;&gt;<i> may be useful to you was well.
</I>&gt;&gt;<i> --
</I>&gt;&gt;<i> Deron Meranda
</I>&gt;&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020141.html">[mod_python] Current Working Directory not set?
</A></li>
	<LI>Next message: <A HREF="020143.html">[mod_python] Current Working Directory not set?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20144">[ date ]</a>
              <a href="thread.html#20144">[ thread ]</a>
              <a href="subject.html#20144">[ subject ]</a>
              <a href="author.html#20144">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
