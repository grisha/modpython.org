<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Unit testing in mod_python
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Unit%20testing%20in%20mod_python&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020064.html">
   <LINK REL="Next"  HREF="019922.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Unit testing in mod_python</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Mike Looijmans</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Unit%20testing%20in%20mod_python&In-Reply-To="
       TITLE="[mod_python] Unit testing in mod_python">nlv11281 at natlab.research.philips.com
       </A><BR>
    <I>Tue Jan 10 04:24:41 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020064.html">[mod_python] SetHandler trick to have pretty url's
</A></li>
        <LI>Next message: <A HREF="019922.html">[mod_python] make failed on AIX 5.1 using xlc
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19920">[ date ]</a>
              <a href="thread.html#19920">[ thread ]</a>
              <a href="subject.html#19920">[ subject ]</a>
              <a href="author.html#19920">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I did something like that to emulate a mod_python environment when the
host was actually running CGI. This gave max performance on our main
sites, while the one site running CGI could still use the same scripts.
The extra code/overhead needed to emulate mod_python was much less than 
the performance penalty that cgihandler would impose on the scripts.

I'll dig up the code.

Basically, it just created a &quot;request&quot; object like this:

class Request:
	def __init__(self):
		...
	def write(self, data):
		...

I just added extra fields/methods to the Request emulator 'on demand',
by just running the site in CGI and see what fails.

--
Mike Looijmans
Philips Natlab / Topic Automation


Sebastjan Trepca wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> does anyone know of any mod_python unittest module which could generate 
</I>&gt;<i> a &quot;fake request&quot; so you could effectivly test your handlers?
</I>&gt;<i> 
</I>&gt;<i> For example:
</I>&gt;<i> import my_handler
</I>&gt;<i> 
</I>&gt;<i> fake_request = get_basic_request(qs=&quot;test1=1&amp;test2=2&quot;)
</I>&gt;<i> assert my_handler.handle(fake_request)==apache.OK
</I>&gt;<i> assert fake_request.out.startswith('&lt;html&gt;')
</I>&gt;<i> 
</I>&gt;<i> Thanks, Sebastjan
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> ------------------------------------------------------------------------
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020064.html">[mod_python] SetHandler trick to have pretty url's
</A></li>
	<LI>Next message: <A HREF="019922.html">[mod_python] make failed on AIX 5.1 using xlc
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19920">[ date ]</a>
              <a href="thread.html#19920">[ thread ]</a>
              <a href="subject.html#19920">[ subject ]</a>
              <a href="author.html#19920">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
