<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] PYC download prompt
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20PYC%20download%20prompt&In-Reply-To=43D14317.3050105%40barriescene.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020087.html">
   <LINK REL="Next"  HREF="020055.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] PYC download prompt</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Jim Gallacher</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20PYC%20download%20prompt&In-Reply-To=43D14317.3050105%40barriescene.com"
       TITLE="[mod_python] PYC download prompt">jpg at jgassociates.ca
       </A><BR>
    <I>Fri Jan 20 15:54:04 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020087.html">[mod_python] Different scripts with same names and sys.path
	confusion
</A></li>
        <LI>Next message: <A HREF="020055.html">[mod_python] PYC download prompt (resolved)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20051">[ date ]</a>
              <a href="thread.html#20051">[ thread ]</a>
              <a href="subject.html#20051">[ subject ]</a>
              <a href="author.html#20051">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Sean Jamieson wrote:
&gt;<i> Jim Gallacher wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> Sean Jamieson wrote:
</I>&gt;&gt;&gt;<i> apache2/error.log is showing more than a few segfaults...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Segfaults! Now we are getting somewhere. There are likely some subtle 
</I>&gt;&gt;<i> differences in the python libraries and apache modules being used on 
</I>&gt;&gt;<i> the server and laptop. The usual culprits libexpat and mysql clientlib 
</I>&gt;&gt;<i> used by php, but other libs can cause problems too. These links may 
</I>&gt;&gt;<i> help you sort it out:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="http://www.dscpl.com.au/articles/modpython-006.html">http://www.dscpl.com.au/articles/modpython-006.html</A>
</I>&gt;&gt;<i> <A HREF="http://www.modpython.org/FAQ/faqw.py?req=all#2.13">http://www.modpython.org/FAQ/faqw.py?req=all#2.13</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Jim
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> I made the segfault stop, but I'm not sure why exactly...
</I>&gt;<i> to start at the beginning, there was another weirdness going on with 
</I>&gt;<i> mod_python, that was not a big deal, and I assumed to be &quot;just how it 
</I>&gt;<i> works&quot;:
</I>&gt;<i> if my project is in a subdirectory under the document root, I'd have to 
</I>&gt;<i> do my imports from the document root.
</I>&gt;<i> i.e.
</I>&gt;<i> DocumentRoot /var/www
</I>&gt;<i> Project Root /var/www/project
</I>&gt;<i> /var/www/project/index.py:
</I>&gt;<i>    import project.package.module
</I>&gt;<i> this seems strange as I sholud only have to do
</I>&gt;<i>    import package.module
</I>&gt;<i> with out having to include the directory that index.py actually resides 
</I>&gt;<i> in...
</I>&gt;<i> Now, keeping that in mind, I uploaded the source to my dev server, and 
</I>&gt;<i> to stop the segfaults I simply changes the imports to the second 
</I>&gt;<i> (expected) from, excluding the 'project' directory from the import path.
</I>&gt;<i> *inhale*
</I>&gt;<i> 
</I>&gt;<i> I don't know if that really fixed anything, or just caused some other 
</I>&gt;<i> error to be happening that prevents the whatever code is segfaulting 
</I>&gt;<i> from actually being run.
</I>&gt;<i> But, in either case, I get no error or output or log messages telling me 
</I>&gt;<i> useful. All I do get is:
</I>&gt;<i> [notice] mod_python: (Re)importing module 'index' with path set to 
</I>&gt;<i> '['/.....']'
</I>&gt;<i> and once in a while this is above it:
</I>&gt;<i> [notice] mod_python: (Re)importing module 'mod_python.publisher'
</I>
Publisher has it's own import and reload mechanism. Using a python 
import statement for modules that may also be imported by 
mod_python.publisher may give interesting results. If your 
project.package.module does not contain functions that are published 
directly I would suggest moving it completely out of your DocumentRoot 
and put it somewhere on your python path, or use the apache PythonPath 
directive to add it to the path. eg.

   PythonPath &quot;['/home/sean/website-modules/',] + sys.path&quot;

This import issue is not likely related to the segfaults however.

&gt;<i> OTOH, that link you gave me about PHP's mysql libs conflicting with 
</I>&gt;<i> mod_python and MySQLdb might be the very thing causing problems, but 
</I>&gt;<i> BOTH my laptop and my dev server have php4.4.0 installed... and both are 
</I>&gt;<i> from ubuntu's apt (infact, I haven't custom compiled anything on either 
</I>&gt;<i> machine since I built them, all are package managed, and recently updated)
</I>
A few weeks ago I ran apt-get update for python related packages on one 
of my debian machines and immediately started getting apache segfaults. 
Turned out that php4-mysql was using libmysqlclient.so.10 and the new 
python was using libmysqlclient.so.12. Updating php4-mysql brought the 2 
libs in line and the segfault went away. I don't think this sort of 
problem is easily solved by any package manager, so it's something to 
keep in mind when doing updates.

Jim

PS. It's a good idea to keep discussions on list.

</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020087.html">[mod_python] Different scripts with same names and sys.path
	confusion
</A></li>
	<LI>Next message: <A HREF="020055.html">[mod_python] PYC download prompt (resolved)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20051">[ date ]</a>
              <a href="thread.html#20051">[ thread ]</a>
              <a href="subject.html#20051">[ subject ]</a>
              <a href="author.html#20051">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
