<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Sessions again...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Sessions%20again...&In-Reply-To=003801c61d42%2430ca2900%24f8dbebc9%40luis">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020030.html">
   <LINK REL="Next"  HREF="020034.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Sessions again...</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Jim Gallacher</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Sessions%20again...&In-Reply-To=003801c61d42%2430ca2900%24f8dbebc9%40luis"
       TITLE="[mod_python] Sessions again...">jpg at jgassociates.ca
       </A><BR>
    <I>Thu Jan 19 17:25:12 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020030.html">[mod_python] Sessions again...
</A></li>
        <LI>Next message: <A HREF="020034.html">[mod_python] Sessions again...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20032">[ date ]</a>
              <a href="thread.html#20032">[ thread ]</a>
              <a href="subject.html#20032">[ subject ]</a>
              <a href="author.html#20032">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Luis M. Gonzalez wrote:
&gt;<i> Hi folks,
</I>&gt;<i> 
</I>&gt;<i> I made significant progress since I started playing with mod_python last week-end,
</I>&gt;<i> and I created a shopping cart and a script for handling pagination of recorsets with record navigation bars.
</I>&gt;<i> Everything works great, except for one little problem:
</I>&gt;<i> 
</I>&gt;<i> If I test one of these scripts (any of them), it works great, but if I test the other one without restarting the browser, I get a strange error message that, I guess, has to do with session variables.
</I>&gt;<i> This is the error message:
</I>&gt;<i> 
</I>&gt;<i> Mod_python error: &quot;PythonHandler mod_python.psp&quot;
</I>&gt;<i> 
</I>&gt;<i> Traceback (most recent call last):
</I>&gt;<i> 
</I>&gt;<i>   File &quot;C:\Python24\Lib\site-packages\mod_python\apache.py&quot;, line 299, in HandlerDispatch
</I>&gt;<i>     result = object(req)
</I>&gt;<i> 
</I>&gt;<i>   File &quot;C:\Python24\Lib\site-packages\mod_python\psp.py&quot;, line 302, in handler
</I>&gt;<i>     p.run()
</I>&gt;<i> 
</I>&gt;<i>   File &quot;C:\Python24\Lib\site-packages\mod_python\psp.py&quot;, line 213, in run
</I>&gt;<i>     exec code in global_scope
</I>&gt;<i> 
</I>&gt;<i>   File &quot;C:/Archivos de programa/Apache Group/Apache2/htdocs/test/zzxx.psp&quot;, line 18, in ?
</I>&gt;<i>     tmpl.run(vars = {   'dbmodule': dbmodule,
</I>&gt;<i> 
</I>&gt;<i>   File &quot;C:\Python24\Lib\site-packages\mod_python\psp.py&quot;, line 213, in run
</I>&gt;<i>     exec code in global_scope
</I>&gt;<i> 
</I>&gt;<i>   File &quot;C:/Archivos de programa/Apache Group/Apache2/htdocs/test\recset.tmpl&quot;, line 111, in ?
</I>&gt;<i>     r.counter = s['counter']
</I>&gt;<i> 
</I>&gt;<i> KeyError: 'counter'
</I>&gt;<i> Here, &quot;counter&quot; is a session variable I defined in one of these scripts.
</I>&gt;<i> If I test the other script first and then this one, I get the same error message, but instead of pinting to &quot;counter&quot;, it points to &quot;items&quot;, which is the other session variable.
</I>&gt;<i> 
</I>&gt;<i> Summing up:
</I>&gt;<i> Each script works great when tested first, but the second one gives me this error message.
</I>&gt;<i> On the other hand, If I test them separately (restarting the browser for each one), they both work great.
</I>&gt;<i> 
</I>&gt;<i> What could be the problem?
</I>&gt;<i> Any hint would be highy appreciated...
</I>
You'll need to clarify your problem a little, but I think you may be 
assuming that you get a different session object for each script. That 
is not the case, at least by default. You get one session object per 
browser so if you want to use it in independent scripts, each script 
will need to catch the KeyError exception or do some other test to see 
if you need to initialize your session data.

You can also do some thing like this:

r.counter = sess.get('counter', 0)
...
...
r.counter += 1
sess['counter'] = r.counter
sess.save()

Jim
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020030.html">[mod_python] Sessions again...
</A></li>
	<LI>Next message: <A HREF="020034.html">[mod_python] Sessions again...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20032">[ date ]</a>
              <a href="thread.html#20032">[ thread ]</a>
              <a href="subject.html#20032">[ subject ]</a>
              <a href="author.html#20032">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
