<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] erratic import errors with mod_python
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20erratic%20import%20errors%20with%20mod_python&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021307.html">
   <LINK REL="Next"  HREF="021309.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] erratic import errors with mod_python</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Detmar Meurers</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20erratic%20import%20errors%20with%20mod_python&In-Reply-To="
       TITLE="[mod_python] erratic import errors with mod_python">dm at julius.ling.ohio-state.edu
       </A><BR>
    <I>Sat Jun  3 14:36:00 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021307.html">[mod_python] [mod python] ABout Sessions
</A></li>
        <LI>Next message: <A HREF="021309.html">[mod_python] erratic import errors with mod_python
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21306">[ date ]</a>
              <a href="thread.html#21306">[ thread ]</a>
              <a href="subject.html#21306">[ subject ]</a>
              <a href="author.html#21306">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I'm using mod_python's publisher handler to load a .py file using
the usual

AddHandler python-program .py
PythonHandler mod_python.publisher
PythonDebug On

.htaccess specification in the directory in which the .py file
resides. That .py file imports some other modules, both standard ones
and some auxiliary functions I wrote and put into a separate file.

Usually the code executes fine, but every five or so times the page
is loaded (without changing anything, e.g. just doing several
reloads in a row), I get the error that mod_python for some reason
cannot find one of the modules that is being imported (namely the
file with the auxiliary functions, called tagarela_util.py, which is
in the same directory). I'm including an example error message
below.

This error never seems to appear for the standard modules I import,
(or when I put that file into the python2.4/site-packages which is 
in sys.path), so I suspect that it has something to do with the way
mod_python seems to use the .htaccess files to determine which
directory to add to the sys.path?

I very much hope someone can explain this erratic behavior and how I
can fix it - as it stands the only way I found to avoid these
occasional errors arising when importing modules is to put
everything into the same file, i.e. to avoid importing modules,
which naturally leads to massive code duplication and
non-modularity.

Any suggestions would be much appreciated!

Best,
Detmar

--
Detmar Meurers, Associate Professor, Dept. of Linguistics, OSU
201a Oxley Hall, 1712 Neil Avenue, Columbus OH 43210-1298, USA
<A HREF="http://ling.osu.edu/~dm/">http://ling.osu.edu/~dm/</A>                 GnuPG key on web page

****Server used:

'SERVER_SOFTWARE': 'Apache/2.2.0 (Unix) mod_ssl/2.2.0 OpenSSL/0.9.8a DAV/2 mod_python/3.2.8 Python/2.4.2'

(Errors appears with a variety of browsers, so seems to be independent
of that.) 

****Error message:

Mod_python error: &quot;PythonHandler mod_python.publisher&quot;

Traceback (most recent call last):

  File &quot;/opt/local/lib/python2.4/site-packages/mod_python/apache.py&quot;, line 299, in HandlerDispatch
    result = object(req)

  File &quot;/opt/local/lib/python2.4/site-packages/mod_python/publisher.py&quot;, line 204, in handler
    module = page_cache[req]

  File &quot;/opt/local/lib/python2.4/site-packages/mod_python/cache.py&quot;, line 82, in __getitem__
    return self._checkitem(name)[2]

  File &quot;/opt/local/lib/python2.4/site-packages/mod_python/cache.py&quot;, line 124, in _checkitem
    value = self.build(key, name, opened, entry)

  File &quot;/opt/local/lib/python2.4/site-packages/mod_python/publisher.py&quot;, line 77, in build
    return ModuleCache.build(self, key, req, opened, entry)

  File &quot;/opt/local/lib/python2.4/site-packages/mod_python/cache.py&quot;, line 371, in build
    exec opened in module.__dict__

  File &quot;/home/dm/public_html/icall/tagarela/activities/Reading/index.py&quot;, line 3, in ?
    from tagarela_util import _get_session, _file2string

ImportError: No module named tagarela_util

</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021307.html">[mod_python] [mod python] ABout Sessions
</A></li>
	<LI>Next message: <A HREF="021309.html">[mod_python] erratic import errors with mod_python
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21306">[ date ]</a>
              <a href="thread.html#21306">[ thread ]</a>
              <a href="subject.html#21306">[ subject ]</a>
              <a href="author.html#21306">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
