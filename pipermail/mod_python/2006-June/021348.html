<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] compiling mod_python with httpd 2.2.2
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20compiling%20mod_python%20with%20httpd%202.2.2&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021347.html">
   <LINK REL="Next"  HREF="021349.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] compiling mod_python with httpd 2.2.2</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20compiling%20mod_python%20with%20httpd%202.2.2&In-Reply-To="
       TITLE="[mod_python] compiling mod_python with httpd 2.2.2">grahamd at dscpl.com.au
       </A><BR>
    <I>Thu Jun  8 10:50:00 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021347.html">[mod_python] compiling mod_python with httpd 2.2.2
</A></li>
        <LI>Next message: <A HREF="021349.html">[mod_python] differentiate from where comes the request to a file
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21348">[ date ]</a>
              <a href="thread.html#21348">[ thread ]</a>
              <a href="subject.html#21348">[ subject ]</a>
              <a href="author.html#21348">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>In certain circumstances, it may be necessary to force libtool to use the option:

  -mimpure-text

to the underlying linker.

Sorry, can't go into more details as Internet connection too slow and don't have
details of how to do this as stuff is at work. Will be next week before I can refer
to my mod_python configuration files at work.

Graham

Ron Reisor wrote ..
&gt;<i> Mika,
</I>&gt;<i> 
</I>&gt;<i>     mod_python-3.2.7 is running here on Solaris 10 Sparc, but it's built
</I>&gt;<i> for httpd-2.0.55. We haven't done much with httpd-2.2.x yet but maybe 
</I>&gt;<i> later this summer we'll try to move to it.
</I>&gt;<i> 
</I>&gt;<i>     The httpd configure we are using is like this:
</I>&gt;<i> 
</I>&gt;<i> ./configure \
</I>&gt;<i> --prefix=/home/exp \
</I>&gt;<i> --exec-prefix=/home/exp \
</I>&gt;<i> --localstatedir=/home/exp/var \
</I>&gt;<i> --with-port=8080 \
</I>&gt;<i> --with-mpm=prefork \
</I>&gt;<i> --enable-mods-shared=all \
</I>&gt;<i> --enable-so \
</I>&gt;<i> --enable-ssl \
</I>&gt;<i> --with-ssl=/home/exp \
</I>&gt;<i> --enable-dav \
</I>&gt;<i> --enable-dav-fs \
</I>&gt;<i> --disable-suexec \
</I>&gt;<i> --with-z \
</I>&gt;<i> --without-gdbm \
</I>&gt;<i> --without-ndbm \
</I>&gt;<i> --with-berkeley-db=/home/exp/BerkeleyDB.4.2/ \
</I>&gt;<i> 
</I>&gt;<i>     and the mod_python configure is just:
</I>&gt;<i> 
</I>&gt;<i> ./configure --with-apxs=/home/exp/bin/apxs
</I>&gt;<i> 
</I>&gt;<i>     The biggest problem is getting the configure and Makefile scripts to
</I>&gt;<i> use the proper libtool. Building httpd will create a new libtool that 
</I>&gt;<i> matches what you specified to the httpd configure. You need to get your
</I>&gt;<i> search path set up to make sure all of the other builds will use that 
</I>&gt;<i> libtool.
</I>&gt;<i> 
</I>&gt;<i>     The points Jim makes are all very good too. I didn't build a flex for
</I>&gt;<i> Solaris, and didn't try to build documentation there either. So you may
</I>&gt;<i> make it easier on yourself if you leave those out until you need them.
</I>&gt;<i> 
</I>&gt;<i> Ron
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On Thu, 8 Jun 2006, Jim Gallacher wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; Mika Borner wrote:
</I>&gt;<i> &gt;&gt; Hi
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; I have problems compiling mod_python against httpd 2.2.2. I tried out
</I>&gt;<i> &gt;&gt; the newest version under trunk as well as the 3.2.x tree under Branch...
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; My system runs Solaris 10 (Sparc). 
</I>&gt;<i> &gt;&gt; /usr/include/sys/feature_tests.h:188:1: warning: this is the location
</I>&gt;<i> of
</I>&gt;<i> &gt;&gt; the previous definition
</I>&gt;<i> &gt;&gt; /u00/appl/apache2/apr-httpd/build-1/libtool --silent --mode=link gcc
</I>&gt;<i> -o
</I>&gt;<i> &gt;&gt; mod_python.la  -rpath /u00/appl/apache2/modules -module -avoid-version
</I>&gt;<i> &gt;&gt; hlistobject.lo hlist.lo filterobject.lo connobject.lo serverobject.lo
</I>&gt;<i> &gt;&gt; util.lo tableobject.lo requestobject.lo _apachemodule.lo mod_python.lo
</I>&gt;<i> &gt;&gt; -L/u00/appl/python/lib/python2.4/config -lm -lpython2.4 -lresolv
</I>&gt;<i> &gt;&gt; -lsocket -lnsl -lrt -ldl -lm _eprintf.o _floatdidf.o _muldi3.o
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; *** Warning: Linking the shared library mod_python.la against the
</I>&gt;<i> &gt;&gt; non-libtool
</I>&gt;<i> &gt;&gt; *** objects  _eprintf.o _floatdidf.o _muldi3.o is not portable!
</I>&gt;<i> &gt;&gt; Text relocation remains                         referenced
</I>&gt;<i> &gt;&gt;     against symbol                  offset      in file
</I>&gt;<i> &gt;&gt; &lt;unknown&gt;                           0x0 
</I>&gt;<i> &gt;&gt; /u00/appl/python/lib/python2.4/config/libpython2.4.a(floatobject.o)
</I>&gt;<i> &gt;&gt; &lt;unknown&gt;                           0x4 
</I>&gt;<i> &gt;&gt; /u00/appl/python/lib/python2.4/config/libpython2.4.a(floatobject.o)
</I>&gt;<i> &gt;&gt; &lt;unknown&gt;                           0x8 
</I>&gt;<i> &gt;&gt; /u00/appl/python/lib/python2.4/config/libpython2.4.a(floatobject.o)
</I>&gt;<i> &gt;&gt; ...
</I>&gt;<i> &gt;&gt; Vehis looks like a difference in the gawk vs you awk, as well as your
</I>&gt;<i> &gt;&gt; shellry Long List (ommitted)
</I>&gt;<i> &gt;&gt; ...
</I>&gt;<i> &gt;&gt; ld: fatal: relocations remain against allocatable but non-writable
</I>&gt;<i> &gt;&gt; sections
</I>&gt;<i> &gt;&gt; collect2: ld returned 1 exit status
</I>&gt;<i> &gt;&gt; apxs:Error: Command failed with rc=65536
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; httpd was compiled with options:
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; ./configure --prefix=/u00/appl/apache2 \
</I>&gt;<i> &gt;&gt; --enable-mods-shared=all \
</I>&gt;<i> &gt;&gt; --libdir=/usr/local/lib \
</I>&gt;<i> &gt;&gt; --with-apr=/u00/appl/apache2/apr-httpd \
</I>&gt;<i> &gt;&gt; --with-apr-util=/u00/appl/apache2/apr-util-httpd \
</I>&gt;<i> &gt;&gt; --enable-so
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; mod_python was compiled with options:
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; ./configure --with-apxs=/u00/appl/apache2/bin/apxs
</I>&gt;<i> &gt;&gt; --with-python=/u00/appl/python/bin/python
</I>&gt;<i> &gt;&gt; --with-python-src=/usr/local/src/Python-2.4.3
</I>&gt;<i> &gt;&gt; --with-flex=/usr/local/bin/flex
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I can't help you with the libtool issues. I know Ron Reisor successfully
</I>&gt;<i> &gt; built mod_python 3.2.7 on Solaris 10. (3.2.8 is essentially the same
</I>&gt;<i> - just a 
</I>&gt;<i> &gt; small security fix for FileSession). Hopefully if Ron is still on the
</I>&gt;<i> list he 
</I>&gt;<i> &gt; can offer you some insight.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; You only need --with-python-src if you want to build the documentation.
</I>&gt;<i> You 
</I>&gt;<i> &gt; don't need it, but it's not the cause of your problem.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; During configure also this error is raised (might be a non issue): 
</I>&gt;<i> &gt;&gt; checking for --with-flex... /usr/local/bin/flex
</I>&gt;<i> &gt;&gt; found /usr/local/bin/flex, we'll use this. Use --with-flex to specify
</I>&gt;<i> &gt;&gt; another.
</I>&gt;<i> &gt;&gt; checking flex version... awk: syntax error near line 1
</I>&gt;<i> &gt;&gt; awk: bailing out near line 1
</I>&gt;<i> &gt;&gt; awk: syntax error near line 1
</I>&gt;<i> &gt;&gt; awk: bailing out near line 1
</I>&gt;<i> &gt;&gt; awk: syntax error near line 1
</I>&gt;<i> &gt;&gt; awk: bailing out near line 1
</I>&gt;<i> &gt;&gt; ./configure: line 3187: test: : integer expression expected
</I>&gt;<i> &gt;&gt; configure: WARNING: Flex version 2.5.31 found.
</I>&gt;<i> &gt;&gt;     Version 2.5.31 or greater is required.  You can generally ignore
</I>&gt;<i> &gt;&gt; this
</I>&gt;<i> &gt;&gt;     warning unless you need to regenerate psp_parser.c from psp_parse.l.
</I>&gt;<i> &gt;&gt;     If you do need regenerate psp_parser.c, use --with-flex to specify
</I>&gt;<i> &gt;&gt; the
</I>&gt;<i> &gt;&gt;     location of the correct flex version. See the README for more
</I>&gt;<i> &gt;&gt; information.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Ignoring the syntax error for a minute, it is indeed not a problem if
</I>&gt;<i> you 
</I>&gt;<i> &gt; don't have the correct flex version unless you want to modify psp_parse.l,
</I>&gt;<i> &gt; but why would you want to do that when you haven't got mod_python working
</I>&gt;<i> &gt; yet? ;)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; It looks like the awk you are using is different from gawk. Could you
</I>&gt;<i> check 
</I>&gt;<i> &gt; your version? Also what shell are you using? The comparison done in line
</I>&gt;<i> 3187 
</I>&gt;<i> &gt; works in bash, but may not be compatible in other shells.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Non of the flex errors will cause your libtool problem, as flex should
</I>&gt;<i> not 
</I>&gt;<i> &gt; need to be called anyway. I would like to fix them so that configure
</I>&gt;<i> runs 
</I>&gt;<i> &gt; smoothly however.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Jim
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Mod_python mailing list
</I>&gt;<i> &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i> &gt;
</I>&gt;<i> 
</I>&gt;<i> Ron Reisor &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">ron at udel.edu</A>&gt; (RWR3)
</I>&gt;<i> University of Delaware Information Technologies/Network and Systems Services
</I>&gt;<i> Computing Center/192 South Chapel Street/Newark DE, 19716
</I>&gt;<i> pgp finger print: 0D 73 06 6F D3 6A 99 D3  F5 D5 6E FF 3B B9 7C 2C
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I></PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021347.html">[mod_python] compiling mod_python with httpd 2.2.2
</A></li>
	<LI>Next message: <A HREF="021349.html">[mod_python] differentiate from where comes the request to a file
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21348">[ date ]</a>
              <a href="thread.html#21348">[ thread ]</a>
              <a href="subject.html#21348">[ subject ]</a>
              <a href="author.html#21348">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
