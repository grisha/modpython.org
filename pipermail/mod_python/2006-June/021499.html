<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] odd behaviour of the md5-module in modpy
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20odd%20behaviour%20of%20the%20md5-module%20in%20modpy&In-Reply-To=44A0C9E6.5080701%40natlab.research.philips.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021498.html">
   <LINK REL="Next"  HREF="021501.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] odd behaviour of the md5-module in modpy</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Deron Meranda</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20odd%20behaviour%20of%20the%20md5-module%20in%20modpy&In-Reply-To=44A0C9E6.5080701%40natlab.research.philips.com"
       TITLE="[mod_python] odd behaviour of the md5-module in modpy">deron.meranda at gmail.com
       </A><BR>
    <I>Tue Jun 27 03:04:05 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021498.html">[mod_python] odd behaviour of the md5-module in modpy
</A></li>
        <LI>Next message: <A HREF="021501.html">[mod_python] odd behaviour of the md5-module in modpy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21499">[ date ]</a>
              <a href="thread.html#21499">[ thread ]</a>
              <a href="subject.html#21499">[ subject ]</a>
              <a href="author.html#21499">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 6/27/06, Mike Looijmans &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">nlv11281 at natlab.research.philips.com</A>&gt; wrote:
&gt;<i> I'm using a 64-bit AMD linux machine here - and I'm doing lots of MD5
</I>&gt;<i> checksumming without problems  while processing terabytes of data.
</I>&gt;<i>
</I>&gt;<i> I can probably use some 64 bit intel as well, but in the hundreds of
</I>&gt;<i> mails I got during my vacation, I lost track of the original post for
</I>&gt;<i> this problem.
</I>
Good to hear it's working for you on AMD 64-bit.

Just a quick summary of of the emails so far about what Nikolaus is
seeing, on two machines I believe.  (Nikl, correct me if I'm wrong)

One is a debian Linux (celeron 2ghz), the other ubuntu Linux (opteron
144).  The Ubuntu Linux is 64-bit with python 2.4.3-1ubuntu1 and
libapache2-mod-python-3.1.4-0ubuntu1 (both stock from the distro).

When he does MD5s, he always gets the same bogus hexdigest value
regardless of input, namely 0000000000000000d09215a3e97561b3 in his
report.  Supposedly the value will be different on each mod_python
request (but constant for every MD5 within the same request).  Also,
although random the initial half is always zeros.  The confusing part
is that when he runs Python outside of mod_python (such as
interactively) MD5s always work correctly.  Supposedly SHAs work
regardless.

He ran a simple test handler:

  def handler(req):
       import md5
       req.content_type = 'text/plain'
       req.write('md5: %s\n' % md5.__file__)
       for k, v in MD5_TESTS.items():
           m = md5.new(k).hexdigest()
           req.write('&quot;%s&quot; -&gt; &quot;%s&quot; ? %s\n' % (k, m, (m == v)))
       return apache.OK

Using RFC 1321 test vectors.  MD5s were all wrong.

I had him dump sys.modules, as well as looking at /proc/xxxx/map for
the httpd process, and saw nothing unusual.  The md5.so module is
loaded into the process from the expected Python lib-dynload standard
path.

I did see that his Apache has a ton of modules loaded though (many
PHP, MySQL, X11, etc), so I've recommended he run a stripped-down
apache.  Haven't heard results yet.

I've never seen anything like this, so if you have any ideas that
would be great.
-- 
Deron Meranda
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021498.html">[mod_python] odd behaviour of the md5-module in modpy
</A></li>
	<LI>Next message: <A HREF="021501.html">[mod_python] odd behaviour of the md5-module in modpy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21499">[ date ]</a>
              <a href="thread.html#21499">[ thread ]</a>
              <a href="subject.html#21499">[ subject ]</a>
              <a href="author.html#21499">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
