<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] compiling mod_python with httpd 2.2.2
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20compiling%20mod_python%20with%20httpd%202.2.2&In-Reply-To=4487D7280200001A000046FB%40zh02.cbintra.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021345.html">
   <LINK REL="Next"  HREF="021347.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] compiling mod_python with httpd 2.2.2</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Jim Gallacher</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20compiling%20mod_python%20with%20httpd%202.2.2&In-Reply-To=4487D7280200001A000046FB%40zh02.cbintra.net"
       TITLE="[mod_python] compiling mod_python with httpd 2.2.2">jpg at jgassociates.ca
       </A><BR>
    <I>Thu Jun  8 08:12:38 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021345.html">[mod_python] compiling mod_python with httpd 2.2.2
</A></li>
        <LI>Next message: <A HREF="021347.html">[mod_python] compiling mod_python with httpd 2.2.2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21346">[ date ]</a>
              <a href="thread.html#21346">[ thread ]</a>
              <a href="subject.html#21346">[ subject ]</a>
              <a href="author.html#21346">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Mika Borner wrote:
&gt;<i> Hi
</I>&gt;<i> 
</I>&gt;<i> I have problems compiling mod_python against httpd 2.2.2. I tried out
</I>&gt;<i> the newest version under trunk as well as the 3.2.x tree under Branch...
</I>&gt;<i> 
</I>&gt;<i> My system runs Solaris 10 (Sparc). 
</I>&gt;<i> 
</I>&gt;<i> /usr/include/sys/feature_tests.h:188:1: warning: this is the location of
</I>&gt;<i> the previous definition
</I>&gt;<i> /u00/appl/apache2/apr-httpd/build-1/libtool --silent --mode=link gcc -o
</I>&gt;<i> mod_python.la  -rpath /u00/appl/apache2/modules -module -avoid-version  
</I>&gt;<i>  hlistobject.lo hlist.lo filterobject.lo connobject.lo serverobject.lo
</I>&gt;<i> util.lo tableobject.lo requestobject.lo _apachemodule.lo mod_python.lo
</I>&gt;<i> -L/u00/appl/python/lib/python2.4/config -lm -lpython2.4 -lresolv
</I>&gt;<i> -lsocket -lnsl -lrt -ldl -lm _eprintf.o _floatdidf.o _muldi3.o
</I>&gt;<i> 
</I>&gt;<i> *** Warning: Linking the shared library mod_python.la against the
</I>&gt;<i> non-libtool
</I>&gt;<i> *** objects  _eprintf.o _floatdidf.o _muldi3.o is not portable!
</I>&gt;<i> Text relocation remains                         referenced
</I>&gt;<i>     against symbol                  offset      in file
</I>&gt;<i> &lt;unknown&gt;                           0x0        
</I>&gt;<i> /u00/appl/python/lib/python2.4/config/libpython2.4.a(floatobject.o)
</I>&gt;<i> &lt;unknown&gt;                           0x4        
</I>&gt;<i> /u00/appl/python/lib/python2.4/config/libpython2.4.a(floatobject.o)
</I>&gt;<i> &lt;unknown&gt;                           0x8        
</I>&gt;<i> /u00/appl/python/lib/python2.4/config/libpython2.4.a(floatobject.o)
</I>&gt;<i> ...
</I>&gt;<i> Vehis looks like a difference in the gawk vs you awk, as well as your shellry Long List (ommitted)
</I>&gt;<i> ...
</I>&gt;<i> ld: fatal: relocations remain against allocatable but non-writable
</I>&gt;<i> sections
</I>&gt;<i> collect2: ld returned 1 exit status
</I>&gt;<i> apxs:Error: Command failed with rc=65536
</I>&gt;<i> 
</I>&gt;<i> httpd was compiled with options:
</I>&gt;<i> 
</I>&gt;<i> ./configure --prefix=/u00/appl/apache2 \
</I>&gt;<i> --enable-mods-shared=all \
</I>&gt;<i> --libdir=/usr/local/lib \
</I>&gt;<i> --with-apr=/u00/appl/apache2/apr-httpd \
</I>&gt;<i> --with-apr-util=/u00/appl/apache2/apr-util-httpd \
</I>&gt;<i> --enable-so
</I>&gt;<i> 
</I>&gt;<i> mod_python was compiled with options:
</I>&gt;<i> 
</I>&gt;<i> ./configure --with-apxs=/u00/appl/apache2/bin/apxs
</I>&gt;<i> --with-python=/u00/appl/python/bin/python
</I>&gt;<i> --with-python-src=/usr/local/src/Python-2.4.3
</I>&gt;<i> --with-flex=/usr/local/bin/flex
</I>

I can't help you with the libtool issues. I know Ron Reisor successfully 
built mod_python 3.2.7 on Solaris 10. (3.2.8 is essentially the same - 
just a small security fix for FileSession). Hopefully if Ron is still on 
the list he can offer you some insight.

You only need --with-python-src if you want to build the documentation. 
You don't need it, but it's not the cause of your problem.

&gt;<i> During configure also this error is raised (might be a non issue):  
</I>&gt;<i> 
</I>&gt;<i> checking for --with-flex... /usr/local/bin/flex
</I>&gt;<i> found /usr/local/bin/flex, we'll use this. Use --with-flex to specify
</I>&gt;<i> another.
</I>&gt;<i> checking flex version... awk: syntax error near line 1
</I>&gt;<i> awk: bailing out near line 1
</I>&gt;<i> awk: syntax error near line 1
</I>&gt;<i> awk: bailing out near line 1
</I>&gt;<i> awk: syntax error near line 1
</I>&gt;<i> awk: bailing out near line 1
</I>&gt;<i> ./configure: line 3187: test: : integer expression expected
</I>&gt;<i> configure: WARNING: Flex version 2.5.31 found.
</I>&gt;<i>     Version 2.5.31 or greater is required.  You can generally ignore
</I>&gt;<i> this
</I>&gt;<i>     warning unless you need to regenerate psp_parser.c from psp_parse.l.
</I>&gt;<i>     If you do need regenerate psp_parser.c, use --with-flex to specify
</I>&gt;<i> the
</I>&gt;<i>     location of the correct flex version. See the README for more
</I>&gt;<i> information.
</I>
Ignoring the syntax error for a minute, it is indeed not a problem if 
you don't have the correct flex version unless you want to modify 
psp_parse.l, but why would you want to do that when you haven't got 
mod_python working yet? ;)

It looks like the awk you are using is different from gawk. Could you 
check your version? Also what shell are you using? The comparison done 
in line 3187 works in bash, but may not be compatible in other shells.

Non of the flex errors will cause your libtool problem, as flex should 
not need to be called anyway. I would like to fix them so that configure 
runs smoothly however.

Jim
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021345.html">[mod_python] compiling mod_python with httpd 2.2.2
</A></li>
	<LI>Next message: <A HREF="021347.html">[mod_python] compiling mod_python with httpd 2.2.2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21346">[ date ]</a>
              <a href="thread.html#21346">[ thread ]</a>
              <a href="subject.html#21346">[ subject ]</a>
              <a href="author.html#21346">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
