<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] [mod python] ABout Sessions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20%5Bmod%20python%5D%20ABout%20Sessions&In-Reply-To=1149321243.6305.45.camel%40localhost">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021305.html">
   <LINK REL="Next"  HREF="021306.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] [mod python] ABout Sessions</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Jim Gallacher</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20%5Bmod%20python%5D%20ABout%20Sessions&In-Reply-To=1149321243.6305.45.camel%40localhost"
       TITLE="[mod_python] [mod python] ABout Sessions">jpg at jgassociates.ca
       </A><BR>
    <I>Sun Jun  4 10:01:55 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021305.html">[mod_python] [mod python] ABout Sessions
</A></li>
        <LI>Next message: <A HREF="021306.html">[mod_python] erratic import errors with mod_python
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21307">[ date ]</a>
              <a href="thread.html#21307">[ thread ]</a>
              <a href="subject.html#21307">[ subject ]</a>
              <a href="author.html#21307">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>S.R.Pard&#225; wrote:
&gt;<i> Hi, 
</I>&gt;<i> 
</I>&gt;<i> Sorry to ask again.
</I>&gt;<i> 
</I>&gt;<i> I need some acclarations about the session object.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> I have been developing VBScripts ASP pages from 1999. I have used a lot
</I>&gt;<i> the ASP's session and application objects. Now I'm decided to use PSP
</I>&gt;<i> Mod_Python instead.
</I>&gt;<i> I'm using Ubuntu, with Apache2 and Mod_Python for server and the Firefox
</I>&gt;<i> web client.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 1st. Question :
</I>&gt;<i> Only One Session is created for various Firefox instances in the same
</I>&gt;<i> PC.
</I>&gt;<i> In ASP I could open 2 windows with different program views and data, on
</I>&gt;<i> different sessions (opening a new explorer. If you select New in menu
</I>&gt;<i> Archive with a page opened, you will have a another new page with same
</I>&gt;<i> session that the previous page)
</I>&gt;<i> Is possible to change how session works to make that ?
</I>&gt;<i> If not, can I make only one page could be open to reduce the possibility
</I>&gt;<i> of error (I Think in use target=&quot;APPL-WINDOW-NAME&quot; in all the links,
</I>&gt;<i> that make IE open page in an explicit named window )
</I>
Not directly, but you could likely subclass one of the session classes 
to do what you want.

&gt;<i> 
</I>&gt;<i> 2nd. Question:
</I>&gt;<i> Usually, in ASP is possible to create a Session referencing a DB
</I>&gt;<i> Connection object. So you can use that object to access the server
</I>&gt;<i> during the session using that stored connection. In IIS ASP that is fast
</I>&gt;<i> and secure.
</I>&gt;<i> I have been reading about problems storing not sys objects in sessions,
</I>&gt;<i> so I am unsure about that.
</I>
You are correct. The session data is a python pickle (except for 
MemorySession on Windows) and you will have problems if you try to 
pickle the db connection object.

&gt;<i> 
</I>&gt;<i> 3nd. Question:
</I>&gt;<i> All the sessions in IIS ASP would have the connection object (yes that I
</I>&gt;<i> mencioned in 2nd. point) previously stored because it was stored on a
</I>&gt;<i> Session_OnStart() event generated when a page uses Session object and no
</I>&gt;<i> Session is active for that petition, defined in global.asa web
</I>&gt;<i> configuration,  
</I>&gt;<i> So in the pages you can use :
</I>&gt;<i> 	connectionForThePage = Session('connectionForTheSession')
</I>&gt;<i> and OLE! you will have a connection created , because if session not
</I>&gt;<i> exist when page load Event will be fired and my code inserted into
</I>&gt;<i> on_star will create an object and let it stored in session before the
</I>&gt;<i> page executed (so Sesssion('con...') always exist)
</I>&gt;<i> 
</I>&gt;<i> Is there a Session_OnStart equivalent in Mod_Python (remember I am using
</I>&gt;<i> PSP , I think Publisher can permit write my handler and check that , but
</I>&gt;<i> I wanted a transparent method not related to write a handler if it is
</I>&gt;<i> possible)
</I>
As I understand your question I would say the answer is no. The best you 
can do is use sess.is_new() to test if it is an existing session. If 
not, you could then do your initialization.

&gt;<i> 
</I>&gt;<i> 4nd. Question:
</I>&gt;<i> Because Apache is threaded, varios modules are opened by various
</I>&gt;<i> Mod_python server instances. So the same modules can be loaded more than
</I>&gt;<i> one time. So global variables of a module are different to each session,
</I>&gt;<i> and to make it hard  possibly different request on same session.
</I>&gt;<i> In IIS ASP I could  use application object to store data to be accesed
</I>&gt;<i> into different sessions in all the sessions of the server. And
</I>&gt;<i> Application object could be LOCKED and UNLOCKED to ensure thread
</I>&gt;<i> security.  
</I>&gt;<i> In Mod_Python, the only solution its to write a class, that servers
</I>&gt;<i> global variables from a Database with appropiate locking ?
</I>

As you have surmised, global variables are a problem when using apache. 
The easiest solution is to store you data in a session if possible, as 
locking is turned on by default. You can turn it off, as well as lock 
and unlock the session manually if required but generally you don't need 
to worry.

Jim

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021305.html">[mod_python] [mod python] ABout Sessions
</A></li>
	<LI>Next message: <A HREF="021306.html">[mod_python] erratic import errors with mod_python
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21307">[ date ]</a>
              <a href="thread.html#21307">[ thread ]</a>
              <a href="subject.html#21307">[ subject ]</a>
              <a href="author.html#21307">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
