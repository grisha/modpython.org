<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] compiling mod_python with httpd 2.2.2
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20compiling%20mod_python%20with%20httpd%202.2.2&In-Reply-To=44881436.6090800%40jgassociates.ca">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021346.html">
   <LINK REL="Next"  HREF="021348.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] compiling mod_python with httpd 2.2.2</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Ron Reisor</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20compiling%20mod_python%20with%20httpd%202.2.2&In-Reply-To=44881436.6090800%40jgassociates.ca"
       TITLE="[mod_python] compiling mod_python with httpd 2.2.2">ron at udel.edu
       </A><BR>
    <I>Thu Jun  8 10:16:28 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021346.html">[mod_python] compiling mod_python with httpd 2.2.2
</A></li>
        <LI>Next message: <A HREF="021348.html">[mod_python] compiling mod_python with httpd 2.2.2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21347">[ date ]</a>
              <a href="thread.html#21347">[ thread ]</a>
              <a href="subject.html#21347">[ subject ]</a>
              <a href="author.html#21347">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Mika,

    mod_python-3.2.7 is running here on Solaris 10 Sparc, but it's built 
for httpd-2.0.55. We haven't done much with httpd-2.2.x yet but maybe 
later this summer we'll try to move to it.

    The httpd configure we are using is like this:

./configure \
--prefix=/home/exp \
--exec-prefix=/home/exp \
--localstatedir=/home/exp/var \
--with-port=8080 \
--with-mpm=prefork \
--enable-mods-shared=all \
--enable-so \
--enable-ssl \
--with-ssl=/home/exp \
--enable-dav \
--enable-dav-fs \
--disable-suexec \
--with-z \
--without-gdbm \
--without-ndbm \
--with-berkeley-db=/home/exp/BerkeleyDB.4.2/ \

    and the mod_python configure is just:

./configure --with-apxs=/home/exp/bin/apxs

    The biggest problem is getting the configure and Makefile scripts to 
use the proper libtool. Building httpd will create a new libtool that 
matches what you specified to the httpd configure. You need to get your 
search path set up to make sure all of the other builds will use that 
libtool.

    The points Jim makes are all very good too. I didn't build a flex for 
Solaris, and didn't try to build documentation there either. So you may 
make it easier on yourself if you leave those out until you need them.

Ron


On Thu, 8 Jun 2006, Jim Gallacher wrote:

&gt;<i> Mika Borner wrote:
</I>&gt;&gt;<i> Hi
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I have problems compiling mod_python against httpd 2.2.2. I tried out
</I>&gt;&gt;<i> the newest version under trunk as well as the 3.2.x tree under Branch...
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> My system runs Solaris 10 (Sparc). 
</I>&gt;&gt;<i> /usr/include/sys/feature_tests.h:188:1: warning: this is the location of
</I>&gt;&gt;<i> the previous definition
</I>&gt;&gt;<i> /u00/appl/apache2/apr-httpd/build-1/libtool --silent --mode=link gcc -o
</I>&gt;&gt;<i> mod_python.la  -rpath /u00/appl/apache2/modules -module -avoid-version 
</I>&gt;&gt;<i> hlistobject.lo hlist.lo filterobject.lo connobject.lo serverobject.lo
</I>&gt;&gt;<i> util.lo tableobject.lo requestobject.lo _apachemodule.lo mod_python.lo
</I>&gt;&gt;<i> -L/u00/appl/python/lib/python2.4/config -lm -lpython2.4 -lresolv
</I>&gt;&gt;<i> -lsocket -lnsl -lrt -ldl -lm _eprintf.o _floatdidf.o _muldi3.o
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> *** Warning: Linking the shared library mod_python.la against the
</I>&gt;&gt;<i> non-libtool
</I>&gt;&gt;<i> *** objects  _eprintf.o _floatdidf.o _muldi3.o is not portable!
</I>&gt;&gt;<i> Text relocation remains                         referenced
</I>&gt;&gt;<i>     against symbol                  offset      in file
</I>&gt;&gt;<i> &lt;unknown&gt;                           0x0 
</I>&gt;&gt;<i> /u00/appl/python/lib/python2.4/config/libpython2.4.a(floatobject.o)
</I>&gt;&gt;<i> &lt;unknown&gt;                           0x4 
</I>&gt;&gt;<i> /u00/appl/python/lib/python2.4/config/libpython2.4.a(floatobject.o)
</I>&gt;&gt;<i> &lt;unknown&gt;                           0x8 
</I>&gt;&gt;<i> /u00/appl/python/lib/python2.4/config/libpython2.4.a(floatobject.o)
</I>&gt;&gt;<i> ...
</I>&gt;&gt;<i> Vehis looks like a difference in the gawk vs you awk, as well as your 
</I>&gt;&gt;<i> shellry Long List (ommitted)
</I>&gt;&gt;<i> ...
</I>&gt;&gt;<i> ld: fatal: relocations remain against allocatable but non-writable
</I>&gt;&gt;<i> sections
</I>&gt;&gt;<i> collect2: ld returned 1 exit status
</I>&gt;&gt;<i> apxs:Error: Command failed with rc=65536
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> httpd was compiled with options:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> ./configure --prefix=/u00/appl/apache2 \
</I>&gt;&gt;<i> --enable-mods-shared=all \
</I>&gt;&gt;<i> --libdir=/usr/local/lib \
</I>&gt;&gt;<i> --with-apr=/u00/appl/apache2/apr-httpd \
</I>&gt;&gt;<i> --with-apr-util=/u00/appl/apache2/apr-util-httpd \
</I>&gt;&gt;<i> --enable-so
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> mod_python was compiled with options:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> ./configure --with-apxs=/u00/appl/apache2/bin/apxs
</I>&gt;&gt;<i> --with-python=/u00/appl/python/bin/python
</I>&gt;&gt;<i> --with-python-src=/usr/local/src/Python-2.4.3
</I>&gt;&gt;<i> --with-flex=/usr/local/bin/flex
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I can't help you with the libtool issues. I know Ron Reisor successfully 
</I>&gt;<i> built mod_python 3.2.7 on Solaris 10. (3.2.8 is essentially the same - just a 
</I>&gt;<i> small security fix for FileSession). Hopefully if Ron is still on the list he 
</I>&gt;<i> can offer you some insight.
</I>&gt;<i>
</I>&gt;<i> You only need --with-python-src if you want to build the documentation. You 
</I>&gt;<i> don't need it, but it's not the cause of your problem.
</I>&gt;<i>
</I>&gt;&gt;<i> During configure also this error is raised (might be a non issue): 
</I>&gt;&gt;<i> checking for --with-flex... /usr/local/bin/flex
</I>&gt;&gt;<i> found /usr/local/bin/flex, we'll use this. Use --with-flex to specify
</I>&gt;&gt;<i> another.
</I>&gt;&gt;<i> checking flex version... awk: syntax error near line 1
</I>&gt;&gt;<i> awk: bailing out near line 1
</I>&gt;&gt;<i> awk: syntax error near line 1
</I>&gt;&gt;<i> awk: bailing out near line 1
</I>&gt;&gt;<i> awk: syntax error near line 1
</I>&gt;&gt;<i> awk: bailing out near line 1
</I>&gt;&gt;<i> ./configure: line 3187: test: : integer expression expected
</I>&gt;&gt;<i> configure: WARNING: Flex version 2.5.31 found.
</I>&gt;&gt;<i>     Version 2.5.31 or greater is required.  You can generally ignore
</I>&gt;&gt;<i> this
</I>&gt;&gt;<i>     warning unless you need to regenerate psp_parser.c from psp_parse.l.
</I>&gt;&gt;<i>     If you do need regenerate psp_parser.c, use --with-flex to specify
</I>&gt;&gt;<i> the
</I>&gt;&gt;<i>     location of the correct flex version. See the README for more
</I>&gt;&gt;<i> information.
</I>&gt;<i>
</I>&gt;<i> Ignoring the syntax error for a minute, it is indeed not a problem if you 
</I>&gt;<i> don't have the correct flex version unless you want to modify psp_parse.l, 
</I>&gt;<i> but why would you want to do that when you haven't got mod_python working 
</I>&gt;<i> yet? ;)
</I>&gt;<i>
</I>&gt;<i> It looks like the awk you are using is different from gawk. Could you check 
</I>&gt;<i> your version? Also what shell are you using? The comparison done in line 3187 
</I>&gt;<i> works in bash, but may not be compatible in other shells.
</I>&gt;<i>
</I>&gt;<i> Non of the flex errors will cause your libtool problem, as flex should not 
</I>&gt;<i> need to be called anyway. I would like to fix them so that configure runs 
</I>&gt;<i> smoothly however.
</I>&gt;<i>
</I>&gt;<i> Jim
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I>
Ron Reisor &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">ron at udel.edu</A>&gt; (RWR3)
University of Delaware Information Technologies/Network and Systems Services
Computing Center/192 South Chapel Street/Newark DE, 19716
pgp finger print: 0D 73 06 6F D3 6A 99 D3  F5 D5 6E FF 3B B9 7C 2C
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021346.html">[mod_python] compiling mod_python with httpd 2.2.2
</A></li>
	<LI>Next message: <A HREF="021348.html">[mod_python] compiling mod_python with httpd 2.2.2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21347">[ date ]</a>
              <a href="thread.html#21347">[ thread ]</a>
              <a href="subject.html#21347">[ subject ]</a>
              <a href="author.html#21347">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
