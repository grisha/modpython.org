<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] differentiate from where comes the request to a file
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20differentiate%20from%20where%20comes%20the%20request%20to%20a%20file&In-Reply-To=5c06fa770606090722g689a0b0fv356b8e44bc28b031%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021352.html">
   <LINK REL="Next"  HREF="021360.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] differentiate from where comes the request to a file</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Rui Miguel Justino</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20differentiate%20from%20where%20comes%20the%20request%20to%20a%20file&In-Reply-To=5c06fa770606090722g689a0b0fv356b8e44bc28b031%40mail.gmail.com"
       TITLE="[mod_python] differentiate from where comes the request to a file">rmcjustino at gmail.com
       </A><BR>
    <I>Fri Jun  9 11:06:17 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021352.html">[mod_python] differentiate from where comes the request to a file
</A></li>
        <LI>Next message: <A HREF="021360.html">[mod_python] differentiate from where comes the request to a file
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21353">[ date ]</a>
              <a href="thread.html#21353">[ thread ]</a>
              <a href="subject.html#21353">[ subject ]</a>
              <a href="author.html#21353">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,
Thanks for the quick replies.I have been on this subject for the last couple
of days, and did not find a good answer to this. My project will be in top
of a python platform so is good to hear the opinion of people who also
understand the basics(apache).

I'm looking for some type of solution that is secure and easy to implement
and don't bring a bigger cost to the rest of the application. I will look
with more attention to the directions you both have pointed out, I will
definitively have to use authentication and then i can probably control the
access to files with Referer Header. I will study the viability of it.



On 6/9/06, Deron Meranda &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">deron.meranda at gmail.com</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> On 6/9/06, Rui Miguel Justino &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">rmcjustino at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt; Is it possible to differentiate between a request to a file of type
</I>&gt;<i> &gt; (pdf,png, etc) made by a psp page and a direct request made by a user
</I>&gt;<i> who is
</I>&gt;<i> &gt; trying to access directly to this files?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Sorry  if it is confuse. The purpose here is to only give access to
</I>&gt;<i> files
</I>&gt;<i> &gt; for users who have authenticate to the application, but Even those users
</I>&gt;<i> &gt; will only have access to files that show up in the application(webpage).
</I>&gt;<i> And
</I>&gt;<i> &gt; if those users are trying to guess file names they ill not have access
</I>&gt;<i> to
</I>&gt;<i> &gt; the files.
</I>&gt;<i>
</I>&gt;<i> As Nicolas said, usually the Referer header is used as a simple check.
</I>&gt;<i> That can even be done using just Apache directives with no mod_python
</I>&gt;<i> work if you want.
</I>&gt;<i>
</I>&gt;<i> However, if you're willing to put in more work and you don't want
</I>&gt;<i> to actually use authentication, you can make use of dynamically
</I>&gt;<i> generated hard-to-guess URLs for your images.
</I>&gt;<i>
</I>&gt;<i> Essentially when you output the HTML page which contains the
</I>&gt;<i> &lt;img&gt; link (or other linking element) you generate URLs with
</I>&gt;<i> lots of random characters.  Then either record those URLs in
</I>&gt;<i> a database of sorts, or perhaps encrypt or sign them (the standard
</I>&gt;<i> Python 'hmac' module may be useful).  And finally have a mod_python
</I>&gt;<i> handler accept all those URLs and serve the file contents only if
</I>&gt;<i> the URL verification works.  Eventually you remove the valid
</I>&gt;<i> URLs from your database (or they expire if you recorded a
</I>&gt;<i> date in them before HMAC signing).
</I>&gt;<i>
</I>&gt;<i> There's lots of details I left out, but it should give you the idea.
</I>&gt;<i> --
</I>&gt;<i> Deron Meranda
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20060609/19e28ab9/attachment.html">http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20060609/19e28ab9/attachment.html</A>
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021352.html">[mod_python] differentiate from where comes the request to a file
</A></li>
	<LI>Next message: <A HREF="021360.html">[mod_python] differentiate from where comes the request to a file
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21353">[ date ]</a>
              <a href="thread.html#21353">[ thread ]</a>
              <a href="subject.html#21353">[ subject ]</a>
              <a href="author.html#21353">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
