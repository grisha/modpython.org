<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Trouble spawning a long running process...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Trouble%20spawning%20a%20long%20running%20process...&In-Reply-To=200406012322.04788.eric%40ericwalstad.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015713.html">
   <LINK REL="Next"  HREF="015714.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Trouble spawning a long running process...</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Gustavo C&#243;rdova Avila</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Trouble%20spawning%20a%20long%20running%20process...&In-Reply-To=200406012322.04788.eric%40ericwalstad.com"
       TITLE="[mod_python] Trouble spawning a long running process...">gustavo.cordova at q-voz.com
       </A><BR>
    <I>Wed Jun  2 10:35:00 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="015713.html">[mod_python] Trouble spawning a long running process...
</A></li>
        <LI>Next message: <A HREF="015714.html">[mod_python] Trouble spawning a long running process...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15716">[ date ]</a>
              <a href="thread.html#15716">[ thread ]</a>
              <a href="subject.html#15716">[ subject ]</a>
              <a href="author.html#15716">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> 
</I>&gt;<i> Hi all,
</I>&gt;<i> 
</I>&gt;<i> I'm attempting to spawn a process in my mod_python function.  
</I>&gt;<i> I want to run a long-running script in a seperate process
</I>&gt;<i> while returning the process id to the client quickly. 
</I>&gt;<i> However, the spawned process goes zombie (defunct), I 
</I>&gt;<i> think when the mod_python function finishes sending the 
</I>&gt;<i> response to the client.  Here's how I'm spawning the process:
</I>&gt;<i> process_id = os.spawnl(os.P_NOWAIT, BUILDISO_COMMAND)
</I>&gt;<i> and when I check the status of the spawned process:
</I>&gt;<i> # ps ax
</I>&gt;<i> [...]
</I>&gt;<i>  4229 ?        S      0:00 /usr/sbin/httpd
</I>&gt;<i>  4237 ?        Z      0:00 [httpd] &lt;defunct&gt;
</I>&gt;<i> It is defunct.  (The parent is dead, long live the parent!)
</I>&gt;<i> 
</I>&gt;<i> Do any of you have advice for a good way to keep the user 
</I>&gt;<i> from having to wait for long processes to finish before
</I>&gt;<i> seeing a response from mod_python?
</I>
I had a problem like this in another life, albeit it was with CGI,
but the principal might be the same.  The child process needs to
detach from it's parent, you might need to do the double-fork
trick.

&gt;<i> 
</I>&gt;<i> ...
</I>&gt;<i> 
</I>&gt;<i> As a bit of background, the spawned script is creating an iso 
</I>&gt;<i> file approx 45MB for the client to download (later). 
</I>&gt;<i>
</I>
No wonder.  My app was doing a massive mailing to some list
subscribers, using a decidedly unefficient algorithm to do the
sending.

&gt;<i> 
</I>&gt;<i> Many thanks for your time, wisdom and suggestions.
</I>&gt;<i> 
</I>&gt;<i> Best regards,
</I>&gt;<i> 
</I>&gt;<i> Eric.
</I>&gt;<i>
</I>
You're welcome, hope this helps.

-gus


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015713.html">[mod_python] Trouble spawning a long running process...
</A></li>
	<LI>Next message: <A HREF="015714.html">[mod_python] Trouble spawning a long running process...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15716">[ date ]</a>
              <a href="thread.html#15716">[ thread ]</a>
              <a href="subject.html#15716">[ subject ]</a>
              <a href="author.html#15716">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
