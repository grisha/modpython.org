<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Re: How do I split up the URI in a request handler?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20How%20do%20I%20split%20up%20the%20URI%20in%20a%20request%20handler%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015749.html">
   <LINK REL="Next"  HREF="015753.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Re: How do I split up the URI in a request handler?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Moore, Paul</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20How%20do%20I%20split%20up%20the%20URI%20in%20a%20request%20handler%3F&In-Reply-To="
       TITLE="[mod_python] Re: How do I split up the URI in a request handler?">Paul.Moore at atosorigin.com
       </A><BR>
    <I>Mon Jun  7 13:52:34 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="015749.html">[mod_python] mod_python / mod_php4 w/apache 2 
</A></li>
        <LI>Next message: <A HREF="015753.html">[mod_python] Re: How do I split up the URI in a request handler?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15752">[ date ]</a>
              <a href="thread.html#15752">[ thread ]</a>
              <a href="subject.html#15752">[ subject ]</a>
              <a href="author.html#15752">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Gregory (Grisha) Trubetskoy wrote:

&gt;<i> The answer to this is not as simple as it would seem it should be,
</I>&gt;<i> because &quot;/mywebdir&quot; could be a directory such that DocumentRoot +
</I>&gt;<i> &quot;/mywedir&quot; would give you the path on disk, but it could also be an
</I>&gt;<i> alias, in which case there is no way to know what directory you're
</I>&gt;<i> in...
</I>&gt;<i>
</I>&gt;<i> But assuming you don't use aliases, req.filename will tell you what
</I>&gt;<i> directory you're in.
</I>
In my case, the problem is that I *am* using an alias. The background
is that MoinMoin includes mod_python support now. However, MoinMoin
URLs are of the form

    <A HREF="http://server.name/wiki/PageName">http://server.name/wiki/PageName</A>

Here, &quot;wiki&quot; is an alias set up to point to the MoinMoin instance
directory, and PageName is the name of the page to display. In order
for the MoinMoin code to figure out the page, it needs to be able to
split the URL up into the &quot;script&quot; (/wiki) and the &quot;path&quot; (/PageName).
I suspect that this is because the original version of MoinMoin used
CGI, so the &quot;script&quot; was /whatever/path/you/want/moin.cgi and the path
can come from the standard CGI PATH_INFO variable.

Actually, I think I have a solution. Rather than using a Directory, I
can just use a Location. If I do that, the path_info attribute is
&quot;correct&quot; (ie, it includes everything after the part of the URL which
names the location).

So I have

&lt;Location /wiki&gt;
    # Use mod_python as handler
    SetHandler python-program

    # set the path to the MoinMoin package and to the moin_config.py
    PythonPath &quot;['D:/Moin/dbawiki']+sys.path&quot;

    # choose the ModPy Request class as handler
    PythonHandler MoinMoin.request::RequestModPy.run
&lt;/Location&gt;

This seems to work as required. (I'm not 100% sure why, as MoinMoin
seems to be using SCRIPT_PATH, which is empty, but hey, if it works...

Paul.


__________________________________________________________________________
This e-mail and the documents attached are confidential and intended 
solely for the addressee; it may also be privileged. If you receive this 
e-mail in error, please notify the sender immediately and destroy it.
As its integrity cannot be secured on the Internet, the Atos Origin group 
liability cannot be triggered for the message content. Although the 
sender endeavours to maintain a computer virus-free network, the sender 
does not warrant that this transmission is virus-free and will not be 
liable for any damages resulting from any virus transmitted.
__________________________________________________________________________

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015749.html">[mod_python] mod_python / mod_php4 w/apache 2 
</A></li>
	<LI>Next message: <A HREF="015753.html">[mod_python] Re: How do I split up the URI in a request handler?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15752">[ date ]</a>
              <a href="thread.html#15752">[ thread ]</a>
              <a href="subject.html#15752">[ subject ]</a>
              <a href="author.html#15752">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
