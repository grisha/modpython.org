<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Trouble spawning a long running process...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Trouble%20spawning%20a%20long%20running%20process...&In-Reply-To=20040602124105.M37604%40onyx.ispol.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015718.html">
   <LINK REL="Next"  HREF="015723.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Trouble spawning a long running process...</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Eric Walstad</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Trouble%20spawning%20a%20long%20running%20process...&In-Reply-To=20040602124105.M37604%40onyx.ispol.com"
       TITLE="[mod_python] Trouble spawning a long running process...">eric at ericwalstad.com
       </A><BR>
    <I>Wed Jun  2 11:27:38 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="015718.html">[mod_python] Trouble spawning a long running process...
</A></li>
        <LI>Next message: <A HREF="015723.html">[mod_python] Trouble spawning a long running process...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15719">[ date ]</a>
              <a href="thread.html#15719">[ thread ]</a>
              <a href="subject.html#15719">[ subject ]</a>
              <a href="author.html#15719">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Grisha and the gang...
On Wednesday 02 June 2004 09:43, Gregory (Grisha) Trubetskoy wrote:
&gt;<i> On Tue, 1 Jun 2004, Eric Walstad wrote:
</I>&gt;<i> &gt; Do any of you have advice for a good way to keep the user from having to
</I>&gt;<i> &gt; wait for long processes to finish before seeing a response from
</I>&gt;<i> &gt; mod_python?
</I>&gt;<i>
</I>&gt;<i> Here is another idea - instead of spawning, register it as a cleanup
</I>&gt;<i> (req.register_cleanup()). It will execute within the Apache process, but
</I>&gt;<i> after the request is processed, and shouldn't really interfere with
</I>&gt;<i> anything.
</I>
Thanks to you, Mike and Gus for your replies.

req.register_cleanup() looks like a good match.  I doubt I would have ever 
found register_cleanup on my own!  Do you have any tips on how to tell when 
the cleanup process has completed?  I'm currently checking for the existence 
of the generated iso file, but there's a brief period where the file exists 
(os.path.exists) but has not been completely written yet.  That's probably 
not a problem, but might be if I try to  stream the file to the client while 
it's being written by mkisofs (that's my next hurdle).  Checking 
os.path.exists just feels like a bit of a hack, that's all.  Any thoughts?

If register_cleanup doesn't work, I'll give &quot;nohup sudo 'mycommand' &amp;&quot; a try 
and live with the &quot;exists&quot; hack.

Thanks again for your help.

Best regards,

Eric.
</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015718.html">[mod_python] Trouble spawning a long running process...
</A></li>
	<LI>Next message: <A HREF="015723.html">[mod_python] Trouble spawning a long running process...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15719">[ date ]</a>
              <a href="thread.html#15719">[ thread ]</a>
              <a href="subject.html#15719">[ subject ]</a>
              <a href="author.html#15719">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
