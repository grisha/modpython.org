From graham.dumpleton at gmail.com  Sun Jun  1 21:49:25 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Sun Jun  1 21:49:28 2008
Subject: [mod_python] Windows performance problem
In-Reply-To: <6543521a0805311050n75794f45x46711e82226136c8@mail.gmail.com>
References: <6543521a0805311050n75794f45x46711e82226136c8@mail.gmail.com>
Message-ID: <88e286470806011849s5a21afecjf29a4def4666663e@mail.gmail.com>

2008/6/1 William Chapman <jeddahbill@gmail.com>:
> I'm new to this list, but have been using mod_python successfully for three
> years in a web app served by both Linux (Ubuntu) and Windows (XP sp2 32bit
> AND 64bit).  I use two hosts to serve: one for testing (semi-public); one
> for development.  Both hosts are dual-boot (Linux/Windows) and will serve
> the identical web app installation from the same (NTFS file system)
> directories.
>
> My problems started when the development host went belly-up and I rebuilt
> the computer.  The Windows installation was upgraded (?) from 32bit to 64bit
> XP sp2.  (I don't know if going to x64 Windows is part of the problem; I
> doubt it.)  Upon bringing up the new development host, all went well with
> the Linux side, but under Windows, the web app is perfroming poorly.  The
> application accesses take much too long.  Historically, the Windows & Linux
> installations were comparable, and I never had performance complaints.  Now,
> the new Windows installation is 5x to 10x slower than previously.  To
> emphasize, the mod_python is "working," but very slowly, and comletely
> unlike my previous experience with Windows/Apache/mod_python, not to mention
> my current testing host which is fine.

Have you tested speed of serving static files? That is, is it a
mod_python specific problem or a problem with Apache as a whole?

> The setup (all installed from binaries):
> Windows XP x64 sp2
> apache 2.2.8
> mod_python 3.3.1
> Python 2.5.2 (installed separately)
>
> Note:  I am not exactly sure of the order in which I installed
> Apache/mod_python & Python 2.5.  Could this matter?
> I did uninstall and reinstall mod_python but performance/symptoms didn't
> seem to change.
>
> The only clues:
> Three lines together from apache error.log (long lines - STRETCH BROWSER)
> (file also attached) (also see Graham's email here.):
> [Fri May 30 17:38:57 2008] [error] python_init: Python version mismatch,
> expected '2.5', found '2.5.2'.
> [Fri May 30 17:38:58 2008] [error] python_init: Python executable found
> 'C:\\Program Files (x86)\\Apache Software
> Foundation\\Apache2.2\\bin\\httpd.exe'.
> [Fri May 30 17:38:58 2008] [error] python_init: Python path being used
> 'C:\\WINDOWS\\system32\\python25.zip;C:\\Python25\\Lib;C:\\Python25\\DLLs;C:\\Python25\\Lib\\lib-tk;;C:\\Program
> Files (x86)\\Apache Software Foundation\\Apache2.2\\bin'.
>
> I have read several of the threads from the list on this subject and am
> confused about the following points:
> (1) In the "Python version mismatch" error, the "found" version matches the
> version of Python I installed on the Windows machine.  mod_python "expected
> 2.5".  Where is that supposed to come from?  I could not find Python 2.5 at
> http://python.org.

You obviously used a prebuilt version of mod_python for Windows. That
prebuilt version used Python 2.5 when compiled. That is what it means.

> (2) Apparently the "Python version mismatch" error message is not enough to
> stop mod_python from working, because it is "working."

On Windows, because Python is obtained via a DLL, the warning can be
ignored as APIs will be compatible. In other words, doesn't matter
that mod_python was originally compiled for older patch revision.

> (3) The "Python executable found" error message points to
> "...\\Apache2.2\\bin\\httpd.exe"  This does not look like a "Python
> executable."  (?)

Outputing this was thought to be a good idea, but not actually of much
use. What it is simply showing is that Python is running embedded
inside of Apache httpd executable. In other words, not standalone
python.exe.

> (4) The "Python path being used" error message specifies a series of paths.
> Where do those paths come from?  Can I affect those values?

To a degree. See PythonPath directive, although changes may with this
may not show up in startup messages as they are applied later. You can
also change it by fiddling Windows registry, but you shouldn't do that
if you can help it.

> Taken as a
> whole it doesn't match the system path environment variable I'm able to set
> as a Windows user.

This is not the PATH variable, it is related to Python module search path.

> Random thought: I always thought that mod_python included an embedded Python
> interpreter, but reading suggests mod_python links to Python libraries.

Both observations are true. Python is used in embedded mode, but code
comes from DLL.

> My analysis:  I suspect that the principle benefit of a mod_python
> installation is not being realized.  It seems that the interpreter is having
> to be restarted for each access.  Is there another explanation for the poor
> performance?

Your understanding is wrong. A new interpreter is not created on each request.

There is obviously still something wrong with your configuration or
perhaps with the web application which only manifests with this
configuration.

Start out by seeing if Apache as a whole is working okay by testing
static file serving.

Graham


> At any rate I would greatly appreciate any suggestions or insights you might
> have!!
>
> With many thanks,
> -- Bill Chapman
>
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>
>
From Dominique.Holzwarth at ch.delarue.com  Mon Jun  2 01:50:56 2008
From: Dominique.Holzwarth at ch.delarue.com (Dominique.Holzwarth@ch.delarue.com)
Date: Mon Jun  2 01:51:24 2008
Subject: [mod_python] Windows performance problem
In-Reply-To: <6543521a0805311050n75794f45x46711e82226136c8@mail.gmail.com>
Message-ID: <5213E58D85BC414998FA553C701E386C0EF28904D6@SGBD012511.dlrmail.ad.delarue.com>

Hi Bill

About your questions number 3 and 4:
- httpd.exe is THE apache http webserver ;-). That webserver spawns a process for client requests which then calls an instance of the python interpreter to serve your python scripts (don't ask me about the details :-p). I don't know why the log is stating it as error, but to me it's not really an error (I get the same 3 lines in my apache log btw ;-)).
- the python path that's mentioned is a environment- (or system-) variable. It can bet set under "control panel" --> "system" --> "advanced" --> environment variables.

As a general comment about mod_python being slow I'd advice you to check whether it's really mod_python that's causing the problem or not. Maybe your python scripts are using some other "3rd party" tools that you changed when you rebuilt your PC (I am thinking of stuff like COM etc.) ?

On my machine mod_python alone runs very smooth but when I add COM stuff (for example MS XML parser etc) or do some subversion stuff the speed is kinda horrible... :-) But I doubt that's mod_python's fault ;-)

Greetings
Dominique

________________________________
From: William Chapman [mailto:jeddahbill@gmail.com]
Sent: Samstag, 31. Mai 2008 19:50
To: Mod_python@modpython.org
Subject: [mod_python] Windows performance problem

I'm new to this list, but have been using mod_python successfully for three years in a web app served by both Linux (Ubuntu) and Windows (XP sp2 32bit AND 64bit).  I use two hosts to serve: one for testing (semi-public); one for development.  Both hosts are dual-boot (Linux/Windows) and will serve the identical web app installation from the same (NTFS file system) directories.

My problems started when the development host went belly-up and I rebuilt the computer.  The Windows installation was upgraded (?) from 32bit to 64bit XP sp2.  (I don't know if going to x64 Windows is part of the problem; I doubt it.)  Upon bringing up the new development host, all went well with the Linux side, but under Windows, the web app is perfroming poorly.  The application accesses take much too long.  Historically, the Windows & Linux installations were comparable, and I never had performance complaints.  Now, the new Windows installation is 5x to 10x slower than previously.  To emphasize, the mod_python is "working," but very slowly, and comletely unlike my previous experience with Windows/Apache/mod_python, not to mention my current testing host which is fine.

The setup (all installed from binaries):
Windows XP x64 sp2
apache 2.2.8
mod_python 3.3.1
Python 2.5.2 (installed separately)

Note:  I am not exactly sure of the order in which I installed Apache/mod_python & Python 2.5.  Could this matter?
I did uninstall and reinstall mod_python but performance/symptoms didn't seem to change.

The only clues:
Three lines together from apache error.log (long lines - STRETCH BROWSER) (file also attached) (also see Graham's email here<http://www.modpython.org/pipermail/mod_python/2006-April/020825.html>.):
[Fri May 30 17:38:57 2008] [error] python_init: Python version mismatch, expected '2.5', found '2.5.2'.
[Fri May 30 17:38:58 2008] [error] python_init: Python executable found 'C:\\Program Files (x86)\\Apache Software Foundation\\Apache2.2\\bin\\httpd.exe'.
[Fri May 30 17:38:58 2008] [error] python_init: Python path being used 'C:\\WINDOWS\\system32\\python25.zip;C:\\Python25\\Lib;C:\\Python25\\DLLs;C:\\Python25\\Lib\\lib-tk;;C:\\Program Files (x86)\\Apache Software Foundation\\Apache2.2\\bin'.

I have read several of the threads from the list on this subject and am confused about the following points:
(1) In the "Python version mismatch" error, the "found" version matches the version of Python I installed on the Windows machine.  mod_python "expected 2.5".  Where is that supposed to come from?  I could not find Python 2.5 at http://python.org.
(2) Apparently the "Python version mismatch" error message is not enough to stop mod_python from working, because it is "working."
(3) The "Python executable found" error message points to "...\\Apache2.2\\bin\\httpd.exe"  This does not look like a "Python executable."  (?)
(4) The "Python path being used" error message specifies a series of paths.  Where do those paths come from?  Can I affect those values?  Taken as a whole it doesn't match the system path environment variable I'm able to set as a Windows user.

Random thought: I always thought that mod_python included an embedded Python interpreter, but reading suggests mod_python links to Python libraries.

My analysis:  I suspect that the principle benefit of a mod_python installation is not being realized.  It seems that the interpreter is having to be restarted for each access.  Is there another explanation for the poor performance?

At any rate I would greatly appreciate any suggestions or insights you might have!!

With many thanks,
-- Bill Chapman


*****************************************************************************
This e-mail and any files attached are strictly confidential, may be legally
privileged and are intended solely for the addressee. If you are not the
intended recipient please notify the sender immediately by return email and
then delete the e-mail and any attachments immediately.

The views and or opinions expressed in this e-mail are not necessarily the
views of De La Rue plc or any of its subsidiaries and the De La Rue Group
of companies, their directors, officers and employees make no representation
about and accept no liability for its accuracy or completeness.

You should ensure that you have adequate virus protection as the De La Rue
Group of companies do not accept liability for any viruses.

De La Rue plc Registered No.3834125, De La Rue Holdings plc Registered
No 58025 and De La Rue International Limited Registered No 720284 are all
registered in England with their registered office at:
De La Rue House, Jays Close, Viables, Hampshire RG22 4BS
*****************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080602/33165285/attachment.html
From jeddahbill at gmail.com  Mon Jun  2 14:21:31 2008
From: jeddahbill at gmail.com (William Chapman)
Date: Mon Jun  2 14:21:45 2008
Subject: [mod_python] Windows performance problem
In-Reply-To: <88e286470806011849s5a21afecjf29a4def4666663e@mail.gmail.com>
References: <6543521a0805311050n75794f45x46711e82226136c8@mail.gmail.com>
	<88e286470806011849s5a21afecjf29a4def4666663e@mail.gmail.com>
Message-ID: <6543521a0806021121t70ad0131gbde82bab8fb57cb0@mail.gmail.com>

Graham & Dominique,

Thanks for your responses and fresh insights!

Progress so far:
Per your suggestion, I have tested the Windows XP (x64) & Linux
installations for static file serving performance, and found both to be
equally excellent.  Actually, I think the Windows is even a bit livelier
than the Linux.

Next step I'm considering:
(1) Reinstall Apache, Python, and mod_python, with versions to match those
installed on the Windows side of my alternate host.  Because I generally
always choose the latest versions of everything I install, the older host
machine is probably a version or so behind.  I might learn something there.

Other information about my environment:
My web application uses sqlite (pysqlite binding) - and a few other Python
packages - but sqlite is the only one involved that's a performance driver.
Dominique mentioned the possible impact of other web application software
dependencies.  Because I use sqlite, I'll also include it in the list of
software to reinstall, possibly reverting to an older version.

By the way, I checked the Apache error logs on the (older) test-host and the
mod_python error messages are NOT present.  I believe it's running Apache
2.5.1 versus 2.5.2 on the new (problem) development-host.

Thanks again for your help.  I will post progress to the list.
Hasta la vista, ciao,
-- Bill Chapman

On Sun, Jun 1, 2008 at 6:49 PM, Graham Dumpleton <graham.dumpleton@gmail.com>
wrote:

> 2008/6/1 William Chapman <jeddahbill@gmail.com>:
> > I'm new to this list, but have been using mod_python successfully for
> three
> > years in a web app served by both Linux (Ubuntu) and Windows (XP sp2
> 32bit
> > AND 64bit).  I use two hosts to serve: one for testing (semi-public); one
> > for development.  Both hosts are dual-boot (Linux/Windows) and will serve
> > the identical web app installation from the same (NTFS file system)
> > directories.
> >
> > My problems started when the development host went belly-up and I rebuilt
> > the computer.  The Windows installation was upgraded (?) from 32bit to
> 64bit
> > XP sp2.  (I don't know if going to x64 Windows is part of the problem; I
> > doubt it.)  Upon bringing up the new development host, all went well with
> > the Linux side, but under Windows, the web app is perfroming poorly.  The
> > application accesses take much too long.  Historically, the Windows &
> Linux
> > installations were comparable, and I never had performance complaints.
>  Now,
> > the new Windows installation is 5x to 10x slower than previously.  To
> > emphasize, the mod_python is "working," but very slowly, and comletely
> > unlike my previous experience with Windows/Apache/mod_python, not to
> mention
> > my current testing host which is fine.
>
> Have you tested speed of serving static files? That is, is it a
> mod_python specific problem or a problem with Apache as a whole?
>
> > The setup (all installed from binaries):
> > Windows XP x64 sp2
> > apache 2.2.8
> > mod_python 3.3.1
> > Python 2.5.2 (installed separately)
> >
> > Note:  I am not exactly sure of the order in which I installed
> > Apache/mod_python & Python 2.5.  Could this matter?
> > I did uninstall and reinstall mod_python but performance/symptoms didn't
> > seem to change.
> >
> > The only clues:
> > Three lines together from apache error.log (long lines - STRETCH BROWSER)
> > (file also attached) (also see Graham's email here.):
> > [Fri May 30 17:38:57 2008] [error] python_init: Python version mismatch,
> > expected '2.5', found '2.5.2'.
> > [Fri May 30 17:38:58 2008] [error] python_init: Python executable found
> > 'C:\\Program Files (x86)\\Apache Software
> > Foundation\\Apache2.2\\bin\\httpd.exe'.
> > [Fri May 30 17:38:58 2008] [error] python_init: Python path being used
> >
> 'C:\\WINDOWS\\system32\\python25.zip;C:\\Python25\\Lib;C:\\Python25\\DLLs;C:\\Python25\\Lib\\lib-tk;;C:\\Program
> > Files (x86)\\Apache Software Foundation\\Apache2.2\\bin'.
> >
> > I have read several of the threads from the list on this subject and am
> > confused about the following points:
> > (1) In the "Python version mismatch" error, the "found" version matches
> the
> > version of Python I installed on the Windows machine.  mod_python
> "expected
> > 2.5".  Where is that supposed to come from?  I could not find Python 2.5
> at
> > http://python.org.
>
> You obviously used a prebuilt version of mod_python for Windows. That
> prebuilt version used Python 2.5 when compiled. That is what it means.
>
> > (2) Apparently the "Python version mismatch" error message is not enough
> to
> > stop mod_python from working, because it is "working."
>
> On Windows, because Python is obtained via a DLL, the warning can be
> ignored as APIs will be compatible. In other words, doesn't matter
> that mod_python was originally compiled for older patch revision.
>
> > (3) The "Python executable found" error message points to
> > "...\\Apache2.2\\bin\\httpd.exe"  This does not look like a "Python
> > executable."  (?)
>
> Outputing this was thought to be a good idea, but not actually of much
> use. What it is simply showing is that Python is running embedded
> inside of Apache httpd executable. In other words, not standalone
> python.exe.
>
> > (4) The "Python path being used" error message specifies a series of
> paths.
> > Where do those paths come from?  Can I affect those values?
>
> To a degree. See PythonPath directive, although changes may with this
> may not show up in startup messages as they are applied later. You can
> also change it by fiddling Windows registry, but you shouldn't do that
> if you can help it.
>
> > Taken as a
> > whole it doesn't match the system path environment variable I'm able to
> set
> > as a Windows user.
>
> This is not the PATH variable, it is related to Python module search path.
>
> > Random thought: I always thought that mod_python included an embedded
> Python
> > interpreter, but reading suggests mod_python links to Python libraries.
>
> Both observations are true. Python is used in embedded mode, but code
> comes from DLL.
>
> > My analysis:  I suspect that the principle benefit of a mod_python
> > installation is not being realized.  It seems that the interpreter is
> having
> > to be restarted for each access.  Is there another explanation for the
> poor
> > performance?
>
> Your understanding is wrong. A new interpreter is not created on each
> request.
>
> There is obviously still something wrong with your configuration or
> perhaps with the web application which only manifests with this
> configuration.
>
> Start out by seeing if Apache as a whole is working okay by testing
> static file serving.
>
> Graham
>
>
> > At any rate I would greatly appreciate any suggestions or insights you
> might
> > have!!
> >
> > With many thanks,
> > -- Bill Chapman
> >
> >
> > _______________________________________________
> > Mod_python mailing list
> > Mod_python@modpython.org
> > http://mailman.modpython.org/mailman/listinfo/mod_python
> >
> >
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080602/d3505a1e/attachment.html
From hungrybackspace at gmail.com  Mon Jun  2 15:58:33 2008
From: hungrybackspace at gmail.com (hungrybackspace@gmail.com)
Date: Mon Jun  2 15:58:38 2008
Subject: [mod_python] Trouble importing files through mod_python
Message-ID: <a89a6a430806021258u52cc6ceeu5458a92998f025c@mail.gmail.com>

Greetings,

We're having a bit of a time importing modules that aren't in the
standard library while using mod_python on this particular server.  We
have had, however, success with other servers.  We're trying to run a
tiny application that looks like this:


on the console side:
~/scratch/
          RunImportTest.py
          __init__.py
          ImportTest/
                     ImportTest.py
                     __init__.py


...and the web side:
/home/httpd/html/beta/
                      RunImportTestModPython.py


Below, the contents of the three files:

RunImportTest.py:
=================
from ImportTest.ImportTest import TEST_CONSTANT

print TEST_CONSTANT


RunImportTestModPython.py:
==========================
from mod_python import apache
from ImportTest.ImportTest import TEST_CONSTANT

def handler(req):
    req.content_type = 'text/plain'
    req.write(TEST_CONSTANT)
    return apache.OK


ImportTest/ImportTest.py:
=========================
TEST_CONSTANT = "success"


Output from the import test from command line:
~/scratch> python RunImportTest.py
success

So we know the little program does indeed work.  Here is the output
from Apache via mod_python:

========================
MOD_PYTHON ERROR

ProcessId:      18704
Interpreter:    'beta.company.com'

ServerName:     'beta.company.com'
DocumentRoot:   '/home/httpd/html/beta'

URI:            '/RunImportTestModPython.py'
Location:       None
Directory:      '/home/httpd/html/beta/'
Filename:       '/home/httpd/html/beta/RunImportTestModPython.py'
PathInfo:       ''

Phase:          'PythonHandler'
Handler:        'RunImportTestModPython'

Traceback (most recent call last):

  File "/usr/local/lib/python2.5/site-packages/mod_python/importer.py",
line 1537, in HandlerDispatch
    default=default_handler, arg=req, silent=hlist.silent)

  File "/usr/local/lib/python2.5/site-packages/mod_python/importer.py",
line 1202, in _process_target
    module = import_module(module_name, path=path)

  File "/usr/local/lib/python2.5/site-packages/mod_python/importer.py",
line 296, in import_module
    log, import_path)

  File "/usr/local/lib/python2.5/site-packages/mod_python/importer.py",
line 680, in import_module
    execfile(file, module.__dict__)

  File "/home/httpd/html/beta/RunImportTestModPython.py", line 2, in <module>
    from ImportTest.ImportTest import TEST_CONSTANT

ImportError: No module named ImportTest.ImportTest


MODULE CACHE DETAILS

Accessed:       Mon Jun  2 14:21:49 2008
Generation:     0

_mp_df6c4429391f4fb65dc56704a2c1e0e2 {
  FileName:     '/home/httpd/html/beta/RunImportTestModPython.py'
  Instance:     1 [IMPORT]
  Generation:   0 [ERROR]
  Modified:     Mon Jun  2 11:49:11 2008
}


...and here's an .htaccess file we're using in the directory
/home/httpd/html/beta, the directory that RunImportTestModPython.py is
in:
=========================
Options Indexes FollowSymLinks MultiViews
AddHandler mod_python .py
PythonDebug On
PythonHandler RunImportTestModPython
PythonAutoReload On
PythonPath "['/home/me/scratch', '/home/me/scratch/ImportTest',
'/usr/lib/python2.5/', '/usr/lib/python2.5/lib-dynload/',
'/usr/lib/python2.5/site-packages/']"


...where /home/me is the user directory referenced at the top of the message.

It's quite likely we're overlooking something very simple--but this
same setup works without hitch on another system (granted, versions of
OS, Apache, mod_python and Python are slightly different...).  This
non-functioning setup is:

* CentOS 5
* Apache 2.2.8
* PHP 5.2.6
* Python 2.5.2
* mod_python 3.3.1
* cx_oracle 4.3.3

some of those are kind of irrelevant for the specific application
here, but there might be hidden conflicts that I'm not aware of. I
have read some stuff about using mod_python's native import methods,
and I'd very much like to use the standard python import method
instead, as it preserves command-line execution without having to add
a lot of overhead.  And in fact, I shouldn't have to because this
setup works on another server.  Unfortunately, I can't simply use the
other server...

Hope this isn't all too much information--I'm very grateful for any
help anyone may provide.

many thanks,
MC
From rob.shinn at gmail.com  Mon Jun  2 16:30:13 2008
From: rob.shinn at gmail.com (Rob Shinn)
Date: Mon Jun  2 16:30:20 2008
Subject: [mod_python] Trouble importing files through mod_python
In-Reply-To: <a89a6a430806021258u52cc6ceeu5458a92998f025c@mail.gmail.com>
References: <a89a6a430806021258u52cc6ceeu5458a92998f025c@mail.gmail.com>
Message-ID: <2f96483c0806021330u1018a264hf868b051a0a89710@mail.gmail.com>

I think you have to either install the ImportTest in your Python
site-packages directory or use apache.import_module().  If you wish to use
apache.import_module(), you can do something like this:

ImportTest=apache.import
_module('ImportTest','full-path-to-~/scratch-here/ImportTest')
TEST_CONSTANT=ImportTest.TEST_CONSTANT

Note that if you don't use apache.import_module(), you need to restart
Apache everytime you modify the ImportTest module.

HTH


On Mon, Jun 2, 2008 at 3:58 PM, hungrybackspace@gmail.com <
hungrybackspace@gmail.com> wrote:

> Greetings,
>
> We're having a bit of a time importing modules that aren't in the
> standard library while using mod_python on this particular server.  We
> have had, however, success with other servers.  We're trying to run a
> tiny application that looks like this:
>
>
> on the console side:
> ~/scratch/
>          RunImportTest.py
>          __init__.py
>          ImportTest/
>                     ImportTest.py
>                     __init__.py
>
>
> ...and the web side:
> /home/httpd/html/beta/
>                      RunImportTestModPython.py
>
>
> Below, the contents of the three files:
>
> RunImportTest.py:
> =================
> from ImportTest.ImportTest import TEST_CONSTANT
>
> print TEST_CONSTANT
>
>
> RunImportTestModPython.py:
> ==========================
> from mod_python import apache
> from ImportTest.ImportTest import TEST_CONSTANT
>
> def handler(req):
>    req.content_type = 'text/plain'
>    req.write(TEST_CONSTANT)
>    return apache.OK
>
>
> ImportTest/ImportTest.py:
> =========================
> TEST_CONSTANT = "success"
>
>
> Output from the import test from command line:
> ~/scratch> python RunImportTest.py
> success
>
> So we know the little program does indeed work.  Here is the output
> from Apache via mod_python:
>
> ========================
> MOD_PYTHON ERROR
>
> ProcessId:      18704
> Interpreter:    'beta.company.com'
>
> ServerName:     'beta.company.com'
> DocumentRoot:   '/home/httpd/html/beta'
>
> URI:            '/RunImportTestModPython.py'
> Location:       None
> Directory:      '/home/httpd/html/beta/'
> Filename:       '/home/httpd/html/beta/RunImportTestModPython.py'
> PathInfo:       ''
>
> Phase:          'PythonHandler'
> Handler:        'RunImportTestModPython'
>
> Traceback (most recent call last):
>
>  File "/usr/local/lib/python2.5/site-packages/mod_python/importer.py",
> line 1537, in HandlerDispatch
>    default=default_handler, arg=req, silent=hlist.silent)
>
>  File "/usr/local/lib/python2.5/site-packages/mod_python/importer.py",
> line 1202, in _process_target
>    module = import_module(module_name, path=path)
>
>  File "/usr/local/lib/python2.5/site-packages/mod_python/importer.py",
> line 296, in import_module
>    log, import_path)
>
>  File "/usr/local/lib/python2.5/site-packages/mod_python/importer.py",
> line 680, in import_module
>    execfile(file, module.__dict__)
>
>  File "/home/httpd/html/beta/RunImportTestModPython.py", line 2, in
> <module>
>    from ImportTest.ImportTest import TEST_CONSTANT
>
> ImportError: No module named ImportTest.ImportTest
>
>
> MODULE CACHE DETAILS
>
> Accessed:       Mon Jun  2 14:21:49 2008
> Generation:     0
>
> _mp_df6c4429391f4fb65dc56704a2c1e0e2 {
>  FileName:     '/home/httpd/html/beta/RunImportTestModPython.py'
>  Instance:     1 [IMPORT]
>  Generation:   0 [ERROR]
>  Modified:     Mon Jun  2 11:49:11 2008
> }
>
>
> ...and here's an .htaccess file we're using in the directory
> /home/httpd/html/beta, the directory that RunImportTestModPython.py is
> in:
> =========================
> Options Indexes FollowSymLinks MultiViews
> AddHandler mod_python .py
> PythonDebug On
> PythonHandler RunImportTestModPython
> PythonAutoReload On
> PythonPath "['/home/me/scratch', '/home/me/scratch/ImportTest',
> '/usr/lib/python2.5/', '/usr/lib/python2.5/lib-dynload/',
> '/usr/lib/python2.5/site-packages/']"
>
>
> ...where /home/me is the user directory referenced at the top of the
> message.
>
> It's quite likely we're overlooking something very simple--but this
> same setup works without hitch on another system (granted, versions of
> OS, Apache, mod_python and Python are slightly different...).  This
> non-functioning setup is:
>
> * CentOS 5
> * Apache 2.2.8
> * PHP 5.2.6
> * Python 2.5.2
> * mod_python 3.3.1
> * cx_oracle 4.3.3
>
> some of those are kind of irrelevant for the specific application
> here, but there might be hidden conflicts that I'm not aware of. I
> have read some stuff about using mod_python's native import methods,
> and I'd very much like to use the standard python import method
> instead, as it preserves command-line execution without having to add
> a lot of overhead.  And in fact, I shouldn't have to because this
> setup works on another server.  Unfortunately, I can't simply use the
> other server...
>
> Hope this isn't all too much information--I'm very grateful for any
> help anyone may provide.
>
> many thanks,
> MC
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080602/a4d0a3b2/attachment-0001.html
From hungrybackspace at gmail.com  Mon Jun  2 17:01:29 2008
From: hungrybackspace at gmail.com (hungrybackspace@gmail.com)
Date: Mon Jun  2 17:01:33 2008
Subject: [mod_python] Trouble importing files through mod_python
In-Reply-To: <2f96483c0806021330u1018a264hf868b051a0a89710@mail.gmail.com>
References: <a89a6a430806021258u52cc6ceeu5458a92998f025c@mail.gmail.com>
	<2f96483c0806021330u1018a264hf868b051a0a89710@mail.gmail.com>
Message-ID: <a89a6a430806021401v7d5a1590ie971c7f4179b07@mail.gmail.com>

Thanks, that does help a bit, but where we noticed it doesn't work is
if the ImportTest module imports modules that are nested deeper within
site-packages, which is the case for our production code.  (There is
the requisite __init__.py in each of the module directories.)

I guess what I find most puzzling is why everything works as expected
on the Ubuntu system and there's this difficulty on the CentOS system;
seems that the vital parts of the configuration are compatible.

Thanks again.
MC

On Mon, Jun 2, 2008 at 3:30 PM, Rob Shinn <rob.shinn@gmail.com> wrote:
> I think you have to either install the ImportTest in your Python
> site-packages directory or use apache.import_module().  If you wish to use
> apache.import_module(), you can do something like this:
>
> ImportTest=apache.import
> _module('ImportTest','full-path-to-~/scratch-here/ImportTest')
> TEST_CONSTANT=ImportTest.TEST_CONSTANT
>
> Note that if you don't use apache.import_module(), you need to restart
> Apache everytime you modify the ImportTest module.
>
> HTH
>
> On Mon, Jun 2, 2008 at 3:58 PM, hungrybackspace@gmail.com
> <hungrybackspace@gmail.com> wrote:
>>
>> Greetings,
>>
>> We're having a bit of a time importing modules that aren't in the
>> standard library while using mod_python on this particular server.  We
>> have had, however, success with other servers.  We're trying to run a
>> tiny application that looks like this:
>>
>>
>> on the console side:
>> ~/scratch/
>>          RunImportTest.py
>>          __init__.py
>>          ImportTest/
>>                     ImportTest.py
>>                     __init__.py
>>
>>
>> ...and the web side:
>> /home/httpd/html/beta/
>>                      RunImportTestModPython.py
>>
>>
>> Below, the contents of the three files:
>>
>> RunImportTest.py:
>> =================
>> from ImportTest.ImportTest import TEST_CONSTANT
>>
>> print TEST_CONSTANT
>>
>>
>> RunImportTestModPython.py:
>> ==========================
>> from mod_python import apache
>> from ImportTest.ImportTest import TEST_CONSTANT
>>
>> def handler(req):
>>    req.content_type = 'text/plain'
>>    req.write(TEST_CONSTANT)
>>    return apache.OK
>>
>>
>> ImportTest/ImportTest.py:
>> =========================
>> TEST_CONSTANT = "success"
>>
>>
>> Output from the import test from command line:
>> ~/scratch> python RunImportTest.py
>> success
>>
>> So we know the little program does indeed work.  Here is the output
>> from Apache via mod_python:
>>
>> ========================
>> MOD_PYTHON ERROR
>>
>> ProcessId:      18704
>> Interpreter:    'beta.company.com'
>>
>> ServerName:     'beta.company.com'
>> DocumentRoot:   '/home/httpd/html/beta'
>>
>> URI:            '/RunImportTestModPython.py'
>> Location:       None
>> Directory:      '/home/httpd/html/beta/'
>> Filename:       '/home/httpd/html/beta/RunImportTestModPython.py'
>> PathInfo:       ''
>>
>> Phase:          'PythonHandler'
>> Handler:        'RunImportTestModPython'
>>
>> Traceback (most recent call last):
>>
>>  File "/usr/local/lib/python2.5/site-packages/mod_python/importer.py",
>> line 1537, in HandlerDispatch
>>    default=default_handler, arg=req, silent=hlist.silent)
>>
>>  File "/usr/local/lib/python2.5/site-packages/mod_python/importer.py",
>> line 1202, in _process_target
>>    module = import_module(module_name, path=path)
>>
>>  File "/usr/local/lib/python2.5/site-packages/mod_python/importer.py",
>> line 296, in import_module
>>    log, import_path)
>>
>>  File "/usr/local/lib/python2.5/site-packages/mod_python/importer.py",
>> line 680, in import_module
>>    execfile(file, module.__dict__)
>>
>>  File "/home/httpd/html/beta/RunImportTestModPython.py", line 2, in
>> <module>
>>    from ImportTest.ImportTest import TEST_CONSTANT
>>
>> ImportError: No module named ImportTest.ImportTest
>>
>>
>> MODULE CACHE DETAILS
>>
>> Accessed:       Mon Jun  2 14:21:49 2008
>> Generation:     0
>>
>> _mp_df6c4429391f4fb65dc56704a2c1e0e2 {
>>  FileName:     '/home/httpd/html/beta/RunImportTestModPython.py'
>>  Instance:     1 [IMPORT]
>>  Generation:   0 [ERROR]
>>  Modified:     Mon Jun  2 11:49:11 2008
>> }
>>
>>
>> ...and here's an .htaccess file we're using in the directory
>> /home/httpd/html/beta, the directory that RunImportTestModPython.py is
>> in:
>> =========================
>> Options Indexes FollowSymLinks MultiViews
>> AddHandler mod_python .py
>> PythonDebug On
>> PythonHandler RunImportTestModPython
>> PythonAutoReload On
>> PythonPath "['/home/me/scratch', '/home/me/scratch/ImportTest',
>> '/usr/lib/python2.5/', '/usr/lib/python2.5/lib-dynload/',
>> '/usr/lib/python2.5/site-packages/']"
>>
>>
>> ...where /home/me is the user directory referenced at the top of the
>> message.
>>
>> It's quite likely we're overlooking something very simple--but this
>> same setup works without hitch on another system (granted, versions of
>> OS, Apache, mod_python and Python are slightly different...).  This
>> non-functioning setup is:
>>
>> * CentOS 5
>> * Apache 2.2.8
>> * PHP 5.2.6
>> * Python 2.5.2
>> * mod_python 3.3.1
>> * cx_oracle 4.3.3
>>
>> some of those are kind of irrelevant for the specific application
>> here, but there might be hidden conflicts that I'm not aware of. I
>> have read some stuff about using mod_python's native import methods,
>> and I'd very much like to use the standard python import method
>> instead, as it preserves command-line execution without having to add
>> a lot of overhead.  And in fact, I shouldn't have to because this
>> setup works on another server.  Unfortunately, I can't simply use the
>> other server...
>>
>> Hope this isn't all too much information--I'm very grateful for any
>> help anyone may provide.
>>
>> many thanks,
>> MC
>> _______________________________________________
>> Mod_python mailing list
>> Mod_python@modpython.org
>> http://mailman.modpython.org/mailman/listinfo/mod_python
>
>
From graham.dumpleton at gmail.com  Mon Jun  2 17:41:43 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Mon Jun  2 17:41:53 2008
Subject: [mod_python] Trouble importing files through mod_python
In-Reply-To: <a89a6a430806021258u52cc6ceeu5458a92998f025c@mail.gmail.com>
References: <a89a6a430806021258u52cc6ceeu5458a92998f025c@mail.gmail.com>
Message-ID: <88e286470806021441l537cd406s525f93d6cf901584@mail.gmail.com>

You PythonPath is wrong for a start and would cause various issues,
although not the immediate one here. You have:

PythonPath "['/home/me/scratch', '/home/me/scratch/ImportTest',
'/usr/lib/python2.5/', '/usr/lib/python2.5/lib-dynload/',
'/usr/lib/python2.5/site-packages/']"

It should be:

PythonPath "['/home/me/scratch', '/home/me/scratch/ImportTest'] + sys.path"

That is, you need to extend existing path, not replace it.

Other than that, problems like this are generally due to the user that
Apache runs as not being able to read files being imported. Thus,
check whether permissions on your account directory and stuff in it
are too restrictive and wouldn't allow another user to read the files
contained there in.

Graham

2008/6/3 hungrybackspace@gmail.com <hungrybackspace@gmail.com>:
> Greetings,
>
> We're having a bit of a time importing modules that aren't in the
> standard library while using mod_python on this particular server.  We
> have had, however, success with other servers.  We're trying to run a
> tiny application that looks like this:
>
>
> on the console side:
> ~/scratch/
>          RunImportTest.py
>          __init__.py
>          ImportTest/
>                     ImportTest.py
>                     __init__.py
>
>
> ...and the web side:
> /home/httpd/html/beta/
>                      RunImportTestModPython.py
>
>
> Below, the contents of the three files:
>
> RunImportTest.py:
> =================
> from ImportTest.ImportTest import TEST_CONSTANT
>
> print TEST_CONSTANT
>
>
> RunImportTestModPython.py:
> ==========================
> from mod_python import apache
> from ImportTest.ImportTest import TEST_CONSTANT
>
> def handler(req):
>    req.content_type = 'text/plain'
>    req.write(TEST_CONSTANT)
>    return apache.OK
>
>
> ImportTest/ImportTest.py:
> =========================
> TEST_CONSTANT = "success"
>
>
> Output from the import test from command line:
> ~/scratch> python RunImportTest.py
> success
>
> So we know the little program does indeed work.  Here is the output
> from Apache via mod_python:
>
> ========================
> MOD_PYTHON ERROR
>
> ProcessId:      18704
> Interpreter:    'beta.company.com'
>
> ServerName:     'beta.company.com'
> DocumentRoot:   '/home/httpd/html/beta'
>
> URI:            '/RunImportTestModPython.py'
> Location:       None
> Directory:      '/home/httpd/html/beta/'
> Filename:       '/home/httpd/html/beta/RunImportTestModPython.py'
> PathInfo:       ''
>
> Phase:          'PythonHandler'
> Handler:        'RunImportTestModPython'
>
> Traceback (most recent call last):
>
>  File "/usr/local/lib/python2.5/site-packages/mod_python/importer.py",
> line 1537, in HandlerDispatch
>    default=default_handler, arg=req, silent=hlist.silent)
>
>  File "/usr/local/lib/python2.5/site-packages/mod_python/importer.py",
> line 1202, in _process_target
>    module = import_module(module_name, path=path)
>
>  File "/usr/local/lib/python2.5/site-packages/mod_python/importer.py",
> line 296, in import_module
>    log, import_path)
>
>  File "/usr/local/lib/python2.5/site-packages/mod_python/importer.py",
> line 680, in import_module
>    execfile(file, module.__dict__)
>
>  File "/home/httpd/html/beta/RunImportTestModPython.py", line 2, in <module>
>    from ImportTest.ImportTest import TEST_CONSTANT
>
> ImportError: No module named ImportTest.ImportTest
>
>
> MODULE CACHE DETAILS
>
> Accessed:       Mon Jun  2 14:21:49 2008
> Generation:     0
>
> _mp_df6c4429391f4fb65dc56704a2c1e0e2 {
>  FileName:     '/home/httpd/html/beta/RunImportTestModPython.py'
>  Instance:     1 [IMPORT]
>  Generation:   0 [ERROR]
>  Modified:     Mon Jun  2 11:49:11 2008
> }
>
>
> ...and here's an .htaccess file we're using in the directory
> /home/httpd/html/beta, the directory that RunImportTestModPython.py is
> in:
> =========================
> Options Indexes FollowSymLinks MultiViews
> AddHandler mod_python .py
> PythonDebug On
> PythonHandler RunImportTestModPython
> PythonAutoReload On
> PythonPath "['/home/me/scratch', '/home/me/scratch/ImportTest',
> '/usr/lib/python2.5/', '/usr/lib/python2.5/lib-dynload/',
> '/usr/lib/python2.5/site-packages/']"
>
>
> ...where /home/me is the user directory referenced at the top of the message.
>
> It's quite likely we're overlooking something very simple--but this
> same setup works without hitch on another system (granted, versions of
> OS, Apache, mod_python and Python are slightly different...).  This
> non-functioning setup is:
>
> * CentOS 5
> * Apache 2.2.8
> * PHP 5.2.6
> * Python 2.5.2
> * mod_python 3.3.1
> * cx_oracle 4.3.3
>
> some of those are kind of irrelevant for the specific application
> here, but there might be hidden conflicts that I'm not aware of. I
> have read some stuff about using mod_python's native import methods,
> and I'd very much like to use the standard python import method
> instead, as it preserves command-line execution without having to add
> a lot of overhead.  And in fact, I shouldn't have to because this
> setup works on another server.  Unfortunately, I can't simply use the
> other server...
>
> Hope this isn't all too much information--I'm very grateful for any
> help anyone may provide.
>
> many thanks,
> MC
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>
From brooklinetom at gmail.com  Mon Jun  2 18:18:05 2008
From: brooklinetom at gmail.com (Tom Stambaugh)
Date: Mon Jun  2 18:18:16 2008
Subject: [mod_python] Trouble importing files through mod_python
Message-ID: <ad96ea740806021518k5861851bha2b25b1d17bfb519@mail.gmail.com>

> You PythonPath is wrong for a start and would cause various issues,
> although not the immediate one here. You have:
>
> PythonPath "['/home/me/scratch', '/home/me/scratch/ImportTest',
> '/usr/lib/python2.5/', '/usr/lib/python2.5/lib-dynload/',
> '/usr/lib/python2.5/site-packages/']"
>
> It should be:
>
> PythonPath "['/home/me/scratch', '/home/me/scratch/ImportTest'] +
> sys.path"
>
> That is, you need to extend existing path, not replace it.

+10 on this!!!!

> Other than that, problems like this are generally due to the user that
> Apache runs as not being able to read files being imported. Thus,
> check whether permissions on your account directory and stuff in it
> are too restrictive and wouldn't allow another user to read the files
> contained there in.

I wonder if this is an SELinux problem. CentOS is constructed from Redhat,
and I wouldn't be surprised if it includes SELinux. I'm guessing that the
Ubuntu system did NOT have SELinux installed.

The way to check is to cd into /home/me/scratch and then do the following:

">ls -lZ *"

The "Z" switch will report the SELinux settings. You want to see a parameter

in each result that looks something like:
"user_u:object_r:httpd_sys_content_t"

The key is the last entry ... "httpd_sys_content_t" (at least in my
configuration).

To change the setting, run something like this (from within the "scratch"
directory):
">chcon -R -h -t httpd_sys_content_t *"

You might have to be root to accomplish this.

When I stumbled over this, it took days of agony before I found the answer.

Thanks,
Tom S.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080602/94c1c35a/attachment.html
From Dominique.Holzwarth at ch.delarue.com  Tue Jun  3 02:39:08 2008
From: Dominique.Holzwarth at ch.delarue.com (Dominique.Holzwarth@ch.delarue.com)
Date: Tue Jun  3 02:39:40 2008
Subject: [mod_python] Trouble importing files through mod_python
In-Reply-To: <a89a6a430806021258u52cc6ceeu5458a92998f025c@mail.gmail.com>
Message-ID: <5213E58D85BC414998FA553C701E386C0EF2890BD5@SGBD012511.dlrmail.ad.delarue.com>

Importing packaged/modules under mod_python is a little bit complicated (imo) cause mod_python tries to make a difference between then standard system python search path and a own, mod_python specific search path for modules.
For full reference of the problem see: http://www.modpython.org/pipermail/mod_python/2006-November/022726.html

As a quick (but not complete) summary here's what I've used so far:

1. put your packages as "normal" python packages under <python-dir>/Lib/site-packages, then you can import them the same way as you would do with the console. However, if anything changes, you need to restart apache (takes like 1 sec ;-))

2. put your packages under the apache (python-) document root. If you configured apache to search for *.py files under ../htdocs/python and your packages are inside that directory then you can import them like this:

from mod_python import apache
someName = apache.import_module(~/package-name/module-name.py)

Note that "someName" can be choosen whatever you want. The "~" points to the python document root.
Using that method you don't need a __init__.py file to reflect the package structure btw. Also, using this method changes inside the packages are reloaded on-the-fly by apache without the need to restart it. It is however possible to access the *.py files through the web if apache is not properly configured (not sure if you can hide them fully tbh).

3. put your packages ANYWHERE outside the apache document root AND outside of site-packages.
In this case you need to set the mod_python importer path. Packages/modules in this path aren't automaticly reloaded, so after a change, you need to restart apache:

PythonOption mod_python.importer.path "['some/path/to/my/Module.py', 'some/other/path/to/a/directory/with/modules']"

This statement goes into apache configuration file (httpd.conf or .htsomething ;-))
Importing these packages/modules should work the same as you do from within the console. I'm not totally sure about that tho as I used this method only to import modules - never packages (so I'm not sure wether "import package.subpackage.module" works...)

Greetings
dominique

> -----Original Message-----
> From: hungrybackspace@gmail.com [mailto:hungrybackspace@gmail.com]
> Sent: Montag, 2. Juni 2008 21:59
> To: mod_python@modpython.org
> Subject: [mod_python] Trouble importing files through mod_python
>
> Greetings,
>
> We're having a bit of a time importing modules that aren't in
> the standard library while using mod_python on this
> particular server.  We have had, however, success with other
> servers.  We're trying to run a tiny application that looks like this:
>
>
> on the console side:
> ~/scratch/
>           RunImportTest.py
>           __init__.py
>           ImportTest/
>                      ImportTest.py
>                      __init__.py
>
>
> ...and the web side:
> /home/httpd/html/beta/
>                       RunImportTestModPython.py
>
>
> Below, the contents of the three files:
>
> RunImportTest.py:
> =================
> from ImportTest.ImportTest import TEST_CONSTANT
>
> print TEST_CONSTANT
>
>
> RunImportTestModPython.py:
> ==========================
> from mod_python import apache
> from ImportTest.ImportTest import TEST_CONSTANT
>
> def handler(req):
>     req.content_type = 'text/plain'
>     req.write(TEST_CONSTANT)
>     return apache.OK
>
>
> ImportTest/ImportTest.py:
> =========================
> TEST_CONSTANT = "success"
>
>
> Output from the import test from command line:
> ~/scratch> python RunImportTest.py
> success
>
> So we know the little program does indeed work.  Here is the
> output from Apache via mod_python:
>
> ========================
> MOD_PYTHON ERROR
>
> ProcessId:      18704
> Interpreter:    'beta.company.com'
>
> ServerName:     'beta.company.com'
> DocumentRoot:   '/home/httpd/html/beta'
>
> URI:            '/RunImportTestModPython.py'
> Location:       None
> Directory:      '/home/httpd/html/beta/'
> Filename:       '/home/httpd/html/beta/RunImportTestModPython.py'
> PathInfo:       ''
>
> Phase:          'PythonHandler'
> Handler:        'RunImportTestModPython'
>
> Traceback (most recent call last):
>
>   File
> "/usr/local/lib/python2.5/site-packages/mod_python/importer.py",
> line 1537, in HandlerDispatch
>     default=default_handler, arg=req, silent=hlist.silent)
>
>   File
> "/usr/local/lib/python2.5/site-packages/mod_python/importer.py",
> line 1202, in _process_target
>     module = import_module(module_name, path=path)
>
>   File
> "/usr/local/lib/python2.5/site-packages/mod_python/importer.py",
> line 296, in import_module
>     log, import_path)
>
>   File
> "/usr/local/lib/python2.5/site-packages/mod_python/importer.py",
> line 680, in import_module
>     execfile(file, module.__dict__)
>
>   File "/home/httpd/html/beta/RunImportTestModPython.py",
> line 2, in <module>
>     from ImportTest.ImportTest import TEST_CONSTANT
>
> ImportError: No module named ImportTest.ImportTest
>
>
> MODULE CACHE DETAILS
>
> Accessed:       Mon Jun  2 14:21:49 2008
> Generation:     0
>
> _mp_df6c4429391f4fb65dc56704a2c1e0e2 {
>   FileName:     '/home/httpd/html/beta/RunImportTestModPython.py'
>   Instance:     1 [IMPORT]
>   Generation:   0 [ERROR]
>   Modified:     Mon Jun  2 11:49:11 2008
> }
>
>
> ...and here's an .htaccess file we're using in the directory
> /home/httpd/html/beta, the directory that RunImportTestModPython.py is
> in:
> =========================
> Options Indexes FollowSymLinks MultiViews AddHandler
> mod_python .py PythonDebug On PythonHandler
> RunImportTestModPython PythonAutoReload On PythonPath
> "['/home/me/scratch', '/home/me/scratch/ImportTest',
> '/usr/lib/python2.5/', '/usr/lib/python2.5/lib-dynload/',
> '/usr/lib/python2.5/site-packages/']"
>
>
> ...where /home/me is the user directory referenced at the top
> of the message.
>
> It's quite likely we're overlooking something very
> simple--but this same setup works without hitch on another
> system (granted, versions of OS, Apache, mod_python and
> Python are slightly different...).  This non-functioning setup is:
>
> * CentOS 5
> * Apache 2.2.8
> * PHP 5.2.6
> * Python 2.5.2
> * mod_python 3.3.1
> * cx_oracle 4.3.3
>
> some of those are kind of irrelevant for the specific
> application here, but there might be hidden conflicts that
> I'm not aware of. I have read some stuff about using
> mod_python's native import methods, and I'd very much like to
> use the standard python import method instead, as it
> preserves command-line execution without having to add a lot
> of overhead.  And in fact, I shouldn't have to because this
> setup works on another server.  Unfortunately, I can't simply
> use the other server...
>
> Hope this isn't all too much information--I'm very grateful
> for any help anyone may provide.
>
> many thanks,
> MC
>
>

*****************************************************************************
This e-mail and any files attached are strictly confidential, may be legally
privileged and are intended solely for the addressee. If you are not the
intended recipient please notify the sender immediately by return email and
then delete the e-mail and any attachments immediately.

The views and or opinions expressed in this e-mail are not necessarily the
views of De La Rue plc or any of its subsidiaries and the De La Rue Group
of companies, their directors, officers and employees make no representation
about and accept no liability for its accuracy or completeness.

You should ensure that you have adequate virus protection as the De La Rue
Group of companies do not accept liability for any viruses.

De La Rue plc Registered No.3834125, De La Rue Holdings plc Registered
No 58025 and De La Rue International Limited Registered No 720284 are all
registered in England with their registered office at:
De La Rue House, Jays Close, Viables, Hampshire RG22 4BS
*****************************************************************************


From graham.dumpleton at gmail.com  Tue Jun  3 02:51:01 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Tue Jun  3 02:51:08 2008
Subject: [mod_python] Trouble importing files through mod_python
In-Reply-To: <5213E58D85BC414998FA553C701E386C0EF2890BD5@SGBD012511.dlrmail.ad.delarue.com>
References: <a89a6a430806021258u52cc6ceeu5458a92998f025c@mail.gmail.com>
	<5213E58D85BC414998FA553C701E386C0EF2890BD5@SGBD012511.dlrmail.ad.delarue.com>
Message-ID: <88e286470806022351j7eed5aeay5cecbada6c60707a@mail.gmail.com>

Also read the documentation. See 'import_module()' under:

  http://www.modpython.org/live/current/doc-html/pyapi-apmeth.html

This can be used directly, but is also what PythonHandler directive
uses to import top level handler module.

Graham

2008/6/3  <Dominique.Holzwarth@ch.delarue.com>:
> Importing packaged/modules under mod_python is a little bit complicated (imo) cause mod_python tries to make a difference between then standard system python search path and a own, mod_python specific search path for modules.
> For full reference of the problem see: http://www.modpython.org/pipermail/mod_python/2006-November/022726.html
>
> As a quick (but not complete) summary here's what I've used so far:
>
> 1. put your packages as "normal" python packages under <python-dir>/Lib/site-packages, then you can import them the same way as you would do with the console. However, if anything changes, you need to restart apache (takes like 1 sec ;-))
>
> 2. put your packages under the apache (python-) document root. If you configured apache to search for *.py files under ../htdocs/python and your packages are inside that directory then you can import them like this:
>
> from mod_python import apache
> someName = apache.import_module(~/package-name/module-name.py)
>
> Note that "someName" can be choosen whatever you want. The "~" points to the python document root.
> Using that method you don't need a __init__.py file to reflect the package structure btw. Also, using this method changes inside the packages are reloaded on-the-fly by apache without the need to restart it. It is however possible to access the *.py files through the web if apache is not properly configured (not sure if you can hide them fully tbh).
>
> 3. put your packages ANYWHERE outside the apache document root AND outside of site-packages.
> In this case you need to set the mod_python importer path. Packages/modules in this path aren't automaticly reloaded, so after a change, you need to restart apache:
>
> PythonOption mod_python.importer.path "['some/path/to/my/Module.py', 'some/other/path/to/a/directory/with/modules']"
>
> This statement goes into apache configuration file (httpd.conf or .htsomething ;-))
> Importing these packages/modules should work the same as you do from within the console. I'm not totally sure about that tho as I used this method only to import modules - never packages (so I'm not sure wether "import package.subpackage.module" works...)
>
> Greetings
> dominique
>
>> -----Original Message-----
>> From: hungrybackspace@gmail.com [mailto:hungrybackspace@gmail.com]
>> Sent: Montag, 2. Juni 2008 21:59
>> To: mod_python@modpython.org
>> Subject: [mod_python] Trouble importing files through mod_python
>>
>> Greetings,
>>
>> We're having a bit of a time importing modules that aren't in
>> the standard library while using mod_python on this
>> particular server.  We have had, however, success with other
>> servers.  We're trying to run a tiny application that looks like this:
>>
>>
>> on the console side:
>> ~/scratch/
>>           RunImportTest.py
>>           __init__.py
>>           ImportTest/
>>                      ImportTest.py
>>                      __init__.py
>>
>>
>> ...and the web side:
>> /home/httpd/html/beta/
>>                       RunImportTestModPython.py
>>
>>
>> Below, the contents of the three files:
>>
>> RunImportTest.py:
>> =================
>> from ImportTest.ImportTest import TEST_CONSTANT
>>
>> print TEST_CONSTANT
>>
>>
>> RunImportTestModPython.py:
>> ==========================
>> from mod_python import apache
>> from ImportTest.ImportTest import TEST_CONSTANT
>>
>> def handler(req):
>>     req.content_type = 'text/plain'
>>     req.write(TEST_CONSTANT)
>>     return apache.OK
>>
>>
>> ImportTest/ImportTest.py:
>> =========================
>> TEST_CONSTANT = "success"
>>
>>
>> Output from the import test from command line:
>> ~/scratch> python RunImportTest.py
>> success
>>
>> So we know the little program does indeed work.  Here is the
>> output from Apache via mod_python:
>>
>> ========================
>> MOD_PYTHON ERROR
>>
>> ProcessId:      18704
>> Interpreter:    'beta.company.com'
>>
>> ServerName:     'beta.company.com'
>> DocumentRoot:   '/home/httpd/html/beta'
>>
>> URI:            '/RunImportTestModPython.py'
>> Location:       None
>> Directory:      '/home/httpd/html/beta/'
>> Filename:       '/home/httpd/html/beta/RunImportTestModPython.py'
>> PathInfo:       ''
>>
>> Phase:          'PythonHandler'
>> Handler:        'RunImportTestModPython'
>>
>> Traceback (most recent call last):
>>
>>   File
>> "/usr/local/lib/python2.5/site-packages/mod_python/importer.py",
>> line 1537, in HandlerDispatch
>>     default=default_handler, arg=req, silent=hlist.silent)
>>
>>   File
>> "/usr/local/lib/python2.5/site-packages/mod_python/importer.py",
>> line 1202, in _process_target
>>     module = import_module(module_name, path=path)
>>
>>   File
>> "/usr/local/lib/python2.5/site-packages/mod_python/importer.py",
>> line 296, in import_module
>>     log, import_path)
>>
>>   File
>> "/usr/local/lib/python2.5/site-packages/mod_python/importer.py",
>> line 680, in import_module
>>     execfile(file, module.__dict__)
>>
>>   File "/home/httpd/html/beta/RunImportTestModPython.py",
>> line 2, in <module>
>>     from ImportTest.ImportTest import TEST_CONSTANT
>>
>> ImportError: No module named ImportTest.ImportTest
>>
>>
>> MODULE CACHE DETAILS
>>
>> Accessed:       Mon Jun  2 14:21:49 2008
>> Generation:     0
>>
>> _mp_df6c4429391f4fb65dc56704a2c1e0e2 {
>>   FileName:     '/home/httpd/html/beta/RunImportTestModPython.py'
>>   Instance:     1 [IMPORT]
>>   Generation:   0 [ERROR]
>>   Modified:     Mon Jun  2 11:49:11 2008
>> }
>>
>>
>> ...and here's an .htaccess file we're using in the directory
>> /home/httpd/html/beta, the directory that RunImportTestModPython.py is
>> in:
>> =========================
>> Options Indexes FollowSymLinks MultiViews AddHandler
>> mod_python .py PythonDebug On PythonHandler
>> RunImportTestModPython PythonAutoReload On PythonPath
>> "['/home/me/scratch', '/home/me/scratch/ImportTest',
>> '/usr/lib/python2.5/', '/usr/lib/python2.5/lib-dynload/',
>> '/usr/lib/python2.5/site-packages/']"
>>
>>
>> ...where /home/me is the user directory referenced at the top
>> of the message.
>>
>> It's quite likely we're overlooking something very
>> simple--but this same setup works without hitch on another
>> system (granted, versions of OS, Apache, mod_python and
>> Python are slightly different...).  This non-functioning setup is:
>>
>> * CentOS 5
>> * Apache 2.2.8
>> * PHP 5.2.6
>> * Python 2.5.2
>> * mod_python 3.3.1
>> * cx_oracle 4.3.3
>>
>> some of those are kind of irrelevant for the specific
>> application here, but there might be hidden conflicts that
>> I'm not aware of. I have read some stuff about using
>> mod_python's native import methods, and I'd very much like to
>> use the standard python import method instead, as it
>> preserves command-line execution without having to add a lot
>> of overhead.  And in fact, I shouldn't have to because this
>> setup works on another server.  Unfortunately, I can't simply
>> use the other server...
>>
>> Hope this isn't all too much information--I'm very grateful
>> for any help anyone may provide.
>>
>> many thanks,
>> MC
>>
>>
>
> *****************************************************************************
> This e-mail and any files attached are strictly confidential, may be legally
> privileged and are intended solely for the addressee. If you are not the
> intended recipient please notify the sender immediately by return email and
> then delete the e-mail and any attachments immediately.
>
> The views and or opinions expressed in this e-mail are not necessarily the
> views of De La Rue plc or any of its subsidiaries and the De La Rue Group
> of companies, their directors, officers and employees make no representation
> about and accept no liability for its accuracy or completeness.
>
> You should ensure that you have adequate virus protection as the De La Rue
> Group of companies do not accept liability for any viruses.
>
> De La Rue plc Registered No.3834125, De La Rue Holdings plc Registered
> No 58025 and De La Rue International Limited Registered No 720284 are all
> registered in England with their registered office at:
> De La Rue House, Jays Close, Viables, Hampshire RG22 4BS
> *****************************************************************************
>
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>
From rahul.warhekar at edisphere.com  Wed Jun  4 07:06:44 2008
From: rahul.warhekar at edisphere.com (rahul)
Date: Wed Jun  4 07:11:25 2008
Subject: [mod_python] parsing xml file
Message-ID: <FKEHLGFPCACLBKEEIEDFMEJDCAAA.rahul.warhekar@edisphere.com>

hello all,
I have recently started learning xml and i have made one xml file and want
to use its contents in my .psp pages.
So if anybody knows about any documentation regarding or any information
regarding this then please send it.

Any information regarding this will be greatly appreciated.
thanks
rahul

From harijay at gmail.com  Wed Jun  4 08:53:44 2008
From: harijay at gmail.com (hari jayaram)
Date: Wed Jun  4 08:53:50 2008
Subject: [mod_python] parsing xml file
In-Reply-To: <FKEHLGFPCACLBKEEIEDFMEJDCAAA.rahul.warhekar@edisphere.com>
References: <FKEHLGFPCACLBKEEIEDFMEJDCAAA.rahul.warhekar@edisphere.com>
Message-ID: <aad3caa30806040553j66e09b95s2c1418256d3c0ca@mail.gmail.com>

There are several ways ..but
http://www.diveintopython.org/xml_processing/parsing_xml.html

Which uses minidom is a good start
hari

On Wed, Jun 4, 2008 at 7:06 AM, rahul <rahul.warhekar@edisphere.com> wrote:

> hello all,
> I have recently started learning xml and i have made one xml file and want
> to use its contents in my .psp pages.
> So if anybody knows about any documentation regarding or any information
> regarding this then please send it.
>
> Any information regarding this will be greatly appreciated.
> thanks
> rahul
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080604/5f6c2001/attachment.html
From jeddahbill at gmail.com  Wed Jun  4 13:45:58 2008
From: jeddahbill at gmail.com (William Chapman)
Date: Wed Jun  4 13:46:12 2008
Subject: [mod_python] Windows performance problem
In-Reply-To: <6543521a0806021121t70ad0131gbde82bab8fb57cb0@mail.gmail.com>
References: <6543521a0805311050n75794f45x46711e82226136c8@mail.gmail.com>
	<88e286470806011849s5a21afecjf29a4def4666663e@mail.gmail.com>
	<6543521a0806021121t70ad0131gbde82bab8fb57cb0@mail.gmail.com>
Message-ID: <6543521a0806041045j74f0ccf4p6662404ad89ac057@mail.gmail.com>

A follow-up on my "Windows performance problem":

The problem was caused by the unexpected performance difference between the
Linux and Windows versions of a JSON package - simplejson.  **** It had
nothing at all to do with mod_python. ****  It turns out that simplejson's
"speedup" feature was not functioning properly with Windows.  To acheive
better performance I needed to convert several performance-critial sections
of my mod_python handler to use cjson instead.

I would like to put in a good word, however, for both the cjson and
simplejson packages.  They are both excellent.  simplejson has more
features, is well documented, and very flexible; cjson is simpler, somewhat
less flexible, and much faster.

Thanks again to Graham and Dominique for keeping me properly focused (away
from mod_python).  Who knows for how long I would have wandered in the
wilderness?!

On Mon, Jun 2, 2008 at 11:21 AM, William Chapman <jeddahbill@gmail.com>
wrote:

> Graham & Dominique,
>
> Thanks for your responses and fresh insights!
>
> Progress so far:
> Per your suggestion, I have tested the Windows XP (x64) & Linux
> installations for static file serving performance, and found both to be
> equally excellent.  Actually, I think the Windows is even a bit livelier
> than the Linux.
>
> Next step I'm considering:
> (1) Reinstall Apache, Python, and mod_python, with versions to match those
> installed on the Windows side of my alternate host.  Because I generally
> always choose the latest versions of everything I install, the older host
> machine is probably a version or so behind.  I might learn something there.
>
> Other information about my environment:
> My web application uses sqlite (pysqlite binding) - and a few other Python
> packages - but sqlite is the only one involved that's a performance driver.
> Dominique mentioned the possible impact of other web application software
> dependencies.  Because I use sqlite, I'll also include it in the list of
> software to reinstall, possibly reverting to an older version.
>
> By the way, I checked the Apache error logs on the (older) test-host and
> the mod_python error messages are NOT present.  I believe it's running
> Apache 2.5.1 versus 2.5.2 on the new (problem) development-host.
>
> Thanks again for your help.  I will post progress to the list.
> Hasta la vista, ciao,
> -- Bill Chapman
>
>
> On Sun, Jun 1, 2008 at 6:49 PM, Graham Dumpleton <
> graham.dumpleton@gmail.com> wrote:
>
>> 2008/6/1 William Chapman <jeddahbill@gmail.com>:
>> > I'm new to this list, but have been using mod_python successfully for
>> three
>> > years in a web app served by both Linux (Ubuntu) and Windows (XP sp2
>> 32bit
>> > AND 64bit).  I use two hosts to serve: one for testing (semi-public);
>> one
>> > for development.  Both hosts are dual-boot (Linux/Windows) and will
>> serve
>> > the identical web app installation from the same (NTFS file system)
>> > directories.
>> >
>> > My problems started when the development host went belly-up and I
>> rebuilt
>> > the computer.  The Windows installation was upgraded (?) from 32bit to
>> 64bit
>> > XP sp2.  (I don't know if going to x64 Windows is part of the problem; I
>> > doubt it.)  Upon bringing up the new development host, all went well
>> with
>> > the Linux side, but under Windows, the web app is perfroming poorly.
>>  The
>> > application accesses take much too long.  Historically, the Windows &
>> Linux
>> > installations were comparable, and I never had performance complaints.
>>  Now,
>> > the new Windows installation is 5x to 10x slower than previously.  To
>> > emphasize, the mod_python is "working," but very slowly, and comletely
>> > unlike my previous experience with Windows/Apache/mod_python, not to
>> mention
>> > my current testing host which is fine.
>>
>> Have you tested speed of serving static files? That is, is it a
>> mod_python specific problem or a problem with Apache as a whole?
>>
>> > The setup (all installed from binaries):
>> > Windows XP x64 sp2
>> > apache 2.2.8
>> > mod_python 3.3.1
>> > Python 2.5.2 (installed separately)
>> >
>> > Note:  I am not exactly sure of the order in which I installed
>> > Apache/mod_python & Python 2.5.  Could this matter?
>> > I did uninstall and reinstall mod_python but performance/symptoms didn't
>> > seem to change.
>> >
>> > The only clues:
>> > Three lines together from apache error.log (long lines - STRETCH
>> BROWSER)
>> > (file also attached) (also see Graham's email here.):
>> > [Fri May 30 17:38:57 2008] [error] python_init: Python version mismatch,
>> > expected '2.5', found '2.5.2'.
>> > [Fri May 30 17:38:58 2008] [error] python_init: Python executable found
>> > 'C:\\Program Files (x86)\\Apache Software
>> > Foundation\\Apache2.2\\bin\\httpd.exe'.
>> > [Fri May 30 17:38:58 2008] [error] python_init: Python path being used
>> >
>> 'C:\\WINDOWS\\system32\\python25.zip;C:\\Python25\\Lib;C:\\Python25\\DLLs;C:\\Python25\\Lib\\lib-tk;;C:\\Program
>> > Files (x86)\\Apache Software Foundation\\Apache2.2\\bin'.
>> >
>> > I have read several of the threads from the list on this subject and am
>> > confused about the following points:
>> > (1) In the "Python version mismatch" error, the "found" version matches
>> the
>> > version of Python I installed on the Windows machine.  mod_python
>> "expected
>> > 2.5".  Where is that supposed to come from?  I could not find Python 2.5
>> at
>> > http://python.org.
>>
>> You obviously used a prebuilt version of mod_python for Windows. That
>> prebuilt version used Python 2.5 when compiled. That is what it means.
>>
>> > (2) Apparently the "Python version mismatch" error message is not enough
>> to
>> > stop mod_python from working, because it is "working."
>>
>> On Windows, because Python is obtained via a DLL, the warning can be
>> ignored as APIs will be compatible. In other words, doesn't matter
>> that mod_python was originally compiled for older patch revision.
>>
>> > (3) The "Python executable found" error message points to
>> > "...\\Apache2.2\\bin\\httpd.exe"  This does not look like a "Python
>> > executable."  (?)
>>
>> Outputing this was thought to be a good idea, but not actually of much
>> use. What it is simply showing is that Python is running embedded
>> inside of Apache httpd executable. In other words, not standalone
>> python.exe.
>>
>> > (4) The "Python path being used" error message specifies a series of
>> paths.
>> > Where do those paths come from?  Can I affect those values?
>>
>> To a degree. See PythonPath directive, although changes may with this
>> may not show up in startup messages as they are applied later. You can
>> also change it by fiddling Windows registry, but you shouldn't do that
>> if you can help it.
>>
>> > Taken as a
>> > whole it doesn't match the system path environment variable I'm able to
>> set
>> > as a Windows user.
>>
>> This is not the PATH variable, it is related to Python module search path.
>>
>> > Random thought: I always thought that mod_python included an embedded
>> Python
>> > interpreter, but reading suggests mod_python links to Python libraries.
>>
>> Both observations are true. Python is used in embedded mode, but code
>> comes from DLL.
>>
>> > My analysis:  I suspect that the principle benefit of a mod_python
>> > installation is not being realized.  It seems that the interpreter is
>> having
>> > to be restarted for each access.  Is there another explanation for the
>> poor
>> > performance?
>>
>> Your understanding is wrong. A new interpreter is not created on each
>> request.
>>
>> There is obviously still something wrong with your configuration or
>> perhaps with the web application which only manifests with this
>> configuration.
>>
>> Start out by seeing if Apache as a whole is working okay by testing
>> static file serving.
>>
>> Graham
>>
>>
>> > At any rate I would greatly appreciate any suggestions or insights you
>> might
>> > have!!
>> >
>> > With many thanks,
>> > -- Bill Chapman
>> >
>> >
>> > _______________________________________________
>> > Mod_python mailing list
>> > Mod_python@modpython.org
>> > http://mailman.modpython.org/mailman/listinfo/mod_python
>> >
>> >
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080604/012653db/attachment.html
From liyangmin at gmail.com  Sat Jun  7 07:50:39 2008
From: liyangmin at gmail.com (darren lee)
Date: Sat Jun  7 07:50:51 2008
Subject: [mod_python] parsing xml file
In-Reply-To: <FKEHLGFPCACLBKEEIEDFMEJDCAAA.rahul.warhekar@edisphere.com>
References: <FKEHLGFPCACLBKEEIEDFMEJDCAAA.rahul.warhekar@edisphere.com>
Message-ID: <82E307DA-0CEB-463A-A829-5060A01497E8@gmail.com>

as i know ,there is a version of libxml2 in python.
you can check it out at http://xmlsoft.org


thanks
yangmin
 2008-6-47:06 rahul 

> hello all,
> I have recently started learning xml and i have made one xml file  
> and want
> to use its contents in my .psp pages.
> So if anybody knows about any documentation regarding or any  
> information
> regarding this then please send it.
>
> Any information regarding this will be greatly appreciated.
> thanks
> rahul
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080607/1ab22e6f/attachment.html
From ashburrn at gmail.com  Sat Jun  7 18:47:11 2008
From: ashburrn at gmail.com (Jonathan Chong)
Date: Sat Jun  7 18:47:20 2008
Subject: [mod_python] Compiling mod_python
Message-ID: <522363f60806071547j4bd5f8b5p1cc8945fc7e7a253@mail.gmail.com>

Hello

I am trying to compile mod_python on my system but have been consistently
receiving a make_dso error. I have Apache 2.2.8 installed and running fine,
compiled with the following config:

./configure --prefix=/httpd --enable-so --enable-rewrite --enable-deflate
--enable-mime-magic

I have Python 2.5.1 installed and I'm trying to compile mod_python with the
following:

./configure --with-apxs=/httpd/bin/apxs --with-python=/usr/local/bin/python
--with-flex=/usr/local/bin/flex

The configure runs fine, but when I try to run make, I receive this error:

...
/usr/include/features.h:132:1: warning: this is the location of the previous
definition
finfoobject.c:278: warning: `intargfunc' is deprecated (declared at
/usr/local/include/python2.5/object.h:133)
finfoobject.c:278: warning: initialization from incompatible pointer type
/httpd/build/libtool --silent --mode=link gcc -o mod_python.la  -rpath
/httpd/modules -module -avoid-version    finfoobject.lo hlistobject.lo
hlist.lo filterobject.lo connobject.lo serverobject.lo util.lo
tableobject.lo requestobject.lo _apachemodule.lo mod_python.lo
-L/usr/local/lib/python2.5/config -Xlinker -export-dynamic -lm -lpython2.5
-lpthread -ldl -lutil -lm
/usr/bin/ld: /usr/local/lib/python2.5/config/libpython2.5.a(abstract.o):
relocation R_X86_64_32 can not be used when making a shared object;
recompile with -fPIC
/usr/local/lib/python2.5/config/libpython2.5.a: could not read symbols: Bad
value
collect2: ld returned 1 exit status
apxs:Error: Command failed with rc=65536
.
make[1]: *** [mod_python.so] Error 1
make[1]: Leaving directory `/usr/local/src/mod_python-3.3.1/src'
make: *** [do_dso] Error 2

I have full root access on a dedicated server, running CentOS release 3.6
(Final).

Any help is much appreciated, thanks.

-- 
Jonathan Chong

http://jonathanchong.com/
http://arsenal-mania.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080607/7ff60b78/attachment.html
From graham.dumpleton at gmail.com  Sat Jun  7 22:31:28 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Sat Jun  7 22:31:36 2008
Subject: [mod_python] Compiling mod_python
In-Reply-To: <522363f60806071547j4bd5f8b5p1cc8945fc7e7a253@mail.gmail.com>
References: <522363f60806071547j4bd5f8b5p1cc8945fc7e7a253@mail.gmail.com>
Message-ID: <88e286470806071931pddd1045qfe1b0cb111c1a5ad@mail.gmail.com>

Read section 'Mixing 32 Bit And 64 Bit Packages' of:

  http://code.google.com/p/modwsgi/wiki/InstallationIssues

Same issue applies to mod_python.

In other words, fix your Python installation.

Graham

2008/6/8 Jonathan Chong <ashburrn@gmail.com>:
> Hello
>
> I am trying to compile mod_python on my system but have been consistently
> receiving a make_dso error. I have Apache 2.2.8 installed and running fine,
> compiled with the following config:
>
> ./configure --prefix=/httpd --enable-so --enable-rewrite --enable-deflate
> --enable-mime-magic
>
> I have Python 2.5.1 installed and I'm trying to compile mod_python with the
> following:
>
> ./configure --with-apxs=/httpd/bin/apxs --with-python=/usr/local/bin/python
> --with-flex=/usr/local/bin/flex
>
> The configure runs fine, but when I try to run make, I receive this error:
>
> ...
> /usr/include/features.h:132:1: warning: this is the location of the previous
> definition
> finfoobject.c:278: warning: `intargfunc' is deprecated (declared at
> /usr/local/include/python2.5/object.h:133)
> finfoobject.c:278: warning: initialization from incompatible pointer type
> /httpd/build/libtool --silent --mode=link gcc -o mod_python.la  -rpath
> /httpd/modules -module -avoid-version    finfoobject.lo hlistobject.lo
> hlist.lo filterobject.lo connobject.lo serverobject.lo util.lo
> tableobject.lo requestobject.lo _apachemodule.lo mod_python.lo
> -L/usr/local/lib/python2.5/config -Xlinker -export-dynamic -lm -lpython2.5
> -lpthread -ldl -lutil -lm
> /usr/bin/ld: /usr/local/lib/python2.5/config/libpython2.5.a(abstract.o):
> relocation R_X86_64_32 can not be used when making a shared object;
> recompile with -fPIC
> /usr/local/lib/python2.5/config/libpython2.5.a: could not read symbols: Bad
> value
> collect2: ld returned 1 exit status
> apxs:Error: Command failed with rc=65536
> .
> make[1]: *** [mod_python.so] Error 1
> make[1]: Leaving directory `/usr/local/src/mod_python-3.3.1/src'
> make: *** [do_dso] Error 2
>
> I have full root access on a dedicated server, running CentOS release 3.6
> (Final).
>
> Any help is much appreciated, thanks.
>
> --
> Jonathan Chong
>
> http://jonathanchong.com/
> http://arsenal-mania.com/
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>
>
From liyangmin at gmail.com  Sat Jun  7 23:36:59 2008
From: liyangmin at gmail.com (darren lee)
Date: Sat Jun  7 23:37:12 2008
Subject: [mod_python] Compiling mod_python
In-Reply-To: <88e286470806071931pddd1045qfe1b0cb111c1a5ad@mail.gmail.com>
References: <522363f60806071547j4bd5f8b5p1cc8945fc7e7a253@mail.gmail.com>
	<88e286470806071931pddd1045qfe1b0cb111c1a5ad@mail.gmail.com>
Message-ID: <E5D82A28-5049-4C41-9F3A-3847251B7384@gmail.com>

I have met this problem before.

does the python in the location : /usr/loca/bin/python was installed  
by yourself ?

if you install the python by yourself ,you should configure with share  
mode before compile and install .

thanks
darren lee


 2008-6-810:31 Graham Dumpleton 

> Read section 'Mixing 32 Bit And 64 Bit Packages' of:
>
>  http://code.google.com/p/modwsgi/wiki/InstallationIssues
>
> Same issue applies to mod_python.
>
> In other words, fix your Python installation.
>
> Graham
>
> 2008/6/8 Jonathan Chong <ashburrn@gmail.com>:
>> Hello
>>
>> I am trying to compile mod_python on my system but have been  
>> consistently
>> receiving a make_dso error. I have Apache 2.2.8 installed and  
>> running fine,
>> compiled with the following config:
>>
>> ./configure --prefix=/httpd --enable-so --enable-rewrite --enable- 
>> deflate
>> --enable-mime-magic
>>
>> I have Python 2.5.1 installed and I'm trying to compile mod_python  
>> with the
>> following:
>>
>> ./configure --with-apxs=/httpd/bin/apxs --with-python=/usr/local/ 
>> bin/python
>> --with-flex=/usr/local/bin/flex
>>
>> The configure runs fine, but when I try to run make, I receive this  
>> error:
>>
>> ...
>> /usr/include/features.h:132:1: warning: this is the location of the  
>> previous
>> definition
>> finfoobject.c:278: warning: `intargfunc' is deprecated (declared at
>> /usr/local/include/python2.5/object.h:133)
>> finfoobject.c:278: warning: initialization from incompatible  
>> pointer type
>> /httpd/build/libtool --silent --mode=link gcc -o mod_python.la  - 
>> rpath
>> /httpd/modules -module -avoid-version    finfoobject.lo  
>> hlistobject.lo
>> hlist.lo filterobject.lo connobject.lo serverobject.lo util.lo
>> tableobject.lo requestobject.lo _apachemodule.lo mod_python.lo
>> -L/usr/local/lib/python2.5/config -Xlinker -export-dynamic -lm - 
>> lpython2.5
>> -lpthread -ldl -lutil -lm
>> /usr/bin/ld: /usr/local/lib/python2.5/config/ 
>> libpython2.5.a(abstract.o):
>> relocation R_X86_64_32 can not be used when making a shared object;
>> recompile with -fPIC
>> /usr/local/lib/python2.5/config/libpython2.5.a: could not read  
>> symbols: Bad
>> value
>> collect2: ld returned 1 exit status
>> apxs:Error: Command failed with rc=65536
>> .
>> make[1]: *** [mod_python.so] Error 1
>> make[1]: Leaving directory `/usr/local/src/mod_python-3.3.1/src'
>> make: *** [do_dso] Error 2
>>
>> I have full root access on a dedicated server, running CentOS  
>> release 3.6
>> (Final).
>>
>> Any help is much appreciated, thanks.
>>
>> --
>> Jonathan Chong
>>
>> http://jonathanchong.com/
>> http://arsenal-mania.com/
>> _______________________________________________
>> Mod_python mailing list
>> Mod_python@modpython.org
>> http://mailman.modpython.org/mailman/listinfo/mod_python
>>
>>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080608/45b59b8c/attachment.html
From ashburrn at gmail.com  Sun Jun  8 02:27:31 2008
From: ashburrn at gmail.com (Jonathan Chong)
Date: Sun Jun  8 02:27:41 2008
Subject: [mod_python] Compiling mod_python
In-Reply-To: <88e286470806071931pddd1045qfe1b0cb111c1a5ad@mail.gmail.com>
References: <522363f60806071547j4bd5f8b5p1cc8945fc7e7a253@mail.gmail.com>
	<88e286470806071931pddd1045qfe1b0cb111c1a5ad@mail.gmail.com>
Message-ID: <484B7BD3.2070705@gmail.com>

Hello everyone

After much Googling last night, I managed to get this working by 
following instructions from this site:

http://agiletesting.blogspot.com/2007_10_01_archive.html

Thanks.


Graham Dumpleton wrote:
> Read section 'Mixing 32 Bit And 64 Bit Packages' of:
> 
>   http://code.google.com/p/modwsgi/wiki/InstallationIssues
> 
> Same issue applies to mod_python.
> 
> In other words, fix your Python installation.
> 
> Graham
> 
> 2008/6/8 Jonathan Chong <ashburrn@gmail.com>:
>> Hello
>>
>> I am trying to compile mod_python on my system but have been consistently
>> receiving a make_dso error. I have Apache 2.2.8 installed and running fine,
>> compiled with the following config:
>>
>> ./configure --prefix=/httpd --enable-so --enable-rewrite --enable-deflate
>> --enable-mime-magic
>>
>> I have Python 2.5.1 installed and I'm trying to compile mod_python with the
>> following:
>>
>> ./configure --with-apxs=/httpd/bin/apxs --with-python=/usr/local/bin/python
>> --with-flex=/usr/local/bin/flex
>>
>> The configure runs fine, but when I try to run make, I receive this error:
>>
>> ...
>> /usr/include/features.h:132:1: warning: this is the location of the previous
>> definition
>> finfoobject.c:278: warning: `intargfunc' is deprecated (declared at
>> /usr/local/include/python2.5/object.h:133)
>> finfoobject.c:278: warning: initialization from incompatible pointer type
>> /httpd/build/libtool --silent --mode=link gcc -o mod_python.la  -rpath
>> /httpd/modules -module -avoid-version    finfoobject.lo hlistobject.lo
>> hlist.lo filterobject.lo connobject.lo serverobject.lo util.lo
>> tableobject.lo requestobject.lo _apachemodule.lo mod_python.lo
>> -L/usr/local/lib/python2.5/config -Xlinker -export-dynamic -lm -lpython2.5
>> -lpthread -ldl -lutil -lm
>> /usr/bin/ld: /usr/local/lib/python2.5/config/libpython2.5.a(abstract.o):
>> relocation R_X86_64_32 can not be used when making a shared object;
>> recompile with -fPIC
>> /usr/local/lib/python2.5/config/libpython2.5.a: could not read symbols: Bad
>> value
>> collect2: ld returned 1 exit status
>> apxs:Error: Command failed with rc=65536
>> .
>> make[1]: *** [mod_python.so] Error 1
>> make[1]: Leaving directory `/usr/local/src/mod_python-3.3.1/src'
>> make: *** [do_dso] Error 2
>>
>> I have full root access on a dedicated server, running CentOS release 3.6
>> (Final).
>>
>> Any help is much appreciated, thanks.
>>
>> --
>> Jonathan Chong
>>
>> http://jonathanchong.com/
>> http://arsenal-mania.com/
>> _______________________________________________
>> Mod_python mailing list
>> Mod_python@modpython.org
>> http://mailman.modpython.org/mailman/listinfo/mod_python
>>
>>

From Dominique.Holzwarth at ch.delarue.com  Mon Jun  9 05:13:16 2008
From: Dominique.Holzwarth at ch.delarue.com (Dominique.Holzwarth@ch.delarue.com)
Date: Mon Jun  9 05:13:56 2008
Subject: [mod_python] Browser doesn't display server response
Message-ID: <5213E58D85BC414998FA553C701E386C0EF28EE812@SGBD012511.dlrmail.ad.delarue.com>


Hi all

I recently got the error that the browser doesn't display the server response generated by some python scripts anymore but instead I get a "File Download" Pop-up with:

Name: myFileName.py
Type: py_auto_file
From: server-name

That behaviour does NOT apply to every script so I guess there must be something wrong with certain scripts that confuse apache/mod_python? Or could it maybe have something to do with the apache configuration (mentioning it because I adjusted it slightly)?

Would be nice if someone has an idea what could cause this strange behaviour... :-/

Greetings
Dominique


*****************************************************************************
This e-mail and any files attached are strictly confidential, may be legally
privileged and are intended solely for the addressee. If you are not the
intended recipient please notify the sender immediately by return email and
then delete the e-mail and any attachments immediately.

The views and or opinions expressed in this e-mail are not necessarily the
views of De La Rue plc or any of its subsidiaries and the De La Rue Group
of companies, their directors, officers and employees make no representation
about and accept no liability for its accuracy or completeness.

You should ensure that you have adequate virus protection as the De La Rue
Group of companies do not accept liability for any viruses.

De La Rue plc Registered No.3834125, De La Rue Holdings plc Registered
No 58025 and De La Rue International Limited Registered No 720284 are all
registered in England with their registered office at:
De La Rue House, Jays Close, Viables, Hampshire RG22 4BS
*****************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080609/6a5cd089/attachment.html
From graham.dumpleton at gmail.com  Mon Jun  9 08:20:48 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Mon Jun  9 08:21:05 2008
Subject: [mod_python] Browser doesn't display server response
In-Reply-To: <5213E58D85BC414998FA553C701E386C0EF28EE812@SGBD012511.dlrmail.ad.delarue.com>
References: <5213E58D85BC414998FA553C701E386C0EF28EE812@SGBD012511.dlrmail.ad.delarue.com>
Message-ID: <88e286470806090520h650a9bf0n4792639186e81602@mail.gmail.com>

Ensure you are setting content type for response.

Graham

2008/6/9  <Dominique.Holzwarth@ch.delarue.com>:
>
> Hi all
>
> I recently got the error that the browser doesn't display the server
> response generated by some python scripts anymore but instead I get a "File
> Download" Pop-up with:
>
> Name: myFileName.py
> Type: py_auto_file
> From: server-name
>
> That behaviour does NOT apply to every script so I guess there must be
> something wrong with certain scripts that confuse apache/mod_python? Or
> could it maybe have something to do with the apache configuration
> (mentioning it because I adjusted it slightly)?
>
> Would be nice if someone has an idea what could cause this strange
> behaviour? :-/
>
> Greetings
> Dominique
>
> *****************************************************************************
> This e-mail and any files attached are strictly confidential, may be legally
> privileged and are intended solely for the addressee. If you are not the
> intended recipient please notify the sender immediately by return email and
> then delete the e-mail and any attachments immediately.
>
> The views and or opinions expressed in this e-mail are not necessarily the
> views of De La Rue plc or any of its subsidiaries and the De La Rue Group
> of companies, their directors, officers and employees make no representation
> about and accept no liability for its accuracy or completeness.
>
> You should ensure that you have adequate virus protection as the De La Rue
> Group of companies do not accept liability for any viruses.
>
> De La Rue plc Registered No.3834125, De La Rue Holdings plc Registered
> No 58025 and De La Rue International Limited Registered No 720284 are all
> registered in England with their registered office at:
> De La Rue House, Jays Close, Viables, Hampshire RG22 4BS
> *****************************************************************************
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>
>

From Dominique.Holzwarth at ch.delarue.com  Mon Jun  9 08:26:41 2008
From: Dominique.Holzwarth at ch.delarue.com (Dominique.Holzwarth@ch.delarue.com)
Date: Mon Jun  9 08:27:22 2008
Subject: [mod_python] Browser doesn't display server response
In-Reply-To: <88e286470806090520h650a9bf0n4792639186e81602@mail.gmail.com>
Message-ID: <5213E58D85BC414998FA553C701E386C0EF28EE9EB@SGBD012511.dlrmail.ad.delarue.com>

To be honest, I've never set the content type so far. I thought the publisher handler is smart enough to do that on it's own and it always worked =)
Except for those rare occasions like today, which is only the case when my scripts have some errors (not "syntax" error's or so, the the mod_python debug page will show up). It's a very rare behaviour so I couldn't track the problem down yet.

Next time I'll try with setting the content type =) (the script is running again so I don't get the "file download" pop-up anymore =))

Greetings
Dominique

> -----Original Message-----
> From: Graham Dumpleton [mailto:graham.dumpleton@gmail.com]
> Sent: Montag, 9. Juni 2008 14:21
> To: Holzwarth, Dominique (Berne Bauhaus)
> Cc: mod_python@modpython.org
> Subject: Re: [mod_python] Browser doesn't display server response
>
> Ensure you are setting content type for response.
>
> Graham
>
> 2008/6/9  <Dominique.Holzwarth@ch.delarue.com>:
> >
> > Hi all
> >
> > I recently got the error that the browser doesn't display
> the server
> > response generated by some python scripts anymore but
> instead I get a
> > "File Download" Pop-up with:
> >
> > Name: myFileName.py
> > Type: py_auto_file
> > From: server-name
> >
> > That behaviour does NOT apply to every script so I guess
> there must be
> > something wrong with certain scripts that confuse
> apache/mod_python?
> > Or could it maybe have something to do with the apache
> configuration
> > (mentioning it because I adjusted it slightly)?
> >
> > Would be nice if someone has an idea what could cause this strange
> > behaviour... :-/
> >
> > Greetings
> > Dominique
> >
> >
> **********************************************************************
> > ******* This e-mail and any files attached are strictly
> confidential,
> > may be legally privileged and are intended solely for the
> addressee.
> > If you are not the intended recipient please notify the sender
> > immediately by return email and then delete the e-mail and any
> > attachments immediately.
> >
> > The views and or opinions expressed in this e-mail are not
> necessarily
> > the views of De La Rue plc or any of its subsidiaries and the De La
> > Rue Group of companies, their directors, officers and
> employees make
> > no representation about and accept no liability for its
> accuracy or completeness.
> >
> > You should ensure that you have adequate virus protection
> as the De La
> > Rue Group of companies do not accept liability for any viruses.
> >
> > De La Rue plc Registered No.3834125, De La Rue Holdings plc
> Registered
> > No 58025 and De La Rue International Limited Registered No
> 720284 are
> > all registered in England with their registered office at:
> > De La Rue House, Jays Close, Viables, Hampshire RG22 4BS
> >
> **********************************************************************
> > *******
> >
> > _______________________________________________
> > Mod_python mailing list
> > Mod_python@modpython.org
> > http://mailman.modpython.org/mailman/listinfo/mod_python
> >
> >
>
>

*****************************************************************************
This e-mail and any files attached are strictly confidential, may be legally
privileged and are intended solely for the addressee. If you are not the
intended recipient please notify the sender immediately by return email and
then delete the e-mail and any attachments immediately.

The views and or opinions expressed in this e-mail are not necessarily the
views of De La Rue plc or any of its subsidiaries and the De La Rue Group
of companies, their directors, officers and employees make no representation
about and accept no liability for its accuracy or completeness.

You should ensure that you have adequate virus protection as the De La Rue
Group of companies do not accept liability for any viruses.

De La Rue plc Registered No.3834125, De La Rue Holdings plc Registered
No 58025 and De La Rue International Limited Registered No 720284 are all
registered in England with their registered office at:
De La Rue House, Jays Close, Viables, Hampshire RG22 4BS
*****************************************************************************


From graham.dumpleton at gmail.com  Mon Jun  9 08:30:36 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Mon Jun  9 08:30:47 2008
Subject: [mod_python] Browser doesn't display server response
In-Reply-To: <5213E58D85BC414998FA553C701E386C0EF28EE9EB@SGBD012511.dlrmail.ad.delarue.com>
References: <88e286470806090520h650a9bf0n4792639186e81602@mail.gmail.com>
	<5213E58D85BC414998FA553C701E386C0EF28EE9EB@SGBD012511.dlrmail.ad.delarue.com>
Message-ID: <88e286470806090530j4b76a2fbnbeb66f800047bc82@mail.gmail.com>

Publisher only does it for HTML. If for some reason it doesn't
identify it as HTML it will from memory defer to Apache type handlers,
which probably will not be of any use as nothing sensible would be set
for .py extension. End result is that a browser will do its own
interpretation of what a .py extension in a URL may mean, and if it
doesn't have a mapping will treat it as a file download.

It is always safer to set content type in responses.

Graham

2008/6/9  <Dominique.Holzwarth@ch.delarue.com>:
> To be honest, I've never set the content type so far. I thought the publisher handler is smart enough to do that on it's own and it always worked =)
> Except for those rare occasions like today, which is only the case when my scripts have some errors (not "syntax" error's or so, the the mod_python debug page will show up). It's a very rare behaviour so I couldn't track the problem down yet.
>
> Next time I'll try with setting the content type =) (the script is running again so I don't get the "file download" pop-up anymore =))
>
> Greetings
> Dominique
>
>> -----Original Message-----
>> From: Graham Dumpleton [mailto:graham.dumpleton@gmail.com]
>> Sent: Montag, 9. Juni 2008 14:21
>> To: Holzwarth, Dominique (Berne Bauhaus)
>> Cc: mod_python@modpython.org
>> Subject: Re: [mod_python] Browser doesn't display server response
>>
>> Ensure you are setting content type for response.
>>
>> Graham
>>
>> 2008/6/9  <Dominique.Holzwarth@ch.delarue.com>:
>> >
>> > Hi all
>> >
>> > I recently got the error that the browser doesn't display
>> the server
>> > response generated by some python scripts anymore but
>> instead I get a
>> > "File Download" Pop-up with:
>> >
>> > Name: myFileName.py
>> > Type: py_auto_file
>> > From: server-name
>> >
>> > That behaviour does NOT apply to every script so I guess
>> there must be
>> > something wrong with certain scripts that confuse
>> apache/mod_python?
>> > Or could it maybe have something to do with the apache
>> configuration
>> > (mentioning it because I adjusted it slightly)?
>> >
>> > Would be nice if someone has an idea what could cause this strange
>> > behaviour... :-/
>> >
>> > Greetings
>> > Dominique
>> >
>> >
>> **********************************************************************
>> > ******* This e-mail and any files attached are strictly
>> confidential,
>> > may be legally privileged and are intended solely for the
>> addressee.
>> > If you are not the intended recipient please notify the sender
>> > immediately by return email and then delete the e-mail and any
>> > attachments immediately.
>> >
>> > The views and or opinions expressed in this e-mail are not
>> necessarily
>> > the views of De La Rue plc or any of its subsidiaries and the De La
>> > Rue Group of companies, their directors, officers and
>> employees make
>> > no representation about and accept no liability for its
>> accuracy or completeness.
>> >
>> > You should ensure that you have adequate virus protection
>> as the De La
>> > Rue Group of companies do not accept liability for any viruses.
>> >
>> > De La Rue plc Registered No.3834125, De La Rue Holdings plc
>> Registered
>> > No 58025 and De La Rue International Limited Registered No
>> 720284 are
>> > all registered in England with their registered office at:
>> > De La Rue House, Jays Close, Viables, Hampshire RG22 4BS
>> >
>> **********************************************************************
>> > *******
>> >
>> > _______________________________________________
>> > Mod_python mailing list
>> > Mod_python@modpython.org
>> > http://mailman.modpython.org/mailman/listinfo/mod_python
>> >
>> >
>>
>>
>
> *****************************************************************************
> This e-mail and any files attached are strictly confidential, may be legally
> privileged and are intended solely for the addressee. If you are not the
> intended recipient please notify the sender immediately by return email and
> then delete the e-mail and any attachments immediately.
>
> The views and or opinions expressed in this e-mail are not necessarily the
> views of De La Rue plc or any of its subsidiaries and the De La Rue Group
> of companies, their directors, officers and employees make no representation
> about and accept no liability for its accuracy or completeness.
>
> You should ensure that you have adequate virus protection as the De La Rue
> Group of companies do not accept liability for any viruses.
>
> De La Rue plc Registered No.3834125, De La Rue Holdings plc Registered
> No 58025 and De La Rue International Limited Registered No 720284 are all
> registered in England with their registered office at:
> De La Rue House, Jays Close, Viables, Hampshire RG22 4BS
> *****************************************************************************
>
>
From JLeone at sjm.com  Tue Jun 10 17:32:09 2008
From: JLeone at sjm.com (Leone, James)
Date: Tue Jun 10 17:32:15 2008
Subject: [mod_python] Compile errors when created dso
Message-ID: <C4CACCE8C0717647997559F20314BE408E0F33@USSYML03.ad.sjm.com>

Hello,

 

I am having trouble compiling mod_python.  I am compiling on a RedHat
AS4 64-bit virtual machine (VMWare over ESX).

 

I have both Python 2.5.2 and Apache 2.2 built from source and installed.
I configured the build using the command below:

./configure --with-apxs=/opt/apache2/bin/apxs
--with-python=/usr/local/bin/python2.5 --libdir=/usr/lib64

 

 "make" results in a failure, I have posted the tail lines below.  Do
you have any ideas about the cause?

 

In file included from /usr/local/include/python2.5/Python.h:8,

                 from /opt/mod_python-3.3.1/src/include/mod_python.h:80,

                 from finfoobject.c:25:

/usr/local/include/python2.5/pyconfig.h:942:1: warning:
"_POSIX_C_SOURCE" redefined

In file included from /usr/include/sys/types.h:27,

                 from /opt/apache2/include/apr.h:116,

                 from /opt/apache2/include/ap_config.h:25,

                 from /opt/apache2/include/httpd.h:43,

                 from /opt/mod_python-3.3.1/src/include/mod_python.h:42,

                 from finfoobject.c:25:

/usr/include/features.h:150:1: warning: this is the location of the
previous definition

finfoobject.c:278: warning: `intargfunc' is deprecated (declared at
/usr/local/include/python2.5/object.h:133)

finfoobject.c:278: warning: initialization from incompatible pointer
type

/opt/apache2/build/libtool --silent --mode=link gcc -o mod_python.la
-rpath /opt/apache2/modules -module -avoid-version    finfoobject.lo
hlistobject.lo hlist.lo filterobject.lo connobject.lo serverobject.lo
util.lo tableobject.lo requestobject.lo _apachemodule.lo mod_python.lo
-L/usr/local/lib/python2.5/config -Xlinker -export-dynamic -lm
-lpython2.5 -lpthread -ldl -lutil -lm

/usr/bin/ld: /usr/local/lib/python2.5/config/libpython2.5.a(abstract.o):
relocation R_X86_64_32 against `a local symbol' can not be used when
making a shared object; recompile with -fPIC

/usr/local/lib/python2.5/config/libpython2.5.a: could not read symbols:
Bad value

collect2: ld returned 1 exit status

apxs:Error: Command failed with rc=65536

.

make[1]: *** [mod_python.so] Error 1

make[1]: Leaving directory `/opt/mod_python-3.3.1/src'

make: *** [do_dso] Error 2

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080610/96e05bbe/attachment.html
From liyangmin at gmail.com  Tue Jun 10 20:13:01 2008
From: liyangmin at gmail.com (darren lee)
Date: Tue Jun 10 20:13:16 2008
Subject: [mod_python] Compile errors when created dso
In-Reply-To: <C4CACCE8C0717647997559F20314BE408E0F33@USSYML03.ad.sjm.com>
References: <C4CACCE8C0717647997559F20314BE408E0F33@USSYML03.ad.sjm.com>
Message-ID: <AEF3C752-21DD-4282-B22E-37BDEF5F18AE@gmail.com>

Hi james,
		as far as I know, in the RedHat AS4 64-bit . the default installed  
python version is not Python 2.5.2 .
so you must install the Python 2.5.2 by yourself , am I right?
		I have the experience before . in this situation , you must install  
python in a shared mode  by yourself
which you can cinfigure the python build like this : ./configure -- 
enable-shared


thanks
Yangmin



 2008-6-115:32 Leone, James 

> Hello,
>
> I am having trouble compiling mod_python.  I am compiling on a  
> RedHat AS4 64-bit virtual machine (VMWare over ESX).
>
> I have both Python 2.5.2 and Apache 2.2 built from source and  
> installed.  I configured the build using the command below:
> ./configure --with-apxs=/opt/apache2/bin/apxs --with-python=/usr/ 
> local/bin/python2.5 --libdir=/usr/lib64
>
>  make results in a failure, I  
> have posted the tail lines below.  Do you have any ideas about the  
> cause?
>
> In file included from /usr/local/include/python2.5/Python.h:8,
>                  from /opt/mod_python-3.3.1/src/include/mod_python.h: 
> 80,
>                  from finfoobject.c:25:
> /usr/local/include/python2.5/pyconfig.h:942:1: warning:  
> "_POSIX_C_SOURCE" redefined
> In file included from /usr/include/sys/types.h:27,
>                  from /opt/apache2/include/apr.h:116,
>                  from /opt/apache2/include/ap_config.h:25,
>                  from /opt/apache2/include/httpd.h:43,
>                  from /opt/mod_python-3.3.1/src/include/mod_python.h: 
> 42,
>                  from finfoobject.c:25:
> /usr/include/features.h:150:1: warning: this is the location of the  
> previous definition
> finfoobject.c:278: warning: `intargfunc' is deprecated (declared at / 
> usr/local/include/python2.5/object.h:133)
> finfoobject.c:278: warning: initialization from incompatible pointer  
> type
> /opt/apache2/build/libtool --silent --mode=link gcc -o  
> mod_python.la  -rpath /opt/apache2/modules -module -avoid-version     
> finfoobject.lo hlistobject.lo hlist.lo filterobject.lo connobject.lo  
> serverobject.lo util.lo tableobject.lo requestobject.lo  
> _apachemodule.lo mod_python.lo -L/usr/local/lib/python2.5/config - 
> Xlinker -export-dynamic -lm -lpython2.5 -lpthread -ldl -lutil -lm
> /usr/bin/ld: /usr/local/lib/python2.5/config/ 
> libpython2.5.a(abstract.o): relocation R_X86_64_32 against `a local  
> symbol' can not be used when making a shared object; recompile with - 
> fPIC
> /usr/local/lib/python2.5/config/libpython2.5.a: could not read  
> symbols: Bad value
> collect2: ld returned 1 exit status
> apxs:Error: Command failed with rc=65536
> .
> make[1]: *** [mod_python.so] Error 1
> make[1]: Leaving directory `/opt/mod_python-3.3.1/src'
> make: *** [do_dso] Error 2
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080611/e198655f/attachment-0001.html
From JLeone at sjm.com  Tue Jun 10 20:55:45 2008
From: JLeone at sjm.com (Leone, James)
Date: Tue Jun 10 20:55:52 2008
Subject: [mod_python] Compile errors when created dso
Message-ID: <C4CACCE8C0717647997559F20314BE4024AD3D@USSYML03.ad.sjm.com>

Thank you all for the messages.   I have resolved the problem

--enable-shared was a start
For some reason the python build was not recognizing my value for --libdir

I wanted the .so to go in /usr/lib64 but they kept going in /usr/lib

Eventually I just copied it from one to the other and everything is moving along

Thank you again

----- Original Message -----
From: darren lee <liyangmin@gmail.com>
To: Leone, James
Cc: mod_python@modpython.org <mod_python@modpython.org>
Sent: Tue Jun 10 17:13:01 2008
Subject: Re: [mod_python] Compile errors when created dso

Hi james,
as far as I know, in the RedHat AS4 64-bit . the default installed python version is not Python 2.5.2 .

so you must install the Python 2.5.2 by yourself , am I right?
I have the experience before . in this situation , you must install python in a shared mode  by yourself 
which you can cinfigure the python build like this : ./configure --enable-shared 


thanks 
Yangmin



? 2008-6-11???5:32? Leone, James ???


		Hello,
	 
	I am having trouble compiling mod_python.  I am compiling on a RedHat AS4 64-bit virtual machine (VMWare over ESX).
	 
	I have both Python 2.5.2 and Apache 2.2 built from source and installed.  I configured the build using the command below:
	./configure --with-apxs=/opt/apache2/bin/apxs --with-python=/usr/local/bin/python2.5 --libdir=/usr/lib64
	 
	 ?make? results in a failure, I have posted the tail lines below.  Do you have any ideas about the cause?
	 
	In file included from /usr/local/include/python2.5/Python.h:8,
	                 from /opt/mod_python-3.3.1/src/include/mod_python.h:80,
	                 from finfoobject.c:25:
	/usr/local/include/python2.5/pyconfig.h:942:1: warning: "_POSIX_C_SOURCE" redefined
	In file included from /usr/include/sys/types.h:27,
	                 from /opt/apache2/include/apr.h:116,
	                 from /opt/apache2/include/ap_config.h:25,
	                 from /opt/apache2/include/httpd.h:43,
	                 from /opt/mod_python-3.3.1/src/include/mod_python.h:42,
	                 from finfoobject.c:25:
	/usr/include/features.h:150:1: warning: this is the location of the previous definition
	finfoobject.c:278: warning: `intargfunc' is deprecated (declared at /usr/local/include/python2.5/object.h:133)
	finfoobject.c:278: warning: initialization from incompatible pointer type
	/opt/apache2/build/libtool --silent --mode=link gcc -o mod_python.la  -rpath /opt/apache2/modules -module -avoid-version    finfoobject.lo hlistobject.lo hlist.lo filterobject.lo connobject.lo serverobject.lo util.lo tableobject.lo requestobject.lo _apachemodule.lo mod_python.lo -L/usr/local/lib/python2.5/config -Xlinker -export-dynamic -lm -lpython2.5 -lpthread -ldl -lutil -lm
	/usr/bin/ld: /usr/local/lib/python2.5/config/libpython2.5.a(abstract.o): relocation R_X86_64_32 against `a local symbol' can not be used when making a shared object; recompile with -fPIC
	/usr/local/lib/python2.5/config/libpython2.5.a: could not read symbols: Bad value
	collect2: ld returned 1 exit status
	apxs:Error: Command failed with rc=65536
	.
	make[1]: *** [mod_python.so] Error 1
	make[1]: Leaving directory `/opt/mod_python-3.3.1/src'
	make: *** [do_dso] Error 2
	_______________________________________________
	Mod_python mailing list
	Mod_python@modpython.org
	http://mailman.modpython.org/mailman/listinfo/mod_python
	
	

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080610/24c23476/attachment.html
From dgossage at zacks.com  Wed Jun 11 12:27:31 2008
From: dgossage at zacks.com (David Gossage)
Date: Wed Jun 11 12:29:38 2008
Subject: [mod_python] Compiling mod_python against 64 bit
Message-ID: <1213201651.23710.9.camel@GossageD>

I downloaded mod_python 3.3.1 and am installing it on a CentOS5 64bit
server with python 2.4 and apache 2.2.6.  Apache was built from source,
and python was included, but I installed python-devel via yum which
grabbed the x86 and x86_64 rpms.

mod_python configures and makes/installs fine, but when I add the
LoadModule line and attempt to stop/start apache I get this error.

httpd: Syntax error on line 56 of /usr/local/apache/conf/httpd.conf:
Cannot load /usr/local/apache/modules/mod_python.so into
server: /usr/local/apache/modules/mod_python.so: wrong ELF class:
ELFCLASS32

Do I need to do anything special for installing in a 64bit environment?



From graham.dumpleton at gmail.com  Thu Jun 12 02:36:38 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Thu Jun 12 02:36:47 2008
Subject: [mod_python] Compiling mod_python against 64 bit
In-Reply-To: <1213201651.23710.9.camel@GossageD>
References: <1213201651.23710.9.camel@GossageD>
Message-ID: <88e286470806112336t364f5d5bx9879438e0eaf8da3@mail.gmail.com>

Probably because you have a mix of 32 and 64 bit binary objects. That
or is is similar to 64 bit shared library problems described in
section 'Mixing 32 Bit And 64 Bit Packages' of:

  http://code.google.com/p/modwsgi/wiki/InstallationIssues

albeit with a different message, this time at run time rather than link time.

Graham

2008/6/12 David Gossage <dgossage@zacks.com>:
> I downloaded mod_python 3.3.1 and am installing it on a CentOS5 64bit
> server with python 2.4 and apache 2.2.6.  Apache was built from source,
> and python was included, but I installed python-devel via yum which
> grabbed the x86 and x86_64 rpms.
>
> mod_python configures and makes/installs fine, but when I add the
> LoadModule line and attempt to stop/start apache I get this error.
>
> httpd: Syntax error on line 56 of /usr/local/apache/conf/httpd.conf:
> Cannot load /usr/local/apache/modules/mod_python.so into
> server: /usr/local/apache/modules/mod_python.so: wrong ELF class:
> ELFCLASS32
>
> Do I need to do anything special for installing in a 64bit environment?
>
>
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>
From gustavo-listas at overstep.com.br  Thu Jun 12 10:27:58 2008
From: gustavo-listas at overstep.com.br (Gustavo Henrique Cervi)
Date: Thu Jun 12 10:27:09 2008
Subject: [mod_python] mod_python.publisher  pyc
Message-ID: <4851326E.4080704@overstep.com.br>

Hi, is there a way to execute .pyc files instead .py? or something like 
this to have a little protection against user modifications.
Tnx.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080612/c988ef9f/attachment.html
From seb_k at arcor.de  Thu Jun 12 10:44:35 2008
From: seb_k at arcor.de (SebK)
Date: Thu Jun 12 10:44:53 2008
Subject: [mod_python] mod_python.publisher  pyc
In-Reply-To: <4851326E.4080704@overstep.com.br>
References: <4851326E.4080704@overstep.com.br>
Message-ID: <200806121644.41971.seb_k@arcor.de>

Am Donnerstag, 12. Juni 2008 16:27:58 schrieb Gustavo Henrique Cervi:
> Hi, is there a way to execute .pyc files instead .py? or something like
> this to have a little protection against user modifications.
> Tnx.

On a Unix system i would do chmod go-w and chown root or so.
But why do the users can modify the file? I think this should be made 
impossible.

SebK
-- 
GPG Key: http://rynx.dyndns.org/~sebk/seb_k.asc
Fingerprint: 0CC0 BBB6 2916 95C1 563E 37DF EB14 7728 78A4 77D3
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part.
Url : http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080612/a5a9bdd4/attachment.bin
From dgossage at zacks.com  Thu Jun 12 11:00:50 2008
From: dgossage at zacks.com (David Gossage)
Date: Thu Jun 12 11:03:00 2008
Subject: [mod_python] Compiling mod_python against 64 bit
In-Reply-To: <88e286470806112336t364f5d5bx9879438e0eaf8da3@mail.gmail.com>
References: <1213201651.23710.9.camel@GossageD>
	<88e286470806112336t364f5d5bx9879438e0eaf8da3@mail.gmail.com>
Message-ID: <1213282850.25986.6.camel@GossageD>

The problem was indeed that the yum installs place the libpython2.4.so
in /usr/lib64 where apparently it isn't found.  Symlinking it
to /usr/lib/python2.4/config fixes the issue.  At least it compiles and
loads into apache properly.  Still need to test code.

Thanks for the pointer.





On Thu, 2008-06-12 at 16:36 +1000, Graham Dumpleton wrote:
> Probably because you have a mix of 32 and 64 bit binary objects. That
> or is is similar to 64 bit shared library problems described in
> section 'Mixing 32 Bit And 64 Bit Packages' of:
> 
>   http://code.google.com/p/modwsgi/wiki/InstallationIssues
> 
> albeit with a different message, this time at run time rather than link time.
> 
> Graham
> 
> 2008/6/12 David Gossage <dgossage@zacks.com>:
> > I downloaded mod_python 3.3.1 and am installing it on a CentOS5 64bit
> > server with python 2.4 and apache 2.2.6.  Apache was built from source,
> > and python was included, but I installed python-devel via yum which
> > grabbed the x86 and x86_64 rpms.
> >
> > mod_python configures and makes/installs fine, but when I add the
> > LoadModule line and attempt to stop/start apache I get this error.
> >
> > httpd: Syntax error on line 56 of /usr/local/apache/conf/httpd.conf:
> > Cannot load /usr/local/apache/modules/mod_python.so into
> > server: /usr/local/apache/modules/mod_python.so: wrong ELF class:
> > ELFCLASS32
> >
> > Do I need to do anything special for installing in a 64bit environment?
> >
> >
> >
> > _______________________________________________
> > Mod_python mailing list
> > Mod_python@modpython.org
> > http://mailman.modpython.org/mailman/listinfo/mod_python
> >

From jrl at versaform.com  Thu Jun 12 19:22:54 2008
From: jrl at versaform.com (Joe Landau)
Date: Thu Jun 12 19:21:52 2008
Subject: [mod_python] long argument string is being truncated
Message-ID: <48514D5E.30029.2CDD66B@jrl.versaform.com>

An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080612/e9237185/attachment.html
From graham.dumpleton at gmail.com  Thu Jun 12 22:04:40 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Thu Jun 12 22:04:50 2008
Subject: [mod_python] mod_python.publisher pyc
In-Reply-To: <4851326E.4080704@overstep.com.br>
References: <4851326E.4080704@overstep.com.br>
Message-ID: <88e286470806121904m1259360x7e12a36c09032f68@mail.gmail.com>

Graham

2008/6/13 Gustavo Henrique Cervi <gustavo-listas@overstep.com.br>:
> Hi, is there a way to execute .pyc files instead .py? or something like this
> to have a little protection against user modifications.

The mod_python.publisher extension uses mod_python module importer and
in mod_python 3.3.1 that means that .pyc files are neither generated
nor used for the publisher code files.

In general, using .pyc files as a means of protecting your code from
prying eyes is flawed as there are decompilers readily available for
them.

If you still insist on using such a scheme, make the publisher code
files in document tree very thin wrappers which import normal Python
modules from a directory outside of document tree, where that other
directory containing the modules is listed in PythonPath. By doing
that, standard Python module importer used and .pyc files works as
normal.

Graham
From graham.dumpleton at gmail.com  Thu Jun 12 22:07:47 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Thu Jun 12 22:07:54 2008
Subject: [mod_python] long argument string is being truncated
In-Reply-To: <48514D5E.30029.2CDD66B@jrl.versaform.com>
References: <48514D5E.30029.2CDD66B@jrl.versaform.com>
Message-ID: <88e286470806121907l21015771l748939f33c0b2529@mail.gmail.com>

Use method="POST", not method="GET" in your HTML input form. Arguments
then go as body of post and not in URL.

2008/6/13 Joe Landau <jrl@versaform.com>:
> In my first python/mod_python/apache effort, I've been successful at
> retrieving short arguments using FieldStorage.  However, when I try a longer
> argument, a little over 1000 bytes, It seems to be truncated at 600-some
> bytes.  When I write req.args to my log, I see the truncated string.  But
> the apache log access.log shows the entire string, so it is getting that far
> at least. Can anyone help?
> Joe Landau
> Joe Landau                            jrl@versaform.com
> VersaForm Systems Corp.               (408) 370 2662
> 591 W. Hamilton Ave., # 230           Campbell, CA 95008
> Excellence in Medical Software        http://www.versaform.com
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>
>
From gustavo-listas at overstep.com.br  Thu Jun 12 22:13:29 2008
From: gustavo-listas at overstep.com.br (Gustavo Henrique Cervi)
Date: Thu Jun 12 22:12:37 2008
Subject: [mod_python] mod_python.publisher  pyc
In-Reply-To: <200806121644.41971.seb_k@arcor.de>
References: <4851326E.4080704@overstep.com.br>
	<200806121644.41971.seb_k@arcor.de>
Message-ID: <4851D7C9.9010008@overstep.com.br>

"desktop" application running on windows + apache + mod_python + 
mysqldb, using a browser as presentation layer.



SebK wrote:
> Am Donnerstag, 12. Juni 2008 16:27:58 schrieb Gustavo Henrique Cervi:
>   
>> Hi, is there a way to execute .pyc files instead .py? or something like
>> this to have a little protection against user modifications.
>> Tnx.
>>     
>
> On a Unix system i would do chmod go-w and chown root or so.
> But why do the users can modify the file? I think this should be made 
> impossible.
>
> SebK
>   
> ------------------------------------------------------------------------
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>   

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080612/21b71056/attachment.html
From jrl at versaform.com  Fri Jun 13 13:02:53 2008
From: jrl at versaform.com (Joe Landau)
Date: Fri Jun 13 13:00:59 2008
Subject: [mod_python] long argument string is being truncated
In-Reply-To: <88e286470806121907l21015771l748939f33c0b2529@mail.gmail.com>
References: <48514D5E.30029.2CDD66B@jrl.versaform.com>,
	<88e286470806121907l21015771l748939f33c0b2529@mail.gmail.com>
Message-ID: <485245CD.9702.69769A9@jrl.versaform.com>

Graham, 

Unfortunately I am using a program (in PowerBuilder) to create this data, not a form.  But I 
assume from your reply that there is no way to get the full string from the URL, so I will have 
to generate a POST.

Could you point me toward a mod_python example of processing a POST?   

Thanks, 

Joe Landau

On 13 Jun 2008 at 12:07, Graham Dumpleton wrote:

Date sent:      	Fri, 13 Jun 2008 12:07:47 +1000
From:           	"Graham Dumpleton" <graham.dumpleton@gmail.com>
To:             	"Joe Landau" <jrl@versaform.com>
Subject:        	Re: [mod_python] long argument string is being truncated
Copies to:      	mod_python@modpython.org

> Use method="POST", not method="GET" in your HTML input form. Arguments
> then go as body of post and not in URL.
> 
> 2008/6/13 Joe Landau <jrl@versaform.com>:
> > In my first python/mod_python/apache effort, I've been successful at
> > retrieving short arguments using FieldStorage.  However, when I try a longer
> > argument, a little over 1000 bytes, It seems to be truncated at 600-some
> > bytes.  When I write req.args to my log, I see the truncated string.  But
> > the apache log access.log shows the entire string, so it is getting that far
> > at least. Can anyone help?
> > Joe Landau
> > Joe Landau                            jrl@versaform.com
> > VersaForm Systems Corp.               (408) 370 2662
> > 591 W. Hamilton Ave., # 230           Campbell, CA 95008
> > Excellence in Medical Software        http://www.versaform.com
> > _______________________________________________
> > Mod_python mailing list
> > Mod_python@modpython.org
> > http://mailman.modpython.org/mailman/listinfo/mod_python
> >
> >


Joe Landau                            jrl@versaform.com 
VersaForm Systems Corp.               (408) 370 2662
591 W. Hamilton Ave., # 230           Campbell, CA 95008
Excellence in Medical Software        http://www.versaform.com

From robotinc at gmail.com  Sun Jun 15 21:04:45 2008
From: robotinc at gmail.com (Russell Pearsall)
Date: Sun Jun 15 21:04:51 2008
Subject: [mod_python] install question
Message-ID: <9ad1da250806151804p55a8db9bn1fbec34e1a1b1ba0@mail.gmail.com>

Hello all,

I am new to apache, and i am trying to setup a local server on my mac. OSX
comes with apache and python installed, but i can find out anywhere if i
have the python and apache include files, and if I don't where to find them.

Thank you in advance.

Russell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080615/cfcbefa6/attachment.html
From list at joreybump.com  Sun Jun 15 22:08:35 2008
From: list at joreybump.com (Jorey Bump)
Date: Sun Jun 15 22:08:39 2008
Subject: [mod_python] install question
In-Reply-To: <9ad1da250806151804p55a8db9bn1fbec34e1a1b1ba0@mail.gmail.com>
References: <9ad1da250806151804p55a8db9bn1fbec34e1a1b1ba0@mail.gmail.com>
Message-ID: <4855CB23.50906@joreybump.com>

Russell Pearsall wrote, at 06/15/2008 09:04 PM:

> I am new to apache, and i am trying to setup a local server on my mac. 
> OSX comes with apache and python installed, but i can find out anywhere 
> if i have the python and apache include files, and if I don't where to 
> find them.

On Leopard, you should only need to install Xcode in order to install 
mod_python on a stock system. Then in the mod_python source directory, 
run the following commands:

  ./configure --with-apxs=/usr/sbin/apxs
  make
  sudo make install
  cd test/
  python test.py


From graham.dumpleton at gmail.com  Sun Jun 15 22:35:54 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Sun Jun 15 22:36:06 2008
Subject: [mod_python] install question
In-Reply-To: <4855CB23.50906@joreybump.com>
References: <9ad1da250806151804p55a8db9bn1fbec34e1a1b1ba0@mail.gmail.com>
	<4855CB23.50906@joreybump.com>
Message-ID: <88e286470806151935s269741c9p8a83cb1a143899c4@mail.gmail.com>

If you are using Mac OS X on 64 bit Intel or PowerPC, you will need to
obtain mod_python source code from subversion repository for trouble
free installation.

Don't remember repository details off hand, but sure some one else can
help out there.

Graham

2008/6/16 Jorey Bump <list@joreybump.com>:
> Russell Pearsall wrote, at 06/15/2008 09:04 PM:
>
>> I am new to apache, and i am trying to setup a local server on my mac. OSX
>> comes with apache and python installed, but i can find out anywhere if i
>> have the python and apache include files, and if I don't where to find them.
>
> On Leopard, you should only need to install Xcode in order to install
> mod_python on a stock system. Then in the mod_python source directory, run
> the following commands:
>
>  ./configure --with-apxs=/usr/sbin/apxs
>  make
>  sudo make install
>  cd test/
>  python test.py
>
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>
From list at joreybump.com  Mon Jun 16 07:07:19 2008
From: list at joreybump.com (Jorey Bump)
Date: Mon Jun 16 07:07:22 2008
Subject: [mod_python] install question
In-Reply-To: <88e286470806151935s269741c9p8a83cb1a143899c4@mail.gmail.com>
References: <9ad1da250806151804p55a8db9bn1fbec34e1a1b1ba0@mail.gmail.com>	
	<4855CB23.50906@joreybump.com>
	<88e286470806151935s269741c9p8a83cb1a143899c4@mail.gmail.com>
Message-ID: <48564967.1050507@joreybump.com>

Sorry, for some reason I thought these changes had been released. Here's 
the subversion command to check out the trunk:

  svn co http://svn.apache.org/repos/asf/quetzalcoatl/mod_python/trunk 
mod_python-trunk

Graham Dumpleton wrote, at 06/15/2008 10:35 PM:
> If you are using Mac OS X on 64 bit Intel or PowerPC, you will need to
> obtain mod_python source code from subversion repository for trouble
> free installation.
> 
> Don't remember repository details off hand, but sure some one else can
> help out there.
> 
> Graham
> 
> 2008/6/16 Jorey Bump <list@joreybump.com>:
>> Russell Pearsall wrote, at 06/15/2008 09:04 PM:
>>
>>> I am new to apache, and i am trying to setup a local server on my mac. OSX
>>> comes with apache and python installed, but i can find out anywhere if i
>>> have the python and apache include files, and if I don't where to find them.
>> On Leopard, you should only need to install Xcode in order to install
>> mod_python on a stock system. Then in the mod_python source directory, run
>> the following commands:
>>
>>  ./configure --with-apxs=/usr/sbin/apxs
>>  make
>>  sudo make install
>>  cd test/
>>  python test.py
>>
>>
>> _______________________________________________
>> Mod_python mailing list
>> Mod_python@modpython.org
>> http://mailman.modpython.org/mailman/listinfo/mod_python
>>

From zapster at gmx.at  Mon Jun 16 09:42:28 2008
From: zapster at gmx.at (Josef Eisl)
Date: Mon Jun 16 09:42:28 2008
Subject: [mod_python] problem building mod_python (mod_python.so not created)
Message-ID: <48566DC4.8020807@gmx.at>

Hello!

I am trying to compile mod_python 3.3.1 for Apache 2.2.6. I am using 
Python 2.5.2. By any reason the mod_python.so is not produced.

(Note that Python 2.5 is not the systems default version but that should 
not be an issue.)

I configured the installation with the following commandline:

$ ./configure --with-apxs=/usr/sbin/apxs 
--with-python=/usr/local/bin/python2.5

No warnings, beside the flex version thing...

`make' only throws few warnings like `warning: "_POSIX_C_SOURCE" 
redefined', (no error messages), but mod_python.so is still not created.

`make install_dso' fails:

/usr/bin/install -c -d /usr/local/apache2/2.2.6/modules
/usr/bin/install -c src/mod_python.so /usr/local/apache2/2.2.6/modules
/usr/bin/install: cannot stat `src/mod_python.so': No such file or directory
make[1]: *** [install_dso] Error 1


Any ideas what might be the problem?

Many thanks in advance!

best regards,
Josef


output of `make':

make[1]: Entering directory `/usr/src/mod_python-3.3.1'
make[2]: Entering directory `/usr/src/mod_python-3.3.1/src'

Compiling for DSO.

/usr/sbin/apxs -I/usr/src/mod_python-3.3.1/src/include 
-I/usr/local/apache2/2.2.6/include -I/usr/local/include/python2.5 -c 
mod_python.c _apachemodule.c requestobject.c tableobject.c util.c 
serverobject.c connobject.c filterobject.c hlist.c hlistobject.c 
finfoobject.c -L/usr/local/lib/python2.5/config  -Xlinker 
-export-dynamic      -lm  -lpython2.5 -lpthread -ldl -lutil -lm
/usr/local/apache2/2.2.6/build/libtool --silent --mode=compile gcc 
-prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE 
-g -O2 -pthread -I/usr/local/apache2/2.2.6/include 
-I/usr/local/apache2/2.2.6/include   -I/usr/local/apache2/2.2.6/include 
  -I/usr/src/mod_python-3.3.1/src/include 
-I/usr/local/apache2/2.2.6/include -I/usr/local/include/python2.5  -c -o 
mod_python.lo mod_python.c && touch mod_python.slo
In file included from /usr/local/include/python2.5/Python.h:8,
                  from 
/usr/src/mod_python-3.3.1/src/include/mod_python.h:80,
                  from mod_python.c:28:
/usr/local/include/python2.5/pyconfig.h:942:1: warning: 
"_POSIX_C_SOURCE" redefined
In file included from /usr/include/sys/types.h:27,
                  from /usr/local/apache2/2.2.6/include/apr.h:116,
                  from /usr/local/apache2/2.2.6/include/ap_config.h:25,
                  from /usr/local/apache2/2.2.6/include/httpd.h:43,
                  from 
/usr/src/mod_python-3.3.1/src/include/mod_python.h:42,
                  from mod_python.c:28:
/usr/include/features.h:131:1: warning: this is the location of the 
previous definition
mod_python.c: In function `python_init':
mod_python.c:826: warning: initialization from incompatible pointer type
/usr/local/apache2/2.2.6/build/libtool --silent --mode=compile gcc 
-prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE 
-g -O2 -pthread -I/usr/local/apache2/2.2.6/include 
-I/usr/local/apache2/2.2.6/include   -I/usr/local/apache2/2.2.6/include 
  -I/usr/src/mod_python-3.3.1/src/include 
-I/usr/local/apache2/2.2.6/include -I/usr/local/include/python2.5  -c -o 
_apachemodule.lo _apachemodule.c && touch _apachemodule.slo
In file included from /usr/local/include/python2.5/Python.h:8,
                  from 
/usr/src/mod_python-3.3.1/src/include/mod_python.h:80,
                  from _apachemodule.c:25:
/usr/local/include/python2.5/pyconfig.h:942:1: warning: 
"_POSIX_C_SOURCE" redefined
In file included from /usr/include/sys/types.h:27,
                  from /usr/local/apache2/2.2.6/include/apr.h:116,
                  from /usr/local/apache2/2.2.6/include/ap_config.h:25,
                  from /usr/local/apache2/2.2.6/include/httpd.h:43,
                  from 
/usr/src/mod_python-3.3.1/src/include/mod_python.h:42,
                  from _apachemodule.c:25:
/usr/include/features.h:131:1: warning: this is the location of the 
previous definition
/usr/local/apache2/2.2.6/build/libtool --silent --mode=compile gcc 
-prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE 
-g -O2 -pthread -I/usr/local/apache2/2.2.6/include 
-I/usr/local/apache2/2.2.6/include   -I/usr/local/apache2/2.2.6/include 
  -I/usr/src/mod_python-3.3.1/src/include 
-I/usr/local/apache2/2.2.6/include -I/usr/local/include/python2.5  -c -o 
requestobject.lo requestobject.c && touch requestobject.slo
In file included from /usr/local/include/python2.5/Python.h:8,
                  from 
/usr/src/mod_python-3.3.1/src/include/mod_python.h:80,
                  from requestobject.c:25:
/usr/local/include/python2.5/pyconfig.h:942:1: warning: 
"_POSIX_C_SOURCE" redefined
In file included from /usr/include/sys/types.h:27,
                  from /usr/local/apache2/2.2.6/include/apr.h:116,
                  from /usr/local/apache2/2.2.6/include/ap_config.h:25,
                  from /usr/local/apache2/2.2.6/include/httpd.h:43,
                  from 
/usr/src/mod_python-3.3.1/src/include/mod_python.h:42,
                  from requestobject.c:25:
/usr/include/features.h:131:1: warning: this is the location of the 
previous definition
/usr/local/apache2/2.2.6/build/libtool --silent --mode=compile gcc 
-prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE 
-g -O2 -pthread -I/usr/local/apache2/2.2.6/include 
-I/usr/local/apache2/2.2.6/include   -I/usr/local/apache2/2.2.6/include 
  -I/usr/src/mod_python-3.3.1/src/include 
-I/usr/local/apache2/2.2.6/include -I/usr/local/include/python2.5  -c -o 
tableobject.lo tableobject.c && touch tableobject.slo
In file included from /usr/local/include/python2.5/Python.h:8,
                  from 
/usr/src/mod_python-3.3.1/src/include/mod_python.h:80,
                  from tableobject.c:25:
/usr/local/include/python2.5/pyconfig.h:942:1: warning: 
"_POSIX_C_SOURCE" redefined
In file included from /usr/include/sys/types.h:27,
                  from /usr/local/apache2/2.2.6/include/apr.h:116,
                  from /usr/local/apache2/2.2.6/include/ap_config.h:25,
                  from /usr/local/apache2/2.2.6/include/httpd.h:43,
                  from 
/usr/src/mod_python-3.3.1/src/include/mod_python.h:42,
                  from tableobject.c:25:
/usr/include/features.h:131:1: warning: this is the location of the 
previous definition
tableobject.c:1092: warning: initialization from incompatible pointer type
/usr/local/apache2/2.2.6/build/libtool --silent --mode=compile gcc 
-prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE 
-g -O2 -pthread -I/usr/local/apache2/2.2.6/include 
-I/usr/local/apache2/2.2.6/include   -I/usr/local/apache2/2.2.6/include 
  -I/usr/src/mod_python-3.3.1/src/include 
-I/usr/local/apache2/2.2.6/include -I/usr/local/include/python2.5  -c -o 
util.lo util.c && touch util.slo
In file included from /usr/local/include/python2.5/Python.h:8,
                  from 
/usr/src/mod_python-3.3.1/src/include/mod_python.h:80,
                  from util.c:28:
/usr/local/include/python2.5/pyconfig.h:942:1: warning: 
"_POSIX_C_SOURCE" redefined
In file included from /usr/include/sys/types.h:27,
                  from /usr/local/apache2/2.2.6/include/apr.h:116,
                  from /usr/local/apache2/2.2.6/include/ap_config.h:25,
                  from /usr/local/apache2/2.2.6/include/httpd.h:43,
                  from 
/usr/src/mod_python-3.3.1/src/include/mod_python.h:42,
                  from util.c:28:
/usr/include/features.h:131:1: warning: this is the location of the 
previous definition
/usr/local/apache2/2.2.6/build/libtool --silent --mode=compile gcc 
-prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE 
-g -O2 -pthread -I/usr/local/apache2/2.2.6/include 
-I/usr/local/apache2/2.2.6/include   -I/usr/local/apache2/2.2.6/include 
  -I/usr/src/mod_python-3.3.1/src/include 
-I/usr/local/apache2/2.2.6/include -I/usr/local/include/python2.5  -c -o 
serverobject.lo serverobject.c && touch serverobject.slo
In file included from /usr/local/include/python2.5/Python.h:8,
                  from 
/usr/src/mod_python-3.3.1/src/include/mod_python.h:80,
                  from serverobject.c:25:
/usr/local/include/python2.5/pyconfig.h:942:1: warning: 
"_POSIX_C_SOURCE" redefined
In file included from /usr/include/sys/types.h:27,
                  from /usr/local/apache2/2.2.6/include/apr.h:116,
                  from /usr/local/apache2/2.2.6/include/ap_config.h:25,
                  from /usr/local/apache2/2.2.6/include/httpd.h:43,
                  from 
/usr/src/mod_python-3.3.1/src/include/mod_python.h:42,
                  from serverobject.c:25:
/usr/include/features.h:131:1: warning: this is the location of the 
previous definition
serverobject.c:387: warning: initialization from incompatible pointer type
/usr/local/apache2/2.2.6/build/libtool --silent --mode=compile gcc 
-prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE 
-g -O2 -pthread -I/usr/local/apache2/2.2.6/include 
-I/usr/local/apache2/2.2.6/include   -I/usr/local/apache2/2.2.6/include 
  -I/usr/src/mod_python-3.3.1/src/include 
-I/usr/local/apache2/2.2.6/include -I/usr/local/include/python2.5  -c -o 
connobject.lo connobject.c && touch connobject.slo
In file included from /usr/local/include/python2.5/Python.h:8,
                  from 
/usr/src/mod_python-3.3.1/src/include/mod_python.h:80,
                  from connobject.c:30:
/usr/local/include/python2.5/pyconfig.h:942:1: warning: 
"_POSIX_C_SOURCE" redefined
In file included from /usr/include/sys/types.h:27,
                  from /usr/local/apache2/2.2.6/include/apr.h:116,
                  from /usr/local/apache2/2.2.6/include/ap_config.h:25,
                  from /usr/local/apache2/2.2.6/include/httpd.h:43,
                  from 
/usr/src/mod_python-3.3.1/src/include/mod_python.h:42,
                  from connobject.c:30:
/usr/include/features.h:131:1: warning: this is the location of the 
previous definition
/usr/local/apache2/2.2.6/build/libtool --silent --mode=compile gcc 
-prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE 
-g -O2 -pthread -I/usr/local/apache2/2.2.6/include 
-I/usr/local/apache2/2.2.6/include   -I/usr/local/apache2/2.2.6/include 
  -I/usr/src/mod_python-3.3.1/src/include 
-I/usr/local/apache2/2.2.6/include -I/usr/local/include/python2.5  -c -o 
filterobject.lo filterobject.c && touch filterobject.slo
In file included from /usr/local/include/python2.5/Python.h:8,
                  from 
/usr/src/mod_python-3.3.1/src/include/mod_python.h:80,
                  from filterobject.c:28:
/usr/local/include/python2.5/pyconfig.h:942:1: warning: 
"_POSIX_C_SOURCE" redefined
In file included from /usr/include/sys/types.h:27,
                  from /usr/local/apache2/2.2.6/include/apr.h:116,
                  from /usr/local/apache2/2.2.6/include/ap_config.h:25,
                  from /usr/local/apache2/2.2.6/include/httpd.h:43,
                  from 
/usr/src/mod_python-3.3.1/src/include/mod_python.h:42,
                  from filterobject.c:28:
/usr/include/features.h:131:1: warning: this is the location of the 
previous definition
/usr/local/apache2/2.2.6/build/libtool --silent --mode=compile gcc 
-prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE 
-g -O2 -pthread -I/usr/local/apache2/2.2.6/include 
-I/usr/local/apache2/2.2.6/include   -I/usr/local/apache2/2.2.6/include 
  -I/usr/src/mod_python-3.3.1/src/include 
-I/usr/local/apache2/2.2.6/include -I/usr/local/include/python2.5  -c -o 
hlist.lo hlist.c && touch hlist.slo
In file included from /usr/local/include/python2.5/Python.h:8,
                  from 
/usr/src/mod_python-3.3.1/src/include/mod_python.h:80,
                  from hlist.c:28:
/usr/local/include/python2.5/pyconfig.h:942:1: warning: 
"_POSIX_C_SOURCE" redefined
In file included from /usr/include/sys/types.h:27,
                  from /usr/local/apache2/2.2.6/include/apr.h:116,
                  from /usr/local/apache2/2.2.6/include/ap_config.h:25,
                  from /usr/local/apache2/2.2.6/include/httpd.h:43,
                  from 
/usr/src/mod_python-3.3.1/src/include/mod_python.h:42,
                  from hlist.c:28:
/usr/include/features.h:131:1: warning: this is the location of the 
previous definition
/usr/local/apache2/2.2.6/build/libtool --silent --mode=compile gcc 
-prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE 
-g -O2 -pthread -I/usr/local/apache2/2.2.6/include 
-I/usr/local/apache2/2.2.6/include   -I/usr/local/apache2/2.2.6/include 
  -I/usr/src/mod_python-3.3.1/src/include 
-I/usr/local/apache2/2.2.6/include -I/usr/local/include/python2.5  -c -o 
hlistobject.lo hlistobject.c && touch hlistobject.slo
In file included from /usr/local/include/python2.5/Python.h:8,
                  from 
/usr/src/mod_python-3.3.1/src/include/mod_python.h:80,
                  from hlistobject.c:28:
/usr/local/include/python2.5/pyconfig.h:942:1: warning: 
"_POSIX_C_SOURCE" redefined
In file included from /usr/include/sys/types.h:27,
                  from /usr/local/apache2/2.2.6/include/apr.h:116,
                  from /usr/local/apache2/2.2.6/include/ap_config.h:25,
                  from /usr/local/apache2/2.2.6/include/httpd.h:43,
                  from 
/usr/src/mod_python-3.3.1/src/include/mod_python.h:42,
                  from hlistobject.c:28:
/usr/include/features.h:131:1: warning: this is the location of the 
previous definition
/usr/local/apache2/2.2.6/build/libtool --silent --mode=compile gcc 
-prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE 
-g -O2 -pthread -I/usr/local/apache2/2.2.6/include 
-I/usr/local/apache2/2.2.6/include   -I/usr/local/apache2/2.2.6/include 
  -I/usr/src/mod_python-3.3.1/src/include 
-I/usr/local/apache2/2.2.6/include -I/usr/local/include/python2.5  -c -o 
finfoobject.lo finfoobject.c && touch finfoobject.slo
In file included from /usr/local/include/python2.5/Python.h:8,
                  from 
/usr/src/mod_python-3.3.1/src/include/mod_python.h:80,
                  from finfoobject.c:25:
/usr/local/include/python2.5/pyconfig.h:942:1: warning: 
"_POSIX_C_SOURCE" redefined
In file included from /usr/include/sys/types.h:27,
                  from /usr/local/apache2/2.2.6/include/apr.h:116,
                  from /usr/local/apache2/2.2.6/include/ap_config.h:25,
                  from /usr/local/apache2/2.2.6/include/httpd.h:43,
                  from 
/usr/src/mod_python-3.3.1/src/include/mod_python.h:42,
                  from finfoobject.c:25:
/usr/include/features.h:131:1: warning: this is the location of the 
previous definition
finfoobject.c:278: warning: `intargfunc' is deprecated (declared at 
/usr/local/include/python2.5/object.h:133)
/usr/local/apache2/2.2.6/build/libtool --silent --mode=link gcc -o 
mod_python.la  -rpath /usr/local/apache2/2.2.6/modules -module 
-avoid-version    finfoobject.lo hlistobject.lo hlist.lo filterobject.lo 
connobject.lo serverobject.lo util.lo tableobject.lo requestobject.lo 
_apachemodule.lo mod_python.lo -L/usr/local/lib/python2.5/config 
-Xlinker -export-dynamic -lm -lpython2.5 -lpthread -ldl -lutil -lm
make[2]: Leaving directory `/usr/src/mod_python-3.3.1/src'
make[2]: Entering directory `/usr/src/mod_python-3.3.1/dist'
ln -s ../lib/python/mod_python mod_python
make[3]: Entering directory `/usr/src/mod_python-3.3.1/src'
make[3]: `psp_parser.c' is up to date.
make[3]: Leaving directory `/usr/src/mod_python-3.3.1/src'
/usr/local/bin/python2.5 setup.py build
running build
running build_py
creating build
creating build/lib.linux-i686-2.5
creating build/lib.linux-i686-2.5/mod_python
copying /usr/src/mod_python-3.3.1/lib/python/mod_python/testhandler.py 
-> build/lib.linux-i686-2.5/mod_python
copying /usr/src/mod_python-3.3.1/lib/python/mod_python/Cookie.py -> 
build/lib.linux-i686-2.5/mod_python
copying /usr/src/mod_python-3.3.1/lib/python/mod_python/publisher.py -> 
build/lib.linux-i686-2.5/mod_python
copying /usr/src/mod_python-3.3.1/lib/python/mod_python/__init__.py -> 
build/lib.linux-i686-2.5/mod_python
copying /usr/src/mod_python-3.3.1/lib/python/mod_python/util.py -> 
build/lib.linux-i686-2.5/mod_python
copying /usr/src/mod_python-3.3.1/lib/python/mod_python/cgihandler.py -> 
build/lib.linux-i686-2.5/mod_python
copying /usr/src/mod_python-3.3.1/lib/python/mod_python/apache.py -> 
build/lib.linux-i686-2.5/mod_python
copying /usr/src/mod_python-3.3.1/lib/python/mod_python/importer.py -> 
build/lib.linux-i686-2.5/mod_python
copying /usr/src/mod_python-3.3.1/lib/python/mod_python/psp.py -> 
build/lib.linux-i686-2.5/mod_python
copying /usr/src/mod_python-3.3.1/lib/python/mod_python/Session.py -> 
build/lib.linux-i686-2.5/mod_python
copying /usr/src/mod_python-3.3.1/lib/python/mod_python/cache.py -> 
build/lib.linux-i686-2.5/mod_python
copying /usr/src/mod_python-3.3.1/lib/python/mod_python/python22.py -> 
build/lib.linux-i686-2.5/mod_python
running build_ext
building 'mod_python._psp' extension
creating build/temp.linux-i686-2.5
creating build/temp.linux-i686-2.5/usr
creating build/temp.linux-i686-2.5/usr/src
creating build/temp.linux-i686-2.5/usr/src/SSL_LAMP
creating build/temp.linux-i686-2.5/usr/src/mod_python-3.3.1
creating build/temp.linux-i686-2.5/usr/src/mod_python-3.3.1/src
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -O3 -Wall 
-Wstrict-prototypes -fPIC -I/usr/src/mod_python-3.3.1/src/include 
-I/usr/local/include/python2.5 -c 
/usr/src/mod_python-3.3.1/src/psp_string.c -o 
build/temp.linux-i686-2.5/usr/src/mod_python-3.3.1/src/psp_string.o
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -O3 -Wall 
-Wstrict-prototypes -fPIC -I/usr/src/mod_python-3.3.1/src/include 
-I/usr/local/include/python2.5 -c 
/usr/src/mod_python-3.3.1/src/psp_parser.c -o 
build/temp.linux-i686-2.5/usr/src/mod_python-3.3.1/src/psp_parser.o
In file included from /usr/local/include/python2.5/Python.h:8,
                  from 
/usr/src/mod_python-3.3.1/src/include/psp_parser.h:23,
                  from psp_parser.l:29:
/usr/local/include/python2.5/pyconfig.h:942:1: warning: 
"_POSIX_C_SOURCE" redefined
In file included from /usr/include/stdio.h:28,
                  from psp_parser.c:20:
/usr/include/features.h:171:1: warning: this is the location of the 
previous definition
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -O3 -Wall 
-Wstrict-prototypes -fPIC -I/usr/src/mod_python-3.3.1/src/include 
-I/usr/local/include/python2.5 -c 
/usr/src/mod_python-3.3.1/src/_pspmodule.c -o 
build/temp.linux-i686-2.5/usr/src/mod_python-3.3.1/src/_pspmodule.o
In file included from /usr/local/include/python2.5/Python.h:8,
                  from 
/usr/src/mod_python-3.3.1/src/include/psp_parser.h:23,
                  from /usr/src/mod_python-3.3.1/src/_pspmodule.c:26:
/usr/local/include/python2.5/pyconfig.h:942:1: warning: 
"_POSIX_C_SOURCE" redefined
In file included from /usr/include/stdio.h:28,
                  from include/psp_flex.h:24,
                  from /usr/src/mod_python-3.3.1/src/_pspmodule.c:25:
/usr/include/features.h:171:1: warning: this is the location of the 
previous definition
gcc -pthread -shared 
build/temp.linux-i686-2.5/usr/src/mod_python-3.3.1/src/psp_string.o 
build/temp.linux-i686-2.5/usr/src/mod_python-3.3.1/src/psp_parser.o 
build/temp.linux-i686-2.5/usr/src/mod_python-3.3.1/src/_pspmodule.o -o 
build/lib.linux-i686-2.5/mod_python/_psp.so
make[2]: Leaving directory `/usr/src/mod_python-3.3.1/dist'

Now su and make install
   (or, if you only want to perform a partial install,
    you can use make install_dso and make install_py_lib)


From list at joreybump.com  Mon Jun 16 18:23:34 2008
From: list at joreybump.com (Jorey Bump)
Date: Mon Jun 16 18:23:38 2008
Subject: [mod_python] install question
In-Reply-To: <9ad1da250806161130q5563686dk4128847204f50a5e@mail.gmail.com>
References: <9ad1da250806151804p55a8db9bn1fbec34e1a1b1ba0@mail.gmail.com>	
	<4855CB23.50906@joreybump.com>	
	<88e286470806151935s269741c9p8a83cb1a143899c4@mail.gmail.com>	
	<48564967.1050507@joreybump.com>
	<9ad1da250806161130q5563686dk4128847204f50a5e@mail.gmail.com>
Message-ID: <4856E7E6.9010201@joreybump.com>

Please keep responses on the list, for better quality control. :)

Russell Pearsall wrote, at 06/16/2008 02:30 PM:
> Jorey, thanks for the svn path. The new so installed without a hickup. I 
> read further in the tutorial and i have one further question.
> 
> I can get .psp pages to work by adding these lines to my httpd.conf
> 
>      AddHandler mod_python .psp
>      PythonHandler mod_python.psp
>     
> and alternatively i can get cgi's to work with these lines
>      AddHandler mod_python .py
>      PythonHandler mod_python.publisher

FFR, this isn't CGI.

> but if i have them both on they stop working. how do i get both .psp 
> pages and .py cgi's, or is that stupid, and i should just pick one or 
> the other?

You can assign different handlers to different extensions like this:

   AddHandler mod_python .py .psp
   PythonHandler mod_python.publisher | .py
   PythonHandler mod_python.psp | .psp

You can also configure this on a per Directory or Location basis, which, 
when combined with SetHandler instead of AddHandler, allows you to strip 
the extensions from your URL (probably more useful for Publisher than PSP).


From jrl at versaform.com  Tue Jun 17 14:40:47 2008
From: jrl at versaform.com (Joe Landau)
Date: Tue Jun 17 14:40:54 2008
Subject: [mod_python] long argument string is being truncated
In-Reply-To: <a595de7a0806131102k4930f40bq3e0b633d5a81403b@mail.gmail.com>
References: <48514D5E.30029.2CDD66B@jrl.versaform.com>,
	<485245CD.9702.69769A9@jrl.versaform.com>,
	<a595de7a0806131102k4930f40bq3e0b633d5a81403b@mail.gmail.com>
Message-ID: <4857A2BF.15726.1B8C03EB@jrl.versaform.com>

Clodaldo,

Thanks.  That was indeed the problem.

Joe

On 13 Jun 2008 at 15:02, Clodoaldo wrote:

Date sent:      	Fri, 13 Jun 2008 15:02:24 -0300
From:           	Clodoaldo <clodoaldo.pinto@gmail.com>
To:             	"Joe Landau" <jrl@versaform.com>
Subject:        	Re: [mod_python] long argument string is being 
truncated
Copies to:      	"Graham Dumpleton" 
<graham.dumpleton@gmail.com>, mod_python@modpython.org

> 2008/6/13 Joe Landau <jrl@versaform.com>:
> > Graham,
> >
> > Unfortunately I am using a program (in PowerBuilder) to create this data, not a form.  But I
> > assume from your reply that there is no way to get the full string from the URL, so I will have
> > to generate a POST.
> >
> > Could you point me toward a mod_python example of processing a POST?
> 
> While Graham does not come with a better answer you could try to
> process it in the exact same way you process a GET. Although a
> parameter that long is better sent in a POST you could also try to
> urlencode the parameter in order to get rid of anything that could be
> interpreted as not data such as the semicolon which has a special
> meaning for mod_python and must be changed from ";" to "%3b"
> 
> Regards, Clodoaldo Pinto Neto
> >
> > Thanks,
> >
> > Joe Landau
> >
> > On 13 Jun 2008 at 12:07, Graham Dumpleton wrote:
> >
> > Date sent:              Fri, 13 Jun 2008 12:07:47 +1000
> > From:                   "Graham Dumpleton" <graham.dumpleton@gmail.com>
> > To:                     "Joe Landau" <jrl@versaform.com>
> > Subject:                Re: [mod_python] long argument string is being truncated
> > Copies to:              mod_python@modpython.org
> >
> >> Use method="POST", not method="GET" in your HTML input form. Arguments
> >> then go as body of post and not in URL.
> >>
> >> 2008/6/13 Joe Landau <jrl@versaform.com>:
> >> > In my first python/mod_python/apache effort, I've been successful at
> >> > retrieving short arguments using FieldStorage.  However, when I try a longer
> >> > argument, a little over 1000 bytes, It seems to be truncated at 600-some
> >> > bytes.  When I write req.args to my log, I see the truncated string.  But
> >> > the apache log access.log shows the entire string, so it is getting that far
> >> > at least. Can anyone help?
> >> > Joe Landau
> >> > Joe Landau                            jrl@versaform.com
> >> > VersaForm Systems Corp.               (408) 370 2662
> >> > 591 W. Hamilton Ave., # 230           Campbell, CA 95008
> >> > Excellence in Medical Software        http://www.versaform.com
> >> > _______________________________________________
> >> > Mod_python mailing list
> >> > Mod_python@modpython.org
> >> > http://mailman.modpython.org/mailman/listinfo/mod_python
> >> >
> >> >
> >
> >
> > Joe Landau                            jrl@versaform.com
> > VersaForm Systems Corp.               (408) 370 2662
> > 591 W. Hamilton Ave., # 230           Campbell, CA 95008
> > Excellence in Medical Software        http://www.versaform.com
> >
> > _______________________________________________
> > Mod_python mailing list
> > Mod_python@modpython.org
> > http://mailman.modpython.org/mailman/listinfo/mod_python
> >


Joe Landau                            jrl@versaform.com 
VersaForm Systems Corp.               (408) 370 2662
591 W. Hamilton Ave., # 230           Campbell, CA 95008
Excellence in Medical Software        http://www.versaform.com

From andre.huebner at gmx.de  Thu Jun 19 03:49:40 2008
From: andre.huebner at gmx.de (=?iso-8859-1?Q?Andre_H=FCbner?=)
Date: Thu Jun 19 03:49:47 2008
Subject: [mod_python] 404 error on existing file
Message-ID: <5D161D82765D41929F79512DEF319DD0@nmm.local>

Hi List,

it is my first posting to mod_python mailinglist.
I successfully solved problem with " make_obcallback: could not import 
mod_python.apache" using faq but now i need your help.
.so File was ok, but i forgot to put *py Files to site-packages/mod_python 
;)

mod_python seems to run now. 
http://www.modpython.org/FAQ/faqw.py?req=show&file=faq02.006.htp  shows what 
i try.
I activated in httpd.conf:

<Location "/py/">
    AddHandler mod_python .py
    PythonHandler mod_python.publisher
    PythonDebug On
</Location>

My File in $document-root/py/test.py:

from mod_python import apache

def handler(req):
    req.content_type = "text/plain"
    req.send_http_header()
    req.write("Hello World! Blarg!")
    return apache.OK

If I call this file i got apache-error 404, but called file is existing.  in 
Apache errorlog i see:

[Thu Jun 19 09:40:31 2008] [notice] mod_python (pid=18650, 
interpreter=example.com'): Importing module '/path/path/py/test.py'

If i change code of test.py to make syntaxerror without changing 
apache-setup i see in errorlog and browser the message about syntaxerror.
I cannot explain this 404 when using correct code. I just want to see "hello 
world" in browser.

I use apache 2.2.9 and mod_python 3.3.1
What could be the problem? I hope there is somebody with experience in this 
case.

Thank you
Andre

From graham.dumpleton at gmail.com  Thu Jun 19 04:43:30 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Thu Jun 19 04:43:37 2008
Subject: [mod_python] 404 error on existing file
In-Reply-To: <5D161D82765D41929F79512DEF319DD0@nmm.local>
References: <5D161D82765D41929F79512DEF319DD0@nmm.local>
Message-ID: <88e286470806190143t7b61a4ccp5c87c89095fe8aa5@mail.gmail.com>

Read documentation again.

You are trying to use a standard mod_python handler code with higher
level publisher handler mechanism. You can't do that they are two
distinct things and have different ways of doing things.

Also use Google to search for 'mod_python tutorial' and read the
tutorial you find.

Graham

2008/6/19 Andre H?bner <andre.huebner@gmx.de>:
> Hi List,
>
> it is my first posting to mod_python mailinglist.
> I successfully solved problem with " make_obcallback: could not import
> mod_python.apache" using faq but now i need your help.
> .so File was ok, but i forgot to put *py Files to site-packages/mod_python
> ;)
>
> mod_python seems to run now.
> http://www.modpython.org/FAQ/faqw.py?req=show&file=faq02.006.htp  shows what
> i try.
> I activated in httpd.conf:
>
> <Location "/py/">
>   AddHandler mod_python .py
>   PythonHandler mod_python.publisher
>   PythonDebug On
> </Location>
>
> My File in $document-root/py/test.py:
>
> from mod_python import apache
>
> def handler(req):
>   req.content_type = "text/plain"
>   req.send_http_header()
>   req.write("Hello World! Blarg!")
>   return apache.OK
>
> If I call this file i got apache-error 404, but called file is existing.  in
> Apache errorlog i see:
>
> [Thu Jun 19 09:40:31 2008] [notice] mod_python (pid=18650,
> interpreter=example.com'): Importing module '/path/path/py/test.py'
>
> If i change code of test.py to make syntaxerror without changing
> apache-setup i see in errorlog and browser the message about syntaxerror.
> I cannot explain this 404 when using correct code. I just want to see "hello
> world" in browser.
>
> I use apache 2.2.9 and mod_python 3.3.1
> What could be the problem? I hope there is somebody with experience in this
> case.
>
> Thank you
> Andre
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>

From graham.dumpleton at gmail.com  Thu Jun 19 06:23:32 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Thu Jun 19 06:23:39 2008
Subject: [mod_python] 404 error on existing file
In-Reply-To: <F5633D61D0D14322907643235EB61F16@nmm.local>
References: <5D161D82765D41929F79512DEF319DD0@nmm.local>
	<88e286470806190143t7b61a4ccp5c87c89095fe8aa5@mail.gmail.com>
	<F5633D61D0D14322907643235EB61F16@nmm.local>
Message-ID: <88e286470806190323r1820041bg20fd707804693fd6@mail.gmail.com>

2008/6/19 Andre H?bner <andre.huebner@gmx.de>:
> Hello,
>
> thanks. It is working now. I had to install some more python-packages from
> my distribution, they do a kind of micro-packaging... ;)
>
> changed Code:
>
> def index():
>  s = """\
> <html>
> <body>
> <h2>Hello World!</h2>
> </body>
> </html>
> """
>  return s
>
> is working without changing setup.  Just one step in correct direction.  But
> one problem still occurs
>
> http://www.modpython.org/FAQ/faqw.py?req=show&file=faq02.006.htp
> If i use PythonHandler helloworld i got error ImportError: No module named
> helloworld
> Is helloworld a module which has to be installed? I did not found anything
> in sources or unrpmed packages, i use Suse 10.1
> Do you are able to explain?  Sorry, im new to this issue and trying to
> lern...

Please don't reply to me in person, use 'reply-all' and reply to the
mailing list.

As I said before, read the documentation. Specifically the documentation at:

  http://www.modpython.org/live/current/doc-html/

I don't know why you keep referring to the FAQ rather than main
documentation. If you follow through the documentation slowly, step by
step, it should explain things.

Also, read:

  http://www.dscpl.com.au/wiki/ModPython/Articles/GettingModPythonWorking

It may help you to understand the difference. Ie., rather than use
'mptest' you use 'helloworld' in name of file, you will have same
result, where you are defining your own handler.

Graham

> Thank you
> Andre
>
>
> ----- Original Message ----- From: "Graham Dumpleton"
> <graham.dumpleton@gmail.com>
> To: "Andre H?bner" <andre.huebner@gmx.de>
> Cc: <mod_python@modpython.org>
> Sent: Thursday, June 19, 2008 10:43 AM
> Subject: Re: [mod_python] 404 error on existing file
>
>
> Read documentation again.
>
> You are trying to use a standard mod_python handler code with higher
> level publisher handler mechanism. You can't do that they are two
> distinct things and have different ways of doing things.
>
> Also use Google to search for 'mod_python tutorial' and read the
> tutorial you find.
>
> Graham
>
> 2008/6/19 Andre H?bner <andre.huebner@gmx.de>:
>>
>> Hi List,
>>
>> it is my first posting to mod_python mailinglist.
>> I successfully solved problem with " make_obcallback: could not import
>> mod_python.apache" using faq but now i need your help.
>> .so File was ok, but i forgot to put *py Files to site-packages/mod_python
>> ;)
>>
>> mod_python seems to run now.
>> http://www.modpython.org/FAQ/faqw.py?req=show&file=faq02.006.htp  shows
>> what
>> i try.
>> I activated in httpd.conf:
>>
>> <Location "/py/">
>>  AddHandler mod_python .py
>>  PythonHandler mod_python.publisher
>>  PythonDebug On
>> </Location>
>>
>> My File in $document-root/py/test.py:
>>
>> from mod_python import apache
>>
>> def handler(req):
>>  req.content_type = "text/plain"
>>  req.send_http_header()
>>  req.write("Hello World! Blarg!")
>>  return apache.OK
>>
>> If I call this file i got apache-error 404, but called file is existing.
>> in
>> Apache errorlog i see:
>>
>> [Thu Jun 19 09:40:31 2008] [notice] mod_python (pid=18650,
>> interpreter=example.com'): Importing module '/path/path/py/test.py'
>>
>> If i change code of test.py to make syntaxerror without changing
>> apache-setup i see in errorlog and browser the message about syntaxerror.
>> I cannot explain this 404 when using correct code. I just want to see
>> "hello
>> world" in browser.
>>
>> I use apache 2.2.9 and mod_python 3.3.1
>> What could be the problem? I hope there is somebody with experience in
>> this
>> case.
>>
>> Thank you
>> Andre
>>
>> _______________________________________________
>> Mod_python mailing list
>> Mod_python@modpython.org
>> http://mailman.modpython.org/mailman/listinfo/mod_python
>>
>
>

From graham.dumpleton at gmail.com  Thu Jun 19 21:35:17 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Thu Jun 19 21:35:26 2008
Subject: [mod_python] problem building mod_python (mod_python.so not
	created)
In-Reply-To: <48566DC4.8020807@gmx.at>
References: <48566DC4.8020807@gmx.at>
Message-ID: <88e286470806191835p593fa7edl9732ddddad2b1d8e@mail.gmail.com>

See:

  http://www.modpython.org/FAQ/faqw.py?req=show&file=faq04.001.htp

That may help.

Graham

2008/6/16 Josef Eisl <zapster@gmx.at>:
> Hello!
>
> I am trying to compile mod_python 3.3.1 for Apache 2.2.6. I am using Python
> 2.5.2. By any reason the mod_python.so is not produced.
>
> (Note that Python 2.5 is not the systems default version but that should not
> be an issue.)
>
> I configured the installation with the following commandline:
>
> $ ./configure --with-apxs=/usr/sbin/apxs
> --with-python=/usr/local/bin/python2.5
>
> No warnings, beside the flex version thing...
>
> `make' only throws few warnings like `warning: "_POSIX_C_SOURCE" redefined',
> (no error messages), but mod_python.so is still not created.
>
> `make install_dso' fails:
>
> /usr/bin/install -c -d /usr/local/apache2/2.2.6/modules
> /usr/bin/install -c src/mod_python.so /usr/local/apache2/2.2.6/modules
> /usr/bin/install: cannot stat `src/mod_python.so': No such file or directory
> make[1]: *** [install_dso] Error 1
>
>
> Any ideas what might be the problem?
>
> Many thanks in advance!
>
> best regards,
> Josef
>
>
> output of `make':
>
> make[1]: Entering directory `/usr/src/mod_python-3.3.1'
> make[2]: Entering directory `/usr/src/mod_python-3.3.1/src'
>
> Compiling for DSO.
>
> /usr/sbin/apxs -I/usr/src/mod_python-3.3.1/src/include
> -I/usr/local/apache2/2.2.6/include -I/usr/local/include/python2.5 -c
> mod_python.c _apachemodule.c requestobject.c tableobject.c util.c
> serverobject.c connobject.c filterobject.c hlist.c hlistobject.c
> finfoobject.c -L/usr/local/lib/python2.5/config  -Xlinker -export-dynamic
>    -lm  -lpython2.5 -lpthread -ldl -lutil -lm
> /usr/local/apache2/2.2.6/build/libtool --silent --mode=compile gcc
> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -g
> -O2 -pthread -I/usr/local/apache2/2.2.6/include
> -I/usr/local/apache2/2.2.6/include   -I/usr/local/apache2/2.2.6/include
>  -I/usr/src/mod_python-3.3.1/src/include -I/usr/local/apache2/2.2.6/include
> -I/usr/local/include/python2.5  -c -o mod_python.lo mod_python.c && touch
> mod_python.slo
> In file included from /usr/local/include/python2.5/Python.h:8,
>                 from /usr/src/mod_python-3.3.1/src/include/mod_python.h:80,
>                 from mod_python.c:28:
> /usr/local/include/python2.5/pyconfig.h:942:1: warning: "_POSIX_C_SOURCE"
> redefined
> In file included from /usr/include/sys/types.h:27,
>                 from /usr/local/apache2/2.2.6/include/apr.h:116,
>                 from /usr/local/apache2/2.2.6/include/ap_config.h:25,
>                 from /usr/local/apache2/2.2.6/include/httpd.h:43,
>                 from /usr/src/mod_python-3.3.1/src/include/mod_python.h:42,
>                 from mod_python.c:28:
> /usr/include/features.h:131:1: warning: this is the location of the previous
> definition
> mod_python.c: In function `python_init':
> mod_python.c:826: warning: initialization from incompatible pointer type
> /usr/local/apache2/2.2.6/build/libtool --silent --mode=compile gcc
> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -g
> -O2 -pthread -I/usr/local/apache2/2.2.6/include
> -I/usr/local/apache2/2.2.6/include   -I/usr/local/apache2/2.2.6/include
>  -I/usr/src/mod_python-3.3.1/src/include -I/usr/local/apache2/2.2.6/include
> -I/usr/local/include/python2.5  -c -o _apachemodule.lo _apachemodule.c &&
> touch _apachemodule.slo
> In file included from /usr/local/include/python2.5/Python.h:8,
>                 from /usr/src/mod_python-3.3.1/src/include/mod_python.h:80,
>                 from _apachemodule.c:25:
> /usr/local/include/python2.5/pyconfig.h:942:1: warning: "_POSIX_C_SOURCE"
> redefined
> In file included from /usr/include/sys/types.h:27,
>                 from /usr/local/apache2/2.2.6/include/apr.h:116,
>                 from /usr/local/apache2/2.2.6/include/ap_config.h:25,
>                 from /usr/local/apache2/2.2.6/include/httpd.h:43,
>                 from /usr/src/mod_python-3.3.1/src/include/mod_python.h:42,
>                 from _apachemodule.c:25:
> /usr/include/features.h:131:1: warning: this is the location of the previous
> definition
> /usr/local/apache2/2.2.6/build/libtool --silent --mode=compile gcc
> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -g
> -O2 -pthread -I/usr/local/apache2/2.2.6/include
> -I/usr/local/apache2/2.2.6/include   -I/usr/local/apache2/2.2.6/include
>  -I/usr/src/mod_python-3.3.1/src/include -I/usr/local/apache2/2.2.6/include
> -I/usr/local/include/python2.5  -c -o requestobject.lo requestobject.c &&
> touch requestobject.slo
> In file included from /usr/local/include/python2.5/Python.h:8,
>                 from /usr/src/mod_python-3.3.1/src/include/mod_python.h:80,
>                 from requestobject.c:25:
> /usr/local/include/python2.5/pyconfig.h:942:1: warning: "_POSIX_C_SOURCE"
> redefined
> In file included from /usr/include/sys/types.h:27,
>                 from /usr/local/apache2/2.2.6/include/apr.h:116,
>                 from /usr/local/apache2/2.2.6/include/ap_config.h:25,
>                 from /usr/local/apache2/2.2.6/include/httpd.h:43,
>                 from /usr/src/mod_python-3.3.1/src/include/mod_python.h:42,
>                 from requestobject.c:25:
> /usr/include/features.h:131:1: warning: this is the location of the previous
> definition
> /usr/local/apache2/2.2.6/build/libtool --silent --mode=compile gcc
> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -g
> -O2 -pthread -I/usr/local/apache2/2.2.6/include
> -I/usr/local/apache2/2.2.6/include   -I/usr/local/apache2/2.2.6/include
>  -I/usr/src/mod_python-3.3.1/src/include -I/usr/local/apache2/2.2.6/include
> -I/usr/local/include/python2.5  -c -o tableobject.lo tableobject.c && touch
> tableobject.slo
> In file included from /usr/local/include/python2.5/Python.h:8,
>                 from /usr/src/mod_python-3.3.1/src/include/mod_python.h:80,
>                 from tableobject.c:25:
> /usr/local/include/python2.5/pyconfig.h:942:1: warning: "_POSIX_C_SOURCE"
> redefined
> In file included from /usr/include/sys/types.h:27,
>                 from /usr/local/apache2/2.2.6/include/apr.h:116,
>                 from /usr/local/apache2/2.2.6/include/ap_config.h:25,
>                 from /usr/local/apache2/2.2.6/include/httpd.h:43,
>                 from /usr/src/mod_python-3.3.1/src/include/mod_python.h:42,
>                 from tableobject.c:25:
> /usr/include/features.h:131:1: warning: this is the location of the previous
> definition
> tableobject.c:1092: warning: initialization from incompatible pointer type
> /usr/local/apache2/2.2.6/build/libtool --silent --mode=compile gcc
> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -g
> -O2 -pthread -I/usr/local/apache2/2.2.6/include
> -I/usr/local/apache2/2.2.6/include   -I/usr/local/apache2/2.2.6/include
>  -I/usr/src/mod_python-3.3.1/src/include -I/usr/local/apache2/2.2.6/include
> -I/usr/local/include/python2.5  -c -o util.lo util.c && touch util.slo
> In file included from /usr/local/include/python2.5/Python.h:8,
>                 from /usr/src/mod_python-3.3.1/src/include/mod_python.h:80,
>                 from util.c:28:
> /usr/local/include/python2.5/pyconfig.h:942:1: warning: "_POSIX_C_SOURCE"
> redefined
> In file included from /usr/include/sys/types.h:27,
>                 from /usr/local/apache2/2.2.6/include/apr.h:116,
>                 from /usr/local/apache2/2.2.6/include/ap_config.h:25,
>                 from /usr/local/apache2/2.2.6/include/httpd.h:43,
>                 from /usr/src/mod_python-3.3.1/src/include/mod_python.h:42,
>                 from util.c:28:
> /usr/include/features.h:131:1: warning: this is the location of the previous
> definition
> /usr/local/apache2/2.2.6/build/libtool --silent --mode=compile gcc
> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -g
> -O2 -pthread -I/usr/local/apache2/2.2.6/include
> -I/usr/local/apache2/2.2.6/include   -I/usr/local/apache2/2.2.6/include
>  -I/usr/src/mod_python-3.3.1/src/include -I/usr/local/apache2/2.2.6/include
> -I/usr/local/include/python2.5  -c -o serverobject.lo serverobject.c &&
> touch serverobject.slo
> In file included from /usr/local/include/python2.5/Python.h:8,
>                 from /usr/src/mod_python-3.3.1/src/include/mod_python.h:80,
>                 from serverobject.c:25:
> /usr/local/include/python2.5/pyconfig.h:942:1: warning: "_POSIX_C_SOURCE"
> redefined
> In file included from /usr/include/sys/types.h:27,
>                 from /usr/local/apache2/2.2.6/include/apr.h:116,
>                 from /usr/local/apache2/2.2.6/include/ap_config.h:25,
>                 from /usr/local/apache2/2.2.6/include/httpd.h:43,
>                 from /usr/src/mod_python-3.3.1/src/include/mod_python.h:42,
>                 from serverobject.c:25:
> /usr/include/features.h:131:1: warning: this is the location of the previous
> definition
> serverobject.c:387: warning: initialization from incompatible pointer type
> /usr/local/apache2/2.2.6/build/libtool --silent --mode=compile gcc
> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -g
> -O2 -pthread -I/usr/local/apache2/2.2.6/include
> -I/usr/local/apache2/2.2.6/include   -I/usr/local/apache2/2.2.6/include
>  -I/usr/src/mod_python-3.3.1/src/include -I/usr/local/apache2/2.2.6/include
> -I/usr/local/include/python2.5  -c -o connobject.lo connobject.c && touch
> connobject.slo
> In file included from /usr/local/include/python2.5/Python.h:8,
>                 from /usr/src/mod_python-3.3.1/src/include/mod_python.h:80,
>                 from connobject.c:30:
> /usr/local/include/python2.5/pyconfig.h:942:1: warning: "_POSIX_C_SOURCE"
> redefined
> In file included from /usr/include/sys/types.h:27,
>                 from /usr/local/apache2/2.2.6/include/apr.h:116,
>                 from /usr/local/apache2/2.2.6/include/ap_config.h:25,
>                 from /usr/local/apache2/2.2.6/include/httpd.h:43,
>                 from /usr/src/mod_python-3.3.1/src/include/mod_python.h:42,
>                 from connobject.c:30:
> /usr/include/features.h:131:1: warning: this is the location of the previous
> definition
> /usr/local/apache2/2.2.6/build/libtool --silent --mode=compile gcc
> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -g
> -O2 -pthread -I/usr/local/apache2/2.2.6/include
> -I/usr/local/apache2/2.2.6/include   -I/usr/local/apache2/2.2.6/include
>  -I/usr/src/mod_python-3.3.1/src/include -I/usr/local/apache2/2.2.6/include
> -I/usr/local/include/python2.5  -c -o filterobject.lo filterobject.c &&
> touch filterobject.slo
> In file included from /usr/local/include/python2.5/Python.h:8,
>                 from /usr/src/mod_python-3.3.1/src/include/mod_python.h:80,
>                 from filterobject.c:28:
> /usr/local/include/python2.5/pyconfig.h:942:1: warning: "_POSIX_C_SOURCE"
> redefined
> In file included from /usr/include/sys/types.h:27,
>                 from /usr/local/apache2/2.2.6/include/apr.h:116,
>                 from /usr/local/apache2/2.2.6/include/ap_config.h:25,
>                 from /usr/local/apache2/2.2.6/include/httpd.h:43,
>                 from /usr/src/mod_python-3.3.1/src/include/mod_python.h:42,
>                 from filterobject.c:28:
> /usr/include/features.h:131:1: warning: this is the location of the previous
> definition
> /usr/local/apache2/2.2.6/build/libtool --silent --mode=compile gcc
> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -g
> -O2 -pthread -I/usr/local/apache2/2.2.6/include
> -I/usr/local/apache2/2.2.6/include   -I/usr/local/apache2/2.2.6/include
>  -I/usr/src/mod_python-3.3.1/src/include -I/usr/local/apache2/2.2.6/include
> -I/usr/local/include/python2.5  -c -o hlist.lo hlist.c && touch hlist.slo
> In file included from /usr/local/include/python2.5/Python.h:8,
>                 from /usr/src/mod_python-3.3.1/src/include/mod_python.h:80,
>                 from hlist.c:28:
> /usr/local/include/python2.5/pyconfig.h:942:1: warning: "_POSIX_C_SOURCE"
> redefined
> In file included from /usr/include/sys/types.h:27,
>                 from /usr/local/apache2/2.2.6/include/apr.h:116,
>                 from /usr/local/apache2/2.2.6/include/ap_config.h:25,
>                 from /usr/local/apache2/2.2.6/include/httpd.h:43,
>                 from /usr/src/mod_python-3.3.1/src/include/mod_python.h:42,
>                 from hlist.c:28:
> /usr/include/features.h:131:1: warning: this is the location of the previous
> definition
> /usr/local/apache2/2.2.6/build/libtool --silent --mode=compile gcc
> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -g
> -O2 -pthread -I/usr/local/apache2/2.2.6/include
> -I/usr/local/apache2/2.2.6/include   -I/usr/local/apache2/2.2.6/include
>  -I/usr/src/mod_python-3.3.1/src/include -I/usr/local/apache2/2.2.6/include
> -I/usr/local/include/python2.5  -c -o hlistobject.lo hlistobject.c && touch
> hlistobject.slo
> In file included from /usr/local/include/python2.5/Python.h:8,
>                 from /usr/src/mod_python-3.3.1/src/include/mod_python.h:80,
>                 from hlistobject.c:28:
> /usr/local/include/python2.5/pyconfig.h:942:1: warning: "_POSIX_C_SOURCE"
> redefined
> In file included from /usr/include/sys/types.h:27,
>                 from /usr/local/apache2/2.2.6/include/apr.h:116,
>                 from /usr/local/apache2/2.2.6/include/ap_config.h:25,
>                 from /usr/local/apache2/2.2.6/include/httpd.h:43,
>                 from /usr/src/mod_python-3.3.1/src/include/mod_python.h:42,
>                 from hlistobject.c:28:
> /usr/include/features.h:131:1: warning: this is the location of the previous
> definition
> /usr/local/apache2/2.2.6/build/libtool --silent --mode=compile gcc
> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -g
> -O2 -pthread -I/usr/local/apache2/2.2.6/include
> -I/usr/local/apache2/2.2.6/include   -I/usr/local/apache2/2.2.6/include
>  -I/usr/src/mod_python-3.3.1/src/include -I/usr/local/apache2/2.2.6/include
> -I/usr/local/include/python2.5  -c -o finfoobject.lo finfoobject.c && touch
> finfoobject.slo
> In file included from /usr/local/include/python2.5/Python.h:8,
>                 from /usr/src/mod_python-3.3.1/src/include/mod_python.h:80,
>                 from finfoobject.c:25:
> /usr/local/include/python2.5/pyconfig.h:942:1: warning: "_POSIX_C_SOURCE"
> redefined
> In file included from /usr/include/sys/types.h:27,
>                 from /usr/local/apache2/2.2.6/include/apr.h:116,
>                 from /usr/local/apache2/2.2.6/include/ap_config.h:25,
>                 from /usr/local/apache2/2.2.6/include/httpd.h:43,
>                 from /usr/src/mod_python-3.3.1/src/include/mod_python.h:42,
>                 from finfoobject.c:25:
> /usr/include/features.h:131:1: warning: this is the location of the previous
> definition
> finfoobject.c:278: warning: `intargfunc' is deprecated (declared at
> /usr/local/include/python2.5/object.h:133)
> /usr/local/apache2/2.2.6/build/libtool --silent --mode=link gcc -o
> mod_python.la  -rpath /usr/local/apache2/2.2.6/modules -module
> -avoid-version    finfoobject.lo hlistobject.lo hlist.lo filterobject.lo
> connobject.lo serverobject.lo util.lo tableobject.lo requestobject.lo
> _apachemodule.lo mod_python.lo -L/usr/local/lib/python2.5/config -Xlinker
> -export-dynamic -lm -lpython2.5 -lpthread -ldl -lutil -lm
> make[2]: Leaving directory `/usr/src/mod_python-3.3.1/src'
> make[2]: Entering directory `/usr/src/mod_python-3.3.1/dist'
> ln -s ../lib/python/mod_python mod_python
> make[3]: Entering directory `/usr/src/mod_python-3.3.1/src'
> make[3]: `psp_parser.c' is up to date.
> make[3]: Leaving directory `/usr/src/mod_python-3.3.1/src'
> /usr/local/bin/python2.5 setup.py build
> running build
> running build_py
> creating build
> creating build/lib.linux-i686-2.5
> creating build/lib.linux-i686-2.5/mod_python
> copying /usr/src/mod_python-3.3.1/lib/python/mod_python/testhandler.py ->
> build/lib.linux-i686-2.5/mod_python
> copying /usr/src/mod_python-3.3.1/lib/python/mod_python/Cookie.py ->
> build/lib.linux-i686-2.5/mod_python
> copying /usr/src/mod_python-3.3.1/lib/python/mod_python/publisher.py ->
> build/lib.linux-i686-2.5/mod_python
> copying /usr/src/mod_python-3.3.1/lib/python/mod_python/__init__.py ->
> build/lib.linux-i686-2.5/mod_python
> copying /usr/src/mod_python-3.3.1/lib/python/mod_python/util.py ->
> build/lib.linux-i686-2.5/mod_python
> copying /usr/src/mod_python-3.3.1/lib/python/mod_python/cgihandler.py ->
> build/lib.linux-i686-2.5/mod_python
> copying /usr/src/mod_python-3.3.1/lib/python/mod_python/apache.py ->
> build/lib.linux-i686-2.5/mod_python
> copying /usr/src/mod_python-3.3.1/lib/python/mod_python/importer.py ->
> build/lib.linux-i686-2.5/mod_python
> copying /usr/src/mod_python-3.3.1/lib/python/mod_python/psp.py ->
> build/lib.linux-i686-2.5/mod_python
> copying /usr/src/mod_python-3.3.1/lib/python/mod_python/Session.py ->
> build/lib.linux-i686-2.5/mod_python
> copying /usr/src/mod_python-3.3.1/lib/python/mod_python/cache.py ->
> build/lib.linux-i686-2.5/mod_python
> copying /usr/src/mod_python-3.3.1/lib/python/mod_python/python22.py ->
> build/lib.linux-i686-2.5/mod_python
> running build_ext
> building 'mod_python._psp' extension
> creating build/temp.linux-i686-2.5
> creating build/temp.linux-i686-2.5/usr
> creating build/temp.linux-i686-2.5/usr/src
> creating build/temp.linux-i686-2.5/usr/src/SSL_LAMP
> creating build/temp.linux-i686-2.5/usr/src/mod_python-3.3.1
> creating build/temp.linux-i686-2.5/usr/src/mod_python-3.3.1/src
> gcc -pthread -fno-strict-aliasing -DNDEBUG -g -O3 -Wall -Wstrict-prototypes
> -fPIC -I/usr/src/mod_python-3.3.1/src/include -I/usr/local/include/python2.5
> -c /usr/src/mod_python-3.3.1/src/psp_string.c -o
> build/temp.linux-i686-2.5/usr/src/mod_python-3.3.1/src/psp_string.o
> gcc -pthread -fno-strict-aliasing -DNDEBUG -g -O3 -Wall -Wstrict-prototypes
> -fPIC -I/usr/src/mod_python-3.3.1/src/include -I/usr/local/include/python2.5
> -c /usr/src/mod_python-3.3.1/src/psp_parser.c -o
> build/temp.linux-i686-2.5/usr/src/mod_python-3.3.1/src/psp_parser.o
> In file included from /usr/local/include/python2.5/Python.h:8,
>                 from /usr/src/mod_python-3.3.1/src/include/psp_parser.h:23,
>                 from psp_parser.l:29:
> /usr/local/include/python2.5/pyconfig.h:942:1: warning: "_POSIX_C_SOURCE"
> redefined
> In file included from /usr/include/stdio.h:28,
>                 from psp_parser.c:20:
> /usr/include/features.h:171:1: warning: this is the location of the previous
> definition
> gcc -pthread -fno-strict-aliasing -DNDEBUG -g -O3 -Wall -Wstrict-prototypes
> -fPIC -I/usr/src/mod_python-3.3.1/src/include -I/usr/local/include/python2.5
> -c /usr/src/mod_python-3.3.1/src/_pspmodule.c -o
> build/temp.linux-i686-2.5/usr/src/mod_python-3.3.1/src/_pspmodule.o
> In file included from /usr/local/include/python2.5/Python.h:8,
>                 from /usr/src/mod_python-3.3.1/src/include/psp_parser.h:23,
>                 from /usr/src/mod_python-3.3.1/src/_pspmodule.c:26:
> /usr/local/include/python2.5/pyconfig.h:942:1: warning: "_POSIX_C_SOURCE"
> redefined
> In file included from /usr/include/stdio.h:28,
>                 from include/psp_flex.h:24,
>                 from /usr/src/mod_python-3.3.1/src/_pspmodule.c:25:
> /usr/include/features.h:171:1: warning: this is the location of the previous
> definition
> gcc -pthread -shared
> build/temp.linux-i686-2.5/usr/src/mod_python-3.3.1/src/psp_string.o
> build/temp.linux-i686-2.5/usr/src/mod_python-3.3.1/src/psp_parser.o
> build/temp.linux-i686-2.5/usr/src/mod_python-3.3.1/src/_pspmodule.o -o
> build/lib.linux-i686-2.5/mod_python/_psp.so
> make[2]: Leaving directory `/usr/src/mod_python-3.3.1/dist'
>
> Now su and make install
>  (or, if you only want to perform a partial install,
>   you can use make install_dso and make install_py_lib)
>
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>
From graham.dumpleton at gmail.com  Thu Jun 19 23:19:08 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Thu Jun 19 23:19:10 2008
Subject: [mod_python] Re: mod_python 3.3.1 bug report
In-Reply-To: <485b1e37.1b36640a.1340.4452SMTPIN_ADDED@mx.google.com>
References: <20080616045259.7066372494D@athena.apache.org>
	<88e286470806191833g33ba9e1cxe26e1ff2e1eefde7@mail.gmail.com>
	<485b1e37.1b36640a.1340.4452SMTPIN_ADDED@mx.google.com>
Message-ID: <88e286470806192019s1a704c6eg1fc766e49620339b@mail.gmail.com>

Please use reply-all and keep followups on mailing list.

Anyway, read message wrong first time. It isn't log_error() in your
code which is problem, but code in mod_python used to display error
tracebacks. In particular:

            tb = traceback.format_exception(etype, evalue, etb)

            for line in tb:
                log_error(line[:-1], flags)

I can only image that somehow a Unicode character string has gotten
into traceback message from Python.

What I suggest you do is modify the importer.py in mod_python
installed source so that that log_error() call reads:

                log_error(repr(line[:-1]), flags)

That should show you true error which is first occurring. Unicode
strings shouldn't be an issue then as are converting it all to
displayable latin.

Please don't though just fix the error if in your code if obvious,
instead post the resultant error traceback to list so can see how
unicode string is getting into traceback.

Graham

2008/6/20 Mike Landis <mlandis001@comcast.net>:
> Graham,
>
> The results look identical to me... (see immediately below)
>
> -Mike
>
> [Thu Jun 19 22:42:54 2008] [notice] mod_python (pid=3332,
> interpreter='localhost'): Importing module 'D:\\htdocs\\Python\\mptest.py'
> [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1] mod_python (pid=3332,
> interpreter='localhost', phase='PythonHandler', handler='mptest'):
> Application error
> [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1] ServerName:
> 'localhost'
> [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1] DocumentRoot:
> 'D:/htdocs'
> [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1] URI:
> '/Python/mptest.py'
> [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1] Location: None
> [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1] Directory:
> 'D:/htdocs/Python/'
> [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1] Filename:
> 'D:/htdocs/Python/mptest.py'
> [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1] PathInfo: ''
> [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1] Traceback (most recent
> call last):
> [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1]   File
> "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py", line
> 1537, in HandlerDispatch\n    default=default_handler, arg=req,
> silent=hlist.silent)
> [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1]   File
> "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py", line
> 1202, in _process_target\n    module = import_module(module_name, path=path)
> [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1]   File
> "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py", line
> 296, in import_module\n    log, import_path)
> [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1]   File
> "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py", line
> 680, in import_module\n    execfile(file, module.__dict__)
> Traceback (most recent call last):
>  File "D:\Programs\Python25\lib\site-packages\mod_python\importer.py", line
> 1784, in ReportError
>    log_error(line[:-1], flags)
> TypeError: argument 1 must be string without null bytes or None, not str
> [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1] python_handler:
> Dispatch() returned non-integer.
> ==========================================================================
> At 09:33 PM 6/19/2008, you wrote:
>>
>> What happens when you use:
>>
>>  from mod_python import apache
>>  apache.log_error('handler')
>>
>> instead?
>>
>> Graham
>>
>> 2008/6/16 Mike Landis <mlandis001@comcast.net>:
>> >
>> > 32 bit Windows Vista, Apache 2.2.8, mod_python 3.3.1, python 2.5.2.2
>> > (r252:60911)
>> >
>> > I received a 500 error from Apache httpd while attempting to get
>> > mod_python working on Windows Vista.  Following are entries from
>> > error.log, httpd.conf, and the Python source (mptest.py) used as a test
>> > case.  The error
>> > occurs within importer.py (part of the mod_pyton site-package).
>> >
>> > Apache httpd error log:
>> > [Sat Jun 14 16:22:29 2008] [notice] mod_python (pid=3708,
>> > interpreter='localhost'): Importing module
>> > 'D:\\htdocs\\Python\\mptest.py'
>> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1] mod_python
>> > (pid=3708, interpreter='localhost', phase='PythonHandler',
>> > handler='mptest'): Application error
>> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1] ServerName:
>> > 'localhost'
>> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1] DocumentRoot:
>> > 'D:/htdocs'
>> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1] URI:
>> > '/Python/mptest.py'
>> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1] Location: None
>> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1] Directory:
>> > 'D:/htdocs/Python/'
>> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1] Filename:
>> > 'D:/htdocs/Python/mptest.py'
>> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1] PathInfo: ''
>> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1] Traceback (most
>> > recent call last):
>> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]   File
>> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> > line 1537, in HandlerDispatch\n default=default_handler, arg=req,
>> > silent=hlist.silent)
>> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]   File
>> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> > line 1202, in _process_target\n module = import_module(module_name,
>> > path=path)
>> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]   File
>> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> > line 296, in import_module\n log, import_path)
>> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]   File
>> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> > line 680, in import_module\n execfile(file, module.__dict__)
>> > Traceback (most recent call last): File
>> > "D:\Programs\Python25\lib\site-packages\mod_python\importer.py",
>> > line 1784, in ReportError log_error(line[:-1], flags)
>> > TypeError: argument 1 must be string without null bytes or None, not str
>> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1] python_handler:
>> > Dispatch() returned non-integer.
>> >
>> > --------------------------------------------------------------------------------
>> > httpd.conf entries:
>> > LoadModule python_module modules/mod_python.so
>> >
>> > <Directory D:\htdocs\Python>
>> >
>> > AddHandler      mod_python .py
>> >        PythonHandler   mptest
>> >        PythonDebug
>> > On
>> > </Directory>
>> >
>> > --------------------------------------------------------------------------------
>> > Python source (in mptest.py):
>> >
>> > from mod_python import apache
>> >
>> > def handler(req):
>> >         req.log_error('handler')
>> >         req.content_type =
>> > 'text/plain'
>> >         req.write('HelloWorld\n')
>> >         return apache.OK
>> >
>> >
>> >
>>
>> No virus found in this incoming message.
>> Checked by AVG.
>> Version: 8.0.100 / Virus Database: 270.4.0/1509 - Release Date: 6/19/2008
>> 8:00 AM
>
>
From graham.dumpleton at gmail.com  Thu Jun 19 23:49:58 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Thu Jun 19 23:50:00 2008
Subject: [mod_python] Re: mod_python 3.3.1 bug report
In-Reply-To: <485b27c5.3c432c0a.10e7.7420SMTPIN_ADDED@mx.google.com>
References: <20080616045259.7066372494D@athena.apache.org>
	<88e286470806191833g33ba9e1cxe26e1ff2e1eefde7@mail.gmail.com>
	<485b1e37.1b36640a.1340.4452SMTPIN_ADDED@mx.google.com>
	<88e286470806192019s1a704c6eg1fc766e49620339b@mail.gmail.com>
	<485b27c5.3c432c0a.10e7.7420SMTPIN_ADDED@mx.google.com>
Message-ID: <88e286470806192049k508790cbucb683f6cde4d5134@mail.gmail.com>

Instead of repr(), try str() then. Also try:

  line[:-1].encode('UTF-8')

I think.

You might add at same level of indent in that loop:

  import sys
  print >> sys.stderr, repr(line[:-1])
  sys.stderr.flush()

This should hopefully flush out to Apache logs and by pass the
mod_python error log function.

If still no luck, there may be some issue with Python installation, not sure.

Graham

2008/6/20 Mike Landis <mlandis001@comcast.net>:
> Graham,
>
> This result looks similar (if not identical).
>
> -Mike
>
> [Thu Jun 19 23:41:58 2008] [notice] mod_python (pid=3332,
> interpreter='localhost'): Importing module 'D:\\htdocs\\Python\\mptest.py'
> [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1] mod_python (pid=3332,
> interpreter='localhost', phase='PythonHandler', handler='mptest'):
> Application error
> [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1] ServerName:
> 'localhost'
> [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1] DocumentRoot:
> 'D:/htdocs'
> [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1] URI:
> '/Python/mptest.py'
> [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1] Location: None
> [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1] Directory:
> 'D:/htdocs/Python/'
> [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1] Filename:
> 'D:/htdocs/Python/mptest.py'
> [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1] PathInfo: ''
> [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1] Traceback (most recent
> call last):
> [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1]   File
> "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py", line
> 1537, in HandlerDispatch\n    default=default_handler, arg=req,
> silent=hlist.silent)
> [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1]   File
> "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py", line
> 1202, in _process_target\n    module = import_module(module_name, path=path)
> [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1]   File
> "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py", line
> 296, in import_module\n    log, import_path)
> [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1]   File
> "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py", line
> 680, in import_module\n    execfile(file, module.__dict__)
> Traceback (most recent call last):
>  File "D:\Programs\Python25\lib\site-packages\mod_python\importer.py", line
> 1784, in ReportError
>    log_error(repr(line[:-1]), flags)                           # was:
>  log_error(line[:-1], flags)
> TypeError: argument 1 must be string without null bytes or None, not str
> [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1] python_handler:
> Dispatch() returned non-integer.
>
> At 11:19 PM 6/19/2008, Graham Dumpleton wrote:
>>
>> Please use reply-all and keep followups on mailing list.
>>
>> Anyway, read message wrong first time. It isn't log_error() in your
>> code which is problem, but code in mod_python used to display error
>> tracebacks. In particular:
>>
>>            tb = traceback.format_exception(etype, evalue, etb)
>>
>>            for line in tb:
>>                log_error(line[:-1], flags)
>>
>> I can only image that somehow a Unicode character string has gotten
>> into traceback message from Python.
>>
>> What I suggest you do is modify the importer.py in mod_python
>> installed source so that that log_error() call reads:
>>
>>                log_error(repr(line[:-1]), flags)
>>
>> That should show you true error which is first occurring. Unicode
>> strings shouldn't be an issue then as are converting it all to
>> displayable latin.
>>
>> Please don't though just fix the error if in your code if obvious,
>> instead post the resultant error traceback to list so can see how
>> unicode string is getting into traceback.
>>
>> Graham
>>
>> 2008/6/20 Mike Landis <mlandis001@comcast.net>:
>> > Graham,
>> >
>> > The results look identical to me... (see immediately below)
>> >
>> > -Mike
>> >
>> > [Thu Jun 19 22:42:54 2008] [notice] mod_python (pid=3332,
>> > interpreter='localhost'): Importing module
>> > 'D:\\htdocs\\Python\\mptest.py'
>> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1] mod_python
>> > (pid=3332,
>> > interpreter='localhost', phase='PythonHandler', handler='mptest'):
>> > Application error
>> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1] ServerName:
>> > 'localhost'
>> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1] DocumentRoot:
>> > 'D:/htdocs'
>> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1] URI:
>> > '/Python/mptest.py'
>> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1] Location: None
>> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1] Directory:
>> > 'D:/htdocs/Python/'
>> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1] Filename:
>> > 'D:/htdocs/Python/mptest.py'
>> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1] PathInfo: ''
>> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1] Traceback (most
>> > recent
>> > call last):
>> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1]   File
>> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> > line
>> > 1537, in HandlerDispatch\n    default=default_handler, arg=req,
>> > silent=hlist.silent)
>> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1]   File
>> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> > line
>> > 1202, in _process_target\n    module = import_module(module_name,
>> > path=path)
>> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1]   File
>> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> > line
>> > 296, in import_module\n    log, import_path)
>> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1]   File
>> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> > line
>> > 680, in import_module\n    execfile(file, module.__dict__)
>> > Traceback (most recent call last):
>> >  File "D:\Programs\Python25\lib\site-packages\mod_python\importer.py",
>> > line
>> > 1784, in ReportError
>> >    log_error(line[:-1], flags)
>> > TypeError: argument 1 must be string without null bytes or None, not str
>> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1] python_handler:
>> > Dispatch() returned non-integer.
>> >
>> > ==========================================================================
>> > At 09:33 PM 6/19/2008, you wrote:
>> >>
>> >> What happens when you use:
>> >>
>> >>  from mod_python import apache
>> >>  apache.log_error('handler')
>> >>
>> >> instead?
>> >>
>> >> Graham
>> >>
>> >> 2008/6/16 Mike Landis <mlandis001@comcast.net>:
>> >> >
>> >> > 32 bit Windows Vista, Apache 2.2.8, mod_python 3.3.1, python 2.5.2.2
>> >> > (r252:60911)
>> >> >
>> >> > I received a 500 error from Apache httpd while attempting to get
>> >> > mod_python working on Windows Vista.  Following are entries from
>> >> > error.log, httpd.conf, and the Python source (mptest.py) used as a
>> >> > test
>> >> > case.  The error
>> >> > occurs within importer.py (part of the mod_pyton site-package).
>> >> >
>> >> > Apache httpd error log:
>> >> > [Sat Jun 14 16:22:29 2008] [notice] mod_python (pid=3708,
>> >> > interpreter='localhost'): Importing module
>> >> > 'D:\\htdocs\\Python\\mptest.py'
>> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1] mod_python
>> >> > (pid=3708, interpreter='localhost', phase='PythonHandler',
>> >> > handler='mptest'): Application error
>> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1] ServerName:
>> >> > 'localhost'
>> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1] DocumentRoot:
>> >> > 'D:/htdocs'
>> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1] URI:
>> >> > '/Python/mptest.py'
>> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1] Location: None
>> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1] Directory:
>> >> > 'D:/htdocs/Python/'
>> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1] Filename:
>> >> > 'D:/htdocs/Python/mptest.py'
>> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1] PathInfo: ''
>> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1] Traceback (most
>> >> > recent call last):
>> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]   File
>> >> >
>> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> > line 1537, in HandlerDispatch\n default=default_handler, arg=req,
>> >> > silent=hlist.silent)
>> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]   File
>> >> >
>> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> > line 1202, in _process_target\n module = import_module(module_name,
>> >> > path=path)
>> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]   File
>> >> >
>> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> > line 296, in import_module\n log, import_path)
>> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]   File
>> >> >
>> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> > line 680, in import_module\n execfile(file, module.__dict__)
>> >> > Traceback (most recent call last): File
>> >> > "D:\Programs\Python25\lib\site-packages\mod_python\importer.py",
>> >> > line 1784, in ReportError log_error(line[:-1], flags)
>> >> > TypeError: argument 1 must be string without null bytes or None, not
>> >> > str
>> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1] python_handler:
>> >> > Dispatch() returned non-integer.
>> >> >
>> >> >
>> >> > --------------------------------------------------------------------------------
>> >> > httpd.conf entries:
>> >> > LoadModule python_module modules/mod_python.so
>> >> >
>> >> > <Directory D:\htdocs\Python>
>> >> >
>> >> > AddHandler      mod_python .py
>> >> >        PythonHandler   mptest
>> >> >        PythonDebug
>> >> > On
>> >> > </Directory>
>> >> >
>> >> >
>> >> > --------------------------------------------------------------------------------
>> >> > Python source (in mptest.py):
>> >> >
>> >> > from mod_python import apache
>> >> >
>> >> > def handler(req):
>> >> >         req.log_error('handler')
>> >> >         req.content_type =
>> >> > 'text/plain'
>> >> >         req.write('HelloWorld\n')
>> >> >         return apache.OK
>> >> >
>> >> >
>> >> >
>> >>
>> >> No virus found in this incoming message.
>> >> Checked by AVG.
>> >> Version: 8.0.100 / Virus Database: 270.4.0/1509 - Release Date:
>> >> 6/19/2008
>> >> 8:00 AM
>> >
>> >
>>
>> No virus found in this incoming message.
>> Checked by AVG.
>> Version: 8.0.100 / Virus Database: 270.4.0/1509 - Release Date: 6/19/2008
>> 8:00 AM
>
>
From graham.dumpleton at gmail.com  Fri Jun 20 00:28:42 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Fri Jun 20 00:28:44 2008
Subject: [mod_python] Re: mod_python 3.3.1 bug report
In-Reply-To: <485b313b.281d640a.0664.65beSMTPIN_ADDED@mx.google.com>
References: <20080616045259.7066372494D@athena.apache.org>
	<88e286470806191833g33ba9e1cxe26e1ff2e1eefde7@mail.gmail.com>
	<485b1e37.1b36640a.1340.4452SMTPIN_ADDED@mx.google.com>
	<88e286470806192019s1a704c6eg1fc766e49620339b@mail.gmail.com>
	<485b27c5.3c432c0a.10e7.7420SMTPIN_ADDED@mx.google.com>
	<88e286470806192049k508790cbucb683f6cde4d5134@mail.gmail.com>
	<485b313b.281d640a.0664.65beSMTPIN_ADDED@mx.google.com>
Message-ID: <88e286470806192128i2373aec8u4dbeafcf558271d7@mail.gmail.com>

Huh, that doesn't quite make sense. Can you replace:

  PythonHandler mptest

with:

  PythonHandler mod_python.testhandler

This will use an inbuilt test handler within mod_python and return a
lot of debug if it works.

If that still doesn't work, can only suggest uninstalling both Python
and mod_python and reinstalling, making sure they are installed as
account with Administrator privileges for good measure.

Graham

2008/6/20 Mike Landis <mlandis001@comcast.net>:
> Graham,
>
> I'm sorry, 'line' is defined by the for loop, so you wanted all three lines
> within the for loop, as follows...
>            for line in tb:
>                                import sys
>                                print >> sys.stderr, repr(line[:-1])
>                                sys.stderr.flush()
>                                log_error(line[:-1], flags)
>
> that produces:
> [Fri Jun 20 00:24:18 2008] [notice] mod_python (pid=3332,
> interpreter='localhost'): Importing module 'D:\\htdocs\\Python\\mptest.py'
> [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1] mod_python (pid=3332,
> interpreter='localhost', phase='PythonHandler', handler='mptest'):
> Application error
> [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1] ServerName:
> 'localhost'
> [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1] DocumentRoot:
> 'D:/htdocs'
> [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1] URI:
> '/Python/mptest.py'
> [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1] Location: None
> [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1] Directory:
> 'D:/htdocs/Python/'
> [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1] Filename:
> 'D:/htdocs/Python/mptest.py'
> [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1] PathInfo: ''
> [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1] Traceback (most recent
> call last):
> [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1]   File
> "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py", line
> 1537, in HandlerDispatch\n    default=default_handler, arg=req,
> silent=hlist.silent)
> [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1]   File
> "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py", line
> 1202, in _process_target\n    module = import_module(module_name, path=path)
> [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1]   File
> "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py", line
> 296, in import_module\n    log, import_path)
> [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1]   File
> "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py", line
> 680, in import_module\n    execfile(file, module.__dict__)
> Traceback (most recent call last):
>  File "D:\Programs\Python25\lib\site-packages\mod_python\importer.py", line
> 1784, in ReportError
>    import sys
> TypeError: argument 1 must be string without null bytes or None, not str
> [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1] python_handler:
> Dispatch() returned non-integer.
>
> -Mike
> At 11:49 PM 6/19/2008, Graham Dumpleton wrote:
>>
>> Instead of repr(), try str() then. Also try:
>>
>>  line[:-1].encode('UTF-8')
>>
>> I think.
>>
>> You might add at same level of indent in that loop:
>>
>>  import sys
>>  print >> sys.stderr, repr(line[:-1])
>>  sys.stderr.flush()
>>
>> This should hopefully flush out to Apache logs and by pass the
>> mod_python error log function.
>>
>> If still no luck, there may be some issue with Python installation, not
>> sure.
>>
>> Graham
>>
>> 2008/6/20 Mike Landis <mlandis001@comcast.net>:
>> > Graham,
>> >
>> > This result looks similar (if not identical).
>> >
>> > -Mike
>> >
>> > [Thu Jun 19 23:41:58 2008] [notice] mod_python (pid=3332,
>> > interpreter='localhost'): Importing module
>> > 'D:\\htdocs\\Python\\mptest.py'
>> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1] mod_python
>> > (pid=3332,
>> > interpreter='localhost', phase='PythonHandler', handler='mptest'):
>> > Application error
>> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1] ServerName:
>> > 'localhost'
>> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1] DocumentRoot:
>> > 'D:/htdocs'
>> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1] URI:
>> > '/Python/mptest.py'
>> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1] Location: None
>> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1] Directory:
>> > 'D:/htdocs/Python/'
>> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1] Filename:
>> > 'D:/htdocs/Python/mptest.py'
>> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1] PathInfo: ''
>> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1] Traceback (most
>> > recent
>> > call last):
>> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1]   File
>> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> > line
>> > 1537, in HandlerDispatch\n    default=default_handler, arg=req,
>> > silent=hlist.silent)
>> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1]   File
>> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> > line
>> > 1202, in _process_target\n    module = import_module(module_name,
>> > path=path)
>> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1]   File
>> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> > line
>> > 296, in import_module\n    log, import_path)
>> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1]   File
>> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> > line
>> > 680, in import_module\n    execfile(file, module.__dict__)
>> > Traceback (most recent call last):
>> >  File "D:\Programs\Python25\lib\site-packages\mod_python\importer.py",
>> > line
>> > 1784, in ReportError
>> >    log_error(repr(line[:-1]), flags)                           # was:
>> >  log_error(line[:-1], flags)
>> > TypeError: argument 1 must be string without null bytes or None, not str
>> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1] python_handler:
>> > Dispatch() returned non-integer.
>> >
>> > At 11:19 PM 6/19/2008, Graham Dumpleton wrote:
>> >>
>> >> Please use reply-all and keep followups on mailing list.
>> >>
>> >> Anyway, read message wrong first time. It isn't log_error() in your
>> >> code which is problem, but code in mod_python used to display error
>> >> tracebacks. In particular:
>> >>
>> >>            tb = traceback.format_exception(etype, evalue, etb)
>> >>
>> >>            for line in tb:
>> >>                log_error(line[:-1], flags)
>> >>
>> >> I can only image that somehow a Unicode character string has gotten
>> >> into traceback message from Python.
>> >>
>> >> What I suggest you do is modify the importer.py in mod_python
>> >> installed source so that that log_error() call reads:
>> >>
>> >>                log_error(repr(line[:-1]), flags)
>> >>
>> >> That should show you true error which is first occurring. Unicode
>> >> strings shouldn't be an issue then as are converting it all to
>> >> displayable latin.
>> >>
>> >> Please don't though just fix the error if in your code if obvious,
>> >> instead post the resultant error traceback to list so can see how
>> >> unicode string is getting into traceback.
>> >>
>> >> Graham
>> >>
>> >> 2008/6/20 Mike Landis <mlandis001@comcast.net>:
>> >> > Graham,
>> >> >
>> >> > The results look identical to me... (see immediately below)
>> >> >
>> >> > -Mike
>> >> >
>> >> > [Thu Jun 19 22:42:54 2008] [notice] mod_python (pid=3332,
>> >> > interpreter='localhost'): Importing module
>> >> > 'D:\\htdocs\\Python\\mptest.py'
>> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1] mod_python
>> >> > (pid=3332,
>> >> > interpreter='localhost', phase='PythonHandler', handler='mptest'):
>> >> > Application error
>> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1] ServerName:
>> >> > 'localhost'
>> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1] DocumentRoot:
>> >> > 'D:/htdocs'
>> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1] URI:
>> >> > '/Python/mptest.py'
>> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1] Location: None
>> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1] Directory:
>> >> > 'D:/htdocs/Python/'
>> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1] Filename:
>> >> > 'D:/htdocs/Python/mptest.py'
>> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1] PathInfo: ''
>> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1] Traceback (most
>> >> > recent
>> >> > call last):
>> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1]   File
>> >> >
>> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> > line
>> >> > 1537, in HandlerDispatch\n    default=default_handler, arg=req,
>> >> > silent=hlist.silent)
>> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1]   File
>> >> >
>> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> > line
>> >> > 1202, in _process_target\n    module = import_module(module_name,
>> >> > path=path)
>> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1]   File
>> >> >
>> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> > line
>> >> > 296, in import_module\n    log, import_path)
>> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1]   File
>> >> >
>> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> > line
>> >> > 680, in import_module\n    execfile(file, module.__dict__)
>> >> > Traceback (most recent call last):
>> >> >  File
>> >> > "D:\Programs\Python25\lib\site-packages\mod_python\importer.py",
>> >> > line
>> >> > 1784, in ReportError
>> >> >    log_error(line[:-1], flags)
>> >> > TypeError: argument 1 must be string without null bytes or None, not
>> >> > str
>> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1] python_handler:
>> >> > Dispatch() returned non-integer.
>> >> >
>> >> >
>> >> > ==========================================================================
>> >> > At 09:33 PM 6/19/2008, you wrote:
>> >> >>
>> >> >> What happens when you use:
>> >> >>
>> >> >>  from mod_python import apache
>> >> >>  apache.log_error('handler')
>> >> >>
>> >> >> instead?
>> >> >>
>> >> >> Graham
>> >> >>
>> >> >> 2008/6/16 Mike Landis <mlandis001@comcast.net>:
>> >> >> >
>> >> >> > 32 bit Windows Vista, Apache 2.2.8, mod_python 3.3.1, python
>> >> >> > 2.5.2.2
>> >> >> > (r252:60911)
>> >> >> >
>> >> >> > I received a 500 error from Apache httpd while attempting to get
>> >> >> > mod_python working on Windows Vista.  Following are entries from
>> >> >> > error.log, httpd.conf, and the Python source (mptest.py) used as a
>> >> >> > test
>> >> >> > case.  The error
>> >> >> > occurs within importer.py (part of the mod_pyton site-package).
>> >> >> >
>> >> >> > Apache httpd error log:
>> >> >> > [Sat Jun 14 16:22:29 2008] [notice] mod_python (pid=3708,
>> >> >> > interpreter='localhost'): Importing module
>> >> >> > 'D:\\htdocs\\Python\\mptest.py'
>> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1] mod_python
>> >> >> > (pid=3708, interpreter='localhost', phase='PythonHandler',
>> >> >> > handler='mptest'): Application error
>> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1] ServerName:
>> >> >> > 'localhost'
>> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]
>> >> >> > DocumentRoot:
>> >> >> > 'D:/htdocs'
>> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1] URI:
>> >> >> > '/Python/mptest.py'
>> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1] Location:
>> >> >> > None
>> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1] Directory:
>> >> >> > 'D:/htdocs/Python/'
>> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1] Filename:
>> >> >> > 'D:/htdocs/Python/mptest.py'
>> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1] PathInfo: ''
>> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1] Traceback
>> >> >> > (most
>> >> >> > recent call last):
>> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]   File
>> >> >> >
>> >> >> >
>> >> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> >> > line 1537, in HandlerDispatch\n default=default_handler, arg=req,
>> >> >> > silent=hlist.silent)
>> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]   File
>> >> >> >
>> >> >> >
>> >> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> >> > line 1202, in _process_target\n module =
>> >> >> > import_module(module_name,
>> >> >> > path=path)
>> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]   File
>> >> >> >
>> >> >> >
>> >> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> >> > line 296, in import_module\n log, import_path)
>> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]   File
>> >> >> >
>> >> >> >
>> >> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> >> > line 680, in import_module\n execfile(file, module.__dict__)
>> >> >> > Traceback (most recent call last): File
>> >> >> > "D:\Programs\Python25\lib\site-packages\mod_python\importer.py",
>> >> >> > line 1784, in ReportError log_error(line[:-1], flags)
>> >> >> > TypeError: argument 1 must be string without null bytes or None,
>> >> >> > not
>> >> >> > str
>> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]
>> >> >> > python_handler:
>> >> >> > Dispatch() returned non-integer.
>> >> >> >
>> >> >> >
>> >> >> >
>> >> >> > --------------------------------------------------------------------------------
>> >> >> > httpd.conf entries:
>> >> >> > LoadModule python_module modules/mod_python.so
>> >> >> >
>> >> >> > <Directory D:\htdocs\Python>
>> >> >> >
>> >> >> > AddHandler      mod_python .py
>> >> >> >        PythonHandler   mptest
>> >> >> >        PythonDebug
>> >> >> > On
>> >> >> > </Directory>
>> >> >> >
>> >> >> >
>> >> >> >
>> >> >> > --------------------------------------------------------------------------------
>> >> >> > Python source (in mptest.py):
>> >> >> >
>> >> >> > from mod_python import apache
>> >> >> >
>> >> >> > def handler(req):
>> >> >> >         req.log_error('handler')
>> >> >> >         req.content_type =
>> >> >> > 'text/plain'
>> >> >> >         req.write('HelloWorld\n')
>> >> >> >         return apache.OK
>> >> >> >
>> >> >> >
>> >> >> >
>> >> >>
>> >> >> No virus found in this incoming message.
>> >> >> Checked by AVG.
>> >> >> Version: 8.0.100 / Virus Database: 270.4.0/1509 - Release Date:
>> >> >> 6/19/2008
>> >> >> 8:00 AM
>> >> >
>> >> >
>> >>
>> >> No virus found in this incoming message.
>> >> Checked by AVG.
>> >> Version: 8.0.100 / Virus Database: 270.4.0/1509 - Release Date:
>> >> 6/19/2008
>> >> 8:00 AM
>> >
>> >
>>
>> No virus found in this incoming message.
>> Checked by AVG.
>> Version: 8.0.100 / Virus Database: 270.4.0/1509 - Release Date: 6/19/2008
>> 8:00 AM
>
>
From graham.dumpleton at gmail.com  Fri Jun 20 01:01:06 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Fri Jun 20 01:01:12 2008
Subject: [mod_python] Re: mod_python 3.3.1 bug report
In-Reply-To: <485b3809.03172c0a.4a72.78a7SMTPIN_ADDED@mx.google.com>
References: <20080616045259.7066372494D@athena.apache.org>
	<88e286470806191833g33ba9e1cxe26e1ff2e1eefde7@mail.gmail.com>
	<485b1e37.1b36640a.1340.4452SMTPIN_ADDED@mx.google.com>
	<88e286470806192019s1a704c6eg1fc766e49620339b@mail.gmail.com>
	<485b27c5.3c432c0a.10e7.7420SMTPIN_ADDED@mx.google.com>
	<88e286470806192049k508790cbucb683f6cde4d5134@mail.gmail.com>
	<485b313b.281d640a.0664.65beSMTPIN_ADDED@mx.google.com>
	<88e286470806192128i2373aec8u4dbeafcf558271d7@mail.gmail.com>
	<485b3809.03172c0a.4a72.78a7SMTPIN_ADDED@mx.google.com>
Message-ID: <88e286470806192201xbefc782j68de3d9d8b3b47a3@mail.gmail.com>

I literally meant to run the 'uninstall' script for mod_python and
Python and run 'install' or 'setup' to reinstall them from scratch.
Not just put back importer.py.

I have never used mod_python on Windows so not sure about details of
where deinstaller stuff for each will be. Perhaps someone else on list
can say what needs to be done to remove and then reinstall each.

Graham

2008/6/20 Mike Landis <mlandis001@comcast.net>:
> Graham,
>
> I restored importer.py to its originally distributed state (hope that's what
> you'd want), made the changes to httpd.conf, restarted Apache, reloaded
> mptest.py in the browser (to get mod_python kicked off) and got this:
>
> [Fri Jun 20 00:44:41 2008] [notice] Parent: Received restart signal --
> Restarting the server.
> [Fri Jun 20 00:44:42 2008] [notice] Child 3332: Exit event signaled. Child
> process is ending.
> [Fri Jun 20 00:44:42 2008] [warn] mod_wsgi: Compiled for Python/2.5.
> [Fri Jun 20 00:44:42 2008] [warn] mod_wsgi: Runtime using Python/2.5.2.
> [Fri Jun 20 00:44:42 2008] [warn] mod_wsgi: Python module path
> 'C:\\Windows\\system32\\python25.zip;D:\\Programs\\Python25\\Lib;D:\\Programs\\Python25\\DLLs;D:\\Programs\\Python25\\Lib\\lib-tk;;D:\\Programs\\Apache
> Software Foundation\\Apache2.2\\bin'.
> [Fri Jun 20 00:44:42 2008] [notice] Apache/2.2.8 (Win32) DAV/2 PHP/5.2.6
> mod_wsgi/2.0 Python/2.5.2 configured -- resuming normal operations
> [Fri Jun 20 00:44:42 2008] [notice] Server built: Jan 18 2008 00:37:19
> [Fri Jun 20 00:44:42 2008] [notice] Parent: Created child process 7528
> [Fri Jun 20 00:44:42 2008] [error] python_init: Python version mismatch,
> expected '2.5', found '2.5.2'.
> [Fri Jun 20 00:44:42 2008] [error] python_init: Python executable found
> 'D:\\Programs\\Apache Software Foundation\\Apache2.2\\bin\\httpd.exe'.
> [Fri Jun 20 00:44:42 2008] [error] python_init: Python path being used
> 'C:\\Windows\\system32\\python25.zip;D:\\Programs\\Python25\\Lib;D:\\Programs\\Python25\\DLLs;D:\\Programs\\Python25\\Lib\\lib-tk;;D:\\Programs\\Apache
> Software Foundation\\Apache2.2\\bin'.
> [Fri Jun 20 00:44:42 2008] [notice] mod_python: Creating 8 session mutexes
> based on 0 max processes and 250 max threads.
> [Fri Jun 20 00:44:42 2008] [warn] mod_wsgi: Compiled for Python/2.5.
> [Fri Jun 20 00:44:42 2008] [warn] mod_wsgi: Runtime using Python/2.5.2.
> [Fri Jun 20 00:44:42 2008] [warn] mod_wsgi: Python module path
> 'C:\\Windows\\system32\\python25.zip;D:\\Programs\\Python25\\Lib;D:\\Programs\\Python25\\DLLs;D:\\Programs\\Python25\\Lib\\lib-tk;;D:\\Programs\\Apache
> Software Foundation\\Apache2.2\\bin'.
> [Fri Jun 20 00:44:42 2008] [notice] Child 7528: Child process is running
> [Fri Jun 20 00:44:43 2008] [notice] Child 7528: Acquired the start mutex.
> [Fri Jun 20 00:44:43 2008] [notice] Child 7528: Starting 250 worker threads.
> [Fri Jun 20 00:44:43 2008] [notice] Child 3332: Released the start mutex
> [Fri Jun 20 00:44:44 2008] [notice] Child 3332: All worker threads have
> exited.
> [Fri Jun 20 00:44:44 2008] [notice] Child 3332: Child process is exiting
> [Fri Jun 20 00:44:44 2008] [notice] Child 7528: Starting thread to listen on
> port 80.
> [Fri Jun 20 00:45:13 2008] [error] make_obcallback: could not call init.\n
> Traceback (most recent call last):
>  File "D:\Programs\Python25\Lib\site-packages\mod_python\apache.py", line
> 937, in init
>    from mod_python import importer
>  File "D:\Programs\Python25\lib\site-packages\mod_python\importer.py", line
> 1783
>    for line in tb:
>    ^
> IndentationError: unexpected indent
> [Fri Jun 20 00:45:13 2008] [error] get_interpreter: no interpreter callback
> found.
> [Fri Jun 20 00:45:13 2008] [error] [client 127.0.0.1] python_handler: Can't
> get/create interpreter.
>
> I also dropped importer.py into a hex editor to see if there was an
> invisible character or something gumming up the works.  As far as I can
> tell, it looks like standard ASCII - all of the whitespace and non-printable
> characters near the 'for line in tb:' are ordinary whitespace:  0x0A, 0x09,
> and 0x20 (TAB, LF, and SPACE).
>
> -Mike
> At 12:28 AM 6/20/2008, Graham Dumpleton wrote:
>>
>> Huh, that doesn't quite make sense. Can you replace:
>>
>>  PythonHandler mptest
>>
>> with:
>>
>>  PythonHandler mod_python.testhandler
>>
>> This will use an inbuilt test handler within mod_python and return a
>> lot of debug if it works.
>>
>> If that still doesn't work, can only suggest uninstalling both Python
>> and mod_python and reinstalling, making sure they are installed as
>> account with Administrator privileges for good measure.
>>
>> Graham
>>
>> 2008/6/20 Mike Landis <mlandis001@comcast.net>:
>> > Graham,
>> >
>> > I'm sorry, 'line' is defined by the for loop, so you wanted all three
>> > lines
>> > within the for loop, as follows...
>> >            for line in tb:
>> >                                import sys
>> >                                print >> sys.stderr, repr(line[:-1])
>> >                                sys.stderr.flush()
>> >                                log_error(line[:-1], flags)
>> >
>> > that produces:
>> > [Fri Jun 20 00:24:18 2008] [notice] mod_python (pid=3332,
>> > interpreter='localhost'): Importing module
>> > 'D:\\htdocs\\Python\\mptest.py'
>> > [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1] mod_python
>> > (pid=3332,
>> > interpreter='localhost', phase='PythonHandler', handler='mptest'):
>> > Application error
>> > [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1] ServerName:
>> > 'localhost'
>> > [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1] DocumentRoot:
>> > 'D:/htdocs'
>> > [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1] URI:
>> > '/Python/mptest.py'
>> > [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1] Location: None
>> > [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1] Directory:
>> > 'D:/htdocs/Python/'
>> > [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1] Filename:
>> > 'D:/htdocs/Python/mptest.py'
>> > [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1] PathInfo: ''
>> > [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1] Traceback (most
>> > recent
>> > call last):
>> > [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1]   File
>> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> > line
>> > 1537, in HandlerDispatch\n    default=default_handler, arg=req,
>> > silent=hlist.silent)
>> > [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1]   File
>> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> > line
>> > 1202, in _process_target\n    module = import_module(module_name,
>> > path=path)
>> > [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1]   File
>> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> > line
>> > 296, in import_module\n    log, import_path)
>> > [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1]   File
>> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> > line
>> > 680, in import_module\n    execfile(file, module.__dict__)
>> > Traceback (most recent call last):
>> >  File "D:\Programs\Python25\lib\site-packages\mod_python\importer.py",
>> > line
>> > 1784, in ReportError
>> >    import sys
>> > TypeError: argument 1 must be string without null bytes or None, not str
>> > [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1] python_handler:
>> > Dispatch() returned non-integer.
>> >
>> > -Mike
>> > At 11:49 PM 6/19/2008, Graham Dumpleton wrote:
>> >>
>> >> Instead of repr(), try str() then. Also try:
>> >>
>> >>  line[:-1].encode('UTF-8')
>> >>
>> >> I think.
>> >>
>> >> You might add at same level of indent in that loop:
>> >>
>> >>  import sys
>> >>  print >> sys.stderr, repr(line[:-1])
>> >>  sys.stderr.flush()
>> >>
>> >> This should hopefully flush out to Apache logs and by pass the
>> >> mod_python error log function.
>> >>
>> >> If still no luck, there may be some issue with Python installation, not
>> >> sure.
>> >>
>> >> Graham
>> >>
>> >> 2008/6/20 Mike Landis <mlandis001@comcast.net>:
>> >> > Graham,
>> >> >
>> >> > This result looks similar (if not identical).
>> >> >
>> >> > -Mike
>> >> >
>> >> > [Thu Jun 19 23:41:58 2008] [notice] mod_python (pid=3332,
>> >> > interpreter='localhost'): Importing module
>> >> > 'D:\\htdocs\\Python\\mptest.py'
>> >> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1] mod_python
>> >> > (pid=3332,
>> >> > interpreter='localhost', phase='PythonHandler', handler='mptest'):
>> >> > Application error
>> >> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1] ServerName:
>> >> > 'localhost'
>> >> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1] DocumentRoot:
>> >> > 'D:/htdocs'
>> >> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1] URI:
>> >> > '/Python/mptest.py'
>> >> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1] Location: None
>> >> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1] Directory:
>> >> > 'D:/htdocs/Python/'
>> >> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1] Filename:
>> >> > 'D:/htdocs/Python/mptest.py'
>> >> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1] PathInfo: ''
>> >> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1] Traceback (most
>> >> > recent
>> >> > call last):
>> >> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1]   File
>> >> >
>> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> > line
>> >> > 1537, in HandlerDispatch\n    default=default_handler, arg=req,
>> >> > silent=hlist.silent)
>> >> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1]   File
>> >> >
>> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> > line
>> >> > 1202, in _process_target\n    module = import_module(module_name,
>> >> > path=path)
>> >> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1]   File
>> >> >
>> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> > line
>> >> > 296, in import_module\n    log, import_path)
>> >> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1]   File
>> >> >
>> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> > line
>> >> > 680, in import_module\n    execfile(file, module.__dict__)
>> >> > Traceback (most recent call last):
>> >> >  File
>> >> > "D:\Programs\Python25\lib\site-packages\mod_python\importer.py",
>> >> > line
>> >> > 1784, in ReportError
>> >> >    log_error(repr(line[:-1]), flags)                           # was:
>> >> >  log_error(line[:-1], flags)
>> >> > TypeError: argument 1 must be string without null bytes or None, not
>> >> > str
>> >> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1] python_handler:
>> >> > Dispatch() returned non-integer.
>> >> >
>> >> > At 11:19 PM 6/19/2008, Graham Dumpleton wrote:
>> >> >>
>> >> >> Please use reply-all and keep followups on mailing list.
>> >> >>
>> >> >> Anyway, read message wrong first time. It isn't log_error() in your
>> >> >> code which is problem, but code in mod_python used to display error
>> >> >> tracebacks. In particular:
>> >> >>
>> >> >>            tb = traceback.format_exception(etype, evalue, etb)
>> >> >>
>> >> >>            for line in tb:
>> >> >>                log_error(line[:-1], flags)
>> >> >>
>> >> >> I can only image that somehow a Unicode character string has gotten
>> >> >> into traceback message from Python.
>> >> >>
>> >> >> What I suggest you do is modify the importer.py in mod_python
>> >> >> installed source so that that log_error() call reads:
>> >> >>
>> >> >>                log_error(repr(line[:-1]), flags)
>> >> >>
>> >> >> That should show you true error which is first occurring. Unicode
>> >> >> strings shouldn't be an issue then as are converting it all to
>> >> >> displayable latin.
>> >> >>
>> >> >> Please don't though just fix the error if in your code if obvious,
>> >> >> instead post the resultant error traceback to list so can see how
>> >> >> unicode string is getting into traceback.
>> >> >>
>> >> >> Graham
>> >> >>
>> >> >> 2008/6/20 Mike Landis <mlandis001@comcast.net>:
>> >> >> > Graham,
>> >> >> >
>> >> >> > The results look identical to me... (see immediately below)
>> >> >> >
>> >> >> > -Mike
>> >> >> >
>> >> >> > [Thu Jun 19 22:42:54 2008] [notice] mod_python (pid=3332,
>> >> >> > interpreter='localhost'): Importing module
>> >> >> > 'D:\\htdocs\\Python\\mptest.py'
>> >> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1] mod_python
>> >> >> > (pid=3332,
>> >> >> > interpreter='localhost', phase='PythonHandler', handler='mptest'):
>> >> >> > Application error
>> >> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1] ServerName:
>> >> >> > 'localhost'
>> >> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1]
>> >> >> > DocumentRoot:
>> >> >> > 'D:/htdocs'
>> >> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1] URI:
>> >> >> > '/Python/mptest.py'
>> >> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1] Location:
>> >> >> > None
>> >> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1] Directory:
>> >> >> > 'D:/htdocs/Python/'
>> >> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1] Filename:
>> >> >> > 'D:/htdocs/Python/mptest.py'
>> >> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1] PathInfo: ''
>> >> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1] Traceback
>> >> >> > (most
>> >> >> > recent
>> >> >> > call last):
>> >> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1]   File
>> >> >> >
>> >> >> >
>> >> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> >> > line
>> >> >> > 1537, in HandlerDispatch\n    default=default_handler, arg=req,
>> >> >> > silent=hlist.silent)
>> >> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1]   File
>> >> >> >
>> >> >> >
>> >> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> >> > line
>> >> >> > 1202, in _process_target\n    module = import_module(module_name,
>> >> >> > path=path)
>> >> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1]   File
>> >> >> >
>> >> >> >
>> >> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> >> > line
>> >> >> > 296, in import_module\n    log, import_path)
>> >> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1]   File
>> >> >> >
>> >> >> >
>> >> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> >> > line
>> >> >> > 680, in import_module\n    execfile(file, module.__dict__)
>> >> >> > Traceback (most recent call last):
>> >> >> >  File
>> >> >> > "D:\Programs\Python25\lib\site-packages\mod_python\importer.py",
>> >> >> > line
>> >> >> > 1784, in ReportError
>> >> >> >    log_error(line[:-1], flags)
>> >> >> > TypeError: argument 1 must be string without null bytes or None,
>> >> >> > not
>> >> >> > str
>> >> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1]
>> >> >> > python_handler:
>> >> >> > Dispatch() returned non-integer.
>> >> >> >
>> >> >> >
>> >> >> >
>> >> >> > ==========================================================================
>> >> >> > At 09:33 PM 6/19/2008, you wrote:
>> >> >> >>
>> >> >> >> What happens when you use:
>> >> >> >>
>> >> >> >>  from mod_python import apache
>> >> >> >>  apache.log_error('handler')
>> >> >> >>
>> >> >> >> instead?
>> >> >> >>
>> >> >> >> Graham
>> >> >> >>
>> >> >> >> 2008/6/16 Mike Landis <mlandis001@comcast.net>:
>> >> >> >> >
>> >> >> >> > 32 bit Windows Vista, Apache 2.2.8, mod_python 3.3.1, python
>> >> >> >> > 2.5.2.2
>> >> >> >> > (r252:60911)
>> >> >> >> >
>> >> >> >> > I received a 500 error from Apache httpd while attempting to
>> >> >> >> > get
>> >> >> >> > mod_python working on Windows Vista.  Following are entries
>> >> >> >> > from
>> >> >> >> > error.log, httpd.conf, and the Python source (mptest.py) used
>> >> >> >> > as a
>> >> >> >> > test
>> >> >> >> > case.  The error
>> >> >> >> > occurs within importer.py (part of the mod_pyton site-package).
>> >> >> >> >
>> >> >> >> > Apache httpd error log:
>> >> >> >> > [Sat Jun 14 16:22:29 2008] [notice] mod_python (pid=3708,
>> >> >> >> > interpreter='localhost'): Importing module
>> >> >> >> > 'D:\\htdocs\\Python\\mptest.py'
>> >> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]
>> >> >> >> > mod_python
>> >> >> >> > (pid=3708, interpreter='localhost', phase='PythonHandler',
>> >> >> >> > handler='mptest'): Application error
>> >> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]
>> >> >> >> > ServerName:
>> >> >> >> > 'localhost'
>> >> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]
>> >> >> >> > DocumentRoot:
>> >> >> >> > 'D:/htdocs'
>> >> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1] URI:
>> >> >> >> > '/Python/mptest.py'
>> >> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1] Location:
>> >> >> >> > None
>> >> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]
>> >> >> >> > Directory:
>> >> >> >> > 'D:/htdocs/Python/'
>> >> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1] Filename:
>> >> >> >> > 'D:/htdocs/Python/mptest.py'
>> >> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1] PathInfo:
>> >> >> >> > ''
>> >> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1] Traceback
>> >> >> >> > (most
>> >> >> >> > recent call last):
>> >> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]   File
>> >> >> >> >
>> >> >> >> >
>> >> >> >> >
>> >> >> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> >> >> > line 1537, in HandlerDispatch\n default=default_handler,
>> >> >> >> > arg=req,
>> >> >> >> > silent=hlist.silent)
>> >> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]   File
>> >> >> >> >
>> >> >> >> >
>> >> >> >> >
>> >> >> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> >> >> > line 1202, in _process_target\n module =
>> >> >> >> > import_module(module_name,
>> >> >> >> > path=path)
>> >> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]   File
>> >> >> >> >
>> >> >> >> >
>> >> >> >> >
>> >> >> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> >> >> > line 296, in import_module\n log, import_path)
>> >> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]   File
>> >> >> >> >
>> >> >> >> >
>> >> >> >> >
>> >> >> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> >> >> > line 680, in import_module\n execfile(file, module.__dict__)
>> >> >> >> > Traceback (most recent call last): File
>> >> >> >> >
>> >> >> >> > "D:\Programs\Python25\lib\site-packages\mod_python\importer.py",
>> >> >> >> > line 1784, in ReportError log_error(line[:-1], flags)
>> >> >> >> > TypeError: argument 1 must be string without null bytes or
>> >> >> >> > None,
>> >> >> >> > not
>> >> >> >> > str
>> >> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]
>> >> >> >> > python_handler:
>> >> >> >> > Dispatch() returned non-integer.
>> >> >> >> >
>> >> >> >> >
>> >> >> >> >
>> >> >> >> >
>> >> >> >> > --------------------------------------------------------------------------------
>> >> >> >> > httpd.conf entries:
>> >> >> >> > LoadModule python_module modules/mod_python.so
>> >> >> >> >
>> >> >> >> > <Directory D:\htdocs\Python>
>> >> >> >> >
>> >> >> >> > AddHandler      mod_python .py
>> >> >> >> >        PythonHandler   mptest
>> >> >> >> >        PythonDebug
>> >> >> >> > On
>> >> >> >> > </Directory>
>> >> >> >> >
>> >> >> >> >
>> >> >> >> >
>> >> >> >> >
>> >> >> >> > --------------------------------------------------------------------------------
>> >> >> >> > Python source (in mptest.py):
>> >> >> >> >
>> >> >> >> > from mod_python import apache
>> >> >> >> >
>> >> >> >> > def handler(req):
>> >> >> >> >         req.log_error('handler')
>> >> >> >> >         req.content_type =
>> >> >> >> > 'text/plain'
>> >> >> >> >         req.write('HelloWorld\n')
>> >> >> >> >         return apache.OK
>> >> >> >> >
>> >> >> >> >
>> >> >> >> >
>> >> >> >>
>> >> >> >> No virus found in this incoming message.
>> >> >> >> Checked by AVG.
>> >> >> >> Version: 8.0.100 / Virus Database: 270.4.0/1509 - Release Date:
>> >> >> >> 6/19/2008
>> >> >> >> 8:00 AM
>> >> >> >
>> >> >> >
>> >> >>
>> >> >> No virus found in this incoming message.
>> >> >> Checked by AVG.
>> >> >> Version: 8.0.100 / Virus Database: 270.4.0/1509 - Release Date:
>> >> >> 6/19/2008
>> >> >> 8:00 AM
>> >> >
>> >> >
>> >>
>> >> No virus found in this incoming message.
>> >> Checked by AVG.
>> >> Version: 8.0.100 / Virus Database: 270.4.0/1509 - Release Date:
>> >> 6/19/2008
>> >> 8:00 AM
>> >
>> >
>>
>> No virus found in this incoming message.
>> Checked by AVG.
>> Version: 8.0.100 / Virus Database: 270.4.0/1509 - Release Date: 6/19/2008
>> 8:00 AM
>
>
From haeusler at fotofinder.de  Fri Jun 20 03:31:15 2008
From: haeusler at fotofinder.de (=?UTF-8?B?S3VydCBIw6R1c2xlcg==?=)
Date: Fri Jun 20 03:31:25 2008
Subject: [mod_python] Unit Testing mod_python apps.
Message-ID: <485B5CC3.7090802@fotofinder.de>

Hi, new to the list, couldn't find anything in the archives so sorry if 
I am asking a FAQ but I am interested in hearing about any practices for 
unit testing mod_python apps. Specifically how to mock the Request 
object etc, without running in apache etc. Or any other approaches for 
testing handlers that take Request parameters that might involve not 
mocking the Request object, or perhaps running within apache afterall.

How do you guys do unit testing basically? What tools and techniques 
work well for mod_python apps?

Cheers
Kurt
____________
Virus checked by G DATA AntiVirus
Version: AVKA 18.303 from 19.06.2008
Virus news: www.antiviruslab.com


From martijn at xs4us.nu  Fri Jun 20 05:06:05 2008
From: martijn at xs4us.nu (Martijn Moeling)
Date: Fri Jun 20 05:06:17 2008
Subject: [mod_python] Unit Testing mod_python apps.
References: <485B5CC3.7090802@fotofinder.de>
Message-ID: <B6C73A5E30565245BB6D32B5F5DF7A52172DD2@sense.emmastraat.pijnacker>

Kurt,
 
I personally make python modules wich can be imported to the module with my handlers or which can run stand alaone. I have however a "dummy" which can fake httprequest and the request object (up to the point that the register_cleanup works). Other handlers are not supported (auth, filters etc). I would love to contribute that work into the community but I made it in "paid time" and are not allowed to distribute it.
 
What I did though is very simple, I created a class with all the members, methods etc. I found in the documentation. takes about half a day.
 
When I use it I just replace the from mod_python import apache to from mod_python_dummy import apache...
and I have to set stuff like http headers, URI etc by hand.
 
Things start to be a bit complicated when dealing with logins and sessions or lots of data but at the other hand building it helped me getting into this kind of development (I started on a project without any http (or any other web related techn. knowledge).
 
Martijn

________________________________

Van: mod_python-bounces@modpython.org namens Kurt H?usler
Verzonden: vr 20.06.2008 9:31
Aan: mod_python@modpython.org
Onderwerp: [mod_python] Unit Testing mod_python apps.



Hi, new to the list, couldn't find anything in the archives so sorry if
I am asking a FAQ but I am interested in hearing about any practices for
unit testing mod_python apps. Specifically how to mock the Request
object etc, without running in apache etc. Or any other approaches for
testing handlers that take Request parameters that might involve not
mocking the Request object, or perhaps running within apache afterall.

How do you guys do unit testing basically? What tools and techniques
work well for mod_python apps?

Cheers
Kurt
____________
Virus checked by G DATA AntiVirus
Version: AVKA 18.303 from 19.06.2008
Virus news: www.antiviruslab.com


_______________________________________________
Mod_python mailing list
Mod_python@modpython.org
http://mailman.modpython.org/mailman/listinfo/mod_python


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080620/f2b99897/attachment-0001.html
From graham.dumpleton at gmail.com  Fri Jun 20 06:01:28 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Fri Jun 20 06:02:31 2008
Subject: [mod_python] Re: mod_python 3.3.1 bug report
In-Reply-To: <485b3eb7.0c1e640a.7acf.ffff9d09SMTPIN_ADDED@mx.google.com>
References: <20080616045259.7066372494D@athena.apache.org>
	<485b1e37.1b36640a.1340.4452SMTPIN_ADDED@mx.google.com>
	<88e286470806192019s1a704c6eg1fc766e49620339b@mail.gmail.com>
	<485b27c5.3c432c0a.10e7.7420SMTPIN_ADDED@mx.google.com>
	<88e286470806192049k508790cbucb683f6cde4d5134@mail.gmail.com>
	<485b313b.281d640a.0664.65beSMTPIN_ADDED@mx.google.com>
	<88e286470806192128i2373aec8u4dbeafcf558271d7@mail.gmail.com>
	<485b3809.03172c0a.4a72.78a7SMTPIN_ADDED@mx.google.com>
	<88e286470806192201xbefc782j68de3d9d8b3b47a3@mail.gmail.com>
	<485b3eb7.0c1e640a.7acf.ffff9d09SMTPIN_ADDED@mx.google.com>
Message-ID: <88e286470806200301s6992ae08p74f27778348d8154@mail.gmail.com>

The HTML output you sent has nothing to do with mptest.py code file,
it would be for when you have defined:

  PythonHandler mod_python.testhandler

You could could use any URL with a .py extension on it and it would do this.

If you put it back to:

  PythonHandler mptest

does it still fail. If it does, try deleting mptest.py completely and
start over. Maybe it is some issue with CRLF.

Anyway, as for uninstalling Python, you'll need to wait for someone
who knows about mod_python on Windows to help. I have run out of
educated guesses.

BTW, if all you want to do is run Python web applications which
support WSGI interfaces, eg. Trac, Django etc, maybe you should give
mod_wsgi a go instead.

Graham

2008/6/20 Mike Landis <mlandis001@comcast.net>:
> Graham,
>
> The mod_python package distributed for windows is not an .msi file, so
> there's no uninstall script auto-generated by windows, but you can (and I
> did) reinstall the package over the top of the existing install.  It
> produced some errors that I hadn't seen the first time (the original install
> was error free) - I've attached screen-shots of the errors.
>
> The install script allowed me to continue and it seemed to complete despite
> the errors.  I restarted Apache and got lots of output when I pulled up
> mptest.py in a browser.  I attached that output as a .htm file.
>
> -Mike
>
> At 01:01 AM 6/20/2008, Graham Dumpleton wrote:
>>
>> I literally meant to run the 'uninstall' script for mod_python and
>> Python and run 'install' or 'setup' to reinstall them from scratch.
>> Not just put back importer.py.
>>
>> I have never used mod_python on Windows so not sure about details of
>> where deinstaller stuff for each will be. Perhaps someone else on list
>> can say what needs to be done to remove and then reinstall each.
>>
>> Graham
>>
>> 2008/6/20 Mike Landis <mlandis001@comcast.net>:
>> > Graham,
>> >
>> > I restored importer.py to its originally distributed state (hope that's
>> > what
>> > you'd want), made the changes to httpd.conf, restarted Apache, reloaded
>> > mptest.py in the browser (to get mod_python kicked off) and got this:
>> >
>> > [Fri Jun 20 00:44:41 2008] [notice] Parent: Received restart signal --
>> > Restarting the server.
>> > [Fri Jun 20 00:44:42 2008] [notice] Child 3332: Exit event signaled.
>> > Child
>> > process is ending.
>> > [Fri Jun 20 00:44:42 2008] [warn] mod_wsgi: Compiled for Python/2.5.
>> > [Fri Jun 20 00:44:42 2008] [warn] mod_wsgi: Runtime using Python/2.5.2.
>> > [Fri Jun 20 00:44:42 2008] [warn] mod_wsgi: Python module path
>> >
>> > 'C:\\Windows\\system32\\python25.zip;D:\\Programs\\Python25\\Lib;D:\\Programs\\Python25\\DLLs;D:\\Programs\\Python25\\Lib\\lib-tk;;D:\\Programs\\Apache
>> > Software Foundation\\Apache2.2\\bin'.
>> > [Fri Jun 20 00:44:42 2008] [notice] Apache/2.2.8 (Win32) DAV/2 PHP/5.2.6
>> > mod_wsgi/2.0 Python/2.5.2 configured -- resuming normal operations
>> > [Fri Jun 20 00:44:42 2008] [notice] Server built: Jan 18 2008 00:37:19
>> > [Fri Jun 20 00:44:42 2008] [notice] Parent: Created child process 7528
>> > [Fri Jun 20 00:44:42 2008] [error] python_init: Python version mismatch,
>> > expected '2.5', found '2.5.2'.
>> > [Fri Jun 20 00:44:42 2008] [error] python_init: Python executable found
>> > 'D:\\Programs\\Apache Software Foundation\\Apache2.2\\bin\\httpd.exe'.
>> > [Fri Jun 20 00:44:42 2008] [error] python_init: Python path being used
>> >
>> > 'C:\\Windows\\system32\\python25.zip;D:\\Programs\\Python25\\Lib;D:\\Programs\\Python25\\DLLs;D:\\Programs\\Python25\\Lib\\lib-tk;;D:\\Programs\\Apache
>> > Software Foundation\\Apache2.2\\bin'.
>> > [Fri Jun 20 00:44:42 2008] [notice] mod_python: Creating 8 session
>> > mutexes
>> > based on 0 max processes and 250 max threads.
>> > [Fri Jun 20 00:44:42 2008] [warn] mod_wsgi: Compiled for Python/2.5.
>> > [Fri Jun 20 00:44:42 2008] [warn] mod_wsgi: Runtime using Python/2.5.2.
>> > [Fri Jun 20 00:44:42 2008] [warn] mod_wsgi: Python module path
>> >
>> > 'C:\\Windows\\system32\\python25.zip;D:\\Programs\\Python25\\Lib;D:\\Programs\\Python25\\DLLs;D:\\Programs\\Python25\\Lib\\lib-tk;;D:\\Programs\\Apache
>> > Software Foundation\\Apache2.2\\bin'.
>> > [Fri Jun 20 00:44:42 2008] [notice] Child 7528: Child process is running
>> > [Fri Jun 20 00:44:43 2008] [notice] Child 7528: Acquired the start
>> > mutex.
>> > [Fri Jun 20 00:44:43 2008] [notice] Child 7528: Starting 250 worker
>> > threads.
>> > [Fri Jun 20 00:44:43 2008] [notice] Child 3332: Released the start mutex
>> > [Fri Jun 20 00:44:44 2008] [notice] Child 3332: All worker threads have
>> > exited.
>> > [Fri Jun 20 00:44:44 2008] [notice] Child 3332: Child process is exiting
>> > [Fri Jun 20 00:44:44 2008] [notice] Child 7528: Starting thread to
>> > listen on
>> > port 80.
>> > [Fri Jun 20 00:45:13 2008] [error] make_obcallback: could not call
>> > init.\n
>> > Traceback (most recent call last):
>> >  File "D:\Programs\Python25\Lib\site-packages\mod_python\apache.py",
>> > line
>> > 937, in init
>> >    from mod_python import importer
>> >  File "D:\Programs\Python25\lib\site-packages\mod_python\importer.py",
>> > line
>> > 1783
>> >    for line in tb:
>> >    ^
>> > IndentationError: unexpected indent
>> > [Fri Jun 20 00:45:13 2008] [error] get_interpreter: no interpreter
>> > callback
>> > found.
>> > [Fri Jun 20 00:45:13 2008] [error] [client 127.0.0.1] python_handler:
>> > Can't
>> > get/create interpreter.
>> >
>> > I also dropped importer.py into a hex editor to see if there was an
>> > invisible character or something gumming up the works.  As far as I can
>> > tell, it looks like standard ASCII - all of the whitespace and
>> > non-printable
>> > characters near the 'for line in tb:' are ordinary whitespace:  0x0A,
>> > 0x09,
>> > and 0x20 (TAB, LF, and SPACE).
>> >
>> > -Mike
>> > At 12:28 AM 6/20/2008, Graham Dumpleton wrote:
>> >>
>> >> Huh, that doesn't quite make sense. Can you replace:
>> >>
>> >>  PythonHandler mptest
>> >>
>> >> with:
>> >>
>> >>  PythonHandler mod_python.testhandler
>> >>
>> >> This will use an inbuilt test handler within mod_python and return a
>> >> lot of debug if it works.
>> >>
>> >> If that still doesn't work, can only suggest uninstalling both Python
>> >> and mod_python and reinstalling, making sure they are installed as
>> >> account with Administrator privileges for good measure.
>> >>
>> >> Graham
>> >>
>> >> 2008/6/20 Mike Landis <mlandis001@comcast.net>:
>> >> > Graham,
>> >> >
>> >> > I'm sorry, 'line' is defined by the for loop, so you wanted all three
>> >> > lines
>> >> > within the for loop, as follows...
>> >> >            for line in tb:
>> >> >                                import sys
>> >> >                                print >> sys.stderr, repr(line[:-1])
>> >> >                                sys.stderr.flush()
>> >> >                                log_error(line[:-1], flags)
>> >> >
>> >> > that produces:
>> >> > [Fri Jun 20 00:24:18 2008] [notice] mod_python (pid=3332,
>> >> > interpreter='localhost'): Importing module
>> >> > 'D:\\htdocs\\Python\\mptest.py'
>> >> > [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1] mod_python
>> >> > (pid=3332,
>> >> > interpreter='localhost', phase='PythonHandler', handler='mptest'):
>> >> > Application error
>> >> > [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1] ServerName:
>> >> > 'localhost'
>> >> > [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1] DocumentRoot:
>> >> > 'D:/htdocs'
>> >> > [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1] URI:
>> >> > '/Python/mptest.py'
>> >> > [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1] Location: None
>> >> > [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1] Directory:
>> >> > 'D:/htdocs/Python/'
>> >> > [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1] Filename:
>> >> > 'D:/htdocs/Python/mptest.py'
>> >> > [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1] PathInfo: ''
>> >> > [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1] Traceback (most
>> >> > recent
>> >> > call last):
>> >> > [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1]   File
>> >> >
>> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> > line
>> >> > 1537, in HandlerDispatch\n    default=default_handler, arg=req,
>> >> > silent=hlist.silent)
>> >> > [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1]   File
>> >> >
>> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> > line
>> >> > 1202, in _process_target\n    module = import_module(module_name,
>> >> > path=path)
>> >> > [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1]   File
>> >> >
>> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> > line
>> >> > 296, in import_module\n    log, import_path)
>> >> > [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1]   File
>> >> >
>> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> > line
>> >> > 680, in import_module\n    execfile(file, module.__dict__)
>> >> > Traceback (most recent call last):
>> >> >  File
>> >> > "D:\Programs\Python25\lib\site-packages\mod_python\importer.py",
>> >> > line
>> >> > 1784, in ReportError
>> >> >    import sys
>> >> > TypeError: argument 1 must be string without null bytes or None, not
>> >> > str
>> >> > [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1] python_handler:
>> >> > Dispatch() returned non-integer.
>> >> >
>> >> > -Mike
>> >> > At 11:49 PM 6/19/2008, Graham Dumpleton wrote:
>> >> >>
>> >> >> Instead of repr(), try str() then. Also try:
>> >> >>
>> >> >>  line[:-1].encode('UTF-8')
>> >> >>
>> >> >> I think.
>> >> >>
>> >> >> You might add at same level of indent in that loop:
>> >> >>
>> >> >>  import sys
>> >> >>  print >> sys.stderr, repr(line[:-1])
>> >> >>  sys.stderr.flush()
>> >> >>
>> >> >> This should hopefully flush out to Apache logs and by pass the
>> >> >> mod_python error log function.
>> >> >>
>> >> >> If still no luck, there may be some issue with Python installation,
>> >> >> not
>> >> >> sure.
>> >> >>
>> >> >> Graham
>> >> >>
>> >> >> 2008/6/20 Mike Landis <mlandis001@comcast.net>:
>> >> >> > Graham,
>> >> >> >
>> >> >> > This result looks similar (if not identical).
>> >> >> >
>> >> >> > -Mike
>> >> >> >
>> >> >> > [Thu Jun 19 23:41:58 2008] [notice] mod_python (pid=3332,
>> >> >> > interpreter='localhost'): Importing module
>> >> >> > 'D:\\htdocs\\Python\\mptest.py'
>> >> >> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1] mod_python
>> >> >> > (pid=3332,
>> >> >> > interpreter='localhost', phase='PythonHandler', handler='mptest'):
>> >> >> > Application error
>> >> >> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1] ServerName:
>> >> >> > 'localhost'
>> >> >> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1]
>> >> >> > DocumentRoot:
>> >> >> > 'D:/htdocs'
>> >> >> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1] URI:
>> >> >> > '/Python/mptest.py'
>> >> >> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1] Location:
>> >> >> > None
>> >> >> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1] Directory:
>> >> >> > 'D:/htdocs/Python/'
>> >> >> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1] Filename:
>> >> >> > 'D:/htdocs/Python/mptest.py'
>> >> >> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1] PathInfo: ''
>> >> >> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1] Traceback
>> >> >> > (most
>> >> >> > recent
>> >> >> > call last):
>> >> >> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1]   File
>> >> >> >
>> >> >> >
>> >> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> >> > line
>> >> >> > 1537, in HandlerDispatch\n    default=default_handler, arg=req,
>> >> >> > silent=hlist.silent)
>> >> >> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1]   File
>> >> >> >
>> >> >> >
>> >> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> >> > line
>> >> >> > 1202, in _process_target\n    module = import_module(module_name,
>> >> >> > path=path)
>> >> >> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1]   File
>> >> >> >
>> >> >> >
>> >> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> >> > line
>> >> >> > 296, in import_module\n    log, import_path)
>> >> >> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1]   File
>> >> >> >
>> >> >> >
>> >> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> >> > line
>> >> >> > 680, in import_module\n    execfile(file, module.__dict__)
>> >> >> > Traceback (most recent call last):
>> >> >> >  File
>> >> >> > "D:\Programs\Python25\lib\site-packages\mod_python\importer.py",
>> >> >> > line
>> >> >> > 1784, in ReportError
>> >> >> >    log_error(repr(line[:-1]), flags)                           #
>> >> >> > was:
>> >> >> >  log_error(line[:-1], flags)
>> >> >> > TypeError: argument 1 must be string without null bytes or None,
>> >> >> > not
>> >> >> > str
>> >> >> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1]
>> >> >> > python_handler:
>> >> >> > Dispatch() returned non-integer.
>> >> >> >
>> >> >> > At 11:19 PM 6/19/2008, Graham Dumpleton wrote:
>> >> >> >>
>> >> >> >> Please use reply-all and keep followups on mailing list.
>> >> >> >>
>> >> >> >> Anyway, read message wrong first time. It isn't log_error() in
>> >> >> >> your
>> >> >> >> code which is problem, but code in mod_python used to display
>> >> >> >> error
>> >> >> >> tracebacks. In particular:
>> >> >> >>
>> >> >> >>            tb = traceback.format_exception(etype, evalue, etb)
>> >> >> >>
>> >> >> >>            for line in tb:
>> >> >> >>                log_error(line[:-1], flags)
>> >> >> >>
>> >> >> >> I can only image that somehow a Unicode character string has
>> >> >> >> gotten
>> >> >> >> into traceback message from Python.
>> >> >> >>
>> >> >> >> What I suggest you do is modify the importer.py in mod_python
>> >> >> >> installed source so that that log_error() call reads:
>> >> >> >>
>> >> >> >>                log_error(repr(line[:-1]), flags)
>> >> >> >>
>> >> >> >> That should show you true error which is first occurring. Unicode
>> >> >> >> strings shouldn't be an issue then as are converting it all to
>> >> >> >> displayable latin.
>> >> >> >>
>> >> >> >> Please don't though just fix the error if in your code if
>> >> >> >> obvious,
>> >> >> >> instead post the resultant error traceback to list so can see how
>> >> >> >> unicode string is getting into traceback.
>> >> >> >>
>> >> >> >> Graham
>> >> >> >>
>> >> >> >> 2008/6/20 Mike Landis <mlandis001@comcast.net>:
>> >> >> >> > Graham,
>> >> >> >> >
>> >> >> >> > The results look identical to me... (see immediately below)
>> >> >> >> >
>> >> >> >> > -Mike
>> >> >> >> >
>> >> >> >> > [Thu Jun 19 22:42:54 2008] [notice] mod_python (pid=3332,
>> >> >> >> > interpreter='localhost'): Importing module
>> >> >> >> > 'D:\\htdocs\\Python\\mptest.py'
>> >> >> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1]
>> >> >> >> > mod_python
>> >> >> >> > (pid=3332,
>> >> >> >> > interpreter='localhost', phase='PythonHandler',
>> >> >> >> > handler='mptest'):
>> >> >> >> > Application error
>> >> >> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1]
>> >> >> >> > ServerName:
>> >> >> >> > 'localhost'
>> >> >> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1]
>> >> >> >> > DocumentRoot:
>> >> >> >> > 'D:/htdocs'
>> >> >> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1] URI:
>> >> >> >> > '/Python/mptest.py'
>> >> >> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1] Location:
>> >> >> >> > None
>> >> >> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1]
>> >> >> >> > Directory:
>> >> >> >> > 'D:/htdocs/Python/'
>> >> >> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1] Filename:
>> >> >> >> > 'D:/htdocs/Python/mptest.py'
>> >> >> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1] PathInfo:
>> >> >> >> > ''
>> >> >> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1] Traceback
>> >> >> >> > (most
>> >> >> >> > recent
>> >> >> >> > call last):
>> >> >> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1]   File
>> >> >> >> >
>> >> >> >> >
>> >> >> >> >
>> >> >> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> >> >> > line
>> >> >> >> > 1537, in HandlerDispatch\n    default=default_handler, arg=req,
>> >> >> >> > silent=hlist.silent)
>> >> >> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1]   File
>> >> >> >> >
>> >> >> >> >
>> >> >> >> >
>> >> >> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> >> >> > line
>> >> >> >> > 1202, in _process_target\n    module =
>> >> >> >> > import_module(module_name,
>> >> >> >> > path=path)
>> >> >> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1]   File
>> >> >> >> >
>> >> >> >> >
>> >> >> >> >
>> >> >> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> >> >> > line
>> >> >> >> > 296, in import_module\n    log, import_path)
>> >> >> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1]   File
>> >> >> >> >
>> >> >> >> >
>> >> >> >> >
>> >> >> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> >> >> > line
>> >> >> >> > 680, in import_module\n    execfile(file, module.__dict__)
>> >> >> >> > Traceback (most recent call last):
>> >> >> >> >  File
>> >> >> >> >
>> >> >> >> > "D:\Programs\Python25\lib\site-packages\mod_python\importer.py",
>> >> >> >> > line
>> >> >> >> > 1784, in ReportError
>> >> >> >> >    log_error(line[:-1], flags)
>> >> >> >> > TypeError: argument 1 must be string without null bytes or
>> >> >> >> > None,
>> >> >> >> > not
>> >> >> >> > str
>> >> >> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1]
>> >> >> >> > python_handler:
>> >> >> >> > Dispatch() returned non-integer.
>> >> >> >> >
>> >> >> >> >
>> >> >> >> >
>> >> >> >> >
>> >> >> >> > ==========================================================================
>> >> >> >> > At 09:33 PM 6/19/2008, you wrote:
>> >> >> >> >>
>> >> >> >> >> What happens when you use:
>> >> >> >> >>
>> >> >> >> >>  from mod_python import apache
>> >> >> >> >>  apache.log_error('handler')
>> >> >> >> >>
>> >> >> >> >> instead?
>> >> >> >> >>
>> >> >> >> >> Graham
>> >> >> >> >>
>> >> >> >> >> 2008/6/16 Mike Landis <mlandis001@comcast.net>:
>> >> >> >> >> >
>> >> >> >> >> > 32 bit Windows Vista, Apache 2.2.8, mod_python 3.3.1, python
>> >> >> >> >> > 2.5.2.2
>> >> >> >> >> > (r252:60911)
>> >> >> >> >> >
>> >> >> >> >> > I received a 500 error from Apache httpd while attempting to
>> >> >> >> >> > get
>> >> >> >> >> > mod_python working on Windows Vista.  Following are entries
>> >> >> >> >> > from
>> >> >> >> >> > error.log, httpd.conf, and the Python source (mptest.py)
>> >> >> >> >> > used
>> >> >> >> >> > as a
>> >> >> >> >> > test
>> >> >> >> >> > case.  The error
>> >> >> >> >> > occurs within importer.py (part of the mod_pyton
>> >> >> >> >> > site-package).
>> >> >> >> >> >
>> >> >> >> >> > Apache httpd error log:
>> >> >> >> >> > [Sat Jun 14 16:22:29 2008] [notice] mod_python (pid=3708,
>> >> >> >> >> > interpreter='localhost'): Importing module
>> >> >> >> >> > 'D:\\htdocs\\Python\\mptest.py'
>> >> >> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]
>> >> >> >> >> > mod_python
>> >> >> >> >> > (pid=3708, interpreter='localhost', phase='PythonHandler',
>> >> >> >> >> > handler='mptest'): Application error
>> >> >> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]
>> >> >> >> >> > ServerName:
>> >> >> >> >> > 'localhost'
>> >> >> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]
>> >> >> >> >> > DocumentRoot:
>> >> >> >> >> > 'D:/htdocs'
>> >> >> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1] URI:
>> >> >> >> >> > '/Python/mptest.py'
>> >> >> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]
>> >> >> >> >> > Location:
>> >> >> >> >> > None
>> >> >> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]
>> >> >> >> >> > Directory:
>> >> >> >> >> > 'D:/htdocs/Python/'
>> >> >> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]
>> >> >> >> >> > Filename:
>> >> >> >> >> > 'D:/htdocs/Python/mptest.py'
>> >> >> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]
>> >> >> >> >> > PathInfo:
>> >> >> >> >> > ''
>> >> >> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]
>> >> >> >> >> > Traceback
>> >> >> >> >> > (most
>> >> >> >> >> > recent call last):
>> >> >> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]   File
>> >> >> >> >> >
>> >> >> >> >> >
>> >> >> >> >> >
>> >> >> >> >> >
>> >> >> >> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> >> >> >> > line 1537, in HandlerDispatch\n default=default_handler,
>> >> >> >> >> > arg=req,
>> >> >> >> >> > silent=hlist.silent)
>> >> >> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]   File
>> >> >> >> >> >
>> >> >> >> >> >
>> >> >> >> >> >
>> >> >> >> >> >
>> >> >> >> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> >> >> >> > line 1202, in _process_target\n module =
>> >> >> >> >> > import_module(module_name,
>> >> >> >> >> > path=path)
>> >> >> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]   File
>> >> >> >> >> >
>> >> >> >> >> >
>> >> >> >> >> >
>> >> >> >> >> >
>> >> >> >> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> >> >> >> > line 296, in import_module\n log, import_path)
>> >> >> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]   File
>> >> >> >> >> >
>> >> >> >> >> >
>> >> >> >> >> >
>> >> >> >> >> >
>> >> >> >> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> >> >> >> > line 680, in import_module\n execfile(file, module.__dict__)
>> >> >> >> >> > Traceback (most recent call last): File
>> >> >> >> >> >
>> >> >> >> >> >
>> >> >> >> >> > "D:\Programs\Python25\lib\site-packages\mod_python\importer.py",
>> >> >> >> >> > line 1784, in ReportError log_error(line[:-1], flags)
>> >> >> >> >> > TypeError: argument 1 must be string without null bytes or
>> >> >> >> >> > None,
>> >> >> >> >> > not
>> >> >> >> >> > str
>> >> >> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]
>> >> >> >> >> > python_handler:
>> >> >> >> >> > Dispatch() returned non-integer.
>> >> >> >> >> >
>> >> >> >> >> >
>> >> >> >> >> >
>> >> >> >> >> >
>> >> >> >> >> >
>> >> >> >> >> > --------------------------------------------------------------------------------
>> >> >> >> >> > httpd.conf entries:
>> >> >> >> >> > LoadModule python_module modules/mod_python.so
>> >> >> >> >> >
>> >> >> >> >> > <Directory D:\htdocs\Python>
>> >> >> >> >> >
>> >> >> >> >> > AddHandler      mod_python .py
>> >> >> >> >> >        PythonHandler   mptest
>> >> >> >> >> >        PythonDebug
>> >> >> >> >> > On
>> >> >> >> >> > </Directory>
>> >> >> >> >> >
>> >> >> >> >> >
>> >> >> >> >> >
>> >> >> >> >> >
>> >> >> >> >> >
>> >> >> >> >> > --------------------------------------------------------------------------------
>> >> >> >> >> > Python source (in mptest.py):
>> >> >> >> >> >
>> >> >> >> >> > from mod_python import apache
>> >> >> >> >> >
>> >> >> >> >> > def handler(req):
>> >> >> >> >> >         req.log_error('handler')
>> >> >> >> >> >         req.content_type =
>> >> >> >> >> > 'text/plain'
>> >> >> >> >> >         req.write('HelloWorld\n')
>> >> >> >> >> >         return apache.OK
>> >> >> >> >> >
>> >> >> >> >> >
>> >> >> >> >> >
>> >> >> >> >>
>> >> >> >> >> No virus found in this incoming message.
>> >> >> >> >> Checked by AVG.
>> >> >> >> >> Version: 8.0.100 / Virus Database: 270.4.0/1509 - Release
>> >> >> >> >> Date:
>> >> >> >> >> 6/19/2008
>> >> >> >> >> 8:00 AM
>> >> >> >> >
>> >> >> >> >
>> >> >> >>
>> >> >> >> No virus found in this incoming message.
>> >> >> >> Checked by AVG.
>> >> >> >> Version: 8.0.100 / Virus Database: 270.4.0/1509 - Release Date:
>> >> >> >> 6/19/2008
>> >> >> >> 8:00 AM
>> >> >> >
>> >> >> >
>> >> >>
>> >> >> No virus found in this incoming message.
>> >> >> Checked by AVG.
>> >> >> Version: 8.0.100 / Virus Database: 270.4.0/1509 - Release Date:
>> >> >> 6/19/2008
>> >> >> 8:00 AM
>> >> >
>> >> >
>> >>
>> >> No virus found in this incoming message.
>> >> Checked by AVG.
>> >> Version: 8.0.100 / Virus Database: 270.4.0/1509 - Release Date:
>> >> 6/19/2008
>> >> 8:00 AM
>> >
>> >
>>
>> No virus found in this incoming message.
>> Checked by AVG.
>> Version: 8.0.100 / Virus Database: 270.4.0/1509 - Release Date: 6/19/2008
>> 8:00 AM
>
From graham.dumpleton at gmail.com  Fri Jun 20 21:35:50 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Fri Jun 20 21:35:57 2008
Subject: [mod_python] Re: mod_python 3.3.1 bug report
In-Reply-To: <485bbb4c.0335640a.3ade.0c81SMTPIN_ADDED@mx.google.com>
References: <20080616045259.7066372494D@athena.apache.org>
	<485b27c5.3c432c0a.10e7.7420SMTPIN_ADDED@mx.google.com>
	<88e286470806192049k508790cbucb683f6cde4d5134@mail.gmail.com>
	<485b313b.281d640a.0664.65beSMTPIN_ADDED@mx.google.com>
	<88e286470806192128i2373aec8u4dbeafcf558271d7@mail.gmail.com>
	<485b3809.03172c0a.4a72.78a7SMTPIN_ADDED@mx.google.com>
	<88e286470806192201xbefc782j68de3d9d8b3b47a3@mail.gmail.com>
	<485b3eb7.0c1e640a.7acf.ffff9d09SMTPIN_ADDED@mx.google.com>
	<88e286470806200301s6992ae08p74f27778348d8154@mail.gmail.com>
	<485bbb4c.0335640a.3ade.0c81SMTPIN_ADDED@mx.google.com>
Message-ID: <88e286470806201835j5fbac510ta124fffe30cf7a8e@mail.gmail.com>

2008/6/21 Mike Landis <mlandis001@comcast.net>:
> Graham,
>
> Here's the error.log entry with the PythonHandler set to mptest.  I don't
> know how various frameworks work with Apache - the only one that I know for
> sure works with WSGI is Web2py and it seems to be fine.  Pylons, Django ...
> are recommending mod_python.  Web2py looks good, but I didn't want the
> Apache interface to make the decision for me.

All the major frameworks support WSGI, Django, TurboGears, Pylons,
CherryPy, web.py and up and comers such as Werkzeug.

Although Django may say use mod_python, general consensus is rapidly
moving to use of mod_wsgi, it is just that developers who maintain web
site haven't decided yet to make a statement that mod_wsgi is equally
as capable as mod_python.

As to web2py, it would not be one of my first choices. It may be more
glitzy and have better marketing speak around it, but having seen some
of the code in it and heard various critiques by others about it, I'd
be looking elsewhere. I'd probably suggest Django for high level
framework and Werkzeug if you want a more low level nuts and bolts
approach.

Graham

> -Mike
> [Fri Jun 20 10:02:44 2008] [notice] Parent: Received restart signal --
> Restarting the server.
> [Fri Jun 20 10:02:44 2008] [notice] Child 5896: Exit event signaled. Child
> process is ending.
> [Fri Jun 20 10:02:44 2008] [warn] mod_wsgi: Compiled for Python/2.5.
> [Fri Jun 20 10:02:44 2008] [warn] mod_wsgi: Runtime using Python/2.5.2.
> [Fri Jun 20 10:02:44 2008] [warn] mod_wsgi: Python module path
> 'C:\\Windows\\system32\\python25.zip;D:\\Programs\\Python25\\Lib;D:\\Programs\\Python25\\DLLs;D:\\Programs\\Python25\\Lib\\lib-tk;;D:\\Programs\\Apache
> Software Foundation\\Apache2.2\\bin'.
> [Fri Jun 20 10:02:45 2008] [notice] Apache/2.2.8 (Win32) DAV/2 PHP/5.2.6
> mod_wsgi/2.0 Python/2.5.2 configured -- resuming normal operations
> [Fri Jun 20 10:02:45 2008] [notice] Server built: Jan 18 2008 00:37:19
> [Fri Jun 20 10:02:45 2008] [notice] Parent: Created child process 4356
> [Fri Jun 20 10:02:45 2008] [notice] Child 5896: Released the start mutex
> [Fri Jun 20 10:02:45 2008] [error] python_init: Python version mismatch,
> expected '2.5', found '2.5.2'.
> [Fri Jun 20 10:02:45 2008] [error] python_init: Python executable found
> 'D:\\Programs\\Apache Software Foundation\\Apache2.2\\bin\\httpd.exe'.
> [Fri Jun 20 10:02:45 2008] [error] python_init: Python path being used
> 'C:\\Windows\\system32\\python25.zip;D:\\Programs\\Python25\\Lib;D:\\Programs\\Python25\\DLLs;D:\\Programs\\Python25\\Lib\\lib-tk;;D:\\Programs\\Apache
> Software Foundation\\Apache2.2\\bin'.
> [Fri Jun 20 10:02:45 2008] [notice] mod_python: Creating 8 session mutexes
> based on 0 max processes and 250 max threads.
> [Fri Jun 20 10:02:45 2008] [warn] mod_wsgi: Compiled for Python/2.5.
> [Fri Jun 20 10:02:45 2008] [warn] mod_wsgi: Runtime using Python/2.5.2.
> [Fri Jun 20 10:02:45 2008] [warn] mod_wsgi: Python module path
> 'C:\\Windows\\system32\\python25.zip;D:\\Programs\\Python25\\Lib;D:\\Programs\\Python25\\DLLs;D:\\Programs\\Python25\\Lib\\lib-tk;;D:\\Programs\\Apache
> Software Foundation\\Apache2.2\\bin'.
> [Fri Jun 20 10:02:45 2008] [notice] Child 4356: Child process is running
> [Fri Jun 20 10:02:45 2008] [notice] Child 4356: Acquired the start mutex.
> [Fri Jun 20 10:02:45 2008] [notice] Child 4356: Starting 250 worker threads.
> [Fri Jun 20 10:02:45 2008] [notice] Child 4356: Starting thread to listen on
> port 80.
> [Fri Jun 20 10:02:46 2008] [notice] Child 5896: All worker threads have
> exited.
> [Fri Jun 20 10:02:46 2008] [notice] Child 5896: Child process is exiting
> [Fri Jun 20 10:02:55 2008] [notice] mod_python (pid=4356,
> interpreter='localhost'): Importing module 'D:\\htdocs\\Python\\mptest.py'
> [Fri Jun 20 10:02:55 2008] [error] [client 127.0.0.1] mod_python (pid=4356,
> interpreter='localhost', phase='PythonHandler', handler='mptest'):
> Application error
> [Fri Jun 20 10:02:55 2008] [error] [client 127.0.0.1] ServerName:
> 'localhost'
> [Fri Jun 20 10:02:55 2008] [error] [client 127.0.0.1] DocumentRoot:
> 'D:/htdocs'
> [Fri Jun 20 10:02:55 2008] [error] [client 127.0.0.1] URI:
> '/Python/mptest.py'
> [Fri Jun 20 10:02:55 2008] [error] [client 127.0.0.1] Location: None
> [Fri Jun 20 10:02:55 2008] [error] [client 127.0.0.1] Directory:
> 'D:/htdocs/Python/'
> [Fri Jun 20 10:02:55 2008] [error] [client 127.0.0.1] Filename:
> 'D:/htdocs/Python/mptest.py'
> [Fri Jun 20 10:02:55 2008] [error] [client 127.0.0.1] PathInfo: ''
> [Fri Jun 20 10:02:55 2008] [error] [client 127.0.0.1] Traceback (most recent
> call last):
> [Fri Jun 20 10:02:55 2008] [error] [client 127.0.0.1]   File
> "D:\\Programs\\Python25\\Lib\\site-packages\\mod_python\\importer.py", line
> 1537, in HandlerDispatch\n    default=default_handler, arg=req,
> silent=hlist.silent)
> [Fri Jun 20 10:02:55 2008] [error] [client 127.0.0.1]   File
> "D:\\Programs\\Python25\\Lib\\site-packages\\mod_python\\importer.py", line
> 1202, in _process_target\n    module = import_module(module_name, path=path)
> [Fri Jun 20 10:02:55 2008] [error] [client 127.0.0.1]   File
> "D:\\Programs\\Python25\\Lib\\site-packages\\mod_python\\importer.py", line
> 296, in import_module\n    log, import_path)
> [Fri Jun 20 10:02:55 2008] [error] [client 127.0.0.1]   File
> "D:\\Programs\\Python25\\Lib\\site-packages\\mod_python\\importer.py", line
> 680, in import_module\n    execfile(file, module.__dict__)
> Traceback (most recent call last):
>  File "D:\Programs\Python25\Lib\site-packages\mod_python\importer.py", line
> 1784, in ReportError
>    log_error(line[:-1], flags)
> TypeError: argument 1 must be string without null bytes or None, not str
> [Fri Jun 20 10:02:55 2008] [error] [client 127.0.0.1] python_handler:
> Dispatch() returned non-integer.
>
>
> At 06:01 AM 6/20/2008, Graham Dumpleton wrote:
>>
>> The HTML output you sent has nothing to do with mptest.py code file,
>> it would be for when you have defined:
>>
>>  PythonHandler mod_python.testhandler
>>
>> You could could use any URL with a .py extension on it and it would do
>> this.
>>
>> If you put it back to:
>>
>>  PythonHandler mptest
>>
>> does it still fail. If it does, try deleting mptest.py completely and
>> start over. Maybe it is some issue with CRLF.
>>
>> Anyway, as for uninstalling Python, you'll need to wait for someone
>> who knows about mod_python on Windows to help. I have run out of
>> educated guesses.
>>
>> BTW, if all you want to do is run Python web applications which
>> support WSGI interfaces, eg. Trac, Django etc, maybe you should give
>> mod_wsgi a go instead.
>>
>> Graham
>>
>> 2008/6/20 Mike Landis <mlandis001@comcast.net>:
>> > Graham,
>> >
>> > The mod_python package distributed for windows is not an .msi file, so
>> > there's no uninstall script auto-generated by windows, but you can (and
>> > I
>> > did) reinstall the package over the top of the existing install.  It
>> > produced some errors that I hadn't seen the first time (the original
>> > install
>> > was error free) - I've attached screen-shots of the errors.
>> >
>> > The install script allowed me to continue and it seemed to complete
>> > despite
>> > the errors.  I restarted Apache and got lots of output when I pulled up
>> > mptest.py in a browser.  I attached that output as a .htm file.
>> >
>> > -Mike
>> >
>> > At 01:01 AM 6/20/2008, Graham Dumpleton wrote:
>> >>
>> >> I literally meant to run the 'uninstall' script for mod_python and
>> >> Python and run 'install' or 'setup' to reinstall them from scratch.
>> >> Not just put back importer.py.
>> >>
>> >> I have never used mod_python on Windows so not sure about details of
>> >> where deinstaller stuff for each will be. Perhaps someone else on list
>> >> can say what needs to be done to remove and then reinstall each.
>> >>
>> >> Graham
>> >>
>> >> 2008/6/20 Mike Landis <mlandis001@comcast.net>:
>> >> > Graham,
>> >> >
>> >> > I restored importer.py to its originally distributed state (hope
>> >> > that's
>> >> > what
>> >> > you'd want), made the changes to httpd.conf, restarted Apache,
>> >> > reloaded
>> >> > mptest.py in the browser (to get mod_python kicked off) and got this:
>> >> >
>> >> > [Fri Jun 20 00:44:41 2008] [notice] Parent: Received restart signal
>> >> > --
>> >> > Restarting the server.
>> >> > [Fri Jun 20 00:44:42 2008] [notice] Child 3332: Exit event signaled.
>> >> > Child
>> >> > process is ending.
>> >> > [Fri Jun 20 00:44:42 2008] [warn] mod_wsgi: Compiled for Python/2.5.
>> >> > [Fri Jun 20 00:44:42 2008] [warn] mod_wsgi: Runtime using
>> >> > Python/2.5.2.
>> >> > [Fri Jun 20 00:44:42 2008] [warn] mod_wsgi: Python module path
>> >> >
>> >> >
>> >> > 'C:\\Windows\\system32\\python25.zip;D:\\Programs\\Python25\\Lib;D:\\Programs\\Python25\\DLLs;D:\\Programs\\Python25\\Lib\\lib-tk;;D:\\Programs\\Apache
>> >> > Software Foundation\\Apache2.2\\bin'.
>> >> > [Fri Jun 20 00:44:42 2008] [notice] Apache/2.2.8 (Win32) DAV/2
>> >> > PHP/5.2.6
>> >> > mod_wsgi/2.0 Python/2.5.2 configured -- resuming normal operations
>> >> > [Fri Jun 20 00:44:42 2008] [notice] Server built: Jan 18 2008
>> >> > 00:37:19
>> >> > [Fri Jun 20 00:44:42 2008] [notice] Parent: Created child process
>> >> > 7528
>> >> > [Fri Jun 20 00:44:42 2008] [error] python_init: Python version
>> >> > mismatch,
>> >> > expected '2.5', found '2.5.2'.
>> >> > [Fri Jun 20 00:44:42 2008] [error] python_init: Python executable
>> >> > found
>> >> > 'D:\\Programs\\Apache Software
>> >> > Foundation\\Apache2.2\\bin\\httpd.exe'.
>> >> > [Fri Jun 20 00:44:42 2008] [error] python_init: Python path being
>> >> > used
>> >> >
>> >> >
>> >> > 'C:\\Windows\\system32\\python25.zip;D:\\Programs\\Python25\\Lib;D:\\Programs\\Python25\\DLLs;D:\\Programs\\Python25\\Lib\\lib-tk;;D:\\Programs\\Apache
>> >> > Software Foundation\\Apache2.2\\bin'.
>> >> > [Fri Jun 20 00:44:42 2008] [notice] mod_python: Creating 8 session
>> >> > mutexes
>> >> > based on 0 max processes and 250 max threads.
>> >> > [Fri Jun 20 00:44:42 2008] [warn] mod_wsgi: Compiled for Python/2.5.
>> >> > [Fri Jun 20 00:44:42 2008] [warn] mod_wsgi: Runtime using
>> >> > Python/2.5.2.
>> >> > [Fri Jun 20 00:44:42 2008] [warn] mod_wsgi: Python module path
>> >> >
>> >> >
>> >> > 'C:\\Windows\\system32\\python25.zip;D:\\Programs\\Python25\\Lib;D:\\Programs\\Python25\\DLLs;D:\\Programs\\Python25\\Lib\\lib-tk;;D:\\Programs\\Apache
>> >> > Software Foundation\\Apache2.2\\bin'.
>> >> > [Fri Jun 20 00:44:42 2008] [notice] Child 7528: Child process is
>> >> > running
>> >> > [Fri Jun 20 00:44:43 2008] [notice] Child 7528: Acquired the start
>> >> > mutex.
>> >> > [Fri Jun 20 00:44:43 2008] [notice] Child 7528: Starting 250 worker
>> >> > threads.
>> >> > [Fri Jun 20 00:44:43 2008] [notice] Child 3332: Released the start
>> >> > mutex
>> >> > [Fri Jun 20 00:44:44 2008] [notice] Child 3332: All worker threads
>> >> > have
>> >> > exited.
>> >> > [Fri Jun 20 00:44:44 2008] [notice] Child 3332: Child process is
>> >> > exiting
>> >> > [Fri Jun 20 00:44:44 2008] [notice] Child 7528: Starting thread to
>> >> > listen on
>> >> > port 80.
>> >> > [Fri Jun 20 00:45:13 2008] [error] make_obcallback: could not call
>> >> > init.\n
>> >> > Traceback (most recent call last):
>> >> >  File "D:\Programs\Python25\Lib\site-packages\mod_python\apache.py",
>> >> > line
>> >> > 937, in init
>> >> >    from mod_python import importer
>> >> >  File
>> >> > "D:\Programs\Python25\lib\site-packages\mod_python\importer.py",
>> >> > line
>> >> > 1783
>> >> >    for line in tb:
>> >> >    ^
>> >> > IndentationError: unexpected indent
>> >> > [Fri Jun 20 00:45:13 2008] [error] get_interpreter: no interpreter
>> >> > callback
>> >> > found.
>> >> > [Fri Jun 20 00:45:13 2008] [error] [client 127.0.0.1] python_handler:
>> >> > Can't
>> >> > get/create interpreter.
>> >> >
>> >> > I also dropped importer.py into a hex editor to see if there was an
>> >> > invisible character or something gumming up the works.  As far as I
>> >> > can
>> >> > tell, it looks like standard ASCII - all of the whitespace and
>> >> > non-printable
>> >> > characters near the 'for line in tb:' are ordinary whitespace:  0x0A,
>> >> > 0x09,
>> >> > and 0x20 (TAB, LF, and SPACE).
>> >> >
>> >> > -Mike
>> >> > At 12:28 AM 6/20/2008, Graham Dumpleton wrote:
>> >> >>
>> >> >> Huh, that doesn't quite make sense. Can you replace:
>> >> >>
>> >> >>  PythonHandler mptest
>> >> >>
>> >> >> with:
>> >> >>
>> >> >>  PythonHandler mod_python.testhandler
>> >> >>
>> >> >> This will use an inbuilt test handler within mod_python and return a
>> >> >> lot of debug if it works.
>> >> >>
>> >> >> If that still doesn't work, can only suggest uninstalling both
>> >> >> Python
>> >> >> and mod_python and reinstalling, making sure they are installed as
>> >> >> account with Administrator privileges for good measure.
>> >> >>
>> >> >> Graham
>> >> >>
>> >> >> 2008/6/20 Mike Landis <mlandis001@comcast.net>:
>> >> >> > Graham,
>> >> >> >
>> >> >> > I'm sorry, 'line' is defined by the for loop, so you wanted all
>> >> >> > three
>> >> >> > lines
>> >> >> > within the for loop, as follows...
>> >> >> >            for line in tb:
>> >> >> >                                import sys
>> >> >> >                                print >> sys.stderr,
>> >> >> > repr(line[:-1])
>> >> >> >                                sys.stderr.flush()
>> >> >> >                                log_error(line[:-1], flags)
>> >> >> >
>> >> >> > that produces:
>> >> >> > [Fri Jun 20 00:24:18 2008] [notice] mod_python (pid=3332,
>> >> >> > interpreter='localhost'): Importing module
>> >> >> > 'D:\\htdocs\\Python\\mptest.py'
>> >> >> > [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1] mod_python
>> >> >> > (pid=3332,
>> >> >> > interpreter='localhost', phase='PythonHandler', handler='mptest'):
>> >> >> > Application error
>> >> >> > [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1] ServerName:
>> >> >> > 'localhost'
>> >> >> > [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1]
>> >> >> > DocumentRoot:
>> >> >> > 'D:/htdocs'
>> >> >> > [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1] URI:
>> >> >> > '/Python/mptest.py'
>> >> >> > [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1] Location:
>> >> >> > None
>> >> >> > [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1] Directory:
>> >> >> > 'D:/htdocs/Python/'
>> >> >> > [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1] Filename:
>> >> >> > 'D:/htdocs/Python/mptest.py'
>> >> >> > [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1] PathInfo: ''
>> >> >> > [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1] Traceback
>> >> >> > (most
>> >> >> > recent
>> >> >> > call last):
>> >> >> > [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1]   File
>> >> >> >
>> >> >> >
>> >> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> >> > line
>> >> >> > 1537, in HandlerDispatch\n    default=default_handler, arg=req,
>> >> >> > silent=hlist.silent)
>> >> >> > [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1]   File
>> >> >> >
>> >> >> >
>> >> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> >> > line
>> >> >> > 1202, in _process_target\n    module = import_module(module_name,
>> >> >> > path=path)
>> >> >> > [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1]   File
>> >> >> >
>> >> >> >
>> >> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> >> > line
>> >> >> > 296, in import_module\n    log, import_path)
>> >> >> > [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1]   File
>> >> >> >
>> >> >> >
>> >> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> >> > line
>> >> >> > 680, in import_module\n    execfile(file, module.__dict__)
>> >> >> > Traceback (most recent call last):
>> >> >> >  File
>> >> >> > "D:\Programs\Python25\lib\site-packages\mod_python\importer.py",
>> >> >> > line
>> >> >> > 1784, in ReportError
>> >> >> >    import sys
>> >> >> > TypeError: argument 1 must be string without null bytes or None,
>> >> >> > not
>> >> >> > str
>> >> >> > [Fri Jun 20 00:24:18 2008] [error] [client 127.0.0.1]
>> >> >> > python_handler:
>> >> >> > Dispatch() returned non-integer.
>> >> >> >
>> >> >> > -Mike
>> >> >> > At 11:49 PM 6/19/2008, Graham Dumpleton wrote:
>> >> >> >>
>> >> >> >> Instead of repr(), try str() then. Also try:
>> >> >> >>
>> >> >> >>  line[:-1].encode('UTF-8')
>> >> >> >>
>> >> >> >> I think.
>> >> >> >>
>> >> >> >> You might add at same level of indent in that loop:
>> >> >> >>
>> >> >> >>  import sys
>> >> >> >>  print >> sys.stderr, repr(line[:-1])
>> >> >> >>  sys.stderr.flush()
>> >> >> >>
>> >> >> >> This should hopefully flush out to Apache logs and by pass the
>> >> >> >> mod_python error log function.
>> >> >> >>
>> >> >> >> If still no luck, there may be some issue with Python
>> >> >> >> installation,
>> >> >> >> not
>> >> >> >> sure.
>> >> >> >>
>> >> >> >> Graham
>> >> >> >>
>> >> >> >> 2008/6/20 Mike Landis <mlandis001@comcast.net>:
>> >> >> >> > Graham,
>> >> >> >> >
>> >> >> >> > This result looks similar (if not identical).
>> >> >> >> >
>> >> >> >> > -Mike
>> >> >> >> >
>> >> >> >> > [Thu Jun 19 23:41:58 2008] [notice] mod_python (pid=3332,
>> >> >> >> > interpreter='localhost'): Importing module
>> >> >> >> > 'D:\\htdocs\\Python\\mptest.py'
>> >> >> >> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1]
>> >> >> >> > mod_python
>> >> >> >> > (pid=3332,
>> >> >> >> > interpreter='localhost', phase='PythonHandler',
>> >> >> >> > handler='mptest'):
>> >> >> >> > Application error
>> >> >> >> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1]
>> >> >> >> > ServerName:
>> >> >> >> > 'localhost'
>> >> >> >> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1]
>> >> >> >> > DocumentRoot:
>> >> >> >> > 'D:/htdocs'
>> >> >> >> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1] URI:
>> >> >> >> > '/Python/mptest.py'
>> >> >> >> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1] Location:
>> >> >> >> > None
>> >> >> >> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1]
>> >> >> >> > Directory:
>> >> >> >> > 'D:/htdocs/Python/'
>> >> >> >> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1] Filename:
>> >> >> >> > 'D:/htdocs/Python/mptest.py'
>> >> >> >> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1] PathInfo:
>> >> >> >> > ''
>> >> >> >> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1] Traceback
>> >> >> >> > (most
>> >> >> >> > recent
>> >> >> >> > call last):
>> >> >> >> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1]   File
>> >> >> >> >
>> >> >> >> >
>> >> >> >> >
>> >> >> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> >> >> > line
>> >> >> >> > 1537, in HandlerDispatch\n    default=default_handler, arg=req,
>> >> >> >> > silent=hlist.silent)
>> >> >> >> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1]   File
>> >> >> >> >
>> >> >> >> >
>> >> >> >> >
>> >> >> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> >> >> > line
>> >> >> >> > 1202, in _process_target\n    module =
>> >> >> >> > import_module(module_name,
>> >> >> >> > path=path)
>> >> >> >> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1]   File
>> >> >> >> >
>> >> >> >> >
>> >> >> >> >
>> >> >> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> >> >> > line
>> >> >> >> > 296, in import_module\n    log, import_path)
>> >> >> >> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1]   File
>> >> >> >> >
>> >> >> >> >
>> >> >> >> >
>> >> >> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> >> >> > line
>> >> >> >> > 680, in import_module\n    execfile(file, module.__dict__)
>> >> >> >> > Traceback (most recent call last):
>> >> >> >> >  File
>> >> >> >> >
>> >> >> >> > "D:\Programs\Python25\lib\site-packages\mod_python\importer.py",
>> >> >> >> > line
>> >> >> >> > 1784, in ReportError
>> >> >> >> >    log_error(repr(line[:-1]), flags)
>> >> >> >> > #
>> >> >> >> > was:
>> >> >> >> >  log_error(line[:-1], flags)
>> >> >> >> > TypeError: argument 1 must be string without null bytes or
>> >> >> >> > None,
>> >> >> >> > not
>> >> >> >> > str
>> >> >> >> > [Thu Jun 19 23:41:58 2008] [error] [client 127.0.0.1]
>> >> >> >> > python_handler:
>> >> >> >> > Dispatch() returned non-integer.
>> >> >> >> >
>> >> >> >> > At 11:19 PM 6/19/2008, Graham Dumpleton wrote:
>> >> >> >> >>
>> >> >> >> >> Please use reply-all and keep followups on mailing list.
>> >> >> >> >>
>> >> >> >> >> Anyway, read message wrong first time. It isn't log_error() in
>> >> >> >> >> your
>> >> >> >> >> code which is problem, but code in mod_python used to display
>> >> >> >> >> error
>> >> >> >> >> tracebacks. In particular:
>> >> >> >> >>
>> >> >> >> >>            tb = traceback.format_exception(etype, evalue, etb)
>> >> >> >> >>
>> >> >> >> >>            for line in tb:
>> >> >> >> >>                log_error(line[:-1], flags)
>> >> >> >> >>
>> >> >> >> >> I can only image that somehow a Unicode character string has
>> >> >> >> >> gotten
>> >> >> >> >> into traceback message from Python.
>> >> >> >> >>
>> >> >> >> >> What I suggest you do is modify the importer.py in mod_python
>> >> >> >> >> installed source so that that log_error() call reads:
>> >> >> >> >>
>> >> >> >> >>                log_error(repr(line[:-1]), flags)
>> >> >> >> >>
>> >> >> >> >> That should show you true error which is first occurring.
>> >> >> >> >> Unicode
>> >> >> >> >> strings shouldn't be an issue then as are converting it all to
>> >> >> >> >> displayable latin.
>> >> >> >> >>
>> >> >> >> >> Please don't though just fix the error if in your code if
>> >> >> >> >> obvious,
>> >> >> >> >> instead post the resultant error traceback to list so can see
>> >> >> >> >> how
>> >> >> >> >> unicode string is getting into traceback.
>> >> >> >> >>
>> >> >> >> >> Graham
>> >> >> >> >>
>> >> >> >> >> 2008/6/20 Mike Landis <mlandis001@comcast.net>:
>> >> >> >> >> > Graham,
>> >> >> >> >> >
>> >> >> >> >> > The results look identical to me... (see immediately below)
>> >> >> >> >> >
>> >> >> >> >> > -Mike
>> >> >> >> >> >
>> >> >> >> >> > [Thu Jun 19 22:42:54 2008] [notice] mod_python (pid=3332,
>> >> >> >> >> > interpreter='localhost'): Importing module
>> >> >> >> >> > 'D:\\htdocs\\Python\\mptest.py'
>> >> >> >> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1]
>> >> >> >> >> > mod_python
>> >> >> >> >> > (pid=3332,
>> >> >> >> >> > interpreter='localhost', phase='PythonHandler',
>> >> >> >> >> > handler='mptest'):
>> >> >> >> >> > Application error
>> >> >> >> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1]
>> >> >> >> >> > ServerName:
>> >> >> >> >> > 'localhost'
>> >> >> >> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1]
>> >> >> >> >> > DocumentRoot:
>> >> >> >> >> > 'D:/htdocs'
>> >> >> >> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1] URI:
>> >> >> >> >> > '/Python/mptest.py'
>> >> >> >> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1]
>> >> >> >> >> > Location:
>> >> >> >> >> > None
>> >> >> >> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1]
>> >> >> >> >> > Directory:
>> >> >> >> >> > 'D:/htdocs/Python/'
>> >> >> >> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1]
>> >> >> >> >> > Filename:
>> >> >> >> >> > 'D:/htdocs/Python/mptest.py'
>> >> >> >> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1]
>> >> >> >> >> > PathInfo:
>> >> >> >> >> > ''
>> >> >> >> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1]
>> >> >> >> >> > Traceback
>> >> >> >> >> > (most
>> >> >> >> >> > recent
>> >> >> >> >> > call last):
>> >> >> >> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1]   File
>> >> >> >> >> >
>> >> >> >> >> >
>> >> >> >> >> >
>> >> >> >> >> >
>> >> >> >> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> >> >> >> > line
>> >> >> >> >> > 1537, in HandlerDispatch\n    default=default_handler,
>> >> >> >> >> > arg=req,
>> >> >> >> >> > silent=hlist.silent)
>> >> >> >> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1]   File
>> >> >> >> >> >
>> >> >> >> >> >
>> >> >> >> >> >
>> >> >> >> >> >
>> >> >> >> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> >> >> >> > line
>> >> >> >> >> > 1202, in _process_target\n    module =
>> >> >> >> >> > import_module(module_name,
>> >> >> >> >> > path=path)
>> >> >> >> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1]   File
>> >> >> >> >> >
>> >> >> >> >> >
>> >> >> >> >> >
>> >> >> >> >> >
>> >> >> >> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> >> >> >> > line
>> >> >> >> >> > 296, in import_module\n    log, import_path)
>> >> >> >> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1]   File
>> >> >> >> >> >
>> >> >> >> >> >
>> >> >> >> >> >
>> >> >> >> >> >
>> >> >> >> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> >> >> >> > line
>> >> >> >> >> > 680, in import_module\n    execfile(file, module.__dict__)
>> >> >> >> >> > Traceback (most recent call last):
>> >> >> >> >> >  File
>> >> >> >> >> >
>> >> >> >> >> >
>> >> >> >> >> > "D:\Programs\Python25\lib\site-packages\mod_python\importer.py",
>> >> >> >> >> > line
>> >> >> >> >> > 1784, in ReportError
>> >> >> >> >> >    log_error(line[:-1], flags)
>> >> >> >> >> > TypeError: argument 1 must be string without null bytes or
>> >> >> >> >> > None,
>> >> >> >> >> > not
>> >> >> >> >> > str
>> >> >> >> >> > [Thu Jun 19 22:42:54 2008] [error] [client 127.0.0.1]
>> >> >> >> >> > python_handler:
>> >> >> >> >> > Dispatch() returned non-integer.
>> >> >> >> >> >
>> >> >> >> >> >
>> >> >> >> >> >
>> >> >> >> >> >
>> >> >> >> >> >
>> >> >> >> >> > ==========================================================================
>> >> >> >> >> > At 09:33 PM 6/19/2008, you wrote:
>> >> >> >> >> >>
>> >> >> >> >> >> What happens when you use:
>> >> >> >> >> >>
>> >> >> >> >> >>  from mod_python import apache
>> >> >> >> >> >>  apache.log_error('handler')
>> >> >> >> >> >>
>> >> >> >> >> >> instead?
>> >> >> >> >> >>
>> >> >> >> >> >> Graham
>> >> >> >> >> >>
>> >> >> >> >> >> 2008/6/16 Mike Landis <mlandis001@comcast.net>:
>> >> >> >> >> >> >
>> >> >> >> >> >> > 32 bit Windows Vista, Apache 2.2.8, mod_python 3.3.1,
>> >> >> >> >> >> > python
>> >> >> >> >> >> > 2.5.2.2
>> >> >> >> >> >> > (r252:60911)
>> >> >> >> >> >> >
>> >> >> >> >> >> > I received a 500 error from Apache httpd while attempting
>> >> >> >> >> >> > to
>> >> >> >> >> >> > get
>> >> >> >> >> >> > mod_python working on Windows Vista.  Following are
>> >> >> >> >> >> > entries
>> >> >> >> >> >> > from
>> >> >> >> >> >> > error.log, httpd.conf, and the Python source (mptest.py)
>> >> >> >> >> >> > used
>> >> >> >> >> >> > as a
>> >> >> >> >> >> > test
>> >> >> >> >> >> > case.  The error
>> >> >> >> >> >> > occurs within importer.py (part of the mod_pyton
>> >> >> >> >> >> > site-package).
>> >> >> >> >> >> >
>> >> >> >> >> >> > Apache httpd error log:
>> >> >> >> >> >> > [Sat Jun 14 16:22:29 2008] [notice] mod_python (pid=3708,
>> >> >> >> >> >> > interpreter='localhost'): Importing module
>> >> >> >> >> >> > 'D:\\htdocs\\Python\\mptest.py'
>> >> >> >> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]
>> >> >> >> >> >> > mod_python
>> >> >> >> >> >> > (pid=3708, interpreter='localhost',
>> >> >> >> >> >> > phase='PythonHandler',
>> >> >> >> >> >> > handler='mptest'): Application error
>> >> >> >> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]
>> >> >> >> >> >> > ServerName:
>> >> >> >> >> >> > 'localhost'
>> >> >> >> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]
>> >> >> >> >> >> > DocumentRoot:
>> >> >> >> >> >> > 'D:/htdocs'
>> >> >> >> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]
>> >> >> >> >> >> > URI:
>> >> >> >> >> >> > '/Python/mptest.py'
>> >> >> >> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]
>> >> >> >> >> >> > Location:
>> >> >> >> >> >> > None
>> >> >> >> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]
>> >> >> >> >> >> > Directory:
>> >> >> >> >> >> > 'D:/htdocs/Python/'
>> >> >> >> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]
>> >> >> >> >> >> > Filename:
>> >> >> >> >> >> > 'D:/htdocs/Python/mptest.py'
>> >> >> >> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]
>> >> >> >> >> >> > PathInfo:
>> >> >> >> >> >> > ''
>> >> >> >> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]
>> >> >> >> >> >> > Traceback
>> >> >> >> >> >> > (most
>> >> >> >> >> >> > recent call last):
>> >> >> >> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]
>> >> >> >> >> >> > File
>> >> >> >> >> >> >
>> >> >> >> >> >> >
>> >> >> >> >> >> >
>> >> >> >> >> >> >
>> >> >> >> >> >> >
>> >> >> >> >> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> >> >> >> >> > line 1537, in HandlerDispatch\n default=default_handler,
>> >> >> >> >> >> > arg=req,
>> >> >> >> >> >> > silent=hlist.silent)
>> >> >> >> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]
>> >> >> >> >> >> > File
>> >> >> >> >> >> >
>> >> >> >> >> >> >
>> >> >> >> >> >> >
>> >> >> >> >> >> >
>> >> >> >> >> >> >
>> >> >> >> >> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> >> >> >> >> > line 1202, in _process_target\n module =
>> >> >> >> >> >> > import_module(module_name,
>> >> >> >> >> >> > path=path)
>> >> >> >> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]
>> >> >> >> >> >> > File
>> >> >> >> >> >> >
>> >> >> >> >> >> >
>> >> >> >> >> >> >
>> >> >> >> >> >> >
>> >> >> >> >> >> >
>> >> >> >> >> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> >> >> >> >> > line 296, in import_module\n log, import_path)
>> >> >> >> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]
>> >> >> >> >> >> > File
>> >> >> >> >> >> >
>> >> >> >> >> >> >
>> >> >> >> >> >> >
>> >> >> >> >> >> >
>> >> >> >> >> >> >
>> >> >> >> >> >> > "D:\\Programs\\Python25\\lib\\site-packages\\mod_python\\importer.py",
>> >> >> >> >> >> > line 680, in import_module\n execfile(file,
>> >> >> >> >> >> > module.__dict__)
>> >> >> >> >> >> > Traceback (most recent call last): File
>> >> >> >> >> >> >
>> >> >> >> >> >> >
>> >> >> >> >> >> >
>> >> >> >> >> >> > "D:\Programs\Python25\lib\site-packages\mod_python\importer.py",
>> >> >> >> >> >> > line 1784, in ReportError log_error(line[:-1], flags)
>> >> >> >> >> >> > TypeError: argument 1 must be string without null bytes
>> >> >> >> >> >> > or
>> >> >> >> >> >> > None,
>> >> >> >> >> >> > not
>> >> >> >> >> >> > str
>> >> >> >> >> >> > [Sat Jun 14 16:22:29 2008] [error] [client 127.0.0.1]
>> >> >> >> >> >> > python_handler:
>> >> >> >> >> >> > Dispatch() returned non-integer.
>> >> >> >> >> >> >
>> >> >> >> >> >> >
>> >> >> >> >> >> >
>> >> >> >> >> >> >
>> >> >> >> >> >> >
>> >> >> >> >> >> >
>> >> >> >> >> >> > --------------------------------------------------------------------------------
>> >> >> >> >> >> > httpd.conf entries:
>> >> >> >> >> >> > LoadModule python_module modules/mod_python.so
>> >> >> >> >> >> >
>> >> >> >> >> >> > <Directory D:\htdocs\Python>
>> >> >> >> >> >> >
>> >> >> >> >> >> > AddHandler      mod_python .py
>> >> >> >> >> >> >        PythonHandler   mptest
>> >> >> >> >> >> >        PythonDebug
>> >> >> >> >> >> > On
>> >> >> >> >> >> > </Directory>
>> >> >> >> >> >> >
>> >> >> >> >> >> >
>> >> >> >> >> >> >
>> >> >> >> >> >> >
>> >> >> >> >> >> >
>> >> >> >> >> >> >
>> >> >> >> >> >> > --------------------------------------------------------------------------------
>> >> >> >> >> >> > Python source (in mptest.py):
>> >> >> >> >> >> >
>> >> >> >> >> >> > from mod_python import apache
>> >> >> >> >> >> >
>> >> >> >> >> >> > def handler(req):
>> >> >> >> >> >> >         req.log_error('handler')
>> >> >> >> >> >> >         req.content_type =
>> >> >> >> >> >> > 'text/plain'
>> >> >> >> >> >> >         req.write('HelloWorld\n')
>> >> >> >> >> >> >         return apache.OK
>> >> >> >> >> >> >
>> >> >> >> >> >> >
>> >> >> >> >> >> >
>> >> >> >> >> >>
>> >> >> >> >> >> No virus found in this incoming message.
>> >> >> >> >> >> Checked by AVG.
>> >> >> >> >> >> Version: 8.0.100 / Virus Database: 270.4.0/1509 - Release
>> >> >> >> >> >> Date:
>> >> >> >> >> >> 6/19/2008
>> >> >> >> >> >> 8:00 AM
>> >> >> >> >> >
>> >> >> >> >> >
>> >> >> >> >>
>> >> >> >> >> No virus found in this incoming message.
>> >> >> >> >> Checked by AVG.
>> >> >> >> >> Version: 8.0.100 / Virus Database: 270.4.0/1509 - Release
>> >> >> >> >> Date:
>> >> >> >> >> 6/19/2008
>> >> >> >> >> 8:00 AM
>> >> >> >> >
>> >> >> >> >
>> >> >> >>
>> >> >> >> No virus found in this incoming message.
>> >> >> >> Checked by AVG.
>> >> >> >> Version: 8.0.100 / Virus Database: 270.4.0/1509 - Release Date:
>> >> >> >> 6/19/2008
>> >> >> >> 8:00 AM
>> >> >> >
>> >> >> >
>> >> >>
>> >> >> No virus found in this incoming message.
>> >> >> Checked by AVG.
>> >> >> Version: 8.0.100 / Virus Database: 270.4.0/1509 - Release Date:
>> >> >> 6/19/2008
>> >> >> 8:00 AM
>> >> >
>> >> >
>> >>
>> >> No virus found in this incoming message.
>> >> Checked by AVG.
>> >> Version: 8.0.100 / Virus Database: 270.4.0/1509 - Release Date:
>> >> 6/19/2008
>> >> 8:00 AM
>> >
>>
>> No virus found in this incoming message.
>> Checked by AVG.
>> Version: 8.0.100 / Virus Database: 270.4.1/1510 - Release Date: 6/19/2008
>> 3:21 PM
>
>
From MDiPierro at cs.depaul.edu  Sat Jun 21 10:44:27 2008
From: MDiPierro at cs.depaul.edu (Massimo Di Pierro)
Date: Sat Jun 21 10:46:08 2008
Subject: [mod_python] Re: mod_python 3.3.1 bug report
Message-ID: <52FEB3B6-7ACE-41DB-8278-31DF9752D264@cs.depaul.edu>

Dear Graham,

a couple of months ago you send me some very constructive comments  
about web2py. In particular you suggested that we replaced all  
relative paths with absolutes paths. I really appreciate your advice  
and this issue was addressed within one week of your email. If there  
is any other issue that you find with the web2py source code, please  
let us know and it will be addresses. At this point we are not aware  
of any open issue.

You also refer to "heard various critiques by others about it". Could  
you be more explicit? Unfortunately there are many incorrect posts  
online about web2py written by people who have not tried it or read  
the specs.

Massimo


Graham Dumpleton graham.dumpleton at gmail.com write:

 > All the major frameworks support WSGI, Django, TurboGears, Pylons,
 > CherryPy, web.py and up and comers such as Werkzeug.
 > Although Django may say use mod_python, general consensus is rapidly
 > moving to use of mod_wsgi, it is just that developers who maintain  
web
 > site haven't decided yet to make a statement that mod_wsgi is equally
 > as capable as mod_python.
 > As to web2py, it would not be one of my first choices. It may be more
 > glitzy and have better marketing speak around it, but having seen  
some
 > of the code in it and heard various critiques by others about it, I'd
 > be looking elsewhere. I'd probably suggest Django for high level
 > framework and Werkzeug if you want a more low level nuts and bolts
 > approach.
 >
 > Graham
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080621/523ece9c/attachment.html
From mdipierro at cs.depaul.edu  Sat Jun 21 10:57:33 2008
From: mdipierro at cs.depaul.edu (Massimo Di Pierro)
Date: Sat Jun 21 10:59:13 2008
Subject: [mod_python] Re: mod_python 3.3.1 bug report
In-Reply-To: <52FEB3B6-7ACE-41DB-8278-31DF9752D264@cs.depaul.edu>
References: <52FEB3B6-7ACE-41DB-8278-31DF9752D264@cs.depaul.edu>
Message-ID: <AD5DB0D9-516F-4714-B321-CCB9FE51E3CC@cs.depaul.edu>

I read the post again and I noticed you omitted web2py from the list  
of "major frameworks" that support wsgi. I would like to add that  
web2py uses the cherrypy 3.0 wsgiserver (unmodified) so it is as wsgi  
compliant as cherrypy is. Django instead, for example, lists "Making  
Django 100% WSGI compliant." as one of the roadmark targets for  
version 1.0.

Massimo

On Jun 21, 2008, at 9:44 AM, Massimo Di Pierro wrote:

> Dear Graham,
>
> a couple of months ago you send me some very constructive comments  
> about web2py. In particular you suggested that we replaced all  
> relative paths with absolutes paths. I really appreciate your  
> advice and this issue was addressed within one week of your email.  
> If there is any other issue that you find with the web2py source  
> code, please let us know and it will be addresses. At this point we  
> are not aware of any open issue.
>
> You also refer to "heard various critiques by others about it".  
> Could you be more explicit? Unfortunately there are many incorrect  
> posts online about web2py written by people who have not tried it  
> or read the specs.
>
> Massimo
>
>
> Graham Dumpleton graham.dumpleton at gmail.com write:
>
> > All the major frameworks support WSGI, Django, TurboGears, Pylons,
> > CherryPy, web.py and up and comers such as Werkzeug.
> > Although Django may say use mod_python, general consensus is rapidly
> > moving to use of mod_wsgi, it is just that developers who  
> maintain web
> > site haven't decided yet to make a statement that mod_wsgi is  
> equally
> > as capable as mod_python.
> > As to web2py, it would not be one of my first choices. It may be  
> more
> > glitzy and have better marketing speak around it, but having seen  
> some
> > of the code in it and heard various critiques by others about it,  
> I'd
> > be looking elsewhere. I'd probably suggest Django for high level
> > framework and Werkzeug if you want a more low level nuts and bolts
> > approach.
> >
> > Graham<ATT00001.txt>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080621/d338410e/attachment.html
From jijo.cj at gmail.com  Sat Jun 21 13:00:27 2008
From: jijo.cj at gmail.com (jijo joseph)
Date: Sat Jun 21 13:00:32 2008
Subject: [mod_python] python hosting
Message-ID: <445528820806211000g2eb9ba7cla70a731f5ca8a07c@mail.gmail.com>

hi

I'm need to host my PSP pages
Can anyone suggest good PSP hosting servers

-- 
Truly

Jijo Joseph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080621/c3070f4a/attachment.html
From zapster at gmx.at  Sun Jun 22 14:14:53 2008
From: zapster at gmx.at (Josef Eisl)
Date: Sun Jun 22 14:15:01 2008
Subject: [mod_python] problem building mod_python (mod_python.so not
	created)
In-Reply-To: <88e286470806191835p593fa7edl9732ddddad2b1d8e@mail.gmail.com>
References: <48566DC4.8020807@gmx.at>
	<88e286470806191835p593fa7edl9732ddddad2b1d8e@mail.gmail.com>
Message-ID: <485E969D.8030409@gmx.at>

Graham Dumpleton wrote:
> See:
> 
>   http://www.modpython.org/FAQ/faqw.py?req=show&file=faq04.001.htp
> 
> That may help.
> 
> Graham

Thank you for the hint, but I already tried that.
Is there any other reason why mod_python.so is not created?
Where should I start my investigation?

Thanks in advance,
Josef

> 
> 2008/6/16 Josef Eisl <zapster@gmx.at>:
>> Hello!
>>
>> I am trying to compile mod_python 3.3.1 for Apache 2.2.6. I am using Python
>> 2.5.2. By any reason the mod_python.so is not produced.
>>
>> (Note that Python 2.5 is not the systems default version but that should not
>> be an issue.)
>>
>> I configured the installation with the following commandline:
>>
>> $ ./configure --with-apxs=/usr/sbin/apxs
>> --with-python=/usr/local/bin/python2.5
>>
>> No warnings, beside the flex version thing...
>>
>> `make' only throws few warnings like `warning: "_POSIX_C_SOURCE" redefined',
>> (no error messages), but mod_python.so is still not created.
>>
>> `make install_dso' fails:
>>
>> /usr/bin/install -c -d /usr/local/apache2/2.2.6/modules
>> /usr/bin/install -c src/mod_python.so /usr/local/apache2/2.2.6/modules
>> /usr/bin/install: cannot stat `src/mod_python.so': No such file or directory
>> make[1]: *** [install_dso] Error 1
>>
>>
>> Any ideas what might be the problem?
>>
>> Many thanks in advance!
>>
>> best regards,
>> Josef
>>
>>
>> output of `make':
>>
>> make[1]: Entering directory `/usr/src/mod_python-3.3.1'
>> make[2]: Entering directory `/usr/src/mod_python-3.3.1/src'
>>
>> Compiling for DSO.
>>
>> /usr/sbin/apxs -I/usr/src/mod_python-3.3.1/src/include
>> -I/usr/local/apache2/2.2.6/include -I/usr/local/include/python2.5 -c
>> mod_python.c _apachemodule.c requestobject.c tableobject.c util.c
>> serverobject.c connobject.c filterobject.c hlist.c hlistobject.c
>> finfoobject.c -L/usr/local/lib/python2.5/config  -Xlinker -export-dynamic
>>    -lm  -lpython2.5 -lpthread -ldl -lutil -lm
>> /usr/local/apache2/2.2.6/build/libtool --silent --mode=compile gcc
>> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -g
>> -O2 -pthread -I/usr/local/apache2/2.2.6/include
>> -I/usr/local/apache2/2.2.6/include   -I/usr/local/apache2/2.2.6/include
>>  -I/usr/src/mod_python-3.3.1/src/include -I/usr/local/apache2/2.2.6/include
>> -I/usr/local/include/python2.5  -c -o mod_python.lo mod_python.c && touch
>> mod_python.slo
>> In file included from /usr/local/include/python2.5/Python.h:8,
>>                 from /usr/src/mod_python-3.3.1/src/include/mod_python.h:80,
>>                 from mod_python.c:28:
>> /usr/local/include/python2.5/pyconfig.h:942:1: warning: "_POSIX_C_SOURCE"
>> redefined
>> In file included from /usr/include/sys/types.h:27,
>>                 from /usr/local/apache2/2.2.6/include/apr.h:116,
>>                 from /usr/local/apache2/2.2.6/include/ap_config.h:25,
>>                 from /usr/local/apache2/2.2.6/include/httpd.h:43,
>>                 from /usr/src/mod_python-3.3.1/src/include/mod_python.h:42,
>>                 from mod_python.c:28:
>> /usr/include/features.h:131:1: warning: this is the location of the previous
>> definition
>> mod_python.c: In function `python_init':
>> mod_python.c:826: warning: initialization from incompatible pointer type
>> /usr/local/apache2/2.2.6/build/libtool --silent --mode=compile gcc
>> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -g
>> -O2 -pthread -I/usr/local/apache2/2.2.6/include
>> -I/usr/local/apache2/2.2.6/include   -I/usr/local/apache2/2.2.6/include
>>  -I/usr/src/mod_python-3.3.1/src/include -I/usr/local/apache2/2.2.6/include
>> -I/usr/local/include/python2.5  -c -o _apachemodule.lo _apachemodule.c &&
>> touch _apachemodule.slo
>> In file included from /usr/local/include/python2.5/Python.h:8,
>>                 from /usr/src/mod_python-3.3.1/src/include/mod_python.h:80,
>>                 from _apachemodule.c:25:
>> /usr/local/include/python2.5/pyconfig.h:942:1: warning: "_POSIX_C_SOURCE"
>> redefined
>> In file included from /usr/include/sys/types.h:27,
>>                 from /usr/local/apache2/2.2.6/include/apr.h:116,
>>                 from /usr/local/apache2/2.2.6/include/ap_config.h:25,
>>                 from /usr/local/apache2/2.2.6/include/httpd.h:43,
>>                 from /usr/src/mod_python-3.3.1/src/include/mod_python.h:42,
>>                 from _apachemodule.c:25:
>> /usr/include/features.h:131:1: warning: this is the location of the previous
>> definition
>> /usr/local/apache2/2.2.6/build/libtool --silent --mode=compile gcc
>> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -g
>> -O2 -pthread -I/usr/local/apache2/2.2.6/include
>> -I/usr/local/apache2/2.2.6/include   -I/usr/local/apache2/2.2.6/include
>>  -I/usr/src/mod_python-3.3.1/src/include -I/usr/local/apache2/2.2.6/include
>> -I/usr/local/include/python2.5  -c -o requestobject.lo requestobject.c &&
>> touch requestobject.slo
>> In file included from /usr/local/include/python2.5/Python.h:8,
>>                 from /usr/src/mod_python-3.3.1/src/include/mod_python.h:80,
>>                 from requestobject.c:25:
>> /usr/local/include/python2.5/pyconfig.h:942:1: warning: "_POSIX_C_SOURCE"
>> redefined
>> In file included from /usr/include/sys/types.h:27,
>>                 from /usr/local/apache2/2.2.6/include/apr.h:116,
>>                 from /usr/local/apache2/2.2.6/include/ap_config.h:25,
>>                 from /usr/local/apache2/2.2.6/include/httpd.h:43,
>>                 from /usr/src/mod_python-3.3.1/src/include/mod_python.h:42,
>>                 from requestobject.c:25:
>> /usr/include/features.h:131:1: warning: this is the location of the previous
>> definition
>> /usr/local/apache2/2.2.6/build/libtool --silent --mode=compile gcc
>> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -g
>> -O2 -pthread -I/usr/local/apache2/2.2.6/include
>> -I/usr/local/apache2/2.2.6/include   -I/usr/local/apache2/2.2.6/include
>>  -I/usr/src/mod_python-3.3.1/src/include -I/usr/local/apache2/2.2.6/include
>> -I/usr/local/include/python2.5  -c -o tableobject.lo tableobject.c && touch
>> tableobject.slo
>> In file included from /usr/local/include/python2.5/Python.h:8,
>>                 from /usr/src/mod_python-3.3.1/src/include/mod_python.h:80,
>>                 from tableobject.c:25:
>> /usr/local/include/python2.5/pyconfig.h:942:1: warning: "_POSIX_C_SOURCE"
>> redefined
>> In file included from /usr/include/sys/types.h:27,
>>                 from /usr/local/apache2/2.2.6/include/apr.h:116,
>>                 from /usr/local/apache2/2.2.6/include/ap_config.h:25,
>>                 from /usr/local/apache2/2.2.6/include/httpd.h:43,
>>                 from /usr/src/mod_python-3.3.1/src/include/mod_python.h:42,
>>                 from tableobject.c:25:
>> /usr/include/features.h:131:1: warning: this is the location of the previous
>> definition
>> tableobject.c:1092: warning: initialization from incompatible pointer type
>> /usr/local/apache2/2.2.6/build/libtool --silent --mode=compile gcc
>> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -g
>> -O2 -pthread -I/usr/local/apache2/2.2.6/include
>> -I/usr/local/apache2/2.2.6/include   -I/usr/local/apache2/2.2.6/include
>>  -I/usr/src/mod_python-3.3.1/src/include -I/usr/local/apache2/2.2.6/include
>> -I/usr/local/include/python2.5  -c -o util.lo util.c && touch util.slo
>> In file included from /usr/local/include/python2.5/Python.h:8,
>>                 from /usr/src/mod_python-3.3.1/src/include/mod_python.h:80,
>>                 from util.c:28:
>> /usr/local/include/python2.5/pyconfig.h:942:1: warning: "_POSIX_C_SOURCE"
>> redefined
>> In file included from /usr/include/sys/types.h:27,
>>                 from /usr/local/apache2/2.2.6/include/apr.h:116,
>>                 from /usr/local/apache2/2.2.6/include/ap_config.h:25,
>>                 from /usr/local/apache2/2.2.6/include/httpd.h:43,
>>                 from /usr/src/mod_python-3.3.1/src/include/mod_python.h:42,
>>                 from util.c:28:
>> /usr/include/features.h:131:1: warning: this is the location of the previous
>> definition
>> /usr/local/apache2/2.2.6/build/libtool --silent --mode=compile gcc
>> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -g
>> -O2 -pthread -I/usr/local/apache2/2.2.6/include
>> -I/usr/local/apache2/2.2.6/include   -I/usr/local/apache2/2.2.6/include
>>  -I/usr/src/mod_python-3.3.1/src/include -I/usr/local/apache2/2.2.6/include
>> -I/usr/local/include/python2.5  -c -o serverobject.lo serverobject.c &&
>> touch serverobject.slo
>> In file included from /usr/local/include/python2.5/Python.h:8,
>>                 from /usr/src/mod_python-3.3.1/src/include/mod_python.h:80,
>>                 from serverobject.c:25:
>> /usr/local/include/python2.5/pyconfig.h:942:1: warning: "_POSIX_C_SOURCE"
>> redefined
>> In file included from /usr/include/sys/types.h:27,
>>                 from /usr/local/apache2/2.2.6/include/apr.h:116,
>>                 from /usr/local/apache2/2.2.6/include/ap_config.h:25,
>>                 from /usr/local/apache2/2.2.6/include/httpd.h:43,
>>                 from /usr/src/mod_python-3.3.1/src/include/mod_python.h:42,
>>                 from serverobject.c:25:
>> /usr/include/features.h:131:1: warning: this is the location of the previous
>> definition
>> serverobject.c:387: warning: initialization from incompatible pointer type
>> /usr/local/apache2/2.2.6/build/libtool --silent --mode=compile gcc
>> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -g
>> -O2 -pthread -I/usr/local/apache2/2.2.6/include
>> -I/usr/local/apache2/2.2.6/include   -I/usr/local/apache2/2.2.6/include
>>  -I/usr/src/mod_python-3.3.1/src/include -I/usr/local/apache2/2.2.6/include
>> -I/usr/local/include/python2.5  -c -o connobject.lo connobject.c && touch
>> connobject.slo
>> In file included from /usr/local/include/python2.5/Python.h:8,
>>                 from /usr/src/mod_python-3.3.1/src/include/mod_python.h:80,
>>                 from connobject.c:30:
>> /usr/local/include/python2.5/pyconfig.h:942:1: warning: "_POSIX_C_SOURCE"
>> redefined
>> In file included from /usr/include/sys/types.h:27,
>>                 from /usr/local/apache2/2.2.6/include/apr.h:116,
>>                 from /usr/local/apache2/2.2.6/include/ap_config.h:25,
>>                 from /usr/local/apache2/2.2.6/include/httpd.h:43,
>>                 from /usr/src/mod_python-3.3.1/src/include/mod_python.h:42,
>>                 from connobject.c:30:
>> /usr/include/features.h:131:1: warning: this is the location of the previous
>> definition
>> /usr/local/apache2/2.2.6/build/libtool --silent --mode=compile gcc
>> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -g
>> -O2 -pthread -I/usr/local/apache2/2.2.6/include
>> -I/usr/local/apache2/2.2.6/include   -I/usr/local/apache2/2.2.6/include
>>  -I/usr/src/mod_python-3.3.1/src/include -I/usr/local/apache2/2.2.6/include
>> -I/usr/local/include/python2.5  -c -o filterobject.lo filterobject.c &&
>> touch filterobject.slo
>> In file included from /usr/local/include/python2.5/Python.h:8,
>>                 from /usr/src/mod_python-3.3.1/src/include/mod_python.h:80,
>>                 from filterobject.c:28:
>> /usr/local/include/python2.5/pyconfig.h:942:1: warning: "_POSIX_C_SOURCE"
>> redefined
>> In file included from /usr/include/sys/types.h:27,
>>                 from /usr/local/apache2/2.2.6/include/apr.h:116,
>>                 from /usr/local/apache2/2.2.6/include/ap_config.h:25,
>>                 from /usr/local/apache2/2.2.6/include/httpd.h:43,
>>                 from /usr/src/mod_python-3.3.1/src/include/mod_python.h:42,
>>                 from filterobject.c:28:
>> /usr/include/features.h:131:1: warning: this is the location of the previous
>> definition
>> /usr/local/apache2/2.2.6/build/libtool --silent --mode=compile gcc
>> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -g
>> -O2 -pthread -I/usr/local/apache2/2.2.6/include
>> -I/usr/local/apache2/2.2.6/include   -I/usr/local/apache2/2.2.6/include
>>  -I/usr/src/mod_python-3.3.1/src/include -I/usr/local/apache2/2.2.6/include
>> -I/usr/local/include/python2.5  -c -o hlist.lo hlist.c && touch hlist.slo
>> In file included from /usr/local/include/python2.5/Python.h:8,
>>                 from /usr/src/mod_python-3.3.1/src/include/mod_python.h:80,
>>                 from hlist.c:28:
>> /usr/local/include/python2.5/pyconfig.h:942:1: warning: "_POSIX_C_SOURCE"
>> redefined
>> In file included from /usr/include/sys/types.h:27,
>>                 from /usr/local/apache2/2.2.6/include/apr.h:116,
>>                 from /usr/local/apache2/2.2.6/include/ap_config.h:25,
>>                 from /usr/local/apache2/2.2.6/include/httpd.h:43,
>>                 from /usr/src/mod_python-3.3.1/src/include/mod_python.h:42,
>>                 from hlist.c:28:
>> /usr/include/features.h:131:1: warning: this is the location of the previous
>> definition
>> /usr/local/apache2/2.2.6/build/libtool --silent --mode=compile gcc
>> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -g
>> -O2 -pthread -I/usr/local/apache2/2.2.6/include
>> -I/usr/local/apache2/2.2.6/include   -I/usr/local/apache2/2.2.6/include
>>  -I/usr/src/mod_python-3.3.1/src/include -I/usr/local/apache2/2.2.6/include
>> -I/usr/local/include/python2.5  -c -o hlistobject.lo hlistobject.c && touch
>> hlistobject.slo
>> In file included from /usr/local/include/python2.5/Python.h:8,
>>                 from /usr/src/mod_python-3.3.1/src/include/mod_python.h:80,
>>                 from hlistobject.c:28:
>> /usr/local/include/python2.5/pyconfig.h:942:1: warning: "_POSIX_C_SOURCE"
>> redefined
>> In file included from /usr/include/sys/types.h:27,
>>                 from /usr/local/apache2/2.2.6/include/apr.h:116,
>>                 from /usr/local/apache2/2.2.6/include/ap_config.h:25,
>>                 from /usr/local/apache2/2.2.6/include/httpd.h:43,
>>                 from /usr/src/mod_python-3.3.1/src/include/mod_python.h:42,
>>                 from hlistobject.c:28:
>> /usr/include/features.h:131:1: warning: this is the location of the previous
>> definition
>> /usr/local/apache2/2.2.6/build/libtool --silent --mode=compile gcc
>> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -g
>> -O2 -pthread -I/usr/local/apache2/2.2.6/include
>> -I/usr/local/apache2/2.2.6/include   -I/usr/local/apache2/2.2.6/include
>>  -I/usr/src/mod_python-3.3.1/src/include -I/usr/local/apache2/2.2.6/include
>> -I/usr/local/include/python2.5  -c -o finfoobject.lo finfoobject.c && touch
>> finfoobject.slo
>> In file included from /usr/local/include/python2.5/Python.h:8,
>>                 from /usr/src/mod_python-3.3.1/src/include/mod_python.h:80,
>>                 from finfoobject.c:25:
>> /usr/local/include/python2.5/pyconfig.h:942:1: warning: "_POSIX_C_SOURCE"
>> redefined
>> In file included from /usr/include/sys/types.h:27,
>>                 from /usr/local/apache2/2.2.6/include/apr.h:116,
>>                 from /usr/local/apache2/2.2.6/include/ap_config.h:25,
>>                 from /usr/local/apache2/2.2.6/include/httpd.h:43,
>>                 from /usr/src/mod_python-3.3.1/src/include/mod_python.h:42,
>>                 from finfoobject.c:25:
>> /usr/include/features.h:131:1: warning: this is the location of the previous
>> definition
>> finfoobject.c:278: warning: `intargfunc' is deprecated (declared at
>> /usr/local/include/python2.5/object.h:133)
>> /usr/local/apache2/2.2.6/build/libtool --silent --mode=link gcc -o
>> mod_python.la  -rpath /usr/local/apache2/2.2.6/modules -module
>> -avoid-version    finfoobject.lo hlistobject.lo hlist.lo filterobject.lo
>> connobject.lo serverobject.lo util.lo tableobject.lo requestobject.lo
>> _apachemodule.lo mod_python.lo -L/usr/local/lib/python2.5/config -Xlinker
>> -export-dynamic -lm -lpython2.5 -lpthread -ldl -lutil -lm
>> make[2]: Leaving directory `/usr/src/mod_python-3.3.1/src'
>> make[2]: Entering directory `/usr/src/mod_python-3.3.1/dist'
>> ln -s ../lib/python/mod_python mod_python
>> make[3]: Entering directory `/usr/src/mod_python-3.3.1/src'
>> make[3]: `psp_parser.c' is up to date.
>> make[3]: Leaving directory `/usr/src/mod_python-3.3.1/src'
>> /usr/local/bin/python2.5 setup.py build
>> running build
>> running build_py
>> creating build
>> creating build/lib.linux-i686-2.5
>> creating build/lib.linux-i686-2.5/mod_python
>> copying /usr/src/mod_python-3.3.1/lib/python/mod_python/testhandler.py ->
>> build/lib.linux-i686-2.5/mod_python
>> copying /usr/src/mod_python-3.3.1/lib/python/mod_python/Cookie.py ->
>> build/lib.linux-i686-2.5/mod_python
>> copying /usr/src/mod_python-3.3.1/lib/python/mod_python/publisher.py ->
>> build/lib.linux-i686-2.5/mod_python
>> copying /usr/src/mod_python-3.3.1/lib/python/mod_python/__init__.py ->
>> build/lib.linux-i686-2.5/mod_python
>> copying /usr/src/mod_python-3.3.1/lib/python/mod_python/util.py ->
>> build/lib.linux-i686-2.5/mod_python
>> copying /usr/src/mod_python-3.3.1/lib/python/mod_python/cgihandler.py ->
>> build/lib.linux-i686-2.5/mod_python
>> copying /usr/src/mod_python-3.3.1/lib/python/mod_python/apache.py ->
>> build/lib.linux-i686-2.5/mod_python
>> copying /usr/src/mod_python-3.3.1/lib/python/mod_python/importer.py ->
>> build/lib.linux-i686-2.5/mod_python
>> copying /usr/src/mod_python-3.3.1/lib/python/mod_python/psp.py ->
>> build/lib.linux-i686-2.5/mod_python
>> copying /usr/src/mod_python-3.3.1/lib/python/mod_python/Session.py ->
>> build/lib.linux-i686-2.5/mod_python
>> copying /usr/src/mod_python-3.3.1/lib/python/mod_python/cache.py ->
>> build/lib.linux-i686-2.5/mod_python
>> copying /usr/src/mod_python-3.3.1/lib/python/mod_python/python22.py ->
>> build/lib.linux-i686-2.5/mod_python
>> running build_ext
>> building 'mod_python._psp' extension
>> creating build/temp.linux-i686-2.5
>> creating build/temp.linux-i686-2.5/usr
>> creating build/temp.linux-i686-2.5/usr/src
>> creating build/temp.linux-i686-2.5/usr/src/SSL_LAMP
>> creating build/temp.linux-i686-2.5/usr/src/mod_python-3.3.1
>> creating build/temp.linux-i686-2.5/usr/src/mod_python-3.3.1/src
>> gcc -pthread -fno-strict-aliasing -DNDEBUG -g -O3 -Wall -Wstrict-prototypes
>> -fPIC -I/usr/src/mod_python-3.3.1/src/include -I/usr/local/include/python2.5
>> -c /usr/src/mod_python-3.3.1/src/psp_string.c -o
>> build/temp.linux-i686-2.5/usr/src/mod_python-3.3.1/src/psp_string.o
>> gcc -pthread -fno-strict-aliasing -DNDEBUG -g -O3 -Wall -Wstrict-prototypes
>> -fPIC -I/usr/src/mod_python-3.3.1/src/include -I/usr/local/include/python2.5
>> -c /usr/src/mod_python-3.3.1/src/psp_parser.c -o
>> build/temp.linux-i686-2.5/usr/src/mod_python-3.3.1/src/psp_parser.o
>> In file included from /usr/local/include/python2.5/Python.h:8,
>>                 from /usr/src/mod_python-3.3.1/src/include/psp_parser.h:23,
>>                 from psp_parser.l:29:
>> /usr/local/include/python2.5/pyconfig.h:942:1: warning: "_POSIX_C_SOURCE"
>> redefined
>> In file included from /usr/include/stdio.h:28,
>>                 from psp_parser.c:20:
>> /usr/include/features.h:171:1: warning: this is the location of the previous
>> definition
>> gcc -pthread -fno-strict-aliasing -DNDEBUG -g -O3 -Wall -Wstrict-prototypes
>> -fPIC -I/usr/src/mod_python-3.3.1/src/include -I/usr/local/include/python2.5
>> -c /usr/src/mod_python-3.3.1/src/_pspmodule.c -o
>> build/temp.linux-i686-2.5/usr/src/mod_python-3.3.1/src/_pspmodule.o
>> In file included from /usr/local/include/python2.5/Python.h:8,
>>                 from /usr/src/mod_python-3.3.1/src/include/psp_parser.h:23,
>>                 from /usr/src/mod_python-3.3.1/src/_pspmodule.c:26:
>> /usr/local/include/python2.5/pyconfig.h:942:1: warning: "_POSIX_C_SOURCE"
>> redefined
>> In file included from /usr/include/stdio.h:28,
>>                 from include/psp_flex.h:24,
>>                 from /usr/src/mod_python-3.3.1/src/_pspmodule.c:25:
>> /usr/include/features.h:171:1: warning: this is the location of the previous
>> definition
>> gcc -pthread -shared
>> build/temp.linux-i686-2.5/usr/src/mod_python-3.3.1/src/psp_string.o
>> build/temp.linux-i686-2.5/usr/src/mod_python-3.3.1/src/psp_parser.o
>> build/temp.linux-i686-2.5/usr/src/mod_python-3.3.1/src/_pspmodule.o -o
>> build/lib.linux-i686-2.5/mod_python/_psp.so
>> make[2]: Leaving directory `/usr/src/mod_python-3.3.1/dist'
>>
>> Now su and make install
>>  (or, if you only want to perform a partial install,
>>   you can use make install_dso and make install_py_lib)
>>
>>
>> _______________________________________________
>> Mod_python mailing list
>> Mod_python@modpython.org
>> http://mailman.modpython.org/mailman/listinfo/mod_python
>>
> 

From dgossage at zacks.com  Sun Jun 22 14:51:04 2008
From: dgossage at zacks.com (David Gossage)
Date: Sun Jun 22 14:51:12 2008
Subject: [mod_python] problem building mod_python (mod_python.so
	not	created)
In-Reply-To: <485E969D.8030409@gmx.at>
References: <48566DC4.8020807@gmx.at>	<88e286470806191835p593fa7edl9732ddddad2b1d8e@mail.gmail.com>
	<485E969D.8030409@gmx.at>
Message-ID: <485E9F18.8070908@zacks.com>

If i recall I had a similar issue.  My problem was the libpython2.5.so 
file was expected to be in the python config directory but wasn't.  I 
symlinked it there from wherever it had been.  If you don't have 
libpython2.5.so then you need to recompile python with --enable-shared I 
believe the command was.

Josef Eisl wrote:
> Graham Dumpleton wrote:
>> See:
>>
>>   http://www.modpython.org/FAQ/faqw.py?req=show&file=faq04.001.htp
>>
>> That may help.
>>
>> Graham
>
> Thank you for the hint, but I already tried that.
> Is there any other reason why mod_python.so is not created?
> Where should I start my investigation?
>
> Thanks in advance,
> Josef
>
>>
>> 2008/6/16 Josef Eisl <zapster@gmx.at>:
>>> Hello!
>>>
>>> I am trying to compile mod_python 3.3.1 for Apache 2.2.6. I am using 
>>> Python
>>> 2.5.2. By any reason the mod_python.so is not produced.
>>>
>>> (Note that Python 2.5 is not the systems default version but that 
>>> should not
>>> be an issue.)
>>>
>>> I configured the installation with the following commandline:
>>>
>>> $ ./configure --with-apxs=/usr/sbin/apxs
>>> --with-python=/usr/local/bin/python2.5
>>>
>>> No warnings, beside the flex version thing...
>>>
>>> `make' only throws few warnings like `warning: "_POSIX_C_SOURCE" 
>>> redefined',
>>> (no error messages), but mod_python.so is still not created.
>>>
>>> `make install_dso' fails:
>>>
>>> /usr/bin/install -c -d /usr/local/apache2/2.2.6/modules
>>> /usr/bin/install -c src/mod_python.so /usr/local/apache2/2.2.6/modules
>>> /usr/bin/install: cannot stat `src/mod_python.so': No such file or 
>>> directory
>>> make[1]: *** [install_dso] Error 1
>>>
>>>
>>> Any ideas what might be the problem?
>>>
>>> Many thanks in advance!
>>>
>>> best regards,
>>> Josef
>>>
>>>
>>> output of `make':
>>>
>>> make[1]: Entering directory `/usr/src/mod_python-3.3.1'
>>> make[2]: Entering directory `/usr/src/mod_python-3.3.1/src'
>>>
>>> Compiling for DSO.
>>>
>>> /usr/sbin/apxs -I/usr/src/mod_python-3.3.1/src/include
>>> -I/usr/local/apache2/2.2.6/include -I/usr/local/include/python2.5 -c
>>> mod_python.c _apachemodule.c requestobject.c tableobject.c util.c
>>> serverobject.c connobject.c filterobject.c hlist.c hlistobject.c
>>> finfoobject.c -L/usr/local/lib/python2.5/config  -Xlinker 
>>> -export-dynamic
>>>    -lm  -lpython2.5 -lpthread -ldl -lutil -lm
>>> /usr/local/apache2/2.2.6/build/libtool --silent --mode=compile gcc
>>> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE 
>>> -D_LARGEFILE64_SOURCE -g
>>> -O2 -pthread -I/usr/local/apache2/2.2.6/include
>>> -I/usr/local/apache2/2.2.6/include   -I/usr/local/apache2/2.2.6/include
>>>  -I/usr/src/mod_python-3.3.1/src/include 
>>> -I/usr/local/apache2/2.2.6/include
>>> -I/usr/local/include/python2.5  -c -o mod_python.lo mod_python.c && 
>>> touch
>>> mod_python.slo
>>> In file included from /usr/local/include/python2.5/Python.h:8,
>>>                 from 
>>> /usr/src/mod_python-3.3.1/src/include/mod_python.h:80,
>>>                 from mod_python.c:28:
>>> /usr/local/include/python2.5/pyconfig.h:942:1: warning: 
>>> "_POSIX_C_SOURCE"
>>> redefined
>>> In file included from /usr/include/sys/types.h:27,
>>>                 from /usr/local/apache2/2.2.6/include/apr.h:116,
>>>                 from /usr/local/apache2/2.2.6/include/ap_config.h:25,
>>>                 from /usr/local/apache2/2.2.6/include/httpd.h:43,
>>>                 from 
>>> /usr/src/mod_python-3.3.1/src/include/mod_python.h:42,
>>>                 from mod_python.c:28:
>>> /usr/include/features.h:131:1: warning: this is the location of the 
>>> previous
>>> definition
>>> mod_python.c: In function `python_init':
>>> mod_python.c:826: warning: initialization from incompatible pointer 
>>> type
>>> /usr/local/apache2/2.2.6/build/libtool --silent --mode=compile gcc
>>> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE 
>>> -D_LARGEFILE64_SOURCE -g
>>> -O2 -pthread -I/usr/local/apache2/2.2.6/include
>>> -I/usr/local/apache2/2.2.6/include   -I/usr/local/apache2/2.2.6/include
>>>  -I/usr/src/mod_python-3.3.1/src/include 
>>> -I/usr/local/apache2/2.2.6/include
>>> -I/usr/local/include/python2.5  -c -o _apachemodule.lo 
>>> _apachemodule.c &&
>>> touch _apachemodule.slo
>>> In file included from /usr/local/include/python2.5/Python.h:8,
>>>                 from 
>>> /usr/src/mod_python-3.3.1/src/include/mod_python.h:80,
>>>                 from _apachemodule.c:25:
>>> /usr/local/include/python2.5/pyconfig.h:942:1: warning: 
>>> "_POSIX_C_SOURCE"
>>> redefined
>>> In file included from /usr/include/sys/types.h:27,
>>>                 from /usr/local/apache2/2.2.6/include/apr.h:116,
>>>                 from /usr/local/apache2/2.2.6/include/ap_config.h:25,
>>>                 from /usr/local/apache2/2.2.6/include/httpd.h:43,
>>>                 from 
>>> /usr/src/mod_python-3.3.1/src/include/mod_python.h:42,
>>>                 from _apachemodule.c:25:
>>> /usr/include/features.h:131:1: warning: this is the location of the 
>>> previous
>>> definition
>>> /usr/local/apache2/2.2.6/build/libtool --silent --mode=compile gcc
>>> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE 
>>> -D_LARGEFILE64_SOURCE -g
>>> -O2 -pthread -I/usr/local/apache2/2.2.6/include
>>> -I/usr/local/apache2/2.2.6/include   -I/usr/local/apache2/2.2.6/include
>>>  -I/usr/src/mod_python-3.3.1/src/include 
>>> -I/usr/local/apache2/2.2.6/include
>>> -I/usr/local/include/python2.5  -c -o requestobject.lo 
>>> requestobject.c &&
>>> touch requestobject.slo
>>> In file included from /usr/local/include/python2.5/Python.h:8,
>>>                 from 
>>> /usr/src/mod_python-3.3.1/src/include/mod_python.h:80,
>>>                 from requestobject.c:25:
>>> /usr/local/include/python2.5/pyconfig.h:942:1: warning: 
>>> "_POSIX_C_SOURCE"
>>> redefined
>>> In file included from /usr/include/sys/types.h:27,
>>>                 from /usr/local/apache2/2.2.6/include/apr.h:116,
>>>                 from /usr/local/apache2/2.2.6/include/ap_config.h:25,
>>>                 from /usr/local/apache2/2.2.6/include/httpd.h:43,
>>>                 from 
>>> /usr/src/mod_python-3.3.1/src/include/mod_python.h:42,
>>>                 from requestobject.c:25:
>>> /usr/include/features.h:131:1: warning: this is the location of the 
>>> previous
>>> definition
>>> /usr/local/apache2/2.2.6/build/libtool --silent --mode=compile gcc
>>> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE 
>>> -D_LARGEFILE64_SOURCE -g
>>> -O2 -pthread -I/usr/local/apache2/2.2.6/include
>>> -I/usr/local/apache2/2.2.6/include   -I/usr/local/apache2/2.2.6/include
>>>  -I/usr/src/mod_python-3.3.1/src/include 
>>> -I/usr/local/apache2/2.2.6/include
>>> -I/usr/local/include/python2.5  -c -o tableobject.lo tableobject.c 
>>> && touch
>>> tableobject.slo
>>> In file included from /usr/local/include/python2.5/Python.h:8,
>>>                 from 
>>> /usr/src/mod_python-3.3.1/src/include/mod_python.h:80,
>>>                 from tableobject.c:25:
>>> /usr/local/include/python2.5/pyconfig.h:942:1: warning: 
>>> "_POSIX_C_SOURCE"
>>> redefined
>>> In file included from /usr/include/sys/types.h:27,
>>>                 from /usr/local/apache2/2.2.6/include/apr.h:116,
>>>                 from /usr/local/apache2/2.2.6/include/ap_config.h:25,
>>>                 from /usr/local/apache2/2.2.6/include/httpd.h:43,
>>>                 from 
>>> /usr/src/mod_python-3.3.1/src/include/mod_python.h:42,
>>>                 from tableobject.c:25:
>>> /usr/include/features.h:131:1: warning: this is the location of the 
>>> previous
>>> definition
>>> tableobject.c:1092: warning: initialization from incompatible 
>>> pointer type
>>> /usr/local/apache2/2.2.6/build/libtool --silent --mode=compile gcc
>>> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE 
>>> -D_LARGEFILE64_SOURCE -g
>>> -O2 -pthread -I/usr/local/apache2/2.2.6/include
>>> -I/usr/local/apache2/2.2.6/include   -I/usr/local/apache2/2.2.6/include
>>>  -I/usr/src/mod_python-3.3.1/src/include 
>>> -I/usr/local/apache2/2.2.6/include
>>> -I/usr/local/include/python2.5  -c -o util.lo util.c && touch util.slo
>>> In file included from /usr/local/include/python2.5/Python.h:8,
>>>                 from 
>>> /usr/src/mod_python-3.3.1/src/include/mod_python.h:80,
>>>                 from util.c:28:
>>> /usr/local/include/python2.5/pyconfig.h:942:1: warning: 
>>> "_POSIX_C_SOURCE"
>>> redefined
>>> In file included from /usr/include/sys/types.h:27,
>>>                 from /usr/local/apache2/2.2.6/include/apr.h:116,
>>>                 from /usr/local/apache2/2.2.6/include/ap_config.h:25,
>>>                 from /usr/local/apache2/2.2.6/include/httpd.h:43,
>>>                 from 
>>> /usr/src/mod_python-3.3.1/src/include/mod_python.h:42,
>>>                 from util.c:28:
>>> /usr/include/features.h:131:1: warning: this is the location of the 
>>> previous
>>> definition
>>> /usr/local/apache2/2.2.6/build/libtool --silent --mode=compile gcc
>>> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE 
>>> -D_LARGEFILE64_SOURCE -g
>>> -O2 -pthread -I/usr/local/apache2/2.2.6/include
>>> -I/usr/local/apache2/2.2.6/include   -I/usr/local/apache2/2.2.6/include
>>>  -I/usr/src/mod_python-3.3.1/src/include 
>>> -I/usr/local/apache2/2.2.6/include
>>> -I/usr/local/include/python2.5  -c -o serverobject.lo serverobject.c &&
>>> touch serverobject.slo
>>> In file included from /usr/local/include/python2.5/Python.h:8,
>>>                 from 
>>> /usr/src/mod_python-3.3.1/src/include/mod_python.h:80,
>>>                 from serverobject.c:25:
>>> /usr/local/include/python2.5/pyconfig.h:942:1: warning: 
>>> "_POSIX_C_SOURCE"
>>> redefined
>>> In file included from /usr/include/sys/types.h:27,
>>>                 from /usr/local/apache2/2.2.6/include/apr.h:116,
>>>                 from /usr/local/apache2/2.2.6/include/ap_config.h:25,
>>>                 from /usr/local/apache2/2.2.6/include/httpd.h:43,
>>>                 from 
>>> /usr/src/mod_python-3.3.1/src/include/mod_python.h:42,
>>>                 from serverobject.c:25:
>>> /usr/include/features.h:131:1: warning: this is the location of the 
>>> previous
>>> definition
>>> serverobject.c:387: warning: initialization from incompatible 
>>> pointer type
>>> /usr/local/apache2/2.2.6/build/libtool --silent --mode=compile gcc
>>> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE 
>>> -D_LARGEFILE64_SOURCE -g
>>> -O2 -pthread -I/usr/local/apache2/2.2.6/include
>>> -I/usr/local/apache2/2.2.6/include   -I/usr/local/apache2/2.2.6/include
>>>  -I/usr/src/mod_python-3.3.1/src/include 
>>> -I/usr/local/apache2/2.2.6/include
>>> -I/usr/local/include/python2.5  -c -o connobject.lo connobject.c && 
>>> touch
>>> connobject.slo
>>> In file included from /usr/local/include/python2.5/Python.h:8,
>>>                 from 
>>> /usr/src/mod_python-3.3.1/src/include/mod_python.h:80,
>>>                 from connobject.c:30:
>>> /usr/local/include/python2.5/pyconfig.h:942:1: warning: 
>>> "_POSIX_C_SOURCE"
>>> redefined
>>> In file included from /usr/include/sys/types.h:27,
>>>                 from /usr/local/apache2/2.2.6/include/apr.h:116,
>>>                 from /usr/local/apache2/2.2.6/include/ap_config.h:25,
>>>                 from /usr/local/apache2/2.2.6/include/httpd.h:43,
>>>                 from 
>>> /usr/src/mod_python-3.3.1/src/include/mod_python.h:42,
>>>                 from connobject.c:30:
>>> /usr/include/features.h:131:1: warning: this is the location of the 
>>> previous
>>> definition
>>> /usr/local/apache2/2.2.6/build/libtool --silent --mode=compile gcc
>>> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE 
>>> -D_LARGEFILE64_SOURCE -g
>>> -O2 -pthread -I/usr/local/apache2/2.2.6/include
>>> -I/usr/local/apache2/2.2.6/include   -I/usr/local/apache2/2.2.6/include
>>>  -I/usr/src/mod_python-3.3.1/src/include 
>>> -I/usr/local/apache2/2.2.6/include
>>> -I/usr/local/include/python2.5  -c -o filterobject.lo filterobject.c &&
>>> touch filterobject.slo
>>> In file included from /usr/local/include/python2.5/Python.h:8,
>>>                 from 
>>> /usr/src/mod_python-3.3.1/src/include/mod_python.h:80,
>>>                 from filterobject.c:28:
>>> /usr/local/include/python2.5/pyconfig.h:942:1: warning: 
>>> "_POSIX_C_SOURCE"
>>> redefined
>>> In file included from /usr/include/sys/types.h:27,
>>>                 from /usr/local/apache2/2.2.6/include/apr.h:116,
>>>                 from /usr/local/apache2/2.2.6/include/ap_config.h:25,
>>>                 from /usr/local/apache2/2.2.6/include/httpd.h:43,
>>>                 from 
>>> /usr/src/mod_python-3.3.1/src/include/mod_python.h:42,
>>>                 from filterobject.c:28:
>>> /usr/include/features.h:131:1: warning: this is the location of the 
>>> previous
>>> definition
>>> /usr/local/apache2/2.2.6/build/libtool --silent --mode=compile gcc
>>> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE 
>>> -D_LARGEFILE64_SOURCE -g
>>> -O2 -pthread -I/usr/local/apache2/2.2.6/include
>>> -I/usr/local/apache2/2.2.6/include   -I/usr/local/apache2/2.2.6/include
>>>  -I/usr/src/mod_python-3.3.1/src/include 
>>> -I/usr/local/apache2/2.2.6/include
>>> -I/usr/local/include/python2.5  -c -o hlist.lo hlist.c && touch 
>>> hlist.slo
>>> In file included from /usr/local/include/python2.5/Python.h:8,
>>>                 from 
>>> /usr/src/mod_python-3.3.1/src/include/mod_python.h:80,
>>>                 from hlist.c:28:
>>> /usr/local/include/python2.5/pyconfig.h:942:1: warning: 
>>> "_POSIX_C_SOURCE"
>>> redefined
>>> In file included from /usr/include/sys/types.h:27,
>>>                 from /usr/local/apache2/2.2.6/include/apr.h:116,
>>>                 from /usr/local/apache2/2.2.6/include/ap_config.h:25,
>>>                 from /usr/local/apache2/2.2.6/include/httpd.h:43,
>>>                 from 
>>> /usr/src/mod_python-3.3.1/src/include/mod_python.h:42,
>>>                 from hlist.c:28:
>>> /usr/include/features.h:131:1: warning: this is the location of the 
>>> previous
>>> definition
>>> /usr/local/apache2/2.2.6/build/libtool --silent --mode=compile gcc
>>> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE 
>>> -D_LARGEFILE64_SOURCE -g
>>> -O2 -pthread -I/usr/local/apache2/2.2.6/include
>>> -I/usr/local/apache2/2.2.6/include   -I/usr/local/apache2/2.2.6/include
>>>  -I/usr/src/mod_python-3.3.1/src/include 
>>> -I/usr/local/apache2/2.2.6/include
>>> -I/usr/local/include/python2.5  -c -o hlistobject.lo hlistobject.c 
>>> && touch
>>> hlistobject.slo
>>> In file included from /usr/local/include/python2.5/Python.h:8,
>>>                 from 
>>> /usr/src/mod_python-3.3.1/src/include/mod_python.h:80,
>>>                 from hlistobject.c:28:
>>> /usr/local/include/python2.5/pyconfig.h:942:1: warning: 
>>> "_POSIX_C_SOURCE"
>>> redefined
>>> In file included from /usr/include/sys/types.h:27,
>>>                 from /usr/local/apache2/2.2.6/include/apr.h:116,
>>>                 from /usr/local/apache2/2.2.6/include/ap_config.h:25,
>>>                 from /usr/local/apache2/2.2.6/include/httpd.h:43,
>>>                 from 
>>> /usr/src/mod_python-3.3.1/src/include/mod_python.h:42,
>>>                 from hlistobject.c:28:
>>> /usr/include/features.h:131:1: warning: this is the location of the 
>>> previous
>>> definition
>>> /usr/local/apache2/2.2.6/build/libtool --silent --mode=compile gcc
>>> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE 
>>> -D_LARGEFILE64_SOURCE -g
>>> -O2 -pthread -I/usr/local/apache2/2.2.6/include
>>> -I/usr/local/apache2/2.2.6/include   -I/usr/local/apache2/2.2.6/include
>>>  -I/usr/src/mod_python-3.3.1/src/include 
>>> -I/usr/local/apache2/2.2.6/include
>>> -I/usr/local/include/python2.5  -c -o finfoobject.lo finfoobject.c 
>>> && touch
>>> finfoobject.slo
>>> In file included from /usr/local/include/python2.5/Python.h:8,
>>>                 from 
>>> /usr/src/mod_python-3.3.1/src/include/mod_python.h:80,
>>>                 from finfoobject.c:25:
>>> /usr/local/include/python2.5/pyconfig.h:942:1: warning: 
>>> "_POSIX_C_SOURCE"
>>> redefined
>>> In file included from /usr/include/sys/types.h:27,
>>>                 from /usr/local/apache2/2.2.6/include/apr.h:116,
>>>                 from /usr/local/apache2/2.2.6/include/ap_config.h:25,
>>>                 from /usr/local/apache2/2.2.6/include/httpd.h:43,
>>>                 from 
>>> /usr/src/mod_python-3.3.1/src/include/mod_python.h:42,
>>>                 from finfoobject.c:25:
>>> /usr/include/features.h:131:1: warning: this is the location of the 
>>> previous
>>> definition
>>> finfoobject.c:278: warning: `intargfunc' is deprecated (declared at
>>> /usr/local/include/python2.5/object.h:133)
>>> /usr/local/apache2/2.2.6/build/libtool --silent --mode=link gcc -o
>>> mod_python.la  -rpath /usr/local/apache2/2.2.6/modules -module
>>> -avoid-version    finfoobject.lo hlistobject.lo hlist.lo 
>>> filterobject.lo
>>> connobject.lo serverobject.lo util.lo tableobject.lo requestobject.lo
>>> _apachemodule.lo mod_python.lo -L/usr/local/lib/python2.5/config 
>>> -Xlinker
>>> -export-dynamic -lm -lpython2.5 -lpthread -ldl -lutil -lm
>>> make[2]: Leaving directory `/usr/src/mod_python-3.3.1/src'
>>> make[2]: Entering directory `/usr/src/mod_python-3.3.1/dist'
>>> ln -s ../lib/python/mod_python mod_python
>>> make[3]: Entering directory `/usr/src/mod_python-3.3.1/src'
>>> make[3]: `psp_parser.c' is up to date.
>>> make[3]: Leaving directory `/usr/src/mod_python-3.3.1/src'
>>> /usr/local/bin/python2.5 setup.py build
>>> running build
>>> running build_py
>>> creating build
>>> creating build/lib.linux-i686-2.5
>>> creating build/lib.linux-i686-2.5/mod_python
>>> copying 
>>> /usr/src/mod_python-3.3.1/lib/python/mod_python/testhandler.py ->
>>> build/lib.linux-i686-2.5/mod_python
>>> copying /usr/src/mod_python-3.3.1/lib/python/mod_python/Cookie.py ->
>>> build/lib.linux-i686-2.5/mod_python
>>> copying /usr/src/mod_python-3.3.1/lib/python/mod_python/publisher.py ->
>>> build/lib.linux-i686-2.5/mod_python
>>> copying /usr/src/mod_python-3.3.1/lib/python/mod_python/__init__.py ->
>>> build/lib.linux-i686-2.5/mod_python
>>> copying /usr/src/mod_python-3.3.1/lib/python/mod_python/util.py ->
>>> build/lib.linux-i686-2.5/mod_python
>>> copying 
>>> /usr/src/mod_python-3.3.1/lib/python/mod_python/cgihandler.py ->
>>> build/lib.linux-i686-2.5/mod_python
>>> copying /usr/src/mod_python-3.3.1/lib/python/mod_python/apache.py ->
>>> build/lib.linux-i686-2.5/mod_python
>>> copying /usr/src/mod_python-3.3.1/lib/python/mod_python/importer.py ->
>>> build/lib.linux-i686-2.5/mod_python
>>> copying /usr/src/mod_python-3.3.1/lib/python/mod_python/psp.py ->
>>> build/lib.linux-i686-2.5/mod_python
>>> copying /usr/src/mod_python-3.3.1/lib/python/mod_python/Session.py ->
>>> build/lib.linux-i686-2.5/mod_python
>>> copying /usr/src/mod_python-3.3.1/lib/python/mod_python/cache.py ->
>>> build/lib.linux-i686-2.5/mod_python
>>> copying /usr/src/mod_python-3.3.1/lib/python/mod_python/python22.py ->
>>> build/lib.linux-i686-2.5/mod_python
>>> running build_ext
>>> building 'mod_python._psp' extension
>>> creating build/temp.linux-i686-2.5
>>> creating build/temp.linux-i686-2.5/usr
>>> creating build/temp.linux-i686-2.5/usr/src
>>> creating build/temp.linux-i686-2.5/usr/src/SSL_LAMP
>>> creating build/temp.linux-i686-2.5/usr/src/mod_python-3.3.1
>>> creating build/temp.linux-i686-2.5/usr/src/mod_python-3.3.1/src
>>> gcc -pthread -fno-strict-aliasing -DNDEBUG -g -O3 -Wall 
>>> -Wstrict-prototypes
>>> -fPIC -I/usr/src/mod_python-3.3.1/src/include 
>>> -I/usr/local/include/python2.5
>>> -c /usr/src/mod_python-3.3.1/src/psp_string.c -o
>>> build/temp.linux-i686-2.5/usr/src/mod_python-3.3.1/src/psp_string.o
>>> gcc -pthread -fno-strict-aliasing -DNDEBUG -g -O3 -Wall 
>>> -Wstrict-prototypes
>>> -fPIC -I/usr/src/mod_python-3.3.1/src/include 
>>> -I/usr/local/include/python2.5
>>> -c /usr/src/mod_python-3.3.1/src/psp_parser.c -o
>>> build/temp.linux-i686-2.5/usr/src/mod_python-3.3.1/src/psp_parser.o
>>> In file included from /usr/local/include/python2.5/Python.h:8,
>>>                 from 
>>> /usr/src/mod_python-3.3.1/src/include/psp_parser.h:23,
>>>                 from psp_parser.l:29:
>>> /usr/local/include/python2.5/pyconfig.h:942:1: warning: 
>>> "_POSIX_C_SOURCE"
>>> redefined
>>> In file included from /usr/include/stdio.h:28,
>>>                 from psp_parser.c:20:
>>> /usr/include/features.h:171:1: warning: this is the location of the 
>>> previous
>>> definition
>>> gcc -pthread -fno-strict-aliasing -DNDEBUG -g -O3 -Wall 
>>> -Wstrict-prototypes
>>> -fPIC -I/usr/src/mod_python-3.3.1/src/include 
>>> -I/usr/local/include/python2.5
>>> -c /usr/src/mod_python-3.3.1/src/_pspmodule.c -o
>>> build/temp.linux-i686-2.5/usr/src/mod_python-3.3.1/src/_pspmodule.o
>>> In file included from /usr/local/include/python2.5/Python.h:8,
>>>                 from 
>>> /usr/src/mod_python-3.3.1/src/include/psp_parser.h:23,
>>>                 from /usr/src/mod_python-3.3.1/src/_pspmodule.c:26:
>>> /usr/local/include/python2.5/pyconfig.h:942:1: warning: 
>>> "_POSIX_C_SOURCE"
>>> redefined
>>> In file included from /usr/include/stdio.h:28,
>>>                 from include/psp_flex.h:24,
>>>                 from /usr/src/mod_python-3.3.1/src/_pspmodule.c:25:
>>> /usr/include/features.h:171:1: warning: this is the location of the 
>>> previous
>>> definition
>>> gcc -pthread -shared
>>> build/temp.linux-i686-2.5/usr/src/mod_python-3.3.1/src/psp_string.o
>>> build/temp.linux-i686-2.5/usr/src/mod_python-3.3.1/src/psp_parser.o
>>> build/temp.linux-i686-2.5/usr/src/mod_python-3.3.1/src/_pspmodule.o -o
>>> build/lib.linux-i686-2.5/mod_python/_psp.so
>>> make[2]: Leaving directory `/usr/src/mod_python-3.3.1/dist'
>>>
>>> Now su and make install
>>>  (or, if you only want to perform a partial install,
>>>   you can use make install_dso and make install_py_lib)
>>>
>>>
>>> _______________________________________________
>>> Mod_python mailing list
>>> Mod_python@modpython.org
>>> http://mailman.modpython.org/mailman/listinfo/mod_python
>>>
>>
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python

From graham.dumpleton at gmail.com  Sun Jun 22 22:10:25 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Sun Jun 22 22:10:30 2008
Subject: [mod_python] Re: mod_python 3.3.1 bug report
In-Reply-To: <AD5DB0D9-516F-4714-B321-CCB9FE51E3CC@cs.depaul.edu>
References: <52FEB3B6-7ACE-41DB-8278-31DF9752D264@cs.depaul.edu>
	<AD5DB0D9-516F-4714-B321-CCB9FE51E3CC@cs.depaul.edu>
Message-ID: <88e286470806221910r42ebab07jd2ae094247a006ca@mail.gmail.com>

It wasn't listed because I believe it was already stated by OP that it
worked with WSGI and thus they knew that already. I therefore didn't
need to tell him.

As much as many frameworks can run on WSGI and may even state or aim
to be 100% WSGI compliant, that doesn't mean they fit with some of the
greater ideals of WSGI that some would like to see. The thing which
Django folks will not be addressing is their reliance on os.environ to
define location of configuration information. WSGI doesn't say they
can't do this, but relying on global data like that in any WSGI
compliant framework limits one to having one instance of that
framework within a Python interpreter instance. This makes it
impossible with one Python interpreter instance to mount more than one
application reliant on that framework. Thus one is forced to use
multiple processes and/or interpreters instead.

Graham

2008/6/22 Massimo Di Pierro <mdipierro@cs.depaul.edu>:
> I read the post again and I noticed you omitted web2py from the list of
> "major frameworks" that support wsgi. I would like to add that web2py uses
> the cherrypy 3.0 wsgiserver (unmodified) so it is as wsgi compliant as
> cherrypy is. Django instead, for example, lists "Making Django 100% WSGI
> compliant." as one of the roadmark targets for version 1.0.
> Massimo
> On Jun 21, 2008, at 9:44 AM, Massimo Di Pierro wrote:
>
> Dear Graham,
> a couple of months ago you send me some very constructive comments about
> web2py. In particular you suggested that we replaced all relative paths with
> absolutes paths. I really appreciate your advice and this issue was
> addressed within one week of your email. If there is any other issue that
> you find with the web2py source code, please let us know and it will be
> addresses. At this point we are not aware of any open issue.
> You also refer to "heard various critiques by others about it". Could you be
> more explicit? Unfortunately there are many incorrect posts online about
> web2py written by people who have not tried it or read the specs.
> Massimo
>
> Graham Dumpleton graham.dumpleton at gmail.com write:
>> All the major frameworks support WSGI, Django, TurboGears, Pylons,
>> CherryPy, web.py and up and comers such as Werkzeug.
>> Although Django may say use mod_python, general consensus is rapidly
>> moving to use of mod_wsgi, it is just that developers who maintain web
>> site haven't decided yet to make a statement that mod_wsgi is equally
>> as capable as mod_python.
>> As to web2py, it would not be one of my first choices. It may be more
>> glitzy and have better marketing speak around it, but having seen some
>> of the code in it and heard various critiques by others about it, I'd
>> be looking elsewhere. I'd probably suggest Django for high level
>> framework and Werkzeug if you want a more low level nuts and bolts
>> approach.
>>
>> Graham<ATT00001.txt>
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>
>
From graham.dumpleton at gmail.com  Sun Jun 22 22:12:13 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Sun Jun 22 22:12:18 2008
Subject: [mod_python] python hosting
In-Reply-To: <445528820806211000g2eb9ba7cla70a731f5ca8a07c@mail.gmail.com>
References: <445528820806211000g2eb9ba7cla70a731f5ca8a07c@mail.gmail.com>
Message-ID: <88e286470806221912n219ae136g4dc662d137bfce01@mail.gmail.com>

You need to use either a VPS and install everything yourself, or use
someone like WebFaction which provides Apache/mod_python instance
within your user account.

2008/6/22 jijo joseph <jijo.cj@gmail.com>:
> hi
>
> I'm need to host my PSP pages
> Can anyone suggest good PSP hosting servers
>
> --
> Truly
>
> Jijo Joseph
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>
>
From graham.dumpleton at gmail.com  Sun Jun 22 22:32:45 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Sun Jun 22 22:32:50 2008
Subject: [mod_python] Re: mod_python 3.3.1 bug report
In-Reply-To: <2F03305F-D28F-400D-88F2-1EC5B0504E88@cs.depaul.edu>
References: <52FEB3B6-7ACE-41DB-8278-31DF9752D264@cs.depaul.edu>
	<AD5DB0D9-516F-4714-B321-CCB9FE51E3CC@cs.depaul.edu>
	<88e286470806221910r42ebab07jd2ae094247a006ca@mail.gmail.com>
	<2F03305F-D28F-400D-88F2-1EC5B0504E88@cs.depaul.edu>
Message-ID: <88e286470806221932r5970130arda8f607fa9c39beb@mail.gmail.com>

It is okay read only, which is how mod_python uses it.

2008/6/23 Massimo Di Pierro <MDiPierro@cs.depaul.edu>:
> Am I wrong or using os.environ is not even thread safe?
> Are you also saying that Django 1.0 will continue to use os.environ?
>
> Massimo
>
> On Jun 22, 2008, at 9:10 PM, Graham Dumpleton wrote:
>
>> It wasn't listed because I believe it was already stated by OP that it
>> worked with WSGI and thus they knew that already. I therefore didn't
>> need to tell him.
>>
>> As much as many frameworks can run on WSGI and may even state or aim
>> to be 100% WSGI compliant, that doesn't mean they fit with some of the
>> greater ideals of WSGI that some would like to see. The thing which
>> Django folks will not be addressing is their reliance on os.environ to
>> define location of configuration information. WSGI doesn't say they
>> can't do this, but relying on global data like that in any WSGI
>> compliant framework limits one to having one instance of that
>> framework within a Python interpreter instance. This makes it
>> impossible with one Python interpreter instance to mount more than one
>> application reliant on that framework. Thus one is forced to use
>> multiple processes and/or interpreters instead.
>>
>> Graham
>>
>> 2008/6/22 Massimo Di Pierro <mdipierro@cs.depaul.edu>:
>>>
>>> I read the post again and I noticed you omitted web2py from the list of
>>> "major frameworks" that support wsgi. I would like to add that web2py
>>> uses
>>> the cherrypy 3.0 wsgiserver (unmodified) so it is as wsgi compliant as
>>> cherrypy is. Django instead, for example, lists "Making Django 100% WSGI
>>> compliant." as one of the roadmark targets for version 1.0.
>>> Massimo
>>> On Jun 21, 2008, at 9:44 AM, Massimo Di Pierro wrote:
>>>
>>> Dear Graham,
>>> a couple of months ago you send me some very constructive comments about
>>> web2py. In particular you suggested that we replaced all relative paths
>>> with
>>> absolutes paths. I really appreciate your advice and this issue was
>>> addressed within one week of your email. If there is any other issue that
>>> you find with the web2py source code, please let us know and it will be
>>> addresses. At this point we are not aware of any open issue.
>>> You also refer to "heard various critiques by others about it". Could you
>>> be
>>> more explicit? Unfortunately there are many incorrect posts online about
>>> web2py written by people who have not tried it or read the specs.
>>> Massimo
>>>
>>> Graham Dumpleton graham.dumpleton at gmail.com write:
>>>>
>>>> All the major frameworks support WSGI, Django, TurboGears, Pylons,
>>>> CherryPy, web.py and up and comers such as Werkzeug.
>>>> Although Django may say use mod_python, general consensus is rapidly
>>>> moving to use of mod_wsgi, it is just that developers who maintain web
>>>> site haven't decided yet to make a statement that mod_wsgi is equally
>>>> as capable as mod_python.
>>>> As to web2py, it would not be one of my first choices. It may be more
>>>> glitzy and have better marketing speak around it, but having seen some
>>>> of the code in it and heard various critiques by others about it, I'd
>>>> be looking elsewhere. I'd probably suggest Django for high level
>>>> framework and Werkzeug if you want a more low level nuts and bolts
>>>> approach.
>>>>
>>>> Graham<ATT00001.txt>
>>>
>>> _______________________________________________
>>> Mod_python mailing list
>>> Mod_python@modpython.org
>>> http://mailman.modpython.org/mailman/listinfo/mod_python
>>>
>>>
>
>
From graham.dumpleton at gmail.com  Mon Jun 23 05:16:29 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Mon Jun 23 05:16:37 2008
Subject: [mod_python] Re: mod_python 3.3.1 bug report
In-Reply-To: <E23A82BD-6FAB-4668-B688-69004D01CE1F@cs.depaul.edu>
References: <52FEB3B6-7ACE-41DB-8278-31DF9752D264@cs.depaul.edu>
	<AD5DB0D9-516F-4714-B321-CCB9FE51E3CC@cs.depaul.edu>
	<88e286470806221910r42ebab07jd2ae094247a006ca@mail.gmail.com>
	<2F03305F-D28F-400D-88F2-1EC5B0504E88@cs.depaul.edu>
	<88e286470806221932r5970130arda8f607fa9c39beb@mail.gmail.com>
	<E23A82BD-6FAB-4668-B688-69004D01CE1F@cs.depaul.edu>
Message-ID: <88e286470806230216o12ca4040sbb8351299632ba8e@mail.gmail.com>

Please keep replies on list.

2008/6/23 Massimo Di Pierro <MDiPierro@cs.depaul.edu>:
> I agree it makes perfect sense within mod_python. But how Django must write
> in os.environ in order to use it on top of mod_wsgi. Am I wrong?

I meant to say 'It is okay read only, which is how Django uses it'. If
you think it makes perfect sense in mod_python, then I am not sure how
as that isn't what I meant to say. :-)

Django itself doesn't write to os.environ. As a hack they allow
mod_python adapter for Django to write into it, but that is outside of
Django proper. Rather poorly, they do it on every request. Technically
this would be bad if the value changes on every request, but in
general it wouldn't change, so just redundant.

In mod_wsgi it is the WSGI script which sets up the Django instance
that needs to write to os.environ before importing Django. This is
only done when the script is first loaded however and not on every
request.

Either way, a WSGI friendly application would have a configuration
parameter passed through the WSGI environment dictionary and as such
be able to be changed on every request if need be. Trac for example
does this, and because they properly isolate project areas, can thus
host multiple project areas in one interpreter instance.

Graham

>
> Massimo
>
> On Jun 22, 2008, at 9:32 PM, Graham Dumpleton wrote:
>
>> It is okay read only, which is how mod_python uses it.
>>
>> 2008/6/23 Massimo Di Pierro <MDiPierro@cs.depaul.edu>:
>>>
>>> Am I wrong or using os.environ is not even thread safe?
>>> Are you also saying that Django 1.0 will continue to use os.environ?
>>>
>>> Massimo
>>>
>>> On Jun 22, 2008, at 9:10 PM, Graham Dumpleton wrote:
>>>
>>>> It wasn't listed because I believe it was already stated by OP that it
>>>> worked with WSGI and thus they knew that already. I therefore didn't
>>>> need to tell him.
>>>>
>>>> As much as many frameworks can run on WSGI and may even state or aim
>>>> to be 100% WSGI compliant, that doesn't mean they fit with some of the
>>>> greater ideals of WSGI that some would like to see. The thing which
>>>> Django folks will not be addressing is their reliance on os.environ to
>>>> define location of configuration information. WSGI doesn't say they
>>>> can't do this, but relying on global data like that in any WSGI
>>>> compliant framework limits one to having one instance of that
>>>> framework within a Python interpreter instance. This makes it
>>>> impossible with one Python interpreter instance to mount more than one
>>>> application reliant on that framework. Thus one is forced to use
>>>> multiple processes and/or interpreters instead.
>>>>
>>>> Graham
>>>>
>>>> 2008/6/22 Massimo Di Pierro <mdipierro@cs.depaul.edu>:
>>>>>
>>>>> I read the post again and I noticed you omitted web2py from the list of
>>>>> "major frameworks" that support wsgi. I would like to add that web2py
>>>>> uses
>>>>> the cherrypy 3.0 wsgiserver (unmodified) so it is as wsgi compliant as
>>>>> cherrypy is. Django instead, for example, lists "Making Django 100%
>>>>> WSGI
>>>>> compliant." as one of the roadmark targets for version 1.0.
>>>>> Massimo
>>>>> On Jun 21, 2008, at 9:44 AM, Massimo Di Pierro wrote:
>>>>>
>>>>> Dear Graham,
>>>>> a couple of months ago you send me some very constructive comments
>>>>> about
>>>>> web2py. In particular you suggested that we replaced all relative paths
>>>>> with
>>>>> absolutes paths. I really appreciate your advice and this issue was
>>>>> addressed within one week of your email. If there is any other issue
>>>>> that
>>>>> you find with the web2py source code, please let us know and it will be
>>>>> addresses. At this point we are not aware of any open issue.
>>>>> You also refer to "heard various critiques by others about it". Could
>>>>> you
>>>>> be
>>>>> more explicit? Unfortunately there are many incorrect posts online
>>>>> about
>>>>> web2py written by people who have not tried it or read the specs.
>>>>> Massimo
>>>>>
>>>>> Graham Dumpleton graham.dumpleton at gmail.com write:
>>>>>>
>>>>>> All the major frameworks support WSGI, Django, TurboGears, Pylons,
>>>>>> CherryPy, web.py and up and comers such as Werkzeug.
>>>>>> Although Django may say use mod_python, general consensus is rapidly
>>>>>> moving to use of mod_wsgi, it is just that developers who maintain web
>>>>>> site haven't decided yet to make a statement that mod_wsgi is equally
>>>>>> as capable as mod_python.
>>>>>> As to web2py, it would not be one of my first choices. It may be more
>>>>>> glitzy and have better marketing speak around it, but having seen some
>>>>>> of the code in it and heard various critiques by others about it, I'd
>>>>>> be looking elsewhere. I'd probably suggest Django for high level
>>>>>> framework and Werkzeug if you want a more low level nuts and bolts
>>>>>> approach.
>>>>>>
>>>>>> Graham<ATT00001.txt>
>>>>>
>>>>> _______________________________________________
>>>>> Mod_python mailing list
>>>>> Mod_python@modpython.org
>>>>> http://mailman.modpython.org/mailman/listinfo/mod_python
>>>>>
>>>>>
>>>
>>>
>
>
From luke at riverhall.co.uk  Mon Jun 23 06:57:30 2008
From: luke at riverhall.co.uk (Luke Benstead)
Date: Mon Jun 23 06:57:55 2008
Subject: [mod_python] Duplicated statements using the publisher handler
Message-ID: <1214218650.6542.11.camel@hughes>

Hi all,

I have been getting some weird behaviour from a python script that I
wrote that uses the publisher handler. I'm not sure what is going wrong
to be honest, hopefully someone can point me in the right direction...

My script simply receives POST requests from an automated program on
another server. On receiving the requests the data is validated and then
inserted into a database. The code is quite simple. The problem is that
every time a POST is received, each Python statement seems to be run an
increasing number of times. For example, if I restart Apache, and send a
POST I get the following logged from the script:


2008-06-23 11:29:22,352 scriptname DEBUG    PID:6544 Thread:2964 Request
received: AdvertiserID = [Field('AdvertiserID', 'C46'),
Field('AdvertiserID', 'C1386')]


which is correct. If I resend the POST (e.g. press refresh in the
browser, I get the following added to the log

?2008-06-23 11:29:22,352 scriptname DEBUG    PID:6544 Thread:2964
Request received: AdvertiserID = [Field('AdvertiserID', 'C46'),
Field('AdvertiserID', 'C1386')]
?2008-06-23 11:29:22,352 scriptname DEBUG    PID:6544 Thread:2964
Request received: AdvertiserID = [Field('AdvertiserID', 'C46'),
Field('AdvertiserID', 'C1386')]

If I refresh again I get 3 entries, continually increasing. This happens
to every statement in the program. Originally I thought it might just be
the log, but I'm getting primary key database errors where insert
statements are being repeated.

The log writes the process ID and the a thread ID for each request. So I
know it is the SAME request which seems to call each method repeatedly
in order. Here's another example from the log:

2008-06-23 11:29:34,009 ?scriptname DEBUG    PID:6544 Thread:736 List
after cleaning: [Field('AdvertiserID', 'C1386'), Field('AdvertiserID',
'C46')]
2008-06-23 11:29:34,009 ?scriptname DEBUG    PID:6544 Thread:736 List
after cleaning: [Field('AdvertiserID', 'C1386'), Field('AdvertiserID',
'C46')]
2008-06-23 11:29:34,009 ?scriptname DEBUG    PID:6544 Thread:736 Data is
valid
2008-06-23 11:29:34,009 ?scriptname DEBUG    PID:6544 Thread:736 Data is
valid

So it's not as if the script is being run twice one after the other,
it's actually like each statement is called twice.

This is running Apache 2.2 + mod_python 3.3.1 under Windows 2000.

The Apache config uses a rewrite rule to get to the following location
directive:

	<Location "/?scriptname/">
		SetHandler mod_python
		PythonHandler mod_python.publisher
		PythonDebug On
	</Location>

I'd appreciate any help with this, thanks in advance.

Luke.



From sergiodj at linux.vnet.ibm.com  Mon Jun 23 16:43:22 2008
From: sergiodj at linux.vnet.ibm.com (=?ISO-8859-1?Q?S=E9rgio?= Durigan =?ISO-8859-1?Q?J=FAnior?=)
Date: Mon Jun 23 16:42:38 2008
Subject: [mod_python] Testing mod_python without having to install it
Message-ID: <1214253802.21059.4.camel@miki>

Hi everybody,

I'm facing some problems when I try to run "make check" (test stage)
against a fresh compilation of mod_python. As far as I could see, it's
failing because it tries to run mod_python from its install dir. The
thing is that I cannot install this compilation in the system I'm using,
so this test must be done from its build directory.

Well, shortly, is there a way to run those tests from the build dir?

Best regards,

-- 
S?rgio Durigan J?nior
Linux on Power Toolchain - Software Engineer
Linux Technology Center - LTC
IBM Brazil

From graham.dumpleton at gmail.com  Mon Jun 23 19:39:18 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Mon Jun 23 19:39:24 2008
Subject: [mod_python] Duplicated statements using the publisher handler
In-Reply-To: <1214218650.6542.11.camel@hughes>
References: <1214218650.6542.11.camel@hughes>
Message-ID: <88e286470806231639m60f281a3q4d605161cdb19f7d@mail.gmail.com>

Log the value of req.connection.id in the request to try and doubly
confirm if it is being done in context of one client connection.

Do you have any fancy rewrite rules in your Apache configuration?

Do you have directory browsing enabled in Apache so you can get
directory listings?

Are you using any Apache authentication scheme?

Graham

2008/6/23 Luke Benstead <luke@riverhall.co.uk>:
> Hi all,
>
> I have been getting some weird behaviour from a python script that I
> wrote that uses the publisher handler. I'm not sure what is going wrong
> to be honest, hopefully someone can point me in the right direction...
>
> My script simply receives POST requests from an automated program on
> another server. On receiving the requests the data is validated and then
> inserted into a database. The code is quite simple. The problem is that
> every time a POST is received, each Python statement seems to be run an
> increasing number of times. For example, if I restart Apache, and send a
> POST I get the following logged from the script:
>
>
> 2008-06-23 11:29:22,352 scriptname DEBUG    PID:6544 Thread:2964 Request
> received: AdvertiserID = [Field('AdvertiserID', 'C46'),
> Field('AdvertiserID', 'C1386')]
>
>
> which is correct. If I resend the POST (e.g. press refresh in the
> browser, I get the following added to the log
>
> ?2008-06-23 11:29:22,352 scriptname DEBUG    PID:6544 Thread:2964
> Request received: AdvertiserID = [Field('AdvertiserID', 'C46'),
> Field('AdvertiserID', 'C1386')]
> ?2008-06-23 11:29:22,352 scriptname DEBUG    PID:6544 Thread:2964
> Request received: AdvertiserID = [Field('AdvertiserID', 'C46'),
> Field('AdvertiserID', 'C1386')]
>
> If I refresh again I get 3 entries, continually increasing. This happens
> to every statement in the program. Originally I thought it might just be
> the log, but I'm getting primary key database errors where insert
> statements are being repeated.
>
> The log writes the process ID and the a thread ID for each request. So I
> know it is the SAME request which seems to call each method repeatedly
> in order. Here's another example from the log:
>
> 2008-06-23 11:29:34,009 ?scriptname DEBUG    PID:6544 Thread:736 List
> after cleaning: [Field('AdvertiserID', 'C1386'), Field('AdvertiserID',
> 'C46')]
> 2008-06-23 11:29:34,009 ?scriptname DEBUG    PID:6544 Thread:736 List
> after cleaning: [Field('AdvertiserID', 'C1386'), Field('AdvertiserID',
> 'C46')]
> 2008-06-23 11:29:34,009 ?scriptname DEBUG    PID:6544 Thread:736 Data is
> valid
> 2008-06-23 11:29:34,009 ?scriptname DEBUG    PID:6544 Thread:736 Data is
> valid
>
> So it's not as if the script is being run twice one after the other,
> it's actually like each statement is called twice.
>
> This is running Apache 2.2 + mod_python 3.3.1 under Windows 2000.
>
> The Apache config uses a rewrite rule to get to the following location
> directive:
>
>        <Location "/?scriptname/">
>                SetHandler mod_python
>                PythonHandler mod_python.publisher
>                PythonDebug On
>        </Location>
>
> I'd appreciate any help with this, thanks in advance.
>
> Luke.
>
>
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>

From graham.dumpleton at gmail.com  Mon Jun 23 19:45:20 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Mon Jun 23 19:45:26 2008
Subject: [mod_python] Testing mod_python without having to install it
In-Reply-To: <1214253802.21059.4.camel@miki>
References: <1214253802.21059.4.camel@miki>
Message-ID: <88e286470806231645i5b5e06f1kaf5ff86cb2abad9a@mail.gmail.com>

>From memory no, for some reason mod_python.so or Python code modules
still have to be installed. Can't remember why, it certainly should be
possible to do it without installation, but probably just not set up
that way.

Graham

2008/6/24 S?rgio Durigan J?nior <sergiodj@linux.vnet.ibm.com>:
> Hi everybody,
>
> I'm facing some problems when I try to run "make check" (test stage)
> against a fresh compilation of mod_python. As far as I could see, it's
> failing because it tries to run mod_python from its install dir. The
> thing is that I cannot install this compilation in the system I'm using,
> so this test must be done from its build directory.
>
> Well, shortly, is there a way to run those tests from the build dir?
>
> Best regards,
>
> --
> S?rgio Durigan J?nior
> Linux on Power Toolchain - Software Engineer
> Linux Technology Center - LTC
> IBM Brazil
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>

From scarfboy at gmail.com  Tue Jun 24 06:58:27 2008
From: scarfboy at gmail.com (Bart)
Date: Tue Jun 24 06:58:33 2008
Subject: [mod_python] POST Content-Length bug?
Message-ID: <b71082d80806240358t42bb7f2cn2dd2041b079b4462@mail.gmail.com>

I'm getting a 411 Length Required ("A request of the requested method
POST requires a valid Content-length.") in response to a
XMLHttpRequest, but that error does not seem to report the real
problem; Firebug and Tamper Data clearly show "Content-Length" with
value "30".

I can probably hack the JS to make it use GET instead (which seems to
work), but I figured I'd check whether this is a known bug first.
Could this be 3.1-specific?

Regards,
--Bart Alewijnse
From sergiodj at linux.vnet.ibm.com  Tue Jun 24 11:21:32 2008
From: sergiodj at linux.vnet.ibm.com (=?ISO-8859-1?Q?S=E9rgio?= Durigan =?ISO-8859-1?Q?J=FAnior?=)
Date: Tue Jun 24 11:21:16 2008
Subject: [mod_python] Testing mod_python without having to install it
In-Reply-To: <88e286470806231645i5b5e06f1kaf5ff86cb2abad9a@mail.gmail.com>
References: <1214253802.21059.4.camel@miki>
	<88e286470806231645i5b5e06f1kaf5ff86cb2abad9a@mail.gmail.com>
Message-ID: <1214320893.5307.7.camel@miki>

Hi Graham,

On Tue, 2008-06-24 at 09:45 +1000, Graham Dumpleton wrote:
> From memory no, for some reason mod_python.so or Python code modules
> still have to be installed. Can't remember why, it certainly should be
> possible to do it without installation, but probably just not set up
> that way.

Thanks for the information. Do you have any suggestion about how can I
run the testsuite for mod_python? Does mod_python provide a "uninstall"
rule in Makefile? I think I can make a temporary installation for
testing purposes...

Regards,

-- 
S?rgio Durigan J?nior
Linux on Power Toolchain - Software Engineer
Linux Technology Center - LTC
IBM Brazil

From graham.dumpleton at gmail.com  Wed Jun 25 08:40:43 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Wed Jun 25 08:40:49 2008
Subject: [mod_python] POST Content-Length bug?
In-Reply-To: <b71082d80806240358t42bb7f2cn2dd2041b079b4462@mail.gmail.com>
References: <b71082d80806240358t42bb7f2cn2dd2041b079b4462@mail.gmail.com>
Message-ID: <88e286470806250540v47cacaf9pa971f07acd7f82e2@mail.gmail.com>

Which mod_python handler are you using?

Use live headers or something else to capture headers sent by browser,
reply to list (not me) and post them.

Graham

2008/6/24 Bart <scarfboy@gmail.com>:
> I'm getting a 411 Length Required ("A request of the requested method
> POST requires a valid Content-length.") in response to a
> XMLHttpRequest, but that error does not seem to report the real
> problem; Firebug and Tamper Data clearly show "Content-Length" with
> value "30".
>
> I can probably hack the JS to make it use GET instead (which seems to
> work), but I figured I'd check whether this is a known bug first.
> Could this be 3.1-specific?
>
> Regards,
> --Bart Alewijnse
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>
From graham.dumpleton at gmail.com  Wed Jun 25 08:44:33 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Wed Jun 25 08:44:38 2008
Subject: [mod_python] Testing mod_python without having to install it
In-Reply-To: <1214320893.5307.7.camel@miki>
References: <1214253802.21059.4.camel@miki>
	<88e286470806231645i5b5e06f1kaf5ff86cb2abad9a@mail.gmail.com>
	<1214320893.5307.7.camel@miki>
Message-ID: <88e286470806250544idc31a33vf3798bc748d5caf8@mail.gmail.com>

2008/6/25 S?rgio Durigan J?nior <sergiodj@linux.vnet.ibm.com>:
> Hi Graham,
>
> On Tue, 2008-06-24 at 09:45 +1000, Graham Dumpleton wrote:
>> From memory no, for some reason mod_python.so or Python code modules
>> still have to be installed. Can't remember why, it certainly should be
>> possible to do it without installation, but probably just not set up
>> that way.
>
> Thanks for the information. Do you have any suggestion about how can I
> run the testsuite for mod_python?

Only by working out necessary changes to test suite to allow it to be
done if not installed.

Alternatively, install a version of httpd in temporary directory and
install mod_python in that. You don't need to run up that Apache, as
test suite scripts will just use it for its tests directly. When done,
blow away that Apache.

> Does mod_python provide a "uninstall"
> rule in Makefile?

Not that I know of.

> I think I can make a temporary installation for
> testing purposes...

As above, yes that should work.

> Regards,
>
> --
> S?rgio Durigan J?nior
> Linux on Power Toolchain - Software Engineer
> Linux Technology Center - LTC
> IBM Brazil
>
>

From optomatic at rogers.com  Wed Jun 25 12:48:59 2008
From: optomatic at rogers.com (Patrick)
Date: Wed Jun 25 12:49:15 2008
Subject: [mod_python] mod_python programming  books/tutorials? OT?
Message-ID: <486276FB.9020708@rogers.com>

Hi Everyone

I hope this post is not off topic, it is my first to this list.

I really don't want to use a framework unless I absolutely have to. It's 
not in my nature, if I have a plumbing problem I don't call a plumber I 
go and get a book on plumbing.

The mod_python documentation is helpful but I was hoping for a book 
dedicated to python web programming via mod_python without frameworks. 
Is there such a thing? Could someone please point me to some more 
documentation or tutorials? There seems to be a fair amount of cgi stuff 
out there but not too much that is mod-python oriented.

Again, sorry if this is off topic-Patrick
From graham.dumpleton at gmail.com  Wed Jun 25 21:15:31 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Wed Jun 25 21:15:35 2008
Subject: [mod_python] mod_python programming books/tutorials? OT?
In-Reply-To: <486276FB.9020708@rogers.com>
References: <486276FB.9020708@rogers.com>
Message-ID: <88e286470806251815m68dcc61bn2a58ccf5d2490e1f@mail.gmail.com>

2008/6/26 Patrick <optomatic@rogers.com>:
> Hi Everyone
>
> I hope this post is not off topic, it is my first to this list.
>
> I really don't want to use a framework unless I absolutely have to. It's not
> in my nature, if I have a plumbing problem I don't call a plumber I go and
> get a book on plumbing.
>
> The mod_python documentation is helpful but I was hoping for a book
> dedicated to python web programming via mod_python without frameworks. Is
> there such a thing? Could someone please point me to some more documentation
> or tutorials? There seems to be a fair amount of cgi stuff out there but not
> too much that is mod-python oriented.

You do realise that mod_python is itself a framework in some respects,
it just happens to be bundled with the hosting solution. A big
downside of that is that your code isn't actually portable, so I
wouldn't be so quick to dismiss frameworks. There are also various
frameworks/toolkits which are more nuts and bolts level than the
really high level frameworks. Suggest you might look at:

  http://werkzeug.pocoo.org/
  http://pylonshq.com/

Other than that, if you use Google to search for 'mod_python tutorial'
you will find:

  http://webpython.codepoint.net/mod_python

Graham
From haeusler at fotofinder.de  Thu Jun 26 02:58:26 2008
From: haeusler at fotofinder.de (=?ISO-8859-1?Q?Kurt_H=E4usler?=)
Date: Thu Jun 26 02:58:39 2008
Subject: [mod_python] mod_python programming books/tutorials? OT?
In-Reply-To: <88e286470806251815m68dcc61bn2a58ccf5d2490e1f@mail.gmail.com>
References: <486276FB.9020708@rogers.com>
	<88e286470806251815m68dcc61bn2a58ccf5d2490e1f@mail.gmail.com>
Message-ID: <48633E12.8070005@fotofinder.de>

Graham Dumpleton wrote:
> You do realise that mod_python is itself a framework in some respects,
> it just happens to be bundled with the hosting solution. A big
> downside of that is that your code isn't actually portable, so I
> wouldn't be so quick to dismiss frameworks. 
In what way is mod_python less portable than a "framework"? Not trying 
to be smart or make any claims here as I am only just starting out in 
this area myself.

I chose mod_python as it seemed like the dependencies were a lot less 
than that required by frameworks. (Other reasons include it seemed like 
a better way to learn the nuts and bolts of whats going on, I wanted a 
stronger separation / more mix-and-matchability between the "front end" 
request handling part, the business logic and database ends (ideally 
only the front end should be framework dependent but frameworks seem to 
take over the whole project, insisting on particular business logic 
patterns and ORMs), and I did play around with django a bit and it 
seemed it did a lot more stuff than I wanted,)

I haven't yet found a tutorial to be necessary though so if the OP's 
project does perhaps he would be better served by a framework.

Of course I am always ready to switch to a (light weight) framework 
should I need to, our (agile based) philosophy here is "only as much as 
needed" so mod_python it is until I reach its limits.
____________
Virus checked by G DATA AntiVirus
Version: AVKA 18.308 from 25.06.2008
Virus news: www.antiviruslab.com


From list at joreybump.com  Thu Jun 26 09:18:01 2008
From: list at joreybump.com (Jorey Bump)
Date: Thu Jun 26 09:21:23 2008
Subject: [mod_python] mod_python programming books/tutorials? OT?
In-Reply-To: <48633E12.8070005@fotofinder.de>
References: <486276FB.9020708@rogers.com>	<88e286470806251815m68dcc61bn2a58ccf5d2490e1f@mail.gmail.com>
	<48633E12.8070005@fotofinder.de>
Message-ID: <48639709.3020103@joreybump.com>

Kurt H?usler wrote, at 06/26/2008 02:58 AM:
> Graham Dumpleton wrote:
>> You do realise that mod_python is itself a framework in some respects,
>> it just happens to be bundled with the hosting solution. A big
>> downside of that is that your code isn't actually portable, so I
>> wouldn't be so quick to dismiss frameworks. 
> In what way is mod_python less portable than a "framework"? Not trying 
> to be smart or make any claims here as I am only just starting out in 
> this area myself.

Applications targeting mod_python rely on Apache httpd and mod_python 
(or even a specific version of mod_python). If you write your 
application to the WSGI specification, as many frameworks have now done, 
   it should be portable to other platforms with WSGI support 
(naturally, the application's own dependencies play a part).

I have a big investment in mod_python, and haven't made the switch to 
WSGI, yet, but will consider it for future projects. Fortunately, due to 
the nature of Python, I don't expect it to be difficult to convert my 
existing applications to WSGI (in some cases, I'll probably end up with 
fewer lines of code). I think mod_python is still a fine platform for 
development, especially if you're committed to using Apache httpd. But, 
if I were just starting out, I'd seriously evaluate the WSGI approach.

> I chose mod_python as it seemed like the dependencies were a lot less 
> than that required by frameworks. (Other reasons include it seemed like 
> a better way to learn the nuts and bolts of whats going on, I wanted a 
> stronger separation / more mix-and-matchability between the "front end" 
> request handling part, the business logic and database ends (ideally 
> only the front end should be framework dependent but frameworks seem to 
> take over the whole project, insisting on particular business logic 
> patterns and ORMs), and I did play around with django a bit and it 
> seemed it did a lot more stuff than I wanted,)

I feel the same way, and have happily avoided frameworks. However, you 
could argue that WSGI provides an even stronger separation than 
mod_python, since it's intended to be server-agnostic.

> Of course I am always ready to switch to a (light weight) framework 
> should I need to, our (agile based) philosophy here is "only as much as 
> needed" so mod_python it is until I reach its limits.

I share that philosophy. Benchmarks and the demonstration of portability 
  (to management) are likely to provide the greatest incentive to move 
to WSGI, but I'm not feeling a lot of pressure at the moment, since 
mod_python has proven to be secure and robust (with many thanks to 
Graham for his improvements; I also expect mod_wsgi to be of high 
quality). I understand that it doesn't solve all problems, but I really 
need to set aside some time to do a proper evaluation of WSGI.


From bluszcz at jabberpl.org  Thu Jun 26 16:42:50 2008
From: bluszcz at jabberpl.org (Rafal bluszcz Zawadzki)
Date: Thu Jun 26 16:42:54 2008
Subject: [mod_python] mod_python programming books/tutorials? OT?
In-Reply-To: <88e286470806251815m68dcc61bn2a58ccf5d2490e1f@mail.gmail.com>
References: <486276FB.9020708@rogers.com>
	<88e286470806251815m68dcc61bn2a58ccf5d2490e1f@mail.gmail.com>
Message-ID: <20080626204250.GA19202@mail.idoru.pl>

On Thu, Jun 26, 2008 at 11:15:31AM +1000, Graham Dumpleton wrote:
> Other than that, if you use Google to search for 'mod_python tutorial'
> you will find:
> 

Graham, I think that  you should write a book :)

-- 
  ___  __   _  _  ___  ___  __  ___  /)       http://web-dev.pl     (\
 (  ,)(  ) ( )( )/ __)(_  )/ _)(_  )(/     http://my.jabberpl.org    \)
  ) ,\ )(__ )()( \__ \ / /( (_  / / (\    http://python.blogowo.net   /)
 (___/(____)\__/ (___/(___)\__)(___) \)   Red Hat Certified Engineer  (/
From graham.dumpleton at gmail.com  Thu Jun 26 23:25:49 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Thu Jun 26 23:25:59 2008
Subject: [mod_python] mod_python programming books/tutorials? OT?
In-Reply-To: <20080626204250.GA19202@mail.idoru.pl>
References: <486276FB.9020708@rogers.com>
	<88e286470806251815m68dcc61bn2a58ccf5d2490e1f@mail.gmail.com>
	<20080626204250.GA19202@mail.idoru.pl>
Message-ID: <88e286470806262025i31d4ffa8j8199fc381b5d9ccc@mail.gmail.com>

2008/6/27 Rafal bluszcz Zawadzki <bluszcz@jabberpl.org>:
> On Thu, Jun 26, 2008 at 11:15:31AM +1000, Graham Dumpleton wrote:
>> Other than that, if you use Google to search for 'mod_python tutorial'
>> you will find:
>>
>
> Graham, I think that  you should write a book :)

I will not be writing a book about mod_python, not now not ever!

I had actually been speculating about dropping off mod_python user
list as I don't really have the time anymore to always be answering
questions about it. Realise that I haven't used mod_python for
anything for a couple of years.

I would stay on developers list for now, which is totally silent, but
only in case someone enthusiastic came along who want to take over and
thus to whom ongoing development of mod_python could be handed.

Graham
From dalloliogm at gmail.com  Fri Jun 27 10:09:06 2008
From: dalloliogm at gmail.com (Giovanni Marco Dall'Olio)
Date: Fri Jun 27 10:09:08 2008
Subject: [mod_python] wrong link to mailing list's archive page
Message-ID: <5aa3b3570806270709q7d68e4a2k4dee0f528e86048c@mail.gmail.com>

Hi,
in this page:
- http://mailman.modpython.org/mailman/listinfo/mod_python
the first link, "Mod_python Archives", is wrong.

The right url should be 'http://modpython.org/pipermail/mod_python/',
instead of 'http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/'
:).

Also, the subscription process from that web page seems to not work. I
had to subscribe to this list by manually sending a mail to
mod_python-subscribe@mod_python.org.

It seems you have moved the main page for the lists here:
http://wiki.apache.org/mod_python/Mailing_lists , but please update
the old page.


-- 
-----------------------------------------------------------

My Blog on Bioinformatics (italian): http://bioinfoblog.it
From dalloliogm at gmail.com  Fri Jun 27 10:59:40 2008
From: dalloliogm at gmail.com (Giovanni Marco Dall'Olio)
Date: Fri Jun 27 10:59:42 2008
Subject: [mod_python] merges results from previous requests of the same page
Message-ID: <5aa3b3570806270759n22b12b4ame083814ec93d3c7e@mail.gmail.com>

I'm getting some artifacts when I execute multiple time a script with
different parameters, under mod_python.

Basically I have a small applications which, depending of the value of
a GET variable, reads some files stored in the server and returns to
client a small web page, a representation of the values in those
files.

But the problem is that, when I request a page for the second time,
apache returns a page which mixes the results from the previous
requests of the same, even if it had different parameters.

Let's make an example.

http://localhost/samplescript.py?values=1
output: _|______

-- restart apache --

http://localhost/samplescript.py?values=2
output: ______|_

-- restart apache --

http://localhost/samplescript.py?values=1
output: _|______
http://localhost/samplescript.py?values=2
output: _|____|_


How is that? I though mod_python initializes a different
sub-interpreter every time a page is requested.
My configuration of mod_python is very basilar: I have not configured
any caching directive, and I am using a customized publisher handler.
I am on a Ubuntu (same problem on debian), mod_python 3.3.1-2build1 on
apache 2.2.8-1ubuntu0.2.
From clodoaldo.pinto.neto at gmail.com  Fri Jun 27 12:03:39 2008
From: clodoaldo.pinto.neto at gmail.com (Clodoaldo)
Date: Fri Jun 27 12:03:45 2008
Subject: [mod_python] merges results from previous requests of the same
	page
In-Reply-To: <5aa3b3570806270759n22b12b4ame083814ec93d3c7e@mail.gmail.com>
References: <5aa3b3570806270759n22b12b4ame083814ec93d3c7e@mail.gmail.com>
Message-ID: <a595de7a0806270903hd128634y75059497aee75008@mail.gmail.com>

2008/6/27 Giovanni Marco Dall'Olio <dalloliogm@gmail.com>:
> I'm getting some artifacts when I execute multiple time a script with
> different parameters, under mod_python.
>
> Basically I have a small applications which, depending of the value of
> a GET variable, reads some files stored in the server and returns to
> client a small web page, a representation of the values in those
> files.
>
> But the problem is that, when I request a page for the second time,
> apache returns a page which mixes the results from the previous
> requests of the same, even if it had different parameters.

If you are using variables in the page module scope try to create them
in the scope of the page function.

Regards, Clodoaldo

> Let's make an example.
>
> http://localhost/samplescript.py?values=1
> output: _|______
>
> -- restart apache --
>
> http://localhost/samplescript.py?values=2
> output: ______|_
>
> -- restart apache --
>
> http://localhost/samplescript.py?values=1
> output: _|______
> http://localhost/samplescript.py?values=2
> output: _|____|_
>
>
> How is that? I though mod_python initializes a different
> sub-interpreter every time a page is requested.
> My configuration of mod_python is very basilar: I have not configured
> any caching directive, and I am using a customized publisher handler.
> I am on a Ubuntu (same problem on debian), mod_python 3.3.1-2build1 on
> apache 2.2.8-1ubuntu0.2.
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>
From graham.dumpleton at gmail.com  Fri Jun 27 20:54:37 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Fri Jun 27 20:54:40 2008
Subject: [mod_python] wrong link to mailing list's archive page
In-Reply-To: <5aa3b3570806270709q7d68e4a2k4dee0f528e86048c@mail.gmail.com>
References: <5aa3b3570806270709q7d68e4a2k4dee0f528e86048c@mail.gmail.com>
Message-ID: <88e286470806271754p275fd4ablbc75da3e58134133@mail.gmail.com>

See:

  http://issues.apache.org/jira/browse/MODPYTHON-44

Known issue and unable to get it fixed as don't control web site
mailing list archiving is done on.

Graham

2008/6/28 Giovanni Marco Dall'Olio <dalloliogm@gmail.com>:
> Hi,
> in this page:
> - http://mailman.modpython.org/mailman/listinfo/mod_python
> the first link, "Mod_python Archives", is wrong.
>
> The right url should be 'http://modpython.org/pipermail/mod_python/',
> instead of 'http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/'
> :).
>
> Also, the subscription process from that web page seems to not work. I
> had to subscribe to this list by manually sending a mail to
> mod_python-subscribe@mod_python.org.
>
> It seems you have moved the main page for the lists here:
> http://wiki.apache.org/mod_python/Mailing_lists , but please update
> the old page.
>
>
> --
> -----------------------------------------------------------
>
> My Blog on Bioinformatics (italian): http://bioinfoblog.it
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>
From graham.dumpleton at gmail.com  Fri Jun 27 20:56:46 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Fri Jun 27 20:56:47 2008
Subject: [mod_python] merges results from previous requests of the same
	page
In-Reply-To: <5aa3b3570806270759n22b12b4ame083814ec93d3c7e@mail.gmail.com>
References: <5aa3b3570806270759n22b12b4ame083814ec93d3c7e@mail.gmail.com>
Message-ID: <88e286470806271756l6acad6fsed0e24b32caf8bfb@mail.gmail.com>

Have you by adding logging to your handlers, absolutely verified that
handler is actually being called on every request. If you are working
through a proxy, it may be doing some caching you don't know about.

2008/6/28 Giovanni Marco Dall'Olio <dalloliogm@gmail.com>:
> I'm getting some artifacts when I execute multiple time a script with
> different parameters, under mod_python.
>
> Basically I have a small applications which, depending of the value of
> a GET variable, reads some files stored in the server and returns to
> client a small web page, a representation of the values in those
> files.
>
> But the problem is that, when I request a page for the second time,
> apache returns a page which mixes the results from the previous
> requests of the same, even if it had different parameters.
>
> Let's make an example.
>
> http://localhost/samplescript.py?values=1
> output: _|______
>
> -- restart apache --
>
> http://localhost/samplescript.py?values=2
> output: ______|_
>
> -- restart apache --
>
> http://localhost/samplescript.py?values=1
> output: _|______
> http://localhost/samplescript.py?values=2
> output: _|____|_
>
>
> How is that? I though mod_python initializes a different
> sub-interpreter every time a page is requested.
> My configuration of mod_python is very basilar: I have not configured
> any caching directive, and I am using a customized publisher handler.
> I am on a Ubuntu (same problem on debian), mod_python 3.3.1-2build1 on
> apache 2.2.8-1ubuntu0.2.
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>
From graham.dumpleton at gmail.com  Fri Jun 27 21:06:07 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Fri Jun 27 21:06:18 2008
Subject: [mod_python] mod_python programming books/tutorials? OT?
In-Reply-To: <486503D4.5639.522453F@jrl.versaform.com>
References: <486503D4.5639.522453F@jrl.versaform.com>
Message-ID: <88e286470806271806t5033b52cv2aa15922a3bbc8b0@mail.gmail.com>

Please keep discussion on mod_python mailing list.

2008/6/28 Joe Landau <jrl@versaform.com>:
> Graham,
>
> I'm a new mod_python user, and wondering from your last post if I have not made the wrong
> choice for my (infrequent) use.  I was wanting to use the method/product that was closest to
> a standard, and used by the largest community (thinking I would find the best support there).
>
> I have found mod_python to work well, and your documentation was very helpful, though I did
> need outside help to get started.
>
> Should I be looking at a mod_somethingelse, or perhaps use cgi on the theory that it is still
> the most popular thing (I keep thinking that somewhere there is a book called CGI in Python
> for dummies)?  Or should I be learning one of the frameworks such as Django?

The only thing that is standardised in Python in any real way with
respect to web framework stuff is as mentioned already, the WSGI
interface standard. Using any toolkit or framework which supports WSGI
means that your web application will be portable to different hosting
mechanisms, including:

  CGI

  mod_wsgi (Apache)
  mod_python/??? (Apache)
  fastcgi/flup (Apache)
  scgi/flup (Apache)

  fastcgi/flup (lighttpd)

  mod_wsgi (nginx)
  fastcgi/flup (nginx)

There are also various WSGI capable web servers written in Python as
well, including:

  Paste server
  CherryPy WSGI server

So, if you want something portable, use something based on WSGI.

As already mentioned, for high level frameworks see:

  Django
  TurboGears
  Pylons
  CherryPy

For low level nuts and bolts components for building WSGI see:

  Werkzeug
  Paste

The high level frameworks dictate more how you do things, the low
level toolkits do not and leave a lot more up to you, like with
mod_python.

Graham
From dalloliogm at gmail.com  Sat Jun 28 08:30:14 2008
From: dalloliogm at gmail.com (Giovanni Marco Dall'Olio)
Date: Sat Jun 28 08:30:26 2008
Subject: [mod_python] merges results from previous requests of the same
	page
In-Reply-To: <88e286470806271756l6acad6fsed0e24b32caf8bfb@mail.gmail.com>
References: <5aa3b3570806270759n22b12b4ame083814ec93d3c7e@mail.gmail.com>
	<88e286470806271756l6acad6fsed0e24b32caf8bfb@mail.gmail.com>
Message-ID: <5aa3b3570806280530m2c831974p37ab0b87b86873e3@mail.gmail.com>

Hi,
thank you all for the replies.

On Sat, Jun 28, 2008 at 2:56 AM, Graham Dumpleton
<graham.dumpleton@gmail.com> wrote:
> Have you by adding logging to your handlers, absolutely verified that
> handler is actually being called on every request. If you are working
> through a proxy, it may be doing some caching you don't know about.

How can I do that? I tried to use the pdb tool, but failed to use it
because - ehr - I don't know how to start apache in console mode in
ubuntu. I will look at that.
I'm not working through a proxy.


> 2008/6/28 Giovanni Marco Dall'Olio <dalloliogm@gmail.com>:
>> I'm getting some artifacts when I execute multiple time a script with
>> different parameters, under mod_python.
>>
>> Basically I have a small applications which, depending of the value of
>> a GET variable, reads some files stored in the server and returns to
>> client a small web page, a representation of the values in those
>> files.
>>--
-----------------------------------------------------------

My Blog on Bioinformatics (italian): http://bioinfoblog.it
From graham.dumpleton at gmail.com  Sat Jun 28 23:21:36 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Sat Jun 28 23:21:44 2008
Subject: [mod_python] merges results from previous requests of the same
	page
In-Reply-To: <5aa3b3570806280530m2c831974p37ab0b87b86873e3@mail.gmail.com>
References: <5aa3b3570806270759n22b12b4ame083814ec93d3c7e@mail.gmail.com>
	<88e286470806271756l6acad6fsed0e24b32caf8bfb@mail.gmail.com>
	<5aa3b3570806280530m2c831974p37ab0b87b86873e3@mail.gmail.com>
Message-ID: <88e286470806282021i367fc5ceyee55da86837b8a7e@mail.gmail.com>

See log_error() function in:

  http://www.modpython.org/live/current/doc-html/pyapi-apmeth.html

Thus:

  from mod_python import apache
  apache.log_error("message")

Also look at request object methods, as it also has a log_error() method:

  http://www.modpython.org/live/current/doc-html/pyapi-mprequest-meth.html

In other words, read the documentation.

Graham

2008/6/28 Giovanni Marco Dall'Olio <dalloliogm@gmail.com>:
> Hi,
> thank you all for the replies.
>
> On Sat, Jun 28, 2008 at 2:56 AM, Graham Dumpleton
> <graham.dumpleton@gmail.com> wrote:
>> Have you by adding logging to your handlers, absolutely verified that
>> handler is actually being called on every request. If you are working
>> through a proxy, it may be doing some caching you don't know about.
>
> How can I do that? I tried to use the pdb tool, but failed to use it
> because - ehr - I don't know how to start apache in console mode in
> ubuntu. I will look at that.
> I'm not working through a proxy.
>
>
>> 2008/6/28 Giovanni Marco Dall'Olio <dalloliogm@gmail.com>:
>>> I'm getting some artifacts when I execute multiple time a script with
>>> different parameters, under mod_python.
>>>
>>> Basically I have a small applications which, depending of the value of
>>> a GET variable, reads some files stored in the server and returns to
>>> client a small web page, a representation of the values in those
>>> files.
>>>--
> -----------------------------------------------------------
>
> My Blog on Bioinformatics (italian): http://bioinfoblog.it
>
From jrl at versaform.com  Mon Jun 30 12:40:51 2008
From: jrl at versaform.com (Joe Landau)
Date: Mon Jun 30 12:40:59 2008
Subject: [mod_python] mod_python programming books/tutorials? OT?
In-Reply-To: <88e286470806271806t5033b52cv2aa15922a3bbc8b0@mail.gmail.com>
References: <486503D4.5639.522453F@jrl.versaform.com>,
	<88e286470806271806t5033b52cv2aa15922a3bbc8b0@mail.gmail.com>
Message-ID: <4868AA23.26743.1363BD97@jrl.versaform.com>

Graham,

Many thanks for taking the time to answer my beginner's query so fully.

Joe

Joe Landau                            jrl@versaform.com 
VersaForm Systems Corp.               (408) 370 2662
591 W. Hamilton Ave., # 230           Campbell, CA 95008
Excellence in Medical Software        http://www.versaform.com

