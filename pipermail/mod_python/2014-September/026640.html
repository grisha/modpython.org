<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] memory consumption increase on httpd reload
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=Re%3A%20%5Bmod_python%5D%20memory%20consumption%20increase%20on%20httpd%20reload&In-Reply-To=%3CCA%2BpuXg_i_aRM0nRjFsP89sXWDib%2B%3DGWWLWsryEKADtDXH1pUpw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026639.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] memory consumption increase on httpd reload</H1>
    <B>aman aggarwal</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=Re%3A%20%5Bmod_python%5D%20memory%20consumption%20increase%20on%20httpd%20reload&In-Reply-To=%3CCA%2BpuXg_i_aRM0nRjFsP89sXWDib%2B%3DGWWLWsryEKADtDXH1pUpw%40mail.gmail.com%3E"
       TITLE="[mod_python] memory consumption increase on httpd reload">amanagg at gmail.com
       </A><BR>
    <I>Thu Sep 11 08:53:10 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="026639.html">[mod_python] memory consumption increase on httpd reload
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26640">[ date ]</a>
              <a href="thread.html#26640">[ thread ]</a>
              <a href="subject.html#26640">[ subject ]</a>
              <a href="author.html#26640">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Nathan/Grisha,

By &quot;reload&quot;, we mean the following command is executed &quot; /etc/init.d/httpd
reload&quot;. We observed that this command is executed every time Linux
&quot;logrotate&quot; utility is invoked. As per our project, we have entries in
crontab wherein the logs are rotated every 2 minutes. Hence, we have
confirmed by 'top' output that memory consumption of httpd process
increases every time this reload command is executed.

Also, when we manually invoke this command, the memory consumption
increases.

Now, regarding usage of mod_python, my complete application is in
mod_python and cannot be removed. For mod_python, we have include
&quot;python.conf&quot; in httpd.conf file.

In python.conf file, we have included mod_python module.

I am attaching both the files for reference.

Thanks and regards,
Aman Aggarwal

On Thu, Sep 11, 2014 at 5:33 AM, Nathan Adams &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">adamsna at datanethost.net</A>&gt;
wrote:

&gt;<i>  Aman,
</I>&gt;<i>
</I>&gt;<i> Many years ago when we were using mod_python we noticed a similar issue.
</I>&gt;<i> At the time our solution was to move to mod_wsgi. However, now that Grisha
</I>&gt;<i> is maintaining the project again you might want to compile from source
</I>&gt;<i> because the maintainers may have assumed that mod_python was permanently
</I>&gt;<i> gone. It's actually very easy on CentOS as all the prereqs can be
</I>&gt;<i> downloaded using yum.
</I>&gt;<i>
</I>&gt;<i> If you do this and mod_python is still an issue then sending over some
</I>&gt;<i> sample code to reproduce the problem might help. I have also heard of some
</I>&gt;<i> issues if you have both mod_python and mod_wsgi in the same Apache instance
</I>&gt;<i> (
</I>&gt;<i> <A HREF="https://code.google.com/p/modwsgi/wiki/InstallationIssues#Using_ModPython_and_ModWsgi">https://code.google.com/p/modwsgi/wiki/InstallationIssues#Using_ModPython_and_ModWsgi</A>
</I>&gt;<i> ). If you are curious you could check out similar products like mod_wsgi
</I>&gt;<i> (wouldn't recommend as it's configuration is non-intuitive and it's author
</I>&gt;<i> can be quite intimidating), uWSGI, or even gunicorn and see if your memory
</I>&gt;<i> increase problem exists with those products. I've personally only had to
</I>&gt;<i> interact with mod_wsgi and while the product itself isn't buggy and works
</I>&gt;<i> great the configuration can be a pain and it doesn't help that the
</I>&gt;<i> documentation is lacking.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 9/10/2014 10:17 AM, Grisha Trubetskoy wrote:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  Aman
</I>&gt;<i>
</I>&gt;<i>  It's hard to say what might be the cause of that without more detail on
</I>&gt;<i> how mod_python is configured and exactly what you mean by &quot;reload&quot;. It also
</I>&gt;<i> might be that CentOS 5.4 and 6.4 have an outdated version of mod_python and
</I>&gt;<i> this bug may be fixed already.
</I>&gt;<i>
</I>&gt;<i>  How much of a memory increase are you observing, and is that really a
</I>&gt;<i> problem? Also, are you actually using mod_python, if not, may be the fix is
</I>&gt;<i> as simple as to remove it from the configuration?
</I>&gt;<i>
</I>&gt;<i>  Regards,
</I>&gt;<i>
</I>&gt;<i>  Grisha
</I>&gt;<i>
</I>&gt;<i> On Wed, Sep 10, 2014 at 11:09 AM, aman aggarwal &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">amanagg at gmail.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Hi,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  We have observed an issue wherein httpd process memory consumption is
</I>&gt;&gt;<i> increased when ever the httpd process is &quot;reload&quot;. We have boiled the issue
</I>&gt;&gt;<i> that it is due to only with inclusion of mod_python package.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  This is observed on both Centos 5.4 and Centos 6.4 versions. Please
</I>&gt;&gt;<i> provide the inputs.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  regards,
</I>&gt;&gt;<i> Aman Aggarwal
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> mod_python mailing list
</I>&gt;&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython.org</A>
</I>&gt;&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> mod_python mailing <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">listmod_python at modpython.orghttp</A>://mailman.modpython.org/mailman/listinfo/mod_python
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://mailman.modpython.org/pipermail/mod_python/attachments/20140911/68073167/attachment-0001.html">http://mailman.modpython.org/pipermail/mod_python/attachments/20140911/68073167/attachment-0001.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026639.html">[mod_python] memory consumption increase on httpd reload
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26640">[ date ]</a>
              <a href="thread.html#26640">[ thread ]</a>
              <a href="subject.html#26640">[ subject ]</a>
              <a href="author.html#26640">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the mod_python
mailing list</a><br>
</body></html>
