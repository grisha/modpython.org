<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Broken reload algorithm?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Broken%20reload%20algorithm%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001377.html">
   <LINK REL="Next"  HREF="001378.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Broken reload algorithm?</H1>
    <B>Jeff Stearns</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Broken%20reload%20algorithm%3F&In-Reply-To="
       TITLE="[mod_python] Broken reload algorithm?">jeffstearns at attbi.com
       </A><BR>
    <I>Wed Mar 20 23:50:22 EST 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="001377.html">[mod_python] Installation problems
</A></li>
        <LI>Next message: <A HREF="001378.html">[mod_python] Broken reload algorithm?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1374">[ date ]</a>
              <a href="thread.html#1374">[ thread ]</a>
              <a href="subject.html#1374">[ subject ]</a>
              <a href="author.html#1374">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm using the publisher handler with mod_python 2.7.6.  I'm doing 
development, so auto-reload is turned on.

This causes broken behavior.  I blame it on line 365 in apache.py:

     # if module is newer - reload
     if (autoreload and (oldmtime &lt; mtime)):
         module = reload(module)

The code here assumes that the module can be found in sys.path. But 
that's not guaranteed when using publisher. The module may be found 
anywhere in the document tree.  Unfortunately, that provokes an 
exception.

I believe that the call to reload() should be replaced with 
imp.load_module(). The imp.load_module function *does* handle reloading, 
and it can be given the path to the module.  Unfortunately, the code 
needs to be reworked to test this theory.

Comments?  Am I missing the point here?

thx - jeff stearns


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001377.html">[mod_python] Installation problems
</A></li>
	<LI>Next message: <A HREF="001378.html">[mod_python] Broken reload algorithm?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1374">[ date ]</a>
              <a href="thread.html#1374">[ thread ]</a>
              <a href="subject.html#1374">[ subject ]</a>
              <a href="author.html#1374">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
