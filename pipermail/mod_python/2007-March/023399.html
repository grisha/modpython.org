<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] in modpython ,how to restrict the upload file size?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20in%20modpython%20%2Chow%20to%20restrict%20the%20upload%20file%20size%3F&In-Reply-To=op.tp2idnluju6s6z%40trilobit">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023398.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] in modpython ,how to restrict the upload file size?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20in%20modpython%20%2Chow%20to%20restrict%20the%20upload%20file%20size%3F&In-Reply-To=op.tp2idnluju6s6z%40trilobit"
       TITLE="[mod_python] in modpython ,how to restrict the upload file size?">graham.dumpleton at gmail.com
       </A><BR>
    <I>Sat Mar 31 20:18:22 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023398.html">[mod_python] in modpython ,how to restrict the upload file size?
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23399">[ date ]</a>
              <a href="thread.html#23399">[ thread ]</a>
              <a href="subject.html#23399">[ subject ]</a>
              <a href="author.html#23399">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 01/04/07, Martin &#352;enke&#345;&#237;k &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">martinsenkerik at email.cz</A>&gt; wrote:
&gt;<i> Thank you for your explanation!
</I>&gt;<i>
</I>&gt;<i> I think, now I understand more deeply the machinery around.
</I>&gt;<i>
</I>&gt;<i> I realized that in my case I need to close connection to client at my own.
</I>&gt;<i> Some clients, while sending POST request, don't react to any response from
</I>&gt;<i> the server. However, I was reading through manual and internet but I
</I>&gt;<i> didn't find way, how to do it. The connection object doesn't seem to
</I>&gt;<i> provide a way how to close connection....
</I>&gt;<i>
</I>&gt;<i> So, my question is: what is the way to force closing the TCP connection to
</I>&gt;<i> client?
</I>
In general Apache will do that for you, when appropriate. This will
not stop the client sending data straight away. The client may only
detect that the connection has closed after writing some amount of
data and it gets an error. So you can't eliminate the client sending
at least some data except by the client using the 100-continue feature
properly.

BTW, please use reply-all to keep discussion on mailing list.

Graham

&gt;<i> Dne Sat, 31 Mar 2007 07:28:41 +0200 Graham Dumpleton
</I>&gt;<i> &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>&gt; napsal/-a:
</I>&gt;<i>
</I>&gt;<i> &gt; On 31/03/07, Martin &#352;enke&#345;&#237;k &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">martinsenkerik at email.cz</A>&gt; wrote:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; This solution works fine only for Opera web browser for me. Others (I've
</I>&gt;<i> &gt;&gt; tested Firefox and IE6) continues with transfer. In http specification
</I>&gt;<i> &gt;&gt; is
</I>&gt;<i> &gt;&gt; about &quot;413: Request Entity Too Large&quot; among others written:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; &quot;The server MAY close the connection to prevent the client from
</I>&gt;<i> &gt;&gt; continuing
</I>&gt;<i> &gt;&gt; the request.&quot;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; I was trying to find way, how force client to stop the transfer and to
</I>&gt;<i> &gt;&gt; redirect them to some explanation page. But with no result. Do you have
</I>&gt;<i> &gt;&gt; any ideas? Or is it possible, that problem is somewhere else? e.g. wrong
</I>&gt;<i> &gt;&gt; configuration of Apache, mod_python...?
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; (using Apache/2.2.3, mod_python/3.3.1 Python/2.4.4 on Debian)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; See:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;  <A HREF="http://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html">http://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Especially section 8.2.3
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; It all depends on whether the browser is using HTTP/1.1 and whether it
</I>&gt;<i> &gt; is sending an Expect header with value 100-continue and subsequently
</I>&gt;<i> &gt; waiting for a 100 continue response before sending the content.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; If it isn't then the client would be sending the content anyway and
</I>&gt;<i> &gt; once it does you can't stop it.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Thus, on your server side dump out to the log what headers are being
</I>&gt;<i> &gt; sent by client and see what browsers are sending the Expect header and
</I>&gt;<i> &gt; which aren't.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I don't know how you might tell the browser to use this.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Graham
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023398.html">[mod_python] in modpython ,how to restrict the upload file size?
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23399">[ date ]</a>
              <a href="thread.html#23399">[ thread ]</a>
              <a href="subject.html#23399">[ subject ]</a>
              <a href="author.html#23399">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
