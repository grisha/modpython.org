<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] mod_python on / and authentication on /login (using
	trac)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python%20on%20/%20and%20authentication%20on%20/login%20%28using%0A%09trac%29&In-Reply-To=20070322192643.GA25302%40neu.nirvana">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023325.html">
   <LINK REL="Next"  HREF="023327.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] mod_python on / and authentication on /login (using
	trac)</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python%20on%20/%20and%20authentication%20on%20/login%20%28using%0A%09trac%29&In-Reply-To=20070322192643.GA25302%40neu.nirvana"
       TITLE="[mod_python] mod_python on / and authentication on /login (using
	trac)">graham.dumpleton at gmail.com
       </A><BR>
    <I>Thu Mar 22 17:51:31 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023325.html">[mod_python] mod_python on / and authentication on /login (using
	trac)
</A></li>
        <LI>Next message: <A HREF="023327.html">[mod_python] mod_python on / and authentication on /login (using
	trac)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23326">[ date ]</a>
              <a href="thread.html#23326">[ thread ]</a>
              <a href="subject.html#23326">[ subject ]</a>
              <a href="author.html#23326">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 23/03/07, Axel Thimm &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Axel.Thimm at atrpms.net</A>&gt; wrote:
&gt;<i> Here is the config (hostname masked away):
</I>&gt;<i>
</I>&gt;<i> &lt;VirtualHost XXX.XXX.XXX:80&gt;
</I>&gt;<i>   ServerName XXX.XXX.XXX
</I>&gt;<i>
</I>&gt;<i>   DocumentRoot /ext/test/empty
</I>&gt;<i>
</I>&gt;<i>   &lt;Location &quot;/&quot;&gt;
</I>&gt;<i>     Order allow,deny
</I>&gt;<i>     Allow from all
</I>&gt;<i>   &lt;/Location&gt;
</I>
Not sure you really need the above Location section.

&gt;<i>   &lt;Location &quot;/&quot;&gt;
</I>&gt;<i>     SetHandler mod_python
</I>&gt;<i>     PythonPath &quot;sys.path+['/opt/TWWfsw/trac010/lib/python242']&quot;
</I>&gt;<i>     PythonHandler trac.web.modpython_frontend
</I>&gt;<i>     PythonOption TracEnv /ext/test/trac
</I>&gt;<i>     PythonOption TracUriRoot /
</I>&gt;<i>   &lt;/Location&gt;
</I>&gt;<i>
</I>&gt;<i>   &lt;Location /login&gt;
</I>&gt;<i>     AuthType Basic
</I>&gt;<i>     AuthName &quot;MyCompany Trac Server&quot;
</I>&gt;<i>     AuthUserFile /ext/test/.htpasswd
</I>&gt;<i>     Require valid-user
</I>&gt;<i>   &lt;/Location&gt;
</I>&gt;<i>
</I>&gt;<i>   ErrorLog \
</I>&gt;<i>     /var/opt/TWWfsw/httpd222/log/XXX.XXX.XXX/error
</I>&gt;<i>   CustomLog \
</I>&gt;<i>     /var/opt/TWWfsw/httpd222/log/XXX.XXX.XXX/access common
</I>&gt;<i> &lt;/VirtualHost&gt;
</I>
What happens if you merge all three entries into one under '/'. I
realise this means you can't view Trac pages without first logging in,
but want to see if even that works first. If it doesn't it may point
out where the problem lies, for example, auth files not being readable
properly to Apache user etc.

Only other thing I can suggest is you try experimental mod_wsgi. See:

  <A HREF="http://trac.edgewall.org/wiki/TracModWSGI">http://trac.edgewall.org/wiki/TracModWSGI</A>
  <A HREF="http://code.google.com/p/modwsgi/wiki/IntegrationWithTrac">http://code.google.com/p/modwsgi/wiki/IntegrationWithTrac</A>

The configuration using that for what you want to do would be:

  WSGIScriptAlias / /ext/test/trac/apache/trac.wsgi

  &lt;Directory /ext/test/trac/apache&gt;
  Order deny,allow
  Allow from all
  &lt;/Directory&gt;

   &lt;Location /login&gt;
   AuthType Basic
   AuthName &quot;MyCompany Trac Server&quot;
   AuthUserFile /ext/test/.htpasswd
   Require valid-user
   &lt;/Location&gt;

Create the directory:

  /ext/test/trac/apache

and in it add trac.wsgi containing:

  import os
  os.environ['TRAC_ENV'] = '/ext/test/trac'
  os.environ['PYTHON_EGG_CACHE'] = '/ext/test/trac/mysite/eggs'

  import sys
  path = '/opt/TWWfsw/trac010/lib/python242'
  if not path in sys.path:
    sys.path.append(path)

  import trac.web.main

  application = trac.web.main.dispatch_request

How it does things is a bit different to how you have do things with
mod_python, but the difference might be enough to get around whatever
strangeness is going on with your Apache configuration. Read the
instructions for mod_wsgi to get a better understanding of how to set
it up.

Graham
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023325.html">[mod_python] mod_python on / and authentication on /login (using
	trac)
</A></li>
	<LI>Next message: <A HREF="023327.html">[mod_python] mod_python on / and authentication on /login (using
	trac)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23326">[ date ]</a>
              <a href="thread.html#23326">[ thread ]</a>
              <a href="subject.html#23326">[ subject ]</a>
              <a href="author.html#23326">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
