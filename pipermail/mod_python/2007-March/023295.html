<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Compiling mod_python
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Compiling%20mod_python&In-Reply-To=20070320084439.GB8104%40santiago.connexer.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023294.html">
   <LINK REL="Next"  HREF="023301.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Compiling mod_python</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Compiling%20mod_python&In-Reply-To=20070320084439.GB8104%40santiago.connexer.com"
       TITLE="[mod_python] Compiling mod_python">graham.dumpleton at gmail.com
       </A><BR>
    <I>Tue Mar 20 05:27:45 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023294.html">[mod_python] Compiling mod_python
</A></li>
        <LI>Next message: <A HREF="023301.html">[mod_python] Compiling mod_python
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23295">[ date ]</a>
              <a href="thread.html#23295">[ thread ]</a>
              <a href="subject.html#23295">[ subject ]</a>
              <a href="author.html#23295">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 20/03/07, Roberto C. S&#225;nchez &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">roberto at connexer.com</A>&gt; wrote:
&gt;<i> On Tue, Mar 20, 2007 at 09:35:14AM +0100, Gabriele Farina wrote:
</I>&gt;<i> &gt; Hi,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; today I'm trying to compile mod_python on a Debian Linux box.
</I>&gt;<i> &gt; I installed correctly apache 2.2.4 and Python 2.5 from sources and
</I>&gt;<i> &gt; then tried to compile mod_python. I get this error:
</I>&gt;<i> &gt;
</I>&gt;<i> Umm, why on Earth would you install Apache *and* Python from sources on
</I>&gt;<i> Debian?  Just use aptitude.  Besides, mod_python is also packaged for
</I>&gt;<i> Debian.
</I>
One reason for recompiling Python is because the prepackaged binary
distributions of Python are generally never built with the
--enabled-shared option. This means you only have a static libpython.a
file and on 64 bit platforms when recompiling mod_python like above
this presents problems sometimes as Python packages are only built as
32 bit binaries. Also, that there is only a static libpython.a and not
a libpython.so means that the static Python library has to be embedded
within the mod_python.so file to work. This means that instead of your
mod_python.so being in the order of a few hundred KBytes it is over
1MB in size. Because the Python library part of this is not
relocatable object files, when it gets loaded into memory it
potentially has to have address relocations done on it resulting in
the mod_python.so no longer being shared between processes and instead
each of your Apache child processes ends up with up to 1.5MB of extra
private memory in use. In the end your Python web application is going
to probably take a lot more memory than that but it doesn't make the
situation any better.

Thus, to the OP, rebuild your Python installation from source first
and ensure that --enable-shared is used when configure is run. After
you have that reinstalled, then try rebuilding mod_python and see if
the error goes away. To save trashing the existing Python installation
you might install new version of Python elsewhere. Be warned that you
may have to ensure location of  'python' executable for new version is
in PATH before standard one for user that Apache runs as. See how it
goes without doing that first though. Not sure if rebuilding Apache is
actually necessary.

Graham

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023294.html">[mod_python] Compiling mod_python
</A></li>
	<LI>Next message: <A HREF="023301.html">[mod_python] Compiling mod_python
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23295">[ date ]</a>
              <a href="thread.html#23295">[ thread ]</a>
              <a href="subject.html#23295">[ subject ]</a>
              <a href="author.html#23295">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
