<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Session Freezing using mod_python.Session
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Session%20Freezing%20using%20mod_python.Session&In-Reply-To=45F872CE.5050403%40loafman.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023284.html">
   <LINK REL="Next"  HREF="023286.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Session Freezing using mod_python.Session</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Session%20Freezing%20using%20mod_python.Session&In-Reply-To=45F872CE.5050403%40loafman.com"
       TITLE="[mod_python] Session Freezing using mod_python.Session">graham.dumpleton at gmail.com
       </A><BR>
    <I>Wed Mar 14 17:24:43 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023284.html">[mod_python] Session Freezing using mod_python.Session
</A></li>
        <LI>Next message: <A HREF="023286.html">[mod_python] Session Freezing using mod_python.Session
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23285">[ date ]</a>
              <a href="thread.html#23285">[ thread ]</a>
              <a href="subject.html#23285">[ subject ]</a>
              <a href="author.html#23285">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 15/03/07, Kenneth Loafman &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">kenneth at loafman.com</A>&gt; wrote:
&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> The small snippet of code below freezes if there is an existing pysid
</I>&gt;<i> cookie (sample straight out of the manual).  If there is no pysid
</I>&gt;<i> cookie, then index() displays, but show() hangs.
</I>
Yet you don't show us the code in show() which is the important bit.

Does show() call any other functions in which you are trying to create
a Session object a  subsequent time. If you are it will hang as you
can create only one Session object instance per request. In other
words, if show() was for example written as:

  def show(req):
      session = Session.Session(req)
      return index(req)

you would have this problem with it hanging as show already has a lock
on the session

Normal practice is to always use:

     if not hasattr(req,'session'):
       req.session = Session.Session(req)

     if req.session.is_new():
       ...

Thus, always check to see if req.session has been already set by
something else and only create a new Session object if it hasn't,
assigning it to req.session and always using it from there as well.

If this doesn't help, post the code for show() and what it may call.

Graham

&gt;<i> Platform is Ubuntu Edgy 64-bit, Apache, mod_python, python 2.4.
</I>&gt;<i>
</I>&gt;<i> Any suggestions would be appreciated.
</I>&gt;<i>
</I>&gt;<i> ...Thanks,
</I>&gt;<i> ...Ken
</I>&gt;<i>
</I>&gt;<i> def index(req):
</I>&gt;<i>     session = Session.Session(req)
</I>&gt;<i>     if session.is_new():
</I>&gt;<i>        session['hits'] = 1
</I>&gt;<i>     else:
</I>&gt;<i>        session['hits'] += 1
</I>&gt;<i>     session.save()
</I>&gt;<i>     return &quot;&quot;&quot;\
</I>&gt;<i> %s
</I>&gt;<i> &lt;fieldset&gt;
</I>&gt;<i> &lt;legend&gt;
</I>&gt;<i> Please select the database:
</I>&gt;<i> &lt;/legend&gt;
</I>&gt;<i> &lt;form method=&quot;post&quot; action=&quot;/demo/index/show&quot;&gt;
</I>&gt;<i> &lt;...snip...&gt;
</I>&gt;<i> %s
</I>&gt;<i> &quot;&quot;&quot; % (_head, _tail)
</I>&gt;<i>
</I>&gt;<i> def show(req):
</I>&gt;<i>     session = Session.Session(req)
</I>&gt;<i>     &lt;...snip...&gt;
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023284.html">[mod_python] Session Freezing using mod_python.Session
</A></li>
	<LI>Next message: <A HREF="023286.html">[mod_python] Session Freezing using mod_python.Session
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23285">[ date ]</a>
              <a href="thread.html#23285">[ thread ]</a>
              <a href="subject.html#23285">[ subject ]</a>
              <a href="author.html#23285">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
