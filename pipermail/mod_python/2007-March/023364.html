<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] session variable value (partially) dissapearing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20session%20variable%20value%20%28partially%29%20dissapearing&In-Reply-To=20070327231031.GA10254%40ling.ohio-state.edu">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023363.html">
   <LINK REL="Next"  HREF="023365.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] session variable value (partially) dissapearing</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20session%20variable%20value%20%28partially%29%20dissapearing&In-Reply-To=20070327231031.GA10254%40ling.ohio-state.edu"
       TITLE="[mod_python] session variable value (partially) dissapearing">graham.dumpleton at gmail.com
       </A><BR>
    <I>Tue Mar 27 18:23:03 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023363.html">[mod_python] session variable value (partially) dissapearing
</A></li>
        <LI>Next message: <A HREF="023365.html">[mod_python] session variable value (partially) dissapearing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23364">[ date ]</a>
              <a href="thread.html#23364">[ thread ]</a>
              <a href="subject.html#23364">[ subject ]</a>
              <a href="author.html#23364">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Only suggestion is to doubly make sure that you are doing the required
req.session.save() before the request actually returns. If you are
using:

  raise apache.SERVER_RETURN, apache.OK

or similar mechanisms whereby you are using exceptions to jump back up
calling stack in non error conditions, ensure you have try/finally
block where save is being done in finally block.

You might log a message at every point you do a save to ensure it is
always happening as you expect.

You might also try FileSession instead of DBMSession. See
documentation for PythonOption to override which storage mechanism is
used. This will indicate whether it is just somehow DBM database or
all storage mechanisms.

BTW, you aren't every performing an unlock() of session at any point are you?

Graham

On 28/03/07, Detmar Meurers &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">dm at ling.ohio-state.edu</A>&gt; wrote:
&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> I'm experiencing some strange behavior with mod_python sessions
</I>&gt;<i> (using the mod_python Session module, which in my setup seems to use
</I>&gt;<i> dbm). I'm using Apache/2.2.0 (Unix) mod_ssl/2.2.0 OpenSSL/0.9.8b DAV/2
</I>&gt;<i> mod_python/3.3.1 Python/2.4.2 on an Intel Mac (mpm-prefork).
</I>&gt;<i>
</I>&gt;<i> I can store information in the session variable, which I've stored
</I>&gt;<i> under req.session, just fine, e.g.
</I>&gt;<i>
</I>&gt;<i> req.session['rememberme'] = 'foobar'
</I>&gt;<i>
</I>&gt;<i> but for some reason in situations I haven't been able to pin down
</I>&gt;<i> yet, when I store more complex information, e.g. a dictionary such as
</I>&gt;<i>
</I>&gt;<i> req.session['rememberme'] = {'name' : 'john',
</I>&gt;<i>                              'address': {'road': 'high st',
</I>&gt;<i>                                          'nr': 22}}
</I>&gt;<i>
</I>&gt;<i> then often times part of that dictionary value has disappeared when
</I>&gt;<i> I look it up again in a later page, e.g. I get a dictionary
</I>&gt;<i> containing only the key 'name' instead of both keys. I unfortunately
</I>&gt;<i> haven't been able to pin it down further yet (apart from observing
</I>&gt;<i> that it seems to appear primarily (?) in situations involving AJAX
</I>&gt;<i> POST calls).
</I>&gt;<i>
</I>&gt;<i> Has someone has seen something like this before? Any hints on what
</I>&gt;<i> can cause the disappearance of part of a session variable value? Or
</I>&gt;<i> perhaps it for some reason doesnn't read in the session variable
</I>&gt;<i> properly in some of the mod_python processes running? Any hints
</I>&gt;<i> would be much appreciated!
</I>&gt;<i>
</I>&gt;<i> Best,
</I>&gt;<i> Detmar
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Detmar Meurers, Associate Professor, Dept. of Linguistics, OSU
</I>&gt;<i> 201a Oxley Hall, 1712 Neil Avenue, Columbus OH 43210-1298, USA
</I>&gt;<i> <A HREF="http://ling.osu.edu/~dm/">http://ling.osu.edu/~dm/</A>                 GnuPG key on web page
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I></PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023363.html">[mod_python] session variable value (partially) dissapearing
</A></li>
	<LI>Next message: <A HREF="023365.html">[mod_python] session variable value (partially) dissapearing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23364">[ date ]</a>
              <a href="thread.html#23364">[ thread ]</a>
              <a href="subject.html#23364">[ subject ]</a>
              <a href="author.html#23364">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
