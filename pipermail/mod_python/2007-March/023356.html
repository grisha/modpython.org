<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] connection to host server broken
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20connection%20to%20host%20server%20broken&In-Reply-To=40463.14148.qm%40web38707.mail.mud.yahoo.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023350.html">
   <LINK REL="Next"  HREF="023359.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] connection to host server broken</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20connection%20to%20host%20server%20broken&In-Reply-To=40463.14148.qm%40web38707.mail.mud.yahoo.com"
       TITLE="[mod_python] connection to host server broken">graham.dumpleton at gmail.com
       </A><BR>
    <I>Mon Mar 26 17:09:58 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023350.html">[mod_python] connection to host server broken
</A></li>
        <LI>Next message: <A HREF="023359.html">[SPAM] Re: [mod_python] connection to host server broken
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23356">[ date ]</a>
              <a href="thread.html#23356">[ thread ]</a>
              <a href="subject.html#23356">[ subject ]</a>
              <a href="author.html#23356">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 26/03/07, sikander hayat &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">hayat221 at yahoo.com</A>&gt; wrote:
&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> I am using suse 10.1, Apache 2.2.4, python 2.5 and mod_python 3.3.1.
</I>&gt;<i>
</I>&gt;<i> The error log is as follows:
</I>&gt;<i> [Mon Mar 26 10:16:48 2007] [warn] RSA server certificate is a CA certificate
</I>&gt;<i> (BasicConstraints: CA == TRUE !?)
</I>&gt;<i> [Mon Mar 26 10:16:48 2007] [warn] RSA server certificate CommonName (CN)
</I>&gt;<i> `localhost' does NOT match server name!?
</I>&gt;<i> [Mon Mar 26 10:16:48 2007] [notice] mod_python: Creating 8 session mutexes
</I>&gt;<i> based on 256 max processes and 0 max threads.
</I>&gt;<i> [Mon Mar 26 10:16:48 2007] [notice] mod_python: using mutex_directory /tmp
</I>&gt;<i> [Mon Mar 26 10:16:48 2007] [notice] Apache/2.2.4 (Unix) DAV/2 mod_ssl/2.2.4
</I>&gt;<i> OpenSSL/0.9.8d mod_python/3.3.1 Python/2.5 PHP/5.2.1
</I>&gt;<i> mod_apreq2-20051231/2.5.7 m
</I>&gt;<i> od_perl/2.0.2 Perl/v5.8.7 configured -- resuming normal operations
</I>&gt;<i> [Mon Mar 26 10:17:04 2007] [error] [client 134.96.24.83] File does not
</I>&gt;<i> exist: /opt/lampp/htdocs/favicon.ico
</I>&gt;<i> [Mon Mar 26 10:17:35 2007] [notice] mod_python (pid=3230,
</I>&gt;<i> interpreter='localhost'): Importing module
</I>&gt;<i> '/opt/lampp/htdocs/parkweb/index.py'
</I>&gt;<i> [Mon Mar 26 10:17:35 2007] [notice] mod_python (pid=3231,
</I>&gt;<i> interpreter='localhost'): Importing module
</I>&gt;<i> '/opt/lampp/htdocs/parkweb/index.py'
</I>&gt;<i> [Mon Mar 26 10:17:36 2007] [notice] child pid 3230 exit signal Segmentation
</I>&gt;<i> fault (11)
</I>&gt;<i> [Mon Mar 26 10:17:36 2007] [notice] child pid 3231 exit signal Segmentation
</I>&gt;<i> fault (11)
</I>&gt;<i>
</I>&gt;<i> I have recently upgraded to python 2.5. So, to say, i have 2 versions of
</I>&gt;<i> python on my system. Will try to remove the older one and try again.
</I>
To confirm whether that is necessary, set:

  PythonHandler mod_python.testhandler

In the output from that just verify that the sys.path information is
correct for the version of Python you expect to use. From the above
log entries there probably isn't a problem with versions as mod_python
will actually log some warnings if it finds a different version of
Python than what it was compiled with and that isn't in the log
entries.

&gt;<i> ****Why is it loading the module twice ...is that normal ???
</I>
Note how the 'pid' is different for each. This means that there were
two requests and that they so happened to be handled by different
Apache child processes.

&gt;<i> Kindly let me know if something rings a bell.
</I>
Since you are using Python 2.5, it should not be the expat version
problem as Python 2.5 is supposed to change things to avoid that one.
I would though still suspect that it is some versioning problem with
shared libraries. For example, if your web application uses some sort
of database and you also have PHP loaded and it is using some
different version of the database client library. This sort of
mismatch can cause a crash as one library will take precedence over
the other and if they are not compatible it can crash.

What you may need to do is start adding debug into your code and the
framework it uses such that you output a log message before and after
every module import. For example:

  from mod_python import apache

  apache.log_error(__file__  + &quot; #1&quot;)
  import pyexpat
  apache.log_error(__file__ + &quot; #2&quot;)
  import module2
  apache.log_error(__file__ + &quot; #3&quot;)

See how many of the messages come out in the Apache error log and slow
narrow it down to a specific module being importer causing the crash.

If the module imports aren't the problem but something in handler
itself, do something similar, logging messages to the Apache log until
you find exactly what call causes it.

Graham

&gt;<i> Thanks,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Graham Dumpleton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>&gt; wrote:
</I>&gt;<i>  On 24/03/07, Jim Gallacher wrote:
</I>&gt;<i> &gt; sikander hayat wrote:
</I>&gt;<i> &gt; &gt; Hi all,
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; My apache webserver on linux recently broke down, so i reinstalled it,
</I>&gt;<i> along with mod_python. Having made the necessary changes in the conf file of
</I>&gt;<i> apache, i tried some of the simple tests, such as mptest, but i keep on
</I>&gt;<i> getting the following error.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Connection to host server ... lost.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Why is that, is it because of python or some apache setting.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Or network problems?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; What do you find in your apache logs?
</I>&gt;<i>
</I>&gt;<i> The Apache error log would be a good start, as it looks to me like
</I>&gt;<i> your Apache child processes are crashing. You may find errors about
</I>&gt;<i> segmentation violations or similar in the logs. If you do, check that
</I>&gt;<i> the version of mod_python you are using is the correct one for the
</I>&gt;<i> version of Python and Apache you are using. Having multiple versions
</I>&gt;<i> of Python installed can also cause issues.
</I>&gt;<i>
</I>&gt;<i> BTW, are you using precompiled packages or compiling everything from
</I>&gt;<i> source code? What operating system are you using?
</I>&gt;<i>
</I>&gt;<i> Graham
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  ________________________________
</I>&gt;<i> Sucker-punch spam with award-winning protection.
</I>&gt;<i>  Try the free Yahoo! Mail Beta.
</I>&gt;<i>
</I>&gt;<i>
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023350.html">[mod_python] connection to host server broken
</A></li>
	<LI>Next message: <A HREF="023359.html">[SPAM] Re: [mod_python] connection to host server broken
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23356">[ date ]</a>
              <a href="thread.html#23356">[ thread ]</a>
              <a href="subject.html#23356">[ subject ]</a>
              <a href="author.html#23356">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
