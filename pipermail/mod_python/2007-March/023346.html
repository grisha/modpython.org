<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] mod_python on / and authentication on /login (using
	trac)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python%20on%20/%20and%20authentication%20on%20/login%20%28using%0A%09trac%29&In-Reply-To=20070323011938.GC3448%40neu.nirvana">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023328.html">
   <LINK REL="Next"  HREF="023348.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] mod_python on / and authentication on /login (using
	trac)</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python%20on%20/%20and%20authentication%20on%20/login%20%28using%0A%09trac%29&In-Reply-To=20070323011938.GC3448%40neu.nirvana"
       TITLE="[mod_python] mod_python on / and authentication on /login (using
	trac)">graham.dumpleton at gmail.com
       </A><BR>
    <I>Sun Mar 25 17:15:52 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023328.html">[mod_python] mod_python on / and authentication on /login (using
	trac)
</A></li>
        <LI>Next message: <A HREF="023348.html">[mod_python] mod_python on / and authentication on /login (using
	trac)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23346">[ date ]</a>
              <a href="thread.html#23346">[ thread ]</a>
              <a href="subject.html#23346">[ subject ]</a>
              <a href="author.html#23346">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Did you get any further with this? I note that the Trac people have
given up on you, closed the ticket for the problem and directed you
back to us or Apache lists.

Did you by chance try mod_wsgi to see if you could get something going
under that instead?

Graham

On 23/03/07, Axel Thimm &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Axel.Thimm at atrpms.net</A>&gt; wrote:
&gt;<i> On Thu, Mar 22, 2007 at 08:26:43PM +0100, Axel Thimm wrote:
</I>&gt;<i> &gt; On Thu, Mar 22, 2007 at 11:28:10AM +1100, Graham Dumpleton wrote:
</I>&gt;<i> &gt; &gt; BTW, it would help if you just sent the bits of the configuration you
</I>&gt;<i> &gt; &gt; are using.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; OK, see below.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; That Trac ticket shows using file based basic authentication, but
</I>&gt;<i> &gt; &gt; your posts on Trac users group show you trying to use LDAP backed
</I>&gt;<i> &gt; &gt; basic authentication. Have you tried it with file based basic
</I>&gt;<i> &gt; &gt; authentication instead of LDAP to eliminate that LDAP isn't the
</I>&gt;<i> &gt; &gt; problem, especially since you are setting:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Yes, see below for a tidy example.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; On 22/03/07, Graham Dumpleton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; &gt;Do you have any Alias, ScriptAlias or Location directives (normal or
</I>&gt;<i> &gt; &gt; &gt;match type) defined outside of the VirtualHost containers?
</I>&gt;<i> &gt; &gt; &gt;Do you have any other Auth type or mod_python directives outside of
</I>&gt;<i> &gt; &gt; &gt;the VirtualHost container?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; No, everything is contained in VirtualHosts.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Here is the config (hostname masked away):
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &lt;VirtualHost XXX.XXX.XXX:80&gt;
</I>&gt;<i> &gt;   ServerName XXX.XXX.XXX
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;   DocumentRoot /ext/test/empty
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;   &lt;Location &quot;/&quot;&gt;
</I>&gt;<i> &gt;     Order allow,deny
</I>&gt;<i> &gt;     Allow from all
</I>&gt;<i> &gt;   &lt;/Location&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;   &lt;Location &quot;/&quot;&gt;
</I>&gt;<i> &gt;     SetHandler mod_python
</I>&gt;<i> &gt;     PythonPath &quot;sys.path+['/opt/TWWfsw/trac010/lib/python242']&quot;
</I>&gt;<i> &gt;     PythonHandler trac.web.modpython_frontend
</I>&gt;<i> &gt;     PythonOption TracEnv /ext/test/trac
</I>&gt;<i> &gt;     PythonOption TracUriRoot /
</I>&gt;<i> &gt;   &lt;/Location&gt;
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i> The weird thing is that if I use another SetHandler like none or
</I>&gt;<i> server-status in the /login section below it is ignored as well. How
</I>&gt;<i> can SetHandler mod_python survive into the next Location section if
</I>&gt;<i> explicitly passed to another handler?
</I>&gt;<i>
</I>&gt;<i> And if I start commenting lines in the section &quot;/&quot; above it starts
</I>&gt;<i> working the moment I turn off trac (but still keep SetHandler
</I>&gt;<i> mod_python).
</I>&gt;<i>
</I>&gt;<i> I don't understand how the Location sections get mixed up like they
</I>&gt;<i> do. Doesn't this sound like an apache bug?
</I>&gt;<i>
</I>&gt;<i> &gt;   &lt;Location /login&gt;
</I>&gt;<i> &gt;     AuthType Basic
</I>&gt;<i> &gt;     AuthName &quot;MyCompany Trac Server&quot;
</I>&gt;<i> &gt;     AuthUserFile /ext/test/.htpasswd
</I>&gt;<i> &gt;     Require valid-user
</I>&gt;<i> &gt;   &lt;/Location&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;   ErrorLog \
</I>&gt;<i> &gt;     /var/opt/TWWfsw/httpd222/log/XXX.XXX.XXX/error
</I>&gt;<i> &gt;   CustomLog \
</I>&gt;<i> &gt;     /var/opt/TWWfsw/httpd222/log/XXX.XXX.XXX/access common
</I>&gt;<i> &gt; &lt;/VirtualHost&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; &gt;On 22/03/07, Axel Thimm &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Axel.Thimm at atrpms.net</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; &gt;&gt; Hi,
</I>&gt;<i> &gt; &gt; &gt;&gt;
</I>&gt;<i> &gt; &gt; &gt;&gt; On Thu, Mar 22, 2007 at 08:38:21AM +1100, Graham Dumpleton wrote:
</I>&gt;<i> &gt; &gt; &gt;&gt; &gt; On 22/03/07, Axel Thimm &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Axel.Thimm at atrpms.net</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; &gt;&gt; &gt; &gt;Hi,
</I>&gt;<i> &gt; &gt; &gt;&gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;&gt; &gt; &gt;I'm fighting against a strange issue with a setup that involves having
</I>&gt;<i> &gt; &gt; &gt;&gt; &gt; &gt;mod_python on Location &quot;/&quot; and authenticating only on certain URLs
</I>&gt;<i> &gt; &gt; &gt;&gt; &gt; &gt;like /login. This is for example the typical setup for a trac
</I>&gt;<i> &gt; &gt; &gt;&gt; &gt; &gt;dedicated site, see
</I>&gt;<i> &gt; &gt; &gt;&gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;&gt; &gt; &gt;<A HREF="http://trac.edgewall.org/ticket/3821">http://trac.edgewall.org/ticket/3821</A>
</I>&gt;<i> &gt; &gt; &gt;&gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;&gt; &gt; &gt;for the background. It doesn't happen if mod_python/trac is hooked on
</I>&gt;<i> &gt; &gt; &gt;&gt; &gt; &gt;&quot;/trac&quot; and the authentication on &quot;/trac/login&quot;.
</I>&gt;<i> &gt; &gt; &gt;&gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;&gt; &gt; &gt;The combinations that are known to exhibit or not this error are
</I>&gt;<i> &gt; &gt; &gt;&gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;&gt; &gt; &gt;httpd modpython trac     works
</I>&gt;<i> &gt; &gt; &gt;&gt; &gt; &gt;2.2.3 3.6.20    0.10     no
</I>&gt;<i> &gt; &gt; &gt;&gt; &gt; &gt;2.2.2 3.3.1     0.10.3   no
</I>&gt;<i> &gt; &gt; &gt;&gt; &gt; &gt;2.2.3 3.2.8     0.10.3.1 yes
</I>&gt;<i> &gt; &gt; &gt;&gt; &gt; &gt;2.2.2 3.2.10    0.10.3   no
</I>&gt;<i> &gt; &gt; &gt;&gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;&gt; &gt; &gt;Any ideas what's going wrong or how I could debug this further?
</I>&gt;<i> &gt; &gt; &gt;&gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;&gt; &gt; I'm not surprised it doesn't work with mod_python 3.6.20 as no such
</I>&gt;<i> &gt; &gt; &gt;&gt; &gt; version exists.
</I>&gt;<i> &gt; &gt; &gt;&gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;&gt; &gt; Have you tried setting your DocumentRoot to somewhere outside of your
</I>&gt;<i> &gt; &gt; &gt;&gt; &gt; Trac instance. I'd suggest doing that what would be a bad idea to
</I>&gt;<i> &gt; &gt; &gt;&gt; &gt; start with as the presence of directories/files in there can sometimes
</I>&gt;<i> &gt; &gt; &gt;&gt; &gt; interfere with Apache's matching algorithms for locations. Set it
</I>&gt;<i> &gt; &gt; &gt;&gt; &gt; instead to some empty directory elsewhere if you aren't going to serve
</I>&gt;<i> &gt; &gt; &gt;&gt; &gt; any static files out of document root.
</I>&gt;<i> &gt; &gt; &gt;&gt;
</I>&gt;<i> &gt; &gt; &gt;&gt; Yes, that's how the setup already was. It was pointing to a folder
</I>&gt;<i> &gt; &gt; &gt;&gt; with only favicon.ico inside.
</I>&gt;<i> &gt; &gt; &gt;&gt;
</I>&gt;<i> &gt; &gt; &gt;&gt; &gt; Also, have you tried changing the order of the two Location
</I>&gt;<i> &gt; &gt; &gt;&gt; &gt; directives, ie., those for '/' and '/login' so the later is actually
</I>&gt;<i> &gt; &gt; &gt;&gt; &gt; first. It shouldn't in practice matter, but some Apache configuration
</I>&gt;<i> &gt; &gt; &gt;&gt; &gt; entries are order dependent.
</I>&gt;<i> &gt; &gt; &gt;&gt;
</I>&gt;<i> &gt; &gt; &gt;&gt; Yes, I tried that, I even replicated the /login section before and
</I>&gt;<i> &gt; &gt; &gt;&gt; after the / section. The only way I can get it to work is to move the
</I>&gt;<i> &gt; &gt; &gt;&gt; trac instance further into the URL space, e.g. /trac and /trac/login
</I>&gt;<i> &gt; &gt; &gt;&gt; instead of / and /login.
</I>&gt;<i> &gt; &gt; &gt;&gt;
</I>&gt;<i> &gt; &gt; &gt;&gt;
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; _______________________________________________
</I>&gt;<i> &gt; &gt; Mod_python mailing list
</I>&gt;<i> &gt; &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> &gt; &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Mod_python mailing list
</I>&gt;<i> &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Axel.Thimm at ATrpms.net
</I>&gt;<i>
</I>&gt;<i>
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023328.html">[mod_python] mod_python on / and authentication on /login (using
	trac)
</A></li>
	<LI>Next message: <A HREF="023348.html">[mod_python] mod_python on / and authentication on /login (using
	trac)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23346">[ date ]</a>
              <a href="thread.html#23346">[ thread ]</a>
              <a href="subject.html#23346">[ subject ]</a>
              <a href="author.html#23346">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
