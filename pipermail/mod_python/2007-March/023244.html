<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] matplotlib and mod_python
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20matplotlib%20and%20mod_python&In-Reply-To=1172437084.7355.11.camel%40localhost">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023243.html">
   <LINK REL="Next"  HREF="023245.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] matplotlib and mod_python</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>David Fraser</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20matplotlib%20and%20mod_python&In-Reply-To=1172437084.7355.11.camel%40localhost"
       TITLE="[mod_python] matplotlib and mod_python">davidf at sjsoft.com
       </A><BR>
    <I>Tue Mar  6 04:49:25 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023243.html">[mod_python] Re: mod_python 3.3.1 make error
</A></li>
        <LI>Next message: <A HREF="023245.html">[mod_python] mod_python and .pyo files
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23244">[ date ]</a>
              <a href="thread.html#23244">[ thread ]</a>
              <a href="subject.html#23244">[ subject ]</a>
              <a href="author.html#23244">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Rajarshi Guha wrote:
&gt;<i> Hi, I have a mod_python based application in which I would like to
</I>&gt;<i> generate a chart using matplotlib.
</I>&gt;<i>
</I>&gt;<i> Currently, when I try to call the function that generates the chart I
</I>&gt;<i> get a 'HOME not writable' error. I realize why this is happening and so
</I>&gt;<i> I modified my apache startup script to export a HOME directory of '/tmp'
</I>&gt;<i>
</I>&gt;<i> When this is done, the chart is generated, but when I try to dump the
</I>&gt;<i> chart to a file using:
</I>&gt;<i>
</I>&gt;<i> canvas.print_figure( ... )
</I>&gt;<i>
</I>&gt;<i> the file is always created in /tmp (i.e., the value of HOME), rather
</I>&gt;<i> than in the file that I specify (which is in a current directory that is
</I>&gt;<i> writable by apache).
</I>&gt;<i>
</I>&gt;<i> Has anybody successfully used matplotlib in a mod_python application, to
</I>&gt;<i> actually save a chart to a disk file?
</I>&gt;<i>
</I>&gt;<i> (I realize that one way would be to send back the raw image bytes, but
</I>&gt;<i> the image is supposed to be a part of an HTML page, so I can't go down
</I>&gt;<i> that path)
</I>&gt;<i>
</I>&gt;<i> Any pointers would be greatly appreciated.
</I>&gt;<i>   
</I>A much better way IMHO is to generate the image in a Python handler in
response to the request for the image.
Then you can send back the raw image bytes without saving them to disk.
You basically need to pass the parameters that are needed to generate
the image in the URL that you reference the image as in the HTML code
This avoids all kinds of potential problems with state, multiple image
requests overlapping, etc

David
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023243.html">[mod_python] Re: mod_python 3.3.1 make error
</A></li>
	<LI>Next message: <A HREF="023245.html">[mod_python] mod_python and .pyo files
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23244">[ date ]</a>
              <a href="thread.html#23244">[ thread ]</a>
              <a href="subject.html#23244">[ subject ]</a>
              <a href="author.html#23244">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
