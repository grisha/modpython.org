<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Trapping output from importer.ReportError
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Trapping%20output%20from%20importer.ReportError&In-Reply-To=5d74cfb70703160725k226b69f6h79bacf609e60b0e6%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023289.html">
   <LINK REL="Next"  HREF="023291.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Trapping output from importer.ReportError</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Trapping%20output%20from%20importer.ReportError&In-Reply-To=5d74cfb70703160725k226b69f6h79bacf609e60b0e6%40mail.gmail.com"
       TITLE="[mod_python] Trapping output from importer.ReportError">graham.dumpleton at gmail.com
       </A><BR>
    <I>Fri Mar 16 19:34:40 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023289.html">[mod_python] Trapping output from importer.ReportError
</A></li>
        <LI>Next message: <A HREF="023291.html">[mod_python] Object cleanup with child process scaling
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23290">[ date ]</a>
              <a href="thread.html#23290">[ thread ]</a>
              <a href="subject.html#23290">[ subject ]</a>
              <a href="author.html#23290">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 17/03/07, Chris Rilly &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">chrispwd at gmail.com</A>&gt; wrote:
&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i> I have a custom logging class in our application that we use (writes to
</I>&gt;<i> file, not to apache logs).
</I>&gt;<i>
</I>&gt;<i> What I would like to do is when an internal server error happens, log the
</I>&gt;<i> traceback to the file via our logger and not the apache error log. I noticed
</I>&gt;<i> in the importer module there is a method called &quot;ReportError&quot;.  The exact
</I>&gt;<i> output thats being emitted from that method is what I would like to capture.
</I>&gt;<i>
</I>&gt;<i> I'm somewhat new to mod_python, but is there a way to override or get the
</I>&gt;<i> traceback from that method?
</I>
No.

&gt;<i> My application is making use of the publisher
</I>&gt;<i> handler.
</I>&gt;<i>
</I>&gt;<i> Off to the side a bit, after the traceback is logged, I would want to
</I>&gt;<i> redirect the user to a specific page instead of the default &quot;Internal server
</I>&gt;<i> error&quot; page.
</I>
The Apache way of doing things, which mod_python doesn't follow and
probably should be changed to conform to, is that the text of the
message it would display in the error page should also be stored in
req.notes['error-notes']. Having done that, all you need to do is
define:

  ErrorDocument 500 /some/path/to/my/error/handler

The associated error handler would then be able to extract out
REDIRECT_ERROR_NOTES from the subprocess environment and use that in a
custom page.

If you have multilingual error documents enabled in Apache 2.X, they
already will display these error notes, but if you want a certain
format, you can just define your own error document handler as I
explained.

Anyway, to use this mechanism that Apache already supports is probably
the preferred way but mod_python has to be changed to use it.

Graham
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023289.html">[mod_python] Trapping output from importer.ReportError
</A></li>
	<LI>Next message: <A HREF="023291.html">[mod_python] Object cleanup with child process scaling
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23290">[ date ]</a>
              <a href="thread.html#23290">[ thread ]</a>
              <a href="subject.html#23290">[ subject ]</a>
              <a href="author.html#23290">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
