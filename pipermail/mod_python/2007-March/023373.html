<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] how to use Mysql on mod_python+apache?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20how%20to%20use%20Mysql%20on%20mod_python%2Bapache%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023376.html">
   <LINK REL="Next"  HREF="023386.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] how to use Mysql on mod_python+apache?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Martijn Moeling</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20how%20to%20use%20Mysql%20on%20mod_python%2Bapache%3F&In-Reply-To="
       TITLE="[mod_python] how to use Mysql on mod_python+apache?">martijn at xs4us.nu
       </A><BR>
    <I>Thu Mar 29 06:58:55 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023376.html">[mod_python] Need Help ...Please!!!
</A></li>
        <LI>Next message: <A HREF="023386.html">[mod_python] how to use Mysql on mod_python+apache?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23373">[ date ]</a>
              <a href="thread.html#23373">[ thread ]</a>
              <a href="subject.html#23373">[ subject ]</a>
              <a href="author.html#23373">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I don't see the fuzz about mysql either. It is rock solid and I use(d)
it a lot in production environment, together with mysqldb and mod
python.

When using it with mod python there are a few things to be aware of.

First make sure the connection and cursor objects are not created
globally I use:


Def handler(req):
..
..
	req.db = MySQLdb.connect( host=Chost, user=Cuser,
passwd=Cpasswd, db=Cdb, use_unicode=True, charset='utf8')
	req.cursor = req.db.cursor()

#next I close the database in a fixup handler

req.register_cleanup(closedb,req)

...

And the closedb function

def closedb(req):
    try:
        req.cursor.close()
        req.cursor=None
        req.db.close()
        req.db = None
    except:
        pass

with this method of using mysqldb, the database connection is closed
properly, even if the handler code runs into an error, if not and an
error occurs and the connection is kept by MySQL and at the end it will
run out of resources (and/or memory whatever comes first).

And to the off topic part:
People seem to blame software when it behaves as designed and they don't
read manuals and/or know background theory, please keep non mod_python
issues out of this list and respect choices made by other people, even
if you think it is a bad one. The question was &quot;How can I use Mysql with
MP&quot;.

To explain this further, I see people asking questions about MP running
on windows, personally I have the opinion that Microsoft sells crap but
that is since I know about unixes, OpenVMS, MVS etc. etc. and windows.
But I'll never suggest : trow out windows and install xxxxx since the
other person might be more familiar with windows, that is the tool of
choice for him.

Getting started with MP has a steep learning curve, not because MP is
difficult to use, but since a lot of different technologies and
standards apply (file protection, apache, mime types, character sets,
HTML, javascript, xml, htttp (headers!), browser incompatibility,
python, etc, etc. 
I have over 30 years of professional experience and I had a lot to learn
when I started with MP.

I am thinking of publishing parts of my system on a dedicated MP
examples website, since I solved a lot of technology difficulties
(uploading pictures, resizing pictures, pictures stored in Mysql,
characterset conversion, a simple spiderbot, a simple templating system
etc.

MP beats a lot of other similar tools but in my eyes there is a lack of
proper simple to understand examples for so called newbie's that are
well documented

Martijn Moeling

-----Oorspronkelijk bericht-----
Van: <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python-bounces at modpython.org</A>
[mailto:<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python-bounces at modpython.org</A>] Namens Mike Looijmans
Verzonden: Wednesday, March 28, 2007 12:02 PM
Aan: <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython.org</A>
Onderwerp: Re: [mod_python] how to use Mysql on mod_python+apache?

This thread is going way of topic, but I'd really hate to see people
being turned away from MySQL as 
a DB engine just because of the inaccuracies posted here.

I have several years of experience with many DBMSs, including Informix,
Oracle, MS SQLServer, 
Postgress, MySQL and several others. MySQL is my favorite for (non-.NET)
web applications, because 
of its scalability, performance, reliability, low maintenance and ease
of use.

There are many DBMSs, each with their own pecularities, and none of them
I would consider &quot;bad&quot; (or 
even &quot;evil&quot;). Which DBMS to chose for a particular task seems to become
a matter of personal taste 
more everyday, because the more general offerings, like the ones I
mentioned, all provide the same 
rich feature set (e.g. transactions, subqueries, stored procedures,
outer joins). While I would not 
hesitate to recommend in favor of some of the databases I am familiar
with, there is not one that i 
would ever tell people to &quot;avoid at all cost&quot;. Even FoxPro has its uses.

&gt;<i> Sorry, but accepting invalid input without error, truncating overly
</I>long
&gt;<i> input and clipping overflowed numbers are not &quot;quirks&quot;.
</I>
I agree so far.

&gt;<i>  They are serious data integrity issues.
</I>
I disagree here, because the issues you mentioned are configuration
settings in MySQL. You can 
change the behaviour of the server in the config file. It is unfortunate
that the default settings 
are not the ANSI ones. But you can make the MySQL DB comply to the more
general standard of issuing 
an error on overflow and other forms of invalid input.

I suggest reading some documentation before proceeding on the subject.

&gt;<i> That's fine.  At least you aren't really using MySQL in production :-)
</I>
I have. On my previous assignment, the customer would loose about $10k
per hour in lost machine time 
only (not even taking the engineers cost into account) if the MySQL
database went offline. It did go 
offline once in that three year period i worked there - the power went
down, the UPS failed and the 
operating system (Solaris) died a horrible dead along with the hard
drive. When the power came up, I 
had its replacement up and running in about ten minutes, and no data was
lost.


--
Mike Looijmans

_______________________________________________
Mod_python mailing list
<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>

</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023376.html">[mod_python] Need Help ...Please!!!
</A></li>
	<LI>Next message: <A HREF="023386.html">[mod_python] how to use Mysql on mod_python+apache?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23373">[ date ]</a>
              <a href="thread.html#23373">[ thread ]</a>
              <a href="subject.html#23373">[ subject ]</a>
              <a href="author.html#23373">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
