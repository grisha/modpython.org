<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Apache/mod_python process sizes. Help wanted.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Apache/mod_python%20process%20sizes.%20Help%20wanted.&In-Reply-To=99C69BF9-B599-4BBD-9018-174FC9884492%40dscpl.com.au">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023229.html">
   <LINK REL="Next"  HREF="023232.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Apache/mod_python process sizes. Help wanted.</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Clodoaldo</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Apache/mod_python%20process%20sizes.%20Help%20wanted.&In-Reply-To=99C69BF9-B599-4BBD-9018-174FC9884492%40dscpl.com.au"
       TITLE="[mod_python] Apache/mod_python process sizes. Help wanted.">clodoaldo.pinto.neto at gmail.com
       </A><BR>
    <I>Sat Mar  3 08:27:02 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023229.html">[mod_python] Apache/mod_python process sizes. Help wanted.
</A></li>
        <LI>Next message: <A HREF="023232.html">[mod_python] Apache/mod_python process sizes. Help wanted.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23231">[ date ]</a>
              <a href="thread.html#23231">[ thread ]</a>
              <a href="subject.html#23231">[ subject ]</a>
              <a href="author.html#23231">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>2007/3/2, Graham Dumpleton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">grahamd at dscpl.com.au</A>&gt;:
&gt;<i>
</I>&gt;<i> So, what do other people get?
</I>
# uname -a
Linux s0.localdomain 2.6.19-1.2895.fc6 #1 SMP Wed Jan 10 18:32:37 EST
2007 i686 athlon i386 GNU/Linux

$ ls -las /usr/lib/httpd/modules/mod_python.so
1580 -rwxr-xr-x 1 root root 1611019 Feb  1 15:55
/usr/lib/httpd/modules/mod_python.so

$ ls -las /usr/lib/python2.4/config/libpython2.4.a
1736 -rw-r--r-- 1 root root 1767520 Oct 23 17:58
/usr/lib/python2.4/config/libpython2.4.a

# ldd /usr/lib/httpd/modules/mod_python.so
        linux-gate.so.1 =&gt;  (0x00308000)
        libpthread.so.0 =&gt; /lib/libpthread.so.0 (0x008b4000)
        libdl.so.2 =&gt; /lib/libdl.so.2 (0x003ce000)
        libutil.so.1 =&gt; /lib/libutil.so.1 (0x00110000)
        libm.so.6 =&gt; /lib/libm.so.6 (0x00114000)
        libc.so.6 =&gt; /lib/libc.so.6 (0x0013b000)
        /lib/ld-linux.so.2 (0x80000000)

&gt;<i>5. Work out how much memory Apache uses when mod_python is not being
</I>loaded. One can use 'top' for this. Hopefully others may suggest
better ways.

# top -U apache

top - 13:04:02 up 27 days, 14:07,  3 users,  load average: 1.03, 1.04, 1.01
Tasks: 116 total,   2 running, 114 sleeping,   0 stopped,   0 zombie
Cpu(s):  0.3%us,  0.0%sy, 99.7%ni,  0.0%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st
Mem:   1538488k total,  1483200k used,    55288k free,    19692k buffers
Swap:  4087888k total,      572k used,  4087316k free,  1313956k cached

  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
 1367 apache    25   0 28728 5552  648 S  0.0  0.4   0:00.00 httpd

&gt;<i>6. Work out how much memory Apache uses when mod_python is loaded
</I>but before any requests have occurred. Ensure that no PythonImport
directives have been used.

# top -U apache

top - 13:06:41 up 27 days, 14:10,  3 users,  load average: 1.00, 1.02, 1.00
Tasks: 116 total,   2 running, 114 sleeping,   0 stopped,   0 zombie
Cpu(s):  6.6%us,  1.1%sy, 90.2%ni,  1.5%id,  0.2%wa,  0.2%hi,  0.2%si,  0.0%st
Mem:   1538488k total,  1486348k used,    52140k free,    20000k buffers
Swap:  4087888k total,      572k used,  4087316k free,  1316220k cached

  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
 1423 apache    25   0 30948 6724  808 S  0.0  0.4   0:00.00 httpd

&gt;<i>If eager, use a hello world mod_python example and trigger one request
</I>against it and see how size changes.

After one publisher helloword request:

# top -U apache

top - 13:20:49 up 27 days, 14:24,  3 users,  load average: 1.00, 1.00, 1.00
Tasks: 117 total,   2 running, 115 sleeping,   0 stopped,   0 zombie
Cpu(s):  0.0%us,  0.0%sy,100.0%ni,  0.0%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st
Mem:   1538488k total,  1490996k used,    47492k free,    21880k buffers
Swap:  4087888k total,      572k used,  4087316k free,  1314228k cached

  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
 1423 apache    15   0 35020  12m 3212 S  0.0  0.8   0:00.26 httpd
 1452 apache    15   0 30948 6724  808 S  0.0  0.4   0:00.00 httpd

&gt;<i>7. If you are also loading lots of other Apache modules, such as
</I>mod_perl,
module for PHP etc, list any significant ones so we might understand
what
else may be using memory. Ideally, do the tests with as little
modules loaded
as possible.

# httpd -M
Loaded Modules:
 core_module (static)
 mpm_prefork_module (static)
 http_module (static)
 so_module (static)
 auth_basic_module (shared)
 auth_digest_module (shared)
 authn_file_module (shared)
 authn_alias_module (shared)
 authn_anon_module (shared)
 authn_dbm_module (shared)
 authn_default_module (shared)
 authz_host_module (shared)
 authz_user_module (shared)
 authz_owner_module (shared)
 authz_groupfile_module (shared)
 authz_dbm_module (shared)
 authz_default_module (shared)
 ldap_module (shared)
 authnz_ldap_module (shared)
 include_module (shared)
 log_config_module (shared)
 logio_module (shared)
 env_module (shared)
 ext_filter_module (shared)
 mime_magic_module (shared)
 expires_module (shared)
 deflate_module (shared)
 headers_module (shared)
 usertrack_module (shared)
 setenvif_module (shared)
 mime_module (shared)
 dav_module (shared)
 status_module (shared)
 autoindex_module (shared)
 info_module (shared)
 dav_fs_module (shared)
 vhost_alias_module (shared)
 negotiation_module (shared)
 dir_module (shared)
 actions_module (shared)
 speling_module (shared)
 userdir_module (shared)
 alias_module (shared)
 rewrite_module (shared)
 proxy_module (shared)
 proxy_balancer_module (shared)
 proxy_ftp_module (shared)
 proxy_http_module (shared)
 proxy_connect_module (shared)
 cache_module (shared)
 suexec_module (shared)
 disk_cache_module (shared)
 file_cache_module (shared)
 mem_cache_module (shared)
 cgi_module (shared)
 php5_module (shared)
 proxy_ajp_module (shared)
 python_module (shared)
Syntax OK

HTH. Regards,
-- 
Clodoaldo Pinto Neto
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023229.html">[mod_python] Apache/mod_python process sizes. Help wanted.
</A></li>
	<LI>Next message: <A HREF="023232.html">[mod_python] Apache/mod_python process sizes. Help wanted.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23231">[ date ]</a>
              <a href="thread.html#23231">[ thread ]</a>
              <a href="subject.html#23231">[ subject ]</a>
              <a href="author.html#23231">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
