<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> Fwd: [mod_python] mod_python: handling file uploads
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=Fwd%3A%20%5Bmod_python%5D%20mod_python%3A%20handling%20file%20uploads&In-Reply-To=88e286470703241825o61e25dd4p543d04e384af5d14%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023340.html">
   <LINK REL="Next"  HREF="023349.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Fwd: [mod_python] mod_python: handling file uploads</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=Fwd%3A%20%5Bmod_python%5D%20mod_python%3A%20handling%20file%20uploads&In-Reply-To=88e286470703241825o61e25dd4p543d04e384af5d14%40mail.gmail.com"
       TITLE="Fwd: [mod_python] mod_python: handling file uploads">graham.dumpleton at gmail.com
       </A><BR>
    <I>Sat Mar 24 20:30:03 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023340.html">[mod_python] apache._server.get_options() Problem in 3.3
</A></li>
        <LI>Next message: <A HREF="023349.html">[mod_python] how to use Mysql on mod_python+apache?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23341">[ date ]</a>
              <a href="thread.html#23341">[ thread ]</a>
              <a href="subject.html#23341">[ subject ]</a>
              <a href="author.html#23341">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Sorry, I stuffed up this time and didn't send it back to the list. :-(

---------- Forwarded message ----------
From: Graham Dumpleton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>&gt;
Date: 25-Mar-2007 11:25
Subject: Re: [mod_python] mod_python: handling file uploads
To: &quot;Ruben K.&quot; &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">midreth at gmail.com</A>&gt;


On 25/03/07, Ruben K. &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">midreth at gmail.com</A>&gt; wrote:
&gt;<i> I built a simple website framework that is not compatible with the
</I>&gt;<i> publishing handler, now I am looking to build a feature into that framework
</I>&gt;<i> to handle uploads.
</I>&gt;<i>
</I>&gt;<i> While researching on my own how to do this I found that mod_python's
</I>&gt;<i> documention is very lacking
</I>&gt;<i> in this area.
</I>&gt;<i>
</I>&gt;<i> I have the following questions:
</I>&gt;<i>
</I>&gt;<i> - In which part of mod_python's instance (usually named req or request) is
</I>&gt;<i> the uploaded file information found?
</I>&gt;<i> - How would I go about moving temporary files to the target directories?
</I>&gt;<i> Would I want to open() a file with w+ or something (create if doesn't exist)
</I>&gt;<i> and write() the temporary file's content into it?
</I>&gt;<i> - Is there a default handler for actions like this?
</I>
Have you read the following part of the documentation:

<A HREF="http://www.modpython.org/live/current/doc-html/pyapi-util-fstor.html">http://www.modpython.org/live/current/doc-html/pyapi-util-fstor.html</A>
<A HREF="http://www.modpython.org/live/current/doc-html/pyapi-util-fstor-examples.html#pyapi-util-fstor-examples">http://www.modpython.org/live/current/doc-html/pyapi-util-fstor-examples.html#pyapi-util-fstor-examples</A>

The FieldStorage class which is what is used to decode forms and
handle file uploads has a file_callback constructor argument which can
be used to control how uploaded files are handled and where they are
initially stored.

This at least is one way of doing things such that it is handled
within mod_python.

For a more interesting example which you may be able to adapt, have a
look at Tramline (<A HREF="http://www.infrae.com/products/tramline">http://www.infrae.com/products/tramline</A>). This is an
input filter than can intercept file uploads and save them away such
that mod_python response handlers don't have to worry about them. All
that gets passed through to a response handler is a file ID of some
sort which it might then use to refer to the file and do further
processing on it.

Graham
</PRE>



















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023340.html">[mod_python] apache._server.get_options() Problem in 3.3
</A></li>
	<LI>Next message: <A HREF="023349.html">[mod_python] how to use Mysql on mod_python+apache?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23341">[ date ]</a>
              <a href="thread.html#23341">[ thread ]</a>
              <a href="subject.html#23341">[ subject ]</a>
              <a href="author.html#23341">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
