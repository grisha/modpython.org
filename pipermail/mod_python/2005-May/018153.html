<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> SSL-data access from verious handlers.  was: Re: [mod_python]
	problem w/ authen handler
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=SSL-data%20access%20from%20verious%20handlers.%20%20was%3A%20Re%3A%20%5Bmod_python%5D%0A%09problem%20w/%20authen%20handler&In-Reply-To=5.2.1.1.0.20050523092011.0367cbc8%40mail.comune.grosseto.it">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018159.html">
   <LINK REL="Next"  HREF="018155.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>SSL-data access from verious handlers.  was: Re: [mod_python]
	problem w/ authen handler</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Bud P. Bruegger</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=SSL-data%20access%20from%20verious%20handlers.%20%20was%3A%20Re%3A%20%5Bmod_python%5D%0A%09problem%20w/%20authen%20handler&In-Reply-To=5.2.1.1.0.20050523092011.0367cbc8%40mail.comune.grosseto.it"
       TITLE="SSL-data access from verious handlers.  was: Re: [mod_python]
	problem w/ authen handler">bud at comune.grosseto.it
       </A><BR>
    <I>Mon May 23 04:55:44 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="018159.html">[mod_python] telling mod_python to exit its children
</A></li>
        <LI>Next message: <A HREF="018155.html">SSL-data access from verious handlers. was: Re: [mod_python]
	problem w/ authen handler
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18153">[ date ]</a>
              <a href="thread.html#18153">[ thread ]</a>
              <a href="subject.html#18153">[ subject ]</a>
              <a href="author.html#18153">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>At 09.20 23/05/2005 +0200, Graham Dumpleton wrote:
&gt;<i>Some questions for you about this.
</I>&gt;<i>
</I>&gt;<i>How does this information fit into the larger scheme of what you are
</I>&gt;<i>trying to do? Are you trying to separate this out into a separate
</I>&gt;<i>handler phase so that you don't have to duplicate that code in every
</I>&gt;<i>mod_python content handler? Are mod_python content handlers being used
</I>&gt;<i>exclusively to deliver up content, or are you just using mod_python
</I>&gt;<i>as a way of processing the SSL stuff and content handler phases would
</I>&gt;<i>be handled by non mod_python handlers such as PHP, CGI or static
</I>&gt;<i>page delivery?
</I>
Hi Graham,

I suppose my problem is closest to the last option you mention above.

Here is some more background on what I'm trying to do.  The objective is an 
access control system that works with the various European eID cards and 
basically is a reverse-proxy that centralizes authentication and 
authorization.  Behind the reverse-proxy, any kind of application servers 
(from static pages, mod-python, php, servlets, etc.; normally on separate 
hosts) are foreseen.  It is an extension of the official Belgian approach 
<A HREF="http://www.belgium.be/zip/Belgian_eID_Authentication_Reverse_Proxy_Users_Guide.pdf.">http://www.belgium.be/zip/Belgian_eID_Authentication_Reverse_Proxy_Users_Guide.pdf.</A>

The overall request processing would more or less follow this pattern:

mod-ssl  &gt;  mod-personID  &gt; 
mod-RBAC &gt;  mod-rewrite      ---------&gt;   mod-remoteAuth ...

mod-ssl and -rewrite are off the shelf.  What I am trying to add based on 
mod-python are:

mod-personID takes the data from mod-ssl (mostly SSL_CLIENT_S_DN) and 
depending on which eID card was used, maps to an internationally unique 
personID:
   * for the Belgian, Finish, and Estonian eIDs, it simply takes the 
subject serial number and prefixes it with a country id
   * for the Italian CIE, it extracts the card number from the subject CN 
and looks up a corresponding unique person ID in LDAP
   * for the Italian CNS, it cuts the person ID from the subj. CN string 
and prefixes it
   * etc.

mod-RBAC is then a role-based access control module--I yet have to start 
with that one..

If the access to the resouce is granted, the internationally unique person 
id generated by mod-personID is transferred to the application server 
behind the proxy in a custom http-header.  mod-remoteAuth takes this header 
as input to fake local Basic Auth (in the case of Apache, either as simple 
mod-python access handler that sets req.user or also as pure configuration 
(using mod-rewrite)).

The concept of Loginhandler is really interesting.  My doubt is whether it 
would execute before mod-rewrite clicks in?

Many thanks for your support!

cheers
-b




-------------------------------------------------------------------------------------------------
Ing. Bud P. Bruegger, Ph.D.                 +39-0564-488577 
(voice),  -21139 (fax)
Servizio Elaborazione Dati                    e-mail:  <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">bud at comune.grosseto.it</A>
Comune di 
Grosseto                            <A HREF="http://www.comune.grosseto.it/cie/">http://www.comune.grosseto.it/cie/</A>
Via Ginori, 
43                                      <A HREF="http://OpenPortalGuard.sf.net">http://OpenPortalGuard.sf.net</A>
58100 Grosseto (Tuscany, Italy)           jabber:  <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">bud at amessage.info</A>

Free Software in Public Administration:  not just a good idea, but a necessity

Perfection is attained, not when there is nothing more to be added, but 
when there is nothing more to be taken away -- Antoine de Saint-Exupery 

</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018159.html">[mod_python] telling mod_python to exit its children
</A></li>
	<LI>Next message: <A HREF="018155.html">SSL-data access from verious handlers. was: Re: [mod_python]
	problem w/ authen handler
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18153">[ date ]</a>
              <a href="thread.html#18153">[ thread ]</a>
              <a href="subject.html#18153">[ subject ]</a>
              <a href="author.html#18153">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
