<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> SSL-data access from verious handlers. was: Re:[mod_python]
	problem w/ authen handler
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=SSL-data%20access%20from%20verious%20handlers.%20was%3A%20Re%3A%5Bmod_python%5D%0A%09problem%20w/%20authen%20handler&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018163.html">
   <LINK REL="Next"  HREF="018166.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>SSL-data access from verious handlers. was: Re:[mod_python]
	problem w/ authen handler</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=SSL-data%20access%20from%20verious%20handlers.%20was%3A%20Re%3A%5Bmod_python%5D%0A%09problem%20w/%20authen%20handler&In-Reply-To="
       TITLE="SSL-data access from verious handlers. was: Re:[mod_python]
	problem w/ authen handler">grahamd at dscpl.com.au
       </A><BR>
    <I>Mon May 23 20:08:13 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="018163.html">SSL-data access from verious handlers. was: Re:[mod_python]
	problem w/ authen handler
</A></li>
        <LI>Next message: <A HREF="018166.html">[mod_python] apache2 + mod_python + mod_php segfaults
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18164">[ date ]</a>
              <a href="thread.html#18164">[ thread ]</a>
              <a href="subject.html#18164">[ subject ]</a>
              <a href="author.html#18164">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Graham Dumpleton wrote ..
&gt;<i> The macros supposedly try and make it type safe, so haven't quite worked
</I>&gt;<i> out how you are meant to use them yet. In part it looks like compile time
</I>&gt;<i> binding is required, which would be an issue with Python. What you might
</I>&gt;<i> be able to do though is write a little C based Python module which did
</I>&gt;<i> the lookup and calling of &quot;ssl_var_lookup()&quot; for you by going direct to
</I>&gt;<i> the Apache runtime library calls. May work. :-)
</I>
See if you can get the attached code (2 files) to work for you. You will need to
modify the setup.py to point to appropriate include and library directories and
correct name for APR libraries on your platform.

The code all compiles, but since I don't have mod_ssl setup I get back nothing.
The first argument to each method must be the request object. It will crash if
it isn't as haven't been able to have check in code that it is in fact a request
object because undefined as am not linking against mod_python .so.

The handler I was using was as follows, but you should be able to adapt it.

import _mp_mod_ssl
import vampire

class _Object:

  def is_https(self,req):
    return _mp_mod_ssl.is_https(req)

  def var_lookup(self,req,name):
    return _mp_mod_ssl.var_lookup(req,name)

handler = vampire.Publisher(_Object())

Let me know how you go. Is an interesting problem which is why I decided
to play with it when I should have been doing real work. :-)

Graham
-------------- next part --------------
A non-text attachment was scrubbed...
Name: _mp_mod_ssl.c
Type: application/octet-stream
Size: 2075 bytes
Desc: not available
Url : <A HREF="http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20050523/9fa0275b/_mp_mod_ssl.obj">http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20050523/9fa0275b/_mp_mod_ssl.obj</A>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: setup.py
Type: application/octet-stream
Size: 606 bytes
Desc: not available
Url : <A HREF="http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20050523/9fa0275b/setup.obj">http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20050523/9fa0275b/setup.obj</A>
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018163.html">SSL-data access from verious handlers. was: Re:[mod_python]
	problem w/ authen handler
</A></li>
	<LI>Next message: <A HREF="018166.html">[mod_python] apache2 + mod_python + mod_php segfaults
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18164">[ date ]</a>
              <a href="thread.html#18164">[ thread ]</a>
              <a href="subject.html#18164">[ subject ]</a>
              <a href="author.html#18164">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
