<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] mod_python doesn't parse python scripts
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python%20doesn%27t%20parse%20python%20scripts&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018172.html">
   <LINK REL="Next"  HREF="018174.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] mod_python doesn't parse python scripts</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python%20doesn%27t%20parse%20python%20scripts&In-Reply-To="
       TITLE="[mod_python] mod_python doesn't parse python scripts">grahamd at dscpl.com.au
       </A><BR>
    <I>Tue May 24 18:30:30 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="018172.html">[mod_python] apache 2.0.54 and SSLUserName
</A></li>
        <LI>Next message: <A HREF="018174.html">[mod_python] apache 2.0.54 and SSLUserName
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18173">[ date ]</a>
              <a href="thread.html#18173">[ thread ]</a>
              <a href="subject.html#18173">[ subject ]</a>
              <a href="author.html#18173">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Graham Dumpleton wrote ..
&gt;<i> As pointed out by others don't use &quot;test.py&quot;. Further, don't use 
</I>&gt;<i> &quot;Location&quot;
</I>&gt;<i> directive, use the &quot;Directory&quot; directive instead, like the referenced
</I>&gt;<i> article says to use. Using &quot;Location&quot; can introduce other issues and 
</I>&gt;<i> should
</I>&gt;<i> be avoided if you are new to mod_python.
</I>
I was on the way out the door when writing this response, not that I
have more time I'll explain why it wasn't working.

When you use the &quot;Directory&quot; directive with a physical directory as the
path, that path will be added into the Python sys.path. When mod_python
looks for the module you specify with the PythonHandler directive it
will therefore be able to find the module if it is actually located in that
physical directory.

If instead you use the &quot;Location&quot; directive, the path is actually the URL
path and not a physical directory. As Python requires a physical directory
for the sys.path search path, it can't use that path in any way. This means
that when it searches for the module you specify, it will not look at your
copy. Because in this case you didn't call your module &quot;mptest&quot; as the
documentation says to and instead used &quot;test&quot;, it found the standard
Python module called &quot;test&quot; instead. Although it was able to load that
module, there was no &quot;handler()&quot; method defined within it and thus you
would most likely have got an error or an empty response (can't remember
which).

Therefore, use the &quot;Directory&quot; directive in preference to the &quot;Location&quot;
directive. If for some reason you must use the &quot;Location&quot; directive, you
would need to have also set the &quot;PythonPath&quot; directive to extend the
sys.path manually to include the directory where your module is installed.
Using the &quot;Location&quot; directive can cause other problem as though such
as Session objects not working. This is because the Session object in
the current mod_python versions rely on being used within a &quot;Directory&quot;
directive so it can determine the physical path associated with it. You
would need to set &quot;ApplicationPath&quot; explicitly if you wanted to use the
&quot;Location&quot; directive and also use Session objects.

Note that if you use .htaccess files as was recommended to be used in
the article for a first attempt at getting things working, there is an
implicit use of the &quot;Directory&quot; directive and thus the directory the .htaccess
file was in would have been automatically added to sys.path and the
module would have been found.

Anyway, hope this helps. I'll update the referenced article yet again with
warnings about not using a name other than &quot;mptest&quot; and especially
not &quot;test&quot;. Also warnings about not using &quot;Location&quot;.

As to the warning about the &quot;PythonHandler&quot; command, I am not sure
in what order Apache evaluates the configuration, but it may be caused
by the directive being used in the configuration file before the mod_python
module has been loaded into Apache.

Graham

&gt;<i> On 24/05/2005, at 11:34 PM, Fabiano Sidler wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; Thank you for answering that quickly!
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Graham Dumpleton wrote:
</I>&gt;<i> &gt;&gt; Read:
</I>&gt;<i> &gt;&gt;   <A HREF="http://www.dscpl.com.au/projects/vampire/articles/modpython-001.html">http://www.dscpl.com.au/projects/vampire/articles/modpython-001.html</A>
</I>&gt;<i> &gt;&gt; &quot;PythonRequestHandler&quot; doesn't work because it isn't a valid directive
</I>&gt;<i> &gt;&gt; name.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Sorry, but doesn't work here:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;    &lt;Location /py&gt;
</I>&gt;<i> &gt; 	    AddHandler python-program .py
</I>&gt;<i> &gt; 	    PythonHandler test
</I>&gt;<i> &gt; 	    PythonDebug On
</I>&gt;<i> &gt;    &lt;/Location&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;    [Tue May 24 14:53:47 2005] [notice] mod_python: (Re)importing 
</I>&gt;<i> &gt; module 'test'
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Meanwhile, httpd does start without any errors, but when try stopping
</I>&gt;<i> &gt; or
</I>&gt;<i> &gt; restarting it, I got the following message:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;    Invalid command 'PythonHandler', perhaps mis-spelled or defined by
</I>&gt;<i> &gt; a module
</I>&gt;<i> &gt;    not included in the server configuration
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Strange, isn't it?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Greetings,
</I>&gt;<i> &gt; Fips
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Mod_python mailing list
</I>&gt;<i> &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018172.html">[mod_python] apache 2.0.54 and SSLUserName
</A></li>
	<LI>Next message: <A HREF="018174.html">[mod_python] apache 2.0.54 and SSLUserName
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18173">[ date ]</a>
              <a href="thread.html#18173">[ thread ]</a>
              <a href="subject.html#18173">[ subject ]</a>
              <a href="author.html#18173">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
