<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Using Twisted inside mod_python
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Using%20Twisted%20inside%20mod_python&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018007.html">
   <LINK REL="Next"  HREF="018009.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Using Twisted inside mod_python</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Using%20Twisted%20inside%20mod_python&In-Reply-To="
       TITLE="[mod_python] Using Twisted inside mod_python">grahamd at dscpl.com.au
       </A><BR>
    <I>Fri May  6 01:59:01 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="018007.html">[mod_python] Using Twisted inside mod_python
</A></li>
        <LI>Next message: <A HREF="018009.html">[mod_python] Using Twisted inside mod_python
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18008">[ date ]</a>
              <a href="thread.html#18008">[ thread ]</a>
              <a href="subject.html#18008">[ subject ]</a>
              <a href="author.html#18008">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>jarrod roberson wrote ..
&gt;<i> On 5/5/05, Graham Dumpleton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">grahamd at dscpl.com.au</A>&gt; wrote:
</I>&gt;<i> &gt; Question to the original poster. Have you added sufficient debug into
</I>&gt;<i> each
</I>&gt;<i> &gt; step of the internals of that call so as to know precisely when the code
</I>&gt;<i> &gt; seems to block?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> that call basically walks a list filters out some items and builds another
</I>&gt;<i> list to return
</I>&gt;<i> I have done alot of basic debugging and the problem is it just hangs apache
</I>&gt;<i> and I have to kill it.
</I>&gt;<i> Thus it doesn't print anything out because it doesn't shut down correctly.
</I>
Is your debug using &quot;print&quot; or &quot;apache.log_error()&quot; from mod_python. If the
latter, it should be logged to Apache log straight away and adding sufficient
debugging should be able to identify place it stops if it reliably stops in the
same place. Is there any evidence it stops at the same place? Does Apache
process go to idle, or does it look to be stuck in a tight loop and hogging
all the CPU? Depending on what platform you are using, does use of ktrace,
ptrace, strace or truss, indicate that Apache process is stuck within certain
system calls? These tools should be able to pointed at the process using its
pid. Tools on Mac OS X are good for this sort of debugging as can show where
different threads are and whether they are waiting on locks etc.

&gt;<i> Do you know that a separate thread can't call into Twisted
</I>&gt;<i> &gt; unless it uses appropriate mechanisms?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> I do now, what I don't know is what &quot;appropriate mechanisms&quot; is specifically
</I>
I don't use Twisted, but based on recent comp.lang.python post, there is a
call &quot;callFromThread&quot;. Example on the new group was:

  import time 
  from twisted.internet import reactor 

  def shutdown(): 

&#160;   &#160; time.sleep(3) 
&#160;   &#160; print &quot;stopping&quot; 
&#160; &#160;   reactor.callFromThread(reactor .stop) 

  reactor.callInThread(shutdown) 
  reactor.run() 

Don't know much more than that.

Graham
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018007.html">[mod_python] Using Twisted inside mod_python
</A></li>
	<LI>Next message: <A HREF="018009.html">[mod_python] Using Twisted inside mod_python
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18008">[ date ]</a>
              <a href="thread.html#18008">[ thread ]</a>
              <a href="subject.html#18008">[ subject ]</a>
              <a href="author.html#18008">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
