<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Dynamically Creating Large Downloads In The Dark
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Dynamically%20Creating%20Large%20Downloads%20In%20The%20Dark&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018098.html">
   <LINK REL="Next"  HREF="018101.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Dynamically Creating Large Downloads In The Dark</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>ijwilson at laspilitas.com</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Dynamically%20Creating%20Large%20Downloads%20In%20The%20Dark&In-Reply-To="
       TITLE="[mod_python] Dynamically Creating Large Downloads In The Dark">ijwilson at laspilitas.com
       </A><BR>
    <I>Sun May 15 22:00:02 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="018098.html">[mod_python] Sessions and Firefox
</A></li>
        <LI>Next message: <A HREF="018101.html">[mod_python] Dynamically Creating Large Downloads In The Dark
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18100">[ date ]</a>
              <a href="thread.html#18100">[ thread ]</a>
              <a href="subject.html#18100">[ subject ]</a>
              <a href="author.html#18100">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello mod_python and friends,

  I was hoping someone could help me with some basic questions because I am 
kind of just running around stabbing in the dark.

  I am trying to create a file that a user can download.

So the file could be too large to just read() and write() all at once so I am 
pretty sure I have to use this method defined for the req object:
  sendfile(path[, offset, len])

So I figure to store my file for them to download I need to create a temporary 
file with a name to give to sendfile.  Now if I create a named temporary file 
using tempfile.NamedTemporaryFile(...) when I close the descriptor it is 
deleted.  
So it seems I must use tempfile.mkstemp() to create the file.. but then I am 
responsible for deleting it.  The files will be large and the disk might not 
have enough room for too many of them.

So in the end my questions are pretty much does what I am saying make sense 
and also how do I know when they are finished downloading the file when 
calling sendfile so that I can delete the file that I created with 
mkstemp() ?

Do I have to put something in cron that just hopes they are done downloading 
it?  I hope there is something better than that.

Thanks in advance.
-Ian



</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018098.html">[mod_python] Sessions and Firefox
</A></li>
	<LI>Next message: <A HREF="018101.html">[mod_python] Dynamically Creating Large Downloads In The Dark
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18100">[ date ]</a>
              <a href="thread.html#18100">[ thread ]</a>
              <a href="subject.html#18100">[ subject ]</a>
              <a href="author.html#18100">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
