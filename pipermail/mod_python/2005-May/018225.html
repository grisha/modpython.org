<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Capturing PSP output
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Capturing%20PSP%20output&In-Reply-To=651a907d7ab985c0eab597dd607bab32%40flowtheory.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018219.html">
   <LINK REL="Next"  HREF="018220.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Capturing PSP output</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Capturing%20PSP%20output&In-Reply-To=651a907d7ab985c0eab597dd607bab32%40flowtheory.net"
       TITLE="[mod_python] Capturing PSP output">grahamd at dscpl.com.au
       </A><BR>
    <I>Mon May 30 18:37:30 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="018219.html">[mod_python] Capturing PSP output
</A></li>
        <LI>Next message: <A HREF="018220.html">[mod_python] Accessing objects loaded with PythonImport
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18225">[ date ]</a>
              <a href="thread.html#18225">[ thread ]</a>
              <a href="subject.html#18225">[ subject ]</a>
              <a href="author.html#18225">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 31/05/2005, at 2:19 AM, Joshua Ginsberg wrote:

&gt;<i> Hello --
</I>&gt;<i>
</I>&gt;<i> I'm trying to do something a little unorthodox... I didn't know if 
</I>&gt;<i> anybody had tried it before... Within a PSP page, I want to run 
</I>&gt;<i> another PSP page and capture the output to a string.
</I>&gt;<i>
</I>&gt;<i> To do a little testing, I wrote the following PSP page:
</I>&gt;<i>
</I>&gt;<i> &lt;%
</I>&gt;<i>
</I>&gt;<i> def sAppend(self, thestring):
</I>&gt;<i>     if '__s__' not in dir(self):
</I>&gt;<i>         self.__s__ = ''
</I>&gt;<i>     self.__s__ += str(thestring)
</I>&gt;<i>
</I>&gt;<i> oldReqWrite = req.write
</I>&gt;<i>
</I>&gt;<i> req.write = sAppend
</I>
This is a bit confusing. Your method accepts a &quot;self&quot; parameter as if 
it is a
method of a class when it isn't. Just because you replace an existing 
instance
method will not turn your one into one.

The result is that the string to be output is being passed as self and 
string
doesn't have a &quot;__s__&quot; member.

There are other problems with using &quot;__s__&quot; as well but rather than go 
into it,
you should just look at:

   <A HREF="http://www.modpython.org/pipermail/mod_python/2005-May/018134.html">http://www.modpython.org/pipermail/mod_python/2005-May/018134.html</A>

That code could probably still be cleaned up a bit perhaps as certain 
things
don't need to be done, also not sure why other things are being done 
either.
If I get a chance later I'll see if I can come up with a more 
streamlined
version.

BTW, did you want to actually reference the original &quot;req&quot; object for 
any
data. The example referenced obviously doesn't allow this as it 
completely
replaces the &quot;req&quot; object with a StringIO object.

Graham

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018219.html">[mod_python] Capturing PSP output
</A></li>
	<LI>Next message: <A HREF="018220.html">[mod_python] Accessing objects loaded with PythonImport
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18225">[ date ]</a>
              <a href="thread.html#18225">[ thread ]</a>
              <a href="subject.html#18225">[ subject ]</a>
              <a href="author.html#18225">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
