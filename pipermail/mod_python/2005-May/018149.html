<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] telling mod_python to exit its children
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20telling%20mod_python%20to%20exit%20its%20children&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018146.html">
   <LINK REL="Next"  HREF="018150.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] telling mod_python to exit its children</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Martin Blais</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20telling%20mod_python%20to%20exit%20its%20children&In-Reply-To="
       TITLE="[mod_python] telling mod_python to exit its children">martin.blais at gmail.com
       </A><BR>
    <I>Sat May 21 09:52:35 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="018146.html">[mod_python] GET is slow but POST isn't?
</A></li>
        <LI>Next message: <A HREF="018150.html">[mod_python] telling mod_python to exit its children
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18149">[ date ]</a>
              <a href="thread.html#18149">[ thread ]</a>
              <a href="subject.html#18149">[ subject ]</a>
              <a href="author.html#18149">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>hi

i've been working on a web app framework, and one of the
essential features that i need to work well is to be able to
simply save a new source file (while in debugging mode, set by a
flag in my config file) and for all the modules to be
appropriately reloaded (there is no way i would restart apache
everytime i change the code...).  i'm using lots of 3rd party
libraries and my code is spread out in many packages and modules,
so i found that the trivial reload approaches do not work well.

so thinking i was a smart cookie i've been fiddling quite a bit
and solved a lot of the problems and it pretty much works (but it
wasn't as easy as i thought), except for that occasional rare
case where something strange still happens (due to some residual
global state in the modules i didn't unload or what-not).  now i
could spend more time on that bug, but i've already spent a
considerable amount of time with this, and the solution is not
very clean anyway (fiddling with the sys.modules by hand...) and
i'm getting the feeling that taking a lower-level approach might
just be cleaner and easier.

Some questions:

1. in a handler, is there a way to tell apache to exit the child
   currently handling the request and to rerun the request it
   another/a new child?

2. or is there a way to tell apache to exit all its pool of
   children, so that new request only get handled by new/fresh
   child processes?


I saw REQ_EXIT in apache.py, but it doesn't appear anywhere else
in the code, and is marked legacy.  Also, according to the
documentation, returning DECLINED doesn't appear to indicate that
apache will retry the same handler on a different child, but
I may be reading wrong.

any pointers appreciated.

cheers,

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018146.html">[mod_python] GET is slow but POST isn't?
</A></li>
	<LI>Next message: <A HREF="018150.html">[mod_python] telling mod_python to exit its children
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18149">[ date ]</a>
              <a href="thread.html#18149">[ thread ]</a>
              <a href="subject.html#18149">[ subject ]</a>
              <a href="author.html#18149">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
