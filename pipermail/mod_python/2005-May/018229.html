<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] How to call a webpage on the same server?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20How%20to%20call%20a%20webpage%20on%20the%20same%20server%3F&In-Reply-To=c298f2d70505301531383c1f59%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018228.html">
   <LINK REL="Next"  HREF="018230.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] How to call a webpage on the same server?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>berry groenendijk</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20How%20to%20call%20a%20webpage%20on%20the%20same%20server%3F&In-Reply-To=c298f2d70505301531383c1f59%40mail.gmail.com"
       TITLE="[mod_python] How to call a webpage on the same server?">berry.groenendijk at gmail.com
       </A><BR>
    <I>Tue May 31 17:29:10 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="018228.html">[mod_python] How to call a webpage on the same server?
</A></li>
        <LI>Next message: <A HREF="018230.html">[mod_python] Capturing PSP output
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18229">[ date ]</a>
              <a href="thread.html#18229">[ thread ]</a>
              <a href="subject.html#18229">[ subject ]</a>
              <a href="author.html#18229">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Nicolas,

I have been doing some experimenting. Like you said I just called 
urllib2.urlopen. Still this is way too slow. To get the response it takes 
about 40 milliseconds.

I then ran a little Python script that calls the same page, using the 
method. I started this script on the command line. When I call that page it 
takes about 21 milliseconds. About twice as fast.

When I run Siege against page A it reaches about 42 transactions/sec, so 
about 20 milliseconds per request.

Then I build a page that uses Sarissa and and the httprequest object. So, 
first the HTML page gets loaded. On that page is a button which fires a 
javascript. That script loads the same page A. It then loads an xslt file 
and then does a conversion. Despite the conversion this takes less than 4(!) 
milliseconds.

Conclusion: hmmm, difficult. Seems that urllib2.urlopen isn't that slow 
after all. Still it looks like it is twice as slow called from within 
mod_python compared to when you fetch that same page via Python in a 
terminal window. What does surprise me is how quick the client side 
javascript code is. It could be that my time measurement there isn't that 
accurate. But, it also &quot;feels&quot; very quick. Perhaps this has something to do 
with the browser (Firefox) keeping connections open to the webserver.

Hmmm, I have to rethink what I am trying to accomplish here... I will have 
to do some more experimenting.

Thanks very much for your help!

Berry.

On 5/31/05, Nicolas Lehuen &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">nicolas.lehuen at gmail.com</A>&gt; wrote:
&gt;<i> 
</I>&gt;<i> Hi Berry,
</I>&gt;<i> 
</I>&gt;<i> First check whether this is really due to the way you call your page.
</I>&gt;<i> Don't parse the page, just call urllib2.urlopen and see what happens.
</I>&gt;<i> 
</I>&gt;<i> Regards,
</I>&gt;<i> Nicolas
</I>&gt;<i> 
</I>&gt;<i> 2005/5/30, berry groenendijk &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">berry.groenendijk at gmail.com</A>&gt;:
</I>&gt;<i> &gt; Hi!
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Strictly speaking this is not a mod_python question. Please accept my
</I>&gt;<i> &gt; apologies. Still I hope somebody can give me some hints.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I am using mod_python 3.1.3 with mod_python servlets. I am experimenting
</I>&gt;<i> &gt; with a REST-style interface to my website.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; This is the situation. Page A in my website returns a RSS XML file. I 
</I>&gt;<i> want
</I>&gt;<i> &gt; to use this output on page B in the same website. To present page B to 
</I>&gt;<i> the
</I>&gt;<i> &gt; user I do a little server side conversion to HTML. The problem is: this 
</I>&gt;<i> is
</I>&gt;<i> &gt; very slow! My guess is that it has to do with the way I call page A.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Here is part of the code of page B:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; import os
</I>&gt;<i> &gt; import urllib
</I>&gt;<i> &gt; from cElementTree import iterparse
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; import _SitePage as sitepage
</I>&gt;<i> &gt; import _Config as config
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; class keywordshtml2(sitepage.SitePage):
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; def write_content(self):
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; url_keywords = &quot;<A HREF="http://%s/keywords&quot;">http://%s/keywords&quot;</A> % self.req.hostname
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; self.writeln('&lt;h1&gt;List of articles by keyword&lt;/h1&gt;')
</I>&gt;<i> &gt; self.writeln(&quot;&lt;p&gt;Available keywords:&quot;)
</I>&gt;<i> &gt; for event, elem in iterparse(urllib.urlopen(url_keywords)):
</I>&gt;<i> &gt; if elem.tag == &quot;item&quot;:
</I>&gt;<i> &gt; self.writeln(&quot;&lt;a href='#%(x)s'&gt;%(x)s&lt;/a&gt;, &quot; % ({'x':
</I>&gt;<i> &gt; elem.findtext(&quot;title&quot;)}))
</I>&gt;<i> &gt; elem.clear()
</I>&gt;<i> &gt; self.writeln(&quot;&lt;/p&gt;&quot;)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Is there a better way to call page A from within page B?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; --
</I>&gt;<i> &gt; Berry Groenendijk
</I>&gt;<i> &gt; <A HREF="http://www.bersie.de">http://www.bersie.de</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Mod_python mailing list
</I>&gt;<i> &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> 
</I>


-- 
Berry Groenendijk
<A HREF="http://www.bersie.de">http://www.bersie.de</A>
Skype: berryg
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20050531/54664ebd/attachment.html">http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20050531/54664ebd/attachment.html</A>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018228.html">[mod_python] How to call a webpage on the same server?
</A></li>
	<LI>Next message: <A HREF="018230.html">[mod_python] Capturing PSP output
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18229">[ date ]</a>
              <a href="thread.html#18229">[ thread ]</a>
              <a href="subject.html#18229">[ subject ]</a>
              <a href="author.html#18229">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
