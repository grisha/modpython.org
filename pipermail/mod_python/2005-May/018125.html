<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] psp module
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20psp%20module&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018124.html">
   <LINK REL="Next"  HREF="018126.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] psp module</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20psp%20module&In-Reply-To="
       TITLE="[mod_python] psp module">grahamd at dscpl.com.au
       </A><BR>
    <I>Wed May 18 21:12:19 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="018124.html">[mod_python] psp module
</A></li>
        <LI>Next message: <A HREF="018126.html">[mod_python] psp module
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18125">[ date ]</a>
              <a href="thread.html#18125">[ thread ]</a>
              <a href="subject.html#18125">[ subject ]</a>
              <a href="author.html#18125">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Wouter van Marle wrote ..
&gt;<i> Hi all,
</I>&gt;<i> 
</I>&gt;<i> Is there a way to catch the html code as produced by the psp module?
</I>&gt;<i> 
</I>&gt;<i> I mean: normally one does something like:
</I>&gt;<i> page = psp.PSP(req,  &quot;template.psp&quot;)
</I>&gt;<i> page.run({&quot;spam&quot;: 1, &quot;eggs&quot;: 5})
</I>&gt;<i> and the page is converted to html, and displayed in the browser.
</I>&gt;<i> 
</I>&gt;<i> Now is it possible to catch this html code in a string, instead of
</I>&gt;<i> sending it to the browser? This as I'd like to use the psp templating
</I>&gt;<i> for creating an e-mail body.
</I>
At first glance there seems to be no feature to do it. What you might
try (I haven't), is that presuming that all output is generated through
calls to req.write(), is to substitute the &quot;req&quot; object with a wrapper
class that provides its own req.write() which is actually the write()
method on a StringIO object.

class Wrapper:

  def __init__(self,req,write):
    self.__req = req
    self.write = write

  def __getattr__(self,name):
    return getattr(self,__req,name)

s = StringIO.StringIO()

page = psp.PSP(Wrapper(req,s.write),  &quot;template.psp&quot;)
page.run({&quot;spam&quot;: 1, &quot;eggs&quot;: 5})

req.log_error(s.getvalue())

If you were also stashing stuff in &quot;req&quot; from the PSP page, would also
need a __setattr__() method in the wrapper.

Graham
  
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018124.html">[mod_python] psp module
</A></li>
	<LI>Next message: <A HREF="018126.html">[mod_python] psp module
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18125">[ date ]</a>
              <a href="thread.html#18125">[ thread ]</a>
              <a href="subject.html#18125">[ subject ]</a>
              <a href="author.html#18125">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
