<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] apache2 + mod_python + mod_php segfaults
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20apache2%20%2B%20mod_python%20%2B%20mod_php%20segfaults&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018164.html">
   <LINK REL="Next"  HREF="018167.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] apache2 + mod_python + mod_php segfaults</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20apache2%20%2B%20mod_python%20%2B%20mod_php%20segfaults&In-Reply-To="
       TITLE="[mod_python] apache2 + mod_python + mod_php segfaults">grahamd at dscpl.com.au
       </A><BR>
    <I>Tue May 24 00:16:05 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="018164.html">SSL-data access from verious handlers. was: Re:[mod_python]
	problem w/ authen handler
</A></li>
        <LI>Next message: <A HREF="018167.html">[mod_python] mod_python doesn't parse python scripts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18166">[ date ]</a>
              <a href="thread.html#18166">[ thread ]</a>
              <a href="subject.html#18166">[ subject ]</a>
              <a href="author.html#18166">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Martin Lesser wrote ..
&gt;<i> Graham Dumpleton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">grahamd at dscpl.com.au</A>&gt; writes:
</I>&gt;<i> 
</I>&gt;<i> &gt; In summary it is generally because parts of mod_php have been compiled
</I>&gt;<i> &gt; against different versions of shared libraries than mod_python.
</I>&gt;<i> 
</I>&gt;<i> Ok. But this does not explain whether this is a bug in apache or
</I>&gt;<i> mod_php. For me it remains confusing that one (apache-) module may cause
</I>&gt;<i> a segfault in apache due to the existance of another module.
</I>
It isn't a bug in mod_php or Apache or mod_python.

The problem is usually because different versions of some third party
library have been used when compiling parts of Apache, mod_python
or mod_php. When everything is run up, the shared library which is
found first is that which is used for all bits with the dependency on it.
If these different library versions have different structure layouts, when
a module is initialised which has a different concept of structure layout
than the actual shared library being used, then the code can crash.

Thus it is an environment issue related to compilation of the software
and not a bug in any. Ie., Win32 DLL hell on Linux.

An example of shared library problems, although probably not in your
case is that Python 2.4 embeds a copy of libexpat equivalent to 1.95.8.
If your system has a older shared library version of expat and something
in mod_php compiles against it, you will get a crash when you use any
XML module in Python.

The FAQ entry quoted also mentions other cases such as problems with
MySQL and libpng.

In your case, since the problem went away when you took CDB support
out of PHP at the same time as using a CDB module in Python, it is possibly
the shared library used for CDB when compiling mod_php was different
to that when the CDB module in Python was built.

Graham

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018164.html">SSL-data access from verious handlers. was: Re:[mod_python]
	problem w/ authen handler
</A></li>
	<LI>Next message: <A HREF="018167.html">[mod_python] mod_python doesn't parse python scripts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18166">[ date ]</a>
              <a href="thread.html#18166">[ thread ]</a>
              <a href="subject.html#18166">[ subject ]</a>
              <a href="author.html#18166">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
