<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] StringField instead of Field object on file upload
	form with method=&quot;get&quot;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20StringField%20instead%20of%20Field%20object%20on%20file%20upload%0A%09form%20with%20method%3D%22get%22&In-Reply-To=427F86A7.4030009%40phoenux.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018016.html">
   <LINK REL="Next"  HREF="018017.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] StringField instead of Field object on file upload
	form with method=&quot;get&quot;</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Bram</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20StringField%20instead%20of%20Field%20object%20on%20file%20upload%0A%09form%20with%20method%3D%22get%22&In-Reply-To=427F86A7.4030009%40phoenux.org"
       TITLE="[mod_python] StringField instead of Field object on file upload
	form with method=&quot;get&quot;">bram-lists at phoenux.org
       </A><BR>
    <I>Mon May  9 11:59:51 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="018016.html">[mod_python] StringField instead of Field object on file upload
	form with method=&quot;get&quot;
</A></li>
        <LI>Next message: <A HREF="018017.html">[mod_python] IOError: Write failed, client closed connection.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18018">[ date ]</a>
              <a href="thread.html#18018">[ thread ]</a>
              <a href="subject.html#18018">[ subject ]</a>
              <a href="author.html#18018">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Ok. Just in case anyone else does something silly like I did here is 
what I learned. (redundant info for many, sorry ;) )

1. mod_python.publisher ingests form args into a FieldStorage( ) object 
stuffed into req.form on either form method, post or get.
2. If you use the form method post, formdata = 
mod_python.util.FieldStorage(req) will return empty.
3. If you use the form method get, formdata = 
mod_python.util.FieldStorage(req) will return with values, as will 
req.form. However, file upload form fields return as StringField objects 
that are the string version of the filename instead of the file object. Duh!
4. It is better to do it right and use post, and req.form

Thanks,
Bram Swenson.

Bram wrote:

&gt;<i> Duh,
</I>&gt;<i>
</I>&gt;<i> Sorry I found my own answer. req.form
</I>&gt;<i>
</I>&gt;<i> I apologize for this question.
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i> Bram Swenson.
</I>&gt;<i>
</I>&gt;<i> Bram wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Hello all,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I have a HTML form that look similar to this:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &lt;form action=&quot;/py/upload_form&quot; enctype=&quot;multipart/form-data&quot; 
</I>&gt;&gt;<i> method=&quot;get&quot;&gt;
</I>&gt;&gt;<i>      &lt;input type=&quot;hidden&quot; name=&quot;user_id&quot; value=&quot;&lt;%=user_id%&gt;&quot;&gt;&lt;/input&gt;
</I>&gt;&gt;<i>    # PSP style template fills in user_id
</I>&gt;&gt;<i>      &lt;li&gt;Select your file :  &lt;input type=&quot;file&quot; 
</I>&gt;&gt;<i> name=&quot;filedata&quot;&gt;&lt;/input&gt; *&lt;/li&gt;
</I>&gt;&gt;<i>      &lt;li class=&quot;upload_button&quot;&gt;&lt;input type=&quot;submit&quot; value=&quot;Upload&quot; 
</I>&gt;&gt;<i> name=&quot;upload&quot; id=&quot;upload&quot;&gt;&lt;/input&gt;&lt;/li&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &lt;/form&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Then the upload_form.py file uses mod_python.util.FieldStorage to 
</I>&gt;&gt;<i> access the form values:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> from mod_python import util
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> def handler(req):
</I>&gt;&gt;<i>    form_values = util.FieldStorage(req)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> There are two things I am not understanding. One is that when the 
</I>&gt;&gt;<i> form method is set to post (as I think it should be) form_values is 
</I>&gt;&gt;<i> empty. But when I use &quot;get&quot; as I have shown above, the form_values 
</I>&gt;&gt;<i> object exists and has the correct data. This then leads to my second 
</I>&gt;&gt;<i> problems which is that when I use this method, 
</I>&gt;&gt;<i> form_values[&quot;filedata&quot;] is StringField( ) object  instead of Field( ) 
</I>&gt;&gt;<i> object as excpected.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I mention both of the issues together as I suspect they are related. 
</I>&gt;&gt;<i> I suspect also that I a missing something simple, but I cannot put my 
</I>&gt;&gt;<i> finger on it.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks in advance,
</I>&gt;&gt;<i> Bram Swenson.
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Mod_python mailing list
</I>&gt;&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018016.html">[mod_python] StringField instead of Field object on file upload
	form with method=&quot;get&quot;
</A></li>
	<LI>Next message: <A HREF="018017.html">[mod_python] IOError: Write failed, client closed connection.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18018">[ date ]</a>
              <a href="thread.html#18018">[ thread ]</a>
              <a href="subject.html#18018">[ subject ]</a>
              <a href="author.html#18018">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
