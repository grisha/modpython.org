<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] problem w/ authen handler
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20problem%20w/%20authen%20handler&In-Reply-To=5.2.1.1.0.20050519152630.0226f658%40mail.comune.grosseto.it">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018139.html">
   <LINK REL="Next"  HREF="018143.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] problem w/ authen handler</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20problem%20w/%20authen%20handler&In-Reply-To=5.2.1.1.0.20050519152630.0226f658%40mail.comune.grosseto.it"
       TITLE="[mod_python] problem w/ authen handler">grahamd at dscpl.com.au
       </A><BR>
    <I>Thu May 19 18:52:10 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="018139.html">[mod_python] problem w/ authen handler
</A></li>
        <LI>Next message: <A HREF="018143.html">[mod_python] problem w/ authen handler
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18140">[ date ]</a>
              <a href="thread.html#18140">[ thread ]</a>
              <a href="subject.html#18140">[ subject ]</a>
              <a href="author.html#18140">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 20/05/2005, at 12:27 AM, Bud P. Bruegger wrote:

&gt;<i> I'm a beginner and hope someone can straighten me out.
</I>&gt;<i>
</I>&gt;<i> I am trying to write a simple handler that clicks in after mod-ssl has 
</I>&gt;<i> requested a certificate from the client.  Depending on the type of 
</I>&gt;<i> client token (European eID cards), I'd like the handler to look at the 
</I>&gt;<i> client's subject DN derive (by string manipulation or by lookup) a 
</I>&gt;<i> nationally unique ID for the card holder.
</I>&gt;<i>
</I>&gt;<i> Sounds simple enough--but I can't get it to work.  I tried both, the 
</I>&gt;<i> authen and the authz handlers.  But neither from mod-ssl's 
</I>&gt;<i> +fakeBasicAuth nor from the handlers req.user = 'xxx' do I get a 
</I>&gt;<i> REMOTE_USER env variable set.  Also the test evironment variable that 
</I>&gt;<i> I try to set in the authen/authz handler doesn't have effect.
</I>
Normally the authenhandler will only be called if the Apache 
configuration has
something like:

   AuthType Basic
   AuthName &quot;Restricted Files&quot;
   AuthUserFile /Users/grahamd/Sites/auth/pwdb

Ie., it is triggered of the presence of these special Auth options. 
Similarly,
the authzhandler only get called if other appropriate options for it are
defined. Your SSL stuff doesn't seem to fit under that model and so the
handlers may simply not be getting called.

&gt;<i> Does this possibly mean that the authen/authz handlers are not called 
</I>&gt;<i> at all in my configuration?  Should I use a different handler and 
</I>&gt;<i> which?  Or did I simply mess up something else?
</I>
Try adding a req.log_error() call in the handlers to see if they get 
called or not.
Message will be in the Apache error log file.

Does your code work if you move what you have in the authenhandler into 
the start
of your actual handler function? Ie., does the concept at least work?

As a fudge, you could always stick it in the accesshandler, which from 
memory is
always called if defined.

Graham

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018139.html">[mod_python] problem w/ authen handler
</A></li>
	<LI>Next message: <A HREF="018143.html">[mod_python] problem w/ authen handler
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18140">[ date ]</a>
              <a href="thread.html#18140">[ thread ]</a>
              <a href="subject.html#18140">[ subject ]</a>
              <a href="author.html#18140">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
