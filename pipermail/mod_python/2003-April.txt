From neel at mediapulse.com  Tue Apr  1 10:36:53 2003
From: neel at mediapulse.com (Michael C. Neel)
Date: Fri Jan  9 21:47:19 2004
Subject: [mod_python] RE: 1 page Not Found - every 4 page refresh cycle?
Message-ID: <C0FC22C08B82074A88B50061764157775C14@johnson.mediapulse.net>

Forwarding this over to the mod_python list, as I am also have some
weird issues we have been unable to track the cause of.  I recently
rolled out a fixup handler in mod_python to a host of server, and now,
randomly, you will get the error described below.  All are mod_python
2.7.8 and various RH 7.x with Apache 1.3.x. I don't use publisher.
Anyone seeing something like this?

Mike

-----Original Message-----
From: Juan Carlos Rodrigo Garcia [mailto:jrodrigo@xpyro.com] 
Sent: Tuesday, April 01, 2003 8:03 AM
To: python-dev@httpd.apache.org
Subject: 1 page Not Found - every 4 page refresh cycle?


Hello, I can't suscribe to mod_python-request@modpython.org, and I'm
having a little problem.

I'm using mod_python 3.0.3 and apache 2.0.44.

I set the PythonHandler to mod_python.publisher

Because I want to use mod_python the PHP,ASP,CFUSION way.
Every script does its own work. So this is my apache setup:

<VirtualHost *>
      ServerName www.devel.in
      DirectoryIndex index.py
      AddHandler python-program .py
      PythonHandler mod_python.publisher
      PythonDebug On
</VirtualHost>

I have serveral pages in my web and everything goes well with 
mod_python auth, uploading...

BUT when I browse pages (scripts) with little content (A tiny script
that outputs very small amount of html), then every 
time I refresh four times or so the tiny script I get one:

  Not Found
  The requested URL /search/index.py was not found on this server.

This NEVER happens refreshing scripts that print long listings, or lots
of HTML data.

I've found this behaviour in two different machines...
One running the RedHat 8.0 distro web server (apache 2.0 + mod_python).
And in my personal computer were I've installed varios versions of
apache 2 and mod_python 3, every set-up acted the same way.


I think that there is a problem with mod_python.publisher loading tiny
scripts or showing little output.


Thanks for all your good work.





From neel at mediapulse.com  Tue Apr  1 11:26:37 2003
From: neel at mediapulse.com (Michael C. Neel)
Date: Fri Jan  9 21:47:19 2004
Subject: [mod_python] Why are you using mod_python?
Message-ID: <C0FC22C08B82074A88B50061764157775C15@johnson.mediapulse.net>

I broke perl.  No, not in a preformance way, or in I couldn't do
something in perl.  I found that in larger projects, perl's lack of OO
(and the ease of use of the OO features it does have) really casued
large delays in development.  Also I noticed that code in perl seemed to
be apt to more bugs than code in another language.  Over all I came to
the descision that perl's strength lies in the script, and is not suited
for the application.

I have worked with, and took another look at PHP, but I don't like PHP
on a design level.  I like to have data, design, and logic all
seperated.  PHP doesn't lend itself well to this.  You can make that
work, but too many includes in PHP can result in a big preformance hit.

Python does have a very good set of OO features.  I was also impress in
how cross platform it really was.  Many languages claim this, but you
often find you need to tweak code to make it work.  With Albatross I
found a template system that allowed me to have data, design, and logic
in separate places (I also gained a flexible framework for the logic
part, which was a big plus).

Preformance was a concern, as I had forsaken CGI awhile ago.  I ran some
"hello world" test on my laptop, 1Ghz with 256 Megs.  CGI handled about
100 requests per second, perl and python both ran about 250 request per
second in a "fastCGI" setting, python as a content handler ran about 600
requests per second, PHP 650, and perl 700.  A Native C handler ran
about 1400 requests per second.  C has too long of a development cycle,
and the gains in method were worth the 100 requests per second.

I have since deployed several applications for clients in
mod_python/albatross as well as some personal sites.  Some of these have
been massive projects for very big names.  I am proud to say these have
had no issue in this platform, and I actually feel extreamly confident
in them.  I also like that I can hide the fact the platform so that the
user is even unaware the page is dynamic.  A side project I did that you
can see what I mean is www.fistsofniall.com - this site is all
mod_python/albatross (execption is the formus).

I did see a comment that probably only 1% of the people use a handler,
and instead use a fastcgi.  If this is the case, then it is a shame, as
the benchmarks told me.  How publisher fits in, I don't know - I've
never tried it.  If you look into it, you'll find that writing a handler
is really pretty easy.

Mike

-----Original Message-----
From: Gregory (Grisha) Trubetskoy [mailto:grisha@modpython.org] 
Sent: Friday, March 28, 2003 5:39 PM
To: mod_python@modpython.org
Subject: [mod_python] Why are you using mod_python?



Hello everyone -

As the original author of mod_python I think I'm allowed to jerk
people's chains with this simple question:

Why are you using mod_python?

You can reply on or off list, either is fine. The results, after I get
to mull over them will be published in one way or another.

I've decided to ask the list because I recently realized that I am not
sure I know the answer. Not to say that I don't like mod_python, on the
contrary, I do, but to formulate in words exactly why is rather
difficult. Besides, my opinion is biased anyway :-)

Thanks in advance!

Grisha


_______________________________________________
Mod_python mailing list
Mod_python@modpython.org
http://www.modpython.org/mailman/listinfo/mod_python


From LBerezhny at DevIS.com  Tue Apr  1 12:00:11 2003
From: LBerezhny at DevIS.com (Lex Berezhny)
Date: Fri Jan  9 21:47:19 2004
Subject: [mod_python] Why are you using mod_python?
In-Reply-To: <C0FC22C08B82074A88B50061764157775C15@johnson.mediapulse.net>
References: <C0FC22C08B82074A88B50061764157775C15@johnson.mediapulse.net>
Message-ID: <1049216411.17863.4.camel@hortus>

On Tue, 2003-04-01 at 11:26, Michael C. Neel wrote:
> I did see a comment that probably only 1% of the people use a handler,
> and instead use a fastcgi.  If this is the case, then it is a shame, as
> the benchmarks told me.  How publisher fits in, I don't know - I've
> never tried it.  If you look into it, you'll find that writing a handler
> is really pretty easy.

Most of the responses to Grishas email note that they use mod_python for
its handler. I'm not sure where the 1% comes from.

I also use the handler :-)

In fact, I feel that the handler is much easier to use and even figure
out, than the publisher.

my two cents,

  - lex


From vlindberg at verio.net  Tue Apr  1 10:37:41 2003
From: vlindberg at verio.net (VanL)
Date: Fri Jan  9 21:47:19 2004
Subject: [mod_python] Why are you using mod_python?
In-Reply-To: <1049216411.17863.4.camel@hortus>
References: <C0FC22C08B82074A88B50061764157775C15@johnson.mediapulse.net> <1049216411.17863.4.camel@hortus>
Message-ID: <3E89CE65.60207@verio.net>

>
>
>In fact, I feel that the handler is much easier to use and even figure
>out, than the publisher.
>

Maybe because I started out with Zope, I thought that the publisher 
handler was dead simple.  That is what I am using right now.

VanL


From davidf at sjsoft.com  Wed Apr  2 13:53:01 2003
From: davidf at sjsoft.com (David Fraser)
Date: Fri Jan  9 21:47:19 2004
Subject: [mod_python] Building mod_python installer for Windows
Message-ID: <3E8ACF1D.60109@sjsoft.com>

Hi

I was wondering if anyone could give me tips on how to build the 
mod_python installer for Windows.

Seems that the dist subdirectory contains stuff to build it using 
distutils, but there was a comment that it should only work in Python 
2.3 because of post install scripts. Is this true? Does this affect the 
build machine only or the target machine too?

Secondly it seems to need to have had configure run. This brings up more 
general build issues. I have mingw, MSys, cygwin installed. However 
configure wants apxs which doesn't come with my Apache 2.0 build for 
Windows, and presumably I need a source tree for Apache. Do I have to 
actually build Apache for Windows, or is just the source sufficient?

Thanks
David


From big.stick at bol.com.br  Wed Apr  2 12:07:14 2003
From: big.stick at bol.com.br (Big Stick)
Date: Fri Jan  9 21:47:19 2004
Subject: [mod_python] vs 3.0.3 compiling issues
Message-ID: <11510490264.20030402120714@bol.com.br>

Hello,

I?m using Red Hat 8, httpd 2.0.40, mod_python 3.0.0 and Python
2.2.2. Everything is working, but I?m experiencing this error when I
try to compile mod_python 3.0.3 (needed for other apps):

...
checking your blood pressure... a bit high, but we can proceed
checking whether apxs is available
checking for --with-apxs... no
checking for apxs in /usr/local/apache/sbin... no
checking for apxs in your PATH... checking for apxs... no
configure: warning: **** apxs was not found, DSO compilation will not be available.
configure: warning: **** You can use --with-apxs to specify where your apxs is.
configure: error: Neither static nor DSO option available, there is no point in continuing.
[r@r r] #

Any hints on this?

Thanks in advance.
- stick


From manfred.stienstra at dwerg.net  Wed Apr  2 17:35:40 2003
From: manfred.stienstra at dwerg.net (Manfred Stienstra)
Date: Fri Jan  9 21:47:19 2004
Subject: [mod_python] vs 3.0.3 compiling issues
In-Reply-To: <11510490264.20030402120714@bol.com.br>
References: <11510490264.20030402120714@bol.com.br>
Message-ID: <200304021735.40618.manfred.stienstra@dwerg.net>

On Wednesday 02 April 2003 17:07, Big Stick wrote:
> Any hints on this?

locate apxs

./configure --with-apxs="PATH TO APXS"

Manfred

From grisha at modpython.org  Wed Apr  2 11:53:03 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:47:19 2004
Subject: [mod_python] Building mod_python installer for Windows
In-Reply-To: <3E8ACF1D.60109@sjsoft.com>
Message-ID: <20030402114701.V45547-100000@eden.ispol.com>

To build the windows installer, you have to first compile mod_python.so
using MS VC++ (there is a project file in the src directory), then you
copy the mod_python.so to a UNIX server. The actual installer,
paradoxically, has to be build on UNIX, and it's as simple as cd-ing into
dist and running "make windist". It *does* require python 2.3 (but only
to build the installer, the actual mod_python.so can be build with any
version of Python above 2.2).

I have no idea if or how this would work on cygwin though.

Grisha

On Wed, 2 Apr 2003, David Fraser wrote:

> Hi
>
> I was wondering if anyone could give me tips on how to build the
> mod_python installer for Windows.
>
> Seems that the dist subdirectory contains stuff to build it using
> distutils, but there was a comment that it should only work in Python
> 2.3 because of post install scripts. Is this true? Does this affect the
> build machine only or the target machine too?
>
> Secondly it seems to need to have had configure run. This brings up more
> general build issues. I have mingw, MSys, cygwin installed. However
> configure wants apxs which doesn't come with my Apache 2.0 build for
> Windows, and presumably I need a source tree for Apache. Do I have to
> actually build Apache for Windows, or is just the source sufficient?
>
> Thanks
> David
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From grisha at modpython.org  Wed Apr  2 11:54:58 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:47:19 2004
Subject: [mod_python] vs 3.0.3 compiling issues
In-Reply-To: <200304021735.40618.manfred.stienstra@dwerg.net>
Message-ID: <20030402115346.S45547-100000@eden.ispol.com>

I'd also recommend a later version of Apache - 2.0.40 is ancient.

Grisha

On Wed, 2 Apr 2003, Manfred Stienstra wrote:

> On Wednesday 02 April 2003 17:07, Big Stick wrote:
> > Any hints on this?
>
> locate apxs
>
> ./configure --with-apxs="PATH TO APXS"
>
> Manfred
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From big.stick at bol.com.br  Wed Apr  2 15:15:31 2003
From: big.stick at bol.com.br (Big Stick)
Date: Fri Jan  9 21:47:19 2004
Subject: [mod_python] vs 3.0.3 compiling issues
In-Reply-To: <20030402115346.S45547-100000@eden.ispol.com>
References: <20030402115346.S45547-100000@eden.ispol.com>
Message-ID: <4121787518.20030402151531@bol.com.br>

Em 2/4/2003 ?s 13:54, Manfred Stienstra escreveu:
>
> locate apxs
>
> ./configure --with-apxs="PATH TO APXS"

It took me a while to find out that apxs is provided by httpd-devel,
and httpd-devel was not installed here. Did that and now everything
seems to be working.

Thanks a lot.
- stick


From remi at python-hosting.com  Thu Apr  3 18:08:02 2003
From: remi at python-hosting.com (Remi Delon)
Date: Fri Jan  9 21:47:19 2004
Subject: [mod_python] [ANN] Python-Hosting.com: new hosting provider specialized in Python
Message-ID: <NFBBIBODGLHPEGPDOAGKIEIBDLAA.remi@python-hosting.com>

Hello everyone,

I am pleased to announce http://python-hosting.com, a new hosting provider
specialized in Python.
We support most Python web tools, including mod_python, Zope, Plone,
WebWare, CherryPy, ...
You can run your mod_python site for 15$/month.


Remi Delon     remi@remove-me.python-hosting.com
----------------------
Specialized python hosting: http://www.python-hosting.com
Python application server: http://www.cherrypy.org
Free CherryPy hosting: http://www.freecherrypy.org
----------------------




From chris at sebis.com  Thu Apr  3 15:31:12 2003
From: chris at sebis.com (Chris Johnson)
Date: Fri Jan  9 21:47:19 2004
Subject: [mod_python] newbie can't start apache2.0.44 with mod_python3.0.3
Message-ID: <3E8CA820.6030606@sebis.com>

hi group,
    I'm having a problem starting apache2.0.44. I added the line:

LoadModule python_module      modules/mod_python.so

    to my httpd.conf. and when I run 'apachectl start' it says:

Cannot load /httpd/apache/modules/mod_python.so into server: /httpd/apache/modules/mod_python.so: Undefined symbol "pthread_sigmask"

So did I miss a step. I've looked over the FAQ contents and googled for 
the error but haven't been able to find any mention of this error.
thanks,
chrisj


From grisha at modpython.org  Thu Apr  3 17:17:48 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:47:19 2004
Subject: [mod_python] newbie can't start apache2.0.44 with mod_python3.0.3
In-Reply-To: <3E8CA820.6030606@sebis.com>
Message-ID: <20030403171703.L80044-100000@eden.ispol.com>

If this is on FreeBSD? There is a note about it in the README.

Grisha

On Thu, 3 Apr 2003, Chris Johnson wrote:

> hi group,
>     I'm having a problem starting apache2.0.44. I added the line:
>
> LoadModule python_module      modules/mod_python.so
>
>     to my httpd.conf. and when I run 'apachectl start' it says:
>
> Cannot load /httpd/apache/modules/mod_python.so into server: /httpd/apache/modules/mod_python.so: Undefined symbol "pthread_sigmask"
>
> So did I miss a step. I've looked over the FAQ contents and googled for
> the error but haven't been able to find any mention of this error.
> thanks,
> chrisj
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From ron at rwsoft.ca  Thu Apr  3 22:42:50 2003
From: ron at rwsoft.ca (Ron Wills)
Date: Fri Jan  9 21:47:19 2004
Subject: [mod_python] Session Tracking
Message-ID: <3E8D1B5A.40001@rwsoft.ca>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hello All

~  There's something that I can't seem to find the in the docs. Currently
I have a set of PHP libs that I use, but was hoping to port my
authenication classes to mod_python. This could simplify things for me,
but I can seem to find anything to do session tracking (with cookies or
so on). Any help would be appretiated.

- --
Ron Wills
RW Software - Owner
http://www.rwsoft.ca
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.6 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQE+jRtZYOHhBYo0q6cRAitPAJ419pftd5SJO6pQUGurlsublJRdywCgrJ3O
dTvskmYzFvxQER9yYVokhW4=
=lSLk
-----END PGP SIGNATURE-----


From davidf at sjsoft.com  Fri Apr  4 08:21:06 2003
From: davidf at sjsoft.com (David Fraser)
Date: Fri Jan  9 21:47:19 2004
Subject: [mod_python] Session Tracking
In-Reply-To: <3E8D1B5A.40001@rwsoft.ca>
References: <3E8D1B5A.40001@rwsoft.ca>
Message-ID: <3E8D2452.7010803@sjsoft.com>

Ron Wills wrote:

> Hello All
>
> ~  There's something that I can't seem to find the in the docs. Currently
> I have a set of PHP libs that I use, but was hoping to port my
> authenication classes to mod_python. This could simplify things for me,
> but I can seem to find anything to do session tracking (with cookies or
> so on). Any help would be appretiated.
>
I've just done this for our application for mod_python.
Basically we use the getcookie and setcookie functions below to get and 
set the cookie
Then we have session objects, each of which has a unique session string, 
which is set in the cookie.
We have a global sessioncache dictionary that looks up a session object 
based on the session string.
We also use this for handling user login etc, so its a bit more 
complicated, but that's the basic
idea and you should be able to use the same idea.

When doing this, I was wondering whether some cookie methods could be 
added to the request object,
since that's where they seem to belong? Could pass in the class of 
cookie you want to use etc...
Any thoughts?

David

def getcookie(req):
  """Reads in any cookie info from the request"""
  try:
    cookiestring = req.headers_in["Cookie"]
  except:
    cookiestring = {}
  cookie = Cookie.SimpleCookie()
  cookie.load(cookiestring)
  cookiedict = {}
  for key, morsel in cookie.iteritems():
    cookiedict[key] = morsel.value
  return cookiedict

def setcookie(req, cookiedict):
  """Puts the bits from the cookiedict into Morsels, sets the req cookie"""
  # construct the cookie from the cookiedict
  cookie = Cookie.SimpleCookie()
  for key, value in cookiedict.iteritems():
    cookie[key] = value
  # add the cookie headers to req.headers_out
  for key, morsel in cookie.iteritems():
    req.headers_out.add('Set-Cookie', morsel.OutputString())




From gnb at itga.com.au  Fri Apr  4 16:38:57 2003
From: gnb at itga.com.au (Gregory Bond)
Date: Fri Jan  9 21:47:19 2004
Subject: [mod_python] Session Tracking 
In-Reply-To: Your message of Thu, 03 Apr 2003 22:42:50 -0700.
Message-ID: <200304040638.QAA04290@lightning.itga.com.au>

> but I can seem to find anything to do session tracking (with cookies or
> so on). Any help would be appretiated.

I got sick of this question so I made an FAQ entry!

	http://www.modpython.org/FAQ/faqw.py?req=show&file=faq03.008.htp




From mike.looijmans at asml.com  Fri Apr  4 08:40:24 2003
From: mike.looijmans at asml.com (Mike Looijmans)
Date: Fri Jan  9 21:47:19 2004
Subject: [mod_python] Session Tracking
Message-ID: <01c2fa75$12017c00$926a1e6e@wsasd464>

I use the following trick to use the standard Cookie class in mod_python:

##
req.headers_out.add('Set-Cookie', cookies.output(header='',
sep='\r\nSet-Cookie:'))
##

By omitting the first header, and setting the "separator" to "Set-Cookie:' it
actually may add more than just one header here, but who cares...

Actually, I feel that Cookie should provide some method of access to the
individual cookie strings. And a Request.add_cookies(...) method would be even
better (mod_python 3.0.5?):

##
cookies = Cookie.SmartCookie()
...
req.add_cookies(cookies)
##


--
Mike Looijmans
Private: http://www.milosoftware.com

-----Original Message-----
...
>When doing this, I was wondering whether some cookie methods could be
>added to the request object,
>since that's where they seem to belong? Could pass in the class of
>cookie you want to use etc...
>Any thoughts?
...


From Paul.Moore at atosorigin.com  Fri Apr  4 11:53:20 2003
From: Paul.Moore at atosorigin.com (Moore, Paul)
Date: Fri Jan  9 21:47:20 2004
Subject: [mod_python] Problem with mod_python.cgihandler in Python 2.2?
Message-ID: <16E1010E4581B049ABC51D4975CEDB88619A2D@UKDCX001.uk.int.atosorigin.com>

I just tried out a CGI script under the cgihandler with mod_python 3.0.3.

I got an error as follows (wrapped for readability):

[Fri Apr 04 11:23:59 2003] [error] [client 127.0.0.1]
PythonHandler mod_python.cgihandler:
Traceback (most recent call last): 
[Fri Apr 04 11:23:59 2003] [error] [client 127.0.0.1]
PythonHandler mod_python.cgihandler:
File "C:\Python22\lib\site-packages\mod_python\apache.py",
line 335, in HandlerDispatch
    result = object(req)
[Fri Apr 04 11:23:59 2003] [error] [client 127.0.0.1]
PythonHandler mod_python.cgihandler:
File "C:\Python22\lib\site-packages\mod_python\cgihandler.py",
line 140, in handler
    apache.restore_nocgi(env, si, so)
[Fri Apr 04 11:23:59 2003] [error] [client 127.0.0.1]
PythonHandler mod_python.cgihandler:
File "C:\Python22\lib\site-packages\mod_python\apache.py",
line 764, in restore_nocgi
    for k in osenv: 

It looks to me like the code at line 764 in apache.py is wrong -

    for k in osenv:
        del osenv[k]

should be

    for k in osenv.keys():
        del osenv[k]

Otherwise, you're modifying the osenv dictionary while you're
iterating over it. Python 2.2.2 seems to have made this an error,
rather than letting it pass (and possibly giving incorrect
results).

At least, I made the above change, and started getting errors from
my script and Apache config, rather than from mod_python :-)

Paul.


From cmulcahy-modpython at avesi.com  Fri Apr  4 10:18:36 2003
From: cmulcahy-modpython at avesi.com (cmulcahy-modpython@avesi.com)
Date: Fri Jan  9 21:47:20 2004
Subject: [mod_python] FAQ
Message-ID: <20030404151836.26928.qmail@zulu.avenirsolutions.com>

How about an index page for "http://www.modpython.org/FAQ" 

Modpython's greatest weakness is a sparseness of documentation
and a lack of explanation/evangelism for the handler model. 

For general apache-handler enlightenment one must often look
for books/google-searches on mod_perl and adapt as necessary. 

mulc

From the_edge2020 at hotmail.com  Sun Apr  6 03:53:44 2003
From: the_edge2020 at hotmail.com (Tommy !!)
Date: Fri Jan  9 21:47:20 2004
Subject: [mod_python] Import Issues
Message-ID: <F46Y7ZggDttW3SC7g4Z0002e234@hotmail.com>

Hi all,

Just curious as to why (by design?) mod_python does not allow one to import 
modules in the same directory as the executing script - instead you have to 
resort to altering sys.path inside each script in order to get it importing 
correctly.

This is an issue if you don't have access to the web server to modify 
httpd.conf and .htaccess files are disabled/limited. Additionally, I may not 
have access to the site-packages directory, or any other directory, for that 
matter, from which my script could import reusable components.

I find this makes it really awkward to code anything above a single file 
Python script (e.g. I'm using a session handling mechanism specific to a 
single web application). Using os.getcwd() seems to indicate that the cwd 
when executing a script with mod_python is my Apache2 directory.

This behaviour occurs on Apache 2.0.43, mod_python 3.0.3, Linux AND Windows.

Am I missing something simple?

Excuse me if this didn't make much sense, it's 4am here :)

Thanks in advance.

Regards,
Tom L


_________________________________________________________________
Hotmail now available on Australian mobile phones. Go to  
http://ninemsn.com.au/mobilecentral/hotmail_mobile.asp


From mike_verdone at shaw.ca  Sat Apr  5 11:20:26 2003
From: mike_verdone at shaw.ca (Mike Verdone)
Date: Fri Jan  9 21:47:20 2004
Subject: [mod_python] Import Issues
In-Reply-To: <F46Y7ZggDttW3SC7g4Z0002e234@hotmail.com>
References: <F46Y7ZggDttW3SC7g4Z0002e234@hotmail.com>
Message-ID: <200304051120.26133.mike_verdone@shaw.ca>

On April 5, 2003 10:53 am, Tommy !! wrote:
> Hi all,
>
> Just curious as to why (by design?) mod_python does not allow one to import
> modules in the same directory as the executing script - instead you have to
> resort to altering sys.path inside each script in order to get it importing
> correctly.
>
> This is an issue if you don't have access to the web server to modify
> httpd.conf and .htaccess files are disabled/limited. Additionally, I may
> not have access to the site-packages directory, or any other directory, for
> that matter, from which my script could import reusable components.
>

The main problem is that mod_python doesn't know what directory it's in when 
it executes a script except in two cases (as far as I can tell):

1. You put the AddHandler directive in the .htaccess file in that directory.

2. You enclose the AddHandler directive in a <Directory> block specifying the 
full path in apache.conf.

Otherwise mod_python has no idea where it's really executing from, and seems 
to default to the apache dir. If your administrator has restricted .htaccess 
and won't set up apache.conf for you, then you're kinda hooped.

Have you looked at the PythonPath directive? You may be able to get away with 
that in your .htacces. e.g.:

PythonPath "['/the/scripts/directory'] + sys.path"

Good luck!

Mike.


From the_edge2020 at hotmail.com  Sun Apr  6 11:57:40 2003
From: the_edge2020 at hotmail.com (Tommy !!)
Date: Fri Jan  9 21:47:20 2004
Subject: [mod_python] Import Issues
Message-ID: <F93TcjJxWY5pCxlICSs0000066a@hotmail.com>

Hi Mike (and pascal),

Wouldn't mod_python be able to determine the directory it is executing in 
from the request (in a handler maybe)? Or, at the very least, in the Apache 
module itself, since mod_python must obviously know where the current script 
is being executed in order to actually execute it (see the request_rec 
structure in the Apache 2 C source code to see the relevant fields).

I would think that you could either:
a) modify the handler itself to check the request for the path to the 
module, and then use os.path.dir (? from memory) to grab the directory it's 
executing in, and then throw that into the sys.path?
b) take the same path that the Apache module itself does when it calls 
*sound of source code ruffling* PythonChildInitHandler (mod_python.c) and 
use the Python API to manipulate the sys.path global itself (except, 
obviously, from python_handler in the same file, where you *should* actually 
know where the file is located)

Anyways I'm going to have a bit of a hack around the source code and see 
what I come up with.

Thanks for your time guys, if you have any further comments I'd love to hear 
about it :)

Kind Regards,
Tom L




>From: Mike Verdone <mike_verdone@shaw.ca>
>To: Tommy !! <the_edge2020@hotmail.com>, mod_python@modpython.org
>Subject: Re: [mod_python] Import Issues
>Date: Sat, 05 Apr 2003 11:20:26 -0700
>MIME-Version: 1.0
>Received: from mc5-f20.law1.hotmail.com ([65.54.252.27]) by 
>mc5-s2.law1.hotmail.com with Microsoft SMTPSVC(5.0.2195.5600); Sat, 5 Apr 
>2003 10:29:20 -0800
>Received: from eden.ispol.com ([206.239.103.254]) by 
>mc5-f20.law1.hotmail.com with Microsoft SMTPSVC(5.0.2195.5600); Sat, 5 Apr 
>2003 10:28:26 -0800
>Received: from eden.ispol.com (localhost.ispol.com [127.0.0.1])by 
>eden.ispol.com (8.12.6/8.11.1) with ESMTP id h35IL4WT029214;Sat, 5 Apr 2003 
>13:21:04 -0500 (EST)(envelope-from mod_python-admin@modpython.org)
>Received: from pd6mo2so.prod.shaw.ca (shawidc-mo1.cg.shawcable.net 
>[24.71.223.10])by eden.ispol.com (8.12.6/8.11.1) with ESMTP id 
>h35IK9WT029190for <mod_python@modpython.org>; Sat, 5 Apr 2003 13:20:09 
>-0500 (EST)(envelope-from mike_verdone@shaw.ca)
>Received: from pd3mr3so.prod.shaw.ca (pd3mr3so-ser.prod.shaw.ca 
>[10.0.141.179]) by l-daemon (iPlanet Messaging Server 5.1 HotFix 0.8 (built 
>May 12 2002)) with ESMTP id <0HCV004PCUXCO3@l-daemon> for 
>mod_python@modpython.org; Sat, 05 Apr 2003 11:20:00 -0700 (MST)
>Received: from pn2ml5so.prod.shaw.ca (pn2ml5so-qfe0.prod.shaw.ca 
>[10.0.121.149]) by l-daemon (iPlanet Messaging Server 5.1 HotFix 0.8 (built 
>May 12 2002)) with ESMTP id <0HCV00BORUXCL2@l-daemon> for 
>mod_python@modpython.org; Sat, 05 Apr 2003 11:20:00 -0700 (MST)
>Received: from 192.168.0.42 (h68-144-147-185.cg.shawcable.net 
>[68.144.147.185]) by l-daemon (iPlanet Messaging Server 5.1 HotFix 0.8 
>(built May 12 2002)) with ESMTP id <0HCV00F46UXCP9@l-daemon> for 
>mod_python@modpython.org; Sat, 05 Apr 2003 11:20:00 -0700 (MST)
>X-Message-Info: pdGgd64CkwYBecCeulYyOTshuDTWlDUk
>In-reply-to: <F46Y7ZggDttW3SC7g4Z0002e234@hotmail.com>
>Message-id: <200304051120.26133.mike_verdone@shaw.ca>
>User-Agent: KMail/1.5.1
>References: <F46Y7ZggDttW3SC7g4Z0002e234@hotmail.com>
>Sender: mod_python-admin@modpython.org
>Errors-To: mod_python-admin@modpython.org
>X-BeenThere: mod_python@modpython.org
>X-Mailman-Version: 2.0.12
>Precedence: bulk
>List-Help: <mailto:mod_python-request@modpython.org?subject=help>
>List-Post: <mailto:mod_python@modpython.org>
>List-Subscribe: 
><http://www.modpython.org/mailman/listinfo/mod_python>,<mailto:mod_python-request@modpython.org?subject=subscribe>
>List-Id: mod_python user mailing list <mod_python.modpython.org>
>List-Unsubscribe: 
><http://www.modpython.org/mailman/listinfo/mod_python>,<mailto:mod_python-request@modpython.org?subject=unsubscribe>
>List-Archive: <http://www.modpython.org/pipermail/mod_python/>
>Return-Path: mod_python-admin@modpython.org
>X-OriginalArrivalTime: 05 Apr 2003 18:28:28.0117 (UTC) 
>FILETIME=[26ED0850:01C2FBA1]
>
>On April 5, 2003 10:53 am, Tommy !! wrote:
> > Hi all,
> >
> > Just curious as to why (by design?) mod_python does not allow one to 
>import
> > modules in the same directory as the executing script - instead you have 
>to
> > resort to altering sys.path inside each script in order to get it 
>importing
> > correctly.
> >
> > This is an issue if you don't have access to the web server to modify
> > httpd.conf and .htaccess files are disabled/limited. Additionally, I may
> > not have access to the site-packages directory, or any other directory, 
>for
> > that matter, from which my script could import reusable components.
> >
>
>The main problem is that mod_python doesn't know what directory it's in 
>when
>it executes a script except in two cases (as far as I can tell):
>
>1. You put the AddHandler directive in the .htaccess file in that 
>directory.
>
>2. You enclose the AddHandler directive in a <Directory> block specifying 
>the
>full path in apache.conf.
>
>Otherwise mod_python has no idea where it's really executing from, and 
>seems
>to default to the apache dir. If your administrator has restricted 
>.htaccess
>and won't set up apache.conf for you, then you're kinda hooped.
>
>Have you looked at the PythonPath directive? You may be able to get away 
>with
>that in your .htacces. e.g.:
>
>PythonPath "['/the/scripts/directory'] + sys.path"
>
>Good luck!
>
>Mike.
>
>_______________________________________________
>Mod_python mailing list
>Mod_python@modpython.org
>http://www.modpython.org/mailman/listinfo/mod_python


_________________________________________________________________
MSN Instant Messenger now available on Australian mobile phones. Go to  
http://ninemsn.com.au/mobilecentral/hotmail_messenger.asp


From the_edge2020 at hotmail.com  Sun Apr  6 15:02:02 2003
From: the_edge2020 at hotmail.com (Tommy !!)
Date: Fri Jan  9 21:47:20 2004
Subject: [mod_python] Import Issues
Message-ID: <F24k8eDDSFc6hFHh9la00014034@hotmail.com>

Hi all,

I achieved what I wanted by modifying publisher.py - obviously this is a bit 
dirty since it's handler-specific, but oh well - it works.

Basically, I use the following code in publisher.py prior to calling the 
target python script itself (where 'path' is the path to the python script 
determined by publisher.py):

if not path in sys.path:
  sys.path.append( path )

# ...

while path in sys.path:
  del sys.path[sys.path.index( path )]


Is there a chance something like this could be added to future versions of 
mod_python? If not, why not? I don't see why it should be necessary to 
modify httpd.conf or a .htaccess file for every web application I write when 
it could be as simple as writing a script & some supporting moudles :)

Another question - what's to stop a remote user from running any given 
method in an arbitrary python script within a directory when using the 
publisher handler?

Regards,
Tom L






>From: Mike Verdone <mike_verdone@shaw.ca>
>To: Tommy !! <the_edge2020@hotmail.com>, mod_python@modpython.org
>Subject: Re: [mod_python] Import Issues
>Date: Sat, 05 Apr 2003 11:20:26 -0700
>MIME-Version: 1.0
>Received: from mc5-f20.law1.hotmail.com ([65.54.252.27]) by 
>mc5-s2.law1.hotmail.com with Microsoft SMTPSVC(5.0.2195.5600); Sat, 5 Apr 
>2003 10:29:20 -0800
>Received: from eden.ispol.com ([206.239.103.254]) by 
>mc5-f20.law1.hotmail.com with Microsoft SMTPSVC(5.0.2195.5600); Sat, 5 Apr 
>2003 10:28:26 -0800
>Received: from eden.ispol.com (localhost.ispol.com [127.0.0.1])by 
>eden.ispol.com (8.12.6/8.11.1) with ESMTP id h35IL4WT029214;Sat, 5 Apr 2003 
>13:21:04 -0500 (EST)(envelope-from mod_python-admin@modpython.org)
>Received: from pd6mo2so.prod.shaw.ca (shawidc-mo1.cg.shawcable.net 
>[24.71.223.10])by eden.ispol.com (8.12.6/8.11.1) with ESMTP id 
>h35IK9WT029190for <mod_python@modpython.org>; Sat, 5 Apr 2003 13:20:09 
>-0500 (EST)(envelope-from mike_verdone@shaw.ca)
>Received: from pd3mr3so.prod.shaw.ca (pd3mr3so-ser.prod.shaw.ca 
>[10.0.141.179]) by l-daemon (iPlanet Messaging Server 5.1 HotFix 0.8 (built 
>May 12 2002)) with ESMTP id <0HCV004PCUXCO3@l-daemon> for 
>mod_python@modpython.org; Sat, 05 Apr 2003 11:20:00 -0700 (MST)
>Received: from pn2ml5so.prod.shaw.ca (pn2ml5so-qfe0.prod.shaw.ca 
>[10.0.121.149]) by l-daemon (iPlanet Messaging Server 5.1 HotFix 0.8 (built 
>May 12 2002)) with ESMTP id <0HCV00BORUXCL2@l-daemon> for 
>mod_python@modpython.org; Sat, 05 Apr 2003 11:20:00 -0700 (MST)
>Received: from 192.168.0.42 (h68-144-147-185.cg.shawcable.net 
>[68.144.147.185]) by l-daemon (iPlanet Messaging Server 5.1 HotFix 0.8 
>(built May 12 2002)) with ESMTP id <0HCV00F46UXCP9@l-daemon> for 
>mod_python@modpython.org; Sat, 05 Apr 2003 11:20:00 -0700 (MST)
>X-Message-Info: pdGgd64CkwYBecCeulYyOTshuDTWlDUk
>In-reply-to: <F46Y7ZggDttW3SC7g4Z0002e234@hotmail.com>
>Message-id: <200304051120.26133.mike_verdone@shaw.ca>
>User-Agent: KMail/1.5.1
>References: <F46Y7ZggDttW3SC7g4Z0002e234@hotmail.com>
>Sender: mod_python-admin@modpython.org
>Errors-To: mod_python-admin@modpython.org
>X-BeenThere: mod_python@modpython.org
>X-Mailman-Version: 2.0.12
>Precedence: bulk
>List-Help: <mailto:mod_python-request@modpython.org?subject=help>
>List-Post: <mailto:mod_python@modpython.org>
>List-Subscribe: 
><http://www.modpython.org/mailman/listinfo/mod_python>,<mailto:mod_python-request@modpython.org?subject=subscribe>
>List-Id: mod_python user mailing list <mod_python.modpython.org>
>List-Unsubscribe: 
><http://www.modpython.org/mailman/listinfo/mod_python>,<mailto:mod_python-request@modpython.org?subject=unsubscribe>
>List-Archive: <http://www.modpython.org/pipermail/mod_python/>
>Return-Path: mod_python-admin@modpython.org
>X-OriginalArrivalTime: 05 Apr 2003 18:28:28.0117 (UTC) 
>FILETIME=[26ED0850:01C2FBA1]
>
>On April 5, 2003 10:53 am, Tommy !! wrote:
> > Hi all,
> >
> > Just curious as to why (by design?) mod_python does not allow one to 
>import
> > modules in the same directory as the executing script - instead you have 
>to
> > resort to altering sys.path inside each script in order to get it 
>importing
> > correctly.
> >
> > This is an issue if you don't have access to the web server to modify
> > httpd.conf and .htaccess files are disabled/limited. Additionally, I may
> > not have access to the site-packages directory, or any other directory, 
>for
> > that matter, from which my script could import reusable components.
> >
>
>The main problem is that mod_python doesn't know what directory it's in 
>when
>it executes a script except in two cases (as far as I can tell):
>
>1. You put the AddHandler directive in the .htaccess file in that 
>directory.
>
>2. You enclose the AddHandler directive in a <Directory> block specifying 
>the
>full path in apache.conf.
>
>Otherwise mod_python has no idea where it's really executing from, and 
>seems
>to default to the apache dir. If your administrator has restricted 
>.htaccess
>and won't set up apache.conf for you, then you're kinda hooped.
>
>Have you looked at the PythonPath directive? You may be able to get away 
>with
>that in your .htacces. e.g.:
>
>PythonPath "['/the/scripts/directory'] + sys.path"
>
>Good luck!
>
>Mike.
>
>_______________________________________________
>Mod_python mailing list
>Mod_python@modpython.org
>http://www.modpython.org/mailman/listinfo/mod_python


_________________________________________________________________
Hotmail now available on Australian mobile phones. Go to  
http://ninemsn.com.au/mobilecentral/hotmail_mobile.asp


From grisha at modpython.org  Sun Apr  6 16:28:48 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:47:20 2004
Subject: [mod_python] Import Issues
In-Reply-To: <F24k8eDDSFc6hFHh9la00014034@hotmail.com>
Message-ID: <20030406161905.L45203-100000@eden.ispol.com>

On Sun, 6 Apr 2003, Tommy !! wrote:

> Hi all,
>
> I achieved what I wanted by modifying publisher.py - obviously this is a bit
> dirty since it's handler-specific, but oh well - it works.
>
> Basically, I use the following code in publisher.py prior to calling the
> target python script itself (where 'path' is the path to the python script
> determined by publisher.py):
>
> if not path in sys.path:
>   sys.path.append( path )
>
> # ...
>
> while path in sys.path:
>   del sys.path[sys.path.index( path )]

Hm... Not sure I understand what this does, since the publisher already
does add the path, in fact it restricts it so that the module can only be
imported from that particular path.

> Another question - what's to stop a remote user from running any given
> method in an arbitrary python script within a directory when using the
> publisher handler?

If that directory is exposed to the web (i.e. is under DocumentRoot), then
nothing, you should be very careful about that. The publisher will not run
anything that beginc with an "_" so it's a good idea to name all internal
functions beginning with an underscore.

Grisha



From pzb at datastacks.com  Sun Apr  6 18:15:02 2003
From: pzb at datastacks.com (Peter Bowen)
Date: Fri Jan  9 21:47:20 2004
Subject: [mod_python] Why are you using mod_python?
In-Reply-To: <20030328231412.24efac21.frank@fejes.net>
References: <20030328075642.A25172@ash.int.ca.pason.com>
	 <20030328172826.X67038-100000@eden.ispol.com>
	 <20030328231412.24efac21.frank@fejes.net>
Message-ID: <1049667302.13572.20.camel@localhost.localdomain>

On Sat, 2003-03-29 at 00:14, Frank S. Fejes III wrote:
> On a somewhat tangential note, I think mod_python documentation reflects
> strangely on what target audience might be interested in the module.  Almost
> all introductions I've seen to mod_python begin with a tutorial on creating
> a handler.  I'd venture a guess that writing handlers is what fewer than 1%
> of web developers want to do with an apache module initially.  In my
> experience, most people want to write some code and have it run faster than
> it would run under straight CGI...they don't want to write custom handlers.

I would have to disagree.  We were using PHP 4.x, but it doesn't have
support for all the hooks that apache offers.  We use the trans, authen,
authz, and content handlers for our projects.  We don't use the FastCGI
or publisher handlers at all.

Additionally mod_python offered us an opportunity to use python, which
we find offers faster development with less work and less bugs.  Python
is a very well designed language.  We were stretching the bounds of PHP
and perl, while being flexible, is too much of a write-only language.

Thanks.
Peter

From sterling at bumblebury.com  Sun Apr  6 18:50:03 2003
From: sterling at bumblebury.com (Sterling Hughes)
Date: Fri Jan  9 21:47:20 2004
Subject: [mod_python] Why are you using mod_python?
In-Reply-To: <1049667302.13572.20.camel@localhost.localdomain>
References: <20030328075642.A25172@ash.int.ca.pason.com>
	 <20030328172826.X67038-100000@eden.ispol.com>
	 <20030328231412.24efac21.frank@fejes.net>
	 <1049667302.13572.20.camel@localhost.localdomain>
Message-ID: <1049669403.28037.155.camel@hasele>

On Sun, 2003-04-06 at 18:15, Peter Bowen wrote:
> On Sat, 2003-03-29 at 00:14, Frank S. Fejes III wrote:
> > On a somewhat tangential note, I think mod_python documentation reflects
> > strangely on what target audience might be interested in the module.  Almost
> > all introductions I've seen to mod_python begin with a tutorial on creating
> > a handler.  I'd venture a guess that writing handlers is what fewer than 1%
> > of web developers want to do with an apache module initially.  In my
> > experience, most people want to write some code and have it run faster than
> > it would run under straight CGI...they don't want to write custom handlers.
> 
> I would have to disagree.  We were using PHP 4.x, but it doesn't have
> support for all the hooks that apache offers.  We use the trans, authen,
> authz, and content handlers for our projects.  We don't use the FastCGI
> or publisher handlers at all.
> 

Just a note that php does support all of this.

> Additionally mod_python offered us an opportunity to use python, which
> we find offers faster development with less work and less bugs.  Python
> is a very well designed language.  We were stretching the bounds of PHP
> and perl, while being flexible, is too much of a write-only language.
> 

Very true. :)

-Sterling
-- 
Good judgement comes from experience, and experience comes from 
bad judgement. 
    - Fred Brooks


From khalid_kary at hotmail.com  Sun Apr  6 23:55:49 2003
From: khalid_kary at hotmail.com (Khalid El-Kary)
Date: Fri Jan  9 21:47:20 2004
Subject: [mod_python] newbie and unable to get it working
Message-ID: <F50wefzQqWCdFF0a9jm00057331@hotmail.com>

Hi fellows,
I followed the installation instructions as in the mod_python documentation 
"A Windows Installation" section ...

and added the following lines to httpd.conf:

<Directory "<Your Document Root>/python">
   AddHandler python-program .py
   PythonHandler mptest
   PythonDebug on
</Directory>

replaced "your document root" with mine :-)

and created a file called mptest.py under "my document root/python"
which contained:

from mod_python import apache

def handler(req):
   req.content_type = "text/plain"
   req.send_http_header()
   req.write("Hello World!")
   return apache.OK

Apache starts normally and writes out the mod_python headers and an error 
message with which it continues normally:

'import site' failed; use -v for traceback
Apache/1.3.24 (win32) mod_python/2.7.6 Python/2.2.1 PHP/4.2.3 running ...

unfrotunately, when i request "http://servername/python/mptest.py" it gives 
an "500 - internal server error" ...

note that mod_python and python installations with apache went just fine, 
since the headers were written properly.

Windows ME, Apache 1.3.24, mod_python 2.7.6, Python 2.2.1

anything wrong, or any suggestions to get it running ?

thanx in advance,

Regards,
Khalid Al-Kary





_________________________________________________________________
Tired of spam? Get advanced junk mail protection with MSN 8. 
http://join.msn.com/?page=features/junkmail


From scott_list at mischko.com  Mon Apr  7 08:30:50 2003
From: scott_list at mischko.com (Scott Chapman)
Date: Fri Jan  9 21:47:20 2004
Subject: [mod_python] Why are you using mod_python?
In-Reply-To: <20030328231412.24efac21.frank@fejes.net>
References: <20030328075642.A25172@ash.int.ca.pason.com> <20030328172826.X67038-100000@eden.ispol.com> <20030328231412.24efac21.frank@fejes.net>
Message-ID: <200304070830.50822.scott_list@mischko.com>

On Friday 28 March 2003 21:14, Frank S. Fejes III wrote:
> On a somewhat tangential note, I think mod_python documentation reflects
> strangely on what target audience might be interested in the module. 
> Almost all introductions I've seen to mod_python begin with a tutorial on
> creating a handler.  I'd venture a guess that writing handlers is what
> fewer than 1% of web developers want to do with an apache module initially.
>  In my experience, most people want to write some code and have it run
> faster than it would run under straight CGI...they don't want to write
> custom handlers.

I very much agree with you.  The docs could use some improvment in this area.

Scott

From vlindberg at verio.net  Mon Apr  7 10:38:41 2003
From: vlindberg at verio.net (VanL)
Date: Fri Jan  9 21:47:20 2004
Subject: [mod_python] Import Issues
In-Reply-To: <20030406161905.L45203-100000@eden.ispol.com>
References: <20030406161905.L45203-100000@eden.ispol.com>
Message-ID: <3E91A991.1040207@verio.net>

Hello,

I am probably being just dense, but I cannot get my modules to import 
under mod_python.

I can do it fine at the command line:

 >>> from issuetracker import version_check
 >>>

However, mod_python complains:

[Mon Apr  7 16:27:46 2003] [error] PythonHandler mod_python.cgihandler: 
Traceback (most recent call last):
[]   File "/usr/local/lib/python2.2/site-packages/mod_python/apache.py", 
line 193, in Dispatch
    result = object(req)
[] PythonHandler mod_python.cgihandler:   File 
"/usr/local/lib/python2.2/site-packages/mod_python/cgihandler.py", line 
122, in handler
    imp.load_module(module_name, fd, path, desc)
[] PythonHandler mod_python.cgihandler:   File 
"/usr/local/webmanager/controlpanel/support/issuetracker.py", line 31, in ?
    from issuetracker import version_check
[] PythonHandler mod_python.cgihandler: ImportError: cannot import name 
version_check

So I thought that perhaps my sys.path was bad.
I changed the code:
try:
    from issuetracker import version_check
except ImportError:
    raise ImportError(' '.join(sys.path))

Still an error:
[top levels snipped]
[] PythonHandler mod_python.cgihandler: ImportError: 
/usr/local/lib/python2.2threadless 
/usr/local/lib/python2.2threadless/plat-freebsd4 
/usr/local/lib/python2.2threadless/lib-tk 
/usr/local/lib/python2.2threadless/lib-dynload 
/usr/local/lib/python2.2/site-packages /usr/local/webmanager 
/usr/local/webmanager/pylib /usr/local/webmanager/pylib/Packages

issuetracker is a package under /usr/local/webmanager/pylib:
# ls /usr/local/webmanager/pylib/issuetracker/*.py
/usr/local/webmanager/pylib/issuetracker/__init__.py
/usr/local/webmanager/pylib/issuetracker/version_check.py


I have been able to get other modules to import, and I can import 
issuetracker (top-level only) with no problems.  Anyone have a clue?

Apache 1.3.26, mod_python 2.78, python2.2-threadless.

Thanks,

VanL





From grisha at modpython.org  Mon Apr  7 14:03:52 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:47:20 2004
Subject: [mod_python] Import Issues
In-Reply-To: <3E91A991.1040207@verio.net>
Message-ID: <20030407140250.V55953-100000@eden.ispol.com>

Are sure it's not a permissions problem? Httpd most likely runs as user
"nobody", so all Python libs you're using must be world-readable.

Grisha

On Mon, 7 Apr 2003, VanL wrote:

> Hello,
>
> I am probably being just dense, but I cannot get my modules to import
> under mod_python.
>
> I can do it fine at the command line:
>
>  >>> from issuetracker import version_check
>  >>>
>
> However, mod_python complains:
>
> [Mon Apr  7 16:27:46 2003] [error] PythonHandler mod_python.cgihandler:
> Traceback (most recent call last):
> []   File "/usr/local/lib/python2.2/site-packages/mod_python/apache.py",
> line 193, in Dispatch
>     result = object(req)
> [] PythonHandler mod_python.cgihandler:   File
> "/usr/local/lib/python2.2/site-packages/mod_python/cgihandler.py", line
> 122, in handler
>     imp.load_module(module_name, fd, path, desc)
> [] PythonHandler mod_python.cgihandler:   File
> "/usr/local/webmanager/controlpanel/support/issuetracker.py", line 31, in ?
>     from issuetracker import version_check
> [] PythonHandler mod_python.cgihandler: ImportError: cannot import name
> version_check
>
> So I thought that perhaps my sys.path was bad.
> I changed the code:
> try:
>     from issuetracker import version_check
> except ImportError:
>     raise ImportError(' '.join(sys.path))
>
> Still an error:
> [top levels snipped]
> [] PythonHandler mod_python.cgihandler: ImportError:
> /usr/local/lib/python2.2threadless
> /usr/local/lib/python2.2threadless/plat-freebsd4
> /usr/local/lib/python2.2threadless/lib-tk
> /usr/local/lib/python2.2threadless/lib-dynload
> /usr/local/lib/python2.2/site-packages /usr/local/webmanager
> /usr/local/webmanager/pylib /usr/local/webmanager/pylib/Packages
>
> issuetracker is a package under /usr/local/webmanager/pylib:
> # ls /usr/local/webmanager/pylib/issuetracker/*.py
> /usr/local/webmanager/pylib/issuetracker/__init__.py
> /usr/local/webmanager/pylib/issuetracker/version_check.py
>
>
> I have been able to get other modules to import, and I can import
> issuetracker (top-level only) with no problems.  Anyone have a clue?
>
> Apache 1.3.26, mod_python 2.78, python2.2-threadless.
>
> Thanks,
>
> VanL
>
>
>
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From vlindberg at verio.net  Mon Apr  7 12:13:26 2003
From: vlindberg at verio.net (VanL)
Date: Fri Jan  9 21:47:20 2004
Subject: [mod_python] Import Issues
In-Reply-To: <20030407140250.V55953-100000@eden.ispol.com>
References: <20030407140250.V55953-100000@eden.ispol.com>
Message-ID: <3E91BFC6.8040202@verio.net>

Gregory (Grisha) Trubetskoy wrote:

>Are sure it's not a permissions problem? Httpd most likely runs as user
>"nobody", so all Python libs you're using must be world-readable.
>
Checked it already:  httpd runs as user "www"  All files in the pylib 
directory have 755 permissions, and the group is set to www also.  
Either way, they should be world-readable.

VanL


>
>Grisha
>
>On Mon, 7 Apr 2003, VanL wrote:
>
>  
>
>>Hello,
>>
>>I am probably being just dense, but I cannot get my modules to import
>>under mod_python.
>>
>>I can do it fine at the command line:
>>
>> >>> from issuetracker import version_check
>> >>>
>>
>>However, mod_python complains:
>>
>>[Mon Apr  7 16:27:46 2003] [error] PythonHandler mod_python.cgihandler:
>>Traceback (most recent call last):
>>[]   File "/usr/local/lib/python2.2/site-packages/mod_python/apache.py",
>>line 193, in Dispatch
>>    result = object(req)
>>[] PythonHandler mod_python.cgihandler:   File
>>"/usr/local/lib/python2.2/site-packages/mod_python/cgihandler.py", line
>>122, in handler
>>    imp.load_module(module_name, fd, path, desc)
>>[] PythonHandler mod_python.cgihandler:   File
>>"/usr/local/webmanager/controlpanel/support/issuetracker.py", line 31, in ?
>>    from issuetracker import version_check
>>[] PythonHandler mod_python.cgihandler: ImportError: cannot import name
>>version_check
>>
>>So I thought that perhaps my sys.path was bad.
>>I changed the code:
>>try:
>>    from issuetracker import version_check
>>except ImportError:
>>    raise ImportError(' '.join(sys.path))
>>
>>Still an error:
>>[top levels snipped]
>>[] PythonHandler mod_python.cgihandler: ImportError:
>>/usr/local/lib/python2.2threadless
>>/usr/local/lib/python2.2threadless/plat-freebsd4
>>/usr/local/lib/python2.2threadless/lib-tk
>>/usr/local/lib/python2.2threadless/lib-dynload
>>/usr/local/lib/python2.2/site-packages /usr/local/webmanager
>>/usr/local/webmanager/pylib /usr/local/webmanager/pylib/Packages
>>
>>issuetracker is a package under /usr/local/webmanager/pylib:
>># ls /usr/local/webmanager/pylib/issuetracker/*.py
>>/usr/local/webmanager/pylib/issuetracker/__init__.py
>>/usr/local/webmanager/pylib/issuetracker/version_check.py
>>
>>
>>I have been able to get other modules to import, and I can import
>>issuetracker (top-level only) with no problems.  Anyone have a clue?
>>
>>Apache 1.3.26, mod_python 2.78, python2.2-threadless.
>>
>>Thanks,
>>
>>VanL
>>
>>
>>
>>
>>_______________________________________________
>>Mod_python mailing list
>>Mod_python@modpython.org
>>http://www.modpython.org/mailman/listinfo/mod_python
>>
>>    
>>
>
>  
>



From neel at mediapulse.com  Mon Apr  7 15:17:54 2003
From: neel at mediapulse.com (Michael C. Neel)
Date: Fri Jan  9 21:47:20 2004
Subject: [mod_python] Import Issues
Message-ID: <C0FC22C08B82074A88B50061764157772C65A2@johnson.mediapulse.net>

Sorry for the blank email, hit a bad key combo.

Anyway, looks like there might be a path issue invloved, as I see both
/usr/local/lib/python2.2 and /usr/local/lib/python2.2threadless below.
Did you make a custom install of python for mod_python (not uncommon)?
If so, which one is mod_python linked against?

Mike

-----Original Message-----
From: VanL [mailto:vlindberg@verio.net] 
Sent: Monday, April 07, 2003 2:13 PM
To: Gregory (Grisha) Trubetskoy
Cc: mod_python@modpython.org
Subject: Re: [mod_python] Import Issues


Gregory (Grisha) Trubetskoy wrote:

>Are sure it's not a permissions problem? Httpd most likely runs as user

>"nobody", so all Python libs you're using must be world-readable.
>
Checked it already:  httpd runs as user "www"  All files in the pylib 
directory have 755 permissions, and the group is set to www also.  
Either way, they should be world-readable.

VanL


>
>Grisha
>
>On Mon, 7 Apr 2003, VanL wrote:
>
>  
>
>>Hello,
>>
>>I am probably being just dense, but I cannot get my modules to import 
>>under mod_python.
>>
>>I can do it fine at the command line:
>>
>> >>> from issuetracker import version_check
>> >>>
>>
>>However, mod_python complains:
>>
>>[Mon Apr  7 16:27:46 2003] [error] PythonHandler 
>>mod_python.cgihandler: Traceback (most recent call last):
>>[]   File
"/usr/local/lib/python2.2/site-packages/mod_python/apache.py",
>>line 193, in Dispatch
>>    result = object(req)
>>[] PythonHandler mod_python.cgihandler:   File
>>"/usr/local/lib/python2.2/site-packages/mod_python/cgihandler.py", 
>>line 122, in handler
>>    imp.load_module(module_name, fd, path, desc)
>>[] PythonHandler mod_python.cgihandler:   File
>>"/usr/local/webmanager/controlpanel/support/issuetracker.py", line 31,
in ?
>>    from issuetracker import version_check
>>[] PythonHandler mod_python.cgihandler: ImportError: cannot import 
>>name version_check
>>
>>So I thought that perhaps my sys.path was bad.
>>I changed the code:
>>try:
>>    from issuetracker import version_check
>>except ImportError:
>>    raise ImportError(' '.join(sys.path))
>>
>>Still an error:
>>[top levels snipped]
>>[] PythonHandler mod_python.cgihandler: ImportError: 
>>/usr/local/lib/python2.2threadless
>>/usr/local/lib/python2.2threadless/plat-freebsd4
>>/usr/local/lib/python2.2threadless/lib-tk
>>/usr/local/lib/python2.2threadless/lib-dynload
>>/usr/local/lib/python2.2/site-packages /usr/local/webmanager 
>>/usr/local/webmanager/pylib /usr/local/webmanager/pylib/Packages
>>
>>issuetracker is a package under /usr/local/webmanager/pylib: # ls 
>>/usr/local/webmanager/pylib/issuetracker/*.py
>>/usr/local/webmanager/pylib/issuetracker/__init__.py
>>/usr/local/webmanager/pylib/issuetracker/version_check.py
>>
>>
>>I have been able to get other modules to import, and I can import 
>>issuetracker (top-level only) with no problems.  Anyone have a clue?
>>
>>Apache 1.3.26, mod_python 2.78, python2.2-threadless.
>>
>>Thanks,
>>
>>VanL
>>
>>
>>
>>
>>_______________________________________________
>>Mod_python mailing list
>>Mod_python@modpython.org 
>>http://www.modpython.org/mailman/listinfo/mod_python
>>
>>    
>>
>
>  
>


_______________________________________________
Mod_python mailing list
Mod_python@modpython.org
http://www.modpython.org/mailman/listinfo/mod_python


From vlindberg at verio.net  Mon Apr  7 13:32:57 2003
From: vlindberg at verio.net (VanL)
Date: Fri Jan  9 21:47:20 2004
Subject: [mod_python] Import Issues
In-Reply-To: <C0FC22C08B82074A88B50061764157772C65A2@johnson.mediapulse.net>
References: <C0FC22C08B82074A88B50061764157772C65A2@johnson.mediapulse.net>
Message-ID: <3E91D269.6000505@verio.net>

Michael C. Neel wrote:

>Sorry for the blank email, hit a bad key combo.
>
>Anyway, looks like there might be a path issue invloved, as I see both
>/usr/local/lib/python2.2 and /usr/local/lib/python2.2threadless below.
>Did you make a custom install of python for mod_python (not uncommon)?
>If so, which one is mod_python linked against?
>
>Mike
>
Both exist; mod_python is linked against the threadless install.  On a 
side note, I built the threadless installation and mod python, however, 
for some reason the /usr/local/lib/python2.2/site-packages is the only 
site-packages in the import path.  So, mod_python was built against the 
threadless installation, and both the normal and threadless 
installations exist, but the mod_python package is actually symlinked 
into both /usr/local/lib/python2.2/site-packages as well as  
/usr/local/lib/python2.2threadless/site-packages.

Every other library (other than those in the standard lib) are located 
in /usr/local/webmanager pylib.

VanL



From manuel at aguete.org  Tue Apr  8 17:35:11 2003
From: manuel at aguete.org (Manuel =?ISO-8859-1?Q?Dur=E1n?= Aguete)
Date: Fri Jan  9 21:47:20 2004
Subject: [mod_python] A question
Message-ID: <1049816111.882.49.camel@dt1010b.quantum.int>

Hello,
	I'm implementing a XMLRPC dispatcher with mod_python, it's almost done,
but after a few petitions the script crashed with internal server error.
The problem it's in apache.py in method import_module.

#        if not file or (path and not os.path.dirname(file) in path):
#                raise SERVER_RETURN, HTTP_NOT_FOUND

if I comment these lines it seems to work ok. Printing the variables in
if I get: 
[Tue Apr  8 16:03:53 2003] [notice] mod_python: Going to import cosa
from ['/home/manuel/public_html/python/']: <module 'cosa' from
'/home/manuel/public_html/python/cosa.py'>
 mod_python: File is /home/manuel/public_html/python/cosa.py Path is
['/home/manuel/public_html/python/'] Dirname:
/home/manuel/public_html/python

I'm usign mod_python 2.7.8 with python 2.1.3 under Debian Gnu/Linux with
apache 1.3.26

Any idea what's happening ?

								Regards.
-- 
Manuel Dur?n Aguete <manuel@aguete.org>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://mailman.modpython.org/pipermail/mod_python/attachments/20030408/f80ef813/attachment.bin
From grisha at modpython.org  Tue Apr  8 13:15:46 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:47:20 2004
Subject: [mod_python] A question
In-Reply-To: <1049816111.882.49.camel@dt1010b.quantum.int>
Message-ID: <20030408131434.I71082-100000@eden.ispol.com>

I think the problem is somewhere else, because the lines you commented out
would at works produce "Not Found", but not "Internal Server Error". When
you get "Internal Server Error", check what's in the error log, there may
be a clue there.

Grisha

On 8 Apr 2003, Manuel [ISO-8859-1] Dur?n Aguete wrote:

> Hello,
> 	I'm implementing a XMLRPC dispatcher with mod_python, it's almost done,
> but after a few petitions the script crashed with internal server error.
> The problem it's in apache.py in method import_module.
>
> #        if not file or (path and not os.path.dirname(file) in path):
> #                raise SERVER_RETURN, HTTP_NOT_FOUND
>
> if I comment these lines it seems to work ok. Printing the variables in
> if I get:
> [Tue Apr  8 16:03:53 2003] [notice] mod_python: Going to import cosa
> from ['/home/manuel/public_html/python/']: <module 'cosa' from
> '/home/manuel/public_html/python/cosa.py'>
>  mod_python: File is /home/manuel/public_html/python/cosa.py Path is
> ['/home/manuel/public_html/python/'] Dirname:
> /home/manuel/public_html/python
>
> I'm usign mod_python 2.7.8 with python 2.1.3 under Debian Gnu/Linux with
> apache 1.3.26
>
> Any idea what's happening ?
>
> 								Regards.
> --
> Manuel Dur?n Aguete <manuel@aguete.org>
>


From matt at teaphoo.fsnet.co.uk  Tue Apr  8 23:59:30 2003
From: matt at teaphoo.fsnet.co.uk (Matthew Russell)
Date: Fri Jan  9 21:47:20 2004
Subject: [mod_python] newbie and unable to get it working
References: <F50wefzQqWCdFF0a9jm00057331@hotmail.com>
Message-ID: <004901c2fe22$83f17da0$0ba587d9@jaws>

"import site" error in python usually means
that you havent; set yout PYTHONPATH correctly.

Is is most likely that the user which starts apache on your machine has not
set this in his profile.
Alteritivaly use:
setEnv PYTHONPATH=<my list of paths>
in htttpd.conf


----- Original Message -----
From: "Khalid El-Kary" <khalid_kary@hotmail.com>
To: <mod_python@modpython.org>
Sent: Monday, April 07, 2003 12:55 AM
Subject: [mod_python] newbie and unable to get it working


> Hi fellows,
> I followed the installation instructions as in the mod_python
documentation
> "A Windows Installation" section ...
>
> and added the following lines to httpd.conf:
>
> <Directory "<Your Document Root>/python">
>    AddHandler python-program .py
>    PythonHandler mptest
>    PythonDebug on
> </Directory>
>
> replaced "your document root" with mine :-)
>
> and created a file called mptest.py under "my document root/python"
> which contained:
>
> from mod_python import apache
>
> def handler(req):
>    req.content_type = "text/plain"
>    req.send_http_header()
>    req.write("Hello World!")
>    return apache.OK
>
> Apache starts normally and writes out the mod_python headers and an error
> message with which it continues normally:
>
> 'import site' failed; use -v for traceback
> Apache/1.3.24 (win32) mod_python/2.7.6 Python/2.2.1 PHP/4.2.3 running ...
>
> unfrotunately, when i request "http://servername/python/mptest.py" it
gives
> an "500 - internal server error" ...
>
> note that mod_python and python installations with apache went just fine,
> since the headers were written properly.
>
> Windows ME, Apache 1.3.24, mod_python 2.7.6, Python 2.2.1
>
> anything wrong, or any suggestions to get it running ?
>
> thanx in advance,
>
> Regards,
> Khalid Al-Kary
>
>
>
>
>
> _________________________________________________________________
> Tired of spam? Get advanced junk mail protection with MSN 8.
> http://join.msn.com/?page=features/junkmail
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From pluto at objectrealms.net  Thu Apr 10 18:34:01 2003
From: pluto at objectrealms.net (pluto)
Date: Fri Jan  9 21:47:20 2004
Subject: [mod_python] connection pooling?
Message-ID: <3E959CF9.2070603@objectrealms.net>

is it possible to do connection pooling of database handles in 
mod_python? my understanding is that for the common apache/linux mpm 
(prefork) this amounts to having lots of connections open to the db.. 
i'd like to have a global pool of connections for the server, is this 
possible?

somewhat related.. when apache is using the thread mpm, does mod_python 
use a single interpreter for all the threads, or does a different 
interpreter in each thread?

thanks,

-p


From mike.looijmans at asml.com  Fri Apr 11 07:15:59 2003
From: mike.looijmans at asml.com (Mike Looijmans)
Date: Fri Jan  9 21:47:20 2004
Subject: [mod_python] connection pooling?
Message-ID: <01c2ffe9$6fec1180$926a1e6e@wsasd464>

>is it possible to do connection pooling of database handles in
>mod_python? my understanding is that for the common apache/linux mpm
>(prefork) this amounts to having lots of connections open to the db..

Yes 2x...
Well, "lots" is only relative. Most DBMS won't have a problem with 20 or so
open connections. We're not talking hundreds here...

>i'd like to have a global pool of connections for the server, is this
>possible?


Yes, but the solution below is much simpler.

>somewhat related.. when apache is using the thread mpm, does mod_python
>use a single interpreter for all the threads, or does a different
>interpreter in each thread?

It uses a single interpreter for all threads. Which is quite handy, since you
also share all data, DB connection sharing is a breeze.
However, most DBMSses require you to use a connection per thread, but you can
share a fifo of connections along the threads. That's what I did for MySQL
connections.

--
Mike Looijmans
ASML: http://www5nl.asml.nl/~mlooijma
Private: http://www.milosoftware.com



From Tim.Hawes at ncmail.net  Fri Apr 11 09:12:19 2003
From: Tim.Hawes at ncmail.net (Tim Hawes)
Date: Fri Jan  9 21:47:20 2004
Subject: [mod_python] Error compiling mod_python on Solaris
Message-ID: <1050066739.19719.7.camel@apollos>

I am trying to compile mod_python 3.0.3 (DSO) on Solaris 8 (sparc).
Apache is version 2.0.45 (and I have already tried this with 2.0.44 with
the same results).
GCC is 3.2.2 (32 bit)
using Solaris ld (not GNU ld)
Python is version 2.1.3

I get the following:


hrdhhs34:[mod_python-3.0.3] $ gmake
gmake[1]: Entering directory
`/export/home/thawes/src/build/mod_python-3.0.3/src'

Compiling for DSO.

/usr/local/apache/2.0.45/bin/apxs
-I/export/home/thawes/src/build/mod_python-3.0.3/src/include
-I/usr/local/apache/2.0.45/include
-I/usr/local/bin/../stow/python-2.1.3/include/python2.1 -c mod_python.c
_apachemodule.c requestobject.c tableobject.c util.c serverobject.c
connobject.c filterobject.c hlist.c hlistobject.c  -lm 
/usr/local/bin/../stow/python-2.1.3/lib/python2.1/config/libpython2.1.a   -lpthread -lsocket -lnsl -ldl  -lthread   -lm            _eprintf.o _floatdidf.o _muldi3.o
/usr/local/apache/2.0.45/build/libtool --silent --mode=compile gcc
-prefer-pic  -DAP_HAVE_DESIGNATED_INITIALIZER -DSOLARIS2=8
-D_POSIX_PTHREAD_SEMANTICS -D_REENTRANT -g -O2 -pthreads
-I/usr/local/apache/2.0.45/include
-I/export/home/thawes/src/build/mod_python-3.0.3/src/include
-I/usr/local/apache/2.0.45/include
-I/usr/local/bin/../stow/python-2.1.3/include/python2.1  -c -o
mod_python.lo mod_python.c && touch mod_python.slo
In file included from
/export/home/thawes/src/build/mod_python-3.0.3/src/include/mod_python.h:115,
                 from mod_python.c:67:
/export/home/thawes/src/build/mod_python-3.0.3/src/include/util.h:76:
parse error before '*' token
/export/home/thawes/src/build/mod_python-3.0.3/src/include/util.h:76:
parse error before '*' token
/export/home/thawes/src/build/mod_python-3.0.3/src/include/util.h:76:
warning: data definition has no type or storage class
apxs:Error: Command failed with rc=65536
.
gmake[1]: *** [mod_python.so] Error 1
gmake[1]: Leaving directory
`/export/home/thawes/src/build/mod_python-3.0.3/src'
gmake: *** [do_dso] Error 2

Any ideas for a fix?


From grisha at modpython.org  Fri Apr 11 10:04:17 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:47:20 2004
Subject: [mod_python] Error compiling mod_python on Solaris
In-Reply-To: <1050066739.19719.7.camel@apollos>
Message-ID: <20030411100330.K14584-100000@eden.ispol.com>

Most likely the problem is your Python versio, try using 2.2.2.

Grisha


On 11 Apr 2003, Tim Hawes wrote:

> I am trying to compile mod_python 3.0.3 (DSO) on Solaris 8 (sparc).
> Apache is version 2.0.45 (and I have already tried this with 2.0.44 with
> the same results).
> GCC is 3.2.2 (32 bit)
> using Solaris ld (not GNU ld)
> Python is version 2.1.3
>
> I get the following:
>
>
> hrdhhs34:[mod_python-3.0.3] $ gmake
> gmake[1]: Entering directory
> `/export/home/thawes/src/build/mod_python-3.0.3/src'
>
> Compiling for DSO.
>
> /usr/local/apache/2.0.45/bin/apxs
> -I/export/home/thawes/src/build/mod_python-3.0.3/src/include
> -I/usr/local/apache/2.0.45/include
> -I/usr/local/bin/../stow/python-2.1.3/include/python2.1 -c mod_python.c
> _apachemodule.c requestobject.c tableobject.c util.c serverobject.c
> connobject.c filterobject.c hlist.c hlistobject.c  -lm
> /usr/local/bin/../stow/python-2.1.3/lib/python2.1/config/libpython2.1.a   -lpthread -lsocket -lnsl -ldl  -lthread   -lm            _eprintf.o _floatdidf.o _muldi3.o
> /usr/local/apache/2.0.45/build/libtool --silent --mode=compile gcc
> -prefer-pic  -DAP_HAVE_DESIGNATED_INITIALIZER -DSOLARIS2=8
> -D_POSIX_PTHREAD_SEMANTICS -D_REENTRANT -g -O2 -pthreads
> -I/usr/local/apache/2.0.45/include
> -I/export/home/thawes/src/build/mod_python-3.0.3/src/include
> -I/usr/local/apache/2.0.45/include
> -I/usr/local/bin/../stow/python-2.1.3/include/python2.1  -c -o
> mod_python.lo mod_python.c && touch mod_python.slo
> In file included from
> /export/home/thawes/src/build/mod_python-3.0.3/src/include/mod_python.h:115,
>                  from mod_python.c:67:
> /export/home/thawes/src/build/mod_python-3.0.3/src/include/util.h:76:
> parse error before '*' token
> /export/home/thawes/src/build/mod_python-3.0.3/src/include/util.h:76:
> parse error before '*' token
> /export/home/thawes/src/build/mod_python-3.0.3/src/include/util.h:76:
> warning: data definition has no type or storage class
> apxs:Error: Command failed with rc=65536
> .
> gmake[1]: *** [mod_python.so] Error 1
> gmake[1]: Leaving directory
> `/export/home/thawes/src/build/mod_python-3.0.3/src'
> gmake: *** [do_dso] Error 2
>
> Any ideas for a fix?
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From Tim.Hawes at ncmail.net  Fri Apr 11 13:44:42 2003
From: Tim.Hawes at ncmail.net (Tim Hawes)
Date: Fri Jan  9 21:47:20 2004
Subject: [mod_python] Error compiling mod_python on Solaris
In-Reply-To: <20030411100330.K14584-100000@eden.ispol.com>
References: <20030411100330.K14584-100000@eden.ispol.com>
Message-ID: <1050083083.2647.2.camel@apollos>

From khalid_kary at hotmail.com  Fri Apr 11 18:05:22 2003
From: khalid_kary at hotmail.com (Khalid El-Kary)
Date: Fri Jan  9 21:47:20 2004
Subject: [mod_python] plz help :-)
Message-ID: <F67hguA23ONgCJinoHL000685d0@hotmail.com>

Hi fellows,
I have sent this question before, but i got no reply, can you plz help :-)

I followed the installation instructions as in the mod_python documentation 
"A Windows Installation" section ...

and added the following lines to httpd.conf:

<Directory "<Your Document Root>/python">
  AddHandler python-program .py
  PythonHandler mptest
  PythonDebug on
</Directory>

replaced "your document root" with mine :-)

and created a file called mptest.py under "my document root/python"
which contained:

from mod_python import apache

def handler(req):
  req.content_type = "text/plain"
  req.send_http_header()
  req.write("Hello World!")
  return apache.OK

Apache starts normally and writes out the mod_python headers and an error 
message with which it continues normally:

'import site' failed; use -v for traceback
Apache/1.3.24 (win32) mod_python/2.7.6 Python/2.2.1 PHP/4.2.3 running ...

unfrotunately, when i request "http://servername/python/mptest.py" it gives 
an "500 - internal server error" ...

note that mod_python and python installations with apache went just fine, 
since the headers were written properly.

Windows ME, Apache 1.3.24, mod_python 2.7.6, Python 2.2.1

anything wrong, or any suggestions to get it running ?

thanx in advance,

Regards,
Khalid Al-Kary






_________________________________________________________________
Protect your PC - get McAfee.com VirusScan Online 
http://clinic.mcafee.com/clinic/ibuy/campaign.asp?cid=3963


From i at mindlace.net  Sat Apr 12 22:51:49 2003
From: i at mindlace.net (emf)
Date: Fri Jan  9 21:47:20 2004
Subject: [mod_python] Why are you using mod_python?
In-Reply-To: <20030328172826.X67038-100000@eden.ispol.com>
References: <20030328172826.X67038-100000@eden.ispol.com>
Message-ID: <3E98D0C5.10005@mindlace.net>

Gregory (Grisha) Trubetskoy wrote:
> Hello everyone -
> 
> As the original author of mod_python I think I'm allowed to jerk people's
> chains with this simple question:
> 
> Why are you using mod_python?

I am using mod_python because I wanted a way to manipulate xhtml/xml 
files and present them to end users without ever tainting the xhtml/xml 
with unrelated markup (like putting python in the page, having extra 
attributes, etc).

No existing python framework cleanly gives me that ability, and I didn't 
want to use a web server written in python, so mod_python seemed like 
the best choice.

~mindlace



From khalid_kary at hotmail.com  Sun Apr 13 15:39:07 2003
From: khalid_kary at hotmail.com (Khalid El-Kary)
Date: Fri Jan  9 21:47:21 2004
Subject: [mod_python] plz help :-)
Message-ID: <F982jQlHPTei5TnY99p00030745@hotmail.com>

>Hi Khalid
>I am not a specialist on this exspecially not on Windoze
>but SEE BELOW
>
> >I followed the installation instructions as in the mod_python 
>documentation
> >"A Windows Installation" section ...
> >
> >and added the following lines to httpd.conf:
> >
> ><Directory "<Your Document Root>/python">
> >  AddHandler python-program .py
> >  PythonHandler mptest
> >  PythonDebug on
> ></Directory>
> >
> >replaced "your document root" with mine :-)
> >
> >and created a file called mptest.py under "my document root/python"
> >which contained:
> >
> >from mod_python import apache
> >
> >def handler(req):
> >  req.content_type = "text/plain"
> >  req.send_http_header()
> >  req.write("Hello World!")
> >  return apache.OK
> >
> >Apache starts normally and writes out the mod_python headers and an error
> >message with which it continues normally:
> >
> >'import site' failed; use -v for traceback
>DOESNT THIS SHOWS THAT SOMETHING WITH LOADING THE MODULE WENT
>WRONG, ARE THERE ANY PATHS TO BE SET  SO APACHE FINDS THE
>mod_python ??

in the LoadModule section:
LoadModule python_module modules/mod_python.dll

in the AddModule section:
AddModule mod_python.c

I think if there was a configuration error, Apache shouldn't start normally 
and give an error message ... anyway do you know anything about "'import 
site' failed; use - v for traceback" thing ?

>
> >Apache/1.3.24 (win32) mod_python/2.7.6 Python/2.2.1 PHP/4.2.3 running ...
>
>
>
> >
> >unfrotunately, when i request "http://servername/python/mptest.py" it 
>gives
> >an "500 - internal server error" ...
>I THINK http://servername/python/mptest
>IS SUFFICIENT
>
> >note that mod_python and python installations with apache went just fine,
> >since the headers were written properly.
> >
> >Windows ME, Apache 1.3.24, mod_python 2.7.6, Python 2.2.1
> >
> >anything wrong, or any suggestions to get it running ?
> >
> >thanx in advance,
> >
> >Regards,
> >Khalid Al-Kary
> >
> >
> >
> >
> >
> >
> >_________________________________________________________________
> >Protect your PC - get McAfee.com VirusScan Online
> >http://clinic.mcafee.com/clinic/ibuy/campaign.asp?cid=3963
> >
> >_______________________________________________
> >Mod_python mailing list
> >Mod_python@modpython.org
> >http://www.modpython.org/mailman/listinfo/mod_python
>
>


_________________________________________________________________
STOP MORE SPAM with the new MSN 8 and get 2 months FREE* 
http://join.msn.com/?page=features/junkmail


From jm at eemsystems.cjb.net  Mon Apr 14 08:54:34 2003
From: jm at eemsystems.cjb.net (Julio Mendoza)
Date: Fri Jan  9 21:47:21 2004
Subject: [mod_python] upload binary file
Message-ID: <1050328473.937.2.camel@eemsystems.com>

Is posible to upload a binary file using mod_python?

Tank you,

JM



Mod_python error: "PythonHandler mod_python.publisher"

Traceback (most recent call last):

  File "/usr/lib/python2.2/site-packages/mod_python/apache.py", line 193, in Dispatch
    result = object(req)

  File "/usr/lib/python2.2/site-packages/mod_python/publisher.py", line 104, in handler
    val = File(field)

  File "/usr/lib/python2.2/site-packages/mod_python/publisher.py", line 308, in __init__
    for m in field.file.__methods__:

AttributeError: 'file' object has no attribute '__methods__'
-- 
Julio Mendoza <jm@eemsystems.cjb.net>


From Tim.Hawes at ncmail.net  Mon Apr 14 10:59:32 2003
From: Tim.Hawes at ncmail.net (Tim Hawes)
Date: Fri Jan  9 21:47:21 2004
Subject: [mod_python] mod_python not working.
Message-ID: <1050332372.30483.6.camel@apollos>

OK< I have successfully compiled the mod_python module (v. 3.0.3) on
Solaris, installed, and have configured Apache (v. 2.0.45) according to
the 2.4 Testing section in the docs:

    LoadModule python_module  modules/mod_python.so

    <Directory /some/directory/htdocs/test>
      AllowOverride   FileInfo
      AddHandler      python-program .py
      PythonHandler   mptest 
      PythonDebug     On 
    </Directory>

I have created my mptest.py file:

from mod_python import apache

    def handler(req):
        req.send_http_header()
        req.write("Hello World!")
        return apache.OK

Restart Apache and I get a 500 Internal Server Error and 
 "make_obcallback: could not import mod_python.apache." in my error log.
Any ideas?



From gnb at itga.com.au  Tue Apr 15 08:44:02 2003
From: gnb at itga.com.au (Gregory Bond)
Date: Fri Jan  9 21:47:21 2004
Subject: [mod_python] mod_python not working. 
In-Reply-To: Your message of 14 Apr 2003 10:59:32 -0400.
Message-ID: <200304142244.IAA26128@lightning.itga.com.au>

This is FAQ # 1:

http://www.modpython.org/FAQ/faqw.py?req=show&file=faq02.001.htp


From qwer at quirxi.com  Tue Apr 15 21:40:36 2003
From: qwer at quirxi.com (qwer)
Date: Fri Jan  9 21:47:21 2004
Subject: [mod_python] Error: 200 OK ?
Message-ID: <3E9C6034.9070907@quirxi.com>

Hello,


I just have installed apache (2.0.45), python (2.2.2), and ,mod_python (
3.0.3 ).

Then I have added following lines to apache configuration file httpd.conf:
<Directory "/home/www/cgi-bin">

    AllowOverride None
      Options None
      Order allow,deny
      Allow from all
#   AddHandler python-program .py
#   PythonHandler qwer

      AddHandler python-program .py
      PythonHandler mod_python.publisher
      PythonDebug On
</Directory>


For testing purposes I added the little python script "test.py" to the
directory "home/www/cgi-bin" and called it with the URL
"http://localhost/cgi-bin/test.py/login".

Here is the script:

----- snip ----

from mod_python import apache
def login( req ):
	req.content_type = "text/html"
	req.send_http_header()
	req.write( "Hello World!" )
	return apache.OK

----- snip ----

But for me it seems that the mod_pyhton handler does not work propely because I 
get following output:


Hello World!<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>200 OK</title>
</head><body>
<h1>OK</h1>
<p>The server encountered an internal error or
misconfiguration and was unable to complete
your request.</p>
<p>Please contact the server administrator,
  qwer@jango and inform them of the time the error occurred,
and anything you might have done that may have
caused the error.</p>
<p>More information about this error may be available
in the server error log.</p>
<hr />
<address>Apache/2.0.45 (Unix) mod_ssl/2.0.45 OpenSSL/0.9.7 mod_python/3.0.3 
Python/2.2.2 Server at localhost Port 80</address>

</body></html>


It is strange that the title tag contains "200 OK" and the output of the 
programm is given out together with an server error message.

Does anybody know what the problem could be ? Any help would be apreciated ....



Cheers

	Arno











From vmanera at manord.com  Wed Apr 16 19:27:52 2003
From: vmanera at manord.com (Manera, Villiam)
Date: Fri Jan  9 21:47:21 2004
Subject: R: [mod_python] upload binary file
Message-ID: <52DC70C1C1575C418CB033523A29CF1497D295@exchange2000.manord.com>

I'm testing mod-python 3.0.1 with apache 2.0.43 and python 2.2.2
>
> I've founded a older problem in file download (from python 2.1 to 2.2)
>
> the workaround is still the same:
>
> in publisher.py:
>
>  class File:
>      """ Like a file, but also has headers and filename
>      """
>      def __init__(self, field):
>          # steal all the file-like methods
>          for m in dir(field.file):
> 		 self.__dict__[m] = getattr(field.file, m)
>
>          self.headers = field.headers
>          self.filename = field.filename
> ======================workaround
> ==============================================
>  class File:
>      """ Like a file, but also has headers and filename
>      """
>      def __init__(self, field):
>          # steal all the file-like methods
>          #for m in dir(field.file):    #dont' work
>          for m in self.sim_methods(field.file):
>              self.__dict__[m] = getattr(field.file, m)
>
>          self.headers = field.headers
>          self.filename = field.filename
>
> 	#new--------
>      def sim_methods(self,obj):
>          from types import BuiltinMethodType
>          return filter(lambda s, t=obj:
>             type(getattr(t, s)) == BuiltinMethodType, dir(obj))
>
>
> I hope it will be put in place
>
> regards
>
> Villiam Manera
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>



-----Messaggio originale-----
Da: Julio Mendoza [mailto:jm@eemsystems.cjb.net]
Inviato: luned? 14 aprile 2003 15.55
A: mod_python@modpython.org
Oggetto: [mod_python] upload binary file


Is posible to upload a binary file using mod_python?

Tank you,

JM



Mod_python error: "PythonHandler mod_python.publisher"

Traceback (most recent call last):

  File "/usr/lib/python2.2/site-packages/mod_python/apache.py", line 193, in
Dispatch
    result = object(req)

  File "/usr/lib/python2.2/site-packages/mod_python/publisher.py", line 104,
in handler
    val = File(field)

  File "/usr/lib/python2.2/site-packages/mod_python/publisher.py", line 308,
in __init__
    for m in field.file.__methods__:

AttributeError: 'file' object has no attribute '__methods__'
-- 
Julio Mendoza <jm@eemsystems.cjb.net>

_______________________________________________
Mod_python mailing list
Mod_python@modpython.org
http://www.modpython.org/mailman/listinfo/mod_python


From grisha at modpython.org  Wed Apr 16 14:43:11 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:47:21 2004
Subject: R: [mod_python] upload binary file
In-Reply-To: <52DC70C1C1575C418CB033523A29CF1497D295@exchange2000.manord.com>
Message-ID: <20030416144251.R88983-100000@eden.ispol.com>

I am pretty sure this issue is fixed in 3.0.3.

Grisha

On Wed, 16 Apr 2003, Manera, Villiam wrote:

> I'm testing mod-python 3.0.1 with apache 2.0.43 and python 2.2.2
> >
> > I've founded a older problem in file download (from python 2.1 to 2.2)
> >
> > the workaround is still the same:
> >
> > in publisher.py:
> >
> >  class File:
> >      """ Like a file, but also has headers and filename
> >      """
> >      def __init__(self, field):
> >          # steal all the file-like methods
> >          for m in dir(field.file):
> > 		 self.__dict__[m] = getattr(field.file, m)
> >
> >          self.headers = field.headers
> >          self.filename = field.filename
> > ======================workaround
> > ==============================================
> >  class File:
> >      """ Like a file, but also has headers and filename
> >      """
> >      def __init__(self, field):
> >          # steal all the file-like methods
> >          #for m in dir(field.file):    #dont' work
> >          for m in self.sim_methods(field.file):
> >              self.__dict__[m] = getattr(field.file, m)
> >
> >          self.headers = field.headers
> >          self.filename = field.filename
> >
> > 	#new--------
> >      def sim_methods(self,obj):
> >          from types import BuiltinMethodType
> >          return filter(lambda s, t=obj:
> >             type(getattr(t, s)) == BuiltinMethodType, dir(obj))
> >
> >
> > I hope it will be put in place
> >
> > regards
> >
> > Villiam Manera
> > _______________________________________________
> > Mod_python mailing list
> > Mod_python@modpython.org
> > http://www.modpython.org/mailman/listinfo/mod_python
> >
>
>
>
> -----Messaggio originale-----
> Da: Julio Mendoza [mailto:jm@eemsystems.cjb.net]
> Inviato: luned? 14 aprile 2003 15.55
> A: mod_python@modpython.org
> Oggetto: [mod_python] upload binary file
>
>
> Is posible to upload a binary file using mod_python?
>
> Tank you,
>
> JM
>
>
>
> Mod_python error: "PythonHandler mod_python.publisher"
>
> Traceback (most recent call last):
>
>   File "/usr/lib/python2.2/site-packages/mod_python/apache.py", line 193, in
> Dispatch
>     result = object(req)
>
>   File "/usr/lib/python2.2/site-packages/mod_python/publisher.py", line 104,
> in handler
>     val = File(field)
>
>   File "/usr/lib/python2.2/site-packages/mod_python/publisher.py", line 308,
> in __init__
>     for m in field.file.__methods__:
>
> AttributeError: 'file' object has no attribute '__methods__'
> --
> Julio Mendoza <jm@eemsystems.cjb.net>
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From robert at leftwich.info  Thu Apr 17 08:54:50 2003
From: robert at leftwich.info (Robert Leftwich)
Date: Fri Jan  9 21:47:21 2004
Subject: [mod_python] Setting content location
Message-ID: <5.2.0.9.0.20030417083751.01947db0@192.168.0.1>

I'm a newbie playing with mod_python (which I think is great, so far at 
least :-)) and I need to set a header to be returned to the client after 
processing an http post request. In my case I want to set the 
Content-Location header to a newly created URL  (fyi I'm attempting to 
implement a REST-based web service) and I have the following code in the 
handler :

def handler(req):
     if req.method == 'POST':
        ...
         req.headers_out["Content-Location"] = "/foo/bar"
         return apache.HTTP_CREATED

But I don't see the Content-Location header being set in my client. What am 
I missing?

Robert



From grisha at modpython.org  Wed Apr 16 21:33:56 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:47:21 2004
Subject: [mod_python] Setting content location
In-Reply-To: <5.2.0.9.0.20030417083751.01947db0@192.168.0.1>
Message-ID: <20030416213117.W97157-100000@eden.ispol.com>

First, make sure that you're setting headers prior to the first byte of
output written, because otherwise the headers have gone out already and
setting them is meaningless.

If that doesn't help it, please provide more info about your environment.
Note that mod_python 3.0.1 (and all prior versions) had a bug that would
not send headers correctly if you were using a DirectoryIndex directive
pointing to a mod_python handled location.

Grisha

On Thu, 17 Apr 2003, Robert Leftwich wrote:

> I'm a newbie playing with mod_python (which I think is great, so far at
> least :-)) and I need to set a header to be returned to the client after
> processing an http post request. In my case I want to set the
> Content-Location header to a newly created URL  (fyi I'm attempting to
> implement a REST-based web service) and I have the following code in the
> handler :
>
> def handler(req):
>      if req.method == 'POST':
>         ...
>          req.headers_out["Content-Location"] = "/foo/bar"
>          return apache.HTTP_CREATED
>
> But I don't see the Content-Location header being set in my client. What am
> I missing?
>
> Robert
>
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From robert at leftwich.info  Thu Apr 17 12:02:10 2003
From: robert at leftwich.info (Robert Leftwich)
Date: Fri Jan  9 21:47:21 2004
Subject: [mod_python] Setting content location
In-Reply-To: <20030416213117.W97157-100000@eden.ispol.com>
References: <5.2.0.9.0.20030417083751.01947db0@192.168.0.1>
Message-ID: <5.2.0.9.0.20030417115525.01969a98@192.168.0.1>

At 11:33 AM 17/04/2003, Gregory (Grisha) Trubetskoy wrote:

>First, make sure that you're setting headers prior to the first byte of
>output written, because otherwise the headers have gone out already and
>setting them is meaningless.

The only other request related thing I do in the code is a req.read().


>If that doesn't help it, please provide more info about your environment.
>Note that mod_python 3.0.1 (and all prior versions) had a bug that would
>not send headers correctly if you were using a DirectoryIndex directive
>pointing to a mod_python handled location.

I'm using Apache 2.0.45, mod_python 3.0.3 and python 2.2 2 on W2000 sp2 
with the following in my httpd.conf file

<Directory "E:/Program Files/Apache Group/Apache2/htdocs/test">
   AddHandler python-program .py
   PythonHandler mptest
   PythonDebug On
</Directory>

Robert



From robert at leftwich.info  Thu Apr 17 12:04:31 2003
From: robert at leftwich.info (Robert Leftwich)
Date: Fri Jan  9 21:47:21 2004
Subject: [mod_python] Stopping additional error content
Message-ID: <5.2.0.9.0.20030417114113.01925a78@192.168.0.1>

Is it possible to stop mod_python appending html error information when a 
4xx error code is returned from a handler? For example I want to return 
some simple text  from my handler containing the application error message, 
but mod_python adds a bunch of html that I do not want to be returned, i.e.

         if [some problem]:
             req.content_type = "text/plain"
             req.write("Cannot do this because of some problem")
             return apache.HTTP_FORBIDDEN

The client s/w ends up seeing the above message plus a bunch of html 
including a <title>200 OK</title>!

Robert

PS I'm wondering if my other problem (Content-Location) is related to this 
one, i.e. apache/mod_python is seeing the HTTP_FORBIDDEN or HTTP_CREATED 
and is doing its own (default?) thing and adding/changing the returned result?





From grisha at modpython.org  Wed Apr 16 23:10:57 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:47:21 2004
Subject: [mod_python] Stopping additional error content
In-Reply-To: <5.2.0.9.0.20030417114113.01925a78@192.168.0.1>
Message-ID: <20030416230628.M98127-100000@eden.ispol.com>

I think something like this should work (this is off the top of my head,
it's possible I'm missing something):

	req.status = apache.HTTP_FORBIDDEN
	req.write("Cannot do this because of some problem")
	return apache.OK

Grisha

On Thu, 17 Apr 2003, Robert Leftwich wrote:

> Is it possible to stop mod_python appending html error information when a
> 4xx error code is returned from a handler? For example I want to return
> some simple text  from my handler containing the application error message,
> but mod_python adds a bunch of html that I do not want to be returned, i.e.
>
>          if [some problem]:
>              req.content_type = "text/plain"
>              req.write("Cannot do this because of some problem")
>              return apache.HTTP_FORBIDDEN
>
> The client s/w ends up seeing the above message plus a bunch of html
> including a <title>200 OK</title>!
>
> Robert
>
> PS I'm wondering if my other problem (Content-Location) is related to this
> one, i.e. apache/mod_python is seeing the HTTP_FORBIDDEN or HTTP_CREATED
> and is doing its own (default?) thing and adding/changing the returned result?
>
>
>
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From robert at leftwich.info  Thu Apr 17 13:19:54 2003
From: robert at leftwich.info (Robert Leftwich)
Date: Fri Jan  9 21:47:21 2004
Subject: [mod_python] Removing the .py in URL's
Message-ID: <5.2.0.9.0.20030417131727.01915598@192.168.0.1>

Is it possible to run mod_python without requiring an extension at all, 
i.e. instead of  http://www.mysite.com/hello.py can I use 
http://www.mysite.com/hello ?

Robert



From robert at leftwich.info  Thu Apr 17 13:30:24 2003
From: robert at leftwich.info (Robert Leftwich)
Date: Fri Jan  9 21:47:21 2004
Subject: [mod_python] Stopping additional error content
In-Reply-To: <20030416230628.M98127-100000@eden.ispol.com>
References: <5.2.0.9.0.20030417114113.01925a78@192.168.0.1>
Message-ID: <5.2.0.9.0.20030417132517.019de470@192.168.0.1>

At 01:10 PM 17/04/2003, Gregory (Grisha) Trubetskoy wrote:

>I think something like this should work (this is off the top of my head,
>it's possible I'm missing something):
>
>         req.status = apache.HTTP_FORBIDDEN
>         req.write("Cannot do this because of some problem")
>         return apache.OK

Works perfectly, thanks!

Note that it also solves my other problem with the Content-Location, i.e. 
if I do :

def handler(req):
     if req.method == 'POST':
        ...
         req.headers_out["Content-Location"] = "/foo/bar"
         req.status = apache.HTTP_CREATED
         return apache.OK

then the Content-Location is received correctly by the client.

Thanks a lot!

Robert



From grisha at modpython.org  Wed Apr 16 23:48:40 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:47:21 2004
Subject: [mod_python] Removing the .py in URL's
In-Reply-To: <5.2.0.9.0.20030417131727.01915598@192.168.0.1>
Message-ID: <20030416234758.Y98673-100000@eden.ispol.com>

You can do this if you use SetHandler rather than AddHandler.

On Thu, 17 Apr 2003, Robert Leftwich wrote:

> Is it possible to run mod_python without requiring an extension at all,
> i.e. instead of  http://www.mysite.com/hello.py can I use
> http://www.mysite.com/hello ?
>
> Robert
>
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From bar at chello.se  Sun Apr 20 17:58:18 2003
From: bar at chello.se (Bar)
Date: Fri Jan  9 21:47:21 2004
Subject: [mod_python] Trouble getting python to run on XP, Apache 2.0.45, Python
 2.3, mod_python 3.0.3
Message-ID: <5.1.0.14.0.20030420172734.00bd7b28@pop.chello.se>

Hello.
I have been trying to get mod_python to run on the configuration above and 
it wont work. I have read in the maillinglist archives that you could try 
to copy msvcr70.dll to your system32 directory and I have done so. Nothing 
happens.

The error msg I get is "Cannot load c:/.../mod_python.so into server: The 
specified module could not be found."

This sounds very much like the msvcr70.dll problem but it doesn't react 
when I copy the file to system32. Is there some hidden (for other people, 
obvious?) step that I have missed? I have also tried to sprinkle my system 
with the .dll file, placing it in different directories.
Regards,
Daniel 


From erica at simpli.biz  Sun Apr 20 13:35:37 2003
From: erica at simpli.biz (Erica Douglass)
Date: Fri Jan  9 21:47:21 2004
Subject: [mod_python] mod_python causing Apache to segfault (Cobalt RaQ550)
Message-ID: <005701c3077c$66f3aad0$ac7ba8c0@corkyserver>

Hello,

I'm trying to install mod_python on a RaQ550. The 550 comes with Python
2.0 and Apache 1.3.20. Unfortunately, Python is compiled with threads
support, which may be causing the problem I am seeing.

I compiled and installed the mod_python libraries and DSO successfully
with -DEAPI. I then made sure that the mod_python module was the first
one loaded in httpd.conf, and I ran Apache. Apache promptly segfaulted.
I have the traceback, which I have pasted in below.

Does anyone know which file is not being found? Here is the traceback:

(gdb) run -X
Starting program: /usr/sbin/httpd -X
(no debugging symbols found)...[New Thread 1024 (LWP 7107)]
chiliasp: module started, version 3.6.0.33

Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread 1024 (LWP 7107)]
0x40113369 in chunk_alloc (ar_ptr=0x401b3aa0, nb=24) at malloc.c:2784
2784    malloc.c: No such file or directory.
        in malloc.c
(gdb) bt
#0  0x40113369 in chunk_alloc (ar_ptr=0x401b3aa0, nb=24) at
malloc.c:2784
#1  0x401131c4 in __libc_malloc (bytes=18) at malloc.c:2717
#2  0x4000a03c in _dl_new_object () at eval.c:88
#3  0x400051bd in _dl_map_object_from_fd () at eval.c:88
#4  0x40006c91 in _dl_map_object () at eval.c:88
#5  0x4000b818 in openaux () at eval.c:88
#6  0x4000bd00 in _dl_catch_error () at eval.c:88
#7  0x4000adff in _dl_map_object_deps () at eval.c:88
#8  0x4019ca31 in dl_open_worker (a=0xbfffd2d0) at dl-open.c:261
#9  0x4000bd00 in _dl_catch_error () at eval.c:88
#10 0x4019cc5d in _dl_open (file=0x81628bc
"/etc/httpd/modules/mod_python.so", mode=-1073753400, caller=0x80a54f6)
    at dl-open.c:362
#11 0x40025630 in dlopen_doit (a=0xbfffd440) at dlopen.c:39
#12 0x4000bd00 in _dl_catch_error () at eval.c:88
#13 0x40025a06 in _dlerror_run (operate=0x400255fc <dlopen_doit>,
args=0xbfffd440) at dlerror.c:130
#14 0x400255eb in __dlopen_check (file=0x81628bc
"/etc/httpd/modules/mod_python.so", mode=258) at dlopen.c:53
#15 0x080a54f6 in ap_os_dso_load () at eval.c:88
#16 0x000aff0d in ?? () at eval.c:88
#17 0x000aff0d in ?? () at eval.c:88
#18 0x000aff0d in ?? () at eval.c:88
#19 0x000aff0d in ?? () at eval.c:88
#20 0x000aff0d in ?? () at eval.c:88
#21 0x000aff0d in ?? () at eval.c:88
#22 0x000aff0d in ?? () at eval.c:88
#23 0x000aff0d in ?? () at eval.c:88
#24 0x000aff0d in ?? () at eval.c:88

Thanks in advance.

Erica Douglass
Lead Web Developer
Simpli, Inc.


From vjb at vuit.com  Mon Apr 21 07:56:38 2003
From: vjb at vuit.com (Vince Buonassisi)
Date: Fri Jan  9 21:47:21 2004
Subject: [mod_python] error in running a script in apache browser
Message-ID: <741D9C47-7409-11D7-83F2-000A95682CD2@vuit.com>

hi,

i am getting the following error when a python test script is executed  
in the apache web server:

Mod_python error: "PythonHandler reqhandler"

Traceback (most recent call last):

   File "/usr/lib/python2.2/site-packages/mod_python/apache.py", line  
181, in Dispatch
     module = import_module(module_name, _req)

   File "/usr/lib/python2.2/site-packages/mod_python/apache.py", line  
335, in import_module
     module = imp.load_module(mname, f, p, d)

   File "/usr/local/apache/htdocs/reqhandler.py", line 9, in ?
     from xml.dom.ext.reader.Sax2 import FromXmlStream, FromXml

   File  
"/usr/lib/python2.2/site-packages/_xmlplus/dom/ext/reader/__init__.py",  
line 21, in ?
     encoder = codecs.lookup("utf-8")[0] # encode,decode,reader,writer

   File  
"/usr/src/build/143041-i386/install/usr/lib/python2.2/encodings/ 
__init__.py", line 51, in search_function

RuntimeError: cannot unmarshal code objects in restricted execution mode

the script i am running is very simple.  i just send a text message to  
the browser.  i am using the following versions of software:

apache 1.3.26
python 2.2.1
mod python 2.7.8
PyXML 0.7.1
linux redhat 8

any help would be appreciated.

thanks

vince
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: text/enriched
Size: 1254 bytes
Desc: not available
Url : http://mailman.modpython.org/pipermail/mod_python/attachments/20030421/3ccea826/attachment.bin
From grisha at modpython.org  Wed Apr 23 09:53:25 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:47:21 2004
Subject: [mod_python] another test
In-Reply-To: <741D9C47-7409-11D7-83F2-000A95682CD2@vuit.com>
Message-ID: <20030423095248.Q14226-100000@eden.ispol.com>


please ignore this message also - working on getting the list to work
again....

From vjb at vuit.com  Wed Apr 23 20:25:32 2003
From: vjb at vuit.com (Vincent J. Buonassisi)
Date: Fri Jan  9 21:47:21 2004
Subject: [mod_python] problems finding module 
Message-ID: <3EA7592C.8000704@vuit.com>

hi,

i am having problems in getting mod_python to run the following simple 
script in apache:

	import sys

	from WVWService.util import XMLUtil

	from mod_python import apache

	def handler(req):

    	 path = str(sys.path)
    	 print path
    	 req.content_type = "text/plain"
    	 req.send_http_header()
     	req.write(path)

     	return apache.OK

	if __name__ == "__main__":
   	  print sys.path

with the followig entry in apache's httpd.conf file:

	<Directory /var/www/html>
   	    AddHandler python-program .py
    	    PythonHandler myscript
	    PythonPath
		"sys.path+['/home/vjb/workspace/wvwBase3/src/wvw']"
    	    PythonDebug On
	</Directory>


i get the following error in my web browser:


Mod_python error: "PythonHandler myscript"

Traceback (most recent call last):

   File "/usr/local/lib/python2.2/site-packages/mod_python/apache.py", 
line 320, in HandlerDispatch
     module = import_module(module_name, config)

   File "/usr/local/lib/python2.2/site-packages/mod_python/apache.py", 
line 496, in import_module
     f, p, d = imp.find_module(parts[i], path)

ImportError: No module named myscript


if i comment the PythonPath line the i get the error:

ImportError: No module named WVWService.util


can someone please tell me what i am doing wrong?

thanks,

vince

From vjb at vuit.com  Wed Apr 23 20:59:17 2003
From: vjb at vuit.com (Vince Buonassisi)
Date: Fri Jan  9 21:47:21 2004
Subject: [mod_python] problems finding module 
In-Reply-To: <3EA7592C.8000704@vuit.com>
Message-ID: <1F1049D3-7609-11D7-9E94-000A95682CD2@vuit.com>

sorry, i forgot to add my environment:

python 2.2.2
apache 2.0.40
modpython 3.0.3

thanks,


On Mercoled?, apr 23, 2003, at 20:25 US/Pacific, Vincent J. Buonassisi 
wrote:

> hi,
>
> i am having problems in getting mod_python to run the following simple 
> script in apache:
>
> 	import sys
>
> 	from WVWService.util import XMLUtil
>
> 	from mod_python import apache
>
> 	def handler(req):
>
>    	 path = str(sys.path)
>    	 print path
>    	 req.content_type = "text/plain"
>    	 req.send_http_header()
>     	req.write(path)
>
>     	return apache.OK
>
> 	if __name__ == "__main__":
>   	  print sys.path
>
> with the followig entry in apache's httpd.conf file:
>
> 	<Directory /var/www/html>
>   	    AddHandler python-program .py
>    	    PythonHandler myscript
> 	    PythonPath
> 		"sys.path+['/home/vjb/workspace/wvwBase3/src/wvw']"
>    	    PythonDebug On
> 	</Directory>
>
>
> i get the following error in my web browser:
>
>
> Mod_python error: "PythonHandler myscript"
>
> Traceback (most recent call last):
>
>   File "/usr/local/lib/python2.2/site-packages/mod_python/apache.py", 
> line 320, in HandlerDispatch
>     module = import_module(module_name, config)
>
>   File "/usr/local/lib/python2.2/site-packages/mod_python/apache.py", 
> line 496, in import_module
>     f, p, d = imp.find_module(parts[i], path)
>
> ImportError: No module named myscript
>
>
> if i comment the PythonPath line the i get the error:
>
> ImportError: No module named WVWService.util
>
>
> can someone please tell me what i am doing wrong?
>
> thanks,
>
> vince
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From timbomb at timbomb.net  Fri Apr 25 16:09:24 2003
From: timbomb at timbomb.net (Tim Mansfield)
Date: Fri Jan  9 21:47:21 2004
Subject: [mod_python] Trouble compiling mod_python-3.0.3  on Red Hat with
	Apache httpd-2.0.39 + Python-2.2.1
Message-ID: <5.1.0.14.0.20030425160211.0920acf0@timbomb.net>


... which I believe are the correct versions. I get this output when apxs 
tries to do its thing (ie step one in the make).

Any ideas?

Tim
----------------

$ make
make[1]: Entering directory `/home/timbomb/mod_python-3.0.3/src'

Compiling for DSO.

/opt/local/bin/apxs -I/home/timbomb/mod_python-3.0.3/src/include 
-I/opt/local/stow/httpd-2.0.39/include 
-I/opt/local/bin/../stow/Python-2.2.1/include/python2.2 -c mod_python.c 
_apachemodule.c requestobject.c tableobject.c util.c serverobject.c 
connobject.c filterobject.c hlist.c hlistobject.c 
-L/opt/local/bin/../stow/Python-2.2.1/lib/python2.2/config  -Xlinker 
-export-dynamic      -lm  -lpython2.2 -ldl -lpthread -lutil -lm
/opt/local/stow/httpd-2.0.39/build/libtool --silent --mode=compile gcc 
-prefer-pic  -DAP_HAVE_DESIGNATED_INITIALIZER -DLINUX=2 -D_REENTRANT 
-D_XOPEN_SOURCE=500 -D_BSD_SOURCE -D_SVID_SOURCE -D_GNU_SOURCE -g -O2 
-pthread -I/opt/local/stow/httpd-2.0.39/include 
-I/home/timbomb/mod_python-3.0.3/src/include 
-I/opt/local/stow/httpd-2.0.39/include 
-I/opt/local/bin/../stow/Python-2.2.1/include/python2.2  -c -o 
mod_python.lo mod_python.c && touch mod_python.slo
mod_python.c: In function `directive_PythonInputFilter':
mod_python.c:1507: incompatible type for argument 3 of 
`ap_register_input_filter'
mod_python.c:1507: too many arguments to function `ap_register_input_filter'
mod_python.c: In function `directive_PythonOutputFilter':
mod_python.c:1532: incompatible type for argument 3 of 
`ap_register_output_filter'
mod_python.c:1532: too many arguments to function `ap_register_output_filter'
apxs:Error: Command failed with rc=65536
.
make[1]: *** [mod_python.so] Error 1
make[1]: Leaving directory `/home/timbomb/mod_python-3.0.3/src'
make: *** [do_dso] Error 2

From big.stick at bol.com.br  Fri Apr 25 10:26:31 2003
From: big.stick at bol.com.br (Big Stick)
Date: Fri Jan  9 21:47:21 2004
Subject: [mod_python] Trouble compiling mod_python-3.0.3  on Red Hat with
	Apache httpd-2.0.39 + Python-2.2.1
In-Reply-To: <5.1.0.14.0.20030425160211.0920acf0@timbomb.net>
References: <5.1.0.14.0.20030425160211.0920acf0@timbomb.net>
Message-ID: <129475794.20030425102631@bol.com.br>

Em 25/4/2003 ?s 03:09, Tim escreveu:


> ... which I believe are the correct versions. I get this output when apxs 
> tries to do its thing (ie step one in the make).

> Any ideas?

Make sure that httpd-devel is installed, since apxs is provided by
httpd-devel, and RH doesn?t seem to install it by default.

-- stick
From brian at linus.smenet.org  Fri Apr 25 08:14:38 2003
From: brian at linus.smenet.org (Brian Allbee)
Date: Fri Jan  9 21:47:21 2004
Subject: [mod_python] mod_python newbie looking for information/references
Message-ID: <1051280078.1141.8.camel@localhost.localdomain>

Howdy, all!

I'm a newbie to mod_python (looking forward to working with it) who's
looking for suggestions/example code/documentation/references to help me
get started. FAQ was down last I looked (and site seems to be offline,
or at least not accessible from this location).

Any suggestions/direction would be appreciated!

From brian at linus.smenet.org  Fri Apr 25 12:05:24 2003
From: brian at linus.smenet.org (Brian Allbee)
Date: Fri Jan  9 21:47:21 2004
Subject: [mod_python] 
	RE: mod_python newbie looking for information/refere nces
In-Reply-To: <D31B04F24EDE7644BB169BB4F080778A06C239EE@s30342g004005>
References: <D31B04F24EDE7644BB169BB4F080778A06C239EE@s30342g004005>
Message-ID: <1051293924.1141.20.camel@localhost.localdomain>

Thanks, Hans!

Am I understanding things correctly then (after reading through the
tutorial, especially section 3.4) that if I have the configuration for
Apache set to something like:

AddHandler python-program .py
PythonHandler mod_python.publisher

that it is possible to set up pseudo-pages by generating different
module-files for each such "page?" For example, an "index.py" and
"form.py" page can have distinctive outputs from each other, but are
still essentially called as if they were "real" pages
(www.site.com/index and www.site.com/form, respectively)? If so, is the
file-extension necessary, or would the example URLs still call index.py
and form.py respectively? And I'm assuming that under those
circumstances each would need a default handler() function (perhaps in
addition to any other functions that might be called by something like
www.site.com/form/submission) if they were expected to be able to do
anything without any direct query-string or form-field input.

I presume that standard python module-import syntax is supported
(allowing for the development of common code to be shared between
several modules, I hope) as well?

Hoping I'm understanding things correctly - the more I look at
mod_python's capabilities, the more I'm liking what I see...

Brian

On Fri, 2003-04-25 at 08:46, Yandle, Hans wrote:
> Had similar problems. I use Apache 1.3.X with Python 2.2.X. I have
> included all the files for modpython 2.7.8. I do not have locally
> cached the modpython 3.X associated files for Apache 2.X.
> 
> Welcome to real power,
> 
> Hans


From grisha at modpython.org  Fri Apr 25 16:06:45 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:47:21 2004
Subject: [mod_python] Trouble compiling mod_python-3.0.3  on Red Hat with
 Apache httpd-2.0.39 + Python-2.2.1
In-Reply-To: <129475794.20030425102631@bol.com.br>
Message-ID: <20030425160545.V70432-100000@eden.ispol.com>


Also, I'm not even sure 2.0.39 can compile against mp 3.0.3, I highly
recommend you switch to apache 2.0.45 and Python 2.2.2.

On Fri, 25 Apr 2003, Big Stick wrote:

> Em 25/4/2003 ?s 03:09, Tim escreveu:
>
>
> > ... which I believe are the correct versions. I get this output when apxs
> > tries to do its thing (ie step one in the make).
>
> > Any ideas?
>
> Make sure that httpd-devel is installed, since apxs is provided by
> httpd-devel, and RH doesn?t seem to install it by default.
>
> -- stick
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>

From vjb at vuit.com  Mon Apr 28 17:36:43 2003
From: vjb at vuit.com (Vince Buonassisi)
Date: Fri Jan  9 21:47:21 2004
Subject: [mod_python] mod_python import error
Message-ID: <A68963E0-79DA-11D7-B1FA-000A95682CD2@vuit.com>

hi,

i am getting the following error from mod_python when my python script 
imports the module test:

Mod_python error: "PythonHandler myscript"

Traceback (most recent call last):

   File "/usr/local/lib/python2.2/site-packages/mod_python/apache.py", 
line 320, in HandlerDispatch
     module = import_module(module_name, config)

   File "/usr/local/lib/python2.2/site-packages/mod_python/apache.py", 
line 499, in import_module
     module = imp.load_module(mname, f, p, d)

   File "/usr/local/apache/htdocs/myscript.py", line 4, in ?
     from WVWService.test import HTTPClient

ImportError: No module named test


just before this import statement there is another import statement 
that imports a
module from the same area and it seems to work just fine:

from WVWService.util import XMLUtil
from WVWService.test import HTTPClient


i have the following environment environment:

   mod_pythonq	3.0.3
   python	2.2.2
   apache	2.0.45
   os		redhat 8.0

does anyone have any ideas on how i can solve this problem?

thanks,

vince

From dhoutz at advancedinterfaces.com  Wed Apr 30 14:33:40 2003
From: dhoutz at advancedinterfaces.com (Dan Houtz)
Date: Fri Jan  9 21:47:21 2004
Subject: [mod_python] help with a few basics
Message-ID: <CJEFIGIHCACFLNNGMEEIGEDACAAA.dhoutz@advancedinterfaces.com>

Greetings,

I'm just starting to get into python and mod_python. I have installed
mod_python on Windows XP with Apache 2.0.45 to start getting my feet wet.
After some intial troubles, I believe I finally have everything working
correctly. I have managed to follow the test section and "hello world prints
properly. MY next question is, am I able to accomplish the same thing useing
print "Hello World" instead of req.write("Hello World"). I've seen many
coding examples using print, but it does not work correctly when I attempt
to use it.

For instance, this code:
	def handler(req):
	print "Content-Type: text/html\n\n"
   	print "Hello World"

Produces:
	Mod_python error: "PythonHandler mptest"

	Traceback (most recent call last):

	  File "C:\Python22\Lib\site-packages\mod_python\apache.py", line 334, in
HandlerDispatch
	    assert (type(result) == type(int())), \

	AssertionError: Handler 'mptest' returned invalid return code.


So, I tried:
	def handler(req):
	print "Content-Type: text/html\n\n"
   	print "Hello World"
	return apacke.OK

and it produced a blank page


Your help is appreciated.

Thanks,
Dan Houtz

From neel at mediapulse.com  Tue Apr  1 10:36:53 2003
From: neel at mediapulse.com (Michael C. Neel)
Date: Fri Jan  9 21:53:26 2004
Subject: [mod_python] RE: 1 page Not Found - every 4 page refresh cycle?
Message-ID: <C0FC22C08B82074A88B50061764157775C14@johnson.mediapulse.net>

Forwarding this over to the mod_python list, as I am also have some
weird issues we have been unable to track the cause of.  I recently
rolled out a fixup handler in mod_python to a host of server, and now,
randomly, you will get the error described below.  All are mod_python
2.7.8 and various RH 7.x with Apache 1.3.x. I don't use publisher.
Anyone seeing something like this?

Mike

-----Original Message-----
From: Juan Carlos Rodrigo Garcia [mailto:jrodrigo@xpyro.com] 
Sent: Tuesday, April 01, 2003 8:03 AM
To: python-dev@httpd.apache.org
Subject: 1 page Not Found - every 4 page refresh cycle?


Hello, I can't suscribe to mod_python-request@modpython.org, and I'm
having a little problem.

I'm using mod_python 3.0.3 and apache 2.0.44.

I set the PythonHandler to mod_python.publisher

Because I want to use mod_python the PHP,ASP,CFUSION way.
Every script does its own work. So this is my apache setup:

<VirtualHost *>
      ServerName www.devel.in
      DirectoryIndex index.py
      AddHandler python-program .py
      PythonHandler mod_python.publisher
      PythonDebug On
</VirtualHost>

I have serveral pages in my web and everything goes well with 
mod_python auth, uploading...

BUT when I browse pages (scripts) with little content (A tiny script
that outputs very small amount of html), then every 
time I refresh four times or so the tiny script I get one:

  Not Found
  The requested URL /search/index.py was not found on this server.

This NEVER happens refreshing scripts that print long listings, or lots
of HTML data.

I've found this behaviour in two different machines...
One running the RedHat 8.0 distro web server (apache 2.0 + mod_python).
And in my personal computer were I've installed varios versions of
apache 2 and mod_python 3, every set-up acted the same way.


I think that there is a problem with mod_python.publisher loading tiny
scripts or showing little output.


Thanks for all your good work.





From neel at mediapulse.com  Tue Apr  1 11:26:37 2003
From: neel at mediapulse.com (Michael C. Neel)
Date: Fri Jan  9 21:53:26 2004
Subject: [mod_python] Why are you using mod_python?
Message-ID: <C0FC22C08B82074A88B50061764157775C15@johnson.mediapulse.net>

I broke perl.  No, not in a preformance way, or in I couldn't do
something in perl.  I found that in larger projects, perl's lack of OO
(and the ease of use of the OO features it does have) really casued
large delays in development.  Also I noticed that code in perl seemed to
be apt to more bugs than code in another language.  Over all I came to
the descision that perl's strength lies in the script, and is not suited
for the application.

I have worked with, and took another look at PHP, but I don't like PHP
on a design level.  I like to have data, design, and logic all
seperated.  PHP doesn't lend itself well to this.  You can make that
work, but too many includes in PHP can result in a big preformance hit.

Python does have a very good set of OO features.  I was also impress in
how cross platform it really was.  Many languages claim this, but you
often find you need to tweak code to make it work.  With Albatross I
found a template system that allowed me to have data, design, and logic
in separate places (I also gained a flexible framework for the logic
part, which was a big plus).

Preformance was a concern, as I had forsaken CGI awhile ago.  I ran some
"hello world" test on my laptop, 1Ghz with 256 Megs.  CGI handled about
100 requests per second, perl and python both ran about 250 request per
second in a "fastCGI" setting, python as a content handler ran about 600
requests per second, PHP 650, and perl 700.  A Native C handler ran
about 1400 requests per second.  C has too long of a development cycle,
and the gains in method were worth the 100 requests per second.

I have since deployed several applications for clients in
mod_python/albatross as well as some personal sites.  Some of these have
been massive projects for very big names.  I am proud to say these have
had no issue in this platform, and I actually feel extreamly confident
in them.  I also like that I can hide the fact the platform so that the
user is even unaware the page is dynamic.  A side project I did that you
can see what I mean is www.fistsofniall.com - this site is all
mod_python/albatross (execption is the formus).

I did see a comment that probably only 1% of the people use a handler,
and instead use a fastcgi.  If this is the case, then it is a shame, as
the benchmarks told me.  How publisher fits in, I don't know - I've
never tried it.  If you look into it, you'll find that writing a handler
is really pretty easy.

Mike

-----Original Message-----
From: Gregory (Grisha) Trubetskoy [mailto:grisha@modpython.org] 
Sent: Friday, March 28, 2003 5:39 PM
To: mod_python@modpython.org
Subject: [mod_python] Why are you using mod_python?



Hello everyone -

As the original author of mod_python I think I'm allowed to jerk
people's chains with this simple question:

Why are you using mod_python?

You can reply on or off list, either is fine. The results, after I get
to mull over them will be published in one way or another.

I've decided to ask the list because I recently realized that I am not
sure I know the answer. Not to say that I don't like mod_python, on the
contrary, I do, but to formulate in words exactly why is rather
difficult. Besides, my opinion is biased anyway :-)

Thanks in advance!

Grisha


_______________________________________________
Mod_python mailing list
Mod_python@modpython.org
http://www.modpython.org/mailman/listinfo/mod_python


From LBerezhny at DevIS.com  Tue Apr  1 12:00:11 2003
From: LBerezhny at DevIS.com (Lex Berezhny)
Date: Fri Jan  9 21:53:26 2004
Subject: [mod_python] Why are you using mod_python?
In-Reply-To: <C0FC22C08B82074A88B50061764157775C15@johnson.mediapulse.net>
References: <C0FC22C08B82074A88B50061764157775C15@johnson.mediapulse.net>
Message-ID: <1049216411.17863.4.camel@hortus>

On Tue, 2003-04-01 at 11:26, Michael C. Neel wrote:
> I did see a comment that probably only 1% of the people use a handler,
> and instead use a fastcgi.  If this is the case, then it is a shame, as
> the benchmarks told me.  How publisher fits in, I don't know - I've
> never tried it.  If you look into it, you'll find that writing a handler
> is really pretty easy.

Most of the responses to Grishas email note that they use mod_python for
its handler. I'm not sure where the 1% comes from.

I also use the handler :-)

In fact, I feel that the handler is much easier to use and even figure
out, than the publisher.

my two cents,

  - lex


From vlindberg at verio.net  Tue Apr  1 10:37:41 2003
From: vlindberg at verio.net (VanL)
Date: Fri Jan  9 21:53:26 2004
Subject: [mod_python] Why are you using mod_python?
In-Reply-To: <1049216411.17863.4.camel@hortus>
References: <C0FC22C08B82074A88B50061764157775C15@johnson.mediapulse.net> <1049216411.17863.4.camel@hortus>
Message-ID: <3E89CE65.60207@verio.net>

>
>
>In fact, I feel that the handler is much easier to use and even figure
>out, than the publisher.
>

Maybe because I started out with Zope, I thought that the publisher 
handler was dead simple.  That is what I am using right now.

VanL


From davidf at sjsoft.com  Wed Apr  2 13:53:01 2003
From: davidf at sjsoft.com (David Fraser)
Date: Fri Jan  9 21:53:26 2004
Subject: [mod_python] Building mod_python installer for Windows
Message-ID: <3E8ACF1D.60109@sjsoft.com>

Hi

I was wondering if anyone could give me tips on how to build the 
mod_python installer for Windows.

Seems that the dist subdirectory contains stuff to build it using 
distutils, but there was a comment that it should only work in Python 
2.3 because of post install scripts. Is this true? Does this affect the 
build machine only or the target machine too?

Secondly it seems to need to have had configure run. This brings up more 
general build issues. I have mingw, MSys, cygwin installed. However 
configure wants apxs which doesn't come with my Apache 2.0 build for 
Windows, and presumably I need a source tree for Apache. Do I have to 
actually build Apache for Windows, or is just the source sufficient?

Thanks
David


From big.stick at bol.com.br  Wed Apr  2 12:07:14 2003
From: big.stick at bol.com.br (Big Stick)
Date: Fri Jan  9 21:53:26 2004
Subject: [mod_python] vs 3.0.3 compiling issues
Message-ID: <11510490264.20030402120714@bol.com.br>

Hello,

I?m using Red Hat 8, httpd 2.0.40, mod_python 3.0.0 and Python
2.2.2. Everything is working, but I?m experiencing this error when I
try to compile mod_python 3.0.3 (needed for other apps):

...
checking your blood pressure... a bit high, but we can proceed
checking whether apxs is available
checking for --with-apxs... no
checking for apxs in /usr/local/apache/sbin... no
checking for apxs in your PATH... checking for apxs... no
configure: warning: **** apxs was not found, DSO compilation will not be available.
configure: warning: **** You can use --with-apxs to specify where your apxs is.
configure: error: Neither static nor DSO option available, there is no point in continuing.
[r@r r] #

Any hints on this?

Thanks in advance.
- stick


From manfred.stienstra at dwerg.net  Wed Apr  2 17:35:40 2003
From: manfred.stienstra at dwerg.net (Manfred Stienstra)
Date: Fri Jan  9 21:53:26 2004
Subject: [mod_python] vs 3.0.3 compiling issues
In-Reply-To: <11510490264.20030402120714@bol.com.br>
References: <11510490264.20030402120714@bol.com.br>
Message-ID: <200304021735.40618.manfred.stienstra@dwerg.net>

On Wednesday 02 April 2003 17:07, Big Stick wrote:
> Any hints on this?

locate apxs

./configure --with-apxs="PATH TO APXS"

Manfred

From grisha at modpython.org  Wed Apr  2 11:53:03 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:53:27 2004
Subject: [mod_python] Building mod_python installer for Windows
In-Reply-To: <3E8ACF1D.60109@sjsoft.com>
Message-ID: <20030402114701.V45547-100000@eden.ispol.com>

To build the windows installer, you have to first compile mod_python.so
using MS VC++ (there is a project file in the src directory), then you
copy the mod_python.so to a UNIX server. The actual installer,
paradoxically, has to be build on UNIX, and it's as simple as cd-ing into
dist and running "make windist". It *does* require python 2.3 (but only
to build the installer, the actual mod_python.so can be build with any
version of Python above 2.2).

I have no idea if or how this would work on cygwin though.

Grisha

On Wed, 2 Apr 2003, David Fraser wrote:

> Hi
>
> I was wondering if anyone could give me tips on how to build the
> mod_python installer for Windows.
>
> Seems that the dist subdirectory contains stuff to build it using
> distutils, but there was a comment that it should only work in Python
> 2.3 because of post install scripts. Is this true? Does this affect the
> build machine only or the target machine too?
>
> Secondly it seems to need to have had configure run. This brings up more
> general build issues. I have mingw, MSys, cygwin installed. However
> configure wants apxs which doesn't come with my Apache 2.0 build for
> Windows, and presumably I need a source tree for Apache. Do I have to
> actually build Apache for Windows, or is just the source sufficient?
>
> Thanks
> David
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From grisha at modpython.org  Wed Apr  2 11:54:58 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:53:27 2004
Subject: [mod_python] vs 3.0.3 compiling issues
In-Reply-To: <200304021735.40618.manfred.stienstra@dwerg.net>
Message-ID: <20030402115346.S45547-100000@eden.ispol.com>

I'd also recommend a later version of Apache - 2.0.40 is ancient.

Grisha

On Wed, 2 Apr 2003, Manfred Stienstra wrote:

> On Wednesday 02 April 2003 17:07, Big Stick wrote:
> > Any hints on this?
>
> locate apxs
>
> ./configure --with-apxs="PATH TO APXS"
>
> Manfred
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From big.stick at bol.com.br  Wed Apr  2 15:15:31 2003
From: big.stick at bol.com.br (Big Stick)
Date: Fri Jan  9 21:53:27 2004
Subject: [mod_python] vs 3.0.3 compiling issues
In-Reply-To: <20030402115346.S45547-100000@eden.ispol.com>
References: <20030402115346.S45547-100000@eden.ispol.com>
Message-ID: <4121787518.20030402151531@bol.com.br>

Em 2/4/2003 ?s 13:54, Manfred Stienstra escreveu:
>
> locate apxs
>
> ./configure --with-apxs="PATH TO APXS"

It took me a while to find out that apxs is provided by httpd-devel,
and httpd-devel was not installed here. Did that and now everything
seems to be working.

Thanks a lot.
- stick


From remi at python-hosting.com  Thu Apr  3 18:08:02 2003
From: remi at python-hosting.com (Remi Delon)
Date: Fri Jan  9 21:53:27 2004
Subject: [mod_python] [ANN] Python-Hosting.com: new hosting provider specialized in Python
Message-ID: <NFBBIBODGLHPEGPDOAGKIEIBDLAA.remi@python-hosting.com>

Hello everyone,

I am pleased to announce http://python-hosting.com, a new hosting provider
specialized in Python.
We support most Python web tools, including mod_python, Zope, Plone,
WebWare, CherryPy, ...
You can run your mod_python site for 15$/month.


Remi Delon     remi@remove-me.python-hosting.com
----------------------
Specialized python hosting: http://www.python-hosting.com
Python application server: http://www.cherrypy.org
Free CherryPy hosting: http://www.freecherrypy.org
----------------------




From chris at sebis.com  Thu Apr  3 15:31:12 2003
From: chris at sebis.com (Chris Johnson)
Date: Fri Jan  9 21:53:27 2004
Subject: [mod_python] newbie can't start apache2.0.44 with mod_python3.0.3
Message-ID: <3E8CA820.6030606@sebis.com>

hi group,
    I'm having a problem starting apache2.0.44. I added the line:

LoadModule python_module      modules/mod_python.so

    to my httpd.conf. and when I run 'apachectl start' it says:

Cannot load /httpd/apache/modules/mod_python.so into server: /httpd/apache/modules/mod_python.so: Undefined symbol "pthread_sigmask"

So did I miss a step. I've looked over the FAQ contents and googled for 
the error but haven't been able to find any mention of this error.
thanks,
chrisj


From grisha at modpython.org  Thu Apr  3 17:17:48 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:53:27 2004
Subject: [mod_python] newbie can't start apache2.0.44 with mod_python3.0.3
In-Reply-To: <3E8CA820.6030606@sebis.com>
Message-ID: <20030403171703.L80044-100000@eden.ispol.com>

If this is on FreeBSD? There is a note about it in the README.

Grisha

On Thu, 3 Apr 2003, Chris Johnson wrote:

> hi group,
>     I'm having a problem starting apache2.0.44. I added the line:
>
> LoadModule python_module      modules/mod_python.so
>
>     to my httpd.conf. and when I run 'apachectl start' it says:
>
> Cannot load /httpd/apache/modules/mod_python.so into server: /httpd/apache/modules/mod_python.so: Undefined symbol "pthread_sigmask"
>
> So did I miss a step. I've looked over the FAQ contents and googled for
> the error but haven't been able to find any mention of this error.
> thanks,
> chrisj
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From ron at rwsoft.ca  Thu Apr  3 22:42:50 2003
From: ron at rwsoft.ca (Ron Wills)
Date: Fri Jan  9 21:53:27 2004
Subject: [mod_python] Session Tracking
Message-ID: <3E8D1B5A.40001@rwsoft.ca>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hello All

~  There's something that I can't seem to find the in the docs. Currently
I have a set of PHP libs that I use, but was hoping to port my
authenication classes to mod_python. This could simplify things for me,
but I can seem to find anything to do session tracking (with cookies or
so on). Any help would be appretiated.

- --
Ron Wills
RW Software - Owner
http://www.rwsoft.ca
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.6 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQE+jRtZYOHhBYo0q6cRAitPAJ419pftd5SJO6pQUGurlsublJRdywCgrJ3O
dTvskmYzFvxQER9yYVokhW4=
=lSLk
-----END PGP SIGNATURE-----


From davidf at sjsoft.com  Fri Apr  4 08:21:06 2003
From: davidf at sjsoft.com (David Fraser)
Date: Fri Jan  9 21:53:27 2004
Subject: [mod_python] Session Tracking
In-Reply-To: <3E8D1B5A.40001@rwsoft.ca>
References: <3E8D1B5A.40001@rwsoft.ca>
Message-ID: <3E8D2452.7010803@sjsoft.com>

Ron Wills wrote:

> Hello All
>
> ~  There's something that I can't seem to find the in the docs. Currently
> I have a set of PHP libs that I use, but was hoping to port my
> authenication classes to mod_python. This could simplify things for me,
> but I can seem to find anything to do session tracking (with cookies or
> so on). Any help would be appretiated.
>
I've just done this for our application for mod_python.
Basically we use the getcookie and setcookie functions below to get and 
set the cookie
Then we have session objects, each of which has a unique session string, 
which is set in the cookie.
We have a global sessioncache dictionary that looks up a session object 
based on the session string.
We also use this for handling user login etc, so its a bit more 
complicated, but that's the basic
idea and you should be able to use the same idea.

When doing this, I was wondering whether some cookie methods could be 
added to the request object,
since that's where they seem to belong? Could pass in the class of 
cookie you want to use etc...
Any thoughts?

David

def getcookie(req):
  """Reads in any cookie info from the request"""
  try:
    cookiestring = req.headers_in["Cookie"]
  except:
    cookiestring = {}
  cookie = Cookie.SimpleCookie()
  cookie.load(cookiestring)
  cookiedict = {}
  for key, morsel in cookie.iteritems():
    cookiedict[key] = morsel.value
  return cookiedict

def setcookie(req, cookiedict):
  """Puts the bits from the cookiedict into Morsels, sets the req cookie"""
  # construct the cookie from the cookiedict
  cookie = Cookie.SimpleCookie()
  for key, value in cookiedict.iteritems():
    cookie[key] = value
  # add the cookie headers to req.headers_out
  for key, morsel in cookie.iteritems():
    req.headers_out.add('Set-Cookie', morsel.OutputString())




From gnb at itga.com.au  Fri Apr  4 16:38:57 2003
From: gnb at itga.com.au (Gregory Bond)
Date: Fri Jan  9 21:53:27 2004
Subject: [mod_python] Session Tracking 
In-Reply-To: Your message of Thu, 03 Apr 2003 22:42:50 -0700.
Message-ID: <200304040638.QAA04290@lightning.itga.com.au>

> but I can seem to find anything to do session tracking (with cookies or
> so on). Any help would be appretiated.

I got sick of this question so I made an FAQ entry!

	http://www.modpython.org/FAQ/faqw.py?req=show&file=faq03.008.htp




From mike.looijmans at asml.com  Fri Apr  4 08:40:24 2003
From: mike.looijmans at asml.com (Mike Looijmans)
Date: Fri Jan  9 21:53:27 2004
Subject: [mod_python] Session Tracking
Message-ID: <01c2fa75$12017c00$926a1e6e@wsasd464>

I use the following trick to use the standard Cookie class in mod_python:

##
req.headers_out.add('Set-Cookie', cookies.output(header='',
sep='\r\nSet-Cookie:'))
##

By omitting the first header, and setting the "separator" to "Set-Cookie:' it
actually may add more than just one header here, but who cares...

Actually, I feel that Cookie should provide some method of access to the
individual cookie strings. And a Request.add_cookies(...) method would be even
better (mod_python 3.0.5?):

##
cookies = Cookie.SmartCookie()
...
req.add_cookies(cookies)
##


--
Mike Looijmans
Private: http://www.milosoftware.com

-----Original Message-----
...
>When doing this, I was wondering whether some cookie methods could be
>added to the request object,
>since that's where they seem to belong? Could pass in the class of
>cookie you want to use etc...
>Any thoughts?
...


From Paul.Moore at atosorigin.com  Fri Apr  4 11:53:20 2003
From: Paul.Moore at atosorigin.com (Moore, Paul)
Date: Fri Jan  9 21:53:27 2004
Subject: [mod_python] Problem with mod_python.cgihandler in Python 2.2?
Message-ID: <16E1010E4581B049ABC51D4975CEDB88619A2D@UKDCX001.uk.int.atosorigin.com>

I just tried out a CGI script under the cgihandler with mod_python 3.0.3.

I got an error as follows (wrapped for readability):

[Fri Apr 04 11:23:59 2003] [error] [client 127.0.0.1]
PythonHandler mod_python.cgihandler:
Traceback (most recent call last): 
[Fri Apr 04 11:23:59 2003] [error] [client 127.0.0.1]
PythonHandler mod_python.cgihandler:
File "C:\Python22\lib\site-packages\mod_python\apache.py",
line 335, in HandlerDispatch
    result = object(req)
[Fri Apr 04 11:23:59 2003] [error] [client 127.0.0.1]
PythonHandler mod_python.cgihandler:
File "C:\Python22\lib\site-packages\mod_python\cgihandler.py",
line 140, in handler
    apache.restore_nocgi(env, si, so)
[Fri Apr 04 11:23:59 2003] [error] [client 127.0.0.1]
PythonHandler mod_python.cgihandler:
File "C:\Python22\lib\site-packages\mod_python\apache.py",
line 764, in restore_nocgi
    for k in osenv: 

It looks to me like the code at line 764 in apache.py is wrong -

    for k in osenv:
        del osenv[k]

should be

    for k in osenv.keys():
        del osenv[k]

Otherwise, you're modifying the osenv dictionary while you're
iterating over it. Python 2.2.2 seems to have made this an error,
rather than letting it pass (and possibly giving incorrect
results).

At least, I made the above change, and started getting errors from
my script and Apache config, rather than from mod_python :-)

Paul.


From cmulcahy-modpython at avesi.com  Fri Apr  4 10:18:36 2003
From: cmulcahy-modpython at avesi.com (cmulcahy-modpython@avesi.com)
Date: Fri Jan  9 21:53:27 2004
Subject: [mod_python] FAQ
Message-ID: <20030404151836.26928.qmail@zulu.avenirsolutions.com>

How about an index page for "http://www.modpython.org/FAQ" 

Modpython's greatest weakness is a sparseness of documentation
and a lack of explanation/evangelism for the handler model. 

For general apache-handler enlightenment one must often look
for books/google-searches on mod_perl and adapt as necessary. 

mulc

From the_edge2020 at hotmail.com  Sun Apr  6 03:53:44 2003
From: the_edge2020 at hotmail.com (Tommy !!)
Date: Fri Jan  9 21:53:27 2004
Subject: [mod_python] Import Issues
Message-ID: <F46Y7ZggDttW3SC7g4Z0002e234@hotmail.com>

Hi all,

Just curious as to why (by design?) mod_python does not allow one to import 
modules in the same directory as the executing script - instead you have to 
resort to altering sys.path inside each script in order to get it importing 
correctly.

This is an issue if you don't have access to the web server to modify 
httpd.conf and .htaccess files are disabled/limited. Additionally, I may not 
have access to the site-packages directory, or any other directory, for that 
matter, from which my script could import reusable components.

I find this makes it really awkward to code anything above a single file 
Python script (e.g. I'm using a session handling mechanism specific to a 
single web application). Using os.getcwd() seems to indicate that the cwd 
when executing a script with mod_python is my Apache2 directory.

This behaviour occurs on Apache 2.0.43, mod_python 3.0.3, Linux AND Windows.

Am I missing something simple?

Excuse me if this didn't make much sense, it's 4am here :)

Thanks in advance.

Regards,
Tom L


_________________________________________________________________
Hotmail now available on Australian mobile phones. Go to  
http://ninemsn.com.au/mobilecentral/hotmail_mobile.asp


From mike_verdone at shaw.ca  Sat Apr  5 11:20:26 2003
From: mike_verdone at shaw.ca (Mike Verdone)
Date: Fri Jan  9 21:53:27 2004
Subject: [mod_python] Import Issues
In-Reply-To: <F46Y7ZggDttW3SC7g4Z0002e234@hotmail.com>
References: <F46Y7ZggDttW3SC7g4Z0002e234@hotmail.com>
Message-ID: <200304051120.26133.mike_verdone@shaw.ca>

On April 5, 2003 10:53 am, Tommy !! wrote:
> Hi all,
>
> Just curious as to why (by design?) mod_python does not allow one to import
> modules in the same directory as the executing script - instead you have to
> resort to altering sys.path inside each script in order to get it importing
> correctly.
>
> This is an issue if you don't have access to the web server to modify
> httpd.conf and .htaccess files are disabled/limited. Additionally, I may
> not have access to the site-packages directory, or any other directory, for
> that matter, from which my script could import reusable components.
>

The main problem is that mod_python doesn't know what directory it's in when 
it executes a script except in two cases (as far as I can tell):

1. You put the AddHandler directive in the .htaccess file in that directory.

2. You enclose the AddHandler directive in a <Directory> block specifying the 
full path in apache.conf.

Otherwise mod_python has no idea where it's really executing from, and seems 
to default to the apache dir. If your administrator has restricted .htaccess 
and won't set up apache.conf for you, then you're kinda hooped.

Have you looked at the PythonPath directive? You may be able to get away with 
that in your .htacces. e.g.:

PythonPath "['/the/scripts/directory'] + sys.path"

Good luck!

Mike.


From the_edge2020 at hotmail.com  Sun Apr  6 11:57:40 2003
From: the_edge2020 at hotmail.com (Tommy !!)
Date: Fri Jan  9 21:53:27 2004
Subject: [mod_python] Import Issues
Message-ID: <F93TcjJxWY5pCxlICSs0000066a@hotmail.com>

Hi Mike (and pascal),

Wouldn't mod_python be able to determine the directory it is executing in 
from the request (in a handler maybe)? Or, at the very least, in the Apache 
module itself, since mod_python must obviously know where the current script 
is being executed in order to actually execute it (see the request_rec 
structure in the Apache 2 C source code to see the relevant fields).

I would think that you could either:
a) modify the handler itself to check the request for the path to the 
module, and then use os.path.dir (? from memory) to grab the directory it's 
executing in, and then throw that into the sys.path?
b) take the same path that the Apache module itself does when it calls 
*sound of source code ruffling* PythonChildInitHandler (mod_python.c) and 
use the Python API to manipulate the sys.path global itself (except, 
obviously, from python_handler in the same file, where you *should* actually 
know where the file is located)

Anyways I'm going to have a bit of a hack around the source code and see 
what I come up with.

Thanks for your time guys, if you have any further comments I'd love to hear 
about it :)

Kind Regards,
Tom L




>From: Mike Verdone <mike_verdone@shaw.ca>
>To: Tommy !! <the_edge2020@hotmail.com>, mod_python@modpython.org
>Subject: Re: [mod_python] Import Issues
>Date: Sat, 05 Apr 2003 11:20:26 -0700
>MIME-Version: 1.0
>Received: from mc5-f20.law1.hotmail.com ([65.54.252.27]) by 
>mc5-s2.law1.hotmail.com with Microsoft SMTPSVC(5.0.2195.5600); Sat, 5 Apr 
>2003 10:29:20 -0800
>Received: from eden.ispol.com ([206.239.103.254]) by 
>mc5-f20.law1.hotmail.com with Microsoft SMTPSVC(5.0.2195.5600); Sat, 5 Apr 
>2003 10:28:26 -0800
>Received: from eden.ispol.com (localhost.ispol.com [127.0.0.1])by 
>eden.ispol.com (8.12.6/8.11.1) with ESMTP id h35IL4WT029214;Sat, 5 Apr 2003 
>13:21:04 -0500 (EST)(envelope-from mod_python-admin@modpython.org)
>Received: from pd6mo2so.prod.shaw.ca (shawidc-mo1.cg.shawcable.net 
>[24.71.223.10])by eden.ispol.com (8.12.6/8.11.1) with ESMTP id 
>h35IK9WT029190for <mod_python@modpython.org>; Sat, 5 Apr 2003 13:20:09 
>-0500 (EST)(envelope-from mike_verdone@shaw.ca)
>Received: from pd3mr3so.prod.shaw.ca (pd3mr3so-ser.prod.shaw.ca 
>[10.0.141.179]) by l-daemon (iPlanet Messaging Server 5.1 HotFix 0.8 (built 
>May 12 2002)) with ESMTP id <0HCV004PCUXCO3@l-daemon> for 
>mod_python@modpython.org; Sat, 05 Apr 2003 11:20:00 -0700 (MST)
>Received: from pn2ml5so.prod.shaw.ca (pn2ml5so-qfe0.prod.shaw.ca 
>[10.0.121.149]) by l-daemon (iPlanet Messaging Server 5.1 HotFix 0.8 (built 
>May 12 2002)) with ESMTP id <0HCV00BORUXCL2@l-daemon> for 
>mod_python@modpython.org; Sat, 05 Apr 2003 11:20:00 -0700 (MST)
>Received: from 192.168.0.42 (h68-144-147-185.cg.shawcable.net 
>[68.144.147.185]) by l-daemon (iPlanet Messaging Server 5.1 HotFix 0.8 
>(built May 12 2002)) with ESMTP id <0HCV00F46UXCP9@l-daemon> for 
>mod_python@modpython.org; Sat, 05 Apr 2003 11:20:00 -0700 (MST)
>X-Message-Info: pdGgd64CkwYBecCeulYyOTshuDTWlDUk
>In-reply-to: <F46Y7ZggDttW3SC7g4Z0002e234@hotmail.com>
>Message-id: <200304051120.26133.mike_verdone@shaw.ca>
>User-Agent: KMail/1.5.1
>References: <F46Y7ZggDttW3SC7g4Z0002e234@hotmail.com>
>Sender: mod_python-admin@modpython.org
>Errors-To: mod_python-admin@modpython.org
>X-BeenThere: mod_python@modpython.org
>X-Mailman-Version: 2.0.12
>Precedence: bulk
>List-Help: <mailto:mod_python-request@modpython.org?subject=help>
>List-Post: <mailto:mod_python@modpython.org>
>List-Subscribe: 
><http://www.modpython.org/mailman/listinfo/mod_python>,<mailto:mod_python-request@modpython.org?subject=subscribe>
>List-Id: mod_python user mailing list <mod_python.modpython.org>
>List-Unsubscribe: 
><http://www.modpython.org/mailman/listinfo/mod_python>,<mailto:mod_python-request@modpython.org?subject=unsubscribe>
>List-Archive: <http://www.modpython.org/pipermail/mod_python/>
>Return-Path: mod_python-admin@modpython.org
>X-OriginalArrivalTime: 05 Apr 2003 18:28:28.0117 (UTC) 
>FILETIME=[26ED0850:01C2FBA1]
>
>On April 5, 2003 10:53 am, Tommy !! wrote:
> > Hi all,
> >
> > Just curious as to why (by design?) mod_python does not allow one to 
>import
> > modules in the same directory as the executing script - instead you have 
>to
> > resort to altering sys.path inside each script in order to get it 
>importing
> > correctly.
> >
> > This is an issue if you don't have access to the web server to modify
> > httpd.conf and .htaccess files are disabled/limited. Additionally, I may
> > not have access to the site-packages directory, or any other directory, 
>for
> > that matter, from which my script could import reusable components.
> >
>
>The main problem is that mod_python doesn't know what directory it's in 
>when
>it executes a script except in two cases (as far as I can tell):
>
>1. You put the AddHandler directive in the .htaccess file in that 
>directory.
>
>2. You enclose the AddHandler directive in a <Directory> block specifying 
>the
>full path in apache.conf.
>
>Otherwise mod_python has no idea where it's really executing from, and 
>seems
>to default to the apache dir. If your administrator has restricted 
>.htaccess
>and won't set up apache.conf for you, then you're kinda hooped.
>
>Have you looked at the PythonPath directive? You may be able to get away 
>with
>that in your .htacces. e.g.:
>
>PythonPath "['/the/scripts/directory'] + sys.path"
>
>Good luck!
>
>Mike.
>
>_______________________________________________
>Mod_python mailing list
>Mod_python@modpython.org
>http://www.modpython.org/mailman/listinfo/mod_python


_________________________________________________________________
MSN Instant Messenger now available on Australian mobile phones. Go to  
http://ninemsn.com.au/mobilecentral/hotmail_messenger.asp


From the_edge2020 at hotmail.com  Sun Apr  6 15:02:02 2003
From: the_edge2020 at hotmail.com (Tommy !!)
Date: Fri Jan  9 21:53:27 2004
Subject: [mod_python] Import Issues
Message-ID: <F24k8eDDSFc6hFHh9la00014034@hotmail.com>

Hi all,

I achieved what I wanted by modifying publisher.py - obviously this is a bit 
dirty since it's handler-specific, but oh well - it works.

Basically, I use the following code in publisher.py prior to calling the 
target python script itself (where 'path' is the path to the python script 
determined by publisher.py):

if not path in sys.path:
  sys.path.append( path )

# ...

while path in sys.path:
  del sys.path[sys.path.index( path )]


Is there a chance something like this could be added to future versions of 
mod_python? If not, why not? I don't see why it should be necessary to 
modify httpd.conf or a .htaccess file for every web application I write when 
it could be as simple as writing a script & some supporting moudles :)

Another question - what's to stop a remote user from running any given 
method in an arbitrary python script within a directory when using the 
publisher handler?

Regards,
Tom L






>From: Mike Verdone <mike_verdone@shaw.ca>
>To: Tommy !! <the_edge2020@hotmail.com>, mod_python@modpython.org
>Subject: Re: [mod_python] Import Issues
>Date: Sat, 05 Apr 2003 11:20:26 -0700
>MIME-Version: 1.0
>Received: from mc5-f20.law1.hotmail.com ([65.54.252.27]) by 
>mc5-s2.law1.hotmail.com with Microsoft SMTPSVC(5.0.2195.5600); Sat, 5 Apr 
>2003 10:29:20 -0800
>Received: from eden.ispol.com ([206.239.103.254]) by 
>mc5-f20.law1.hotmail.com with Microsoft SMTPSVC(5.0.2195.5600); Sat, 5 Apr 
>2003 10:28:26 -0800
>Received: from eden.ispol.com (localhost.ispol.com [127.0.0.1])by 
>eden.ispol.com (8.12.6/8.11.1) with ESMTP id h35IL4WT029214;Sat, 5 Apr 2003 
>13:21:04 -0500 (EST)(envelope-from mod_python-admin@modpython.org)
>Received: from pd6mo2so.prod.shaw.ca (shawidc-mo1.cg.shawcable.net 
>[24.71.223.10])by eden.ispol.com (8.12.6/8.11.1) with ESMTP id 
>h35IK9WT029190for <mod_python@modpython.org>; Sat, 5 Apr 2003 13:20:09 
>-0500 (EST)(envelope-from mike_verdone@shaw.ca)
>Received: from pd3mr3so.prod.shaw.ca (pd3mr3so-ser.prod.shaw.ca 
>[10.0.141.179]) by l-daemon (iPlanet Messaging Server 5.1 HotFix 0.8 (built 
>May 12 2002)) with ESMTP id <0HCV004PCUXCO3@l-daemon> for 
>mod_python@modpython.org; Sat, 05 Apr 2003 11:20:00 -0700 (MST)
>Received: from pn2ml5so.prod.shaw.ca (pn2ml5so-qfe0.prod.shaw.ca 
>[10.0.121.149]) by l-daemon (iPlanet Messaging Server 5.1 HotFix 0.8 (built 
>May 12 2002)) with ESMTP id <0HCV00BORUXCL2@l-daemon> for 
>mod_python@modpython.org; Sat, 05 Apr 2003 11:20:00 -0700 (MST)
>Received: from 192.168.0.42 (h68-144-147-185.cg.shawcable.net 
>[68.144.147.185]) by l-daemon (iPlanet Messaging Server 5.1 HotFix 0.8 
>(built May 12 2002)) with ESMTP id <0HCV00F46UXCP9@l-daemon> for 
>mod_python@modpython.org; Sat, 05 Apr 2003 11:20:00 -0700 (MST)
>X-Message-Info: pdGgd64CkwYBecCeulYyOTshuDTWlDUk
>In-reply-to: <F46Y7ZggDttW3SC7g4Z0002e234@hotmail.com>
>Message-id: <200304051120.26133.mike_verdone@shaw.ca>
>User-Agent: KMail/1.5.1
>References: <F46Y7ZggDttW3SC7g4Z0002e234@hotmail.com>
>Sender: mod_python-admin@modpython.org
>Errors-To: mod_python-admin@modpython.org
>X-BeenThere: mod_python@modpython.org
>X-Mailman-Version: 2.0.12
>Precedence: bulk
>List-Help: <mailto:mod_python-request@modpython.org?subject=help>
>List-Post: <mailto:mod_python@modpython.org>
>List-Subscribe: 
><http://www.modpython.org/mailman/listinfo/mod_python>,<mailto:mod_python-request@modpython.org?subject=subscribe>
>List-Id: mod_python user mailing list <mod_python.modpython.org>
>List-Unsubscribe: 
><http://www.modpython.org/mailman/listinfo/mod_python>,<mailto:mod_python-request@modpython.org?subject=unsubscribe>
>List-Archive: <http://www.modpython.org/pipermail/mod_python/>
>Return-Path: mod_python-admin@modpython.org
>X-OriginalArrivalTime: 05 Apr 2003 18:28:28.0117 (UTC) 
>FILETIME=[26ED0850:01C2FBA1]
>
>On April 5, 2003 10:53 am, Tommy !! wrote:
> > Hi all,
> >
> > Just curious as to why (by design?) mod_python does not allow one to 
>import
> > modules in the same directory as the executing script - instead you have 
>to
> > resort to altering sys.path inside each script in order to get it 
>importing
> > correctly.
> >
> > This is an issue if you don't have access to the web server to modify
> > httpd.conf and .htaccess files are disabled/limited. Additionally, I may
> > not have access to the site-packages directory, or any other directory, 
>for
> > that matter, from which my script could import reusable components.
> >
>
>The main problem is that mod_python doesn't know what directory it's in 
>when
>it executes a script except in two cases (as far as I can tell):
>
>1. You put the AddHandler directive in the .htaccess file in that 
>directory.
>
>2. You enclose the AddHandler directive in a <Directory> block specifying 
>the
>full path in apache.conf.
>
>Otherwise mod_python has no idea where it's really executing from, and 
>seems
>to default to the apache dir. If your administrator has restricted 
>.htaccess
>and won't set up apache.conf for you, then you're kinda hooped.
>
>Have you looked at the PythonPath directive? You may be able to get away 
>with
>that in your .htacces. e.g.:
>
>PythonPath "['/the/scripts/directory'] + sys.path"
>
>Good luck!
>
>Mike.
>
>_______________________________________________
>Mod_python mailing list
>Mod_python@modpython.org
>http://www.modpython.org/mailman/listinfo/mod_python


_________________________________________________________________
Hotmail now available on Australian mobile phones. Go to  
http://ninemsn.com.au/mobilecentral/hotmail_mobile.asp


From grisha at modpython.org  Sun Apr  6 16:28:48 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:53:27 2004
Subject: [mod_python] Import Issues
In-Reply-To: <F24k8eDDSFc6hFHh9la00014034@hotmail.com>
Message-ID: <20030406161905.L45203-100000@eden.ispol.com>

On Sun, 6 Apr 2003, Tommy !! wrote:

> Hi all,
>
> I achieved what I wanted by modifying publisher.py - obviously this is a bit
> dirty since it's handler-specific, but oh well - it works.
>
> Basically, I use the following code in publisher.py prior to calling the
> target python script itself (where 'path' is the path to the python script
> determined by publisher.py):
>
> if not path in sys.path:
>   sys.path.append( path )
>
> # ...
>
> while path in sys.path:
>   del sys.path[sys.path.index( path )]

Hm... Not sure I understand what this does, since the publisher already
does add the path, in fact it restricts it so that the module can only be
imported from that particular path.

> Another question - what's to stop a remote user from running any given
> method in an arbitrary python script within a directory when using the
> publisher handler?

If that directory is exposed to the web (i.e. is under DocumentRoot), then
nothing, you should be very careful about that. The publisher will not run
anything that beginc with an "_" so it's a good idea to name all internal
functions beginning with an underscore.

Grisha



From pzb at datastacks.com  Sun Apr  6 18:15:02 2003
From: pzb at datastacks.com (Peter Bowen)
Date: Fri Jan  9 21:53:27 2004
Subject: [mod_python] Why are you using mod_python?
In-Reply-To: <20030328231412.24efac21.frank@fejes.net>
References: <20030328075642.A25172@ash.int.ca.pason.com>
	 <20030328172826.X67038-100000@eden.ispol.com>
	 <20030328231412.24efac21.frank@fejes.net>
Message-ID: <1049667302.13572.20.camel@localhost.localdomain>

On Sat, 2003-03-29 at 00:14, Frank S. Fejes III wrote:
> On a somewhat tangential note, I think mod_python documentation reflects
> strangely on what target audience might be interested in the module.  Almost
> all introductions I've seen to mod_python begin with a tutorial on creating
> a handler.  I'd venture a guess that writing handlers is what fewer than 1%
> of web developers want to do with an apache module initially.  In my
> experience, most people want to write some code and have it run faster than
> it would run under straight CGI...they don't want to write custom handlers.

I would have to disagree.  We were using PHP 4.x, but it doesn't have
support for all the hooks that apache offers.  We use the trans, authen,
authz, and content handlers for our projects.  We don't use the FastCGI
or publisher handlers at all.

Additionally mod_python offered us an opportunity to use python, which
we find offers faster development with less work and less bugs.  Python
is a very well designed language.  We were stretching the bounds of PHP
and perl, while being flexible, is too much of a write-only language.

Thanks.
Peter

From sterling at bumblebury.com  Sun Apr  6 18:50:03 2003
From: sterling at bumblebury.com (Sterling Hughes)
Date: Fri Jan  9 21:53:27 2004
Subject: [mod_python] Why are you using mod_python?
In-Reply-To: <1049667302.13572.20.camel@localhost.localdomain>
References: <20030328075642.A25172@ash.int.ca.pason.com>
	 <20030328172826.X67038-100000@eden.ispol.com>
	 <20030328231412.24efac21.frank@fejes.net>
	 <1049667302.13572.20.camel@localhost.localdomain>
Message-ID: <1049669403.28037.155.camel@hasele>

On Sun, 2003-04-06 at 18:15, Peter Bowen wrote:
> On Sat, 2003-03-29 at 00:14, Frank S. Fejes III wrote:
> > On a somewhat tangential note, I think mod_python documentation reflects
> > strangely on what target audience might be interested in the module.  Almost
> > all introductions I've seen to mod_python begin with a tutorial on creating
> > a handler.  I'd venture a guess that writing handlers is what fewer than 1%
> > of web developers want to do with an apache module initially.  In my
> > experience, most people want to write some code and have it run faster than
> > it would run under straight CGI...they don't want to write custom handlers.
> 
> I would have to disagree.  We were using PHP 4.x, but it doesn't have
> support for all the hooks that apache offers.  We use the trans, authen,
> authz, and content handlers for our projects.  We don't use the FastCGI
> or publisher handlers at all.
> 

Just a note that php does support all of this.

> Additionally mod_python offered us an opportunity to use python, which
> we find offers faster development with less work and less bugs.  Python
> is a very well designed language.  We were stretching the bounds of PHP
> and perl, while being flexible, is too much of a write-only language.
> 

Very true. :)

-Sterling
-- 
Good judgement comes from experience, and experience comes from 
bad judgement. 
    - Fred Brooks


From khalid_kary at hotmail.com  Sun Apr  6 23:55:49 2003
From: khalid_kary at hotmail.com (Khalid El-Kary)
Date: Fri Jan  9 21:53:27 2004
Subject: [mod_python] newbie and unable to get it working
Message-ID: <F50wefzQqWCdFF0a9jm00057331@hotmail.com>

Hi fellows,
I followed the installation instructions as in the mod_python documentation 
"A Windows Installation" section ...

and added the following lines to httpd.conf:

<Directory "<Your Document Root>/python">
   AddHandler python-program .py
   PythonHandler mptest
   PythonDebug on
</Directory>

replaced "your document root" with mine :-)

and created a file called mptest.py under "my document root/python"
which contained:

from mod_python import apache

def handler(req):
   req.content_type = "text/plain"
   req.send_http_header()
   req.write("Hello World!")
   return apache.OK

Apache starts normally and writes out the mod_python headers and an error 
message with which it continues normally:

'import site' failed; use -v for traceback
Apache/1.3.24 (win32) mod_python/2.7.6 Python/2.2.1 PHP/4.2.3 running ...

unfrotunately, when i request "http://servername/python/mptest.py" it gives 
an "500 - internal server error" ...

note that mod_python and python installations with apache went just fine, 
since the headers were written properly.

Windows ME, Apache 1.3.24, mod_python 2.7.6, Python 2.2.1

anything wrong, or any suggestions to get it running ?

thanx in advance,

Regards,
Khalid Al-Kary





_________________________________________________________________
Tired of spam? Get advanced junk mail protection with MSN 8. 
http://join.msn.com/?page=features/junkmail


From scott_list at mischko.com  Mon Apr  7 08:30:50 2003
From: scott_list at mischko.com (Scott Chapman)
Date: Fri Jan  9 21:53:27 2004
Subject: [mod_python] Why are you using mod_python?
In-Reply-To: <20030328231412.24efac21.frank@fejes.net>
References: <20030328075642.A25172@ash.int.ca.pason.com> <20030328172826.X67038-100000@eden.ispol.com> <20030328231412.24efac21.frank@fejes.net>
Message-ID: <200304070830.50822.scott_list@mischko.com>

On Friday 28 March 2003 21:14, Frank S. Fejes III wrote:
> On a somewhat tangential note, I think mod_python documentation reflects
> strangely on what target audience might be interested in the module. 
> Almost all introductions I've seen to mod_python begin with a tutorial on
> creating a handler.  I'd venture a guess that writing handlers is what
> fewer than 1% of web developers want to do with an apache module initially.
>  In my experience, most people want to write some code and have it run
> faster than it would run under straight CGI...they don't want to write
> custom handlers.

I very much agree with you.  The docs could use some improvment in this area.

Scott

From vlindberg at verio.net  Mon Apr  7 10:38:41 2003
From: vlindberg at verio.net (VanL)
Date: Fri Jan  9 21:53:27 2004
Subject: [mod_python] Import Issues
In-Reply-To: <20030406161905.L45203-100000@eden.ispol.com>
References: <20030406161905.L45203-100000@eden.ispol.com>
Message-ID: <3E91A991.1040207@verio.net>

Hello,

I am probably being just dense, but I cannot get my modules to import 
under mod_python.

I can do it fine at the command line:

 >>> from issuetracker import version_check
 >>>

However, mod_python complains:

[Mon Apr  7 16:27:46 2003] [error] PythonHandler mod_python.cgihandler: 
Traceback (most recent call last):
[]   File "/usr/local/lib/python2.2/site-packages/mod_python/apache.py", 
line 193, in Dispatch
    result = object(req)
[] PythonHandler mod_python.cgihandler:   File 
"/usr/local/lib/python2.2/site-packages/mod_python/cgihandler.py", line 
122, in handler
    imp.load_module(module_name, fd, path, desc)
[] PythonHandler mod_python.cgihandler:   File 
"/usr/local/webmanager/controlpanel/support/issuetracker.py", line 31, in ?
    from issuetracker import version_check
[] PythonHandler mod_python.cgihandler: ImportError: cannot import name 
version_check

So I thought that perhaps my sys.path was bad.
I changed the code:
try:
    from issuetracker import version_check
except ImportError:
    raise ImportError(' '.join(sys.path))

Still an error:
[top levels snipped]
[] PythonHandler mod_python.cgihandler: ImportError: 
/usr/local/lib/python2.2threadless 
/usr/local/lib/python2.2threadless/plat-freebsd4 
/usr/local/lib/python2.2threadless/lib-tk 
/usr/local/lib/python2.2threadless/lib-dynload 
/usr/local/lib/python2.2/site-packages /usr/local/webmanager 
/usr/local/webmanager/pylib /usr/local/webmanager/pylib/Packages

issuetracker is a package under /usr/local/webmanager/pylib:
# ls /usr/local/webmanager/pylib/issuetracker/*.py
/usr/local/webmanager/pylib/issuetracker/__init__.py
/usr/local/webmanager/pylib/issuetracker/version_check.py


I have been able to get other modules to import, and I can import 
issuetracker (top-level only) with no problems.  Anyone have a clue?

Apache 1.3.26, mod_python 2.78, python2.2-threadless.

Thanks,

VanL





From grisha at modpython.org  Mon Apr  7 14:03:52 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:53:27 2004
Subject: [mod_python] Import Issues
In-Reply-To: <3E91A991.1040207@verio.net>
Message-ID: <20030407140250.V55953-100000@eden.ispol.com>

Are sure it's not a permissions problem? Httpd most likely runs as user
"nobody", so all Python libs you're using must be world-readable.

Grisha

On Mon, 7 Apr 2003, VanL wrote:

> Hello,
>
> I am probably being just dense, but I cannot get my modules to import
> under mod_python.
>
> I can do it fine at the command line:
>
>  >>> from issuetracker import version_check
>  >>>
>
> However, mod_python complains:
>
> [Mon Apr  7 16:27:46 2003] [error] PythonHandler mod_python.cgihandler:
> Traceback (most recent call last):
> []   File "/usr/local/lib/python2.2/site-packages/mod_python/apache.py",
> line 193, in Dispatch
>     result = object(req)
> [] PythonHandler mod_python.cgihandler:   File
> "/usr/local/lib/python2.2/site-packages/mod_python/cgihandler.py", line
> 122, in handler
>     imp.load_module(module_name, fd, path, desc)
> [] PythonHandler mod_python.cgihandler:   File
> "/usr/local/webmanager/controlpanel/support/issuetracker.py", line 31, in ?
>     from issuetracker import version_check
> [] PythonHandler mod_python.cgihandler: ImportError: cannot import name
> version_check
>
> So I thought that perhaps my sys.path was bad.
> I changed the code:
> try:
>     from issuetracker import version_check
> except ImportError:
>     raise ImportError(' '.join(sys.path))
>
> Still an error:
> [top levels snipped]
> [] PythonHandler mod_python.cgihandler: ImportError:
> /usr/local/lib/python2.2threadless
> /usr/local/lib/python2.2threadless/plat-freebsd4
> /usr/local/lib/python2.2threadless/lib-tk
> /usr/local/lib/python2.2threadless/lib-dynload
> /usr/local/lib/python2.2/site-packages /usr/local/webmanager
> /usr/local/webmanager/pylib /usr/local/webmanager/pylib/Packages
>
> issuetracker is a package under /usr/local/webmanager/pylib:
> # ls /usr/local/webmanager/pylib/issuetracker/*.py
> /usr/local/webmanager/pylib/issuetracker/__init__.py
> /usr/local/webmanager/pylib/issuetracker/version_check.py
>
>
> I have been able to get other modules to import, and I can import
> issuetracker (top-level only) with no problems.  Anyone have a clue?
>
> Apache 1.3.26, mod_python 2.78, python2.2-threadless.
>
> Thanks,
>
> VanL
>
>
>
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From vlindberg at verio.net  Mon Apr  7 12:13:26 2003
From: vlindberg at verio.net (VanL)
Date: Fri Jan  9 21:53:27 2004
Subject: [mod_python] Import Issues
In-Reply-To: <20030407140250.V55953-100000@eden.ispol.com>
References: <20030407140250.V55953-100000@eden.ispol.com>
Message-ID: <3E91BFC6.8040202@verio.net>

Gregory (Grisha) Trubetskoy wrote:

>Are sure it's not a permissions problem? Httpd most likely runs as user
>"nobody", so all Python libs you're using must be world-readable.
>
Checked it already:  httpd runs as user "www"  All files in the pylib 
directory have 755 permissions, and the group is set to www also.  
Either way, they should be world-readable.

VanL


>
>Grisha
>
>On Mon, 7 Apr 2003, VanL wrote:
>
>  
>
>>Hello,
>>
>>I am probably being just dense, but I cannot get my modules to import
>>under mod_python.
>>
>>I can do it fine at the command line:
>>
>> >>> from issuetracker import version_check
>> >>>
>>
>>However, mod_python complains:
>>
>>[Mon Apr  7 16:27:46 2003] [error] PythonHandler mod_python.cgihandler:
>>Traceback (most recent call last):
>>[]   File "/usr/local/lib/python2.2/site-packages/mod_python/apache.py",
>>line 193, in Dispatch
>>    result = object(req)
>>[] PythonHandler mod_python.cgihandler:   File
>>"/usr/local/lib/python2.2/site-packages/mod_python/cgihandler.py", line
>>122, in handler
>>    imp.load_module(module_name, fd, path, desc)
>>[] PythonHandler mod_python.cgihandler:   File
>>"/usr/local/webmanager/controlpanel/support/issuetracker.py", line 31, in ?
>>    from issuetracker import version_check
>>[] PythonHandler mod_python.cgihandler: ImportError: cannot import name
>>version_check
>>
>>So I thought that perhaps my sys.path was bad.
>>I changed the code:
>>try:
>>    from issuetracker import version_check
>>except ImportError:
>>    raise ImportError(' '.join(sys.path))
>>
>>Still an error:
>>[top levels snipped]
>>[] PythonHandler mod_python.cgihandler: ImportError:
>>/usr/local/lib/python2.2threadless
>>/usr/local/lib/python2.2threadless/plat-freebsd4
>>/usr/local/lib/python2.2threadless/lib-tk
>>/usr/local/lib/python2.2threadless/lib-dynload
>>/usr/local/lib/python2.2/site-packages /usr/local/webmanager
>>/usr/local/webmanager/pylib /usr/local/webmanager/pylib/Packages
>>
>>issuetracker is a package under /usr/local/webmanager/pylib:
>># ls /usr/local/webmanager/pylib/issuetracker/*.py
>>/usr/local/webmanager/pylib/issuetracker/__init__.py
>>/usr/local/webmanager/pylib/issuetracker/version_check.py
>>
>>
>>I have been able to get other modules to import, and I can import
>>issuetracker (top-level only) with no problems.  Anyone have a clue?
>>
>>Apache 1.3.26, mod_python 2.78, python2.2-threadless.
>>
>>Thanks,
>>
>>VanL
>>
>>
>>
>>
>>_______________________________________________
>>Mod_python mailing list
>>Mod_python@modpython.org
>>http://www.modpython.org/mailman/listinfo/mod_python
>>
>>    
>>
>
>  
>



From neel at mediapulse.com  Mon Apr  7 15:17:54 2003
From: neel at mediapulse.com (Michael C. Neel)
Date: Fri Jan  9 21:53:27 2004
Subject: [mod_python] Import Issues
Message-ID: <C0FC22C08B82074A88B50061764157772C65A2@johnson.mediapulse.net>

Sorry for the blank email, hit a bad key combo.

Anyway, looks like there might be a path issue invloved, as I see both
/usr/local/lib/python2.2 and /usr/local/lib/python2.2threadless below.
Did you make a custom install of python for mod_python (not uncommon)?
If so, which one is mod_python linked against?

Mike

-----Original Message-----
From: VanL [mailto:vlindberg@verio.net] 
Sent: Monday, April 07, 2003 2:13 PM
To: Gregory (Grisha) Trubetskoy
Cc: mod_python@modpython.org
Subject: Re: [mod_python] Import Issues


Gregory (Grisha) Trubetskoy wrote:

>Are sure it's not a permissions problem? Httpd most likely runs as user

>"nobody", so all Python libs you're using must be world-readable.
>
Checked it already:  httpd runs as user "www"  All files in the pylib 
directory have 755 permissions, and the group is set to www also.  
Either way, they should be world-readable.

VanL


>
>Grisha
>
>On Mon, 7 Apr 2003, VanL wrote:
>
>  
>
>>Hello,
>>
>>I am probably being just dense, but I cannot get my modules to import 
>>under mod_python.
>>
>>I can do it fine at the command line:
>>
>> >>> from issuetracker import version_check
>> >>>
>>
>>However, mod_python complains:
>>
>>[Mon Apr  7 16:27:46 2003] [error] PythonHandler 
>>mod_python.cgihandler: Traceback (most recent call last):
>>[]   File
"/usr/local/lib/python2.2/site-packages/mod_python/apache.py",
>>line 193, in Dispatch
>>    result = object(req)
>>[] PythonHandler mod_python.cgihandler:   File
>>"/usr/local/lib/python2.2/site-packages/mod_python/cgihandler.py", 
>>line 122, in handler
>>    imp.load_module(module_name, fd, path, desc)
>>[] PythonHandler mod_python.cgihandler:   File
>>"/usr/local/webmanager/controlpanel/support/issuetracker.py", line 31,
in ?
>>    from issuetracker import version_check
>>[] PythonHandler mod_python.cgihandler: ImportError: cannot import 
>>name version_check
>>
>>So I thought that perhaps my sys.path was bad.
>>I changed the code:
>>try:
>>    from issuetracker import version_check
>>except ImportError:
>>    raise ImportError(' '.join(sys.path))
>>
>>Still an error:
>>[top levels snipped]
>>[] PythonHandler mod_python.cgihandler: ImportError: 
>>/usr/local/lib/python2.2threadless
>>/usr/local/lib/python2.2threadless/plat-freebsd4
>>/usr/local/lib/python2.2threadless/lib-tk
>>/usr/local/lib/python2.2threadless/lib-dynload
>>/usr/local/lib/python2.2/site-packages /usr/local/webmanager 
>>/usr/local/webmanager/pylib /usr/local/webmanager/pylib/Packages
>>
>>issuetracker is a package under /usr/local/webmanager/pylib: # ls 
>>/usr/local/webmanager/pylib/issuetracker/*.py
>>/usr/local/webmanager/pylib/issuetracker/__init__.py
>>/usr/local/webmanager/pylib/issuetracker/version_check.py
>>
>>
>>I have been able to get other modules to import, and I can import 
>>issuetracker (top-level only) with no problems.  Anyone have a clue?
>>
>>Apache 1.3.26, mod_python 2.78, python2.2-threadless.
>>
>>Thanks,
>>
>>VanL
>>
>>
>>
>>
>>_______________________________________________
>>Mod_python mailing list
>>Mod_python@modpython.org 
>>http://www.modpython.org/mailman/listinfo/mod_python
>>
>>    
>>
>
>  
>


_______________________________________________
Mod_python mailing list
Mod_python@modpython.org
http://www.modpython.org/mailman/listinfo/mod_python


From vlindberg at verio.net  Mon Apr  7 13:32:57 2003
From: vlindberg at verio.net (VanL)
Date: Fri Jan  9 21:53:27 2004
Subject: [mod_python] Import Issues
In-Reply-To: <C0FC22C08B82074A88B50061764157772C65A2@johnson.mediapulse.net>
References: <C0FC22C08B82074A88B50061764157772C65A2@johnson.mediapulse.net>
Message-ID: <3E91D269.6000505@verio.net>

Michael C. Neel wrote:

>Sorry for the blank email, hit a bad key combo.
>
>Anyway, looks like there might be a path issue invloved, as I see both
>/usr/local/lib/python2.2 and /usr/local/lib/python2.2threadless below.
>Did you make a custom install of python for mod_python (not uncommon)?
>If so, which one is mod_python linked against?
>
>Mike
>
Both exist; mod_python is linked against the threadless install.  On a 
side note, I built the threadless installation and mod python, however, 
for some reason the /usr/local/lib/python2.2/site-packages is the only 
site-packages in the import path.  So, mod_python was built against the 
threadless installation, and both the normal and threadless 
installations exist, but the mod_python package is actually symlinked 
into both /usr/local/lib/python2.2/site-packages as well as  
/usr/local/lib/python2.2threadless/site-packages.

Every other library (other than those in the standard lib) are located 
in /usr/local/webmanager pylib.

VanL



From manuel at aguete.org  Tue Apr  8 17:35:11 2003
From: manuel at aguete.org (Manuel =?ISO-8859-1?Q?Dur=E1n?= Aguete)
Date: Fri Jan  9 21:53:27 2004
Subject: [mod_python] A question
Message-ID: <1049816111.882.49.camel@dt1010b.quantum.int>

Hello,
	I'm implementing a XMLRPC dispatcher with mod_python, it's almost done,
but after a few petitions the script crashed with internal server error.
The problem it's in apache.py in method import_module.

#        if not file or (path and not os.path.dirname(file) in path):
#                raise SERVER_RETURN, HTTP_NOT_FOUND

if I comment these lines it seems to work ok. Printing the variables in
if I get: 
[Tue Apr  8 16:03:53 2003] [notice] mod_python: Going to import cosa
from ['/home/manuel/public_html/python/']: <module 'cosa' from
'/home/manuel/public_html/python/cosa.py'>
 mod_python: File is /home/manuel/public_html/python/cosa.py Path is
['/home/manuel/public_html/python/'] Dirname:
/home/manuel/public_html/python

I'm usign mod_python 2.7.8 with python 2.1.3 under Debian Gnu/Linux with
apache 1.3.26

Any idea what's happening ?

								Regards.
-- 
Manuel Dur?n Aguete <manuel@aguete.org>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://mailman.modpython.org/pipermail/mod_python/attachments/20030408/f80ef813/attachment-0001.bin
From grisha at modpython.org  Tue Apr  8 13:15:46 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:53:27 2004
Subject: [mod_python] A question
In-Reply-To: <1049816111.882.49.camel@dt1010b.quantum.int>
Message-ID: <20030408131434.I71082-100000@eden.ispol.com>

I think the problem is somewhere else, because the lines you commented out
would at works produce "Not Found", but not "Internal Server Error". When
you get "Internal Server Error", check what's in the error log, there may
be a clue there.

Grisha

On 8 Apr 2003, Manuel [ISO-8859-1] Dur?n Aguete wrote:

> Hello,
> 	I'm implementing a XMLRPC dispatcher with mod_python, it's almost done,
> but after a few petitions the script crashed with internal server error.
> The problem it's in apache.py in method import_module.
>
> #        if not file or (path and not os.path.dirname(file) in path):
> #                raise SERVER_RETURN, HTTP_NOT_FOUND
>
> if I comment these lines it seems to work ok. Printing the variables in
> if I get:
> [Tue Apr  8 16:03:53 2003] [notice] mod_python: Going to import cosa
> from ['/home/manuel/public_html/python/']: <module 'cosa' from
> '/home/manuel/public_html/python/cosa.py'>
>  mod_python: File is /home/manuel/public_html/python/cosa.py Path is
> ['/home/manuel/public_html/python/'] Dirname:
> /home/manuel/public_html/python
>
> I'm usign mod_python 2.7.8 with python 2.1.3 under Debian Gnu/Linux with
> apache 1.3.26
>
> Any idea what's happening ?
>
> 								Regards.
> --
> Manuel Dur?n Aguete <manuel@aguete.org>
>


From matt at teaphoo.fsnet.co.uk  Tue Apr  8 23:59:30 2003
From: matt at teaphoo.fsnet.co.uk (Matthew Russell)
Date: Fri Jan  9 21:53:28 2004
Subject: [mod_python] newbie and unable to get it working
References: <F50wefzQqWCdFF0a9jm00057331@hotmail.com>
Message-ID: <004901c2fe22$83f17da0$0ba587d9@jaws>

"import site" error in python usually means
that you havent; set yout PYTHONPATH correctly.

Is is most likely that the user which starts apache on your machine has not
set this in his profile.
Alteritivaly use:
setEnv PYTHONPATH=<my list of paths>
in htttpd.conf


----- Original Message -----
From: "Khalid El-Kary" <khalid_kary@hotmail.com>
To: <mod_python@modpython.org>
Sent: Monday, April 07, 2003 12:55 AM
Subject: [mod_python] newbie and unable to get it working


> Hi fellows,
> I followed the installation instructions as in the mod_python
documentation
> "A Windows Installation" section ...
>
> and added the following lines to httpd.conf:
>
> <Directory "<Your Document Root>/python">
>    AddHandler python-program .py
>    PythonHandler mptest
>    PythonDebug on
> </Directory>
>
> replaced "your document root" with mine :-)
>
> and created a file called mptest.py under "my document root/python"
> which contained:
>
> from mod_python import apache
>
> def handler(req):
>    req.content_type = "text/plain"
>    req.send_http_header()
>    req.write("Hello World!")
>    return apache.OK
>
> Apache starts normally and writes out the mod_python headers and an error
> message with which it continues normally:
>
> 'import site' failed; use -v for traceback
> Apache/1.3.24 (win32) mod_python/2.7.6 Python/2.2.1 PHP/4.2.3 running ...
>
> unfrotunately, when i request "http://servername/python/mptest.py" it
gives
> an "500 - internal server error" ...
>
> note that mod_python and python installations with apache went just fine,
> since the headers were written properly.
>
> Windows ME, Apache 1.3.24, mod_python 2.7.6, Python 2.2.1
>
> anything wrong, or any suggestions to get it running ?
>
> thanx in advance,
>
> Regards,
> Khalid Al-Kary
>
>
>
>
>
> _________________________________________________________________
> Tired of spam? Get advanced junk mail protection with MSN 8.
> http://join.msn.com/?page=features/junkmail
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From pluto at objectrealms.net  Thu Apr 10 18:34:01 2003
From: pluto at objectrealms.net (pluto)
Date: Fri Jan  9 21:53:28 2004
Subject: [mod_python] connection pooling?
Message-ID: <3E959CF9.2070603@objectrealms.net>

is it possible to do connection pooling of database handles in 
mod_python? my understanding is that for the common apache/linux mpm 
(prefork) this amounts to having lots of connections open to the db.. 
i'd like to have a global pool of connections for the server, is this 
possible?

somewhat related.. when apache is using the thread mpm, does mod_python 
use a single interpreter for all the threads, or does a different 
interpreter in each thread?

thanks,

-p


From mike.looijmans at asml.com  Fri Apr 11 07:15:59 2003
From: mike.looijmans at asml.com (Mike Looijmans)
Date: Fri Jan  9 21:53:28 2004
Subject: [mod_python] connection pooling?
Message-ID: <01c2ffe9$6fec1180$926a1e6e@wsasd464>

>is it possible to do connection pooling of database handles in
>mod_python? my understanding is that for the common apache/linux mpm
>(prefork) this amounts to having lots of connections open to the db..

Yes 2x...
Well, "lots" is only relative. Most DBMS won't have a problem with 20 or so
open connections. We're not talking hundreds here...

>i'd like to have a global pool of connections for the server, is this
>possible?


Yes, but the solution below is much simpler.

>somewhat related.. when apache is using the thread mpm, does mod_python
>use a single interpreter for all the threads, or does a different
>interpreter in each thread?

It uses a single interpreter for all threads. Which is quite handy, since you
also share all data, DB connection sharing is a breeze.
However, most DBMSses require you to use a connection per thread, but you can
share a fifo of connections along the threads. That's what I did for MySQL
connections.

--
Mike Looijmans
ASML: http://www5nl.asml.nl/~mlooijma
Private: http://www.milosoftware.com



From Tim.Hawes at ncmail.net  Fri Apr 11 09:12:19 2003
From: Tim.Hawes at ncmail.net (Tim Hawes)
Date: Fri Jan  9 21:53:28 2004
Subject: [mod_python] Error compiling mod_python on Solaris
Message-ID: <1050066739.19719.7.camel@apollos>

I am trying to compile mod_python 3.0.3 (DSO) on Solaris 8 (sparc).
Apache is version 2.0.45 (and I have already tried this with 2.0.44 with
the same results).
GCC is 3.2.2 (32 bit)
using Solaris ld (not GNU ld)
Python is version 2.1.3

I get the following:


hrdhhs34:[mod_python-3.0.3] $ gmake
gmake[1]: Entering directory
`/export/home/thawes/src/build/mod_python-3.0.3/src'

Compiling for DSO.

/usr/local/apache/2.0.45/bin/apxs
-I/export/home/thawes/src/build/mod_python-3.0.3/src/include
-I/usr/local/apache/2.0.45/include
-I/usr/local/bin/../stow/python-2.1.3/include/python2.1 -c mod_python.c
_apachemodule.c requestobject.c tableobject.c util.c serverobject.c
connobject.c filterobject.c hlist.c hlistobject.c  -lm 
/usr/local/bin/../stow/python-2.1.3/lib/python2.1/config/libpython2.1.a   -lpthread -lsocket -lnsl -ldl  -lthread   -lm            _eprintf.o _floatdidf.o _muldi3.o
/usr/local/apache/2.0.45/build/libtool --silent --mode=compile gcc
-prefer-pic  -DAP_HAVE_DESIGNATED_INITIALIZER -DSOLARIS2=8
-D_POSIX_PTHREAD_SEMANTICS -D_REENTRANT -g -O2 -pthreads
-I/usr/local/apache/2.0.45/include
-I/export/home/thawes/src/build/mod_python-3.0.3/src/include
-I/usr/local/apache/2.0.45/include
-I/usr/local/bin/../stow/python-2.1.3/include/python2.1  -c -o
mod_python.lo mod_python.c && touch mod_python.slo
In file included from
/export/home/thawes/src/build/mod_python-3.0.3/src/include/mod_python.h:115,
                 from mod_python.c:67:
/export/home/thawes/src/build/mod_python-3.0.3/src/include/util.h:76:
parse error before '*' token
/export/home/thawes/src/build/mod_python-3.0.3/src/include/util.h:76:
parse error before '*' token
/export/home/thawes/src/build/mod_python-3.0.3/src/include/util.h:76:
warning: data definition has no type or storage class
apxs:Error: Command failed with rc=65536
.
gmake[1]: *** [mod_python.so] Error 1
gmake[1]: Leaving directory
`/export/home/thawes/src/build/mod_python-3.0.3/src'
gmake: *** [do_dso] Error 2

Any ideas for a fix?


From grisha at modpython.org  Fri Apr 11 10:04:17 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:53:28 2004
Subject: [mod_python] Error compiling mod_python on Solaris
In-Reply-To: <1050066739.19719.7.camel@apollos>
Message-ID: <20030411100330.K14584-100000@eden.ispol.com>

Most likely the problem is your Python versio, try using 2.2.2.

Grisha


On 11 Apr 2003, Tim Hawes wrote:

> I am trying to compile mod_python 3.0.3 (DSO) on Solaris 8 (sparc).
> Apache is version 2.0.45 (and I have already tried this with 2.0.44 with
> the same results).
> GCC is 3.2.2 (32 bit)
> using Solaris ld (not GNU ld)
> Python is version 2.1.3
>
> I get the following:
>
>
> hrdhhs34:[mod_python-3.0.3] $ gmake
> gmake[1]: Entering directory
> `/export/home/thawes/src/build/mod_python-3.0.3/src'
>
> Compiling for DSO.
>
> /usr/local/apache/2.0.45/bin/apxs
> -I/export/home/thawes/src/build/mod_python-3.0.3/src/include
> -I/usr/local/apache/2.0.45/include
> -I/usr/local/bin/../stow/python-2.1.3/include/python2.1 -c mod_python.c
> _apachemodule.c requestobject.c tableobject.c util.c serverobject.c
> connobject.c filterobject.c hlist.c hlistobject.c  -lm
> /usr/local/bin/../stow/python-2.1.3/lib/python2.1/config/libpython2.1.a   -lpthread -lsocket -lnsl -ldl  -lthread   -lm            _eprintf.o _floatdidf.o _muldi3.o
> /usr/local/apache/2.0.45/build/libtool --silent --mode=compile gcc
> -prefer-pic  -DAP_HAVE_DESIGNATED_INITIALIZER -DSOLARIS2=8
> -D_POSIX_PTHREAD_SEMANTICS -D_REENTRANT -g -O2 -pthreads
> -I/usr/local/apache/2.0.45/include
> -I/export/home/thawes/src/build/mod_python-3.0.3/src/include
> -I/usr/local/apache/2.0.45/include
> -I/usr/local/bin/../stow/python-2.1.3/include/python2.1  -c -o
> mod_python.lo mod_python.c && touch mod_python.slo
> In file included from
> /export/home/thawes/src/build/mod_python-3.0.3/src/include/mod_python.h:115,
>                  from mod_python.c:67:
> /export/home/thawes/src/build/mod_python-3.0.3/src/include/util.h:76:
> parse error before '*' token
> /export/home/thawes/src/build/mod_python-3.0.3/src/include/util.h:76:
> parse error before '*' token
> /export/home/thawes/src/build/mod_python-3.0.3/src/include/util.h:76:
> warning: data definition has no type or storage class
> apxs:Error: Command failed with rc=65536
> .
> gmake[1]: *** [mod_python.so] Error 1
> gmake[1]: Leaving directory
> `/export/home/thawes/src/build/mod_python-3.0.3/src'
> gmake: *** [do_dso] Error 2
>
> Any ideas for a fix?
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From Tim.Hawes at ncmail.net  Fri Apr 11 13:44:42 2003
From: Tim.Hawes at ncmail.net (Tim Hawes)
Date: Fri Jan  9 21:53:28 2004
Subject: [mod_python] Error compiling mod_python on Solaris
In-Reply-To: <20030411100330.K14584-100000@eden.ispol.com>
References: <20030411100330.K14584-100000@eden.ispol.com>
Message-ID: <1050083083.2647.2.camel@apollos>

From khalid_kary at hotmail.com  Fri Apr 11 18:05:22 2003
From: khalid_kary at hotmail.com (Khalid El-Kary)
Date: Fri Jan  9 21:53:28 2004
Subject: [mod_python] plz help :-)
Message-ID: <F67hguA23ONgCJinoHL000685d0@hotmail.com>

Hi fellows,
I have sent this question before, but i got no reply, can you plz help :-)

I followed the installation instructions as in the mod_python documentation 
"A Windows Installation" section ...

and added the following lines to httpd.conf:

<Directory "<Your Document Root>/python">
  AddHandler python-program .py
  PythonHandler mptest
  PythonDebug on
</Directory>

replaced "your document root" with mine :-)

and created a file called mptest.py under "my document root/python"
which contained:

from mod_python import apache

def handler(req):
  req.content_type = "text/plain"
  req.send_http_header()
  req.write("Hello World!")
  return apache.OK

Apache starts normally and writes out the mod_python headers and an error 
message with which it continues normally:

'import site' failed; use -v for traceback
Apache/1.3.24 (win32) mod_python/2.7.6 Python/2.2.1 PHP/4.2.3 running ...

unfrotunately, when i request "http://servername/python/mptest.py" it gives 
an "500 - internal server error" ...

note that mod_python and python installations with apache went just fine, 
since the headers were written properly.

Windows ME, Apache 1.3.24, mod_python 2.7.6, Python 2.2.1

anything wrong, or any suggestions to get it running ?

thanx in advance,

Regards,
Khalid Al-Kary






_________________________________________________________________
Protect your PC - get McAfee.com VirusScan Online 
http://clinic.mcafee.com/clinic/ibuy/campaign.asp?cid=3963


From i at mindlace.net  Sat Apr 12 22:51:49 2003
From: i at mindlace.net (emf)
Date: Fri Jan  9 21:53:28 2004
Subject: [mod_python] Why are you using mod_python?
In-Reply-To: <20030328172826.X67038-100000@eden.ispol.com>
References: <20030328172826.X67038-100000@eden.ispol.com>
Message-ID: <3E98D0C5.10005@mindlace.net>

Gregory (Grisha) Trubetskoy wrote:
> Hello everyone -
> 
> As the original author of mod_python I think I'm allowed to jerk people's
> chains with this simple question:
> 
> Why are you using mod_python?

I am using mod_python because I wanted a way to manipulate xhtml/xml 
files and present them to end users without ever tainting the xhtml/xml 
with unrelated markup (like putting python in the page, having extra 
attributes, etc).

No existing python framework cleanly gives me that ability, and I didn't 
want to use a web server written in python, so mod_python seemed like 
the best choice.

~mindlace



From khalid_kary at hotmail.com  Sun Apr 13 15:39:07 2003
From: khalid_kary at hotmail.com (Khalid El-Kary)
Date: Fri Jan  9 21:53:28 2004
Subject: [mod_python] plz help :-)
Message-ID: <F982jQlHPTei5TnY99p00030745@hotmail.com>

>Hi Khalid
>I am not a specialist on this exspecially not on Windoze
>but SEE BELOW
>
> >I followed the installation instructions as in the mod_python 
>documentation
> >"A Windows Installation" section ...
> >
> >and added the following lines to httpd.conf:
> >
> ><Directory "<Your Document Root>/python">
> >  AddHandler python-program .py
> >  PythonHandler mptest
> >  PythonDebug on
> ></Directory>
> >
> >replaced "your document root" with mine :-)
> >
> >and created a file called mptest.py under "my document root/python"
> >which contained:
> >
> >from mod_python import apache
> >
> >def handler(req):
> >  req.content_type = "text/plain"
> >  req.send_http_header()
> >  req.write("Hello World!")
> >  return apache.OK
> >
> >Apache starts normally and writes out the mod_python headers and an error
> >message with which it continues normally:
> >
> >'import site' failed; use -v for traceback
>DOESNT THIS SHOWS THAT SOMETHING WITH LOADING THE MODULE WENT
>WRONG, ARE THERE ANY PATHS TO BE SET  SO APACHE FINDS THE
>mod_python ??

in the LoadModule section:
LoadModule python_module modules/mod_python.dll

in the AddModule section:
AddModule mod_python.c

I think if there was a configuration error, Apache shouldn't start normally 
and give an error message ... anyway do you know anything about "'import 
site' failed; use - v for traceback" thing ?

>
> >Apache/1.3.24 (win32) mod_python/2.7.6 Python/2.2.1 PHP/4.2.3 running ...
>
>
>
> >
> >unfrotunately, when i request "http://servername/python/mptest.py" it 
>gives
> >an "500 - internal server error" ...
>I THINK http://servername/python/mptest
>IS SUFFICIENT
>
> >note that mod_python and python installations with apache went just fine,
> >since the headers were written properly.
> >
> >Windows ME, Apache 1.3.24, mod_python 2.7.6, Python 2.2.1
> >
> >anything wrong, or any suggestions to get it running ?
> >
> >thanx in advance,
> >
> >Regards,
> >Khalid Al-Kary
> >
> >
> >
> >
> >
> >
> >_________________________________________________________________
> >Protect your PC - get McAfee.com VirusScan Online
> >http://clinic.mcafee.com/clinic/ibuy/campaign.asp?cid=3963
> >
> >_______________________________________________
> >Mod_python mailing list
> >Mod_python@modpython.org
> >http://www.modpython.org/mailman/listinfo/mod_python
>
>


_________________________________________________________________
STOP MORE SPAM with the new MSN 8 and get 2 months FREE* 
http://join.msn.com/?page=features/junkmail


From jm at eemsystems.cjb.net  Mon Apr 14 08:54:34 2003
From: jm at eemsystems.cjb.net (Julio Mendoza)
Date: Fri Jan  9 21:53:28 2004
Subject: [mod_python] upload binary file
Message-ID: <1050328473.937.2.camel@eemsystems.com>

Is posible to upload a binary file using mod_python?

Tank you,

JM



Mod_python error: "PythonHandler mod_python.publisher"

Traceback (most recent call last):

  File "/usr/lib/python2.2/site-packages/mod_python/apache.py", line 193, in Dispatch
    result = object(req)

  File "/usr/lib/python2.2/site-packages/mod_python/publisher.py", line 104, in handler
    val = File(field)

  File "/usr/lib/python2.2/site-packages/mod_python/publisher.py", line 308, in __init__
    for m in field.file.__methods__:

AttributeError: 'file' object has no attribute '__methods__'
-- 
Julio Mendoza <jm@eemsystems.cjb.net>


From Tim.Hawes at ncmail.net  Mon Apr 14 10:59:32 2003
From: Tim.Hawes at ncmail.net (Tim Hawes)
Date: Fri Jan  9 21:53:28 2004
Subject: [mod_python] mod_python not working.
Message-ID: <1050332372.30483.6.camel@apollos>

OK< I have successfully compiled the mod_python module (v. 3.0.3) on
Solaris, installed, and have configured Apache (v. 2.0.45) according to
the 2.4 Testing section in the docs:

    LoadModule python_module  modules/mod_python.so

    <Directory /some/directory/htdocs/test>
      AllowOverride   FileInfo
      AddHandler      python-program .py
      PythonHandler   mptest 
      PythonDebug     On 
    </Directory>

I have created my mptest.py file:

from mod_python import apache

    def handler(req):
        req.send_http_header()
        req.write("Hello World!")
        return apache.OK

Restart Apache and I get a 500 Internal Server Error and 
 "make_obcallback: could not import mod_python.apache." in my error log.
Any ideas?



From gnb at itga.com.au  Tue Apr 15 08:44:02 2003
From: gnb at itga.com.au (Gregory Bond)
Date: Fri Jan  9 21:53:28 2004
Subject: [mod_python] mod_python not working. 
In-Reply-To: Your message of 14 Apr 2003 10:59:32 -0400.
Message-ID: <200304142244.IAA26128@lightning.itga.com.au>

This is FAQ # 1:

http://www.modpython.org/FAQ/faqw.py?req=show&file=faq02.001.htp


From qwer at quirxi.com  Tue Apr 15 21:40:36 2003
From: qwer at quirxi.com (qwer)
Date: Fri Jan  9 21:53:28 2004
Subject: [mod_python] Error: 200 OK ?
Message-ID: <3E9C6034.9070907@quirxi.com>

Hello,


I just have installed apache (2.0.45), python (2.2.2), and ,mod_python (
3.0.3 ).

Then I have added following lines to apache configuration file httpd.conf:
<Directory "/home/www/cgi-bin">

    AllowOverride None
      Options None
      Order allow,deny
      Allow from all
#   AddHandler python-program .py
#   PythonHandler qwer

      AddHandler python-program .py
      PythonHandler mod_python.publisher
      PythonDebug On
</Directory>


For testing purposes I added the little python script "test.py" to the
directory "home/www/cgi-bin" and called it with the URL
"http://localhost/cgi-bin/test.py/login".

Here is the script:

----- snip ----

from mod_python import apache
def login( req ):
	req.content_type = "text/html"
	req.send_http_header()
	req.write( "Hello World!" )
	return apache.OK

----- snip ----

But for me it seems that the mod_pyhton handler does not work propely because I 
get following output:


Hello World!<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>200 OK</title>
</head><body>
<h1>OK</h1>
<p>The server encountered an internal error or
misconfiguration and was unable to complete
your request.</p>
<p>Please contact the server administrator,
  qwer@jango and inform them of the time the error occurred,
and anything you might have done that may have
caused the error.</p>
<p>More information about this error may be available
in the server error log.</p>
<hr />
<address>Apache/2.0.45 (Unix) mod_ssl/2.0.45 OpenSSL/0.9.7 mod_python/3.0.3 
Python/2.2.2 Server at localhost Port 80</address>

</body></html>


It is strange that the title tag contains "200 OK" and the output of the 
programm is given out together with an server error message.

Does anybody know what the problem could be ? Any help would be apreciated ....



Cheers

	Arno











From vmanera at manord.com  Wed Apr 16 19:27:52 2003
From: vmanera at manord.com (Manera, Villiam)
Date: Fri Jan  9 21:53:28 2004
Subject: R: [mod_python] upload binary file
Message-ID: <52DC70C1C1575C418CB033523A29CF1497D295@exchange2000.manord.com>

I'm testing mod-python 3.0.1 with apache 2.0.43 and python 2.2.2
>
> I've founded a older problem in file download (from python 2.1 to 2.2)
>
> the workaround is still the same:
>
> in publisher.py:
>
>  class File:
>      """ Like a file, but also has headers and filename
>      """
>      def __init__(self, field):
>          # steal all the file-like methods
>          for m in dir(field.file):
> 		 self.__dict__[m] = getattr(field.file, m)
>
>          self.headers = field.headers
>          self.filename = field.filename
> ======================workaround
> ==============================================
>  class File:
>      """ Like a file, but also has headers and filename
>      """
>      def __init__(self, field):
>          # steal all the file-like methods
>          #for m in dir(field.file):    #dont' work
>          for m in self.sim_methods(field.file):
>              self.__dict__[m] = getattr(field.file, m)
>
>          self.headers = field.headers
>          self.filename = field.filename
>
> 	#new--------
>      def sim_methods(self,obj):
>          from types import BuiltinMethodType
>          return filter(lambda s, t=obj:
>             type(getattr(t, s)) == BuiltinMethodType, dir(obj))
>
>
> I hope it will be put in place
>
> regards
>
> Villiam Manera
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>



-----Messaggio originale-----
Da: Julio Mendoza [mailto:jm@eemsystems.cjb.net]
Inviato: luned? 14 aprile 2003 15.55
A: mod_python@modpython.org
Oggetto: [mod_python] upload binary file


Is posible to upload a binary file using mod_python?

Tank you,

JM



Mod_python error: "PythonHandler mod_python.publisher"

Traceback (most recent call last):

  File "/usr/lib/python2.2/site-packages/mod_python/apache.py", line 193, in
Dispatch
    result = object(req)

  File "/usr/lib/python2.2/site-packages/mod_python/publisher.py", line 104,
in handler
    val = File(field)

  File "/usr/lib/python2.2/site-packages/mod_python/publisher.py", line 308,
in __init__
    for m in field.file.__methods__:

AttributeError: 'file' object has no attribute '__methods__'
-- 
Julio Mendoza <jm@eemsystems.cjb.net>

_______________________________________________
Mod_python mailing list
Mod_python@modpython.org
http://www.modpython.org/mailman/listinfo/mod_python


From grisha at modpython.org  Wed Apr 16 14:43:11 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:53:28 2004
Subject: R: [mod_python] upload binary file
In-Reply-To: <52DC70C1C1575C418CB033523A29CF1497D295@exchange2000.manord.com>
Message-ID: <20030416144251.R88983-100000@eden.ispol.com>

I am pretty sure this issue is fixed in 3.0.3.

Grisha

On Wed, 16 Apr 2003, Manera, Villiam wrote:

> I'm testing mod-python 3.0.1 with apache 2.0.43 and python 2.2.2
> >
> > I've founded a older problem in file download (from python 2.1 to 2.2)
> >
> > the workaround is still the same:
> >
> > in publisher.py:
> >
> >  class File:
> >      """ Like a file, but also has headers and filename
> >      """
> >      def __init__(self, field):
> >          # steal all the file-like methods
> >          for m in dir(field.file):
> > 		 self.__dict__[m] = getattr(field.file, m)
> >
> >          self.headers = field.headers
> >          self.filename = field.filename
> > ======================workaround
> > ==============================================
> >  class File:
> >      """ Like a file, but also has headers and filename
> >      """
> >      def __init__(self, field):
> >          # steal all the file-like methods
> >          #for m in dir(field.file):    #dont' work
> >          for m in self.sim_methods(field.file):
> >              self.__dict__[m] = getattr(field.file, m)
> >
> >          self.headers = field.headers
> >          self.filename = field.filename
> >
> > 	#new--------
> >      def sim_methods(self,obj):
> >          from types import BuiltinMethodType
> >          return filter(lambda s, t=obj:
> >             type(getattr(t, s)) == BuiltinMethodType, dir(obj))
> >
> >
> > I hope it will be put in place
> >
> > regards
> >
> > Villiam Manera
> > _______________________________________________
> > Mod_python mailing list
> > Mod_python@modpython.org
> > http://www.modpython.org/mailman/listinfo/mod_python
> >
>
>
>
> -----Messaggio originale-----
> Da: Julio Mendoza [mailto:jm@eemsystems.cjb.net]
> Inviato: luned? 14 aprile 2003 15.55
> A: mod_python@modpython.org
> Oggetto: [mod_python] upload binary file
>
>
> Is posible to upload a binary file using mod_python?
>
> Tank you,
>
> JM
>
>
>
> Mod_python error: "PythonHandler mod_python.publisher"
>
> Traceback (most recent call last):
>
>   File "/usr/lib/python2.2/site-packages/mod_python/apache.py", line 193, in
> Dispatch
>     result = object(req)
>
>   File "/usr/lib/python2.2/site-packages/mod_python/publisher.py", line 104,
> in handler
>     val = File(field)
>
>   File "/usr/lib/python2.2/site-packages/mod_python/publisher.py", line 308,
> in __init__
>     for m in field.file.__methods__:
>
> AttributeError: 'file' object has no attribute '__methods__'
> --
> Julio Mendoza <jm@eemsystems.cjb.net>
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From robert at leftwich.info  Thu Apr 17 08:54:50 2003
From: robert at leftwich.info (Robert Leftwich)
Date: Fri Jan  9 21:53:28 2004
Subject: [mod_python] Setting content location
Message-ID: <5.2.0.9.0.20030417083751.01947db0@192.168.0.1>

I'm a newbie playing with mod_python (which I think is great, so far at 
least :-)) and I need to set a header to be returned to the client after 
processing an http post request. In my case I want to set the 
Content-Location header to a newly created URL  (fyi I'm attempting to 
implement a REST-based web service) and I have the following code in the 
handler :

def handler(req):
     if req.method == 'POST':
        ...
         req.headers_out["Content-Location"] = "/foo/bar"
         return apache.HTTP_CREATED

But I don't see the Content-Location header being set in my client. What am 
I missing?

Robert



From grisha at modpython.org  Wed Apr 16 21:33:56 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:53:28 2004
Subject: [mod_python] Setting content location
In-Reply-To: <5.2.0.9.0.20030417083751.01947db0@192.168.0.1>
Message-ID: <20030416213117.W97157-100000@eden.ispol.com>

First, make sure that you're setting headers prior to the first byte of
output written, because otherwise the headers have gone out already and
setting them is meaningless.

If that doesn't help it, please provide more info about your environment.
Note that mod_python 3.0.1 (and all prior versions) had a bug that would
not send headers correctly if you were using a DirectoryIndex directive
pointing to a mod_python handled location.

Grisha

On Thu, 17 Apr 2003, Robert Leftwich wrote:

> I'm a newbie playing with mod_python (which I think is great, so far at
> least :-)) and I need to set a header to be returned to the client after
> processing an http post request. In my case I want to set the
> Content-Location header to a newly created URL  (fyi I'm attempting to
> implement a REST-based web service) and I have the following code in the
> handler :
>
> def handler(req):
>      if req.method == 'POST':
>         ...
>          req.headers_out["Content-Location"] = "/foo/bar"
>          return apache.HTTP_CREATED
>
> But I don't see the Content-Location header being set in my client. What am
> I missing?
>
> Robert
>
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From robert at leftwich.info  Thu Apr 17 12:02:10 2003
From: robert at leftwich.info (Robert Leftwich)
Date: Fri Jan  9 21:53:28 2004
Subject: [mod_python] Setting content location
In-Reply-To: <20030416213117.W97157-100000@eden.ispol.com>
References: <5.2.0.9.0.20030417083751.01947db0@192.168.0.1>
Message-ID: <5.2.0.9.0.20030417115525.01969a98@192.168.0.1>

At 11:33 AM 17/04/2003, Gregory (Grisha) Trubetskoy wrote:

>First, make sure that you're setting headers prior to the first byte of
>output written, because otherwise the headers have gone out already and
>setting them is meaningless.

The only other request related thing I do in the code is a req.read().


>If that doesn't help it, please provide more info about your environment.
>Note that mod_python 3.0.1 (and all prior versions) had a bug that would
>not send headers correctly if you were using a DirectoryIndex directive
>pointing to a mod_python handled location.

I'm using Apache 2.0.45, mod_python 3.0.3 and python 2.2 2 on W2000 sp2 
with the following in my httpd.conf file

<Directory "E:/Program Files/Apache Group/Apache2/htdocs/test">
   AddHandler python-program .py
   PythonHandler mptest
   PythonDebug On
</Directory>

Robert



From robert at leftwich.info  Thu Apr 17 12:04:31 2003
From: robert at leftwich.info (Robert Leftwich)
Date: Fri Jan  9 21:53:28 2004
Subject: [mod_python] Stopping additional error content
Message-ID: <5.2.0.9.0.20030417114113.01925a78@192.168.0.1>

Is it possible to stop mod_python appending html error information when a 
4xx error code is returned from a handler? For example I want to return 
some simple text  from my handler containing the application error message, 
but mod_python adds a bunch of html that I do not want to be returned, i.e.

         if [some problem]:
             req.content_type = "text/plain"
             req.write("Cannot do this because of some problem")
             return apache.HTTP_FORBIDDEN

The client s/w ends up seeing the above message plus a bunch of html 
including a <title>200 OK</title>!

Robert

PS I'm wondering if my other problem (Content-Location) is related to this 
one, i.e. apache/mod_python is seeing the HTTP_FORBIDDEN or HTTP_CREATED 
and is doing its own (default?) thing and adding/changing the returned result?





From grisha at modpython.org  Wed Apr 16 23:10:57 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:53:28 2004
Subject: [mod_python] Stopping additional error content
In-Reply-To: <5.2.0.9.0.20030417114113.01925a78@192.168.0.1>
Message-ID: <20030416230628.M98127-100000@eden.ispol.com>

I think something like this should work (this is off the top of my head,
it's possible I'm missing something):

	req.status = apache.HTTP_FORBIDDEN
	req.write("Cannot do this because of some problem")
	return apache.OK

Grisha

On Thu, 17 Apr 2003, Robert Leftwich wrote:

> Is it possible to stop mod_python appending html error information when a
> 4xx error code is returned from a handler? For example I want to return
> some simple text  from my handler containing the application error message,
> but mod_python adds a bunch of html that I do not want to be returned, i.e.
>
>          if [some problem]:
>              req.content_type = "text/plain"
>              req.write("Cannot do this because of some problem")
>              return apache.HTTP_FORBIDDEN
>
> The client s/w ends up seeing the above message plus a bunch of html
> including a <title>200 OK</title>!
>
> Robert
>
> PS I'm wondering if my other problem (Content-Location) is related to this
> one, i.e. apache/mod_python is seeing the HTTP_FORBIDDEN or HTTP_CREATED
> and is doing its own (default?) thing and adding/changing the returned result?
>
>
>
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From robert at leftwich.info  Thu Apr 17 13:19:54 2003
From: robert at leftwich.info (Robert Leftwich)
Date: Fri Jan  9 21:53:28 2004
Subject: [mod_python] Removing the .py in URL's
Message-ID: <5.2.0.9.0.20030417131727.01915598@192.168.0.1>

Is it possible to run mod_python without requiring an extension at all, 
i.e. instead of  http://www.mysite.com/hello.py can I use 
http://www.mysite.com/hello ?

Robert



From robert at leftwich.info  Thu Apr 17 13:30:24 2003
From: robert at leftwich.info (Robert Leftwich)
Date: Fri Jan  9 21:53:28 2004
Subject: [mod_python] Stopping additional error content
In-Reply-To: <20030416230628.M98127-100000@eden.ispol.com>
References: <5.2.0.9.0.20030417114113.01925a78@192.168.0.1>
Message-ID: <5.2.0.9.0.20030417132517.019de470@192.168.0.1>

At 01:10 PM 17/04/2003, Gregory (Grisha) Trubetskoy wrote:

>I think something like this should work (this is off the top of my head,
>it's possible I'm missing something):
>
>         req.status = apache.HTTP_FORBIDDEN
>         req.write("Cannot do this because of some problem")
>         return apache.OK

Works perfectly, thanks!

Note that it also solves my other problem with the Content-Location, i.e. 
if I do :

def handler(req):
     if req.method == 'POST':
        ...
         req.headers_out["Content-Location"] = "/foo/bar"
         req.status = apache.HTTP_CREATED
         return apache.OK

then the Content-Location is received correctly by the client.

Thanks a lot!

Robert



From grisha at modpython.org  Wed Apr 16 23:48:40 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:53:28 2004
Subject: [mod_python] Removing the .py in URL's
In-Reply-To: <5.2.0.9.0.20030417131727.01915598@192.168.0.1>
Message-ID: <20030416234758.Y98673-100000@eden.ispol.com>

You can do this if you use SetHandler rather than AddHandler.

On Thu, 17 Apr 2003, Robert Leftwich wrote:

> Is it possible to run mod_python without requiring an extension at all,
> i.e. instead of  http://www.mysite.com/hello.py can I use
> http://www.mysite.com/hello ?
>
> Robert
>
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From bar at chello.se  Sun Apr 20 17:58:18 2003
From: bar at chello.se (Bar)
Date: Fri Jan  9 21:53:28 2004
Subject: [mod_python] Trouble getting python to run on XP, Apache 2.0.45, Python
 2.3, mod_python 3.0.3
Message-ID: <5.1.0.14.0.20030420172734.00bd7b28@pop.chello.se>

Hello.
I have been trying to get mod_python to run on the configuration above and 
it wont work. I have read in the maillinglist archives that you could try 
to copy msvcr70.dll to your system32 directory and I have done so. Nothing 
happens.

The error msg I get is "Cannot load c:/.../mod_python.so into server: The 
specified module could not be found."

This sounds very much like the msvcr70.dll problem but it doesn't react 
when I copy the file to system32. Is there some hidden (for other people, 
obvious?) step that I have missed? I have also tried to sprinkle my system 
with the .dll file, placing it in different directories.
Regards,
Daniel 


From erica at simpli.biz  Sun Apr 20 13:35:37 2003
From: erica at simpli.biz (Erica Douglass)
Date: Fri Jan  9 21:53:28 2004
Subject: [mod_python] mod_python causing Apache to segfault (Cobalt RaQ550)
Message-ID: <005701c3077c$66f3aad0$ac7ba8c0@corkyserver>

Hello,

I'm trying to install mod_python on a RaQ550. The 550 comes with Python
2.0 and Apache 1.3.20. Unfortunately, Python is compiled with threads
support, which may be causing the problem I am seeing.

I compiled and installed the mod_python libraries and DSO successfully
with -DEAPI. I then made sure that the mod_python module was the first
one loaded in httpd.conf, and I ran Apache. Apache promptly segfaulted.
I have the traceback, which I have pasted in below.

Does anyone know which file is not being found? Here is the traceback:

(gdb) run -X
Starting program: /usr/sbin/httpd -X
(no debugging symbols found)...[New Thread 1024 (LWP 7107)]
chiliasp: module started, version 3.6.0.33

Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread 1024 (LWP 7107)]
0x40113369 in chunk_alloc (ar_ptr=0x401b3aa0, nb=24) at malloc.c:2784
2784    malloc.c: No such file or directory.
        in malloc.c
(gdb) bt
#0  0x40113369 in chunk_alloc (ar_ptr=0x401b3aa0, nb=24) at
malloc.c:2784
#1  0x401131c4 in __libc_malloc (bytes=18) at malloc.c:2717
#2  0x4000a03c in _dl_new_object () at eval.c:88
#3  0x400051bd in _dl_map_object_from_fd () at eval.c:88
#4  0x40006c91 in _dl_map_object () at eval.c:88
#5  0x4000b818 in openaux () at eval.c:88
#6  0x4000bd00 in _dl_catch_error () at eval.c:88
#7  0x4000adff in _dl_map_object_deps () at eval.c:88
#8  0x4019ca31 in dl_open_worker (a=0xbfffd2d0) at dl-open.c:261
#9  0x4000bd00 in _dl_catch_error () at eval.c:88
#10 0x4019cc5d in _dl_open (file=0x81628bc
"/etc/httpd/modules/mod_python.so", mode=-1073753400, caller=0x80a54f6)
    at dl-open.c:362
#11 0x40025630 in dlopen_doit (a=0xbfffd440) at dlopen.c:39
#12 0x4000bd00 in _dl_catch_error () at eval.c:88
#13 0x40025a06 in _dlerror_run (operate=0x400255fc <dlopen_doit>,
args=0xbfffd440) at dlerror.c:130
#14 0x400255eb in __dlopen_check (file=0x81628bc
"/etc/httpd/modules/mod_python.so", mode=258) at dlopen.c:53
#15 0x080a54f6 in ap_os_dso_load () at eval.c:88
#16 0x000aff0d in ?? () at eval.c:88
#17 0x000aff0d in ?? () at eval.c:88
#18 0x000aff0d in ?? () at eval.c:88
#19 0x000aff0d in ?? () at eval.c:88
#20 0x000aff0d in ?? () at eval.c:88
#21 0x000aff0d in ?? () at eval.c:88
#22 0x000aff0d in ?? () at eval.c:88
#23 0x000aff0d in ?? () at eval.c:88
#24 0x000aff0d in ?? () at eval.c:88

Thanks in advance.

Erica Douglass
Lead Web Developer
Simpli, Inc.


From vjb at vuit.com  Mon Apr 21 07:56:38 2003
From: vjb at vuit.com (Vince Buonassisi)
Date: Fri Jan  9 21:53:28 2004
Subject: [mod_python] error in running a script in apache browser
Message-ID: <741D9C47-7409-11D7-83F2-000A95682CD2@vuit.com>

hi,

i am getting the following error when a python test script is executed  
in the apache web server:

Mod_python error: "PythonHandler reqhandler"

Traceback (most recent call last):

   File "/usr/lib/python2.2/site-packages/mod_python/apache.py", line  
181, in Dispatch
     module = import_module(module_name, _req)

   File "/usr/lib/python2.2/site-packages/mod_python/apache.py", line  
335, in import_module
     module = imp.load_module(mname, f, p, d)

   File "/usr/local/apache/htdocs/reqhandler.py", line 9, in ?
     from xml.dom.ext.reader.Sax2 import FromXmlStream, FromXml

   File  
"/usr/lib/python2.2/site-packages/_xmlplus/dom/ext/reader/__init__.py",  
line 21, in ?
     encoder = codecs.lookup("utf-8")[0] # encode,decode,reader,writer

   File  
"/usr/src/build/143041-i386/install/usr/lib/python2.2/encodings/ 
__init__.py", line 51, in search_function

RuntimeError: cannot unmarshal code objects in restricted execution mode

the script i am running is very simple.  i just send a text message to  
the browser.  i am using the following versions of software:

apache 1.3.26
python 2.2.1
mod python 2.7.8
PyXML 0.7.1
linux redhat 8

any help would be appreciated.

thanks

vince
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: text/enriched
Size: 1254 bytes
Desc: not available
Url : http://mailman.modpython.org/pipermail/mod_python/attachments/20030421/3ccea826/attachment-0001.bin
From grisha at modpython.org  Wed Apr 23 09:53:25 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:53:28 2004
Subject: [mod_python] another test
In-Reply-To: <741D9C47-7409-11D7-83F2-000A95682CD2@vuit.com>
Message-ID: <20030423095248.Q14226-100000@eden.ispol.com>


please ignore this message also - working on getting the list to work
again....

From vjb at vuit.com  Wed Apr 23 20:25:32 2003
From: vjb at vuit.com (Vincent J. Buonassisi)
Date: Fri Jan  9 21:53:28 2004
Subject: [mod_python] problems finding module 
Message-ID: <3EA7592C.8000704@vuit.com>

hi,

i am having problems in getting mod_python to run the following simple 
script in apache:

	import sys

	from WVWService.util import XMLUtil

	from mod_python import apache

	def handler(req):

    	 path = str(sys.path)
    	 print path
    	 req.content_type = "text/plain"
    	 req.send_http_header()
     	req.write(path)

     	return apache.OK

	if __name__ == "__main__":
   	  print sys.path

with the followig entry in apache's httpd.conf file:

	<Directory /var/www/html>
   	    AddHandler python-program .py
    	    PythonHandler myscript
	    PythonPath
		"sys.path+['/home/vjb/workspace/wvwBase3/src/wvw']"
    	    PythonDebug On
	</Directory>


i get the following error in my web browser:


Mod_python error: "PythonHandler myscript"

Traceback (most recent call last):

   File "/usr/local/lib/python2.2/site-packages/mod_python/apache.py", 
line 320, in HandlerDispatch
     module = import_module(module_name, config)

   File "/usr/local/lib/python2.2/site-packages/mod_python/apache.py", 
line 496, in import_module
     f, p, d = imp.find_module(parts[i], path)

ImportError: No module named myscript


if i comment the PythonPath line the i get the error:

ImportError: No module named WVWService.util


can someone please tell me what i am doing wrong?

thanks,

vince

From vjb at vuit.com  Wed Apr 23 20:59:17 2003
From: vjb at vuit.com (Vince Buonassisi)
Date: Fri Jan  9 21:53:28 2004
Subject: [mod_python] problems finding module 
In-Reply-To: <3EA7592C.8000704@vuit.com>
Message-ID: <1F1049D3-7609-11D7-9E94-000A95682CD2@vuit.com>

sorry, i forgot to add my environment:

python 2.2.2
apache 2.0.40
modpython 3.0.3

thanks,


On Mercoled?, apr 23, 2003, at 20:25 US/Pacific, Vincent J. Buonassisi 
wrote:

> hi,
>
> i am having problems in getting mod_python to run the following simple 
> script in apache:
>
> 	import sys
>
> 	from WVWService.util import XMLUtil
>
> 	from mod_python import apache
>
> 	def handler(req):
>
>    	 path = str(sys.path)
>    	 print path
>    	 req.content_type = "text/plain"
>    	 req.send_http_header()
>     	req.write(path)
>
>     	return apache.OK
>
> 	if __name__ == "__main__":
>   	  print sys.path
>
> with the followig entry in apache's httpd.conf file:
>
> 	<Directory /var/www/html>
>   	    AddHandler python-program .py
>    	    PythonHandler myscript
> 	    PythonPath
> 		"sys.path+['/home/vjb/workspace/wvwBase3/src/wvw']"
>    	    PythonDebug On
> 	</Directory>
>
>
> i get the following error in my web browser:
>
>
> Mod_python error: "PythonHandler myscript"
>
> Traceback (most recent call last):
>
>   File "/usr/local/lib/python2.2/site-packages/mod_python/apache.py", 
> line 320, in HandlerDispatch
>     module = import_module(module_name, config)
>
>   File "/usr/local/lib/python2.2/site-packages/mod_python/apache.py", 
> line 496, in import_module
>     f, p, d = imp.find_module(parts[i], path)
>
> ImportError: No module named myscript
>
>
> if i comment the PythonPath line the i get the error:
>
> ImportError: No module named WVWService.util
>
>
> can someone please tell me what i am doing wrong?
>
> thanks,
>
> vince
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From timbomb at timbomb.net  Fri Apr 25 16:09:24 2003
From: timbomb at timbomb.net (Tim Mansfield)
Date: Fri Jan  9 21:53:28 2004
Subject: [mod_python] Trouble compiling mod_python-3.0.3  on Red Hat with
	Apache httpd-2.0.39 + Python-2.2.1
Message-ID: <5.1.0.14.0.20030425160211.0920acf0@timbomb.net>


... which I believe are the correct versions. I get this output when apxs 
tries to do its thing (ie step one in the make).

Any ideas?

Tim
----------------

$ make
make[1]: Entering directory `/home/timbomb/mod_python-3.0.3/src'

Compiling for DSO.

/opt/local/bin/apxs -I/home/timbomb/mod_python-3.0.3/src/include 
-I/opt/local/stow/httpd-2.0.39/include 
-I/opt/local/bin/../stow/Python-2.2.1/include/python2.2 -c mod_python.c 
_apachemodule.c requestobject.c tableobject.c util.c serverobject.c 
connobject.c filterobject.c hlist.c hlistobject.c 
-L/opt/local/bin/../stow/Python-2.2.1/lib/python2.2/config  -Xlinker 
-export-dynamic      -lm  -lpython2.2 -ldl -lpthread -lutil -lm
/opt/local/stow/httpd-2.0.39/build/libtool --silent --mode=compile gcc 
-prefer-pic  -DAP_HAVE_DESIGNATED_INITIALIZER -DLINUX=2 -D_REENTRANT 
-D_XOPEN_SOURCE=500 -D_BSD_SOURCE -D_SVID_SOURCE -D_GNU_SOURCE -g -O2 
-pthread -I/opt/local/stow/httpd-2.0.39/include 
-I/home/timbomb/mod_python-3.0.3/src/include 
-I/opt/local/stow/httpd-2.0.39/include 
-I/opt/local/bin/../stow/Python-2.2.1/include/python2.2  -c -o 
mod_python.lo mod_python.c && touch mod_python.slo
mod_python.c: In function `directive_PythonInputFilter':
mod_python.c:1507: incompatible type for argument 3 of 
`ap_register_input_filter'
mod_python.c:1507: too many arguments to function `ap_register_input_filter'
mod_python.c: In function `directive_PythonOutputFilter':
mod_python.c:1532: incompatible type for argument 3 of 
`ap_register_output_filter'
mod_python.c:1532: too many arguments to function `ap_register_output_filter'
apxs:Error: Command failed with rc=65536
.
make[1]: *** [mod_python.so] Error 1
make[1]: Leaving directory `/home/timbomb/mod_python-3.0.3/src'
make: *** [do_dso] Error 2

From big.stick at bol.com.br  Fri Apr 25 10:26:31 2003
From: big.stick at bol.com.br (Big Stick)
Date: Fri Jan  9 21:53:28 2004
Subject: [mod_python] Trouble compiling mod_python-3.0.3  on Red Hat with
	Apache httpd-2.0.39 + Python-2.2.1
In-Reply-To: <5.1.0.14.0.20030425160211.0920acf0@timbomb.net>
References: <5.1.0.14.0.20030425160211.0920acf0@timbomb.net>
Message-ID: <129475794.20030425102631@bol.com.br>

Em 25/4/2003 ?s 03:09, Tim escreveu:


> ... which I believe are the correct versions. I get this output when apxs 
> tries to do its thing (ie step one in the make).

> Any ideas?

Make sure that httpd-devel is installed, since apxs is provided by
httpd-devel, and RH doesn?t seem to install it by default.

-- stick
From brian at linus.smenet.org  Fri Apr 25 08:14:38 2003
From: brian at linus.smenet.org (Brian Allbee)
Date: Fri Jan  9 21:53:29 2004
Subject: [mod_python] mod_python newbie looking for information/references
Message-ID: <1051280078.1141.8.camel@localhost.localdomain>

Howdy, all!

I'm a newbie to mod_python (looking forward to working with it) who's
looking for suggestions/example code/documentation/references to help me
get started. FAQ was down last I looked (and site seems to be offline,
or at least not accessible from this location).

Any suggestions/direction would be appreciated!

From brian at linus.smenet.org  Fri Apr 25 12:05:24 2003
From: brian at linus.smenet.org (Brian Allbee)
Date: Fri Jan  9 21:53:29 2004
Subject: [mod_python] 
	RE: mod_python newbie looking for information/refere nces
In-Reply-To: <D31B04F24EDE7644BB169BB4F080778A06C239EE@s30342g004005>
References: <D31B04F24EDE7644BB169BB4F080778A06C239EE@s30342g004005>
Message-ID: <1051293924.1141.20.camel@localhost.localdomain>

Thanks, Hans!

Am I understanding things correctly then (after reading through the
tutorial, especially section 3.4) that if I have the configuration for
Apache set to something like:

AddHandler python-program .py
PythonHandler mod_python.publisher

that it is possible to set up pseudo-pages by generating different
module-files for each such "page?" For example, an "index.py" and
"form.py" page can have distinctive outputs from each other, but are
still essentially called as if they were "real" pages
(www.site.com/index and www.site.com/form, respectively)? If so, is the
file-extension necessary, or would the example URLs still call index.py
and form.py respectively? And I'm assuming that under those
circumstances each would need a default handler() function (perhaps in
addition to any other functions that might be called by something like
www.site.com/form/submission) if they were expected to be able to do
anything without any direct query-string or form-field input.

I presume that standard python module-import syntax is supported
(allowing for the development of common code to be shared between
several modules, I hope) as well?

Hoping I'm understanding things correctly - the more I look at
mod_python's capabilities, the more I'm liking what I see...

Brian

On Fri, 2003-04-25 at 08:46, Yandle, Hans wrote:
> Had similar problems. I use Apache 1.3.X with Python 2.2.X. I have
> included all the files for modpython 2.7.8. I do not have locally
> cached the modpython 3.X associated files for Apache 2.X.
> 
> Welcome to real power,
> 
> Hans


From grisha at modpython.org  Fri Apr 25 16:06:45 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:53:29 2004
Subject: [mod_python] Trouble compiling mod_python-3.0.3  on Red Hat with
 Apache httpd-2.0.39 + Python-2.2.1
In-Reply-To: <129475794.20030425102631@bol.com.br>
Message-ID: <20030425160545.V70432-100000@eden.ispol.com>


Also, I'm not even sure 2.0.39 can compile against mp 3.0.3, I highly
recommend you switch to apache 2.0.45 and Python 2.2.2.

On Fri, 25 Apr 2003, Big Stick wrote:

> Em 25/4/2003 ?s 03:09, Tim escreveu:
>
>
> > ... which I believe are the correct versions. I get this output when apxs
> > tries to do its thing (ie step one in the make).
>
> > Any ideas?
>
> Make sure that httpd-devel is installed, since apxs is provided by
> httpd-devel, and RH doesn?t seem to install it by default.
>
> -- stick
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>

From vjb at vuit.com  Mon Apr 28 17:36:43 2003
From: vjb at vuit.com (Vince Buonassisi)
Date: Fri Jan  9 21:53:29 2004
Subject: [mod_python] mod_python import error
Message-ID: <A68963E0-79DA-11D7-B1FA-000A95682CD2@vuit.com>

hi,

i am getting the following error from mod_python when my python script 
imports the module test:

Mod_python error: "PythonHandler myscript"

Traceback (most recent call last):

   File "/usr/local/lib/python2.2/site-packages/mod_python/apache.py", 
line 320, in HandlerDispatch
     module = import_module(module_name, config)

   File "/usr/local/lib/python2.2/site-packages/mod_python/apache.py", 
line 499, in import_module
     module = imp.load_module(mname, f, p, d)

   File "/usr/local/apache/htdocs/myscript.py", line 4, in ?
     from WVWService.test import HTTPClient

ImportError: No module named test


just before this import statement there is another import statement 
that imports a
module from the same area and it seems to work just fine:

from WVWService.util import XMLUtil
from WVWService.test import HTTPClient


i have the following environment environment:

   mod_pythonq	3.0.3
   python	2.2.2
   apache	2.0.45
   os		redhat 8.0

does anyone have any ideas on how i can solve this problem?

thanks,

vince

From dhoutz at advancedinterfaces.com  Wed Apr 30 14:33:40 2003
From: dhoutz at advancedinterfaces.com (Dan Houtz)
Date: Fri Jan  9 21:53:29 2004
Subject: [mod_python] help with a few basics
Message-ID: <CJEFIGIHCACFLNNGMEEIGEDACAAA.dhoutz@advancedinterfaces.com>

Greetings,

I'm just starting to get into python and mod_python. I have installed
mod_python on Windows XP with Apache 2.0.45 to start getting my feet wet.
After some intial troubles, I believe I finally have everything working
correctly. I have managed to follow the test section and "hello world prints
properly. MY next question is, am I able to accomplish the same thing useing
print "Hello World" instead of req.write("Hello World"). I've seen many
coding examples using print, but it does not work correctly when I attempt
to use it.

For instance, this code:
	def handler(req):
	print "Content-Type: text/html\n\n"
   	print "Hello World"

Produces:
	Mod_python error: "PythonHandler mptest"

	Traceback (most recent call last):

	  File "C:\Python22\Lib\site-packages\mod_python\apache.py", line 334, in
HandlerDispatch
	    assert (type(result) == type(int())), \

	AssertionError: Handler 'mptest' returned invalid return code.


So, I tried:
	def handler(req):
	print "Content-Type: text/html\n\n"
   	print "Hello World"
	return apacke.OK

and it produced a blank page


Your help is appreciated.

Thanks,
Dan Houtz

From neel at mediapulse.com  Tue Apr  1 10:36:53 2003
From: neel at mediapulse.com (Michael C. Neel)
Date: Fri Jan  9 21:59:57 2004
Subject: [mod_python] RE: 1 page Not Found - every 4 page refresh cycle?
Message-ID: <C0FC22C08B82074A88B50061764157775C14@johnson.mediapulse.net>

Forwarding this over to the mod_python list, as I am also have some
weird issues we have been unable to track the cause of.  I recently
rolled out a fixup handler in mod_python to a host of server, and now,
randomly, you will get the error described below.  All are mod_python
2.7.8 and various RH 7.x with Apache 1.3.x. I don't use publisher.
Anyone seeing something like this?

Mike

-----Original Message-----
From: Juan Carlos Rodrigo Garcia [mailto:jrodrigo@xpyro.com] 
Sent: Tuesday, April 01, 2003 8:03 AM
To: python-dev@httpd.apache.org
Subject: 1 page Not Found - every 4 page refresh cycle?


Hello, I can't suscribe to mod_python-request@modpython.org, and I'm
having a little problem.

I'm using mod_python 3.0.3 and apache 2.0.44.

I set the PythonHandler to mod_python.publisher

Because I want to use mod_python the PHP,ASP,CFUSION way.
Every script does its own work. So this is my apache setup:

<VirtualHost *>
      ServerName www.devel.in
      DirectoryIndex index.py
      AddHandler python-program .py
      PythonHandler mod_python.publisher
      PythonDebug On
</VirtualHost>

I have serveral pages in my web and everything goes well with 
mod_python auth, uploading...

BUT when I browse pages (scripts) with little content (A tiny script
that outputs very small amount of html), then every 
time I refresh four times or so the tiny script I get one:

  Not Found
  The requested URL /search/index.py was not found on this server.

This NEVER happens refreshing scripts that print long listings, or lots
of HTML data.

I've found this behaviour in two different machines...
One running the RedHat 8.0 distro web server (apache 2.0 + mod_python).
And in my personal computer were I've installed varios versions of
apache 2 and mod_python 3, every set-up acted the same way.


I think that there is a problem with mod_python.publisher loading tiny
scripts or showing little output.


Thanks for all your good work.





From neel at mediapulse.com  Tue Apr  1 11:26:37 2003
From: neel at mediapulse.com (Michael C. Neel)
Date: Fri Jan  9 21:59:57 2004
Subject: [mod_python] Why are you using mod_python?
Message-ID: <C0FC22C08B82074A88B50061764157775C15@johnson.mediapulse.net>

I broke perl.  No, not in a preformance way, or in I couldn't do
something in perl.  I found that in larger projects, perl's lack of OO
(and the ease of use of the OO features it does have) really casued
large delays in development.  Also I noticed that code in perl seemed to
be apt to more bugs than code in another language.  Over all I came to
the descision that perl's strength lies in the script, and is not suited
for the application.

I have worked with, and took another look at PHP, but I don't like PHP
on a design level.  I like to have data, design, and logic all
seperated.  PHP doesn't lend itself well to this.  You can make that
work, but too many includes in PHP can result in a big preformance hit.

Python does have a very good set of OO features.  I was also impress in
how cross platform it really was.  Many languages claim this, but you
often find you need to tweak code to make it work.  With Albatross I
found a template system that allowed me to have data, design, and logic
in separate places (I also gained a flexible framework for the logic
part, which was a big plus).

Preformance was a concern, as I had forsaken CGI awhile ago.  I ran some
"hello world" test on my laptop, 1Ghz with 256 Megs.  CGI handled about
100 requests per second, perl and python both ran about 250 request per
second in a "fastCGI" setting, python as a content handler ran about 600
requests per second, PHP 650, and perl 700.  A Native C handler ran
about 1400 requests per second.  C has too long of a development cycle,
and the gains in method were worth the 100 requests per second.

I have since deployed several applications for clients in
mod_python/albatross as well as some personal sites.  Some of these have
been massive projects for very big names.  I am proud to say these have
had no issue in this platform, and I actually feel extreamly confident
in them.  I also like that I can hide the fact the platform so that the
user is even unaware the page is dynamic.  A side project I did that you
can see what I mean is www.fistsofniall.com - this site is all
mod_python/albatross (execption is the formus).

I did see a comment that probably only 1% of the people use a handler,
and instead use a fastcgi.  If this is the case, then it is a shame, as
the benchmarks told me.  How publisher fits in, I don't know - I've
never tried it.  If you look into it, you'll find that writing a handler
is really pretty easy.

Mike

-----Original Message-----
From: Gregory (Grisha) Trubetskoy [mailto:grisha@modpython.org] 
Sent: Friday, March 28, 2003 5:39 PM
To: mod_python@modpython.org
Subject: [mod_python] Why are you using mod_python?



Hello everyone -

As the original author of mod_python I think I'm allowed to jerk
people's chains with this simple question:

Why are you using mod_python?

You can reply on or off list, either is fine. The results, after I get
to mull over them will be published in one way or another.

I've decided to ask the list because I recently realized that I am not
sure I know the answer. Not to say that I don't like mod_python, on the
contrary, I do, but to formulate in words exactly why is rather
difficult. Besides, my opinion is biased anyway :-)

Thanks in advance!

Grisha


_______________________________________________
Mod_python mailing list
Mod_python@modpython.org
http://www.modpython.org/mailman/listinfo/mod_python


From LBerezhny at DevIS.com  Tue Apr  1 12:00:11 2003
From: LBerezhny at DevIS.com (Lex Berezhny)
Date: Fri Jan  9 21:59:57 2004
Subject: [mod_python] Why are you using mod_python?
In-Reply-To: <C0FC22C08B82074A88B50061764157775C15@johnson.mediapulse.net>
References: <C0FC22C08B82074A88B50061764157775C15@johnson.mediapulse.net>
Message-ID: <1049216411.17863.4.camel@hortus>

On Tue, 2003-04-01 at 11:26, Michael C. Neel wrote:
> I did see a comment that probably only 1% of the people use a handler,
> and instead use a fastcgi.  If this is the case, then it is a shame, as
> the benchmarks told me.  How publisher fits in, I don't know - I've
> never tried it.  If you look into it, you'll find that writing a handler
> is really pretty easy.

Most of the responses to Grishas email note that they use mod_python for
its handler. I'm not sure where the 1% comes from.

I also use the handler :-)

In fact, I feel that the handler is much easier to use and even figure
out, than the publisher.

my two cents,

  - lex


From vlindberg at verio.net  Tue Apr  1 10:37:41 2003
From: vlindberg at verio.net (VanL)
Date: Fri Jan  9 21:59:57 2004
Subject: [mod_python] Why are you using mod_python?
In-Reply-To: <1049216411.17863.4.camel@hortus>
References: <C0FC22C08B82074A88B50061764157775C15@johnson.mediapulse.net> <1049216411.17863.4.camel@hortus>
Message-ID: <3E89CE65.60207@verio.net>

>
>
>In fact, I feel that the handler is much easier to use and even figure
>out, than the publisher.
>

Maybe because I started out with Zope, I thought that the publisher 
handler was dead simple.  That is what I am using right now.

VanL


From davidf at sjsoft.com  Wed Apr  2 13:53:01 2003
From: davidf at sjsoft.com (David Fraser)
Date: Fri Jan  9 21:59:57 2004
Subject: [mod_python] Building mod_python installer for Windows
Message-ID: <3E8ACF1D.60109@sjsoft.com>

Hi

I was wondering if anyone could give me tips on how to build the 
mod_python installer for Windows.

Seems that the dist subdirectory contains stuff to build it using 
distutils, but there was a comment that it should only work in Python 
2.3 because of post install scripts. Is this true? Does this affect the 
build machine only or the target machine too?

Secondly it seems to need to have had configure run. This brings up more 
general build issues. I have mingw, MSys, cygwin installed. However 
configure wants apxs which doesn't come with my Apache 2.0 build for 
Windows, and presumably I need a source tree for Apache. Do I have to 
actually build Apache for Windows, or is just the source sufficient?

Thanks
David


From big.stick at bol.com.br  Wed Apr  2 12:07:14 2003
From: big.stick at bol.com.br (Big Stick)
Date: Fri Jan  9 21:59:57 2004
Subject: [mod_python] vs 3.0.3 compiling issues
Message-ID: <11510490264.20030402120714@bol.com.br>

Hello,

I?m using Red Hat 8, httpd 2.0.40, mod_python 3.0.0 and Python
2.2.2. Everything is working, but I?m experiencing this error when I
try to compile mod_python 3.0.3 (needed for other apps):

...
checking your blood pressure... a bit high, but we can proceed
checking whether apxs is available
checking for --with-apxs... no
checking for apxs in /usr/local/apache/sbin... no
checking for apxs in your PATH... checking for apxs... no
configure: warning: **** apxs was not found, DSO compilation will not be available.
configure: warning: **** You can use --with-apxs to specify where your apxs is.
configure: error: Neither static nor DSO option available, there is no point in continuing.
[r@r r] #

Any hints on this?

Thanks in advance.
- stick


From manfred.stienstra at dwerg.net  Wed Apr  2 17:35:40 2003
From: manfred.stienstra at dwerg.net (Manfred Stienstra)
Date: Fri Jan  9 21:59:57 2004
Subject: [mod_python] vs 3.0.3 compiling issues
In-Reply-To: <11510490264.20030402120714@bol.com.br>
References: <11510490264.20030402120714@bol.com.br>
Message-ID: <200304021735.40618.manfred.stienstra@dwerg.net>

On Wednesday 02 April 2003 17:07, Big Stick wrote:
> Any hints on this?

locate apxs

./configure --with-apxs="PATH TO APXS"

Manfred

From grisha at modpython.org  Wed Apr  2 11:53:03 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:59:58 2004
Subject: [mod_python] Building mod_python installer for Windows
In-Reply-To: <3E8ACF1D.60109@sjsoft.com>
Message-ID: <20030402114701.V45547-100000@eden.ispol.com>

To build the windows installer, you have to first compile mod_python.so
using MS VC++ (there is a project file in the src directory), then you
copy the mod_python.so to a UNIX server. The actual installer,
paradoxically, has to be build on UNIX, and it's as simple as cd-ing into
dist and running "make windist". It *does* require python 2.3 (but only
to build the installer, the actual mod_python.so can be build with any
version of Python above 2.2).

I have no idea if or how this would work on cygwin though.

Grisha

On Wed, 2 Apr 2003, David Fraser wrote:

> Hi
>
> I was wondering if anyone could give me tips on how to build the
> mod_python installer for Windows.
>
> Seems that the dist subdirectory contains stuff to build it using
> distutils, but there was a comment that it should only work in Python
> 2.3 because of post install scripts. Is this true? Does this affect the
> build machine only or the target machine too?
>
> Secondly it seems to need to have had configure run. This brings up more
> general build issues. I have mingw, MSys, cygwin installed. However
> configure wants apxs which doesn't come with my Apache 2.0 build for
> Windows, and presumably I need a source tree for Apache. Do I have to
> actually build Apache for Windows, or is just the source sufficient?
>
> Thanks
> David
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From grisha at modpython.org  Wed Apr  2 11:54:58 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:59:58 2004
Subject: [mod_python] vs 3.0.3 compiling issues
In-Reply-To: <200304021735.40618.manfred.stienstra@dwerg.net>
Message-ID: <20030402115346.S45547-100000@eden.ispol.com>

I'd also recommend a later version of Apache - 2.0.40 is ancient.

Grisha

On Wed, 2 Apr 2003, Manfred Stienstra wrote:

> On Wednesday 02 April 2003 17:07, Big Stick wrote:
> > Any hints on this?
>
> locate apxs
>
> ./configure --with-apxs="PATH TO APXS"
>
> Manfred
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From big.stick at bol.com.br  Wed Apr  2 15:15:31 2003
From: big.stick at bol.com.br (Big Stick)
Date: Fri Jan  9 21:59:58 2004
Subject: [mod_python] vs 3.0.3 compiling issues
In-Reply-To: <20030402115346.S45547-100000@eden.ispol.com>
References: <20030402115346.S45547-100000@eden.ispol.com>
Message-ID: <4121787518.20030402151531@bol.com.br>

Em 2/4/2003 ?s 13:54, Manfred Stienstra escreveu:
>
> locate apxs
>
> ./configure --with-apxs="PATH TO APXS"

It took me a while to find out that apxs is provided by httpd-devel,
and httpd-devel was not installed here. Did that and now everything
seems to be working.

Thanks a lot.
- stick


From remi at python-hosting.com  Thu Apr  3 18:08:02 2003
From: remi at python-hosting.com (Remi Delon)
Date: Fri Jan  9 21:59:58 2004
Subject: [mod_python] [ANN] Python-Hosting.com: new hosting provider specialized in Python
Message-ID: <NFBBIBODGLHPEGPDOAGKIEIBDLAA.remi@python-hosting.com>

Hello everyone,

I am pleased to announce http://python-hosting.com, a new hosting provider
specialized in Python.
We support most Python web tools, including mod_python, Zope, Plone,
WebWare, CherryPy, ...
You can run your mod_python site for 15$/month.


Remi Delon     remi@remove-me.python-hosting.com
----------------------
Specialized python hosting: http://www.python-hosting.com
Python application server: http://www.cherrypy.org
Free CherryPy hosting: http://www.freecherrypy.org
----------------------




From chris at sebis.com  Thu Apr  3 15:31:12 2003
From: chris at sebis.com (Chris Johnson)
Date: Fri Jan  9 21:59:58 2004
Subject: [mod_python] newbie can't start apache2.0.44 with mod_python3.0.3
Message-ID: <3E8CA820.6030606@sebis.com>

hi group,
    I'm having a problem starting apache2.0.44. I added the line:

LoadModule python_module      modules/mod_python.so

    to my httpd.conf. and when I run 'apachectl start' it says:

Cannot load /httpd/apache/modules/mod_python.so into server: /httpd/apache/modules/mod_python.so: Undefined symbol "pthread_sigmask"

So did I miss a step. I've looked over the FAQ contents and googled for 
the error but haven't been able to find any mention of this error.
thanks,
chrisj


From grisha at modpython.org  Thu Apr  3 17:17:48 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:59:58 2004
Subject: [mod_python] newbie can't start apache2.0.44 with mod_python3.0.3
In-Reply-To: <3E8CA820.6030606@sebis.com>
Message-ID: <20030403171703.L80044-100000@eden.ispol.com>

If this is on FreeBSD? There is a note about it in the README.

Grisha

On Thu, 3 Apr 2003, Chris Johnson wrote:

> hi group,
>     I'm having a problem starting apache2.0.44. I added the line:
>
> LoadModule python_module      modules/mod_python.so
>
>     to my httpd.conf. and when I run 'apachectl start' it says:
>
> Cannot load /httpd/apache/modules/mod_python.so into server: /httpd/apache/modules/mod_python.so: Undefined symbol "pthread_sigmask"
>
> So did I miss a step. I've looked over the FAQ contents and googled for
> the error but haven't been able to find any mention of this error.
> thanks,
> chrisj
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From ron at rwsoft.ca  Thu Apr  3 22:42:50 2003
From: ron at rwsoft.ca (Ron Wills)
Date: Fri Jan  9 21:59:58 2004
Subject: [mod_python] Session Tracking
Message-ID: <3E8D1B5A.40001@rwsoft.ca>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hello All

~  There's something that I can't seem to find the in the docs. Currently
I have a set of PHP libs that I use, but was hoping to port my
authenication classes to mod_python. This could simplify things for me,
but I can seem to find anything to do session tracking (with cookies or
so on). Any help would be appretiated.

- --
Ron Wills
RW Software - Owner
http://www.rwsoft.ca
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.6 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQE+jRtZYOHhBYo0q6cRAitPAJ419pftd5SJO6pQUGurlsublJRdywCgrJ3O
dTvskmYzFvxQER9yYVokhW4=
=lSLk
-----END PGP SIGNATURE-----


From davidf at sjsoft.com  Fri Apr  4 08:21:06 2003
From: davidf at sjsoft.com (David Fraser)
Date: Fri Jan  9 21:59:58 2004
Subject: [mod_python] Session Tracking
In-Reply-To: <3E8D1B5A.40001@rwsoft.ca>
References: <3E8D1B5A.40001@rwsoft.ca>
Message-ID: <3E8D2452.7010803@sjsoft.com>

Ron Wills wrote:

> Hello All
>
> ~  There's something that I can't seem to find the in the docs. Currently
> I have a set of PHP libs that I use, but was hoping to port my
> authenication classes to mod_python. This could simplify things for me,
> but I can seem to find anything to do session tracking (with cookies or
> so on). Any help would be appretiated.
>
I've just done this for our application for mod_python.
Basically we use the getcookie and setcookie functions below to get and 
set the cookie
Then we have session objects, each of which has a unique session string, 
which is set in the cookie.
We have a global sessioncache dictionary that looks up a session object 
based on the session string.
We also use this for handling user login etc, so its a bit more 
complicated, but that's the basic
idea and you should be able to use the same idea.

When doing this, I was wondering whether some cookie methods could be 
added to the request object,
since that's where they seem to belong? Could pass in the class of 
cookie you want to use etc...
Any thoughts?

David

def getcookie(req):
  """Reads in any cookie info from the request"""
  try:
    cookiestring = req.headers_in["Cookie"]
  except:
    cookiestring = {}
  cookie = Cookie.SimpleCookie()
  cookie.load(cookiestring)
  cookiedict = {}
  for key, morsel in cookie.iteritems():
    cookiedict[key] = morsel.value
  return cookiedict

def setcookie(req, cookiedict):
  """Puts the bits from the cookiedict into Morsels, sets the req cookie"""
  # construct the cookie from the cookiedict
  cookie = Cookie.SimpleCookie()
  for key, value in cookiedict.iteritems():
    cookie[key] = value
  # add the cookie headers to req.headers_out
  for key, morsel in cookie.iteritems():
    req.headers_out.add('Set-Cookie', morsel.OutputString())




From gnb at itga.com.au  Fri Apr  4 16:38:57 2003
From: gnb at itga.com.au (Gregory Bond)
Date: Fri Jan  9 21:59:58 2004
Subject: [mod_python] Session Tracking 
In-Reply-To: Your message of Thu, 03 Apr 2003 22:42:50 -0700.
Message-ID: <200304040638.QAA04290@lightning.itga.com.au>

> but I can seem to find anything to do session tracking (with cookies or
> so on). Any help would be appretiated.

I got sick of this question so I made an FAQ entry!

	http://www.modpython.org/FAQ/faqw.py?req=show&file=faq03.008.htp




From mike.looijmans at asml.com  Fri Apr  4 08:40:24 2003
From: mike.looijmans at asml.com (Mike Looijmans)
Date: Fri Jan  9 21:59:58 2004
Subject: [mod_python] Session Tracking
Message-ID: <01c2fa75$12017c00$926a1e6e@wsasd464>

I use the following trick to use the standard Cookie class in mod_python:

##
req.headers_out.add('Set-Cookie', cookies.output(header='',
sep='\r\nSet-Cookie:'))
##

By omitting the first header, and setting the "separator" to "Set-Cookie:' it
actually may add more than just one header here, but who cares...

Actually, I feel that Cookie should provide some method of access to the
individual cookie strings. And a Request.add_cookies(...) method would be even
better (mod_python 3.0.5?):

##
cookies = Cookie.SmartCookie()
...
req.add_cookies(cookies)
##


--
Mike Looijmans
Private: http://www.milosoftware.com

-----Original Message-----
...
>When doing this, I was wondering whether some cookie methods could be
>added to the request object,
>since that's where they seem to belong? Could pass in the class of
>cookie you want to use etc...
>Any thoughts?
...


From Paul.Moore at atosorigin.com  Fri Apr  4 11:53:20 2003
From: Paul.Moore at atosorigin.com (Moore, Paul)
Date: Fri Jan  9 21:59:58 2004
Subject: [mod_python] Problem with mod_python.cgihandler in Python 2.2?
Message-ID: <16E1010E4581B049ABC51D4975CEDB88619A2D@UKDCX001.uk.int.atosorigin.com>

I just tried out a CGI script under the cgihandler with mod_python 3.0.3.

I got an error as follows (wrapped for readability):

[Fri Apr 04 11:23:59 2003] [error] [client 127.0.0.1]
PythonHandler mod_python.cgihandler:
Traceback (most recent call last): 
[Fri Apr 04 11:23:59 2003] [error] [client 127.0.0.1]
PythonHandler mod_python.cgihandler:
File "C:\Python22\lib\site-packages\mod_python\apache.py",
line 335, in HandlerDispatch
    result = object(req)
[Fri Apr 04 11:23:59 2003] [error] [client 127.0.0.1]
PythonHandler mod_python.cgihandler:
File "C:\Python22\lib\site-packages\mod_python\cgihandler.py",
line 140, in handler
    apache.restore_nocgi(env, si, so)
[Fri Apr 04 11:23:59 2003] [error] [client 127.0.0.1]
PythonHandler mod_python.cgihandler:
File "C:\Python22\lib\site-packages\mod_python\apache.py",
line 764, in restore_nocgi
    for k in osenv: 

It looks to me like the code at line 764 in apache.py is wrong -

    for k in osenv:
        del osenv[k]

should be

    for k in osenv.keys():
        del osenv[k]

Otherwise, you're modifying the osenv dictionary while you're
iterating over it. Python 2.2.2 seems to have made this an error,
rather than letting it pass (and possibly giving incorrect
results).

At least, I made the above change, and started getting errors from
my script and Apache config, rather than from mod_python :-)

Paul.


From cmulcahy-modpython at avesi.com  Fri Apr  4 10:18:36 2003
From: cmulcahy-modpython at avesi.com (cmulcahy-modpython@avesi.com)
Date: Fri Jan  9 21:59:58 2004
Subject: [mod_python] FAQ
Message-ID: <20030404151836.26928.qmail@zulu.avenirsolutions.com>

How about an index page for "http://www.modpython.org/FAQ" 

Modpython's greatest weakness is a sparseness of documentation
and a lack of explanation/evangelism for the handler model. 

For general apache-handler enlightenment one must often look
for books/google-searches on mod_perl and adapt as necessary. 

mulc

From the_edge2020 at hotmail.com  Sun Apr  6 03:53:44 2003
From: the_edge2020 at hotmail.com (Tommy !!)
Date: Fri Jan  9 21:59:58 2004
Subject: [mod_python] Import Issues
Message-ID: <F46Y7ZggDttW3SC7g4Z0002e234@hotmail.com>

Hi all,

Just curious as to why (by design?) mod_python does not allow one to import 
modules in the same directory as the executing script - instead you have to 
resort to altering sys.path inside each script in order to get it importing 
correctly.

This is an issue if you don't have access to the web server to modify 
httpd.conf and .htaccess files are disabled/limited. Additionally, I may not 
have access to the site-packages directory, or any other directory, for that 
matter, from which my script could import reusable components.

I find this makes it really awkward to code anything above a single file 
Python script (e.g. I'm using a session handling mechanism specific to a 
single web application). Using os.getcwd() seems to indicate that the cwd 
when executing a script with mod_python is my Apache2 directory.

This behaviour occurs on Apache 2.0.43, mod_python 3.0.3, Linux AND Windows.

Am I missing something simple?

Excuse me if this didn't make much sense, it's 4am here :)

Thanks in advance.

Regards,
Tom L


_________________________________________________________________
Hotmail now available on Australian mobile phones. Go to  
http://ninemsn.com.au/mobilecentral/hotmail_mobile.asp


From mike_verdone at shaw.ca  Sat Apr  5 11:20:26 2003
From: mike_verdone at shaw.ca (Mike Verdone)
Date: Fri Jan  9 21:59:58 2004
Subject: [mod_python] Import Issues
In-Reply-To: <F46Y7ZggDttW3SC7g4Z0002e234@hotmail.com>
References: <F46Y7ZggDttW3SC7g4Z0002e234@hotmail.com>
Message-ID: <200304051120.26133.mike_verdone@shaw.ca>

On April 5, 2003 10:53 am, Tommy !! wrote:
> Hi all,
>
> Just curious as to why (by design?) mod_python does not allow one to import
> modules in the same directory as the executing script - instead you have to
> resort to altering sys.path inside each script in order to get it importing
> correctly.
>
> This is an issue if you don't have access to the web server to modify
> httpd.conf and .htaccess files are disabled/limited. Additionally, I may
> not have access to the site-packages directory, or any other directory, for
> that matter, from which my script could import reusable components.
>

The main problem is that mod_python doesn't know what directory it's in when 
it executes a script except in two cases (as far as I can tell):

1. You put the AddHandler directive in the .htaccess file in that directory.

2. You enclose the AddHandler directive in a <Directory> block specifying the 
full path in apache.conf.

Otherwise mod_python has no idea where it's really executing from, and seems 
to default to the apache dir. If your administrator has restricted .htaccess 
and won't set up apache.conf for you, then you're kinda hooped.

Have you looked at the PythonPath directive? You may be able to get away with 
that in your .htacces. e.g.:

PythonPath "['/the/scripts/directory'] + sys.path"

Good luck!

Mike.


From the_edge2020 at hotmail.com  Sun Apr  6 11:57:40 2003
From: the_edge2020 at hotmail.com (Tommy !!)
Date: Fri Jan  9 21:59:58 2004
Subject: [mod_python] Import Issues
Message-ID: <F93TcjJxWY5pCxlICSs0000066a@hotmail.com>

Hi Mike (and pascal),

Wouldn't mod_python be able to determine the directory it is executing in 
from the request (in a handler maybe)? Or, at the very least, in the Apache 
module itself, since mod_python must obviously know where the current script 
is being executed in order to actually execute it (see the request_rec 
structure in the Apache 2 C source code to see the relevant fields).

I would think that you could either:
a) modify the handler itself to check the request for the path to the 
module, and then use os.path.dir (? from memory) to grab the directory it's 
executing in, and then throw that into the sys.path?
b) take the same path that the Apache module itself does when it calls 
*sound of source code ruffling* PythonChildInitHandler (mod_python.c) and 
use the Python API to manipulate the sys.path global itself (except, 
obviously, from python_handler in the same file, where you *should* actually 
know where the file is located)

Anyways I'm going to have a bit of a hack around the source code and see 
what I come up with.

Thanks for your time guys, if you have any further comments I'd love to hear 
about it :)

Kind Regards,
Tom L




>From: Mike Verdone <mike_verdone@shaw.ca>
>To: Tommy !! <the_edge2020@hotmail.com>, mod_python@modpython.org
>Subject: Re: [mod_python] Import Issues
>Date: Sat, 05 Apr 2003 11:20:26 -0700
>MIME-Version: 1.0
>Received: from mc5-f20.law1.hotmail.com ([65.54.252.27]) by 
>mc5-s2.law1.hotmail.com with Microsoft SMTPSVC(5.0.2195.5600); Sat, 5 Apr 
>2003 10:29:20 -0800
>Received: from eden.ispol.com ([206.239.103.254]) by 
>mc5-f20.law1.hotmail.com with Microsoft SMTPSVC(5.0.2195.5600); Sat, 5 Apr 
>2003 10:28:26 -0800
>Received: from eden.ispol.com (localhost.ispol.com [127.0.0.1])by 
>eden.ispol.com (8.12.6/8.11.1) with ESMTP id h35IL4WT029214;Sat, 5 Apr 2003 
>13:21:04 -0500 (EST)(envelope-from mod_python-admin@modpython.org)
>Received: from pd6mo2so.prod.shaw.ca (shawidc-mo1.cg.shawcable.net 
>[24.71.223.10])by eden.ispol.com (8.12.6/8.11.1) with ESMTP id 
>h35IK9WT029190for <mod_python@modpython.org>; Sat, 5 Apr 2003 13:20:09 
>-0500 (EST)(envelope-from mike_verdone@shaw.ca)
>Received: from pd3mr3so.prod.shaw.ca (pd3mr3so-ser.prod.shaw.ca 
>[10.0.141.179]) by l-daemon (iPlanet Messaging Server 5.1 HotFix 0.8 (built 
>May 12 2002)) with ESMTP id <0HCV004PCUXCO3@l-daemon> for 
>mod_python@modpython.org; Sat, 05 Apr 2003 11:20:00 -0700 (MST)
>Received: from pn2ml5so.prod.shaw.ca (pn2ml5so-qfe0.prod.shaw.ca 
>[10.0.121.149]) by l-daemon (iPlanet Messaging Server 5.1 HotFix 0.8 (built 
>May 12 2002)) with ESMTP id <0HCV00BORUXCL2@l-daemon> for 
>mod_python@modpython.org; Sat, 05 Apr 2003 11:20:00 -0700 (MST)
>Received: from 192.168.0.42 (h68-144-147-185.cg.shawcable.net 
>[68.144.147.185]) by l-daemon (iPlanet Messaging Server 5.1 HotFix 0.8 
>(built May 12 2002)) with ESMTP id <0HCV00F46UXCP9@l-daemon> for 
>mod_python@modpython.org; Sat, 05 Apr 2003 11:20:00 -0700 (MST)
>X-Message-Info: pdGgd64CkwYBecCeulYyOTshuDTWlDUk
>In-reply-to: <F46Y7ZggDttW3SC7g4Z0002e234@hotmail.com>
>Message-id: <200304051120.26133.mike_verdone@shaw.ca>
>User-Agent: KMail/1.5.1
>References: <F46Y7ZggDttW3SC7g4Z0002e234@hotmail.com>
>Sender: mod_python-admin@modpython.org
>Errors-To: mod_python-admin@modpython.org
>X-BeenThere: mod_python@modpython.org
>X-Mailman-Version: 2.0.12
>Precedence: bulk
>List-Help: <mailto:mod_python-request@modpython.org?subject=help>
>List-Post: <mailto:mod_python@modpython.org>
>List-Subscribe: 
><http://www.modpython.org/mailman/listinfo/mod_python>,<mailto:mod_python-request@modpython.org?subject=subscribe>
>List-Id: mod_python user mailing list <mod_python.modpython.org>
>List-Unsubscribe: 
><http://www.modpython.org/mailman/listinfo/mod_python>,<mailto:mod_python-request@modpython.org?subject=unsubscribe>
>List-Archive: <http://www.modpython.org/pipermail/mod_python/>
>Return-Path: mod_python-admin@modpython.org
>X-OriginalArrivalTime: 05 Apr 2003 18:28:28.0117 (UTC) 
>FILETIME=[26ED0850:01C2FBA1]
>
>On April 5, 2003 10:53 am, Tommy !! wrote:
> > Hi all,
> >
> > Just curious as to why (by design?) mod_python does not allow one to 
>import
> > modules in the same directory as the executing script - instead you have 
>to
> > resort to altering sys.path inside each script in order to get it 
>importing
> > correctly.
> >
> > This is an issue if you don't have access to the web server to modify
> > httpd.conf and .htaccess files are disabled/limited. Additionally, I may
> > not have access to the site-packages directory, or any other directory, 
>for
> > that matter, from which my script could import reusable components.
> >
>
>The main problem is that mod_python doesn't know what directory it's in 
>when
>it executes a script except in two cases (as far as I can tell):
>
>1. You put the AddHandler directive in the .htaccess file in that 
>directory.
>
>2. You enclose the AddHandler directive in a <Directory> block specifying 
>the
>full path in apache.conf.
>
>Otherwise mod_python has no idea where it's really executing from, and 
>seems
>to default to the apache dir. If your administrator has restricted 
>.htaccess
>and won't set up apache.conf for you, then you're kinda hooped.
>
>Have you looked at the PythonPath directive? You may be able to get away 
>with
>that in your .htacces. e.g.:
>
>PythonPath "['/the/scripts/directory'] + sys.path"
>
>Good luck!
>
>Mike.
>
>_______________________________________________
>Mod_python mailing list
>Mod_python@modpython.org
>http://www.modpython.org/mailman/listinfo/mod_python


_________________________________________________________________
MSN Instant Messenger now available on Australian mobile phones. Go to  
http://ninemsn.com.au/mobilecentral/hotmail_messenger.asp


From the_edge2020 at hotmail.com  Sun Apr  6 15:02:02 2003
From: the_edge2020 at hotmail.com (Tommy !!)
Date: Fri Jan  9 21:59:58 2004
Subject: [mod_python] Import Issues
Message-ID: <F24k8eDDSFc6hFHh9la00014034@hotmail.com>

Hi all,

I achieved what I wanted by modifying publisher.py - obviously this is a bit 
dirty since it's handler-specific, but oh well - it works.

Basically, I use the following code in publisher.py prior to calling the 
target python script itself (where 'path' is the path to the python script 
determined by publisher.py):

if not path in sys.path:
  sys.path.append( path )

# ...

while path in sys.path:
  del sys.path[sys.path.index( path )]


Is there a chance something like this could be added to future versions of 
mod_python? If not, why not? I don't see why it should be necessary to 
modify httpd.conf or a .htaccess file for every web application I write when 
it could be as simple as writing a script & some supporting moudles :)

Another question - what's to stop a remote user from running any given 
method in an arbitrary python script within a directory when using the 
publisher handler?

Regards,
Tom L






>From: Mike Verdone <mike_verdone@shaw.ca>
>To: Tommy !! <the_edge2020@hotmail.com>, mod_python@modpython.org
>Subject: Re: [mod_python] Import Issues
>Date: Sat, 05 Apr 2003 11:20:26 -0700
>MIME-Version: 1.0
>Received: from mc5-f20.law1.hotmail.com ([65.54.252.27]) by 
>mc5-s2.law1.hotmail.com with Microsoft SMTPSVC(5.0.2195.5600); Sat, 5 Apr 
>2003 10:29:20 -0800
>Received: from eden.ispol.com ([206.239.103.254]) by 
>mc5-f20.law1.hotmail.com with Microsoft SMTPSVC(5.0.2195.5600); Sat, 5 Apr 
>2003 10:28:26 -0800
>Received: from eden.ispol.com (localhost.ispol.com [127.0.0.1])by 
>eden.ispol.com (8.12.6/8.11.1) with ESMTP id h35IL4WT029214;Sat, 5 Apr 2003 
>13:21:04 -0500 (EST)(envelope-from mod_python-admin@modpython.org)
>Received: from pd6mo2so.prod.shaw.ca (shawidc-mo1.cg.shawcable.net 
>[24.71.223.10])by eden.ispol.com (8.12.6/8.11.1) with ESMTP id 
>h35IK9WT029190for <mod_python@modpython.org>; Sat, 5 Apr 2003 13:20:09 
>-0500 (EST)(envelope-from mike_verdone@shaw.ca)
>Received: from pd3mr3so.prod.shaw.ca (pd3mr3so-ser.prod.shaw.ca 
>[10.0.141.179]) by l-daemon (iPlanet Messaging Server 5.1 HotFix 0.8 (built 
>May 12 2002)) with ESMTP id <0HCV004PCUXCO3@l-daemon> for 
>mod_python@modpython.org; Sat, 05 Apr 2003 11:20:00 -0700 (MST)
>Received: from pn2ml5so.prod.shaw.ca (pn2ml5so-qfe0.prod.shaw.ca 
>[10.0.121.149]) by l-daemon (iPlanet Messaging Server 5.1 HotFix 0.8 (built 
>May 12 2002)) with ESMTP id <0HCV00BORUXCL2@l-daemon> for 
>mod_python@modpython.org; Sat, 05 Apr 2003 11:20:00 -0700 (MST)
>Received: from 192.168.0.42 (h68-144-147-185.cg.shawcable.net 
>[68.144.147.185]) by l-daemon (iPlanet Messaging Server 5.1 HotFix 0.8 
>(built May 12 2002)) with ESMTP id <0HCV00F46UXCP9@l-daemon> for 
>mod_python@modpython.org; Sat, 05 Apr 2003 11:20:00 -0700 (MST)
>X-Message-Info: pdGgd64CkwYBecCeulYyOTshuDTWlDUk
>In-reply-to: <F46Y7ZggDttW3SC7g4Z0002e234@hotmail.com>
>Message-id: <200304051120.26133.mike_verdone@shaw.ca>
>User-Agent: KMail/1.5.1
>References: <F46Y7ZggDttW3SC7g4Z0002e234@hotmail.com>
>Sender: mod_python-admin@modpython.org
>Errors-To: mod_python-admin@modpython.org
>X-BeenThere: mod_python@modpython.org
>X-Mailman-Version: 2.0.12
>Precedence: bulk
>List-Help: <mailto:mod_python-request@modpython.org?subject=help>
>List-Post: <mailto:mod_python@modpython.org>
>List-Subscribe: 
><http://www.modpython.org/mailman/listinfo/mod_python>,<mailto:mod_python-request@modpython.org?subject=subscribe>
>List-Id: mod_python user mailing list <mod_python.modpython.org>
>List-Unsubscribe: 
><http://www.modpython.org/mailman/listinfo/mod_python>,<mailto:mod_python-request@modpython.org?subject=unsubscribe>
>List-Archive: <http://www.modpython.org/pipermail/mod_python/>
>Return-Path: mod_python-admin@modpython.org
>X-OriginalArrivalTime: 05 Apr 2003 18:28:28.0117 (UTC) 
>FILETIME=[26ED0850:01C2FBA1]
>
>On April 5, 2003 10:53 am, Tommy !! wrote:
> > Hi all,
> >
> > Just curious as to why (by design?) mod_python does not allow one to 
>import
> > modules in the same directory as the executing script - instead you have 
>to
> > resort to altering sys.path inside each script in order to get it 
>importing
> > correctly.
> >
> > This is an issue if you don't have access to the web server to modify
> > httpd.conf and .htaccess files are disabled/limited. Additionally, I may
> > not have access to the site-packages directory, or any other directory, 
>for
> > that matter, from which my script could import reusable components.
> >
>
>The main problem is that mod_python doesn't know what directory it's in 
>when
>it executes a script except in two cases (as far as I can tell):
>
>1. You put the AddHandler directive in the .htaccess file in that 
>directory.
>
>2. You enclose the AddHandler directive in a <Directory> block specifying 
>the
>full path in apache.conf.
>
>Otherwise mod_python has no idea where it's really executing from, and 
>seems
>to default to the apache dir. If your administrator has restricted 
>.htaccess
>and won't set up apache.conf for you, then you're kinda hooped.
>
>Have you looked at the PythonPath directive? You may be able to get away 
>with
>that in your .htacces. e.g.:
>
>PythonPath "['/the/scripts/directory'] + sys.path"
>
>Good luck!
>
>Mike.
>
>_______________________________________________
>Mod_python mailing list
>Mod_python@modpython.org
>http://www.modpython.org/mailman/listinfo/mod_python


_________________________________________________________________
Hotmail now available on Australian mobile phones. Go to  
http://ninemsn.com.au/mobilecentral/hotmail_mobile.asp


From grisha at modpython.org  Sun Apr  6 16:28:48 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:59:58 2004
Subject: [mod_python] Import Issues
In-Reply-To: <F24k8eDDSFc6hFHh9la00014034@hotmail.com>
Message-ID: <20030406161905.L45203-100000@eden.ispol.com>

On Sun, 6 Apr 2003, Tommy !! wrote:

> Hi all,
>
> I achieved what I wanted by modifying publisher.py - obviously this is a bit
> dirty since it's handler-specific, but oh well - it works.
>
> Basically, I use the following code in publisher.py prior to calling the
> target python script itself (where 'path' is the path to the python script
> determined by publisher.py):
>
> if not path in sys.path:
>   sys.path.append( path )
>
> # ...
>
> while path in sys.path:
>   del sys.path[sys.path.index( path )]

Hm... Not sure I understand what this does, since the publisher already
does add the path, in fact it restricts it so that the module can only be
imported from that particular path.

> Another question - what's to stop a remote user from running any given
> method in an arbitrary python script within a directory when using the
> publisher handler?

If that directory is exposed to the web (i.e. is under DocumentRoot), then
nothing, you should be very careful about that. The publisher will not run
anything that beginc with an "_" so it's a good idea to name all internal
functions beginning with an underscore.

Grisha



From pzb at datastacks.com  Sun Apr  6 18:15:02 2003
From: pzb at datastacks.com (Peter Bowen)
Date: Fri Jan  9 21:59:58 2004
Subject: [mod_python] Why are you using mod_python?
In-Reply-To: <20030328231412.24efac21.frank@fejes.net>
References: <20030328075642.A25172@ash.int.ca.pason.com>
	 <20030328172826.X67038-100000@eden.ispol.com>
	 <20030328231412.24efac21.frank@fejes.net>
Message-ID: <1049667302.13572.20.camel@localhost.localdomain>

On Sat, 2003-03-29 at 00:14, Frank S. Fejes III wrote:
> On a somewhat tangential note, I think mod_python documentation reflects
> strangely on what target audience might be interested in the module.  Almost
> all introductions I've seen to mod_python begin with a tutorial on creating
> a handler.  I'd venture a guess that writing handlers is what fewer than 1%
> of web developers want to do with an apache module initially.  In my
> experience, most people want to write some code and have it run faster than
> it would run under straight CGI...they don't want to write custom handlers.

I would have to disagree.  We were using PHP 4.x, but it doesn't have
support for all the hooks that apache offers.  We use the trans, authen,
authz, and content handlers for our projects.  We don't use the FastCGI
or publisher handlers at all.

Additionally mod_python offered us an opportunity to use python, which
we find offers faster development with less work and less bugs.  Python
is a very well designed language.  We were stretching the bounds of PHP
and perl, while being flexible, is too much of a write-only language.

Thanks.
Peter

From sterling at bumblebury.com  Sun Apr  6 18:50:03 2003
From: sterling at bumblebury.com (Sterling Hughes)
Date: Fri Jan  9 21:59:58 2004
Subject: [mod_python] Why are you using mod_python?
In-Reply-To: <1049667302.13572.20.camel@localhost.localdomain>
References: <20030328075642.A25172@ash.int.ca.pason.com>
	 <20030328172826.X67038-100000@eden.ispol.com>
	 <20030328231412.24efac21.frank@fejes.net>
	 <1049667302.13572.20.camel@localhost.localdomain>
Message-ID: <1049669403.28037.155.camel@hasele>

On Sun, 2003-04-06 at 18:15, Peter Bowen wrote:
> On Sat, 2003-03-29 at 00:14, Frank S. Fejes III wrote:
> > On a somewhat tangential note, I think mod_python documentation reflects
> > strangely on what target audience might be interested in the module.  Almost
> > all introductions I've seen to mod_python begin with a tutorial on creating
> > a handler.  I'd venture a guess that writing handlers is what fewer than 1%
> > of web developers want to do with an apache module initially.  In my
> > experience, most people want to write some code and have it run faster than
> > it would run under straight CGI...they don't want to write custom handlers.
> 
> I would have to disagree.  We were using PHP 4.x, but it doesn't have
> support for all the hooks that apache offers.  We use the trans, authen,
> authz, and content handlers for our projects.  We don't use the FastCGI
> or publisher handlers at all.
> 

Just a note that php does support all of this.

> Additionally mod_python offered us an opportunity to use python, which
> we find offers faster development with less work and less bugs.  Python
> is a very well designed language.  We were stretching the bounds of PHP
> and perl, while being flexible, is too much of a write-only language.
> 

Very true. :)

-Sterling
-- 
Good judgement comes from experience, and experience comes from 
bad judgement. 
    - Fred Brooks


From khalid_kary at hotmail.com  Sun Apr  6 23:55:49 2003
From: khalid_kary at hotmail.com (Khalid El-Kary)
Date: Fri Jan  9 21:59:58 2004
Subject: [mod_python] newbie and unable to get it working
Message-ID: <F50wefzQqWCdFF0a9jm00057331@hotmail.com>

Hi fellows,
I followed the installation instructions as in the mod_python documentation 
"A Windows Installation" section ...

and added the following lines to httpd.conf:

<Directory "<Your Document Root>/python">
   AddHandler python-program .py
   PythonHandler mptest
   PythonDebug on
</Directory>

replaced "your document root" with mine :-)

and created a file called mptest.py under "my document root/python"
which contained:

from mod_python import apache

def handler(req):
   req.content_type = "text/plain"
   req.send_http_header()
   req.write("Hello World!")
   return apache.OK

Apache starts normally and writes out the mod_python headers and an error 
message with which it continues normally:

'import site' failed; use -v for traceback
Apache/1.3.24 (win32) mod_python/2.7.6 Python/2.2.1 PHP/4.2.3 running ...

unfrotunately, when i request "http://servername/python/mptest.py" it gives 
an "500 - internal server error" ...

note that mod_python and python installations with apache went just fine, 
since the headers were written properly.

Windows ME, Apache 1.3.24, mod_python 2.7.6, Python 2.2.1

anything wrong, or any suggestions to get it running ?

thanx in advance,

Regards,
Khalid Al-Kary





_________________________________________________________________
Tired of spam? Get advanced junk mail protection with MSN 8. 
http://join.msn.com/?page=features/junkmail


From scott_list at mischko.com  Mon Apr  7 08:30:50 2003
From: scott_list at mischko.com (Scott Chapman)
Date: Fri Jan  9 21:59:58 2004
Subject: [mod_python] Why are you using mod_python?
In-Reply-To: <20030328231412.24efac21.frank@fejes.net>
References: <20030328075642.A25172@ash.int.ca.pason.com> <20030328172826.X67038-100000@eden.ispol.com> <20030328231412.24efac21.frank@fejes.net>
Message-ID: <200304070830.50822.scott_list@mischko.com>

On Friday 28 March 2003 21:14, Frank S. Fejes III wrote:
> On a somewhat tangential note, I think mod_python documentation reflects
> strangely on what target audience might be interested in the module. 
> Almost all introductions I've seen to mod_python begin with a tutorial on
> creating a handler.  I'd venture a guess that writing handlers is what
> fewer than 1% of web developers want to do with an apache module initially.
>  In my experience, most people want to write some code and have it run
> faster than it would run under straight CGI...they don't want to write
> custom handlers.

I very much agree with you.  The docs could use some improvment in this area.

Scott

From vlindberg at verio.net  Mon Apr  7 10:38:41 2003
From: vlindberg at verio.net (VanL)
Date: Fri Jan  9 21:59:58 2004
Subject: [mod_python] Import Issues
In-Reply-To: <20030406161905.L45203-100000@eden.ispol.com>
References: <20030406161905.L45203-100000@eden.ispol.com>
Message-ID: <3E91A991.1040207@verio.net>

Hello,

I am probably being just dense, but I cannot get my modules to import 
under mod_python.

I can do it fine at the command line:

 >>> from issuetracker import version_check
 >>>

However, mod_python complains:

[Mon Apr  7 16:27:46 2003] [error] PythonHandler mod_python.cgihandler: 
Traceback (most recent call last):
[]   File "/usr/local/lib/python2.2/site-packages/mod_python/apache.py", 
line 193, in Dispatch
    result = object(req)
[] PythonHandler mod_python.cgihandler:   File 
"/usr/local/lib/python2.2/site-packages/mod_python/cgihandler.py", line 
122, in handler
    imp.load_module(module_name, fd, path, desc)
[] PythonHandler mod_python.cgihandler:   File 
"/usr/local/webmanager/controlpanel/support/issuetracker.py", line 31, in ?
    from issuetracker import version_check
[] PythonHandler mod_python.cgihandler: ImportError: cannot import name 
version_check

So I thought that perhaps my sys.path was bad.
I changed the code:
try:
    from issuetracker import version_check
except ImportError:
    raise ImportError(' '.join(sys.path))

Still an error:
[top levels snipped]
[] PythonHandler mod_python.cgihandler: ImportError: 
/usr/local/lib/python2.2threadless 
/usr/local/lib/python2.2threadless/plat-freebsd4 
/usr/local/lib/python2.2threadless/lib-tk 
/usr/local/lib/python2.2threadless/lib-dynload 
/usr/local/lib/python2.2/site-packages /usr/local/webmanager 
/usr/local/webmanager/pylib /usr/local/webmanager/pylib/Packages

issuetracker is a package under /usr/local/webmanager/pylib:
# ls /usr/local/webmanager/pylib/issuetracker/*.py
/usr/local/webmanager/pylib/issuetracker/__init__.py
/usr/local/webmanager/pylib/issuetracker/version_check.py


I have been able to get other modules to import, and I can import 
issuetracker (top-level only) with no problems.  Anyone have a clue?

Apache 1.3.26, mod_python 2.78, python2.2-threadless.

Thanks,

VanL





From grisha at modpython.org  Mon Apr  7 14:03:52 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:59:58 2004
Subject: [mod_python] Import Issues
In-Reply-To: <3E91A991.1040207@verio.net>
Message-ID: <20030407140250.V55953-100000@eden.ispol.com>

Are sure it's not a permissions problem? Httpd most likely runs as user
"nobody", so all Python libs you're using must be world-readable.

Grisha

On Mon, 7 Apr 2003, VanL wrote:

> Hello,
>
> I am probably being just dense, but I cannot get my modules to import
> under mod_python.
>
> I can do it fine at the command line:
>
>  >>> from issuetracker import version_check
>  >>>
>
> However, mod_python complains:
>
> [Mon Apr  7 16:27:46 2003] [error] PythonHandler mod_python.cgihandler:
> Traceback (most recent call last):
> []   File "/usr/local/lib/python2.2/site-packages/mod_python/apache.py",
> line 193, in Dispatch
>     result = object(req)
> [] PythonHandler mod_python.cgihandler:   File
> "/usr/local/lib/python2.2/site-packages/mod_python/cgihandler.py", line
> 122, in handler
>     imp.load_module(module_name, fd, path, desc)
> [] PythonHandler mod_python.cgihandler:   File
> "/usr/local/webmanager/controlpanel/support/issuetracker.py", line 31, in ?
>     from issuetracker import version_check
> [] PythonHandler mod_python.cgihandler: ImportError: cannot import name
> version_check
>
> So I thought that perhaps my sys.path was bad.
> I changed the code:
> try:
>     from issuetracker import version_check
> except ImportError:
>     raise ImportError(' '.join(sys.path))
>
> Still an error:
> [top levels snipped]
> [] PythonHandler mod_python.cgihandler: ImportError:
> /usr/local/lib/python2.2threadless
> /usr/local/lib/python2.2threadless/plat-freebsd4
> /usr/local/lib/python2.2threadless/lib-tk
> /usr/local/lib/python2.2threadless/lib-dynload
> /usr/local/lib/python2.2/site-packages /usr/local/webmanager
> /usr/local/webmanager/pylib /usr/local/webmanager/pylib/Packages
>
> issuetracker is a package under /usr/local/webmanager/pylib:
> # ls /usr/local/webmanager/pylib/issuetracker/*.py
> /usr/local/webmanager/pylib/issuetracker/__init__.py
> /usr/local/webmanager/pylib/issuetracker/version_check.py
>
>
> I have been able to get other modules to import, and I can import
> issuetracker (top-level only) with no problems.  Anyone have a clue?
>
> Apache 1.3.26, mod_python 2.78, python2.2-threadless.
>
> Thanks,
>
> VanL
>
>
>
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From vlindberg at verio.net  Mon Apr  7 12:13:26 2003
From: vlindberg at verio.net (VanL)
Date: Fri Jan  9 21:59:58 2004
Subject: [mod_python] Import Issues
In-Reply-To: <20030407140250.V55953-100000@eden.ispol.com>
References: <20030407140250.V55953-100000@eden.ispol.com>
Message-ID: <3E91BFC6.8040202@verio.net>

Gregory (Grisha) Trubetskoy wrote:

>Are sure it's not a permissions problem? Httpd most likely runs as user
>"nobody", so all Python libs you're using must be world-readable.
>
Checked it already:  httpd runs as user "www"  All files in the pylib 
directory have 755 permissions, and the group is set to www also.  
Either way, they should be world-readable.

VanL


>
>Grisha
>
>On Mon, 7 Apr 2003, VanL wrote:
>
>  
>
>>Hello,
>>
>>I am probably being just dense, but I cannot get my modules to import
>>under mod_python.
>>
>>I can do it fine at the command line:
>>
>> >>> from issuetracker import version_check
>> >>>
>>
>>However, mod_python complains:
>>
>>[Mon Apr  7 16:27:46 2003] [error] PythonHandler mod_python.cgihandler:
>>Traceback (most recent call last):
>>[]   File "/usr/local/lib/python2.2/site-packages/mod_python/apache.py",
>>line 193, in Dispatch
>>    result = object(req)
>>[] PythonHandler mod_python.cgihandler:   File
>>"/usr/local/lib/python2.2/site-packages/mod_python/cgihandler.py", line
>>122, in handler
>>    imp.load_module(module_name, fd, path, desc)
>>[] PythonHandler mod_python.cgihandler:   File
>>"/usr/local/webmanager/controlpanel/support/issuetracker.py", line 31, in ?
>>    from issuetracker import version_check
>>[] PythonHandler mod_python.cgihandler: ImportError: cannot import name
>>version_check
>>
>>So I thought that perhaps my sys.path was bad.
>>I changed the code:
>>try:
>>    from issuetracker import version_check
>>except ImportError:
>>    raise ImportError(' '.join(sys.path))
>>
>>Still an error:
>>[top levels snipped]
>>[] PythonHandler mod_python.cgihandler: ImportError:
>>/usr/local/lib/python2.2threadless
>>/usr/local/lib/python2.2threadless/plat-freebsd4
>>/usr/local/lib/python2.2threadless/lib-tk
>>/usr/local/lib/python2.2threadless/lib-dynload
>>/usr/local/lib/python2.2/site-packages /usr/local/webmanager
>>/usr/local/webmanager/pylib /usr/local/webmanager/pylib/Packages
>>
>>issuetracker is a package under /usr/local/webmanager/pylib:
>># ls /usr/local/webmanager/pylib/issuetracker/*.py
>>/usr/local/webmanager/pylib/issuetracker/__init__.py
>>/usr/local/webmanager/pylib/issuetracker/version_check.py
>>
>>
>>I have been able to get other modules to import, and I can import
>>issuetracker (top-level only) with no problems.  Anyone have a clue?
>>
>>Apache 1.3.26, mod_python 2.78, python2.2-threadless.
>>
>>Thanks,
>>
>>VanL
>>
>>
>>
>>
>>_______________________________________________
>>Mod_python mailing list
>>Mod_python@modpython.org
>>http://www.modpython.org/mailman/listinfo/mod_python
>>
>>    
>>
>
>  
>



From neel at mediapulse.com  Mon Apr  7 15:17:54 2003
From: neel at mediapulse.com (Michael C. Neel)
Date: Fri Jan  9 21:59:58 2004
Subject: [mod_python] Import Issues
Message-ID: <C0FC22C08B82074A88B50061764157772C65A2@johnson.mediapulse.net>

Sorry for the blank email, hit a bad key combo.

Anyway, looks like there might be a path issue invloved, as I see both
/usr/local/lib/python2.2 and /usr/local/lib/python2.2threadless below.
Did you make a custom install of python for mod_python (not uncommon)?
If so, which one is mod_python linked against?

Mike

-----Original Message-----
From: VanL [mailto:vlindberg@verio.net] 
Sent: Monday, April 07, 2003 2:13 PM
To: Gregory (Grisha) Trubetskoy
Cc: mod_python@modpython.org
Subject: Re: [mod_python] Import Issues


Gregory (Grisha) Trubetskoy wrote:

>Are sure it's not a permissions problem? Httpd most likely runs as user

>"nobody", so all Python libs you're using must be world-readable.
>
Checked it already:  httpd runs as user "www"  All files in the pylib 
directory have 755 permissions, and the group is set to www also.  
Either way, they should be world-readable.

VanL


>
>Grisha
>
>On Mon, 7 Apr 2003, VanL wrote:
>
>  
>
>>Hello,
>>
>>I am probably being just dense, but I cannot get my modules to import 
>>under mod_python.
>>
>>I can do it fine at the command line:
>>
>> >>> from issuetracker import version_check
>> >>>
>>
>>However, mod_python complains:
>>
>>[Mon Apr  7 16:27:46 2003] [error] PythonHandler 
>>mod_python.cgihandler: Traceback (most recent call last):
>>[]   File
"/usr/local/lib/python2.2/site-packages/mod_python/apache.py",
>>line 193, in Dispatch
>>    result = object(req)
>>[] PythonHandler mod_python.cgihandler:   File
>>"/usr/local/lib/python2.2/site-packages/mod_python/cgihandler.py", 
>>line 122, in handler
>>    imp.load_module(module_name, fd, path, desc)
>>[] PythonHandler mod_python.cgihandler:   File
>>"/usr/local/webmanager/controlpanel/support/issuetracker.py", line 31,
in ?
>>    from issuetracker import version_check
>>[] PythonHandler mod_python.cgihandler: ImportError: cannot import 
>>name version_check
>>
>>So I thought that perhaps my sys.path was bad.
>>I changed the code:
>>try:
>>    from issuetracker import version_check
>>except ImportError:
>>    raise ImportError(' '.join(sys.path))
>>
>>Still an error:
>>[top levels snipped]
>>[] PythonHandler mod_python.cgihandler: ImportError: 
>>/usr/local/lib/python2.2threadless
>>/usr/local/lib/python2.2threadless/plat-freebsd4
>>/usr/local/lib/python2.2threadless/lib-tk
>>/usr/local/lib/python2.2threadless/lib-dynload
>>/usr/local/lib/python2.2/site-packages /usr/local/webmanager 
>>/usr/local/webmanager/pylib /usr/local/webmanager/pylib/Packages
>>
>>issuetracker is a package under /usr/local/webmanager/pylib: # ls 
>>/usr/local/webmanager/pylib/issuetracker/*.py
>>/usr/local/webmanager/pylib/issuetracker/__init__.py
>>/usr/local/webmanager/pylib/issuetracker/version_check.py
>>
>>
>>I have been able to get other modules to import, and I can import 
>>issuetracker (top-level only) with no problems.  Anyone have a clue?
>>
>>Apache 1.3.26, mod_python 2.78, python2.2-threadless.
>>
>>Thanks,
>>
>>VanL
>>
>>
>>
>>
>>_______________________________________________
>>Mod_python mailing list
>>Mod_python@modpython.org 
>>http://www.modpython.org/mailman/listinfo/mod_python
>>
>>    
>>
>
>  
>


_______________________________________________
Mod_python mailing list
Mod_python@modpython.org
http://www.modpython.org/mailman/listinfo/mod_python


From vlindberg at verio.net  Mon Apr  7 13:32:57 2003
From: vlindberg at verio.net (VanL)
Date: Fri Jan  9 21:59:58 2004
Subject: [mod_python] Import Issues
In-Reply-To: <C0FC22C08B82074A88B50061764157772C65A2@johnson.mediapulse.net>
References: <C0FC22C08B82074A88B50061764157772C65A2@johnson.mediapulse.net>
Message-ID: <3E91D269.6000505@verio.net>

Michael C. Neel wrote:

>Sorry for the blank email, hit a bad key combo.
>
>Anyway, looks like there might be a path issue invloved, as I see both
>/usr/local/lib/python2.2 and /usr/local/lib/python2.2threadless below.
>Did you make a custom install of python for mod_python (not uncommon)?
>If so, which one is mod_python linked against?
>
>Mike
>
Both exist; mod_python is linked against the threadless install.  On a 
side note, I built the threadless installation and mod python, however, 
for some reason the /usr/local/lib/python2.2/site-packages is the only 
site-packages in the import path.  So, mod_python was built against the 
threadless installation, and both the normal and threadless 
installations exist, but the mod_python package is actually symlinked 
into both /usr/local/lib/python2.2/site-packages as well as  
/usr/local/lib/python2.2threadless/site-packages.

Every other library (other than those in the standard lib) are located 
in /usr/local/webmanager pylib.

VanL



From manuel at aguete.org  Tue Apr  8 17:35:11 2003
From: manuel at aguete.org (Manuel =?ISO-8859-1?Q?Dur=E1n?= Aguete)
Date: Fri Jan  9 21:59:58 2004
Subject: [mod_python] A question
Message-ID: <1049816111.882.49.camel@dt1010b.quantum.int>

Hello,
	I'm implementing a XMLRPC dispatcher with mod_python, it's almost done,
but after a few petitions the script crashed with internal server error.
The problem it's in apache.py in method import_module.

#        if not file or (path and not os.path.dirname(file) in path):
#                raise SERVER_RETURN, HTTP_NOT_FOUND

if I comment these lines it seems to work ok. Printing the variables in
if I get: 
[Tue Apr  8 16:03:53 2003] [notice] mod_python: Going to import cosa
from ['/home/manuel/public_html/python/']: <module 'cosa' from
'/home/manuel/public_html/python/cosa.py'>
 mod_python: File is /home/manuel/public_html/python/cosa.py Path is
['/home/manuel/public_html/python/'] Dirname:
/home/manuel/public_html/python

I'm usign mod_python 2.7.8 with python 2.1.3 under Debian Gnu/Linux with
apache 1.3.26

Any idea what's happening ?

								Regards.
-- 
Manuel Dur?n Aguete <manuel@aguete.org>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://mailman.modpython.org/pipermail/mod_python/attachments/20030408/f80ef813/attachment-0002.bin
From grisha at modpython.org  Tue Apr  8 13:15:46 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:59:58 2004
Subject: [mod_python] A question
In-Reply-To: <1049816111.882.49.camel@dt1010b.quantum.int>
Message-ID: <20030408131434.I71082-100000@eden.ispol.com>

I think the problem is somewhere else, because the lines you commented out
would at works produce "Not Found", but not "Internal Server Error". When
you get "Internal Server Error", check what's in the error log, there may
be a clue there.

Grisha

On 8 Apr 2003, Manuel [ISO-8859-1] Dur?n Aguete wrote:

> Hello,
> 	I'm implementing a XMLRPC dispatcher with mod_python, it's almost done,
> but after a few petitions the script crashed with internal server error.
> The problem it's in apache.py in method import_module.
>
> #        if not file or (path and not os.path.dirname(file) in path):
> #                raise SERVER_RETURN, HTTP_NOT_FOUND
>
> if I comment these lines it seems to work ok. Printing the variables in
> if I get:
> [Tue Apr  8 16:03:53 2003] [notice] mod_python: Going to import cosa
> from ['/home/manuel/public_html/python/']: <module 'cosa' from
> '/home/manuel/public_html/python/cosa.py'>
>  mod_python: File is /home/manuel/public_html/python/cosa.py Path is
> ['/home/manuel/public_html/python/'] Dirname:
> /home/manuel/public_html/python
>
> I'm usign mod_python 2.7.8 with python 2.1.3 under Debian Gnu/Linux with
> apache 1.3.26
>
> Any idea what's happening ?
>
> 								Regards.
> --
> Manuel Dur?n Aguete <manuel@aguete.org>
>


From matt at teaphoo.fsnet.co.uk  Tue Apr  8 23:59:30 2003
From: matt at teaphoo.fsnet.co.uk (Matthew Russell)
Date: Fri Jan  9 21:59:58 2004
Subject: [mod_python] newbie and unable to get it working
References: <F50wefzQqWCdFF0a9jm00057331@hotmail.com>
Message-ID: <004901c2fe22$83f17da0$0ba587d9@jaws>

"import site" error in python usually means
that you havent; set yout PYTHONPATH correctly.

Is is most likely that the user which starts apache on your machine has not
set this in his profile.
Alteritivaly use:
setEnv PYTHONPATH=<my list of paths>
in htttpd.conf


----- Original Message -----
From: "Khalid El-Kary" <khalid_kary@hotmail.com>
To: <mod_python@modpython.org>
Sent: Monday, April 07, 2003 12:55 AM
Subject: [mod_python] newbie and unable to get it working


> Hi fellows,
> I followed the installation instructions as in the mod_python
documentation
> "A Windows Installation" section ...
>
> and added the following lines to httpd.conf:
>
> <Directory "<Your Document Root>/python">
>    AddHandler python-program .py
>    PythonHandler mptest
>    PythonDebug on
> </Directory>
>
> replaced "your document root" with mine :-)
>
> and created a file called mptest.py under "my document root/python"
> which contained:
>
> from mod_python import apache
>
> def handler(req):
>    req.content_type = "text/plain"
>    req.send_http_header()
>    req.write("Hello World!")
>    return apache.OK
>
> Apache starts normally and writes out the mod_python headers and an error
> message with which it continues normally:
>
> 'import site' failed; use -v for traceback
> Apache/1.3.24 (win32) mod_python/2.7.6 Python/2.2.1 PHP/4.2.3 running ...
>
> unfrotunately, when i request "http://servername/python/mptest.py" it
gives
> an "500 - internal server error" ...
>
> note that mod_python and python installations with apache went just fine,
> since the headers were written properly.
>
> Windows ME, Apache 1.3.24, mod_python 2.7.6, Python 2.2.1
>
> anything wrong, or any suggestions to get it running ?
>
> thanx in advance,
>
> Regards,
> Khalid Al-Kary
>
>
>
>
>
> _________________________________________________________________
> Tired of spam? Get advanced junk mail protection with MSN 8.
> http://join.msn.com/?page=features/junkmail
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From pluto at objectrealms.net  Thu Apr 10 18:34:01 2003
From: pluto at objectrealms.net (pluto)
Date: Fri Jan  9 21:59:59 2004
Subject: [mod_python] connection pooling?
Message-ID: <3E959CF9.2070603@objectrealms.net>

is it possible to do connection pooling of database handles in 
mod_python? my understanding is that for the common apache/linux mpm 
(prefork) this amounts to having lots of connections open to the db.. 
i'd like to have a global pool of connections for the server, is this 
possible?

somewhat related.. when apache is using the thread mpm, does mod_python 
use a single interpreter for all the threads, or does a different 
interpreter in each thread?

thanks,

-p


From mike.looijmans at asml.com  Fri Apr 11 07:15:59 2003
From: mike.looijmans at asml.com (Mike Looijmans)
Date: Fri Jan  9 21:59:59 2004
Subject: [mod_python] connection pooling?
Message-ID: <01c2ffe9$6fec1180$926a1e6e@wsasd464>

>is it possible to do connection pooling of database handles in
>mod_python? my understanding is that for the common apache/linux mpm
>(prefork) this amounts to having lots of connections open to the db..

Yes 2x...
Well, "lots" is only relative. Most DBMS won't have a problem with 20 or so
open connections. We're not talking hundreds here...

>i'd like to have a global pool of connections for the server, is this
>possible?


Yes, but the solution below is much simpler.

>somewhat related.. when apache is using the thread mpm, does mod_python
>use a single interpreter for all the threads, or does a different
>interpreter in each thread?

It uses a single interpreter for all threads. Which is quite handy, since you
also share all data, DB connection sharing is a breeze.
However, most DBMSses require you to use a connection per thread, but you can
share a fifo of connections along the threads. That's what I did for MySQL
connections.

--
Mike Looijmans
ASML: http://www5nl.asml.nl/~mlooijma
Private: http://www.milosoftware.com



From Tim.Hawes at ncmail.net  Fri Apr 11 09:12:19 2003
From: Tim.Hawes at ncmail.net (Tim Hawes)
Date: Fri Jan  9 21:59:59 2004
Subject: [mod_python] Error compiling mod_python on Solaris
Message-ID: <1050066739.19719.7.camel@apollos>

I am trying to compile mod_python 3.0.3 (DSO) on Solaris 8 (sparc).
Apache is version 2.0.45 (and I have already tried this with 2.0.44 with
the same results).
GCC is 3.2.2 (32 bit)
using Solaris ld (not GNU ld)
Python is version 2.1.3

I get the following:


hrdhhs34:[mod_python-3.0.3] $ gmake
gmake[1]: Entering directory
`/export/home/thawes/src/build/mod_python-3.0.3/src'

Compiling for DSO.

/usr/local/apache/2.0.45/bin/apxs
-I/export/home/thawes/src/build/mod_python-3.0.3/src/include
-I/usr/local/apache/2.0.45/include
-I/usr/local/bin/../stow/python-2.1.3/include/python2.1 -c mod_python.c
_apachemodule.c requestobject.c tableobject.c util.c serverobject.c
connobject.c filterobject.c hlist.c hlistobject.c  -lm 
/usr/local/bin/../stow/python-2.1.3/lib/python2.1/config/libpython2.1.a   -lpthread -lsocket -lnsl -ldl  -lthread   -lm            _eprintf.o _floatdidf.o _muldi3.o
/usr/local/apache/2.0.45/build/libtool --silent --mode=compile gcc
-prefer-pic  -DAP_HAVE_DESIGNATED_INITIALIZER -DSOLARIS2=8
-D_POSIX_PTHREAD_SEMANTICS -D_REENTRANT -g -O2 -pthreads
-I/usr/local/apache/2.0.45/include
-I/export/home/thawes/src/build/mod_python-3.0.3/src/include
-I/usr/local/apache/2.0.45/include
-I/usr/local/bin/../stow/python-2.1.3/include/python2.1  -c -o
mod_python.lo mod_python.c && touch mod_python.slo
In file included from
/export/home/thawes/src/build/mod_python-3.0.3/src/include/mod_python.h:115,
                 from mod_python.c:67:
/export/home/thawes/src/build/mod_python-3.0.3/src/include/util.h:76:
parse error before '*' token
/export/home/thawes/src/build/mod_python-3.0.3/src/include/util.h:76:
parse error before '*' token
/export/home/thawes/src/build/mod_python-3.0.3/src/include/util.h:76:
warning: data definition has no type or storage class
apxs:Error: Command failed with rc=65536
.
gmake[1]: *** [mod_python.so] Error 1
gmake[1]: Leaving directory
`/export/home/thawes/src/build/mod_python-3.0.3/src'
gmake: *** [do_dso] Error 2

Any ideas for a fix?


From grisha at modpython.org  Fri Apr 11 10:04:17 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:59:59 2004
Subject: [mod_python] Error compiling mod_python on Solaris
In-Reply-To: <1050066739.19719.7.camel@apollos>
Message-ID: <20030411100330.K14584-100000@eden.ispol.com>

Most likely the problem is your Python versio, try using 2.2.2.

Grisha


On 11 Apr 2003, Tim Hawes wrote:

> I am trying to compile mod_python 3.0.3 (DSO) on Solaris 8 (sparc).
> Apache is version 2.0.45 (and I have already tried this with 2.0.44 with
> the same results).
> GCC is 3.2.2 (32 bit)
> using Solaris ld (not GNU ld)
> Python is version 2.1.3
>
> I get the following:
>
>
> hrdhhs34:[mod_python-3.0.3] $ gmake
> gmake[1]: Entering directory
> `/export/home/thawes/src/build/mod_python-3.0.3/src'
>
> Compiling for DSO.
>
> /usr/local/apache/2.0.45/bin/apxs
> -I/export/home/thawes/src/build/mod_python-3.0.3/src/include
> -I/usr/local/apache/2.0.45/include
> -I/usr/local/bin/../stow/python-2.1.3/include/python2.1 -c mod_python.c
> _apachemodule.c requestobject.c tableobject.c util.c serverobject.c
> connobject.c filterobject.c hlist.c hlistobject.c  -lm
> /usr/local/bin/../stow/python-2.1.3/lib/python2.1/config/libpython2.1.a   -lpthread -lsocket -lnsl -ldl  -lthread   -lm            _eprintf.o _floatdidf.o _muldi3.o
> /usr/local/apache/2.0.45/build/libtool --silent --mode=compile gcc
> -prefer-pic  -DAP_HAVE_DESIGNATED_INITIALIZER -DSOLARIS2=8
> -D_POSIX_PTHREAD_SEMANTICS -D_REENTRANT -g -O2 -pthreads
> -I/usr/local/apache/2.0.45/include
> -I/export/home/thawes/src/build/mod_python-3.0.3/src/include
> -I/usr/local/apache/2.0.45/include
> -I/usr/local/bin/../stow/python-2.1.3/include/python2.1  -c -o
> mod_python.lo mod_python.c && touch mod_python.slo
> In file included from
> /export/home/thawes/src/build/mod_python-3.0.3/src/include/mod_python.h:115,
>                  from mod_python.c:67:
> /export/home/thawes/src/build/mod_python-3.0.3/src/include/util.h:76:
> parse error before '*' token
> /export/home/thawes/src/build/mod_python-3.0.3/src/include/util.h:76:
> parse error before '*' token
> /export/home/thawes/src/build/mod_python-3.0.3/src/include/util.h:76:
> warning: data definition has no type or storage class
> apxs:Error: Command failed with rc=65536
> .
> gmake[1]: *** [mod_python.so] Error 1
> gmake[1]: Leaving directory
> `/export/home/thawes/src/build/mod_python-3.0.3/src'
> gmake: *** [do_dso] Error 2
>
> Any ideas for a fix?
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From Tim.Hawes at ncmail.net  Fri Apr 11 13:44:42 2003
From: Tim.Hawes at ncmail.net (Tim Hawes)
Date: Fri Jan  9 21:59:59 2004
Subject: [mod_python] Error compiling mod_python on Solaris
In-Reply-To: <20030411100330.K14584-100000@eden.ispol.com>
References: <20030411100330.K14584-100000@eden.ispol.com>
Message-ID: <1050083083.2647.2.camel@apollos>

From khalid_kary at hotmail.com  Fri Apr 11 18:05:22 2003
From: khalid_kary at hotmail.com (Khalid El-Kary)
Date: Fri Jan  9 21:59:59 2004
Subject: [mod_python] plz help :-)
Message-ID: <F67hguA23ONgCJinoHL000685d0@hotmail.com>

Hi fellows,
I have sent this question before, but i got no reply, can you plz help :-)

I followed the installation instructions as in the mod_python documentation 
"A Windows Installation" section ...

and added the following lines to httpd.conf:

<Directory "<Your Document Root>/python">
  AddHandler python-program .py
  PythonHandler mptest
  PythonDebug on
</Directory>

replaced "your document root" with mine :-)

and created a file called mptest.py under "my document root/python"
which contained:

from mod_python import apache

def handler(req):
  req.content_type = "text/plain"
  req.send_http_header()
  req.write("Hello World!")
  return apache.OK

Apache starts normally and writes out the mod_python headers and an error 
message with which it continues normally:

'import site' failed; use -v for traceback
Apache/1.3.24 (win32) mod_python/2.7.6 Python/2.2.1 PHP/4.2.3 running ...

unfrotunately, when i request "http://servername/python/mptest.py" it gives 
an "500 - internal server error" ...

note that mod_python and python installations with apache went just fine, 
since the headers were written properly.

Windows ME, Apache 1.3.24, mod_python 2.7.6, Python 2.2.1

anything wrong, or any suggestions to get it running ?

thanx in advance,

Regards,
Khalid Al-Kary






_________________________________________________________________
Protect your PC - get McAfee.com VirusScan Online 
http://clinic.mcafee.com/clinic/ibuy/campaign.asp?cid=3963


From i at mindlace.net  Sat Apr 12 22:51:49 2003
From: i at mindlace.net (emf)
Date: Fri Jan  9 21:59:59 2004
Subject: [mod_python] Why are you using mod_python?
In-Reply-To: <20030328172826.X67038-100000@eden.ispol.com>
References: <20030328172826.X67038-100000@eden.ispol.com>
Message-ID: <3E98D0C5.10005@mindlace.net>

Gregory (Grisha) Trubetskoy wrote:
> Hello everyone -
> 
> As the original author of mod_python I think I'm allowed to jerk people's
> chains with this simple question:
> 
> Why are you using mod_python?

I am using mod_python because I wanted a way to manipulate xhtml/xml 
files and present them to end users without ever tainting the xhtml/xml 
with unrelated markup (like putting python in the page, having extra 
attributes, etc).

No existing python framework cleanly gives me that ability, and I didn't 
want to use a web server written in python, so mod_python seemed like 
the best choice.

~mindlace



From khalid_kary at hotmail.com  Sun Apr 13 15:39:07 2003
From: khalid_kary at hotmail.com (Khalid El-Kary)
Date: Fri Jan  9 21:59:59 2004
Subject: [mod_python] plz help :-)
Message-ID: <F982jQlHPTei5TnY99p00030745@hotmail.com>

>Hi Khalid
>I am not a specialist on this exspecially not on Windoze
>but SEE BELOW
>
> >I followed the installation instructions as in the mod_python 
>documentation
> >"A Windows Installation" section ...
> >
> >and added the following lines to httpd.conf:
> >
> ><Directory "<Your Document Root>/python">
> >  AddHandler python-program .py
> >  PythonHandler mptest
> >  PythonDebug on
> ></Directory>
> >
> >replaced "your document root" with mine :-)
> >
> >and created a file called mptest.py under "my document root/python"
> >which contained:
> >
> >from mod_python import apache
> >
> >def handler(req):
> >  req.content_type = "text/plain"
> >  req.send_http_header()
> >  req.write("Hello World!")
> >  return apache.OK
> >
> >Apache starts normally and writes out the mod_python headers and an error
> >message with which it continues normally:
> >
> >'import site' failed; use -v for traceback
>DOESNT THIS SHOWS THAT SOMETHING WITH LOADING THE MODULE WENT
>WRONG, ARE THERE ANY PATHS TO BE SET  SO APACHE FINDS THE
>mod_python ??

in the LoadModule section:
LoadModule python_module modules/mod_python.dll

in the AddModule section:
AddModule mod_python.c

I think if there was a configuration error, Apache shouldn't start normally 
and give an error message ... anyway do you know anything about "'import 
site' failed; use - v for traceback" thing ?

>
> >Apache/1.3.24 (win32) mod_python/2.7.6 Python/2.2.1 PHP/4.2.3 running ...
>
>
>
> >
> >unfrotunately, when i request "http://servername/python/mptest.py" it 
>gives
> >an "500 - internal server error" ...
>I THINK http://servername/python/mptest
>IS SUFFICIENT
>
> >note that mod_python and python installations with apache went just fine,
> >since the headers were written properly.
> >
> >Windows ME, Apache 1.3.24, mod_python 2.7.6, Python 2.2.1
> >
> >anything wrong, or any suggestions to get it running ?
> >
> >thanx in advance,
> >
> >Regards,
> >Khalid Al-Kary
> >
> >
> >
> >
> >
> >
> >_________________________________________________________________
> >Protect your PC - get McAfee.com VirusScan Online
> >http://clinic.mcafee.com/clinic/ibuy/campaign.asp?cid=3963
> >
> >_______________________________________________
> >Mod_python mailing list
> >Mod_python@modpython.org
> >http://www.modpython.org/mailman/listinfo/mod_python
>
>


_________________________________________________________________
STOP MORE SPAM with the new MSN 8 and get 2 months FREE* 
http://join.msn.com/?page=features/junkmail


From jm at eemsystems.cjb.net  Mon Apr 14 08:54:34 2003
From: jm at eemsystems.cjb.net (Julio Mendoza)
Date: Fri Jan  9 21:59:59 2004
Subject: [mod_python] upload binary file
Message-ID: <1050328473.937.2.camel@eemsystems.com>

Is posible to upload a binary file using mod_python?

Tank you,

JM



Mod_python error: "PythonHandler mod_python.publisher"

Traceback (most recent call last):

  File "/usr/lib/python2.2/site-packages/mod_python/apache.py", line 193, in Dispatch
    result = object(req)

  File "/usr/lib/python2.2/site-packages/mod_python/publisher.py", line 104, in handler
    val = File(field)

  File "/usr/lib/python2.2/site-packages/mod_python/publisher.py", line 308, in __init__
    for m in field.file.__methods__:

AttributeError: 'file' object has no attribute '__methods__'
-- 
Julio Mendoza <jm@eemsystems.cjb.net>


From Tim.Hawes at ncmail.net  Mon Apr 14 10:59:32 2003
From: Tim.Hawes at ncmail.net (Tim Hawes)
Date: Fri Jan  9 21:59:59 2004
Subject: [mod_python] mod_python not working.
Message-ID: <1050332372.30483.6.camel@apollos>

OK< I have successfully compiled the mod_python module (v. 3.0.3) on
Solaris, installed, and have configured Apache (v. 2.0.45) according to
the 2.4 Testing section in the docs:

    LoadModule python_module  modules/mod_python.so

    <Directory /some/directory/htdocs/test>
      AllowOverride   FileInfo
      AddHandler      python-program .py
      PythonHandler   mptest 
      PythonDebug     On 
    </Directory>

I have created my mptest.py file:

from mod_python import apache

    def handler(req):
        req.send_http_header()
        req.write("Hello World!")
        return apache.OK

Restart Apache and I get a 500 Internal Server Error and 
 "make_obcallback: could not import mod_python.apache." in my error log.
Any ideas?



From gnb at itga.com.au  Tue Apr 15 08:44:02 2003
From: gnb at itga.com.au (Gregory Bond)
Date: Fri Jan  9 21:59:59 2004
Subject: [mod_python] mod_python not working. 
In-Reply-To: Your message of 14 Apr 2003 10:59:32 -0400.
Message-ID: <200304142244.IAA26128@lightning.itga.com.au>

This is FAQ # 1:

http://www.modpython.org/FAQ/faqw.py?req=show&file=faq02.001.htp


From qwer at quirxi.com  Tue Apr 15 21:40:36 2003
From: qwer at quirxi.com (qwer)
Date: Fri Jan  9 21:59:59 2004
Subject: [mod_python] Error: 200 OK ?
Message-ID: <3E9C6034.9070907@quirxi.com>

Hello,


I just have installed apache (2.0.45), python (2.2.2), and ,mod_python (
3.0.3 ).

Then I have added following lines to apache configuration file httpd.conf:
<Directory "/home/www/cgi-bin">

    AllowOverride None
      Options None
      Order allow,deny
      Allow from all
#   AddHandler python-program .py
#   PythonHandler qwer

      AddHandler python-program .py
      PythonHandler mod_python.publisher
      PythonDebug On
</Directory>


For testing purposes I added the little python script "test.py" to the
directory "home/www/cgi-bin" and called it with the URL
"http://localhost/cgi-bin/test.py/login".

Here is the script:

----- snip ----

from mod_python import apache
def login( req ):
	req.content_type = "text/html"
	req.send_http_header()
	req.write( "Hello World!" )
	return apache.OK

----- snip ----

But for me it seems that the mod_pyhton handler does not work propely because I 
get following output:


Hello World!<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>200 OK</title>
</head><body>
<h1>OK</h1>
<p>The server encountered an internal error or
misconfiguration and was unable to complete
your request.</p>
<p>Please contact the server administrator,
  qwer@jango and inform them of the time the error occurred,
and anything you might have done that may have
caused the error.</p>
<p>More information about this error may be available
in the server error log.</p>
<hr />
<address>Apache/2.0.45 (Unix) mod_ssl/2.0.45 OpenSSL/0.9.7 mod_python/3.0.3 
Python/2.2.2 Server at localhost Port 80</address>

</body></html>


It is strange that the title tag contains "200 OK" and the output of the 
programm is given out together with an server error message.

Does anybody know what the problem could be ? Any help would be apreciated ....



Cheers

	Arno











From vmanera at manord.com  Wed Apr 16 19:27:52 2003
From: vmanera at manord.com (Manera, Villiam)
Date: Fri Jan  9 21:59:59 2004
Subject: R: [mod_python] upload binary file
Message-ID: <52DC70C1C1575C418CB033523A29CF1497D295@exchange2000.manord.com>

I'm testing mod-python 3.0.1 with apache 2.0.43 and python 2.2.2
>
> I've founded a older problem in file download (from python 2.1 to 2.2)
>
> the workaround is still the same:
>
> in publisher.py:
>
>  class File:
>      """ Like a file, but also has headers and filename
>      """
>      def __init__(self, field):
>          # steal all the file-like methods
>          for m in dir(field.file):
> 		 self.__dict__[m] = getattr(field.file, m)
>
>          self.headers = field.headers
>          self.filename = field.filename
> ======================workaround
> ==============================================
>  class File:
>      """ Like a file, but also has headers and filename
>      """
>      def __init__(self, field):
>          # steal all the file-like methods
>          #for m in dir(field.file):    #dont' work
>          for m in self.sim_methods(field.file):
>              self.__dict__[m] = getattr(field.file, m)
>
>          self.headers = field.headers
>          self.filename = field.filename
>
> 	#new--------
>      def sim_methods(self,obj):
>          from types import BuiltinMethodType
>          return filter(lambda s, t=obj:
>             type(getattr(t, s)) == BuiltinMethodType, dir(obj))
>
>
> I hope it will be put in place
>
> regards
>
> Villiam Manera
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>



-----Messaggio originale-----
Da: Julio Mendoza [mailto:jm@eemsystems.cjb.net]
Inviato: luned? 14 aprile 2003 15.55
A: mod_python@modpython.org
Oggetto: [mod_python] upload binary file


Is posible to upload a binary file using mod_python?

Tank you,

JM



Mod_python error: "PythonHandler mod_python.publisher"

Traceback (most recent call last):

  File "/usr/lib/python2.2/site-packages/mod_python/apache.py", line 193, in
Dispatch
    result = object(req)

  File "/usr/lib/python2.2/site-packages/mod_python/publisher.py", line 104,
in handler
    val = File(field)

  File "/usr/lib/python2.2/site-packages/mod_python/publisher.py", line 308,
in __init__
    for m in field.file.__methods__:

AttributeError: 'file' object has no attribute '__methods__'
-- 
Julio Mendoza <jm@eemsystems.cjb.net>

_______________________________________________
Mod_python mailing list
Mod_python@modpython.org
http://www.modpython.org/mailman/listinfo/mod_python


From grisha at modpython.org  Wed Apr 16 14:43:11 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:59:59 2004
Subject: R: [mod_python] upload binary file
In-Reply-To: <52DC70C1C1575C418CB033523A29CF1497D295@exchange2000.manord.com>
Message-ID: <20030416144251.R88983-100000@eden.ispol.com>

I am pretty sure this issue is fixed in 3.0.3.

Grisha

On Wed, 16 Apr 2003, Manera, Villiam wrote:

> I'm testing mod-python 3.0.1 with apache 2.0.43 and python 2.2.2
> >
> > I've founded a older problem in file download (from python 2.1 to 2.2)
> >
> > the workaround is still the same:
> >
> > in publisher.py:
> >
> >  class File:
> >      """ Like a file, but also has headers and filename
> >      """
> >      def __init__(self, field):
> >          # steal all the file-like methods
> >          for m in dir(field.file):
> > 		 self.__dict__[m] = getattr(field.file, m)
> >
> >          self.headers = field.headers
> >          self.filename = field.filename
> > ======================workaround
> > ==============================================
> >  class File:
> >      """ Like a file, but also has headers and filename
> >      """
> >      def __init__(self, field):
> >          # steal all the file-like methods
> >          #for m in dir(field.file):    #dont' work
> >          for m in self.sim_methods(field.file):
> >              self.__dict__[m] = getattr(field.file, m)
> >
> >          self.headers = field.headers
> >          self.filename = field.filename
> >
> > 	#new--------
> >      def sim_methods(self,obj):
> >          from types import BuiltinMethodType
> >          return filter(lambda s, t=obj:
> >             type(getattr(t, s)) == BuiltinMethodType, dir(obj))
> >
> >
> > I hope it will be put in place
> >
> > regards
> >
> > Villiam Manera
> > _______________________________________________
> > Mod_python mailing list
> > Mod_python@modpython.org
> > http://www.modpython.org/mailman/listinfo/mod_python
> >
>
>
>
> -----Messaggio originale-----
> Da: Julio Mendoza [mailto:jm@eemsystems.cjb.net]
> Inviato: luned? 14 aprile 2003 15.55
> A: mod_python@modpython.org
> Oggetto: [mod_python] upload binary file
>
>
> Is posible to upload a binary file using mod_python?
>
> Tank you,
>
> JM
>
>
>
> Mod_python error: "PythonHandler mod_python.publisher"
>
> Traceback (most recent call last):
>
>   File "/usr/lib/python2.2/site-packages/mod_python/apache.py", line 193, in
> Dispatch
>     result = object(req)
>
>   File "/usr/lib/python2.2/site-packages/mod_python/publisher.py", line 104,
> in handler
>     val = File(field)
>
>   File "/usr/lib/python2.2/site-packages/mod_python/publisher.py", line 308,
> in __init__
>     for m in field.file.__methods__:
>
> AttributeError: 'file' object has no attribute '__methods__'
> --
> Julio Mendoza <jm@eemsystems.cjb.net>
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From robert at leftwich.info  Thu Apr 17 08:54:50 2003
From: robert at leftwich.info (Robert Leftwich)
Date: Fri Jan  9 21:59:59 2004
Subject: [mod_python] Setting content location
Message-ID: <5.2.0.9.0.20030417083751.01947db0@192.168.0.1>

I'm a newbie playing with mod_python (which I think is great, so far at 
least :-)) and I need to set a header to be returned to the client after 
processing an http post request. In my case I want to set the 
Content-Location header to a newly created URL  (fyi I'm attempting to 
implement a REST-based web service) and I have the following code in the 
handler :

def handler(req):
     if req.method == 'POST':
        ...
         req.headers_out["Content-Location"] = "/foo/bar"
         return apache.HTTP_CREATED

But I don't see the Content-Location header being set in my client. What am 
I missing?

Robert



From grisha at modpython.org  Wed Apr 16 21:33:56 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:59:59 2004
Subject: [mod_python] Setting content location
In-Reply-To: <5.2.0.9.0.20030417083751.01947db0@192.168.0.1>
Message-ID: <20030416213117.W97157-100000@eden.ispol.com>

First, make sure that you're setting headers prior to the first byte of
output written, because otherwise the headers have gone out already and
setting them is meaningless.

If that doesn't help it, please provide more info about your environment.
Note that mod_python 3.0.1 (and all prior versions) had a bug that would
not send headers correctly if you were using a DirectoryIndex directive
pointing to a mod_python handled location.

Grisha

On Thu, 17 Apr 2003, Robert Leftwich wrote:

> I'm a newbie playing with mod_python (which I think is great, so far at
> least :-)) and I need to set a header to be returned to the client after
> processing an http post request. In my case I want to set the
> Content-Location header to a newly created URL  (fyi I'm attempting to
> implement a REST-based web service) and I have the following code in the
> handler :
>
> def handler(req):
>      if req.method == 'POST':
>         ...
>          req.headers_out["Content-Location"] = "/foo/bar"
>          return apache.HTTP_CREATED
>
> But I don't see the Content-Location header being set in my client. What am
> I missing?
>
> Robert
>
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From robert at leftwich.info  Thu Apr 17 12:02:10 2003
From: robert at leftwich.info (Robert Leftwich)
Date: Fri Jan  9 21:59:59 2004
Subject: [mod_python] Setting content location
In-Reply-To: <20030416213117.W97157-100000@eden.ispol.com>
References: <5.2.0.9.0.20030417083751.01947db0@192.168.0.1>
Message-ID: <5.2.0.9.0.20030417115525.01969a98@192.168.0.1>

At 11:33 AM 17/04/2003, Gregory (Grisha) Trubetskoy wrote:

>First, make sure that you're setting headers prior to the first byte of
>output written, because otherwise the headers have gone out already and
>setting them is meaningless.

The only other request related thing I do in the code is a req.read().


>If that doesn't help it, please provide more info about your environment.
>Note that mod_python 3.0.1 (and all prior versions) had a bug that would
>not send headers correctly if you were using a DirectoryIndex directive
>pointing to a mod_python handled location.

I'm using Apache 2.0.45, mod_python 3.0.3 and python 2.2 2 on W2000 sp2 
with the following in my httpd.conf file

<Directory "E:/Program Files/Apache Group/Apache2/htdocs/test">
   AddHandler python-program .py
   PythonHandler mptest
   PythonDebug On
</Directory>

Robert



From robert at leftwich.info  Thu Apr 17 12:04:31 2003
From: robert at leftwich.info (Robert Leftwich)
Date: Fri Jan  9 21:59:59 2004
Subject: [mod_python] Stopping additional error content
Message-ID: <5.2.0.9.0.20030417114113.01925a78@192.168.0.1>

Is it possible to stop mod_python appending html error information when a 
4xx error code is returned from a handler? For example I want to return 
some simple text  from my handler containing the application error message, 
but mod_python adds a bunch of html that I do not want to be returned, i.e.

         if [some problem]:
             req.content_type = "text/plain"
             req.write("Cannot do this because of some problem")
             return apache.HTTP_FORBIDDEN

The client s/w ends up seeing the above message plus a bunch of html 
including a <title>200 OK</title>!

Robert

PS I'm wondering if my other problem (Content-Location) is related to this 
one, i.e. apache/mod_python is seeing the HTTP_FORBIDDEN or HTTP_CREATED 
and is doing its own (default?) thing and adding/changing the returned result?





From grisha at modpython.org  Wed Apr 16 23:10:57 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:59:59 2004
Subject: [mod_python] Stopping additional error content
In-Reply-To: <5.2.0.9.0.20030417114113.01925a78@192.168.0.1>
Message-ID: <20030416230628.M98127-100000@eden.ispol.com>

I think something like this should work (this is off the top of my head,
it's possible I'm missing something):

	req.status = apache.HTTP_FORBIDDEN
	req.write("Cannot do this because of some problem")
	return apache.OK

Grisha

On Thu, 17 Apr 2003, Robert Leftwich wrote:

> Is it possible to stop mod_python appending html error information when a
> 4xx error code is returned from a handler? For example I want to return
> some simple text  from my handler containing the application error message,
> but mod_python adds a bunch of html that I do not want to be returned, i.e.
>
>          if [some problem]:
>              req.content_type = "text/plain"
>              req.write("Cannot do this because of some problem")
>              return apache.HTTP_FORBIDDEN
>
> The client s/w ends up seeing the above message plus a bunch of html
> including a <title>200 OK</title>!
>
> Robert
>
> PS I'm wondering if my other problem (Content-Location) is related to this
> one, i.e. apache/mod_python is seeing the HTTP_FORBIDDEN or HTTP_CREATED
> and is doing its own (default?) thing and adding/changing the returned result?
>
>
>
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From robert at leftwich.info  Thu Apr 17 13:19:54 2003
From: robert at leftwich.info (Robert Leftwich)
Date: Fri Jan  9 21:59:59 2004
Subject: [mod_python] Removing the .py in URL's
Message-ID: <5.2.0.9.0.20030417131727.01915598@192.168.0.1>

Is it possible to run mod_python without requiring an extension at all, 
i.e. instead of  http://www.mysite.com/hello.py can I use 
http://www.mysite.com/hello ?

Robert



From robert at leftwich.info  Thu Apr 17 13:30:24 2003
From: robert at leftwich.info (Robert Leftwich)
Date: Fri Jan  9 21:59:59 2004
Subject: [mod_python] Stopping additional error content
In-Reply-To: <20030416230628.M98127-100000@eden.ispol.com>
References: <5.2.0.9.0.20030417114113.01925a78@192.168.0.1>
Message-ID: <5.2.0.9.0.20030417132517.019de470@192.168.0.1>

At 01:10 PM 17/04/2003, Gregory (Grisha) Trubetskoy wrote:

>I think something like this should work (this is off the top of my head,
>it's possible I'm missing something):
>
>         req.status = apache.HTTP_FORBIDDEN
>         req.write("Cannot do this because of some problem")
>         return apache.OK

Works perfectly, thanks!

Note that it also solves my other problem with the Content-Location, i.e. 
if I do :

def handler(req):
     if req.method == 'POST':
        ...
         req.headers_out["Content-Location"] = "/foo/bar"
         req.status = apache.HTTP_CREATED
         return apache.OK

then the Content-Location is received correctly by the client.

Thanks a lot!

Robert



From grisha at modpython.org  Wed Apr 16 23:48:40 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:59:59 2004
Subject: [mod_python] Removing the .py in URL's
In-Reply-To: <5.2.0.9.0.20030417131727.01915598@192.168.0.1>
Message-ID: <20030416234758.Y98673-100000@eden.ispol.com>

You can do this if you use SetHandler rather than AddHandler.

On Thu, 17 Apr 2003, Robert Leftwich wrote:

> Is it possible to run mod_python without requiring an extension at all,
> i.e. instead of  http://www.mysite.com/hello.py can I use
> http://www.mysite.com/hello ?
>
> Robert
>
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From bar at chello.se  Sun Apr 20 17:58:18 2003
From: bar at chello.se (Bar)
Date: Fri Jan  9 21:59:59 2004
Subject: [mod_python] Trouble getting python to run on XP, Apache 2.0.45, Python
 2.3, mod_python 3.0.3
Message-ID: <5.1.0.14.0.20030420172734.00bd7b28@pop.chello.se>

Hello.
I have been trying to get mod_python to run on the configuration above and 
it wont work. I have read in the maillinglist archives that you could try 
to copy msvcr70.dll to your system32 directory and I have done so. Nothing 
happens.

The error msg I get is "Cannot load c:/.../mod_python.so into server: The 
specified module could not be found."

This sounds very much like the msvcr70.dll problem but it doesn't react 
when I copy the file to system32. Is there some hidden (for other people, 
obvious?) step that I have missed? I have also tried to sprinkle my system 
with the .dll file, placing it in different directories.
Regards,
Daniel 


From erica at simpli.biz  Sun Apr 20 13:35:37 2003
From: erica at simpli.biz (Erica Douglass)
Date: Fri Jan  9 21:59:59 2004
Subject: [mod_python] mod_python causing Apache to segfault (Cobalt RaQ550)
Message-ID: <005701c3077c$66f3aad0$ac7ba8c0@corkyserver>

Hello,

I'm trying to install mod_python on a RaQ550. The 550 comes with Python
2.0 and Apache 1.3.20. Unfortunately, Python is compiled with threads
support, which may be causing the problem I am seeing.

I compiled and installed the mod_python libraries and DSO successfully
with -DEAPI. I then made sure that the mod_python module was the first
one loaded in httpd.conf, and I ran Apache. Apache promptly segfaulted.
I have the traceback, which I have pasted in below.

Does anyone know which file is not being found? Here is the traceback:

(gdb) run -X
Starting program: /usr/sbin/httpd -X
(no debugging symbols found)...[New Thread 1024 (LWP 7107)]
chiliasp: module started, version 3.6.0.33

Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread 1024 (LWP 7107)]
0x40113369 in chunk_alloc (ar_ptr=0x401b3aa0, nb=24) at malloc.c:2784
2784    malloc.c: No such file or directory.
        in malloc.c
(gdb) bt
#0  0x40113369 in chunk_alloc (ar_ptr=0x401b3aa0, nb=24) at
malloc.c:2784
#1  0x401131c4 in __libc_malloc (bytes=18) at malloc.c:2717
#2  0x4000a03c in _dl_new_object () at eval.c:88
#3  0x400051bd in _dl_map_object_from_fd () at eval.c:88
#4  0x40006c91 in _dl_map_object () at eval.c:88
#5  0x4000b818 in openaux () at eval.c:88
#6  0x4000bd00 in _dl_catch_error () at eval.c:88
#7  0x4000adff in _dl_map_object_deps () at eval.c:88
#8  0x4019ca31 in dl_open_worker (a=0xbfffd2d0) at dl-open.c:261
#9  0x4000bd00 in _dl_catch_error () at eval.c:88
#10 0x4019cc5d in _dl_open (file=0x81628bc
"/etc/httpd/modules/mod_python.so", mode=-1073753400, caller=0x80a54f6)
    at dl-open.c:362
#11 0x40025630 in dlopen_doit (a=0xbfffd440) at dlopen.c:39
#12 0x4000bd00 in _dl_catch_error () at eval.c:88
#13 0x40025a06 in _dlerror_run (operate=0x400255fc <dlopen_doit>,
args=0xbfffd440) at dlerror.c:130
#14 0x400255eb in __dlopen_check (file=0x81628bc
"/etc/httpd/modules/mod_python.so", mode=258) at dlopen.c:53
#15 0x080a54f6 in ap_os_dso_load () at eval.c:88
#16 0x000aff0d in ?? () at eval.c:88
#17 0x000aff0d in ?? () at eval.c:88
#18 0x000aff0d in ?? () at eval.c:88
#19 0x000aff0d in ?? () at eval.c:88
#20 0x000aff0d in ?? () at eval.c:88
#21 0x000aff0d in ?? () at eval.c:88
#22 0x000aff0d in ?? () at eval.c:88
#23 0x000aff0d in ?? () at eval.c:88
#24 0x000aff0d in ?? () at eval.c:88

Thanks in advance.

Erica Douglass
Lead Web Developer
Simpli, Inc.


From vjb at vuit.com  Mon Apr 21 07:56:38 2003
From: vjb at vuit.com (Vince Buonassisi)
Date: Fri Jan  9 21:59:59 2004
Subject: [mod_python] error in running a script in apache browser
Message-ID: <741D9C47-7409-11D7-83F2-000A95682CD2@vuit.com>

hi,

i am getting the following error when a python test script is executed  
in the apache web server:

Mod_python error: "PythonHandler reqhandler"

Traceback (most recent call last):

   File "/usr/lib/python2.2/site-packages/mod_python/apache.py", line  
181, in Dispatch
     module = import_module(module_name, _req)

   File "/usr/lib/python2.2/site-packages/mod_python/apache.py", line  
335, in import_module
     module = imp.load_module(mname, f, p, d)

   File "/usr/local/apache/htdocs/reqhandler.py", line 9, in ?
     from xml.dom.ext.reader.Sax2 import FromXmlStream, FromXml

   File  
"/usr/lib/python2.2/site-packages/_xmlplus/dom/ext/reader/__init__.py",  
line 21, in ?
     encoder = codecs.lookup("utf-8")[0] # encode,decode,reader,writer

   File  
"/usr/src/build/143041-i386/install/usr/lib/python2.2/encodings/ 
__init__.py", line 51, in search_function

RuntimeError: cannot unmarshal code objects in restricted execution mode

the script i am running is very simple.  i just send a text message to  
the browser.  i am using the following versions of software:

apache 1.3.26
python 2.2.1
mod python 2.7.8
PyXML 0.7.1
linux redhat 8

any help would be appreciated.

thanks

vince
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: text/enriched
Size: 1254 bytes
Desc: not available
Url : http://mailman.modpython.org/pipermail/mod_python/attachments/20030421/3ccea826/attachment-0002.bin
From grisha at modpython.org  Wed Apr 23 09:53:25 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:59:59 2004
Subject: [mod_python] another test
In-Reply-To: <741D9C47-7409-11D7-83F2-000A95682CD2@vuit.com>
Message-ID: <20030423095248.Q14226-100000@eden.ispol.com>


please ignore this message also - working on getting the list to work
again....

From vjb at vuit.com  Wed Apr 23 20:25:32 2003
From: vjb at vuit.com (Vincent J. Buonassisi)
Date: Fri Jan  9 21:59:59 2004
Subject: [mod_python] problems finding module 
Message-ID: <3EA7592C.8000704@vuit.com>

hi,

i am having problems in getting mod_python to run the following simple 
script in apache:

	import sys

	from WVWService.util import XMLUtil

	from mod_python import apache

	def handler(req):

    	 path = str(sys.path)
    	 print path
    	 req.content_type = "text/plain"
    	 req.send_http_header()
     	req.write(path)

     	return apache.OK

	if __name__ == "__main__":
   	  print sys.path

with the followig entry in apache's httpd.conf file:

	<Directory /var/www/html>
   	    AddHandler python-program .py
    	    PythonHandler myscript
	    PythonPath
		"sys.path+['/home/vjb/workspace/wvwBase3/src/wvw']"
    	    PythonDebug On
	</Directory>


i get the following error in my web browser:


Mod_python error: "PythonHandler myscript"

Traceback (most recent call last):

   File "/usr/local/lib/python2.2/site-packages/mod_python/apache.py", 
line 320, in HandlerDispatch
     module = import_module(module_name, config)

   File "/usr/local/lib/python2.2/site-packages/mod_python/apache.py", 
line 496, in import_module
     f, p, d = imp.find_module(parts[i], path)

ImportError: No module named myscript


if i comment the PythonPath line the i get the error:

ImportError: No module named WVWService.util


can someone please tell me what i am doing wrong?

thanks,

vince

From vjb at vuit.com  Wed Apr 23 20:59:17 2003
From: vjb at vuit.com (Vince Buonassisi)
Date: Fri Jan  9 21:59:59 2004
Subject: [mod_python] problems finding module 
In-Reply-To: <3EA7592C.8000704@vuit.com>
Message-ID: <1F1049D3-7609-11D7-9E94-000A95682CD2@vuit.com>

sorry, i forgot to add my environment:

python 2.2.2
apache 2.0.40
modpython 3.0.3

thanks,


On Mercoled?, apr 23, 2003, at 20:25 US/Pacific, Vincent J. Buonassisi 
wrote:

> hi,
>
> i am having problems in getting mod_python to run the following simple 
> script in apache:
>
> 	import sys
>
> 	from WVWService.util import XMLUtil
>
> 	from mod_python import apache
>
> 	def handler(req):
>
>    	 path = str(sys.path)
>    	 print path
>    	 req.content_type = "text/plain"
>    	 req.send_http_header()
>     	req.write(path)
>
>     	return apache.OK
>
> 	if __name__ == "__main__":
>   	  print sys.path
>
> with the followig entry in apache's httpd.conf file:
>
> 	<Directory /var/www/html>
>   	    AddHandler python-program .py
>    	    PythonHandler myscript
> 	    PythonPath
> 		"sys.path+['/home/vjb/workspace/wvwBase3/src/wvw']"
>    	    PythonDebug On
> 	</Directory>
>
>
> i get the following error in my web browser:
>
>
> Mod_python error: "PythonHandler myscript"
>
> Traceback (most recent call last):
>
>   File "/usr/local/lib/python2.2/site-packages/mod_python/apache.py", 
> line 320, in HandlerDispatch
>     module = import_module(module_name, config)
>
>   File "/usr/local/lib/python2.2/site-packages/mod_python/apache.py", 
> line 496, in import_module
>     f, p, d = imp.find_module(parts[i], path)
>
> ImportError: No module named myscript
>
>
> if i comment the PythonPath line the i get the error:
>
> ImportError: No module named WVWService.util
>
>
> can someone please tell me what i am doing wrong?
>
> thanks,
>
> vince
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From timbomb at timbomb.net  Fri Apr 25 16:09:24 2003
From: timbomb at timbomb.net (Tim Mansfield)
Date: Fri Jan  9 21:59:59 2004
Subject: [mod_python] Trouble compiling mod_python-3.0.3  on Red Hat with
	Apache httpd-2.0.39 + Python-2.2.1
Message-ID: <5.1.0.14.0.20030425160211.0920acf0@timbomb.net>


... which I believe are the correct versions. I get this output when apxs 
tries to do its thing (ie step one in the make).

Any ideas?

Tim
----------------

$ make
make[1]: Entering directory `/home/timbomb/mod_python-3.0.3/src'

Compiling for DSO.

/opt/local/bin/apxs -I/home/timbomb/mod_python-3.0.3/src/include 
-I/opt/local/stow/httpd-2.0.39/include 
-I/opt/local/bin/../stow/Python-2.2.1/include/python2.2 -c mod_python.c 
_apachemodule.c requestobject.c tableobject.c util.c serverobject.c 
connobject.c filterobject.c hlist.c hlistobject.c 
-L/opt/local/bin/../stow/Python-2.2.1/lib/python2.2/config  -Xlinker 
-export-dynamic      -lm  -lpython2.2 -ldl -lpthread -lutil -lm
/opt/local/stow/httpd-2.0.39/build/libtool --silent --mode=compile gcc 
-prefer-pic  -DAP_HAVE_DESIGNATED_INITIALIZER -DLINUX=2 -D_REENTRANT 
-D_XOPEN_SOURCE=500 -D_BSD_SOURCE -D_SVID_SOURCE -D_GNU_SOURCE -g -O2 
-pthread -I/opt/local/stow/httpd-2.0.39/include 
-I/home/timbomb/mod_python-3.0.3/src/include 
-I/opt/local/stow/httpd-2.0.39/include 
-I/opt/local/bin/../stow/Python-2.2.1/include/python2.2  -c -o 
mod_python.lo mod_python.c && touch mod_python.slo
mod_python.c: In function `directive_PythonInputFilter':
mod_python.c:1507: incompatible type for argument 3 of 
`ap_register_input_filter'
mod_python.c:1507: too many arguments to function `ap_register_input_filter'
mod_python.c: In function `directive_PythonOutputFilter':
mod_python.c:1532: incompatible type for argument 3 of 
`ap_register_output_filter'
mod_python.c:1532: too many arguments to function `ap_register_output_filter'
apxs:Error: Command failed with rc=65536
.
make[1]: *** [mod_python.so] Error 1
make[1]: Leaving directory `/home/timbomb/mod_python-3.0.3/src'
make: *** [do_dso] Error 2

From big.stick at bol.com.br  Fri Apr 25 10:26:31 2003
From: big.stick at bol.com.br (Big Stick)
Date: Fri Jan  9 21:59:59 2004
Subject: [mod_python] Trouble compiling mod_python-3.0.3  on Red Hat with
	Apache httpd-2.0.39 + Python-2.2.1
In-Reply-To: <5.1.0.14.0.20030425160211.0920acf0@timbomb.net>
References: <5.1.0.14.0.20030425160211.0920acf0@timbomb.net>
Message-ID: <129475794.20030425102631@bol.com.br>

Em 25/4/2003 ?s 03:09, Tim escreveu:


> ... which I believe are the correct versions. I get this output when apxs 
> tries to do its thing (ie step one in the make).

> Any ideas?

Make sure that httpd-devel is installed, since apxs is provided by
httpd-devel, and RH doesn?t seem to install it by default.

-- stick
From brian at linus.smenet.org  Fri Apr 25 08:14:38 2003
From: brian at linus.smenet.org (Brian Allbee)
Date: Fri Jan  9 21:59:59 2004
Subject: [mod_python] mod_python newbie looking for information/references
Message-ID: <1051280078.1141.8.camel@localhost.localdomain>

Howdy, all!

I'm a newbie to mod_python (looking forward to working with it) who's
looking for suggestions/example code/documentation/references to help me
get started. FAQ was down last I looked (and site seems to be offline,
or at least not accessible from this location).

Any suggestions/direction would be appreciated!

From brian at linus.smenet.org  Fri Apr 25 12:05:24 2003
From: brian at linus.smenet.org (Brian Allbee)
Date: Fri Jan  9 21:59:59 2004
Subject: [mod_python] 
	RE: mod_python newbie looking for information/refere nces
In-Reply-To: <D31B04F24EDE7644BB169BB4F080778A06C239EE@s30342g004005>
References: <D31B04F24EDE7644BB169BB4F080778A06C239EE@s30342g004005>
Message-ID: <1051293924.1141.20.camel@localhost.localdomain>

Thanks, Hans!

Am I understanding things correctly then (after reading through the
tutorial, especially section 3.4) that if I have the configuration for
Apache set to something like:

AddHandler python-program .py
PythonHandler mod_python.publisher

that it is possible to set up pseudo-pages by generating different
module-files for each such "page?" For example, an "index.py" and
"form.py" page can have distinctive outputs from each other, but are
still essentially called as if they were "real" pages
(www.site.com/index and www.site.com/form, respectively)? If so, is the
file-extension necessary, or would the example URLs still call index.py
and form.py respectively? And I'm assuming that under those
circumstances each would need a default handler() function (perhaps in
addition to any other functions that might be called by something like
www.site.com/form/submission) if they were expected to be able to do
anything without any direct query-string or form-field input.

I presume that standard python module-import syntax is supported
(allowing for the development of common code to be shared between
several modules, I hope) as well?

Hoping I'm understanding things correctly - the more I look at
mod_python's capabilities, the more I'm liking what I see...

Brian

On Fri, 2003-04-25 at 08:46, Yandle, Hans wrote:
> Had similar problems. I use Apache 1.3.X with Python 2.2.X. I have
> included all the files for modpython 2.7.8. I do not have locally
> cached the modpython 3.X associated files for Apache 2.X.
> 
> Welcome to real power,
> 
> Hans


From grisha at modpython.org  Fri Apr 25 16:06:45 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 22:00:00 2004
Subject: [mod_python] Trouble compiling mod_python-3.0.3  on Red Hat with
 Apache httpd-2.0.39 + Python-2.2.1
In-Reply-To: <129475794.20030425102631@bol.com.br>
Message-ID: <20030425160545.V70432-100000@eden.ispol.com>


Also, I'm not even sure 2.0.39 can compile against mp 3.0.3, I highly
recommend you switch to apache 2.0.45 and Python 2.2.2.

On Fri, 25 Apr 2003, Big Stick wrote:

> Em 25/4/2003 ?s 03:09, Tim escreveu:
>
>
> > ... which I believe are the correct versions. I get this output when apxs
> > tries to do its thing (ie step one in the make).
>
> > Any ideas?
>
> Make sure that httpd-devel is installed, since apxs is provided by
> httpd-devel, and RH doesn?t seem to install it by default.
>
> -- stick
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>

From vjb at vuit.com  Mon Apr 28 17:36:43 2003
From: vjb at vuit.com (Vince Buonassisi)
Date: Fri Jan  9 22:00:00 2004
Subject: [mod_python] mod_python import error
Message-ID: <A68963E0-79DA-11D7-B1FA-000A95682CD2@vuit.com>

hi,

i am getting the following error from mod_python when my python script 
imports the module test:

Mod_python error: "PythonHandler myscript"

Traceback (most recent call last):

   File "/usr/local/lib/python2.2/site-packages/mod_python/apache.py", 
line 320, in HandlerDispatch
     module = import_module(module_name, config)

   File "/usr/local/lib/python2.2/site-packages/mod_python/apache.py", 
line 499, in import_module
     module = imp.load_module(mname, f, p, d)

   File "/usr/local/apache/htdocs/myscript.py", line 4, in ?
     from WVWService.test import HTTPClient

ImportError: No module named test


just before this import statement there is another import statement 
that imports a
module from the same area and it seems to work just fine:

from WVWService.util import XMLUtil
from WVWService.test import HTTPClient


i have the following environment environment:

   mod_pythonq	3.0.3
   python	2.2.2
   apache	2.0.45
   os		redhat 8.0

does anyone have any ideas on how i can solve this problem?

thanks,

vince

From dhoutz at advancedinterfaces.com  Wed Apr 30 14:33:40 2003
From: dhoutz at advancedinterfaces.com (Dan Houtz)
Date: Fri Jan  9 22:00:00 2004
Subject: [mod_python] help with a few basics
Message-ID: <CJEFIGIHCACFLNNGMEEIGEDACAAA.dhoutz@advancedinterfaces.com>

Greetings,

I'm just starting to get into python and mod_python. I have installed
mod_python on Windows XP with Apache 2.0.45 to start getting my feet wet.
After some intial troubles, I believe I finally have everything working
correctly. I have managed to follow the test section and "hello world prints
properly. MY next question is, am I able to accomplish the same thing useing
print "Hello World" instead of req.write("Hello World"). I've seen many
coding examples using print, but it does not work correctly when I attempt
to use it.

For instance, this code:
	def handler(req):
	print "Content-Type: text/html\n\n"
   	print "Hello World"

Produces:
	Mod_python error: "PythonHandler mptest"

	Traceback (most recent call last):

	  File "C:\Python22\Lib\site-packages\mod_python\apache.py", line 334, in
HandlerDispatch
	    assert (type(result) == type(int())), \

	AssertionError: Handler 'mptest' returned invalid return code.


So, I tried:
	def handler(req):
	print "Content-Type: text/html\n\n"
   	print "Hello World"
	return apacke.OK

and it produced a blank page


Your help is appreciated.

Thanks,
Dan Houtz

From neel at mediapulse.com  Tue Apr  1 10:36:53 2003
From: neel at mediapulse.com (Michael C. Neel)
Date: Fri Jan  9 22:03:47 2004
Subject: [mod_python] RE: 1 page Not Found - every 4 page refresh cycle?
Message-ID: <C0FC22C08B82074A88B50061764157775C14@johnson.mediapulse.net>

Forwarding this over to the mod_python list, as I am also have some
weird issues we have been unable to track the cause of.  I recently
rolled out a fixup handler in mod_python to a host of server, and now,
randomly, you will get the error described below.  All are mod_python
2.7.8 and various RH 7.x with Apache 1.3.x. I don't use publisher.
Anyone seeing something like this?

Mike

-----Original Message-----
From: Juan Carlos Rodrigo Garcia [mailto:jrodrigo@xpyro.com] 
Sent: Tuesday, April 01, 2003 8:03 AM
To: python-dev@httpd.apache.org
Subject: 1 page Not Found - every 4 page refresh cycle?


Hello, I can't suscribe to mod_python-request@modpython.org, and I'm
having a little problem.

I'm using mod_python 3.0.3 and apache 2.0.44.

I set the PythonHandler to mod_python.publisher

Because I want to use mod_python the PHP,ASP,CFUSION way.
Every script does its own work. So this is my apache setup:

<VirtualHost *>
      ServerName www.devel.in
      DirectoryIndex index.py
      AddHandler python-program .py
      PythonHandler mod_python.publisher
      PythonDebug On
</VirtualHost>

I have serveral pages in my web and everything goes well with 
mod_python auth, uploading...

BUT when I browse pages (scripts) with little content (A tiny script
that outputs very small amount of html), then every 
time I refresh four times or so the tiny script I get one:

  Not Found
  The requested URL /search/index.py was not found on this server.

This NEVER happens refreshing scripts that print long listings, or lots
of HTML data.

I've found this behaviour in two different machines...
One running the RedHat 8.0 distro web server (apache 2.0 + mod_python).
And in my personal computer were I've installed varios versions of
apache 2 and mod_python 3, every set-up acted the same way.


I think that there is a problem with mod_python.publisher loading tiny
scripts or showing little output.


Thanks for all your good work.





From neel at mediapulse.com  Tue Apr  1 11:26:37 2003
From: neel at mediapulse.com (Michael C. Neel)
Date: Fri Jan  9 22:03:47 2004
Subject: [mod_python] Why are you using mod_python?
Message-ID: <C0FC22C08B82074A88B50061764157775C15@johnson.mediapulse.net>

I broke perl.  No, not in a preformance way, or in I couldn't do
something in perl.  I found that in larger projects, perl's lack of OO
(and the ease of use of the OO features it does have) really casued
large delays in development.  Also I noticed that code in perl seemed to
be apt to more bugs than code in another language.  Over all I came to
the descision that perl's strength lies in the script, and is not suited
for the application.

I have worked with, and took another look at PHP, but I don't like PHP
on a design level.  I like to have data, design, and logic all
seperated.  PHP doesn't lend itself well to this.  You can make that
work, but too many includes in PHP can result in a big preformance hit.

Python does have a very good set of OO features.  I was also impress in
how cross platform it really was.  Many languages claim this, but you
often find you need to tweak code to make it work.  With Albatross I
found a template system that allowed me to have data, design, and logic
in separate places (I also gained a flexible framework for the logic
part, which was a big plus).

Preformance was a concern, as I had forsaken CGI awhile ago.  I ran some
"hello world" test on my laptop, 1Ghz with 256 Megs.  CGI handled about
100 requests per second, perl and python both ran about 250 request per
second in a "fastCGI" setting, python as a content handler ran about 600
requests per second, PHP 650, and perl 700.  A Native C handler ran
about 1400 requests per second.  C has too long of a development cycle,
and the gains in method were worth the 100 requests per second.

I have since deployed several applications for clients in
mod_python/albatross as well as some personal sites.  Some of these have
been massive projects for very big names.  I am proud to say these have
had no issue in this platform, and I actually feel extreamly confident
in them.  I also like that I can hide the fact the platform so that the
user is even unaware the page is dynamic.  A side project I did that you
can see what I mean is www.fistsofniall.com - this site is all
mod_python/albatross (execption is the formus).

I did see a comment that probably only 1% of the people use a handler,
and instead use a fastcgi.  If this is the case, then it is a shame, as
the benchmarks told me.  How publisher fits in, I don't know - I've
never tried it.  If you look into it, you'll find that writing a handler
is really pretty easy.

Mike

-----Original Message-----
From: Gregory (Grisha) Trubetskoy [mailto:grisha@modpython.org] 
Sent: Friday, March 28, 2003 5:39 PM
To: mod_python@modpython.org
Subject: [mod_python] Why are you using mod_python?



Hello everyone -

As the original author of mod_python I think I'm allowed to jerk
people's chains with this simple question:

Why are you using mod_python?

You can reply on or off list, either is fine. The results, after I get
to mull over them will be published in one way or another.

I've decided to ask the list because I recently realized that I am not
sure I know the answer. Not to say that I don't like mod_python, on the
contrary, I do, but to formulate in words exactly why is rather
difficult. Besides, my opinion is biased anyway :-)

Thanks in advance!

Grisha


_______________________________________________
Mod_python mailing list
Mod_python@modpython.org
http://www.modpython.org/mailman/listinfo/mod_python


From LBerezhny at DevIS.com  Tue Apr  1 12:00:11 2003
From: LBerezhny at DevIS.com (Lex Berezhny)
Date: Fri Jan  9 22:03:47 2004
Subject: [mod_python] Why are you using mod_python?
In-Reply-To: <C0FC22C08B82074A88B50061764157775C15@johnson.mediapulse.net>
References: <C0FC22C08B82074A88B50061764157775C15@johnson.mediapulse.net>
Message-ID: <1049216411.17863.4.camel@hortus>

On Tue, 2003-04-01 at 11:26, Michael C. Neel wrote:
> I did see a comment that probably only 1% of the people use a handler,
> and instead use a fastcgi.  If this is the case, then it is a shame, as
> the benchmarks told me.  How publisher fits in, I don't know - I've
> never tried it.  If you look into it, you'll find that writing a handler
> is really pretty easy.

Most of the responses to Grishas email note that they use mod_python for
its handler. I'm not sure where the 1% comes from.

I also use the handler :-)

In fact, I feel that the handler is much easier to use and even figure
out, than the publisher.

my two cents,

  - lex


From vlindberg at verio.net  Tue Apr  1 10:37:41 2003
From: vlindberg at verio.net (VanL)
Date: Fri Jan  9 22:03:47 2004
Subject: [mod_python] Why are you using mod_python?
In-Reply-To: <1049216411.17863.4.camel@hortus>
References: <C0FC22C08B82074A88B50061764157775C15@johnson.mediapulse.net> <1049216411.17863.4.camel@hortus>
Message-ID: <3E89CE65.60207@verio.net>

>
>
>In fact, I feel that the handler is much easier to use and even figure
>out, than the publisher.
>

Maybe because I started out with Zope, I thought that the publisher 
handler was dead simple.  That is what I am using right now.

VanL


From davidf at sjsoft.com  Wed Apr  2 13:53:01 2003
From: davidf at sjsoft.com (David Fraser)
Date: Fri Jan  9 22:03:47 2004
Subject: [mod_python] Building mod_python installer for Windows
Message-ID: <3E8ACF1D.60109@sjsoft.com>

Hi

I was wondering if anyone could give me tips on how to build the 
mod_python installer for Windows.

Seems that the dist subdirectory contains stuff to build it using 
distutils, but there was a comment that it should only work in Python 
2.3 because of post install scripts. Is this true? Does this affect the 
build machine only or the target machine too?

Secondly it seems to need to have had configure run. This brings up more 
general build issues. I have mingw, MSys, cygwin installed. However 
configure wants apxs which doesn't come with my Apache 2.0 build for 
Windows, and presumably I need a source tree for Apache. Do I have to 
actually build Apache for Windows, or is just the source sufficient?

Thanks
David


From big.stick at bol.com.br  Wed Apr  2 12:07:14 2003
From: big.stick at bol.com.br (Big Stick)
Date: Fri Jan  9 22:03:47 2004
Subject: [mod_python] vs 3.0.3 compiling issues
Message-ID: <11510490264.20030402120714@bol.com.br>

Hello,

I?m using Red Hat 8, httpd 2.0.40, mod_python 3.0.0 and Python
2.2.2. Everything is working, but I?m experiencing this error when I
try to compile mod_python 3.0.3 (needed for other apps):

...
checking your blood pressure... a bit high, but we can proceed
checking whether apxs is available
checking for --with-apxs... no
checking for apxs in /usr/local/apache/sbin... no
checking for apxs in your PATH... checking for apxs... no
configure: warning: **** apxs was not found, DSO compilation will not be available.
configure: warning: **** You can use --with-apxs to specify where your apxs is.
configure: error: Neither static nor DSO option available, there is no point in continuing.
[r@r r] #

Any hints on this?

Thanks in advance.
- stick


From manfred.stienstra at dwerg.net  Wed Apr  2 17:35:40 2003
From: manfred.stienstra at dwerg.net (Manfred Stienstra)
Date: Fri Jan  9 22:03:47 2004
Subject: [mod_python] vs 3.0.3 compiling issues
In-Reply-To: <11510490264.20030402120714@bol.com.br>
References: <11510490264.20030402120714@bol.com.br>
Message-ID: <200304021735.40618.manfred.stienstra@dwerg.net>

On Wednesday 02 April 2003 17:07, Big Stick wrote:
> Any hints on this?

locate apxs

./configure --with-apxs="PATH TO APXS"

Manfred

From grisha at modpython.org  Wed Apr  2 11:53:03 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 22:03:47 2004
Subject: [mod_python] Building mod_python installer for Windows
In-Reply-To: <3E8ACF1D.60109@sjsoft.com>
Message-ID: <20030402114701.V45547-100000@eden.ispol.com>

To build the windows installer, you have to first compile mod_python.so
using MS VC++ (there is a project file in the src directory), then you
copy the mod_python.so to a UNIX server. The actual installer,
paradoxically, has to be build on UNIX, and it's as simple as cd-ing into
dist and running "make windist". It *does* require python 2.3 (but only
to build the installer, the actual mod_python.so can be build with any
version of Python above 2.2).

I have no idea if or how this would work on cygwin though.

Grisha

On Wed, 2 Apr 2003, David Fraser wrote:

> Hi
>
> I was wondering if anyone could give me tips on how to build the
> mod_python installer for Windows.
>
> Seems that the dist subdirectory contains stuff to build it using
> distutils, but there was a comment that it should only work in Python
> 2.3 because of post install scripts. Is this true? Does this affect the
> build machine only or the target machine too?
>
> Secondly it seems to need to have had configure run. This brings up more
> general build issues. I have mingw, MSys, cygwin installed. However
> configure wants apxs which doesn't come with my Apache 2.0 build for
> Windows, and presumably I need a source tree for Apache. Do I have to
> actually build Apache for Windows, or is just the source sufficient?
>
> Thanks
> David
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From grisha at modpython.org  Wed Apr  2 11:54:58 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 22:03:47 2004
Subject: [mod_python] vs 3.0.3 compiling issues
In-Reply-To: <200304021735.40618.manfred.stienstra@dwerg.net>
Message-ID: <20030402115346.S45547-100000@eden.ispol.com>

I'd also recommend a later version of Apache - 2.0.40 is ancient.

Grisha

On Wed, 2 Apr 2003, Manfred Stienstra wrote:

> On Wednesday 02 April 2003 17:07, Big Stick wrote:
> > Any hints on this?
>
> locate apxs
>
> ./configure --with-apxs="PATH TO APXS"
>
> Manfred
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From big.stick at bol.com.br  Wed Apr  2 15:15:31 2003
From: big.stick at bol.com.br (Big Stick)
Date: Fri Jan  9 22:03:47 2004
Subject: [mod_python] vs 3.0.3 compiling issues
In-Reply-To: <20030402115346.S45547-100000@eden.ispol.com>
References: <20030402115346.S45547-100000@eden.ispol.com>
Message-ID: <4121787518.20030402151531@bol.com.br>

Em 2/4/2003 ?s 13:54, Manfred Stienstra escreveu:
>
> locate apxs
>
> ./configure --with-apxs="PATH TO APXS"

It took me a while to find out that apxs is provided by httpd-devel,
and httpd-devel was not installed here. Did that and now everything
seems to be working.

Thanks a lot.
- stick


From remi at python-hosting.com  Thu Apr  3 18:08:02 2003
From: remi at python-hosting.com (Remi Delon)
Date: Fri Jan  9 22:03:47 2004
Subject: [mod_python] [ANN] Python-Hosting.com: new hosting provider specialized in Python
Message-ID: <NFBBIBODGLHPEGPDOAGKIEIBDLAA.remi@python-hosting.com>

Hello everyone,

I am pleased to announce http://python-hosting.com, a new hosting provider
specialized in Python.
We support most Python web tools, including mod_python, Zope, Plone,
WebWare, CherryPy, ...
You can run your mod_python site for 15$/month.


Remi Delon     remi@remove-me.python-hosting.com
----------------------
Specialized python hosting: http://www.python-hosting.com
Python application server: http://www.cherrypy.org
Free CherryPy hosting: http://www.freecherrypy.org
----------------------




From chris at sebis.com  Thu Apr  3 15:31:12 2003
From: chris at sebis.com (Chris Johnson)
Date: Fri Jan  9 22:03:47 2004
Subject: [mod_python] newbie can't start apache2.0.44 with mod_python3.0.3
Message-ID: <3E8CA820.6030606@sebis.com>

hi group,
    I'm having a problem starting apache2.0.44. I added the line:

LoadModule python_module      modules/mod_python.so

    to my httpd.conf. and when I run 'apachectl start' it says:

Cannot load /httpd/apache/modules/mod_python.so into server: /httpd/apache/modules/mod_python.so: Undefined symbol "pthread_sigmask"

So did I miss a step. I've looked over the FAQ contents and googled for 
the error but haven't been able to find any mention of this error.
thanks,
chrisj


From grisha at modpython.org  Thu Apr  3 17:17:48 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 22:03:47 2004
Subject: [mod_python] newbie can't start apache2.0.44 with mod_python3.0.3
In-Reply-To: <3E8CA820.6030606@sebis.com>
Message-ID: <20030403171703.L80044-100000@eden.ispol.com>

If this is on FreeBSD? There is a note about it in the README.

Grisha

On Thu, 3 Apr 2003, Chris Johnson wrote:

> hi group,
>     I'm having a problem starting apache2.0.44. I added the line:
>
> LoadModule python_module      modules/mod_python.so
>
>     to my httpd.conf. and when I run 'apachectl start' it says:
>
> Cannot load /httpd/apache/modules/mod_python.so into server: /httpd/apache/modules/mod_python.so: Undefined symbol "pthread_sigmask"
>
> So did I miss a step. I've looked over the FAQ contents and googled for
> the error but haven't been able to find any mention of this error.
> thanks,
> chrisj
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From ron at rwsoft.ca  Thu Apr  3 22:42:50 2003
From: ron at rwsoft.ca (Ron Wills)
Date: Fri Jan  9 22:03:47 2004
Subject: [mod_python] Session Tracking
Message-ID: <3E8D1B5A.40001@rwsoft.ca>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hello All

~  There's something that I can't seem to find the in the docs. Currently
I have a set of PHP libs that I use, but was hoping to port my
authenication classes to mod_python. This could simplify things for me,
but I can seem to find anything to do session tracking (with cookies or
so on). Any help would be appretiated.

- --
Ron Wills
RW Software - Owner
http://www.rwsoft.ca
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.6 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQE+jRtZYOHhBYo0q6cRAitPAJ419pftd5SJO6pQUGurlsublJRdywCgrJ3O
dTvskmYzFvxQER9yYVokhW4=
=lSLk
-----END PGP SIGNATURE-----


From davidf at sjsoft.com  Fri Apr  4 08:21:06 2003
From: davidf at sjsoft.com (David Fraser)
Date: Fri Jan  9 22:03:47 2004
Subject: [mod_python] Session Tracking
In-Reply-To: <3E8D1B5A.40001@rwsoft.ca>
References: <3E8D1B5A.40001@rwsoft.ca>
Message-ID: <3E8D2452.7010803@sjsoft.com>

Ron Wills wrote:

> Hello All
>
> ~  There's something that I can't seem to find the in the docs. Currently
> I have a set of PHP libs that I use, but was hoping to port my
> authenication classes to mod_python. This could simplify things for me,
> but I can seem to find anything to do session tracking (with cookies or
> so on). Any help would be appretiated.
>
I've just done this for our application for mod_python.
Basically we use the getcookie and setcookie functions below to get and 
set the cookie
Then we have session objects, each of which has a unique session string, 
which is set in the cookie.
We have a global sessioncache dictionary that looks up a session object 
based on the session string.
We also use this for handling user login etc, so its a bit more 
complicated, but that's the basic
idea and you should be able to use the same idea.

When doing this, I was wondering whether some cookie methods could be 
added to the request object,
since that's where they seem to belong? Could pass in the class of 
cookie you want to use etc...
Any thoughts?

David

def getcookie(req):
  """Reads in any cookie info from the request"""
  try:
    cookiestring = req.headers_in["Cookie"]
  except:
    cookiestring = {}
  cookie = Cookie.SimpleCookie()
  cookie.load(cookiestring)
  cookiedict = {}
  for key, morsel in cookie.iteritems():
    cookiedict[key] = morsel.value
  return cookiedict

def setcookie(req, cookiedict):
  """Puts the bits from the cookiedict into Morsels, sets the req cookie"""
  # construct the cookie from the cookiedict
  cookie = Cookie.SimpleCookie()
  for key, value in cookiedict.iteritems():
    cookie[key] = value
  # add the cookie headers to req.headers_out
  for key, morsel in cookie.iteritems():
    req.headers_out.add('Set-Cookie', morsel.OutputString())




From gnb at itga.com.au  Fri Apr  4 16:38:57 2003
From: gnb at itga.com.au (Gregory Bond)
Date: Fri Jan  9 22:03:47 2004
Subject: [mod_python] Session Tracking 
In-Reply-To: Your message of Thu, 03 Apr 2003 22:42:50 -0700.
Message-ID: <200304040638.QAA04290@lightning.itga.com.au>

> but I can seem to find anything to do session tracking (with cookies or
> so on). Any help would be appretiated.

I got sick of this question so I made an FAQ entry!

	http://www.modpython.org/FAQ/faqw.py?req=show&file=faq03.008.htp




From mike.looijmans at asml.com  Fri Apr  4 08:40:24 2003
From: mike.looijmans at asml.com (Mike Looijmans)
Date: Fri Jan  9 22:03:48 2004
Subject: [mod_python] Session Tracking
Message-ID: <01c2fa75$12017c00$926a1e6e@wsasd464>

I use the following trick to use the standard Cookie class in mod_python:

##
req.headers_out.add('Set-Cookie', cookies.output(header='',
sep='\r\nSet-Cookie:'))
##

By omitting the first header, and setting the "separator" to "Set-Cookie:' it
actually may add more than just one header here, but who cares...

Actually, I feel that Cookie should provide some method of access to the
individual cookie strings. And a Request.add_cookies(...) method would be even
better (mod_python 3.0.5?):

##
cookies = Cookie.SmartCookie()
...
req.add_cookies(cookies)
##


--
Mike Looijmans
Private: http://www.milosoftware.com

-----Original Message-----
...
>When doing this, I was wondering whether some cookie methods could be
>added to the request object,
>since that's where they seem to belong? Could pass in the class of
>cookie you want to use etc...
>Any thoughts?
...


From Paul.Moore at atosorigin.com  Fri Apr  4 11:53:20 2003
From: Paul.Moore at atosorigin.com (Moore, Paul)
Date: Fri Jan  9 22:03:48 2004
Subject: [mod_python] Problem with mod_python.cgihandler in Python 2.2?
Message-ID: <16E1010E4581B049ABC51D4975CEDB88619A2D@UKDCX001.uk.int.atosorigin.com>

I just tried out a CGI script under the cgihandler with mod_python 3.0.3.

I got an error as follows (wrapped for readability):

[Fri Apr 04 11:23:59 2003] [error] [client 127.0.0.1]
PythonHandler mod_python.cgihandler:
Traceback (most recent call last): 
[Fri Apr 04 11:23:59 2003] [error] [client 127.0.0.1]
PythonHandler mod_python.cgihandler:
File "C:\Python22\lib\site-packages\mod_python\apache.py",
line 335, in HandlerDispatch
    result = object(req)
[Fri Apr 04 11:23:59 2003] [error] [client 127.0.0.1]
PythonHandler mod_python.cgihandler:
File "C:\Python22\lib\site-packages\mod_python\cgihandler.py",
line 140, in handler
    apache.restore_nocgi(env, si, so)
[Fri Apr 04 11:23:59 2003] [error] [client 127.0.0.1]
PythonHandler mod_python.cgihandler:
File "C:\Python22\lib\site-packages\mod_python\apache.py",
line 764, in restore_nocgi
    for k in osenv: 

It looks to me like the code at line 764 in apache.py is wrong -

    for k in osenv:
        del osenv[k]

should be

    for k in osenv.keys():
        del osenv[k]

Otherwise, you're modifying the osenv dictionary while you're
iterating over it. Python 2.2.2 seems to have made this an error,
rather than letting it pass (and possibly giving incorrect
results).

At least, I made the above change, and started getting errors from
my script and Apache config, rather than from mod_python :-)

Paul.


From cmulcahy-modpython at avesi.com  Fri Apr  4 10:18:36 2003
From: cmulcahy-modpython at avesi.com (cmulcahy-modpython@avesi.com)
Date: Fri Jan  9 22:03:48 2004
Subject: [mod_python] FAQ
Message-ID: <20030404151836.26928.qmail@zulu.avenirsolutions.com>

How about an index page for "http://www.modpython.org/FAQ" 

Modpython's greatest weakness is a sparseness of documentation
and a lack of explanation/evangelism for the handler model. 

For general apache-handler enlightenment one must often look
for books/google-searches on mod_perl and adapt as necessary. 

mulc

From the_edge2020 at hotmail.com  Sun Apr  6 03:53:44 2003
From: the_edge2020 at hotmail.com (Tommy !!)
Date: Fri Jan  9 22:03:48 2004
Subject: [mod_python] Import Issues
Message-ID: <F46Y7ZggDttW3SC7g4Z0002e234@hotmail.com>

Hi all,

Just curious as to why (by design?) mod_python does not allow one to import 
modules in the same directory as the executing script - instead you have to 
resort to altering sys.path inside each script in order to get it importing 
correctly.

This is an issue if you don't have access to the web server to modify 
httpd.conf and .htaccess files are disabled/limited. Additionally, I may not 
have access to the site-packages directory, or any other directory, for that 
matter, from which my script could import reusable components.

I find this makes it really awkward to code anything above a single file 
Python script (e.g. I'm using a session handling mechanism specific to a 
single web application). Using os.getcwd() seems to indicate that the cwd 
when executing a script with mod_python is my Apache2 directory.

This behaviour occurs on Apache 2.0.43, mod_python 3.0.3, Linux AND Windows.

Am I missing something simple?

Excuse me if this didn't make much sense, it's 4am here :)

Thanks in advance.

Regards,
Tom L


_________________________________________________________________
Hotmail now available on Australian mobile phones. Go to  
http://ninemsn.com.au/mobilecentral/hotmail_mobile.asp


From mike_verdone at shaw.ca  Sat Apr  5 11:20:26 2003
From: mike_verdone at shaw.ca (Mike Verdone)
Date: Fri Jan  9 22:03:48 2004
Subject: [mod_python] Import Issues
In-Reply-To: <F46Y7ZggDttW3SC7g4Z0002e234@hotmail.com>
References: <F46Y7ZggDttW3SC7g4Z0002e234@hotmail.com>
Message-ID: <200304051120.26133.mike_verdone@shaw.ca>

On April 5, 2003 10:53 am, Tommy !! wrote:
> Hi all,
>
> Just curious as to why (by design?) mod_python does not allow one to import
> modules in the same directory as the executing script - instead you have to
> resort to altering sys.path inside each script in order to get it importing
> correctly.
>
> This is an issue if you don't have access to the web server to modify
> httpd.conf and .htaccess files are disabled/limited. Additionally, I may
> not have access to the site-packages directory, or any other directory, for
> that matter, from which my script could import reusable components.
>

The main problem is that mod_python doesn't know what directory it's in when 
it executes a script except in two cases (as far as I can tell):

1. You put the AddHandler directive in the .htaccess file in that directory.

2. You enclose the AddHandler directive in a <Directory> block specifying the 
full path in apache.conf.

Otherwise mod_python has no idea where it's really executing from, and seems 
to default to the apache dir. If your administrator has restricted .htaccess 
and won't set up apache.conf for you, then you're kinda hooped.

Have you looked at the PythonPath directive? You may be able to get away with 
that in your .htacces. e.g.:

PythonPath "['/the/scripts/directory'] + sys.path"

Good luck!

Mike.


From the_edge2020 at hotmail.com  Sun Apr  6 11:57:40 2003
From: the_edge2020 at hotmail.com (Tommy !!)
Date: Fri Jan  9 22:03:48 2004
Subject: [mod_python] Import Issues
Message-ID: <F93TcjJxWY5pCxlICSs0000066a@hotmail.com>

Hi Mike (and pascal),

Wouldn't mod_python be able to determine the directory it is executing in 
from the request (in a handler maybe)? Or, at the very least, in the Apache 
module itself, since mod_python must obviously know where the current script 
is being executed in order to actually execute it (see the request_rec 
structure in the Apache 2 C source code to see the relevant fields).

I would think that you could either:
a) modify the handler itself to check the request for the path to the 
module, and then use os.path.dir (? from memory) to grab the directory it's 
executing in, and then throw that into the sys.path?
b) take the same path that the Apache module itself does when it calls 
*sound of source code ruffling* PythonChildInitHandler (mod_python.c) and 
use the Python API to manipulate the sys.path global itself (except, 
obviously, from python_handler in the same file, where you *should* actually 
know where the file is located)

Anyways I'm going to have a bit of a hack around the source code and see 
what I come up with.

Thanks for your time guys, if you have any further comments I'd love to hear 
about it :)

Kind Regards,
Tom L




>From: Mike Verdone <mike_verdone@shaw.ca>
>To: Tommy !! <the_edge2020@hotmail.com>, mod_python@modpython.org
>Subject: Re: [mod_python] Import Issues
>Date: Sat, 05 Apr 2003 11:20:26 -0700
>MIME-Version: 1.0
>Received: from mc5-f20.law1.hotmail.com ([65.54.252.27]) by 
>mc5-s2.law1.hotmail.com with Microsoft SMTPSVC(5.0.2195.5600); Sat, 5 Apr 
>2003 10:29:20 -0800
>Received: from eden.ispol.com ([206.239.103.254]) by 
>mc5-f20.law1.hotmail.com with Microsoft SMTPSVC(5.0.2195.5600); Sat, 5 Apr 
>2003 10:28:26 -0800
>Received: from eden.ispol.com (localhost.ispol.com [127.0.0.1])by 
>eden.ispol.com (8.12.6/8.11.1) with ESMTP id h35IL4WT029214;Sat, 5 Apr 2003 
>13:21:04 -0500 (EST)(envelope-from mod_python-admin@modpython.org)
>Received: from pd6mo2so.prod.shaw.ca (shawidc-mo1.cg.shawcable.net 
>[24.71.223.10])by eden.ispol.com (8.12.6/8.11.1) with ESMTP id 
>h35IK9WT029190for <mod_python@modpython.org>; Sat, 5 Apr 2003 13:20:09 
>-0500 (EST)(envelope-from mike_verdone@shaw.ca)
>Received: from pd3mr3so.prod.shaw.ca (pd3mr3so-ser.prod.shaw.ca 
>[10.0.141.179]) by l-daemon (iPlanet Messaging Server 5.1 HotFix 0.8 (built 
>May 12 2002)) with ESMTP id <0HCV004PCUXCO3@l-daemon> for 
>mod_python@modpython.org; Sat, 05 Apr 2003 11:20:00 -0700 (MST)
>Received: from pn2ml5so.prod.shaw.ca (pn2ml5so-qfe0.prod.shaw.ca 
>[10.0.121.149]) by l-daemon (iPlanet Messaging Server 5.1 HotFix 0.8 (built 
>May 12 2002)) with ESMTP id <0HCV00BORUXCL2@l-daemon> for 
>mod_python@modpython.org; Sat, 05 Apr 2003 11:20:00 -0700 (MST)
>Received: from 192.168.0.42 (h68-144-147-185.cg.shawcable.net 
>[68.144.147.185]) by l-daemon (iPlanet Messaging Server 5.1 HotFix 0.8 
>(built May 12 2002)) with ESMTP id <0HCV00F46UXCP9@l-daemon> for 
>mod_python@modpython.org; Sat, 05 Apr 2003 11:20:00 -0700 (MST)
>X-Message-Info: pdGgd64CkwYBecCeulYyOTshuDTWlDUk
>In-reply-to: <F46Y7ZggDttW3SC7g4Z0002e234@hotmail.com>
>Message-id: <200304051120.26133.mike_verdone@shaw.ca>
>User-Agent: KMail/1.5.1
>References: <F46Y7ZggDttW3SC7g4Z0002e234@hotmail.com>
>Sender: mod_python-admin@modpython.org
>Errors-To: mod_python-admin@modpython.org
>X-BeenThere: mod_python@modpython.org
>X-Mailman-Version: 2.0.12
>Precedence: bulk
>List-Help: <mailto:mod_python-request@modpython.org?subject=help>
>List-Post: <mailto:mod_python@modpython.org>
>List-Subscribe: 
><http://www.modpython.org/mailman/listinfo/mod_python>,<mailto:mod_python-request@modpython.org?subject=subscribe>
>List-Id: mod_python user mailing list <mod_python.modpython.org>
>List-Unsubscribe: 
><http://www.modpython.org/mailman/listinfo/mod_python>,<mailto:mod_python-request@modpython.org?subject=unsubscribe>
>List-Archive: <http://www.modpython.org/pipermail/mod_python/>
>Return-Path: mod_python-admin@modpython.org
>X-OriginalArrivalTime: 05 Apr 2003 18:28:28.0117 (UTC) 
>FILETIME=[26ED0850:01C2FBA1]
>
>On April 5, 2003 10:53 am, Tommy !! wrote:
> > Hi all,
> >
> > Just curious as to why (by design?) mod_python does not allow one to 
>import
> > modules in the same directory as the executing script - instead you have 
>to
> > resort to altering sys.path inside each script in order to get it 
>importing
> > correctly.
> >
> > This is an issue if you don't have access to the web server to modify
> > httpd.conf and .htaccess files are disabled/limited. Additionally, I may
> > not have access to the site-packages directory, or any other directory, 
>for
> > that matter, from which my script could import reusable components.
> >
>
>The main problem is that mod_python doesn't know what directory it's in 
>when
>it executes a script except in two cases (as far as I can tell):
>
>1. You put the AddHandler directive in the .htaccess file in that 
>directory.
>
>2. You enclose the AddHandler directive in a <Directory> block specifying 
>the
>full path in apache.conf.
>
>Otherwise mod_python has no idea where it's really executing from, and 
>seems
>to default to the apache dir. If your administrator has restricted 
>.htaccess
>and won't set up apache.conf for you, then you're kinda hooped.
>
>Have you looked at the PythonPath directive? You may be able to get away 
>with
>that in your .htacces. e.g.:
>
>PythonPath "['/the/scripts/directory'] + sys.path"
>
>Good luck!
>
>Mike.
>
>_______________________________________________
>Mod_python mailing list
>Mod_python@modpython.org
>http://www.modpython.org/mailman/listinfo/mod_python


_________________________________________________________________
MSN Instant Messenger now available on Australian mobile phones. Go to  
http://ninemsn.com.au/mobilecentral/hotmail_messenger.asp


From the_edge2020 at hotmail.com  Sun Apr  6 15:02:02 2003
From: the_edge2020 at hotmail.com (Tommy !!)
Date: Fri Jan  9 22:03:48 2004
Subject: [mod_python] Import Issues
Message-ID: <F24k8eDDSFc6hFHh9la00014034@hotmail.com>

Hi all,

I achieved what I wanted by modifying publisher.py - obviously this is a bit 
dirty since it's handler-specific, but oh well - it works.

Basically, I use the following code in publisher.py prior to calling the 
target python script itself (where 'path' is the path to the python script 
determined by publisher.py):

if not path in sys.path:
  sys.path.append( path )

# ...

while path in sys.path:
  del sys.path[sys.path.index( path )]


Is there a chance something like this could be added to future versions of 
mod_python? If not, why not? I don't see why it should be necessary to 
modify httpd.conf or a .htaccess file for every web application I write when 
it could be as simple as writing a script & some supporting moudles :)

Another question - what's to stop a remote user from running any given 
method in an arbitrary python script within a directory when using the 
publisher handler?

Regards,
Tom L






>From: Mike Verdone <mike_verdone@shaw.ca>
>To: Tommy !! <the_edge2020@hotmail.com>, mod_python@modpython.org
>Subject: Re: [mod_python] Import Issues
>Date: Sat, 05 Apr 2003 11:20:26 -0700
>MIME-Version: 1.0
>Received: from mc5-f20.law1.hotmail.com ([65.54.252.27]) by 
>mc5-s2.law1.hotmail.com with Microsoft SMTPSVC(5.0.2195.5600); Sat, 5 Apr 
>2003 10:29:20 -0800
>Received: from eden.ispol.com ([206.239.103.254]) by 
>mc5-f20.law1.hotmail.com with Microsoft SMTPSVC(5.0.2195.5600); Sat, 5 Apr 
>2003 10:28:26 -0800
>Received: from eden.ispol.com (localhost.ispol.com [127.0.0.1])by 
>eden.ispol.com (8.12.6/8.11.1) with ESMTP id h35IL4WT029214;Sat, 5 Apr 2003 
>13:21:04 -0500 (EST)(envelope-from mod_python-admin@modpython.org)
>Received: from pd6mo2so.prod.shaw.ca (shawidc-mo1.cg.shawcable.net 
>[24.71.223.10])by eden.ispol.com (8.12.6/8.11.1) with ESMTP id 
>h35IK9WT029190for <mod_python@modpython.org>; Sat, 5 Apr 2003 13:20:09 
>-0500 (EST)(envelope-from mike_verdone@shaw.ca)
>Received: from pd3mr3so.prod.shaw.ca (pd3mr3so-ser.prod.shaw.ca 
>[10.0.141.179]) by l-daemon (iPlanet Messaging Server 5.1 HotFix 0.8 (built 
>May 12 2002)) with ESMTP id <0HCV004PCUXCO3@l-daemon> for 
>mod_python@modpython.org; Sat, 05 Apr 2003 11:20:00 -0700 (MST)
>Received: from pn2ml5so.prod.shaw.ca (pn2ml5so-qfe0.prod.shaw.ca 
>[10.0.121.149]) by l-daemon (iPlanet Messaging Server 5.1 HotFix 0.8 (built 
>May 12 2002)) with ESMTP id <0HCV00BORUXCL2@l-daemon> for 
>mod_python@modpython.org; Sat, 05 Apr 2003 11:20:00 -0700 (MST)
>Received: from 192.168.0.42 (h68-144-147-185.cg.shawcable.net 
>[68.144.147.185]) by l-daemon (iPlanet Messaging Server 5.1 HotFix 0.8 
>(built May 12 2002)) with ESMTP id <0HCV00F46UXCP9@l-daemon> for 
>mod_python@modpython.org; Sat, 05 Apr 2003 11:20:00 -0700 (MST)
>X-Message-Info: pdGgd64CkwYBecCeulYyOTshuDTWlDUk
>In-reply-to: <F46Y7ZggDttW3SC7g4Z0002e234@hotmail.com>
>Message-id: <200304051120.26133.mike_verdone@shaw.ca>
>User-Agent: KMail/1.5.1
>References: <F46Y7ZggDttW3SC7g4Z0002e234@hotmail.com>
>Sender: mod_python-admin@modpython.org
>Errors-To: mod_python-admin@modpython.org
>X-BeenThere: mod_python@modpython.org
>X-Mailman-Version: 2.0.12
>Precedence: bulk
>List-Help: <mailto:mod_python-request@modpython.org?subject=help>
>List-Post: <mailto:mod_python@modpython.org>
>List-Subscribe: 
><http://www.modpython.org/mailman/listinfo/mod_python>,<mailto:mod_python-request@modpython.org?subject=subscribe>
>List-Id: mod_python user mailing list <mod_python.modpython.org>
>List-Unsubscribe: 
><http://www.modpython.org/mailman/listinfo/mod_python>,<mailto:mod_python-request@modpython.org?subject=unsubscribe>
>List-Archive: <http://www.modpython.org/pipermail/mod_python/>
>Return-Path: mod_python-admin@modpython.org
>X-OriginalArrivalTime: 05 Apr 2003 18:28:28.0117 (UTC) 
>FILETIME=[26ED0850:01C2FBA1]
>
>On April 5, 2003 10:53 am, Tommy !! wrote:
> > Hi all,
> >
> > Just curious as to why (by design?) mod_python does not allow one to 
>import
> > modules in the same directory as the executing script - instead you have 
>to
> > resort to altering sys.path inside each script in order to get it 
>importing
> > correctly.
> >
> > This is an issue if you don't have access to the web server to modify
> > httpd.conf and .htaccess files are disabled/limited. Additionally, I may
> > not have access to the site-packages directory, or any other directory, 
>for
> > that matter, from which my script could import reusable components.
> >
>
>The main problem is that mod_python doesn't know what directory it's in 
>when
>it executes a script except in two cases (as far as I can tell):
>
>1. You put the AddHandler directive in the .htaccess file in that 
>directory.
>
>2. You enclose the AddHandler directive in a <Directory> block specifying 
>the
>full path in apache.conf.
>
>Otherwise mod_python has no idea where it's really executing from, and 
>seems
>to default to the apache dir. If your administrator has restricted 
>.htaccess
>and won't set up apache.conf for you, then you're kinda hooped.
>
>Have you looked at the PythonPath directive? You may be able to get away 
>with
>that in your .htacces. e.g.:
>
>PythonPath "['/the/scripts/directory'] + sys.path"
>
>Good luck!
>
>Mike.
>
>_______________________________________________
>Mod_python mailing list
>Mod_python@modpython.org
>http://www.modpython.org/mailman/listinfo/mod_python


_________________________________________________________________
Hotmail now available on Australian mobile phones. Go to  
http://ninemsn.com.au/mobilecentral/hotmail_mobile.asp


From grisha at modpython.org  Sun Apr  6 16:28:48 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 22:03:48 2004
Subject: [mod_python] Import Issues
In-Reply-To: <F24k8eDDSFc6hFHh9la00014034@hotmail.com>
Message-ID: <20030406161905.L45203-100000@eden.ispol.com>

On Sun, 6 Apr 2003, Tommy !! wrote:

> Hi all,
>
> I achieved what I wanted by modifying publisher.py - obviously this is a bit
> dirty since it's handler-specific, but oh well - it works.
>
> Basically, I use the following code in publisher.py prior to calling the
> target python script itself (where 'path' is the path to the python script
> determined by publisher.py):
>
> if not path in sys.path:
>   sys.path.append( path )
>
> # ...
>
> while path in sys.path:
>   del sys.path[sys.path.index( path )]

Hm... Not sure I understand what this does, since the publisher already
does add the path, in fact it restricts it so that the module can only be
imported from that particular path.

> Another question - what's to stop a remote user from running any given
> method in an arbitrary python script within a directory when using the
> publisher handler?

If that directory is exposed to the web (i.e. is under DocumentRoot), then
nothing, you should be very careful about that. The publisher will not run
anything that beginc with an "_" so it's a good idea to name all internal
functions beginning with an underscore.

Grisha



From pzb at datastacks.com  Sun Apr  6 18:15:02 2003
From: pzb at datastacks.com (Peter Bowen)
Date: Fri Jan  9 22:03:48 2004
Subject: [mod_python] Why are you using mod_python?
In-Reply-To: <20030328231412.24efac21.frank@fejes.net>
References: <20030328075642.A25172@ash.int.ca.pason.com>
	 <20030328172826.X67038-100000@eden.ispol.com>
	 <20030328231412.24efac21.frank@fejes.net>
Message-ID: <1049667302.13572.20.camel@localhost.localdomain>

On Sat, 2003-03-29 at 00:14, Frank S. Fejes III wrote:
> On a somewhat tangential note, I think mod_python documentation reflects
> strangely on what target audience might be interested in the module.  Almost
> all introductions I've seen to mod_python begin with a tutorial on creating
> a handler.  I'd venture a guess that writing handlers is what fewer than 1%
> of web developers want to do with an apache module initially.  In my
> experience, most people want to write some code and have it run faster than
> it would run under straight CGI...they don't want to write custom handlers.

I would have to disagree.  We were using PHP 4.x, but it doesn't have
support for all the hooks that apache offers.  We use the trans, authen,
authz, and content handlers for our projects.  We don't use the FastCGI
or publisher handlers at all.

Additionally mod_python offered us an opportunity to use python, which
we find offers faster development with less work and less bugs.  Python
is a very well designed language.  We were stretching the bounds of PHP
and perl, while being flexible, is too much of a write-only language.

Thanks.
Peter

From sterling at bumblebury.com  Sun Apr  6 18:50:03 2003
From: sterling at bumblebury.com (Sterling Hughes)
Date: Fri Jan  9 22:03:48 2004
Subject: [mod_python] Why are you using mod_python?
In-Reply-To: <1049667302.13572.20.camel@localhost.localdomain>
References: <20030328075642.A25172@ash.int.ca.pason.com>
	 <20030328172826.X67038-100000@eden.ispol.com>
	 <20030328231412.24efac21.frank@fejes.net>
	 <1049667302.13572.20.camel@localhost.localdomain>
Message-ID: <1049669403.28037.155.camel@hasele>

On Sun, 2003-04-06 at 18:15, Peter Bowen wrote:
> On Sat, 2003-03-29 at 00:14, Frank S. Fejes III wrote:
> > On a somewhat tangential note, I think mod_python documentation reflects
> > strangely on what target audience might be interested in the module.  Almost
> > all introductions I've seen to mod_python begin with a tutorial on creating
> > a handler.  I'd venture a guess that writing handlers is what fewer than 1%
> > of web developers want to do with an apache module initially.  In my
> > experience, most people want to write some code and have it run faster than
> > it would run under straight CGI...they don't want to write custom handlers.
> 
> I would have to disagree.  We were using PHP 4.x, but it doesn't have
> support for all the hooks that apache offers.  We use the trans, authen,
> authz, and content handlers for our projects.  We don't use the FastCGI
> or publisher handlers at all.
> 

Just a note that php does support all of this.

> Additionally mod_python offered us an opportunity to use python, which
> we find offers faster development with less work and less bugs.  Python
> is a very well designed language.  We were stretching the bounds of PHP
> and perl, while being flexible, is too much of a write-only language.
> 

Very true. :)

-Sterling
-- 
Good judgement comes from experience, and experience comes from 
bad judgement. 
    - Fred Brooks


From khalid_kary at hotmail.com  Sun Apr  6 23:55:49 2003
From: khalid_kary at hotmail.com (Khalid El-Kary)
Date: Fri Jan  9 22:03:48 2004
Subject: [mod_python] newbie and unable to get it working
Message-ID: <F50wefzQqWCdFF0a9jm00057331@hotmail.com>

Hi fellows,
I followed the installation instructions as in the mod_python documentation 
"A Windows Installation" section ...

and added the following lines to httpd.conf:

<Directory "<Your Document Root>/python">
   AddHandler python-program .py
   PythonHandler mptest
   PythonDebug on
</Directory>

replaced "your document root" with mine :-)

and created a file called mptest.py under "my document root/python"
which contained:

from mod_python import apache

def handler(req):
   req.content_type = "text/plain"
   req.send_http_header()
   req.write("Hello World!")
   return apache.OK

Apache starts normally and writes out the mod_python headers and an error 
message with which it continues normally:

'import site' failed; use -v for traceback
Apache/1.3.24 (win32) mod_python/2.7.6 Python/2.2.1 PHP/4.2.3 running ...

unfrotunately, when i request "http://servername/python/mptest.py" it gives 
an "500 - internal server error" ...

note that mod_python and python installations with apache went just fine, 
since the headers were written properly.

Windows ME, Apache 1.3.24, mod_python 2.7.6, Python 2.2.1

anything wrong, or any suggestions to get it running ?

thanx in advance,

Regards,
Khalid Al-Kary





_________________________________________________________________
Tired of spam? Get advanced junk mail protection with MSN 8. 
http://join.msn.com/?page=features/junkmail


From scott_list at mischko.com  Mon Apr  7 08:30:50 2003
From: scott_list at mischko.com (Scott Chapman)
Date: Fri Jan  9 22:03:48 2004
Subject: [mod_python] Why are you using mod_python?
In-Reply-To: <20030328231412.24efac21.frank@fejes.net>
References: <20030328075642.A25172@ash.int.ca.pason.com> <20030328172826.X67038-100000@eden.ispol.com> <20030328231412.24efac21.frank@fejes.net>
Message-ID: <200304070830.50822.scott_list@mischko.com>

On Friday 28 March 2003 21:14, Frank S. Fejes III wrote:
> On a somewhat tangential note, I think mod_python documentation reflects
> strangely on what target audience might be interested in the module. 
> Almost all introductions I've seen to mod_python begin with a tutorial on
> creating a handler.  I'd venture a guess that writing handlers is what
> fewer than 1% of web developers want to do with an apache module initially.
>  In my experience, most people want to write some code and have it run
> faster than it would run under straight CGI...they don't want to write
> custom handlers.

I very much agree with you.  The docs could use some improvment in this area.

Scott

From vlindberg at verio.net  Mon Apr  7 10:38:41 2003
From: vlindberg at verio.net (VanL)
Date: Fri Jan  9 22:03:48 2004
Subject: [mod_python] Import Issues
In-Reply-To: <20030406161905.L45203-100000@eden.ispol.com>
References: <20030406161905.L45203-100000@eden.ispol.com>
Message-ID: <3E91A991.1040207@verio.net>

Hello,

I am probably being just dense, but I cannot get my modules to import 
under mod_python.

I can do it fine at the command line:

 >>> from issuetracker import version_check
 >>>

However, mod_python complains:

[Mon Apr  7 16:27:46 2003] [error] PythonHandler mod_python.cgihandler: 
Traceback (most recent call last):
[]   File "/usr/local/lib/python2.2/site-packages/mod_python/apache.py", 
line 193, in Dispatch
    result = object(req)
[] PythonHandler mod_python.cgihandler:   File 
"/usr/local/lib/python2.2/site-packages/mod_python/cgihandler.py", line 
122, in handler
    imp.load_module(module_name, fd, path, desc)
[] PythonHandler mod_python.cgihandler:   File 
"/usr/local/webmanager/controlpanel/support/issuetracker.py", line 31, in ?
    from issuetracker import version_check
[] PythonHandler mod_python.cgihandler: ImportError: cannot import name 
version_check

So I thought that perhaps my sys.path was bad.
I changed the code:
try:
    from issuetracker import version_check
except ImportError:
    raise ImportError(' '.join(sys.path))

Still an error:
[top levels snipped]
[] PythonHandler mod_python.cgihandler: ImportError: 
/usr/local/lib/python2.2threadless 
/usr/local/lib/python2.2threadless/plat-freebsd4 
/usr/local/lib/python2.2threadless/lib-tk 
/usr/local/lib/python2.2threadless/lib-dynload 
/usr/local/lib/python2.2/site-packages /usr/local/webmanager 
/usr/local/webmanager/pylib /usr/local/webmanager/pylib/Packages

issuetracker is a package under /usr/local/webmanager/pylib:
# ls /usr/local/webmanager/pylib/issuetracker/*.py
/usr/local/webmanager/pylib/issuetracker/__init__.py
/usr/local/webmanager/pylib/issuetracker/version_check.py


I have been able to get other modules to import, and I can import 
issuetracker (top-level only) with no problems.  Anyone have a clue?

Apache 1.3.26, mod_python 2.78, python2.2-threadless.

Thanks,

VanL





From grisha at modpython.org  Mon Apr  7 14:03:52 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 22:03:48 2004
Subject: [mod_python] Import Issues
In-Reply-To: <3E91A991.1040207@verio.net>
Message-ID: <20030407140250.V55953-100000@eden.ispol.com>

Are sure it's not a permissions problem? Httpd most likely runs as user
"nobody", so all Python libs you're using must be world-readable.

Grisha

On Mon, 7 Apr 2003, VanL wrote:

> Hello,
>
> I am probably being just dense, but I cannot get my modules to import
> under mod_python.
>
> I can do it fine at the command line:
>
>  >>> from issuetracker import version_check
>  >>>
>
> However, mod_python complains:
>
> [Mon Apr  7 16:27:46 2003] [error] PythonHandler mod_python.cgihandler:
> Traceback (most recent call last):
> []   File "/usr/local/lib/python2.2/site-packages/mod_python/apache.py",
> line 193, in Dispatch
>     result = object(req)
> [] PythonHandler mod_python.cgihandler:   File
> "/usr/local/lib/python2.2/site-packages/mod_python/cgihandler.py", line
> 122, in handler
>     imp.load_module(module_name, fd, path, desc)
> [] PythonHandler mod_python.cgihandler:   File
> "/usr/local/webmanager/controlpanel/support/issuetracker.py", line 31, in ?
>     from issuetracker import version_check
> [] PythonHandler mod_python.cgihandler: ImportError: cannot import name
> version_check
>
> So I thought that perhaps my sys.path was bad.
> I changed the code:
> try:
>     from issuetracker import version_check
> except ImportError:
>     raise ImportError(' '.join(sys.path))
>
> Still an error:
> [top levels snipped]
> [] PythonHandler mod_python.cgihandler: ImportError:
> /usr/local/lib/python2.2threadless
> /usr/local/lib/python2.2threadless/plat-freebsd4
> /usr/local/lib/python2.2threadless/lib-tk
> /usr/local/lib/python2.2threadless/lib-dynload
> /usr/local/lib/python2.2/site-packages /usr/local/webmanager
> /usr/local/webmanager/pylib /usr/local/webmanager/pylib/Packages
>
> issuetracker is a package under /usr/local/webmanager/pylib:
> # ls /usr/local/webmanager/pylib/issuetracker/*.py
> /usr/local/webmanager/pylib/issuetracker/__init__.py
> /usr/local/webmanager/pylib/issuetracker/version_check.py
>
>
> I have been able to get other modules to import, and I can import
> issuetracker (top-level only) with no problems.  Anyone have a clue?
>
> Apache 1.3.26, mod_python 2.78, python2.2-threadless.
>
> Thanks,
>
> VanL
>
>
>
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From vlindberg at verio.net  Mon Apr  7 12:13:26 2003
From: vlindberg at verio.net (VanL)
Date: Fri Jan  9 22:03:48 2004
Subject: [mod_python] Import Issues
In-Reply-To: <20030407140250.V55953-100000@eden.ispol.com>
References: <20030407140250.V55953-100000@eden.ispol.com>
Message-ID: <3E91BFC6.8040202@verio.net>

Gregory (Grisha) Trubetskoy wrote:

>Are sure it's not a permissions problem? Httpd most likely runs as user
>"nobody", so all Python libs you're using must be world-readable.
>
Checked it already:  httpd runs as user "www"  All files in the pylib 
directory have 755 permissions, and the group is set to www also.  
Either way, they should be world-readable.

VanL


>
>Grisha
>
>On Mon, 7 Apr 2003, VanL wrote:
>
>  
>
>>Hello,
>>
>>I am probably being just dense, but I cannot get my modules to import
>>under mod_python.
>>
>>I can do it fine at the command line:
>>
>> >>> from issuetracker import version_check
>> >>>
>>
>>However, mod_python complains:
>>
>>[Mon Apr  7 16:27:46 2003] [error] PythonHandler mod_python.cgihandler:
>>Traceback (most recent call last):
>>[]   File "/usr/local/lib/python2.2/site-packages/mod_python/apache.py",
>>line 193, in Dispatch
>>    result = object(req)
>>[] PythonHandler mod_python.cgihandler:   File
>>"/usr/local/lib/python2.2/site-packages/mod_python/cgihandler.py", line
>>122, in handler
>>    imp.load_module(module_name, fd, path, desc)
>>[] PythonHandler mod_python.cgihandler:   File
>>"/usr/local/webmanager/controlpanel/support/issuetracker.py", line 31, in ?
>>    from issuetracker import version_check
>>[] PythonHandler mod_python.cgihandler: ImportError: cannot import name
>>version_check
>>
>>So I thought that perhaps my sys.path was bad.
>>I changed the code:
>>try:
>>    from issuetracker import version_check
>>except ImportError:
>>    raise ImportError(' '.join(sys.path))
>>
>>Still an error:
>>[top levels snipped]
>>[] PythonHandler mod_python.cgihandler: ImportError:
>>/usr/local/lib/python2.2threadless
>>/usr/local/lib/python2.2threadless/plat-freebsd4
>>/usr/local/lib/python2.2threadless/lib-tk
>>/usr/local/lib/python2.2threadless/lib-dynload
>>/usr/local/lib/python2.2/site-packages /usr/local/webmanager
>>/usr/local/webmanager/pylib /usr/local/webmanager/pylib/Packages
>>
>>issuetracker is a package under /usr/local/webmanager/pylib:
>># ls /usr/local/webmanager/pylib/issuetracker/*.py
>>/usr/local/webmanager/pylib/issuetracker/__init__.py
>>/usr/local/webmanager/pylib/issuetracker/version_check.py
>>
>>
>>I have been able to get other modules to import, and I can import
>>issuetracker (top-level only) with no problems.  Anyone have a clue?
>>
>>Apache 1.3.26, mod_python 2.78, python2.2-threadless.
>>
>>Thanks,
>>
>>VanL
>>
>>
>>
>>
>>_______________________________________________
>>Mod_python mailing list
>>Mod_python@modpython.org
>>http://www.modpython.org/mailman/listinfo/mod_python
>>
>>    
>>
>
>  
>



From neel at mediapulse.com  Mon Apr  7 15:17:54 2003
From: neel at mediapulse.com (Michael C. Neel)
Date: Fri Jan  9 22:03:48 2004
Subject: [mod_python] Import Issues
Message-ID: <C0FC22C08B82074A88B50061764157772C65A2@johnson.mediapulse.net>

Sorry for the blank email, hit a bad key combo.

Anyway, looks like there might be a path issue invloved, as I see both
/usr/local/lib/python2.2 and /usr/local/lib/python2.2threadless below.
Did you make a custom install of python for mod_python (not uncommon)?
If so, which one is mod_python linked against?

Mike

-----Original Message-----
From: VanL [mailto:vlindberg@verio.net] 
Sent: Monday, April 07, 2003 2:13 PM
To: Gregory (Grisha) Trubetskoy
Cc: mod_python@modpython.org
Subject: Re: [mod_python] Import Issues


Gregory (Grisha) Trubetskoy wrote:

>Are sure it's not a permissions problem? Httpd most likely runs as user

>"nobody", so all Python libs you're using must be world-readable.
>
Checked it already:  httpd runs as user "www"  All files in the pylib 
directory have 755 permissions, and the group is set to www also.  
Either way, they should be world-readable.

VanL


>
>Grisha
>
>On Mon, 7 Apr 2003, VanL wrote:
>
>  
>
>>Hello,
>>
>>I am probably being just dense, but I cannot get my modules to import 
>>under mod_python.
>>
>>I can do it fine at the command line:
>>
>> >>> from issuetracker import version_check
>> >>>
>>
>>However, mod_python complains:
>>
>>[Mon Apr  7 16:27:46 2003] [error] PythonHandler 
>>mod_python.cgihandler: Traceback (most recent call last):
>>[]   File
"/usr/local/lib/python2.2/site-packages/mod_python/apache.py",
>>line 193, in Dispatch
>>    result = object(req)
>>[] PythonHandler mod_python.cgihandler:   File
>>"/usr/local/lib/python2.2/site-packages/mod_python/cgihandler.py", 
>>line 122, in handler
>>    imp.load_module(module_name, fd, path, desc)
>>[] PythonHandler mod_python.cgihandler:   File
>>"/usr/local/webmanager/controlpanel/support/issuetracker.py", line 31,
in ?
>>    from issuetracker import version_check
>>[] PythonHandler mod_python.cgihandler: ImportError: cannot import 
>>name version_check
>>
>>So I thought that perhaps my sys.path was bad.
>>I changed the code:
>>try:
>>    from issuetracker import version_check
>>except ImportError:
>>    raise ImportError(' '.join(sys.path))
>>
>>Still an error:
>>[top levels snipped]
>>[] PythonHandler mod_python.cgihandler: ImportError: 
>>/usr/local/lib/python2.2threadless
>>/usr/local/lib/python2.2threadless/plat-freebsd4
>>/usr/local/lib/python2.2threadless/lib-tk
>>/usr/local/lib/python2.2threadless/lib-dynload
>>/usr/local/lib/python2.2/site-packages /usr/local/webmanager 
>>/usr/local/webmanager/pylib /usr/local/webmanager/pylib/Packages
>>
>>issuetracker is a package under /usr/local/webmanager/pylib: # ls 
>>/usr/local/webmanager/pylib/issuetracker/*.py
>>/usr/local/webmanager/pylib/issuetracker/__init__.py
>>/usr/local/webmanager/pylib/issuetracker/version_check.py
>>
>>
>>I have been able to get other modules to import, and I can import 
>>issuetracker (top-level only) with no problems.  Anyone have a clue?
>>
>>Apache 1.3.26, mod_python 2.78, python2.2-threadless.
>>
>>Thanks,
>>
>>VanL
>>
>>
>>
>>
>>_______________________________________________
>>Mod_python mailing list
>>Mod_python@modpython.org 
>>http://www.modpython.org/mailman/listinfo/mod_python
>>
>>    
>>
>
>  
>


_______________________________________________
Mod_python mailing list
Mod_python@modpython.org
http://www.modpython.org/mailman/listinfo/mod_python


From vlindberg at verio.net  Mon Apr  7 13:32:57 2003
From: vlindberg at verio.net (VanL)
Date: Fri Jan  9 22:03:48 2004
Subject: [mod_python] Import Issues
In-Reply-To: <C0FC22C08B82074A88B50061764157772C65A2@johnson.mediapulse.net>
References: <C0FC22C08B82074A88B50061764157772C65A2@johnson.mediapulse.net>
Message-ID: <3E91D269.6000505@verio.net>

Michael C. Neel wrote:

>Sorry for the blank email, hit a bad key combo.
>
>Anyway, looks like there might be a path issue invloved, as I see both
>/usr/local/lib/python2.2 and /usr/local/lib/python2.2threadless below.
>Did you make a custom install of python for mod_python (not uncommon)?
>If so, which one is mod_python linked against?
>
>Mike
>
Both exist; mod_python is linked against the threadless install.  On a 
side note, I built the threadless installation and mod python, however, 
for some reason the /usr/local/lib/python2.2/site-packages is the only 
site-packages in the import path.  So, mod_python was built against the 
threadless installation, and both the normal and threadless 
installations exist, but the mod_python package is actually symlinked 
into both /usr/local/lib/python2.2/site-packages as well as  
/usr/local/lib/python2.2threadless/site-packages.

Every other library (other than those in the standard lib) are located 
in /usr/local/webmanager pylib.

VanL



From manuel at aguete.org  Tue Apr  8 17:35:11 2003
From: manuel at aguete.org (Manuel =?ISO-8859-1?Q?Dur=E1n?= Aguete)
Date: Fri Jan  9 22:03:48 2004
Subject: [mod_python] A question
Message-ID: <1049816111.882.49.camel@dt1010b.quantum.int>

Hello,
	I'm implementing a XMLRPC dispatcher with mod_python, it's almost done,
but after a few petitions the script crashed with internal server error.
The problem it's in apache.py in method import_module.

#        if not file or (path and not os.path.dirname(file) in path):
#                raise SERVER_RETURN, HTTP_NOT_FOUND

if I comment these lines it seems to work ok. Printing the variables in
if I get: 
[Tue Apr  8 16:03:53 2003] [notice] mod_python: Going to import cosa
from ['/home/manuel/public_html/python/']: <module 'cosa' from
'/home/manuel/public_html/python/cosa.py'>
 mod_python: File is /home/manuel/public_html/python/cosa.py Path is
['/home/manuel/public_html/python/'] Dirname:
/home/manuel/public_html/python

I'm usign mod_python 2.7.8 with python 2.1.3 under Debian Gnu/Linux with
apache 1.3.26

Any idea what's happening ?

								Regards.
-- 
Manuel Dur?n Aguete <manuel@aguete.org>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://mailman.modpython.org/pipermail/mod_python/attachments/20030408/f80ef813/attachment-0003.bin
From grisha at modpython.org  Tue Apr  8 13:15:46 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 22:03:48 2004
Subject: [mod_python] A question
In-Reply-To: <1049816111.882.49.camel@dt1010b.quantum.int>
Message-ID: <20030408131434.I71082-100000@eden.ispol.com>

I think the problem is somewhere else, because the lines you commented out
would at works produce "Not Found", but not "Internal Server Error". When
you get "Internal Server Error", check what's in the error log, there may
be a clue there.

Grisha

On 8 Apr 2003, Manuel [ISO-8859-1] Dur?n Aguete wrote:

> Hello,
> 	I'm implementing a XMLRPC dispatcher with mod_python, it's almost done,
> but after a few petitions the script crashed with internal server error.
> The problem it's in apache.py in method import_module.
>
> #        if not file or (path and not os.path.dirname(file) in path):
> #                raise SERVER_RETURN, HTTP_NOT_FOUND
>
> if I comment these lines it seems to work ok. Printing the variables in
> if I get:
> [Tue Apr  8 16:03:53 2003] [notice] mod_python: Going to import cosa
> from ['/home/manuel/public_html/python/']: <module 'cosa' from
> '/home/manuel/public_html/python/cosa.py'>
>  mod_python: File is /home/manuel/public_html/python/cosa.py Path is
> ['/home/manuel/public_html/python/'] Dirname:
> /home/manuel/public_html/python
>
> I'm usign mod_python 2.7.8 with python 2.1.3 under Debian Gnu/Linux with
> apache 1.3.26
>
> Any idea what's happening ?
>
> 								Regards.
> --
> Manuel Dur?n Aguete <manuel@aguete.org>
>


From matt at teaphoo.fsnet.co.uk  Tue Apr  8 23:59:30 2003
From: matt at teaphoo.fsnet.co.uk (Matthew Russell)
Date: Fri Jan  9 22:03:48 2004
Subject: [mod_python] newbie and unable to get it working
References: <F50wefzQqWCdFF0a9jm00057331@hotmail.com>
Message-ID: <004901c2fe22$83f17da0$0ba587d9@jaws>

"import site" error in python usually means
that you havent; set yout PYTHONPATH correctly.

Is is most likely that the user which starts apache on your machine has not
set this in his profile.
Alteritivaly use:
setEnv PYTHONPATH=<my list of paths>
in htttpd.conf


----- Original Message -----
From: "Khalid El-Kary" <khalid_kary@hotmail.com>
To: <mod_python@modpython.org>
Sent: Monday, April 07, 2003 12:55 AM
Subject: [mod_python] newbie and unable to get it working


> Hi fellows,
> I followed the installation instructions as in the mod_python
documentation
> "A Windows Installation" section ...
>
> and added the following lines to httpd.conf:
>
> <Directory "<Your Document Root>/python">
>    AddHandler python-program .py
>    PythonHandler mptest
>    PythonDebug on
> </Directory>
>
> replaced "your document root" with mine :-)
>
> and created a file called mptest.py under "my document root/python"
> which contained:
>
> from mod_python import apache
>
> def handler(req):
>    req.content_type = "text/plain"
>    req.send_http_header()
>    req.write("Hello World!")
>    return apache.OK
>
> Apache starts normally and writes out the mod_python headers and an error
> message with which it continues normally:
>
> 'import site' failed; use -v for traceback
> Apache/1.3.24 (win32) mod_python/2.7.6 Python/2.2.1 PHP/4.2.3 running ...
>
> unfrotunately, when i request "http://servername/python/mptest.py" it
gives
> an "500 - internal server error" ...
>
> note that mod_python and python installations with apache went just fine,
> since the headers were written properly.
>
> Windows ME, Apache 1.3.24, mod_python 2.7.6, Python 2.2.1
>
> anything wrong, or any suggestions to get it running ?
>
> thanx in advance,
>
> Regards,
> Khalid Al-Kary
>
>
>
>
>
> _________________________________________________________________
> Tired of spam? Get advanced junk mail protection with MSN 8.
> http://join.msn.com/?page=features/junkmail
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From pluto at objectrealms.net  Thu Apr 10 18:34:01 2003
From: pluto at objectrealms.net (pluto)
Date: Fri Jan  9 22:03:48 2004
Subject: [mod_python] connection pooling?
Message-ID: <3E959CF9.2070603@objectrealms.net>

is it possible to do connection pooling of database handles in 
mod_python? my understanding is that for the common apache/linux mpm 
(prefork) this amounts to having lots of connections open to the db.. 
i'd like to have a global pool of connections for the server, is this 
possible?

somewhat related.. when apache is using the thread mpm, does mod_python 
use a single interpreter for all the threads, or does a different 
interpreter in each thread?

thanks,

-p


From mike.looijmans at asml.com  Fri Apr 11 07:15:59 2003
From: mike.looijmans at asml.com (Mike Looijmans)
Date: Fri Jan  9 22:03:48 2004
Subject: [mod_python] connection pooling?
Message-ID: <01c2ffe9$6fec1180$926a1e6e@wsasd464>

>is it possible to do connection pooling of database handles in
>mod_python? my understanding is that for the common apache/linux mpm
>(prefork) this amounts to having lots of connections open to the db..

Yes 2x...
Well, "lots" is only relative. Most DBMS won't have a problem with 20 or so
open connections. We're not talking hundreds here...

>i'd like to have a global pool of connections for the server, is this
>possible?


Yes, but the solution below is much simpler.

>somewhat related.. when apache is using the thread mpm, does mod_python
>use a single interpreter for all the threads, or does a different
>interpreter in each thread?

It uses a single interpreter for all threads. Which is quite handy, since you
also share all data, DB connection sharing is a breeze.
However, most DBMSses require you to use a connection per thread, but you can
share a fifo of connections along the threads. That's what I did for MySQL
connections.

--
Mike Looijmans
ASML: http://www5nl.asml.nl/~mlooijma
Private: http://www.milosoftware.com



From Tim.Hawes at ncmail.net  Fri Apr 11 09:12:19 2003
From: Tim.Hawes at ncmail.net (Tim Hawes)
Date: Fri Jan  9 22:03:48 2004
Subject: [mod_python] Error compiling mod_python on Solaris
Message-ID: <1050066739.19719.7.camel@apollos>

I am trying to compile mod_python 3.0.3 (DSO) on Solaris 8 (sparc).
Apache is version 2.0.45 (and I have already tried this with 2.0.44 with
the same results).
GCC is 3.2.2 (32 bit)
using Solaris ld (not GNU ld)
Python is version 2.1.3

I get the following:


hrdhhs34:[mod_python-3.0.3] $ gmake
gmake[1]: Entering directory
`/export/home/thawes/src/build/mod_python-3.0.3/src'

Compiling for DSO.

/usr/local/apache/2.0.45/bin/apxs
-I/export/home/thawes/src/build/mod_python-3.0.3/src/include
-I/usr/local/apache/2.0.45/include
-I/usr/local/bin/../stow/python-2.1.3/include/python2.1 -c mod_python.c
_apachemodule.c requestobject.c tableobject.c util.c serverobject.c
connobject.c filterobject.c hlist.c hlistobject.c  -lm 
/usr/local/bin/../stow/python-2.1.3/lib/python2.1/config/libpython2.1.a   -lpthread -lsocket -lnsl -ldl  -lthread   -lm            _eprintf.o _floatdidf.o _muldi3.o
/usr/local/apache/2.0.45/build/libtool --silent --mode=compile gcc
-prefer-pic  -DAP_HAVE_DESIGNATED_INITIALIZER -DSOLARIS2=8
-D_POSIX_PTHREAD_SEMANTICS -D_REENTRANT -g -O2 -pthreads
-I/usr/local/apache/2.0.45/include
-I/export/home/thawes/src/build/mod_python-3.0.3/src/include
-I/usr/local/apache/2.0.45/include
-I/usr/local/bin/../stow/python-2.1.3/include/python2.1  -c -o
mod_python.lo mod_python.c && touch mod_python.slo
In file included from
/export/home/thawes/src/build/mod_python-3.0.3/src/include/mod_python.h:115,
                 from mod_python.c:67:
/export/home/thawes/src/build/mod_python-3.0.3/src/include/util.h:76:
parse error before '*' token
/export/home/thawes/src/build/mod_python-3.0.3/src/include/util.h:76:
parse error before '*' token
/export/home/thawes/src/build/mod_python-3.0.3/src/include/util.h:76:
warning: data definition has no type or storage class
apxs:Error: Command failed with rc=65536
.
gmake[1]: *** [mod_python.so] Error 1
gmake[1]: Leaving directory
`/export/home/thawes/src/build/mod_python-3.0.3/src'
gmake: *** [do_dso] Error 2

Any ideas for a fix?


From grisha at modpython.org  Fri Apr 11 10:04:17 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 22:03:48 2004
Subject: [mod_python] Error compiling mod_python on Solaris
In-Reply-To: <1050066739.19719.7.camel@apollos>
Message-ID: <20030411100330.K14584-100000@eden.ispol.com>

Most likely the problem is your Python versio, try using 2.2.2.

Grisha


On 11 Apr 2003, Tim Hawes wrote:

> I am trying to compile mod_python 3.0.3 (DSO) on Solaris 8 (sparc).
> Apache is version 2.0.45 (and I have already tried this with 2.0.44 with
> the same results).
> GCC is 3.2.2 (32 bit)
> using Solaris ld (not GNU ld)
> Python is version 2.1.3
>
> I get the following:
>
>
> hrdhhs34:[mod_python-3.0.3] $ gmake
> gmake[1]: Entering directory
> `/export/home/thawes/src/build/mod_python-3.0.3/src'
>
> Compiling for DSO.
>
> /usr/local/apache/2.0.45/bin/apxs
> -I/export/home/thawes/src/build/mod_python-3.0.3/src/include
> -I/usr/local/apache/2.0.45/include
> -I/usr/local/bin/../stow/python-2.1.3/include/python2.1 -c mod_python.c
> _apachemodule.c requestobject.c tableobject.c util.c serverobject.c
> connobject.c filterobject.c hlist.c hlistobject.c  -lm
> /usr/local/bin/../stow/python-2.1.3/lib/python2.1/config/libpython2.1.a   -lpthread -lsocket -lnsl -ldl  -lthread   -lm            _eprintf.o _floatdidf.o _muldi3.o
> /usr/local/apache/2.0.45/build/libtool --silent --mode=compile gcc
> -prefer-pic  -DAP_HAVE_DESIGNATED_INITIALIZER -DSOLARIS2=8
> -D_POSIX_PTHREAD_SEMANTICS -D_REENTRANT -g -O2 -pthreads
> -I/usr/local/apache/2.0.45/include
> -I/export/home/thawes/src/build/mod_python-3.0.3/src/include
> -I/usr/local/apache/2.0.45/include
> -I/usr/local/bin/../stow/python-2.1.3/include/python2.1  -c -o
> mod_python.lo mod_python.c && touch mod_python.slo
> In file included from
> /export/home/thawes/src/build/mod_python-3.0.3/src/include/mod_python.h:115,
>                  from mod_python.c:67:
> /export/home/thawes/src/build/mod_python-3.0.3/src/include/util.h:76:
> parse error before '*' token
> /export/home/thawes/src/build/mod_python-3.0.3/src/include/util.h:76:
> parse error before '*' token
> /export/home/thawes/src/build/mod_python-3.0.3/src/include/util.h:76:
> warning: data definition has no type or storage class
> apxs:Error: Command failed with rc=65536
> .
> gmake[1]: *** [mod_python.so] Error 1
> gmake[1]: Leaving directory
> `/export/home/thawes/src/build/mod_python-3.0.3/src'
> gmake: *** [do_dso] Error 2
>
> Any ideas for a fix?
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From Tim.Hawes at ncmail.net  Fri Apr 11 13:44:42 2003
From: Tim.Hawes at ncmail.net (Tim Hawes)
Date: Fri Jan  9 22:03:48 2004
Subject: [mod_python] Error compiling mod_python on Solaris
In-Reply-To: <20030411100330.K14584-100000@eden.ispol.com>
References: <20030411100330.K14584-100000@eden.ispol.com>
Message-ID: <1050083083.2647.2.camel@apollos>

From khalid_kary at hotmail.com  Fri Apr 11 18:05:22 2003
From: khalid_kary at hotmail.com (Khalid El-Kary)
Date: Fri Jan  9 22:03:48 2004
Subject: [mod_python] plz help :-)
Message-ID: <F67hguA23ONgCJinoHL000685d0@hotmail.com>

Hi fellows,
I have sent this question before, but i got no reply, can you plz help :-)

I followed the installation instructions as in the mod_python documentation 
"A Windows Installation" section ...

and added the following lines to httpd.conf:

<Directory "<Your Document Root>/python">
  AddHandler python-program .py
  PythonHandler mptest
  PythonDebug on
</Directory>

replaced "your document root" with mine :-)

and created a file called mptest.py under "my document root/python"
which contained:

from mod_python import apache

def handler(req):
  req.content_type = "text/plain"
  req.send_http_header()
  req.write("Hello World!")
  return apache.OK

Apache starts normally and writes out the mod_python headers and an error 
message with which it continues normally:

'import site' failed; use -v for traceback
Apache/1.3.24 (win32) mod_python/2.7.6 Python/2.2.1 PHP/4.2.3 running ...

unfrotunately, when i request "http://servername/python/mptest.py" it gives 
an "500 - internal server error" ...

note that mod_python and python installations with apache went just fine, 
since the headers were written properly.

Windows ME, Apache 1.3.24, mod_python 2.7.6, Python 2.2.1

anything wrong, or any suggestions to get it running ?

thanx in advance,

Regards,
Khalid Al-Kary






_________________________________________________________________
Protect your PC - get McAfee.com VirusScan Online 
http://clinic.mcafee.com/clinic/ibuy/campaign.asp?cid=3963


From i at mindlace.net  Sat Apr 12 22:51:49 2003
From: i at mindlace.net (emf)
Date: Fri Jan  9 22:03:48 2004
Subject: [mod_python] Why are you using mod_python?
In-Reply-To: <20030328172826.X67038-100000@eden.ispol.com>
References: <20030328172826.X67038-100000@eden.ispol.com>
Message-ID: <3E98D0C5.10005@mindlace.net>

Gregory (Grisha) Trubetskoy wrote:
> Hello everyone -
> 
> As the original author of mod_python I think I'm allowed to jerk people's
> chains with this simple question:
> 
> Why are you using mod_python?

I am using mod_python because I wanted a way to manipulate xhtml/xml 
files and present them to end users without ever tainting the xhtml/xml 
with unrelated markup (like putting python in the page, having extra 
attributes, etc).

No existing python framework cleanly gives me that ability, and I didn't 
want to use a web server written in python, so mod_python seemed like 
the best choice.

~mindlace



From khalid_kary at hotmail.com  Sun Apr 13 15:39:07 2003
From: khalid_kary at hotmail.com (Khalid El-Kary)
Date: Fri Jan  9 22:03:49 2004
Subject: [mod_python] plz help :-)
Message-ID: <F982jQlHPTei5TnY99p00030745@hotmail.com>

>Hi Khalid
>I am not a specialist on this exspecially not on Windoze
>but SEE BELOW
>
> >I followed the installation instructions as in the mod_python 
>documentation
> >"A Windows Installation" section ...
> >
> >and added the following lines to httpd.conf:
> >
> ><Directory "<Your Document Root>/python">
> >  AddHandler python-program .py
> >  PythonHandler mptest
> >  PythonDebug on
> ></Directory>
> >
> >replaced "your document root" with mine :-)
> >
> >and created a file called mptest.py under "my document root/python"
> >which contained:
> >
> >from mod_python import apache
> >
> >def handler(req):
> >  req.content_type = "text/plain"
> >  req.send_http_header()
> >  req.write("Hello World!")
> >  return apache.OK
> >
> >Apache starts normally and writes out the mod_python headers and an error
> >message with which it continues normally:
> >
> >'import site' failed; use -v for traceback
>DOESNT THIS SHOWS THAT SOMETHING WITH LOADING THE MODULE WENT
>WRONG, ARE THERE ANY PATHS TO BE SET  SO APACHE FINDS THE
>mod_python ??

in the LoadModule section:
LoadModule python_module modules/mod_python.dll

in the AddModule section:
AddModule mod_python.c

I think if there was a configuration error, Apache shouldn't start normally 
and give an error message ... anyway do you know anything about "'import 
site' failed; use - v for traceback" thing ?

>
> >Apache/1.3.24 (win32) mod_python/2.7.6 Python/2.2.1 PHP/4.2.3 running ...
>
>
>
> >
> >unfrotunately, when i request "http://servername/python/mptest.py" it 
>gives
> >an "500 - internal server error" ...
>I THINK http://servername/python/mptest
>IS SUFFICIENT
>
> >note that mod_python and python installations with apache went just fine,
> >since the headers were written properly.
> >
> >Windows ME, Apache 1.3.24, mod_python 2.7.6, Python 2.2.1
> >
> >anything wrong, or any suggestions to get it running ?
> >
> >thanx in advance,
> >
> >Regards,
> >Khalid Al-Kary
> >
> >
> >
> >
> >
> >
> >_________________________________________________________________
> >Protect your PC - get McAfee.com VirusScan Online
> >http://clinic.mcafee.com/clinic/ibuy/campaign.asp?cid=3963
> >
> >_______________________________________________
> >Mod_python mailing list
> >Mod_python@modpython.org
> >http://www.modpython.org/mailman/listinfo/mod_python
>
>


_________________________________________________________________
STOP MORE SPAM with the new MSN 8 and get 2 months FREE* 
http://join.msn.com/?page=features/junkmail


From jm at eemsystems.cjb.net  Mon Apr 14 08:54:34 2003
From: jm at eemsystems.cjb.net (Julio Mendoza)
Date: Fri Jan  9 22:03:49 2004
Subject: [mod_python] upload binary file
Message-ID: <1050328473.937.2.camel@eemsystems.com>

Is posible to upload a binary file using mod_python?

Tank you,

JM



Mod_python error: "PythonHandler mod_python.publisher"

Traceback (most recent call last):

  File "/usr/lib/python2.2/site-packages/mod_python/apache.py", line 193, in Dispatch
    result = object(req)

  File "/usr/lib/python2.2/site-packages/mod_python/publisher.py", line 104, in handler
    val = File(field)

  File "/usr/lib/python2.2/site-packages/mod_python/publisher.py", line 308, in __init__
    for m in field.file.__methods__:

AttributeError: 'file' object has no attribute '__methods__'
-- 
Julio Mendoza <jm@eemsystems.cjb.net>


From Tim.Hawes at ncmail.net  Mon Apr 14 10:59:32 2003
From: Tim.Hawes at ncmail.net (Tim Hawes)
Date: Fri Jan  9 22:03:49 2004
Subject: [mod_python] mod_python not working.
Message-ID: <1050332372.30483.6.camel@apollos>

OK< I have successfully compiled the mod_python module (v. 3.0.3) on
Solaris, installed, and have configured Apache (v. 2.0.45) according to
the 2.4 Testing section in the docs:

    LoadModule python_module  modules/mod_python.so

    <Directory /some/directory/htdocs/test>
      AllowOverride   FileInfo
      AddHandler      python-program .py
      PythonHandler   mptest 
      PythonDebug     On 
    </Directory>

I have created my mptest.py file:

from mod_python import apache

    def handler(req):
        req.send_http_header()
        req.write("Hello World!")
        return apache.OK

Restart Apache and I get a 500 Internal Server Error and 
 "make_obcallback: could not import mod_python.apache." in my error log.
Any ideas?



From gnb at itga.com.au  Tue Apr 15 08:44:02 2003
From: gnb at itga.com.au (Gregory Bond)
Date: Fri Jan  9 22:03:49 2004
Subject: [mod_python] mod_python not working. 
In-Reply-To: Your message of 14 Apr 2003 10:59:32 -0400.
Message-ID: <200304142244.IAA26128@lightning.itga.com.au>

This is FAQ # 1:

http://www.modpython.org/FAQ/faqw.py?req=show&file=faq02.001.htp


From qwer at quirxi.com  Tue Apr 15 21:40:36 2003
From: qwer at quirxi.com (qwer)
Date: Fri Jan  9 22:03:49 2004
Subject: [mod_python] Error: 200 OK ?
Message-ID: <3E9C6034.9070907@quirxi.com>

Hello,


I just have installed apache (2.0.45), python (2.2.2), and ,mod_python (
3.0.3 ).

Then I have added following lines to apache configuration file httpd.conf:
<Directory "/home/www/cgi-bin">

    AllowOverride None
      Options None
      Order allow,deny
      Allow from all
#   AddHandler python-program .py
#   PythonHandler qwer

      AddHandler python-program .py
      PythonHandler mod_python.publisher
      PythonDebug On
</Directory>


For testing purposes I added the little python script "test.py" to the
directory "home/www/cgi-bin" and called it with the URL
"http://localhost/cgi-bin/test.py/login".

Here is the script:

----- snip ----

from mod_python import apache
def login( req ):
	req.content_type = "text/html"
	req.send_http_header()
	req.write( "Hello World!" )
	return apache.OK

----- snip ----

But for me it seems that the mod_pyhton handler does not work propely because I 
get following output:


Hello World!<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>200 OK</title>
</head><body>
<h1>OK</h1>
<p>The server encountered an internal error or
misconfiguration and was unable to complete
your request.</p>
<p>Please contact the server administrator,
  qwer@jango and inform them of the time the error occurred,
and anything you might have done that may have
caused the error.</p>
<p>More information about this error may be available
in the server error log.</p>
<hr />
<address>Apache/2.0.45 (Unix) mod_ssl/2.0.45 OpenSSL/0.9.7 mod_python/3.0.3 
Python/2.2.2 Server at localhost Port 80</address>

</body></html>


It is strange that the title tag contains "200 OK" and the output of the 
programm is given out together with an server error message.

Does anybody know what the problem could be ? Any help would be apreciated ....



Cheers

	Arno











From vmanera at manord.com  Wed Apr 16 19:27:52 2003
From: vmanera at manord.com (Manera, Villiam)
Date: Fri Jan  9 22:03:49 2004
Subject: R: [mod_python] upload binary file
Message-ID: <52DC70C1C1575C418CB033523A29CF1497D295@exchange2000.manord.com>

I'm testing mod-python 3.0.1 with apache 2.0.43 and python 2.2.2
>
> I've founded a older problem in file download (from python 2.1 to 2.2)
>
> the workaround is still the same:
>
> in publisher.py:
>
>  class File:
>      """ Like a file, but also has headers and filename
>      """
>      def __init__(self, field):
>          # steal all the file-like methods
>          for m in dir(field.file):
> 		 self.__dict__[m] = getattr(field.file, m)
>
>          self.headers = field.headers
>          self.filename = field.filename
> ======================workaround
> ==============================================
>  class File:
>      """ Like a file, but also has headers and filename
>      """
>      def __init__(self, field):
>          # steal all the file-like methods
>          #for m in dir(field.file):    #dont' work
>          for m in self.sim_methods(field.file):
>              self.__dict__[m] = getattr(field.file, m)
>
>          self.headers = field.headers
>          self.filename = field.filename
>
> 	#new--------
>      def sim_methods(self,obj):
>          from types import BuiltinMethodType
>          return filter(lambda s, t=obj:
>             type(getattr(t, s)) == BuiltinMethodType, dir(obj))
>
>
> I hope it will be put in place
>
> regards
>
> Villiam Manera
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>



-----Messaggio originale-----
Da: Julio Mendoza [mailto:jm@eemsystems.cjb.net]
Inviato: luned? 14 aprile 2003 15.55
A: mod_python@modpython.org
Oggetto: [mod_python] upload binary file


Is posible to upload a binary file using mod_python?

Tank you,

JM



Mod_python error: "PythonHandler mod_python.publisher"

Traceback (most recent call last):

  File "/usr/lib/python2.2/site-packages/mod_python/apache.py", line 193, in
Dispatch
    result = object(req)

  File "/usr/lib/python2.2/site-packages/mod_python/publisher.py", line 104,
in handler
    val = File(field)

  File "/usr/lib/python2.2/site-packages/mod_python/publisher.py", line 308,
in __init__
    for m in field.file.__methods__:

AttributeError: 'file' object has no attribute '__methods__'
-- 
Julio Mendoza <jm@eemsystems.cjb.net>

_______________________________________________
Mod_python mailing list
Mod_python@modpython.org
http://www.modpython.org/mailman/listinfo/mod_python


From grisha at modpython.org  Wed Apr 16 14:43:11 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 22:03:49 2004
Subject: R: [mod_python] upload binary file
In-Reply-To: <52DC70C1C1575C418CB033523A29CF1497D295@exchange2000.manord.com>
Message-ID: <20030416144251.R88983-100000@eden.ispol.com>

I am pretty sure this issue is fixed in 3.0.3.

Grisha

On Wed, 16 Apr 2003, Manera, Villiam wrote:

> I'm testing mod-python 3.0.1 with apache 2.0.43 and python 2.2.2
> >
> > I've founded a older problem in file download (from python 2.1 to 2.2)
> >
> > the workaround is still the same:
> >
> > in publisher.py:
> >
> >  class File:
> >      """ Like a file, but also has headers and filename
> >      """
> >      def __init__(self, field):
> >          # steal all the file-like methods
> >          for m in dir(field.file):
> > 		 self.__dict__[m] = getattr(field.file, m)
> >
> >          self.headers = field.headers
> >          self.filename = field.filename
> > ======================workaround
> > ==============================================
> >  class File:
> >      """ Like a file, but also has headers and filename
> >      """
> >      def __init__(self, field):
> >          # steal all the file-like methods
> >          #for m in dir(field.file):    #dont' work
> >          for m in self.sim_methods(field.file):
> >              self.__dict__[m] = getattr(field.file, m)
> >
> >          self.headers = field.headers
> >          self.filename = field.filename
> >
> > 	#new--------
> >      def sim_methods(self,obj):
> >          from types import BuiltinMethodType
> >          return filter(lambda s, t=obj:
> >             type(getattr(t, s)) == BuiltinMethodType, dir(obj))
> >
> >
> > I hope it will be put in place
> >
> > regards
> >
> > Villiam Manera
> > _______________________________________________
> > Mod_python mailing list
> > Mod_python@modpython.org
> > http://www.modpython.org/mailman/listinfo/mod_python
> >
>
>
>
> -----Messaggio originale-----
> Da: Julio Mendoza [mailto:jm@eemsystems.cjb.net]
> Inviato: luned? 14 aprile 2003 15.55
> A: mod_python@modpython.org
> Oggetto: [mod_python] upload binary file
>
>
> Is posible to upload a binary file using mod_python?
>
> Tank you,
>
> JM
>
>
>
> Mod_python error: "PythonHandler mod_python.publisher"
>
> Traceback (most recent call last):
>
>   File "/usr/lib/python2.2/site-packages/mod_python/apache.py", line 193, in
> Dispatch
>     result = object(req)
>
>   File "/usr/lib/python2.2/site-packages/mod_python/publisher.py", line 104,
> in handler
>     val = File(field)
>
>   File "/usr/lib/python2.2/site-packages/mod_python/publisher.py", line 308,
> in __init__
>     for m in field.file.__methods__:
>
> AttributeError: 'file' object has no attribute '__methods__'
> --
> Julio Mendoza <jm@eemsystems.cjb.net>
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From robert at leftwich.info  Thu Apr 17 08:54:50 2003
From: robert at leftwich.info (Robert Leftwich)
Date: Fri Jan  9 22:03:49 2004
Subject: [mod_python] Setting content location
Message-ID: <5.2.0.9.0.20030417083751.01947db0@192.168.0.1>

I'm a newbie playing with mod_python (which I think is great, so far at 
least :-)) and I need to set a header to be returned to the client after 
processing an http post request. In my case I want to set the 
Content-Location header to a newly created URL  (fyi I'm attempting to 
implement a REST-based web service) and I have the following code in the 
handler :

def handler(req):
     if req.method == 'POST':
        ...
         req.headers_out["Content-Location"] = "/foo/bar"
         return apache.HTTP_CREATED

But I don't see the Content-Location header being set in my client. What am 
I missing?

Robert



From grisha at modpython.org  Wed Apr 16 21:33:56 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 22:03:49 2004
Subject: [mod_python] Setting content location
In-Reply-To: <5.2.0.9.0.20030417083751.01947db0@192.168.0.1>
Message-ID: <20030416213117.W97157-100000@eden.ispol.com>

First, make sure that you're setting headers prior to the first byte of
output written, because otherwise the headers have gone out already and
setting them is meaningless.

If that doesn't help it, please provide more info about your environment.
Note that mod_python 3.0.1 (and all prior versions) had a bug that would
not send headers correctly if you were using a DirectoryIndex directive
pointing to a mod_python handled location.

Grisha

On Thu, 17 Apr 2003, Robert Leftwich wrote:

> I'm a newbie playing with mod_python (which I think is great, so far at
> least :-)) and I need to set a header to be returned to the client after
> processing an http post request. In my case I want to set the
> Content-Location header to a newly created URL  (fyi I'm attempting to
> implement a REST-based web service) and I have the following code in the
> handler :
>
> def handler(req):
>      if req.method == 'POST':
>         ...
>          req.headers_out["Content-Location"] = "/foo/bar"
>          return apache.HTTP_CREATED
>
> But I don't see the Content-Location header being set in my client. What am
> I missing?
>
> Robert
>
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From robert at leftwich.info  Thu Apr 17 12:02:10 2003
From: robert at leftwich.info (Robert Leftwich)
Date: Fri Jan  9 22:03:49 2004
Subject: [mod_python] Setting content location
In-Reply-To: <20030416213117.W97157-100000@eden.ispol.com>
References: <5.2.0.9.0.20030417083751.01947db0@192.168.0.1>
Message-ID: <5.2.0.9.0.20030417115525.01969a98@192.168.0.1>

At 11:33 AM 17/04/2003, Gregory (Grisha) Trubetskoy wrote:

>First, make sure that you're setting headers prior to the first byte of
>output written, because otherwise the headers have gone out already and
>setting them is meaningless.

The only other request related thing I do in the code is a req.read().


>If that doesn't help it, please provide more info about your environment.
>Note that mod_python 3.0.1 (and all prior versions) had a bug that would
>not send headers correctly if you were using a DirectoryIndex directive
>pointing to a mod_python handled location.

I'm using Apache 2.0.45, mod_python 3.0.3 and python 2.2 2 on W2000 sp2 
with the following in my httpd.conf file

<Directory "E:/Program Files/Apache Group/Apache2/htdocs/test">
   AddHandler python-program .py
   PythonHandler mptest
   PythonDebug On
</Directory>

Robert



From robert at leftwich.info  Thu Apr 17 12:04:31 2003
From: robert at leftwich.info (Robert Leftwich)
Date: Fri Jan  9 22:03:49 2004
Subject: [mod_python] Stopping additional error content
Message-ID: <5.2.0.9.0.20030417114113.01925a78@192.168.0.1>

Is it possible to stop mod_python appending html error information when a 
4xx error code is returned from a handler? For example I want to return 
some simple text  from my handler containing the application error message, 
but mod_python adds a bunch of html that I do not want to be returned, i.e.

         if [some problem]:
             req.content_type = "text/plain"
             req.write("Cannot do this because of some problem")
             return apache.HTTP_FORBIDDEN

The client s/w ends up seeing the above message plus a bunch of html 
including a <title>200 OK</title>!

Robert

PS I'm wondering if my other problem (Content-Location) is related to this 
one, i.e. apache/mod_python is seeing the HTTP_FORBIDDEN or HTTP_CREATED 
and is doing its own (default?) thing and adding/changing the returned result?





From grisha at modpython.org  Wed Apr 16 23:10:57 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 22:03:49 2004
Subject: [mod_python] Stopping additional error content
In-Reply-To: <5.2.0.9.0.20030417114113.01925a78@192.168.0.1>
Message-ID: <20030416230628.M98127-100000@eden.ispol.com>

I think something like this should work (this is off the top of my head,
it's possible I'm missing something):

	req.status = apache.HTTP_FORBIDDEN
	req.write("Cannot do this because of some problem")
	return apache.OK

Grisha

On Thu, 17 Apr 2003, Robert Leftwich wrote:

> Is it possible to stop mod_python appending html error information when a
> 4xx error code is returned from a handler? For example I want to return
> some simple text  from my handler containing the application error message,
> but mod_python adds a bunch of html that I do not want to be returned, i.e.
>
>          if [some problem]:
>              req.content_type = "text/plain"
>              req.write("Cannot do this because of some problem")
>              return apache.HTTP_FORBIDDEN
>
> The client s/w ends up seeing the above message plus a bunch of html
> including a <title>200 OK</title>!
>
> Robert
>
> PS I'm wondering if my other problem (Content-Location) is related to this
> one, i.e. apache/mod_python is seeing the HTTP_FORBIDDEN or HTTP_CREATED
> and is doing its own (default?) thing and adding/changing the returned result?
>
>
>
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From robert at leftwich.info  Thu Apr 17 13:19:54 2003
From: robert at leftwich.info (Robert Leftwich)
Date: Fri Jan  9 22:03:49 2004
Subject: [mod_python] Removing the .py in URL's
Message-ID: <5.2.0.9.0.20030417131727.01915598@192.168.0.1>

Is it possible to run mod_python without requiring an extension at all, 
i.e. instead of  http://www.mysite.com/hello.py can I use 
http://www.mysite.com/hello ?

Robert



From robert at leftwich.info  Thu Apr 17 13:30:24 2003
From: robert at leftwich.info (Robert Leftwich)
Date: Fri Jan  9 22:03:49 2004
Subject: [mod_python] Stopping additional error content
In-Reply-To: <20030416230628.M98127-100000@eden.ispol.com>
References: <5.2.0.9.0.20030417114113.01925a78@192.168.0.1>
Message-ID: <5.2.0.9.0.20030417132517.019de470@192.168.0.1>

At 01:10 PM 17/04/2003, Gregory (Grisha) Trubetskoy wrote:

>I think something like this should work (this is off the top of my head,
>it's possible I'm missing something):
>
>         req.status = apache.HTTP_FORBIDDEN
>         req.write("Cannot do this because of some problem")
>         return apache.OK

Works perfectly, thanks!

Note that it also solves my other problem with the Content-Location, i.e. 
if I do :

def handler(req):
     if req.method == 'POST':
        ...
         req.headers_out["Content-Location"] = "/foo/bar"
         req.status = apache.HTTP_CREATED
         return apache.OK

then the Content-Location is received correctly by the client.

Thanks a lot!

Robert



From grisha at modpython.org  Wed Apr 16 23:48:40 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 22:03:49 2004
Subject: [mod_python] Removing the .py in URL's
In-Reply-To: <5.2.0.9.0.20030417131727.01915598@192.168.0.1>
Message-ID: <20030416234758.Y98673-100000@eden.ispol.com>

You can do this if you use SetHandler rather than AddHandler.

On Thu, 17 Apr 2003, Robert Leftwich wrote:

> Is it possible to run mod_python without requiring an extension at all,
> i.e. instead of  http://www.mysite.com/hello.py can I use
> http://www.mysite.com/hello ?
>
> Robert
>
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From bar at chello.se  Sun Apr 20 17:58:18 2003
From: bar at chello.se (Bar)
Date: Fri Jan  9 22:03:49 2004
Subject: [mod_python] Trouble getting python to run on XP, Apache 2.0.45, Python
 2.3, mod_python 3.0.3
Message-ID: <5.1.0.14.0.20030420172734.00bd7b28@pop.chello.se>

Hello.
I have been trying to get mod_python to run on the configuration above and 
it wont work. I have read in the maillinglist archives that you could try 
to copy msvcr70.dll to your system32 directory and I have done so. Nothing 
happens.

The error msg I get is "Cannot load c:/.../mod_python.so into server: The 
specified module could not be found."

This sounds very much like the msvcr70.dll problem but it doesn't react 
when I copy the file to system32. Is there some hidden (for other people, 
obvious?) step that I have missed? I have also tried to sprinkle my system 
with the .dll file, placing it in different directories.
Regards,
Daniel 


From erica at simpli.biz  Sun Apr 20 13:35:37 2003
From: erica at simpli.biz (Erica Douglass)
Date: Fri Jan  9 22:03:49 2004
Subject: [mod_python] mod_python causing Apache to segfault (Cobalt RaQ550)
Message-ID: <005701c3077c$66f3aad0$ac7ba8c0@corkyserver>

Hello,

I'm trying to install mod_python on a RaQ550. The 550 comes with Python
2.0 and Apache 1.3.20. Unfortunately, Python is compiled with threads
support, which may be causing the problem I am seeing.

I compiled and installed the mod_python libraries and DSO successfully
with -DEAPI. I then made sure that the mod_python module was the first
one loaded in httpd.conf, and I ran Apache. Apache promptly segfaulted.
I have the traceback, which I have pasted in below.

Does anyone know which file is not being found? Here is the traceback:

(gdb) run -X
Starting program: /usr/sbin/httpd -X
(no debugging symbols found)...[New Thread 1024 (LWP 7107)]
chiliasp: module started, version 3.6.0.33

Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread 1024 (LWP 7107)]
0x40113369 in chunk_alloc (ar_ptr=0x401b3aa0, nb=24) at malloc.c:2784
2784    malloc.c: No such file or directory.
        in malloc.c
(gdb) bt
#0  0x40113369 in chunk_alloc (ar_ptr=0x401b3aa0, nb=24) at
malloc.c:2784
#1  0x401131c4 in __libc_malloc (bytes=18) at malloc.c:2717
#2  0x4000a03c in _dl_new_object () at eval.c:88
#3  0x400051bd in _dl_map_object_from_fd () at eval.c:88
#4  0x40006c91 in _dl_map_object () at eval.c:88
#5  0x4000b818 in openaux () at eval.c:88
#6  0x4000bd00 in _dl_catch_error () at eval.c:88
#7  0x4000adff in _dl_map_object_deps () at eval.c:88
#8  0x4019ca31 in dl_open_worker (a=0xbfffd2d0) at dl-open.c:261
#9  0x4000bd00 in _dl_catch_error () at eval.c:88
#10 0x4019cc5d in _dl_open (file=0x81628bc
"/etc/httpd/modules/mod_python.so", mode=-1073753400, caller=0x80a54f6)
    at dl-open.c:362
#11 0x40025630 in dlopen_doit (a=0xbfffd440) at dlopen.c:39
#12 0x4000bd00 in _dl_catch_error () at eval.c:88
#13 0x40025a06 in _dlerror_run (operate=0x400255fc <dlopen_doit>,
args=0xbfffd440) at dlerror.c:130
#14 0x400255eb in __dlopen_check (file=0x81628bc
"/etc/httpd/modules/mod_python.so", mode=258) at dlopen.c:53
#15 0x080a54f6 in ap_os_dso_load () at eval.c:88
#16 0x000aff0d in ?? () at eval.c:88
#17 0x000aff0d in ?? () at eval.c:88
#18 0x000aff0d in ?? () at eval.c:88
#19 0x000aff0d in ?? () at eval.c:88
#20 0x000aff0d in ?? () at eval.c:88
#21 0x000aff0d in ?? () at eval.c:88
#22 0x000aff0d in ?? () at eval.c:88
#23 0x000aff0d in ?? () at eval.c:88
#24 0x000aff0d in ?? () at eval.c:88

Thanks in advance.

Erica Douglass
Lead Web Developer
Simpli, Inc.


From vjb at vuit.com  Mon Apr 21 07:56:38 2003
From: vjb at vuit.com (Vince Buonassisi)
Date: Fri Jan  9 22:03:49 2004
Subject: [mod_python] error in running a script in apache browser
Message-ID: <741D9C47-7409-11D7-83F2-000A95682CD2@vuit.com>

hi,

i am getting the following error when a python test script is executed  
in the apache web server:

Mod_python error: "PythonHandler reqhandler"

Traceback (most recent call last):

   File "/usr/lib/python2.2/site-packages/mod_python/apache.py", line  
181, in Dispatch
     module = import_module(module_name, _req)

   File "/usr/lib/python2.2/site-packages/mod_python/apache.py", line  
335, in import_module
     module = imp.load_module(mname, f, p, d)

   File "/usr/local/apache/htdocs/reqhandler.py", line 9, in ?
     from xml.dom.ext.reader.Sax2 import FromXmlStream, FromXml

   File  
"/usr/lib/python2.2/site-packages/_xmlplus/dom/ext/reader/__init__.py",  
line 21, in ?
     encoder = codecs.lookup("utf-8")[0] # encode,decode,reader,writer

   File  
"/usr/src/build/143041-i386/install/usr/lib/python2.2/encodings/ 
__init__.py", line 51, in search_function

RuntimeError: cannot unmarshal code objects in restricted execution mode

the script i am running is very simple.  i just send a text message to  
the browser.  i am using the following versions of software:

apache 1.3.26
python 2.2.1
mod python 2.7.8
PyXML 0.7.1
linux redhat 8

any help would be appreciated.

thanks

vince
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: text/enriched
Size: 1254 bytes
Desc: not available
Url : http://mailman.modpython.org/pipermail/mod_python/attachments/20030421/3ccea826/attachment-0003.bin
From grisha at modpython.org  Wed Apr 23 09:53:25 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 22:03:49 2004
Subject: [mod_python] another test
In-Reply-To: <741D9C47-7409-11D7-83F2-000A95682CD2@vuit.com>
Message-ID: <20030423095248.Q14226-100000@eden.ispol.com>


please ignore this message also - working on getting the list to work
again....

From vjb at vuit.com  Wed Apr 23 20:25:32 2003
From: vjb at vuit.com (Vincent J. Buonassisi)
Date: Fri Jan  9 22:03:49 2004
Subject: [mod_python] problems finding module 
Message-ID: <3EA7592C.8000704@vuit.com>

hi,

i am having problems in getting mod_python to run the following simple 
script in apache:

	import sys

	from WVWService.util import XMLUtil

	from mod_python import apache

	def handler(req):

    	 path = str(sys.path)
    	 print path
    	 req.content_type = "text/plain"
    	 req.send_http_header()
     	req.write(path)

     	return apache.OK

	if __name__ == "__main__":
   	  print sys.path

with the followig entry in apache's httpd.conf file:

	<Directory /var/www/html>
   	    AddHandler python-program .py
    	    PythonHandler myscript
	    PythonPath
		"sys.path+['/home/vjb/workspace/wvwBase3/src/wvw']"
    	    PythonDebug On
	</Directory>


i get the following error in my web browser:


Mod_python error: "PythonHandler myscript"

Traceback (most recent call last):

   File "/usr/local/lib/python2.2/site-packages/mod_python/apache.py", 
line 320, in HandlerDispatch
     module = import_module(module_name, config)

   File "/usr/local/lib/python2.2/site-packages/mod_python/apache.py", 
line 496, in import_module
     f, p, d = imp.find_module(parts[i], path)

ImportError: No module named myscript


if i comment the PythonPath line the i get the error:

ImportError: No module named WVWService.util


can someone please tell me what i am doing wrong?

thanks,

vince

From vjb at vuit.com  Wed Apr 23 20:59:17 2003
From: vjb at vuit.com (Vince Buonassisi)
Date: Fri Jan  9 22:03:49 2004
Subject: [mod_python] problems finding module 
In-Reply-To: <3EA7592C.8000704@vuit.com>
Message-ID: <1F1049D3-7609-11D7-9E94-000A95682CD2@vuit.com>

sorry, i forgot to add my environment:

python 2.2.2
apache 2.0.40
modpython 3.0.3

thanks,


On Mercoled?, apr 23, 2003, at 20:25 US/Pacific, Vincent J. Buonassisi 
wrote:

> hi,
>
> i am having problems in getting mod_python to run the following simple 
> script in apache:
>
> 	import sys
>
> 	from WVWService.util import XMLUtil
>
> 	from mod_python import apache
>
> 	def handler(req):
>
>    	 path = str(sys.path)
>    	 print path
>    	 req.content_type = "text/plain"
>    	 req.send_http_header()
>     	req.write(path)
>
>     	return apache.OK
>
> 	if __name__ == "__main__":
>   	  print sys.path
>
> with the followig entry in apache's httpd.conf file:
>
> 	<Directory /var/www/html>
>   	    AddHandler python-program .py
>    	    PythonHandler myscript
> 	    PythonPath
> 		"sys.path+['/home/vjb/workspace/wvwBase3/src/wvw']"
>    	    PythonDebug On
> 	</Directory>
>
>
> i get the following error in my web browser:
>
>
> Mod_python error: "PythonHandler myscript"
>
> Traceback (most recent call last):
>
>   File "/usr/local/lib/python2.2/site-packages/mod_python/apache.py", 
> line 320, in HandlerDispatch
>     module = import_module(module_name, config)
>
>   File "/usr/local/lib/python2.2/site-packages/mod_python/apache.py", 
> line 496, in import_module
>     f, p, d = imp.find_module(parts[i], path)
>
> ImportError: No module named myscript
>
>
> if i comment the PythonPath line the i get the error:
>
> ImportError: No module named WVWService.util
>
>
> can someone please tell me what i am doing wrong?
>
> thanks,
>
> vince
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From timbomb at timbomb.net  Fri Apr 25 16:09:24 2003
From: timbomb at timbomb.net (Tim Mansfield)
Date: Fri Jan  9 22:03:49 2004
Subject: [mod_python] Trouble compiling mod_python-3.0.3  on Red Hat with
	Apache httpd-2.0.39 + Python-2.2.1
Message-ID: <5.1.0.14.0.20030425160211.0920acf0@timbomb.net>


... which I believe are the correct versions. I get this output when apxs 
tries to do its thing (ie step one in the make).

Any ideas?

Tim
----------------

$ make
make[1]: Entering directory `/home/timbomb/mod_python-3.0.3/src'

Compiling for DSO.

/opt/local/bin/apxs -I/home/timbomb/mod_python-3.0.3/src/include 
-I/opt/local/stow/httpd-2.0.39/include 
-I/opt/local/bin/../stow/Python-2.2.1/include/python2.2 -c mod_python.c 
_apachemodule.c requestobject.c tableobject.c util.c serverobject.c 
connobject.c filterobject.c hlist.c hlistobject.c 
-L/opt/local/bin/../stow/Python-2.2.1/lib/python2.2/config  -Xlinker 
-export-dynamic      -lm  -lpython2.2 -ldl -lpthread -lutil -lm
/opt/local/stow/httpd-2.0.39/build/libtool --silent --mode=compile gcc 
-prefer-pic  -DAP_HAVE_DESIGNATED_INITIALIZER -DLINUX=2 -D_REENTRANT 
-D_XOPEN_SOURCE=500 -D_BSD_SOURCE -D_SVID_SOURCE -D_GNU_SOURCE -g -O2 
-pthread -I/opt/local/stow/httpd-2.0.39/include 
-I/home/timbomb/mod_python-3.0.3/src/include 
-I/opt/local/stow/httpd-2.0.39/include 
-I/opt/local/bin/../stow/Python-2.2.1/include/python2.2  -c -o 
mod_python.lo mod_python.c && touch mod_python.slo
mod_python.c: In function `directive_PythonInputFilter':
mod_python.c:1507: incompatible type for argument 3 of 
`ap_register_input_filter'
mod_python.c:1507: too many arguments to function `ap_register_input_filter'
mod_python.c: In function `directive_PythonOutputFilter':
mod_python.c:1532: incompatible type for argument 3 of 
`ap_register_output_filter'
mod_python.c:1532: too many arguments to function `ap_register_output_filter'
apxs:Error: Command failed with rc=65536
.
make[1]: *** [mod_python.so] Error 1
make[1]: Leaving directory `/home/timbomb/mod_python-3.0.3/src'
make: *** [do_dso] Error 2

From big.stick at bol.com.br  Fri Apr 25 10:26:31 2003
From: big.stick at bol.com.br (Big Stick)
Date: Fri Jan  9 22:03:49 2004
Subject: [mod_python] Trouble compiling mod_python-3.0.3  on Red Hat with
	Apache httpd-2.0.39 + Python-2.2.1
In-Reply-To: <5.1.0.14.0.20030425160211.0920acf0@timbomb.net>
References: <5.1.0.14.0.20030425160211.0920acf0@timbomb.net>
Message-ID: <129475794.20030425102631@bol.com.br>

Em 25/4/2003 ?s 03:09, Tim escreveu:


> ... which I believe are the correct versions. I get this output when apxs 
> tries to do its thing (ie step one in the make).

> Any ideas?

Make sure that httpd-devel is installed, since apxs is provided by
httpd-devel, and RH doesn?t seem to install it by default.

-- stick
From brian at linus.smenet.org  Fri Apr 25 08:14:38 2003
From: brian at linus.smenet.org (Brian Allbee)
Date: Fri Jan  9 22:03:49 2004
Subject: [mod_python] mod_python newbie looking for information/references
Message-ID: <1051280078.1141.8.camel@localhost.localdomain>

Howdy, all!

I'm a newbie to mod_python (looking forward to working with it) who's
looking for suggestions/example code/documentation/references to help me
get started. FAQ was down last I looked (and site seems to be offline,
or at least not accessible from this location).

Any suggestions/direction would be appreciated!

From brian at linus.smenet.org  Fri Apr 25 12:05:24 2003
From: brian at linus.smenet.org (Brian Allbee)
Date: Fri Jan  9 22:03:49 2004
Subject: [mod_python] 
	RE: mod_python newbie looking for information/refere nces
In-Reply-To: <D31B04F24EDE7644BB169BB4F080778A06C239EE@s30342g004005>
References: <D31B04F24EDE7644BB169BB4F080778A06C239EE@s30342g004005>
Message-ID: <1051293924.1141.20.camel@localhost.localdomain>

Thanks, Hans!

Am I understanding things correctly then (after reading through the
tutorial, especially section 3.4) that if I have the configuration for
Apache set to something like:

AddHandler python-program .py
PythonHandler mod_python.publisher

that it is possible to set up pseudo-pages by generating different
module-files for each such "page?" For example, an "index.py" and
"form.py" page can have distinctive outputs from each other, but are
still essentially called as if they were "real" pages
(www.site.com/index and www.site.com/form, respectively)? If so, is the
file-extension necessary, or would the example URLs still call index.py
and form.py respectively? And I'm assuming that under those
circumstances each would need a default handler() function (perhaps in
addition to any other functions that might be called by something like
www.site.com/form/submission) if they were expected to be able to do
anything without any direct query-string or form-field input.

I presume that standard python module-import syntax is supported
(allowing for the development of common code to be shared between
several modules, I hope) as well?

Hoping I'm understanding things correctly - the more I look at
mod_python's capabilities, the more I'm liking what I see...

Brian

On Fri, 2003-04-25 at 08:46, Yandle, Hans wrote:
> Had similar problems. I use Apache 1.3.X with Python 2.2.X. I have
> included all the files for modpython 2.7.8. I do not have locally
> cached the modpython 3.X associated files for Apache 2.X.
> 
> Welcome to real power,
> 
> Hans


From grisha at modpython.org  Fri Apr 25 16:06:45 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 22:03:49 2004
Subject: [mod_python] Trouble compiling mod_python-3.0.3  on Red Hat with
 Apache httpd-2.0.39 + Python-2.2.1
In-Reply-To: <129475794.20030425102631@bol.com.br>
Message-ID: <20030425160545.V70432-100000@eden.ispol.com>


Also, I'm not even sure 2.0.39 can compile against mp 3.0.3, I highly
recommend you switch to apache 2.0.45 and Python 2.2.2.

On Fri, 25 Apr 2003, Big Stick wrote:

> Em 25/4/2003 ?s 03:09, Tim escreveu:
>
>
> > ... which I believe are the correct versions. I get this output when apxs
> > tries to do its thing (ie step one in the make).
>
> > Any ideas?
>
> Make sure that httpd-devel is installed, since apxs is provided by
> httpd-devel, and RH doesn?t seem to install it by default.
>
> -- stick
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>

From vjb at vuit.com  Mon Apr 28 17:36:43 2003
From: vjb at vuit.com (Vince Buonassisi)
Date: Fri Jan  9 22:03:49 2004
Subject: [mod_python] mod_python import error
Message-ID: <A68963E0-79DA-11D7-B1FA-000A95682CD2@vuit.com>

hi,

i am getting the following error from mod_python when my python script 
imports the module test:

Mod_python error: "PythonHandler myscript"

Traceback (most recent call last):

   File "/usr/local/lib/python2.2/site-packages/mod_python/apache.py", 
line 320, in HandlerDispatch
     module = import_module(module_name, config)

   File "/usr/local/lib/python2.2/site-packages/mod_python/apache.py", 
line 499, in import_module
     module = imp.load_module(mname, f, p, d)

   File "/usr/local/apache/htdocs/myscript.py", line 4, in ?
     from WVWService.test import HTTPClient

ImportError: No module named test


just before this import statement there is another import statement 
that imports a
module from the same area and it seems to work just fine:

from WVWService.util import XMLUtil
from WVWService.test import HTTPClient


i have the following environment environment:

   mod_pythonq	3.0.3
   python	2.2.2
   apache	2.0.45
   os		redhat 8.0

does anyone have any ideas on how i can solve this problem?

thanks,

vince

From dhoutz at advancedinterfaces.com  Wed Apr 30 14:33:40 2003
From: dhoutz at advancedinterfaces.com (Dan Houtz)
Date: Fri Jan  9 22:03:49 2004
Subject: [mod_python] help with a few basics
Message-ID: <CJEFIGIHCACFLNNGMEEIGEDACAAA.dhoutz@advancedinterfaces.com>

Greetings,

I'm just starting to get into python and mod_python. I have installed
mod_python on Windows XP with Apache 2.0.45 to start getting my feet wet.
After some intial troubles, I believe I finally have everything working
correctly. I have managed to follow the test section and "hello world prints
properly. MY next question is, am I able to accomplish the same thing useing
print "Hello World" instead of req.write("Hello World"). I've seen many
coding examples using print, but it does not work correctly when I attempt
to use it.

For instance, this code:
	def handler(req):
	print "Content-Type: text/html\n\n"
   	print "Hello World"

Produces:
	Mod_python error: "PythonHandler mptest"

	Traceback (most recent call last):

	  File "C:\Python22\Lib\site-packages\mod_python\apache.py", line 334, in
HandlerDispatch
	    assert (type(result) == type(int())), \

	AssertionError: Handler 'mptest' returned invalid return code.


So, I tried:
	def handler(req):
	print "Content-Type: text/html\n\n"
   	print "Hello World"
	return apacke.OK

and it produced a blank page


Your help is appreciated.

Thanks,
Dan Houtz

