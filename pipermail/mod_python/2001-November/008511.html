<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] preloading modules
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20preloading%20modules&In-Reply-To=Pine.GSO.4.05.10111011615360.11470-100000%40timeless.exelixis.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008510.html">
   <LINK REL="Next"  HREF="008513.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
<table border=0 width="100%"><tr><td valign="top">
   <H1>[mod_python] preloading modules</H1>
    <B>Gregory (Grisha) Trubetskoy</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20preloading%20modules&In-Reply-To=Pine.GSO.4.05.10111011615360.11470-100000%40timeless.exelixis.com"
       TITLE="[mod_python] preloading modules">grisha at modpython.org
       </A><BR>
    <I>Thu Nov  1 21:07:29 EST 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="008510.html">[mod_python] preloading modules
</A></li>
        <LI>Next message: <A HREF="008513.html">[mod_python] Sessions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8511">[ date ]</a>
              <a href="thread.html#8511">[ thread ]</a>
              <a href="subject.html#8511">[ subject ]</a>
              <a href="author.html#8511">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>You might try forcing everything to run under the main insterpreter by
sticking

PythonInterpreter main_interpreter

somehwere in httpd.conf. This way PythonImport (which only runs under main
insterpreter) and everything else will run in one interpreter and you
should see the connections (may be).

PythonImport is a flaky directive for a couple of reasons. First, there is
the subinterpreter problem. Second, the apache startup is a bit more
complicated than one may think, at the time when PythonImport is executed
(which is at child initialization time), the config has not yet been
parsed (or rather it has, but the child has no access to it yet).

The bottom line is your mileage may vary with PythonImport.

Grisha

On Thu, 1 Nov 2001, Brian Hawthorne wrote:

&gt;<i> hello,
</I>&gt;<i>
</I>&gt;<i> first i tried the PythonImport directive to preload modules setting up a
</I>&gt;<i> db connection pool.  but the connections were dead when i tried to use
</I>&gt;<i> them.
</I>&gt;<i>
</I>&gt;<i> second, i tried modifying the sitecustomize module which gets imported
</I>&gt;<i> from the site module at interpreter startup (supposedly).  this gave me
</I>&gt;<i> good connections, but it doesn't happen until the first page gets loaded.
</I>&gt;<i>
</I>&gt;<i> i'd like to stuff some pretty time-consuming setup tasks into this phase
</I>&gt;<i> of startup... it should already be done when the first page is requested.
</I>&gt;<i>
</I>&gt;<i> any ideas?
</I>&gt;<i>
</I>&gt;<i> brian hawthorne
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://www.modpython.org/mailman/listinfo/mod_python">http://www.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I>

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008510.html">[mod_python] preloading modules
</A></li>
	<LI>Next message: <A HREF="008513.html">[mod_python] Sessions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8511">[ date ]</a>
              <a href="thread.html#8511">[ thread ]</a>
              <a href="subject.html#8511">[ subject ]</a>
              <a href="author.html#8511">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
