From christie at knewco.com  Thu Oct  1 09:36:45 2009
From: christie at knewco.com (Reuben A Christie)
Date: Thu Oct  1 09:36:54 2009
Subject: [mod_python] cookie not set in the response for IE
Message-ID: <4AC4B06D.7020403@knewco.com>

I am trying to set the cookie in the header , that I read every 
subsequent requests.  and If i dont find it, I create new cookie
it works fine for FF but for IE and Safari, somehow the cookie is not 
being set. Every single request I check, it does not have the cookie and 
I end up creating cookie for everysingle request as if it was a brand 
new session. any help please

this is how i do it,

c = Cookie.Cookie('session_id', sessionID)
c.expires = time.time()+60 * self._session_expiration_time
Cookie.add_cookie(REQUEST, c)



-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3316 bytes
Desc: S/MIME Cryptographic Signature
Url : http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20091001/b56f97d0/smime.bin
From edgardalvescosta at gmail.com  Thu Oct  1 10:02:19 2009
From: edgardalvescosta at gmail.com (edgard)
Date: Thu Oct  1 10:02:24 2009
Subject: [mod_python] Show images
Message-ID: <4AC4B66B.2010406@gmail.com>

Group

I?m return to word on web sites with mod_python before a very 
interesting experience working with zope/plone.
In this moment I write a script test to verify if all the configurations 
is ok and something was wrong with one image. It doesn?t show in the 
browser. If we ask to show it in other pag, the apache show messege 
this: "The requested URL /pywww/imgs/top.jpg was not found on this 
server.". If we look for the font code,  the code  is correct.

The script code:

# !/python/python

def index_html():
        return """\
        <html>
        <body>
        <br />
        <center><b>Teste bem Sucedido<b/></center>
        <center><b><u>Legal Mesmo...</u></center>
        <center><img src="imgs/top.jpg" alt="teste"></center>
        </body></html>"""

What is wrong here?

-- 
Edgard Costa

web: www.pewebhosting.com.br

email: edgardcosta@pewebhosting.com.br

-------------- next part --------------
A non-text attachment was scrubbed...
Name: edgardalvescosta.vcf
Type: text/x-vcard
Size: 272 bytes
Desc: not available
Url : http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20091001/d71c4aae/edgardalvescosta.vcf
From dave at davebritton.com  Thu Oct  1 11:37:24 2009
From: dave at davebritton.com (Dave Britton)
Date: Thu Oct  1 11:35:39 2009
Subject: [mod_python] migrating from mod_python to mod_wsgi - URL changes
References: <8496caf30909290608o46c02969rc3655d8164705889@mail.gmail.com><3621DD00-E40D-49F5-8DF7-FD75E7377DA1@nznl.com><8496caf30909290629y14abf81bs53bb9e6da13b5c82@mail.gmail.com><88e286470909291836p64e2e6fbrf8e7b55f9ebb0a70@mail.gmail.com>
	<8496caf30909300539l785cf65gf409d6e8cac939f4@mail.gmail.com>
Message-ID: <018c01ca42ad$132b7130$6400a8c0@yoda>

  ----- Original Message ----- 
  From: Jeff Dyke 
  To: Graham Dumpleton 
  Cc: mod_python@modpython.org 
  Sent: Wednesday, September 30, 2009 8:39 AM
  Subject: Re: [mod_python] migrating from mod_python to mod_wsgi - URL changes





  On Tue, Sep 29, 2009 at 9:36 PM, Graham Dumpleton <graham.dumpleton@gmail.com> wrote:



    For simplicity, I would suggest having a look at 'bobo'.

    http://blog.dscpl.com.au/2009/08/using-bobo-on-top-of-modwsgi.html
    http://bobo.digicool.com/

    Graham



  Thanks Graham, good info...as usual.  

  Dave, I'll definitely report back, a first look at bobo puts it in as a front runner.   

I never heard of bobo before! I'm one of the people Graham describes as liking "that simplicity that attracted many people to the publisher handler" so I'm headed to bobo for a look as well. I wrote a small wrapper object for my earlier cherrypy efforts that tries to emulate the Publisher request object, so cherrypy could pass the cgi content into my existing code and  I could leave the old code unchanged.  I use the cgi name-value variables a lot, so the easier this is, the better.
-Dave
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20091001/945ccd8c/attachment.html
From ejazshah85 at gmail.com  Mon Oct  5 21:08:17 2009
From: ejazshah85 at gmail.com (ejaz shah)
Date: Mon Oct  5 21:08:25 2009
Subject: [mod_python] How to run python scripts on apache?
Message-ID: <2fa43880910051808v28da7af6vb019397093ec6436@mail.gmail.com>

Hi All,

How can we enbale all python script to be executed on apache server. I know
how to add handler to the config file but it works only for a single
file.Changes made in the apache config file is:
   <Directory "C:/Program Files/Apache Software
Foundation/Apache2.2/htdocs/test/Upload/uploaddocs">
      AddHandler mod_python .py
      PythonHandler mptest
      PythonDebug On
</Directory>

where mp.test file is as under:
  from mod_python import apache

def handler (req):
        req.content_type = 'text/plain'
        req.write("Hello World!!!")
        return apache.OK


So any python file when executed on server side is processed via mptest
which no matter what that .py script want it to do it always prints out
Hello World!!..

I want to generalize it. Any .py shall be executed on apache.
Kindly let me know if any one of you know about this.

Regards,

Ejaz Shah
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20091005/b06ef9a6/attachment.html
From graham.dumpleton at gmail.com  Mon Oct  5 21:17:03 2009
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Mon Oct  5 21:17:12 2009
Subject: [mod_python] How to run python scripts on apache?
In-Reply-To: <2fa43880910051808v28da7af6vb019397093ec6436@mail.gmail.com>
References: <2fa43880910051808v28da7af6vb019397093ec6436@mail.gmail.com>
Message-ID: <88e286470910051817o5c227ca6ib50c20267eac8473@mail.gmail.com>

2009/10/6 ejaz shah <ejazshah85@gmail.com>:
> Hi All,
>
> How can we enbale all python script to be executed on apache server. I know
> how to add handler to the config file but it works only for a single
> file.Changes made in the apache config file is:
> ? <Directory "C:/Program Files/Apache Software
> Foundation/Apache2.2/htdocs/test/Upload/uploaddocs">
> ????? AddHandler mod_python .py
> ????? PythonHandler mptest
> ????? PythonDebug On
> </Directory>
>
> where mp.test file is as under:
> ? from mod_python import apache
>
> def handler (req):
> ? ? ? ? req.content_type = 'text/plain'
> ? ? ? ? req.write("Hello World!!!")
> ? ? ? ? return apache.OK
>
>
> So any python file when executed on server side is processed via mptest
> which no matter what that .py script want it to do it always prints out
> Hello World!!..
>
> I want to generalize it. Any .py shall be executed on apache.
> Kindly let me know if any one of you know about this.

Consider perhaps using mod_wsgi, it acts more like CGI in the sense of
just being able to dump separate .wsgi files  containing Python code
into directories with them being able to directly access them via URL
with no special magic.

See:

  http://code.google.com/p/modwsgi/wiki/ConfigurationGuidelines

Graham

From ejazshah85 at gmail.com  Tue Oct  6 15:32:27 2009
From: ejazshah85 at gmail.com (ejaz shah)
Date: Tue Oct  6 15:32:37 2009
Subject: [mod_python] How to run python scripts on apache?
In-Reply-To: <b71082d80910060632p424218edg1bf4809a9d9cffbe@mail.gmail.com>
References: <2fa43880910051808v28da7af6vb019397093ec6436@mail.gmail.com>
	<b71082d80910060632p424218edg1bf4809a9d9cffbe@mail.gmail.com>
Message-ID: <2fa43880910061232q26397b3cm2122161c44a1eae7@mail.gmail.com>

Hi All,

As per your advice I have integrated mod_wsgi by following instructions at
the following site and it is working fine.
http://pradyumnajoshi.wordpress.com/2009/06/09/setting-up-mod_wsgi-for-apache-and-django-on-windows/

Now what I want to know is that if I want to execute other .py extension
files what should I do? Should I copy paste all my .py files in wsgi_app
directory as mentioned in the link?

I tried doing that but it dint work.
I have a simple .py file named as message.py the content of which is as
under:

# file: message.py
 print "When that Aprill with his shoures soote";
 print "The droghte of March ath perced to the roote,";
 print "And bathed every veyne in swich licour";
 print "Of which vertu engendered is the flour...";

Now in my wsgi_app directory there are two files. So when I run
localhost:8085/wsgi it gives error. What I want is that on running it
through my server it should list down all .py files and on clicking any of
them should result in execution of .py file. One more thing I need to know
is how should a python file be written to be executed through server? How to
pass request and response paramaters? For eg how can I define my messgae.py
file to be executed? or it is correct the way it is mentioned?

Kindly help me.

Regards,

Ejaz Shah

On Tue, Oct 6, 2009 at 6:32 AM, Bart <scarfboy@gmail.com> wrote:

> On Tue, Oct 6, 2009 at 3:08 AM, ejaz shah <ejazshah85@gmail.com> wrote:
> > Hi All,
> >
> > How can we enbale all python script to be executed on apache server. I
> know
> > how to add handler to the config file but it works only for a single
> > file.Changes made in the apache config file is:
> >   <Directory "C:/Program Files/Apache Software
> > Foundation/Apache2.2/htdocs/test/Upload/uploaddocs">
> >       AddHandler mod_python .py
> >       PythonHandler mptest
> >       PythonDebug On
> > </Directory>
> >
> > where mp.test file is as under:
> >   from mod_python import apache
> >
> > def handler (req):
> >         req.content_type = 'text/plain'
> >         req.write("Hello World!!!")
> >         return apache.OK
> >
> >
> > So any python file when executed on server side is processed via mptest
> > which no matter what that .py script want it to do it always prints out
> > Hello World!!..
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20091006/0d940509/attachment.html
From graham.dumpleton at gmail.com  Tue Oct  6 18:33:59 2009
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Tue Oct  6 18:34:17 2009
Subject: [mod_python] How to run python scripts on apache?
In-Reply-To: <2fa43880910061232q26397b3cm2122161c44a1eae7@mail.gmail.com>
References: <2fa43880910051808v28da7af6vb019397093ec6436@mail.gmail.com>
	<b71082d80910060632p424218edg1bf4809a9d9cffbe@mail.gmail.com>
	<2fa43880910061232q26397b3cm2122161c44a1eae7@mail.gmail.com>
Message-ID: <88e286470910061533n2ceea567mdf2d0b9df8978051@mail.gmail.com>

2009/10/7 ejaz shah <ejazshah85@gmail.com>:
> Hi All,
>
> As per your advice I have integrated mod_wsgi by following instructions at
> the following site and it is working fine.
> http://pradyumnajoshi.wordpress.com/2009/06/09/setting-up-mod_wsgi-for-apache-and-django-on-windows/

I did not recommend you follow those instructions. Not sure why you
didn't use the official mod_wsgi documentation.

See my followup to your post on mod_wsgi list.

Graham

> Now what I want to know is that if I want to execute other .py extension
> files what should I do? Should I copy paste all my .py files in wsgi_app
> directory as mentioned in the link?
>
> I tried doing that but it dint work.
> I have a simple .py file named as message.py the content of which is as
> under:
>
> # file: message.py
> ?print "When that Aprill with his shoures soote";
> ?print "The droghte of March ath perced to the roote,";
> ?print "And bathed every veyne in swich licour";
> ?print "Of which vertu engendered is the flour...";
>
> Now in my wsgi_app directory there are two files. So when I run
> localhost:8085/wsgi it gives error. What I want is that on running it
> through my server it should list down?all .py files and on clicking any of
> them should result in execution of .py file.?One more thing I need to know
> is how should a python file be written to be executed through server? How to
> pass request and response paramaters? For eg how can I define my messgae.py
> file to be executed? or it is correct the way it is mentioned?
>
> Kindly help me.
>
> Regards,
>
> Ejaz Shah
>
> On Tue, Oct 6, 2009 at 6:32 AM, Bart <scarfboy@gmail.com> wrote:
>>
>> On Tue, Oct 6, 2009 at 3:08 AM, ejaz shah <ejazshah85@gmail.com> wrote:
>> > Hi All,
>> >
>> > How can we enbale all python script to be executed on apache server. I
>> > know
>> > how to add handler to the config file but it works only for a single
>> > file.Changes made in the apache config file is:
>> > ? <Directory "C:/Program Files/Apache Software
>> > Foundation/Apache2.2/htdocs/test/Upload/uploaddocs">
>> > ????? AddHandler mod_python .py
>> > ????? PythonHandler mptest
>> > ????? PythonDebug On
>> > </Directory>
>> >
>> > where mp.test file is as under:
>> > ? from mod_python import apache
>> >
>> > def handler (req):
>> > ? ? ? ? req.content_type = 'text/plain'
>> > ? ? ? ? req.write("Hello World!!!")
>> > ? ? ? ? return apache.OK
>> >
>> >
>> > So any python file when executed on server side is processed via mptest
>> > which no matter what that .py script want it to do it always prints out
>> > Hello World!!..
>>
>>
>
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>
>

From jeff.dyke at gmail.com  Wed Oct  7 15:15:21 2009
From: jeff.dyke at gmail.com (Jeff Dyke)
Date: Wed Oct  7 15:15:29 2009
Subject: [mod_python] migrating from mod_python to mod_wsgi - URL changes
In-Reply-To: <018c01ca42ad$132b7130$6400a8c0@yoda>
References: <8496caf30909290608o46c02969rc3655d8164705889@mail.gmail.com>
	<3621DD00-E40D-49F5-8DF7-FD75E7377DA1@nznl.com>
	<8496caf30909290629y14abf81bs53bb9e6da13b5c82@mail.gmail.com>
	<88e286470909291836p64e2e6fbrf8e7b55f9ebb0a70@mail.gmail.com>
	<8496caf30909300539l785cf65gf409d6e8cac939f4@mail.gmail.com>
	<018c01ca42ad$132b7130$6400a8c0@yoda>
Message-ID: <8496caf30910071215k63bb7df4p5f53df3d5c11d2b6@mail.gmail.com>

On Thu, Oct 1, 2009 at 11:37 AM, Dave Britton <dave@davebritton.com> wrote:

>  ----- Original Message -----
> *From:* Jeff Dyke <jeff.dyke@gmail.com>
> *To:* Graham Dumpleton <graham.dumpleton@gmail.com>
> *Cc:* mod_python@modpython.org
> *Sent:* Wednesday, September 30, 2009 8:39 AM
> *Subject:* Re: [mod_python] migrating from mod_python to mod_wsgi - URL
> changes
>
>
>
> On Tue, Sep 29, 2009 at 9:36 PM, Graham Dumpleton <
> graham.dumpleton@gmail.com> wrote:
>
>>
>>
>> For simplicity, I would suggest having a look at 'bobo'.
>>
>> http://blog.dscpl.com.au/2009/08/using-bobo-on-top-of-modwsgi.html
>> http://bobo.digicool.com/
>>
>> Graham
>>
>> Thanks Graham, good info...as usual.
>
> Dave, I'll definitely report back, a first look at bobo puts it in as a
> front runner.
>
>  I never heard of bobo before! I'm one of the people Graham describes as
> liking "that simplicity that attracted many people to the publisher
> handler" so I'm headed to bobo for a look as well. I wrote a small wrapper
> object for my earlier cherrypy efforts that tries to emulate the Publisher
> request object, so cherrypy could pass the cgi content into my existing code
> and  I could leave the old code unchanged.  I use the cgi name-value
> variables a lot, so the easier this is, the better.
> -Dave
>
>
The migration is complete, bobo and wsgi are a great pair . As Grant wrote
in the blog post, bobo is simple, does what it claims to do and no more.  It
provides the ability to return simple strings and it'll package it up as a
proper response, or gives you finer control by offering a response object
(webob.Response(), which i use).  Its also great for implementing a RESTful
design with ease.  I do have two small issues, both are configuration
related, have low impact and easy workarounds.  They are no mod_python
releated, which is why i'm being vauge here.

The speed increase is noticeable, and out of the box if my code can run in
mpm-worker then wsgi just happily handles many parralel requests. My
mod_python was under mpm-prefork and i honestly never tried hard to get it
working under mpm-worker, so that statement is not a slam, but mod_wsgi
provides nice intuitive controls and data about how it is running.

Switching to wsgi and bobo made my own interface layer much simpler and
ended up removing many lines of python code (which could have been my fault
to begin with).

Grant: Great advice, great module.  Thanks again.


_______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20091007/268bf9ec/attachment.html
From fla at tinyerp.com  Mon Oct 12 10:31:42 2009
From: fla at tinyerp.com (Frederic Lambotte)
Date: Mon Oct 12 10:31:53 2009
Subject: [mod_python] Problem to migrate one server to another one.
Message-ID: <4AD33DCE.6090903@tinyerp.com>

Hello,

I experienced a problem with mod_python to migrate one server to another 
one.

You can check the configuration here:

http://auction.tinyerp.org/auction-in-europe.com/aie
There are even some logs available.

It seems the problem is coming from this instruction:

PythonHandler mod_python.publisher

which is the good one. I replace it with testhandler to get more 
informations about the configuration problems.

This is the index.py:

#!/usr/bin/python
import os, sys

base_dir = "/home/www/auction-in-europe.com/aie/"

sys.path.insert(0, base_dir)

import albatross

import sql_db

from albatross.apacheapp import Request

from albatross import apacheapp
from albatross.template import Content, EmptyTag, EnclosingTag
import string
import common


class AppContext(albatross.SessionFileAppContext):
    def __init__(self, app):
        albatross.SessionFileAppContext.__init__(self, app)
#        path = os.environ.get('PATH_INFO','').split('/')
#        path = filter(lambda x: x, path)
#        self.module = path.pop(0)
#        self.path = {}
#        while path:
#            val = path.pop()
#            self.path[ path.pop() ] = val

    def load_template_once(self, template):
        new_template = os.path.join(self.lang_get(),template)
        return 
albatross.SessionFileAppContext.load_template_once(new_template)

    def load_template(self, template):
       
        new_template = os.path.join(self.lang_get(),template)
        return 
albatross.SessionFileAppContext.load_template(self,new_template)

    def run_template_once(self, template):
        new_template = os.path.join(self.lang_get(), template)
        return 
albatross.SessionFileAppContext.run_template_once(self,new_template)

    def run_template(self, template):
        new_template = os.path.join(self.lang_get(), template)
        return 
albatross.SessionFileAppContext.run_template(self,new_template)

    def req_get(self):
        return self.current_url()[len(self.base_url())+1:]

    def args_calc(self):
        path = self.current_url()[len(self.base_url())+1:].split('/')
        path = filter(lambda x: x, path)
        if not len(path):
            path=['index']
        self.module = path.pop(0)
        self.path = {}
        while path:
            val = path.pop()
            self.path[ path.pop() ] = val

    def lang_get(self):
        if self.request.get_header('host')[:3] in ('fr.','en.'):
            return self.request.get_header('host')[:2]
        try:
            language = self.request.get_header('Accept-Language')
            if language:
                new_lang = language[:2]
                if new_lang in ('fr','en'):
                    return new_lang
        except:
            return 'en'
        return 'en'

    def hostname_get(self):
        if self.request.get_header('host')[-17:]=='art-in-europe.com':
            return 'art'
        elif self.request.get_header('host')[-21:]=='antique-in-europe.com':
            return 'antique'
        else:
            return 'auction'

    def module_get(self):
        self.args_calc()
        return self.module
    def path_get(self, key):
        self.args_calc()
        return self.path[key]

class App(albatross.ModularSessionFileApp):
    def __init__(self):
        albatross.ModularSessionFileApp.__init__(self,
            base_url = '/index.py',
            module_path = os.path.join(base_dir, 'modules'),
            template_path = os.path.join(base_dir, 'template'),
            start_page = 'index',
            secret = '(=-AiE-)',
            session_appid='A-i-E',
            session_dir='/var/tmp/albatross/')

    def create_context(self):
        return AppContext(self)

class alx_a(albatross.EnclosingTag):
    name = 'alx-a'
    def to_html(self, ctx):
        ctx.write_content('<a')
        self.write_attribs_except(ctx, 'expr')
        expr = self.get_attrib('expr')
        if expr is not None:
            expr = ctx.eval_expr(expr)
        ctx.write_content(' href="%s"' % expr )
        ctx.write_content('>')
        albatross.EnclosingTag.to_html(self, ctx)
        ctx.write_content('</a>')

# Escape text for attribute values
def escape_br(text):
    text = str(text)
    text = string.replace(text, '&', '&amp;')
    text = string.replace(text, '<', '&lt;')
    text = string.replace(text, '>', '&gt;',)
    text = string.replace(text, '"', '&quot;')
    text = string.replace(text, "'", '&#39;')
    text = string.replace(text, "\n", '<br>')
    return text


class alx_value(EmptyTag):
    name = 'alx-value'

    def __init__(self, ctx, filename, line_num, attribs):
        EmptyTag.__init__(self, ctx, filename, line_num, attribs)
        #self.compile_expr()

    def to_html(self, ctx):
        value = ctx.eval_expr(self.get_attrib('expr'))
        format = self.get_attrib('date')
        if format:
            value = time.strftime(format, time.localtime(value))
            ctx.write_content(value)
            return
        lookup_name = self.get_attrib('lookup')
        if lookup_name:
            lookup = ctx.get_lookup(lookup_name)
            if not lookup:
                self.raise_error('undefined lookup "%s"' % lookup_name)
            lookup.lookup_html(ctx, value)
            return
        if self.has_attrib('noescape'):
            ctx.write_content(str(value))
        else:
            ctx.write_content(escape_br(value))

app = App()
app.register_tagclasses(alx_a)
app.register_tagclasses(alx_value)

def handler(req):
    return app.run(apacheapp.Request(req))

Have any ideas where the problem should come from ?

-- 
Fr?d?ric Lambotte
Administrator System

OpenERP - Tiny sprl
Chauss?e de Namur, 40
B-1367 Grand-Rosi?re
Tel: +32.81.81.37.00

Product-Web: http://www.openerp.com
On Demand-Web: http://ondemand.openerp.com
Corporate-Web: http://www.tiny.be

From graham.dumpleton at gmail.com  Mon Oct 12 17:40:25 2009
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Mon Oct 12 17:40:36 2009
Subject: [mod_python] Problem to migrate one server to another one.
In-Reply-To: <4AD33DCE.6090903@tinyerp.com>
References: <4AD33DCE.6090903@tinyerp.com>
Message-ID: <88e286470910121440q67f39294w6063f66ed1e607a6@mail.gmail.com>

Your logs say:

[Mon Oct 12 14:01:43 2009] [error] [client 72.37.171.52] PythonHandler
Publisher: ImportError: No module named Publisher

So obviously you don't have what package 'Publisher' comes from
installed. Alternatively your PythonPath isn't set correctly.

Work out where that comes from.

Graham

2009/10/13 Frederic Lambotte <fla@tinyerp.com>:
> Hello,
>
> I experienced a problem with mod_python to migrate one server to another
> one.
>
> You can check the configuration here:
>
> http://auction.tinyerp.org/auction-in-europe.com/aie
> There are even some logs available.
>
> It seems the problem is coming from this instruction:
>
> PythonHandler mod_python.publisher
>
> which is the good one. I replace it with testhandler to get more
> informations about the configuration problems.
>
> This is the index.py:
>
> #!/usr/bin/python
> import os, sys
>
> base_dir = "/home/www/auction-in-europe.com/aie/"
>
> sys.path.insert(0, base_dir)
>
> import albatross
>
> import sql_db
>
> from albatross.apacheapp import Request
>
> from albatross import apacheapp
> from albatross.template import Content, EmptyTag, EnclosingTag
> import string
> import common
>
>
> class AppContext(albatross.SessionFileAppContext):
> ? def __init__(self, app):
> ? ? ? albatross.SessionFileAppContext.__init__(self, app)
> # ? ? ? ?path = os.environ.get('PATH_INFO','').split('/')
> # ? ? ? ?path = filter(lambda x: x, path)
> # ? ? ? ?self.module = path.pop(0)
> # ? ? ? ?self.path = {}
> # ? ? ? ?while path:
> # ? ? ? ? ? ?val = path.pop()
> # ? ? ? ? ? ?self.path[ path.pop() ] = val
>
> ? def load_template_once(self, template):
> ? ? ? new_template = os.path.join(self.lang_get(),template)
> ? ? ? return
> albatross.SessionFileAppContext.load_template_once(new_template)
>
> ? def load_template(self, template):
> ? ? ? ? ? ? new_template = os.path.join(self.lang_get(),template)
> ? ? ? return
> albatross.SessionFileAppContext.load_template(self,new_template)
>
> ? def run_template_once(self, template):
> ? ? ? new_template = os.path.join(self.lang_get(), template)
> ? ? ? return
> albatross.SessionFileAppContext.run_template_once(self,new_template)
>
> ? def run_template(self, template):
> ? ? ? new_template = os.path.join(self.lang_get(), template)
> ? ? ? return albatross.SessionFileAppContext.run_template(self,new_template)
>
> ? def req_get(self):
> ? ? ? return self.current_url()[len(self.base_url())+1:]
>
> ? def args_calc(self):
> ? ? ? path = self.current_url()[len(self.base_url())+1:].split('/')
> ? ? ? path = filter(lambda x: x, path)
> ? ? ? if not len(path):
> ? ? ? ? ? path=['index']
> ? ? ? self.module = path.pop(0)
> ? ? ? self.path = {}
> ? ? ? while path:
> ? ? ? ? ? val = path.pop()
> ? ? ? ? ? self.path[ path.pop() ] = val
>
> ? def lang_get(self):
> ? ? ? if self.request.get_header('host')[:3] in ('fr.','en.'):
> ? ? ? ? ? return self.request.get_header('host')[:2]
> ? ? ? try:
> ? ? ? ? ? language = self.request.get_header('Accept-Language')
> ? ? ? ? ? if language:
> ? ? ? ? ? ? ? new_lang = language[:2]
> ? ? ? ? ? ? ? if new_lang in ('fr','en'):
> ? ? ? ? ? ? ? ? ? return new_lang
> ? ? ? except:
> ? ? ? ? ? return 'en'
> ? ? ? return 'en'
>
> ? def hostname_get(self):
> ? ? ? if self.request.get_header('host')[-17:]=='art-in-europe.com':
> ? ? ? ? ? return 'art'
> ? ? ? elif self.request.get_header('host')[-21:]=='antique-in-europe.com':
> ? ? ? ? ? return 'antique'
> ? ? ? else:
> ? ? ? ? ? return 'auction'
>
> ? def module_get(self):
> ? ? ? self.args_calc()
> ? ? ? return self.module
> ? def path_get(self, key):
> ? ? ? self.args_calc()
> ? ? ? return self.path[key]
>
> class App(albatross.ModularSessionFileApp):
> ? def __init__(self):
> ? ? ? albatross.ModularSessionFileApp.__init__(self,
> ? ? ? ? ? base_url = '/index.py',
> ? ? ? ? ? module_path = os.path.join(base_dir, 'modules'),
> ? ? ? ? ? template_path = os.path.join(base_dir, 'template'),
> ? ? ? ? ? start_page = 'index',
> ? ? ? ? ? secret = '(=-AiE-)',
> ? ? ? ? ? session_appid='A-i-E',
> ? ? ? ? ? session_dir='/var/tmp/albatross/')
>
> ? def create_context(self):
> ? ? ? return AppContext(self)
>
> class alx_a(albatross.EnclosingTag):
> ? name = 'alx-a'
> ? def to_html(self, ctx):
> ? ? ? ctx.write_content('<a')
> ? ? ? self.write_attribs_except(ctx, 'expr')
> ? ? ? expr = self.get_attrib('expr')
> ? ? ? if expr is not None:
> ? ? ? ? ? expr = ctx.eval_expr(expr)
> ? ? ? ctx.write_content(' href="%s"' % expr )
> ? ? ? ctx.write_content('>')
> ? ? ? albatross.EnclosingTag.to_html(self, ctx)
> ? ? ? ctx.write_content('</a>')
>
> # Escape text for attribute values
> def escape_br(text):
> ? text = str(text)
> ? text = string.replace(text, '&', '&amp;')
> ? text = string.replace(text, '<', '&lt;')
> ? text = string.replace(text, '>', '&gt;',)
> ? text = string.replace(text, '"', '&quot;')
> ? text = string.replace(text, "'", '&#39;')
> ? text = string.replace(text, "\n", '<br>')
> ? return text
>
>
> class alx_value(EmptyTag):
> ? name = 'alx-value'
>
> ? def __init__(self, ctx, filename, line_num, attribs):
> ? ? ? EmptyTag.__init__(self, ctx, filename, line_num, attribs)
> ? ? ? #self.compile_expr()
>
> ? def to_html(self, ctx):
> ? ? ? value = ctx.eval_expr(self.get_attrib('expr'))
> ? ? ? format = self.get_attrib('date')
> ? ? ? if format:
> ? ? ? ? ? value = time.strftime(format, time.localtime(value))
> ? ? ? ? ? ctx.write_content(value)
> ? ? ? ? ? return
> ? ? ? lookup_name = self.get_attrib('lookup')
> ? ? ? if lookup_name:
> ? ? ? ? ? lookup = ctx.get_lookup(lookup_name)
> ? ? ? ? ? if not lookup:
> ? ? ? ? ? ? ? self.raise_error('undefined lookup "%s"' % lookup_name)
> ? ? ? ? ? lookup.lookup_html(ctx, value)
> ? ? ? ? ? return
> ? ? ? if self.has_attrib('noescape'):
> ? ? ? ? ? ctx.write_content(str(value))
> ? ? ? else:
> ? ? ? ? ? ctx.write_content(escape_br(value))
>
> app = App()
> app.register_tagclasses(alx_a)
> app.register_tagclasses(alx_value)
>
> def handler(req):
> ? return app.run(apacheapp.Request(req))
>
> Have any ideas where the problem should come from ?
>
> --
> Fr?d?ric Lambotte
> Administrator System
>
> OpenERP - Tiny sprl
> Chauss?e de Namur, 40
> B-1367 Grand-Rosi?re
> Tel: +32.81.81.37.00
>
> Product-Web: http://www.openerp.com
> On Demand-Web: http://ondemand.openerp.com
> Corporate-Web: http://www.tiny.be
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>

From demanzano at playstos.com  Tue Oct 13 07:05:21 2009
From: demanzano at playstos.com (Alessandro de Manzano)
Date: Tue Oct 13 07:04:19 2009
Subject: [mod_python] handler module loading/execution phases
Message-ID: <4AD45EF1.4020107@playstos.com>

Hello,

I'm using ModPyhton 3.3.1 with Apache 2.2.13 and I'm developing a simple 
RESTful-like custom webservice.

All is working correctly, but I'm investigating some "optimization" issues.

In particular, it's not clear to me when/how modpython 
(re)loads/(re)imports the handler's own .py module.

I mean, something like that:


testdummy.py:

DUMMY = 0

def handler(req):
	global DUMMY
	apache.log_error("dummy = %d" % DUMMY, apache.APLOG_ERR, req.server)
	DUMMY += 1

	[etc etc. simple req.write() etc.]


"testdummy.py" is configured in Apache as PythonHandler:
     [..]
     AddHandler mod_python .py
     PythonHandler testdummy
     PythonDebug On # just for debug
     PythonAutoReload On # just for debug


I was expecting to see "dummy = n" where n > 0 sometime in the log.. As 
soon as the same apache process get executed again it should maintain 
the global variable, I tought.
Since this does NOT happens (verified after about 100s requests) I guess 
the "testdummy.py" module is re-evaluated EVERY single time, for every 
and each request.
I am right ? or where am I wrong ?
I read the docs but apparently did not find a description of this issue

Where can I read about the procedures/phases of module 
loading/evaulating of handlers ?


Any hints is welcomed!

Thanks in advance


A. de Manzano
Milano
From graham.dumpleton at gmail.com  Tue Oct 13 07:15:03 2009
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Tue Oct 13 07:15:18 2009
Subject: [mod_python] handler module loading/execution phases
In-Reply-To: <4AD45EF1.4020107@playstos.com>
References: <4AD45EF1.4020107@playstos.com>
Message-ID: <88e286470910130415k3d586e2bub7c8a5c545d1cf84@mail.gmail.com>

Apache/mod_python on UNIX is multi process and therefore requests
don't necessarily go back to the same process. Also, if using worker
MPM, that code isn't thread safe and so technically multiple threads
updating global variable at same time could not see it being
incremented as you expect.

It is also possible for Apache processes to be recycled both at the
whim of Apache, but also explicitly if MaxRequestsPerChild is set to
be non zero in Apache configuration files.

BTW, if you have PythonDebug set to On, then the error logs should
display messages about when mod_python loads or reloads mod_python
handler module files.

Graham

2009/10/13 Alessandro de Manzano <demanzano@playstos.com>:
> Hello,
>
> I'm using ModPyhton 3.3.1 with Apache 2.2.13 and I'm developing a simple
> RESTful-like custom webservice.
>
> All is working correctly, but I'm investigating some "optimization" issues.
>
> In particular, it's not clear to me when/how modpython (re)loads/(re)imports
> the handler's own .py module.
>
> I mean, something like that:
>
>
> testdummy.py:
>
> DUMMY = 0
>
> def handler(req):
> ? ? ? ?global DUMMY
> ? ? ? ?apache.log_error("dummy = %d" % DUMMY, apache.APLOG_ERR, req.server)
> ? ? ? ?DUMMY += 1
>
> ? ? ? ?[etc etc. simple req.write() etc.]
>
>
> "testdummy.py" is configured in Apache as PythonHandler:
> ? ?[..]
> ? ?AddHandler mod_python .py
> ? ?PythonHandler testdummy
> ? ?PythonDebug On # just for debug
> ? ?PythonAutoReload On # just for debug
>
>
> I was expecting to see "dummy = n" where n > 0 sometime in the log.. As soon
> as the same apache process get executed again it should maintain the global
> variable, I tought.
> Since this does NOT happens (verified after about 100s requests) I guess the
> "testdummy.py" module is re-evaluated EVERY single time, for every and each
> request.
> I am right ? or where am I wrong ?
> I read the docs but apparently did not find a description of this issue
>
> Where can I read about the procedures/phases of module loading/evaulating of
> handlers ?
>
>
> Any hints is welcomed!
>
> Thanks in advance
>
>
> A. de Manzano
> Milano
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>

From demanzano at playstos.com  Tue Oct 13 09:07:58 2009
From: demanzano at playstos.com (Alessandro de Manzano)
Date: Tue Oct 13 09:06:55 2009
Subject: [mod_python] handler module loading/execution phases
In-Reply-To: <88e286470910130415k3d586e2bub7c8a5c545d1cf84@mail.gmail.com>
References: <4AD45EF1.4020107@playstos.com>
	<88e286470910130415k3d586e2bub7c8a5c545d1cf84@mail.gmail.com>
Message-ID: <4AD47BAE.7050508@playstos.com>

Graham Dumpleton wrote:
> Apache/mod_python on UNIX is multi process and therefore requests
> don't necessarily go back to the same process. Also, if using worker
> MPM, that code isn't thread safe and so technically multiple threads
> updating global variable at same time could not see it being
> incremented as you expect.

yes, I know, but eventually I should see a non-zero value, sooner or 
later. I tested about 100 requests and they reported always dummy=0
Apache currently spawns about 10 processes max so I'm quite sure the 
same unix process do process more than one http request, do invoke more 
than one time my handler function.

> It is also possible for Apache processes to be recycled both at the
> whim of Apache, but also explicitly if MaxRequestsPerChild is set to
> be non zero in Apache configuration files.
> 
> BTW, if you have PythonDebug set to On, then the error logs should
> display messages about when mod_python loads or reloads mod_python
> handler module files.

it shows the module is "correctly" (re)loaded only once after file 
modified (for every apache process, of course), so it seems to me that 
already-loaded processes should maintain the value, it should simply 
invoke again the handler.
But it seems instead if totally re-evaluate (!?) the module.

Actually my dummy example was to understand apache+modpython inner 
workings, because in the real program I had to instantiate an "heavy" 
class (which connects to external DB, opens files, etc.) and I hoped to 
avoid to do it for each and every single request...

thanks for answers

bye


Ale


From graham.dumpleton at gmail.com  Tue Oct 13 18:27:04 2009
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Tue Oct 13 18:27:14 2009
Subject: [mod_python] handler module loading/execution phases
In-Reply-To: <4AD47BAE.7050508@playstos.com>
References: <4AD45EF1.4020107@playstos.com>
	<88e286470910130415k3d586e2bub7c8a5c545d1cf84@mail.gmail.com>
	<4AD47BAE.7050508@playstos.com>
Message-ID: <88e286470910131527i2c11363bjd3582a2b9455a013@mail.gmail.com>

I don't know then. The code looks reasonable. I can only suggest you
add more and more debug, including your own logging at module scope to
track when imported.

Also ensure you read the 'import_module()' section of:

  http://www.modpython.org/live/current/doc-html/pyapi-apmeth.html

If still stumped, perhaps look at using a WSGI framework and mod_wsgi instead.

Graham

2009/10/14 Alessandro de Manzano <demanzano@playstos.com>:
> Graham Dumpleton wrote:
>>
>> Apache/mod_python on UNIX is multi process and therefore requests
>> don't necessarily go back to the same process. Also, if using worker
>> MPM, that code isn't thread safe and so technically multiple threads
>> updating global variable at same time could not see it being
>> incremented as you expect.
>
> yes, I know, but eventually I should see a non-zero value, sooner or later.
> I tested about 100 requests and they reported always dummy=0
> Apache currently spawns about 10 processes max so I'm quite sure the same
> unix process do process more than one http request, do invoke more than one
> time my handler function.
>
>> It is also possible for Apache processes to be recycled both at the
>> whim of Apache, but also explicitly if MaxRequestsPerChild is set to
>> be non zero in Apache configuration files.
>>
>> BTW, if you have PythonDebug set to On, then the error logs should
>> display messages about when mod_python loads or reloads mod_python
>> handler module files.
>
> it shows the module is "correctly" (re)loaded only once after file modified
> (for every apache process, of course), so it seems to me that already-loaded
> processes should maintain the value, it should simply invoke again the
> handler.
> But it seems instead if totally re-evaluate (!?) the module.
>
> Actually my dummy example was to understand apache+modpython inner workings,
> because in the real program I had to instantiate an "heavy" class (which
> connects to external DB, opens files, etc.) and I hoped to avoid to do it
> for each and every single request...
>
> thanks for answers
>
> bye
>
>
> Ale
>
>
>
From jorgersg at gmail.com  Thu Oct 15 18:31:06 2009
From: jorgersg at gmail.com (Jorge Sanchez)
Date: Thu Oct 15 18:31:35 2009
Subject: [mod_python] Help installing mod_python
Message-ID: <612cc52c0910151531h14ee94dcj85e77118740bf576@mail.gmail.com>

I continue reading people who succeded installing mod_python for python 2.5,
the thing is that when I try to install it the installer tells me that I
need version 2.3 to install and that it doesn't exist. After that I see a
window where I can write the path, but it doesn't allows me to do it.
Any help on this will be much appreciated.

Jorge
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20091015/677ead9c/attachment.html
From graham.dumpleton at gmail.com  Thu Oct 15 18:48:57 2009
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Thu Oct 15 18:49:05 2009
Subject: [mod_python] Help installing mod_python
In-Reply-To: <612cc52c0910151531h14ee94dcj85e77118740bf576@mail.gmail.com>
References: <612cc52c0910151531h14ee94dcj85e77118740bf576@mail.gmail.com>
Message-ID: <88e286470910151548j1c9d1d95i2760d1a2a68a1beb@mail.gmail.com>

2009/10/16 Jorge Sanchez <jorgersg@gmail.com>:
> I continue reading people who succeded installing mod_python for python 2.5,
> the thing is that when I try to install it the installer tells me that I
> need version 2.3 to install and that it doesn't exist. After that I see a
> window where I can write the path, but it doesn't allows me to do it.
> Any help on this will be much appreciated.

It is hard to guess what you are doing wrong given that you do not
even show the output of the 'configure' or 'make' commands.

At a guess though I would probably suggest you don't have  the
corresponding 'python-dev' package installed for your Python version.
This will possibly result in the 'configure' script thinking you don't
have any Python installed, or at least think it is the wrong version.

Graham
From jorgersg at gmail.com  Thu Oct 15 18:58:05 2009
From: jorgersg at gmail.com (Jorge Sanchez)
Date: Thu Oct 15 18:58:35 2009
Subject: [mod_python] Help installing mod_python
In-Reply-To: <88e286470910151548j1c9d1d95i2760d1a2a68a1beb@mail.gmail.com>
References: <612cc52c0910151531h14ee94dcj85e77118740bf576@mail.gmail.com> 
	<88e286470910151548j1c9d1d95i2760d1a2a68a1beb@mail.gmail.com>
Message-ID: <612cc52c0910151558r7f7e3953hf75590f9e9481c21@mail.gmail.com>

Thanks for the reply Graham:

I tell a little bit more. I'm using Windows Vista (I know it's sucks but
it's company policy). I tried it installing version 2.3 of Python and it
worked. The thing is I need it to be version 2.5 to be the one working, but
after uninstalling version 2.3 and installing 2.5, python is not set in my
windows registry. I'm a newbie on this, so I don't exactly know where
exactly do I have to execute the configure and make commands you are talking
about. I'm just double clicking the MSI of python. I don't know if it has
something to do that the version 2.3 is an exe file and the version 2.5 is
an msi.
Jorge

2009/10/15 Graham Dumpleton <graham.dumpleton@gmail.com>

> 2009/10/16 Jorge Sanchez <jorgersg@gmail.com>:
> > I continue reading people who succeded installing mod_python for python
> 2.5,
> > the thing is that when I try to install it the installer tells me that I
> > need version 2.3 to install and that it doesn't exist. After that I see a
> > window where I can write the path, but it doesn't allows me to do it.
> > Any help on this will be much appreciated.
>
> It is hard to guess what you are doing wrong given that you do not
> even show the output of the 'configure' or 'make' commands.
>
> At a guess though I would probably suggest you don't have  the
> corresponding 'python-dev' package installed for your Python version.
> This will possibly result in the 'configure' script thinking you don't
> have any Python installed, or at least think it is the wrong version.
>
> Graham
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20091015/1b1687ef/attachment.html
From graham.dumpleton at gmail.com  Thu Oct 15 19:04:11 2009
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Thu Oct 15 19:04:20 2009
Subject: [mod_python] Help installing mod_python
In-Reply-To: <612cc52c0910151558r7f7e3953hf75590f9e9481c21@mail.gmail.com>
References: <612cc52c0910151531h14ee94dcj85e77118740bf576@mail.gmail.com>
	<88e286470910151548j1c9d1d95i2760d1a2a68a1beb@mail.gmail.com>
	<612cc52c0910151558r7f7e3953hf75590f9e9481c21@mail.gmail.com>
Message-ID: <88e286470910151604w2271c36dk8580e5b2db955564@mail.gmail.com>

Are you installing Python for all users and not just yourself? It must
be installed for all users.

Other than ensuring you do that, can't really help you with mod_python
on Windows.

BTW, what Python web application are you actually wanting to run? The
mod_python module isn't only option for Python hosting with Apache on
Windows. The other option though only supplies binaries for Python 2.6
however.

Graham

2009/10/16 Jorge Sanchez <jorgersg@gmail.com>:
> Thanks for the reply Graham:
> I tell a little bit more. I'm using Windows Vista (I know it's sucks but
> it's company policy). I tried it installing version 2.3 of Python and it
> worked. The thing is I need it to be version 2.5 to be the one working, but
> after uninstalling version 2.3 and installing 2.5, python is not set in my
> windows registry. I'm a newbie on this, so I don't exactly know where
> exactly do I have to execute the configure and make commands you are talking
> about. I'm just double clicking the MSI of python. I don't know if it has
> something to do that the version 2.3 is an exe file and the version 2.5 is
> an msi.
> Jorge
>
> 2009/10/15 Graham Dumpleton <graham.dumpleton@gmail.com>
>>
>> 2009/10/16 Jorge Sanchez <jorgersg@gmail.com>:
>> > I continue reading people who succeded installing mod_python for python
>> > 2.5,
>> > the thing is that when I try to install it the installer tells me that I
>> > need version 2.3 to install and that it doesn't exist. After that I see
>> > a
>> > window where I can write the path, but it doesn't allows me to do it.
>> > Any help on this will be much appreciated.
>>
>> It is hard to guess what you are doing wrong given that you do not
>> even show the output of the 'configure' or 'make' commands.
>>
>> At a guess though I would probably suggest you don't have ?the
>> corresponding 'python-dev' package installed for your Python version.
>> This will possibly result in the 'configure' script thinking you don't
>> have any Python installed, or at least think it is the wrong version.
>>
>> Graham
>
>

From jorgersg at gmail.com  Thu Oct 15 19:18:31 2009
From: jorgersg at gmail.com (Jorge Sanchez)
Date: Thu Oct 15 19:18:59 2009
Subject: [mod_python] Help installing mod_python
In-Reply-To: <88e286470910151604w2271c36dk8580e5b2db955564@mail.gmail.com>
References: <612cc52c0910151531h14ee94dcj85e77118740bf576@mail.gmail.com> 
	<88e286470910151548j1c9d1d95i2760d1a2a68a1beb@mail.gmail.com> 
	<612cc52c0910151558r7f7e3953hf75590f9e9481c21@mail.gmail.com> 
	<88e286470910151604w2271c36dk8580e5b2db955564@mail.gmail.com>
Message-ID: <612cc52c0910151618x60c5afbeo6887363ac7c94e9a@mail.gmail.com>

I'm installing it for all users. The application that I want to run is a
little script that generates a CSV from a web database, is not too
complicated. It wouldn't be a problem for mi to use version 2.6 of Python as
long as the binaries work for windows (which I suppose they do) could you
tell me the name of this other option?? or any other advice??
Thank yo a lot for the quick replies.

Jorge

2009/10/15 Graham Dumpleton <graham.dumpleton@gmail.com>

> Are you installing Python for all users and not just yourself? It must
> be installed for all users.
>
> Other than ensuring you do that, can't really help you with mod_python
> on Windows.
>
> BTW, what Python web application are you actually wanting to run? The
> mod_python module isn't only option for Python hosting with Apache on
> Windows. The other option though only supplies binaries for Python 2.6
> however.
>
> Graham
>
> 2009/10/16 Jorge Sanchez <jorgersg@gmail.com>:
> > Thanks for the reply Graham:
> > I tell a little bit more. I'm using Windows Vista (I know it's sucks but
> > it's company policy). I tried it installing version 2.3 of Python and it
> > worked. The thing is I need it to be version 2.5 to be the one working,
> but
> > after uninstalling version 2.3 and installing 2.5, python is not set in
> my
> > windows registry. I'm a newbie on this, so I don't exactly know where
> > exactly do I have to execute the configure and make commands you are
> talking
> > about. I'm just double clicking the MSI of python. I don't know if it has
> > something to do that the version 2.3 is an exe file and the version 2.5
> is
> > an msi.
> > Jorge
> >
> > 2009/10/15 Graham Dumpleton <graham.dumpleton@gmail.com>
> >>
> >> 2009/10/16 Jorge Sanchez <jorgersg@gmail.com>:
> >> > I continue reading people who succeded installing mod_python for
> python
> >> > 2.5,
> >> > the thing is that when I try to install it the installer tells me that
> I
> >> > need version 2.3 to install and that it doesn't exist. After that I
> see
> >> > a
> >> > window where I can write the path, but it doesn't allows me to do it.
> >> > Any help on this will be much appreciated.
> >>
> >> It is hard to guess what you are doing wrong given that you do not
> >> even show the output of the 'configure' or 'make' commands.
> >>
> >> At a guess though I would probably suggest you don't have  the
> >> corresponding 'python-dev' package installed for your Python version.
> >> This will possibly result in the 'configure' script thinking you don't
> >> have any Python installed, or at least think it is the wrong version.
> >>
> >> Graham
> >
> >
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20091015/0a194f84/attachment.html
From graham.dumpleton at gmail.com  Thu Oct 15 19:20:34 2009
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Thu Oct 15 19:20:46 2009
Subject: [mod_python] Help installing mod_python
In-Reply-To: <612cc52c0910151618x60c5afbeo6887363ac7c94e9a@mail.gmail.com>
References: <612cc52c0910151531h14ee94dcj85e77118740bf576@mail.gmail.com>
	<88e286470910151548j1c9d1d95i2760d1a2a68a1beb@mail.gmail.com>
	<612cc52c0910151558r7f7e3953hf75590f9e9481c21@mail.gmail.com>
	<88e286470910151604w2271c36dk8580e5b2db955564@mail.gmail.com>
	<612cc52c0910151618x60c5afbeo6887363ac7c94e9a@mail.gmail.com>
Message-ID: <88e286470910151620m317f5751p6e5a281585c4721c@mail.gmail.com>

See:

  http://www.modwsgi.org
  http://code.google.com/p/modwsgi/wiki/InstallationOnWindows

To understand what WSGI, start at:

  http://www.wsgi.org

Graham

2009/10/16 Jorge Sanchez <jorgersg@gmail.com>:
> I'm installing it for all users. The application that I want to run is a
> little script that generates a CSV from a web database, is not too
> complicated. It wouldn't be a problem for mi to use version 2.6 of Python as
> long as the binaries work for windows (which I suppose they do) could you
> tell me the name of this other option?? or any other advice??
> Thank yo a lot for the quick replies.
> Jorge
>
> 2009/10/15 Graham Dumpleton <graham.dumpleton@gmail.com>
>>
>> Are you installing Python for all users and not just yourself? It must
>> be installed for all users.
>>
>> Other than ensuring you do that, can't really help you with mod_python
>> on Windows.
>>
>> BTW, what Python web application are you actually wanting to run? The
>> mod_python module isn't only option for Python hosting with Apache on
>> Windows. The other option though only supplies binaries for Python 2.6
>> however.
>>
>> Graham
>>
>> 2009/10/16 Jorge Sanchez <jorgersg@gmail.com>:
>> > Thanks for the reply Graham:
>> > I tell a little bit more. I'm using Windows Vista (I know it's sucks but
>> > it's company policy). I tried it installing version 2.3 of Python and it
>> > worked. The thing is I need it to be version 2.5 to be the one working,
>> > but
>> > after uninstalling version 2.3 and installing 2.5, python is not set in
>> > my
>> > windows registry. I'm a newbie on this, so I don't exactly know where
>> > exactly do I have to execute the configure and make commands you are
>> > talking
>> > about. I'm just double clicking the MSI of python. I don't know if it
>> > has
>> > something to do that the version 2.3 is an exe file and the version 2.5
>> > is
>> > an msi.
>> > Jorge
>> >
>> > 2009/10/15 Graham Dumpleton <graham.dumpleton@gmail.com>
>> >>
>> >> 2009/10/16 Jorge Sanchez <jorgersg@gmail.com>:
>> >> > I continue reading people who succeded installing mod_python for
>> >> > python
>> >> > 2.5,
>> >> > the thing is that when I try to install it the installer tells me
>> >> > that I
>> >> > need version 2.3 to install and that it doesn't exist. After that I
>> >> > see
>> >> > a
>> >> > window where I can write the path, but it doesn't allows me to do it.
>> >> > Any help on this will be much appreciated.
>> >>
>> >> It is hard to guess what you are doing wrong given that you do not
>> >> even show the output of the 'configure' or 'make' commands.
>> >>
>> >> At a guess though I would probably suggest you don't have ?the
>> >> corresponding 'python-dev' package installed for your Python version.
>> >> This will possibly result in the 'configure' script thinking you don't
>> >> have any Python installed, or at least think it is the wrong version.
>> >>
>> >> Graham
>> >
>> >
>
>

From demanzano at playstos.com  Fri Oct 16 02:48:00 2009
From: demanzano at playstos.com (Alessandro de Manzano)
Date: Fri Oct 16 02:48:05 2009
Subject: [mod_python] handler module loading/execution phases
In-Reply-To: <88e286470910131527i2c11363bjd3582a2b9455a013@mail.gmail.com>
References: <4AD45EF1.4020107@playstos.com>	
	<88e286470910130415k3d586e2bub7c8a5c545d1cf84@mail.gmail.com>	
	<4AD47BAE.7050508@playstos.com>
	<88e286470910131527i2c11363bjd3582a2b9455a013@mail.gmail.com>
Message-ID: <4AD81720.3060702@playstos.com>

Graham Dumpleton wrote:
> I don't know then. The code looks reasonable. I can only suggest you
> add more and more debug, including your own logging at module scope to
> track when imported.
> 
> Also ensure you read the 'import_module()' section of:
> 
>   http://www.modpython.org/live/current/doc-html/pyapi-apmeth.html

yep, reading very carefully seems that the _mp_clone_() method could be 
used to achieve what I need, also if not very easly ;)


> If still stumped, perhaps look at using a WSGI framework and mod_wsgi instead.

I admit I don't know about WSGI, already heard about it but never used. 
I'll look into it.

thanks!

bye

Ale
From aurfalien at gmail.com  Fri Oct 16 19:27:17 2009
From: aurfalien at gmail.com (aurfalien@gmail.com)
Date: Fri Oct 16 19:27:28 2009
Subject: [mod_python] mod_python - executing misc python scripts
Message-ID: <3AB2D570-A916-4A4F-90F7-114F1533595E@gmail.com>

Hi all,

New to the list and everything else for that matter.

Following a very easy how to, I got mod_python to work and my next  
step is to run any sort of python script via the browser.

In my current directives, I notice that one must load a module in the  
http conf file.

And without specifying this, one cannot run the python script.

ie;

<Directory /some/directory/htdocs/test>
AddHandler mod_python .py
PythonHandler mptest
PythonDebug On
</Directory>

Is it possible to have a sort of wild card for the PythonHanlder so  
that I can run any sort of python script desired by simply doing

http://myhost/runjob.py

or

http://myhost/printmeta.py

I am aware that these scripts would have to exist in /some/directory/ 
htdocs/test for example, but am hoping to skipe moding the http conf  
file when needing to run particular python scripts.

Any feedback welcome.

Thanks in advance.




-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20091016/953a1738/attachment.html
From langabe at gmail.com  Thu Oct 29 06:53:59 2009
From: langabe at gmail.com (Alex Gonzalez)
Date: Thu Oct 29 06:54:08 2009
Subject: [mod_python] Confused about file caching
Message-ID: <c58a7a270910290353h330f088fidfbeda4596b80aa9@mail.gmail.com>

Hi,

I am using apache 1.3.34 with mod_python 2.7.11 on Debian Etch.

I have a request that parses, modifies and saves an XML file. A
subsequent request reopens the file for reading but it is sometimes
(not always) getting what seems to be a cached copy of the file
instead of the one that was recently modified and saved.

What component is the more likely to be doing the caching, apache,
mod_python or the OS, and how would I go along disabling them
individually?

Thanks in advance,
Alex
From dlenwell at gmail.com  Thu Oct 29 14:51:23 2009
From: dlenwell at gmail.com (David Lenwell)
Date: Thu Oct 29 14:51:33 2009
Subject: [mod_python] Confused about file caching
In-Reply-To: <c58a7a270910290353h330f088fidfbeda4596b80aa9@mail.gmail.com>
References: <c58a7a270910290353h330f088fidfbeda4596b80aa9@mail.gmail.com>
Message-ID: <30001DF8-03A1-4134-A272-A5770024B368@gmail.com>

Alex.. It would be easier to be of help if I could see the snippet of  
code that is reading and writing this file .. also more information  
would be useful .. how frequent are the updates to this file? are they  
happening from lots of clients or just one.. it could be that your  
reading the file before the new changes are written to it .. but I  
couldn't be for sure where you should look without more information.


David

On Oct 29, 2009, at 3:53 AM, Alex Gonzalez wrote:

> Hi,
>
> I am using apache 1.3.34 with mod_python 2.7.11 on Debian Etch.
>
> I have a request that parses, modifies and saves an XML file. A
> subsequent request reopens the file for reading but it is sometimes
> (not always) getting what seems to be a cached copy of the file
> instead of the one that was recently modified and saved.
>
> What component is the more likely to be doing the caching, apache,
> mod_python or the OS, and how would I go along disabling them
> individually?
>
> Thanks in advance,
> Alex
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python

From langabe at gmail.com  Thu Oct 29 18:58:24 2009
From: langabe at gmail.com (Alex Gonzalez)
Date: Thu Oct 29 18:58:34 2009
Subject: [mod_python] Confused about file caching
In-Reply-To: <30001DF8-03A1-4134-A272-A5770024B368@gmail.com>
References: <c58a7a270910290353h330f088fidfbeda4596b80aa9@mail.gmail.com>
	<30001DF8-03A1-4134-A272-A5770024B368@gmail.com>
Message-ID: <c58a7a270910291558w3b96a815qeaaa06158aa7f2d9@mail.gmail.com>

Hi,

I was trying to come up with a simple snippet that would show the
problem when I stumbled upon a workaround.

The problem lied in using two different xml parsers in the same
request for the same file. Initially it was using 4Dom via
xml.dom.ext.sax2, and immediately after minidom. My problem
disappeared when I switched all the code to minidom.

My best guess is some type of bug or incompatibility between libraries
but with the problem solved it's not important enough to be chasing
for the root cause.

Thanks for all the help,
Alex

On Thu, Oct 29, 2009 at 6:51 PM, David Lenwell <dlenwell@gmail.com> wrote:
> Alex.. It would be easier to be of help if I could see the snippet of code
> that is reading and writing this file .. also more information would be
> useful .. how frequent are the updates to this file? are they happening from
> lots of clients or just one.. it could be that your reading the file before
> the new changes are written to it .. but I couldn't be for sure where you
> should look without more information.
>
>
> David
>
> On Oct 29, 2009, at 3:53 AM, Alex Gonzalez wrote:
>
>> Hi,
>>
>> I am using apache 1.3.34 with mod_python 2.7.11 on Debian Etch.
>>
>> I have a request that parses, modifies and saves an XML file. A
>> subsequent request reopens the file for reading but it is sometimes
>> (not always) getting what seems to be a cached copy of the file
>> instead of the one that was recently modified and saved.
>>
>> What component is the more likely to be doing the caching, apache,
>> mod_python or the OS, and how would I go along disabling them
>> individually?
>>
>> Thanks in advance,
>> Alex
>> _______________________________________________
>> Mod_python mailing list
>> Mod_python@modpython.org
>> http://mailman.modpython.org/mailman/listinfo/mod_python
>
>
