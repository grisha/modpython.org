From sean at ardishealth.com  Sun Mar  2 10:02:30 2008
From: sean at ardishealth.com (Sean Allen)
Date: Sun Mar  2 10:02:41 2008
Subject: [mod_python] ChildInit handler?
Message-ID: <312E7853-06EA-44F3-8CEF-A0F9DEB99C59@ardishealth.com>

Does mod_python support the the apache handler that runs when a new  
child process is created and the corresponding cleanup handler?

I don't see anything in the docs, so I assume not, am I mistaken?

From graham.dumpleton at gmail.com  Sun Mar  2 15:48:40 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Sun Mar  2 15:48:46 2008
Subject: [mod_python] ChildInit handler?
In-Reply-To: <312E7853-06EA-44F3-8CEF-A0F9DEB99C59@ardishealth.com>
References: <312E7853-06EA-44F3-8CEF-A0F9DEB99C59@ardishealth.com>
Message-ID: <88e286470803021248s75783037v38cee97cd957cf91@mail.gmail.com>

On 03/03/2008, Sean Allen <sean@ardishealth.com> wrote:
> Does mod_python support the the apache handler that runs when a new
>  child process is created and the corresponding cleanup handler?

The closest you will get is the PythonImport directive for doing
something when process starts. To register a cleanup on process exit
(if using mod_python 3.3.1) use the function
'mod_python.apache.register_cleanup()'. Note though that no guarantee
that cleanup code will be executed on process shutdown, so you should
not religiously rely on it.

Both features are documented.

Graham
From sean at ardishealth.com  Sun Mar  2 17:39:22 2008
From: sean at ardishealth.com (Sean Allen)
Date: Sun Mar  2 17:39:32 2008
Subject: [mod_python] ChildInit handler?
In-Reply-To: <88e286470803021248s75783037v38cee97cd957cf91@mail.gmail.com>
References: <312E7853-06EA-44F3-8CEF-A0F9DEB99C59@ardishealth.com>
	<88e286470803021248s75783037v38cee97cd957cf91@mail.gmail.com>
Message-ID: <232D8C27-2BD3-4977-9ADC-233A66A5ED25@ardishealth.com>


On Mar 2, 2008, at 3:48 PM, Graham Dumpleton wrote:

> 'mod_python.apache.register_cleanup()'. Note though that no guarantee
> that cleanup code will be executed on process shutdown, so you should
> not religiously rely on it.

under what circumstances might it not be executed?



From graham.dumpleton at gmail.com  Sun Mar  2 17:55:55 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Sun Mar  2 17:56:01 2008
Subject: [mod_python] ChildInit handler?
In-Reply-To: <232D8C27-2BD3-4977-9ADC-233A66A5ED25@ardishealth.com>
References: <312E7853-06EA-44F3-8CEF-A0F9DEB99C59@ardishealth.com>
	<88e286470803021248s75783037v38cee97cd957cf91@mail.gmail.com>
	<232D8C27-2BD3-4977-9ADC-233A66A5ED25@ardishealth.com>
Message-ID: <88e286470803021455x1c637cfucd83398eb874e213@mail.gmail.com>

On 03/03/2008, Sean Allen <sean@ardishealth.com> wrote:
>
>  On Mar 2, 2008, at 3:48 PM, Graham Dumpleton wrote:
>
>  > 'mod_python.apache.register_cleanup()'. Note though that no guarantee
>  > that cleanup code will be executed on process shutdown, so you should
>  > not religiously rely on it.
>
> under what circumstances might it not be executed?

When Apache is being stopped or restarted, the main Apache parent
process sends a special message to each child process to trigger the
process to shutdown. If that process doesn't shutdown within a few
seconds the the parent process will send it a SIGKILL and forcibly
kill it.

Thus, if there are delays in running to completion any shutdown code
registered by mod_python or any other Apache module, or possibly long
running requests which are causing things to hang in some way, such
that process shutdown doesn't even commence, then clean shutdown will
not occur and the process will be killed.

Obviously, if a process crashes for whatever reason, no cleanup code
will be run either.

Thus, any startup code you have must be able to cope with an unclean
shutdown of a previous instance.

Graham
From sean at ardishealth.com  Sun Mar  2 18:08:18 2008
From: sean at ardishealth.com (Sean Allen)
Date: Sun Mar  2 18:08:26 2008
Subject: [mod_python] ChildInit handler?
In-Reply-To: <88e286470803021455x1c637cfucd83398eb874e213@mail.gmail.com>
References: <312E7853-06EA-44F3-8CEF-A0F9DEB99C59@ardishealth.com>
	<88e286470803021248s75783037v38cee97cd957cf91@mail.gmail.com>
	<232D8C27-2BD3-4977-9ADC-233A66A5ED25@ardishealth.com>
	<88e286470803021455x1c637cfucd83398eb874e213@mail.gmail.com>
Message-ID: <F83F615C-0CC7-4A08-AB53-1D55A3420B52@ardishealth.com>


On Mar 2, 2008, at 5:55 PM, Graham Dumpleton wrote:

> On 03/03/2008, Sean Allen <sean@ardishealth.com> wrote:
>>
>> On Mar 2, 2008, at 3:48 PM, Graham Dumpleton wrote:
>>
>>> 'mod_python.apache.register_cleanup()'. Note though that no  
>>> guarantee
>>> that cleanup code will be executed on process shutdown, so you  
>>> should
>>> not religiously rely on it.
>>
>> under what circumstances might it not be executed?
>
> When Apache is being stopped or restarted, the main Apache parent
> process sends a special message to each child process to trigger the
> process to shutdown. If that process doesn't shutdown within a few
> seconds the the parent process will send it a SIGKILL and forcibly
> kill it.
>
> Thus, if there are delays in running to completion any shutdown code
> registered by mod_python or any other Apache module, or possibly long
> running requests which are causing things to hang in some way, such
> that process shutdown doesn't even commence, then clean shutdown will
> not occur and the process will be killed.
>
> Obviously, if a process crashes for whatever reason, no cleanup code
> will be run either.
>
> Thus, any startup code you have must be able to cope with an unclean
> shutdown of a previous instance.

Right. All that makes sense.

Thanks for your help Graham.

From Rahul.G.Nair at Sun.COM  Sun Mar  2 21:53:49 2008
From: Rahul.G.Nair at Sun.COM (rahul)
Date: Sun Mar  2 22:04:16 2008
Subject: [mod_python] mod_python version compatibilities
Message-ID: <20080303025349.GH794@vayavyam.India.Sun.COM>

Hi,
I am integrating mod_python with Solaris Apache 2.2 package
Distribution.

I would like to know which versions are guaranteed to be compatible.

ie:
would mod_python.3.2.8 be completely compatible with mod_python.3.2.7 ?

how about mod_python.3.2.X and 3.3.X ?

(From the FAQ I got that the difference between 3.X and 2.X was related
to apache versions 1.X and 2.X)

To put it another way, If there is a non-compatible interface change,
which version number would get bumped up? in A.B.C ?

(The reason for asking this is that the versions that are guaranteed to
be compatible can be added as an upgrade while the version changes that
may cause non-compatible changes may need to be treated differently.)

(By interface I mean any thing a developer may make use of in mod_python
while developing modules in mod_python. Includes configuration
directives and APIs)

Rahul.


From graham.dumpleton at gmail.com  Sun Mar  2 22:18:41 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Sun Mar  2 22:18:47 2008
Subject: [mod_python] mod_python version compatibilities
In-Reply-To: <20080303025349.GH794@vayavyam.India.Sun.COM>
References: <20080303025349.GH794@vayavyam.India.Sun.COM>
Message-ID: <88e286470803021918m385bdfbfu75514052623878a9@mail.gmail.com>

On 03/03/2008, rahul <Rahul.G.Nair@sun.com> wrote:
> Hi,
>  I am integrating mod_python with Solaris Apache 2.2 package
>  Distribution.
>
>  I would like to know which versions are guaranteed to be compatible.
>
>  ie:
>  would mod_python.3.2.8 be completely compatible with mod_python.3.2.7 ?

Probably, but not guaranteed. BTW, you shouldn't use 3.2.7, it had a
security issue with it.

>  how about mod_python.3.2.X and 3.3.X ?

Not entirely compatible.

>  (From the FAQ I got that the difference between 3.X and 2.X was related
>  to apache versions 1.X and 2.X)

Primarily, but there were other significant changes and feature
additions besides that.

>  To put it another way, If there is a non-compatible interface change,
>  which version number would get bumped up? in A.B.C ?

X.Y.Z to X.Y.Z+n would generally aim to be compatible. X.Y to X.Y+n or
X to X+n probably aren't going to be compatible except for where you
are using possibly some core subset of mod_python functionality.

>  (The reason for asking this is that the versions that are guaranteed to
>  be compatible can be added as an upgrade while the version changes that
>  may cause non-compatible changes may need to be treated differently.)
>
>  (By interface I mean any thing a developer may make use of in mod_python
>  while developing modules in mod_python. Includes configuration
>  directives and APIs)

If you want some semblance of version compatibility, or even
portability for Python web applications, then don't write your web
applications to directly use mod_python. Instead, write your web
application to work against the WSGI specification (www.wsgi.org) for
Python web applications. That way you have a better chance of changes
in the hosting mechanism not causing a problem.

What is you are really trying to do and what web applications are you
wanting to host? Do you specifically need mod_python because of
wanting to hook into internal features of Apache?

Graham
From Rahul.G.Nair at Sun.COM  Mon Mar  3 00:35:44 2008
From: Rahul.G.Nair at Sun.COM (rahul)
Date: Mon Mar  3 00:46:03 2008
Subject: [mod_python] mod_python version compatibilities
In-Reply-To: <88e286470803021918m385bdfbfu75514052623878a9@mail.gmail.com>
References: <20080303025349.GH794@vayavyam.India.Sun.COM>
	<88e286470803021918m385bdfbfu75514052623878a9@mail.gmail.com>
Message-ID: <20080303053544.GM794@vayavyam.India.Sun.COM>

| >  I am integrating mod_python with Solaris Apache 2.2 package
| >  Distribution.
| >
......(snip)

| >  (The reason for asking this is that the versions that are guaranteed to
| >  be compatible can be added as an upgrade while the version changes that
| >  may cause non-compatible changes may need to be treated differently.)
| >
| >  (By interface I mean any thing a developer may make use of in mod_python
| >  while developing modules in mod_python. Includes configuration
| >  directives and APIs)
| 
| If you want some semblance of version compatibility, or even
| portability for Python web applications, then don't write your web
| applications to directly use mod_python. Instead, write your web
| application to work against the WSGI specification (www.wsgi.org) for
| Python web applications. That way you have a better chance of changes
| in the hosting mechanism not causing a problem.
| 
| What is you are really trying to do and what web applications are you
| wanting to host? Do you specifically need mod_python because of
| wanting to hook into internal features of Apache?

My interest is to bundle mod_python in OpenSolaris SXDE, as a package
(compiled) for others to use. So the applications that would use
mod_python would not be under my control. And yes, it could be that
the developers might decide to hook into the internals of apache through
mod_python (I cant be sure they wont :) ).

Thank you for the response, It clarified what I was looking for.

Rahul

From graham.dumpleton at gmail.com  Mon Mar  3 00:53:38 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Mon Mar  3 00:53:44 2008
Subject: [mod_python] mod_python version compatibilities
In-Reply-To: <20080303053544.GM794@vayavyam.India.Sun.COM>
References: <20080303025349.GH794@vayavyam.India.Sun.COM>
	<88e286470803021918m385bdfbfu75514052623878a9@mail.gmail.com>
	<20080303053544.GM794@vayavyam.India.Sun.COM>
Message-ID: <88e286470803022153q35dafb9hfbb2134300fb706c@mail.gmail.com>

On 03/03/2008, rahul <Rahul.G.Nair@sun.com> wrote:
> | >  I am integrating mod_python with Solaris Apache 2.2 package
>  | >  Distribution.
>  | >
>
> ......(snip)
>
>
>  | >  (The reason for asking this is that the versions that are guaranteed to
>  | >  be compatible can be added as an upgrade while the version changes that
>  | >  may cause non-compatible changes may need to be treated differently.)
>  | >
>  | >  (By interface I mean any thing a developer may make use of in mod_python
>  | >  while developing modules in mod_python. Includes configuration
>  | >  directives and APIs)
>  |
>  | If you want some semblance of version compatibility, or even
>  | portability for Python web applications, then don't write your web
>  | applications to directly use mod_python. Instead, write your web
>  | application to work against the WSGI specification (www.wsgi.org) for
>  | Python web applications. That way you have a better chance of changes
>  | in the hosting mechanism not causing a problem.
>  |
>  | What is you are really trying to do and what web applications are you
>  | wanting to host? Do you specifically need mod_python because of
>  | wanting to hook into internal features of Apache?
>
>
> My interest is to bundle mod_python in OpenSolaris SXDE, as a package
>  (compiled) for others to use. So the applications that would use
>  mod_python would not be under my control. And yes, it could be that
>  the developers might decide to hook into the internals of apache through
>  mod_python (I cant be sure they wont :) ).
>
>  Thank you for the response, It clarified what I was looking for.

Since for Python web application development, most stuff is heading
towards WSGI, you might also want to have a look at mod_wsgi
(www.modwsgi.org).

BTW, does Solaris packaged version of Python supply only a static
version of Python library? Lack of a shared library for Python,
installed in correct place so that it is found properly, has been a
problem with many Python distributions. I recollect some distributed
versions of Python for Solaris being like that.

For more details on static/shared library issues, see:

  http://code.google.com/p/modwsgi/wiki/InstallationIssues

This is from mod_wsgi documentation, but same issues affect mod_python.

Graham
From auther_bin at 21cn.com  Mon Mar  3 02:18:13 2008
From: auther_bin at 21cn.com (auther_bin)
Date: Mon Mar  3 02:20:41 2008
Subject: [mod_python] Help about apache mod_python Segmentation fault
References: <200802271315514506355@21cn.com>,
	<88e286470802262129s77d47709p5518fa57ae0abc0d@mail.gmail.com>
Message-ID: <200803031518089413771@21cn.com>

Hi Graham Dumpleton,

¡¡¡¡I comiling all the libs and mod_python with "-g", and run gdb of httpd, but could not catch the wro
ng piont correctly, here is some messages:

=============== GDB run with -X ===============================
# gdb httpd 
argc=2 argv=0xbffff9b4 envp=0xbffff9c0
ELF header=0x40000000
First Dynamic section entry=0x40009efc
transfering control to application @ 0x8070360
GNU gdb 5.3
Copyright 2002 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "i686-pc-linux-gnu"...
(gdb) run -X
Starting program: /usr/local/apache2/bin/httpd -X
argc=3 argv=0xbfffe574 envp=0xbfffe584
ELF header=0x40000000
[New Thread 1024 (LWP 8609)]
transfering control to application @ 0x8065250
JJJJJJ apr_app_initialize(2, /usr/local/apache2/bin/httpd, -X, (null))
JJJJJJJ in apr_initialize srclib/apr/misc/unix
JJJJJJJ in before apr_pool_create srclib/apr/misc/unix
JJJJJJJ in before apr_pool_tag srclib/apr/misc/unix
httpd: apr_sockaddr_info_get() failed for localhost.localdomain
httpd: Could not reliably determine the server's fully qualified domain name, using 127.0.0.1 for ServerName
JJJJJJJJJJJJJJJJJJJ111111111JJJJJJ
JJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJ
												<----- give a web requirement here.
JJJJJJJJJJJJJJJ python_connection
JJJJJJJJJ PythonPostReadRequestHandler
JJJJJJJJ PythonInitHandler -> python_handler
JJJJJJJJ 81e604c[27]
Cannot find user-level thread for LWP 8609: generic error
(gdb) where
Cannot find thread 1024: generic error
(gdb) 
======================= GDB could not working any more here ====================
BTW, the lines begains with "JJJJ" is the printf gives, where I inputed into the sourcecode
of apache and mod_python.

if I run httpd -X without gdb, the httpd gives:
======================
JJJJJJJJ 81e605c[27]
Segmentation fault
# 
======================

after times of work, I think is it the problem lies on the module Load process?
for if i rem the config line in httpd.conf "LoadModule python_module modules/mod_python.so", the httpd could works well.

======= 2008-02-27 wrote: =======

>On 27/02/2008, auther_bin <auther_bin@21cn.com> wrote:
>> Dear friends,
>>
>>         When I compiling the apache python mod_python and install it into my uClibc envirentment, but when I
>>  runing httpd -X, send a very little request with index.html it crashed. after some debuging work, I find there should be something wrong in mod_python.c line(about 1561) which looks like:
>>  --------------------------------- with my debug printing :) ------------------------
>>  printf("JJJJJJJJ %s -> python_handler\n", phase);
>>  printf("JJJJJJJJ %x[%d]\n", &req->per_dir_config, (&python_module)->module_index);
>>     /* get configuration */
>>     conf = (py_config *) ap_get_module_config(req->per_dir_config,
>>                                                   &python_module);
>>  printf("JJJJJJJJ a %s conf=%x -> python_handler\n", phase,conf);
>>  .............
>>  ------------------------------ end source --------------------------------------
>>
>>  I guess that, there should be a regester error in it. with some debug message I print:
>>  ------------- printing -------------------------------
>>  JJJJJJJJJ PythonPostReadRequestHandler
>>  JJJJJJJJ PythonInitHandler -> python_handler
>>  JJJJJJJJ 820a544[29]
>>  Segmentation fault
>>  ------------- end printing ---------------------------
>>
>>  any advices pls?
>
>Unfortunately that doesn't help much.
>
>You need a stack trace to show the true location in code.
>
>Use procedure documented in section 'Debugging Crashes With GDB' of:
>
>  http://code.google.com/p/modwsgi/wiki/DebuggingTechniques
>
>to run up httpd inside of gdb and get a stack trace of where crash is occurring.
>
>This documentation is for mod_wgsi, but same procedure used for mod_python.
>
>There is a similar procedure documented on Apache site, but can't
>remember where.
>
>Graham
>
>
>__________ NOD32 2906 (20080227) Information __________
>
>This message was checked by NOD32 antivirus system.
>http://www.nod32cn.com
>
>

= = = = = = = = = = = = = = = = = = = =
			

                    ÖÂ
Àñ£¡
		2008-03-03 

From Rahul.G.Nair at Sun.COM  Mon Mar  3 02:17:56 2008
From: Rahul.G.Nair at Sun.COM (rahul)
Date: Mon Mar  3 02:28:27 2008
Subject: [mod_python] mod_python version compatibilities
In-Reply-To: <88e286470803022153q35dafb9hfbb2134300fb706c@mail.gmail.com>
References: <20080303025349.GH794@vayavyam.India.Sun.COM>
	<88e286470803021918m385bdfbfu75514052623878a9@mail.gmail.com>
	<20080303053544.GM794@vayavyam.India.Sun.COM>
	<88e286470803022153q35dafb9hfbb2134300fb706c@mail.gmail.com>
Message-ID: <20080303071756.GN794@vayavyam.India.Sun.COM>

[Graham Dumpleton:]
| >  | >  while developing modules in mod_python. Includes configuration
| >  | >  directives and APIs)
| >  |
| >  | If you want some semblance of version compatibility, or even
| >  | portability for Python web applications, then don't write your web
| >  | applications to directly use mod_python. Instead, write your web
| >  | application to work against the WSGI specification (www.wsgi.org) for
| >  | Python web applications. That way you have a better chance of changes
| >  | in the hosting mechanism not causing a problem.
| >  |
| >  | What is you are really trying to do and what web applications are you
| >  | wanting to host? Do you specifically need mod_python because of
| >  | wanting to hook into internal features of Apache?
| >
| >
| > My interest is to bundle mod_python in OpenSolaris SXDE, as a package
| >  (compiled) for others to use. So the applications that would use
| >  mod_python would not be under my control. And yes, it could be that
| >  the developers might decide to hook into the internals of apache through
| >  mod_python (I cant be sure they wont :) ).
| >
| >  Thank you for the response, It clarified what I was looking for.
| 
| Since for Python web application development, most stuff is heading
| towards WSGI, you might also want to have a look at mod_wsgi
| (www.modwsgi.org).

ok, I will try and bundle that too.
 
| BTW, does Solaris packaged version of Python supply only a static
| version of Python library? Lack of a shared library for Python,
| installed in correct place so that it is found properly, has been a
| problem with many Python distributions. I recollect some distributed
| versions of Python for Solaris being like that.

We do bundle the libpython shared library in solaris.

$file /usr/lib/sparcv9/libpython2.4.so.1.0
/usr/lib/sparcv9/libpython2.4.so.1.0:   ELF 64-bit MSB dynamic lib
SPARCV9 Version 1, dynamically linked

$file /usr/lib/libpython2.4.so.1.0
/usr/lib/libpython2.4.so.1.0:   ELF 32-bit MSB dynamic lib
SPARCV9 Version 1, dynamically linked

$cat /etc/release 
                 Solaris Express Community Edition snv_83a SPARC

| For more details on static/shared library issues, see:
| 
|   http://code.google.com/p/modwsgi/wiki/InstallationIssues

Thanks that is very useful.

                                    Rahul

From auther_bin at 21cn.com  Mon Mar  3 02:27:31 2008
From: auther_bin at 21cn.com (auther_bin)
Date: Mon Mar  3 02:30:00 2008
Subject: [mod_python] Help about apache mod_python Segmentation fault
References: <200802271315514506355@21cn.com>,
	<88e286470802262129s77d47709p5518fa57ae0abc0d@mail.gmail.com>
Message-ID: <200803031527192023415@21cn.com>

Hi Graham Dumpleton,

And, when I debug in RedHat9 and my embeded envirenment, the main process goes different!?

in Redhat9, run like: 
(gdb) b main
Breakpoint 1 at 0x8067a40: file main.c, line 438.
(gdb) run -X
Starting program: /usr/local/apache2/bin/httpd -X
[New Thread 1076592288 (LWP 1049)]
[Switching to Thread 1076592288 (LWP 1049)]

Breakpoint 1, main (argc=134642240, argv=0x2) at main.c:438
438     {
(gdb) n
272         stat = apr_app_initialize(argc, argv, NULL);

and in my embeded system runs like:

Breakpoint 1, main (argc=2, argv=0xbffff294)
    at /usr/src/build/snapgear/user/apache/server/main.c:441
441         int configtestonly = 0;
(gdb) n
442         const char *confname = SERVER_CONFIG_FILE;



it seems that, the hosting system doing something for init before the main function run, but embeded system do not?

I thinks is here somthing wrong? or there should be some compiling parameters I missed?

======= 2008-02-27 wrote: =======

>On 27/02/2008, auther_bin  <auther_bin@21cn.com > wrote:
> > Dear friends,
> >
> >         When I compiling the apache python mod_python and install it into my uClibc envirentment, 
but when I
> >  runing httpd -X, send a very little request with index.html it crashed. after some debuging work, 
I find there should be something wrong in mod_python.c line(about 1561) which looks like:
> >  --------------------------------- with my debug printing :) ------------------------
> >  printf("JJJJJJJJ %s - > python_handler\n", phase);
> >  printf("JJJJJJJJ %x[%d]\n", &req- >per_dir_config, (&python_module)- >module_index);
> >     /* get configuration */
> >     conf = (py_config *) ap_get_module_config(req- >per_dir_config,
> >                                                   &python_module);
> >  printf("JJJJJJJJ a %s conf=%x - > python_handler\n", phase,conf);
> >  .............
> >  ------------------------------ end source --------------------------------------
> >
> >  I guess that, there should be a regester error in it. with some debug message I print:
> >  ------------- printing -------------------------------
> >  JJJJJJJJJ PythonPostReadRequestHandler
> >  JJJJJJJJ PythonInitHandler - > python_handler
> >  JJJJJJJJ 820a544[29]
> >  Segmentation fault
> >  ------------- end printing ---------------------------
> >
> >  any advices pls?
>
>Unfortunately that doesn't help much.
>
>You need a stack trace to show the true location in code.
>
>Use procedure documented in section 'Debugging Crashes With GDB' of:
>
>  http://code.google.com/p/modwsgi/wiki/DebuggingTechniques
>
>to run up httpd inside of gdb and get a stack trace of where crash is occurring.
>
>This documentation is for mod_wgsi, but same procedure used for mod_python.
>
>There is a similar procedure documented on Apache site, but can't
>remember where.
>
>Graham
>
>
>__________ NOD32 2906 (20080227) Information __________
>
>This message was checked by NOD32 antivirus system.
>http://www.nod32cn.com
>
>

= = = = = = = = = = = = = = = = = = = =

                    ÖÂ
Àñ£¡
2008-03-03 

_______________________________________________
Mod_python mailing list
Mod_python@modpython.org
http://mailman.modpython.org/mailman/listinfo/mod_python


__________ NOD32 2915 (20080303) Information __________

This message was checked by NOD32 antivirus system.
http://www.nod32cn.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080303/4dd03156/attachment.html
From graham.dumpleton at gmail.com  Mon Mar  3 04:12:55 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Mon Mar  3 04:13:00 2008
Subject: [mod_python] mod_python version compatibilities
In-Reply-To: <20080303071756.GN794@vayavyam.India.Sun.COM>
References: <20080303025349.GH794@vayavyam.India.Sun.COM>
	<88e286470803021918m385bdfbfu75514052623878a9@mail.gmail.com>
	<20080303053544.GM794@vayavyam.India.Sun.COM>
	<88e286470803022153q35dafb9hfbb2134300fb706c@mail.gmail.com>
	<20080303071756.GN794@vayavyam.India.Sun.COM>
Message-ID: <88e286470803030112j2f93e844le6d6abca533e0bfd@mail.gmail.com>

On 03/03/2008, rahul <Rahul.G.Nair@sun.com> wrote:
> [Graham Dumpleton:]
>
> | >  | >  while developing modules in mod_python. Includes configuration
>  | >  | >  directives and APIs)
>  | >  |
>  | >  | If you want some semblance of version compatibility, or even
>  | >  | portability for Python web applications, then don't write your web
>  | >  | applications to directly use mod_python. Instead, write your web
>  | >  | application to work against the WSGI specification (www.wsgi.org) for
>  | >  | Python web applications. That way you have a better chance of changes
>  | >  | in the hosting mechanism not causing a problem.
>  | >  |
>  | >  | What is you are really trying to do and what web applications are you
>  | >  | wanting to host? Do you specifically need mod_python because of
>  | >  | wanting to hook into internal features of Apache?
>  | >
>  | >
>  | > My interest is to bundle mod_python in OpenSolaris SXDE, as a package
>  | >  (compiled) for others to use. So the applications that would use
>  | >  mod_python would not be under my control. And yes, it could be that
>  | >  the developers might decide to hook into the internals of apache through
>  | >  mod_python (I cant be sure they wont :) ).
>  | >
>  | >  Thank you for the response, It clarified what I was looking for.
>  |
>  | Since for Python web application development, most stuff is heading
>  | towards WSGI, you might also want to have a look at mod_wsgi
>  | (www.modwsgi.org).
>
>
> ok, I will try and bundle that too.
>
>
>  | BTW, does Solaris packaged version of Python supply only a static
>  | version of Python library? Lack of a shared library for Python,
>  | installed in correct place so that it is found properly, has been a
>  | problem with many Python distributions. I recollect some distributed
>  | versions of Python for Solaris being like that.
>
>
> We do bundle the libpython shared library in solaris.
>
>  $file /usr/lib/sparcv9/libpython2.4.so.1.0
>  /usr/lib/sparcv9/libpython2.4.so.1.0:   ELF 64-bit MSB dynamic lib
>  SPARCV9 Version 1, dynamically linked
>
>  $file /usr/lib/libpython2.4.so.1.0
>  /usr/lib/libpython2.4.so.1.0:   ELF 32-bit MSB dynamic lib
>  SPARCV9 Version 1, dynamically linked
>
>  $cat /etc/release
>                  Solaris Express Community Edition snv_83a SPARC

Is there also a symlink for the libpython2.4.so in the
lib/python2.4/config directory along side the libpython2.4.a file.
This is the problem. If the symlink isn't in that location also, when
-L for config directory is used it will only find the static library
and so mod_python and mod_wsgi end up being really fat because of
static library being embedded in them. This causes large memory
footprints at runtime because of static library ended up private
rather than being shared.

It is actually a fault of Python installation scripts that symlink
isn't put there. Luckily these days, nearly all the Linux
distributions know they need to put a symlink for the .so in the
config directory as well so embedded systems can use it properly. Some
still don't, thus why I thought to check what Solaris does.

Graham

>  | For more details on static/shared library issues, see:
>  |
>  |   http://code.google.com/p/modwsgi/wiki/InstallationIssues
>
>
> Thanks that is very useful.
>
>
>                                     Rahul
>
>
From graham.dumpleton at gmail.com  Mon Mar  3 04:18:18 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Mon Mar  3 04:18:24 2008
Subject: [mod_python] Help about apache mod_python Segmentation fault
In-Reply-To: <200803031527192023415@21cn.com>
References: <200802271315514506355@21cn.com>
	<88e286470802262129s77d47709p5518fa57ae0abc0d@mail.gmail.com>
	<200803031527192023415@21cn.com>
Message-ID: <88e286470803030118g6d051cc5q48446f12dd928cd0@mail.gmail.com>

In gdb, instead of 'where', try:

  thread apply all bt

in case gdb isn't throwing you into the correct thread context.

BTW, does the Python on the environment that crashes provide a shared
library? For what I am talking about see:

  http://code.google.com/p/modwsgi/wiki/InstallationIssues

This is documentation from mod_wsgi but same problems apply to mod_python.

Graham

On 03/03/2008, auther_bin <auther_bin@21cn.com> wrote:
>
>
> Hi Graham Dumpleton,
>
> And, when I debug in RedHat9 and my embeded
> envirenment, the main process goes
> different!?
>
> in Redhat9, run like:
>
>
> (gdb) b main
> Breakpoint 1 at 0x8067a40: file main.c, line 438.
> (gdb) run -X
> Starting program: /usr/local/apache2/bin/httpd -X
> [New Thread 1076592288 (LWP 1049)]
> [Switching to Thread 1076592288 (LWP 1049)]
>
> Breakpoint 1, main (argc=134642240, argv=0x2) at main.c:438
> 438     {
> (gdb) n
> 272         stat = apr_app_initialize(argc, argv, NULL);
>
> and in my embeded system runs like:
>
>
>
> Breakpoint 1, main (argc=2, argv=0xbffff294)
>     at
> /usr/src/build/snapgear/user/apache/server/main.c:441
> 441         int configtestonly = 0;
> (gdb) n
> 442         const char *confname = SERVER_CONFIG_FILE;
>
>
>
> it seems that, the hosting system doing something for init before the main
> function run, but embeded system do not?
>
> I thinks is here somthing wrong? or there should be some compiling
> parameters I missed?
>
> ======= 2008-02-27 wrote: =======
>
>
> >On 27/02/2008, auther_bin  <auther_bin@21cn.com > wrote:
> > > Dear friends,
> > >
> > >         When I compiling the apache python mod_python
> and install it into my uClibc
> envirentment,
> but when I
> > >  runing httpd -X, send a very little request with
> index.html it crashed. after some debuging work,
> I find there should be something wrong in mod_python.c
> line(about 1561) which looks like:
> > >  --------------------------------- with my debug
> printing :) ------------------------
> > >  printf("JJJJJJJJ %s - > python_handler\n", phase);
> > >  printf("JJJJJJJJ %x[%d]\n", &req- >per_dir_config,
> (&python_module)- >module_index);
> > >     /* get configuration */
> > >     conf = (py_config *) ap_get_module_config(req-
> >per_dir_config,
> > >
> &python_module);
> > >  printf("JJJJJJJJ a %s conf=%x - > python_handler\n",
> phase,conf);
> > >  .............
> > >  ------------------------------ end source
> --------------------------------------
> > >
> > >  I guess that, there should be a regester error in
> it. with some debug message I print:
> > >  ------------- printing -------------------------------
> > >  JJJJJJJJJ PythonPostReadRequestHandler
> > >  JJJJJJJJ PythonInitHandler - > python_handler
> > >  JJJJJJJJ 820a544[29]
> > >  Segmentation fault
> > >  ------------- end printing ---------------------------
> > >
> > >  any advices pls?
> >
> >Unfortunately that doesn't help much.
> >
> >You need a stack trace to show the true location
> in code.
> >
> >Use procedure documented in section 'Debugging
> Crashes With GDB' of:
> >
> >
> http://code.google.com/p/modwsgi/wiki/DebuggingTechniques
> >
> >to run up httpd inside of gdb and get a stack trace
> of where crash is occurring.
> >
> >This documentation is for mod_wgsi, but same procedure
> used for mod_python.
> >
> >There is a similar procedure documented on Apache
> site, but can't
> >remember where.
> >
> >Graham
> >
> >
> >__________ NOD32 2906 (20080227) Information
> __________
> >
> >This message was checked by NOD32 antivirus system.
> >http://www.nod32cn.com
> >
> >
>
> = = = = = = = = = = = = = = = = = = = =
>
>
>                     ÖÂ
> Àñ£¡
> 2008-03-03
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>
>
> __________ NOD32 2915 (20080303) Information __________
>
> This message was checked by NOD32 antivirus system.
> http://www.nod32cn.com
>
>
> _______________________________________________
>  Mod_python mailing list
>  Mod_python@modpython.org
>  http://mailman.modpython.org/mailman/listinfo/mod_python
>
>

From m.r.sanders at gmail.com  Mon Mar  3 04:41:19 2008
From: m.r.sanders at gmail.com (Michael Sanders)
Date: Mon Mar  3 04:41:27 2008
Subject: [mod_python] semicolon problem
In-Reply-To: <47C8AAA6.8000200@heckler-koch.cz>
References: <47C888C1.8090504@heckler-koch.cz>	<a595de7a0802291600r203d9c5bh1f107bf24477344a@mail.gmail.com>
	<47C8AAA6.8000200@heckler-koch.cz>
Message-ID: <47CBC7BF.90309@gmail.com>

kosa@heckler-koch.cz wrote:
> Clodoaldo wrote:
>> 2008/2/29, kosa@heckler-koch.cz <kosa@heckler-koch.cz>:
>>  
>>>  i have found out, that when sending text from our python based site 
>>> from
>>>  ajax to python i get lost all the strings after the semicolon.
>>>  for example if i wrote
>>>
>>>  hi;all
>>>
>>>  ajax will send me hi;all, but python receives only hi . I was searching
>>>  a while for some post/get errors with semicolon, but did not succeed. I
>>>  believe there should be some problem in our mod python handler or this
>>>  should be fixed on other place?
>>>     
>>
>> Are you using get? If so try replacing the ; for %3b and see if it helps.
>>   
> hi and thankx for fast answer.
> Yes i am using get. Unfortunately the part of ajax is black box for
> me(and i know ajax is escaping spaces and other characters, but not
> semicolon)
> so i am looking rather for python solution.

mod_python's "util.parse_qs" function treats ';' as a parameter 
delimiter for query strings (in addition to the usual '&'). There is 
some support for this behaviour in (for example) the HTML 4.01 spec:

http://www.w3.org/TR/html401/appendix/notes.html#h-B.2.2

Presumably the way round this it to parse the query string yourself, 
which I think you can access through the req.args attribute (see 
http://modpython.org/live/current/doc-html/pyapi-mprequest-mem.html).

Michael
From Rahul.G.Nair at Sun.COM  Mon Mar  3 05:21:39 2008
From: Rahul.G.Nair at Sun.COM (rahul)
Date: Mon Mar  3 05:32:00 2008
Subject: [mod_python] mod_python version compatibilities
In-Reply-To: <88e286470803030112j2f93e844le6d6abca533e0bfd@mail.gmail.com>
References: <20080303025349.GH794@vayavyam.India.Sun.COM>
	<88e286470803021918m385bdfbfu75514052623878a9@mail.gmail.com>
	<20080303053544.GM794@vayavyam.India.Sun.COM>
	<88e286470803022153q35dafb9hfbb2134300fb706c@mail.gmail.com>
	<20080303071756.GN794@vayavyam.India.Sun.COM>
	<88e286470803030112j2f93e844le6d6abca533e0bfd@mail.gmail.com>
Message-ID: <20080303102138.GQ794@vayavyam.India.Sun.COM>

| Is there also a symlink for the libpython2.4.so in the
| lib/python2.4/config directory along side the libpython2.4.a file.
| This is the problem. If the symlink isn't in that location also, when
| -L for config directory is used it will only find the static library
| and so mod_python and mod_wsgi end up being really fat because of
| static library being embedded in them. This causes large memory
| footprints at runtime because of static library ended up private
| rather than being shared.

I didn't know this, It is not currently there. I will ask the
opensolaris python maintainer to add it.

Thanks. :)


| It is actually a fault of Python installation scripts that symlink
| isn't put there. Luckily these days, nearly all the Linux
| distributions know they need to put a symlink for the .so in the
| config directory as well so embedded systems can use it properly. Some
| still don't, thus why I thought to check what Solaris does.

Rahul
From mark at mwilden.com  Mon Mar  3 18:43:29 2008
From: mark at mwilden.com (Wilden Mark)
Date: Mon Mar  3 18:43:35 2008
Subject: [mod_python] OS X install mod_python w/o MacPorts
Message-ID: <D2F4ECE3-E51C-478D-BE47-276828061F28@mwilden.com>

I am trying to install mod_python on Mac OS X 10.5 using MacPorts.  
However, that is seemingly not possible right now (see http://trac.macports.org/projects/macports/ticket/14470) 
.

As a Windows user until quite recently, MacPorts, Apache, python are  
all very new to me. My question is whether there's an alternate way to  
install mod_python on OS X beside MacPorts?

adthanksvance

///ark
(first-time poster)
From graham.dumpleton at gmail.com  Mon Mar  3 19:22:46 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Mon Mar  3 19:22:53 2008
Subject: [mod_python] OS X install mod_python w/o MacPorts
In-Reply-To: <D2F4ECE3-E51C-478D-BE47-276828061F28@mwilden.com>
References: <D2F4ECE3-E51C-478D-BE47-276828061F28@mwilden.com>
Message-ID: <88e286470803031622o7273f374o2e151ece63649633@mail.gmail.com>

On 04/03/2008, Wilden Mark <mark@mwilden.com> wrote:
> I am trying to install mod_python on Mac OS X 10.5 using MacPorts.
>  However, that is seemingly not possible right now (see http://trac.macports.org/projects/macports/ticket/14470)
>  .
>  As a Windows user until quite recently, MacPorts, Apache, python are
>  all very new to me. My question is whether there's an alternate way to
>  install mod_python on OS X beside MacPorts?

Do you really need mod_python? If the application you want to run can
be hosted on any WSGI capable hosting mechanism, easier to use
mod_wsgi at this point as it compiles and installs out of the box on
MacOS X without requiring MacPorts. See:

  http://www.modwsgi.org
  http://code.google.com/p/modwsgi/wiki/InstallationOnMacOSX

In general I would recommend against using MacPorts or fink, but
obviously if you aren't comfortable with compiling/install stuff
yourself that may be a problem.

Now, as to whether you can get mod_python working without MacPorts or
fink will depend on what version of MacOS X you are running. If using
10.4, can't be easily done unless you install Apache 2.2 yourself from
source code. If using 10.5, can be done, but requires some manual
changes to be made to makefiles if you are running with a 64bit Intel
(maybe 64bit PPC as well) chip.

Tell us what chip and OS version you are using and can be more
specific about mod_python.

Graham
From mark at mwilden.com  Mon Mar  3 19:43:13 2008
From: mark at mwilden.com (Wilden Mark)
Date: Mon Mar  3 19:43:35 2008
Subject: [mod_python] OS X install mod_python w/o MacPorts
In-Reply-To: <88e286470803031622o7273f374o2e151ece63649633@mail.gmail.com>
References: <D2F4ECE3-E51C-478D-BE47-276828061F28@mwilden.com>
	<88e286470803031622o7273f374o2e151ece63649633@mail.gmail.com>
Message-ID: <A1CD8135-7AD3-4C40-B51C-A8E3EDD6C40E@mwilden.com>


On Mar 3, 2008, at 4:22 PM, Graham Dumpleton wrote:

> On 04/03/2008, Wilden Mark <mark@mwilden.com> wrote:
>> I am trying to install mod_python on Mac OS X 10.5 using MacPorts.
>> However, that is seemingly not possible right now (see http://trac.macports.org/projects/macports/ticket/14470)
>> .
>> As a Windows user until quite recently, MacPorts, Apache, python are
>> all very new to me. My question is whether there's an alternate way  
>> to
>> install mod_python on OS X beside MacPorts?
>
> Do you really need mod_python?

I'm following the instructions for building a dev machine at my  
company, so it's probably required to use mod_python. I had no problem  
on a Windows box, of course, but I realize that on Mac/Linux it's more  
of a DIY situation. Let's just say that it's been seven years since I  
had to recompile the Linux kernel.

> In general I would recommend against using MacPorts or fink, but
> obviously if you aren't comfortable with compiling/install stuff
> yourself that may be a problem.

Interesting. I'm working on a Rails app (the python stuff is for a  
publishing server), and MacPorts seems fairly standard there ( http://www.robbyonrails.com/articles/2008/01/22/installing-ruby-on-rails-and-postgresql-on-os-x-third-edition 
  )

> Now, as to whether you can get mod_python working without MacPorts or
> fink will depend on what version of MacOS X you are running. If using
> 10.4, can't be easily done unless you install Apache 2.2 yourself from
> source code. If using 10.5, can be done, but requires some manual
> changes to be made to makefiles if you are running with a 64bit Intel
> (maybe 64bit PPC as well) chip.
>
> Tell us what chip and OS version you are using and can be more
> specific about mod_python.

Thanks, Graham - your help is much appreciated! I'm running Mac OS X  
10.5.2 on an Intel 32-bit processor (MacBook Pro). Of course, I have a  
message posted on the macports-users list, as well as a cry for help  
to the guy who convinced me to switch from Windows to OS X in the  
first place. :)

///ark
From graham.dumpleton at gmail.com  Mon Mar  3 19:56:32 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Mon Mar  3 19:56:38 2008
Subject: [mod_python] OS X install mod_python w/o MacPorts
In-Reply-To: <A1CD8135-7AD3-4C40-B51C-A8E3EDD6C40E@mwilden.com>
References: <D2F4ECE3-E51C-478D-BE47-276828061F28@mwilden.com>
	<88e286470803031622o7273f374o2e151ece63649633@mail.gmail.com>
	<A1CD8135-7AD3-4C40-B51C-A8E3EDD6C40E@mwilden.com>
Message-ID: <88e286470803031656l2eb2da86x89cf67f9ff44a238@mail.gmail.com>

On 04/03/2008, Wilden Mark <mark@mwilden.com> wrote:
>  > Now, as to whether you can get mod_python working without MacPorts or
>  > fink will depend on what version of MacOS X you are running. If using
>  > 10.4, can't be easily done unless you install Apache 2.2 yourself from
>  > source code. If using 10.5, can be done, but requires some manual
>  > changes to be made to makefiles if you are running with a 64bit Intel
>  > (maybe 64bit PPC as well) chip.
>  >
>  > Tell us what chip and OS version you are using and can be more
>  > specific about mod_python.
>
>
> Thanks, Graham - your help is much appreciated! I'm running Mac OS X
>  10.5.2 on an Intel 32-bit processor (MacBook Pro).

Is that an old MacBook Pro? Recent ones have 64bit chip.

> Of course, I have a
>  message posted on the macports-users list, as well as a cry for help
>  to the guy who convinced me to switch from Windows to OS X in the
>  first place. :)

If you are running 10.5.2 on an Intel 32bit processor then you should
be able to build mod_python from source tarball directly against the
version of Apache and Python supplied with Leopard.

Thus, fetch down tarball and unpack it. Then to make sure MacPorts
isn't screwing things up by being found first, run configure as:

  ./configure --with-python=/usr/bin/python --with-apxs=/usr/sbin/apxs

then:

  make
  sudo make install

Finally configure Apache to use mod_python.

Do be aware though that if trying to run that same module, compiled as
32 bit, on a 64 bit chip running Leopard, you will still run into the
problems talked about in that mod_wsgi on MacOS X document I pointed
you to.

Anyway, just try building it against standard OS Python and Apache and
if there are problems get back to us.

Graham
From luke at demonware.net  Mon Mar  3 20:18:03 2008
From: luke at demonware.net (Luke Burden)
Date: Mon Mar  3 20:18:08 2008
Subject: [mod_python] New Module Importer Woes
Message-ID: <fb502710803031718x1a8dd7a4le374c90cdc899f0b@mail.gmail.com>

Hi all,

I get swamped with ImportErrors when using the latest module importer
with mod_python 3.3 / apache 2.2 / python 2.5.

The site structure is quite flat - all the python source files in:
/var/www/sitename/src/

And all the psps in:

/var/www/sitename/src/psps/

The apache configuration is nothing special, and is thus:

<Directory "/var/www/sitename/src">
        SetHandler mod_python
        PythonHandler mainhandler
        PythonDebug On
        PythonInterpreter sitename
</Directory>

Import statements from .psp files in the psps directory are what are failing.
So for example, /var/www/sitename/src/psps/page.psp might have a line,
"import model", hoping to get it's sweaty hands on
/var/www/sitename/src/model.py.  But an ImportError will occur, of the
form:

======
Traceback (most recent call last):

  File "/usr/lib/python2.5/site-packages/mod_python/importer.py", line
1537, in HandlerDispatch
    default=default_handler, arg=req, silent=hlist.silent)

  File "/usr/lib/python2.5/site-packages/mod_python/importer.py", line
1229, in _process_target
    result = _execute_target(config, req, object, arg)

  File "/usr/lib/python2.5/site-packages/mod_python/importer.py", line
1128, in _execute_target
    result = object(arg)

  File "/var/www/sitename/src/mainhandler.py", line 290, in handler
    return genpages.page(req)

  File "/var/www/sitename/src/genpages.py", line 20, in page
    template.run(vars=vars)

  File "/usr/lib/python2.5/site-packages/mod_python/psp.py", line 243, in run
    exec code in global_scope

  File "/var/www/sitename/src/psps/page.psp", line 2, in <module>
    import model

ImportError: No module named model
======

The frustrating thing is, in the module cache dump, you can see
model.py has been loaded successfully already so it's in scope.

I've tried apache directives to add the src folder to the importer
path, but haven't had any success with that.
Any suggestions anyone?  Is there a better way of structuring modules
/ psps to be mod_python 3.3 compatible?  Any advice really
appreciated, thanks.

- luke
From graham.dumpleton at gmail.com  Mon Mar  3 20:25:04 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Mon Mar  3 20:25:10 2008
Subject: [mod_python] New Module Importer Woes
In-Reply-To: <fb502710803031718x1a8dd7a4le374c90cdc899f0b@mail.gmail.com>
References: <fb502710803031718x1a8dd7a4le374c90cdc899f0b@mail.gmail.com>
Message-ID: <88e286470803031725g74d08482pf763c1345a19aeb6@mail.gmail.com>

Apply fix in:

  https://issues.apache.org/jira/browse/MODPYTHON-220

Graham

On 04/03/2008, Luke Burden <luke@demonware.net> wrote:
> Hi all,
>
>  I get swamped with ImportErrors when using the latest module importer
>  with mod_python 3.3 / apache 2.2 / python 2.5.
>
>  The site structure is quite flat - all the python source files in:
>  /var/www/sitename/src/
>
>  And all the psps in:
>
>  /var/www/sitename/src/psps/
>
>  The apache configuration is nothing special, and is thus:
>
>  <Directory "/var/www/sitename/src">
>         SetHandler mod_python
>         PythonHandler mainhandler
>         PythonDebug On
>         PythonInterpreter sitename
>  </Directory>
>
>  Import statements from .psp files in the psps directory are what are failing.
>  So for example, /var/www/sitename/src/psps/page.psp might have a line,
>  "import model", hoping to get it's sweaty hands on
>  /var/www/sitename/src/model.py.  But an ImportError will occur, of the
>  form:
>
>  ======
>  Traceback (most recent call last):
>
>   File "/usr/lib/python2.5/site-packages/mod_python/importer.py", line
>  1537, in HandlerDispatch
>     default=default_handler, arg=req, silent=hlist.silent)
>
>   File "/usr/lib/python2.5/site-packages/mod_python/importer.py", line
>  1229, in _process_target
>     result = _execute_target(config, req, object, arg)
>
>   File "/usr/lib/python2.5/site-packages/mod_python/importer.py", line
>  1128, in _execute_target
>     result = object(arg)
>
>   File "/var/www/sitename/src/mainhandler.py", line 290, in handler
>     return genpages.page(req)
>
>   File "/var/www/sitename/src/genpages.py", line 20, in page
>     template.run(vars=vars)
>
>   File "/usr/lib/python2.5/site-packages/mod_python/psp.py", line 243, in run
>     exec code in global_scope
>
>   File "/var/www/sitename/src/psps/page.psp", line 2, in <module>
>     import model
>
>  ImportError: No module named model
>  ======
>
>  The frustrating thing is, in the module cache dump, you can see
>  model.py has been loaded successfully already so it's in scope.
>
>  I've tried apache directives to add the src folder to the importer
>  path, but haven't had any success with that.
>  Any suggestions anyone?  Is there a better way of structuring modules
>  / psps to be mod_python 3.3 compatible?  Any advice really
>  appreciated, thanks.
>
>  - luke
>  _______________________________________________
>  Mod_python mailing list
>  Mod_python@modpython.org
>  http://mailman.modpython.org/mailman/listinfo/mod_python
>
From graham.dumpleton at gmail.com  Mon Mar  3 20:33:44 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Mon Mar  3 20:33:51 2008
Subject: [mod_python] OS X install mod_python w/o MacPorts
In-Reply-To: <91A61EA1-5D69-492D-AB01-5186962A6F5F@mwilden.com>
References: <D2F4ECE3-E51C-478D-BE47-276828061F28@mwilden.com>
	<88e286470803031622o7273f374o2e151ece63649633@mail.gmail.com>
	<A1CD8135-7AD3-4C40-B51C-A8E3EDD6C40E@mwilden.com>
	<88e286470803031656l2eb2da86x89cf67f9ff44a238@mail.gmail.com>
	<91A61EA1-5D69-492D-AB01-5186962A6F5F@mwilden.com>
Message-ID: <88e286470803031733i36c76ee6n7b53bf31c70b88e6@mail.gmail.com>

On 04/03/2008, Wilden Mark <mark@mwilden.com> wrote:
> Very kind of you to take this trouble, Graham - thanks.
>
>  Yes, it's a recent (like one-month-old) MacBook Pro. The actual CPU
>  name is "Intel Core 2 Duo", which to my surprise is "64-bit capable".
>  Who knew? :)

Then you need to apply patches.

>  Since my root problem is with apr, I tried to build it, and apparently
>  was successful. However, I now have no idea what to do next. :)
>  MacPorts is still trying to build it before building mod_python.
>
>  So I'm going to take a big step back and try to learn how to build
>  stuff without MacPorts. Your instructions are a great starting point,
>  and again, I appreciate it very much!

Apply patches described in:

  http://www.modpython.org/pipermail/mod_python/2007-October/024394.html
  http://www.modpython.org/pipermail/mod_python/2008-January/024635.html

In summary, modify src/Makefile and add appropriate -arch and
-Wc,-arch options to CFLAGS and LDFLAGS. Also modify dist/setup.py.in
and add appropriate -arch options to PSPExtension class.

Would suggest making it full fat and add all architecture options. Ie., CFLAGS:

  -Wc,"-arch ppc" -Wc,"-arch ppc64" -Wc,"-arch i386" -Wc,"-arch x86_64"

in LDFLAGS:

  -arch ppc -arch ppc64 -arch i386 -arch x86_64

Similarly with setup.py.in.

Rerun configure after making changes.

Graham

>  Best,
>
>  ///ark
>
>
>  On Mar 3, 2008, at 4:56 PM, Graham Dumpleton wrote:
>
>  > On 04/03/2008, Wilden Mark <mark@mwilden.com> wrote:
>  >>> Now, as to whether you can get mod_python working without MacPorts
>  >>> or
>  >>> fink will depend on what version of MacOS X you are running. If
>  >>> using
>  >>> 10.4, can't be easily done unless you install Apache 2.2 yourself
>  >>> from
>  >>> source code. If using 10.5, can be done, but requires some manual
>  >>> changes to be made to makefiles if you are running with a 64bit
>  >>> Intel
>  >>> (maybe 64bit PPC as well) chip.
>  >>>
>  >>> Tell us what chip and OS version you are using and can be more
>  >>> specific about mod_python.
>  >>
>  >>
>  >> Thanks, Graham - your help is much appreciated! I'm running Mac OS X
>  >> 10.5.2 on an Intel 32-bit processor (MacBook Pro).
>  >
>  > Is that an old MacBook Pro? Recent ones have 64bit chip.
>  >
>  >> Of course, I have a
>  >> message posted on the macports-users list, as well as a cry for help
>  >> to the guy who convinced me to switch from Windows to OS X in the
>  >> first place. :)
>  >
>  > If you are running 10.5.2 on an Intel 32bit processor then you should
>  > be able to build mod_python from source tarball directly against the
>  > version of Apache and Python supplied with Leopard.
>  >
>  > Thus, fetch down tarball and unpack it. Then to make sure MacPorts
>  > isn't screwing things up by being found first, run configure as:
>  >
>  >  ./configure --with-python=/usr/bin/python --with-apxs=/usr/sbin/apxs
>  >
>  > then:
>  >
>  >  make
>  >  sudo make install
>  >
>  > Finally configure Apache to use mod_python.
>  >
>  > Do be aware though that if trying to run that same module, compiled as
>  > 32 bit, on a 64 bit chip running Leopard, you will still run into the
>  > problems talked about in that mod_wsgi on MacOS X document I pointed
>  > you to.
>  >
>  > Anyway, just try building it against standard OS Python and Apache and
>  > if there are problems get back to us.
>  >
>  > Graham
>  >
>
>
From graham.dumpleton at gmail.com  Mon Mar  3 20:53:12 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Mon Mar  3 20:53:19 2008
Subject: [mod_python] New Module Importer Woes
In-Reply-To: <fb502710803031748s18336ee7m14b683f58382a3f4@mail.gmail.com>
References: <fb502710803031718x1a8dd7a4le374c90cdc899f0b@mail.gmail.com>
	<88e286470803031725g74d08482pf763c1345a19aeb6@mail.gmail.com>
	<fb502710803031748s18336ee7m14b683f58382a3f4@mail.gmail.com>
Message-ID: <88e286470803031753m4b023152v8442ecb98df03cec@mail.gmail.com>

On 04/03/2008, Luke Burden <luke@demonware.net> wrote:
> Thanks for pointing me to that, Graham.
>
>  That's quite a significant change .. is it meant to be a strong hint
>  that we shouldn't be importing from within .psp files?

No.

>  The fix described - is it necessary to setup the magic variables that
>  the import statement looks to use per PSP, or are these mod_python
>  module variables we can set once and so avoid having to change code?

The mod_python code should be changed. The code should have been in
mod_python 3.3.1 to begin with but got missed. It should make it into
a future version whenever that might be done. No one is really active
on mod_python development at the moment so not sure when that might
be.

>  What is the better path to take here for future compatibility?  The
>  magic variable path, or the user of apache.import_module("module")?

Ideally 'import' should just work as it always used to, thus why it is
better that patch be made to mod_python code.

Graham

>  Much appreciated ..
>
>  - luke
>
>
>  On 3/3/08, Graham Dumpleton <graham.dumpleton@gmail.com> wrote:
>  > Apply fix in:
>  >
>  >   https://issues.apache.org/jira/browse/MODPYTHON-220
>  >
>  >  Graham
>  >
>  >
>  >  On 04/03/2008, Luke Burden <luke@demonware.net> wrote:
>  >  > Hi all,
>  >  >
>  >  >  I get swamped with ImportErrors when using the latest module importer
>  >  >  with mod_python 3.3 / apache 2.2 / python 2.5.
>  >  >
>  >  >  The site structure is quite flat - all the python source files in:
>  >  >  /var/www/sitename/src/
>  >  >
>  >  >  And all the psps in:
>  >  >
>  >  >  /var/www/sitename/src/psps/
>  >  >
>  >  >  The apache configuration is nothing special, and is thus:
>  >  >
>  >  >  <Directory "/var/www/sitename/src">
>  >  >         SetHandler mod_python
>  >  >         PythonHandler mainhandler
>  >  >         PythonDebug On
>  >  >         PythonInterpreter sitename
>  >  >  </Directory>
>  >  >
>  >  >  Import statements from .psp files in the psps directory are what are failing.
>  >  >  So for example, /var/www/sitename/src/psps/page.psp might have a line,
>  >  >  "import model", hoping to get it's sweaty hands on
>  >  >  /var/www/sitename/src/model.py.  But an ImportError will occur, of the
>  >  >  form:
>  >  >
>  >  >  ======
>  >  >  Traceback (most recent call last):
>  >  >
>  >  >   File "/usr/lib/python2.5/site-packages/mod_python/importer.py", line
>  >  >  1537, in HandlerDispatch
>  >  >     default=default_handler, arg=req, silent=hlist.silent)
>  >  >
>  >  >   File "/usr/lib/python2.5/site-packages/mod_python/importer.py", line
>  >  >  1229, in _process_target
>  >  >     result = _execute_target(config, req, object, arg)
>  >  >
>  >  >   File "/usr/lib/python2.5/site-packages/mod_python/importer.py", line
>  >  >  1128, in _execute_target
>  >  >     result = object(arg)
>  >  >
>  >  >   File "/var/www/sitename/src/mainhandler.py", line 290, in handler
>  >  >     return genpages.page(req)
>  >  >
>  >  >   File "/var/www/sitename/src/genpages.py", line 20, in page
>  >  >     template.run(vars=vars)
>  >  >
>  >  >   File "/usr/lib/python2.5/site-packages/mod_python/psp.py", line 243, in run
>  >  >     exec code in global_scope
>  >  >
>  >  >   File "/var/www/sitename/src/psps/page.psp", line 2, in <module>
>  >  >     import model
>  >  >
>  >  >  ImportError: No module named model
>  >  >  ======
>  >  >
>  >  >  The frustrating thing is, in the module cache dump, you can see
>  >  >  model.py has been loaded successfully already so it's in scope.
>  >  >
>  >  >  I've tried apache directives to add the src folder to the importer
>  >  >  path, but haven't had any success with that.
>  >  >  Any suggestions anyone?  Is there a better way of structuring modules
>  >  >  / psps to be mod_python 3.3 compatible?  Any advice really
>  >  >  appreciated, thanks.
>  >  >
>  >  >  - luke
>  >
>  > >  _______________________________________________
>  >  >  Mod_python mailing list
>  >  >  Mod_python@modpython.org
>  >  >  http://mailman.modpython.org/mailman/listinfo/mod_python
>  >  >
>  >
>
> >  ______________________________________________________________________
>  >  This email has been scanned by the MessageLabs Email Security System.
>  >  For more information please visit http://www.messagelabs.com/email
>  >  ______________________________________________________________________
>  >
>  >  ______________________________________________________________________
>  >  This email has been scanned by the MessageLabs Email Security System.
>  >  For more information please visit http://www.messagelabs.com/email
>  >  ______________________________________________________________________
>  >
>
From auther_bin at 21cn.com  Mon Mar  3 21:11:39 2008
From: auther_bin at 21cn.com (auther_bin)
Date: Mon Mar  3 21:14:13 2008
Subject: [mod_python] Help about apache mod_python Segmentation
	fault
References: <200802271315514506355@21cn.com>,
	<88e286470802262129s77d47709p5518fa57ae0abc0d@mail.gmail.com>,
	<200803031527192023415@21cn.com>,
	<88e286470803030118g6d051cc5q48446f12dd928cd0@mail.gmail.com>
Message-ID: <200803041011371932880@21cn.com>

Hi, Graham Dumpleton!

¡¡¡¡Thanks for your help first, but the problem is still there. here is my testing steps:

I read carefully of the URL you give me: http://code.google.com/p/modwsgi/wiki/InstallationIssues
and re-compiling the python2.5 --enable-shared, and get python libpython2.5.so install, when I testing python like:

=====================================================================
# python
Python 2.5 (r25:51908, Mar  4 2008, 08:56:31) 
[GCC 3.4.4] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> testi=1
>>> if testi==1:
...  print "hello test"
... 
hello test
>>> <ctl-d>
# ldd python
		libpython2.5.so.1.0 => not found
        libpthread.so.0 => /lib/libpthread.so.0 (0x40023000)
        libdl.so.0 => not found
        libutil.so.0 => not found
        libm.so.0 => not found
        libc.so.0 => not found
        libc.so.6 => /lib/libc.so.6 (0x40076000)
        /lib/ld-linux.so.2 => /lib/ld-linux.so.2 (0x40000000)
# ## for the libs is installed in an embeded path so some of them could not be found
# ls -F /bin/lib/python2.5/config
Makefile         config.c         libpython2.5.a   python.o
Setup            config.c.in      libpython2.5.so@
Setup.local      install-sh*      makesetup*
=====================================================================

when I run "httpd -X" it's still gives an Segmentation fault :(
anything else could be found about this crash?
or I give you an ssh login to my host :)

======= 2008-03-03 wrote =======

>In gdb, instead of 'where', try:
>
>  thread apply all bt
>
>in case gdb isn't throwing you into the correct thread context.
>
>BTW, does the Python on the environment that crashes provide a shared
>library? For what I am talking about see:
>
>  http://code.google.com/p/modwsgi/wiki/InstallationIssues
>
>This is documentation from mod_wsgi but same problems apply to mod_python.
>
>Graham
>
>On 03/03/2008, auther_bin <auther_bin@21cn.com> wrote:
>>
>>
>> Hi Graham Dumpleton,
>>
>> And, when I debug in RedHat9 and my embeded
>> envirenment, the main process goes
>> different!?
>>
>> in Redhat9, run like:
>>
>>
>> (gdb) b main
>> Breakpoint 1 at 0x8067a40: file main.c, line 438.
>> (gdb) run -X
>> Starting program: /usr/local/apache2/bin/httpd -X
>> [New Thread 1076592288 (LWP 1049)]
>> [Switching to Thread 1076592288 (LWP 1049)]
>>
>> Breakpoint 1, main (argc=134642240, argv=0x2) at main.c:438
>> 438     {
>> (gdb) n
>> 272         stat = apr_app_initialize(argc, argv, NULL);
>>
>> and in my embeded system runs like:
>>
>>
>>
>> Breakpoint 1, main (argc=2, argv=0xbffff294)
>>     at
>> /usr/src/build/snapgear/user/apache/server/main.c:441
>> 441         int configtestonly = 0;
>> (gdb) n
>> 442         const char *confname = SERVER_CONFIG_FILE;
>>
>>
>>
>> it seems that, the hosting system doing something for init before the main
>> function run, but embeded system do not?
>>
>> I thinks is here somthing wrong? or there should be some compiling
>> parameters I missed?
>>
>> ======= 2008-02-27 wrote: =======
>>
>>
>> >On 27/02/2008, auther_bin  <auther_bin@21cn.com > wrote:
>> > > Dear friends,
>> > >
>> > >         When I compiling the apache python mod_python
>> and install it into my uClibc
>> envirentment,
>> but when I
>> > >  runing httpd -X, send a very little request with
>> index.html it crashed. after some debuging work,
>> I find there should be something wrong in mod_python.c
>> line(about 1561) which looks like:
>> > >  --------------------------------- with my debug
>> printing :) ------------------------
>> > >  printf("JJJJJJJJ %s - > python_handler\n", phase);
>> > >  printf("JJJJJJJJ %x[%d]\n", &req- >per_dir_config,
>> (&python_module)- >module_index);
>> > >     /* get configuration */
>> > >     conf = (py_config *) ap_get_module_config(req-
>> >per_dir_config,
>> > >
>> &python_module);
>> > >  printf("JJJJJJJJ a %s conf=%x - > python_handler\n",
>> phase,conf);
>> > >  .............
>> > >  ------------------------------ end source
>> --------------------------------------
>> > >
>> > >  I guess that, there should be a regester error in
>> it. with some debug message I print:
>> > >  ------------- printing -------------------------------
>> > >  JJJJJJJJJ PythonPostReadRequestHandler
>> > >  JJJJJJJJ PythonInitHandler - > python_handler
>> > >  JJJJJJJJ 820a544[29]
>> > >  Segmentation fault
>> > >  ------------- end printing ---------------------------
>> > >
>> > >  any advices pls?
>> >
>> >Unfortunately that doesn't help much.
>> >
>> >You need a stack trace to show the true location
>> in code.
>> >
>> >Use procedure documented in section 'Debugging
>> Crashes With GDB' of:
>> >
>> >
>> http://code.google.com/p/modwsgi/wiki/DebuggingTechniques
>> >
>> >to run up httpd inside of gdb and get a stack trace
>> of where crash is occurring.
>> >
>> >This documentation is for mod_wgsi, but same procedure
>> used for mod_python.
>> >
>> >There is a similar procedure documented on Apache
>> site, but can't
>> >remember where.
>> >
>> >Graham
>> >
>> >
>> >__________ NOD32 2906 (20080227) Information
>> __________
>> >
>> >This message was checked by NOD32 antivirus system.
>> >http://www.nod32cn.com
>> >
>> >
>>
>> = = = = = = = = = = = = = = = = = = = =
>>
>>
>>                     ÖÂ
>> Àñ£¡
>> 2008-03-03
>>
>> _______________________________________________
>> Mod_python mailing list
>> Mod_python@modpython.org
>> http://mailman.modpython.org/mailman/listinfo/mod_python
>>
>>
>> __________ NOD32 2915 (20080303) Information __________
>>
>> This message was checked by NOD32 antivirus system.
>> http://www.nod32cn.com
>>
>>
>> _______________________________________________
>>  Mod_python mailing list
>>  Mod_python@modpython.org
>>  http://mailman.modpython.org/mailman/listinfo/mod_python
>>
>>

= = = = = = = = = = = = = = = = = = = =
			

                    ÖÂ
Àñ£¡
		2008-03-04 

From graham.dumpleton at gmail.com  Mon Mar  3 22:56:37 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Mon Mar  3 22:56:44 2008
Subject: [mod_python] Help about apache mod_python Segmentation
	fault
In-Reply-To: <200803041011371932880@21cn.com>
References: <200802271315514506355@21cn.com>
	<88e286470802262129s77d47709p5518fa57ae0abc0d@mail.gmail.com>
	<200803031527192023415@21cn.com>
	<88e286470803030118g6d051cc5q48446f12dd928cd0@mail.gmail.com>
	<200803041011371932880@21cn.com>
Message-ID: <88e286470803031956s4a48a04en23835a1ed99a5f88@mail.gmail.com>

On 04/03/2008, auther_bin <auther_bin@21cn.com> wrote:
> Hi, Graham Dumpleton!
>
>  Thanks for your help first, but the problem is still there. here is my testing steps:
>
>  I read carefully of the URL you give me: http://code.google.com/p/modwsgi/wiki/InstallationIssues
>  and re-compiling the python2.5 --enable-shared, and get python libpython2.5.so install, when I testing python like:
>
>  =====================================================================
>  # python
>  Python 2.5 (r25:51908, Mar  4 2008, 08:56:31)
>  [GCC 3.4.4] on linux2
>  Type "help", "copyright", "credits" or "license" for more information.
>  >>> testi=1
>  >>> if testi==1:
>  ...  print "hello test"
>  ...
>  hello test
>  >>> <ctl-d>
>  # ldd python
>                 libpython2.5.so.1.0 => not found

Where is your libpython2.5.so installed? Not your sylimk, but what the
symlink points at.

>         libpthread.so.0 => /lib/libpthread.so.0 (0x40023000)
>         libdl.so.0 => not found
>         libutil.so.0 => not found
>         libm.so.0 => not found
>         libc.so.0 => not found

Your operating system installation is severely crippled or broken if
these standard libraries cannot be found. Are you stuck with using
uClibc or can you use something else?

>         libc.so.6 => /lib/libc.so.6 (0x40076000)
>         /lib/ld-linux.so.2 => /lib/ld-linux.so.2 (0x40000000)
>  # ## for the libs is installed in an embeded path so some of them could not be found
>  # ls -F /bin/lib/python2.5/config

Why is this under /bin/lib? That isn't the standard location for this
sort off stuff and if libpython2.5.so is in /bin/lib it will not be
found.

Graham

>  Makefile         config.c         libpython2.5.a   python.o
>  Setup            config.c.in      libpython2.5.so@
>  Setup.local      install-sh*      makesetup*
>  =====================================================================
>
>  when I run "httpd -X" it's still gives an Segmentation fault :(
>  anything else could be found about this crash?
>  or I give you an ssh login to my host :)
>
>  ======= 2008-03-03 wrote =======
>
>
>  >In gdb, instead of 'where', try:
>  >
>  >  thread apply all bt
>  >
>  >in case gdb isn't throwing you into the correct thread context.
>  >
>  >BTW, does the Python on the environment that crashes provide a shared
>  >library? For what I am talking about see:
>  >
>  >  http://code.google.com/p/modwsgi/wiki/InstallationIssues
>  >
>  >This is documentation from mod_wsgi but same problems apply to mod_python.
>  >
>  >Graham
>  >
>  >On 03/03/2008, auther_bin <auther_bin@21cn.com> wrote:
>  >>
>  >>
>  >> Hi Graham Dumpleton,
>  >>
>  >> And, when I debug in RedHat9 and my embeded
>  >> envirenment, the main process goes
>  >> different!?
>  >>
>  >> in Redhat9, run like:
>  >>
>  >>
>  >> (gdb) b main
>  >> Breakpoint 1 at 0x8067a40: file main.c, line 438.
>  >> (gdb) run -X
>  >> Starting program: /usr/local/apache2/bin/httpd -X
>  >> [New Thread 1076592288 (LWP 1049)]
>  >> [Switching to Thread 1076592288 (LWP 1049)]
>  >>
>  >> Breakpoint 1, main (argc=134642240, argv=0x2) at main.c:438
>  >> 438     {
>  >> (gdb) n
>  >> 272         stat = apr_app_initialize(argc, argv, NULL);
>  >>
>  >> and in my embeded system runs like:
>  >>
>  >>
>  >>
>  >> Breakpoint 1, main (argc=2, argv=0xbffff294)
>  >>     at
>  >> /usr/src/build/snapgear/user/apache/server/main.c:441
>  >> 441         int configtestonly = 0;
>  >> (gdb) n
>  >> 442         const char *confname = SERVER_CONFIG_FILE;
>  >>
>  >>
>  >>
>  >> it seems that, the hosting system doing something for init before the main
>  >> function run, but embeded system do not?
>  >>
>  >> I thinks is here somthing wrong? or there should be some compiling
>  >> parameters I missed?
>  >>
>  >> ======= 2008-02-27 wrote: =======
>  >>
>  >>
>  >> >On 27/02/2008, auther_bin  <auther_bin@21cn.com > wrote:
>  >> > > Dear friends,
>  >> > >
>  >> > >         When I compiling the apache python mod_python
>  >> and install it into my uClibc
>  >> envirentment,
>  >> but when I
>  >> > >  runing httpd -X, send a very little request with
>  >> index.html it crashed. after some debuging work,
>  >> I find there should be something wrong in mod_python.c
>  >> line(about 1561) which looks like:
>  >> > >  --------------------------------- with my debug
>  >> printing :) ------------------------
>  >> > >  printf("JJJJJJJJ %s - > python_handler\n", phase);
>  >> > >  printf("JJJJJJJJ %x[%d]\n", &req- >per_dir_config,
>  >> (&python_module)- >module_index);
>  >> > >     /* get configuration */
>  >> > >     conf = (py_config *) ap_get_module_config(req-
>  >> >per_dir_config,
>  >> > >
>  >> &python_module);
>  >> > >  printf("JJJJJJJJ a %s conf=%x - > python_handler\n",
>  >> phase,conf);
>  >> > >  .............
>  >> > >  ------------------------------ end source
>  >> --------------------------------------
>  >> > >
>  >> > >  I guess that, there should be a regester error in
>  >> it. with some debug message I print:
>  >> > >  ------------- printing -------------------------------
>  >> > >  JJJJJJJJJ PythonPostReadRequestHandler
>  >> > >  JJJJJJJJ PythonInitHandler - > python_handler
>  >> > >  JJJJJJJJ 820a544[29]
>  >> > >  Segmentation fault
>  >> > >  ------------- end printing ---------------------------
>  >> > >
>  >> > >  any advices pls?
>  >> >
>  >> >Unfortunately that doesn't help much.
>  >> >
>  >> >You need a stack trace to show the true location
>  >> in code.
>  >> >
>  >> >Use procedure documented in section 'Debugging
>  >> Crashes With GDB' of:
>  >> >
>  >> >
>  >> http://code.google.com/p/modwsgi/wiki/DebuggingTechniques
>  >> >
>  >> >to run up httpd inside of gdb and get a stack trace
>  >> of where crash is occurring.
>  >> >
>  >> >This documentation is for mod_wgsi, but same procedure
>  >> used for mod_python.
>  >> >
>  >> >There is a similar procedure documented on Apache
>  >> site, but can't
>  >> >remember where.
>  >> >
>  >> >Graham
>  >> >
>  >> >
>  >> >__________ NOD32 2906 (20080227) Information
>  >> __________
>  >> >
>  >> >This message was checked by NOD32 antivirus system.
>  >> >http://www.nod32cn.com
>  >> >
>  >> >
>  >>
>  >> = = = = = = = = = = = = = = = = = = = =
>  >>
>  >>
>  >>                     ÖÂ
>  >> Àñ£¡
>  >> 2008-03-03
>  >>
>  >> _______________________________________________
>  >> Mod_python mailing list
>  >> Mod_python@modpython.org
>  >> http://mailman.modpython.org/mailman/listinfo/mod_python
>  >>
>  >>
>  >> __________ NOD32 2915 (20080303) Information __________
>  >>
>  >> This message was checked by NOD32 antivirus system.
>  >> http://www.nod32cn.com
>  >>
>  >>
>  >> _______________________________________________
>  >>  Mod_python mailing list
>  >>  Mod_python@modpython.org
>  >>  http://mailman.modpython.org/mailman/listinfo/mod_python
>  >>
>  >>
>
>
> = = = = = = = = = = = = = = = = = = = =
>
>
>                     ÖÂ
>  Àñ£¡
>                 2008-03-04
>
>
>  _______________________________________________
>  Mod_python mailing list
>  Mod_python@modpython.org
>  http://mailman.modpython.org/mailman/listinfo/mod_python
>

From auther_bin at 21cn.com  Mon Mar  3 23:42:01 2008
From: auther_bin at 21cn.com (auther_bin)
Date: Mon Mar  3 23:44:29 2008
Subject: [mod_python] Help about apache mod_python Segmentation
	fault
References: <200802271315514506355@21cn.com>,
	<88e286470802262129s77d47709p5518fa57ae0abc0d@mail.gmail.com>,
	<200803031527192023415@21cn.com>,
	<88e286470803030118g6d051cc5q48446f12dd928cd0@mail.gmail.com>,
	<200803041011371932880@21cn.com>,
	<88e286470803031956s4a48a04en23835a1ed99a5f88@mail.gmail.com>
Message-ID: <200803041241593962724@21cn.com>

Hi, Graham Dumpleton!

¡¡¡¡For I am in an embeded system with chroot. And I don't know clearly why python looking for the libs in /bin/lib ( find in strace, it first looking into /bin/lib/python2.5 ) so I placed it there. Let me try if I move it into /usr/local/lib ....

======= 2008-03-04 wrote =======

>On 04/03/2008, auther_bin <auther_bin@21cn.com> wrote:
>> Hi, Graham Dumpleton!
>>
>>  Thanks for your help first, but the problem is still there. here is my testing steps:
>>
>>  I read carefully of the URL you give me: http://code.google.com/p/modwsgi/wiki/InstallationIssues
>>  and re-compiling the python2.5 --enable-shared, and get python libpython2.5.so install, when I testing python like:
>>
>>  =====================================================================
>>  # python
>>  Python 2.5 (r25:51908, Mar  4 2008, 08:56:31)
>>  [GCC 3.4.4] on linux2
>>  Type "help", "copyright", "credits" or "license" for more information.
>>  >>> testi=1
>>  >>> if testi==1:
>>  ...  print "hello test"
>>  ...
>>  hello test
>>  >>> <ctl-d>
>>  # ldd python
>>                 libpython2.5.so.1.0 => not found
>
>Where is your libpython2.5.so installed? Not your sylimk, but what the
>symlink points at.
>
>>         libpthread.so.0 => /lib/libpthread.so.0 (0x40023000)
>>         libdl.so.0 => not found
>>         libutil.so.0 => not found
>>         libm.so.0 => not found
>>         libc.so.0 => not found
>
>Your operating system installation is severely crippled or broken if
>these standard libraries cannot be found. Are you stuck with using
>uClibc or can you use something else?
>
>>         libc.so.6 => /lib/libc.so.6 (0x40076000)
>>         /lib/ld-linux.so.2 => /lib/ld-linux.so.2 (0x40000000)
>>  # ## for the libs is installed in an embeded path so some of them could not be found
>>  # ls -F /bin/lib/python2.5/config
>
>Why is this under /bin/lib? That isn't the standard location for this
>sort off stuff and if libpython2.5.so is in /bin/lib it will not be
>found.
>
>Graham
>
>>  Makefile         config.c         libpython2.5.a   python.o
>>  Setup            config.c.in      libpython2.5.so@
>>  Setup.local      install-sh*      makesetup*
>>  =====================================================================
>>
>>  when I run "httpd -X" it's still gives an Segmentation fault :(
>>  anything else could be found about this crash?
>>  or I give you an ssh login to my host :)
>>
>>  ======= 2008-03-03 wrote =======
>>
>>
>>  >In gdb, instead of 'where', try:
>>  >
>>  >  thread apply all bt
>>  >
>>  >in case gdb isn't throwing you into the correct thread context.
>>  >
>>  >BTW, does the Python on the environment that crashes provide a shared
>>  >library? For what I am talking about see:
>>  >
>>  >  http://code.google.com/p/modwsgi/wiki/InstallationIssues
>>  >
>>  >This is documentation from mod_wsgi but same problems apply to mod_python.
>>  >
>>  >Graham
>>  >
>>  >On 03/03/2008, auther_bin <auther_bin@21cn.com> wrote:
>>  >>
>>  >>
>>  >> Hi Graham Dumpleton,
>>  >>
>>  >> And, when I debug in RedHat9 and my embeded
>>  >> envirenment, the main process goes
>>  >> different!?
>>  >>
>>  >> in Redhat9, run like:
>>  >>
>>  >>
>>  >> (gdb) b main
>>  >> Breakpoint 1 at 0x8067a40: file main.c, line 438.
>>  >> (gdb) run -X
>>  >> Starting program: /usr/local/apache2/bin/httpd -X
>>  >> [New Thread 1076592288 (LWP 1049)]
>>  >> [Switching to Thread 1076592288 (LWP 1049)]
>>  >>
>>  >> Breakpoint 1, main (argc=134642240, argv=0x2) at main.c:438
>>  >> 438     {
>>  >> (gdb) n
>>  >> 272         stat = apr_app_initialize(argc, argv, NULL);
>>  >>
>>  >> and in my embeded system runs like:
>>  >>
>>  >>
>>  >>
>>  >> Breakpoint 1, main (argc=2, argv=0xbffff294)
>>  >>     at
>>  >> /usr/src/build/snapgear/user/apache/server/main.c:441
>>  >> 441         int configtestonly = 0;
>>  >> (gdb) n
>>  >> 442         const char *confname = SERVER_CONFIG_FILE;
>>  >>
>>  >>
>>  >>
>>  >> it seems that, the hosting system doing something for init before the main
>>  >> function run, but embeded system do not?
>>  >>
>>  >> I thinks is here somthing wrong? or there should be some compiling
>>  >> parameters I missed?
>>  >>
>>  >> ======= 2008-02-27 wrote: =======
>>  >>
>>  >>
>>  >> >On 27/02/2008, auther_bin  <auther_bin@21cn.com > wrote:
>>  >> > > Dear friends,
>>  >> > >
>>  >> > >         When I compiling the apache python mod_python
>>  >> and install it into my uClibc
>>  >> envirentment,
>>  >> but when I
>>  >> > >  runing httpd -X, send a very little request with
>>  >> index.html it crashed. after some debuging work,
>>  >> I find there should be something wrong in mod_python.c
>>  >> line(about 1561) which looks like:
>>  >> > >  --------------------------------- with my debug
>>  >> printing :) ------------------------
>>  >> > >  printf("JJJJJJJJ %s - > python_handler\n", phase);
>>  >> > >  printf("JJJJJJJJ %x[%d]\n", &req- >per_dir_config,
>>  >> (&python_module)- >module_index);
>>  >> > >     /* get configuration */
>>  >> > >     conf = (py_config *) ap_get_module_config(req-
>>  >> >per_dir_config,
>>  >> > >
>>  >> &python_module);
>>  >> > >  printf("JJJJJJJJ a %s conf=%x - > python_handler\n",
>>  >> phase,conf);
>>  >> > >  .............
>>  >> > >  ------------------------------ end source
>>  >> --------------------------------------
>>  >> > >
>>  >> > >  I guess that, there should be a regester error in
>>  >> it. with some debug message I print:
>>  >> > >  ------------- printing -------------------------------
>>  >> > >  JJJJJJJJJ PythonPostReadRequestHandler
>>  >> > >  JJJJJJJJ PythonInitHandler - > python_handler
>>  >> > >  JJJJJJJJ 820a544[29]
>>  >> > >  Segmentation fault
>>  >> > >  ------------- end printing ---------------------------
>>  >> > >
>>  >> > >  any advices pls?
>>  >> >
>>  >> >Unfortunately that doesn't help much.
>>  >> >
>>  >> >You need a stack trace to show the true location
>>  >> in code.
>>  >> >
>>  >> >Use procedure documented in section 'Debugging
>>  >> Crashes With GDB' of:
>>  >> >
>>  >> >
>>  >> http://code.google.com/p/modwsgi/wiki/DebuggingTechniques
>>  >> >
>>  >> >to run up httpd inside of gdb and get a stack trace
>>  >> of where crash is occurring.
>>  >> >
>>  >> >This documentation is for mod_wgsi, but same procedure
>>  >> used for mod_python.
>>  >> >
>>  >> >There is a similar procedure documented on Apache
>>  >> site, but can't
>>  >> >remember where.
>>  >> >
>>  >> >Graham
>>  >> >
>>  >> >
>>  >> >__________ NOD32 2906 (20080227) Information
>>  >> __________
>>  >> >
>>  >> >This message was checked by NOD32 antivirus system.
>>  >> >http://www.nod32cn.com
>>  >> >
>>  >> >
>>  >>
>>  >> = = = = = = = = = = = = = = = = = = = =
>>  >>
>>  >>
>>  >>                     ÖÂ
>>  >> Àñ£¡
>>  >> 2008-03-03
>>  >>
>>  >> _______________________________________________
>>  >> Mod_python mailing list
>>  >> Mod_python@modpython.org
>>  >> http://mailman.modpython.org/mailman/listinfo/mod_python
>>  >>
>>  >>
>>  >> __________ NOD32 2915 (20080303) Information __________
>>  >>
>>  >> This message was checked by NOD32 antivirus system.
>>  >> http://www.nod32cn.com
>>  >>
>>  >>
>>  >> _______________________________________________
>>  >>  Mod_python mailing list
>>  >>  Mod_python@modpython.org
>>  >>  http://mailman.modpython.org/mailman/listinfo/mod_python
>>  >>
>>  >>
>>
>>
>> = = = = = = = = = = = = = = = = = = = =
>>
>>
>>                     ÖÂ
>>  Àñ£¡
>>                 2008-03-04
>>
>>
>>  _______________________________________________
>>  Mod_python mailing list
>>  Mod_python@modpython.org
>>  http://mailman.modpython.org/mailman/listinfo/mod_python
>>

= = = = = = = = = = = = = = = = = = = =
			

                    ÖÂ
Àñ£¡
		2008-03-04 

From graham.dumpleton at gmail.com  Mon Mar  3 23:54:38 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Mon Mar  3 23:54:44 2008
Subject: [mod_python] Help about apache mod_python Segmentation
	fault
In-Reply-To: <200803041241593962724@21cn.com>
References: <200802271315514506355@21cn.com>
	<88e286470802262129s77d47709p5518fa57ae0abc0d@mail.gmail.com>
	<200803031527192023415@21cn.com>
	<88e286470803030118g6d051cc5q48446f12dd928cd0@mail.gmail.com>
	<200803041011371932880@21cn.com>
	<88e286470803031956s4a48a04en23835a1ed99a5f88@mail.gmail.com>
	<200803041241593962724@21cn.com>
Message-ID: <88e286470803032054w56c0c78fh1d3362796ebb0bec@mail.gmail.com>

On 04/03/2008, auther_bin <auther_bin@21cn.com> wrote:
> Hi, Graham Dumpleton!
>
>  For I am in an embeded system with chroot. And I don't know clearly why python looking for the libs in /bin/lib ( find in strace, it first looking into /bin/lib/python2.5 ) so I placed it there. Let me try if I move it into /usr/local/lib ....

You can't just blindly move things around like that. Python finds its
library directories by looking relative to where the 'python'
executable is and shifting it like that will most likely break things.

Suggest that when you configure and build Python in the first place
that you use the option:

  --prefix=/usr/local

to the 'configure' script so that when it is built it knows properly
where it is being installed and so installation goes to the correct
desired place.

When you do the 'make install', the  'python' executable should then end up at:

  /usr/local/bin/python

The headers files as:

  /usr/local/include/python2.5

and the library directory at:

  /usr/local/lib/python2.5

That it looked, according to strace in /bin/lib/python2.5 doesn't mean
that that is where it should be installed, it is probably just part of
its attempts to find where the lib directory is in relation to the
'python' executable. It definitely isn't the standard location.

Graham

>  ======= 2008-03-04 wrote =======
>
>
>  >On 04/03/2008, auther_bin <auther_bin@21cn.com> wrote:
>  >> Hi, Graham Dumpleton!
>  >>
>  >>  Thanks for your help first, but the problem is still there. here is my testing steps:
>  >>
>  >>  I read carefully of the URL you give me: http://code.google.com/p/modwsgi/wiki/InstallationIssues
>  >>  and re-compiling the python2.5 --enable-shared, and get python libpython2.5.so install, when I testing python like:
>  >>
>  >>  =====================================================================
>  >>  # python
>  >>  Python 2.5 (r25:51908, Mar  4 2008, 08:56:31)
>  >>  [GCC 3.4.4] on linux2
>  >>  Type "help", "copyright", "credits" or "license" for more information.
>  >>  >>> testi=1
>  >>  >>> if testi==1:
>  >>  ...  print "hello test"
>  >>  ...
>  >>  hello test
>  >>  >>> <ctl-d>
>  >>  # ldd python
>  >>                 libpython2.5.so.1.0 => not found
>  >
>  >Where is your libpython2.5.so installed? Not your sylimk, but what the
>  >symlink points at.
>  >
>  >>         libpthread.so.0 => /lib/libpthread.so.0 (0x40023000)
>  >>         libdl.so.0 => not found
>  >>         libutil.so.0 => not found
>  >>         libm.so.0 => not found
>  >>         libc.so.0 => not found
>  >
>  >Your operating system installation is severely crippled or broken if
>  >these standard libraries cannot be found. Are you stuck with using
>  >uClibc or can you use something else?
>  >
>  >>         libc.so.6 => /lib/libc.so.6 (0x40076000)
>  >>         /lib/ld-linux.so.2 => /lib/ld-linux.so.2 (0x40000000)
>  >>  # ## for the libs is installed in an embeded path so some of them could not be found
>  >>  # ls -F /bin/lib/python2.5/config
>  >
>  >Why is this under /bin/lib? That isn't the standard location for this
>  >sort off stuff and if libpython2.5.so is in /bin/lib it will not be
>  >found.
>  >
>  >Graham
>  >
>  >>  Makefile         config.c         libpython2.5.a   python.o
>  >>  Setup            config.c.in      libpython2.5.so@
>  >>  Setup.local      install-sh*      makesetup*
>  >>  =====================================================================
>  >>
>  >>  when I run "httpd -X" it's still gives an Segmentation fault :(
>  >>  anything else could be found about this crash?
>  >>  or I give you an ssh login to my host :)
>  >>
>  >>  ======= 2008-03-03 wrote =======
>  >>
>  >>
>  >>  >In gdb, instead of 'where', try:
>  >>  >
>  >>  >  thread apply all bt
>  >>  >
>  >>  >in case gdb isn't throwing you into the correct thread context.
>  >>  >
>  >>  >BTW, does the Python on the environment that crashes provide a shared
>  >>  >library? For what I am talking about see:
>  >>  >
>  >>  >  http://code.google.com/p/modwsgi/wiki/InstallationIssues
>  >>  >
>  >>  >This is documentation from mod_wsgi but same problems apply to mod_python.
>  >>  >
>  >>  >Graham
>  >>  >
>  >>  >On 03/03/2008, auther_bin <auther_bin@21cn.com> wrote:
>  >>  >>
>  >>  >>
>  >>  >> Hi Graham Dumpleton,
>  >>  >>
>  >>  >> And, when I debug in RedHat9 and my embeded
>  >>  >> envirenment, the main process goes
>  >>  >> different!?
>  >>  >>
>  >>  >> in Redhat9, run like:
>  >>  >>
>  >>  >>
>  >>  >> (gdb) b main
>  >>  >> Breakpoint 1 at 0x8067a40: file main.c, line 438.
>  >>  >> (gdb) run -X
>  >>  >> Starting program: /usr/local/apache2/bin/httpd -X
>  >>  >> [New Thread 1076592288 (LWP 1049)]
>  >>  >> [Switching to Thread 1076592288 (LWP 1049)]
>  >>  >>
>  >>  >> Breakpoint 1, main (argc=134642240, argv=0x2) at main.c:438
>  >>  >> 438     {
>  >>  >> (gdb) n
>  >>  >> 272         stat = apr_app_initialize(argc, argv, NULL);
>  >>  >>
>  >>  >> and in my embeded system runs like:
>  >>  >>
>  >>  >>
>  >>  >>
>  >>  >> Breakpoint 1, main (argc=2, argv=0xbffff294)
>  >>  >>     at
>  >>  >> /usr/src/build/snapgear/user/apache/server/main.c:441
>  >>  >> 441         int configtestonly = 0;
>  >>  >> (gdb) n
>  >>  >> 442         const char *confname = SERVER_CONFIG_FILE;
>  >>  >>
>  >>  >>
>  >>  >>
>  >>  >> it seems that, the hosting system doing something for init before the main
>  >>  >> function run, but embeded system do not?
>  >>  >>
>  >>  >> I thinks is here somthing wrong? or there should be some compiling
>  >>  >> parameters I missed?
>  >>  >>
>  >>  >> ======= 2008-02-27 wrote: =======
>  >>  >>
>  >>  >>
>  >>  >> >On 27/02/2008, auther_bin  <auther_bin@21cn.com > wrote:
>  >>  >> > > Dear friends,
>  >>  >> > >
>  >>  >> > >         When I compiling the apache python mod_python
>  >>  >> and install it into my uClibc
>  >>  >> envirentment,
>  >>  >> but when I
>  >>  >> > >  runing httpd -X, send a very little request with
>  >>  >> index.html it crashed. after some debuging work,
>  >>  >> I find there should be something wrong in mod_python.c
>  >>  >> line(about 1561) which looks like:
>  >>  >> > >  --------------------------------- with my debug
>  >>  >> printing :) ------------------------
>  >>  >> > >  printf("JJJJJJJJ %s - > python_handler\n", phase);
>  >>  >> > >  printf("JJJJJJJJ %x[%d]\n", &req- >per_dir_config,
>  >>  >> (&python_module)- >module_index);
>  >>  >> > >     /* get configuration */
>  >>  >> > >     conf = (py_config *) ap_get_module_config(req-
>  >>  >> >per_dir_config,
>  >>  >> > >
>  >>  >> &python_module);
>  >>  >> > >  printf("JJJJJJJJ a %s conf=%x - > python_handler\n",
>  >>  >> phase,conf);
>  >>  >> > >  .............
>  >>  >> > >  ------------------------------ end source
>  >>  >> --------------------------------------
>  >>  >> > >
>  >>  >> > >  I guess that, there should be a regester error in
>  >>  >> it. with some debug message I print:
>  >>  >> > >  ------------- printing -------------------------------
>  >>  >> > >  JJJJJJJJJ PythonPostReadRequestHandler
>  >>  >> > >  JJJJJJJJ PythonInitHandler - > python_handler
>  >>  >> > >  JJJJJJJJ 820a544[29]
>  >>  >> > >  Segmentation fault
>  >>  >> > >  ------------- end printing ---------------------------
>  >>  >> > >
>  >>  >> > >  any advices pls?
>  >>  >> >
>  >>  >> >Unfortunately that doesn't help much.
>  >>  >> >
>  >>  >> >You need a stack trace to show the true location
>  >>  >> in code.
>  >>  >> >
>  >>  >> >Use procedure documented in section 'Debugging
>  >>  >> Crashes With GDB' of:
>  >>  >> >
>  >>  >> >
>  >>  >> http://code.google.com/p/modwsgi/wiki/DebuggingTechniques
>  >>  >> >
>  >>  >> >to run up httpd inside of gdb and get a stack trace
>  >>  >> of where crash is occurring.
>  >>  >> >
>  >>  >> >This documentation is for mod_wgsi, but same procedure
>  >>  >> used for mod_python.
>  >>  >> >
>  >>  >> >There is a similar procedure documented on Apache
>  >>  >> site, but can't
>  >>  >> >remember where.
>  >>  >> >
>  >>  >> >Graham
>  >>  >> >
>  >>  >> >
>  >>  >> >__________ NOD32 2906 (20080227) Information
>  >>  >> __________
>  >>  >> >
>  >>  >> >This message was checked by NOD32 antivirus system.
>  >>  >> >http://www.nod32cn.com
>  >>  >> >
>  >>  >> >
>  >>  >>
>  >>  >> = = = = = = = = = = = = = = = = = = = =
>  >>  >>
>  >>  >>
>  >>  >>                     ÖÂ
>  >>  >> Àñ£¡
>  >>  >> 2008-03-03
>  >>  >>
>  >>  >> _______________________________________________
>  >>  >> Mod_python mailing list
>  >>  >> Mod_python@modpython.org
>  >>  >> http://mailman.modpython.org/mailman/listinfo/mod_python
>  >>  >>
>  >>  >>
>  >>  >> __________ NOD32 2915 (20080303) Information __________
>  >>  >>
>  >>  >> This message was checked by NOD32 antivirus system.
>  >>  >> http://www.nod32cn.com
>  >>  >>
>  >>  >>
>  >>  >> _______________________________________________
>  >>  >>  Mod_python mailing list
>  >>  >>  Mod_python@modpython.org
>  >>  >>  http://mailman.modpython.org/mailman/listinfo/mod_python
>  >>  >>
>  >>  >>
>  >>
>  >>
>  >> = = = = = = = = = = = = = = = = = = = =
>  >>
>  >>
>  >>                     ÖÂ
>  >>  Àñ£¡
>  >>                 2008-03-04
>  >>
>  >>
>  >>  _______________________________________________
>  >>  Mod_python mailing list
>  >>  Mod_python@modpython.org
>  >>  http://mailman.modpython.org/mailman/listinfo/mod_python
>  >>
>
>  = = = = = = = = = = = = = = = = = = = =
>
>
>                     ÖÂ
>  Àñ£¡
>                 2008-03-04
>
>  _______________________________________________
>  Mod_python mailing list
>  Mod_python@modpython.org
>  http://mailman.modpython.org/mailman/listinfo/mod_python
>

From johna at johnaherne.co.uk  Wed Mar  5 03:52:35 2008
From: johna at johnaherne.co.uk (John Aherne)
Date: Wed Mar  5 03:52:39 2008
Subject: [mod_python] MPServlets
Message-ID: <47CE5F53.8090604@johnaherne.co.uk>

Some time last year there was discussion between Daniel Popowich and 
Graham Dumpleton about the changes to mod_python 3.3 and the import 
process.

That gave Daniel some problems because of his own developed import 
mechanism.

I have not seen any indication that Daniel produced an update to 
MPServlets to work with the 3.3 modpython.

Does anyone know if anything happened or even that an update was requred 
or not.

Thanks for any info

John Aherne
From kvs at acm.org  Wed Mar  5 14:28:19 2008
From: kvs at acm.org (Kathryn Van Stone)
Date: Wed Mar  5 14:49:21 2008
Subject: [mod_python] Cookies and Redirects
Message-ID: <93D72CCF-F7D8-4750-A0DA-45C30956EDCF@acm.org>

Our web application has a login page that uses a POST.  Upon  
receiving the POST, we set some cookies on the request object by  
using mod_python's Cookie.add_cookie(request, c).  Then we set a  
Location header and return a 303 to redirect the user to their "home  
page".

Specifically: the cookies header is set, the location header is set,  
the status is set to 303, and 303 is returned from the PythonHandler.  
Content is not set. We have no later handlers.

Unfortunately, the cookie headers do not seem to survive ---  they  
seem to be there in log output from the code immediately prior to  
returning, but if we examine the 303 response the client actually  
sees the cookie headers are gone and only the Location header  
remains.  (In an earlier iteration we returned a regular 200 with an  
HTML page that did a META redirect in the <head>; that worked fine.)

Any ideas?  Is Apache or mod_python eating the cookies at some lower  
level?  Is there a "typical" way people do this sort of operation?

Kathy Van Stone (for a co-worker).
kvs@acm.org

Note: we haven't yet tried a bare handler that does just the above  
steps.  If people here say "hmm, that should have worked" that will  
be our next step.  On the other hand, if there is a rule about  
redirects and cookies (or if we should be returning something besides  
a 303 from the handler), that would be helpful to know before we  
spend time trying to get this to work.

(Current workaround is to go back to the HTML page with a meta).
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080305/7ef9f555/attachment.html
From graham.dumpleton at gmail.com  Wed Mar  5 16:22:25 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Wed Mar  5 16:22:44 2008
Subject: [mod_python] Cookies and Redirects
In-Reply-To: <93D72CCF-F7D8-4750-A0DA-45C30956EDCF@acm.org>
References: <93D72CCF-F7D8-4750-A0DA-45C30956EDCF@acm.org>
Message-ID: <88e286470803051322k2e46cf87y5b4fe2c5c0a09b97@mail.gmail.com>

On 06/03/2008, Kathryn Van Stone <kvs@acm.org> wrote:
>
> Our web application has a login page that uses a POST.  Upon receiving the
> POST, we set some cookies on the request object by using mod_python's
> Cookie.add_cookie(request, c).  Then we set a Location header and return a
> 303 to redirect the user to their "home page".
>
> Specifically: the cookies header is set, the location header is set, the
> status is set to 303, and 303 is returned from the PythonHandler.

Technically you shouldn't be doing both setting status to 303 and
returning status 303.

Post your actual minimal code for the handler which shows what you are
doing. Trying to describe it is not enough as you could be doing
something trivially wrong that you haven't mentioned and we wouldn't
know.

Graham

> Content is
> not set. We have no later handlers.
>
> Unfortunately, the cookie headers do not seem to survive ---  they seem to
> be there in log output from the code immediately prior to returning, but if
> we examine the 303 response the client actually sees the cookie headers are
> gone and only the Location header remains.  (In an earlier iteration we
> returned a regular 200 with an HTML page that did a META redirect in the
> <head>; that worked fine.)
>
> Any ideas?  Is Apache or mod_python eating the cookies at some lower level?
> Is there a "typical" way people do this sort of operation?
>
> Kathy Van Stone (for a co-worker).
> kvs@acm.org
>
> Note: we haven't yet tried a bare handler that does just the above steps.
> If people here say "hmm, that should have worked" that will be our next
> step.  On the other hand, if there is a rule about redirects and cookies (or
> if we should be returning something besides a 303 from the handler), that
> would be helpful to know before we spend time trying to get this to work.
>
> (Current workaround is to go back to the HTML page with a meta).
> _______________________________________________
>  Mod_python mailing list
>  Mod_python@modpython.org
>  http://mailman.modpython.org/mailman/listinfo/mod_python
>
>
From dpopowich at comcast.net  Wed Mar  5 17:17:23 2008
From: dpopowich at comcast.net (Daniel J. Popowich)
Date: Wed Mar  5 17:17:29 2008
Subject: [mod_python] MPServlets
In-Reply-To: <47CE5F53.8090604@johnaherne.co.uk>
References: <47CE5F53.8090604@johnaherne.co.uk>
Message-ID: <18383.7155.977585.491478@io.astro.umass.edu>


John Aherne writes:
> Some time last year there was discussion between Daniel Popowich and 
> Graham Dumpleton about the changes to mod_python 3.3 and the import 
> process.
> 
> That gave Daniel some problems because of his own developed import 
> mechanism.
> 
> I have not seen any indication that Daniel produced an update to 
> MPServlets to work with the 3.3 modpython.
> 
> Does anyone know if anything happened or even that an update was requred 
> or not.

Hi.  Dan here.  No, I have made no further updates to mpservlets.

The only real problem with 3.3 (affecting mpservlets) was the change
made that affected sys.path: in 3.2, the handler directory was placed
in sys.path, in 3.3 it isn't, so python modules co-located with
servlet files (*.mps) in the handler directory could not be imported
by the mps files without error.  This is immediately evident with the
tutorial that comes with mpservlets.

To me, such a major change in functionality between minor releases was
(still is) a bug: I should not have to modify my applications to get
them to work from one minor release to the next.  I expressed my
frustration on the modpython-dev list, but my concerns fell mostly on
deaf ears (oh, sympathy I suppose, but no action).

Not that I don't want to update mpservlets, but I found myself so
terribly frustrated by the major functionality change in a minor
release, plus, for my liking, the obfuscated complexity of the new
importer, I didn't (and still don't) have the time necessary to
include the new importer into mpservlets.

I have always had a problem with the way mod_python handles sys.path
and importing, which as I see it, has its roots in the unfortunate
perception that "mod_python == publisher is True."  Yes, this list was
swamped with import issues prior to 3.3, but I have a fundamental
(philosophical?) problem with the solution.

Meanwhile...

The solution for me (running mpservlets under 3.3.x with co-located
python modules) has been to set PythonPath explicitly in my apache
config and/or .htaccess files.


Cheers,

Daniel Popowich
---------------
http://www.astro.umass.edu/~dpopowich/python/mpservlets/

From nyad55 at gmail.com  Fri Mar  7 01:33:53 2008
From: nyad55 at gmail.com (Jason Ward)
Date: Fri Mar  7 01:33:59 2008
Subject: [mod_python] help installing DSO mod_python on Kubuntu 7.10
Message-ID: <49f16abf0803062233p21a45dadu2bc48c51546c475e@mail.gmail.com>

Hi
I recently downloaded and installed apache2 via the command line in kubuntu
sudo apt-get install apache2

This worked, however I cannot configure and install mod_python with DSO
since apxs is not anywhere on my system.
I tried doing a complete search of my system and it is not there at all.

How do I get this whole thing to work with DSO?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080307/5a9e9ee4/attachment.html
From johna at johnaherne.co.uk  Fri Mar  7 03:13:15 2008
From: johna at johnaherne.co.uk (John Aherne)
Date: Fri Mar  7 03:13:22 2008
Subject: [mod_python] MPServlets
In-Reply-To: <18383.7155.977585.491478@io.astro.umass.edu>
References: <47CE5F53.8090604@johnaherne.co.uk>
	<18383.7155.977585.491478@io.astro.umass.edu>
Message-ID: <47D0F91B.9060909@johnaherne.co.uk>

Daniel J. Popowich wrote:
> John Aherne writes:
>   
>> Some time last year there was discussion between Daniel Popowich and 
>> Graham Dumpleton about the changes to mod_python 3.3 and the import 
>> process.
>>
>> That gave Daniel some problems because of his own developed import 
>> mechanism.
>>
>> I have not seen any indication that Daniel produced an update to 
>> MPServlets to work with the 3.3 modpython.
>>
>> Does anyone know if anything happened or even that an update was requred 
>> or not.
>>     
>
> Hi.  Dan here.  No, I have made no further updates to mpservlets.
>
> The only real problem with 3.3 (affecting mpservlets) was the change
> made that affected sys.path: in 3.2, the handler directory was placed
> in sys.path, in 3.3 it isn't, so python modules co-located with
> servlet files (*.mps) in the handler directory could not be imported
> by the mps files without error.  This is immediately evident with the
> tutorial that comes with mpservlets.
>
> To me, such a major change in functionality between minor releases was
> (still is) a bug: I should not have to modify my applications to get
> them to work from one minor release to the next.  I expressed my
> frustration on the modpython-dev list, but my concerns fell mostly on
> deaf ears (oh, sympathy I suppose, but no action).
>
> Not that I don't want to update mpservlets, but I found myself so
> terribly frustrated by the major functionality change in a minor
> release, plus, for my liking, the obfuscated complexity of the new
> importer, I didn't (and still don't) have the time necessary to
> include the new importer into mpservlets.
>
> I have always had a problem with the way mod_python handles sys.path
> and importing, which as I see it, has its roots in the unfortunate
> perception that "mod_python == publisher is True."  Yes, this list was
> swamped with import issues prior to 3.3, but I have a fundamental
> (philosophical?) problem with the solution.
>
> Meanwhile...
>
> The solution for me (running mpservlets under 3.3.x with co-located
> python modules) has been to set PythonPath explicitly in my apache
> config and/or .htaccess files.
>
>
> Cheers,
>
> Daniel Popowich
> ---------------
> http://www.astro.umass.edu/~dpopowich/python/mpservlets/
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>
>   
Daniel

Thanks for the info. I shall look up how to add in PythonPath and see 
how I get on.
Hopefully this will let me move on to 3.3.

Regards

John Aherne


From graham.dumpleton at gmail.com  Fri Mar  7 04:00:09 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Fri Mar  7 04:00:15 2008
Subject: [mod_python] help installing DSO mod_python on Kubuntu 7.10
In-Reply-To: <49f16abf0803062233p21a45dadu2bc48c51546c475e@mail.gmail.com>
References: <49f16abf0803062233p21a45dadu2bc48c51546c475e@mail.gmail.com>
Message-ID: <88e286470803070100l3c1fffcfwb84ca6b1221ab819@mail.gmail.com>

Install apache2-dev as well.

On 07/03/2008, Jason Ward <nyad55@gmail.com> wrote:
> Hi
> I recently downloaded and installed apache2 via the command line in kubuntu
> sudo apt-get install apache2
>
> This worked, however I cannot configure and install mod_python with DSO
> since apxs is not anywhere on my system.
> I tried doing a complete search of my system and it is not there at all.
>
> How do I get this whole thing to work with DSO?
>
> _______________________________________________
>  Mod_python mailing list
>  Mod_python@modpython.org
>  http://mailman.modpython.org/mailman/listinfo/mod_python
>
>
From graham.dumpleton at gmail.com  Fri Mar  7 04:06:51 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Fri Mar  7 04:06:57 2008
Subject: [mod_python] help installing DSO mod_python on Kubuntu 7.10
In-Reply-To: <49f16abf0803070102m453307dsd36a559953b03c02@mail.gmail.com>
References: <49f16abf0803062233p21a45dadu2bc48c51546c475e@mail.gmail.com>
	<88e286470803070100l3c1fffcfwb84ca6b1221ab819@mail.gmail.com>
	<49f16abf0803070102m453307dsd36a559953b03c02@mail.gmail.com>
Message-ID: <88e286470803070106t631900dckfffb345254e52c9d@mail.gmail.com>

On 07/03/2008, Jason Ward <nyad55@gmail.com> wrote:
> apache2-dev isn't there.
> but the lib installed. I just gotta figure out how to test if its working

Huh, did you do:

  sudo apt-get install apache2-dev

or not? The libs are part of apache2.

Graham
From graham.dumpleton at gmail.com  Fri Mar  7 04:16:56 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Fri Mar  7 04:17:02 2008
Subject: [mod_python] help installing DSO mod_python on Kubuntu 7.10
In-Reply-To: <49f16abf0803070109o6d2775dara583e76fbf2f4f94@mail.gmail.com>
References: <49f16abf0803062233p21a45dadu2bc48c51546c475e@mail.gmail.com>
	<88e286470803070100l3c1fffcfwb84ca6b1221ab819@mail.gmail.com>
	<49f16abf0803070102m453307dsd36a559953b03c02@mail.gmail.com>
	<88e286470803070106t631900dckfffb345254e52c9d@mail.gmail.com>
	<49f16abf0803070109o6d2775dara583e76fbf2f4f94@mail.gmail.com>
Message-ID: <88e286470803070116q40781273q7c921e3e073c1619@mail.gmail.com>

Use reply-all, stop sending just to me, keep it on the list.

On 07/03/2008, Jason Ward <nyad55@gmail.com> wrote:
> This is the output:
>
> jason@Ward:~$ sudo apt-get install apache2-dev
> Reading package lists... Done
> Building dependency tree
> Reading state information... Done
> Package apache2-dev is a virtual package provided by:
>    apache2-threaded-dev 2.2.4-3ubuntu0.1
> You should explicitly select one to install.
> E: Package apache2-dev has no installation candidate
> jason@Ward:~$

Work out whether the Apache you installed is prefork or worker MPM. If
prefork, then try installing apache2-prefork-dev. If worker MPM, try
installing apache2-threaded-dev. Don't install both.

These may not be the names, so check the Ubuntu sites if you still
can't work it out, unless someone else here can tell you. Either way,
you need the appropriate -dev package as it contains apxs and the
header files.

Graham
From nyad55 at gmail.com  Fri Mar  7 04:22:34 2008
From: nyad55 at gmail.com (Jason Ward)
Date: Fri Mar  7 04:22:51 2008
Subject: [mod_python] help installing DSO mod_python on Kubuntu 7.10
In-Reply-To: <88e286470803070116q40781273q7c921e3e073c1619@mail.gmail.com>
References: <49f16abf0803062233p21a45dadu2bc48c51546c475e@mail.gmail.com>
	<88e286470803070100l3c1fffcfwb84ca6b1221ab819@mail.gmail.com>
	<49f16abf0803070102m453307dsd36a559953b03c02@mail.gmail.com>
	<88e286470803070106t631900dckfffb345254e52c9d@mail.gmail.com>
	<49f16abf0803070109o6d2775dara583e76fbf2f4f94@mail.gmail.com>
	<88e286470803070116q40781273q7c921e3e073c1619@mail.gmail.com>
Message-ID: <49f16abf0803070122y71ff309o503e0eac6c42d8fb@mail.gmail.com>

Thanks I have the MPM worker. so I am busy installing it. thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080307/a4b55406/attachment.html
From nyad55 at gmail.com  Fri Mar  7 04:35:04 2008
From: nyad55 at gmail.com (Jason Ward)
Date: Fri Mar  7 04:35:10 2008
Subject: [mod_python] help installing DSO mod_python on Kubuntu 7.10
In-Reply-To: <88e286470803070116q40781273q7c921e3e073c1619@mail.gmail.com>
References: <49f16abf0803062233p21a45dadu2bc48c51546c475e@mail.gmail.com>
	<88e286470803070100l3c1fffcfwb84ca6b1221ab819@mail.gmail.com>
	<49f16abf0803070102m453307dsd36a559953b03c02@mail.gmail.com>
	<88e286470803070106t631900dckfffb345254e52c9d@mail.gmail.com>
	<49f16abf0803070109o6d2775dara583e76fbf2f4f94@mail.gmail.com>
	<88e286470803070116q40781273q7c921e3e073c1619@mail.gmail.com>
Message-ID: <49f16abf0803070135q3a3efddetd76a73cd6a0529f1@mail.gmail.com>

ok I have mod_python installed. I installed apache2-threaded-dev but apxs
does not exist when I type it into the commandline.

what else has to be done for DSO to work?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080307/e864571d/attachment.html
From graham.dumpleton at gmail.com  Fri Mar  7 05:17:44 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Fri Mar  7 05:17:50 2008
Subject: [mod_python] help installing DSO mod_python on Kubuntu 7.10
In-Reply-To: <49f16abf0803070135q3a3efddetd76a73cd6a0529f1@mail.gmail.com>
References: <49f16abf0803062233p21a45dadu2bc48c51546c475e@mail.gmail.com>
	<88e286470803070100l3c1fffcfwb84ca6b1221ab819@mail.gmail.com>
	<49f16abf0803070102m453307dsd36a559953b03c02@mail.gmail.com>
	<88e286470803070106t631900dckfffb345254e52c9d@mail.gmail.com>
	<49f16abf0803070109o6d2775dara583e76fbf2f4f94@mail.gmail.com>
	<88e286470803070116q40781273q7c921e3e073c1619@mail.gmail.com>
	<49f16abf0803070135q3a3efddetd76a73cd6a0529f1@mail.gmail.com>
Message-ID: <88e286470803070217u56166182x783aa55f3214b7da@mail.gmail.com>

On 07/03/2008, Jason Ward <nyad55@gmail.com> wrote:
> ok I have mod_python installed. I installed apache2-threaded-dev but apxs
> does not exist when I type it into the commandline.
>
> what else has to be done for DSO to work?

Look for one of the following:

  /usr/sbin/apxs
  /usr/sbin/apxs2

Pass the path for the one that exists to --with-apxs option of configure script.

If not there, check the manifest of the package for where it was installed.

Graham
From roberto at connexer.com  Fri Mar  7 06:52:06 2008
From: roberto at connexer.com (Roberto =?iso-8859-1?Q?C=2E_S=E1nchez?=)
Date: Fri Mar  7 06:52:14 2008
Subject: [mod_python] help installing DSO mod_python on Kubuntu 7.10
In-Reply-To: <49f16abf0803070135q3a3efddetd76a73cd6a0529f1@mail.gmail.com>
References: <49f16abf0803062233p21a45dadu2bc48c51546c475e@mail.gmail.com>
	<88e286470803070100l3c1fffcfwb84ca6b1221ab819@mail.gmail.com>
	<49f16abf0803070102m453307dsd36a559953b03c02@mail.gmail.com>
	<88e286470803070106t631900dckfffb345254e52c9d@mail.gmail.com>
	<49f16abf0803070109o6d2775dara583e76fbf2f4f94@mail.gmail.com>
	<88e286470803070116q40781273q7c921e3e073c1619@mail.gmail.com>
	<49f16abf0803070135q3a3efddetd76a73cd6a0529f1@mail.gmail.com>
Message-ID: <20080307115206.GA1001@connexer.com>

On Fri, Mar 07, 2008 at 11:35:04AM +0200, Jason Ward wrote:
> ok I have mod_python installed. I installed apache2-threaded-dev but apxs
> does not exist when I type it into the commandline.
> 
> what else has to be done for DSO to work?

Why not just install the libapache2-mod-python package?

Regards,

-Roberto

-- 
Roberto C. S?nchez
http://people.connexer.com/~roberto
http://www.connexer.com
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
Url : http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080307/b07ba236/attachment-0001.bin
From nyad55 at gmail.com  Sat Mar  8 07:23:42 2008
From: nyad55 at gmail.com (Jason Ward)
Date: Sat Mar  8 07:23:50 2008
Subject: [mod_python] help installing DSO mod_python on Kubuntu 7.10
In-Reply-To: <20080307115206.GA1001@connexer.com>
References: <49f16abf0803062233p21a45dadu2bc48c51546c475e@mail.gmail.com>
	<88e286470803070100l3c1fffcfwb84ca6b1221ab819@mail.gmail.com>
	<49f16abf0803070102m453307dsd36a559953b03c02@mail.gmail.com>
	<88e286470803070106t631900dckfffb345254e52c9d@mail.gmail.com>
	<49f16abf0803070109o6d2775dara583e76fbf2f4f94@mail.gmail.com>
	<88e286470803070116q40781273q7c921e3e073c1619@mail.gmail.com>
	<49f16abf0803070135q3a3efddetd76a73cd6a0529f1@mail.gmail.com>
	<20080307115206.GA1001@connexer.com>
Message-ID: <49f16abf0803080423p6c7db6bbg64578a83ac75c7da@mail.gmail.com>

I have that installed. But isn't DSO required? or can I live without it?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080308/656ab0f9/attachment.html
From roberto at connexer.com  Sat Mar  8 08:50:04 2008
From: roberto at connexer.com (Roberto =?iso-8859-1?Q?C=2E_S=E1nchez?=)
Date: Sat Mar  8 08:50:12 2008
Subject: [mod_python] help installing DSO mod_python on Kubuntu 7.10
In-Reply-To: <49f16abf0803080423p6c7db6bbg64578a83ac75c7da@mail.gmail.com>
References: <49f16abf0803062233p21a45dadu2bc48c51546c475e@mail.gmail.com>
	<88e286470803070100l3c1fffcfwb84ca6b1221ab819@mail.gmail.com>
	<49f16abf0803070102m453307dsd36a559953b03c02@mail.gmail.com>
	<88e286470803070106t631900dckfffb345254e52c9d@mail.gmail.com>
	<49f16abf0803070109o6d2775dara583e76fbf2f4f94@mail.gmail.com>
	<88e286470803070116q40781273q7c921e3e073c1619@mail.gmail.com>
	<49f16abf0803070135q3a3efddetd76a73cd6a0529f1@mail.gmail.com>
	<20080307115206.GA1001@connexer.com>
	<49f16abf0803080423p6c7db6bbg64578a83ac75c7da@mail.gmail.com>
Message-ID: <20080308135004.GA4971@connexer.com>

On Sat, Mar 08, 2008 at 02:23:42PM +0200, Jason Ward wrote:
> I have that installed. But isn't DSO required? or can I live without it?

Without any context to your mail, it is hard to say.  However, if you
installed libapache2-mod-python, then you have the mod_python DSO.

Regards,

-Roberto

-- 
Roberto C. S?nchez
http://people.connexer.com/~roberto
http://www.connexer.com
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
Url : http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080308/da37ff9e/attachment.bin
From nyad55 at gmail.com  Sat Mar  8 13:08:28 2008
From: nyad55 at gmail.com (Jason Ward)
Date: Sat Mar  8 13:08:34 2008
Subject: [mod_python] help installing DSO mod_python on Kubuntu 7.10
In-Reply-To: <20080308135004.GA4971@connexer.com>
References: <49f16abf0803062233p21a45dadu2bc48c51546c475e@mail.gmail.com>
	<88e286470803070100l3c1fffcfwb84ca6b1221ab819@mail.gmail.com>
	<49f16abf0803070102m453307dsd36a559953b03c02@mail.gmail.com>
	<88e286470803070106t631900dckfffb345254e52c9d@mail.gmail.com>
	<49f16abf0803070109o6d2775dara583e76fbf2f4f94@mail.gmail.com>
	<88e286470803070116q40781273q7c921e3e073c1619@mail.gmail.com>
	<49f16abf0803070135q3a3efddetd76a73cd6a0529f1@mail.gmail.com>
	<20080307115206.GA1001@connexer.com>
	<49f16abf0803080423p6c7db6bbg64578a83ac75c7da@mail.gmail.com>
	<20080308135004.GA4971@connexer.com>
Message-ID: <49f16abf0803081008x770269f7j53a8f6647ded3ec9@mail.gmail.com>

Oh great. thanks. :)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080308/c3551a89/attachment.html
From omarshariffdontlikeit at gmail.com  Sat Mar  8 14:24:58 2008
From: omarshariffdontlikeit at gmail.com (Ben Davies)
Date: Sat Mar  8 14:25:03 2008
Subject: [mod_python] Apaches and Pythons and Tigers, oh my!
Message-ID: <a4754c780803081124v117e1e70n8d451fbd2855a005@mail.gmail.com>

Hello everyone!

I've been convinced by reading the mod_python manual that python may well be
the language for me, moving away from PHP5 with all it's sillyness. I've
also decided that if I'm gonna do this, I'm gonna do this properly; that
means downloading the source for Apache 2.2.8, mod_python 3.3.1 and
compiling this myself. I should learn all this anyway, so why not now? As
you may have already guessed, I've hit a snag.

I'm attempting to run all this on my 1.83Gh Intel Core Duo Macbook, on OSX
10.4.11. I followed the instructions described at the following address:

http://blog.minus-zero.org/post/apache-22-and-mod-python-on-os-x

So, how did I do? Well, I got Apache up and running: everything seems
tickety-boo there. I downloaded the python installed (v2.5.2) and installed
that okay: fired up bash and ran python, and everything seems fine there. I
compiled mod_python, and everything seemed okay.

I tried to restart apache by I get the following error message generated by
apache:

Cannot load /usr/local/apache2/modules/mod_python.so into server: Library
not loaded:
/System/Library/Frameworks/Python.framework/Versions/2.3/Python\n
Referenced from: /usr/local/apache2/modules/mod_python.so\n  Reason: image
not found

I double checked the message spewed out when configure and make ran for
mod_python, and all the messages that refer to frameworks specify version
2.5, as I would expect. No mention of 2.3 anywhere. It appears to me that
mod_python.so was compiled against a framework that supposedly resides in
the system/library/frameworks folder that doesn't exist. Now, I had previous
problems, and I think I may have had a previous version of python installed
(2.3 I think) but I've looked about and I believe I had deleted all
references to it. Now when I reinstall python (2.5), I get an error saying
that the installation failed, yet python appears to work correctly! I have a
suspicion that my poking about has buggered things, proper like.

It was my understanding that the python installer would have upgraded 2.3 to
2.5, along with any references to 2.3. But for some reason, mod_python is
trying to link to this missing 2.3 framework, even though 2.5 is in the
/Library/Frameworks folder, where I believe it should be! Wha!

Can anyone help me? I've been fiddling about with this mess for about 48
hours now and I'm so close to getting this working I can taste it! Heres a
quick summary:

- I may have installed python 2.3 in the past
- I installed python 2.5, but it appears that it did not replace all the
references to 2.3, because
- apache/mod_python complains about a missing 2.3 framework, which
- I, in a spate of backspace frenzies, deleted, thinking I wouldn't need it,
cos I have 2.5 installed, which has its own framework files located
elsewhere

Other than that, I'm impressed at how easy this has been so far :) Python
looks great, and mod_python has some features that PHP just cant compete on
(creating custom apache filters in python? sweet!)

Oh, and on top of all this, I suppose I should learn python itself :) Anyone
recommend any good books? I hear that the O'Rielly Programming Python book
is great.

Thanks for your help, in advance!

Cheers,

Ben
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080308/1f029532/attachment.html
From roberto at connexer.com  Sat Mar  8 14:59:24 2008
From: roberto at connexer.com (Roberto =?iso-8859-1?Q?C=2E_S=E1nchez?=)
Date: Sat Mar  8 14:59:31 2008
Subject: [mod_python] Apaches and Pythons and Tigers, oh my!
In-Reply-To: <a4754c780803081124v117e1e70n8d451fbd2855a005@mail.gmail.com>
References: <a4754c780803081124v117e1e70n8d451fbd2855a005@mail.gmail.com>
Message-ID: <20080308195924.GC4971@connexer.com>

On Sat, Mar 08, 2008 at 07:24:58PM +0000, Ben Davies wrote:
> Hello everyone!
> 
> I've been convinced by reading the mod_python manual that python may well be
> the language for me, moving away from PHP5 with all it's sillyness. I've
> also decided that if I'm gonna do this, I'm gonna do this properly; that
> means downloading the source for Apache 2.2.8, mod_python 3.3.1 and
> compiling this myself. I should learn all this anyway, so why not now? As
> you may have already guessed, I've hit a snag.
> 
> I'm attempting to run all this on my 1.83Gh Intel Core Duo Macbook, on OSX
> 10.4.11. I followed the instructions described at the following address:
> 
In order to install Apache and mod_python on my Macbook, here are the
commands I used:

(Note, I had to install a more recent pcre to make it work.  I forget
why, but I know I had to do it).

Apache: ./configure --prefix=/usr/local/apache2/server --sysconfdir=/usr/local/apache2/etc --datadir=/usr/local/apache2/data --enable-modules=all --enable-mods-shared=all --with-included-apr --with-mpm=prefork --enable-ldap --enable-authnz-ldap --enable-ssl --with-ldap --with-pcre=/usr/local/pcre

mod_python: ./configure --prefix=/usr/local/apache2/server --with-apxs2=/usr/local/apache2/server/bin/apxs

I did not bother upgrading from the stock version of Python since I did
not need anything more recent.

Regards,

-Roberto
-- 
Roberto C. S?nchez
http://people.connexer.com/~roberto
http://www.connexer.com
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
Url : http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080308/240f0064/attachment.bin
From graham.dumpleton at gmail.com  Sat Mar  8 18:22:34 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Sat Mar  8 18:22:42 2008
Subject: [mod_python] Apaches and Pythons and Tigers, oh my!
In-Reply-To: <a4754c780803081124v117e1e70n8d451fbd2855a005@mail.gmail.com>
References: <a4754c780803081124v117e1e70n8d451fbd2855a005@mail.gmail.com>
Message-ID: <88e286470803081522w28d5ae44rb557d05d43cda07a@mail.gmail.com>

On 09/03/2008, Ben Davies <omarshariffdontlikeit@gmail.com> wrote:
> Can anyone help me? I've been fiddling about with this mess for about 48
> hours now and I'm so close to getting this working I can taste it! Heres a
> quick summary:
>
> - I may have installed python 2.3 in the past

No you didn't, it came with the operating system.

>  - I installed python 2.5, but it appears that it did not replace all the
> references to 2.3, because

I always recommend not installing a newer version of Python on MacOS X
Tiger unless you know what you are doing. :-)

> - apache/mod_python complains about a missing 2.3 framework, which
> - I, in a spate of backspace frenzies, deleted, thinking I wouldn't need it,
> cos I have 2.5 installed, which has its own framework files located
> elsewhere

Removing the OS supplied Python is a really bad idea and you may now
have potentially broken parts of your operating system that depend on
it. Unless you can copy back the bits you deleted from another copy of
same OS, you may have to reinstall the OS.

In short, on MacOS X, you should never delete anything under
/System/Library as this is the operating system area. Any user code
packages should get installed under /Library if it did so and only
really safe to remove stuff out of there, but only if again you have
also removed any dependencies.

After you have fixed your OS, personally I would suggest that since
you are new to Python not to bother with mod_python initially.
Instead, learn one of higher level frameworks such as Django or
Pylons. These can be run with their own internal Python web servers.
At lowest level they use WSGI which allows them to be deployed to
various web hosting solutions if you ever get as far as a production
system.

So, first step is to get Python 2.3 working again. After that I'd even
suggest you get rid of Python 2.5 and just use Python 2.3 for the time
being. If learning Python you aren't going to miss much by doing this.

Graham

> Other than that, I'm impressed at how easy this has been so far :) Python
> looks great, and mod_python has some features that PHP just cant compete on
> (creating custom apache filters in python? sweet!)
>
> Oh, and on top of all this, I suppose I should learn python itself :) Anyone
> recommend any good books? I hear that the O'Rielly Programming Python book
> is great.
>
> Thanks for your help, in advance!
>
> Cheers,
>
> Ben
>
>
>
> _______________________________________________
>  Mod_python mailing list
>  Mod_python@modpython.org
>  http://mailman.modpython.org/mailman/listinfo/mod_python
>
>
From omarshariffdontlikeit at gmail.com  Sat Mar  8 20:04:03 2008
From: omarshariffdontlikeit at gmail.com (Ben Davies)
Date: Sat Mar  8 20:04:09 2008
Subject: [mod_python] Apaches and Pythons and Tigers, oh my!
In-Reply-To: <88e286470803081522w28d5ae44rb557d05d43cda07a@mail.gmail.com>
References: <a4754c780803081124v117e1e70n8d451fbd2855a005@mail.gmail.com>
	<88e286470803081522w28d5ae44rb557d05d43cda07a@mail.gmail.com>
Message-ID: <a4754c780803081704ib34b4bdufa5ba3163d0d4b35@mail.gmail.com>

"Removing the OS supplied Python is a really bad idea and you may now
have potentially broken parts of your operating system that depend on
it."

Wah-hay! And here me thinking I knew what I was doing! Been a while since
I've hosed a system. At least this time I didn't get that awful sinking
feeling after pressing delete. Actually, thats more of a worry... :)

"I always recommend not installing a newer version of Python on MacOS X
Tiger unless you know what you are doing. :-)"

I don't think there is a better description of my recent actions!

"After you have fixed your OS, personally I would suggest that since
you are new to Python not to bother with mod_python initially."

Although my description of my actions might suggest this, I feel pretty
comfortable (maybe inaccurately so, given the consequences of my actions
over the last 48 hours!) that I might be alright with mod_python: the
different phases of processing in Apache, OOP and the concept of frameworks
etc; I am quite comfortable with: in fact the technical features of
mod_python are what drew me to python in the first place. PHP5 has some
glaring deficiencies in its OOP features that have driven me here
(difficulty in accessing the low-level HTTP sub-system, lack of late-static
binding and non-existent namespacing for 3), and I've found myself seeking
lower/tighter integration with apache over the past 6 months or so. I figure
that a lot of pythons features I understand, and that it should be merely
new syntax that I need to learn (ha! get ready for a deluge of help
requests!)

"learn one of higher level frameworks such as Django or
Pylons. These can be run with their own internal Python web servers."

Like I say, concepts like MVC, ORM etc; I understand, having written my own
PHP5 frameworks before. I'm really interested in REST and I feel that PHP's
reluctance to provide closer integration with apache really puts it in a
bind. I don't want compare features here, as I think I may already be
preaching to the choir, but clean access to, for example, apache's filtering
mechanism is really the direction I want to be heading in.

It's taken me a long time to really get comfortable with Apache, and now I
feel that it is seriously one of the greatest pieces of software ever
written (2nd only to Portal :) ). I want to dive in, get my feet wet and
give mod_python a whirl!

If I have buggered my OSX install, then I think that the features of
mod_python are enough to warrant a re-install, but I appreciate the reality
check: the reality is though I need to move to mod_python ASAP. PHP just
doesn't cut it anymore.

Right, time to sign off. Apologies in advance, Budvar and portal make Ben a
sleepy boy.

Cheers,

Ben


On Sat, Mar 8, 2008 at 11:22 PM, Graham Dumpleton <
graham.dumpleton@gmail.com> wrote:

> On 09/03/2008, Ben Davies <omarshariffdontlikeit@gmail.com> wrote:
> > Can anyone help me? I've been fiddling about with this mess for about 48
> > hours now and I'm so close to getting this working I can taste it! Heres
> a
> > quick summary:
> >
> > - I may have installed python 2.3 in the past
>
> No you didn't, it came with the operating system.
>
> >  - I installed python 2.5, but it appears that it did not replace all
> the
> > references to 2.3, because
>
> I always recommend not installing a newer version of Python on MacOS X
> Tiger unless you know what you are doing. :-)
>
> > - apache/mod_python complains about a missing 2.3 framework, which
> > - I, in a spate of backspace frenzies, deleted, thinking I wouldn't need
> it,
> > cos I have 2.5 installed, which has its own framework files located
> > elsewhere
>
> Removing the OS supplied Python is a really bad idea and you may now
> have potentially broken parts of your operating system that depend on
> it. Unless you can copy back the bits you deleted from another copy of
> same OS, you may have to reinstall the OS.
>
> In short, on MacOS X, you should never delete anything under
> /System/Library as this is the operating system area. Any user code
> packages should get installed under /Library if it did so and only
> really safe to remove stuff out of there, but only if again you have
> also removed any dependencies.
>
> After you have fixed your OS, personally I would suggest that since
> you are new to Python not to bother with mod_python initially.
> Instead, learn one of higher level frameworks such as Django or
> Pylons. These can be run with their own internal Python web servers.
> At lowest level they use WSGI which allows them to be deployed to
> various web hosting solutions if you ever get as far as a production
> system.
>
> So, first step is to get Python 2.3 working again. After that I'd even
> suggest you get rid of Python 2.5 and just use Python 2.3 for the time
> being. If learning Python you aren't going to miss much by doing this.
>
> Graham
>
> > Other than that, I'm impressed at how easy this has been so far :)
> Python
> > looks great, and mod_python has some features that PHP just cant compete
> on
> > (creating custom apache filters in python? sweet!)
> >
> > Oh, and on top of all this, I suppose I should learn python itself :)
> Anyone
> > recommend any good books? I hear that the O'Rielly Programming Python
> book
> > is great.
> >
> > Thanks for your help, in advance!
> >
> > Cheers,
> >
> > Ben
> >
> >
> >
> > _______________________________________________
> >  Mod_python mailing list
> >  Mod_python@modpython.org
> >  http://mailman.modpython.org/mailman/listinfo/mod_python
> >
> >
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080309/42a055ac/attachment-0001.html
From auther_bin at 21cn.com  Mon Mar  3 02:27:11 2008
From: auther_bin at 21cn.com (auther_bin)
Date: Sun Mar  9 06:27:18 2008
Subject: [mod_python] Help about apache mod_python Segmentation fault
References: <200802271315514506355@21cn.com>,
	<88e286470802262129s77d47709p5518fa57ae0abc0d@mail.gmail.com>
Message-ID: <200803031527108703804@21cn.com>

Hi Graham Dumpleton,

And, when I debug in RedHat9 and my embeded envirenment, the main process goes different!?

in Redhat9, run like: 
(gdb) b main
Breakpoint 1 at 0x8067a40: file main.c, line 438.
(gdb) run -X
Starting program: /usr/local/apache2/bin/httpd -X
[New Thread 1076592288 (LWP 1049)]
[Switching to Thread 1076592288 (LWP 1049)]

Breakpoint 1, main (argc=134642240, argv=0x2) at main.c:438
438     {
(gdb) n
272         stat = apr_app_initialize(argc, argv, NULL);

and in my embeded system runs like:

Breakpoint 1, main (argc=2, argv=0xbffff294)
    at /usr/src/build/snapgear/user/apache/server/main.c:441
441         int configtestonly = 0;
(gdb) n
442         const char *confname = SERVER_CONFIG_FILE;



it seems that, the hosting system doing something for init before the main function run, but embeded system do not?

I thinks is here somthing wrong? or there should be some compiling parameters I missed?

======= 2008-02-27 wrote: =======

>On 27/02/2008, auther_bin  <auther_bin@21cn.com > wrote:
> > Dear friends,
> >
> >         When I compiling the apache python mod_python and install it into my uClibc envirentment, 
but when I
> >  runing httpd -X, send a very little request with index.html it crashed. after some debuging work, 
I find there should be something wrong in mod_python.c line(about 1561) which looks like:
> >  --------------------------------- with my debug printing :) ------------------------
> >  printf("JJJJJJJJ %s - > python_handler\n", phase);
> >  printf("JJJJJJJJ %x[%d]\n", &req- >per_dir_config, (&python_module)- >module_index);
> >     /* get configuration */
> >     conf = (py_config *) ap_get_module_config(req- >per_dir_config,
> >                                                   &python_module);
> >  printf("JJJJJJJJ a %s conf=%x - > python_handler\n", phase,conf);
> >  .............
> >  ------------------------------ end source --------------------------------------
> >
> >  I guess that, there should be a regester error in it. with some debug message I print:
> >  ------------- printing -------------------------------
> >  JJJJJJJJJ PythonPostReadRequestHandler
> >  JJJJJJJJ PythonInitHandler - > python_handler
> >  JJJJJJJJ 820a544[29]
> >  Segmentation fault
> >  ------------- end printing ---------------------------
> >
> >  any advices pls?
>
>Unfortunately that doesn't help much.
>
>You need a stack trace to show the true location in code.
>
>Use procedure documented in section 'Debugging Crashes With GDB' of:
>
>  http://code.google.com/p/modwsgi/wiki/DebuggingTechniques
>
>to run up httpd inside of gdb and get a stack trace of where crash is occurring.
>
>This documentation is for mod_wgsi, but same procedure used for mod_python.
>
>There is a similar procedure documented on Apache site, but can't
>remember where.
>
>Graham
>
>
>__________ NOD32 2906 (20080227) Information __________
>
>This message was checked by NOD32 antivirus system.
>http://www.nod32cn.com
>
>

= = = = = = = = = = = = = = = = = = = =

                    ÖÂ
Àñ£¡
2008-03-03 

_______________________________________________
Mod_python mailing list
Mod_python@modpython.org
http://mailman.modpython.org/mailman/listinfo/mod_python


__________ NOD32 2915 (20080303) Information __________

This message was checked by NOD32 antivirus system.
http://www.nod32cn.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080303/0612e5c0/attachment.html
From graham.dumpleton at gmail.com  Sun Mar  9 07:05:57 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Sun Mar  9 07:06:10 2008
Subject: [mod_python] Help about apache mod_python Segmentation fault
In-Reply-To: <200803031527108703804@21cn.com>
References: <200802271315514506355@21cn.com>
	<88e286470802262129s77d47709p5518fa57ae0abc0d@mail.gmail.com>
	<200803031527108703804@21cn.com>
Message-ID: <88e286470803090405r554f32dfib874025076419451@mail.gmail.com>

Sorry, I have no idea how to help you any further. I have given you
suggestions of how to debug it yourself, and that is now probably as
far as I can go. Whatever this environment is you are using, it seems
to even screw up your ability to debug it. I'd suggest going to a
mailing list that deals with the environment. Better still, perhaps
use a completely different environment if you can. Alternatively
forget about using mod_python and use a web server which is
implemented in pure Python. For example, use Paste WSGI web server and
run any WSGI capable application/framework on top of it. That way you
will not have to deal with Apache in the first place.

What is so special about this uClibc environment that you have to use
it and what is the requirement you have that you must run Apache and
mod_python?

Graham

On 03/03/2008, auther_bin <auther_bin@21cn.com> wrote:
>
>
> Hi Graham Dumpleton,
>
> And, when I debug in RedHat9 and my embeded
> envirenment, the main process goes
> different!?
>
> in Redhat9, run like:
>
>
> (gdb) b main
> Breakpoint 1 at 0x8067a40: file main.c, line 438.
> (gdb) run -X
> Starting program: /usr/local/apache2/bin/httpd -X
> [New Thread 1076592288 (LWP 1049)]
> [Switching to Thread 1076592288 (LWP 1049)]
>
> Breakpoint 1, main (argc=134642240, argv=0x2) at main.c:438
> 438     {
> (gdb) n
> 272         stat = apr_app_initialize(argc, argv, NULL);
>
> and in my embeded system runs like:
>
>
>
> Breakpoint 1, main (argc=2, argv=0xbffff294)
>     at
> /usr/src/build/snapgear/user/apache/server/main.c:441
> 441         int configtestonly = 0;
> (gdb) n
> 442         const char *confname = SERVER_CONFIG_FILE;
>
>
>
> it seems that, the hosting system doing something for init before the main
> function run, but embeded system do not?
>
> I thinks is here somthing wrong? or there should be some compiling
> parameters I missed?
>
> ======= 2008-02-27 wrote: =======
>
> >On 27/02/2008, auther_bin  <auther_bin@21cn.com > wrote:
> > > Dear friends,
> > >
> > >         When I compiling the apache python mod_python
> and install it into my uClibc
> envirentment,
> but when I
> > >  runing httpd -X, send a very little request with
> index.html it crashed. after some debuging work,
> I find there should be something wrong in mod_python.c
> line(about 1561) which looks like:
> > >  --------------------------------- with my debug
> printing :) ------------------------
> > >  printf("JJJJJJJJ %s - > python_handler\n", phase);
> > >  printf("JJJJJJJJ %x[%d]\n", &req- >per_dir_config,
> (&python_module)- >module_index);
> > >     /* get configuration */
> > >     conf = (py_config *) ap_get_module_config(req-
> >per_dir_config,
> > >
> &python_module);
> > >  printf("JJJJJJJJ a %s conf=%x - > python_handler\n",
> phase,conf);
> > >  .............
> > >  ------------------------------ end source
> --------------------------------------
> > >
> > >  I guess that, there should be a regester error in
> it. with some debug message I print:
> > >  ------------- printing -------------------------------
> > >  JJJJJJJJJ PythonPostReadRequestHandler
> > >  JJJJJJJJ PythonInitHandler - > python_handler
> > >  JJJJJJJJ 820a544[29]
> > >  Segmentation fault
> > >  ------------- end printing ---------------------------
> > >
> > >  any advices pls?
> >
> >Unfortunately that doesn't help much.
> >
> >You need a stack trace to show the true location
> in code.
> >
> >Use procedure documented in section 'Debugging
> Crashes With GDB' of:
> >
> >
> http://code.google.com/p/modwsgi/wiki/DebuggingTechniques
> >
> >to run up httpd inside of gdb and get a stack trace
> of where crash is occurring.
> >
> >This documentation is for mod_wgsi, but same procedure
> used for mod_python.
> >
> >There is a similar procedure documented on Apache
> site, but can't
> >remember where.
> >
> >Graham
> >
> >
> >__________ NOD32 2906 (20080227) Information
> __________
> >
> >This message was checked by NOD32 antivirus system.
> >http://www.nod32cn.com
> >
> >
>
> = = = = = = = = = = = = = = = = = = = =
>
>
>                     ÖÂ
> Àñ£¡
> 2008-03-03
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>
>
> __________ NOD32 2915 (20080303) Information __________
>
> This message was checked by NOD32 antivirus system.
> http://www.nod32cn.com
>
>
> _______________________________________________
>  Mod_python mailing list
>  Mod_python@modpython.org
>  http://mailman.modpython.org/mailman/listinfo/mod_python
>
>

From admin at itech7.com  Sun Mar  9 10:14:28 2008
From: admin at itech7.com (Nilesh Govindrajan)
Date: Sun Mar  9 10:14:33 2008
Subject: [mod_python] Writing an Handler for this purpose ??
Message-ID: <9f3f9dbc0803090714l2eeed09fl78d02dc17272b1c6@mail.gmail.com>

I am soon going to start developing my site in Python and KID after my
 exams are over. I need some help in writing a handler. I am describing
 my question here. Please help me!


Suppose there is a KID template called home.html


Now when a visitor requests home.html ; mod_python's handler should
 load the file using the handler without changing the URL.


The same handler should be able to load any such requested page like
 index2.html


Any idea about this ?
PS: I need a complete custom system; so I will build it on my own.
 If I had to use some prebuilt CMS then why the hell I would learn
 Programming ?

-- 
Nilesh G
India Technologies Administrator
www.itech7.com
From grasshopperwisdom at yahoo.com  Mon Mar 10 09:50:47 2008
From: grasshopperwisdom at yahoo.com (cindy mason)
Date: Mon Mar 10 09:51:01 2008
Subject: [mod_python] Apaches and Pythons and Tigers, oh my!
In-Reply-To: <88e286470803081522w28d5ae44rb557d05d43cda07a@mail.gmail.com>
Message-ID: <76851.42765.qm@web35603.mail.mud.yahoo.com>

I would like to address this email because not just 4 weeks ago
I was in the same situation.  Although luckily I did not touch
2.3  The installs went ok.  BUt I was never able to use Django,
since it depended on mysql, and the mysqldb failed.

The problems I was having were the same.  I never got the answers
as to where/what  path vars needed to be set, any init files, etc.
so that the ensemble of python, mysql, and django would orchestrate
together.

2.5 has the advantage of having sqlite in it.   If I was going to
do it again, starting with Django, I'd have tried to find someone
who had gone through installing on OSX before.   It seems such a 
let down to think this is such a great language, and then not
be able to get it installed.

I understand that on linix boxes, this is not a problem.

Since OSX is the best machine environment I have ever used in my
life, and I have installed dozens of other languages, tools, sw,
on this and other platforms, I would have to conclude that the
install of the Django setup on OSX requires in-depth sys admin
knowledge that is not in the documentation...  hitting a landmine
like you did is unacceptable to me as a user.   

This kind of situation costs our country and each of us HUGE 
amounts of wasted time.   Viruses are bad enough.  But the time
it takes to recover from such problems is wasted time that we
could have been doing something productive.

That's my two cents.

Remember, you can always fall back on perl.   That will still work.
:)

Cindy

ps.
I do plan to try python in the future, but only if someone else
who knows how to do it, and has done it, sets the system up.
Its a MAJOR process on OSX apparently.


--- Graham Dumpleton <graham.dumpleton@gmail.com> wrote:

> On 09/03/2008, Ben Davies <omarshariffdontlikeit@gmail.com> wrote:
> > Can anyone help me? I've been fiddling about with this mess for
> about 48
> > hours now and I'm so close to getting this working I can taste it!
> Heres a
> > quick summary:
> >
> > - I may have installed python 2.3 in the past
> 
> No you didn't, it came with the operating system.
> 
> >  - I installed python 2.5, but it appears that it did not replace
> all the
> > references to 2.3, because
> 
> I always recommend not installing a newer version of Python on MacOS
> X
> Tiger unless you know what you are doing. :-)
> 
> > - apache/mod_python complains about a missing 2.3 framework, which
> > - I, in a spate of backspace frenzies, deleted, thinking I wouldn't
> need it,
> > cos I have 2.5 installed, which has its own framework files located
> > elsewhere
> 
> Removing the OS supplied Python is a really bad idea and you may now
> have potentially broken parts of your operating system that depend on
> it. Unless you can copy back the bits you deleted from another copy
> of
> same OS, you may have to reinstall the OS.
> 
> In short, on MacOS X, you should never delete anything under
> /System/Library as this is the operating system area. Any user code
> packages should get installed under /Library if it did so and only
> really safe to remove stuff out of there, but only if again you have
> also removed any dependencies.
> 
> After you have fixed your OS, personally I would suggest that since
> you are new to Python not to bother with mod_python initially.
> Instead, learn one of higher level frameworks such as Django or
> Pylons. These can be run with their own internal Python web servers.
> At lowest level they use WSGI which allows them to be deployed to
> various web hosting solutions if you ever get as far as a production
> system.
> 
> So, first step is to get Python 2.3 working again. After that I'd
> even
> suggest you get rid of Python 2.5 and just use Python 2.3 for the
> time
> being. If learning Python you aren't going to miss much by doing
> this.
> 
> Graham
> 
> > Other than that, I'm impressed at how easy this has been so far :)
> Python
> > looks great, and mod_python has some features that PHP just cant
> compete on
> > (creating custom apache filters in python? sweet!)
> >
> > Oh, and on top of all this, I suppose I should learn python itself
> :) Anyone
> > recommend any good books? I hear that the O'Rielly Programming
> Python book
> > is great.
> >
> > Thanks for your help, in advance!
> >
> > Cheers,
> >
> > Ben
> >
> >
> >
> > _______________________________________________
> >  Mod_python mailing list
> >  Mod_python@modpython.org
> >  http://mailman.modpython.org/mailman/listinfo/mod_python
> >
> >
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
> 

From magick.crow at gmail.com  Mon Mar 10 10:20:39 2008
From: magick.crow at gmail.com (Knapp)
Date: Mon Mar 10 10:20:45 2008
Subject: [mod_python] Setting up the httpd.conf or whatever it is called on
	your distro for psp AND ps AND . . .???
Message-ID: <f495db580803100720n1773462kd49f0fc69d84cb13@mail.gmail.com>

All I want to do is sett up mod_python so that I can have xxxx.html
with python in it AND be able to call .py files from html AND .psp. I
have gotten each to work by itself, so it is not like my system is
broken. Ah ya, 7:10 Kubuntu. Apache, mod_python, current versions.

What would I need to do with the conf to get this to work? Am I not
understanding something here? Maybe I don't need to set up all three?
I just want to write HTML pages that use python and can call python to
help with forms and also for dynamic content creation from a
postgreSQL DB... maybe launch a python based game server or client.
Thanks lots!


-- 
Douglas E Knapp
http://sf-journey-creations.wikispot.org/Front_Page
From brunson at brunson.com  Mon Mar 10 13:08:33 2008
From: brunson at brunson.com (Eric Brunson)
Date: Mon Mar 10 13:08:52 2008
Subject: [mod_python] Apaches and Pythons and Tigers, oh my!
In-Reply-To: <76851.42765.qm@web35603.mail.mud.yahoo.com>
References: <76851.42765.qm@web35603.mail.mud.yahoo.com>
Message-ID: <47D56B11.7060705@brunson.com>


So you just wrote to complain?  No help, no recommendations?  Just fix 
stuff so it runs on the platform you like?

Since thousands of Linux users around the world have no problem with 
these set ups, I would think the problem lies in OS X.  I like it too, 
but I don't use it for software development.  Maybe you should be 
complaining to Apple and not the Open Source community.

I think you accurately summarize your view on the matter in your post 
script.  You expect someone else to do it for you.

cindy mason wrote:
> I would like to address this email because not just 4 weeks ago
> I was in the same situation.  Although luckily I did not touch
> 2.3  The installs went ok.  BUt I was never able to use Django,
> since it depended on mysql, and the mysqldb failed.
>
> The problems I was having were the same.  I never got the answers
> as to where/what  path vars needed to be set, any init files, etc.
> so that the ensemble of python, mysql, and django would orchestrate
> together.
>
> 2.5 has the advantage of having sqlite in it.   If I was going to
> do it again, starting with Django, I'd have tried to find someone
> who had gone through installing on OSX before.   It seems such a 
> let down to think this is such a great language, and then not
> be able to get it installed.
>
> I understand that on linix boxes, this is not a problem.
>
> Since OSX is the best machine environment I have ever used in my
> life, and I have installed dozens of other languages, tools, sw,
> on this and other platforms, I would have to conclude that the
> install of the Django setup on OSX requires in-depth sys admin
> knowledge that is not in the documentation...  hitting a landmine
> like you did is unacceptable to me as a user.   
>
> This kind of situation costs our country and each of us HUGE 
> amounts of wasted time.   Viruses are bad enough.  But the time
> it takes to recover from such problems is wasted time that we
> could have been doing something productive.
>
> That's my two cents.
>
> Remember, you can always fall back on perl.   That will still work.
> :)
>
> Cindy
>
> ps.
> I do plan to try python in the future, but only if someone else
> who knows how to do it, and has done it, sets the system up.
> Its a MAJOR process on OSX apparently.
>
>
>   

From omarshariffdontlikeit at gmail.com  Mon Mar 10 17:04:35 2008
From: omarshariffdontlikeit at gmail.com (Ben Davies)
Date: Mon Mar 10 17:04:40 2008
Subject: [mod_python] Apaches and Pythons and Tigers, oh my!
In-Reply-To: <47D56B11.7060705@brunson.com>
References: <76851.42765.qm@web35603.mail.mud.yahoo.com>
	<47D56B11.7060705@brunson.com>
Message-ID: <a4754c780803101404m75e68c5dm66cc6dc8e72580e5@mail.gmail.com>

Hi guys and gals,

Quick progress update:

I Googled about and found this article:

http://www.mail-archive.com/django-users@googlegroups.com/msg38088.html

I noticed that it made reference to the correct 2.5 library framework, so I
recompiled mod_python with the following set of instructions:

$ export
LDFLAGS=-Wl,-F/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/site-packages/
$ ./configure --with-apxs=/usr/local/apache2/bin/apxs
--with-python=/usr/local/bin/python
$ make
$ sudo make install

Restarted Apache, and got the following message again:

Cannot load /usr/local/apache2/modules/mod_python.so into server: Library
not loaded:
/System/Library/Frameworks/Python.framework/Versions/2.3/Python\n
Referenced from: /usr/local/apache2/modules/mod_python.so\n  Reason: image
not found

Again, it still references 2.3. So there must still be some obscure
reference somewhere, pointing the configure script to the older framework
version.

Any OSX/Unix jedi's out there that shed some light on this, or any
suggestions on locations I should be looking for this reference?

I'd just like to add to Cindys previous comment that I too have had nothing
but positive experiences with OSX, and it certainly has eased the "fear" of
Unix/Linux systems for me. However, it is my understanding that mod_python
is relatively new (I not sure if this truely is the case, but it certainly
is the image projected), and that whilst it works and is production ready,
it's not in the PHP/Ruby+Rails click-click-click install phase just yet.
Personally, I understood that using mod_python would require that I roll my
sleeves up and get elbow deep in the terminal, but then I'm personally
having a whale of a time trying to sort this out and get it working on OSX.
But maybe thats just me :)

anyways, I'll keep poking away at this and posting my results!

Cheers!

Ben


On Mon, Mar 10, 2008 at 5:08 PM, Eric Brunson <brunson@brunson.com> wrote:

>
> So you just wrote to complain?  No help, no recommendations?  Just fix
> stuff so it runs on the platform you like?
>
> Since thousands of Linux users around the world have no problem with
> these set ups, I would think the problem lies in OS X.  I like it too,
> but I don't use it for software development.  Maybe you should be
> complaining to Apple and not the Open Source community.
>
> I think you accurately summarize your view on the matter in your post
> script.  You expect someone else to do it for you.
>
> cindy mason wrote:
> > I would like to address this email because not just 4 weeks ago
> > I was in the same situation.  Although luckily I did not touch
> > 2.3  The installs went ok.  BUt I was never able to use Django,
> > since it depended on mysql, and the mysqldb failed.
> >
> > The problems I was having were the same.  I never got the answers
> > as to where/what  path vars needed to be set, any init files, etc.
> > so that the ensemble of python, mysql, and django would orchestrate
> > together.
> >
> > 2.5 has the advantage of having sqlite in it.   If I was going to
> > do it again, starting with Django, I'd have tried to find someone
> > who had gone through installing on OSX before.   It seems such a
> > let down to think this is such a great language, and then not
> > be able to get it installed.
> >
> > I understand that on linix boxes, this is not a problem.
> >
> > Since OSX is the best machine environment I have ever used in my
> > life, and I have installed dozens of other languages, tools, sw,
> > on this and other platforms, I would have to conclude that the
> > install of the Django setup on OSX requires in-depth sys admin
> > knowledge that is not in the documentation...  hitting a landmine
> > like you did is unacceptable to me as a user.
> >
> > This kind of situation costs our country and each of us HUGE
> > amounts of wasted time.   Viruses are bad enough.  But the time
> > it takes to recover from such problems is wasted time that we
> > could have been doing something productive.
> >
> > That's my two cents.
> >
> > Remember, you can always fall back on perl.   That will still work.
> > :)
> >
> > Cindy
> >
> > ps.
> > I do plan to try python in the future, but only if someone else
> > who knows how to do it, and has done it, sets the system up.
> > Its a MAJOR process on OSX apparently.
> >
> >
> >
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080310/816b2259/attachment.html
From roberto at connexer.com  Mon Mar 10 19:14:28 2008
From: roberto at connexer.com (Roberto =?iso-8859-1?Q?C=2E_S=E1nchez?=)
Date: Mon Mar 10 19:14:34 2008
Subject: [mod_python] Apaches and Pythons and Tigers, oh my!
In-Reply-To: <a4754c780803101404m75e68c5dm66cc6dc8e72580e5@mail.gmail.com>
References: <76851.42765.qm@web35603.mail.mud.yahoo.com>
	<47D56B11.7060705@brunson.com>
	<a4754c780803101404m75e68c5dm66cc6dc8e72580e5@mail.gmail.com>
Message-ID: <20080310231428.GA28970@connexer.com>

On Mon, Mar 10, 2008 at 09:04:35PM +0000, Ben Davies wrote:
> 
> Any OSX/Unix jedi's out there that shed some light on this, or any
> suggestions on locations I should be looking for this reference?
> 

Is it absolutely, positively necessary to use Python 2.5?  Is Python 2.3
as shipped with OS X really not sufficient?

Regards,

-Roberto
-- 
Roberto C. S?nchez
http://people.connexer.com/~roberto
http://www.connexer.com
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
Url : http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080310/7da1dc43/attachment.bin
From omarshariffdontlikeit at gmail.com  Mon Mar 10 19:43:11 2008
From: omarshariffdontlikeit at gmail.com (Ben Davies)
Date: Mon Mar 10 19:43:19 2008
Subject: [mod_python] Apaches and Pythons and Tigers, oh my!
In-Reply-To: <20080310231428.GA28970@connexer.com>
References: <76851.42765.qm@web35603.mail.mud.yahoo.com>
	<47D56B11.7060705@brunson.com>
	<a4754c780803101404m75e68c5dm66cc6dc8e72580e5@mail.gmail.com>
	<20080310231428.GA28970@connexer.com>
Message-ID: <a4754c780803101643o170dc9a4w85b60ee71cb7705e@mail.gmail.com>

"Is it absolutely, positively necessary to use Python 2.5?  Is Python 2.3
as shipped with OS X really not sufficient?"

*slaps forehead*
I hadn't actually thought of that, I'd just assumed that mod_python
3.3.1required python
2.5.

I'll give it a shot, and report back tomorrow :)

Cheers!

Ben


2008/3/10 Roberto C. S?nchez <roberto@connexer.com>:

> On Mon, Mar 10, 2008 at 09:04:35PM +0000, Ben Davies wrote:
> >
> > Any OSX/Unix jedi's out there that shed some light on this, or any
> > suggestions on locations I should be looking for this reference?
> >
>
> Is it absolutely, positively necessary to use Python 2.5?  Is Python 2.3
> as shipped with OS X really not sufficient?
>
> Regards,
>
> -Roberto
> --
> Roberto C. S?nchez
> http://people.connexer.com/~roberto<http://people.connexer.com/%7Eroberto>
> http://www.connexer.com
>
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.6 (GNU/Linux)
>
> iD8DBQFH1cDU5SXWIKfIlGQRAsX9AKCAg2DuMrrIF+HiRuHC1n36opsFtgCgt6nC
> 1toCsIeh4trwEKh4WsUu6h8=
> =apY1
> -----END PGP SIGNATURE-----
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080310/812a433a/attachment.html
From graham.dumpleton at gmail.com  Mon Mar 10 20:44:00 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Mon Mar 10 20:44:07 2008
Subject: [mod_python] Using mod_python with MacOSX Tiger/Leopard.
Message-ID: <88e286470803101743n157120f3hd5ebcdf6fa65a88e@mail.gmail.com>

For those users of MacOS X out there who have been having problems, or
moaning about  the state of Python/Apache/mod_python on MacOS X, I set
you a challenge. Since you seem to be unwilling to come up with
patches to fix the problems, or just aren't in a position to work out
what the packages required might be, then please at least do the
following.

1. Using a subversion client, checkout latest mod_python source code from trunk:

  svn co http://svn.apache.org/repos/asf/quetzalcoatl/mod_python/trunk
mod_python-trunk

2. Build the source code on your MacOS X system, whether that be Tiger
or Leopard and whether you be using the standard OS installation of
Python or an alternate version such as from MacPorts. Ensure you use
--with-python to point at the version of Python you want to use. Use
--with-apxs as necessary.

3. Install it and see if it works without you having to have made any
changes to the source code. If you have multiple versions of Python
installed on your system, try it with all of them to make sure all
work. Just ensure you do a full 'stop' of Apache between testing each
version. If you don't have code which will work with that version of
Python, just use the mod_python testhandler.

<Location /testhandler>
SetHandler mod_python
PythonHandler mod_python.testhandler
</Location>

4. Respond with your results about what works and what doesn't.

Hopefully the source in subversion trunk will now build on both Tiger
and Leopard out of the box and deal with Python installations being in
different locations. It also shouldn't pick up the wrong framework
where multiple framework versions of Python are installed. On Leopard,
it should also ensure that the mod_python.so file and the psp C
extension module are built with the same architectures that your
Apache binary is built with.

Do note, I haven't myself been able to set this on Tiger yet, but
believe it should work. Also, because this affects the main build
process and because I replaced whole sections of configure script code
with stuff from mod_wsgi which I know works properly, then building
code for other platforms may also be affected. Thus, if you have
access to other platforms besides MacOS X, then test it there as well.

So rather than complaining, here is your chance to help out and
improve the situation. :-)

BTW, Apple has documented the issues with building Python C extension
modules for additional architectures. It can be found at:

  http://developer.apple.com/releasenotes/OpenSource/PerlExtensionsRelNotes/index.html

This is referenced along with other stuff about the sorts of problems
that crop up on MacOS X at:

  http://code.google.com/p/modwsgi/wiki/InstallationOnMacOSX

Graham
From roberto at connexer.com  Mon Mar 10 21:02:42 2008
From: roberto at connexer.com (Roberto =?iso-8859-1?Q?C=2E_S=E1nchez?=)
Date: Mon Mar 10 21:02:47 2008
Subject: [mod_python] Using mod_python with MacOSX Tiger/Leopard.
In-Reply-To: <88e286470803101743n157120f3hd5ebcdf6fa65a88e@mail.gmail.com>
References: <88e286470803101743n157120f3hd5ebcdf6fa65a88e@mail.gmail.com>
Message-ID: <20080311010242.GD28970@connexer.com>

On Tue, Mar 11, 2008 at 11:44:00AM +1100, Graham Dumpleton wrote:
> 
> 4. Respond with your results about what works and what doesn't.
> 
Graham,

It Works For Me (TM).

Basically, I configure Apache like this:

./configure --prefix=/usr/local/apache2/server --sysconfdir=/usr/local/apache2/etc --datadir=/usr/local/apache2/data --enable-modules=all --enable-mods-shared=all --with-included-apr --with-mpm=prefork --enable-ldap --enable-authnz-ldap --enable-ssl --with-ldap --with-pcre=/usr/local/pcre

I configure mod_python like this:

./configure --prefix=/usr/local/apache2/server --with-apxs2=/usr/local/apache2/server/bin/apxs

I use version 2.2.3 of Apache and version 3.2.10 of mod_python (my
servers run Debian Etch and I try to replicate that environment as best
I can on my Mac laptop).

It all just works out of the box.

Regards,

-Roberto

-- 
Roberto C. S?nchez
http://people.connexer.com/~roberto
http://www.connexer.com
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
Url : http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080310/dcfc4c44/attachment.bin
From brunson at brunson.com  Mon Mar 10 21:12:24 2008
From: brunson at brunson.com (Eric Brunson)
Date: Mon Mar 10 21:12:32 2008
Subject: [mod_python] Using mod_python with MacOSX Tiger/Leopard.
In-Reply-To: <88e286470803101743n157120f3hd5ebcdf6fa65a88e@mail.gmail.com>
References: <88e286470803101743n157120f3hd5ebcdf6fa65a88e@mail.gmail.com>
Message-ID: <47D5DC78.7000808@brunson.com>


Graham,

That's an excellent proposal. Undoubtedly more constructive than my 
ill-advised rant in a previous email.  I currently have my set up from a 
year ago still runnable, but I'm probably using versions quite old by 
this weeks standards.

lima(~)$ httpd -V | head -1
Server version: Apache/1.3.33 (Darwin)
lima(~)$ python -V
Python 2.4.3
lima(~)$ locate mod_python.so
/Users/brunson/src/mod_python-3.2.10/src/.libs/mod_python.so
/Users/brunson/src/mod_python-3.2.10/src/mod_python.so
/usr/local/apache2/modules/mod_python.so
lima(~)$ python -c "import MySQLdb ; print MySQLdb.__version__"
1.2.1_p2

Everything is working and I can supply config options for those who wish 
to reproduce, but in todays terms, those versions are practically 
archaic.  I think most of the dependencies were a combination of what 
was available in Darwin Ports and what I was running at work at the 
time.  We've since upgraded to apache 2.2, python 2.5.1, mod_python 
3.3.1 and MySQLdb 1.2.2 under Solaris 10, so I'm out of date in every 
respect on OSX.

If I have some time over the next few days (weeks?), I'll try to update 
and post back results.  I'm afraid that, no matter what, I won't be able 
to comment beyond Tiger, as I've been assured my little 800MHz G4 iMac 
won't run Leopard.

Thanks for the positive direction, I hope I have some time to contribute 
more than the above.

Graham Dumpleton wrote:
> For those users of MacOS X out there who have been having problems, or
> moaning about  the state of Python/Apache/mod_python on MacOS X, I set
> you a challenge. Since you seem to be unwilling to come up with
> patches to fix the problems, or just aren't in a position to work out
> what the packages required might be, then please at least do the
> following.
>
> 1. Using a subversion client, checkout latest mod_python source code from trunk:
>
>   svn co http://svn.apache.org/repos/asf/quetzalcoatl/mod_python/trunk
> mod_python-trunk
>
> 2. Build the source code on your MacOS X system, whether that be Tiger
> or Leopard and whether you be using the standard OS installation of
> Python or an alternate version such as from MacPorts. Ensure you use
> --with-python to point at the version of Python you want to use. Use
> --with-apxs as necessary.
>
> 3. Install it and see if it works without you having to have made any
> changes to the source code. If you have multiple versions of Python
> installed on your system, try it with all of them to make sure all
> work. Just ensure you do a full 'stop' of Apache between testing each
> version. If you don't have code which will work with that version of
> Python, just use the mod_python testhandler.
>
> <Location /testhandler>
> SetHandler mod_python
> PythonHandler mod_python.testhandler
> </Location>
>
> 4. Respond with your results about what works and what doesn't.
>
> Hopefully the source in subversion trunk will now build on both Tiger
> and Leopard out of the box and deal with Python installations being in
> different locations. It also shouldn't pick up the wrong framework
> where multiple framework versions of Python are installed. On Leopard,
> it should also ensure that the mod_python.so file and the psp C
> extension module are built with the same architectures that your
> Apache binary is built with.
>
> Do note, I haven't myself been able to set this on Tiger yet, but
> believe it should work. Also, because this affects the main build
> process and because I replaced whole sections of configure script code
> with stuff from mod_wsgi which I know works properly, then building
> code for other platforms may also be affected. Thus, if you have
> access to other platforms besides MacOS X, then test it there as well.
>
> So rather than complaining, here is your chance to help out and
> improve the situation. :-)
>
> BTW, Apple has documented the issues with building Python C extension
> modules for additional architectures. It can be found at:
>
>   http://developer.apple.com/releasenotes/OpenSource/PerlExtensionsRelNotes/index.html
>
> This is referenced along with other stuff about the sorts of problems
> that crop up on MacOS X at:
>
>   http://code.google.com/p/modwsgi/wiki/InstallationOnMacOSX
>
> Graham
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>   

From graham.dumpleton at gmail.com  Mon Mar 10 21:16:01 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Mon Mar 10 21:16:07 2008
Subject: [mod_python] Using mod_python with MacOSX Tiger/Leopard.
In-Reply-To: <20080311010242.GD28970@connexer.com>
References: <88e286470803101743n157120f3hd5ebcdf6fa65a88e@mail.gmail.com>
	<20080311010242.GD28970@connexer.com>
Message-ID: <88e286470803101816y86ee50cqcc16218d212e00d@mail.gmail.com>

I am confused. See comments below.

On 11/03/2008, Roberto C. S?nchez <roberto@connexer.com> wrote:
> On Tue, Mar 11, 2008 at 11:44:00AM +1100, Graham Dumpleton wrote:
>  >
>  > 4. Respond with your results about what works and what doesn't.
>  >
>
> Graham,
>
>  It Works For Me (TM).
>
>  Basically, I configure Apache like this:
>
>  ./configure --prefix=/usr/local/apache2/server --sysconfdir=/usr/local/apache2/etc --datadir=/usr/local/apache2/data --enable-modules=all --enable-mods-shared=all --with-included-apr --with-mpm=prefork --enable-ldap --enable-authnz-ldap --enable-ssl --with-ldap --with-pcre=/usr/local/pcre
>
>  I configure mod_python like this:
>
>  ./configure --prefix=/usr/local/apache2/server --with-apxs2=/usr/local/apache2/server/bin/apxs

There is no option --with-apxs2 to the mod_python configure script.
Nor is there a --prefix option that does anything from memory.

>  I use version 2.2.3 of Apache and version 3.2.10 of mod_python

Do you mean to say this is what you normally use, or that you are
telling me works out of the box for you?

I specifically want to know about mod_python source code from
subversion trunk. ie., version 3.3.2-dev-20080311. Which version are
you talking about?

BTW, if running on MacOS X, please ensure you state which version of
MacOS X and which Python version and distribution, ie., OS, MacPorts,
fink or self installed.

Graham

>  (my
>  servers run Debian Etch and I try to replicate that environment as best
>  I can on my Mac laptop).
>
>  It all just works out of the box.
>
>  Regards,
>
>  -Roberto
>
>
>  --
>  Roberto C. S?nchez
>  http://people.connexer.com/~roberto
>  http://www.connexer.com
>
> -----BEGIN PGP SIGNATURE-----
>  Version: GnuPG v1.4.6 (GNU/Linux)
>
>  iD8DBQFH1doy5SXWIKfIlGQRAj72AJ9ShxjjWYovltb290KK6tRd/exqRwCfetYQ
>  l1DnEd/uTTDJsqs+Tcr3yVw=
>  =0TxS
>  -----END PGP SIGNATURE-----
>
> _______________________________________________
>  Mod_python mailing list
>  Mod_python@modpython.org
>  http://mailman.modpython.org/mailman/listinfo/mod_python
>
>

From graham.dumpleton at gmail.com  Mon Mar 10 21:19:33 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Mon Mar 10 21:19:38 2008
Subject: [mod_python] Using mod_python with MacOSX Tiger/Leopard.
In-Reply-To: <47D5DC78.7000808@brunson.com>
References: <88e286470803101743n157120f3hd5ebcdf6fa65a88e@mail.gmail.com>
	<47D5DC78.7000808@brunson.com>
Message-ID: <88e286470803101819g40e9ebccia00e4f9261f0f74a@mail.gmail.com>

On 11/03/2008, Eric Brunson <brunson@brunson.com> wrote:
>
>  Graham,
>
>  That's an excellent proposal. Undoubtedly more constructive than my
>  ill-advised rant in a previous email.  I currently have my set up from a
>  year ago still runnable, but I'm probably using versions quite old by
>  this weeks standards.
>
>  lima(~)$ httpd -V | head -1
>  Server version: Apache/1.3.33 (Darwin)

Hmmm, mod_python 3.2.10 will not run with Apache 1.3. Sure you have an
alternate version of Apache installed.

BTW, the subversion trunk source code still requires Apache 2.X. It
doesn't somehow magically now work on older versions of Apache.

If you are wanting to use Apache 1.3 and aren't using mod_python
specific features but just want to run WSGI capable applications,
better off using mod_wsgi.

>  lima(~)$ python -V
>  Python 2.4.3
>  lima(~)$ locate mod_python.so
>  /Users/brunson/src/mod_python-3.2.10/src/.libs/mod_python.so
>  /Users/brunson/src/mod_python-3.2.10/src/mod_python.so
>  /usr/local/apache2/modules/mod_python.so
>  lima(~)$ python -c "import MySQLdb ; print MySQLdb.__version__"
>  1.2.1_p2
>
>  Everything is working and I can supply config options for those who wish
>  to reproduce, but in todays terms, those versions are practically
>  archaic.  I think most of the dependencies were a combination of what
>  was available in Darwin Ports and what I was running at work at the
>  time.  We've since upgraded to apache 2.2, python 2.5.1, mod_python
>  3.3.1 and MySQLdb 1.2.2 under Solaris 10, so I'm out of date in every
>  respect on OSX.
>
>  If I have some time over the next few days (weeks?), I'll try to update
>  and post back results.  I'm afraid that, no matter what, I won't be able
>  to comment beyond Tiger, as I've been assured my little 800MHz G4 iMac
>  won't run Leopard.

Same problem with my old G3 iBook, but then that isn't even a G4.
Still good for surfing when watching TV though. :-)

Graham

>  Thanks for the positive direction, I hope I have some time to contribute
>  more than the above.
>
>
>  Graham Dumpleton wrote:
>  > For those users of MacOS X out there who have been having problems, or
>  > moaning about  the state of Python/Apache/mod_python on MacOS X, I set
>  > you a challenge. Since you seem to be unwilling to come up with
>  > patches to fix the problems, or just aren't in a position to work out
>  > what the packages required might be, then please at least do the
>  > following.
>  >
>  > 1. Using a subversion client, checkout latest mod_python source code from trunk:
>  >
>  >   svn co http://svn.apache.org/repos/asf/quetzalcoatl/mod_python/trunk
>  > mod_python-trunk
>  >
>  > 2. Build the source code on your MacOS X system, whether that be Tiger
>  > or Leopard and whether you be using the standard OS installation of
>  > Python or an alternate version such as from MacPorts. Ensure you use
>  > --with-python to point at the version of Python you want to use. Use
>  > --with-apxs as necessary.
>  >
>  > 3. Install it and see if it works without you having to have made any
>  > changes to the source code. If you have multiple versions of Python
>  > installed on your system, try it with all of them to make sure all
>  > work. Just ensure you do a full 'stop' of Apache between testing each
>  > version. If you don't have code which will work with that version of
>  > Python, just use the mod_python testhandler.
>  >
>  > <Location /testhandler>
>  > SetHandler mod_python
>  > PythonHandler mod_python.testhandler
>  > </Location>
>  >
>  > 4. Respond with your results about what works and what doesn't.
>  >
>  > Hopefully the source in subversion trunk will now build on both Tiger
>  > and Leopard out of the box and deal with Python installations being in
>  > different locations. It also shouldn't pick up the wrong framework
>  > where multiple framework versions of Python are installed. On Leopard,
>  > it should also ensure that the mod_python.so file and the psp C
>  > extension module are built with the same architectures that your
>  > Apache binary is built with.
>  >
>  > Do note, I haven't myself been able to set this on Tiger yet, but
>  > believe it should work. Also, because this affects the main build
>  > process and because I replaced whole sections of configure script code
>  > with stuff from mod_wsgi which I know works properly, then building
>  > code for other platforms may also be affected. Thus, if you have
>  > access to other platforms besides MacOS X, then test it there as well.
>  >
>  > So rather than complaining, here is your chance to help out and
>  > improve the situation. :-)
>  >
>  > BTW, Apple has documented the issues with building Python C extension
>  > modules for additional architectures. It can be found at:
>  >
>  >   http://developer.apple.com/releasenotes/OpenSource/PerlExtensionsRelNotes/index.html
>  >
>  > This is referenced along with other stuff about the sorts of problems
>  > that crop up on MacOS X at:
>  >
>  >   http://code.google.com/p/modwsgi/wiki/InstallationOnMacOSX
>  >
>  > Graham
>
> > _______________________________________________
>  > Mod_python mailing list
>  > Mod_python@modpython.org
>  > http://mailman.modpython.org/mailman/listinfo/mod_python
>  >
>
>
From brunson at brunson.com  Mon Mar 10 21:23:20 2008
From: brunson at brunson.com (Eric Brunson)
Date: Mon Mar 10 21:23:29 2008
Subject: [mod_python] Using mod_python with MacOSX Tiger/Leopard.
In-Reply-To: <20080311010242.GD28970@connexer.com>
References: <88e286470803101743n157120f3hd5ebcdf6fa65a88e@mail.gmail.com>
	<20080311010242.GD28970@connexer.com>
Message-ID: <47D5DF08.6050409@brunson.com>

Roberto C. S?nchez wrote:
> On Tue, Mar 11, 2008 at 11:44:00AM +1100, Graham Dumpleton wrote:
>   
>> 4. Respond with your results about what works and what doesn't.
>>
>>     

Roberto,

What version of OSX are you running?  Also, do you have mysql and python 
support for mysql on your box?

One of the rocket scientists at work runs Leopard and didn't get mysql 
compiled right away, so gave up trying.  He's not really a sysadmin, 
though, he's more in tune with operating our spacecraft and running 
Matlab simulations of RF plans.  :-)

Now that I think about it, I may ask him for an account on his box and 
see if I can get all this running under Leopard.

Thanks,
e.

> Graham,
>
> It Works For Me (TM).
>
> Basically, I configure Apache like this:
>
> ./configure --prefix=/usr/local/apache2/server --sysconfdir=/usr/local/apache2/etc --datadir=/usr/local/apache2/data --enable-modules=all --enable-mods-shared=all --with-included-apr --with-mpm=prefork --enable-ldap --enable-authnz-ldap --enable-ssl --with-ldap --with-pcre=/usr/local/pcre
>
> I configure mod_python like this:
>
> ./configure --prefix=/usr/local/apache2/server --with-apxs2=/usr/local/apache2/server/bin/apxs
>
> I use version 2.2.3 of Apache and version 3.2.10 of mod_python (my
> servers run Debian Etch and I try to replicate that environment as best
> I can on my Mac laptop).
>
> It all just works out of the box.
>
> Regards,
>
> -Roberto
>
>   
> ------------------------------------------------------------------------
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>   

From roberto at connexer.com  Mon Mar 10 21:23:59 2008
From: roberto at connexer.com (Roberto =?iso-8859-1?Q?C=2E_S=E1nchez?=)
Date: Mon Mar 10 21:24:05 2008
Subject: [mod_python] Using mod_python with MacOSX Tiger/Leopard.
In-Reply-To: <88e286470803101816y86ee50cqcc16218d212e00d@mail.gmail.com>
References: <88e286470803101743n157120f3hd5ebcdf6fa65a88e@mail.gmail.com>
	<20080311010242.GD28970@connexer.com>
	<88e286470803101816y86ee50cqcc16218d212e00d@mail.gmail.com>
Message-ID: <20080311012359.GE28970@connexer.com>

On Tue, Mar 11, 2008 at 12:16:01PM +1100, Graham Dumpleton wrote:
> I am confused. See comments below.
> 
> On 11/03/2008, Roberto C. S?nchez <roberto@connexer.com> wrote:
> > On Tue, Mar 11, 2008 at 11:44:00AM +1100, Graham Dumpleton wrote:
> >  >
> >  > 4. Respond with your results about what works and what doesn't.
> >  >
> >
> > Graham,
> >
> >  It Works For Me (TM).
> >
> >  Basically, I configure Apache like this:
> >
> >  ./configure --prefix=/usr/local/apache2/server --sysconfdir=/usr/local/apache2/etc --datadir=/usr/local/apache2/data --enable-modules=all --enable-mods-shared=all --with-included-apr --with-mpm=prefork --enable-ldap --enable-authnz-ldap --enable-ssl --with-ldap --with-pcre=/usr/local/pcre
> >
> >  I configure mod_python like this:
> >
> >  ./configure --prefix=/usr/local/apache2/server --with-apxs2=/usr/local/apache2/server/bin/apxs
> 
> There is no option --with-apxs2 to the mod_python configure script.
> Nor is there a --prefix option that does anything from memory.
> 
Strange.  It looks like I copied the line I used for mod_php.  Now I am
not certain how I configured mod_python.

> >  I use version 2.2.3 of Apache and version 3.2.10 of mod_python
> 
> Do you mean to say this is what you normally use, or that you are
> telling me works out of the box for you?
> 
It is what I use and it works out of the box for me.  I will see if I
can try the svn trunk later and report back.

> I specifically want to know about mod_python source code from
> subversion trunk. ie., version 3.3.2-dev-20080311. Which version are
> you talking about?
> 
Just 3.2.10.

> BTW, if running on MacOS X, please ensure you state which version of
> MacOS X and which Python version and distribution, ie., OS, MacPorts,
> fink or self installed.
> 
Stock Python from Apple on 10.4.

Regards,

-Roberto
-- 
Roberto C. S?nchez
http://people.connexer.com/~roberto
http://www.connexer.com
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
Url : http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080310/e2c12ea7/attachment-0001.bin
From roberto at connexer.com  Mon Mar 10 21:30:32 2008
From: roberto at connexer.com (Roberto =?iso-8859-1?Q?C=2E_S=E1nchez?=)
Date: Mon Mar 10 21:30:39 2008
Subject: [mod_python] Using mod_python with MacOSX Tiger/Leopard.
In-Reply-To: <47D5DF08.6050409@brunson.com>
References: <88e286470803101743n157120f3hd5ebcdf6fa65a88e@mail.gmail.com>
	<20080311010242.GD28970@connexer.com>
	<47D5DF08.6050409@brunson.com>
Message-ID: <20080311013032.GF28970@connexer.com>

On Mon, Mar 10, 2008 at 07:23:20PM -0600, Eric Brunson wrote:
> 
> What version of OSX are you running?  Also, do you have mysql and python 
> support for mysql on your box?
> 
I am using Tiger.  However, I don't have any MySQL stuff on my system.
I only use PostgreSQL (don't get me started or we will end up with a
flamewar :-)

> One of the rocket scientists at work runs Leopard and didn't get mysql 
> compiled right away, so gave up trying.  He's not really a sysadmin, 
> though, he's more in tune with operating our spacecraft and running 
> Matlab simulations of RF plans.  :-)
> 
Well, someone people have to be sysadmins and others have to be rocket
scientists.  Few people get to be both :-)

> Now that I think about it, I may ask him for an account on his box and 
> see if I can get all this running under Leopard.
> 
I'd be interested to hear how it turns out.

Regards,

-Roberto

-- 
Roberto C. S?nchez
http://people.connexer.com/~roberto
http://www.connexer.com
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
Url : http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080310/dfab38fe/attachment.bin
From brunson at brunson.com  Mon Mar 10 21:32:55 2008
From: brunson at brunson.com (Eric Brunson)
Date: Mon Mar 10 21:33:03 2008
Subject: [mod_python] Using mod_python with MacOSX Tiger/Leopard.
In-Reply-To: <88e286470803101819g40e9ebccia00e4f9261f0f74a@mail.gmail.com>
References: <88e286470803101743n157120f3hd5ebcdf6fa65a88e@mail.gmail.com>	
	<47D5DC78.7000808@brunson.com>
	<88e286470803101819g40e9ebccia00e4f9261f0f74a@mail.gmail.com>
Message-ID: <47D5E147.3080100@brunson.com>

Graham Dumpleton wrote:
> On 11/03/2008, Eric Brunson <brunson@brunson.com> wrote:
>   
>>  Graham,
>>
>>  That's an excellent proposal. Undoubtedly more constructive than my
>>  ill-advised rant in a previous email.  I currently have my set up from a
>>  year ago still runnable, but I'm probably using versions quite old by
>>  this weeks standards.
>>
>>  lima(~)$ httpd -V | head -1
>>  Server version: Apache/1.3.33 (Darwin)
>>     
>
> Hmmm, mod_python 3.2.10 will not run with Apache 1.3. Sure you have an
> alternate version of Apache installed.
>   

Good catch.

lima(~)$ /usr/local/apache2/bin/httpd -V
Server version: Apache/2.0.59

I think OSX comes with a preinstalled apache, but this one I seem to 
have compiled myself.

lima(~/src)$ grep configure httpd-2.0.59/config.log | head -3 | tail -1
  $ ./configure --enable-mods-shared=most --enable-ssl --with-mpm=worker 
--without-berkeley-db

mod_python was configured with no command line options.

I'm guessing that due to the /usr/local/bin/mysql location of mysql and 
lack of source in my build directory that I installed it from either 
Darwin ports or possibly package from mysql, I can't remember which.

Thanks for catching that.

Sincerely,
e.

> BTW, the subversion trunk source code still requires Apache 2.X. It
> doesn't somehow magically now work on older versions of Apache.
>
> If you are wanting to use Apache 1.3 and aren't using mod_python
> specific features but just want to run WSGI capable applications,
> better off using mod_wsgi.
>
>   
>>  lima(~)$ python -V
>>  Python 2.4.3
>>  lima(~)$ locate mod_python.so
>>  /Users/brunson/src/mod_python-3.2.10/src/.libs/mod_python.so
>>  /Users/brunson/src/mod_python-3.2.10/src/mod_python.so
>>  /usr/local/apache2/modules/mod_python.so
>>  lima(~)$ python -c "import MySQLdb ; print MySQLdb.__version__"
>>  1.2.1_p2
>>
>>  Everything is working and I can supply config options for those who wish
>>  to reproduce, but in todays terms, those versions are practically
>>  archaic.  I think most of the dependencies were a combination of what
>>  was available in Darwin Ports and what I was running at work at the
>>  time.  We've since upgraded to apache 2.2, python 2.5.1, mod_python
>>  3.3.1 and MySQLdb 1.2.2 under Solaris 10, so I'm out of date in every
>>  respect on OSX.
>>
>>  If I have some time over the next few days (weeks?), I'll try to update
>>  and post back results.  I'm afraid that, no matter what, I won't be able
>>  to comment beyond Tiger, as I've been assured my little 800MHz G4 iMac
>>  won't run Leopard.
>>     
>
> Same problem with my old G3 iBook, but then that isn't even a G4.
> Still good for surfing when watching TV though. :-)
>
> Graham
>
>   
>>  Thanks for the positive direction, I hope I have some time to contribute
>>  more than the above.
>>
>>
>>  Graham Dumpleton wrote:
>>  > For those users of MacOS X out there who have been having problems, or
>>  > moaning about  the state of Python/Apache/mod_python on MacOS X, I set
>>  > you a challenge. Since you seem to be unwilling to come up with
>>  > patches to fix the problems, or just aren't in a position to work out
>>  > what the packages required might be, then please at least do the
>>  > following.
>>  >
>>  > 1. Using a subversion client, checkout latest mod_python source code from trunk:
>>  >
>>  >   svn co http://svn.apache.org/repos/asf/quetzalcoatl/mod_python/trunk
>>  > mod_python-trunk
>>  >
>>  > 2. Build the source code on your MacOS X system, whether that be Tiger
>>  > or Leopard and whether you be using the standard OS installation of
>>  > Python or an alternate version such as from MacPorts. Ensure you use
>>  > --with-python to point at the version of Python you want to use. Use
>>  > --with-apxs as necessary.
>>  >
>>  > 3. Install it and see if it works without you having to have made any
>>  > changes to the source code. If you have multiple versions of Python
>>  > installed on your system, try it with all of them to make sure all
>>  > work. Just ensure you do a full 'stop' of Apache between testing each
>>  > version. If you don't have code which will work with that version of
>>  > Python, just use the mod_python testhandler.
>>  >
>>  > <Location /testhandler>
>>  > SetHandler mod_python
>>  > PythonHandler mod_python.testhandler
>>  > </Location>
>>  >
>>  > 4. Respond with your results about what works and what doesn't.
>>  >
>>  > Hopefully the source in subversion trunk will now build on both Tiger
>>  > and Leopard out of the box and deal with Python installations being in
>>  > different locations. It also shouldn't pick up the wrong framework
>>  > where multiple framework versions of Python are installed. On Leopard,
>>  > it should also ensure that the mod_python.so file and the psp C
>>  > extension module are built with the same architectures that your
>>  > Apache binary is built with.
>>  >
>>  > Do note, I haven't myself been able to set this on Tiger yet, but
>>  > believe it should work. Also, because this affects the main build
>>  > process and because I replaced whole sections of configure script code
>>  > with stuff from mod_wsgi which I know works properly, then building
>>  > code for other platforms may also be affected. Thus, if you have
>>  > access to other platforms besides MacOS X, then test it there as well.
>>  >
>>  > So rather than complaining, here is your chance to help out and
>>  > improve the situation. :-)
>>  >
>>  > BTW, Apple has documented the issues with building Python C extension
>>  > modules for additional architectures. It can be found at:
>>  >
>>  >   http://developer.apple.com/releasenotes/OpenSource/PerlExtensionsRelNotes/index.html
>>  >
>>  > This is referenced along with other stuff about the sorts of problems
>>  > that crop up on MacOS X at:
>>  >
>>  >   http://code.google.com/p/modwsgi/wiki/InstallationOnMacOSX
>>  >
>>  > Graham
>>
>>     
>>> _______________________________________________
>>>       
>>  > Mod_python mailing list
>>  > Mod_python@modpython.org
>>  > http://mailman.modpython.org/mailman/listinfo/mod_python
>>  >
>>
>>
>>     

From roberto at connexer.com  Mon Mar 10 21:34:18 2008
From: roberto at connexer.com (Roberto =?iso-8859-1?Q?C=2E_S=E1nchez?=)
Date: Mon Mar 10 21:34:23 2008
Subject: [mod_python] Using mod_python with MacOSX Tiger/Leopard.
In-Reply-To: <88e286470803101816y86ee50cqcc16218d212e00d@mail.gmail.com>
References: <88e286470803101743n157120f3hd5ebcdf6fa65a88e@mail.gmail.com>
	<20080311010242.GD28970@connexer.com>
	<88e286470803101816y86ee50cqcc16218d212e00d@mail.gmail.com>
Message-ID: <20080311013418.GG28970@connexer.com>

On Tue, Mar 11, 2008 at 12:16:01PM +1100, Graham Dumpleton wrote:
> I am confused. See comments below.
> 
> On 11/03/2008, Roberto C. S?nchez <roberto@connexer.com> wrote:
> >
> >  I configure mod_python like this:
> >
> >  ./configure --prefix=/usr/local/apache2/server --with-apxs2=/usr/local/apache2/server/bin/apxs
> 
> There is no option --with-apxs2 to the mod_python configure script.
> Nor is there a --prefix option that does anything from memory.
> 
Well, I think I used the Debian source package, which builds mod_python
like this:

        ./configure --with-apxs=/usr/bin/apxs2 --prefix=/usr \
                --mandir=\$${prefix}/share/man --infodir=\$${prefix}/share/info \
                --with-python-version=$(PYVER)

Regards,

-Roberto

-- 
Roberto C. S?nchez
http://people.connexer.com/~roberto
http://www.connexer.com
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
Url : http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080310/34fa6325/attachment.bin
From graham.dumpleton at gmail.com  Mon Mar 10 21:42:58 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Mon Mar 10 21:43:05 2008
Subject: [mod_python] Using mod_python with MacOSX Tiger/Leopard.
In-Reply-To: <20080311013418.GG28970@connexer.com>
References: <88e286470803101743n157120f3hd5ebcdf6fa65a88e@mail.gmail.com>
	<20080311010242.GD28970@connexer.com>
	<88e286470803101816y86ee50cqcc16218d212e00d@mail.gmail.com>
	<20080311013418.GG28970@connexer.com>
Message-ID: <88e286470803101842x11306fd2jd74ac9696a1d2401@mail.gmail.com>

On 11/03/2008, Roberto C. S?nchez <roberto@connexer.com> wrote:
> On Tue, Mar 11, 2008 at 12:16:01PM +1100, Graham Dumpleton wrote:
>
> > I am confused. See comments below.
>  >
>  > On 11/03/2008, Roberto C. S?nchez <roberto@connexer.com> wrote:
>  > >
>
> > >  I configure mod_python like this:
>  > >
>  > >  ./configure --prefix=/usr/local/apache2/server --with-apxs2=/usr/local/apache2/server/bin/apxs
>  >
>  > There is no option --with-apxs2 to the mod_python configure script.
>  > Nor is there a --prefix option that does anything from memory.
>  >
>
> Well, I think I used the Debian source package, which builds mod_python
>  like this:
>
>         ./configure --with-apxs=/usr/bin/apxs2 --prefix=/usr \
>                 --mandir=\$${prefix}/share/man --infodir=\$${prefix}/share/info \
>                 --with-python-version=$(PYVER)

No such option --with-python-version to mod_python configure either. :-)

The only option above that does anything in mod_python is --with-apxs.

To specify Python to use the option is --with-python and should be
path to 'python' executable for version of Python to be used.

Graham

>  Regards,
>
>  -Roberto
>
>  --
>  Roberto C. S?nchez
>  http://people.connexer.com/~roberto
>  http://www.connexer.com
>
> -----BEGIN PGP SIGNATURE-----
>  Version: GnuPG v1.4.6 (GNU/Linux)
>
>  iD8DBQFH1eGa5SXWIKfIlGQRAhtvAJ9LHdBAzFCdi/NQonbl3fDRitYlCwCfaeB8
>  27rpKIY+Xf/6OoNTh245lO0=
>  =128f
>  -----END PGP SIGNATURE-----
>
> _______________________________________________
>  Mod_python mailing list
>  Mod_python@modpython.org
>  http://mailman.modpython.org/mailman/listinfo/mod_python
>
>

From list at joreybump.com  Mon Mar 10 22:55:09 2008
From: list at joreybump.com (Jorey Bump)
Date: Mon Mar 10 22:55:16 2008
Subject: [mod_python] Using mod_python with MacOSX Tiger/Leopard.
In-Reply-To: <88e286470803101743n157120f3hd5ebcdf6fa65a88e@mail.gmail.com>
References: <88e286470803101743n157120f3hd5ebcdf6fa65a88e@mail.gmail.com>
Message-ID: <47D5F48D.3000008@joreybump.com>

I have a MacBook Pro I use only for compatibility testing and light 
wireless use around the house. Here are the current specs:

   OS: OS X Version 10.5.2 (Leopard)
   Processor: 2.4 GHz Intel Core Duo
   Memory: 4GB

I don't do any development on it, but I do have Xcode installed. I also 
installed MacPorts, but did not use it for this test. I was able to 
build mod_python successfully and run all the tests without any problem. 
Here are the commands I used:

   $ which httpd
   /usr/sbin/httpd
   $ httpd -v
   Server version: Apache/2.2.6 (Unix)
   Server built:   Sep 23 2007 18:07:19
   $ which apxs
   /usr/sbin/apxs
   $ which python
   /usr/bin/python
   $ python -V
   Python 2.5.1
   $ which gcc
   /usr/bin/gcc
   $ gcc --version
   i686-apple-darwin9-gcc-4.0.1 (GCC) 4.0.1 (Apple Inc. build 5465)

Okay, all stock binaries in my path (although gcc may have come with 
Xcode, I don't remember).

   $ mkdir -p ~/src/mod_python
   $ cd ~/src/mod_python
   $ svn co 
http://svn.apache.org/repos/asf/quetzalcoatl/mod_python/trunk 
mod_python-trunk
   [...source checked out...]
   $ cd mod_python-trunk
   $ ./configure --with-apxs=/usr/sbin/apxs
   [...configures without error...]
   $ make
   [...compiles & builds source with a few harmless errors...]
   $ sudo make install
   [...installs mod_python.so to /usr/libexec/apache2/...]
   [...installs mod_python to /Library/Python/2.5/site-packages/...]
   $ cd test/
   $ python test.py
   [...runs all tests successfully...]

It seems to build fine on the latest version of Leopard. Someone will 
have to confirm if Xcode is needed to get Apple's gcc. Other than that, 
I used the stock system binaries (after running the latest Software Update).


Graham Dumpleton wrote, at 03/10/2008 08:44 PM:
> For those users of MacOS X out there who have been having problems, or
> moaning about  the state of Python/Apache/mod_python on MacOS X, I set
> you a challenge. Since you seem to be unwilling to come up with
> patches to fix the problems, or just aren't in a position to work out
> what the packages required might be, then please at least do the
> following.
> 
> 1. Using a subversion client, checkout latest mod_python source code from trunk:
> 
>   svn co http://svn.apache.org/repos/asf/quetzalcoatl/mod_python/trunk
> mod_python-trunk
> 
> 2. Build the source code on your MacOS X system, whether that be Tiger
> or Leopard and whether you be using the standard OS installation of
> Python or an alternate version such as from MacPorts. Ensure you use
> --with-python to point at the version of Python you want to use. Use
> --with-apxs as necessary.
> 
> 3. Install it and see if it works without you having to have made any
> changes to the source code. If you have multiple versions of Python
> installed on your system, try it with all of them to make sure all
> work. Just ensure you do a full 'stop' of Apache between testing each
> version. If you don't have code which will work with that version of
> Python, just use the mod_python testhandler.
> 
> <Location /testhandler>
> SetHandler mod_python
> PythonHandler mod_python.testhandler
> </Location>
> 
> 4. Respond with your results about what works and what doesn't.
> 
> Hopefully the source in subversion trunk will now build on both Tiger
> and Leopard out of the box and deal with Python installations being in
> different locations. It also shouldn't pick up the wrong framework
> where multiple framework versions of Python are installed. On Leopard,
> it should also ensure that the mod_python.so file and the psp C
> extension module are built with the same architectures that your
> Apache binary is built with.
> 
> Do note, I haven't myself been able to set this on Tiger yet, but
> believe it should work. Also, because this affects the main build
> process and because I replaced whole sections of configure script code
> with stuff from mod_wsgi which I know works properly, then building
> code for other platforms may also be affected. Thus, if you have
> access to other platforms besides MacOS X, then test it there as well.
> 
> So rather than complaining, here is your chance to help out and
> improve the situation. :-)
> 
> BTW, Apple has documented the issues with building Python C extension
> modules for additional architectures. It can be found at:
> 
>   http://developer.apple.com/releasenotes/OpenSource/PerlExtensionsRelNotes/index.html
> 
> This is referenced along with other stuff about the sorts of problems
> that crop up on MacOS X at:
> 
>   http://code.google.com/p/modwsgi/wiki/InstallationOnMacOSX
> 
> Graham
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python

From jrraines at comcast.net  Tue Mar 11 07:57:06 2008
From: jrraines at comcast.net (John Raines)
Date: Tue Mar 11 07:57:09 2008
Subject: [mod_python] Using mod_python with MacOSX Tiger/Leopard.
In-Reply-To: <47D5F48D.3000008@joreybump.com>
References: <88e286470803101743n157120f3hd5ebcdf6fa65a88e@mail.gmail.com>
	<47D5F48D.3000008@joreybump.com>
Message-ID: <84387B36-E7BC-4E94-9519-15EC558AA591@comcast.net>

yes, XCode is needed to get gcc
On Mar 10, 2008, at 9:55 PM, Jorey Bump wrote:

> I have a MacBook Pro I use only for compatibility testing and light  
> wireless use around the house. Here are the current specs:
>
>  OS: OS X Version 10.5.2 (Leopard)
>  Processor: 2.4 GHz Intel Core Duo
>  Memory: 4GB
>
> I don't do any development on it, but I do have Xcode installed. I  
> also installed MacPorts, but did not use it for this test. I was  
> able to build mod_python successfully and run all the tests without  
> any problem. Here are the commands I used:
>
>  $ which httpd
>  /usr/sbin/httpd
>  $ httpd -v
>  Server version: Apache/2.2.6 (Unix)
>  Server built:   Sep 23 2007 18:07:19
>  $ which apxs
>  /usr/sbin/apxs
>  $ which python
>  /usr/bin/python
>  $ python -V
>  Python 2.5.1
>  $ which gcc
>  /usr/bin/gcc
>  $ gcc --version
>  i686-apple-darwin9-gcc-4.0.1 (GCC) 4.0.1 (Apple Inc. build 5465)
>
> Okay, all stock binaries in my path (although gcc may have come with  
> Xcode, I don't remember).
>
>  $ mkdir -p ~/src/mod_python
>  $ cd ~/src/mod_python
>  $ svn co http://svn.apache.org/repos/asf/quetzalcoatl/mod_python/trunk 
>  mod_python-trunk
>  [...source checked out...]
>  $ cd mod_python-trunk
>  $ ./configure --with-apxs=/usr/sbin/apxs
>  [...configures without error...]
>  $ make
>  [...compiles & builds source with a few harmless errors...]
>  $ sudo make install
>  [...installs mod_python.so to /usr/libexec/apache2/...]
>  [...installs mod_python to /Library/Python/2.5/site-packages/...]
>  $ cd test/
>  $ python test.py
>  [...runs all tests successfully...]
>
> It seems to build fine on the latest version of Leopard. Someone  
> will have to confirm if Xcode is needed to get Apple's gcc. Other  
> than that, I used the stock system binaries (after running the  
> latest Software Update).
>
>
> Graham Dumpleton wrote, at 03/10/2008 08:44 PM:
>> For those users of MacOS X out there who have been having problems,  
>> or
>> moaning about  the state of Python/Apache/mod_python on MacOS X, I  
>> set
>> you a challenge. Since you seem to be unwilling to come up with
>> patches to fix the problems, or just aren't in a position to work out
>> what the packages required might be, then please at least do the
>> following.
>> 1. Using a subversion client, checkout latest mod_python source  
>> code from trunk:
>>  svn co http://svn.apache.org/repos/asf/quetzalcoatl/mod_python/trunk
>> mod_python-trunk
>> 2. Build the source code on your MacOS X system, whether that be  
>> Tiger
>> or Leopard and whether you be using the standard OS installation of
>> Python or an alternate version such as from MacPorts. Ensure you use
>> --with-python to point at the version of Python you want to use. Use
>> --with-apxs as necessary.
>> 3. Install it and see if it works without you having to have made any
>> changes to the source code. If you have multiple versions of Python
>> installed on your system, try it with all of them to make sure all
>> work. Just ensure you do a full 'stop' of Apache between testing each
>> version. If you don't have code which will work with that version of
>> Python, just use the mod_python testhandler.
>> <Location /testhandler>
>> SetHandler mod_python
>> PythonHandler mod_python.testhandler
>> </Location>
>> 4. Respond with your results about what works and what doesn't.
>> Hopefully the source in subversion trunk will now build on both Tiger
>> and Leopard out of the box and deal with Python installations being  
>> in
>> different locations. It also shouldn't pick up the wrong framework
>> where multiple framework versions of Python are installed. On  
>> Leopard,
>> it should also ensure that the mod_python.so file and the psp C
>> extension module are built with the same architectures that your
>> Apache binary is built with.
>> Do note, I haven't myself been able to set this on Tiger yet, but
>> believe it should work. Also, because this affects the main build
>> process and because I replaced whole sections of configure script  
>> code
>> with stuff from mod_wsgi which I know works properly, then building
>> code for other platforms may also be affected. Thus, if you have
>> access to other platforms besides MacOS X, then test it there as  
>> well.
>> So rather than complaining, here is your chance to help out and
>> improve the situation. :-)
>> BTW, Apple has documented the issues with building Python C extension
>> modules for additional architectures. It can be found at:
>>  http://developer.apple.com/releasenotes/OpenSource/PerlExtensionsRelNotes/index.html
>> This is referenced along with other stuff about the sorts of problems
>> that crop up on MacOS X at:
>>  http://code.google.com/p/modwsgi/wiki/InstallationOnMacOSX
>> Graham
>> _______________________________________________
>> Mod_python mailing list
>> Mod_python@modpython.org
>> http://mailman.modpython.org/mailman/listinfo/mod_python
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python

From whatever at fsrz.net  Tue Mar 11 10:46:09 2008
From: whatever at fsrz.net (Rich Fought)
Date: Tue Mar 11 10:46:13 2008
Subject: [mod_python] Chart with mod_python
In-Reply-To: <4818f68b0802261921u6f10cf2dh8b993252517c04df@mail.gmail.com>
References: <4818f68b0802261921u6f10cf2dh8b993252517c04df@mail.gmail.com>
Message-ID: <47D69B31.8020709@fsrz.net>

Syahreza Octadian wrote:
> Dear all,
>
> i am beginner with mod_python, now i'm trying to create web 
> application that will show chart of data from mysql database. I'm 
> confuse what kind of class that i can use to make a chart, is somebody 
> have try this please help me....

Take a look at matplotlib as well

http://matplotlib.sourceforge.net/

Regards,
Rich
From omarshariffdontlikeit at gmail.com  Tue Mar 11 15:11:39 2008
From: omarshariffdontlikeit at gmail.com (Ben Davies)
Date: Tue Mar 11 15:11:46 2008
Subject: [mod_python] Using mod_python with MacOSX Tiger/Leopard.
In-Reply-To: <84387B36-E7BC-4E94-9519-15EC558AA591@comcast.net>
References: <88e286470803101743n157120f3hd5ebcdf6fa65a88e@mail.gmail.com>
	<47D5F48D.3000008@joreybump.com>
	<84387B36-E7BC-4E94-9519-15EC558AA591@comcast.net>
Message-ID: <a4754c780803111211h64f8bf0dpdd45b1b8e3483f13@mail.gmail.com>

Wow!

This worked first time, even on my severely buggered version of Tiger! Just
to let you know what I got after running testhandler:

Apache/2.2.8 (Unix) mod_python/3.3.2-dev-20080311 Python/2.5.2
2.5.2 (r252:60911, Feb 22 2008, 07:57:53) [GCC 4.0.1 (Apple Computer, Inc.
build 5363)]

./configure --with-apxs=/usr/local/apache2/bin/apxs
--with-python=/usr/local/bin/python

Thank so much for fixing this so quickly for us whinny mac brats!

Damn, looks like tonight will be spent learning Python! Sweet!

Cheers,

Ben


On Tue, Mar 11, 2008 at 11:57 AM, John Raines <jrraines@comcast.net> wrote:

> yes, XCode is needed to get gcc
> On Mar 10, 2008, at 9:55 PM, Jorey Bump wrote:
>
> > I have a MacBook Pro I use only for compatibility testing and light
> > wireless use around the house. Here are the current specs:
> >
> >  OS: OS X Version 10.5.2 (Leopard)
> >  Processor: 2.4 GHz Intel Core Duo
> >  Memory: 4GB
> >
> > I don't do any development on it, but I do have Xcode installed. I
> > also installed MacPorts, but did not use it for this test. I was
> > able to build mod_python successfully and run all the tests without
> > any problem. Here are the commands I used:
> >
> >  $ which httpd
> >  /usr/sbin/httpd
> >  $ httpd -v
> >  Server version: Apache/2.2.6 (Unix)
> >  Server built:   Sep 23 2007 18:07:19
> >  $ which apxs
> >  /usr/sbin/apxs
> >  $ which python
> >  /usr/bin/python
> >  $ python -V
> >  Python 2.5.1
> >  $ which gcc
> >  /usr/bin/gcc
> >  $ gcc --version
> >  i686-apple-darwin9-gcc-4.0.1 (GCC) 4.0.1 (Apple Inc. build 5465)
> >
> > Okay, all stock binaries in my path (although gcc may have come with
> > Xcode, I don't remember).
> >
> >  $ mkdir -p ~/src/mod_python
> >  $ cd ~/src/mod_python
> >  $ svn co http://svn.apache.org/repos/asf/quetzalcoatl/mod_python/trunk
> >  mod_python-trunk
> >  [...source checked out...]
> >  $ cd mod_python-trunk
> >  $ ./configure --with-apxs=/usr/sbin/apxs
> >  [...configures without error...]
> >  $ make
> >  [...compiles & builds source with a few harmless errors...]
> >  $ sudo make install
> >  [...installs mod_python.so to /usr/libexec/apache2/...]
> >  [...installs mod_python to /Library/Python/2.5/site-packages/...]
> >  $ cd test/
> >  $ python test.py
> >  [...runs all tests successfully...]
> >
> > It seems to build fine on the latest version of Leopard. Someone
> > will have to confirm if Xcode is needed to get Apple's gcc. Other
> > than that, I used the stock system binaries (after running the
> > latest Software Update).
> >
> >
> > Graham Dumpleton wrote, at 03/10/2008 08:44 PM:
> >> For those users of MacOS X out there who have been having problems,
> >> or
> >> moaning about  the state of Python/Apache/mod_python on MacOS X, I
> >> set
> >> you a challenge. Since you seem to be unwilling to come up with
> >> patches to fix the problems, or just aren't in a position to work out
> >> what the packages required might be, then please at least do the
> >> following.
> >> 1. Using a subversion client, checkout latest mod_python source
> >> code from trunk:
> >>  svn co http://svn.apache.org/repos/asf/quetzalcoatl/mod_python/trunk
> >> mod_python-trunk
> >> 2. Build the source code on your MacOS X system, whether that be
> >> Tiger
> >> or Leopard and whether you be using the standard OS installation of
> >> Python or an alternate version such as from MacPorts. Ensure you use
> >> --with-python to point at the version of Python you want to use. Use
> >> --with-apxs as necessary.
> >> 3. Install it and see if it works without you having to have made any
> >> changes to the source code. If you have multiple versions of Python
> >> installed on your system, try it with all of them to make sure all
> >> work. Just ensure you do a full 'stop' of Apache between testing each
> >> version. If you don't have code which will work with that version of
> >> Python, just use the mod_python testhandler.
> >> <Location /testhandler>
> >> SetHandler mod_python
> >> PythonHandler mod_python.testhandler
> >> </Location>
> >> 4. Respond with your results about what works and what doesn't.
> >> Hopefully the source in subversion trunk will now build on both Tiger
> >> and Leopard out of the box and deal with Python installations being
> >> in
> >> different locations. It also shouldn't pick up the wrong framework
> >> where multiple framework versions of Python are installed. On
> >> Leopard,
> >> it should also ensure that the mod_python.so file and the psp C
> >> extension module are built with the same architectures that your
> >> Apache binary is built with.
> >> Do note, I haven't myself been able to set this on Tiger yet, but
> >> believe it should work. Also, because this affects the main build
> >> process and because I replaced whole sections of configure script
> >> code
> >> with stuff from mod_wsgi which I know works properly, then building
> >> code for other platforms may also be affected. Thus, if you have
> >> access to other platforms besides MacOS X, then test it there as
> >> well.
> >> So rather than complaining, here is your chance to help out and
> >> improve the situation. :-)
> >> BTW, Apple has documented the issues with building Python C extension
> >> modules for additional architectures. It can be found at:
> >>
> http://developer.apple.com/releasenotes/OpenSource/PerlExtensionsRelNotes/index.html
> >> This is referenced along with other stuff about the sorts of problems
> >> that crop up on MacOS X at:
> >>  http://code.google.com/p/modwsgi/wiki/InstallationOnMacOSX
> >> Graham
> >> _______________________________________________
> >> Mod_python mailing list
> >> Mod_python@modpython.org
> >> http://mailman.modpython.org/mailman/listinfo/mod_python
> >
> > _______________________________________________
> > Mod_python mailing list
> > Mod_python@modpython.org
> > http://mailman.modpython.org/mailman/listinfo/mod_python
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080311/510bcfe0/attachment.html
From omarshariffdontlikeit at gmail.com  Tue Mar 11 15:25:30 2008
From: omarshariffdontlikeit at gmail.com (Ben Davies)
Date: Tue Mar 11 15:25:36 2008
Subject: [mod_python] Apaches and Pythons and Tigers, oh my!
In-Reply-To: <88e286470803101650p51c36e52gb8d14b425a6754b7@mail.gmail.com>
References: <76851.42765.qm@web35603.mail.mud.yahoo.com>
	<47D56B11.7060705@brunson.com>
	<a4754c780803101404m75e68c5dm66cc6dc8e72580e5@mail.gmail.com>
	<20080310231428.GA28970@connexer.com>
	<a4754c780803101643o170dc9a4w85b60ee71cb7705e@mail.gmail.com>
	<88e286470803101650p51c36e52gb8d14b425a6754b7@mail.gmail.com>
Message-ID: <a4754c780803111225j231db078tea0ef1728d281483@mail.gmail.com>

For those who need a solution to this problem, please see the message "Using
mod_python with MacOSX Tiger/Leopard" as it contains instruction on how to
checkout and compile a version of mod_python that appears to fix the
installation problems described here.

Cheers

On Mon, Mar 10, 2008 at 11:50 PM, Graham Dumpleton <
graham.dumpleton@gmail.com> wrote:

> Haven't you forgotten that you managed to delete parts of your Python
> 2.3 installation. :-)
>
> The whole point of what I said previously in telling you to restore
> your Python 2.3 back to working order was so you could use it.
>
> Graham
>
> On 11/03/2008, Ben Davies <omarshariffdontlikeit@gmail.com> wrote:
> > "Is it absolutely, positively necessary to use Python 2.5?  Is Python
> 2.3
> >  as shipped with OS X really not sufficient?"
> >
> > *slaps forehead*
> > I hadn't actually thought of that, I'd just assumed that mod_python
> 3.3.1
> > required python 2.5.
> >
> > I'll give it a shot, and report back tomorrow :)
> >
> > Cheers!
> >
> > Ben
> >
> >
> > 2008/3/10 Roberto C. S?nchez <roberto@connexer.com>:
> > >
> > >
> > > On Mon, Mar 10, 2008 at 09:04:35PM +0000, Ben Davies wrote:
> > > >
> > > > Any OSX/Unix jedi's out there that shed some light on this, or any
> > > > suggestions on locations I should be looking for this reference?
> > > >
> > >
> > > Is it absolutely, positively necessary to use Python 2.5?  Is Python
> 2.3
> > > as shipped with OS X really not sufficient?
> > >
> > >
> > >
> > >
> > > Regards,
> > >
> > > -Roberto
> > > --
> > > Roberto C. S?nchez
> > > http://people.connexer.com/~roberto<http://people.connexer.com/%7Eroberto>
> > > http://www.connexer.com
> > >
> > > -----BEGIN PGP SIGNATURE-----
> > > Version: GnuPG v1.4.6 (GNU/Linux)
> > >
> > >
> > iD8DBQFH1cDU5SXWIKfIlGQRAsX9AKCAg2DuMrrIF+HiRuHC1n36opsFtgCgt6nC
> > > 1toCsIeh4trwEKh4WsUu6h8=
> > > =apY1
> > > -----END PGP SIGNATURE-----
> > >
> > > _______________________________________________
> > > Mod_python mailing list
> > > Mod_python@modpython.org
> > > http://mailman.modpython.org/mailman/listinfo/mod_python
> > >
> > >
> >
> >
> > _______________________________________________
> >  Mod_python mailing list
> >  Mod_python@modpython.org
> >  http://mailman.modpython.org/mailman/listinfo/mod_python
> >
> >
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080311/9f13b86f/attachment.html
From syahreza.octadian at gmail.com  Tue Mar 11 21:49:54 2008
From: syahreza.octadian at gmail.com (syahreza octadian)
Date: Tue Mar 11 21:50:08 2008
Subject: [mod_python] Chart with mod_python
In-Reply-To: <47D69B31.8020709@fsrz.net>
References: <4818f68b0802261921u6f10cf2dh8b993252517c04df@mail.gmail.com>
	<47D69B31.8020709@fsrz.net>
Message-ID: <47D736C2.4090901@gmail.com>

Thank for all suggestion.

Rich Fought wrote:
> Syahreza Octadian wrote:
>> Dear all,
>>
>> i am beginner with mod_python, now i'm trying to create web 
>> application that will show chart of data from mysql database. I'm 
>> confuse what kind of class that i can use to make a chart, is 
>> somebody have try this please help me....
>
> Take a look at matplotlib as well
>
> http://matplotlib.sourceforge.net/
>
> Regards,
> Rich
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>

From syahreza.octadian at gmail.com  Tue Mar 11 21:58:47 2008
From: syahreza.octadian at gmail.com (syahreza octadian)
Date: Tue Mar 11 21:58:58 2008
Subject: [mod_python] complete examples mod_python application
In-Reply-To: <a4754c780803111225j231db078tea0ef1728d281483@mail.gmail.com>
References: <76851.42765.qm@web35603.mail.mud.yahoo.com>	<47D56B11.7060705@brunson.com>	<a4754c780803101404m75e68c5dm66cc6dc8e72580e5@mail.gmail.com>	<20080310231428.GA28970@connexer.com>	<a4754c780803101643o170dc9a4w85b60ee71cb7705e@mail.gmail.com>	<88e286470803101650p51c36e52gb8d14b425a6754b7@mail.gmail.com>
	<a4754c780803111225j231db078tea0ef1728d281483@mail.gmail.com>
Message-ID: <47D738D7.9080204@gmail.com>

Dear all,

is there some one can tell me link where i can get complete examples 
mod_python application. i want to know more about using mod_python.


Thank for any suggestion.

From david.bear at asu.edu  Tue Mar 11 22:14:20 2008
From: david.bear at asu.edu (David Bear)
Date: Tue Mar 11 22:09:18 2008
Subject: [mod_python] Chart with mod_python
In-Reply-To: <47D69B31.8020709@fsrz.net>
References: <4818f68b0802261921u6f10cf2dh8b993252517c04df@mail.gmail.com>
	<47D69B31.8020709@fsrz.net>
Message-ID: <200803111914.20628.david.bear@asu.edu>

On Tuesday 11 March 2008 07:46, Rich Fought wrote:
> Syahreza Octadian wrote:
> > Dear all,
> >
> > i am beginner with mod_python, now i'm trying to create web
> > application that will show chart of data from mysql database. I'm
> > confuse what kind of class that i can use to make a chart, is somebody
> > have try this please help me....
>
> Take a look at matplotlib as well
>

you might also consider PIL ..(python imaging library)

> http://matplotlib.sourceforge.net/
>
> Regards,
> Rich
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python

-- 

David Bear
College of Public Programs/ASU
411 N Central, Phoenix, AZ 85004
From admin at itech7.com  Wed Mar 12 00:52:09 2008
From: admin at itech7.com (Nilesh Govindrajan)
Date: Wed Mar 12 00:52:27 2008
Subject: [mod_python] Writing an Handler for this purpose ??
Message-ID: <20080312102209.7ea68f54@itech7.com>

I am soon going to start developing my site in Python and KID after my
 exams are over. I need some help in writing a handler. I am describing
 my question here. Please help me!


Suppose there is a KID template called home.html


Now when a visitor requests home.html ; mod_python's handler should
 load the file using the handler without changing the URL.


The same handler should be able to load any such requested page like
 index2.html


Any idea about this ?
PS: I need a complete custom system; so I will build it on my own.
 If I had to use some prebuilt CMS then why the hell I would learn
 Programming ?

-- 
Nilesh G
India Technologies Administrator
www.itech7.com
From list at joreybump.com  Wed Mar 12 09:39:51 2008
From: list at joreybump.com (Jorey Bump)
Date: Wed Mar 12 09:39:57 2008
Subject: [mod_python] Writing an Handler for this purpose ??
In-Reply-To: <20080312102209.7ea68f54@itech7.com>
References: <20080312102209.7ea68f54@itech7.com>
Message-ID: <47D7DD27.9070108@joreybump.com>

Nilesh Govindrajan wrote, at 03/12/2008 12:52 AM:
> I am soon going to start developing my site in Python and KID after my
>  exams are over. I need some help in writing a handler. I am describing
>  my question here. Please help me!
> 
> Suppose there is a KID template called home.html
> 
> Now when a visitor requests home.html ; mod_python's handler should
>  load the file using the handler without changing the URL.
> 
> The same handler should be able to load any such requested page like
>  index2.html
> 
> Any idea about this ?
> PS: I need a complete custom system; so I will build it on my own.
>  If I had to use some prebuilt CMS then why the hell I would learn
>  Programming ?

I don't use KID, and I doubt that many other people on this list do, 
either. However, it looks like it is simple to import and use like any 
other python module, so you should easily be able to use it with an 
existing handler like Publisher (just return the serialized string if 
it's an HTML page), or incorporate it into a custom handler (set 
req.content_type = "text/html" and req.write(serialized string)).

So, your best bet is to get familiar with mod_python, then plan how you 
want to deliver pages. You need to understand the difference between 
AddHandler and SetHandler, as it will affect how you construct your 
URLs, serve files with different extensions, etc.

Once you figure out how to serve pages with mod_python, add code to 
import your templates and return the serialized string. You won't be 
pointing visitors directly to KID templates (and you'll be able to store 
the templates outside of your DocumentRoot, if you wish).

It also looks like KID can be used in a WSGI application, so you may 
want to try mod_wsgi, as well, and use the approach you find easiest to 
understand.

From admin at itech7.com  Wed Mar 12 10:48:57 2008
From: admin at itech7.com (Nilesh Govindrajan)
Date: Wed Mar 12 10:49:08 2008
Subject: [mod_python] Writing an Handler for this purpose ??
In-Reply-To: <47D7DD27.9070108@joreybump.com>
References: <20080312102209.7ea68f54@itech7.com>
	<47D7DD27.9070108@joreybump.com>
Message-ID: <9f3f9dbc0803120748w599e3995p3cba7a8492631be9@mail.gmail.com>

Aah! Atleast you replied. Thanks a million for replying.

Now, you mean to say something like this -

Set handler mod_python for template files

--->

Write a Handler to parse the template in a variable.

--->

Print the variable using req.write()

...

Am I right ?

On Wed, Mar 12, 2008 at 7:09 PM, Jorey Bump <list@joreybump.com> wrote:
> Nilesh Govindrajan wrote, at 03/12/2008 12:52 AM:
>
>
> > I am soon going to start developing my site in Python and KID after my
>  >  exams are over. I need some help in writing a handler. I am describing
>  >  my question here. Please help me!
>  >
>  > Suppose there is a KID template called home.html
>  >
>  > Now when a visitor requests home.html ; mod_python's handler should
>  >  load the file using the handler without changing the URL.
>  >
>  > The same handler should be able to load any such requested page like
>  >  index2.html
>  >
>  > Any idea about this ?
>  > PS: I need a complete custom system; so I will build it on my own.
>  >  If I had to use some prebuilt CMS then why the hell I would learn
>  >  Programming ?
>
>  I don't use KID, and I doubt that many other people on this list do,
>  either. However, it looks like it is simple to import and use like any
>  other python module, so you should easily be able to use it with an
>  existing handler like Publisher (just return the serialized string if
>  it's an HTML page), or incorporate it into a custom handler (set
>  req.content_type = "text/html" and req.write(serialized string)).
>
>  So, your best bet is to get familiar with mod_python, then plan how you
>  want to deliver pages. You need to understand the difference between
>  AddHandler and SetHandler, as it will affect how you construct your
>  URLs, serve files with different extensions, etc.
>
>  Once you figure out how to serve pages with mod_python, add code to
>  import your templates and return the serialized string. You won't be
>  pointing visitors directly to KID templates (and you'll be able to store
>  the templates outside of your DocumentRoot, if you wish).
>
>  It also looks like KID can be used in a WSGI application, so you may
>  want to try mod_wsgi, as well, and use the approach you find easiest to
>  understand.
>
>



-- 
Nilesh G
India Technologies Administrator
www.itech7.com
From joe at incomps.com  Wed Mar 12 10:55:28 2008
From: joe at incomps.com (Joseph Bernhardt)
Date: Wed Mar 12 10:55:41 2008
Subject: [mod_python] [Pywebsvcs-talk] Spontaneous 404
In-Reply-To: <015a01c88398$2338ece0$69aac6a0$@com>
References: <015a01c88398$2338ece0$69aac6a0$@com>
Message-ID: <01bc01c88451$1ce73130$56b59390$@com>

We're running a LAMP server (RHEL) with Python v2.5 and mod_python v3.1.3 to
control some smaller, web-based transactions for our company (publisher
handler; if that makes any difference).  Larger transactions are run in
combination between client applications contacting either Python apps or the
MySQL database directly on the server.  Unfortunately, these large
transactions are processing giants that cause problems with such an
underrated server.   We realize this is the blunt of our problem and are
working on upgrades which may help in the future.  

 

My question deals with suggestions on what to do in the mean time.   I'm not
sure if this would be an Apache or mod_python problem, but am assuming  the
latter.   During processing of a large server application (either MySQL or
Python oriented), requests made to our mod_python enabled websites are
spontaneously returned as 404 errors.  Has anyone else experienced such odd
behavior?  And, if so, how was it dealt with?  One would assume that a 404
error would indicate either a problem with the mod_python application
itself, or in that the file does not exist on the server.  But, this
behavior (working correctly more than half the time) suggests something
else.

 

Thank you in advance for any help that may be supplied.

 

Joseph Bernhardt

Nobody Important

Incomprehensibilities, Inc.

406.587.9564 - Office

413.431.8201 - Fax

joe@incomps.com

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080312/2ffe01f0/attachment.html
From list at joreybump.com  Wed Mar 12 11:33:20 2008
From: list at joreybump.com (Jorey Bump)
Date: Wed Mar 12 11:33:27 2008
Subject: [mod_python] Writing an Handler for this purpose ??
In-Reply-To: <9f3f9dbc0803120748w599e3995p3cba7a8492631be9@mail.gmail.com>
References: <20080312102209.7ea68f54@itech7.com>	
	<47D7DD27.9070108@joreybump.com>
	<9f3f9dbc0803120748w599e3995p3cba7a8492631be9@mail.gmail.com>
Message-ID: <47D7F7C0.1070904@joreybump.com>

Nilesh Govindrajan wrote, at 03/12/2008 10:48 AM:
> Aah! Atleast you replied. Thanks a million for replying.
> 
> Now, you mean to say something like this -
> 
> Set handler mod_python for template files
> 
> --->
> 
> Write a Handler to parse the template in a variable.
> 
> --->
> 
> Print the variable using req.write()
> 
> ...
> 
> Am I right ?

Not exactly. Consider the template files a resource that you use in your 
code via KID. You won't need a handler that manipulates templates 
directly requested in a URL (theoretically, you may be able to create a 
PSP-like handler based on KID, but that seems to go against the purpose 
and philosophy of KID, as it would require your templates to contain a 
lot of programming logic to the point they wouldn't really be templates 
anymore).

So, imagine you're using mod_python's Publisher. Your page is hello.py, 
available via the URL:

  http://example.com/hello

The contents of hello.py might be:

import kid
def index(req):
     template = Template(file='test.kid', foo='Hello', baz='World')
     return template.serialize()

Or, if you write your own handler, it might look like this:

from mod_python import apache
import kid
def handler(req):
     template = Template(file='test.kid', foo='Hello', baz='World')
     req.content_type = "text/html"
     req.write(template.serialize())
     return apache.OK

This is an untested oversimplification that assumes you have KID 
importing correctly and that mod_python is properly configured.

From list at joreybump.com  Wed Mar 12 11:39:58 2008
From: list at joreybump.com (Jorey Bump)
Date: Wed Mar 12 11:40:04 2008
Subject: [mod_python] [Pywebsvcs-talk] Spontaneous 404
In-Reply-To: <01bc01c88451$1ce73130$56b59390$@com>
References: <015a01c88398$2338ece0$69aac6a0$@com>
	<01bc01c88451$1ce73130$56b59390$@com>
Message-ID: <47D7F94E.6020509@joreybump.com>

Joseph Bernhardt wrote, at 03/12/2008 10:55 AM:
> We?re running a LAMP server (RHEL) with Python v2.5 and mod_python 
> v3.1.3 to control some smaller, web-based transactions for our company 
> (publisher handler; if that makes any difference).  Larger transactions 
> are run in combination between client applications contacting either 
> Python apps or the MySQL database directly on the server.  
> Unfortunately, these large transactions are processing giants that cause 
> problems with such an underrated server.   We realize this is the blunt 
> of our problem and are working on upgrades which may help in the future. 
> 
> My question deals with suggestions on what to do in the mean time.   I?m 
> not sure if this would be an Apache or mod_python problem, but am 
> assuming  the latter.   During processing of a large server application 
> (either MySQL or Python oriented), requests made to our mod_python 
> enabled websites are spontaneously returned as 404 errors.  Has anyone 
> else experienced such odd behavior?  And, if so, how was it dealt with?  
> One would assume that a 404 error would indicate either a problem with 
> the mod_python application itself, or in that the file does not exist on 
> the server.  But, this behavior (working correctly more than half the 
> time) suggests something else.

404 errors are either traversal errors or outright incorrect requests. 
Look in your logs to see if there is a common pattern with the 404 
requests. If possible, access them directly to see if they work. If you 
believe that the same URL works randomly, find evidence of success & 
failure for the same request in the logs. Don't rule out a problem with 
the application itself, especially if it incorrectly constructs relative 
URLs based on user input (such as the presence or absence of closing 
slashes).

From joe at incomps.com  Wed Mar 12 12:32:41 2008
From: joe at incomps.com (Joseph Bernhardt)
Date: Wed Mar 12 12:32:56 2008
Subject: [mod_python] [Pywebsvcs-talk] Spontaneous 404
In-Reply-To: <47D7F94E.6020509@joreybump.com>
References: <015a01c88398$2338ece0$69aac6a0$@com>
	<01bc01c88451$1ce73130$56b59390$@com>
	<47D7F94E.6020509@joreybump.com>
Message-ID: <01d001c8845e$b2016fd0$16044f70$@com>

> 404 errors are either traversal errors or outright incorrect requests.
> Look in your logs to see if there is a common pattern with the 404
> requests. If possible, access them directly to see if they work. If you
> believe that the same URL works randomly, find evidence of success &
> failure for the same request in the logs. Don't rule out a problem with
> the application itself, especially if it incorrectly constructs
> relative
> URLs based on user input (such as the presence or absence of closing
> slashes).

Jorey,

Thank you for the response.  I should have included more information in my
original message.

All sent requests are exactly alike; including url, cookies, etc.  The
access log reports either a 200 or 404 error, consistent upon what was sent
to the client.  Again, there is no rhyme or rhythm to it.  The 404's just
seem to be more prevalent when system processes exceed 90% of resources.
Curiously, the error log does not reflect these 404's (no 'File does not
exist:' or 'mod_python.publisher:' errors).

While doing a little research, I had discovered this particular instance
back in 2003:

http://www.modpython.org/pipermail/mod_python/2003-February/013443.html

which relates to our problem almost perfectly.  Unfortunately, there are no
provided solutions.  

Joe

From list at joreybump.com  Wed Mar 12 13:05:01 2008
From: list at joreybump.com (Jorey Bump)
Date: Wed Mar 12 13:05:11 2008
Subject: [mod_python] [Pywebsvcs-talk] Spontaneous 404
In-Reply-To: <01d001c8845e$b2016fd0$16044f70$@com>
References: <015a01c88398$2338ece0$69aac6a0$@com>	<01bc01c88451$1ce73130$56b59390$@com>	<47D7F94E.6020509@joreybump.com>
	<01d001c8845e$b2016fd0$16044f70$@com>
Message-ID: <47D80D3D.3000108@joreybump.com>

Joseph Bernhardt wrote, at 03/12/2008 12:32 PM:

> All sent requests are exactly alike; including url, cookies, etc.  The
> access log reports either a 200 or 404 error, consistent upon what was sent
> to the client.  Again, there is no rhyme or rhythm to it.  The 404's just
> seem to be more prevalent when system processes exceed 90% of resources.
> Curiously, the error log does not reflect these 404's (no 'File does not
> exist:' or 'mod_python.publisher:' errors).

That's consistent when a handler is defined. There will be no such error 
logged if SetHandler or AddHandler expects to handle that location or 
file extension, but the 404 will be recorded in your access log.

> While doing a little research, I had discovered this particular instance
> back in 2003:
> 
> http://www.modpython.org/pipermail/mod_python/2003-February/013443.html
> 
> which relates to our problem almost perfectly.  Unfortunately, there are no
> provided solutions.  

I don't have an immediate one to offer, although I would suggest a first 
step in trying the latest version of mod_python, 3.3.1. Unfortunately, 
you may have to tweak your code in some places, depending on your usage, 
so you could end up troubleshooting more than one problem. Perhaps you 
can set up a test environment using virtual servers that duplicates your 
production environment closely enough to put some load on it (by 
reducing available memory, for example). If the problem is resource 
related, can you still add RAM to your production machine?

From joe at incomps.com  Wed Mar 12 13:27:33 2008
From: joe at incomps.com (Joseph Bernhardt)
Date: Wed Mar 12 13:27:47 2008
Subject: [mod_python] [Pywebsvcs-talk] Spontaneous 404
In-Reply-To: <47D80D3D.3000108@joreybump.com>
References: <015a01c88398$2338ece0$69aac6a0$@com>	<01bc01c88451$1ce73130$56b59390$@com>	<47D7F94E.6020509@joreybump.com>
	<01d001c8845e$b2016fd0$16044f70$@com>
	<47D80D3D.3000108@joreybump.com>
Message-ID: <01d601c88466$5bf06170$13d12450$@com>

> > All sent requests are exactly alike; including url, cookies, etc.
> The
> > access log reports either a 200 or 404 error, consistent upon what
> was sent
> > to the client.  Again, there is no rhyme or rhythm to it.  The 404's
> just
> > seem to be more prevalent when system processes exceed 90% of
> resources.
> > Curiously, the error log does not reflect these 404's (no 'File does
> not
> > exist:' or 'mod_python.publisher:' errors).
> 
> That's consistent when a handler is defined. There will be no such
> error
> logged if SetHandler or AddHandler expects to handle that location or
> file extension, but the 404 will be recorded in your access log.

Ahh.  That's new to me.  Thanks for that info!

> I don't have an immediate one to offer, although I would suggest a
> first
> step in trying the latest version of mod_python, 3.3.1. Unfortunately,
> you may have to tweak your code in some places, depending on your
> usage,
> so you could end up troubleshooting more than one problem. Perhaps you
> can set up a test environment using virtual servers that duplicates
> your
> production environment closely enough to put some load on it (by
> reducing available memory, for example). If the problem is resource
> related, can you still add RAM to your production machine?

Thanks again.  We'll try to upgrade to 3.3.1 soon and will let you know how
that goes.  Unfortunately, the production machine is nearly maxed out, which
is why the upgrade will include a second machine dedicated to the database.
These problems caused by a lack of resources are not isolated to Python, by
any means, so the upgrade is imminent whether the version upgrade solves the
404 problem or not.

Joe

From graham.dumpleton at gmail.com  Wed Mar 12 15:57:26 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Wed Mar 12 15:57:32 2008
Subject: [mod_python] [Pywebsvcs-talk] Spontaneous 404
In-Reply-To: <01d601c88466$5bf06170$13d12450$@com>
References: <015a01c88398$2338ece0$69aac6a0$@com>
	<01bc01c88451$1ce73130$56b59390$@com> <47D7F94E.6020509@joreybump.com>
	<01d001c8845e$b2016fd0$16044f70$@com> <47D80D3D.3000108@joreybump.com>
	<01d601c88466$5bf06170$13d12450$@com>
Message-ID: <88e286470803121257h7199dcby1c7e508e6f9f7fb5@mail.gmail.com>

Read:

  http://www.dscpl.com.au/wiki/ModPython/Articles/ModuleImportingIsBroken

Your 404 problem is possibly related to ISSUE 6 or 14.

Upgrading to mod_python 3.3.1 would definitely be advisable.

Graham

On 13/03/2008, Joseph Bernhardt <joe@incomps.com> wrote:
> > > All sent requests are exactly alike; including url, cookies, etc.
>  > The
>  > > access log reports either a 200 or 404 error, consistent upon what
>  > was sent
>  > > to the client.  Again, there is no rhyme or rhythm to it.  The 404's
>  > just
>  > > seem to be more prevalent when system processes exceed 90% of
>  > resources.
>  > > Curiously, the error log does not reflect these 404's (no 'File does
>  > not
>  > > exist:' or 'mod_python.publisher:' errors).
>  >
>  > That's consistent when a handler is defined. There will be no such
>  > error
>  > logged if SetHandler or AddHandler expects to handle that location or
>  > file extension, but the 404 will be recorded in your access log.
>
>
> Ahh.  That's new to me.  Thanks for that info!
>
>
>  > I don't have an immediate one to offer, although I would suggest a
>  > first
>  > step in trying the latest version of mod_python, 3.3.1. Unfortunately,
>  > you may have to tweak your code in some places, depending on your
>  > usage,
>  > so you could end up troubleshooting more than one problem. Perhaps you
>  > can set up a test environment using virtual servers that duplicates
>  > your
>  > production environment closely enough to put some load on it (by
>  > reducing available memory, for example). If the problem is resource
>  > related, can you still add RAM to your production machine?
>
>
> Thanks again.  We'll try to upgrade to 3.3.1 soon and will let you know how
>  that goes.  Unfortunately, the production machine is nearly maxed out, which
>  is why the upgrade will include a second machine dedicated to the database.
>  These problems caused by a lack of resources are not isolated to Python, by
>  any means, so the upgrade is imminent whether the version upgrade solves the
>  404 problem or not.
>
>  Joe
>
>
>  _______________________________________________
>  Mod_python mailing list
>  Mod_python@modpython.org
>  http://mailman.modpython.org/mailman/listinfo/mod_python
>
From joe at incomps.com  Wed Mar 12 16:58:14 2008
From: joe at incomps.com (Joseph Bernhardt)
Date: Wed Mar 12 16:58:29 2008
Subject: [mod_python] [Pywebsvcs-talk] Spontaneous 404
In-Reply-To: <88e286470803121257h7199dcby1c7e508e6f9f7fb5@mail.gmail.com>
References: <015a01c88398$2338ece0$69aac6a0$@com>	
	<01bc01c88451$1ce73130$56b59390$@com>
	<47D7F94E.6020509@joreybump.com>	
	<01d001c8845e$b2016fd0$16044f70$@com>
	<47D80D3D.3000108@joreybump.com>	
	<01d601c88466$5bf06170$13d12450$@com>
	<88e286470803121257h7199dcby1c7e508e6f9f7fb5@mail.gmail.com>
Message-ID: <01e201c88483$ca68d7f0$5f3a87d0$@com>

> http://www.dscpl.com.au/wiki/ModPython/Articles/ModuleImportingIsBroken
> 
> Your 404 problem is possibly related to ISSUE 6 or 14.
> 
> Upgrading to mod_python 3.3.1 would definitely be advisable.
> 
> Graham

Thank you, Graham!

ISSUE 14, specifically as documented in MODPYTHON-9, seems to describe a
likely potential candidate as to the cause of our problem.  This gives me
more assurance that an upgrade will be the solution we need.  I'll let you
know how it goes.

Joe


From syahreza.octadian at gmail.com  Thu Mar 13 08:06:33 2008
From: syahreza.octadian at gmail.com (syahreza octadian)
Date: Thu Mar 13 08:06:52 2008
Subject: [mod_python] Free hosting for mod_python
In-Reply-To: <01e201c88483$ca68d7f0$5f3a87d0$@com>
References: <015a01c88398$2338ece0$69aac6a0$@com>		<01bc01c88451$1ce73130$56b59390$@com>	<47D7F94E.6020509@joreybump.com>		<01d001c8845e$b2016fd0$16044f70$@com>	<47D80D3D.3000108@joreybump.com>		<01d601c88466$5bf06170$13d12450$@com>	<88e286470803121257h7199dcby1c7e508e6f9f7fb5@mail.gmail.com>
	<01e201c88483$ca68d7f0$5f3a87d0$@com>
Message-ID: <47D918C9.5070903@gmail.com>

Dear all,

I want to try upload my site with mod_python, is there someone know 
where i can find free hosting that support mod_python.

Thx u.

From admin at itech7.com  Thu Mar 13 08:59:49 2008
From: admin at itech7.com (Nilesh Govindrajan)
Date: Thu Mar 13 09:00:18 2008
Subject: [mod_python] Free hosting for mod_python
In-Reply-To: <47D918C9.5070903@gmail.com>
References: <015a01c88398$2338ece0$69aac6a0$@com>
	<01bc01c88451$1ce73130$56b59390$@com>
	<47D7F94E.6020509@joreybump.com>
	<01d001c8845e$b2016fd0$16044f70$@com>
	<47D80D3D.3000108@joreybump.com>
	<01d601c88466$5bf06170$13d12450$@com>
	<88e286470803121257h7199dcby1c7e508e6f9f7fb5@mail.gmail.com>
	<01e201c88483$ca68d7f0$5f3a87d0$@com> <47D918C9.5070903@gmail.com>
Message-ID: <20080313182949.36fc1e3a@itech7.com>

On Thu, 13 Mar 2008 19:06:33 +0700
syahreza octadian <syahreza.octadian@gmail.com> wrote:

> Dear all,
> 
> I want to try upload my site with mod_python, is there someone know 
> where i can find free hosting that support mod_python.
> 
> Thx u.
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python

How about a Google Search ?

-- 
Nilesh G
India Technologies Administrator
www.itech7.com
From joe at incomps.com  Thu Mar 13 14:50:32 2008
From: joe at incomps.com (Joseph Bernhardt)
Date: Thu Mar 13 14:50:53 2008
Subject: [mod_python] [Pywebsvcs-talk] Spontaneous 404
In-Reply-To: <01e201c88483$ca68d7f0$5f3a87d0$@com>
References: <015a01c88398$2338ece0$69aac6a0$@com>		<01bc01c88451$1ce73130$56b59390$@com>	<47D7F94E.6020509@joreybump.com>		<01d001c8845e$b2016fd0$16044f70$@com>	<47D80D3D.3000108@joreybump.com>		<01d601c88466$5bf06170$13d12450$@com>	<88e286470803121257h7199dcby1c7e508e6f9f7fb5@mail.gmail.com>
	<01e201c88483$ca68d7f0$5f3a87d0$@com>
Message-ID: <005f01c8853b$1dffd7d0$59ff8770$@com>

> >
> http://www.dscpl.com.au/wiki/ModPython/Articles/ModuleImportingIsBroken
> >
> > Your 404 problem is possibly related to ISSUE 6 or 14.
> >
> > Upgrading to mod_python 3.3.1 would definitely be advisable.
> >
> > Graham
> 
> Thank you, Graham!
> 
> ISSUE 14, specifically as documented in MODPYTHON-9, seems to describe
> a
> likely potential candidate as to the cause of our problem.  This gives
> me
> more assurance that an upgrade will be the solution we need.  I'll let
> you
> know how it goes.
> 
> Joe


Thank you everyone for your quick responses.  The bug mentioned above was,
in fact, the cause of our 404 problems.  The issue is now resolved.

Joe

From h.froels at web.de  Fri Mar 14 09:16:07 2008
From: h.froels at web.de (=?iso-8859-15?Q?Hartmut_Fr=F6ls?=)
Date: Fri Mar 14 09:16:13 2008
Subject: [mod_python] Lock-Problem with Oracle
Message-ID: <196843740@web.de>

Hi Group,

I try to use mod_python to generate a browser-based GUI for a
small ERP-Application.
I use Apache 2.2, mod_python 3.3.1 and Python 2.4.4  with Oracle 9i2.

At first I wrote a programm  like this:

########################################
import db      # my database handlers with cx_Oracle

def index(req):

   ...               # generate a http-page with a form

   return http

def GetDat(req,**data):
      .....
      db.select(...... for_update=1)
      .....
      return data

def PutDat(req,**data):
      .....
      db.update(data)
      .....
      return succes

#########################################

The http-page has some AJAX-functions, which send and recieve
the datas the user needs or has updatet.

The problem is, when the programm makes the update on the
database, it waits for the lock, because the programm has opend
a second cursor for the update, although the cursor-objects should
be global. I know, after reading many of the postings in this group and all over
the web, that this is because mod_python opens a new request for
the call of the PutDat() function and this new interpreter-instance of
this request has its own global vars.
So I come to my question: is there any way to tell mod_python, that the
AJAX-request from the http-page must go to the interpreter-instance,
that has generatet the page ?  Or do You know any other solution for
this lock-problem ?

I hope anyone can help me.  (Sorry for my bad English)

- Hartmut

_______________________________________________________________________
Jetzt neu! Sch?tzen Sie Ihren PC mit McAfee und WEB.DE. 30 Tage
kostenlos testen. http://www.pc-sicherheit.web.de/startseite/?mc=022220


From sean at ardishealth.com  Fri Mar 14 12:06:22 2008
From: sean at ardishealth.com (Sean Allen)
Date: Fri Mar 14 12:06:37 2008
Subject: [mod_python] Lock-Problem with Oracle
In-Reply-To: <196843740@web.de>
References: <196843740@web.de>
Message-ID: <07C3443F-82C3-49EF-B3E1-B207E014284B@ardishealth.com>


On Mar 14, 2008, at 9:16 AM, Hartmut Fr?ls wrote:

> Hi Group,
>
> I try to use mod_python to generate a browser-based GUI for a
> small ERP-Application.
> I use Apache 2.2, mod_python 3.3.1 and Python 2.4.4  with Oracle 9i2.
>
> At first I wrote a programm  like this:
>
> ########################################
> import db      # my database handlers with cx_Oracle
>
> def index(req):
>
>   ...               # generate a http-page with a form
>
>   return http
>
> def GetDat(req,**data):
>      .....
>      db.select(...... for_update=1)
>      .....
>      return data
>
> def PutDat(req,**data):
>      .....
>      db.update(data)
>      .....
>      return succes
>
> #########################################
>
> The http-page has some AJAX-functions, which send and recieve
> the datas the user needs or has updatet.
>
> The problem is, when the programm makes the update on the
> database, it waits for the lock, because the programm has opend
> a second cursor for the update, although the cursor-objects should
> be global. I know, after reading many of the postings in this group  
> and all over
> the web, that this is because mod_python opens a new request for
> the call of the PutDat() function and this new interpreter-instance of
> this request has its own global vars.
> So I come to my question: is there any way to tell mod_python, that  
> the
> AJAX-request from the http-page must go to the interpreter-instance,
> that has generatet the page ?  Or do You know any other solution for
> this lock-problem ?
>

Let me see if I follow this:

index is called
getDat is called
putDat is called via ajax.

why exactly is a lock being held after getDat?
are you locking it explicitly in getDat? if yes, when exactly would  
that lock be released?

if you are locking it, then basically you are trying to do something  
stateful via a stateless
medium which is going to cause you a large amount of trouble.

I suggest if the above is the case, you look into 'optimistic locking':

http://en.wikipedia.org/wiki/Optimistic_concurrency_control






From jsliz at fluentenergy.com  Fri Mar 14 12:45:51 2008
From: jsliz at fluentenergy.com (Joseph Sliz)
Date: Fri Mar 14 12:43:57 2008
Subject: [mod_python] Trying to install mod_python to use with Apache
Message-ID: <000301c885f2$dd771d50$986557f0$@com>

I have installed mod_python-3.3.1.win32 to be used with Apache 2.2.8, on a
machine running win xp prof(svc pck 2).  Once I installed mod_python I added
LoadModule python_module modules/mod_python.so to the Apache httpd.conf.
When I try to restart Apache I receive the following error:

 

httpd.exe: Syntax error on line 60 of C:/Program Files/Apache Software
Foundation/Apache2.2/conf/httpd.conf: Cannot load C:/Program Files/Apache
Software Foundation/Apache2.2/modules/mod_python.so into server: The
specified module could not be found.  

[Fri Mar 14 11:13:52 2008] [warn] (OS 995)The I/O operation has been aborted
because of either a thread exit or an application request.  : winnt_accept:
Asynchronous AcceptEx failed.

[Fri Mar 14 11:13:53 2008] [notice] Child 3744: Released the start mutex

[Fri Mar 14 11:13:54 2008] [notice] Child 3744: All worker threads have
exited.

[Fri Mar 14 11:13:54 2008] [notice] Child 3744: Child process is exiting

 

I checked in C:/Program Files/Apache Software Foundation/Apache2.2/modules
and the mod_python.so is present there.

 

Can anyone help me out with this matter.

 

Thanks

 

Joseph Sliz, Jr.

Data Analyst/Programmer

Fluent Energy

jsliz@fluentenergy.com

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080314/5044d0e4/attachment.html
From clodoaldo.pinto.neto at gmail.com  Fri Mar 14 13:48:02 2008
From: clodoaldo.pinto.neto at gmail.com (Clodoaldo)
Date: Fri Mar 14 13:48:14 2008
Subject: [mod_python] Trying to install mod_python to use with Apache
In-Reply-To: <000301c885f2$dd771d50$986557f0$@com>
References: <000301c885f2$dd771d50$986557f0$@com>
Message-ID: <a595de7a0803141048v6f560c1ay82e31aea4882d76a@mail.gmail.com>

Did you check if the Apache user can read that file?

Regards, Clodoaldo Pinto Neto

2008/3/14, Joseph Sliz <jsliz@fluentenergy.com>:
>
>
>
>
> I have installed mod_python-3.3.1.win32 to be used with Apache 2.2.8, on a
> machine running win xp prof(svc pck 2).  Once I installed mod_python I added
> LoadModule python_module modules/mod_python.so to the Apache httpd.conf.
> When I try to restart Apache I receive the following error:
>
>
>
> httpd.exe: Syntax error on line 60 of C:/Program Files/Apache Software
> Foundation/Apache2.2/conf/httpd.conf: Cannot load
> C:/Program Files/Apache Software
> Foundation/Apache2.2/modules/mod_python.so into server: The
> specified module could not be found.
>
> [Fri Mar 14 11:13:52 2008] [warn] (OS 995)The I/O operation has been aborted
> because of either a thread exit or an application request.  : winnt_accept:
> Asynchronous AcceptEx failed.
>
> [Fri Mar 14 11:13:53 2008] [notice] Child 3744: Released the start mutex
>
> [Fri Mar 14 11:13:54 2008] [notice] Child 3744: All worker threads have
> exited.
>
> [Fri Mar 14 11:13:54 2008] [notice] Child 3744: Child process is exiting
>
>
>
> I checked in C:/Program Files/Apache Software Foundation/Apache2.2/modules
> and the mod_python.so is present there.
>
>
>
> Can anyone help me out with this matter.
>
>
>
> Thanks
>
>
>
> Joseph Sliz, Jr.
>
> Data Analyst/Programmer
>
> Fluent Energy
>
> jsliz@fluentenergy.com
>
>
> _______________________________________________
>  Mod_python mailing list
>  Mod_python@modpython.org
>  http://mailman.modpython.org/mailman/listinfo/mod_python
>
>
From scarfboy at gmail.com  Fri Mar 14 15:12:00 2008
From: scarfboy at gmail.com (Bart)
Date: Fri Mar 14 15:12:06 2008
Subject: [mod_python] Lock-Problem with Oracle
In-Reply-To: <196843740@web.de>
References: <196843740@web.de>
Message-ID: <b71082d80803141212l5631354cxa2d9768c8f4698a@mail.gmail.com>

On Fri, Mar 14, 2008 at 2:16 PM, Hartmut Fr?ls <h.froels@web.de> wrote:
[snip]
>  The http-page has some AJAX-functions, which send and recieve
>  the datas the user needs or has updatet.
>
>  The problem is, when the programm makes the update on the
>  database, it waits for the lock, because the programm has opend
>  a second cursor for the update, although the cursor-objects should
>  be global. I know, after reading many of the postings in this group and all over
(I assume you mean the library reference, which is probably threadpooling.
Globally sharing cursor (not even connection) objects sounds like trouble)

>  the web, that this is because mod_python opens a new request for
>  the call of the PutDat() function and this new interpreter-instance of
>  this request has its own global vars.
Long-lived subinterpreters which handle many requests in their lifetime,
of which there are generally a bunch, and the issue being that you
may or may not land in the same one based on uncontrollable factors,
but close enough.

>  So I come to my question: is there any way to tell mod_python, that the
>  AJAX-request from the http-page must go to the interpreter-instance,
>  that has generatet the page ?
Basically, no.

>  Or do You know any other solution for this lock-problem ?
Frankly, I don't understand your explanation, so I don't get the
problem to be solved.
Database table locking is usually both unavoidable, and almost short for simple
updates, and (particularly if your database library threadpools) I
don't really see
how this is related to client-side code, so I can't think of what type
of locking
problem you are describing.

If the other response didn't help you, please give more detail, such as a
diagnosis on what process is waiting on what other process, why it would,
exactly how this is a problem, and why you want the next request to be
handled by the same interpreter (and not anything *but* that interpreter,
which is what I figured you meant at first).

Regards,
--Bart

From jsliz at fluentenergy.com  Fri Mar 14 16:13:51 2008
From: jsliz at fluentenergy.com (Joseph Sliz)
Date: Fri Mar 14 16:11:55 2008
Subject: [mod_python] Cannot get mod_python to work with apache 2.2
Message-ID: <001601c8860f$ebad8c70$c308a550$@com>

I have the following:

 

Python 2.4

Apache 2.2.8

Mod_python 3.3.1

Win XP Prof sp2

 

I was receiving an error when try to restart apache after loading mod_python
stating that the apache could not find the mod_python.so module.  I did some
research and discovered Apache might not be finding one of the DLL's it
relies on.  I also found out that python24.dll,  msvcr71.dll  and
msvcp71.dll might be the ones Apache isn't finding.  The fix to this would
be to make sure my python directory and the runtime DLLs can be found on my
PATH  variable.  Now I understand that the runtime DLLs are normally copied
to my python directory and putting my python directory on my PATH  variable
should fix this problem, the only problem is that I don't know how to do
this..as I am new to python.  

 

Can anyone help me with this.   Also, how do I make sure that the user which
is running Apache has its' PATH variable properly set???

 

Any help would be greatly appreciated.

 

Regards...Joe

 

Joseph Sliz, Jr.

Data Analyst/Programmer

Fluent Energy

Ph: 716-842-1710 x209

Fax: 716-842-1705

jsliz@fluentenergy.com

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080314/e9967a1b/attachment.html
From graham.dumpleton at gmail.com  Fri Mar 14 16:57:51 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Fri Mar 14 16:57:58 2008
Subject: [mod_python] Lock-Problem with Oracle
In-Reply-To: <b71082d80803141212l5631354cxa2d9768c8f4698a@mail.gmail.com>
References: <196843740@web.de>
	<b71082d80803141212l5631354cxa2d9768c8f4698a@mail.gmail.com>
Message-ID: <88e286470803141357k512f7507m1b045cd0336050b4@mail.gmail.com>

On 15/03/2008, Bart <scarfboy@gmail.com> wrote:
> On Fri, Mar 14, 2008 at 2:16 PM, Hartmut Fr?ls <h.froels@web.de> wrote:
>  >  the web, that this is because mod_python opens a new request for
>  >  the call of the PutDat() function and this new interpreter-instance of
>  >  this request has its own global vars.
>
> Long-lived subinterpreters which handle many requests in their lifetime,
>  of which there are generally a bunch, and the issue being that you
>  may or may not land in the same one based on uncontrollable factors,
>  but close enough.

Within a single Apache child process, the same Python sub interpreter
would always be used for requests against the same application (unless
you override this behaviour).

It is a misconception, that doesn't want to go away, that mod_python
creates brand new Python sub interpreters for each request against the
same process, or that it somehow uses a pool of sub interpreters and
ensures that only one request at a time executes in each. Both of
these things are totally untrue when applied to a single Apache child
process.

Where confusion often arises and causes people to wrongly think the
things above is that Apache is a multiprocess web server. Thus there
can be multiple Apache child processes handling requests concurrently.
So, it isn't because there are multiple sub interpreters within the
one process, but that the request could be getting handled by a
complete different process, containing its own single Python sub
interpreter used by that application.

Thus, the reason that one can't guarantee a subsequent request goes
back to the same sub interpreter is not because it goes to some other
sub interpreter in the same process, but that it goes to a completely
different process altogether.

So, please always make it clear how processes come into the picture
else it just propagates wrong notions about how it works.

For further information see:

  http://www.dscpl.com.au/wiki/ModPython/Articles/TheProcessInterpreterModel

Graham

From auther_bin at 21cn.com  Sun Mar  2 21:04:59 2008
From: auther_bin at 21cn.com (auther_bin)
Date: Sat Mar 15 13:28:26 2008
Subject: [mod_python] Help about apache mod_python Segmentation fault
References: <200802271315514506355@21cn.com>,
	<88e286470802262129s77d47709p5518fa57ae0abc0d@mail.gmail.com>
Message-ID: <200803031004596734722@21cn.com>

Hi Graham Dumpleton,

¡¡¡¡I comiling all the libs and mod_python with "-g", and run gdb of httpd, but could not catch the wro
ng piont correctly, here is some messages:

=============== GDB run with -X ===============================
# gdb httpd 
argc=2 argv=0xbffff9b4 envp=0xbffff9c0
ELF header=0x40000000
First Dynamic section entry=0x40009efc
transfering control to application @ 0x8070360
GNU gdb 5.3
Copyright 2002 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "i686-pc-linux-gnu"...
(gdb) run -X
Starting program: /usr/local/apache2/bin/httpd -X
argc=3 argv=0xbfffe574 envp=0xbfffe584
ELF header=0x40000000
[New Thread 1024 (LWP 8609)]
transfering control to application @ 0x8065250
JJJJJJ apr_app_initialize(2, /usr/local/apache2/bin/httpd, -X, (null))
JJJJJJJ in apr_initialize srclib/apr/misc/unix
JJJJJJJ in before apr_pool_create srclib/apr/misc/unix
JJJJJJJ in before apr_pool_tag srclib/apr/misc/unix
httpd: apr_sockaddr_info_get() failed for localhost.localdomain
httpd: Could not reliably determine the server's fully qualified domain name, using 127.0.0.1 for ServerName
JJJJJJJJJJJJJJJJJJJ111111111JJJJJJ
JJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJ
												<----- give a web requirement here.
JJJJJJJJJJJJJJJ python_connection
JJJJJJJJJ PythonPostReadRequestHandler
JJJJJJJJ PythonInitHandler -> python_handler
JJJJJJJJ 81e604c[27]
Cannot find user-level thread for LWP 8609: generic error
(gdb) where
Cannot find thread 1024: generic error
(gdb) 
======================= GDB could not working any more here ====================
BTW, the lines begains with "JJJJ" is the printf gives, where I inputed into the sourcecode
of apache and mod_python.

if I run httpd -X without gdb, the httpd gives:
======================
JJJJJJJJ 81e605c[27]
Segmentation fault
# 
======================

after times of work, I think is it the problem lies on the module Load process?
for if i rem the config line in httpd.conf "LoadModule python_module modules/mod_python.so", the httpd could works well.

======= 2008-02-27 wrote: =======

>On 27/02/2008, auther_bin <auther_bin@21cn.com> wrote:
>> Dear friends,
>>
>>         When I compiling the apache python mod_python and install it into my uClibc envirentment, but when I
>>  runing httpd -X, send a very little request with index.html it crashed. after some debuging work, I find there should be something wrong in mod_python.c line(about 1561) which looks like:
>>  --------------------------------- with my debug printing :) ------------------------
>>  printf("JJJJJJJJ %s -> python_handler\n", phase);
>>  printf("JJJJJJJJ %x[%d]\n", &req->per_dir_config, (&python_module)->module_index);
>>     /* get configuration */
>>     conf = (py_config *) ap_get_module_config(req->per_dir_config,
>>                                                   &python_module);
>>  printf("JJJJJJJJ a %s conf=%x -> python_handler\n", phase,conf);
>>  .............
>>  ------------------------------ end source --------------------------------------
>>
>>  I guess that, there should be a regester error in it. with some debug message I print:
>>  ------------- printing -------------------------------
>>  JJJJJJJJJ PythonPostReadRequestHandler
>>  JJJJJJJJ PythonInitHandler -> python_handler
>>  JJJJJJJJ 820a544[29]
>>  Segmentation fault
>>  ------------- end printing ---------------------------
>>
>>  any advices pls?
>
>Unfortunately that doesn't help much.
>
>You need a stack trace to show the true location in code.
>
>Use procedure documented in section 'Debugging Crashes With GDB' of:
>
>  http://code.google.com/p/modwsgi/wiki/DebuggingTechniques
>
>to run up httpd inside of gdb and get a stack trace of where crash is occurring.
>
>This documentation is for mod_wgsi, but same procedure used for mod_python.
>
>There is a similar procedure documented on Apache site, but can't
>remember where.
>
>Graham
>
>
>__________ NOD32 2906 (20080227) Information __________
>
>This message was checked by NOD32 antivirus system.
>http://www.nod32cn.com
>
>

= = = = = = = = = = = = = = = = = = = =
			

                    ÖÂ
Àñ£¡
		2008-03-03 

From h.froels at web.de  Sun Mar 16 07:53:19 2008
From: h.froels at web.de (=?iso-8859-15?Q?Hartmut_Fr=F6ls?=)
Date: Sun Mar 16 07:53:25 2008
Subject: [mod_python] Lock-Problem with Oracle
Message-ID: <199042068@web.de>

Thanks to all posters for Your help.

I see that I can't get a fixed connection between my program and
the http-page which should be the GUI of my programm, so that I
can use the lock-version I prefer. 
So I will give a try to the 'optimistic locking'. (Thanks to Sean)

Regards
- Hartmut
__________________________________________________
GRATIS: Movie-FLAT. Jetzt freischalten!
http://freemail.web.de/club/maxdome.htm/?mc=025557

From jsliz at fluentenergy.com  Mon Mar 17 10:26:46 2008
From: jsliz at fluentenergy.com (Joseph Sliz)
Date: Mon Mar 17 10:24:57 2008
Subject: [mod_python] mod_python tutorial issues
Message-ID: <004801c8883a$ee530cc0$caf92640$@com>

I am new to mod_python and Apache.

 

My environment is:
 
Windows XP Prof sp2
Python 2.4
Apache 2.2.8
Mod_python 3.3.1
 
I've already added the following to the Apache httpd.conf
 
LoadModule python_module modules/mod_python.so
 
I'm now trying to do a simple test, following a tutorial I found.  I've also
added the following to the Apache httpd.conf file to let Mod_python know
where to find my python module
 
DocumentRoot /C:/temp
<Directory /C:/temp>
    AddHandler python-program .py 
    PythonHandler hello
</Directory>
 
 
I have added the following python script to my "C:/temp" directory.
 
from mod_python import apache
 
def handler(req):
     req.content_type = "text/plain"
     req.send_http_header()
     req.write("Hello, Welcome to my World!")
     return apache.OK
 
 
When I put the request "http://localhost/hello.py" into my browser, I
receive an "HTTP 404 Not Found" error.  Can anyone please give me some
assistance as to what I might be doing wrong??
 
Reqards..Joe
 
 

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080317/2fcad5ce/attachment.html
From admin at itech7.com  Mon Mar 17 10:40:38 2008
From: admin at itech7.com (Nilesh Govindrajan)
Date: Mon Mar 17 10:41:21 2008
Subject: [mod_python] mod_python tutorial issues
In-Reply-To: <004801c8883a$ee530cc0$caf92640$@com>
References: <004801c8883a$ee530cc0$caf92640$@com>
Message-ID: <47DE82E6.9090405@itech7.com>

Joseph Sliz wrote:
>
> I am new to mod_python and Apache.
>
> My environment is:
>  
> Windows XP Prof sp2
> Python 2.4
> Apache 2.2.8
> Mod_python 3.3.1
>  
> I?ve already added the following to the Apache httpd.conf
>  
> LoadModule python_module modules/mod_python.so
>  
> I?m now trying to do a simple test, following a tutorial I found.  I?ve also added the following to the Apache httpd.conf file to let Mod_python know where to find my python module
>  
> DocumentRoot /C:/temp
> <Directory /C:/temp>
>     AddHandler python-program .py 
>     PythonHandler hello
> </Directory>
>  
>  
> I have added the following python script to my ?C:/temp? directory.
>  
> from mod_python import apache
>  
> def handler(req):
>      req.content_type = "text/plain"
>      req.send_http_header()
>      req.write("Hello, Welcome to my World!")
>      return apache.OK
>  
>  
> When I put the request ?http://localhost/hello.py? into my browser, I receive an ?HTTP 404 Not Found? error.  Can anyone please give me some assistance as to what I might be doing wrong??
>  
> Reqards??Joe
>  
> / /
>
> ------------------------------------------------------------------------
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>   
Try with

AddHandler mod_python .py

and

SetHandler mod_python

note: you must AddHandler first otherwise it won't work.
From admin at itech7.com  Mon Mar 17 11:01:55 2008
From: admin at itech7.com (Nilesh Govindrajan)
Date: Mon Mar 17 11:02:18 2008
Subject: [mod_python] mod_python tutorial issues
In-Reply-To: <005301c8883f$d4823780$7d86a680$@com>
References: <004801c8883a$ee530cc0$caf92640$@com> <47DE82E6.9090405@itech7.com>
	<005301c8883f$d4823780$7d86a680$@com>
Message-ID: <47DE87E3.2080303@itech7.com>

Joseph Sliz wrote:
> Nilesh;
>
> I've changed the following code in the Apache httpd.conf file:
>
> DocumentRoot /C:/temp
> <Directory /C:/temp>
>     AddHandler mod_python .py
>     SetHandler mod_python 
>     PythonHandler hello
> </Directory>
>
> But, I am still receiving an "HTTP 404 Not Found" error when I put the
> request "http://localhost/hello.py" into my browser.  Should I be placing
> the above piece of code in a certain spot in the Apache httpd.conf file???
>
> Regards.....Joe
>
> -----Original Message-----
> From: Nilesh Govindrajan [mailto:admin@itech7.com] 
> Sent: Monday, March 17, 2008 10:41 AM
> To: jsliz@fluentenergy.com
> Cc: mod_python@modpython.org
> Subject: Re: [mod_python] mod_python tutorial issues
>
> Joseph Sliz wrote:
>   
>> I am new to mod_python and Apache.
>>
>> My environment is:
>>  
>> Windows XP Prof sp2
>> Python 2.4
>> Apache 2.2.8
>> Mod_python 3.3.1
>>  
>> I've already added the following to the Apache httpd.conf
>>  
>> LoadModule python_module modules/mod_python.so
>>  
>> I'm now trying to do a simple test, following a tutorial I found.  I've
>>     
> also added the following to the Apache httpd.conf file to let Mod_python
> know where to find my python module
>   
>>  
>> DocumentRoot /C:/temp
>> <Directory /C:/temp>
>>     AddHandler python-program .py 
>>     PythonHandler hello
>> </Directory>
>>  
>>  
>> I have added the following python script to my "C:/temp" directory.
>>  
>> from mod_python import apache
>>  
>> def handler(req):
>>      req.content_type = "text/plain"
>>      req.send_http_header()
>>      req.write("Hello, Welcome to my World!")
>>      return apache.OK
>>  
>>  
>> When I put the request "http://localhost/hello.py" into my browser, I
>>     
> receive an "HTTP 404 Not Found" error.  Can anyone please give me some
> assistance as to what I might be doing wrong??
>   
>>  
>> Reqards..Joe
>>  
>> / /
>>
>> ------------------------------------------------------------------------
>>
>> _______________________________________________
>> Mod_python mailing list
>> Mod_python@modpython.org
>> http://mailman.modpython.org/mailman/listinfo/mod_python
>>   
>>     
> Try with
>
> AddHandler mod_python .py
>
> and
>
> SetHandler mod_python
>
> note: you must AddHandler first otherwise it won't work.
>
>   

try visiting http://localhost/hello.py/handler

if it works;

then add this code in hello.py

def index(req):
return handler(req)

From admin at itech7.com  Mon Mar 17 11:15:17 2008
From: admin at itech7.com (Nilesh Govindrajan)
Date: Mon Mar 17 11:15:42 2008
Subject: [mod_python] mod_python tutorial issues
In-Reply-To: <005401c88841$91267e90$b3737bb0$@com>
References: <004801c8883a$ee530cc0$caf92640$@com> <47DE82E6.9090405@itech7.com>
	<005301c8883f$d4823780$7d86a680$@com> <47DE87E3.2080303@itech7.com>
	<005401c88841$91267e90$b3737bb0$@com>
Message-ID: <47DE8B05.1010800@itech7.com>

Joseph Sliz wrote:
> Still didn't work.  I tried visiting http://localhost/hello.py/handler, but
> still receive an "HTTP 404 Not Found" error.  What could I possibly be
> missing???
>
> Regards....Joe
>
> -----Original Message-----
> From: Nilesh Govindrajan [mailto:admin@itech7.com] 
> Sent: Monday, March 17, 2008 11:02 AM
> To: jsliz@fluentenergy.com
> Cc: mod_python@modpython.org
> Subject: Re: [mod_python] mod_python tutorial issues
>
> Joseph Sliz wrote:
>   
>> Nilesh;
>>
>> I've changed the following code in the Apache httpd.conf file:
>>
>> DocumentRoot /C:/temp
>> <Directory /C:/temp>
>>     AddHandler mod_python .py
>>     SetHandler mod_python 
>>     PythonHandler hello
>> </Directory>
>>
>> But, I am still receiving an "HTTP 404 Not Found" error when I put the
>> request "http://localhost/hello.py" into my browser.  Should I be placing
>> the above piece of code in a certain spot in the Apache httpd.conf file???
>>
>> Regards.....Joe
>>
>> -----Original Message-----
>> From: Nilesh Govindrajan [mailto:admin@itech7.com] 
>> Sent: Monday, March 17, 2008 10:41 AM
>> To: jsliz@fluentenergy.com
>> Cc: mod_python@modpython.org
>> Subject: Re: [mod_python] mod_python tutorial issues
>>
>> Joseph Sliz wrote:
>>   
>>     
>>> I am new to mod_python and Apache.
>>>
>>> My environment is:
>>>  
>>> Windows XP Prof sp2
>>> Python 2.4
>>> Apache 2.2.8
>>> Mod_python 3.3.1
>>>  
>>> I've already added the following to the Apache httpd.conf
>>>  
>>> LoadModule python_module modules/mod_python.so
>>>  
>>> I'm now trying to do a simple test, following a tutorial I found.  I've
>>>     
>>>       
>> also added the following to the Apache httpd.conf file to let Mod_python
>> know where to find my python module
>>   
>>     
>>>  
>>> DocumentRoot /C:/temp
>>> <Directory /C:/temp>
>>>     AddHandler python-program .py 
>>>     PythonHandler hello
>>> </Directory>
>>>  
>>>  
>>> I have added the following python script to my "C:/temp" directory.
>>>  
>>> from mod_python import apache
>>>  
>>> def handler(req):
>>>      req.content_type = "text/plain"
>>>      req.send_http_header()
>>>      req.write("Hello, Welcome to my World!")
>>>      return apache.OK
>>>  
>>>  
>>> When I put the request "http://localhost/hello.py" into my browser, I
>>>     
>>>       
>> receive an "HTTP 404 Not Found" error.  Can anyone please give me some
>> assistance as to what I might be doing wrong??
>>   
>>     
>>>  
>>> Reqards..Joe
>>>  
>>> / /
>>>
>>> ------------------------------------------------------------------------
>>>
>>> _______________________________________________
>>> Mod_python mailing list
>>> Mod_python@modpython.org
>>> http://mailman.modpython.org/mailman/listinfo/mod_python
>>>   
>>>     
>>>       
>> Try with
>>
>> AddHandler mod_python .py
>>
>> and
>>
>> SetHandler mod_python
>>
>> note: you must AddHandler first otherwise it won't work.
>>
>>   
>>     
>
> try visiting http://localhost/hello.py/handler
>
> if it works;
>
> then add this code in hello.py
>
> def index(req):
> return handler(req)
>
>   
Are you sure that the directory is set correctly ? /C: ???
I am on Linux so don't know much about Apache in Windows.
From admin at itech7.com  Mon Mar 17 11:38:34 2008
From: admin at itech7.com (Nilesh Govindrajan)
Date: Mon Mar 17 11:40:50 2008
Subject: [mod_python] mod_python tutorial issues
In-Reply-To: <005501c88844$42b85730$c8290590$@com>
References: <004801c8883a$ee530cc0$caf92640$@com> <47DE82E6.9090405@itech7.com>
	<005301c8883f$d4823780$7d86a680$@com> <47DE87E3.2080303@itech7.com>
	<005401c88841$91267e90$b3737bb0$@com> <47DE8B05.1010800@itech7.com>
	<005501c88844$42b85730$c8290590$@com>
Message-ID: <47DE907A.6020207@itech7.com>

Joseph Sliz wrote:
> The tutorial examples I have are as follows:
>
> DocumentRoot /foo/bar
> <Directory /foo/bar>
> 	AddHandler python-program .py
> 	PythonHandler hello
> </Directory
>
>
> AND
>
> Alias /python /var/www/python
> <Directory /var/www/python>
>         SetHandler python-program
>         PythonHandler application
> </Directory>
>
>
> Not knowing much about mod_python and Apache, I can only go by the examples.
> Should I be setting the Directory up differently in the Apache httpd.conf
> file???
>
>
>
> -----Original Message-----
> From: Nilesh Govindrajan [mailto:admin@itech7.com] 
> Sent: Monday, March 17, 2008 11:15 AM
> To: jsliz@fluentenergy.com
> Cc: mod_python@modpython.org
> Subject: Re: [mod_python] mod_python tutorial issues
>
> Joseph Sliz wrote:
>   
>> Still didn't work.  I tried visiting http://localhost/hello.py/handler,
>>     
> but
>   
>> still receive an "HTTP 404 Not Found" error.  What could I possibly be
>> missing???
>>
>> Regards....Joe
>>
>> -----Original Message-----
>> From: Nilesh Govindrajan [mailto:admin@itech7.com] 
>> Sent: Monday, March 17, 2008 11:02 AM
>> To: jsliz@fluentenergy.com
>> Cc: mod_python@modpython.org
>> Subject: Re: [mod_python] mod_python tutorial issues
>>
>> Joseph Sliz wrote:
>>   
>>     
>>> Nilesh;
>>>
>>> I've changed the following code in the Apache httpd.conf file:
>>>
>>> DocumentRoot /C:/temp
>>> <Directory /C:/temp>
>>>     AddHandler mod_python .py
>>>     SetHandler mod_python 
>>>     PythonHandler hello
>>> </Directory>
>>>
>>> But, I am still receiving an "HTTP 404 Not Found" error when I put the
>>> request "http://localhost/hello.py" into my browser.  Should I be placing
>>> the above piece of code in a certain spot in the Apache httpd.conf
>>>       
> file???
>   
>>> Regards.....Joe
>>>
>>> -----Original Message-----
>>> From: Nilesh Govindrajan [mailto:admin@itech7.com] 
>>> Sent: Monday, March 17, 2008 10:41 AM
>>> To: jsliz@fluentenergy.com
>>> Cc: mod_python@modpython.org
>>> Subject: Re: [mod_python] mod_python tutorial issues
>>>
>>> Joseph Sliz wrote:
>>>   
>>>     
>>>       
>>>> I am new to mod_python and Apache.
>>>>
>>>> My environment is:
>>>>  
>>>> Windows XP Prof sp2
>>>> Python 2.4
>>>> Apache 2.2.8
>>>> Mod_python 3.3.1
>>>>  
>>>> I've already added the following to the Apache httpd.conf
>>>>  
>>>> LoadModule python_module modules/mod_python.so
>>>>  
>>>> I'm now trying to do a simple test, following a tutorial I found.  I've
>>>>     
>>>>       
>>>>         
>>> also added the following to the Apache httpd.conf file to let Mod_python
>>> know where to find my python module
>>>   
>>>     
>>>       
>>>>  
>>>> DocumentRoot /C:/temp
>>>> <Directory /C:/temp>
>>>>     AddHandler python-program .py 
>>>>     PythonHandler hello
>>>> </Directory>
>>>>  
>>>>  
>>>> I have added the following python script to my "C:/temp" directory.
>>>>  
>>>> from mod_python import apache
>>>>  
>>>> def handler(req):
>>>>      req.content_type = "text/plain"
>>>>      req.send_http_header()
>>>>      req.write("Hello, Welcome to my World!")
>>>>      return apache.OK
>>>>  
>>>>  
>>>> When I put the request "http://localhost/hello.py" into my browser, I
>>>>     
>>>>       
>>>>         
>>> receive an "HTTP 404 Not Found" error.  Can anyone please give me some
>>> assistance as to what I might be doing wrong??
>>>   
>>>     
>>>       
>>>>  
>>>> Reqards..Joe
>>>>  
>>>> / /
>>>>
>>>> ------------------------------------------------------------------------
>>>>
>>>> _______________________________________________
>>>> Mod_python mailing list
>>>> Mod_python@modpython.org
>>>> http://mailman.modpython.org/mailman/listinfo/mod_python
>>>>   
>>>>     
>>>>       
>>>>         
>>> Try with
>>>
>>> AddHandler mod_python .py
>>>
>>> and
>>>
>>> SetHandler mod_python
>>>
>>> note: you must AddHandler first otherwise it won't work.
>>>
>>>   
>>>     
>>>       
>> try visiting http://localhost/hello.py/handler
>>
>> if it works;
>>
>> then add this code in hello.py
>>
>> def index(req):
>> return handler(req)
>>
>>   
>>     
> Are you sure that the directory is set correctly ? /C: ???
> I am on Linux so don't know much about Apache in Windows.
>
>   
The python-program handler never works for me. So, I always use
AddHandler mod_python .py

But I asked you whether you are right in setting up the directories 
/C:/temp .

May be they need to be surrounded by quotes "/C:/temp" in DocumentRoot 
and <Directory>
From jsliz at fluentenergy.com  Mon Mar 17 14:09:43 2008
From: jsliz at fluentenergy.com (Joseph Sliz)
Date: Mon Mar 17 14:07:53 2008
Subject: [mod_python] Troubles with mod_python and Apache for Win xp
Message-ID: <007f01c8885a$13f1ff80$3bd5fe80$@com>

I am new to mod_python and Apache.

 

My environment is:
 
Windows XP Prof sp2
Python 2.4
Apache 2.2.8
Mod_python 3.3.1
 
I've already added the following to the Apache httpd.conf
 
LoadFile "c:/python24/python24.dll"
LoadFile "c:/python24/msvcr71.dll"
LoadFile "c:/python24/msvcp71.dll"
LoadModule python_module modules/mod_python.so
 
 
I have left my DocumentRoot Directory as follows:

 

DocumentRoot "C:/Program Files/Apache Software Foundation/Apache2.2/htdocs"

 

<Directory "C:/Program Files/Apache Software Foundation/Apache2.2/htdocs">

    AddHandler python-program .py

    SetHandler mod_python 

    PythonHandler hello

    Options FollowSymLinks

    AllowOverride None

    Order deny,allow

    Deny from all

</Directory>

 

I have moved my "hello.py" file into this directory.  The hello.py script
looks like:

 

from mod_python import apache

 

def handler(req):

     req.content_type = "text/plain"

     req.send_http_header()

     req.write("Hello, Welcome to my World!")

     return apache.OK

 

 

When I enter the request  <http://localhost/hello.py>
http://localhost/hello.py into my browser, I get the following error:

 

Internal Server Error

The server encountered an internal error or misconfiguration and was unable
to complete your request.

Please contact the server administrator, admin@localhost and inform them of
the time the error occurred, and anything you might have done that may have
caused the error.

More information about this error may be available in the server error log.

 

When I check the server error log, I receive the following:

 

ImportError: No module named mod_python.apache

[Mon Mar 17 13:48:11 2008] [error] make_obcallback: Python path being used
"['C:\\\\Python24\\\\python24.zip', '.\\\\DLLs', '.\\\\lib',
'.\\\\lib\\\\plat-win', '.\\\\lib\\\\lib-tk', 'C:\\\\Program Files\\\\Apache
Software Foundation\\\\Apache2.2\\\\bin']".

[Mon Mar 17 13:48:11 2008] [error] get_interpreter: no interpreter callback
found.

[Mon Mar 17 13:48:11 2008] [error] [client 127.0.0.1] python_handler: Can't
get/create interpreter.

[Mon Mar 17 13:50:55 2008] [notice] Parent: Received restart signal --
Restarting the server.

[Mon Mar 17 13:50:55 2008] [notice] Child 3324: Exit event signaled. Child
process is ending.

[Mon Mar 17 13:50:55 2008] [notice] Apache/2.2.8 (Win32) configured --
resuming normal operations

[Mon Mar 17 13:50:55 2008] [notice] Server built: Jan 18 2008 00:37:19

[Mon Mar 17 13:50:55 2008] [notice] Parent: Created child process 3936

[Mon Mar 17 13:50:55 2008] [notice] mod_python: Creating 8 session mutexes
based on 0 max processes and 64 max threads.

[Mon Mar 17 13:50:55 2008] [notice] Child 3936: Child process is running

[Mon Mar 17 13:50:56 2008] [notice] Child 3324: Released the start mutex

[Mon Mar 17 13:50:56 2008] [notice] Child 3936: Acquired the start mutex.

[Mon Mar 17 13:50:56 2008] [notice] Child 3936: Starting 64 worker threads.

[Mon Mar 17 13:50:57 2008] [notice] Child 3324: All worker threads have
exited.

[Mon Mar 17 13:50:57 2008] [notice] Child 3324: Child process is exiting

[Mon Mar 17 13:50:57 2008] [notice] Child 3936: Starting thread to listen on
port 80.

[Mon Mar 17 13:51:15 2008] [error] make_obcallback: could not import
mod_python.apache.\n

'import site' failed; use -v for traceback

'import site' failed; use -v for traceback

ImportError: No module named mod_python.apache

[Mon Mar 17 13:51:15 2008] [error] make_obcallback: Python path being used
"['C:\\\\Python24\\\\python24.zip', '.\\\\DLLs', '.\\\\lib',
'.\\\\lib\\\\plat-win', '.\\\\lib\\\\lib-tk', 'C:\\\\Program Files\\\\Apache
Software Foundation\\\\Apache2.2\\\\bin']".

[Mon Mar 17 13:51:15 2008] [error] get_interpreter: no interpreter callback
found.

[Mon Mar 17 13:51:15 2008] [error] [client 127.0.0.1] python_handler: Can't
get/create interpreter.

 

Can anyone shed any light on what the problem might be????

Regards..Joe

 

 

 

 

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080317/1cbd992d/attachment.html
From admin at itech7.com  Mon Mar 17 21:54:22 2008
From: admin at itech7.com (Nilesh Govindrajan)
Date: Mon Mar 17 21:54:38 2008
Subject: [mod_python] mod_python tutorial issues
In-Reply-To: <007e01c88858$78484180$68d8c480$@com>
References: <004801c8883a$ee530cc0$caf92640$@com> <47DE82E6.9090405@itech7.com>
	<005301c8883f$d4823780$7d86a680$@com> <47DE87E3.2080303@itech7.com>
	<005401c88841$91267e90$b3737bb0$@com> <47DE8B05.1010800@itech7.com>
	<005501c88844$42b85730$c8290590$@com> <47DE907A.6020207@itech7.com>
	<007e01c88858$78484180$68d8c480$@com>
Message-ID: <47DF20CE.5000600@itech7.com>

Joseph, I am sending a CC of this mail to Apache Mailing list. I will 
tell you if any replies are received.

Apache Mailing List: Please solve Joseph's problem with Apache, 
mod_python on windows xp sp2. please read all the messages in here (quotes).

Joseph Sliz wrote:
> Sorry for the delay in responding....had a meeting.
>
> I've tried setting up the directory with quotes and no-quotes.  I changed
> the DocumentRoot Directory back to what it was originally:
>
> <Directory "C:/Program Files/Apache Software Foundation/Apache2.2/htdocs">
>
> I've moved my hello.py module into that folder and now I receive a "500
> Internal Server Error" when I try to access http://localhost/hello.py.
>
> The error report is as follows:
>
> ImportError: No module named mod_python.apache
> [Mon Mar 17 13:48:11 2008] [error] make_obcallback: Python path being used
> "['C:\\\\Python24\\\\python24.zip', '.\\\\DLLs', '.\\\\lib',
> '.\\\\lib\\\\plat-win', '.\\\\lib\\\\lib-tk', 'C:\\\\Program Files\\\\Apache
> Software Foundation\\\\Apache2.2\\\\bin']".
> [Mon Mar 17 13:48:11 2008] [error] get_interpreter: no interpreter callback
> found.
> [Mon Mar 17 13:48:11 2008] [error] [client 127.0.0.1] python_handler: Can't
> get/create interpreter.
> [Mon Mar 17 13:50:55 2008] [notice] Parent: Received restart signal --
> Restarting the server.
> [Mon Mar 17 13:50:55 2008] [notice] Child 3324: Exit event signaled. Child
> process is ending.
> [Mon Mar 17 13:50:55 2008] [notice] Apache/2.2.8 (Win32) configured --
> resuming normal operations
> [Mon Mar 17 13:50:55 2008] [notice] Server built: Jan 18 2008 00:37:19
> [Mon Mar 17 13:50:55 2008] [notice] Parent: Created child process 3936
> [Mon Mar 17 13:50:55 2008] [notice] mod_python: Creating 8 session mutexes
> based on 0 max processes and 64 max threads.
> [Mon Mar 17 13:50:55 2008] [notice] Child 3936: Child process is running
> [Mon Mar 17 13:50:56 2008] [notice] Child 3324: Released the start mutex
> [Mon Mar 17 13:50:56 2008] [notice] Child 3936: Acquired the start mutex.
> [Mon Mar 17 13:50:56 2008] [notice] Child 3936: Starting 64 worker threads.
> [Mon Mar 17 13:50:57 2008] [notice] Child 3324: All worker threads have
> exited.
> [Mon Mar 17 13:50:57 2008] [notice] Child 3324: Child process is exiting
> [Mon Mar 17 13:50:57 2008] [notice] Child 3936: Starting thread to listen on
> port 80.
> [Mon Mar 17 13:51:15 2008] [error] make_obcallback: could not import
> mod_python.apache.\n
> 'import site' failed; use -v for traceback
> 'import site' failed; use -v for traceback
> ImportError: No module named mod_python.apache
> [Mon Mar 17 13:51:15 2008] [error] make_obcallback: Python path being used
> "['C:\\\\Python24\\\\python24.zip', '.\\\\DLLs', '.\\\\lib',
> '.\\\\lib\\\\plat-win', '.\\\\lib\\\\lib-tk', 'C:\\\\Program Files\\\\Apache
> Software Foundation\\\\Apache2.2\\\\bin']".
> [Mon Mar 17 13:51:15 2008] [error] get_interpreter: no interpreter callback
> found.
> [Mon Mar 17 13:51:15 2008] [error] [client 127.0.0.1] python_handler: Can't
> get/create interpreter.
>
>
> Any ideas??
>
> Regards...Joe
>
> -----Original Message-----
> From: Nilesh Govindrajan [mailto:admin@itech7.com] 
> Sent: Monday, March 17, 2008 11:39 AM
> To: jsliz@fluentenergy.com
> Cc: mod_python@modpython.org
> Subject: Re: [mod_python] mod_python tutorial issues
>
> Joseph Sliz wrote:
>   
>> The tutorial examples I have are as follows:
>>
>> DocumentRoot /foo/bar
>> <Directory /foo/bar>
>> 	AddHandler python-program .py
>> 	PythonHandler hello
>> </Directory
>>
>>
>> AND
>>
>> Alias /python /var/www/python
>> <Directory /var/www/python>
>>         SetHandler python-program
>>         PythonHandler application
>> </Directory>
>>
>>
>> Not knowing much about mod_python and Apache, I can only go by the
>>     
> examples.
>   
>> Should I be setting the Directory up differently in the Apache httpd.conf
>> file???
>>
>>
>>
>> -----Original Message-----
>> From: Nilesh Govindrajan [mailto:admin@itech7.com] 
>> Sent: Monday, March 17, 2008 11:15 AM
>> To: jsliz@fluentenergy.com
>> Cc: mod_python@modpython.org
>> Subject: Re: [mod_python] mod_python tutorial issues
>>
>> Joseph Sliz wrote:
>>   
>>     
>>> Still didn't work.  I tried visiting http://localhost/hello.py/handler,
>>>     
>>>       
>> but
>>   
>>     
>>> still receive an "HTTP 404 Not Found" error.  What could I possibly be
>>> missing???
>>>
>>> Regards....Joe
>>>
>>> -----Original Message-----
>>> From: Nilesh Govindrajan [mailto:admin@itech7.com] 
>>> Sent: Monday, March 17, 2008 11:02 AM
>>> To: jsliz@fluentenergy.com
>>> Cc: mod_python@modpython.org
>>> Subject: Re: [mod_python] mod_python tutorial issues
>>>
>>> Joseph Sliz wrote:
>>>   
>>>     
>>>       
>>>> Nilesh;
>>>>
>>>> I've changed the following code in the Apache httpd.conf file:
>>>>
>>>> DocumentRoot /C:/temp
>>>> <Directory /C:/temp>
>>>>     AddHandler mod_python .py
>>>>     SetHandler mod_python 
>>>>     PythonHandler hello
>>>> </Directory>
>>>>
>>>> But, I am still receiving an "HTTP 404 Not Found" error when I put the
>>>> request "http://localhost/hello.py" into my browser.  Should I be
>>>>         
> placing
>   
>>>> the above piece of code in a certain spot in the Apache httpd.conf
>>>>       
>>>>         
>> file???
>>   
>>     
>>>> Regards.....Joe
>>>>
>>>> -----Original Message-----
>>>> From: Nilesh Govindrajan [mailto:admin@itech7.com] 
>>>> Sent: Monday, March 17, 2008 10:41 AM
>>>> To: jsliz@fluentenergy.com
>>>> Cc: mod_python@modpython.org
>>>> Subject: Re: [mod_python] mod_python tutorial issues
>>>>
>>>> Joseph Sliz wrote:
>>>>   
>>>>     
>>>>       
>>>>         
>>>>> I am new to mod_python and Apache.
>>>>>
>>>>> My environment is:
>>>>>  
>>>>> Windows XP Prof sp2
>>>>> Python 2.4
>>>>> Apache 2.2.8
>>>>> Mod_python 3.3.1
>>>>>  
>>>>> I've already added the following to the Apache httpd.conf
>>>>>  
>>>>> LoadModule python_module modules/mod_python.so
>>>>>  
>>>>> I'm now trying to do a simple test, following a tutorial I found.  I've
>>>>>     
>>>>>       
>>>>>         
>>>>>           
>>>> also added the following to the Apache httpd.conf file to let Mod_python
>>>> know where to find my python module
>>>>   
>>>>     
>>>>       
>>>>         
>>>>>  
>>>>> DocumentRoot /C:/temp
>>>>> <Directory /C:/temp>
>>>>>     AddHandler python-program .py 
>>>>>     PythonHandler hello
>>>>> </Directory>
>>>>>  
>>>>>  
>>>>> I have added the following python script to my "C:/temp" directory.
>>>>>  
>>>>> from mod_python import apache
>>>>>  
>>>>> def handler(req):
>>>>>      req.content_type = "text/plain"
>>>>>      req.send_http_header()
>>>>>      req.write("Hello, Welcome to my World!")
>>>>>      return apache.OK
>>>>>  
>>>>>  
>>>>> When I put the request "http://localhost/hello.py" into my browser, I
>>>>>     
>>>>>       
>>>>>         
>>>>>           
>>>> receive an "HTTP 404 Not Found" error.  Can anyone please give me some
>>>> assistance as to what I might be doing wrong??
>>>>   
>>>>     
>>>>       
>>>>         
>>>>>  
>>>>> Reqards..Joe
>>>>>  
>>>>> / /
>>>>>
>>>>>
>>>>>           
> ------------------------------------------------------------------------
>   
>>>>> _______________________________________________
>>>>> Mod_python mailing list
>>>>> Mod_python@modpython.org
>>>>> http://mailman.modpython.org/mailman/listinfo/mod_python
>>>>>   
>>>>>     
>>>>>       
>>>>>         
>>>>>           
>>>> Try with
>>>>
>>>> AddHandler mod_python .py
>>>>
>>>> and
>>>>
>>>> SetHandler mod_python
>>>>
>>>> note: you must AddHandler first otherwise it won't work.
>>>>
>>>>   
>>>>     
>>>>       
>>>>         
>>> try visiting http://localhost/hello.py/handler
>>>
>>> if it works;
>>>
>>> then add this code in hello.py
>>>
>>> def index(req):
>>> return handler(req)
>>>
>>>   
>>>     
>>>       
>> Are you sure that the directory is set correctly ? /C: ???
>> I am on Linux so don't know much about Apache in Windows.
>>
>>   
>>     
> The python-program handler never works for me. So, I always use
> AddHandler mod_python .py
>
> But I asked you whether you are right in setting up the directories 
> /C:/temp .
>
> May be they need to be surrounded by quotes "/C:/temp" in DocumentRoot 
> and <Directory>
>
>   

From brianlong at cox.net  Mon Mar 17 23:36:46 2008
From: brianlong at cox.net (Brian)
Date: Mon Mar 17 23:36:50 2008
Subject: [mod_python] mod_python & Leopard
Message-ID: <20080317233646.G33ZM.40372.imail@fed1rmwml33>

Have read many posts on the internet and I can not get mod_python running on my Mac.

I am getting the following error ::

httpd: Syntax error on line 95 of /private/etc/apache2/httpd.conf: Can't locate API module structure `python_module' in file /usr/libexec/apache2/mod_python.so: dlsym(0x100204600, python_module): symbol not found


I am using MacOSX Leopard 10.5.2
Apache 2.2.6
Python 2.5

./src/Makefile

LDFLAGS= -Wl,-framework,Python  -u _PyMac_Error $(PYTHONFRAMEWORKDIR)/Versions/$(VERSION)/$(PYTHONFRAMEWORK) -arch ppc -arch ppc64 -arch i386 -arch x86_64 -isysroot /Developer/SDKs/MacOSX10.4u.sdk -g
OPT=
CFLAGS=$(OPT) $(INCLUDES) -Wc,"-arch ppc" -Wc,"-arch ppc64" -Wc,"-arch i386" -Wc,"-arch x86_64"
srcdir=.

SRCS=   mod_python.c _apachemodule.c requestobject.c tableobject.c util.c \
                serverobject.c connobject.c filterobject.c hlist.c \
                hlistobject.c finfoobject.c

all:    dso

psp_parser.c: psp_parser.l
        @rm -f psp_parser.c
        $(LEX) -R -opsp_parser.c --header-file=include/psp_flex.h psp_parser.l

dso:    mod_python.so
        @echo dso > .install

mod_python.so: $(SRCS)
        @echo
        @echo 'Compiling for DSO.'
        @echo
        $(APXS) $(INCLUDES) -c -Wc,"-arch x86_64" $(SRCS) $(LDFLAGS) $(LIBS)
        @rm -f mod_python.so
        @ln -s .libs/mod_python.so mod_python.so

RESULT OF file /usr/libexec/apache2/mod_python.so

/usr/libexec/apache2/mod_python.so: Mach-O universal binary with 3 architectures
/usr/libexec/apache2/mod_python.so (for architecture i386):	Mach-O bundle i386
/usr/libexec/apache2/mod_python.so (for architecture ppc):	Mach-O bundle ppc
/usr/libexec/apache2/mod_python.so (for architecture x86_64):	Mach-O 64-bit bundle x86_64

When I do a 'Get Info' on /usr/src/httpd, the kind is listed as 'Universal'

Thanx for any help
B



From graham.dumpleton at gmail.com  Mon Mar 17 23:48:30 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Mon Mar 17 23:48:37 2008
Subject: [mod_python] mod_python & Leopard
In-Reply-To: <20080317233646.G33ZM.40372.imail@fed1rmwml33>
References: <20080317233646.G33ZM.40372.imail@fed1rmwml33>
Message-ID: <88e286470803172048x2e27c91eg31c483c9de48ffcd@mail.gmail.com>

Try mod_python from subversion source repository. See:

 http://www.modpython.org/pipermail/mod_python/2008-March/024954.html

Graham

On 18/03/2008, Brian <brianlong@cox.net> wrote:
> Have read many posts on the internet and I can not get mod_python running on my Mac.
>
>  I am getting the following error ::
>
>  httpd: Syntax error on line 95 of /private/etc/apache2/httpd.conf: Can't locate API module structure `python_module' in file /usr/libexec/apache2/mod_python.so: dlsym(0x100204600, python_module): symbol not found
>
>
>  I am using MacOSX Leopard 10.5.2
>  Apache 2.2.6
>  Python 2.5
>
>  ./src/Makefile
>
>  LDFLAGS= -Wl,-framework,Python  -u _PyMac_Error $(PYTHONFRAMEWORKDIR)/Versions/$(VERSION)/$(PYTHONFRAMEWORK) -arch ppc -arch ppc64 -arch i386 -arch x86_64 -isysroot /Developer/SDKs/MacOSX10.4u.sdk -g
>  OPT=
>  CFLAGS=$(OPT) $(INCLUDES) -Wc,"-arch ppc" -Wc,"-arch ppc64" -Wc,"-arch i386" -Wc,"-arch x86_64"
>  srcdir=.
>
>  SRCS=   mod_python.c _apachemodule.c requestobject.c tableobject.c util.c \
>                 serverobject.c connobject.c filterobject.c hlist.c \
>                 hlistobject.c finfoobject.c
>
>  all:    dso
>
>  psp_parser.c: psp_parser.l
>         @rm -f psp_parser.c
>         $(LEX) -R -opsp_parser.c --header-file=include/psp_flex.h psp_parser.l
>
>  dso:    mod_python.so
>         @echo dso > .install
>
>  mod_python.so: $(SRCS)
>         @echo
>         @echo 'Compiling for DSO.'
>         @echo
>         $(APXS) $(INCLUDES) -c -Wc,"-arch x86_64" $(SRCS) $(LDFLAGS) $(LIBS)
>         @rm -f mod_python.so
>         @ln -s .libs/mod_python.so mod_python.so
>
>  RESULT OF file /usr/libexec/apache2/mod_python.so
>
>  /usr/libexec/apache2/mod_python.so: Mach-O universal binary with 3 architectures
>  /usr/libexec/apache2/mod_python.so (for architecture i386):     Mach-O bundle i386
>  /usr/libexec/apache2/mod_python.so (for architecture ppc):      Mach-O bundle ppc
>  /usr/libexec/apache2/mod_python.so (for architecture x86_64):   Mach-O 64-bit bundle x86_64
>
>  When I do a 'Get Info' on /usr/src/httpd, the kind is listed as 'Universal'
>
>  Thanx for any help
>  B
>
>
>
>  _______________________________________________
>  Mod_python mailing list
>  Mod_python@modpython.org
>  http://mailman.modpython.org/mailman/listinfo/mod_python
>
From graham.dumpleton at gmail.com  Tue Mar 18 01:09:28 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Tue Mar 18 01:09:34 2008
Subject: [mod_python] mod_python & Leopard
In-Reply-To: <20080318005035.ZG93W.41050.imail@fed1rmwml33>
References: <88e286470803172048x2e27c91eg31c483c9de48ffcd@mail.gmail.com>
	<20080318005035.ZG93W.41050.imail@fed1rmwml33>
Message-ID: <88e286470803172209o1d575122nbbe137311b637c02@mail.gmail.com>

Please use reply-all and keep discussion on the list.

On 18/03/2008, Brian <brianlong@cox.net> wrote:
> Graham ::
>
>  I must be doing something stupid here... I run ./configure --with-apxs=/usr/sbin/apxs --with-python-src, below is the result.  However, when I run make, nothing happens.

You shouldn't use --with-python-src. What are you trying to achieve?
If you want to point it at a particular version of Python use the
--with-python option and point it at the 'python' executable location.
If using standard Python installation you don't need to specify it,
but it needs to be first in your PATH. Anyway, using --with-python-src
still should not affect things.

Other than that, please show all output generated when you run 'make',
even if you think it doesn't actually do anything.

Also, please don't use MacPorts Python 2.5. Use the OS supplied
Python. If need be use --with-python=/usr/bin/python as option to
configure. MacPorts Python often causes conflicts and causes things to
not work properly where Python 2.5 is installed when OS already
supplies that version.

Graham

>  sh-3.2# ./configure --with-apxs=/usr/sbin/apxs --with-python-src
>  checking for gcc... gcc
>  checking for C compiler default output file name... a.out
>  checking whether the C compiler works... yes
>  checking whether we are cross compiling... no
>  checking for suffix of executables...
>  checking for suffix of object files... o
>  checking whether we are using the GNU C compiler... yes
>  checking whether gcc accepts -g... yes
>  checking for gcc option to accept ANSI C... none needed
>  checking for ar... ar
>  checking for a BSD-compatible install... /usr/bin/install -c
>  checking whether make sets $(MAKE)... yes
>  checking for main in -lm... yes
>  checking for an ANSI C-conforming const... yes
>  checking your blood pressure... a bit high, but we can proceed
>  configure: checking whether apxs is available...
>  checking Apache version... 2.2.6
>  checking for Apache libexec directory... /usr/libexec/apache2
>  checking for Apache include directory... -I/usr/include/apache2
>  checking for --with-python... no
>  checking for python... /Library/Frameworks/Python.framework/Versions/Current/bin/python
>  checking Python version... 2.5
>  checking for --with-python-src... yes
>  checking for --with-mutex-dir... no
>  Using MUTEX_DIR /tmp
>  checking for --with-max-locks... no
>  Using 8 MAX_LOCKS.
>  checking for --with-flex... no
>  checking for flex... /usr/bin/flex
>  found /usr/bin/flex, we'll use this. Use --with-flex to specify another.
>  checking flex version... 2.5.33. Good
>  configure: creating ./config.status
>  config.status: creating Makefile
>  config.status: creating src/Makefile
>  config.status: creating Doc/Makefile
>  config.status: creating src/include/mod_python.h
>  config.status: creating test/Makefile
>  config.status: creating test/testconf.py
>  config.status: creating dist/setup.py
>  config.status: creating dist/Makefile
>
>
>  B
>
>
>
>
>  ---- Graham Dumpleton <graham.dumpleton@gmail.com> wrote:
>  > Try mod_python from subversion source repository. See:
>  >
>  >  http://www.modpython.org/pipermail/mod_python/2008-March/024954.html
>  >
>  > Graham
>  >
>  > On 18/03/2008, Brian <brianlong@cox.net> wrote:
>  > > Have read many posts on the internet and I can not get mod_python running on my Mac.
>  > >
>  > >  I am getting the following error ::
>  > >
>  > >  httpd: Syntax error on line 95 of /private/etc/apache2/httpd.conf: Can't locate API module structure `python_module' in file /usr/libexec/apache2/mod_python.so: dlsym(0x100204600, python_module): symbol not found
>  > >
>  > >
>  > >  I am using MacOSX Leopard 10.5.2
>  > >  Apache 2.2.6
>  > >  Python 2.5
>  > >
>  > >  ./src/Makefile
>  > >
>  > >  LDFLAGS= -Wl,-framework,Python  -u _PyMac_Error $(PYTHONFRAMEWORKDIR)/Versions/$(VERSION)/$(PYTHONFRAMEWORK) -arch ppc -arch ppc64 -arch i386 -arch x86_64 -isysroot /Developer/SDKs/MacOSX10.4u.sdk -g
>  > >  OPT=
>  > >  CFLAGS=$(OPT) $(INCLUDES) -Wc,"-arch ppc" -Wc,"-arch ppc64" -Wc,"-arch i386" -Wc,"-arch x86_64"
>  > >  srcdir=.
>  > >
>  > >  SRCS=   mod_python.c _apachemodule.c requestobject.c tableobject.c util.c \
>  > >                 serverobject.c connobject.c filterobject.c hlist.c \
>  > >                 hlistobject.c finfoobject.c
>  > >
>  > >  all:    dso
>  > >
>  > >  psp_parser.c: psp_parser.l
>  > >         @rm -f psp_parser.c
>  > >         $(LEX) -R -opsp_parser.c --header-file=include/psp_flex.h psp_parser.l
>  > >
>  > >  dso:    mod_python.so
>  > >         @echo dso > .install
>  > >
>  > >  mod_python.so: $(SRCS)
>  > >         @echo
>  > >         @echo 'Compiling for DSO.'
>  > >         @echo
>  > >         $(APXS) $(INCLUDES) -c -Wc,"-arch x86_64" $(SRCS) $(LDFLAGS) $(LIBS)
>  > >         @rm -f mod_python.so
>  > >         @ln -s .libs/mod_python.so mod_python.so
>  > >
>  > >  RESULT OF file /usr/libexec/apache2/mod_python.so
>  > >
>  > >  /usr/libexec/apache2/mod_python.so: Mach-O universal binary with 3 architectures
>  > >  /usr/libexec/apache2/mod_python.so (for architecture i386):     Mach-O bundle i386
>  > >  /usr/libexec/apache2/mod_python.so (for architecture ppc):      Mach-O bundle ppc
>  > >  /usr/libexec/apache2/mod_python.so (for architecture x86_64):   Mach-O 64-bit bundle x86_64
>  > >
>  > >  When I do a 'Get Info' on /usr/src/httpd, the kind is listed as 'Universal'
>  > >
>  > >  Thanx for any help
>  > >  B
>  > >
>  > >
>  > >
>  > >  _______________________________________________
>  > >  Mod_python mailing list
>  > >  Mod_python@modpython.org
>  > >  http://mailman.modpython.org/mailman/listinfo/mod_python
>  > >
>
>
From graham.dumpleton at gmail.com  Tue Mar 18 01:15:55 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Tue Mar 18 01:16:01 2008
Subject: [mod_python] Troubles with mod_python and Apache for Win xp
In-Reply-To: <007f01c8885a$13f1ff80$3bd5fe80$@com>
References: <007f01c8885a$13f1ff80$3bd5fe80$@com>
Message-ID: <88e286470803172215n711bd880vc2a1a7cca94d3b84@mail.gmail.com>

On 18/03/2008, Joseph Sliz <jsliz@fluentenergy.com> wrote:
>
>
>
>
> I am new to mod_python and Apache.
>
>   My environment is:
>
> Windows XP Prof sp2
> Python 2.4
> Apache 2.2.8
> Mod_python 3.3.1
>
> I've already added the following to the Apache httpd.conf
>
> LoadFile "c:/python24/python24.dll"
> LoadFile "c:/python24/msvcr71.dll"
> LoadFile "c:/python24/msvcp71.dll"
> LoadModule python_module modules/mod_python.so
>
>
> I have left my DocumentRoot Directory as follows:
>
>
>
>
> DocumentRoot "C:/Program Files/Apache Software Foundation/Apache2.2/htdocs"
>
>
>
> <Directory "C:/Program Files/Apache Software Foundation/Apache2.2/htdocs">
>
>     AddHandler python-program .py
>
>     SetHandler mod_python

You shouldn't be specifying AddHandler and SetHandler at the same
time. So you can still serve static files, just define the AddHandler
directive.

>     PythonHandler hello
>
>     Options FollowSymLinks
>
>     AllowOverride None
>
>     Order deny,allow
>
>     Deny from all
>
> </Directory>
>
>
>
> I have moved my "hello.py" file into this directory.  The hello.py script
> looks like:
>
>
>
> from mod_python import apache
>
>
>
> def handler(req):
>
>      req.content_type = "text/plain"
>
>      req.send_http_header()
>
>      req.write("Hello, Welcome to my World!")
>
>      return apache.OK
>
>
>
>
>
> When I enter the request http://localhost/hello.py into my browser, I get
> the following error:
>
>
>
> Internal Server Error
>
> The server encountered an internal error or misconfiguration and was unable
> to complete your request.
>
> Please contact the server administrator, admin@localhost and inform them of
> the time the error occurred, and anything you might have done that may have
> caused the error.
>
> More information about this error may be available in the server error log.
>
>
>
> When I check the server error log, I receive the following:
>
>
>
> ImportError: No module named mod_python.apache
>
> [Mon Mar 17 13:48:11 2008] [error] make_obcallback: Python path being used
> "['C:\\\\Python24\\\\python24.zip', '.\\\\DLLs',
> '.\\\\lib', '.\\\\lib\\\\plat-win', '.\\\\lib\\\\lib-tk', 'C:\\\\Program
> Files\\\\Apache Software Foundation\\\\Apache2.2\\\\bin']".
>
> [Mon Mar 17 13:48:11 2008] [error] get_interpreter: no interpreter callback
> found.
>
> [Mon Mar 17 13:48:11 2008] [error] [client 127.0.0.1] python_handler: Can't
> get/create interpreter.
>
> [Mon Mar 17 13:50:55 2008] [notice] Parent: Received restart signal --
> Restarting the server.
>
> [Mon Mar 17 13:50:55 2008] [notice] Child 3324: Exit event signaled. Child
> process is ending.
>
> [Mon Mar 17 13:50:55 2008] [notice] Apache/2.2.8 (Win32) configured --
> resuming normal operations
>
> [Mon Mar 17 13:50:55 2008] [notice] Server built: Jan 18 2008 00:37:19
>
> [Mon Mar 17 13:50:55 2008] [notice] Parent: Created child process 3936
>
> [Mon Mar 17 13:50:55 2008] [notice] mod_python: Creating 8 session mutexes
> based on 0 max processes and 64 max threads.
>
> [Mon Mar 17 13:50:55 2008] [notice] Child 3936: Child process is running
>
> [Mon Mar 17 13:50:56 2008] [notice] Child 3324: Released the start mutex
>
> [Mon Mar 17 13:50:56 2008] [notice] Child 3936: Acquired the start mutex.
>
> [Mon Mar 17 13:50:56 2008] [notice] Child 3936: Starting 64 worker threads.
>
> [Mon Mar 17 13:50:57 2008] [notice] Child 3324: All worker threads have
> exited.
>
> [Mon Mar 17 13:50:57 2008] [notice] Child 3324: Child process is exiting
>
> [Mon Mar 17 13:50:57 2008] [notice] Child 3936: Starting thread to listen on
> port 80.
>
> [Mon Mar 17 13:51:15 2008] [error] make_obcallback: could not import
> mod_python.apache.\n
>
> 'import site' failed; use -v for traceback
>
> 'import site' failed; use -v for traceback
>
> ImportError: No module named mod_python.apache
>
> [Mon Mar 17 13:51:15 2008] [error] make_obcallback: Python path being used
> "['C:\\\\Python24\\\\python24.zip', '.\\\\DLLs',
> '.\\\\lib', '.\\\\lib\\\\plat-win', '.\\\\lib\\\\lib-tk', 'C:\\\\Program
> Files\\\\Apache Software Foundation\\\\Apache2.2\\\\bin']".
>
> [Mon Mar 17 13:51:15 2008] [error] get_interpreter: no interpreter callback
> found.
>
> [Mon Mar 17 13:51:15 2008] [error] [client 127.0.0.1] python_handler: Can't
> get/create interpreter.
>
>
>
> Can anyone shed any light on what the problem might be????

This is typically because Apache and Python were not installed as an
Administrator, or the Python installation or Apache installation, or
the mod_python installed parts are not accessible/readable by the user
that Apache runs as. There can also be a problem if you have multiple
versions of Python installed and Apache is finding the wrong version
for which mod_python was installed.

Often this problem is resolved by uninstalling Apache and Python and
reinstalling both as an Administrator.

Graham
From graham.dumpleton at gmail.com  Tue Mar 18 01:22:13 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Tue Mar 18 01:22:20 2008
Subject: [mod_python] mod_python & Leopard
In-Reply-To: <20080318011511.1YMVX.41225.imail@fed1rmwml33>
References: <88e286470803172048x2e27c91eg31c483c9de48ffcd@mail.gmail.com>
	<20080318011511.1YMVX.41225.imail@fed1rmwml33>
Message-ID: <88e286470803172222i4ac1d14flb9d2eb85b09870b3@mail.gmail.com>

Please use reply-all and keep discussion on mailing list. Do not reply
to just me.

On 18/03/2008, Brian <brianlong@cox.net> wrote:
> Graham ::
>
>  Went into ./src folder and ran make.... now get the following result ::

The instructions don't say to go into the 'src' directory. Why are you
doing that? The build and install should be done from the root
directory.

>  Compiling for DSO.
>
>  /usr/sbin/apxs -I/Users/brian/Downloads/mod_python_trunk/src/include -I/Library/Frameworks/Python.framework/Versions/2.5/include/python2.5 -DNDEBUG -Wc,'-arch ppc7400' -Wc,'-arch ppc64' -Wc,'-arch i386' -Wc,'-arch x86_64' -c mod_python.c _apachemodule.c requestobject.c tableobject.c util.c serverobject.c connobject.c filterobject.c hlist.c hlistobject.c finfoobject.c -arch ppc7400 -arch ppc64 -arch i386 -arch x86_64 -Wl,-F/Library/Frameworks -framework Python -u _PyMac_Error  -ldl
>  /usr/share/apr-1/build-1/libtool --silent --mode=compile gcc    -DDARWIN -DSIGPROCMASK_SETS_THREAD_MASK -no-cpp-precomp  -I/usr/include/apache2  -I/usr/include/apr-1   -I/usr/include/apr-1  -arch ppc7400 -arch ppc64 -arch i386 -arch x86_64 -I/Users/brian/Downloads/mod_python_trunk/src/include -I/Library/Frameworks/Python.framework/Versions/2.5/include/python2.5 -DNDEBUG  -c -o mod_python.lo mod_python.c && touch mod_python.slo
>  In file included from /Library/Frameworks/Python.framework/Versions/2.5/include/python2.5/Python.h:57,
>                  from /Users/brian/Downloads/mod_python_trunk/src/include/mod_python.h:80,
>                  from mod_python.c:28:
>  /Library/Frameworks/Python.framework/Versions/2.5/include/python2.5/pyport.h:730:2: error: #error "LONG_BIT definition appears wrong for platform (bad gcc/glibc config?)."
>  In file included from /Library/Frameworks/Python.framework/Versions/2.5/include/python2.5/Python.h:57,
>                  from /Users/brian/Downloads/mod_python_trunk/src/include/mod_python.h:80,
>                  from mod_python.c:28:
>  /Library/Frameworks/Python.framework/Versions/2.5/include/python2.5/pyport.h:730:2: error: #error "LONG_BIT definition appears wrong for platform (bad gcc/glibc config?)."
>  mod_python.c: In function 'python_init':
>  mod_python.c:826: warning: initialization from incompatible pointer type
>  mod_python.c: In function 'python_init':
>  mod_python.c:826: warning: initialization from incompatible pointer type
>  mod_python.c: In function 'python_init':
>  mod_python.c:826: warning: initialization from incompatible pointer type
>  mod_python.c: In function 'python_init':
>  mod_python.c:826: warning: initialization from incompatible pointer type
>  lipo: can't figure out the architecture type of: /var/folders/kR/kRbwQrcTHXWDKQTg-5pcGE+++TI/-Tmp-//cclvLoaY.out
>  apxs:Error: Command failed with rc=65536

Don't use MacPorts Python, use Python 2.5 that comes supplied with the
operating system. I said that in last email.

The MacPorts Python 2.5 appears to be broken when it comes to building
fully fat binaries for all architectures.

You may be able to get it to work by edit src/Makefile and
dist/setup.py and removing the arch flags for whatever architecture it
is that MacPorts doesn't work properly for. If you work out which
architecture it is then please tell me as one other person I have seen
with this problem didn't tell me.

BTW, make sure you have up to date MacPorts Python if you insist on
using it. This problem may occur where you have installed MacPorts
Python on Tiger and then upgraded to Leopard.

Graham

 .
>  make: *** [mod_python.so] Error 1
>
>
>
>  B
>
>
>
>
>  ---- Graham Dumpleton <graham.dumpleton@gmail.com> wrote:
>
> > Try mod_python from subversion source repository. See:
>  >
>  >  http://www.modpython.org/pipermail/mod_python/2008-March/024954.html
>  >
>  > Graham
>  >
>  > On 18/03/2008, Brian <brianlong@cox.net> wrote:
>  > > Have read many posts on the internet and I can not get mod_python running on my Mac.
>  > >
>  > >  I am getting the following error ::
>  > >
>  > >  httpd: Syntax error on line 95 of /private/etc/apache2/httpd.conf: Can't locate API module structure `python_module' in file /usr/libexec/apache2/mod_python.so: dlsym(0x100204600, python_module): symbol not found
>  > >
>  > >
>  > >  I am using MacOSX Leopard 10.5.2
>  > >  Apache 2.2.6
>  > >  Python 2.5
>  > >
>  > >  ./src/Makefile
>  > >
>  > >  LDFLAGS= -Wl,-framework,Python  -u _PyMac_Error $(PYTHONFRAMEWORKDIR)/Versions/$(VERSION)/$(PYTHONFRAMEWORK) -arch ppc -arch ppc64 -arch i386 -arch x86_64 -isysroot /Developer/SDKs/MacOSX10.4u.sdk -g
>  > >  OPT=
>  > >  CFLAGS=$(OPT) $(INCLUDES) -Wc,"-arch ppc" -Wc,"-arch ppc64" -Wc,"-arch i386" -Wc,"-arch x86_64"
>  > >  srcdir=.
>  > >
>  > >  SRCS=   mod_python.c _apachemodule.c requestobject.c tableobject.c util.c \
>  > >                 serverobject.c connobject.c filterobject.c hlist.c \
>  > >                 hlistobject.c finfoobject.c
>  > >
>  > >  all:    dso
>  > >
>  > >  psp_parser.c: psp_parser.l
>  > >         @rm -f psp_parser.c
>  > >         $(LEX) -R -opsp_parser.c --header-file=include/psp_flex.h psp_parser.l
>  > >
>  > >  dso:    mod_python.so
>  > >         @echo dso > .install
>  > >
>  > >  mod_python.so: $(SRCS)
>  > >         @echo
>  > >         @echo 'Compiling for DSO.'
>  > >         @echo
>  > >         $(APXS) $(INCLUDES) -c -Wc,"-arch x86_64" $(SRCS) $(LDFLAGS) $(LIBS)
>  > >         @rm -f mod_python.so
>  > >         @ln -s .libs/mod_python.so mod_python.so
>  > >
>  > >  RESULT OF file /usr/libexec/apache2/mod_python.so
>  > >
>  > >  /usr/libexec/apache2/mod_python.so: Mach-O universal binary with 3 architectures
>  > >  /usr/libexec/apache2/mod_python.so (for architecture i386):     Mach-O bundle i386
>  > >  /usr/libexec/apache2/mod_python.so (for architecture ppc):      Mach-O bundle ppc
>  > >  /usr/libexec/apache2/mod_python.so (for architecture x86_64):   Mach-O 64-bit bundle x86_64
>  > >
>  > >  When I do a 'Get Info' on /usr/src/httpd, the kind is listed as 'Universal'
>  > >
>  > >  Thanx for any help
>  > >  B
>  > >
>  > >
>  > >
>  > >  _______________________________________________
>  > >  Mod_python mailing list
>  > >  Mod_python@modpython.org
>  > >  http://mailman.modpython.org/mailman/listinfo/mod_python
>  > >
>
>
From brianlong at cox.net  Tue Mar 18 02:01:37 2008
From: brianlong at cox.net (Brian)
Date: Tue Mar 18 02:01:40 2008
Subject: [mod_python] mod_python & Leopard
In-Reply-To: <88e286470803172222i4ac1d14flb9d2eb85b09870b3@mail.gmail.com>
Message-ID: <20080318020137.6429O.41453.imail@fed1rmwml33>

Graham ::

I thought that I was using the Python that came with the OS, obviously from your comments I am not.  I re-ran configure

#./configure --with-python=/usr/bin/python   ....     then a make .....      below are the results ::

sh-3.2# ./configure --with-python=/usr/bin/python
checking for gcc... gcc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables... 
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ANSI C... none needed
checking for ar... ar
checking for a BSD-compatible install... /usr/bin/install -c
checking whether make sets $(MAKE)... yes
checking for main in -lm... yes
checking for an ANSI C-conforming const... yes
checking your blood pressure... a bit high, but we can proceed
configure: checking whether apxs is available...
checking for apxs2... no
checking for apxs... /usr/sbin/apxs
checking Apache version... 2.2.6
checking for Apache libexec directory... /usr/libexec/apache2
checking for Apache include directory... -I/usr/include/apache2
checking for --with-python... /usr/bin/python
checking Python version... 2.5
checking for --with-python-src... no
checking for --with-mutex-dir... no
Using MUTEX_DIR /tmp
checking for --with-max-locks... no
Using 8 MAX_LOCKS.
checking for --with-flex... no
checking for flex... /usr/bin/flex
found /usr/bin/flex, we'll use this. Use --with-flex to specify another.
checking flex version... 2.5.33. Good
configure: creating ./config.status
config.status: creating Makefile
config.status: creating src/Makefile
config.status: creating Doc/Makefile
config.status: creating src/include/mod_python.h
config.status: creating test/Makefile
config.status: creating test/testconf.py
config.status: creating dist/setup.py
config.status: creating dist/Makefile
sh-3.2# make

Please edit Makefile and set PYTHON_SRC to where Python sources are.

make: *** [src_set] Error 1


B



---- Graham Dumpleton <graham.dumpleton@gmail.com> wrote: 
> Please use reply-all and keep discussion on mailing list. Do not reply
> to just me.
> 
> On 18/03/2008, Brian <brianlong@cox.net> wrote:
> > Graham ::
> >
> >  Went into ./src folder and ran make.... now get the following result ::
> 
> The instructions don't say to go into the 'src' directory. Why are you
> doing that? The build and install should be done from the root
> directory.
> 
> >  Compiling for DSO.
> >
> >  /usr/sbin/apxs -I/Users/brian/Downloads/mod_python_trunk/src/include -I/Library/Frameworks/Python.framework/Versions/2.5/include/python2.5 -DNDEBUG -Wc,'-arch ppc7400' -Wc,'-arch ppc64' -Wc,'-arch i386' -Wc,'-arch x86_64' -c mod_python.c _apachemodule.c requestobject.c tableobject.c util.c serverobject.c connobject.c filterobject.c hlist.c hlistobject.c finfoobject.c -arch ppc7400 -arch ppc64 -arch i386 -arch x86_64 -Wl,-F/Library/Frameworks -framework Python -u _PyMac_Error  -ldl
> >  /usr/share/apr-1/build-1/libtool --silent --mode=compile gcc    -DDARWIN -DSIGPROCMASK_SETS_THREAD_MASK -no-cpp-precomp  -I/usr/include/apache2  -I/usr/include/apr-1   -I/usr/include/apr-1  -arch ppc7400 -arch ppc64 -arch i386 -arch x86_64 -I/Users/brian/Downloads/mod_python_trunk/src/include -I/Library/Frameworks/Python.framework/Versions/2.5/include/python2.5 -DNDEBUG  -c -o mod_python.lo mod_python.c && touch mod_python.slo
> >  In file included from /Library/Frameworks/Python.framework/Versions/2.5/include/python2.5/Python.h:57,
> >                  from /Users/brian/Downloads/mod_python_trunk/src/include/mod_python.h:80,
> >                  from mod_python.c:28:
> >  /Library/Frameworks/Python.framework/Versions/2.5/include/python2.5/pyport.h:730:2: error: #error "LONG_BIT definition appears wrong for platform (bad gcc/glibc config?)."
> >  In file included from /Library/Frameworks/Python.framework/Versions/2.5/include/python2.5/Python.h:57,
> >                  from /Users/brian/Downloads/mod_python_trunk/src/include/mod_python.h:80,
> >                  from mod_python.c:28:
> >  /Library/Frameworks/Python.framework/Versions/2.5/include/python2.5/pyport.h:730:2: error: #error "LONG_BIT definition appears wrong for platform (bad gcc/glibc config?)."
> >  mod_python.c: In function 'python_init':
> >  mod_python.c:826: warning: initialization from incompatible pointer type
> >  mod_python.c: In function 'python_init':
> >  mod_python.c:826: warning: initialization from incompatible pointer type
> >  mod_python.c: In function 'python_init':
> >  mod_python.c:826: warning: initialization from incompatible pointer type
> >  mod_python.c: In function 'python_init':
> >  mod_python.c:826: warning: initialization from incompatible pointer type
> >  lipo: can't figure out the architecture type of: /var/folders/kR/kRbwQrcTHXWDKQTg-5pcGE+++TI/-Tmp-//cclvLoaY.out
> >  apxs:Error: Command failed with rc=65536
> 
> Don't use MacPorts Python, use Python 2.5 that comes supplied with the
> operating system. I said that in last email.
> 
> The MacPorts Python 2.5 appears to be broken when it comes to building
> fully fat binaries for all architectures.
> 
> You may be able to get it to work by edit src/Makefile and
> dist/setup.py and removing the arch flags for whatever architecture it
> is that MacPorts doesn't work properly for. If you work out which
> architecture it is then please tell me as one other person I have seen
> with this problem didn't tell me.
> 
> BTW, make sure you have up to date MacPorts Python if you insist on
> using it. This problem may occur where you have installed MacPorts
> Python on Tiger and then upgraded to Leopard.
> 
> Graham
> 
>  .
> >  make: *** [mod_python.so] Error 1
> >
> >
> >
> >  B
> >
> >
> >
> >
> >  ---- Graham Dumpleton <graham.dumpleton@gmail.com> wrote:
> >
> > > Try mod_python from subversion source repository. See:
> >  >
> >  >  http://www.modpython.org/pipermail/mod_python/2008-March/024954.html
> >  >
> >  > Graham
> >  >
> >  > On 18/03/2008, Brian <brianlong@cox.net> wrote:
> >  > > Have read many posts on the internet and I can not get mod_python running on my Mac.
> >  > >
> >  > >  I am getting the following error ::
> >  > >
> >  > >  httpd: Syntax error on line 95 of /private/etc/apache2/httpd.conf: Can't locate API module structure `python_module' in file /usr/libexec/apache2/mod_python.so: dlsym(0x100204600, python_module): symbol not found
> >  > >
> >  > >
> >  > >  I am using MacOSX Leopard 10.5.2
> >  > >  Apache 2.2.6
> >  > >  Python 2.5
> >  > >
> >  > >  ./src/Makefile
> >  > >
> >  > >  LDFLAGS= -Wl,-framework,Python  -u _PyMac_Error $(PYTHONFRAMEWORKDIR)/Versions/$(VERSION)/$(PYTHONFRAMEWORK) -arch ppc -arch ppc64 -arch i386 -arch x86_64 -isysroot /Developer/SDKs/MacOSX10.4u.sdk -g
> >  > >  OPT=
> >  > >  CFLAGS=$(OPT) $(INCLUDES) -Wc,"-arch ppc" -Wc,"-arch ppc64" -Wc,"-arch i386" -Wc,"-arch x86_64"
> >  > >  srcdir=.
> >  > >
> >  > >  SRCS=   mod_python.c _apachemodule.c requestobject.c tableobject.c util.c \
> >  > >                 serverobject.c connobject.c filterobject.c hlist.c \
> >  > >                 hlistobject.c finfoobject.c
> >  > >
> >  > >  all:    dso
> >  > >
> >  > >  psp_parser.c: psp_parser.l
> >  > >         @rm -f psp_parser.c
> >  > >         $(LEX) -R -opsp_parser.c --header-file=include/psp_flex.h psp_parser.l
> >  > >
> >  > >  dso:    mod_python.so
> >  > >         @echo dso > .install
> >  > >
> >  > >  mod_python.so: $(SRCS)
> >  > >         @echo
> >  > >         @echo 'Compiling for DSO.'
> >  > >         @echo
> >  > >         $(APXS) $(INCLUDES) -c -Wc,"-arch x86_64" $(SRCS) $(LDFLAGS) $(LIBS)
> >  > >         @rm -f mod_python.so
> >  > >         @ln -s .libs/mod_python.so mod_python.so
> >  > >
> >  > >  RESULT OF file /usr/libexec/apache2/mod_python.so
> >  > >
> >  > >  /usr/libexec/apache2/mod_python.so: Mach-O universal binary with 3 architectures
> >  > >  /usr/libexec/apache2/mod_python.so (for architecture i386):     Mach-O bundle i386
> >  > >  /usr/libexec/apache2/mod_python.so (for architecture ppc):      Mach-O bundle ppc
> >  > >  /usr/libexec/apache2/mod_python.so (for architecture x86_64):   Mach-O 64-bit bundle x86_64
> >  > >
> >  > >  When I do a 'Get Info' on /usr/src/httpd, the kind is listed as 'Universal'
> >  > >
> >  > >  Thanx for any help
> >  > >  B
> >  > >
> >  > >
> >  > >
> >  > >  _______________________________________________
> >  > >  Mod_python mailing list
> >  > >  Mod_python@modpython.org
> >  > >  http://mailman.modpython.org/mailman/listinfo/mod_python
> >  > >
> >
> >

From admin at itech7.com  Tue Mar 18 02:49:19 2008
From: admin at itech7.com (Nilesh Govindrajan)
Date: Tue Mar 18 02:49:47 2008
Subject: [mod_python] mod_python & Leopard
In-Reply-To: <20080318020137.6429O.41453.imail@fed1rmwml33>
References: <20080318020137.6429O.41453.imail@fed1rmwml33>
Message-ID: <47DF65EF.6060905@itech7.com>

Brian wrote:
> Graham ::
>
> I thought that I was using the Python that came with the OS, obviously from your comments I am not.  I re-ran configure
>
> #./configure --with-python=/usr/bin/python   ....     then a make .....      below are the results ::
>
> sh-3.2# ./configure --with-python=/usr/bin/python
> checking for gcc... gcc
> checking for C compiler default output file name... a.out
> checking whether the C compiler works... yes
> checking whether we are cross compiling... no
> checking for suffix of executables... 
> checking for suffix of object files... o
> checking whether we are using the GNU C compiler... yes
> checking whether gcc accepts -g... yes
> checking for gcc option to accept ANSI C... none needed
> checking for ar... ar
> checking for a BSD-compatible install... /usr/bin/install -c
> checking whether make sets $(MAKE)... yes
> checking for main in -lm... yes
> checking for an ANSI C-conforming const... yes
> checking your blood pressure... a bit high, but we can proceed
> configure: checking whether apxs is available...
> checking for apxs2... no
> checking for apxs... /usr/sbin/apxs
> checking Apache version... 2.2.6
> checking for Apache libexec directory... /usr/libexec/apache2
> checking for Apache include directory... -I/usr/include/apache2
> checking for --with-python... /usr/bin/python
> checking Python version... 2.5
> checking for --with-python-src... no
> checking for --with-mutex-dir... no
> Using MUTEX_DIR /tmp
> checking for --with-max-locks... no
> Using 8 MAX_LOCKS.
> checking for --with-flex... no
> checking for flex... /usr/bin/flex
> found /usr/bin/flex, we'll use this. Use --with-flex to specify another.
> checking flex version... 2.5.33. Good
> configure: creating ./config.status
> config.status: creating Makefile
> config.status: creating src/Makefile
> config.status: creating Doc/Makefile
> config.status: creating src/include/mod_python.h
> config.status: creating test/Makefile
> config.status: creating test/testconf.py
> config.status: creating dist/setup.py
> config.status: creating dist/Makefile
> sh-3.2# make
>
> Please edit Makefile and set PYTHON_SRC to where Python sources are.
>
> make: *** [src_set] Error 1
>
>
> B
>
>
>
> ---- Graham Dumpleton <graham.dumpleton@gmail.com> wrote: 
>   
>> Please use reply-all and keep discussion on mailing list. Do not reply
>> to just me.
>>
>> On 18/03/2008, Brian <brianlong@cox.net> wrote:
>>     
>>> Graham ::
>>>
>>>  Went into ./src folder and ran make.... now get the following result ::
>>>       
>> The instructions don't say to go into the 'src' directory. Why are you
>> doing that? The build and install should be done from the root
>> directory.
>>
>>     
>>>  Compiling for DSO.
>>>
>>>  /usr/sbin/apxs -I/Users/brian/Downloads/mod_python_trunk/src/include -I/Library/Frameworks/Python.framework/Versions/2.5/include/python2.5 -DNDEBUG -Wc,'-arch ppc7400' -Wc,'-arch ppc64' -Wc,'-arch i386' -Wc,'-arch x86_64' -c mod_python.c _apachemodule.c requestobject.c tableobject.c util.c serverobject.c connobject.c filterobject.c hlist.c hlistobject.c finfoobject.c -arch ppc7400 -arch ppc64 -arch i386 -arch x86_64 -Wl,-F/Library/Frameworks -framework Python -u _PyMac_Error  -ldl
>>>  /usr/share/apr-1/build-1/libtool --silent --mode=compile gcc    -DDARWIN -DSIGPROCMASK_SETS_THREAD_MASK -no-cpp-precomp  -I/usr/include/apache2  -I/usr/include/apr-1   -I/usr/include/apr-1  -arch ppc7400 -arch ppc64 -arch i386 -arch x86_64 -I/Users/brian/Downloads/mod_python_trunk/src/include -I/Library/Frameworks/Python.framework/Versions/2.5/include/python2.5 -DNDEBUG  -c -o mod_python.lo mod_python.c && touch mod_python.slo
>>>  In file included from /Library/Frameworks/Python.framework/Versions/2.5/include/python2.5/Python.h:57,
>>>                  from /Users/brian/Downloads/mod_python_trunk/src/include/mod_python.h:80,
>>>                  from mod_python.c:28:
>>>  /Library/Frameworks/Python.framework/Versions/2.5/include/python2.5/pyport.h:730:2: error: #error "LONG_BIT definition appears wrong for platform (bad gcc/glibc config?)."
>>>  In file included from /Library/Frameworks/Python.framework/Versions/2.5/include/python2.5/Python.h:57,
>>>                  from /Users/brian/Downloads/mod_python_trunk/src/include/mod_python.h:80,
>>>                  from mod_python.c:28:
>>>  /Library/Frameworks/Python.framework/Versions/2.5/include/python2.5/pyport.h:730:2: error: #error "LONG_BIT definition appears wrong for platform (bad gcc/glibc config?)."
>>>  mod_python.c: In function 'python_init':
>>>  mod_python.c:826: warning: initialization from incompatible pointer type
>>>  mod_python.c: In function 'python_init':
>>>  mod_python.c:826: warning: initialization from incompatible pointer type
>>>  mod_python.c: In function 'python_init':
>>>  mod_python.c:826: warning: initialization from incompatible pointer type
>>>  mod_python.c: In function 'python_init':
>>>  mod_python.c:826: warning: initialization from incompatible pointer type
>>>  lipo: can't figure out the architecture type of: /var/folders/kR/kRbwQrcTHXWDKQTg-5pcGE+++TI/-Tmp-//cclvLoaY.out
>>>  apxs:Error: Command failed with rc=65536
>>>       
>> Don't use MacPorts Python, use Python 2.5 that comes supplied with the
>> operating system. I said that in last email.
>>
>> The MacPorts Python 2.5 appears to be broken when it comes to building
>> fully fat binaries for all architectures.
>>
>> You may be able to get it to work by edit src/Makefile and
>> dist/setup.py and removing the arch flags for whatever architecture it
>> is that MacPorts doesn't work properly for. If you work out which
>> architecture it is then please tell me as one other person I have seen
>> with this problem didn't tell me.
>>
>> BTW, make sure you have up to date MacPorts Python if you insist on
>> using it. This problem may occur where you have installed MacPorts
>> Python on Tiger and then upgraded to Leopard.
>>
>> Graham
>>
>>  .
>>     
>>>  make: *** [mod_python.so] Error 1
>>>
>>>
>>>
>>>  B
>>>
>>>
>>>
>>>
>>>  ---- Graham Dumpleton <graham.dumpleton@gmail.com> wrote:
>>>
>>>       
>>>> Try mod_python from subversion source repository. See:
>>>>         
>>>  >
>>>  >  http://www.modpython.org/pipermail/mod_python/2008-March/024954.html
>>>  >
>>>  > Graham
>>>  >
>>>  > On 18/03/2008, Brian <brianlong@cox.net> wrote:
>>>  > > Have read many posts on the internet and I can not get mod_python running on my Mac.
>>>  > >
>>>  > >  I am getting the following error ::
>>>  > >
>>>  > >  httpd: Syntax error on line 95 of /private/etc/apache2/httpd.conf: Can't locate API module structure `python_module' in file /usr/libexec/apache2/mod_python.so: dlsym(0x100204600, python_module): symbol not found
>>>  > >
>>>  > >
>>>  > >  I am using MacOSX Leopard 10.5.2
>>>  > >  Apache 2.2.6
>>>  > >  Python 2.5
>>>  > >
>>>  > >  ./src/Makefile
>>>  > >
>>>  > >  LDFLAGS= -Wl,-framework,Python  -u _PyMac_Error $(PYTHONFRAMEWORKDIR)/Versions/$(VERSION)/$(PYTHONFRAMEWORK) -arch ppc -arch ppc64 -arch i386 -arch x86_64 -isysroot /Developer/SDKs/MacOSX10.4u.sdk -g
>>>  > >  OPT=
>>>  > >  CFLAGS=$(OPT) $(INCLUDES) -Wc,"-arch ppc" -Wc,"-arch ppc64" -Wc,"-arch i386" -Wc,"-arch x86_64"
>>>  > >  srcdir=.
>>>  > >
>>>  > >  SRCS=   mod_python.c _apachemodule.c requestobject.c tableobject.c util.c \
>>>  > >                 serverobject.c connobject.c filterobject.c hlist.c \
>>>  > >                 hlistobject.c finfoobject.c
>>>  > >
>>>  > >  all:    dso
>>>  > >
>>>  > >  psp_parser.c: psp_parser.l
>>>  > >         @rm -f psp_parser.c
>>>  > >         $(LEX) -R -opsp_parser.c --header-file=include/psp_flex.h psp_parser.l
>>>  > >
>>>  > >  dso:    mod_python.so
>>>  > >         @echo dso > .install
>>>  > >
>>>  > >  mod_python.so: $(SRCS)
>>>  > >         @echo
>>>  > >         @echo 'Compiling for DSO.'
>>>  > >         @echo
>>>  > >         $(APXS) $(INCLUDES) -c -Wc,"-arch x86_64" $(SRCS) $(LDFLAGS) $(LIBS)
>>>  > >         @rm -f mod_python.so
>>>  > >         @ln -s .libs/mod_python.so mod_python.so
>>>  > >
>>>  > >  RESULT OF file /usr/libexec/apache2/mod_python.so
>>>  > >
>>>  > >  /usr/libexec/apache2/mod_python.so: Mach-O universal binary with 3 architectures
>>>  > >  /usr/libexec/apache2/mod_python.so (for architecture i386):     Mach-O bundle i386
>>>  > >  /usr/libexec/apache2/mod_python.so (for architecture ppc):      Mach-O bundle ppc
>>>  > >  /usr/libexec/apache2/mod_python.so (for architecture x86_64):   Mach-O 64-bit bundle x86_64
>>>  > >
>>>  > >  When I do a 'Get Info' on /usr/src/httpd, the kind is listed as 'Universal'
>>>  > >
>>>  > >  Thanx for any help
>>>  > >  B
>>>  > >
>>>  > >
>>>  > >
>>>  > >  _______________________________________________
>>>  > >  Mod_python mailing list
>>>  > >  Mod_python@modpython.org
>>>  > >  http://mailman.modpython.org/mailman/listinfo/mod_python
>>>  > >
>>>
>>>
>>>       
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>   
Dude, do you have Python development libraries installed ?? If not, 
install them.
From graham.dumpleton at gmail.com  Tue Mar 18 06:14:33 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Tue Mar 18 06:14:38 2008
Subject: [mod_python] mod_python & Leopard
In-Reply-To: <20080318020137.6429O.41453.imail@fed1rmwml33>
References: <88e286470803172222i4ac1d14flb9d2eb85b09870b3@mail.gmail.com>
	<20080318020137.6429O.41453.imail@fed1rmwml33>
Message-ID: <88e286470803180314v357cac07o8200d1b11254a33@mail.gmail.com>

On 18/03/2008, Brian <brianlong@cox.net> wrote:
> Graham ::
>
>  I thought that I was using the Python that came with the OS, obviously from your comments I am not.  I re-ran configure

Your previous build lines showed:

  -I/Library/Frameworks/Python.framework

For standard OS Python that should be:

  -I/System/Library/Frameworks/Python.framework

It would only be the one in /Library/Frameworks if you had MacPorts
Python and it was using that.

> sh-3.2# make
>
>  Please edit Makefile and set PYTHON_SRC to where Python sources are.

It doesn't make any sense that you would get that error, as it is
produced from Doc subdirectory and a standard make shouldn't traverse
into that sub directory.

The only thing I can think is that you have some weird environment
variables set which is causing problems with configure or subsequent
make. I really can't see how changes I made to fix things for MacOS X
Leopard would cause that.

What is output when you run:

  make -n

Graham
From brianlong at cox.net  Tue Mar 18 09:47:08 2008
From: brianlong at cox.net (Brian)
Date: Tue Mar 18 09:47:12 2008
Subject: [mod_python] mod_python & Leopard
In-Reply-To: <88e286470803180314v357cac07o8200d1b11254a33@mail.gmail.com>
Message-ID: <20080318094708.RBZRI.42283.imail@fed1rmwml33>

Graham ::

Result of make -n

sh-3.2# make -n
if test -z ""; then \
		echo; \
		echo "Please edit Makefile and set PYTHON_SRC to where Python sources are."; \
		echo; \
		exit 1; \
	fi

How can I remove the python that is from MacPorts (/Library/....)and/or set the system to use the version of python that came with Leopard (/System/Library....)?

B





---- Graham Dumpleton <graham.dumpleton@gmail.com> wrote: 
> On 18/03/2008, Brian <brianlong@cox.net> wrote:
> > Graham ::
> >
> >  I thought that I was using the Python that came with the OS, obviously from your comments I am not.  I re-ran configure
> 
> Your previous build lines showed:
> 
>   -I/Library/Frameworks/Python.framework
> 
> For standard OS Python that should be:
> 
>   -I/System/Library/Frameworks/Python.framework
> 
> It would only be the one in /Library/Frameworks if you had MacPorts
> Python and it was using that.
> 
> > sh-3.2# make
> >
> >  Please edit Makefile and set PYTHON_SRC to where Python sources are.
> 
> It doesn't make any sense that you would get that error, as it is
> produced from Doc subdirectory and a standard make shouldn't traverse
> into that sub directory.
> 
> The only thing I can think is that you have some weird environment
> variables set which is causing problems with configure or subsequent
> make. I really can't see how changes I made to fix things for MacOS X
> Leopard would cause that.
> 
> What is output when you run:
> 
>   make -n
> 
> Graham

From list at joreybump.com  Tue Mar 18 10:38:23 2008
From: list at joreybump.com (Jorey Bump)
Date: Tue Mar 18 10:38:33 2008
Subject: [mod_python] mod_python & Leopard
In-Reply-To: <20080318094708.RBZRI.42283.imail@fed1rmwml33>
References: <20080318094708.RBZRI.42283.imail@fed1rmwml33>
Message-ID: <47DFD3DF.20806@joreybump.com>

Brian wrote, at 03/18/2008 09:47 AM:

> How can I remove the python that is from MacPorts (/Library/....)and/or set the system to use the version of python that came with Leopard (/System/Library....)?

If you have Apple's Xcode installed, compiling mod_python for Leopard to 
use with the system provided versions of httpd, python, etc. should be 
as simple as running these commands (we're checking the code out from 
subversion, which contains Graham's fixes for OS X):

   $ mkdir -p ~/src/mod_python
   $ cd ~/src/mod_python
   $ svn co 
http://svn.apache.org/repos/asf/quetzalcoatl/mod_python/trunk 
mod_python-trunk
   $ cd mod_python-trunk
   $ ./configure --with-apxs=/usr/sbin/apxs
   $ make
   $ sudo make install
   $ cd test/
   $ python test.py

I've confirmed that this works on a system with MacPorts installed, and 
there was no conflict. This approach used the default system software. 
Unless you've altered your $PATH, you should have no problems. Please 
try this before attempting to customize the build process, especially if 
you are content to use Apple-provided software for your web server needs.

From jsliz at fluentenergy.com  Tue Mar 18 12:21:05 2008
From: jsliz at fluentenergy.com (Joseph Sliz)
Date: Tue Mar 18 12:19:17 2008
Subject: [mod_python] HELP needed for Mod_python & Apache on a Win XP machine
Message-ID: <000001c88914$111aa810$334ff830$@com>

My environment is as follows:

 

Windows XP Prof 2002 sp2

> Python 2.4.3

> Apache 2.2.8

> mod_python 3.3.1

 

I have added the following lines to the Apache httpd.conf file:

 

LoadFile "C:/Python24/Python24.dll"

LoadModule python_module modules/mod_python.so

 

 

Servername is the following:

 

ServerName localhost:80

 

 

Under the "DocumentRoot" section of the Apache httpd.conf file, I changed
the following:

 

<Directory/>

      Options FollowSymLinks

      AllowOverride None

      Order deny,allow

      Deny from all

</Directory>

 

TO:

 

<Directory "C:/Program Files/Apache Software Foundation/Apache2.2/htdocs/">

      AddHandler mod_python .py

      PythonHandler hello

      PythonDebug On

 

      Options FollowSymLinks

      AllowOverride None

      Order deny,allow

      Deny from all

</Directory>

 

The rest of the Apache httpd.conf file is the same as was when Apache 2.2.8
was installed

 

I have added the following python module to the Apache2.2/htdocs directory:

 

>From mod_python import apache

 

Def handler(req):

      req.content_type = 'text/plain'

      req.write("Hello World!")

      return apache.OK

 

 

When I enter the request http://localhost/ into my browser(IE) I receive "It
Works" from the index.html file contained in the Apache2.2/htdocs
directory....This is good.

 

When I enter the request http://localhost/hello.py into my browser(IE) I
receive the following:

 

Internal Server Error

The server encountered an internal error or misconfiguration and was unable
to complete your request.

Please contact the server administrator, admin@localhost and inform them of
the time the error occurred, and anything you might have done that may have
caused the error.

More information about this error may be available in the server error log.

 

The message I get in the server error log is as follows:

 

ImportError: No module named mod_python.apache

[Tue Mar 18 12:11:04 2008] [error] make_obcallback: Python path being used
"['C:\\\\Python24\\\\python24.zip', '.\\\\DLLs', '.\\\\lib',
'.\\\\lib\\\\plat-win', '.\\\\lib\\\\lib-tk', 'C:\\\\Program Files\\\\Apache
Software Foundation\\\\Apache2.2\\\\bin']".

[Tue Mar 18 12:11:04 2008] [error] get_interpreter: no interpreter callback
found.

[Tue Mar 18 12:11:04 2008] [error] [client 127.0.0.1] python_handler: Can't
get/create interpreter

 

 

Can someone please help me with this issue.  I have no other version of
python installed on my pc.  I have installed and re-installed both Apache
and Mod_python to no success.   Can anyone please shed some light on what
the problem is???  It shouldn't be this hard!!!

 

 

 

  

 

 

Joseph Sliz, Jr.

Data Analyst/Programmer

jsliz@fluentenergy.com

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080318/cf98c4e6/attachment.html
From jsliz at fluentenergy.com  Tue Mar 18 12:44:33 2008
From: jsliz at fluentenergy.com (Joseph Sliz)
Date: Tue Mar 18 12:42:47 2008
Subject: [mod_python] HELP needed for Mod_python & Apache on a Win XP
	machine
In-Reply-To: <000001c88914$111aa810$334ff830$@com>
References: <000001c88914$111aa810$334ff830$@com>
Message-ID: <000b01c88917$59368ee0$0ba3aca0$@com>

UPDATE!!!

 

I have added a directory "test" to the following:

 

<Directory "C:/Program Files/Apache Software
Foundation/Apache2.2/htdocs/test">

 

Now when I put http://localhost/hello.py in my browser(IE) I receive the
code for the hello.py file in the browser and the following in the Apache
error log:

 

 

ImportError: No module named mod_python.apache

[Tue Mar 18 12:38:14 2008] [error] make_obcallback: Python path being used
"['C:\\\\Python24\\\\python24.zip', '.\\\\DLLs', '.\\\\lib',
'.\\\\lib\\\\plat-win', '.\\\\lib\\\\lib-tk', 'C:\\\\Program Files\\\\Apache
Software Foundation\\\\Apache2.2\\\\bin']".

[Tue Mar 18 12:38:14 2008] [error] get_interpreter: no interpreter callback
found.

[Tue Mar 18 12:38:14 2008] [error] [client 127.0.0.1] python_handler: Can't
get/create interpreter.

[Tue Mar 18 12:39:30 2008] [notice] Parent: Received restart signal --
Restarting the server.

[Tue Mar 18 12:39:30 2008] [notice] Child 176: Exit event signaled. Child
process is ending.

[Tue Mar 18 12:39:30 2008] [notice] Apache/2.2.8 (Win32) configured --
resuming normal operations

[Tue Mar 18 12:39:30 2008] [notice] Server built: Jan 18 2008 00:37:19

[Tue Mar 18 12:39:30 2008] [notice] Parent: Created child process 640

[Tue Mar 18 12:39:30 2008] [notice] mod_python: Creating 8 session mutexes
based on 0 max processes and 64 max threads.

[Tue Mar 18 12:39:30 2008] [notice] Child 640: Child process is running

[Tue Mar 18 12:39:31 2008] [notice] Child 640: Acquired the start mutex.

[Tue Mar 18 12:39:31 2008] [notice] Child 176: Released the start mutex

[Tue Mar 18 12:39:31 2008] [notice] Child 640: Starting 64 worker threads.

[Tue Mar 18 12:39:31 2008] [notice] Child 640: Starting thread to listen on
port 80.

[Tue Mar 18 12:39:32 2008] [notice] Child 176: All worker threads have
exited.

[Tue Mar 18 12:39:32 2008] [notice] Child 176: Child process is exiting

 

Regards..Joe

 

 

From: mod_python-bounces@modpython.org
[mailto:mod_python-bounces@modpython.org] On Behalf Of Joseph Sliz
Sent: Tuesday, March 18, 2008 12:21 PM
To: mod_python@modpython.org
Subject: [mod_python] HELP needed for Mod_python & Apache on a Win XP
machine

 

My environment is as follows:

 

Windows XP Prof 2002 sp2

> Python 2.4.3

> Apache 2.2.8

> mod_python 3.3.1

 

I have added the following lines to the Apache httpd.conf file:

 

LoadFile "C:/Python24/Python24.dll"

LoadModule python_module modules/mod_python.so

 

 

Servername is the following:

 

ServerName localhost:80

 

 

Under the "DocumentRoot" section of the Apache httpd.conf file, I changed
the following:

 

<Directory/>

      Options FollowSymLinks

      AllowOverride None

      Order deny,allow

      Deny from all

</Directory>

 

TO:

 

<Directory "C:/Program Files/Apache Software Foundation/Apache2.2/htdocs/">

      AddHandler mod_python .py

      PythonHandler hello

      PythonDebug On

 

      Options FollowSymLinks

      AllowOverride None

      Order deny,allow

      Deny from all

</Directory>

 

The rest of the Apache httpd.conf file is the same as was when Apache 2.2.8
was installed

 

I have added the following python module to the Apache2.2/htdocs directory:

 

>From mod_python import apache

 

Def handler(req):

      req.content_type = 'text/plain'

      req.write("Hello World!")

      return apache.OK

 

 

When I enter the request http://localhost/ into my browser(IE) I receive "It
Works" from the index.html file contained in the Apache2.2/htdocs
directory....This is good.

 

When I enter the request http://localhost/hello.py into my browser(IE) I
receive the following:

 

Internal Server Error

The server encountered an internal error or misconfiguration and was unable
to complete your request.

Please contact the server administrator, admin@localhost and inform them of
the time the error occurred, and anything you might have done that may have
caused the error.

More information about this error may be available in the server error log.

 

The message I get in the server error log is as follows:

 

ImportError: No module named mod_python.apache

[Tue Mar 18 12:11:04 2008] [error] make_obcallback: Python path being used
"['C:\\\\Python24\\\\python24.zip', '.\\\\DLLs', '.\\\\lib',
'.\\\\lib\\\\plat-win', '.\\\\lib\\\\lib-tk', 'C:\\\\Program Files\\\\Apache
Software Foundation\\\\Apache2.2\\\\bin']".

[Tue Mar 18 12:11:04 2008] [error] get_interpreter: no interpreter callback
found.

[Tue Mar 18 12:11:04 2008] [error] [client 127.0.0.1] python_handler: Can't
get/create interpreter

 

 

Can someone please help me with this issue.  I have no other version of
python installed on my pc.  I have installed and re-installed both Apache
and Mod_python to no success.   Can anyone please shed some light on what
the problem is???  It shouldn't be this hard!!!

 

 

 

  

 

 

Joseph Sliz, Jr.

Data Analyst/Programmer

jsliz@fluentenergy.com

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080318/eb1e7502/attachment-0001.html
From admin at itech7.com  Tue Mar 18 12:53:09 2008
From: admin at itech7.com (Nilesh Govindrajan)
Date: Tue Mar 18 12:53:35 2008
Subject: [mod_python] HELP needed for Mod_python & Apache on a Win XP
	machine
In-Reply-To: <000b01c88917$59368ee0$0ba3aca0$@com>
References: <000001c88914$111aa810$334ff830$@com>
	<000b01c88917$59368ee0$0ba3aca0$@com>
Message-ID: <47DFF375.9070601@itech7.com>

Joseph Sliz wrote:
>
> UPDATE!!!
>
> I have added a directory ?test? to the following:
>
> <Directory "C:/Program Files/Apache Software 
> Foundation/Apache2.2/htdocs/test">
>
> Now when I put http://localhost/hello.py in my browser(IE) I receive 
> the code for the hello.py file in the browser and the following in the 
> Apache error log:
>
> ImportError: No module named mod_python.apache
>
> [Tue Mar 18 12:38:14 2008] [error] make_obcallback: Python path being 
> used "['C:\\\\Python24\\\\python24.zip', '.\\\\DLLs', '.\\\\lib', 
> '.\\\\lib\\\\plat-win', '.\\\\lib\\\\lib-tk', 'C:\\\\Program 
> Files\\\\Apache Software Foundation\\\\Apache2.2\\\\bin']".
>
> [Tue Mar 18 12:38:14 2008] [error] get_interpreter: no interpreter 
> callback found.
>
> [Tue Mar 18 12:38:14 2008] [error] [client 127.0.0.1] python_handler: 
> Can't get/create interpreter.
>
> [Tue Mar 18 12:39:30 2008] [notice] Parent: Received restart signal -- 
> Restarting the server.
>
> [Tue Mar 18 12:39:30 2008] [notice] Child 176: Exit event signaled. 
> Child process is ending.
>
> [Tue Mar 18 12:39:30 2008] [notice] Apache/2.2.8 (Win32) configured -- 
> resuming normal operations
>
> [Tue Mar 18 12:39:30 2008] [notice] Server built: Jan 18 2008 00:37:19
>
> [Tue Mar 18 12:39:30 2008] [notice] Parent: Created child process 640
>
> [Tue Mar 18 12:39:30 2008] [notice] mod_python: Creating 8 session 
> mutexes based on 0 max processes and 64 max threads.
>
> [Tue Mar 18 12:39:30 2008] [notice] Child 640: Child process is running
>
> [Tue Mar 18 12:39:31 2008] [notice] Child 640: Acquired the start mutex.
>
> [Tue Mar 18 12:39:31 2008] [notice] Child 176: Released the start mutex
>
> [Tue Mar 18 12:39:31 2008] [notice] Child 640: Starting 64 worker threads.
>
> [Tue Mar 18 12:39:31 2008] [notice] Child 640: Starting thread to 
> listen on port 80.
>
> [Tue Mar 18 12:39:32 2008] [notice] Child 176: All worker threads have 
> exited.
>
> [Tue Mar 18 12:39:32 2008] [notice] Child 176: Child process is exiting
>
> Regards?.Joe
>
> *From:* mod_python-bounces@modpython.org 
> [mailto:mod_python-bounces@modpython.org] *On Behalf Of *Joseph Sliz
> *Sent:* Tuesday, March 18, 2008 12:21 PM
> *To:* mod_python@modpython.org
> *Subject:* [mod_python] HELP needed for Mod_python & Apache on a Win 
> XP machine
>
> My environment is as follows:
>
> Windows XP Prof 2002 sp2
>
> > Python 2.4.3
>
> > Apache 2.2.8
>
> > mod_python 3.3.1
>
> I have added the following lines to the Apache httpd.conf file:
>
> LoadFile "C:/Python24/Python24.dll"
>
> LoadModule python_module modules/mod_python.so
>
> Servername is the following:
>
> ServerName localhost:80
>
> Under the ?DocumentRoot? section of the Apache httpd.conf file, I 
> changed the following:
>
> <Directory/>
>
> Options FollowSymLinks
>
> AllowOverride None
>
> Order deny,allow
>
> Deny from all
>
> </Directory>
>
> TO:
>
> <Directory "C:/Program Files/Apache Software 
> Foundation/Apache2.2/htdocs/">
>
> AddHandler mod_python .py
>
> PythonHandler hello
>
> PythonDebug On
>
> Options FollowSymLinks
>
> AllowOverride None
>
> Order deny,allow
>
> Deny from all
>
> </Directory>
>
> The rest of the Apache httpd.conf file is the same as was when Apache 
> 2.2.8 was installed
>
> I have added the following python module to the Apache2.2/htdocs 
> directory:
>
> From mod_python import apache
>
> Def handler(req):
>
> req.content_type = ?text/plain?
>
> req.write(?Hello World!?)
>
> return apache.OK
>
> When I enter the request http://localhost/ into my browser(IE) I 
> receive ?It Works? from the index.html file contained in the 
> Apache2.2/htdocs directory??..This is good.
>
> When I enter the request http://localhost/hello.py into my browser(IE) 
> I receive the following:
>
> *Internal Server Error*
>
> The server encountered an internal error or misconfiguration and was 
> unable to complete your request.
>
> Please contact the server administrator, admin@localhost and inform 
> them of the time the error occurred, and anything you might have done 
> that may have caused the error.
>
> More information about this error may be available in the server error 
> log.
>
> The message I get in the server error log is as follows:
>
> ImportError: No module named mod_python.apache
>
> [Tue Mar 18 12:11:04 2008] [error] make_obcallback: Python path being 
> used "['C:\\\\Python24\\\\python24.zip', '.\\\\DLLs', '.\\\\lib', 
> '.\\\\lib\\\\plat-win', '.\\\\lib\\\\lib-tk', 'C:\\\\Program 
> Files\\\\Apache Software Foundation\\\\Apache2.2\\\\bin']".
>
> [Tue Mar 18 12:11:04 2008] [error] get_interpreter: no interpreter 
> callback found.
>
> [Tue Mar 18 12:11:04 2008] [error] [client 127.0.0.1] python_handler: 
> Can't get/create interpreter
>
> Can someone please help me with this issue. I have no other version of 
> python installed on my pc. I have installed and re-installed both 
> Apache and Mod_python to no success. Can anyone please shed some light 
> on what the problem is??? It shouldn?t be this hard!!!
>
> Joseph Sliz, Jr.
>
> Data Analyst/Programmer
>
> jsliz@fluentenergy.com <mailto:jsliz@fluentenergy.com>
>
> ------------------------------------------------------------------------
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>   
Remove two things from the python code -

1. from mod_python import apache
2. return apache.OK

try now. hope it works.
From list at joreybump.com  Tue Mar 18 14:15:10 2008
From: list at joreybump.com (Jorey Bump)
Date: Tue Mar 18 14:15:16 2008
Subject: [mod_python] HELP needed for Mod_python & Apache on a Win XP
	machine
In-Reply-To: <47DFF375.9070601@itech7.com>
References: <000001c88914$111aa810$334ff830$@com>	<000b01c88917$59368ee0$0ba3aca0$@com>
	<47DFF375.9070601@itech7.com>
Message-ID: <47E006AE.5060907@joreybump.com>

Nilesh Govindrajan wrote, at 03/18/2008 12:53 PM:
> Joseph Sliz wrote:
>> I have added the following python module to the Apache2.2/htdocs 
>> directory:
>>
>> From mod_python import apache
>>
>> Def handler(req):
>>
>> req.content_type = ?text/plain?
>>
>> req.write(?Hello World!?)
>>
>> return apache.OK
>>
> Remove two things from the python code -
> 
> 1. from mod_python import apache
> 2. return apache.OK
> 
> try now. hope it works.

He's not testing Publisher, he's testing a basic handler.

Joseph, I don't use Apache or mod_python on Windows, so I don't normally 
participate in such posts. Hopefully, someone who uses that platform can 
give you sound advice. In the meantime:

Did you compile mod_python from source?

Did you run the test suite included with the source?

As I said, I don't use Windows, and have never run the test suite on 
that platform. If it's compatible, you should definitely run it before 
configuring Apache, to turn up any errors. On Linux/UNIX, I do this, as 
the user that compiled mod_python:

  cd ~/path/to/mod_python_source/test/
  python test.py

Do the equivalent on Windows and see if the tests run successfully.


From jsliz at fluentenergy.com  Tue Mar 18 14:58:47 2008
From: jsliz at fluentenergy.com (Joseph Sliz)
Date: Tue Mar 18 14:57:00 2008
Subject: [mod_python] HELP needed for Mod_python & Apache on a Win
	XP	machine
In-Reply-To: <000b01c88917$59368ee0$0ba3aca0$@com>
References: <000001c88914$111aa810$334ff830$@com>
	<000b01c88917$59368ee0$0ba3aca0$@com>
Message-ID: <002601c8892a$196859c0$4c390d40$@com>

I'm dying here...Has anyone ever been able to successfully use mod_python,
Apache and Windows XP together???   I have yet to find anything that has
helped me with a solution to this dilemma.  I seem to have everything set up
correctly, installation wise and apache httpd.conf file wise.and still can't
get the basic handler test to work.  Any suggestions at all would be greatly
appreciated.

 

Regards..Joe

 

 

From: mod_python-bounces@modpython.org
[mailto:mod_python-bounces@modpython.org] On Behalf Of Joseph Sliz
Sent: Tuesday, March 18, 2008 12:45 PM
To: mod_python@modpython.org
Subject: RE: [mod_python] HELP needed for Mod_python & Apache on a Win XP
machine

 

UPDATE!!!

 

I have added a directory "test" to the following:

 

<Directory "C:/Program Files/Apache Software
Foundation/Apache2.2/htdocs/test">

 

Now when I put http://localhost/hello.py in my browser(IE) I receive the
code for the hello.py file in the browser and the following in the Apache
error log:

 

 

ImportError: No module named mod_python.apache

[Tue Mar 18 12:38:14 2008] [error] make_obcallback: Python path being used
"['C:\\\\Python24\\\\python24.zip', '.\\\\DLLs', '.\\\\lib',
'.\\\\lib\\\\plat-win', '.\\\\lib\\\\lib-tk', 'C:\\\\Program Files\\\\Apache
Software Foundation\\\\Apache2.2\\\\bin']".

[Tue Mar 18 12:38:14 2008] [error] get_interpreter: no interpreter callback
found.

[Tue Mar 18 12:38:14 2008] [error] [client 127.0.0.1] python_handler: Can't
get/create interpreter.

[Tue Mar 18 12:39:30 2008] [notice] Parent: Received restart signal --
Restarting the server.

[Tue Mar 18 12:39:30 2008] [notice] Child 176: Exit event signaled. Child
process is ending.

[Tue Mar 18 12:39:30 2008] [notice] Apache/2.2.8 (Win32) configured --
resuming normal operations

[Tue Mar 18 12:39:30 2008] [notice] Server built: Jan 18 2008 00:37:19

[Tue Mar 18 12:39:30 2008] [notice] Parent: Created child process 640

[Tue Mar 18 12:39:30 2008] [notice] mod_python: Creating 8 session mutexes
based on 0 max processes and 64 max threads.

[Tue Mar 18 12:39:30 2008] [notice] Child 640: Child process is running

[Tue Mar 18 12:39:31 2008] [notice] Child 640: Acquired the start mutex.

[Tue Mar 18 12:39:31 2008] [notice] Child 176: Released the start mutex

[Tue Mar 18 12:39:31 2008] [notice] Child 640: Starting 64 worker threads.

[Tue Mar 18 12:39:31 2008] [notice] Child 640: Starting thread to listen on
port 80.

[Tue Mar 18 12:39:32 2008] [notice] Child 176: All worker threads have
exited.

[Tue Mar 18 12:39:32 2008] [notice] Child 176: Child process is exiting

 

Regards..Joe

 

 

From: mod_python-bounces@modpython.org
[mailto:mod_python-bounces@modpython.org] On Behalf Of Joseph Sliz
Sent: Tuesday, March 18, 2008 12:21 PM
To: mod_python@modpython.org
Subject: [mod_python] HELP needed for Mod_python & Apache on a Win XP
machine

 

My environment is as follows:

 

Windows XP Prof 2002 sp2

> Python 2.4.3

> Apache 2.2.8

> mod_python 3.3.1

 

I have added the following lines to the Apache httpd.conf file:

 

LoadFile "C:/Python24/Python24.dll"

LoadModule python_module modules/mod_python.so

 

 

Servername is the following:

 

ServerName localhost:80

 

 

Under the "DocumentRoot" section of the Apache httpd.conf file, I changed
the following:

 

<Directory/>

      Options FollowSymLinks

      AllowOverride None

      Order deny,allow

      Deny from all

</Directory>

 

TO:

 

<Directory "C:/Program Files/Apache Software Foundation/Apache2.2/htdocs/">

      AddHandler mod_python .py

      PythonHandler hello

      PythonDebug On

 

      Options FollowSymLinks

      AllowOverride None

      Order deny,allow

      Deny from all

</Directory>

 

The rest of the Apache httpd.conf file is the same as was when Apache 2.2.8
was installed

 

I have added the following python module to the Apache2.2/htdocs directory:

 

>From mod_python import apache

 

Def handler(req):

      req.content_type = 'text/plain'

      req.write("Hello World!")

      return apache.OK

 

 

When I enter the request http://localhost/ into my browser(IE) I receive "It
Works" from the index.html file contained in the Apache2.2/htdocs
directory....This is good.

 

When I enter the request http://localhost/hello.py into my browser(IE) I
receive the following:

 

Internal Server Error

The server encountered an internal error or misconfiguration and was unable
to complete your request.

Please contact the server administrator, admin@localhost and inform them of
the time the error occurred, and anything you might have done that may have
caused the error.

More information about this error may be available in the server error log.

 

The message I get in the server error log is as follows:

 

ImportError: No module named mod_python.apache

[Tue Mar 18 12:11:04 2008] [error] make_obcallback: Python path being used
"['C:\\\\Python24\\\\python24.zip', '.\\\\DLLs', '.\\\\lib',
'.\\\\lib\\\\plat-win', '.\\\\lib\\\\lib-tk', 'C:\\\\Program Files\\\\Apache
Software Foundation\\\\Apache2.2\\\\bin']".

[Tue Mar 18 12:11:04 2008] [error] get_interpreter: no interpreter callback
found.

[Tue Mar 18 12:11:04 2008] [error] [client 127.0.0.1] python_handler: Can't
get/create interpreter

 

 

Can someone please help me with this issue.  I have no other version of
python installed on my pc.  I have installed and re-installed both Apache
and Mod_python to no success.   Can anyone please shed some light on what
the problem is???  It shouldn't be this hard!!!

 

 

 

  

 

 

Joseph Sliz, Jr.

Data Analyst/Programmer

jsliz@fluentenergy.com

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080318/f21c68bf/attachment-0001.html
From graham.dumpleton at gmail.com  Tue Mar 18 18:51:21 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Tue Mar 18 18:51:28 2008
Subject: [mod_python] Troubles with mod_python and Apache for Win xp
In-Reply-To: <001801c88902$4c70cd20$e5526760$@com>
References: <007f01c8885a$13f1ff80$3bd5fe80$@com>
	<88e286470803172215n711bd880vc2a1a7cca94d3b84@mail.gmail.com>
	<001801c88902$4c70cd20$e5526760$@com>
Message-ID: <88e286470803181551x1acdcde1pd3b214f44fd085c6@mail.gmail.com>

On 19/03/2008, Joseph Sliz <jsliz@fluentenergy.com> wrote:
> Graham;
>
>  Read your suggestions.  I have uninstalled Apache 2.2.8 and Mod_python 3.3.1
>  and I'm going to reinstall.  I will re-install using the following:
>
>  Apache 2.2.8-win32-x86-no ssl.msi
>
>  Mod_python-3.3.1.win32-py2.4-Apache2.2.exe
>
>  My environment is:
>
>  Windows XP Prof 2002 sp2
>  Python 2.4.3
>
>  I also have PyScripter 1.9.5 installed.  Could this be causing a conflict??
>  Please let me know.  If responding directly to you, instead of the list, is
>  a "no-no", I apologize

Definitely keep it on the list. I am not a Windows person so keeping
it on the list means those who are will see your progress and may also
be able to help out.

Your reply now sent back to list.

Graham

>  Regards,
>
>  Joe
>
>
>
>
>  -----Original Message-----
>  From: Graham Dumpleton [mailto:graham.dumpleton@gmail.com]
>  Sent: Tuesday, March 18, 2008 1:16 AM
>  To: jsliz@fluentenergy.com
>  Cc: mod_python@modpython.org
>  Subject: Re: [mod_python] Troubles with mod_python and Apache for Win xp
>
>  On 18/03/2008, Joseph Sliz <jsliz@fluentenergy.com> wrote:
>  >
>  >
>  >
>  >
>  > I am new to mod_python and Apache.
>  >
>  >   My environment is:
>  >
>  > Windows XP Prof sp2
>  > Python 2.4
>  > Apache 2.2.8
>  > Mod_python 3.3.1
>  >
>  > I've already added the following to the Apache httpd.conf
>  >
>  > LoadFile "c:/python24/python24.dll"
>  > LoadFile "c:/python24/msvcr71.dll"
>  > LoadFile "c:/python24/msvcp71.dll"
>  > LoadModule python_module modules/mod_python.so
>  >
>  >
>  > I have left my DocumentRoot Directory as follows:
>  >
>  >
>  >
>  >
>  > DocumentRoot "C:/Program Files/Apache Software
>  Foundation/Apache2.2/htdocs"
>  >
>  >
>  >
>  > <Directory "C:/Program Files/Apache Software Foundation/Apache2.2/htdocs">
>  >
>  >     AddHandler python-program .py
>  >
>  >     SetHandler mod_python
>
>  You shouldn't be specifying AddHandler and SetHandler at the same
>  time. So you can still serve static files, just define the AddHandler
>  directive.
>
>  >     PythonHandler hello
>  >
>  >     Options FollowSymLinks
>  >
>  >     AllowOverride None
>  >
>  >     Order deny,allow
>  >
>  >     Deny from all
>  >
>  > </Directory>
>  >
>  >
>  >
>  > I have moved my "hello.py" file into this directory.  The hello.py script
>  > looks like:
>  >
>  >
>  >
>  > from mod_python import apache
>  >
>  >
>  >
>  > def handler(req):
>  >
>  >      req.content_type = "text/plain"
>  >
>  >      req.send_http_header()
>  >
>  >      req.write("Hello, Welcome to my World!")
>  >
>  >      return apache.OK
>  >
>  >
>  >
>  >
>  >
>  > When I enter the request http://localhost/hello.py into my browser, I get
>  > the following error:
>  >
>  >
>  >
>  > Internal Server Error
>  >
>  > The server encountered an internal error or misconfiguration and was
>  unable
>  > to complete your request.
>  >
>  > Please contact the server administrator, admin@localhost and inform them
>  of
>  > the time the error occurred, and anything you might have done that may
>  have
>  > caused the error.
>  >
>  > More information about this error may be available in the server error
>  log.
>  >
>  >
>  >
>  > When I check the server error log, I receive the following:
>  >
>  >
>  >
>  > ImportError: No module named mod_python.apache
>  >
>  > [Mon Mar 17 13:48:11 2008] [error] make_obcallback: Python path being used
>  > "['C:\\\\Python24\\\\python24.zip', '.\\\\DLLs',
>  > '.\\\\lib', '.\\\\lib\\\\plat-win', '.\\\\lib\\\\lib-tk', 'C:\\\\Program
>  > Files\\\\Apache Software Foundation\\\\Apache2.2\\\\bin']".
>  >
>  > [Mon Mar 17 13:48:11 2008] [error] get_interpreter: no interpreter
>  callback
>  > found.
>  >
>  > [Mon Mar 17 13:48:11 2008] [error] [client 127.0.0.1] python_handler:
>  Can't
>  > get/create interpreter.
>  >
>  > [Mon Mar 17 13:50:55 2008] [notice] Parent: Received restart signal --
>  > Restarting the server.
>  >
>  > [Mon Mar 17 13:50:55 2008] [notice] Child 3324: Exit event signaled. Child
>  > process is ending.
>  >
>  > [Mon Mar 17 13:50:55 2008] [notice] Apache/2.2.8 (Win32) configured --
>  > resuming normal operations
>  >
>  > [Mon Mar 17 13:50:55 2008] [notice] Server built: Jan 18 2008 00:37:19
>  >
>  > [Mon Mar 17 13:50:55 2008] [notice] Parent: Created child process 3936
>  >
>  > [Mon Mar 17 13:50:55 2008] [notice] mod_python: Creating 8 session mutexes
>  > based on 0 max processes and 64 max threads.
>  >
>  > [Mon Mar 17 13:50:55 2008] [notice] Child 3936: Child process is running
>  >
>  > [Mon Mar 17 13:50:56 2008] [notice] Child 3324: Released the start mutex
>  >
>  > [Mon Mar 17 13:50:56 2008] [notice] Child 3936: Acquired the start mutex.
>  >
>  > [Mon Mar 17 13:50:56 2008] [notice] Child 3936: Starting 64 worker
>  threads.
>  >
>  > [Mon Mar 17 13:50:57 2008] [notice] Child 3324: All worker threads have
>  > exited.
>  >
>  > [Mon Mar 17 13:50:57 2008] [notice] Child 3324: Child process is exiting
>  >
>  > [Mon Mar 17 13:50:57 2008] [notice] Child 3936: Starting thread to listen
>  on
>  > port 80.
>  >
>  > [Mon Mar 17 13:51:15 2008] [error] make_obcallback: could not import
>  > mod_python.apache.\n
>  >
>  > 'import site' failed; use -v for traceback
>  >
>  > 'import site' failed; use -v for traceback
>  >
>  > ImportError: No module named mod_python.apache
>  >
>  > [Mon Mar 17 13:51:15 2008] [error] make_obcallback: Python path being used
>  > "['C:\\\\Python24\\\\python24.zip', '.\\\\DLLs',
>  > '.\\\\lib', '.\\\\lib\\\\plat-win', '.\\\\lib\\\\lib-tk', 'C:\\\\Program
>  > Files\\\\Apache Software Foundation\\\\Apache2.2\\\\bin']".
>  >
>  > [Mon Mar 17 13:51:15 2008] [error] get_interpreter: no interpreter
>  callback
>  > found.
>  >
>  > [Mon Mar 17 13:51:15 2008] [error] [client 127.0.0.1] python_handler:
>  Can't
>  > get/create interpreter.
>  >
>  >
>  >
>  > Can anyone shed any light on what the problem might be????
>
>  This is typically because Apache and Python were not installed as an
>  Administrator, or the Python installation or Apache installation, or
>  the mod_python installed parts are not accessible/readable by the user
>  that Apache runs as. There can also be a problem if you have multiple
>  versions of Python installed and Apache is finding the wrong version
>  for which mod_python was installed.
>
>  Often this problem is resolved by uninstalling Apache and Python and
>  reinstalling both as an Administrator.
>
>  Graham
>
>
From graham.dumpleton at gmail.com  Tue Mar 18 18:55:28 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Tue Mar 18 18:55:34 2008
Subject: [mod_python] mod_python & Leopard
In-Reply-To: <20080318094708.RBZRI.42283.imail@fed1rmwml33>
References: <88e286470803180314v357cac07o8200d1b11254a33@mail.gmail.com>
	<20080318094708.RBZRI.42283.imail@fed1rmwml33>
Message-ID: <88e286470803181555mba8d30eyc9214c15ce8f68a5@mail.gmail.com>

On 19/03/2008, Brian <brianlong@cox.net> wrote:
> Graham ::
>
>  Result of make -n
>
>  sh-3.2# make -n
>  if test -z ""; then \
>                 echo; \
>                 echo "Please edit Makefile and set PYTHON_SRC to where Python sources are."; \
>                 echo; \
>                 exit 1; \
>         fi

This could only be the case if you are in the Doc directory when you
run make. Alternatively, your source tree has gotten so screwed up
that the root level Makefile has somehow gotten replaced with that
from the Doc directory.

Does the Makefile in the top level directory contain the following target?

do_dso:
        @cd src && $(MAKE)
        @cd dist && $(MAKE) build
        @echo
        @echo 'Now su and make install'
        @echo '  (or, if you only want to perform a partial install,'
        @echo '   you can use make install_dso and make install_py_lib)'
        @echo

What does the 'all' rule in the makefile say?

I would suggest that you perhaps do a fresh checkout of code from
subversion and start again.

Graham

>  How can I remove the python that is from MacPorts (/Library/....)and/or set the system to use the version of python that came with Leopard (/System/Library....)?
>
>  B
>
>
>
>
>
>  ---- Graham Dumpleton <graham.dumpleton@gmail.com> wrote:
>
> > On 18/03/2008, Brian <brianlong@cox.net> wrote:
>  > > Graham ::
>  > >
>  > >  I thought that I was using the Python that came with the OS, obviously from your comments I am not.  I re-ran configure
>  >
>  > Your previous build lines showed:
>  >
>  >   -I/Library/Frameworks/Python.framework
>  >
>  > For standard OS Python that should be:
>  >
>  >   -I/System/Library/Frameworks/Python.framework
>  >
>  > It would only be the one in /Library/Frameworks if you had MacPorts
>  > Python and it was using that.
>  >
>  > > sh-3.2# make
>  > >
>  > >  Please edit Makefile and set PYTHON_SRC to where Python sources are.
>  >
>  > It doesn't make any sense that you would get that error, as it is
>  > produced from Doc subdirectory and a standard make shouldn't traverse
>  > into that sub directory.
>  >
>  > The only thing I can think is that you have some weird environment
>  > variables set which is causing problems with configure or subsequent
>  > make. I really can't see how changes I made to fix things for MacOS X
>  > Leopard would cause that.
>  >
>  > What is output when you run:
>  >
>  >   make -n
>  >
>  > Graham
>
>
From admin at itech7.com  Tue Mar 18 21:06:03 2008
From: admin at itech7.com (Nilesh Govindrajan)
Date: Tue Mar 18 21:06:16 2008
Subject: [mod_python] HELP needed for Mod_python & Apache on a Win XP
	machine
In-Reply-To: <002601c8892a$196859c0$4c390d40$@com>
References: <000001c88914$111aa810$334ff830$@com>	<000b01c88917$59368ee0$0ba3aca0$@com>
	<002601c8892a$196859c0$4c390d40$@com>
Message-ID: <47E066FB.1040909@itech7.com>

An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080319/ec99f8dd/attachment-0001.html
From syahreza.octadian at gmail.com  Tue Mar 18 21:33:17 2008
From: syahreza.octadian at gmail.com (syahreza octadian)
Date: Tue Mar 18 21:33:31 2008
Subject: [mod_python] HELP needed for Mod_python & Apache on a Win XP
	machine
In-Reply-To: <47E066FB.1040909@itech7.com>
References: <000001c88914$111aa810$334ff830$@com>	<000b01c88917$59368ee0$0ba3aca0$@com>	<002601c8892a$196859c0$4c390d40$@com>
	<47E066FB.1040909@itech7.com>
Message-ID: <47E06D5D.6000300@gmail.com>

  Joseph Sliz wrote:
"The message I get in the server error log is as follows: 

ImportError: No module named mod_python.apache

[Tue Mar 18 12:11:04 2008] [error] make_obcallback: Python path being 
used "['C:\\\\Python24\\\\python24.zip', '.\\\\DLLs', '.\\\\lib', 
'.\\\\lib\\\\plat-win', '.\\\\lib\\\\lib-tk', 'C:\\\\Program 
Files\\\\Apache Software Foundation\\\\Apache2.2\\\\bin']".

[Tue Mar 18 12:11:04 2008] [error] get_interpreter: no interpreter 
callback found.

[Tue Mar 18 12:11:04 2008] [error] [client 127.0.0.1] python_handler: 
Can't get/create interpreter
"



from the error it seem your python cannot find the library.
if you try to import with console if there some error??

if there is error you can use this before import mod_python

import sys

sys.path.append('your python library sample: 
"/usr/lib/python2.5/site-packages"')
import mod_python



From graham.dumpleton at gmail.com  Tue Mar 18 22:08:30 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Tue Mar 18 22:08:36 2008
Subject: [mod_python] HELP needed for Mod_python & Apache on a Win XP
	machine
In-Reply-To: <47E06D5D.6000300@gmail.com>
References: <000001c88914$111aa810$334ff830$@com>
	<000b01c88917$59368ee0$0ba3aca0$@com>
	<002601c8892a$196859c0$4c390d40$@com> <47E066FB.1040909@itech7.com>
	<47E06D5D.6000300@gmail.com>
Message-ID: <88e286470803181908u4d6f715fy9f112525f3d12fa1@mail.gmail.com>

On 19/03/2008, syahreza octadian <syahreza.octadian@gmail.com> wrote:
>   Joseph Sliz wrote:
>  "The message I get in the server error log is as follows:
>
>  ImportError: No module named mod_python.apache
>
>  [Tue Mar 18 12:11:04 2008] [error] make_obcallback: Python path being
>  used "['C:\\\\Python24\\\\python24.zip', '.\\\\DLLs', '.\\\\lib',
>  '.\\\\lib\\\\plat-win', '.\\\\lib\\\\lib-tk', 'C:\\\\Program
>  Files\\\\Apache Software Foundation\\\\Apache2.2\\\\bin']".
>
>  [Tue Mar 18 12:11:04 2008] [error] get_interpreter: no interpreter
>  callback found.
>
>  [Tue Mar 18 12:11:04 2008] [error] [client 127.0.0.1] python_handler:
>  Can't get/create interpreter
>  "
> from the error it seem your python cannot find the library.
>  if you try to import with console if there some error??
>
>  if there is error you can use this before import mod_python
>
>  import sys
>
>  sys.path.append('your python library sample:
>  "/usr/lib/python2.5/site-packages"')
>  import mod_python

Don't go adding site-packages manually, it should never be required to
be added explicitly. Using sys.path.append() on a site-packages
directory is also wrong anyway as it doesn't result in .pth files in
that directory working properly.

As has been covered before on this list, the problem revolves around
Python interpreter within mod_python module not being able to find the
Python installation properly. In particular it can't find and import
the site.py file which is what does all the path setup included adding
site-packages. Because it doesn't do that, it will not find mod_python
installation even if installed in site-packages properly.

As mentioned before, that Apache running as a service means it runs as
a different user, it is important that that user have correct access
permissions for Python installation and mod_python files, if not, that
is one reason it can fail.

The next is not having installed Python, Apache and mod_python as
Administrator user. Even if one uninstalls all three and reinstalls,
even this may not fix things up if the directories weren't removed
entirely and so files with bad permissions still exist.

Also, having installed multiple versions of Python at various points
can also screw things up if they haven't been removed properly. This
is because bad registry entries can be left behind. Thus if
reinstalling hasn't helped, you should uninstall again and then use
regedit to search out for Python registry entries in both user and
machine scopes and possibly remove them and then install again as
Administrator.

Finally, if someone has installed a third party package which contains
its own version of Python and that appears in PATH before the standard
one, then Python interpreter within mod_python can find it mistakenly.
In some cases it looks like these custom Python interpreter instances
structure things a bit differently and so why it cant find the site.py
file to load.

So, if you uninstalled everything and reinstalled as Administrator
user and it still didn't work, then do the following:

0. Try rebooting your system in case something is cached.

1. Uninstall Python and mod_python again.

2. If C:\Python24 still exists then remove it. Make sure mod_python
module has been removed from Apache directory.

3. Use a registry editor (run as Administrator) to search for Python
entries. For example of what to look for see:

  http://www.modpython.org/pipermail/mod_python/2006-September/021980.html

These may be in user or machine contexts.

If they look like they are for Python you have installed previously,
remove them.

4. Search your whole system for PYTHON*.DLL. If such a thing exists in
some third party package, ensure that that directory for its
applications is not in your user PATH or that of user that Apache runs
as.

5. Reinstall Python and mod_python as Administrator user. Review what
file and directory permissions things are installed as and that they
aren't restrictive such that the user that Apache service runs as will
not be able to access them. Also see what registry entries Python has
installed and ensure they are in machine context and not a specific
user context.

So, please work through that and give clear feedback at each point of
what you found. It is really hard when someone just keeps saying it
doesn't work without giving positive feedback that they have in fact
done correctly what they may have been asked to do and indicate what
they found. Random suggestions from others who have not seen the
particular problem before, although well meaning, just help to confuse
things, so can we just try the above first.

Also be aware I am not a Windows person and never use it. All the
above is based purely on information previously appearing on the
mailing list and which has worked at one time or another for people.
Thus, I may be saying stuff which is crap. This is where it would help
if Windows users could step in at appropriate time and explain
properly how one does these things and where registry entries should
exist and what they look like etc.

Finally, be patient. This particular Windows issue is always a pain to
work out and can take time. Don't expect an instant solution, often
the stuff just starts working for people and they never really can say
what the original problem was. Even if they do know, they usually
never say what it was and so we never work out better debugging
procedures.

Graham
From brianlong at cox.net  Tue Mar 18 23:27:04 2008
From: brianlong at cox.net (Brian)
Date: Tue Mar 18 23:27:08 2008
Subject: [mod_python] mod_python & Leopard
In-Reply-To: <47DFD3DF.20806@joreybump.com>
Message-ID: <20080318232704.S7VXH.50516.imail@fed1rmwml33>

Jorey ::

That did it!  With one modification.  

I found on another site that MacPorts creates a .bash_profile in your home directory (/Users/name of home directory).  In there is the path to their version.  I opened that file and edited the path to /System/Library/Frameworks/Python.framework/Versions/Current/bin, re-ran configure, make, make install and it worked!

Thanks for the help!  Of course Graham too!

B




---- Jorey Bump <list@joreybump.com> wrote: 
> Brian wrote, at 03/18/2008 09:47 AM:
> 
> > How can I remove the python that is from MacPorts (/Library/....)and/or set the system to use the version of python that came with Leopard (/System/Library....)?
> 
> If you have Apple's Xcode installed, compiling mod_python for Leopard to 
> use with the system provided versions of httpd, python, etc. should be 
> as simple as running these commands (we're checking the code out from 
> subversion, which contains Graham's fixes for OS X):
> 
>    $ mkdir -p ~/src/mod_python
>    $ cd ~/src/mod_python
>    $ svn co 
> http://svn.apache.org/repos/asf/quetzalcoatl/mod_python/trunk 
> mod_python-trunk
>    $ cd mod_python-trunk
>    $ ./configure --with-apxs=/usr/sbin/apxs
>    $ make
>    $ sudo make install
>    $ cd test/
>    $ python test.py
> 
> I've confirmed that this works on a system with MacPorts installed, and 
> there was no conflict. This approach used the default system software. 
> Unless you've altered your $PATH, you should have no problems. Please 
> try this before attempting to customize the build process, especially if 
> you are content to use Apple-provided software for your web server needs.
> 

From list at joreybump.com  Wed Mar 19 00:12:52 2008
From: list at joreybump.com (Jorey Bump)
Date: Wed Mar 19 00:13:04 2008
Subject: [mod_python] mod_python & Leopard
In-Reply-To: <20080318232704.S7VXH.50516.imail@fed1rmwml33>
References: <20080318232704.S7VXH.50516.imail@fed1rmwml33>
Message-ID: <47E092C4.2020909@joreybump.com>

Brian wrote, at 03/18/2008 11:27 PM:
> Jorey ::
> 
> That did it!  With one modification.
> 
> I found on another site that MacPorts creates a .bash_profile in your
> home directory (/Users/name of home directory).  In there is the path
> to their version.  I opened that file and edited the path to
> /System/Library/Frameworks/Python.framework/Versions/Current/bin,
> re-ran configure, make, make install and it worked!

I also have MacPorts first in my path 
(/opt/local/bin:/opt/local/sbin:...) and it doesn't cause any problems. 
If it does for you, it's because an /opt/local/bin/python symlink 
pointing to the MacPorts version of Python was created at some point 
(this is not the default, AFAIK). If you remove that symlink and restore 
your previous path, the problem should go away. Prefixing one of Apple's 
crazy directories to your path isn't an elegant solution.

Once you fix your path, you may want to recompile, just to be safe.

From Dominique.Holzwarth at ch.delarue.com  Wed Mar 19 04:05:22 2008
From: Dominique.Holzwarth at ch.delarue.com (Dominique.Holzwarth@ch.delarue.com)
Date: Wed Mar 19 04:06:43 2008
Subject: [mod_python] Sessions & user management
Message-ID: <8D5970DD46B50A409A0E42BA407964FE0E6711E2@SGBD012007.dlrmail.ad.delarue.com>


Hello everyone

I know there are a couple of topics about this matter already, however I
didn't find the required information yet...

Currently I'm using the publisher handler to generate some html websites
with apache user authentification (just one group of users with an
AuthUserFile) and a very simple session management (just save some state
variables for my python scripts).

What I intend to do now is:

1. have several _groups_ of users with different access rights, for
example:

Group A: user1, user2, user3 --> have access to function1 and function3
(in my publisher-handler python scripts)
GroupB: user4, user5 --> have access to function2

2. the user-accounts (ID & PW) should be maintainable in an easy way
(something like the auth-file from apache) 3. the userID (stored in the
file?) should be available for my python scripts / session (so I can
display them etc) 4. the session (-obj) should be able to create a new
folder for each session (=user) and delete that folder again when the
session ends

I know that mod_python has some sort of auth-handlers, however, I don't
know how to combine an auth-handler with my publisher-handler? For
example, how can an auth-handler pass the user/session data to the
publisher handler? And is it possible for the mod_python session
mechanism to create/delete temp-folders etc? Or is there maybe another
python module, which would be better for that purpose?

I'm sure that I'm not the first one who needs to do such stuff :-P. So
it would be cool if someone had an example (or link to a good tutorial)
for me as the mod_python user manual is pretty short imo (to short for
me to really understand it tbh).

Thanks in advance

Dominique

*********************************
This e-mail and any files attached are strictly confidential, may be legally privileged and are intended solely for the addressee. If you are not the intended recipient please notify the sender immediately by return email and then delete the e-mail and any attachments immediately. The views and or opinions expressed in this e-mail are not necessarily the views of De La Rue plc or any of its subsidiaries and the De La Rue Group of companies, their directors, officers and employees make no representation about and accept no liability for its accuracy or completeness. You should ensure that you have adequate virus protection as the De La Rue Group of companies do not accept liability for any viruses 
De La Rue plc Registered No.3834125, De La Rue Holdings plc Registered No 58025 and De La Rue International Limited Registered No 720284 are all registered in England with their registered office at: De La Rue House, Jays Close, Viables, Hampshire RG22 4BS
From graham.dumpleton at gmail.com  Wed Mar 19 05:28:12 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Wed Mar 19 05:28:32 2008
Subject: [mod_python] Sessions & user management
In-Reply-To: <8D5970DD46B50A409A0E42BA407964FE0E6711E2@SGBD012007.dlrmail.ad.delarue.com>
References: <8D5970DD46B50A409A0E42BA407964FE0E6711E2@SGBD012007.dlrmail.ad.delarue.com>
Message-ID: <88e286470803190228k1d8f3f0gf3d3920be814eb9f@mail.gmail.com>

In relation to authentication, have you read:

  http://www.modpython.org/live/current/doc-html/hand-pub-alg-auth.html

Graham

On 19/03/2008, Dominique.Holzwarth@ch.delarue.com
<Dominique.Holzwarth@ch.delarue.com> wrote:
>
>  Hello everyone
>
>  I know there are a couple of topics about this matter already, however I
>  didn't find the required information yet...
>
>  Currently I'm using the publisher handler to generate some html websites
>  with apache user authentification (just one group of users with an
>  AuthUserFile) and a very simple session management (just save some state
>  variables for my python scripts).
>
>  What I intend to do now is:
>
>  1. have several _groups_ of users with different access rights, for
>  example:
>
>  Group A: user1, user2, user3 --> have access to function1 and function3
>  (in my publisher-handler python scripts)
>  GroupB: user4, user5 --> have access to function2
>
>  2. the user-accounts (ID & PW) should be maintainable in an easy way
>  (something like the auth-file from apache) 3. the userID (stored in the
>  file?) should be available for my python scripts / session (so I can
>  display them etc) 4. the session (-obj) should be able to create a new
>  folder for each session (=user) and delete that folder again when the
>  session ends
>
>  I know that mod_python has some sort of auth-handlers, however, I don't
>  know how to combine an auth-handler with my publisher-handler? For
>  example, how can an auth-handler pass the user/session data to the
>  publisher handler? And is it possible for the mod_python session
>  mechanism to create/delete temp-folders etc? Or is there maybe another
>  python module, which would be better for that purpose?
>
>  I'm sure that I'm not the first one who needs to do such stuff :-P. So
>  it would be cool if someone had an example (or link to a good tutorial)
>  for me as the mod_python user manual is pretty short imo (to short for
>  me to really understand it tbh).
>
>  Thanks in advance
>
>  Dominique
>
>  *********************************
>  This e-mail and any files attached are strictly confidential, may be legally privileged and are intended solely for the addressee. If you are not the intended recipient please notify the sender immediately by return email and then delete the e-mail and any attachments immediately. The views and or opinions expressed in this e-mail are not necessarily the views of De La Rue plc or any of its subsidiaries and the De La Rue Group of companies, their directors, officers and employees make no representation about and accept no liability for its accuracy or completeness. You should ensure that you have adequate virus protection as the De La Rue Group of companies do not accept liability for any viruses
>  De La Rue plc Registered No.3834125, De La Rue Holdings plc Registered No 58025 and De La Rue International Limited Registered No 720284 are all registered in England with their registered office at: De La Rue House, Jays Close, Viables, Hampshire RG22 4BS
>  _______________________________________________
>  Mod_python mailing list
>  Mod_python@modpython.org
>  http://mailman.modpython.org/mailman/listinfo/mod_python
>
From graham.dumpleton at gmail.com  Wed Mar 19 06:03:42 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Wed Mar 19 06:03:49 2008
Subject: [mod_python] Sessions & user management
In-Reply-To: <8D5970DD46B50A409A0E42BA407964FE0E6714CA@SGBD012007.dlrmail.ad.delarue.com>
References: <88e286470803190228k1d8f3f0gf3d3920be814eb9f@mail.gmail.com>
	<8D5970DD46B50A409A0E42BA407964FE0E6714CA@SGBD012007.dlrmail.ad.delarue.com>
Message-ID: <88e286470803190303y36cfe7e3kdedcce50a18d0d36@mail.gmail.com>

Please use reply-all and keep discussion on the list.

See comments below.

On 19/03/2008, Dominique.Holzwarth@ch.delarue.com
<Dominique.Holzwarth@ch.delarue.com> wrote:
>
>
>  Hello Grahamn
>
>  I've seen this section but there are several problems to me with it:
>
>  In the example:
>  __auth_realm__ = "Members only"
>
>   def __auth__(req, user, passwd):
>
>       if user == "eggs" and passwd == "spam" or \
>           user == "joe" and passwd == "eoj":
>           return 1
>       else:
>           return 0
>
>   def __access__(req, user):
>       if user == "eggs":
>           return 1
>       else:
>           return 0
>
>   def hello(req):
>       return "hello"
>
>  1. where does the data in the param's "user" and "passwd" come from?

The publisher handler internally implements HTTP basic authentication,
so comes from the WWW-Authenticate header passed by the browser.

>  2. I don't want to "hard-code" the user-id and password in my code. They rather should be stored in a file or so which would best be encoded (at least the password).
> Similar to the AuthFile-mechanism apache provides. But then again, I don't know how I would need to get that encoded data into my code... (to do the actual authentification...)

There is nothing to stop you doing that. When implementing __auth__
and __access__ as functions they could do quite complex things, like
consult external files. Thus it is up to you.

>  3. its written on that page, that for a "real" auth-mechanism "PythonAuthenHandler" should be used... So that's why I was asking for example on how to combine a "PythonAuthenHandler" with "PublisherHandler" and an AuthFile...

That comment is only in relation to the problem of code at global
scope in a module being executed even if a user doesn't strictly have
access. In other words, a non authenticated user can trigger side
affects. This is because the module has to be imported to be able to
consult the authentication and access information within it. It is not
generally a big issue.

Personally I would avoid both the publisher auth hooks and
PythonAuthenHandler. You would be better off using other Apache authnz
modules as they are more robust as they are better tested and give you
the option of using lots of different auth providers.

The bit that isn't obvious is how to apply them to mod_python and
publisher since publisher resources are not exclusively file based due
to a file handling multiple URLs.

Imagine though mod_python application is rooted at /myapp, then have:

<Location /myapp>

AuthType Basic
AuthName "Restricted Files"
AuthBasicProvider file
AuthUserFile /usr/local/apache/passwd/passwords
AuthGroupFile /usr/local/apache/passwd/groups

Require valid-user

</Location>

If specific URLs require more constrained access requirements based on
group member ship, then use:

<Location /myapp/admin>
Require group admin
</Location>

If you need access to who the user is in Python code, access req.user.

So, there is actually no need to do any in Python and standard Apache
mechanisms can be used. I don't generally suggest this though as
people are usually hell bent on doing everything in Python even though
Apache provides better stuff in other modules for doing it.

Graham

>  Greetings
>  Dominique
>
>
>  -----Original Message-----
>  From: Graham Dumpleton [mailto:graham.dumpleton@gmail.com]
>  Sent: Mittwoch, 19. M?rz 2008 10:28
>  To: Holzwarth, Dominique (Berne Bauhaus)
>  Cc: mod_python@modpython.org
>  Subject: Re: [mod_python] Sessions & user management
>
>  In relation to authentication, have you read:
>
>   http://www.modpython.org/live/current/doc-html/hand-pub-alg-auth.html
>
>  Graham
>
>
> *********************************
>  This e-mail and any files attached are strictly confidential, may be legally privileged and are intended solely for the addressee. If you are not the intended recipient please notify the sender immediately by return email and then delete the e-mail and any attachments immediately. The views and or opinions expressed in this e-mail are not necessarily the views of De La Rue plc or any of its subsidiaries and the De La Rue Group of companies, their directors, officers and employees make no representation about and accept no liability for its accuracy or completeness. You should ensure that you have adequate virus protection as the De La Rue Group of companies do not accept liability for any viruses
>  De La Rue plc Registered No.3834125, De La Rue Holdings plc Registered No 58025 and De La Rue International Limited Registered No 720284 are all registered in England with their registered office at: De La Rue House, Jays Close, Viables, Hampshire RG22 4BS
>

From Dominique.Holzwarth at ch.delarue.com  Wed Mar 19 09:18:24 2008
From: Dominique.Holzwarth at ch.delarue.com (Dominique.Holzwarth@ch.delarue.com)
Date: Wed Mar 19 09:19:55 2008
Subject: [mod_python] Sessions & user management
In-Reply-To: <88e286470803190303y36cfe7e3kdedcce50a18d0d36@mail.gmail.com>
Message-ID: <8D5970DD46B50A409A0E42BA407964FE0E671BE5@SGBD012007.dlrmail.ad.delarue.com>


Thank you Graham for that information

I will test the approach with the apache auth-modules and see if I can make it work... I'll post the results (probably some more questions...) here again :-) 

-----Original Message-----
From: Graham Dumpleton [mailto:graham.dumpleton@gmail.com] 
Sent: Mittwoch, 19. M?rz 2008 11:04
To: Holzwarth, Dominique (Berne Bauhaus)
Cc: mod_python
Subject: Re: [mod_python] Sessions & user management

Please use reply-all and keep discussion on the list.

See comments below.

On 19/03/2008, Dominique.Holzwarth@ch.delarue.com
<Dominique.Holzwarth@ch.delarue.com> wrote:
>
>
>  Hello Grahamn
>
>  I've seen this section but there are several problems to me with it:
>
>  In the example:
>  __auth_realm__ = "Members only"
>
>   def __auth__(req, user, passwd):
>
>       if user == "eggs" and passwd == "spam" or \
>           user == "joe" and passwd == "eoj":
>           return 1
>       else:
>           return 0
>
>   def __access__(req, user):
>       if user == "eggs":
>           return 1
>       else:
>           return 0
>
>   def hello(req):
>       return "hello"
>
>  1. where does the data in the param's "user" and "passwd" come from?

The publisher handler internally implements HTTP basic authentication, so comes from the WWW-Authenticate header passed by the browser.

>  2. I don't want to "hard-code" the user-id and password in my code. They rather should be stored in a file or so which would best be encoded (at least the password).
> Similar to the AuthFile-mechanism apache provides. But then again, I 
> don't know how I would need to get that encoded data into my code... 
> (to do the actual authentification...)

There is nothing to stop you doing that. When implementing __auth__ and __access__ as functions they could do quite complex things, like consult external files. Thus it is up to you.

>  3. its written on that page, that for a "real" auth-mechanism "PythonAuthenHandler" should be used... So that's why I was asking for example on how to combine a "PythonAuthenHandler" with "PublisherHandler" and an AuthFile...

That comment is only in relation to the problem of code at global scope in a module being executed even if a user doesn't strictly have access. In other words, a non authenticated user can trigger side affects. This is because the module has to be imported to be able to consult the authentication and access information within it. It is not generally a big issue.

Personally I would avoid both the publisher auth hooks and PythonAuthenHandler. You would be better off using other Apache authnz modules as they are more robust as they are better tested and give you the option of using lots of different auth providers.

The bit that isn't obvious is how to apply them to mod_python and publisher since publisher resources are not exclusively file based due to a file handling multiple URLs.

Imagine though mod_python application is rooted at /myapp, then have:

<Location /myapp>

AuthType Basic
AuthName "Restricted Files"
AuthBasicProvider file
AuthUserFile /usr/local/apache/passwd/passwords
AuthGroupFile /usr/local/apache/passwd/groups

Require valid-user

</Location>

If specific URLs require more constrained access requirements based on group member ship, then use:

<Location /myapp/admin>
Require group admin
</Location>

If you need access to who the user is in Python code, access req.user.

So, there is actually no need to do any in Python and standard Apache mechanisms can be used. I don't generally suggest this though as people are usually hell bent on doing everything in Python even though Apache provides better stuff in other modules for doing it.

Graham

>  Greetings
>  Dominique
>
>
>  -----Original Message-----
>  From: Graham Dumpleton [mailto:graham.dumpleton@gmail.com]
>  Sent: Mittwoch, 19. M?rz 2008 10:28
>  To: Holzwarth, Dominique (Berne Bauhaus)
>  Cc: mod_python@modpython.org
>  Subject: Re: [mod_python] Sessions & user management
>
>  In relation to authentication, have you read:
>
>   
> http://www.modpython.org/live/current/doc-html/hand-pub-alg-auth.html
>
>  Graham
>
>
> *********************************
>  This e-mail and any files attached are strictly confidential, may be 
> legally privileged and are intended solely for the addressee. If you 
> are not the intended recipient please notify the sender immediately by return email and then delete the e-mail and any attachments immediately. The views and or opinions expressed in this e-mail are not necessarily the views of De La Rue plc or any of its subsidiaries and the De La Rue Group of companies, their directors, officers and employees make no representation about and accept no liability for its accuracy or completeness. You should ensure that you have adequate virus protection as the De La Rue Group of companies do not accept liability for any viruses  De La Rue plc Registered No.3834125, De La Rue Holdings plc Registered No 58025 and De La Rue International Limited Registered No 720284 are all registered in England with their registered office at: De La Rue House, Jays Close, Viables, Hampshire RG22 4BS
>


*********************************
This e-mail and any files attached are strictly confidential, may be legally privileged and are intended solely for the addressee. If you are not the intended recipient please notify the sender immediately by return email and then delete the e-mail and any attachments immediately. The views and or opinions expressed in this e-mail are not necessarily the views of De La Rue plc or any of its subsidiaries and the De La Rue Group of companies, their directors, officers and employees make no representation about and accept no liability for its accuracy or completeness. You should ensure that you have adequate virus protection as the De La Rue Group of companies do not accept liability for any viruses 
De La Rue plc Registered No.3834125, De La Rue Holdings plc Registered No 58025 and De La Rue International Limited Registered No 720284 are all registered in England with their registered office at: De La Rue House, Jays Close, Viables, Hampshire RG22 4BS

From dgc at uchicago.edu  Wed Mar 19 16:14:19 2008
From: dgc at uchicago.edu (David Champion)
Date: Wed Mar 19 16:14:24 2008
Subject: [mod_python] Chaining handlers
Message-ID: <20080319201419.GM10751@monkey.uchicago.edu>

This seems like it should be a FAQ, but I don't see it.  Sorry if I've
missed it -- pointers instead of answers are welcome.

I thought I understood that it's possible to chain handlers in Apache,
such that multiple handlers can have a chance at completing the request,
and the chain ends when a handler succeeds.  (I don't want to "pipeline"
filters, so that each handler handles the same request in succession.)
But I'm having trouble seeing how to make this work.

More specifically, what I'm trying to accomplish is to have mod_python
implement an access control policy over a directory.  Provided that
access is allowed, I want any content in that directory to be served as
if mod_python were not present.  I have a script that implements the
policy.  It amounts to this:

	<Location /test/*>
		SetHandler mod_python
		PythonHandler MyPackage
	</Location>

	def handler(req):
		# case 1
		if accessOK(req):
			return apache.DECLINED

		# case 2
		else:
			return apache.UNAUTHORIZED

Case 2 works, of course.  And when I request a static file, case 1 works
too (I receive the file).  My problem is when the request is for an
object that's covered by some other handler -- cgi, php, etc.  I receive
the CGI as a static-content test/plain file instead.

Is this possible?  I feel like I must be missing something; there's a
lot I still don't understand about the API.  I had started to implement
this module in C, but decided I could probably do it in mod_python if
it's possible in C.  Is that true?

-- 
 -D.    dgc@uchicago.edu    NSIT    University of Chicago
From graham.dumpleton at gmail.com  Wed Mar 19 21:55:05 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Wed Mar 19 21:55:12 2008
Subject: [mod_python] Chaining handlers
In-Reply-To: <20080319201419.GM10751@monkey.uchicago.edu>
References: <20080319201419.GM10751@monkey.uchicago.edu>
Message-ID: <88e286470803191855l3f03fc4bw6ed8ab727a931f59@mail.gmail.com>

On 20/03/2008, David Champion <dgc@uchicago.edu> wrote:
> This seems like it should be a FAQ, but I don't see it.  Sorry if I've
>  missed it -- pointers instead of answers are welcome.

The documentation does cover it, as long as you know what you are looking for.

>  I thought I understood that it's possible to chain handlers in Apache,
>  such that multiple handlers can have a chance at completing the request,
>  and the chain ends when a handler succeeds.  (I don't want to "pipeline"
>  filters, so that each handler handles the same request in succession.)
>  But I'm having trouble seeing how to make this work.
>
>  More specifically, what I'm trying to accomplish is to have mod_python
>  implement an access control policy over a directory.  Provided that
>  access is allowed, I want any content in that directory to be served as
>  if mod_python were not present.  I have a script that implements the
>  policy.  It amounts to this:
>
>         <Location /test/*>
>                 SetHandler mod_python
>                 PythonHandler MyPackage
>         </Location>
>
>         def handler(req):
>                 # case 1
>                 if accessOK(req):
>                         return apache.DECLINED
>
>                 # case 2
>                 else:
>                         return apache.UNAUTHORIZED
>
>  Case 2 works, of course.  And when I request a static file, case 1 works
>  too (I receive the file).  My problem is when the request is for an
>  object that's covered by some other handler -- cgi, php, etc.  I receive
>  the CGI as a static-content test/plain file instead.
>
>  Is this possible?  I feel like I must be missing something; there's a
>  lot I still don't understand about the API.  I had started to implement
>  this module in C, but decided I could probably do it in mod_python if
>  it's possible in C.  Is that true?

Before can suggest something, need to know what the criteria is that
you are wanting to block on. Are you wanting to implement HTTP basic
authorisation, ie., require user to login, or wanting to block based
on something else, such as client IP?

Also, is this the only reason you are wanting to use mod_python, or do
you also have web applications that use mod_python specific APIs for
content handler? If you do have a web application, is it WSGI
compatible and thus could be hosted on any WSGI capable system?

Graham
From dgc at uchicago.edu  Wed Mar 19 23:16:48 2008
From: dgc at uchicago.edu (David Champion)
Date: Wed Mar 19 23:16:56 2008
Subject: [mod_python] Chaining handlers
In-Reply-To: <88e286470803191855l3f03fc4bw6ed8ab727a931f59@mail.gmail.com>
References: <20080319201419.GM10751@monkey.uchicago.edu>
	<88e286470803191855l3f03fc4bw6ed8ab727a931f59@mail.gmail.com>
Message-ID: <20080320031648.GN10751@monkey.uchicago.edu>

> The documentation does cover it, as long as you know what you are looking for.

Ugh.  I guess I don't -- I still don't see it, at least expressed in
this terminology.


> Before can suggest something, need to know what the criteria is that
> you are wanting to block on. Are you wanting to implement HTTP basic
> authorisation, ie., require user to login, or wanting to block based
> on something else, such as client IP?

It could be a variety of things, honestly.  Fundamentally I'm going
to ask for a username and password, but the usernames and passwords
are in flux at all times (i.e. there's no singular password file / sql
database / bdb file / whatever), and we might want to block even a
valid user/password pair based on IP or some other criterion.  I want
to be able to interact with the user in these edge cases.  I have a CGI
that does this well, so I'm trying to make a handler that uses cookies
established by the CGI to make a straightforward access decision at the
handler level so that I don't need to call out to a gateway CGI for
every request.

It's also desirable in this case to use a form for the authN instead of
a browser-dependent Basic login dialog.


> Also, is this the only reason you are wanting to use mod_python, or do
> you also have web applications that use mod_python specific APIs for
> content handler? If you do have a web application, is it WSGI
> compatible and thus could be hosted on any WSGI capable system?

I want this to act as a single signon service for a variety of
applications, but none of them is written in python at all.

The authentication information is available through a Python API,
so it's helpful to use Python to make the authN checks.  Other than
that I'm flexible, I guess -- there's no python-generated content
to serve.  I just have this odd user base that I need to provide my
own programmatic access to, and I don't want to do it separately for
several different applications.  I'd rather have the web server tell the
application that the user is pre-approved.  And I like Python most. :)

In the end this is not so different from any other SSO out there: detect
whether authN is required for the user, redirect to a login resource if
so, and then re-evaluate credentials upon return.  I just can't use any
existing SSOs that I know of because of where my user information is.

If there's some way I can bust it all through the *appearance* of HTTP
Basic just to get $REMOTE_USER on the application end, I can use that.
But I don't know any way to use Basic on the server without using it on
the client, unless it makes sense to make a two-pass handler that makes
an access decision first and filters incoming headers second.  But this
still leaves open how to engage CGI and PHP handlers later, so I'm not
sure it really solves the problem -- it's just another approach that
converges to the same point.


Thanks for your time.

-- 
 -D.    dgc@uchicago.edu    NSIT    University of Chicago
From graham.dumpleton at gmail.com  Wed Mar 19 23:36:38 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Wed Mar 19 23:36:45 2008
Subject: [mod_python] Chaining handlers
In-Reply-To: <20080320031648.GN10751@monkey.uchicago.edu>
References: <20080319201419.GM10751@monkey.uchicago.edu>
	<88e286470803191855l3f03fc4bw6ed8ab727a931f59@mail.gmail.com>
	<20080320031648.GN10751@monkey.uchicago.edu>
Message-ID: <88e286470803192036r2ffd637cpadf601904c56bdc8@mail.gmail.com>

On 20/03/2008, David Champion <dgc@uchicago.edu> wrote:
> > The documentation does cover it, as long as you know what you are looking for.
>
> Ugh.  I guess I don't -- I still don't see it, at least expressed in
>  this terminology.
>
>  > Before can suggest something, need to know what the criteria is that
>  > you are wanting to block on. Are you wanting to implement HTTP basic
>  > authorisation, ie., require user to login, or wanting to block based
>  > on something else, such as client IP?
>
> It could be a variety of things, honestly.  Fundamentally I'm going
>  to ask for a username and password, but the usernames and passwords
>  are in flux at all times (i.e. there's no singular password file / sql
>  database / bdb file / whatever), and we might want to block even a
>  valid user/password pair based on IP or some other criterion.  I want
>  to be able to interact with the user in these edge cases.  I have a CGI
>  that does this well, so I'm trying to make a handler that uses cookies
>  established by the CGI to make a straightforward access decision at the
>  handler level so that I don't need to call out to a gateway CGI for
>  every request.
>

The access, authentication and authorisation handler phases are:

  http://www.modpython.org/live/current/doc-html/dir-handlers-ach.html
  http://www.modpython.org/live/current/doc-html/dir-handlers-auh.html
  http://www.modpython.org/live/current/doc-html/dir-handlers-auzh.html

To get some context also see:

  http://www.fmc-modeling.org/category/projects/apache/amp/4_4Request_Response_Loop.html

plus other parts of same document.

>  It's also desirable in this case to use a form for the authN instead of
>  a browser-dependent Basic login dialog.

Although authentication phase handler is mainly used for HTTP Basic
authentication, it can be adapted for use in form based login
mechanism. It is a bit more tricky to do though.

>  > Also, is this the only reason you are wanting to use mod_python, or do
>  > you also have web applications that use mod_python specific APIs for
>  > content handler? If you do have a web application, is it WSGI
>  > compatible and thus could be hosted on any WSGI capable system?
>
> I want this to act as a single signon service for a variety of
>  applications, but none of them is written in python at all.

If you only wanted HTTP Basic authentication I would then have
suggested using mod_wsgi, not for its Python web hosting ability, but
its Python hooks for Apache auth provider mechanism. See:

  http://code.google.com/p/modwsgi/wiki/AccessControlMechanisms

Is simpler to use than writing full handlers in mod_python.

If you can find a separate Apache module that handles the concept of
form based login but can use an Apache 2.2 auth provider, then
mod_wsgi could still be used. I vaguely remember there being one that
may sort of do that, but would need to go looking for it again. If can
find that, then all you would need to do is provide the check password
and groups hooks in Python code.

I'll have a look to see if I can find Apache module that does that.
Would rather pursue that than try to find and resurrect code I had for
doing form based login as authentication handler as right now not sure
where I put it. :-)

Graham

>  The authentication information is available through a Python API,
>  so it's helpful to use Python to make the authN checks.  Other than
>  that I'm flexible, I guess -- there's no python-generated content
>  to serve.  I just have this odd user base that I need to provide my
>  own programmatic access to, and I don't want to do it separately for
>  several different applications.  I'd rather have the web server tell the
>  application that the user is pre-approved.  And I like Python most. :)
>
>  In the end this is not so different from any other SSO out there: detect
>  whether authN is required for the user, redirect to a login resource if
>  so, and then re-evaluate credentials upon return.  I just can't use any
>  existing SSOs that I know of because of where my user information is.
>
>  If there's some way I can bust it all through the *appearance* of HTTP
>  Basic just to get $REMOTE_USER on the application end, I can use that.
>  But I don't know any way to use Basic on the server without using it on
>  the client, unless it makes sense to make a two-pass handler that makes
>  an access decision first and filters incoming headers second.  But this
>  still leaves open how to engage CGI and PHP handlers later, so I'm not
>  sure it really solves the problem -- it's just another approach that
>  converges to the same point.
>
>
>  Thanks for your time.
>
>
>  --
>   -D.    dgc@uchicago.edu    NSIT    University of Chicago
>  _______________________________________________
>  Mod_python mailing list
>  Mod_python@modpython.org
>  http://mailman.modpython.org/mailman/listinfo/mod_python
>
From graham.dumpleton at gmail.com  Wed Mar 19 23:51:43 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Wed Mar 19 23:51:48 2008
Subject: [mod_python] Chaining handlers
In-Reply-To: <88e286470803192036r2ffd637cpadf601904c56bdc8@mail.gmail.com>
References: <20080319201419.GM10751@monkey.uchicago.edu>
	<88e286470803191855l3f03fc4bw6ed8ab727a931f59@mail.gmail.com>
	<20080320031648.GN10751@monkey.uchicago.edu>
	<88e286470803192036r2ffd637cpadf601904c56bdc8@mail.gmail.com>
Message-ID: <88e286470803192051i7a4fb590m51581815c1498463@mail.gmail.com>

Also go to http://books.google.com and plug in search term of
'authn_cookie'. This should yield snippet of Nick Kew's book on
writing Apache modules. Read it as well as surrounding pages.

It has been a while since I read that section, so can't remember if
that is directly applicable. It may still be of interest were you to
try and write a C module or even Python auth handler to do this.

Also found mod_authn_form, but it is tied to MySQL database.

Graham

On 20/03/2008, Graham Dumpleton <graham.dumpleton@gmail.com> wrote:
> On 20/03/2008, David Champion <dgc@uchicago.edu> wrote:
>
> > > The documentation does cover it, as long as you know what you are looking for.
>  >
>  > Ugh.  I guess I don't -- I still don't see it, at least expressed in
>  >  this terminology.
>  >
>  >  > Before can suggest something, need to know what the criteria is that
>  >  > you are wanting to block on. Are you wanting to implement HTTP basic
>  >  > authorisation, ie., require user to login, or wanting to block based
>  >  > on something else, such as client IP?
>  >
>  > It could be a variety of things, honestly.  Fundamentally I'm going
>  >  to ask for a username and password, but the usernames and passwords
>  >  are in flux at all times (i.e. there's no singular password file / sql
>  >  database / bdb file / whatever), and we might want to block even a
>  >  valid user/password pair based on IP or some other criterion.  I want
>  >  to be able to interact with the user in these edge cases.  I have a CGI
>  >  that does this well, so I'm trying to make a handler that uses cookies
>  >  established by the CGI to make a straightforward access decision at the
>  >  handler level so that I don't need to call out to a gateway CGI for
>  >  every request.
>  >
>
>
> The access, authentication and authorisation handler phases are:
>
>   http://www.modpython.org/live/current/doc-html/dir-handlers-ach.html
>   http://www.modpython.org/live/current/doc-html/dir-handlers-auh.html
>   http://www.modpython.org/live/current/doc-html/dir-handlers-auzh.html
>
>  To get some context also see:
>
>   http://www.fmc-modeling.org/category/projects/apache/amp/4_4Request_Response_Loop.html
>
>  plus other parts of same document.
>
>
>  >  It's also desirable in this case to use a form for the authN instead of
>  >  a browser-dependent Basic login dialog.
>
>
> Although authentication phase handler is mainly used for HTTP Basic
>  authentication, it can be adapted for use in form based login
>  mechanism. It is a bit more tricky to do though.
>
>
>  >  > Also, is this the only reason you are wanting to use mod_python, or do
>  >  > you also have web applications that use mod_python specific APIs for
>  >  > content handler? If you do have a web application, is it WSGI
>  >  > compatible and thus could be hosted on any WSGI capable system?
>  >
>  > I want this to act as a single signon service for a variety of
>  >  applications, but none of them is written in python at all.
>
>
> If you only wanted HTTP Basic authentication I would then have
>  suggested using mod_wsgi, not for its Python web hosting ability, but
>  its Python hooks for Apache auth provider mechanism. See:
>
>   http://code.google.com/p/modwsgi/wiki/AccessControlMechanisms
>
>  Is simpler to use than writing full handlers in mod_python.
>
>  If you can find a separate Apache module that handles the concept of
>  form based login but can use an Apache 2.2 auth provider, then
>  mod_wsgi could still be used. I vaguely remember there being one that
>  may sort of do that, but would need to go looking for it again. If can
>  find that, then all you would need to do is provide the check password
>  and groups hooks in Python code.
>
>  I'll have a look to see if I can find Apache module that does that.
>  Would rather pursue that than try to find and resurrect code I had for
>  doing form based login as authentication handler as right now not sure
>  where I put it. :-)
>
>
>  Graham
>
>
>  >  The authentication information is available through a Python API,
>  >  so it's helpful to use Python to make the authN checks.  Other than
>  >  that I'm flexible, I guess -- there's no python-generated content
>  >  to serve.  I just have this odd user base that I need to provide my
>  >  own programmatic access to, and I don't want to do it separately for
>  >  several different applications.  I'd rather have the web server tell the
>  >  application that the user is pre-approved.  And I like Python most. :)
>  >
>  >  In the end this is not so different from any other SSO out there: detect
>  >  whether authN is required for the user, redirect to a login resource if
>  >  so, and then re-evaluate credentials upon return.  I just can't use any
>  >  existing SSOs that I know of because of where my user information is.
>  >
>  >  If there's some way I can bust it all through the *appearance* of HTTP
>  >  Basic just to get $REMOTE_USER on the application end, I can use that.
>  >  But I don't know any way to use Basic on the server without using it on
>  >  the client, unless it makes sense to make a two-pass handler that makes
>  >  an access decision first and filters incoming headers second.  But this
>  >  still leaves open how to engage CGI and PHP handlers later, so I'm not
>  >  sure it really solves the problem -- it's just another approach that
>  >  converges to the same point.
>  >
>  >
>  >  Thanks for your time.
>  >
>  >
>  >  --
>  >   -D.    dgc@uchicago.edu    NSIT    University of Chicago
>  >  _______________________________________________
>  >  Mod_python mailing list
>  >  Mod_python@modpython.org
>  >  http://mailman.modpython.org/mailman/listinfo/mod_python
>  >
>
From david.bear at asu.edu  Thu Mar 20 00:56:03 2008
From: david.bear at asu.edu (David Bear)
Date: Thu Mar 20 00:51:04 2008
Subject: [mod_python] a way to list all namespace in apache
Message-ID: <200803192156.04106.david.bear@asu.edu>

Its far too easy to end up with an apache config that is to complex to easily 
understand quickly. I was wondering if there was a way using mod-python to 
display all the name spaces that apache knows about through its config file.

By that I mean I would like a listing of all virtual hosts and their 
associated document roots -- and then for each vhost a list of the rewrite 
rules that may exist for that. I know I could always look at the config file, 
but I'm thinking of something that would organize the rewrite rules more the 
way apache would see them.

My initial thinking of having something like this would be to aid in debugging 
some obscure reason why apache would fail to behave as expected. My first 
experience configuring apache was using the yast, a gui configurator. But 
yast introduced some strange stanzas that sometimes it didn't properly close 
or nest. It would have been nice to see what apache was seeing in the 
configuration file.


-- 
David Bear
College of Public Programs/ASU
411 N Central, Phoenix, AZ 85004
From graham.dumpleton at gmail.com  Thu Mar 20 00:58:55 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Thu Mar 20 00:59:01 2008
Subject: [mod_python] a way to list all namespace in apache
In-Reply-To: <200803192156.04106.david.bear@asu.edu>
References: <200803192156.04106.david.bear@asu.edu>
Message-ID: <88e286470803192158t2b3ae4b2i8900fb9a370ee885@mail.gmail.com>

On 20/03/2008, David Bear <david.bear@asu.edu> wrote:
> Its far too easy to end up with an apache config that is to complex to easily
>  understand quickly. I was wondering if there was a way using mod-python to
>  display all the name spaces that apache knows about through its config file.
>
>  By that I mean I would like a listing of all virtual hosts and their
>  associated document roots -- and then for each vhost a list of the rewrite
>  rules that may exist for that. I know I could always look at the config file,
>  but I'm thinking of something that would organize the rewrite rules more the
>  way apache would see them.
>
>  My initial thinking of having something like this would be to aid in debugging
>  some obscure reason why apache would fail to behave as expected. My first
>  experience configuring apache was using the yast, a gui configurator. But
>  yast introduced some strange stanzas that sometimes it didn't properly close
>  or nest. It would have been nice to see what apache was seeing in the
>  configuration file.

Have you tried apache.config_tree()? See description in:

  http://www.modpython.org/live/current/doc-html/pyapi-apmeth.html

Graham
From emyr at teuluthomas.com  Thu Mar 20 12:43:15 2008
From: emyr at teuluthomas.com (Emyr Thomas)
Date: Thu Mar 20 12:43:25 2008
Subject: [mod_python] mod_python on RHEL5
Message-ID: <8fb874820803200943r6b84dae5k2d6eb88b2b3c05d@mail.gmail.com>

RedHat Enterprise Linux 5.1
Apache 2.2.3 (system installed)
Python 2.4.4 (custom install in /usr/locoal)
mod_python 3.3.1

I know you mod_python experts are probably sick and tired of hearing
these kinds of questions, but I'm at my wit's end!
I've seen a number of posts from people with very similar problems,
but having tried a number of "solutions", none of them seem to work!

I did a make altinstall of python, then I configured mod_python like so:

./configure \
    --with-apxs=/usr/sbin/apxs \
    --with-python=/usr/local/bin/python2.4 \
    --with-python-src=/usr/local/src/Python-2.4.4

After installing mod_python and configuring apache, I try some tests
but keep getting a 500 Internal Server Error. apache's error log shows
the following:

[Thu Mar 20 16:39:50 2008] [notice] suEXEC mechanism enabled (wrapper:
/usr/sbin/suexec)
[Thu Mar 20 16:39:50 2008] [notice] Digest: generating secret for
digest authentication ...
[Thu Mar 20 16:39:50 2008] [notice] Digest: done
[Thu Mar 20 16:39:50 2008] [notice] mod_python: Creating 8 session
mutexes based on 256 max processes and 0 max threads.
[Thu Mar 20 16:39:50 2008] [notice] mod_python: using mutex_directory /tmp
[Thu Mar 20 16:39:50 2008] [notice] Apache/2.2.3 (Red Hat) configured
-- resuming normal operations

[Thu Mar 20 16:40:25 2008] [error] make_obcallback: could not import
mod_python.apache.\n
ImportError: No module named mod_python.apache
[Thu Mar 20 16:40:25 2008] [error] make_obcallback: Python path being
used "['/usr/lib/python24.zip', '/usr/lib/python2.4',
'/usr/lib/python2.4/plat-linux2', '/usr/lib/python2.4/lib-tk',
'/usr/lib/python2.4/lib-dynload', '/usr/lib/python2.4/site-packages',
'/usr/lib/python2.4/site-packages/Numeric',
'/usr/lib/python2.4/site-packages/gtk-2.0']".
[Thu Mar 20 16:40:25 2008] [error] get_interpreter: no interpreter
callback found.
[Thu Mar 20 16:40:25 2008] [error] [client 192.168.201.30]
python_handler: Can't get/create interpreter.

Why does the line "Python path being used" show /usr/lib/XXX instead
of /usr/local/lib ?

I've tried switching SELinux off (it's on by default in RHEL5), but
still the same error.

A thousand thanks for anyone who can help me figure this out before I go bald!

Emyr
From roberto at connexer.com  Thu Mar 20 14:52:50 2008
From: roberto at connexer.com (Roberto =?iso-8859-1?Q?C=2E_S=E1nchez?=)
Date: Thu Mar 20 14:52:56 2008
Subject: [mod_python] mod_python on RHEL5
In-Reply-To: <8fb874820803200943r6b84dae5k2d6eb88b2b3c05d@mail.gmail.com>
References: <8fb874820803200943r6b84dae5k2d6eb88b2b3c05d@mail.gmail.com>
Message-ID: <20080320185250.GA18620@connexer.com>

On Thu, Mar 20, 2008 at 04:43:15PM +0000, Emyr Thomas wrote:
> RedHat Enterprise Linux 5.1
> Apache 2.2.3 (system installed)
> Python 2.4.4 (custom install in /usr/locoal)
> mod_python 3.3.1
> 

What, precisely, is the problem with the Python 2.4.3 and mod_python
3.2.8 shipped by RedHat?

Regards,

-Roberto
-- 
Roberto C. S?nchez
http://people.connexer.com/~roberto
http://www.connexer.com
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
Url : http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080320/ea1c84f5/attachment.bin
From dgc at uchicago.edu  Thu Mar 20 15:26:19 2008
From: dgc at uchicago.edu (David Champion)
Date: Thu Mar 20 15:26:25 2008
Subject: [mod_python] Chaining handlers
In-Reply-To: <88e286470803192051i7a4fb590m51581815c1498463@mail.gmail.com>
	<88e286470803192036r2ffd637cpadf601904c56bdc8@mail.gmail.com>
References: <20080319201419.GM10751@monkey.uchicago.edu>
	<88e286470803191855l3f03fc4bw6ed8ab727a931f59@mail.gmail.com>
	<20080320031648.GN10751@monkey.uchicago.edu>
	<88e286470803192036r2ffd637cpadf601904c56bdc8@mail.gmail.com>
	<88e286470803192051i7a4fb590m51581815c1498463@mail.gmail.com>
	<20080319201419.GM10751@monkey.uchicago.edu>
	<88e286470803191855l3f03fc4bw6ed8ab727a931f59@mail.gmail.com>
	<20080320031648.GN10751@monkey.uchicago.edu>
	<88e286470803192036r2ffd637cpadf601904c56bdc8@mail.gmail.com>
Message-ID: <20080320192619.GO10751@monkey.uchicago.edu>

> The access, authentication and authorisation handler phases are:
> 
>   http://www.modpython.org/live/current/doc-html/dir-handlers-ach.html
>   http://www.modpython.org/live/current/doc-html/dir-handlers-auh.html
>   http://www.modpython.org/live/current/doc-html/dir-handlers-auzh.html
> 
> To get some context also see:
> 
>   http://www.fmc-modeling.org/category/projects/apache/amp/4_4Request_Response_Loop.html

I did read those sections of the mod_python manual.  I also just looked
at the response loop document, and all seem to agree that under various
circumstances (depending on which handler phase you're in) returning OK
or DECLINED should pass the request to the next handler.

My code does this, but no matter which phase I've tried (access, auth,
headers, fixup, and more) the most I can get is my CGI served as a
static text/plain file.  Could it be a matter of priority?  It seems
that I'm able to position a C module first in the handler stack; maybe
that's why it works (see end).


> Although authentication phase handler is mainly used for HTTP Basic
> authentication, it can be adapted for use in form based login
> mechanism. It is a bit more tricky to do though.

It doesn't seem any different from trying to accomplish authN in some
other phase, but I might be missing something.  Anyway I'm getting the
same results from all phases.


> If you can find a separate Apache module that handles the concept of
> form based login but can use an Apache 2.2 auth provider, then
> mod_wsgi could still be used.

I haven't used WSGI before, but it might be worth a look sometime.

For now, I have the C module working just about perfectly.  It's too bad
I can't get it working in mod_python though, since it would allow me to
share the python module my CGI uses to build the security tokens.


> Also go to http://books.google.com and plug in search term of
> 'authn_cookie'. This should yield snippet of Nick Kew's book on
> writing Apache modules. Read it as well as surrounding pages.

Thanks for this.  I didn't know about this book, but it looks like a
good resource.  I haven't found ORA's "Writing Apache Modules with Perl
and C" all that helpful, but it's possible I'm too distracted by my
distaste for perl. :)



This doesn't bear directly on my problem, but it might be interesting
nonetheless: what I have already is a python module called HashCookie.py
which takes arbitrary dictionary values from its client and hashes them
together with current and expiration time values and a shared secret.
It passes the dictionary data (excluding the shared secret) as the
HC_DATA cookie, and the md5 or sha1 hash as HC_HASH.

I'm nearly finished with mod_hashcookie, which is the C version of the
server side which I had included in HashCookie.py.  It evaluates these
cookies, taking the shared secret from its Apache configuration.  If
the cookies are not present or do not hash correctly, it redirects to
an authN URL -- a CGI that uses HashCookie.py to construct cookies and
redirect back to the original resource.  If the hashes compare, the
timestamps are checked to ensure that the cookies are still valid.  And
if that passes, then the document is served.  This seems to be working
exactly as desired in its core functionality.


Thanks for your help.  I wrote the C version to verify that I knew
what I was doing and that it was conceptually workable.  If I can figure
out how to make the mod_python version work, I'm still interested, but
mod_hashcookie should solve it if not.


-- 
 -D.    dgc@uchicago.edu    NSIT    University of Chicago
From graham.dumpleton at gmail.com  Thu Mar 20 17:30:07 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Thu Mar 20 17:30:11 2008
Subject: [mod_python] mod_python on RHEL5
In-Reply-To: <8fb874820803200943r6b84dae5k2d6eb88b2b3c05d@mail.gmail.com>
References: <8fb874820803200943r6b84dae5k2d6eb88b2b3c05d@mail.gmail.com>
Message-ID: <88e286470803201430j6176e24p3a6938b7ea36e51f@mail.gmail.com>

See:

  http://issues.apache.org/jira/browse/MODPYTHON-225

Find the 'envvars' file in the same directory as httpd executable for
your Apache and set PYTHONHOME environment variable to '/usr/local'
and export it.

  PYTHONHOME=/usr/local
  export PYTHONHOME

It is the same issues as described in section 'Multiple Python Versions' of:

  http://code.google.com/p/modwsgi/wiki/InstallationIssues

for mod_wsgi except that mod_wsgi has a proper directive to allow
location to be overridden where as this is only described for
mod_python to be done in referenced issues above.

Graham

On 21/03/2008, Emyr Thomas <emyr@teuluthomas.com> wrote:
> RedHat Enterprise Linux 5.1
>  Apache 2.2.3 (system installed)
>  Python 2.4.4 (custom install in /usr/locoal)
>  mod_python 3.3.1
>
>  I know you mod_python experts are probably sick and tired of hearing
>  these kinds of questions, but I'm at my wit's end!
>  I've seen a number of posts from people with very similar problems,
>  but having tried a number of "solutions", none of them seem to work!
>
>  I did a make altinstall of python, then I configured mod_python like so:
>
>  ./configure \
>     --with-apxs=/usr/sbin/apxs \
>     --with-python=/usr/local/bin/python2.4 \
>     --with-python-src=/usr/local/src/Python-2.4.4
>
>  After installing mod_python and configuring apache, I try some tests
>  but keep getting a 500 Internal Server Error. apache's error log shows
>  the following:
>
>  [Thu Mar 20 16:39:50 2008] [notice] suEXEC mechanism enabled (wrapper:
>  /usr/sbin/suexec)
>  [Thu Mar 20 16:39:50 2008] [notice] Digest: generating secret for
>  digest authentication ...
>  [Thu Mar 20 16:39:50 2008] [notice] Digest: done
>  [Thu Mar 20 16:39:50 2008] [notice] mod_python: Creating 8 session
>  mutexes based on 256 max processes and 0 max threads.
>  [Thu Mar 20 16:39:50 2008] [notice] mod_python: using mutex_directory /tmp
>  [Thu Mar 20 16:39:50 2008] [notice] Apache/2.2.3 (Red Hat) configured
>  -- resuming normal operations
>
>  [Thu Mar 20 16:40:25 2008] [error] make_obcallback: could not import
>  mod_python.apache.\n
>  ImportError: No module named mod_python.apache
>  [Thu Mar 20 16:40:25 2008] [error] make_obcallback: Python path being
>  used "['/usr/lib/python24.zip', '/usr/lib/python2.4',
>  '/usr/lib/python2.4/plat-linux2', '/usr/lib/python2.4/lib-tk',
>  '/usr/lib/python2.4/lib-dynload', '/usr/lib/python2.4/site-packages',
>  '/usr/lib/python2.4/site-packages/Numeric',
>  '/usr/lib/python2.4/site-packages/gtk-2.0']".
>  [Thu Mar 20 16:40:25 2008] [error] get_interpreter: no interpreter
>  callback found.
>  [Thu Mar 20 16:40:25 2008] [error] [client 192.168.201.30]
>  python_handler: Can't get/create interpreter.
>
>  Why does the line "Python path being used" show /usr/lib/XXX instead
>  of /usr/local/lib ?
>
>  I've tried switching SELinux off (it's on by default in RHEL5), but
>  still the same error.
>
>  A thousand thanks for anyone who can help me figure this out before I go bald!
>
>  Emyr
>  _______________________________________________
>  Mod_python mailing list
>  Mod_python@modpython.org
>  http://mailman.modpython.org/mailman/listinfo/mod_python
>
From Dominique.Holzwarth at ch.delarue.com  Fri Mar 21 07:56:49 2008
From: Dominique.Holzwarth at ch.delarue.com (Dominique.Holzwarth@ch.delarue.com)
Date: Fri Mar 21 07:58:25 2008
Subject: AW: [mod_python] Sessions & user management
References: <88e286470803190228k1d8f3f0gf3d3920be814eb9f@mail.gmail.com>
	<8D5970DD46B50A409A0E42BA407964FE0E6714CA@SGBD012007.dlrmail.ad.delarue.com>
	<88e286470803190303y36cfe7e3kdedcce50a18d0d36@mail.gmail.com>
Message-ID: <8D5970DD46B50A409A0E42BA407964FE0E6FCFCE@SGBD012007.dlrmail.ad.delarue.com>


I've tried to secure different server-directories with different user groups now but it doesn't seem to work...
 
here's what I've added in the httpd.conf:
 
<Directory "C:/Program Files/Apache Software Foundation/Apache2.2/htdocs/GUI"> 
 AuthType Basic
 AuthName "Restricted Files"
 AuthBasicProvider file
 AuthUserFile "C:/Program Files/Apache Software Foundation/Apache2.2/htaccess/authfile"
 AuthGroupFile "C:/Program Files/Apache Software Foundation/Apache2.2/htaccess/groupfile"
 Require valid-user
</Directory>
 
<Directory "C:/Program Files/Apache Software Foundation/Apache2.2/htdocs/GUI/private">
  Require group developer
</Directory>
 
the authfile is located in the directory stated above and looks like this:
 
user3:$apr1$qJ3.....$lv0tLx5G7AHMooDbVSwXb/
user1:$apr1$2N3.....$a7s3qCpdNqmWDj1VnWyQ20
user2:$apr1$VN3.....$7vbus7toyHoXh0CVzyL2O0
 
the groupfile looks like this:
 
developer: user1 user2
translator: user3
 
I'm not completely sure wether I need the "" for the path-locations or not. But I tried it both ways and it never worked... my system is windows vista btw (don't if that matters...)
 
Would be nice if anyone could give me some hints what could be wrong...
 
thx Dominique


*********************************
This e-mail and any files attached are strictly confidential, may be legally privileged and are intended solely for the addressee. If you are not the intended recipient please notify the sender immediately by return email and then delete the e-mail and any attachments immediately. The views and or opinions expressed in this e-mail are not necessarily the views of De La Rue plc or any of its subsidiaries and the De La Rue Group of companies, their directors, officers and employees make no representation about and accept no liability for its accuracy or completeness. You should ensure that you have adequate virus protection as the De La Rue Group of companies do not accept liability for any viruses 
De La Rue plc Registered No.3834125, De La Rue Holdings plc Registered No 58025 and De La Rue International Limited Registered No 720284 are all registered in England with their registered office at: De La Rue House, Jays Close, Viables, Hampshire RG22 4BS
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080321/7dbddbcc/attachment.html
From sidney.cadot at jigsaw.nl  Sat Mar 22 16:09:55 2008
From: sidney.cadot at jigsaw.nl (Sidney Cadot)
Date: Sat Mar 22 16:09:58 2008
Subject: [mod_python] PSP handler forces content_type text/html ;
	can this be overridden?
Message-ID: <036f01c88c58$b2ba3ea0$182ebbe0$@cadot@jigsaw.nl>

Hi all,

I'm trying to use mod_python's PSP handler to emit XHTML (content-type:
"application/xhtml+xml"). Unfortunately, the PSP implementation forces the
request's content_type to "text/html".

Is there a way to override this? A casual look at psp.py suggests not. 

Regards, Sidney


From graham.dumpleton at gmail.com  Sat Mar 22 18:04:51 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Sat Mar 22 18:04:57 2008
Subject: [mod_python] PSP handler forces content_type text/html ;
	can this be overridden?
In-Reply-To: <3840776600444162554@unknownmsgid>
References: <3840776600444162554@unknownmsgid>
Message-ID: <88e286470803221504v2bbeda60uca944144577dc88@mail.gmail.com>

On 23/03/2008, Sidney Cadot <sidney.cadot@jigsaw.nl> wrote:
> Hi all,
>
>  I'm trying to use mod_python's PSP handler to emit XHTML (content-type:
>  "application/xhtml+xml"). Unfortunately, the PSP implementation forces the
>  request's content_type to "text/html".
>
>  Is there a way to override this?

Depends on how you are invoking it.

If using:

  PythonHandler mod_python.psp .psp

replace with:

  PythonHandler mypspwrappermodule .psp

where you define a module mypspwrappermodule which contains:

  from mod_python import psp

  def handler(req):

    req.content_type = "application/xhtml+xml"

    config = req.get_config()
    debug = debug = int(config.get("PythonDebug", 0))

    if debug and req.filename[-1] == "_":
        p = psp.PSP(req, req.filename[:-1])
        p.display_code()
    else:
        p = psp.PSP(req)
        p.run()

    return apache.OK

If using PSP() object directly already and doing str() on it to force
execution, then don't do that and look at implementation of __str__()
of PSP object instance and do something similar but set different
content type, ie., much like above, set content type and then call
run().

Graham
From graham.dumpleton at gmail.com  Sat Mar 22 20:32:03 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Sat Mar 22 20:32:08 2008
Subject: [mod_python] Re: mod_python issua
In-Reply-To: <83e2cbd40803221712xa221928p9c3993dbd5cf128f@mail.gmail.com>
References: <83e2cbd40803221712xa221928p9c3993dbd5cf128f@mail.gmail.com>
Message-ID: <88e286470803221732w78b8fdf4n5ba3e92f1675c988@mail.gmail.com>

On 23/03/2008, Jeff Stuart <jeff.m.stuart@gmail.com> wrote:
> Hi, I got your email off of the bug database for mod_python.  You reported a
> bug a few years ago about a version mismatch issue when mod_python starts
> up, and I was wondering if there is any resolution to that bug.
>
>  The errors that show up in my apache error log on start up are as follows:
>
> [Sat Mar 22 20:07:26 2008] [error] python_init: Python version mismatch,
> expected '2.5', found '2.5.2'.
> [Sat Mar 22 20:07:26 2008] [error] python_init: Python executable found
> 'C:\\Program Files\\Apache Software
> Foundation\\Apache2.2\\bin\\httpd.exe'.
>  [Sat Mar 22 20:07:26 2008] [error] python_init: Python path being used
> 'C:\\WINDOWS\\system32\\python25.zip;C:\\Program
> Files\\Python25\\Lib;C:\\Program
> Files\\Python25\\DLLs;C:\\Program
> Files\\Python25\\Lib\\lib-tk;;C:\\Program Files\\Apache
> Software Foundation\\Apache2.2\\bin'.
>
> Any help on this matter would be greatly appreciated.

Please use the mod_python mailing list in future. Details on www.modpython.org.

Anyway, this mismatch in patchlevel revision is not a problem, the bug
report even says this is this case with the suggested change being to
ignore the patchlevel revision number so people don't think it is a
problem.

There would only be a problem if there was a different in major or
minor version number. The only exception to this is where UNIX was
being used and due to a poor Python installation there was no shared
library for Python available and so mod_python.so included a static
version of library which wouldn't change if the main Python
installation was updated.

See also sections 'ModPython Version Mismatch' and 'Python Patch Level
Mismatch' of:

  http://code.google.com/p/modwsgi/wiki/InstallationIssues

This is from mod_wsgi documentation, but same issues apply.

Graham
From sidney.cadot at jigsaw.nl  Sun Mar 23 06:13:23 2008
From: sidney.cadot at jigsaw.nl (Sidney Cadot)
Date: Sun Mar 23 06:13:28 2008
Subject: [mod_python] PSP handler forces content_type text/html ;
	can this be overridden?
In-Reply-To: <88e286470803221504v2bbeda60uca944144577dc88@mail.gmail.com>
References: <3840776600444162554@unknownmsgid>
	<88e286470803221504v2bbeda60uca944144577dc88@mail.gmail.com>
Message-ID: <044d01c88cce$8a19aff0$9e4d0fd0$@cadot@jigsaw.nl>

Hi Graham,

Thanks for the answer. As you point out it is quite possible to generate a
proper XHTML content-type by going slightly 'below the surface' of PSP.

However as a general principle I shouldn't have resort to that. It feel like
bad practice to look at someone else's code, copy the relevant bits in the
current version of their software, and paste it into my own code, changing
the single line that is disagreeable for my current problem.

In my opinion it would be a lot nicer (from a software engineering
standpoint) if there were a documented way of overriding the content-type
that the PSP.handler() sets, that is available in the standard, published
interface of PSP.

Something like:

class PSP:
    def handler(req):
        req.content_type = config.get("PythonPSPContentType", "text/html")
        ... etcetera ...


Is this the correct mailing list to suggest / argue for such a change or
should I head over to python-dev@httpd.apache.org ?

Cheerio, Sidney


From graham.dumpleton at gmail.com  Sun Mar 23 06:21:43 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Sun Mar 23 06:21:48 2008
Subject: [mod_python] PSP handler forces content_type text/html ;
	can this be overridden?
In-Reply-To: <-4983919311374577227@unknownmsgid>
References: <3840776600444162554@unknownmsgid>
	<88e286470803221504v2bbeda60uca944144577dc88@mail.gmail.com>
	<-4983919311374577227@unknownmsgid>
Message-ID: <88e286470803230321t35318b52r7cd45d6cf1cc8a9e@mail.gmail.com>

On 23/03/2008, Sidney Cadot <sidney.cadot@jigsaw.nl> wrote:
> Hi Graham,
>
>  Thanks for the answer. As you point out it is quite possible to generate a
>  proper XHTML content-type by going slightly 'below the surface' of PSP.
>
>  However as a general principle I shouldn't have resort to that. It feel like
>  bad practice to look at someone else's code, copy the relevant bits in the
>  current version of their software, and paste it into my own code, changing
>  the single line that is disagreeable for my current problem.
>
>  In my opinion it would be a lot nicer (from a software engineering
>  standpoint) if there were a documented way of overriding the content-type
>  that the PSP.handler() sets, that is available in the standard, published
>  interface of PSP.
>
>  Something like:
>
>  class PSP:
>     def handler(req):
>         req.content_type = config.get("PythonPSPContentType", "text/html")
>         ... etcetera ...
>
>
>  Is this the correct mailing list to suggest / argue for such a change or
>  should I head over to python-dev@httpd.apache.org ?

Here is as good as place as any, the developer list has been very
quiet for a long time.

Anyway, I would not be concerned about dropping below the surface, the
PSP object is meant to be used directly and you are not restricted to
just using the psp top level handler. Many people use PSP object
directly from publisher handlers to generate response content, often
as non HTML.

If you want to suggest something like above, best to create an issue for it at:

  http://issues.apache.org/jira/browse/MODPYTHON

That way it will not be forgotten if anyone ever decides to go and do
further work on PSP.

Graham
From brunson at brunson.com  Sun Mar 23 12:06:14 2008
From: brunson at brunson.com (Eric Brunson)
Date: Sun Mar 23 12:06:20 2008
Subject: [mod_python] PSP handler forces content_type text/html ;	can
	this be overridden?
In-Reply-To: <044d01c88cce$8a19aff0$9e4d0fd0$@cadot@jigsaw.nl>
References: <3840776600444162554@unknownmsgid>	<88e286470803221504v2bbeda60uca944144577dc88@mail.gmail.com>
	<044d01c88cce$8a19aff0$9e4d0fd0$@cadot@jigsaw.nl>
Message-ID: <47E67FF6.5080105@brunson.com>

Sidney Cadot wrote:
> Hi Graham,
>
> Thanks for the answer. As you point out it is quite possible to generate a
> proper XHTML content-type by going slightly 'below the surface' of PSP.
>
> However as a general principle I shouldn't have resort to that. It feel like
> bad practice to look at someone else's code, copy the relevanu uuuu uu    bt bits in the
> current version of their software, and paste it into my own code, changing
> the single line that is disagreeable for my current problem.
>   

I disagree.  The purpose of mod_python is not be the ultimate request 
handler out of the box, I feel it's main purpose is to allow a developer 
to write his own apache handlers without resorting to C.  It is 
documented that, though fully functional and usable as is, the publisher 
handler supplied in the distribution is merely an example of what a 
publisher can do and can be used as the basis for your own code.  
Similarly, the PSP handler, while functional and capable of meeting the 
needs of 90% of its audience, is a basis for extension.

I wouldn't oppose a patch the the default PSP handler to your ends if 
you submitted one, but it definitely lies in a gray area at the top of a 
slippery slope, to mix metaphors.

Just my two cents,
e.

> In my opinion it would be a lot nicer (from a software engineering
> standpoint) if there were a documented way of overriding the content-type
> that the PSP.handler() sets, that is available in the standard, published
> interface of PSP.
>
> Something like:
>
> class PSP:
>     def handler(req):
>         req.content_type = config.get("PythonPSPContentType", "text/html")
>         ... etcetera ...
>
>
> Is this the correct mailing list to suggest / argue for such a change or
> should I head over to python-dev@httpd.apache.org ?
>
> Cheerio, Sidney
>
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>   

From jeffreyz at broadpark.no  Sun Mar 23 17:52:27 2008
From: jeffreyz at broadpark.no (Jeffrey A. Zelt)
Date: Sun Mar 23 17:52:48 2008
Subject: [mod_python] Building mod_python 3.3.1 for Python 2.5.2 on Mac OS X
	10.5.2 (Leopard)
Message-ID: <E1E21F1B-1890-4014-9A93-D184BF0D3B7E@broadpark.no>

I had trouble building mod-pyhon 3.3.1 on Mac OS X 10.5.2 (Leopard),  
so I thought I would share the solution here.

I have installed Python 2.5.2 into /usr/local (to use instead of  
Leopard's default 2.5.1 distribution).  It is not that v2.5.2 provides  
so many improvements over v2.5.1; rather, Apple has shown in the past  
that they do not upgrade their version of Python between major OX X  
updates, and I would like to be able to take advantage of all future  
improvements in v2.5.x and soon v2.6.x (possibly as early as this  
summer).

I have also installed the Apache 2.2.8 web server (instead of Apples  
default Apache server, which I think is also v2.2.8).

I did not touch/modify Apple's default Python 2.5.1 or Apache 2.2.8  
installations in any way.

First, I will describe the problem and then I will show the *solution*  
that solves this problem.



Problem:

If you perform a normal mod_python build, the copy of mod_python.so  
that is created by the build process has the python module import  
paths from Apple's Python 2.5.1 installation *hardwired* into it.  I  
know this is so because I looked into the mod_python.so file (even  
though this is a binary file), and I could see strings that referred  
to  Apple's Python 2.5.1 installation.

Note that this occurred even though I specified the mod_python  
configure option:

     --with-python=/usr/local/bin/python2.5

(which is the Python 2.5.2 installation I installed myself).

When I tried to connect to my Apache 2.2.8 web server with a request  
that was routed to mod_python (such as the /mpinfo testhandler), I  
received a generic 500 Server Error page in my web browser and the  
Apache error log file contained the following:

[Sat Mar 15 17:19:48 2008] [error] python_init: Python version  
mismatch, expected '2.5.2', found '2.5.1'.
[Sat Mar 15 17:19:48 2008] [error] python_init: Python executable  
found '/usr/local/bin/python'.
[Sat Mar 15 17:19:48 2008] [error] python_init: Python path being used  
'/System/Library/Frameworks/Python.framework/Versions/2.5/lib/ 
python25.zip:/System/Library/Frameworks/Python.framework/Versions/2.5/ 
lib/python2.5/:/System/Library/Frameworks/Python.framework/Versions/ 
2.5/lib/python2.5/plat-darwin:/System/Library/Frameworks/ 
Python.framework/Versions/2.5/lib/python2.5/plat-mac:/System/Library/ 
Frameworks/Python.framework/Versions/2.5/lib/python2.5/plat-mac/lib- 
scriptpackages:/System/Library/Frameworks/Python.framework/Versions/ 
2.5/lib/python2.5/../../Extras/lib/python:/System/Library/Frameworks/ 
Python.framework/Versions/2.5/lib/python2.5/lib-tk:/System/Library/ 
Frameworks/Python.framework/Versions/2.5/lib/python2.5/lib-dynload'.
[Sat Mar 15 17:19:48 2008] [notice] mod_python: Creating 32 session  
mutexes based on 256 max processes and 0 max threads.
[Sat Mar 15 17:19:48 2008] [notice] mod_python: using mutex_directory / 
tmp
[Sat Mar 15 17:19:48 2008] [notice] Digest: generating secret for  
digest authentication ...
[Sat Mar 15 17:19:48 2008] [notice] Digest: done
[Sat Mar 15 17:19:49 2008] [notice] Apache/2.2.8 (Unix) mod_ssl/2.2.8  
OpenSSL/0.9.7l DAV/2 mod_python/3.3.1 Python/2.5.1 SVN/1.4.6  
configured -- resuming normal operations

Notice that even though the Apache process found Python 2.5.2 in /usr/ 
local/bin (I was careful to set the PATH environment variable  
appropriately in my launchctl configuration file for the web server),  
the python module import paths all seem to refer to Apple's default  
Python 2.5.1 distribution (which does not have the mod_python package  
installed, of course).  Needless to say, mod_python was not useable.



Solution:

1. Before building mod_python, execute:

    $ cd /System/Library/Frameworks
    $ sudo mv Python.framework XXX_Python.framework

2. After building mod_python, revert this change with:

    $ cd /System/Library/Frameworks
    $ sudo mv XXX_Python.framework Python.framework

In other words, the build process should look something like the  
following (the configure options you choose may be different that  
those I used):

    $  cd /System/Library/Frameworks
    $  sudo mv Python.framework XXX_Python.framework

    $  cd  <mod_python distribution directory>
    $  ./configure \
    > --with-apxs=/usr/local/apache2/bin/apxs \
    > --with-python=/usr/local/bin/python2.5 \
    > --with-max-locks=32
    $  make
    $  sudo make install

    $  cd /System/Library/Frameworks
    $  sudo mv XXX_Python.framework Python.framework



Conjecture:

I am not a C programmer, but I would guess that there is a slight  
problem with the build system for mod_python on Leopard that needs to  
be fixed.  If you supply the configure option:

    --with-python=/usr/local/bin/python2.5

the build process should ignore everything to do with Apple's Python  
2.5.1 distribution, but it does not.  It seems that the "sudo mv ..."  
commands from the recipe above are enough to temporarily hide Apple's  
Python 2.5.1 distribution from the mod_python build system so that a  
mod_python.so module can be built that is solely dependendent on the  
Python 2.5.2 distribution I specified in the configure options.  Let's  
hope that the mod_python distribution is updated soon so that others  
are not bitten by this bug.

Even if my conjecture is not correct, at least you have a recipe for  
successfully installing mod_python under the conditions I outlined  
above.

Jeffrey



From graham.dumpleton at gmail.com  Sun Mar 23 18:48:01 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Sun Mar 23 18:48:07 2008
Subject: [mod_python] Building mod_python 3.3.1 for Python 2.5.2 on Mac OS
	X 10.5.2 (Leopard)
In-Reply-To: <E1E21F1B-1890-4014-9A93-D184BF0D3B7E@broadpark.no>
References: <E1E21F1B-1890-4014-9A93-D184BF0D3B7E@broadpark.no>
Message-ID: <88e286470803231548x348ea495udcfbd35effea2d12@mail.gmail.com>

Please try source from subversion for mod_python instead. Should work
without you needing to rename existing framework directory.  See:

  http://www.modpython.org/pipermail/mod_python/2008-March/024954.html

You will still need --with-apxs and --with-python commands.

Graham

On 24/03/2008, Jeffrey A. Zelt <jeffreyz@broadpark.no> wrote:
> I had trouble building mod-pyhon 3.3.1 on Mac OS X 10.5.2 (Leopard),
>  so I thought I would share the solution here.
>
>  I have installed Python 2.5.2 into /usr/local (to use instead of
>  Leopard's default 2.5.1 distribution).  It is not that v2.5.2 provides
>  so many improvements over v2.5.1; rather, Apple has shown in the past
>  that they do not upgrade their version of Python between major OX X
>  updates, and I would like to be able to take advantage of all future
>  improvements in v2.5.x and soon v2.6.x (possibly as early as this
>  summer).
>
>  I have also installed the Apache 2.2.8 web server (instead of Apples
>  default Apache server, which I think is also v2.2.8).
>
>  I did not touch/modify Apple's default Python 2.5.1 or Apache 2.2.8
>  installations in any way.
>
>  First, I will describe the problem and then I will show the *solution*
>  that solves this problem.
>
>
>
>  Problem:
>
>  If you perform a normal mod_python build, the copy of mod_python.so
>  that is created by the build process has the python module import
>  paths from Apple's Python 2.5.1 installation *hardwired* into it.  I
>  know this is so because I looked into the mod_python.so file (even
>  though this is a binary file), and I could see strings that referred
>  to  Apple's Python 2.5.1 installation.
>
>  Note that this occurred even though I specified the mod_python
>  configure option:
>
>      --with-python=/usr/local/bin/python2.5
>
>  (which is the Python 2.5.2 installation I installed myself).
>
>  When I tried to connect to my Apache 2.2.8 web server with a request
>  that was routed to mod_python (such as the /mpinfo testhandler), I
>  received a generic 500 Server Error page in my web browser and the
>  Apache error log file contained the following:
>
>  [Sat Mar 15 17:19:48 2008] [error] python_init: Python version
>  mismatch, expected '2.5.2', found '2.5.1'.
>  [Sat Mar 15 17:19:48 2008] [error] python_init: Python executable
>  found '/usr/local/bin/python'.
>  [Sat Mar 15 17:19:48 2008] [error] python_init: Python path being used
>  '/System/Library/Frameworks/Python.framework/Versions/2.5/lib/
>  python25.zip:/System/Library/Frameworks/Python.framework/Versions/2.5/
>  lib/python2.5/:/System/Library/Frameworks/Python.framework/Versions/
>  2.5/lib/python2.5/plat-darwin:/System/Library/Frameworks/
>  Python.framework/Versions/2.5/lib/python2.5/plat-mac:/System/Library/
>  Frameworks/Python.framework/Versions/2.5/lib/python2.5/plat-mac/lib-
>  scriptpackages:/System/Library/Frameworks/Python.framework/Versions/
>  2.5/lib/python2.5/../../Extras/lib/python:/System/Library/Frameworks/
>  Python.framework/Versions/2.5/lib/python2.5/lib-tk:/System/Library/
>  Frameworks/Python.framework/Versions/2.5/lib/python2.5/lib-dynload'.
>  [Sat Mar 15 17:19:48 2008] [notice] mod_python: Creating 32 session
>  mutexes based on 256 max processes and 0 max threads.
>  [Sat Mar 15 17:19:48 2008] [notice] mod_python: using mutex_directory /
>  tmp
>  [Sat Mar 15 17:19:48 2008] [notice] Digest: generating secret for
>  digest authentication ...
>  [Sat Mar 15 17:19:48 2008] [notice] Digest: done
>  [Sat Mar 15 17:19:49 2008] [notice] Apache/2.2.8 (Unix) mod_ssl/2.2.8
>  OpenSSL/0.9.7l DAV/2 mod_python/3.3.1 Python/2.5.1 SVN/1.4.6
>  configured -- resuming normal operations
>
>  Notice that even though the Apache process found Python 2.5.2 in /usr/
>  local/bin (I was careful to set the PATH environment variable
>  appropriately in my launchctl configuration file for the web server),
>  the python module import paths all seem to refer to Apple's default
>  Python 2.5.1 distribution (which does not have the mod_python package
>  installed, of course).  Needless to say, mod_python was not useable.
>
>
>
>  Solution:
>
>  1. Before building mod_python, execute:
>
>     $ cd /System/Library/Frameworks
>     $ sudo mv Python.framework XXX_Python.framework
>
>  2. After building mod_python, revert this change with:
>
>     $ cd /System/Library/Frameworks
>     $ sudo mv XXX_Python.framework Python.framework
>
>  In other words, the build process should look something like the
>  following (the configure options you choose may be different that
>  those I used):
>
>     $  cd /System/Library/Frameworks
>     $  sudo mv Python.framework XXX_Python.framework
>
>     $  cd  <mod_python distribution directory>
>     $  ./configure \
>     > --with-apxs=/usr/local/apache2/bin/apxs \
>     > --with-python=/usr/local/bin/python2.5 \
>     > --with-max-locks=32
>     $  make
>     $  sudo make install
>
>     $  cd /System/Library/Frameworks
>     $  sudo mv XXX_Python.framework Python.framework
>
>
>
>  Conjecture:
>
>  I am not a C programmer, but I would guess that there is a slight
>  problem with the build system for mod_python on Leopard that needs to
>  be fixed.  If you supply the configure option:
>
>     --with-python=/usr/local/bin/python2.5
>
>  the build process should ignore everything to do with Apple's Python
>  2.5.1 distribution, but it does not.  It seems that the "sudo mv ..."
>  commands from the recipe above are enough to temporarily hide Apple's
>  Python 2.5.1 distribution from the mod_python build system so that a
>  mod_python.so module can be built that is solely dependendent on the
>  Python 2.5.2 distribution I specified in the configure options.  Let's
>  hope that the mod_python distribution is updated soon so that others
>  are not bitten by this bug.
>
>  Even if my conjecture is not correct, at least you have a recipe for
>  successfully installing mod_python under the conditions I outlined
>  above.
>
>  Jeffrey
>
>
>
>  _______________________________________________
>  Mod_python mailing list
>  Mod_python@modpython.org
>  http://mailman.modpython.org/mailman/listinfo/mod_python
>
From sidney.cadot at jigsaw.nl  Sun Mar 23 22:50:06 2008
From: sidney.cadot at jigsaw.nl (Sidney Cadot)
Date: Sun Mar 23 22:50:06 2008
Subject: [mod_python] PSP handler forces content_type text/html ;
	can this be overridden?
In-Reply-To: <47E67FF6.5080105@brunson.com>
References: <3840776600444162554@unknownmsgid>	<88e286470803221504v2bbeda60uca944144577dc88@mail.gmail.com>
	<044d01c88cce$8a19aff0$9e4d0fd0$@cadot@jigsaw.nl>
	<47E67FF6.5080105@brunson.com>
Message-ID: <052201c88d59$c473ac60$4d5b0520$@cadot@jigsaw.nl>


Hi Eric,

> I disagree.  The purpose of mod_python is not be the ultimate request
> handler out of the box, I feel it's main purpose is to allow a
> developer to write his own apache handlers without resorting to C.

To that, I agree. The main purpose is making the handlers accessible in
Python; the publisher- and PSP handlers are merely thin layers built on top
of that functionality. On a related note: I distinctly remember that it was
hard to understand this when I first approached the mod-python
documentation. Now that I understand, it's all there, but the learning curve
could perhaps be made less steep by being more explicit about this
distinction, perhaps by explaining this distinction crisply in the
Introduction.

> I wouldn't oppose a patch the the default PSP handler to your ends if
> you submitted one, but it definitely lies in a gray area at the top of
> a slippery slope, to mix metaphors.

Then we must agree to disagree. The PSP handler, out-of-the-box, imposes a
content type of "text/plain" while a content-type of "application/xhtml+xml"
is certainly less usual, but also entirely reasonable in many modern
settings.

A solution would be very easy, eaven easier than my earlier proposal of
introducing a PythonPSPContentType: just piggyback on Apache's "AddType"
mechanism.

In other words: remove the line in PSP that sets the content_type
explicitly, then add a remark to the documentation that people should add
...

AddType text/html .psp

... to their htaccess or server config. I feel this is the "right" way of
dealing with this issue; the PSP module should just refrain from touching
content_type at all.

I understand that this could break existing installations, but that's what
installation notes are for. It really seems that this would be a perfect
solution otherwise.

Best regards,

  Sidney


From sidney.cadot at jigsaw.nl  Sun Mar 23 22:57:10 2008
From: sidney.cadot at jigsaw.nl (Sidney Cadot)
Date: Sun Mar 23 22:57:08 2008
Subject: [mod_python] Persistent objects in sub-interpreters
Message-ID: <052301c88d5a$c1034850$4309d8f0$@cadot@jigsaw.nl>

Hi all,

The whole "raison-d'etre", if you pardon my french, of modpython is to
enable persistent (across request) objects like database connections, in
order to dramatically improve performance compared to solutions where each
request invokes a new interpreter, database connection, etc. At least that's
what I gather from the documentation.

However, I cannot find a documented way of holding objects for reuse between
requests to the same Python subinterpreter instance. (Perhaps I just missed
it?)

How is this done? E.g. how would I make a handler that counts the number of
invocations of itself by storing an integer in the context of its own
sub-interpreter?

Then, how do I build a persistent database connection on top of that?

Regards, Sidney




From graham.dumpleton at gmail.com  Sun Mar 23 23:41:55 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Sun Mar 23 23:42:02 2008
Subject: [mod_python] Persistent objects in sub-interpreters
In-Reply-To: <4772795465774687095@unknownmsgid>
References: <4772795465774687095@unknownmsgid>
Message-ID: <88e286470803232041i1e18c553h6b8fa8c516827b9f@mail.gmail.com>

For a start, read:

  http://www.dscpl.com.au/wiki/ModPython/Articles/TheProcessInterpreterModel

So, taking fact that Apache can be multiprocess into account, use
global variables within a module. Best to use a module which can't be
reloaded though. Ie., one on sys.path and not in document tree.

Graham

On 24/03/2008, Sidney Cadot <sidney.cadot@jigsaw.nl> wrote:
> Hi all,
>
>  The whole "raison-d'etre", if you pardon my french, of modpython is to
>  enable persistent (across request) objects like database connections, in
>  order to dramatically improve performance compared to solutions where each
>  request invokes a new interpreter, database connection, etc. At least that's
>  what I gather from the documentation.
>
>  However, I cannot find a documented way of holding objects for reuse between
>  requests to the same Python subinterpreter instance. (Perhaps I just missed
>  it?)
>
>  How is this done? E.g. how would I make a handler that counts the number of
>  invocations of itself by storing an integer in the context of its own
>  sub-interpreter?
>
>  Then, how do I build a persistent database connection on top of that?
>
>  Regards, Sidney
>
>
>
>
>  _______________________________________________
>  Mod_python mailing list
>  Mod_python@modpython.org
>  http://mailman.modpython.org/mailman/listinfo/mod_python
>
From graham.dumpleton at gmail.com  Mon Mar 24 00:00:36 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Mon Mar 24 00:00:42 2008
Subject: [mod_python] Chaining handlers
In-Reply-To: <20080320192619.GO10751@monkey.uchicago.edu>
References: <20080319201419.GM10751@monkey.uchicago.edu>
	<88e286470803191855l3f03fc4bw6ed8ab727a931f59@mail.gmail.com>
	<20080320031648.GN10751@monkey.uchicago.edu>
	<88e286470803192051i7a4fb590m51581815c1498463@mail.gmail.com>
	<88e286470803192036r2ffd637cpadf601904c56bdc8@mail.gmail.com>
	<20080320192619.GO10751@monkey.uchicago.edu>
Message-ID: <88e286470803232100o59800906rab87a511974a53db@mail.gmail.com>

On 21/03/2008, David Champion <dgc@uchicago.edu> wrote:
> > The access, authentication and authorisation handler phases are:
>  >
>  >   http://www.modpython.org/live/current/doc-html/dir-handlers-ach.html
>  >   http://www.modpython.org/live/current/doc-html/dir-handlers-auh.html
>  >   http://www.modpython.org/live/current/doc-html/dir-handlers-auzh.html
>  >
>  > To get some context also see:
>  >
>  >   http://www.fmc-modeling.org/category/projects/apache/amp/4_4Request_Response_Loop.html
>
>
> I did read those sections of the mod_python manual.  I also just looked
>  at the response loop document, and all seem to agree that under various
>  circumstances (depending on which handler phase you're in) returning OK
>  or DECLINED should pass the request to the next handler.

More or less. One can also return an HTTP error status or DONE to
short circuit any request handling.

>  My code does this, but no matter which phase I've tried (access, auth,
>  headers, fixup, and more) the most I can get is my CGI served as a
>  static text/plain file.  Could it be a matter of priority?  It seems
>  that I'm able to position a C module first in the handler stack; maybe
>  that's why it works (see end).
>
>  > Although authentication phase handler is mainly used for HTTP Basic
>  > authentication, it can be adapted for use in form based login
>  > mechanism. It is a bit more tricky to do though.
>
>
> It doesn't seem any different from trying to accomplish authN in some
>  other phase, but I might be missing something.  Anyway I'm getting the
>  same results from all phases.

Without seeing your Apache configuration for setting up the handlers
and the code of the actual handlers, can't really say why you may be
having a problem.

Graham
From graham.dumpleton at gmail.com  Mon Mar 24 00:04:02 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Mon Mar 24 00:04:07 2008
Subject: [mod_python] Sessions & user management
In-Reply-To: <8D5970DD46B50A409A0E42BA407964FE0E6FCFCE@SGBD012007.dlrmail.ad.delarue.com>
References: <88e286470803190228k1d8f3f0gf3d3920be814eb9f@mail.gmail.com>
	<8D5970DD46B50A409A0E42BA407964FE0E6714CA@SGBD012007.dlrmail.ad.delarue.com>
	<88e286470803190303y36cfe7e3kdedcce50a18d0d36@mail.gmail.com>
	<8D5970DD46B50A409A0E42BA407964FE0E6FCFCE@SGBD012007.dlrmail.ad.delarue.com>
Message-ID: <88e286470803232104q2b7059fen6736cc3cbe9a1dc@mail.gmail.com>

On 21/03/2008, Dominique.Holzwarth@ch.delarue.com
<Dominique.Holzwarth@ch.delarue.com> wrote:
>
> I've tried to secure different server-directories with different user groups now but it doesn't seem to work...

How doesn't it work?

> here's what I've added in the httpd.conf:
>
> <Directory "C:/Program Files/Apache Software Foundation/Apache2.2/htdocs/GUI">
>  AuthType Basic
>  AuthName "Restricted Files"
>  AuthBasicProvider file
>  AuthUserFile "C:/Program Files/Apache Software Foundation/Apache2.2/htaccess/authfile"
>  AuthGroupFile "C:/Program Files/Apache Software Foundation/Apache2.2/htaccess/groupfile"
>  Require valid-user
> </Directory>
>
> <Directory "C:/Program Files/Apache Software Foundation/Apache2.2/htdocs/GUI/private">
>   Require group developer
> </Directory>

What is the Satisfy directive in Apache configuration set to?

> the authfile is located in the directory stated above and looks like this:
>
> user3:$apr1$qJ3.....$lv0tLx5G7AHMooDbVSwXb/
> user1:$apr1$2N3.....$a7s3qCpdNqmWDj1VnWyQ20
> user2:$apr1$VN3.....$7vbus7toyHoXh0CVzyL2O0
>
> the groupfile looks like this:
>
> developer: user1 user2
> translator: user3
>
> I'm not completely sure wether I need the "" for the path-locations or not. But I tried it both ways and it never worked... my system is windows vista btw (don't if that matters...)
>
> Would be nice if anyone could give me some hints what could be wrong...

A bit more information about what URLs you are using, what you are
seeing happen etc, would help otherwise can only guess.

Graham
From dgc at uchicago.edu  Mon Mar 24 00:40:53 2008
From: dgc at uchicago.edu (David Champion)
Date: Mon Mar 24 00:40:59 2008
Subject: [mod_python] Chaining handlers
In-Reply-To: <88e286470803232100o59800906rab87a511974a53db@mail.gmail.com>
References: <20080319201419.GM10751@monkey.uchicago.edu>
	<88e286470803191855l3f03fc4bw6ed8ab727a931f59@mail.gmail.com>
	<20080320031648.GN10751@monkey.uchicago.edu>
	<88e286470803192051i7a4fb590m51581815c1498463@mail.gmail.com>
	<88e286470803192036r2ffd637cpadf601904c56bdc8@mail.gmail.com>
	<20080320192619.GO10751@monkey.uchicago.edu>
	<88e286470803232100o59800906rab87a511974a53db@mail.gmail.com>
Message-ID: <20080324044053.GT10751@monkey.uchicago.edu>

> Without seeing your Apache configuration for setting up the handlers
> and the code of the actual handlers, can't really say why you may be
> having a problem.

I get the same results without any of my own authN code.  It seems to be
some really basic issue with mod_python or my use of it.

unix$ tail -7 httpd.conf
<Location /test>
    PythonDebug On
    SetHandler mod_python

    PythonHeaderParserHandler Example::handler
    PythonPath "sys.path + ['/home/dgc/lib/python']"
</Location>

unix$ cat Example.py
from mod_python import apache

def handler(req):
        return apache.DECLINED

unix$ cat <<XXX >/httpd/test/env.cgi
#!/usr/bin/python

import sys
import os
import cgi
import cgitb

def main():
    print "Content-Type: text/html"
    print
    cgi.print_environ()

if not os.isatty(0):
    cgitb.enable()
if __name__ == "__main__":
    main()
XXX

Loading http://server/test/env.cgi in a browser dumps the text of the
CGI script to me as Content-type: text/html.  Without the <Location/>
block, it works as a CGI should.

-- 
 -D.    dgc@uchicago.edu    NSIT    University of Chicago
From graham.dumpleton at gmail.com  Mon Mar 24 01:26:37 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Mon Mar 24 01:26:42 2008
Subject: [mod_python] Chaining handlers
In-Reply-To: <20080324044053.GT10751@monkey.uchicago.edu>
References: <20080319201419.GM10751@monkey.uchicago.edu>
	<88e286470803191855l3f03fc4bw6ed8ab727a931f59@mail.gmail.com>
	<20080320031648.GN10751@monkey.uchicago.edu>
	<88e286470803192051i7a4fb590m51581815c1498463@mail.gmail.com>
	<88e286470803192036r2ffd637cpadf601904c56bdc8@mail.gmail.com>
	<20080320192619.GO10751@monkey.uchicago.edu>
	<88e286470803232100o59800906rab87a511974a53db@mail.gmail.com>
	<20080324044053.GT10751@monkey.uchicago.edu>
Message-ID: <88e286470803232226j651c3af0x84e999c6edae28d9@mail.gmail.com>

On 24/03/2008, David Champion <dgc@uchicago.edu> wrote:
> > Without seeing your Apache configuration for setting up the handlers
>  > and the code of the actual handlers, can't really say why you may be
>  > having a problem.
>
>
> I get the same results without any of my own authN code.  It seems to be
>  some really basic issue with mod_python or my use of it.
>
>  unix$ tail -7 httpd.conf
>  <Location /test>
>     PythonDebug On
>     SetHandler mod_python

Don't define SetHandler here. This says that mod_python is handling
the content phase which you don't want as you want your CGI script to
do that.

Ie., only define SetHandler or AddHandler as appropriate when using
PythonHandler directive.

Graham

>     PythonHeaderParserHandler Example::handler
>     PythonPath "sys.path + ['/home/dgc/lib/python']"
>  </Location>
>
>  unix$ cat Example.py
>  from mod_python import apache
>
>  def handler(req):
>         return apache.DECLINED
>
>  unix$ cat <<XXX >/httpd/test/env.cgi
>  #!/usr/bin/python
>
>  import sys
>  import os
>  import cgi
>  import cgitb
>
>  def main():
>     print "Content-Type: text/html"
>     print
>     cgi.print_environ()
>
>  if not os.isatty(0):
>     cgitb.enable()
>  if __name__ == "__main__":
>     main()
>  XXX
>
>  Loading http://server/test/env.cgi in a browser dumps the text of the
>  CGI script to me as Content-type: text/html.  Without the <Location/>
>  block, it works as a CGI should.
>
>
>  --
>   -D.    dgc@uchicago.edu    NSIT    University of Chicago
>
From graham.dumpleton at gmail.com  Mon Mar 24 02:30:12 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Mon Mar 24 02:30:18 2008
Subject: [mod_python] Building mod_python 3.3.1 for Python 2.5.2 on Mac OS
	X 10.5.2 (Leopard)
In-Reply-To: <4409B4CA-2D62-45C6-9813-5203920D016F@gmail.com>
References: <E1E21F1B-1890-4014-9A93-D184BF0D3B7E@broadpark.no>
	<88e286470803231548x348ea495udcfbd35effea2d12@mail.gmail.com>
	<4409B4CA-2D62-45C6-9813-5203920D016F@gmail.com>
Message-ID: <88e286470803232330g63535a1fkf4e7f1e2d6af9b65@mail.gmail.com>

Please keep the discussion on the mailing list, don't just reply to me.

On 24/03/2008, Niklas Saers <niklassaers@gmail.com> wrote:
> Thanks Graham,
>  I compiled it according to your mail from svn, used the configure
>  statement
>
>  $ ./configure --with-python=/usr/bin/python --with-apxs=/usr/sbin/apxs
>  $ make
>  $ sudo make install
>
>  Then I added the line "LoadModule mod_python        libexec/apache2/
>  mod_python.so" to httpd.conf and put into my virtualhost file

Read the documentation properly, the LoadModule line should be:

  LoadModule python_module libexec/apache2/mod_python.so

Graham

>  <Location /testhandler>
>    SetHandler mod_python
>    PythonHandler mod_python.testhandler
>  </Location>
>
>  However, when I launch apache now, I get:
>
>  httpd: Syntax error on line 115 of /private/etc/apache2/httpd.conf:
>  Can't locate API module structure `mod_python' in file /usr/libexec/
>  apache2/mod_python.so: dlsym(0x10f7a0, mod_python): symbol not found
>
>  If I do not add the LoadModule statement, I get a 404 for the /
>  testhandler.
>
>  Do you have any suggestions as to what I'm doing wrong? I'm running
>  Leopard with the latest updates.
>
>  Cheers
>
>         Nik
>
>
>  On Mar 23, 2008, at 11:48 PM, Graham Dumpleton wrote:
>
>  > Please try source from subversion for mod_python instead. Should work
>  > without you needing to rename existing framework directory.  See:
>  >
>  >  http://www.modpython.org/pipermail/mod_python/2008-March/024954.html
>  >
>  > You will still need --with-apxs and --with-python commands.
>  >
>  > Graham
>  >
>  > On 24/03/2008, Jeffrey A. Zelt <jeffreyz@broadpark.no> wrote:
>  >> I had trouble building mod-pyhon 3.3.1 on Mac OS X 10.5.2 (Leopard),
>  >> so I thought I would share the solution here.
>  >>
>  >> I have installed Python 2.5.2 into /usr/local (to use instead of
>  >> Leopard's default 2.5.1 distribution).  It is not that v2.5.2
>  >> provides
>  >> so many improvements over v2.5.1; rather, Apple has shown in the past
>  >> that they do not upgrade their version of Python between major OX X
>  >> updates, and I would like to be able to take advantage of all future
>  >> improvements in v2.5.x and soon v2.6.x (possibly as early as this
>  >> summer).
>  >>
>  >> I have also installed the Apache 2.2.8 web server (instead of Apples
>  >> default Apache server, which I think is also v2.2.8).
>  >>
>  >> I did not touch/modify Apple's default Python 2.5.1 or Apache 2.2.8
>  >> installations in any way.
>  >>
>  >> First, I will describe the problem and then I will show the
>  >> *solution*
>  >> that solves this problem.
>  >>
>  >>
>  >>
>  >> Problem:
>  >>
>  >> If you perform a normal mod_python build, the copy of mod_python.so
>  >> that is created by the build process has the python module import
>  >> paths from Apple's Python 2.5.1 installation *hardwired* into it.  I
>  >> know this is so because I looked into the mod_python.so file (even
>  >> though this is a binary file), and I could see strings that referred
>  >> to  Apple's Python 2.5.1 installation.
>  >>
>  >> Note that this occurred even though I specified the mod_python
>  >> configure option:
>  >>
>  >>     --with-python=/usr/local/bin/python2.5
>  >>
>  >> (which is the Python 2.5.2 installation I installed myself).
>  >>
>  >> When I tried to connect to my Apache 2.2.8 web server with a request
>  >> that was routed to mod_python (such as the /mpinfo testhandler), I
>  >> received a generic 500 Server Error page in my web browser and the
>  >> Apache error log file contained the following:
>  >>
>  >> [Sat Mar 15 17:19:48 2008] [error] python_init: Python version
>  >> mismatch, expected '2.5.2', found '2.5.1'.
>  >> [Sat Mar 15 17:19:48 2008] [error] python_init: Python executable
>  >> found '/usr/local/bin/python'.
>  >> [Sat Mar 15 17:19:48 2008] [error] python_init: Python path being
>  >> used
>  >> '/System/Library/Frameworks/Python.framework/Versions/2.5/lib/
>  >> python25.zip:/System/Library/Frameworks/Python.framework/Versions/
>  >> 2.5/
>  >> lib/python2.5/:/System/Library/Frameworks/Python.framework/Versions/
>  >> 2.5/lib/python2.5/plat-darwin:/System/Library/Frameworks/
>  >> Python.framework/Versions/2.5/lib/python2.5/plat-mac:/System/Library/
>  >> Frameworks/Python.framework/Versions/2.5/lib/python2.5/plat-mac/lib-
>  >> scriptpackages:/System/Library/Frameworks/Python.framework/Versions/
>  >> 2.5/lib/python2.5/../../Extras/lib/python:/System/Library/Frameworks/
>  >> Python.framework/Versions/2.5/lib/python2.5/lib-tk:/System/Library/
>  >> Frameworks/Python.framework/Versions/2.5/lib/python2.5/lib-dynload'.
>  >> [Sat Mar 15 17:19:48 2008] [notice] mod_python: Creating 32 session
>  >> mutexes based on 256 max processes and 0 max threads.
>  >> [Sat Mar 15 17:19:48 2008] [notice] mod_python: using
>  >> mutex_directory /
>  >> tmp
>  >> [Sat Mar 15 17:19:48 2008] [notice] Digest: generating secret for
>  >> digest authentication ...
>  >> [Sat Mar 15 17:19:48 2008] [notice] Digest: done
>  >> [Sat Mar 15 17:19:49 2008] [notice] Apache/2.2.8 (Unix) mod_ssl/2.2.8
>  >> OpenSSL/0.9.7l DAV/2 mod_python/3.3.1 Python/2.5.1 SVN/1.4.6
>  >> configured -- resuming normal operations
>  >>
>  >> Notice that even though the Apache process found Python 2.5.2 in /
>  >> usr/
>  >> local/bin (I was careful to set the PATH environment variable
>  >> appropriately in my launchctl configuration file for the web server),
>  >> the python module import paths all seem to refer to Apple's default
>  >> Python 2.5.1 distribution (which does not have the mod_python package
>  >> installed, of course).  Needless to say, mod_python was not useable.
>  >>
>  >>
>  >>
>  >> Solution:
>  >>
>  >> 1. Before building mod_python, execute:
>  >>
>  >>    $ cd /System/Library/Frameworks
>  >>    $ sudo mv Python.framework XXX_Python.framework
>  >>
>  >> 2. After building mod_python, revert this change with:
>  >>
>  >>    $ cd /System/Library/Frameworks
>  >>    $ sudo mv XXX_Python.framework Python.framework
>  >>
>  >> In other words, the build process should look something like the
>  >> following (the configure options you choose may be different that
>  >> those I used):
>  >>
>  >>    $  cd /System/Library/Frameworks
>  >>    $  sudo mv Python.framework XXX_Python.framework
>  >>
>  >>    $  cd  <mod_python distribution directory>
>  >>    $  ./configure \
>  >>> --with-apxs=/usr/local/apache2/bin/apxs \
>  >>> --with-python=/usr/local/bin/python2.5 \
>  >>> --with-max-locks=32
>  >>    $  make
>  >>    $  sudo make install
>  >>
>  >>    $  cd /System/Library/Frameworks
>  >>    $  sudo mv XXX_Python.framework Python.framework
>  >>
>  >>
>  >>
>  >> Conjecture:
>  >>
>  >> I am not a C programmer, but I would guess that there is a slight
>  >> problem with the build system for mod_python on Leopard that needs to
>  >> be fixed.  If you supply the configure option:
>  >>
>  >>    --with-python=/usr/local/bin/python2.5
>  >>
>  >> the build process should ignore everything to do with Apple's Python
>  >> 2.5.1 distribution, but it does not.  It seems that the "sudo mv ..."
>  >> commands from the recipe above are enough to temporarily hide Apple's
>  >> Python 2.5.1 distribution from the mod_python build system so that a
>  >> mod_python.so module can be built that is solely dependendent on the
>  >> Python 2.5.2 distribution I specified in the configure options.
>  >> Let's
>  >> hope that the mod_python distribution is updated soon so that others
>  >> are not bitten by this bug.
>  >>
>  >> Even if my conjecture is not correct, at least you have a recipe for
>  >> successfully installing mod_python under the conditions I outlined
>  >> above.
>  >>
>  >> Jeffrey
>  >>
>  >>
>  >>
>  >> _______________________________________________
>  >> Mod_python mailing list
>  >> Mod_python@modpython.org
>  >> http://mailman.modpython.org/mailman/listinfo/mod_python
>  >>
>  > _______________________________________________
>  > Mod_python mailing list
>  > Mod_python@modpython.org
>  > http://mailman.modpython.org/mailman/listinfo/mod_python
>
>
From graham.dumpleton at gmail.com  Mon Mar 24 02:36:56 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Mon Mar 24 02:37:02 2008
Subject: [mod_python] PSP handler forces content_type text/html ;
	can this be overridden?
In-Reply-To: <47E67FF6.5080105@brunson.com>
References: <3840776600444162554@unknownmsgid>
	<88e286470803221504v2bbeda60uca944144577dc88@mail.gmail.com>
	<47E67FF6.5080105@brunson.com>
Message-ID: <88e286470803232336h391ac06dp818c1a8d4bc7d929@mail.gmail.com>

On 24/03/2008, Eric Brunson <brunson@brunson.com> wrote:
> Sidney Cadot wrote:
>  > Hi Graham,
>  >
>  > Thanks for the answer. As you point out it is quite possible to generate a
>  > proper XHTML content-type by going slightly 'below the surface' of PSP.
>  >
>  > However as a general principle I shouldn't have resort to that. It feel like
>
> > bad practice to look at someone else's code, copy the relevanu uuuu uu    bt bits in the
>
> > current version of their software, and paste it into my own code, changing
>  > the single line that is disagreeable for my current problem.
>  >
>
>
> I disagree.  The purpose of mod_python is not be the ultimate request
>  handler out of the box, I feel it's main purpose is to allow a developer
>  to write his own apache handlers without resorting to C.  It is
>  documented that, though fully functional and usable as is, the publisher
>  handler supplied in the distribution is merely an example of what a
>  publisher can do and can be used as the basis for your own code.
>  Similarly, the PSP handler, while functional and capable of meeting the
>  needs of 90% of its audience, is a basis for extension.

It is arguable that mod_python.psp and mod_python.publisher should not
even be a part of the mod_python package. Unfortunately decisions were
made at some point to make it more than just a Python binding to
Apache. It would have been much better that they were a separate
package. To make things worse, there is stuff in the core of
mod_python (even at C code level) specifically to support those
packages meaning it would be quite hard to separate them from
mod_python and generalise them so that they may for example be hosted
on any WSGI compliant hosting mechanism.

This may be a big issue with Python 3.0 because there is a big
question mark over whether anyone will step forward and port
mod_python to Python 3.0. As such, if the only thing you use
mod_python for is as a jumping off point for a content handler, you
are probably much better off using Python web toolkit that can work on
WSGI as it at least has a chance of surviving going forward into
Python 3.0 even if changes may need to be made to WSGI to allow it.

Graham

>  I wouldn't oppose a patch the the default PSP handler to your ends if
>  you submitted one, but it definitely lies in a gray area at the top of a
>  slippery slope, to mix metaphors.
>
>  Just my two cents,
>
> e.
>
>  > In my opinion it would be a lot nicer (from a software engineering
>  > standpoint) if there were a documented way of overriding the content-type
>  > that the PSP.handler() sets, that is available in the standard, published
>  > interface of PSP.
>  >
>  > Something like:
>  >
>  > class PSP:
>
> >     def handler(req):
>
> >         req.content_type = config.get("PythonPSPContentType", "text/html")
>  >         ... etcetera ...
>  >
>  >
>  > Is this the correct mailing list to suggest / argue for such a change or
>  > should I head over to python-dev@httpd.apache.org ?
>  >
>
> > Cheerio, Sidney
>
> >
>  >
>  > _______________________________________________
>  > Mod_python mailing list
>  > Mod_python@modpython.org
>  > http://mailman.modpython.org/mailman/listinfo/mod_python
>  >
>
>
From clodoaldo.pinto.neto at gmail.com  Mon Mar 24 06:30:01 2008
From: clodoaldo.pinto.neto at gmail.com (Clodoaldo)
Date: Mon Mar 24 06:30:07 2008
Subject: [mod_python] Persistent objects in sub-interpreters
In-Reply-To: <4772795465774687095@unknownmsgid>
References: <4772795465774687095@unknownmsgid>
Message-ID: <a595de7a0803240330h693b65f1k5773765f620ae358@mail.gmail.com>

2008/3/23, Sidney Cadot <sidney.cadot@jigsaw.nl>:
> Hi all,
>
>  The whole "raison-d'etre", if you pardon my french, of modpython is to
>  enable persistent (across request) objects like database connections, in
>  order to dramatically improve performance compared to solutions where each
>  request invokes a new interpreter, database connection, etc. At least that's
>  what I gather from the documentation.
>
>  However, I cannot find a documented way of holding objects for reuse between
>  requests to the same Python subinterpreter instance. (Perhaps I just missed
>  it?)
>
>  How is this done? E.g. how would I make a handler that counts the number of
>  invocations of itself by storing an integer in the context of its own
>  sub-interpreter?
>
>  Then, how do I build a persistent database connection on top of that?

If you are using postgresql consider Pgpool. It is very easy to setup,
it will serve connections to any language not only Python and the most
important, you don't have to worry about your own implementation of
persistent connections.

Regards, Clodoaldo Pinto Neto
From dgc at uchicago.edu  Mon Mar 24 09:38:46 2008
From: dgc at uchicago.edu (David Champion)
Date: Mon Mar 24 09:38:51 2008
Subject: [mod_python] Chaining handlers
In-Reply-To: <88e286470803232226j651c3af0x84e999c6edae28d9@mail.gmail.com>
References: <20080319201419.GM10751@monkey.uchicago.edu>
	<88e286470803191855l3f03fc4bw6ed8ab727a931f59@mail.gmail.com>
	<20080320031648.GN10751@monkey.uchicago.edu>
	<88e286470803192051i7a4fb590m51581815c1498463@mail.gmail.com>
	<88e286470803192036r2ffd637cpadf601904c56bdc8@mail.gmail.com>
	<20080320192619.GO10751@monkey.uchicago.edu>
	<88e286470803232100o59800906rab87a511974a53db@mail.gmail.com>
	<20080324044053.GT10751@monkey.uchicago.edu>
	<88e286470803232226j651c3af0x84e999c6edae28d9@mail.gmail.com>
Message-ID: <20080324133846.GU10751@monkey.uchicago.edu>

> Don't define SetHandler here. This says that mod_python is handling
> the content phase which you don't want as you want your CGI script to
> do that.
> 
> Ie., only define SetHandler or AddHandler as appropriate when using
> PythonHandler directive.

OK, sorry for a basic Apache question, but how do I "add" a handler
without specifying what content type/extension it's going to handle
content for?

My module should be asked to handle every file under the <Location>,
regardless of extension or content type.  It will decide whether to
decline according to its own principles, not according to type.

I couldn't find any way to do this with mod_python.  With my C module,
it's not necessary -- I just put its custom configuration directives
within the <Location> block.  But mod_python has no analogous behavior
that I can see, and I can't tell how to say "use mod_python with these
params" without setting a handler.

-- 
 -D.    dgc@uchicago.edu    NSIT    University of Chicago
From graham.dumpleton at gmail.com  Mon Mar 24 16:19:07 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Mon Mar 24 16:19:13 2008
Subject: [mod_python] Chaining handlers
In-Reply-To: <20080324133846.GU10751@monkey.uchicago.edu>
References: <20080319201419.GM10751@monkey.uchicago.edu>
	<88e286470803191855l3f03fc4bw6ed8ab727a931f59@mail.gmail.com>
	<20080320031648.GN10751@monkey.uchicago.edu>
	<88e286470803192051i7a4fb590m51581815c1498463@mail.gmail.com>
	<88e286470803192036r2ffd637cpadf601904c56bdc8@mail.gmail.com>
	<20080320192619.GO10751@monkey.uchicago.edu>
	<88e286470803232100o59800906rab87a511974a53db@mail.gmail.com>
	<20080324044053.GT10751@monkey.uchicago.edu>
	<88e286470803232226j651c3af0x84e999c6edae28d9@mail.gmail.com>
	<20080324133846.GU10751@monkey.uchicago.edu>
Message-ID: <88e286470803241319i29a62a3br1f6df4cfe12f243b@mail.gmail.com>

On 25/03/2008, David Champion <dgc@uchicago.edu> wrote:
> > Don't define SetHandler here. This says that mod_python is handling
>  > the content phase which you don't want as you want your CGI script to
>  > do that.
>  >
>  > Ie., only define SetHandler or AddHandler as appropriate when using
>  > PythonHandler directive.
>
> OK, sorry for a basic Apache question, but how do I "add" a handler
>  without specifying what content type/extension it's going to handle
>  content for?

For the content handler phase, ie., PythonHandler, you can't. That is,
you cannot chain mod_python and non mod_python handlers within the
content handler phase. The only half exception to this is if
mod_python content handler returns DECLINED then control will still
pass through to 'default-handler' which serves up target as static
file.

>  My module should be asked to handle every file under the <Location>,
>  regardless of extension or content type.  It will decide whether to
>  decline according to its own principles, not according to type.

Register a fixup handler and put PythonFixupHandler in that Location
container. If you then want to hijack content handling phase for that
request and override what else was meant to happen, from memory do the
following in fixup handler and return:

  req.handler = 'mod_python'
  req.add_handler('PythonHandler', somehandlerfunc)

Check documentation for the mod_python request add_handler() function
as probably haven't remembered the arguments correctly.

Do note that mod_python handlers get added as middle handlers and you
can't control their position relative to handlers in same phase. This
may be limiting for example if you actually had to ensure it was run
after mod_dir handler in fixup phase. You may therefore need to do
extra checks to avoid doing stuff which you shouldn't because later
handler in that phase may want to do it. Eg. trailing slash
redirection.

Graham

>  I couldn't find any way to do this with mod_python.  With my C module,
>  it's not necessary -- I just put its custom configuration directives
>  within the <Location> block.  But mod_python has no analogous behavior
>  that I can see, and I can't tell how to say "use mod_python with these
>  params" without setting a handler.
>
>
>  --
>
>  -D.    dgc@uchicago.edu    NSIT    University of Chicago
>
> _______________________________________________
>  Mod_python mailing list
>  Mod_python@modpython.org
>  http://mailman.modpython.org/mailman/listinfo/mod_python
>
From graham.dumpleton at gmail.com  Mon Mar 24 23:37:35 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Mon Mar 24 23:37:42 2008
Subject: [mod_python] Chaining handlers
In-Reply-To: <88e286470803192036r2ffd637cpadf601904c56bdc8@mail.gmail.com>
References: <20080319201419.GM10751@monkey.uchicago.edu>
	<88e286470803191855l3f03fc4bw6ed8ab727a931f59@mail.gmail.com>
	<20080320031648.GN10751@monkey.uchicago.edu>
	<88e286470803192036r2ffd637cpadf601904c56bdc8@mail.gmail.com>
Message-ID: <88e286470803242037u15e27885pe7f82e791d067568@mail.gmail.com>

On 20/03/2008, Graham Dumpleton <graham.dumpleton@gmail.com> wrote:
>  I'll have a look to see if I can find Apache module that does that.
>  Would rather pursue that than try to find and resurrect code I had for
>  doing form based login as authentication handler as right now not sure
>  where I put it. :-)

Someone on mod_wsgi list pointed me at this module:

  http://www.openfusion.com.au/labs/mod_auth_tkt/

May be of interest.

Graham
From Dominique.Holzwarth at ch.delarue.com  Tue Mar 25 02:42:10 2008
From: Dominique.Holzwarth at ch.delarue.com (Dominique.Holzwarth@ch.delarue.com)
Date: Tue Mar 25 02:43:45 2008
Subject: [mod_python] Sessions & user management
In-Reply-To: <88e286470803232104q2b7059fen6736cc3cbe9a1dc@mail.gmail.com>
Message-ID: <8D5970DD46B50A409A0E42BA407964FE0E73325F@SGBD012007.dlrmail.ad.delarue.com>


Hello graham

The problem had something to do with apache not running correctly on windows vista. After I reinstalled apache following some guide for vista it's working as intended now.
I'm gonna try it on windows xp now as well, which hopefully shouldn't be that troublesome!

Greetings
Dominique 

-----Original Message-----
From: Graham Dumpleton [mailto:graham.dumpleton@gmail.com] 
Sent: Montag, 24. M?rz 2008 05:04
To: Holzwarth, Dominique (Berne Bauhaus)
Cc: mod_python@modpython.org
Subject: Re: [mod_python] Sessions & user management

On 21/03/2008, Dominique.Holzwarth@ch.delarue.com
<Dominique.Holzwarth@ch.delarue.com> wrote:
>
> I've tried to secure different server-directories with different user groups now but it doesn't seem to work...

How doesn't it work?

> here's what I've added in the httpd.conf:
>
> <Directory "C:/Program Files/Apache Software 
> Foundation/Apache2.2/htdocs/GUI">  AuthType Basic  AuthName 
> "Restricted Files"
>  AuthBasicProvider file
>  AuthUserFile "C:/Program Files/Apache Software Foundation/Apache2.2/htaccess/authfile"
>  AuthGroupFile "C:/Program Files/Apache Software Foundation/Apache2.2/htaccess/groupfile"
>  Require valid-user
> </Directory>
>
> <Directory "C:/Program Files/Apache Software Foundation/Apache2.2/htdocs/GUI/private">
>   Require group developer
> </Directory>

What is the Satisfy directive in Apache configuration set to?

> the authfile is located in the directory stated above and looks like this:
>
> user3:$apr1$qJ3.....$lv0tLx5G7AHMooDbVSwXb/
> user1:$apr1$2N3.....$a7s3qCpdNqmWDj1VnWyQ20
> user2:$apr1$VN3.....$7vbus7toyHoXh0CVzyL2O0
>
> the groupfile looks like this:
>
> developer: user1 user2
> translator: user3
>
> I'm not completely sure wether I need the "" for the path-locations or 
> not. But I tried it both ways and it never worked... my system is 
> windows vista btw (don't if that matters...)
>
> Would be nice if anyone could give me some hints what could be wrong...

A bit more information about what URLs you are using, what you are seeing happen etc, would help otherwise can only guess.

Graham


*********************************
This e-mail and any files attached are strictly confidential, may be legally privileged and are intended solely for the addressee. If you are not the intended recipient please notify the sender immediately by return email and then delete the e-mail and any attachments immediately. The views and or opinions expressed in this e-mail are not necessarily the views of De La Rue plc or any of its subsidiaries and the De La Rue Group of companies, their directors, officers and employees make no representation about and accept no liability for its accuracy or completeness. You should ensure that you have adequate virus protection as the De La Rue Group of companies do not accept liability for any viruses 
De La Rue plc Registered No.3834125, De La Rue Holdings plc Registered No 58025 and De La Rue International Limited Registered No 720284 are all registered in England with their registered office at: De La Rue House, Jays Close, Viables, Hampshire RG22 4BS

From Dominique.Holzwarth at ch.delarue.com  Tue Mar 25 05:37:46 2008
From: Dominique.Holzwarth at ch.delarue.com (Dominique.Holzwarth@ch.delarue.com)
Date: Tue Mar 25 05:39:21 2008
Subject: [mod_python] Importing package under mod_python
Message-ID: <8D5970DD46B50A409A0E42BA407964FE0E733786@SGBD012007.dlrmail.ad.delarue.com>


Hello everyone

I've got some problems with importing modules from packages when using
mod_python.
Currently I'm using the Publisher Handler which is configured like this:

<Directory "C:\Program Files\Apache Software
Foundation\Apache2.2\htdocs\python"> 
		AddHandler mod_python .py
		PythonHandler mod_python.publisher		
		PythonDebug On 
</Directory>

My directory structure looks like this

python/
	main.py
	database/
		__init__.py
		common.py
(i hope the tabs will be posted correctly...)

The main.py looks like this:

*********************************
from database import common

def index(req):
	msg = database.common.myCommonVariable
	return msg
*********************************

The common.py just defines a variable:

myCommonVariable = "hello"

When I do a http://localhost/python/main.py I get the following error:

URI:            '/python/main.py'
Location:       None
Directory:      'C:/Program Files/Apache Software
Foundation/Apache2.2/htdocs/python/'
Filename:       'C:\\Program Files\\Apache Software
Foundation\\Apache2.2\\htdocs\\python\\main.py'
PathInfo:       ''

Phase:          'PythonHandler'
Handler:        'mod_python.publisher'

Traceback (most recent call last):

  File "C:\Program
Files\Python25\Lib\site-packages\mod_python\importer.py", line 1537, in
HandlerDispatch
    default=default_handler, arg=req, silent=hlist.silent)

  File "C:\Program
Files\Python25\Lib\site-packages\mod_python\importer.py", line 1229, in
_process_target
    result = _execute_target(config, req, object, arg)

  File "C:\Program
Files\Python25\Lib\site-packages\mod_python\importer.py", line 1128, in
_execute_target
    result = object(arg)

  File "C:\Program
Files\Python25\Lib\site-packages\mod_python\publisher.py", line 204, in
handler
    module = page_cache[req]

  File "C:\Program
Files\Python25\Lib\site-packages\mod_python\importer.py", line 1059, in
__getitem__
    return import_module(req.filename)

  File "C:\Program
Files\Python25\Lib\site-packages\mod_python\importer.py", line 296, in
import_module
    log, import_path)

  File "C:\Program
Files\Python25\Lib\site-packages\mod_python\importer.py", line 680, in
import_module
    execfile(file, module.__dict__)

  File "C:\Program Files\Apache Software
Foundation\Apache2.2\htdocs\python\main.py", line 1, in <module>
    from database import common

ImportError: No module named database

I've found an old post in the mailing list concerning the same problem
and according to that post it should work... Does anyone have an idea
what could be wrong?	

Greetings
Dominique

*********************************
This e-mail and any files attached are strictly confidential, may be legally privileged and are intended solely for the addressee. If you are not the intended recipient please notify the sender immediately by return email and then delete the e-mail and any attachments immediately. The views and or opinions expressed in this e-mail are not necessarily the views of De La Rue plc or any of its subsidiaries and the De La Rue Group of companies, their directors, officers and employees make no representation about and accept no liability for its accuracy or completeness. You should ensure that you have adequate virus protection as the De La Rue Group of companies do not accept liability for any viruses 
De La Rue plc Registered No.3834125, De La Rue Holdings plc Registered No 58025 and De La Rue International Limited Registered No 720284 are all registered in England with their registered office at: De La Rue House, Jays Close, Viables, Hampshire RG22 4BS
From list at joreybump.com  Tue Mar 25 08:55:02 2008
From: list at joreybump.com (Jorey Bump)
Date: Tue Mar 25 08:55:08 2008
Subject: [mod_python] Importing package under mod_python
In-Reply-To: <8D5970DD46B50A409A0E42BA407964FE0E733786@SGBD012007.dlrmail.ad.delarue.com>
References: <8D5970DD46B50A409A0E42BA407964FE0E733786@SGBD012007.dlrmail.ad.delarue.com>
Message-ID: <47E8F626.1090808@joreybump.com>

Dominique.Holzwarth@ch.delarue.com wrote, at 03/25/2008 05:37 AM:

> I've got some problems with importing modules from packages when using
> mod_python.
> Currently I'm using the Publisher Handler which is configured like this:
> 
> <Directory "C:\Program Files\Apache Software
> Foundation\Apache2.2\htdocs\python"> 
> 		AddHandler mod_python .py
> 		PythonHandler mod_python.publisher		
> 		PythonDebug On 
> </Directory>
> 
> My directory structure looks like this
> 
> python/
> 	main.py
> 	database/
> 		__init__.py
> 		common.py

The new importer in mod_python will ignore packages in the published 
directory and does not automatically add this location to the path when 
it falls back to the regular Python importer. In a nutshell, avoid 
trying to publish packages.

There are other ways to include your package in the Python path. In 
fact, yours is a good candidate, since I'm guessing you have included 
database connection credentials, which you should NEVER put in your 
DocumentRoot. Any number of scenarios could result in your credentials 
being exposed.

I create many of my mod_python applications as packages, and simply 
publish a wrapper that imports one or two functions from the package. In 
my virtual host configuration, I add the directory that contains all of 
my packages to the path:

   PythonPath "['/var/www/www.example.com/python'] + sys.path"

Note that this directory is outside the DocumentRoot, which might be:

   /var/www/www.example.com/site

So, for a specific directory, the resulting configuration might be:

   # Set Python path for entire virtual host
   PythonPath "['/var/www/www.example.com/python'] + sys.path"
   # All files in this directory use the Publisher handler
   <Directory /var/www/www.example.com/site/app>
     SetHandler python-program
     PythonHandler mod_python.publisher
     PythonDebug On
   </Directory>
   # Custom virtual handler, using module in Python path
   <Location /virtual>
     SetHandler python-program
     # this module (can be a package) must be in the Python path!
     PythonHandler virtual
     PythonDebug On
   </Location>

With this approach, various handlers in a specific host can share a 
common directory of modules, without needing to add it to the system's 
site-packages directory, where it would be too public. There is also a 
security advantage in storing database connection credentials outside 
the DocumentRoot, where they are less likely to be exposed (due to a 
misconfiguration, or absent-mindedly moving your code to a new host 
before mod_python is properly configured). You simply import the modules 
as you would in any other Python application.

I'm happy with this approach, but the biggest disadvantage is that it 
won't take full advantage of automatic module reloading, so moving new 
code to a production environment might still involve restarting apache 
httpd. For alternative approaches and an excellent explanation of how 
packages are affected by the new module importer, see Graham's response 
in this thread:

  http://www.modpython.org/pipermail/mod_python/2006-November/022726.html



From emyr at teuluthomas.com  Tue Mar 25 14:04:17 2008
From: emyr at teuluthomas.com (Emyr Thomas)
Date: Tue Mar 25 14:04:22 2008
Subject: [mod_python] mod_python on RHEL5
In-Reply-To: <88e286470803201430j6176e24p3a6938b7ea36e51f@mail.gmail.com>
References: <8fb874820803200943r6b84dae5k2d6eb88b2b3c05d@mail.gmail.com>
	<88e286470803201430j6176e24p3a6938b7ea36e51f@mail.gmail.com>
Message-ID: <8fb874820803251104p568d2e6q68aadc7e00a1ddc3@mail.gmail.com>

Thanks Graham, this worked perfectly.

Just as a reminder to myself and others using RHEL (where envvars
doesn't exist), you can set the PYTHONHOME environment variable in
/etc/sysconfig/httpd

--Emyr

On Thu, Mar 20, 2008 at 9:30 PM, Graham Dumpleton
<graham.dumpleton@gmail.com> wrote:
> See:
>
>   http://issues.apache.org/jira/browse/MODPYTHON-225
>
>  Find the 'envvars' file in the same directory as httpd executable for
>  your Apache and set PYTHONHOME environment variable to '/usr/local'
>  and export it.
>
>   PYTHONHOME=/usr/local
>   export PYTHONHOME
>
>  It is the same issues as described in section 'Multiple Python Versions' of:
>
>   http://code.google.com/p/modwsgi/wiki/InstallationIssues
>
>  for mod_wsgi except that mod_wsgi has a proper directive to allow
>  location to be overridden where as this is only described for
>  mod_python to be done in referenced issues above.
>
>  Graham
>
>
>
>  On 21/03/2008, Emyr Thomas <emyr@teuluthomas.com> wrote:
>  > RedHat Enterprise Linux 5.1
>  >  Apache 2.2.3 (system installed)
>  >  Python 2.4.4 (custom install in /usr/locoal)
>  >  mod_python 3.3.1
>  >
>  >  I know you mod_python experts are probably sick and tired of hearing
>  >  these kinds of questions, but I'm at my wit's end!
>  >  I've seen a number of posts from people with very similar problems,
>  >  but having tried a number of "solutions", none of them seem to work!
>  >
>  >  I did a make altinstall of python, then I configured mod_python like so:
>  >
>  >  ./configure \
>  >     --with-apxs=/usr/sbin/apxs \
>  >     --with-python=/usr/local/bin/python2.4 \
>  >     --with-python-src=/usr/local/src/Python-2.4.4
>  >
>  >  After installing mod_python and configuring apache, I try some tests
>  >  but keep getting a 500 Internal Server Error. apache's error log shows
>  >  the following:
>  >
>  >  [Thu Mar 20 16:39:50 2008] [notice] suEXEC mechanism enabled (wrapper:
>  >  /usr/sbin/suexec)
>  >  [Thu Mar 20 16:39:50 2008] [notice] Digest: generating secret for
>  >  digest authentication ...
>  >  [Thu Mar 20 16:39:50 2008] [notice] Digest: done
>  >  [Thu Mar 20 16:39:50 2008] [notice] mod_python: Creating 8 session
>  >  mutexes based on 256 max processes and 0 max threads.
>  >  [Thu Mar 20 16:39:50 2008] [notice] mod_python: using mutex_directory /tmp
>  >  [Thu Mar 20 16:39:50 2008] [notice] Apache/2.2.3 (Red Hat) configured
>  >  -- resuming normal operations
>  >
>  >  [Thu Mar 20 16:40:25 2008] [error] make_obcallback: could not import
>  >  mod_python.apache.\n
>  >  ImportError: No module named mod_python.apache
>  >  [Thu Mar 20 16:40:25 2008] [error] make_obcallback: Python path being
>  >  used "['/usr/lib/python24.zip', '/usr/lib/python2.4',
>  >  '/usr/lib/python2.4/plat-linux2', '/usr/lib/python2.4/lib-tk',
>  >  '/usr/lib/python2.4/lib-dynload', '/usr/lib/python2.4/site-packages',
>  >  '/usr/lib/python2.4/site-packages/Numeric',
>  >  '/usr/lib/python2.4/site-packages/gtk-2.0']".
>  >  [Thu Mar 20 16:40:25 2008] [error] get_interpreter: no interpreter
>  >  callback found.
>  >  [Thu Mar 20 16:40:25 2008] [error] [client 192.168.201.30]
>  >  python_handler: Can't get/create interpreter.
>  >
>  >  Why does the line "Python path being used" show /usr/lib/XXX instead
>  >  of /usr/local/lib ?
>  >
>  >  I've tried switching SELinux off (it's on by default in RHEL5), but
>  >  still the same error.
>  >
>  >  A thousand thanks for anyone who can help me figure this out before I go bald!
>  >
>  >  Emyr
>  >  _______________________________________________
>  >  Mod_python mailing list
>  >  Mod_python@modpython.org
>  >  http://mailman.modpython.org/mailman/listinfo/mod_python
>  >
>
From emyr at teuluthomas.com  Tue Mar 25 14:08:56 2008
From: emyr at teuluthomas.com (Emyr Thomas)
Date: Tue Mar 25 14:09:01 2008
Subject: [mod_python] mod_python on RHEL5
In-Reply-To: <20080320185250.GA18620@connexer.com>
References: <8fb874820803200943r6b84dae5k2d6eb88b2b3c05d@mail.gmail.com>
	<20080320185250.GA18620@connexer.com>
Message-ID: <8fb874820803251108i11d0441bo8af5738f5ec8aff1@mail.gmail.com>

Good point Roberto. One of the pieces in my software stack (Plone
3.0.6) states that it requires Python 2.4.4, but it seems this is
actually not the case as it runs perfectly on Python 2.4.3.

--Emyr

On Thu, Mar 20, 2008 at 6:52 PM, Roberto C. S?nchez
<roberto@connexer.com> wrote:
> On Thu, Mar 20, 2008 at 04:43:15PM +0000, Emyr Thomas wrote:
>  > RedHat Enterprise Linux 5.1
>  > Apache 2.2.3 (system installed)
>  > Python 2.4.4 (custom install in /usr/locoal)
>  > mod_python 3.3.1
>  >
>
>  What, precisely, is the problem with the Python 2.4.3 and mod_python
>  3.2.8 shipped by RedHat?
>
>  Regards,
>
>  -Roberto
>  --
>  Roberto C. S?nchez
>  http://people.connexer.com/~roberto
>  http://www.connexer.com
>
> -----BEGIN PGP SIGNATURE-----
>  Version: GnuPG v1.4.6 (GNU/Linux)
>
>  iD8DBQFH4rKC5SXWIKfIlGQRAkBwAKCqJqTUZ0ncS30VdbVZfl6ZAWz+WQCfdtxj
>  pfzVB8OLVHvfk+QRcOPi+Xc=
>  =ipmT
>  -----END PGP SIGNATURE-----
>
>

From Dominique.Holzwarth at ch.delarue.com  Wed Mar 26 12:04:20 2008
From: Dominique.Holzwarth at ch.delarue.com (Dominique.Holzwarth@ch.delarue.com)
Date: Wed Mar 26 12:05:34 2008
Subject: [mod_python] Another sessions problem...
Message-ID: <5213E58D85BC414998FA553C701E386C0EDCFAC3C4@SGBD012511.dlrmail.ad.delarue.com>

Hello everyone

I've already did some testing with mod_python's session mechanism and so far it seemed to work nice. My latest test case doesn't work at all tho...

I have to scripts, sessiontest1.py and sessiontest2.py, both are directly in my "python-root" (the folder the publisher handler is using)

Sessiontest1.py:
**************************************************
from mod_python import Session
import sessiontest2

secretText = "mysecret"

def index(req):
  myClassObject = sessiontest2.myClass()
  msg = myClassObject.add()
  req.session = Session.FileSession(req)
  req.session['test'] = 5
  req.session['meinKlassenObjekt'] = myClassObject
  req.session.save()
  return myClassObject.show(req.session.id())

**************************************************

Sessiontest2.py
**************************************************
from mod_python import Session

secretText = "mysecret"

def index(req):
    req.session = Session.FileSession(req)
    if req.session.is_new():
        return "Session is new: "+req.session.id()
    else:
        lala = req.session['test']
        myClassObject = req.session['meinKlassenObjekt']
        newVal = req.form.getfirst('button')
        cnt = myClassObject.add(newVal)
        req.session['meinKlassenObjekt'] = myClassObject
        req.session.save()
        return cnt
    return "default return"

class myClass:
    def __init__(self):
        self.counter = 0

    def add(self, val=1):
        self.counter = self.counter + val
        return self.counter

    def show(self, *value):
        msg = """
<html><body>
<form action='/python/sessiontest2.py' method='post'>
    <input name='counter' type='text' readonly value='%s'/>
    <input name='new' type='text' />
    <input name='button' type='submit' value='Add' />
</form>
<p>ID: %s</p>
</body></html>
        """ % (self.counter, value)
        return msg
****************************************************

Here's what's happening:

I call the sessiontest1.py which creates a new session (for a fresh browser window), does some stuff with the class-object, saves the object (resp. the session) and then it returns the html site generated from that class.
When I submit that form the sessiontest2.py script is called and in my opinion it should load the previously created session (and do the stuff inside the 'else'). However, it always creates a new session instead of using the old one...

Maybe anyone got an idea what could be wrong? Would be really nice!

Greetings
Dominique


From clodoaldo.pinto.neto at gmail.com  Wed Mar 26 14:42:17 2008
From: clodoaldo.pinto.neto at gmail.com (Clodoaldo)
Date: Wed Mar 26 14:42:24 2008
Subject: [mod_python] Another sessions problem...
In-Reply-To: <5213E58D85BC414998FA553C701E386C0EDCFAC3C4@SGBD012511.dlrmail.ad.delarue.com>
References: <5213E58D85BC414998FA553C701E386C0EDCFAC3C4@SGBD012511.dlrmail.ad.delarue.com>
Message-ID: <a595de7a0803261142w40328a40u575d449bafc0ae71@mail.gmail.com>

2008/3/26, Dominique.Holzwarth@ch.delarue.com
<Dominique.Holzwarth@ch.delarue.com>:
> Hello everyone
>
>  I've already did some testing with mod_python's session mechanism and so far it seemed to work nice. My latest test case doesn't work at all tho...
>
>  I have to scripts, sessiontest1.py and sessiontest2.py, both are directly in my "python-root" (the folder the publisher handler is using)
>
>  Sessiontest1.py:
>  **************************************************
>  from mod_python import Session
>  import sessiontest2
>
>  secretText = "mysecret"
>
>  def index(req):
>   myClassObject = sessiontest2.myClass()
>   msg = myClassObject.add()
>   req.session = Session.FileSession(req)
>   req.session['test'] = 5
>   req.session['meinKlassenObjekt'] = myClassObject
>   req.session.save()
>   return myClassObject.show(req.session.id())
>
>  **************************************************
>
>  Sessiontest2.py
>  **************************************************
>  from mod_python import Session
>
>  secretText = "mysecret"
>
>  def index(req):
>     req.session = Session.FileSession(req)
>     if req.session.is_new():
>         return "Session is new: "+req.session.id()
>     else:
>         lala = req.session['test']
>         myClassObject = req.session['meinKlassenObjekt']
>         newVal = req.form.getfirst('button')
>         cnt = myClassObject.add(newVal)
>         req.session['meinKlassenObjekt'] = myClassObject
>         req.session.save()
>         return cnt
>     return "default return"
>
>  class myClass:
>     def __init__(self):
>         self.counter = 0
>
>     def add(self, val=1):
>         self.counter = self.counter + val
>         return self.counter
>
>     def show(self, *value):
>         msg = """
>  <html><body>
>  <form action='/python/sessiontest2.py' method='post'>
>     <input name='counter' type='text' readonly value='%s'/>
>     <input name='new' type='text' />
>     <input name='button' type='submit' value='Add' />
>  </form>
>  <p>ID: %s</p>
>  </body></html>
>         """ % (self.counter, value)
>         return msg
>  ****************************************************
>
>  Here's what's happening:
>
>  I call the sessiontest1.py which creates a new session (for a fresh browser window), does some stuff with the class-object, saves the object (resp. the session) and then it returns the html site generated from that class.
>  When I submit that form the sessiontest2.py script is called and in my opinion it should load the previously created session (and do the stuff inside the 'else'). However, it always creates a new session instead of using the old one...
>
>  Maybe anyone got an idea what could be wrong? Would be really nice!

The session id must somehow be saved at the client. A cookie, a
querystring or a hidden field could be used. Where does your code save
and retrieve the session id at/from the client?

Regards, Clodoaldo Pinto Neto
From clodoaldo.pinto.neto at gmail.com  Wed Mar 26 14:47:08 2008
From: clodoaldo.pinto.neto at gmail.com (Clodoaldo)
Date: Wed Mar 26 14:47:21 2008
Subject: [mod_python] Another sessions problem...
In-Reply-To: <a595de7a0803261142w40328a40u575d449bafc0ae71@mail.gmail.com>
References: <5213E58D85BC414998FA553C701E386C0EDCFAC3C4@SGBD012511.dlrmail.ad.delarue.com>
	<a595de7a0803261142w40328a40u575d449bafc0ae71@mail.gmail.com>
Message-ID: <a595de7a0803261147g46601417he5ee163ebda88d32@mail.gmail.com>

2008/3/26, Clodoaldo <clodoaldo.pinto.neto@gmail.com>:
> 2008/3/26, Dominique.Holzwarth@ch.delarue.com
>  <Dominique.Holzwarth@ch.delarue.com>:
>
> > Hello everyone
>  >
>  >  I've already did some testing with mod_python's session mechanism and so far it seemed to work nice. My latest test case doesn't work at all tho...
>  >
>  >  I have to scripts, sessiontest1.py and sessiontest2.py, both are directly in my "python-root" (the folder the publisher handler is using)
>  >
>  >  Sessiontest1.py:
>  >  **************************************************
>  >  from mod_python import Session
>  >  import sessiontest2
>  >
>  >  secretText = "mysecret"
>  >
>  >  def index(req):
>  >   myClassObject = sessiontest2.myClass()
>  >   msg = myClassObject.add()
>  >   req.session = Session.FileSession(req)
>  >   req.session['test'] = 5
>  >   req.session['meinKlassenObjekt'] = myClassObject
>  >   req.session.save()
>  >   return myClassObject.show(req.session.id())
>  >
>  >  **************************************************
>  >
>  >  Sessiontest2.py
>  >  **************************************************
>  >  from mod_python import Session
>  >
>  >  secretText = "mysecret"
>  >
>  >  def index(req):
>  >     req.session = Session.FileSession(req)
>  >     if req.session.is_new():
>  >         return "Session is new: "+req.session.id()
>  >     else:
>  >         lala = req.session['test']
>  >         myClassObject = req.session['meinKlassenObjekt']
>  >         newVal = req.form.getfirst('button')
>  >         cnt = myClassObject.add(newVal)
>  >         req.session['meinKlassenObjekt'] = myClassObject
>  >         req.session.save()
>  >         return cnt
>  >     return "default return"
>  >
>  >  class myClass:
>  >     def __init__(self):
>  >         self.counter = 0
>  >
>  >     def add(self, val=1):
>  >         self.counter = self.counter + val
>  >         return self.counter
>  >
>  >     def show(self, *value):
>  >         msg = """
>  >  <html><body>
>  >  <form action='/python/sessiontest2.py' method='post'>
>  >     <input name='counter' type='text' readonly value='%s'/>
>  >     <input name='new' type='text' />
>  >     <input name='button' type='submit' value='Add' />
>  >  </form>
>  >  <p>ID: %s</p>
>  >  </body></html>
>  >         """ % (self.counter, value)
>  >         return msg
>  >  ****************************************************
>  >
>  >  Here's what's happening:
>  >
>  >  I call the sessiontest1.py which creates a new session (for a fresh browser window), does some stuff with the class-object, saves the object (resp. the session) and then it returns the html site generated from that class.
>  >  When I submit that form the sessiontest2.py script is called and in my opinion it should load the previously created session (and do the stuff inside the 'else'). However, it always creates a new session instead of using the old one...
>  >
>  >  Maybe anyone got an idea what could be wrong? Would be really nice!
>
>
> The session id must somehow be saved at the client. A cookie, a
>  querystring or a hidden field could be used. Where does your code save
>  and retrieve the session id at/from the client?

The session classes from mod_python do that for you. That is my CGI
head working. Sorry for the noise.

Regards, Clodoaldo Pinto Neto
From Glen.Mabey at swri.org  Wed Mar 26 15:51:16 2008
From: Glen.Mabey at swri.org (Glen W. Mabey)
Date: Wed Mar 26 15:51:22 2008
Subject: [mod_python] patch to use Py_SetProgramName()
Message-ID: <20080326195116.GE24345@swri.org>

Hello,

I started getting some weird crashes of mod_python when I started using
it on a ubuntu box.

I'm attaching a patch for version 3.3.1 which isn't properly integrated 
with the configure script and the Makefile, but I hope it makes sense.

Best Regards,
Glen Mabey

-------------- next part --------------
A non-text attachment was scrubbed...
Name: mod_python.c.diff
Type: text/x-diff
Size: 336 bytes
Desc: not available
Url : http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080326/8e4d199a/mod_python.c.bin
From graham.dumpleton at gmail.com  Wed Mar 26 15:59:46 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Wed Mar 26 15:59:54 2008
Subject: [mod_python] patch to use Py_SetProgramName()
In-Reply-To: <20080326195116.GE24345@swri.org>
References: <20080326195116.GE24345@swri.org>
Message-ID: <88e286470803261259n52aad63xb42ad844dedabc36@mail.gmail.com>

On 27/03/2008, Glen W. Mabey <Glen.Mabey@swri.org> wrote:
> Hello,
>
>  I started getting some weird crashes of mod_python when I started using
>  it on a ubuntu box.
>
>  I'm attaching a patch for version 3.3.1 which isn't properly integrated
>  with the configure script and the Makefile, but I hope it makes sense.

Sorry, you will need to explain properly the problem you claim this fixes.

Graham
From graham.dumpleton at gmail.com  Wed Mar 26 16:03:55 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Wed Mar 26 16:04:02 2008
Subject: [mod_python] Another sessions problem...
In-Reply-To: <5213E58D85BC414998FA553C701E386C0EDCFAC3C4@SGBD012511.dlrmail.ad.delarue.com>
References: <5213E58D85BC414998FA553C701E386C0EDCFAC3C4@SGBD012511.dlrmail.ad.delarue.com>
Message-ID: <88e286470803261303o6db0be50l1da30bc130382e0c@mail.gmail.com>

Inspect the value of the cookie in the browser, post it here. What is
the path attribute associated with it? Do you perhaps have two cookies
stored in the browser with different paths because of how you have
configured mod_python? You can also use live headers extension in
FireFox to see what the cookie header sent back in response is to
validate it looks right.

Graham

On 27/03/2008, Dominique.Holzwarth@ch.delarue.com
<Dominique.Holzwarth@ch.delarue.com> wrote:
> Hello everyone
>
>  I've already did some testing with mod_python's session mechanism and so far it seemed to work nice. My latest test case doesn't work at all tho...
>
>  I have to scripts, sessiontest1.py and sessiontest2.py, both are directly in my "python-root" (the folder the publisher handler is using)
>
>  Sessiontest1.py:
>  **************************************************
>  from mod_python import Session
>  import sessiontest2
>
>  secretText = "mysecret"
>
>  def index(req):
>   myClassObject = sessiontest2.myClass()
>   msg = myClassObject.add()
>   req.session = Session.FileSession(req)
>   req.session['test'] = 5
>   req.session['meinKlassenObjekt'] = myClassObject
>   req.session.save()
>   return myClassObject.show(req.session.id())
>
>  **************************************************
>
>  Sessiontest2.py
>  **************************************************
>  from mod_python import Session
>
>  secretText = "mysecret"
>
>  def index(req):
>     req.session = Session.FileSession(req)
>     if req.session.is_new():
>         return "Session is new: "+req.session.id()
>     else:
>         lala = req.session['test']
>         myClassObject = req.session['meinKlassenObjekt']
>         newVal = req.form.getfirst('button')
>         cnt = myClassObject.add(newVal)
>         req.session['meinKlassenObjekt'] = myClassObject
>         req.session.save()
>         return cnt
>     return "default return"
>
>  class myClass:
>     def __init__(self):
>         self.counter = 0
>
>     def add(self, val=1):
>         self.counter = self.counter + val
>         return self.counter
>
>     def show(self, *value):
>         msg = """
>  <html><body>
>  <form action='/python/sessiontest2.py' method='post'>
>     <input name='counter' type='text' readonly value='%s'/>
>     <input name='new' type='text' />
>     <input name='button' type='submit' value='Add' />
>  </form>
>  <p>ID: %s</p>
>  </body></html>
>         """ % (self.counter, value)
>         return msg
>  ****************************************************
>
>  Here's what's happening:
>
>  I call the sessiontest1.py which creates a new session (for a fresh browser window), does some stuff with the class-object, saves the object (resp. the session) and then it returns the html site generated from that class.
>  When I submit that form the sessiontest2.py script is called and in my opinion it should load the previously created session (and do the stuff inside the 'else'). However, it always creates a new session instead of using the old one...
>
>  Maybe anyone got an idea what could be wrong? Would be really nice!
>
>  Greetings
>  Dominique
>
>
>  _______________________________________________
>  Mod_python mailing list
>  Mod_python@modpython.org
>  http://mailman.modpython.org/mailman/listinfo/mod_python
>
From Glen.Mabey at swri.org  Wed Mar 26 16:10:29 2008
From: Glen.Mabey at swri.org (Glen W. Mabey)
Date: Wed Mar 26 16:10:39 2008
Subject: [mod_python] patch to use Py_SetProgramName()
In-Reply-To: <88e286470803261259n52aad63xb42ad844dedabc36@mail.gmail.com>
References: <20080326195116.GE24345@swri.org>
	<88e286470803261259n52aad63xb42ad844dedabc36@mail.gmail.com>
Message-ID: <20080326201029.GF24345@swri.org>

On Wed, Mar 26, 2008 at 02:59:46PM -0500, Graham Dumpleton wrote:
> On 27/03/2008, Glen W. Mabey <Glen.Mabey@swri.org> wrote:
> > Hello,
> >
> >  I started getting some weird crashes of mod_python when I started using
> >  it on a ubuntu box.
> >
> >  I'm attaching a patch for version 3.3.1 which isn't properly integrated
> >  with the configure script and the Makefile, but I hope it makes sense.
> 
> Sorry, you will need to explain properly the problem you claim this fixes.

Fair enough.  The error in the log file looks like this:


[Wed Mar 26 13:57:19 2008] [error] [client 129.162.166.114] PythonHandler mod_python.cgihandler:   File "random.py", line 43, in <module>\n    from math import log as _log, exp as _exp, pi as _pi, e as _e, ceil as _ceil
[Wed Mar 26 13:57:19 2008] [error] [client 129.162.166.114] PythonHandler mod_python.cgihandler: ImportError: /usr/lib/python2.5/lib-dynload/math.so: undefined symbol: PyFPE_jbuf


So, I realized that somehow it was starting to use a different python
than what I had specified via --with-python in configure.  That is, I
had done all I could to make it so that mod_python used a python
installed into /usr/local/{bin,lib}/, but it was using modules out of
/usr/lib/.  The embedding API now provides a function to precisely
specify which python should be used, as explained at

  http://docs.python.org/api/embedding.html

with the Py_SetProgramName() function.  Since configure is already
getting this value explicitly (when --with-python is used), it seems to
me that it would be desirable to employ this facility instead of letting
Py_Initialize() search around for what it decides is the most
appropriate executable.  

Is that reasonable?

Thank you!
Glen Mabey
From graham.dumpleton at gmail.com  Wed Mar 26 16:15:51 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Wed Mar 26 16:15:57 2008
Subject: [mod_python] patch to use Py_SetProgramName()
In-Reply-To: <20080326201029.GF24345@swri.org>
References: <20080326195116.GE24345@swri.org>
	<88e286470803261259n52aad63xb42ad844dedabc36@mail.gmail.com>
	<20080326201029.GF24345@swri.org>
Message-ID: <88e286470803261315r31b3191bg11c2f7b6e5751f51@mail.gmail.com>

On 27/03/2008, Glen W. Mabey <Glen.Mabey@swri.org> wrote:
> On Wed, Mar 26, 2008 at 02:59:46PM -0500, Graham Dumpleton wrote:
>  > On 27/03/2008, Glen W. Mabey <Glen.Mabey@swri.org> wrote:
>  > > Hello,
>  > >
>  > >  I started getting some weird crashes of mod_python when I started using
>  > >  it on a ubuntu box.
>  > >
>  > >  I'm attaching a patch for version 3.3.1 which isn't properly integrated
>  > >  with the configure script and the Makefile, but I hope it makes sense.
>  >
>  > Sorry, you will need to explain properly the problem you claim this fixes.
>
>
> Fair enough.  The error in the log file looks like this:
>
>
>  [Wed Mar 26 13:57:19 2008] [error] [client 129.162.166.114] PythonHandler mod_python.cgihandler:   File "random.py", line 43, in <module>\n    from math import log as _log, exp as _exp, pi as _pi, e as _e, ceil as _ceil
>  [Wed Mar 26 13:57:19 2008] [error] [client 129.162.166.114] PythonHandler mod_python.cgihandler: ImportError: /usr/lib/python2.5/lib-dynload/math.so: undefined symbol: PyFPE_jbuf
>
>
>  So, I realized that somehow it was starting to use a different python
>  than what I had specified via --with-python in configure.  That is, I
>  had done all I could to make it so that mod_python used a python
>  installed into /usr/local/{bin,lib}/, but it was using modules out of
>  /usr/lib/.  The embedding API now provides a function to precisely
>  specify which python should be used, as explained at
>
>   http://docs.python.org/api/embedding.html
>
>  with the Py_SetProgramName() function.  Since configure is already
>  getting this value explicitly (when --with-python is used), it seems to
>  me that it would be desirable to employ this facility instead of letting
>  Py_Initialize() search around for what it decides is the most
>  appropriate executable.
>
>  Is that reasonable?

Except that it doesn't work for Windows or MacOS X.

Anyway, see:

  http://issues.apache.org/jira/browse/MODPYTHON-225

It also talks about workaround of setting PYTHONEXECUTABLE or
PYTHONHOME environment variables in 'envvars' file or Apache startup
script.

Graham
From Glen.Mabey at swri.org  Wed Mar 26 16:24:55 2008
From: Glen.Mabey at swri.org (Glen W. Mabey)
Date: Wed Mar 26 16:25:12 2008
Subject: [mod_python] patch to use Py_SetProgramName()
In-Reply-To: <88e286470803261315r31b3191bg11c2f7b6e5751f51@mail.gmail.com>
References: <20080326195116.GE24345@swri.org>
	<88e286470803261259n52aad63xb42ad844dedabc36@mail.gmail.com>
	<20080326201029.GF24345@swri.org>
	<88e286470803261315r31b3191bg11c2f7b6e5751f51@mail.gmail.com>
Message-ID: <20080326202455.GG24345@swri.org>

On Wed, Mar 26, 2008 at 03:15:51PM -0500, Graham Dumpleton wrote:
> >  with the Py_SetProgramName() function.  Since configure is already
> >  getting this value explicitly (when --with-python is used), it seems to
> >  me that it would be desirable to employ this facility instead of letting
> >  Py_Initialize() search around for what it decides is the most
> >  appropriate executable.
> >
> >  Is that reasonable?
> 
> Except that it doesn't work for Windows or MacOS X.
> 
> Anyway, see:
> 
>   http://issues.apache.org/jira/browse/MODPYTHON-225
> 
> It also talks about workaround of setting PYTHONEXECUTABLE or
> PYTHONHOME environment variables in 'envvars' file or Apache startup
> script.

Humm.  Seems to be a fairly well explored problem already.

Now, I'm often wrong on this sort of thing, and I certainly don't have
any experience deploying apache on Windows or MacOSX, but I wonder
whether the use of Py_SetProgramName() is detrimental on those
platforms?

That is, if it fixes the problem on certain platforms (or, if it is one
way to fix it), then is it worth including?

Thanks again --

Glen
From graham.dumpleton at gmail.com  Wed Mar 26 16:51:58 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Wed Mar 26 16:52:03 2008
Subject: [mod_python] patch to use Py_SetProgramName()
In-Reply-To: <20080326202455.GG24345@swri.org>
References: <20080326195116.GE24345@swri.org>
	<88e286470803261259n52aad63xb42ad844dedabc36@mail.gmail.com>
	<20080326201029.GF24345@swri.org>
	<88e286470803261315r31b3191bg11c2f7b6e5751f51@mail.gmail.com>
	<20080326202455.GG24345@swri.org>
Message-ID: <88e286470803261351v15b3f5b0n8c063f3cfb508bf3@mail.gmail.com>

On 27/03/2008, Glen W. Mabey <Glen.Mabey@swri.org> wrote:
> On Wed, Mar 26, 2008 at 03:15:51PM -0500, Graham Dumpleton wrote:
>  > >  with the Py_SetProgramName() function.  Since configure is already
>  > >  getting this value explicitly (when --with-python is used), it seems to
>  > >  me that it would be desirable to employ this facility instead of letting
>  > >  Py_Initialize() search around for what it decides is the most
>  > >  appropriate executable.
>  > >
>  > >  Is that reasonable?
>  >
>  > Except that it doesn't work for Windows or MacOS X.
>  >
>  > Anyway, see:
>  >
>  >   http://issues.apache.org/jira/browse/MODPYTHON-225
>  >
>  > It also talks about workaround of setting PYTHONEXECUTABLE or
>  > PYTHONHOME environment variables in 'envvars' file or Apache startup
>  > script.
>
>
> Humm.  Seems to be a fairly well explored problem already.
>
>  Now, I'm often wrong on this sort of thing, and I certainly don't have
>  any experience deploying apache on Windows or MacOSX, but I wonder
>  whether the use of Py_SetProgramName() is detrimental on those
>  platforms?
>
>  That is, if it fixes the problem on certain platforms (or, if it is one
>  way to fix it), then is it worth including?

Even if it fixes things on some platforms, the problem I have with it
is that it hard codes a path into the executable. If the 'python'
executable supplied to --with-python was actually a symlink to another
location, the result will be an incorrect location is used as you
really want the location pointed at, not where the symlink was.
Another problem might be where people building binary distributions of
mod_python use some special Python installation not in the standard
location. It may work for them when they test it, but when they
release it it then make break for others because they may not have
Python installed where person who built it did.

What was found with mod_wsgi was that it was better to have a
directive in Apache configuration file which allowed one to set
PYTHONHOME. This still didn't work for Windows, but seemed the best
compromise. One benefit of making it configurable through the Apache
configuration file was that that mechanism could then be used to point
the interpreter at a Python virtual environment isolated from
site-packages of standard Python installation. For details on this
see:

  http://code.google.com/p/modwsgi/wiki/VirtualEnvironments

You might also read section 'Multiple Python Versions' of:

  http://code.google.com/p/modwsgi/wiki/InstallationIssues

which for mod_wsgi talks about the same problem with wrong version of
Python being found.

Graham
From Dominique.Holzwarth at ch.delarue.com  Thu Mar 27 03:54:12 2008
From: Dominique.Holzwarth at ch.delarue.com (Dominique.Holzwarth@ch.delarue.com)
Date: Thu Mar 27 03:55:50 2008
Subject: [mod_python] Another sessions problem...
In-Reply-To: <88e286470803261303o6db0be50l1da30bc130382e0c@mail.gmail.com>
Message-ID: <5213E58D85BC414998FA553C701E386C0EDCFAC4D0@SGBD012511.dlrmail.ad.delarue.com>

Here's the "protocol" of what happen's when I call the "sessiontest1.py" and then click the button on the generated form:


http://dchbna0308/python/sessiontest1.py

GET /python/sessiontest1.py HTTP/1.1
Host: dchbna0308
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.8.1.10) Gecko/20071115 Firefox/2.0.0.10
Accept: text/xml,application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5
Accept-Language: en-gb,en;q=0.5
Accept-Encoding: gzip,deflate
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7
Keep-Alive: 300
Connection: keep-alive
Cookie: pysid=5df5a82bc6780d5c9364619e0fe452f6

HTTP/1.x 200 OK
Date: Thu, 27 Mar 2008 07:42:28 GMT
Server: Apache/2.2.4 (Win32) mod_python/3.3.1 Python/2.5.1
Cache-Control: no-cache="set-cookie"
Set-Cookie: pysid=e97a4f4e71f967639a44fe260cfae9d8; path=/python/
Content-Length: 298
Keep-Alive: timeout=5, max=100
Connection: Keep-Alive
Content-Type: text/html
----------------------------------------------------------
http://dchbna0308/python/sessiontest2.py

POST /python/sessiontest2.py HTTP/1.1
Host: dchbna0308
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.8.1.10) Gecko/20071115 Firefox/2.0.0.10
Accept: text/xml,application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5
Accept-Language: en-gb,en;q=0.5
Accept-Encoding: gzip,deflate
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7
Keep-Alive: 300
Connection: keep-alive
Referer: http://dchbna0308/python/sessiontest1.py
Cookie: pysid=e97a4f4e71f967639a44fe260cfae9d8
Content-Type: application/x-www-form-urlencoded
Content-Length: 29
counter=1&new=2345&button=Add

HTTP/1.x 200 OK
Date: Thu, 27 Mar 2008 07:42:35 GMT
Server: Apache/2.2.4 (Win32) mod_python/3.3.1 Python/2.5.1
Cache-Control: no-cache="set-cookie"
Set-Cookie: pysid=20da3d07fa40e8d4399f627b422ddb93; path=/python/
Content-Length: 48
Keep-Alive: timeout=5, max=100
Connection: Keep-Alive
Content-Type: text/plain

If I understand it correct the server generates a cookie with the pysid=e97a4f4e71f967639a44fe260cfae9d8 and path=/python/. Then, when I hit the form button the POST message sends the cookie back with that same ID pysid=e97a4f4e71f967639a44fe260cfae9d8. The server then still creates a response (200 OK) with a NEW pysid=20da3d07fa40e8d4399f627b422ddb93...
So I personaly still don't get what could be wrong :-/

As for your question about other cookies. Yes, I probably HAVE other cookies stored because I already have done some session testing before (an 'easier' example which worked...). Is there a problem with having several cookies (from the same 'domain/localhost')?

Greetings
Dominique

-----Original Message-----
From: Graham Dumpleton [mailto:graham.dumpleton@gmail.com]
Sent: Mittwoch, 26. M?rz 2008 21:04
To: Holzwarth, Dominique (Berne Bauhaus)
Cc: mod_python@modpython.org
Subject: Re: [mod_python] Another sessions problem...

Inspect the value of the cookie in the browser, post it here. What is the path attribute associated with it? Do you perhaps have two cookies stored in the browser with different paths because of how you have configured mod_python? You can also use live headers extension in FireFox to see what the cookie header sent back in response is to validate it looks right.

Graham


From graham.dumpleton at gmail.com  Thu Mar 27 05:30:35 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Thu Mar 27 05:30:40 2008
Subject: [mod_python] Another sessions problem...
In-Reply-To: <5213E58D85BC414998FA553C701E386C0EDCFAC3C4@SGBD012511.dlrmail.ad.delarue.com>
References: <AciPWwzoX1GRlZdFRSiT0LwQJNcqTQ==>
	<5213E58D85BC414998FA553C701E386C0EDCFAC3C4@SGBD012511.dlrmail.ad.delarue.com>
Message-ID: <88e286470803270230w4af49389nde7f6a8601e0a791@mail.gmail.com>

See comment below in source code.

On 27/03/2008, Dominique.Holzwarth@ch.delarue.com
<Dominique.Holzwarth@ch.delarue.com> wrote:
> Hello everyone
>
>  I've already did some testing with mod_python's session mechanism and so far it seemed to work nice. My latest test case doesn't work at all tho...
>
>  I have to scripts, sessiontest1.py and sessiontest2.py, both are directly in my "python-root" (the folder the publisher handler is using)
>
>  Sessiontest1.py:
>  **************************************************
>  from mod_python import Session
>  import sessiontest2
>
>  secretText = "mysecret"
>
>  def index(req):
>   myClassObject = sessiontest2.myClass()
>   msg = myClassObject.add()
>   req.session = Session.FileSession(req)
>   req.session['test'] = 5
>   req.session['meinKlassenObjekt'] = myClassObject
>   req.session.save()
>   return myClassObject.show(req.session.id())
>
>  **************************************************
>
>  Sessiontest2.py
>  **************************************************
>  from mod_python import Session
>
>  secretText = "mysecret"
>
>  def index(req):
>     req.session = Session.FileSession(req)
>     if req.session.is_new():
>         return "Session is new: "+req.session.id()

Isn't there a req.session.save() missing in this part of if statement
before returning?

Graham

>     else:
>         lala = req.session['test']
>         myClassObject = req.session['meinKlassenObjekt']
>         newVal = req.form.getfirst('button')
>         cnt = myClassObject.add(newVal)
>         req.session['meinKlassenObjekt'] = myClassObject
>         req.session.save()
>         return cnt
>     return "default return"
>
>  class myClass:
>     def __init__(self):
>         self.counter = 0
>
>     def add(self, val=1):
>         self.counter = self.counter + val
>         return self.counter
>
>     def show(self, *value):
>         msg = """
>  <html><body>
>  <form action='/python/sessiontest2.py' method='post'>
>     <input name='counter' type='text' readonly value='%s'/>
>     <input name='new' type='text' />
>     <input name='button' type='submit' value='Add' />
>  </form>
>  <p>ID: %s</p>
>  </body></html>
>         """ % (self.counter, value)
>         return msg
>  ****************************************************
>
>  Here's what's happening:
>
>  I call the sessiontest1.py which creates a new session (for a fresh browser window), does some stuff with the class-object, saves the object (resp. the session) and then it returns the html site generated from that class.
>  When I submit that form the sessiontest2.py script is called and in my opinion it should load the previously created session (and do the stuff inside the 'else'). However, it always creates a new session instead of using the old one...
>
>  Maybe anyone got an idea what could be wrong? Would be really nice!
>
>  Greetings
>  Dominique
>
>
>  _______________________________________________
>  Mod_python mailing list
>  Mod_python@modpython.org
>  http://mailman.modpython.org/mailman/listinfo/mod_python
>
From Dominique.Holzwarth at ch.delarue.com  Thu Mar 27 06:02:44 2008
From: Dominique.Holzwarth at ch.delarue.com (Dominique.Holzwarth@ch.delarue.com)
Date: Thu Mar 27 06:04:18 2008
Subject: [mod_python] Another sessions problem...
In-Reply-To: <88e286470803270230w4af49389nde7f6a8601e0a791@mail.gmail.com>
Message-ID: <5213E58D85BC414998FA553C701E386C0EDCFAC590@SGBD012511.dlrmail.ad.delarue.com>

Yes, there is _no_ 'req.session.save()' inside the 'if' (but inside the 'else') because I don't really want that 'if' to be executed anyway!
When 'sessiontest2.py' is called (by hitting the form button) there already should be a valid session, which was created inside 'sessiontest1.py'. That's actually what I wanted to try out:
One script (sessiontest1.py here) creates a session, then calls some functions from other scripts (myClass.show() from sessiontest2.py here) and eventually there's a request for the index() function of those other scripts (sessiontest2.py here). And those scripts should still know that existing session which was created by the very first script... :-)
So again, when the index() from sessiontest2.py is called the session _should not_ be new. If it is, then there's something wrong, thus I don't even save that session... :-)

Dominique

-----Original Message-----
From: Graham Dumpleton [mailto:graham.dumpleton@gmail.com]
Sent: Donnerstag, 27. M?rz 2008 10:31
To: Holzwarth, Dominique (Berne Bauhaus)
Cc: mod_python@modpython.org
Subject: Re: [mod_python] Another sessions problem...

See comment below in source code.

On 27/03/2008, Dominique.Holzwarth@ch.delarue.com
<Dominique.Holzwarth@ch.delarue.com> wrote:
> Hello everyone
>
>  I've already did some testing with mod_python's session mechanism and so far it seemed to work nice. My latest test case doesn't work at all tho...
>
>  I have to scripts, sessiontest1.py and sessiontest2.py, both are
> directly in my "python-root" (the folder the publisher handler is
> using)
>
>  Sessiontest1.py:
>  **************************************************
>  from mod_python import Session
>  import sessiontest2
>
>  secretText = "mysecret"
>
>  def index(req):
>   myClassObject = sessiontest2.myClass()
>   msg = myClassObject.add()
>   req.session = Session.FileSession(req)
>   req.session['test'] = 5
>   req.session['meinKlassenObjekt'] = myClassObject
>   req.session.save()
>   return myClassObject.show(req.session.id())
>
>  **************************************************
>
>  Sessiontest2.py
>  **************************************************
>  from mod_python import Session
>
>  secretText = "mysecret"
>
>  def index(req):
>     req.session = Session.FileSession(req)
>     if req.session.is_new():
>         return "Session is new: "+req.session.id()

Isn't there a req.session.save() missing in this part of if statement before returning?

Graham

>     else:
>         lala = req.session['test']
>         myClassObject = req.session['meinKlassenObjekt']
>         newVal = req.form.getfirst('button')
>         cnt = myClassObject.add(newVal)
>         req.session['meinKlassenObjekt'] = myClassObject
>         req.session.save()
>         return cnt
>     return "default return"
>
>  class myClass:
>     def __init__(self):
>         self.counter = 0
>
>     def add(self, val=1):
>         self.counter = self.counter + val
>         return self.counter
>
>     def show(self, *value):
>         msg = """
>  <html><body>
>  <form action='/python/sessiontest2.py' method='post'>
>     <input name='counter' type='text' readonly value='%s'/>
>     <input name='new' type='text' />
>     <input name='button' type='submit' value='Add' />  </form>
>  <p>ID: %s</p>
>  </body></html>
>         """ % (self.counter, value)
>         return msg
>  ****************************************************
>
>  Here's what's happening:
>
>  I call the sessiontest1.py which creates a new session (for a fresh browser window), does some stuff with the class-object, saves the object (resp. the session) and then it returns the html site generated from that class.
>  When I submit that form the sessiontest2.py script is called and in my opinion it should load the previously created session (and do the stuff inside the 'else'). However, it always creates a new session instead of using the old one...
>
>  Maybe anyone got an idea what could be wrong? Would be really nice!
>
>  Greetings
>  Dominique
>
>
>  _______________________________________________
>  Mod_python mailing list
>  Mod_python@modpython.org
>  http://mailman.modpython.org/mailman/listinfo/mod_python
>



From graham.dumpleton at gmail.com  Thu Mar 27 06:07:41 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Thu Mar 27 06:07:48 2008
Subject: [mod_python] Another sessions problem...
In-Reply-To: <5213E58D85BC414998FA553C701E386C0EDCFAC590@SGBD012511.dlrmail.ad.delarue.com>
References: <88e286470803270230w4af49389nde7f6a8601e0a791@mail.gmail.com>
	<5213E58D85BC414998FA553C701E386C0EDCFAC590@SGBD012511.dlrmail.ad.delarue.com>
Message-ID: <88e286470803270307m7cfe0ec8gffc8bc905c28a4ab@mail.gmail.com>

I think you are missing the point, even when a session is new, it must
be saved, else when cookie comes back on next request it will not know
about it and create yet another new one. This will keep on going. Just
try saving it and see if it works.

Graham

On 27/03/2008, Dominique.Holzwarth@ch.delarue.com
<Dominique.Holzwarth@ch.delarue.com> wrote:
> Yes, there is _no_ 'req.session.save()' inside the 'if' (but inside the 'else') because I don't really want that 'if' to be executed anyway!
>  When 'sessiontest2.py' is called (by hitting the form button) there already should be a valid session, which was created inside 'sessiontest1.py'. That's actually what I wanted to try out:
>  One script (sessiontest1.py here) creates a session, then calls some functions from other scripts (myClass.show() from sessiontest2.py here) and eventually there's a request for the index() function of those other scripts (sessiontest2.py here). And those scripts should still know that existing session which was created by the very first script... :-)
>  So again, when the index() from sessiontest2.py is called the session _should not_ be new. If it is, then there's something wrong, thus I don't even save that session... :-)
>
>
>  Dominique
>
>  -----Original Message-----
>  From: Graham Dumpleton [mailto:graham.dumpleton@gmail.com]
>
> Sent: Donnerstag, 27. M?rz 2008 10:31
>  To: Holzwarth, Dominique (Berne Bauhaus)
>  Cc: mod_python@modpython.org
>  Subject: Re: [mod_python] Another sessions problem...
>
>
> See comment below in source code.
>
>  On 27/03/2008, Dominique.Holzwarth@ch.delarue.com
>  <Dominique.Holzwarth@ch.delarue.com> wrote:
>  > Hello everyone
>  >
>  >  I've already did some testing with mod_python's session mechanism and so far it seemed to work nice. My latest test case doesn't work at all tho...
>  >
>  >  I have to scripts, sessiontest1.py and sessiontest2.py, both are
>  > directly in my "python-root" (the folder the publisher handler is
>  > using)
>  >
>  >  Sessiontest1.py:
>  >  **************************************************
>  >  from mod_python import Session
>  >  import sessiontest2
>  >
>  >  secretText = "mysecret"
>  >
>  >  def index(req):
>  >   myClassObject = sessiontest2.myClass()
>  >   msg = myClassObject.add()
>  >   req.session = Session.FileSession(req)
>  >   req.session['test'] = 5
>  >   req.session['meinKlassenObjekt'] = myClassObject
>  >   req.session.save()
>  >   return myClassObject.show(req.session.id())
>  >
>  >  **************************************************
>  >
>  >  Sessiontest2.py
>  >  **************************************************
>  >  from mod_python import Session
>  >
>  >  secretText = "mysecret"
>  >
>  >  def index(req):
>  >     req.session = Session.FileSession(req)
>  >     if req.session.is_new():
>  >         return "Session is new: "+req.session.id()
>
>  Isn't there a req.session.save() missing in this part of if statement before returning?
>
>  Graham
>
>  >     else:
>  >         lala = req.session['test']
>  >         myClassObject = req.session['meinKlassenObjekt']
>  >         newVal = req.form.getfirst('button')
>  >         cnt = myClassObject.add(newVal)
>  >         req.session['meinKlassenObjekt'] = myClassObject
>  >         req.session.save()
>  >         return cnt
>  >     return "default return"
>  >
>  >  class myClass:
>  >     def __init__(self):
>  >         self.counter = 0
>  >
>  >     def add(self, val=1):
>  >         self.counter = self.counter + val
>  >         return self.counter
>  >
>  >     def show(self, *value):
>  >         msg = """
>  >  <html><body>
>  >  <form action='/python/sessiontest2.py' method='post'>
>  >     <input name='counter' type='text' readonly value='%s'/>
>  >     <input name='new' type='text' />
>  >     <input name='button' type='submit' value='Add' />  </form>
>  >  <p>ID: %s</p>
>  >  </body></html>
>  >         """ % (self.counter, value)
>  >         return msg
>  >  ****************************************************
>  >
>  >  Here's what's happening:
>  >
>  >  I call the sessiontest1.py which creates a new session (for a fresh browser window), does some stuff with the class-object, saves the object (resp. the session) and then it returns the html site generated from that class.
>  >  When I submit that form the sessiontest2.py script is called and in my opinion it should load the previously created session (and do the stuff inside the 'else'). However, it always creates a new session instead of using the old one...
>  >
>  >  Maybe anyone got an idea what could be wrong? Would be really nice!
>  >
>  >  Greetings
>  >  Dominique
>  >
>  >
>  >  _______________________________________________
>  >  Mod_python mailing list
>  >  Mod_python@modpython.org
>  >  http://mailman.modpython.org/mailman/listinfo/mod_python
>  >
>
>
>

From Dominique.Holzwarth at ch.delarue.com  Thu Mar 27 06:28:36 2008
From: Dominique.Holzwarth at ch.delarue.com (Dominique.Holzwarth@ch.delarue.com)
Date: Thu Mar 27 06:30:08 2008
Subject: [mod_python] Another sessions problem...
In-Reply-To: <88e286470803270307m7cfe0ec8gffc8bc905c28a4ab@mail.gmail.com>
Message-ID: <5213E58D85BC414998FA553C701E386C0EDCFAC5DA@SGBD012511.dlrmail.ad.delarue.com>

Changed the code to look like this:

if req.session.is_new():
        req.session.save()
      return "Session is new: "+req.session.id()
else:
        ...

But still doesn't work... :-/

-----Original Message-----
From: Graham Dumpleton [mailto:graham.dumpleton@gmail.com]
Sent: Donnerstag, 27. M?rz 2008 11:08
To: Holzwarth, Dominique (Berne Bauhaus)
Cc: mod_python@modpython.org
Subject: Re: [mod_python] Another sessions problem...

I think you are missing the point, even when a session is new, it must be saved, else when cookie comes back on next request it will not know about it and create yet another new one. This will keep on going. Just try saving it and see if it works.

Graham

On 27/03/2008, Dominique.Holzwarth@ch.delarue.com
<Dominique.Holzwarth@ch.delarue.com> wrote:
> Yes, there is _no_ 'req.session.save()' inside the 'if' (but inside the 'else') because I don't really want that 'if' to be executed anyway!
>  When 'sessiontest2.py' is called (by hitting the form button) there already should be a valid session, which was created inside 'sessiontest1.py'. That's actually what I wanted to try out:
>  One script (sessiontest1.py here) creates a session, then calls some
> functions from other scripts (myClass.show() from sessiontest2.py
> here) and eventually there's a request for the index() function of
> those other scripts (sessiontest2.py here). And those scripts should
> still know that existing session which was created by the very first
> script... :-)  So again, when the index() from sessiontest2.py is
> called the session _should not_ be new. If it is, then there's
> something wrong, thus I don't even save that session... :-)
>
>
>  Dominique
>
>  -----Original Message-----
>  From: Graham Dumpleton [mailto:graham.dumpleton@gmail.com]
>
> Sent: Donnerstag, 27. M?rz 2008 10:31
>  To: Holzwarth, Dominique (Berne Bauhaus)
>  Cc: mod_python@modpython.org
>  Subject: Re: [mod_python] Another sessions problem...
>
>
> See comment below in source code.
>
>  On 27/03/2008, Dominique.Holzwarth@ch.delarue.com
>  <Dominique.Holzwarth@ch.delarue.com> wrote:
>  > Hello everyone
>  >
>  >  I've already did some testing with mod_python's session mechanism and so far it seemed to work nice. My latest test case doesn't work at all tho...
>  >
>  >  I have to scripts, sessiontest1.py and sessiontest2.py, both are
> > directly in my "python-root" (the folder the publisher handler is  >
> using)  >  >  Sessiontest1.py:
>  >  **************************************************
>  >  from mod_python import Session
>  >  import sessiontest2
>  >
>  >  secretText = "mysecret"
>  >
>  >  def index(req):
>  >   myClassObject = sessiontest2.myClass()
>  >   msg = myClassObject.add()
>  >   req.session = Session.FileSession(req)
>  >   req.session['test'] = 5
>  >   req.session['meinKlassenObjekt'] = myClassObject
>  >   req.session.save()
>  >   return myClassObject.show(req.session.id())
>  >
>  >  **************************************************
>  >
>  >  Sessiontest2.py
>  >  **************************************************
>  >  from mod_python import Session
>  >
>  >  secretText = "mysecret"
>  >
>  >  def index(req):
>  >     req.session = Session.FileSession(req)
>  >     if req.session.is_new():
>  >         return "Session is new: "+req.session.id()
>
>  Isn't there a req.session.save() missing in this part of if statement before returning?
>
>  Graham
>
>  >     else:
>  >         lala = req.session['test']
>  >         myClassObject = req.session['meinKlassenObjekt']
>  >         newVal = req.form.getfirst('button')
>  >         cnt = myClassObject.add(newVal)
>  >         req.session['meinKlassenObjekt'] = myClassObject
>  >         req.session.save()
>  >         return cnt
>  >     return "default return"
>  >
>  >  class myClass:
>  >     def __init__(self):
>  >         self.counter = 0
>  >
>  >     def add(self, val=1):
>  >         self.counter = self.counter + val
>  >         return self.counter
>  >
>  >     def show(self, *value):
>  >         msg = """
>  >  <html><body>
>  >  <form action='/python/sessiontest2.py' method='post'>
>  >     <input name='counter' type='text' readonly value='%s'/>
>  >     <input name='new' type='text' />
>  >     <input name='button' type='submit' value='Add' />  </form>
>  >  <p>ID: %s</p>
>  >  </body></html>
>  >         """ % (self.counter, value)
>  >         return msg
>  >  ****************************************************
>  >
>  >  Here's what's happening:
>  >
>  >  I call the sessiontest1.py which creates a new session (for a fresh browser window), does some stuff with the class-object, saves the object (resp. the session) and then it returns the html site generated from that class.
>  >  When I submit that form the sessiontest2.py script is called and in my opinion it should load the previously created session (and do the stuff inside the 'else'). However, it always creates a new session instead of using the old one...
>  >
>  >  Maybe anyone got an idea what could be wrong? Would be really nice!
>  >
>  >  Greetings
>  >  Dominique
>  >
>  >
>  >  _______________________________________________
>  >  Mod_python mailing list
>  >  Mod_python@modpython.org
>  >  http://mailman.modpython.org/mailman/listinfo/mod_python
>  >
>
>
>



From Glen.Mabey at swri.org  Thu Mar 27 10:57:05 2008
From: Glen.Mabey at swri.org (Glen W. Mabey)
Date: Thu Mar 27 10:57:11 2008
Subject: [mod_python] patch to use Py_SetProgramName()
In-Reply-To: <88e286470803261351v15b3f5b0n8c063f3cfb508bf3@mail.gmail.com>
References: <20080326195116.GE24345@swri.org>
	<88e286470803261259n52aad63xb42ad844dedabc36@mail.gmail.com>
	<20080326201029.GF24345@swri.org>
	<88e286470803261315r31b3191bg11c2f7b6e5751f51@mail.gmail.com>
	<20080326202455.GG24345@swri.org>
	<88e286470803261351v15b3f5b0n8c063f3cfb508bf3@mail.gmail.com>
Message-ID: <20080327145705.GA16811@swri.org>

On Wed, Mar 26, 2008 at 03:51:58PM -0500, Graham Dumpleton wrote:
> Even if it fixes things on some platforms, the problem I have with it
> is that it hard codes a path into the executable. If the 'python'
> executable supplied to --with-python was actually a symlink to another
> location, the result will be an incorrect location is used as you
> really want the location pointed at, not where the symlink was.
> Another problem might be where people building binary distributions of
> mod_python use some special Python installation not in the standard
> location. It may work for them when they test it, but when they
> release it it then make break for others because they may not have
> Python installed where person who built it did.

My impression from the description of the Py_SetProgramName() function
was that it provided not so much of a hard-coding to the path but rather
steering the search for the executable to first look at a specific
location before looking in other likely places.

Has that been your experience in using Py_SetProgramName()?

> What was found with mod_wsgi was that it was better to have a
> directive in Apache configuration file which allowed one to set
> PYTHONHOME. 

Apparently, the use of PYTHONHOME would still override the value given
to Py_SetProgramName(), so it doesn't seem to me that you would lose any 
flexibility by its use.

> This still didn't work for Windows, but seemed the best
> compromise. One benefit of making it configurable through the Apache
> configuration file was that that mechanism could then be used to point
> the interpreter at a Python virtual environment isolated from
> site-packages of standard Python installation. For details on this
> see:
> 
>   http://code.google.com/p/modwsgi/wiki/VirtualEnvironments
> 
> You might also read section 'Multiple Python Versions' of:
> 
>   http://code.google.com/p/modwsgi/wiki/InstallationIssues
> 
> which for mod_wsgi talks about the same problem with wrong version of
> Python being found.

One reason for my terseness in my original post was that I couldn't see
any reason (at the time) for not employing Py_SetProgramName(), since it
seemed to me to be the preferred mechanism (if the executable path is
known at compile time) to *correctly* specify the path for a package 
maintainer whose work will end up on other people's systems.  Or to give a 
person like myself (targeting a specialized type of installation) to use 
a symlink that actually points to the desired interpreter, without the
need to define PYTHONHOME (that has complicated things in the past
here).

Anyway, thank you for you attention.

Glen Mabey
From Dominique.Holzwarth at ch.delarue.com  Thu Mar 27 12:35:27 2008
From: Dominique.Holzwarth at ch.delarue.com (Dominique.Holzwarth@ch.delarue.com)
Date: Thu Mar 27 12:37:08 2008
Subject: [mod_python] Module importing and classes
Message-ID: <5213E58D85BC414998FA553C701E386C0EDD00F605@SGBD012511.dlrmail.ad.delarue.com>

Hello everyone

I'm trying to import class definitions from different modules but getting some errors...

Lets say I have the folloing structure:

Python/
        GUI/
                webGUI.py
                Edit/
                        webEdit.py

Inside webGUI.py there's a class 'WebGUI' and inside 'webEdit.py' there's a class 'WebEdit' that inherits from 'WebGUI'.
'webEdit.py' looks like this:

webEdit.py
*****************************************************
from mod_python import apache
webGUI = apache.import_module('~/GUI/webGUI.py')
class WebEdit(webGUI.WebGUI):

    def __init__(self):
        pass
*****************************************************

When I run my application I get the followin error:

File "C:\Program Files\Apache Software Foundation\Apache2.2\htdocs\python\GUI\Edit\webEdit.py", line 3, in <module>
    class WebEdit(webGUI.WebGUI):

AttributeError: 'module' object has no attribute 'WebGUI'

If I omit the 'webGUI' in the class definition of 'WebEdit' I get an error stating that 'the global name "WebGUI" is not defined' ...

So basicly I need to know how to inherit from classes which are defined in another module (which is in another folder) under mod_python... :-)

Sorry for the recently spam, this is my first web application with mod_python & apache :-/

Greetings
Dominique


From graham.dumpleton at gmail.com  Thu Mar 27 15:51:50 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Thu Mar 27 15:51:57 2008
Subject: [mod_python] Module importing and classes
In-Reply-To: <5213E58D85BC414998FA553C701E386C0EDD00F605@SGBD012511.dlrmail.ad.delarue.com>
References: <5213E58D85BC414998FA553C701E386C0EDD00F605@SGBD012511.dlrmail.ad.delarue.com>
Message-ID: <88e286470803271251lf3062duf920633f1a046846@mail.gmail.com>

Does webGUI.py try and import webEdit and thus you have a circular import?

With PythonDebug On in configuration, what is the import dependency
graph information that is included in HTTP error page response after
the trace back information?

Graham

On 28/03/2008, Dominique.Holzwarth@ch.delarue.com
<Dominique.Holzwarth@ch.delarue.com> wrote:
> Hello everyone
>
>  I'm trying to import class definitions from different modules but getting some errors...
>
>  Lets say I have the folloing structure:
>
>  Python/
>         GUI/
>                 webGUI.py
>                 Edit/
>                         webEdit.py
>
>  Inside webGUI.py there's a class 'WebGUI' and inside 'webEdit.py' there's a class 'WebEdit' that inherits from 'WebGUI'.
>  'webEdit.py' looks like this:
>
>  webEdit.py
>  *****************************************************
>  from mod_python import apache
>  webGUI = apache.import_module('~/GUI/webGUI.py')
>  class WebEdit(webGUI.WebGUI):
>
>     def __init__(self):
>         pass
>  *****************************************************
>
>  When I run my application I get the followin error:
>
>  File "C:\Program Files\Apache Software Foundation\Apache2.2\htdocs\python\GUI\Edit\webEdit.py", line 3, in <module>
>     class WebEdit(webGUI.WebGUI):
>
>  AttributeError: 'module' object has no attribute 'WebGUI'
>
>  If I omit the 'webGUI' in the class definition of 'WebEdit' I get an error stating that 'the global name "WebGUI" is not defined' ...
>
>  So basicly I need to know how to inherit from classes which are defined in another module (which is in another folder) under mod_python... :-)
>
>  Sorry for the recently spam, this is my first web application with mod_python & apache :-/
>
>  Greetings
>  Dominique
>
>
>  _______________________________________________
>  Mod_python mailing list
>  Mod_python@modpython.org
>  http://mailman.modpython.org/mailman/listinfo/mod_python
>
From graham.dumpleton at gmail.com  Fri Mar 28 00:41:54 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Fri Mar 28 00:42:02 2008
Subject: [mod_python] patch to use Py_SetProgramName()
In-Reply-To: <20080327145705.GA16811@swri.org>
References: <20080326195116.GE24345@swri.org>
	<88e286470803261259n52aad63xb42ad844dedabc36@mail.gmail.com>
	<20080326201029.GF24345@swri.org>
	<88e286470803261315r31b3191bg11c2f7b6e5751f51@mail.gmail.com>
	<20080326202455.GG24345@swri.org>
	<88e286470803261351v15b3f5b0n8c063f3cfb508bf3@mail.gmail.com>
	<20080327145705.GA16811@swri.org>
Message-ID: <88e286470803272141q56b4a18en2446a4852133dbf0@mail.gmail.com>

On 28/03/2008, Glen W. Mabey <Glen.Mabey@swri.org> wrote:
> On Wed, Mar 26, 2008 at 03:51:58PM -0500, Graham Dumpleton wrote:
>  > Even if it fixes things on some platforms, the problem I have with it
>  > is that it hard codes a path into the executable. If the 'python'
>  > executable supplied to --with-python was actually a symlink to another
>  > location, the result will be an incorrect location is used as you
>  > really want the location pointed at, not where the symlink was.
>  > Another problem might be where people building binary distributions of
>  > mod_python use some special Python installation not in the standard
>  > location. It may work for them when they test it, but when they
>  > release it it then make break for others because they may not have
>  > Python installed where person who built it did.
>
>
> My impression from the description of the Py_SetProgramName() function
>  was that it provided not so much of a hard-coding to the path but rather
>  steering the search for the executable to first look at a specific
>  location before looking in other likely places.

You are probably right, been a while since I looked at Python
internals for that stuff.

>  Has that been your experience in using Py_SetProgramName()?

What I do know is the code in Python internals which uses that value
and others such as PYTHONHOME is really convoluted, especially when it
comes to Windows and MacOS X where I never did quite work out where it
finds some stuff for determining prefix location.

>  > What was found with mod_wsgi was that it was better to have a
>  > directive in Apache configuration file which allowed one to set
>  > PYTHONHOME.
>
> Apparently, the use of PYTHONHOME would still override the value given
>  to Py_SetProgramName(), so it doesn't seem to me that you would lose any
>  flexibility by its use.

I'll give it some more thought, setting it may not be such a big deal,
I was perhaps just being overly cautious as I wanted something that
would work cross platform.

What I definitely don't want to do again is expose a
WSGIPythonExecutable directive as it just caused confusion as people
were using it for virtual environments when they should have been
using WSGIPythonHome. It became an issue because people were blogging
examples using WSGIPythonExecutable but then it wouldn't work on
Windows or MacOS X.

Graham

>  > This still didn't work for Windows, but seemed the best
>  > compromise. One benefit of making it configurable through the Apache
>  > configuration file was that that mechanism could then be used to point
>  > the interpreter at a Python virtual environment isolated from
>  > site-packages of standard Python installation. For details on this
>  > see:
>  >
>  >   http://code.google.com/p/modwsgi/wiki/VirtualEnvironments
>  >
>  > You might also read section 'Multiple Python Versions' of:
>  >
>  >   http://code.google.com/p/modwsgi/wiki/InstallationIssues
>  >
>  > which for mod_wsgi talks about the same problem with wrong version of
>  > Python being found.
>
>
> One reason for my terseness in my original post was that I couldn't see
>  any reason (at the time) for not employing Py_SetProgramName(), since it
>  seemed to me to be the preferred mechanism (if the executable path is
>  known at compile time) to *correctly* specify the path for a package
>  maintainer whose work will end up on other people's systems.  Or to give a
>  person like myself (targeting a specialized type of installation) to use
>  a symlink that actually points to the desired interpreter, without the
>  need to define PYTHONHOME (that has complicated things in the past
>  here).
>
>  Anyway, thank you for you attention.
>
>
>  Glen Mabey
>
From Dominique.Holzwarth at ch.delarue.com  Fri Mar 28 03:28:26 2008
From: Dominique.Holzwarth at ch.delarue.com (Dominique.Holzwarth@ch.delarue.com)
Date: Fri Mar 28 03:30:00 2008
Subject: [mod_python] Module importing and classes
In-Reply-To: <88e286470803271251lf3062duf920633f1a046846@mail.gmail.com>
Message-ID: <5213E58D85BC414998FA553C701E386C0EDD00F71B@SGBD012511.dlrmail.ad.delarue.com>

Hi Graham

The following is the complete code of the 2 files.

WebGUI.py
********************************************************************************
from mod_python import apache
webEdit = apache.import_module("~/test/GUI/Edit/webEdit.py")

WebGUIMessage = "Hello from WebGUI.py"

class WebGUI:
  def __init__(self):
    attribute = 0

def index(req):
  myClassObject = webEdit.WebEdit()
  return myClassObject.myAttribute
********************************************************************************

webEdit.py
********************************************************************************
from mod_python import apache
webGUI = apache.import_module("~/test/GUI/WebGUI.py")

class WebEdit(webGUI.WebGUI):
  def __init__(self):
    self.myAttribute = 1

def index(req):
  return webGUI.__dict__
********************************************************************************

The (more or less complete) error page looks like this:

URI:            '/python/test/GUI/WebGUI.py'
Location:       None
Directory:      'C:/Program Files/Apache Software Foundation/Apache2.2/htdocs/python/'
Filename:       'C:\\Program Files\\Apache Software Foundation\\Apache2.2\\htdocs\\python\\test\\GUI\\WebGUI.py'
PathInfo:       ''

Phase:          'PythonHandler'
Handler:        'mod_python.publisher'

Traceback (most recent call last):

  File "C:\Program Files\Python25\Lib\site-packages\mod_python\importer.py", line 1537, in HandlerDispatch
    default=default_handler, arg=req, silent=hlist.silent)

  File "C:\Program Files\Python25\Lib\site-packages\mod_python\importer.py", line 1229, in _process_target
    result = _execute_target(config, req, object, arg)

  File "C:\Program Files\Python25\Lib\site-packages\mod_python\importer.py", line 1128, in _execute_target
    result = object(arg)

  File "C:\Program Files\Python25\Lib\site-packages\mod_python\publisher.py", line 204, in handler
    module = page_cache[req]

  File "C:\Program Files\Python25\Lib\site-packages\mod_python\importer.py", line 1059, in __getitem__
    return import_module(req.filename)

  File "C:\Program Files\Python25\Lib\site-packages\mod_python\importer.py", line 296, in import_module
    log, import_path)

  File "C:\Program Files\Python25\Lib\site-packages\mod_python\importer.py", line 680, in import_module
    execfile(file, module.__dict__)

  File "C:\Program Files\Apache Software Foundation\Apache2.2\htdocs\python\test\GUI\WebGUI.py", line 6, in <module>
    webEdit = apache.import_module("~/test/GUI/Edit/webEdit.py")

  File "C:\Program Files\Python25\Lib\site-packages\mod_python\importer.py", line 296, in import_module
    log, import_path)

  File "C:\Program Files\Python25\Lib\site-packages\mod_python\importer.py", line 680, in import_module
    execfile(file, module.__dict__)

  File "C:\Program Files\Apache Software Foundation\Apache2.2\htdocs\python\test\GUI\Edit\webEdit.py", line 4, in <module>
    class WebEdit(webGUI.WebGUI):

AttributeError: 'module' object has no attribute 'WebGUI'

If I omit the 'webEdit = apache.import_module("~/test/GUI/Edit/webEdit.py")' inside 'WebGUI.py' as you mentioned I get a:

  File "C:\Program Files\Apache Software Foundation\Apache2.2\htdocs\python\test\GUI\WebGUI.py", line 19, in index
    myClassObject = webEdit.WebEdit()

NameError: global name 'webEdit' is not defined

Error...

And if I omit the 'webGUI = apache.import_module("~/test/GUI/WebGUI.py")' inside 'webEdit.py' I get:

File "C:\Program Files\Apache Software Foundation\Apache2.2\htdocs\python\test\GUI\Edit\webEdit.py", line 4, in <module>
    class WebEdit(webGUI.WebGUI):

NameError: name 'webGUI' is not defined

So that's why I thought I need to have both import statements...


-----Original Message-----
From: Graham Dumpleton [mailto:graham.dumpleton@gmail.com]
Sent: Donnerstag, 27. M?rz 2008 20:52
To: Holzwarth, Dominique (Berne Bauhaus)
Cc: mod_python@modpython.org
Subject: Re: [mod_python] Module importing and classes

Does webGUI.py try and import webEdit and thus you have a circular import?

With PythonDebug On in configuration, what is the import dependency graph information that is included in HTTP error page response after the trace back information?

Graham


From graham.dumpleton at gmail.com  Fri Mar 28 04:45:56 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Fri Mar 28 04:46:02 2008
Subject: [mod_python] Module importing and classes
In-Reply-To: <5213E58D85BC414998FA553C701E386C0EDD00F71B@SGBD012511.dlrmail.ad.delarue.com>
References: <88e286470803271251lf3062duf920633f1a046846@mail.gmail.com>
	<5213E58D85BC414998FA553C701E386C0EDD00F71B@SGBD012511.dlrmail.ad.delarue.com>
Message-ID: <88e286470803280145g216e41f9r76246ea21ce2e5b0@mail.gmail.com>

There should have been a section after that in the page returned in the browser.

Anyway, the problem is that you have a circular import, you shouldn't
do it as not only will you get this problem, but mod_python will
reimport both modules on every request even if you haven't changed
them because of how dependency management between modules works. What
you need to do is create a third file which contains the:

class WebGUI:
 def __init__(self):
   attribute = 0

definition and have webEdit.py import that so as to avoid the cycle.

Graham

On 28/03/2008, Dominique.Holzwarth@ch.delarue.com
<Dominique.Holzwarth@ch.delarue.com> wrote:
> Hi Graham
>
>  The following is the complete code of the 2 files.
>
>  WebGUI.py
>
> ********************************************************************************
>  from mod_python import apache
>
> webEdit = apache.import_module("~/test/GUI/Edit/webEdit.py")
>
>  WebGUIMessage = "Hello from WebGUI.py"
>
>  class WebGUI:
>   def __init__(self):
>     attribute = 0
>
>  def index(req):
>   myClassObject = webEdit.WebEdit()
>   return myClassObject.myAttribute
>  ********************************************************************************
>
>
>  webEdit.py
>  ********************************************************************************
>  from mod_python import apache
>
> webGUI = apache.import_module("~/test/GUI/WebGUI.py")
>
>
>  class WebEdit(webGUI.WebGUI):
>   def __init__(self):
>
>     self.myAttribute = 1
>
>  def index(req):
>   return webGUI.__dict__
>  ********************************************************************************
>
>  The (more or less complete) error page looks like this:
>
>  URI:            '/python/test/GUI/WebGUI.py'
>  Location:       None
>  Directory:      'C:/Program Files/Apache Software Foundation/Apache2.2/htdocs/python/'
>  Filename:       'C:\\Program Files\\Apache Software Foundation\\Apache2.2\\htdocs\\python\\test\\GUI\\WebGUI.py'
>  PathInfo:       ''
>
>  Phase:          'PythonHandler'
>  Handler:        'mod_python.publisher'
>
>  Traceback (most recent call last):
>
>   File "C:\Program Files\Python25\Lib\site-packages\mod_python\importer.py", line 1537, in HandlerDispatch
>     default=default_handler, arg=req, silent=hlist.silent)
>
>   File "C:\Program Files\Python25\Lib\site-packages\mod_python\importer.py", line 1229, in _process_target
>     result = _execute_target(config, req, object, arg)
>
>   File "C:\Program Files\Python25\Lib\site-packages\mod_python\importer.py", line 1128, in _execute_target
>     result = object(arg)
>
>   File "C:\Program Files\Python25\Lib\site-packages\mod_python\publisher.py", line 204, in handler
>     module = page_cache[req]
>
>   File "C:\Program Files\Python25\Lib\site-packages\mod_python\importer.py", line 1059, in __getitem__
>     return import_module(req.filename)
>
>   File "C:\Program Files\Python25\Lib\site-packages\mod_python\importer.py", line 296, in import_module
>     log, import_path)
>
>   File "C:\Program Files\Python25\Lib\site-packages\mod_python\importer.py", line 680, in import_module
>     execfile(file, module.__dict__)
>
>   File "C:\Program Files\Apache Software Foundation\Apache2.2\htdocs\python\test\GUI\WebGUI.py", line 6, in <module>
>     webEdit = apache.import_module("~/test/GUI/Edit/webEdit.py")
>
>   File "C:\Program Files\Python25\Lib\site-packages\mod_python\importer.py", line 296, in import_module
>     log, import_path)
>
>   File "C:\Program Files\Python25\Lib\site-packages\mod_python\importer.py", line 680, in import_module
>     execfile(file, module.__dict__)
>
>   File "C:\Program Files\Apache Software Foundation\Apache2.2\htdocs\python\test\GUI\Edit\webEdit.py", line 4, in <module>
>
>     class WebEdit(webGUI.WebGUI):
>
>  AttributeError: 'module' object has no attribute 'WebGUI'
>
>
> If I omit the 'webEdit = apache.import_module("~/test/GUI/Edit/webEdit.py")' inside 'WebGUI.py' as you mentioned I get a:
>
>   File "C:\Program Files\Apache Software Foundation\Apache2.2\htdocs\python\test\GUI\WebGUI.py", line 19, in index
>     myClassObject = webEdit.WebEdit()
>
>  NameError: global name 'webEdit' is not defined
>
>  Error...
>
>  And if I omit the 'webGUI = apache.import_module("~/test/GUI/WebGUI.py")' inside 'webEdit.py' I get:
>
>  File "C:\Program Files\Apache Software Foundation\Apache2.2\htdocs\python\test\GUI\Edit\webEdit.py", line 4, in <module>
>     class WebEdit(webGUI.WebGUI):
>
>  NameError: name 'webGUI' is not defined
>
>  So that's why I thought I need to have both import statements...
>
>
>
>  -----Original Message-----
>  From: Graham Dumpleton [mailto:graham.dumpleton@gmail.com]
>  Sent: Donnerstag, 27. M?rz 2008 20:52
>  To: Holzwarth, Dominique (Berne Bauhaus)
>  Cc: mod_python@modpython.org
>  Subject: Re: [mod_python] Module importing and classes
>
>  Does webGUI.py try and import webEdit and thus you have a circular import?
>
>  With PythonDebug On in configuration, what is the import dependency graph information that is included in HTTP error page response after the trace back information?
>
>  Graham
>
>

From Glen.Mabey at swri.org  Fri Mar 28 09:34:01 2008
From: Glen.Mabey at swri.org (Glen W. Mabey)
Date: Fri Mar 28 09:34:20 2008
Subject: [mod_python] patch to use Py_SetProgramName()
In-Reply-To: <88e286470803272141q56b4a18en2446a4852133dbf0@mail.gmail.com>
References: <20080326195116.GE24345@swri.org>
	<88e286470803261259n52aad63xb42ad844dedabc36@mail.gmail.com>
	<20080326201029.GF24345@swri.org>
	<88e286470803261315r31b3191bg11c2f7b6e5751f51@mail.gmail.com>
	<20080326202455.GG24345@swri.org>
	<88e286470803261351v15b3f5b0n8c063f3cfb508bf3@mail.gmail.com>
	<20080327145705.GA16811@swri.org>
	<88e286470803272141q56b4a18en2446a4852133dbf0@mail.gmail.com>
Message-ID: <20080328133401.GD32374@swri.org>

On Thu, Mar 27, 2008 at 11:41:54PM -0500, Graham Dumpleton wrote:
> What I do know is the code in Python internals which uses that value
> and others such as PYTHONHOME is really convoluted, especially when it
> comes to Windows and MacOS X where I never did quite work out where it
> finds some stuff for determining prefix location.

Without knowing much about how it works, it's easy for me to believe
that it is convoluted.  Watching system calls via strace for a different
embedded application, I could see it searching around for a python 
executable, and that was a bit shocking.  That experience was what led
me to search for and then use the Py_SetProgramName() function.

> What I definitely don't want to do again is expose a
> WSGIPythonExecutable directive as it just caused confusion as people
> were using it for virtual environments when they should have been
> using WSGIPythonHome. It became an issue because people were blogging
> examples using WSGIPythonExecutable but then it wouldn't work on
> Windows or MacOS X.

BTW, how exactly does one specify an environment variable like PYTHONHOME 
within an apache config script?  

Thank you,
Glen Mabey
From Dominique.Holzwarth at ch.delarue.com  Fri Mar 28 10:53:52 2008
From: Dominique.Holzwarth at ch.delarue.com (Dominique.Holzwarth@ch.delarue.com)
Date: Fri Mar 28 10:55:41 2008
Subject: [mod_python] Module importing and classes
In-Reply-To: <88e286470803280145g216e41f9r76246ea21ce2e5b0@mail.gmail.com>
Message-ID: <5213E58D85BC414998FA553C701E386C0EDD00FA9F@SGBD012511.dlrmail.ad.delarue.com>

When you mentioned the circular import I did some research learned that indeed doesn't work. So yes, the solution I'm going for is to make individual modules (files) for all my 'index(req)' functions (which implement a state-machine with some sub-state-machines) and put the class definitions in extra module files which then can be imported by the the state-machine (index()) files...

I haven't tried it yet fully but in theory it should work... If not I'll post a simple example again =)

thx

-----Original Message-----
From: Graham Dumpleton [mailto:graham.dumpleton@gmail.com]
Sent: Freitag, 28. M?rz 2008 09:46
To: Holzwarth, Dominique (Berne Bauhaus)
Cc: mod_python@modpython.org
Subject: Re: [mod_python] Module importing and classes

There should have been a section after that in the page returned in the browser.

Anyway, the problem is that you have a circular import, you shouldn't do it as not only will you get this problem, but mod_python will reimport both modules on every request even if you haven't changed them because of how dependency management between modules works. What you need to do is create a third file which contains the:

class WebGUI:
 def __init__(self):
   attribute = 0

definition and have webEdit.py import that so as to avoid the cycle.

Graham


From Dominique.Holzwarth at ch.delarue.com  Fri Mar 28 11:01:56 2008
From: Dominique.Holzwarth at ch.delarue.com (Dominique.Holzwarth@ch.delarue.com)
Date: Fri Mar 28 11:03:36 2008
Subject: [mod_python] Debugging under mod_python
Message-ID: <5213E58D85BC414998FA553C701E386C0EDD00FAA5@SGBD012511.dlrmail.ad.delarue.com>

Hello all

I've seen in the mod_python user manual that there's a directive PythonEnablePdb and set it to 'On' (PythonDebug is already set to 'On' as well). However, it's also stated that for this directive to be working you need to start apache with the command -DONE_PROCESS. Under winXP I have a shortcut provide by apache to start it:

"C:\Program Files\Apache Software Foundation\Apache2.2\bin\httpd.exe" -w -f "C:\Program Files\Apache Software Foundation\Apache2.2\conf\httpd.conf" -d "C:\Program Files\Apache Software Foundation\Apache2.2\." -DONE_PROCESS

If I just add the -DONE_PROCESS as stated above I get a runtime error! Does anyone know how to modify that shortcut command so it'll accept the -DONE_PROCESS?

Thx already,
Dominique


From jimge at rodentia.net  Sun Mar 30 02:50:33 2008
From: jimge at rodentia.net (Jim Geist)
Date: Sun Mar 30 02:50:43 2008
Subject: [mod_python] mod_python, python, MySQLdb, and Leopard - workable?
Message-ID: <8A4626E6-F916-4EE7-B881-66AD4131BDBD@rodentia.net>

Hi all -

I've been trying to get a small web system I'm working on ported from  
Linux to OS X so I can work on my laptop without connectivity to my  
Linux box. The system uses mod_python to implement a web service  
backed by MySQL, and also contains some command line Python tools for  
db maintenance.

I'm running into some problems. Seems on Leopard, Apache is running as  
x86_64, and python is i386. So to get mod_python to work, you have to  
compile it 64 bit. If you do that, it works fine, but THEN you have to  
install 64-bit MySQL, and compile MySQLdb as 64-bit. That makes the  
web side work, but then you can no longer use the MySQLdb module from  
the normal Python interpreter, since it's 32 bit...

Has anyone run into this, or found a solution? I could recompile  
Python as 64 bit, but then I'm maintaining a Python install different  
than the prepackaged one that came with Leopard, and I'm afraid of  
breaking other dependencies that use 32-bit modules.

Any advice appreciated. Thanks!!!

-- Jim


From graham.dumpleton at gmail.com  Sun Mar 30 05:25:03 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Sun Mar 30 05:25:09 2008
Subject: [mod_python] mod_python, python, MySQLdb, and Leopard - workable?
In-Reply-To: <8A4626E6-F916-4EE7-B881-66AD4131BDBD@rodentia.net>
References: <8A4626E6-F916-4EE7-B881-66AD4131BDBD@rodentia.net>
Message-ID: <88e286470803300225r787d7ccat3dd9afec2f56874e@mail.gmail.com>

You can build things with multiple architectures within the same
executables/objects. See:

  http://code.google.com/p/modwsgi/wiki/InstallationOnMacOSX
  http://developer.apple.com/releasenotes/OpenSource/PerlExtensionsRelNotes/index.html
  http://groups.google.com/group/comp.lang.python/browse_frm/thread/7bef767753fe40f1

for some guidance.

Graham

On 30/03/2008, Jim Geist <jimge@rodentia.net> wrote:
> Hi all -
>
>  I've been trying to get a small web system I'm working on ported from
>  Linux to OS X so I can work on my laptop without connectivity to my
>  Linux box. The system uses mod_python to implement a web service
>  backed by MySQL, and also contains some command line Python tools for
>  db maintenance.
>
>  I'm running into some problems. Seems on Leopard, Apache is running as
>  x86_64, and python is i386. So to get mod_python to work, you have to
>  compile it 64 bit. If you do that, it works fine, but THEN you have to
>  install 64-bit MySQL, and compile MySQLdb as 64-bit. That makes the
>  web side work, but then you can no longer use the MySQLdb module from
>  the normal Python interpreter, since it's 32 bit...
>
>  Has anyone run into this, or found a solution? I could recompile
>  Python as 64 bit, but then I'm maintaining a Python install different
>  than the prepackaged one that came with Leopard, and I'm afraid of
>  breaking other dependencies that use 32-bit modules.
>
>  Any advice appreciated. Thanks!!!
>
>  -- Jim
>
>
>  _______________________________________________
>  Mod_python mailing list
>  Mod_python@modpython.org
>  http://mailman.modpython.org/mailman/listinfo/mod_python
>
From Dominique.Holzwarth at ch.delarue.com  Mon Mar 31 03:47:10 2008
From: Dominique.Holzwarth at ch.delarue.com (Dominique.Holzwarth@ch.delarue.com)
Date: Mon Mar 31 03:48:48 2008
Subject: [mod_python] Mod_python and Debugging
Message-ID: <5213E58D85BC414998FA553C701E386C0EDD00FD88@SGBD012511.dlrmail.ad.delarue.com>

Hi all

I'm still trying to get apache running in 'debug mode' for mod_python. I've read that you have to add the option 'PythonEnablePdb On' to the directory directive where the Python-Handler is and, in order to use that option, you need to start apache with the command -DONE_PROCESS. That's where I'm still struggling tho.

When I start apache under Windows XP with:
"C:\Program Files\Apache Software Foundation\Apache2.2\bin\httpd.exe" -w -f "C:\Program Files\Apache Software Foundation\Apache2.2\conf\httpd.conf" -d "C:\Program Files\Apache Software Foundation\Apache2.2\." -DONE_PROCESS

I get a runtime error stating that apache was stopped in an unusual way or something...

I would be really happy if someone could help me how to use that PythonEnablePdb!

Greetings
Dominique


From graham.dumpleton at gmail.com  Mon Mar 31 06:41:57 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Mon Mar 31 06:42:03 2008
Subject: [mod_python] Mod_python and Debugging
In-Reply-To: <5213E58D85BC414998FA553C701E386C0EDD00FD88@SGBD012511.dlrmail.ad.delarue.com>
References: <5213E58D85BC414998FA553C701E386C0EDD00FD88@SGBD012511.dlrmail.ad.delarue.com>
Message-ID: <88e286470803310341j7975f6fdmeb31ee28146e61@mail.gmail.com>

Try the -X option instead. Do note that not all Apache third party
modules may work in a single process mode.

Also perhaps study the winpdb documentation as maybe they say
something about how to debug mod_python with pdb or with winpdb. You
might even try their Python debugger instead. See:

  http://www.winpdb.org

You might also have a look through general Apache documentation on debugging:

  http://httpd.apache.org/dev/debugging.html

Finally, if your web application is capable of running on top of any
WSGI compliant interface, ie., is not limited to mod_python, then look
at the various WSGI debugging options as well:

  http://code.google.com/p/modwsgi/wiki/DebuggingTechniques

Other than that, can't help as not a Windows person.

Graham

On 31/03/2008, Dominique.Holzwarth@ch.delarue.com
<Dominique.Holzwarth@ch.delarue.com> wrote:
> Hi all
>
>  I'm still trying to get apache running in 'debug mode' for mod_python. I've read that you have to add the option 'PythonEnablePdb On' to the directory directive where the Python-Handler is and, in order to use that option, you need to start apache with the command -DONE_PROCESS. That's where I'm still struggling tho.
>
>  When I start apache under Windows XP with:
>  "C:\Program Files\Apache Software Foundation\Apache2.2\bin\httpd.exe" -w -f "C:\Program Files\Apache Software Foundation\Apache2.2\conf\httpd.conf" -d "C:\Program Files\Apache Software Foundation\Apache2.2\." -DONE_PROCESS
>
>  I get a runtime error stating that apache was stopped in an unusual way or something...
>
>  I would be really happy if someone could help me how to use that PythonEnablePdb!
>
>  Greetings
>  Dominique
>
>
>  _______________________________________________
>  Mod_python mailing list
>  Mod_python@modpython.org
>  http://mailman.modpython.org/mailman/listinfo/mod_python
>
From grisha at modpython.org  Mon Mar 31 22:40:28 2008
From: grisha at modpython.org (Minnie Wolfe)
Date: Mon Mar 31 21:40:38 2008
Subject: [mod_python] [SPAM] R0lex repl1ca is a ult1mate g1ft
Message-ID: <teyksdurqxqqzewxfkjgahyg$lursqhebmpecqfpcftcvepdy>

Looking for superior quality repl1ca w4tches? Then welcome to the newly redesigned
C0rum, home of the best reproduction R0lex Sportm0del w4tches on the whole web!
C0rum 0ffers a tremendous selection of R0lex repl1ca timepieces for both
men and women, all of them featuring the original manuf4cturer markings along with a myriad
of details that make these w4tches look so much like the brand new R0lexes that
even the experts are having a hard time differentiating them!
http://www.C0rum/

So, come visit C0rum and enjoy not only the most beautiful R0lex Sportm0del repl1ca
w4tches at unbelievable pr1ces, but also get an extra 15% 0ff when you buy two!
http://www.C0rum/




