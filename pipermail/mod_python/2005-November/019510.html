<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Re: Cookie problems with mobile phones
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20Cookie%20problems%20with%20mobile%20phones&In-Reply-To=250ed040511100930t6fdd7fcp37afc0f35c9a730%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019508.html">
   <LINK REL="Next"  HREF="019514.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Re: Cookie problems with mobile phones</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Jason Stubbs</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20Cookie%20problems%20with%20mobile%20phones&In-Reply-To=250ed040511100930t6fdd7fcp37afc0f35c9a730%40mail.gmail.com"
       TITLE="[mod_python] Re: Cookie problems with mobile phones">jstubbs at work-at.co.jp
       </A><BR>
    <I>Thu Nov 10 20:07:20 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="019508.html">[mod_python] Re: Cookie problems with mobile phones
</A></li>
        <LI>Next message: <A HREF="019514.html">[mod_python] Cookie problems with mobile phones
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19510">[ date ]</a>
              <a href="thread.html#19510">[ thread ]</a>
              <a href="subject.html#19510">[ subject ]</a>
              <a href="author.html#19510">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Robert Wallner wrote:
&gt;<i> On 11/10/05, Sebastjan Trepca &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">trepca at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i>we have a problem when users access our site with mobile devices, it
</I>&gt;&gt;<i>seems that Cookie class has some problems with them...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Apache access log:
</I>&gt;&gt;<i>213.229.249.42 - - [10/Nov/2005:11:50:32 +0100] &quot;GET / HTTP/1.1&quot; 500
</I>&gt;&gt;<i>601 &quot;-&quot; &quot;SonyEricssonZ1010/R1H SEMC-Browser/4.0.2 Profile/MIDP-2.0
</I>&gt;&gt;<i>Configuration/CLDC-1.1&quot;
</I>&gt;&gt;<i>213.229.249.42 - - [10/Nov/2005:11:50:45 +0100] &quot;GET / HTTP/1.1&quot; 500
</I>&gt;&gt;<i>601 &quot;-&quot; &quot;SonyEricssonZ1010/R1H SEMC-Browser/4.0.2 Profile/MIDP-2.0
</I>&gt;&gt;<i>Configuration/CLDC-1.1&quot;
</I>&gt;&gt;<i>213.229.249.42 - - [10/Nov/2005:11:51:44 +0100] &quot;GET / HTTP/1.1&quot; 500
</I>&gt;&gt;<i>601 &quot;-&quot; &quot;SonyEricssonZ1010/R1H SEMC-Browser/4.0.2 Profile/MIDP-2.0
</I>&gt;&gt;<i>Configuration/CLDC-1.1&quot;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Apache error log:
</I>&gt;&gt;<i>[Thu Nov 10 11:51:44 2005] [error] [client 213.229.249.42]
</I>&gt;&gt;<i>PythonHandler test.portal.handler:   File
</I>&gt;&gt;<i>&quot;/usr/lib64/python2.4/site-packages/mod_python/Session.py&quot;, line 114,
</I>&gt;&gt;<i>in __init__\n    cookies = Cookie.get_cookies(req)
</I>&gt;&gt;<i>[Thu Nov 10 11:51:44 2005] [error] [client 213.229.249.42]
</I>&gt;&gt;<i>PythonHandler test.portal.handler:   File
</I>&gt;&gt;<i>&quot;/usr/lib64/python2.4/site-packages/mod_python/Cookie.py&quot;, line 369,
</I>&gt;&gt;<i>in get_cookies\n    return Class.parse(cookies, **kw)
</I>&gt;&gt;<i>[Thu Nov 10 11:51:44 2005] [error] [client 213.229.249.42]
</I>&gt;&gt;<i>PythonHandler test.portal.handler:   File
</I>&gt;&gt;<i>&quot;/usr/lib64/python2.4/site-packages/mod_python/Cookie.py&quot;, line 115,
</I>&gt;&gt;<i>in parse\n    dict = _parse_cookie(str, Class)
</I>&gt;&gt;<i>[Thu Nov 10 11:51:44 2005] [error] [client 213.229.249.42]
</I>&gt;&gt;<i>PythonHandler test.portal.handler:   File
</I>&gt;&gt;<i>&quot;/usr/lib64/python2.4/site-packages/mod_python/Cookie.py&quot;, line 329,
</I>&gt;&gt;<i>in _parse_cookie\n    setattr(c, l_key, val)
</I>&gt;&gt;<i>[Thu Nov 10 11:51:44 2005] [error] [client 213.229.249.42]
</I>&gt;&gt;<i>PythonHandler test.portal.handler: AttributeError: 'Cookie' object has
</I>&gt;&gt;<i>no attribute '$version'
</I> &gt;
&gt;<i> I have the same problem with mobile devices. Changing line 329 in
</I>&gt;<i> /usr/lib/python2.4/site-packages/mod_python/Cookie.py from:
</I>&gt;<i> 
</I>&gt;<i> if (l_key in valid or key[0] == '$'):
</I>&gt;<i> 
</I>&gt;<i> to:
</I>&gt;<i> 
</I>&gt;<i> if (l_key in valid):
</I>&gt;<i> 
</I>&gt;<i> seems to resolve the problem for mobile devices, while not affecting
</I>&gt;<i> other browsers. Still, I don't know what other side effects may this
</I>&gt;<i> change have, as I didn't find anything about this problem on the net.
</I>
Not sure if it's the same in your countr(y/ies) as it is in Japan, but 
the current
available mobile phones do not support client-side cookies at all. Try 
disabling
cookies in your PC's browser and see if the same issue arises. Can't 
offer any
help other than that, but lack of support for client-side cookies is 
probably
what is triggering the bug.

--
Jason Stubbs
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019508.html">[mod_python] Re: Cookie problems with mobile phones
</A></li>
	<LI>Next message: <A HREF="019514.html">[mod_python] Cookie problems with mobile phones
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19510">[ date ]</a>
              <a href="thread.html#19510">[ thread ]</a>
              <a href="subject.html#19510">[ subject ]</a>
              <a href="author.html#19510">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
