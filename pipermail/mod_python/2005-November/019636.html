<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Vampire/mod_python determining type of argument -
	GET/POST
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Vampire/mod_python%20determining%20type%20of%20argument%20-%0A%09GET/POST&In-Reply-To=438CB9BD.6010208%40jgassociates.ca">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019635.html">
   <LINK REL="Next"  HREF="019632.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Vampire/mod_python determining type of argument -
	GET/POST</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Deron Meranda</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Vampire/mod_python%20determining%20type%20of%20argument%20-%0A%09GET/POST&In-Reply-To=438CB9BD.6010208%40jgassociates.ca"
       TITLE="[mod_python] Vampire/mod_python determining type of argument -
	GET/POST">deron.meranda at gmail.com
       </A><BR>
    <I>Tue Nov 29 17:06:17 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="019635.html">[mod_python] Vampire/mod_python determining type of argument
	-	GET/POST
</A></li>
        <LI>Next message: <A HREF="019632.html">[mod_python] Vampire/mod_python determining type of argument -
	GET/POST
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19636">[ date ]</a>
              <a href="thread.html#19636">[ thread ]</a>
              <a href="subject.html#19636">[ subject ]</a>
              <a href="author.html#19636">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 11/29/05, Jim Gallacher &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">jpg at jgassociates.ca</A>&gt; wrote:
&gt;<i> However, most browsers IIRC will only submit a form using POST or GET.
</I>
Yes, if it's a browser, and if it's a &lt;form&gt;.  But the server doesn't
know for sure where it came from, it might not be a browser.
You should still always check if you want to be safe.


Anyway, looking at things closer.  You determine the type of request
via the req.method which can be about anything &quot;GET&quot;,&quot;POST&quot;,&quot;PUT&quot;,
&quot;DELETE&quot;,...

&quot;Arguments&quot; can be decoded anyway you want.  There are
expected conventions though, and this is what mod_python's
FieldStorage class attempts to do (you don't have to use
FieldStorage though, which I don't for example when I handle
PUT requests).

In mod_python the rules seem to be:

  1. Regardless of method, decode arguments from the request URL (the ?-part)
  AND
  2. If method is POST:
     2a. If Content-Type is 'application/x-www.form-urlencoded':
           URL-decode *additional* arguments from request body
     2b. If Content-Type is 'multipart/form-data':
           decode one-level of the multipart mime message and
           each part becomes an *additional* argument

The standard cgi module's rules are little different though--
from what I can tell:

   1. If the method is either GET or HEAD, decode arguments from
       the request URL, if any.
   OR
   2. For any other method:
      2a.If Content-Type is 'application/x-www-form-urlencode':
           URL-decode arguments from the request body
      2b. If Content-Type is any 'multpart/*':
            docode the multipart mime message and each part
            becomes an argument.

So with the standard cgi, you can never get a combination
of arguments that come from both the URL and the content
body.  But with mod_python, you can.


&gt;<i> If you use &lt;form method=&quot;PUT&quot;&gt;, the browser will still use a POST.
</I>
This is IMHO a browser bug.  If it doesn't support the method then
it should not submit anything.  But from what I can tell most browsers
will treat anything other than GET or POST as if it were a GET
(at least Firefox).  urllib2 likewise not useful for anything other
than gets or posts.

But if you use Python's httplib, you can specify any method you
want.  Other &quot;tools&quot; such as wget and curl also allow you to
specify other methods.


Anyway, if it is important to tell where arguments came from,
perhaps the FieldStorage and related classes could be updated
to track an additional attribute, perhaps called &quot;source&quot;?  And
it could either be &quot;url&quot; or &quot;content&quot;.  This wouldn't be a very
challenging patch.

But, off course, this would be adding functionality that's not in the
standard cgi module's FieldStorage classes, so I don't know if
that's where we want mod_python to go.  But the standard cgi
module don't mix sources anyway, so it's not an issue for them.
--
Deron Meranda

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019635.html">[mod_python] Vampire/mod_python determining type of argument
	-	GET/POST
</A></li>
	<LI>Next message: <A HREF="019632.html">[mod_python] Vampire/mod_python determining type of argument -
	GET/POST
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19636">[ date ]</a>
              <a href="thread.html#19636">[ thread ]</a>
              <a href="subject.html#19636">[ subject ]</a>
              <a href="author.html#19636">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
