<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] mod_python article
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python%20article&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019499.html">
   <LINK REL="Next"  HREF="019501.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] mod_python article</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python%20article&In-Reply-To="
       TITLE="[mod_python] mod_python article">grahamd at dscpl.com.au
       </A><BR>
    <I>Wed Nov  9 17:01:29 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="019499.html">[mod_python] mod_python article
</A></li>
        <LI>Next message: <A HREF="019501.html">[mod_python] mod_python article
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19500">[ date ]</a>
              <a href="thread.html#19500">[ thread ]</a>
              <a href="subject.html#19500">[ subject ]</a>
              <a href="author.html#19500">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>A few comments of my own to expand on what Jorey as already
pointed out.

Jorey Bump wrote ..
&gt;<i> Joshua D. Drake wrote:
</I>&gt;<i> &gt; Hello,
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I wrote a brief introduction to mod_python/psp over at DevX about a 
</I>&gt;<i> &gt; month ago. I am by no means an expert Python guy but I thought it may
</I>&gt;<i> be
</I>&gt;<i> &gt; useful for people new to mod_python. The article can be found here and
</I>&gt;<i> I 
</I>&gt;<i> &gt; hope it is helpful.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; <A HREF="http://www.devx.com/webdev/Article/29357">http://www.devx.com/webdev/Article/29357</A>
</I>&gt;<i> 
</I>&gt;<i> I see a few problems with your Publisher example:
</I>&gt;<i> 
</I>&gt;<i> 1. Replace AddHandler with SetHandler in your example configuration.
</I>
Even if SetHandler is used, with the action specified in the form, the
mod_python code would need to be saved as &quot;python/index.py&quot;.

If the name of the mod_python code file were &quot;python/getmonth.py&quot; then
your action would need to be &quot;python/getmonth.py/getMonth&quot;.

It isn't clear what the name of the mod_python code file is supposed to
be, so anyone following the article may get confused.

One could still use AddHandler if it were corrected to:

  AddHandler mod_python.py

but, presuming that the mod_python code is in &quot;python/getmonth.py&quot;
you would also still need to change the action of the form to be
&quot;python/getmonth.py/getMonth&quot;.

If you want to not be able to use &quot;.py&quot; in the URL, then you have extra
work to do to ensure that MultiViews matching in Apache is properly
configured.

&gt;<i> 2. Provide the name of your published module.
</I>
Is this what I described further above as far as the name of the mod_python
code file, or do you mean something else???

&gt;<i> 3. Use a return statement instead of req.write().
</I>
Reason for this is that if req.write() is used, your &quot;Authors Note&quot;
about not needing to send content type is wrong. If you use req.write()
you must set the content type. A content type is only set for you when
using mod_python.publisher when the content is returned from the
function as the result and no use of req.write() has occurred.

Even if content type were set appropriately and req.write() were used
there is an issue in mod_python.publisher &lt;= 3.1.4 whereby not
returning anything from the function (ie., None), or even an empty
string is going to result in a HTTP 500 error being raised. As a hack
return a string with a newline in it, ie., &quot;\n&quot;.

Thus you mod_python code becomes:

   import calendar
   def getMonth(req,month):
      req.content_type = 'text/plain'
      req.write(calendar.month(2005, int(month),2,3))
      return &quot;\n&quot;

or if returned as result:

  import calendar
  def getMonth(req,month):
      return calendar.month(2005, int(month),2,3)

Suggest you drop the &quot;#!/usr/bin/python&quot; from the mod_python'd
example as not necessary.

Graham
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019499.html">[mod_python] mod_python article
</A></li>
	<LI>Next message: <A HREF="019501.html">[mod_python] mod_python article
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19500">[ date ]</a>
              <a href="thread.html#19500">[ thread ]</a>
              <a href="subject.html#19500">[ subject ]</a>
              <a href="author.html#19500">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
