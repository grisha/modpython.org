<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] returning errors from python handler and
	ErrorDocument
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20returning%20errors%20from%20python%20handler%20and%0A%09ErrorDocument&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019623.html">
   <LINK REL="Next"  HREF="019627.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] returning errors from python handler and
	ErrorDocument</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Martin _</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20returning%20errors%20from%20python%20handler%20and%0A%09ErrorDocument&In-Reply-To="
       TITLE="[mod_python] returning errors from python handler and
	ErrorDocument">gzlist at googlemail.com
       </A><BR>
    <I>Sun Nov 27 17:27:15 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="019623.html">[mod_python] returning errors from python handler and
	ErrorDocument
</A></li>
        <LI>Next message: <A HREF="019627.html">[mod_python] returning errors from python handler and
	ErrorDocument
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19624">[ date ]</a>
              <a href="thread.html#19624">[ thread ]</a>
              <a href="subject.html#19624">[ subject ]</a>
              <a href="author.html#19624">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>In a related query to this one, is it possible to undo a raised http error?
I've not had much luck in sending 404s to a script that then creates the
resource asked for and bounces apache back to try again from the start, the
404 sticks despite my best attempts to overwrite it with a 200:

# httpd.conf
&lt;Directory &quot;D:/website/search&quot;&gt;
        ErrorDocument 404 /py/404.xml
&lt;/Directory&gt;

&lt;Directory &quot;D:/website/py&quot;&gt;
        AddHandler mod_python .xml
        PythonHandler index
&lt;/Directory&gt;

# D:/website/py/index.py
def handler(req):
        if not req.prev:
                return apache.HTTP_FORBIDDEN

        ## create relevant resource here ##

        # doesn't help # req.prev.state = apache.HTTP_OK
        # doesn't help # req.state = apache.HTTP_OK
        req.internal_redirect(req.prev.unparsed_uri)
        # doesn't help # req.next.state = apache.HTTP_OK
        # doesn't help # raise apache.SERVER_RETURN, apache.HTTP_OK
        return apache.OK

I'm open to complete rethinks here, this doesn't strike me as optimal, as
the few requests that don't want existing resources will go through three
independant handlers, but for requirements:
-I want to serve static content, even if it's generated because of that
request, as static content, not mod_python created chunked output
-I want to keep all python stuff in that /py/ dir, rather than scattering
scripts all over the tree

Any wise thoughts gratefully received,

Martin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20051127/4c60dba5/attachment.html">http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20051127/4c60dba5/attachment.html</A>
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019623.html">[mod_python] returning errors from python handler and
	ErrorDocument
</A></li>
	<LI>Next message: <A HREF="019627.html">[mod_python] returning errors from python handler and
	ErrorDocument
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19624">[ date ]</a>
              <a href="thread.html#19624">[ thread ]</a>
              <a href="subject.html#19624">[ subject ]</a>
              <a href="author.html#19624">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
