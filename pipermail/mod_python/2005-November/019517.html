<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] mod_python claims it cannot find a module
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python%20claims%20it%20cannot%20find%20a%20module&In-Reply-To=43747656.3030303%40ribosome.natur.cuni.cz">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019516.html">
   <LINK REL="Next"  HREF="019519.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] mod_python claims it cannot find a module</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python%20claims%20it%20cannot%20find%20a%20module&In-Reply-To=43747656.3030303%40ribosome.natur.cuni.cz"
       TITLE="[mod_python] mod_python claims it cannot find a module">grahamd at dscpl.com.au
       </A><BR>
    <I>Fri Nov 11 06:43:09 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="019516.html">[mod_python] mod_python claims it cannot find a module
</A></li>
        <LI>Next message: <A HREF="019519.html">[mod_python] Vampire ErrorDocument
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19517">[ date ]</a>
              <a href="thread.html#19517">[ thread ]</a>
              <a href="subject.html#19517">[ subject ]</a>
              <a href="author.html#19517">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 11/11/2005, at 9:45 PM, Martin MOKREJ&#352; wrote:

&gt;<i> Graham,
</I>&gt;<i>   how can I improt just a single funtion from a module (3.2.2b)?
</I>&gt;<i> I used to have:
</I>&gt;<i>
</I>&gt;<i> import os
</I>&gt;<i> # from cElementTree import parse
</I>&gt;<i> from elementtree.ElementTree import parse
</I>&gt;<i> import helper_functions
</I>&gt;<i> from sql_io import cField
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I'd like to have:
</I>&gt;<i>
</I>&gt;<i> try:
</I>&gt;<i>     from mod_python import apache
</I>&gt;<i>
</I>&gt;<i>     _directory = os.path.dirname(__file__)
</I>&gt;<i>     for _my_modulename in ['helper_functions']:
</I>&gt;<i>         __dict__[_my_modulename] = apache.import_module 
</I>&gt;<i> (_my_modulename, path=[_directory])
</I>&gt;<i> except: # without raise
</I>&gt;<i>     import helper_functions
</I>&gt;<i>     from sql_io import cField # is this possible? I do not want to  
</I>&gt;<i> import the whole file.
</I>
When using:

   from sql_io import cField

the whole file is still imported. The only difference is that references
are added into the globals of the caller only for the items listed.

Thus, presuming the sql_io module is in that same directory, the
following is equivalent:

   sql_io = apache.import_module(&quot;sql_io&quot;,path=[_directory])
   cField = sql_io.cField

Graham

&gt;<i> Graham Dumpleton wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> =?windows-1252?Q?Martin_MOKREJ=8A?= wrote ..
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Because of problems with mixing &quot;import&quot; with the mod_python module
</I>&gt;&gt;&gt;&gt;<i> loader, you are actually better of using:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>  from mod_python import apache
</I>&gt;&gt;&gt;&gt;<i>  import os
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>  directory = os.path.dirname(__file__)
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>  web_settings = apache.import_module(&quot;web_settings&quot;,path= 
</I>&gt;&gt;&gt;&gt;<i> [directory])
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Here you are explicitly telling it which directory to get the  
</I>&gt;&gt;&gt;&gt;<i> module
</I>&gt;&gt;&gt;&gt;<i> from and avoid all problems with things not being found in the  
</I>&gt;&gt;&gt;&gt;<i> Python
</I>&gt;&gt;&gt;&gt;<i> module search path. You should only use this for loading in your  
</I>&gt;&gt;&gt;&gt;<i> own
</I>&gt;&gt;&gt;&gt;<i> modules though, not standard Python modules.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Graham, how can I fork the code so that for normal &quot;console&quot; use  
</I>&gt;&gt;&gt;<i> it would
</I>&gt;&gt;&gt;<i> do
</I>&gt;&gt;&gt;<i> normal import and that when running under mod_apache it would run  
</I>&gt;&gt;&gt;<i> this
</I>&gt;&gt;&gt;<i> trick?
</I>&gt;&gt;&gt;<i> I use the modules also for command-line tests and some utilities.
</I>&gt;&gt;&gt;<i> What variable should I look for in __dict__.keys()? ;-)
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> You could use:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>   try:
</I>&gt;&gt;<i>     from mod_python import apache
</I>&gt;&gt;<i>     directory = os.path.dirname(__file__)
</I>&gt;&gt;<i>     web_settings = apache.import_module(&quot;web_settings&quot;,path= 
</I>&gt;&gt;<i> [directory])
</I>&gt;&gt;<i>   except:
</I>&gt;&gt;<i>     import web_settings
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The import of &quot;apache&quot; from a command line script will fail and thus
</I>&gt;&gt;<i> it will fall through to normal &quot;import&quot; statement for importing  
</I>&gt;&gt;<i> web_settings.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> There are cleaner ways, but it gets quite complicated and the  
</I>&gt;&gt;<i> mod_python
</I>&gt;&gt;<i> module importing system as implemented by apache.import_module() has
</I>&gt;&gt;<i> some problems at  the moment which makes it even worse. This all  
</I>&gt;&gt;<i> might
</I>&gt;&gt;<i> get solved in a future version of mod_python and at that point the  
</I>&gt;&gt;<i> cleaner
</I>&gt;&gt;<i> way may be available.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Graham
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> -- 
</I>&gt;<i> Martin Mokrejs
</I>&gt;<i> Email: 'bW9rcmVqc21Acmlib3NvbWUubmF0dXIuY3VuaS5jeg==\n'.decode 
</I>&gt;<i> ('base64')
</I>&gt;<i> GPG key is at <A HREF="http://www.natur.cuni.cz/~mmokrejs">http://www.natur.cuni.cz/~mmokrejs</A>
</I>&gt;<i>
</I>

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019516.html">[mod_python] mod_python claims it cannot find a module
</A></li>
	<LI>Next message: <A HREF="019519.html">[mod_python] Vampire ErrorDocument
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19517">[ date ]</a>
              <a href="thread.html#19517">[ thread ]</a>
              <a href="subject.html#19517">[ subject ]</a>
              <a href="author.html#19517">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
