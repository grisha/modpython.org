<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Re: Another threading issue: chdir (fwd)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20Another%20threading%20issue%3A%20chdir%20%28fwd%29&In-Reply-To=00b401bfd4b2%240aed8a30%24faa679c1%40spirou">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011192.html">
   <LINK REL="Next"  HREF="011197.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Re: Another threading issue: chdir (fwd)</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Gregory Trubetskoy</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20Another%20threading%20issue%3A%20chdir%20%28fwd%29&In-Reply-To=00b401bfd4b2%240aed8a30%24faa679c1%40spirou"
       TITLE="[mod_python] Re: Another threading issue: chdir (fwd)">grisha at ispol.com
       </A><BR>
    <I>Mon Jun 12 17:30:14 EST 2000</I>
    <P><UL>
        <LI>Previous message: <A HREF="011192.html">[mod_python] Re: Another threading issue: chdir (fwd)
</A></li>
        <LI>Next message: <A HREF="011197.html">[mod_python] Re: Another threading issue: chdir (fwd)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11189">[ date ]</a>
              <a href="thread.html#11189">[ thread ]</a>
              <a href="subject.html#11189">[ subject ]</a>
              <a href="author.html#11189">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, 12 Jun 2000, St&#233;phane Bidoul wrote:

&gt;<i> &gt;The more I think about this, the more it seems to me that doing away with
</I>&gt;<i> &gt;the chdir and prepending the path rather than the '.' is the way to go.
</I>&gt;<i> 
</I>&gt;<i> Agreed, but I wonder how much the manipulation of sys.path to do the imports
</I>&gt;<i> can cause threading issues... Is it possible to avoid it?
</I>
You could avoid it by making sure that the Pythonpath includes the
directory where your handlers are from the start, for example by setting
PYTHONPATH in the Apache startup script. But if we're going this route, we
might as well abandon the multiple interpreters.

Another problem with this is that typically you'll have to be root on the
system to restart Apache, and in many cases users are not.

On the upside, sys.path shouldn't get manipulated more than once. An
interpreter will get created and the sys.path changed upon the first hit,
after that it won't change. The sys.path manipualtion should be surrounded
by Python locks.

I have another idea - unless I'm missing something obvious, the way to
deal with this would be to add the directory to the path at interpreter
creation time in mod_python.c.

Grisha



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011192.html">[mod_python] Re: Another threading issue: chdir (fwd)
</A></li>
	<LI>Next message: <A HREF="011197.html">[mod_python] Re: Another threading issue: chdir (fwd)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11189">[ date ]</a>
              <a href="thread.html#11189">[ thread ]</a>
              <a href="subject.html#11189">[ subject ]</a>
              <a href="author.html#11189">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
