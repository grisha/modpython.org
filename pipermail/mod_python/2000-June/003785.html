<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Another threading issue: chdir (fwd)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Another%20threading%20issue%3A%20chdir%20%28fwd%29&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003784.html">
   <LINK REL="Next"  HREF="003786.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Another threading issue: chdir (fwd)</H1>
    <B>Gregory Trubetskoy</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Another%20threading%20issue%3A%20chdir%20%28fwd%29&In-Reply-To="
       TITLE="[mod_python] Another threading issue: chdir (fwd)">grisha at modpython.org
       </A><BR>
    <I>Thu Jun  8 18:14:05 EST 2000</I>
    <P><UL>
        <LI>Previous message: <A HREF="003784.html">[mod_python] Another threading issue: chdir
</A></li>
        <LI>Next message: <A HREF="003786.html">[mod_python] Re: Another threading issue: chdir (fwd)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3785">[ date ]</a>
              <a href="thread.html#3785">[ thread ]</a>
              <a href="subject.html#3785">[ subject ]</a>
              <a href="author.html#3785">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<table border=0 width="100%"><tr><td>
<!--beginarticle-->
<PRE>Having the url directory as your current directory is just an intuitive
thing and makes it easier for the developer.... E.g. if you're trying to
open files, etc.

One thing that we could do is restore the original directory and make sure
that the lock is aqcuired before first chdir() and after the last chdir()?

Or chdir could be made optional via a directive of some sort.... I need to
think about this too...

--
  Gregory (Grisha) Trubetskoy
       <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">grisha at modpython.org</A>

On Thu, 8 Jun 2000, [Windows-1252] St&#233;phane Bidoul wrote:

&gt;<i> Hi again,
</I>&gt;<i> 
</I>&gt;<i> Obviously, chdir is not thread-safe
</I>&gt;<i> (I discovered the problem by running different 
</I>&gt;<i> handlers in different directories)
</I>&gt;<i> 
</I>&gt;<i> It's ok with the one performed in cgihandler,
</I>&gt;<i> since cgi must run single-threaded anyway.
</I>&gt;<i> 
</I>&gt;<i> I wonder if the one in mod_python.c is really necessary?
</I>&gt;<i> Maybe apache.import_module() could add the directory to
</I>&gt;<i> pythonpath before doing the import instead of adding '.'.
</I>&gt;<i> Oh, and now that I write it, changing python path is 
</I>&gt;<i> not thread-safe either: can we do the import without
</I>&gt;<i> changing pythonpath at all? If not, another lock 
</I>&gt;<i> will be required to protect that...
</I>&gt;<i> 
</I>&gt;<i> There is also a chdir in the httpdapi handler
</I>&gt;<i> but I've no idea about that one.
</I>&gt;<i> 
</I>&gt;<i> Well, I hope the end of the threading tunnel is in sight...
</I>&gt;<i> 
</I>&gt;<i> -sbi
</I>&gt;<i> 
</I>


</PRE>
<!--endarticle-->
</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003784.html">[mod_python] Another threading issue: chdir
</A></li>
	<LI>Next message: <A HREF="003786.html">[mod_python] Re: Another threading issue: chdir (fwd)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3785">[ date ]</a>
              <a href="thread.html#3785">[ thread ]</a>
              <a href="subject.html#3785">[ subject ]</a>
              <a href="author.html#3785">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
