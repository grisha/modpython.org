<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] New Module Importer Woes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20New%20Module%20Importer%20Woes&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024916.html">
   <LINK REL="Next"  HREF="024918.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] New Module Importer Woes</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Luke Burden</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20New%20Module%20Importer%20Woes&In-Reply-To="
       TITLE="[mod_python] New Module Importer Woes">luke at demonware.net
       </A><BR>
    <I>Mon Mar  3 20:18:03 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="024916.html">[mod_python] OS X install mod_python w/o MacPorts
</A></li>
        <LI>Next message: <A HREF="024918.html">[mod_python] New Module Importer Woes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24917">[ date ]</a>
              <a href="thread.html#24917">[ thread ]</a>
              <a href="subject.html#24917">[ subject ]</a>
              <a href="author.html#24917">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

I get swamped with ImportErrors when using the latest module importer
with mod_python 3.3 / apache 2.2 / python 2.5.

The site structure is quite flat - all the python source files in:
/var/www/sitename/src/

And all the psps in:

/var/www/sitename/src/psps/

The apache configuration is nothing special, and is thus:

&lt;Directory &quot;/var/www/sitename/src&quot;&gt;
        SetHandler mod_python
        PythonHandler mainhandler
        PythonDebug On
        PythonInterpreter sitename
&lt;/Directory&gt;

Import statements from .psp files in the psps directory are what are failing.
So for example, /var/www/sitename/src/psps/page.psp might have a line,
&quot;import model&quot;, hoping to get it's sweaty hands on
/var/www/sitename/src/model.py.  But an ImportError will occur, of the
form:

======
Traceback (most recent call last):

  File &quot;/usr/lib/python2.5/site-packages/mod_python/importer.py&quot;, line
1537, in HandlerDispatch
    default=default_handler, arg=req, silent=hlist.silent)

  File &quot;/usr/lib/python2.5/site-packages/mod_python/importer.py&quot;, line
1229, in _process_target
    result = _execute_target(config, req, object, arg)

  File &quot;/usr/lib/python2.5/site-packages/mod_python/importer.py&quot;, line
1128, in _execute_target
    result = object(arg)

  File &quot;/var/www/sitename/src/mainhandler.py&quot;, line 290, in handler
    return genpages.page(req)

  File &quot;/var/www/sitename/src/genpages.py&quot;, line 20, in page
    template.run(vars=vars)

  File &quot;/usr/lib/python2.5/site-packages/mod_python/psp.py&quot;, line 243, in run
    exec code in global_scope

  File &quot;/var/www/sitename/src/psps/page.psp&quot;, line 2, in &lt;module&gt;
    import model

ImportError: No module named model
======

The frustrating thing is, in the module cache dump, you can see
model.py has been loaded successfully already so it's in scope.

I've tried apache directives to add the src folder to the importer
path, but haven't had any success with that.
Any suggestions anyone?  Is there a better way of structuring modules
/ psps to be mod_python 3.3 compatible?  Any advice really
appreciated, thanks.

- luke
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024916.html">[mod_python] OS X install mod_python w/o MacPorts
</A></li>
	<LI>Next message: <A HREF="024918.html">[mod_python] New Module Importer Woes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24917">[ date ]</a>
              <a href="thread.html#24917">[ thread ]</a>
              <a href="subject.html#24917">[ subject ]</a>
              <a href="author.html#24917">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
