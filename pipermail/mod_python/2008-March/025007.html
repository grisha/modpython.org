<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] mod_python &amp; Leopard
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python%20%26%20Leopard&In-Reply-To=20080318011511.1YMVX.41225.imail%40fed1rmwml33">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025005.html">
   <LINK REL="Next"  HREF="025008.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] mod_python &amp; Leopard</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python%20%26%20Leopard&In-Reply-To=20080318011511.1YMVX.41225.imail%40fed1rmwml33"
       TITLE="[mod_python] mod_python &amp; Leopard">graham.dumpleton at gmail.com
       </A><BR>
    <I>Tue Mar 18 01:22:13 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="025005.html">[mod_python] mod_python &amp; Leopard
</A></li>
        <LI>Next message: <A HREF="025008.html">[mod_python] mod_python &amp; Leopard
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25007">[ date ]</a>
              <a href="thread.html#25007">[ thread ]</a>
              <a href="subject.html#25007">[ subject ]</a>
              <a href="author.html#25007">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please use reply-all and keep discussion on mailing list. Do not reply
to just me.

On 18/03/2008, Brian &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">brianlong at cox.net</A>&gt; wrote:
&gt;<i> Graham ::
</I>&gt;<i>
</I>&gt;<i>  Went into ./src folder and ran make.... now get the following result ::
</I>
The instructions don't say to go into the 'src' directory. Why are you
doing that? The build and install should be done from the root
directory.

&gt;<i>  Compiling for DSO.
</I>&gt;<i>
</I>&gt;<i>  /usr/sbin/apxs -I/Users/brian/Downloads/mod_python_trunk/src/include -I/Library/Frameworks/Python.framework/Versions/2.5/include/python2.5 -DNDEBUG -Wc,'-arch ppc7400' -Wc,'-arch ppc64' -Wc,'-arch i386' -Wc,'-arch x86_64' -c mod_python.c _apachemodule.c requestobject.c tableobject.c util.c serverobject.c connobject.c filterobject.c hlist.c hlistobject.c finfoobject.c -arch ppc7400 -arch ppc64 -arch i386 -arch x86_64 -Wl,-F/Library/Frameworks -framework Python -u _PyMac_Error  -ldl
</I>&gt;<i>  /usr/share/apr-1/build-1/libtool --silent --mode=compile gcc    -DDARWIN -DSIGPROCMASK_SETS_THREAD_MASK -no-cpp-precomp  -I/usr/include/apache2  -I/usr/include/apr-1   -I/usr/include/apr-1  -arch ppc7400 -arch ppc64 -arch i386 -arch x86_64 -I/Users/brian/Downloads/mod_python_trunk/src/include -I/Library/Frameworks/Python.framework/Versions/2.5/include/python2.5 -DNDEBUG  -c -o mod_python.lo mod_python.c &amp;&amp; touch mod_python.slo
</I>&gt;<i>  In file included from /Library/Frameworks/Python.framework/Versions/2.5/include/python2.5/Python.h:57,
</I>&gt;<i>                  from /Users/brian/Downloads/mod_python_trunk/src/include/mod_python.h:80,
</I>&gt;<i>                  from mod_python.c:28:
</I>&gt;<i>  /Library/Frameworks/Python.framework/Versions/2.5/include/python2.5/pyport.h:730:2: error: #error &quot;LONG_BIT definition appears wrong for platform (bad gcc/glibc config?).&quot;
</I>&gt;<i>  In file included from /Library/Frameworks/Python.framework/Versions/2.5/include/python2.5/Python.h:57,
</I>&gt;<i>                  from /Users/brian/Downloads/mod_python_trunk/src/include/mod_python.h:80,
</I>&gt;<i>                  from mod_python.c:28:
</I>&gt;<i>  /Library/Frameworks/Python.framework/Versions/2.5/include/python2.5/pyport.h:730:2: error: #error &quot;LONG_BIT definition appears wrong for platform (bad gcc/glibc config?).&quot;
</I>&gt;<i>  mod_python.c: In function 'python_init':
</I>&gt;<i>  mod_python.c:826: warning: initialization from incompatible pointer type
</I>&gt;<i>  mod_python.c: In function 'python_init':
</I>&gt;<i>  mod_python.c:826: warning: initialization from incompatible pointer type
</I>&gt;<i>  mod_python.c: In function 'python_init':
</I>&gt;<i>  mod_python.c:826: warning: initialization from incompatible pointer type
</I>&gt;<i>  mod_python.c: In function 'python_init':
</I>&gt;<i>  mod_python.c:826: warning: initialization from incompatible pointer type
</I>&gt;<i>  lipo: can't figure out the architecture type of: /var/folders/kR/kRbwQrcTHXWDKQTg-5pcGE+++TI/-Tmp-//cclvLoaY.out
</I>&gt;<i>  apxs:Error: Command failed with rc=65536
</I>
Don't use MacPorts Python, use Python 2.5 that comes supplied with the
operating system. I said that in last email.

The MacPorts Python 2.5 appears to be broken when it comes to building
fully fat binaries for all architectures.

You may be able to get it to work by edit src/Makefile and
dist/setup.py and removing the arch flags for whatever architecture it
is that MacPorts doesn't work properly for. If you work out which
architecture it is then please tell me as one other person I have seen
with this problem didn't tell me.

BTW, make sure you have up to date MacPorts Python if you insist on
using it. This problem may occur where you have installed MacPorts
Python on Tiger and then upgraded to Leopard.

Graham

 .
&gt;<i>  make: *** [mod_python.so] Error 1
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  B
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  ---- Graham Dumpleton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; Try mod_python from subversion source repository. See:
</I>&gt;<i>  &gt;
</I>&gt;<i>  &gt;  <A HREF="http://www.modpython.org/pipermail/mod_python/2008-March/024954.html">http://www.modpython.org/pipermail/mod_python/2008-March/024954.html</A>
</I>&gt;<i>  &gt;
</I>&gt;<i>  &gt; Graham
</I>&gt;<i>  &gt;
</I>&gt;<i>  &gt; On 18/03/2008, Brian &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">brianlong at cox.net</A>&gt; wrote:
</I>&gt;<i>  &gt; &gt; Have read many posts on the internet and I can not get mod_python running on my Mac.
</I>&gt;<i>  &gt; &gt;
</I>&gt;<i>  &gt; &gt;  I am getting the following error ::
</I>&gt;<i>  &gt; &gt;
</I>&gt;<i>  &gt; &gt;  httpd: Syntax error on line 95 of /private/etc/apache2/httpd.conf: Can't locate API module structure `python_module' in file /usr/libexec/apache2/mod_python.so: dlsym(0x100204600, python_module): symbol not found
</I>&gt;<i>  &gt; &gt;
</I>&gt;<i>  &gt; &gt;
</I>&gt;<i>  &gt; &gt;  I am using MacOSX Leopard 10.5.2
</I>&gt;<i>  &gt; &gt;  Apache 2.2.6
</I>&gt;<i>  &gt; &gt;  Python 2.5
</I>&gt;<i>  &gt; &gt;
</I>&gt;<i>  &gt; &gt;  ./src/Makefile
</I>&gt;<i>  &gt; &gt;
</I>&gt;<i>  &gt; &gt;  LDFLAGS= -Wl,-framework,Python  -u _PyMac_Error $(PYTHONFRAMEWORKDIR)/Versions/$(VERSION)/$(PYTHONFRAMEWORK) -arch ppc -arch ppc64 -arch i386 -arch x86_64 -isysroot /Developer/SDKs/MacOSX10.4u.sdk -g
</I>&gt;<i>  &gt; &gt;  OPT=
</I>&gt;<i>  &gt; &gt;  CFLAGS=$(OPT) $(INCLUDES) -Wc,&quot;-arch ppc&quot; -Wc,&quot;-arch ppc64&quot; -Wc,&quot;-arch i386&quot; -Wc,&quot;-arch x86_64&quot;
</I>&gt;<i>  &gt; &gt;  srcdir=.
</I>&gt;<i>  &gt; &gt;
</I>&gt;<i>  &gt; &gt;  SRCS=   mod_python.c _apachemodule.c requestobject.c tableobject.c util.c \
</I>&gt;<i>  &gt; &gt;                 serverobject.c connobject.c filterobject.c hlist.c \
</I>&gt;<i>  &gt; &gt;                 hlistobject.c finfoobject.c
</I>&gt;<i>  &gt; &gt;
</I>&gt;<i>  &gt; &gt;  all:    dso
</I>&gt;<i>  &gt; &gt;
</I>&gt;<i>  &gt; &gt;  psp_parser.c: psp_parser.l
</I>&gt;<i>  &gt; &gt;         @rm -f psp_parser.c
</I>&gt;<i>  &gt; &gt;         $(LEX) -R -opsp_parser.c --header-file=include/psp_flex.h psp_parser.l
</I>&gt;<i>  &gt; &gt;
</I>&gt;<i>  &gt; &gt;  dso:    mod_python.so
</I>&gt;<i>  &gt; &gt;         @echo dso &gt; .install
</I>&gt;<i>  &gt; &gt;
</I>&gt;<i>  &gt; &gt;  mod_python.so: $(SRCS)
</I>&gt;<i>  &gt; &gt;         @echo
</I>&gt;<i>  &gt; &gt;         @echo 'Compiling for DSO.'
</I>&gt;<i>  &gt; &gt;         @echo
</I>&gt;<i>  &gt; &gt;         $(APXS) $(INCLUDES) -c -Wc,&quot;-arch x86_64&quot; $(SRCS) $(LDFLAGS) $(LIBS)
</I>&gt;<i>  &gt; &gt;         @rm -f mod_python.so
</I>&gt;<i>  &gt; &gt;         @ln -s .libs/mod_python.so mod_python.so
</I>&gt;<i>  &gt; &gt;
</I>&gt;<i>  &gt; &gt;  RESULT OF file /usr/libexec/apache2/mod_python.so
</I>&gt;<i>  &gt; &gt;
</I>&gt;<i>  &gt; &gt;  /usr/libexec/apache2/mod_python.so: Mach-O universal binary with 3 architectures
</I>&gt;<i>  &gt; &gt;  /usr/libexec/apache2/mod_python.so (for architecture i386):     Mach-O bundle i386
</I>&gt;<i>  &gt; &gt;  /usr/libexec/apache2/mod_python.so (for architecture ppc):      Mach-O bundle ppc
</I>&gt;<i>  &gt; &gt;  /usr/libexec/apache2/mod_python.so (for architecture x86_64):   Mach-O 64-bit bundle x86_64
</I>&gt;<i>  &gt; &gt;
</I>&gt;<i>  &gt; &gt;  When I do a 'Get Info' on /usr/src/httpd, the kind is listed as 'Universal'
</I>&gt;<i>  &gt; &gt;
</I>&gt;<i>  &gt; &gt;  Thanx for any help
</I>&gt;<i>  &gt; &gt;  B
</I>&gt;<i>  &gt; &gt;
</I>&gt;<i>  &gt; &gt;
</I>&gt;<i>  &gt; &gt;
</I>&gt;<i>  &gt; &gt;  _______________________________________________
</I>&gt;<i>  &gt; &gt;  Mod_python mailing list
</I>&gt;<i>  &gt; &gt;  <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i>  &gt; &gt;  <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>  &gt; &gt;
</I>&gt;<i>
</I>&gt;<i>
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025005.html">[mod_python] mod_python &amp; Leopard
</A></li>
	<LI>Next message: <A HREF="025008.html">[mod_python] mod_python &amp; Leopard
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25007">[ date ]</a>
              <a href="thread.html#25007">[ thread ]</a>
              <a href="subject.html#25007">[ subject ]</a>
              <a href="author.html#25007">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
