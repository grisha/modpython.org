<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Chaining handlers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Chaining%20handlers&In-Reply-To=20080320031648.GN10751%40monkey.uchicago.edu">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025031.html">
   <LINK REL="Next"  HREF="025033.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Chaining handlers</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Chaining%20handlers&In-Reply-To=20080320031648.GN10751%40monkey.uchicago.edu"
       TITLE="[mod_python] Chaining handlers">graham.dumpleton at gmail.com
       </A><BR>
    <I>Wed Mar 19 23:36:38 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="025031.html">[mod_python] Chaining handlers
</A></li>
        <LI>Next message: <A HREF="025033.html">[mod_python] Chaining handlers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25032">[ date ]</a>
              <a href="thread.html#25032">[ thread ]</a>
              <a href="subject.html#25032">[ subject ]</a>
              <a href="author.html#25032">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 20/03/2008, David Champion &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">dgc at uchicago.edu</A>&gt; wrote:
&gt;<i> &gt; The documentation does cover it, as long as you know what you are looking for.
</I>&gt;<i>
</I>&gt;<i> Ugh.  I guess I don't -- I still don't see it, at least expressed in
</I>&gt;<i>  this terminology.
</I>&gt;<i>
</I>&gt;<i>  &gt; Before can suggest something, need to know what the criteria is that
</I>&gt;<i>  &gt; you are wanting to block on. Are you wanting to implement HTTP basic
</I>&gt;<i>  &gt; authorisation, ie., require user to login, or wanting to block based
</I>&gt;<i>  &gt; on something else, such as client IP?
</I>&gt;<i>
</I>&gt;<i> It could be a variety of things, honestly.  Fundamentally I'm going
</I>&gt;<i>  to ask for a username and password, but the usernames and passwords
</I>&gt;<i>  are in flux at all times (i.e. there's no singular password file / sql
</I>&gt;<i>  database / bdb file / whatever), and we might want to block even a
</I>&gt;<i>  valid user/password pair based on IP or some other criterion.  I want
</I>&gt;<i>  to be able to interact with the user in these edge cases.  I have a CGI
</I>&gt;<i>  that does this well, so I'm trying to make a handler that uses cookies
</I>&gt;<i>  established by the CGI to make a straightforward access decision at the
</I>&gt;<i>  handler level so that I don't need to call out to a gateway CGI for
</I>&gt;<i>  every request.
</I>&gt;<i>
</I>
The access, authentication and authorisation handler phases are:

  <A HREF="http://www.modpython.org/live/current/doc-html/dir-handlers-ach.html">http://www.modpython.org/live/current/doc-html/dir-handlers-ach.html</A>
  <A HREF="http://www.modpython.org/live/current/doc-html/dir-handlers-auh.html">http://www.modpython.org/live/current/doc-html/dir-handlers-auh.html</A>
  <A HREF="http://www.modpython.org/live/current/doc-html/dir-handlers-auzh.html">http://www.modpython.org/live/current/doc-html/dir-handlers-auzh.html</A>

To get some context also see:

  <A HREF="http://www.fmc-modeling.org/category/projects/apache/amp/4_4Request_Response_Loop.html">http://www.fmc-modeling.org/category/projects/apache/amp/4_4Request_Response_Loop.html</A>

plus other parts of same document.

&gt;<i>  It's also desirable in this case to use a form for the authN instead of
</I>&gt;<i>  a browser-dependent Basic login dialog.
</I>
Although authentication phase handler is mainly used for HTTP Basic
authentication, it can be adapted for use in form based login
mechanism. It is a bit more tricky to do though.

&gt;<i>  &gt; Also, is this the only reason you are wanting to use mod_python, or do
</I>&gt;<i>  &gt; you also have web applications that use mod_python specific APIs for
</I>&gt;<i>  &gt; content handler? If you do have a web application, is it WSGI
</I>&gt;<i>  &gt; compatible and thus could be hosted on any WSGI capable system?
</I>&gt;<i>
</I>&gt;<i> I want this to act as a single signon service for a variety of
</I>&gt;<i>  applications, but none of them is written in python at all.
</I>
If you only wanted HTTP Basic authentication I would then have
suggested using mod_wsgi, not for its Python web hosting ability, but
its Python hooks for Apache auth provider mechanism. See:

  <A HREF="http://code.google.com/p/modwsgi/wiki/AccessControlMechanisms">http://code.google.com/p/modwsgi/wiki/AccessControlMechanisms</A>

Is simpler to use than writing full handlers in mod_python.

If you can find a separate Apache module that handles the concept of
form based login but can use an Apache 2.2 auth provider, then
mod_wsgi could still be used. I vaguely remember there being one that
may sort of do that, but would need to go looking for it again. If can
find that, then all you would need to do is provide the check password
and groups hooks in Python code.

I'll have a look to see if I can find Apache module that does that.
Would rather pursue that than try to find and resurrect code I had for
doing form based login as authentication handler as right now not sure
where I put it. :-)

Graham

&gt;<i>  The authentication information is available through a Python API,
</I>&gt;<i>  so it's helpful to use Python to make the authN checks.  Other than
</I>&gt;<i>  that I'm flexible, I guess -- there's no python-generated content
</I>&gt;<i>  to serve.  I just have this odd user base that I need to provide my
</I>&gt;<i>  own programmatic access to, and I don't want to do it separately for
</I>&gt;<i>  several different applications.  I'd rather have the web server tell the
</I>&gt;<i>  application that the user is pre-approved.  And I like Python most. :)
</I>&gt;<i>
</I>&gt;<i>  In the end this is not so different from any other SSO out there: detect
</I>&gt;<i>  whether authN is required for the user, redirect to a login resource if
</I>&gt;<i>  so, and then re-evaluate credentials upon return.  I just can't use any
</I>&gt;<i>  existing SSOs that I know of because of where my user information is.
</I>&gt;<i>
</I>&gt;<i>  If there's some way I can bust it all through the *appearance* of HTTP
</I>&gt;<i>  Basic just to get $REMOTE_USER on the application end, I can use that.
</I>&gt;<i>  But I don't know any way to use Basic on the server without using it on
</I>&gt;<i>  the client, unless it makes sense to make a two-pass handler that makes
</I>&gt;<i>  an access decision first and filters incoming headers second.  But this
</I>&gt;<i>  still leaves open how to engage CGI and PHP handlers later, so I'm not
</I>&gt;<i>  sure it really solves the problem -- it's just another approach that
</I>&gt;<i>  converges to the same point.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  Thanks for your time.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  --
</I>&gt;<i>   -D.    <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">dgc at uchicago.edu</A>    NSIT    University of Chicago
</I>&gt;<i>  _______________________________________________
</I>&gt;<i>  Mod_python mailing list
</I>&gt;<i>  <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i>  <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I></PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025031.html">[mod_python] Chaining handlers
</A></li>
	<LI>Next message: <A HREF="025033.html">[mod_python] Chaining handlers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25032">[ date ]</a>
              <a href="thread.html#25032">[ thread ]</a>
              <a href="subject.html#25032">[ subject ]</a>
              <a href="author.html#25032">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
