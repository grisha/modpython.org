<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Chaining handlers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Chaining%20handlers&In-Reply-To=20080324133846.GU10751%40monkey.uchicago.edu">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025059.html">
   <LINK REL="Next"  HREF="025061.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Chaining handlers</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Chaining%20handlers&In-Reply-To=20080324133846.GU10751%40monkey.uchicago.edu"
       TITLE="[mod_python] Chaining handlers">graham.dumpleton at gmail.com
       </A><BR>
    <I>Mon Mar 24 16:19:07 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="025059.html">[mod_python] Chaining handlers
</A></li>
        <LI>Next message: <A HREF="025061.html">[mod_python] Chaining handlers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25060">[ date ]</a>
              <a href="thread.html#25060">[ thread ]</a>
              <a href="subject.html#25060">[ subject ]</a>
              <a href="author.html#25060">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 25/03/2008, David Champion &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">dgc at uchicago.edu</A>&gt; wrote:
&gt;<i> &gt; Don't define SetHandler here. This says that mod_python is handling
</I>&gt;<i>  &gt; the content phase which you don't want as you want your CGI script to
</I>&gt;<i>  &gt; do that.
</I>&gt;<i>  &gt;
</I>&gt;<i>  &gt; Ie., only define SetHandler or AddHandler as appropriate when using
</I>&gt;<i>  &gt; PythonHandler directive.
</I>&gt;<i>
</I>&gt;<i> OK, sorry for a basic Apache question, but how do I &quot;add&quot; a handler
</I>&gt;<i>  without specifying what content type/extension it's going to handle
</I>&gt;<i>  content for?
</I>
For the content handler phase, ie., PythonHandler, you can't. That is,
you cannot chain mod_python and non mod_python handlers within the
content handler phase. The only half exception to this is if
mod_python content handler returns DECLINED then control will still
pass through to 'default-handler' which serves up target as static
file.

&gt;<i>  My module should be asked to handle every file under the &lt;Location&gt;,
</I>&gt;<i>  regardless of extension or content type.  It will decide whether to
</I>&gt;<i>  decline according to its own principles, not according to type.
</I>
Register a fixup handler and put PythonFixupHandler in that Location
container. If you then want to hijack content handling phase for that
request and override what else was meant to happen, from memory do the
following in fixup handler and return:

  req.handler = 'mod_python'
  req.add_handler('PythonHandler', somehandlerfunc)

Check documentation for the mod_python request add_handler() function
as probably haven't remembered the arguments correctly.

Do note that mod_python handlers get added as middle handlers and you
can't control their position relative to handlers in same phase. This
may be limiting for example if you actually had to ensure it was run
after mod_dir handler in fixup phase. You may therefore need to do
extra checks to avoid doing stuff which you shouldn't because later
handler in that phase may want to do it. Eg. trailing slash
redirection.

Graham

&gt;<i>  I couldn't find any way to do this with mod_python.  With my C module,
</I>&gt;<i>  it's not necessary -- I just put its custom configuration directives
</I>&gt;<i>  within the &lt;Location&gt; block.  But mod_python has no analogous behavior
</I>&gt;<i>  that I can see, and I can't tell how to say &quot;use mod_python with these
</I>&gt;<i>  params&quot; without setting a handler.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  --
</I>&gt;<i>
</I>&gt;<i>  -D.    <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">dgc at uchicago.edu</A>    NSIT    University of Chicago
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i>  Mod_python mailing list
</I>&gt;<i>  <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i>  <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I></PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025059.html">[mod_python] Chaining handlers
</A></li>
	<LI>Next message: <A HREF="025061.html">[mod_python] Chaining handlers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25060">[ date ]</a>
              <a href="thread.html#25060">[ thread ]</a>
              <a href="subject.html#25060">[ subject ]</a>
              <a href="author.html#25060">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
