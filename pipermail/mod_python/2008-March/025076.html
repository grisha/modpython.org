<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] patch to use Py_SetProgramName()
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20patch%20to%20use%20Py_SetProgramName%28%29&In-Reply-To=20080326202455.GG24345%40swri.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025075.html">
   <LINK REL="Next"  HREF="025082.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] patch to use Py_SetProgramName()</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20patch%20to%20use%20Py_SetProgramName%28%29&In-Reply-To=20080326202455.GG24345%40swri.org"
       TITLE="[mod_python] patch to use Py_SetProgramName()">graham.dumpleton at gmail.com
       </A><BR>
    <I>Wed Mar 26 16:51:58 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="025075.html">[mod_python] patch to use Py_SetProgramName()
</A></li>
        <LI>Next message: <A HREF="025082.html">[mod_python] patch to use Py_SetProgramName()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25076">[ date ]</a>
              <a href="thread.html#25076">[ thread ]</a>
              <a href="subject.html#25076">[ subject ]</a>
              <a href="author.html#25076">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 27/03/2008, Glen W. Mabey &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Glen.Mabey at swri.org</A>&gt; wrote:
&gt;<i> On Wed, Mar 26, 2008 at 03:15:51PM -0500, Graham Dumpleton wrote:
</I>&gt;<i>  &gt; &gt;  with the Py_SetProgramName() function.  Since configure is already
</I>&gt;<i>  &gt; &gt;  getting this value explicitly (when --with-python is used), it seems to
</I>&gt;<i>  &gt; &gt;  me that it would be desirable to employ this facility instead of letting
</I>&gt;<i>  &gt; &gt;  Py_Initialize() search around for what it decides is the most
</I>&gt;<i>  &gt; &gt;  appropriate executable.
</I>&gt;<i>  &gt; &gt;
</I>&gt;<i>  &gt; &gt;  Is that reasonable?
</I>&gt;<i>  &gt;
</I>&gt;<i>  &gt; Except that it doesn't work for Windows or MacOS X.
</I>&gt;<i>  &gt;
</I>&gt;<i>  &gt; Anyway, see:
</I>&gt;<i>  &gt;
</I>&gt;<i>  &gt;   <A HREF="http://issues.apache.org/jira/browse/MODPYTHON-225">http://issues.apache.org/jira/browse/MODPYTHON-225</A>
</I>&gt;<i>  &gt;
</I>&gt;<i>  &gt; It also talks about workaround of setting PYTHONEXECUTABLE or
</I>&gt;<i>  &gt; PYTHONHOME environment variables in 'envvars' file or Apache startup
</I>&gt;<i>  &gt; script.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Humm.  Seems to be a fairly well explored problem already.
</I>&gt;<i>
</I>&gt;<i>  Now, I'm often wrong on this sort of thing, and I certainly don't have
</I>&gt;<i>  any experience deploying apache on Windows or MacOSX, but I wonder
</I>&gt;<i>  whether the use of Py_SetProgramName() is detrimental on those
</I>&gt;<i>  platforms?
</I>&gt;<i>
</I>&gt;<i>  That is, if it fixes the problem on certain platforms (or, if it is one
</I>&gt;<i>  way to fix it), then is it worth including?
</I>
Even if it fixes things on some platforms, the problem I have with it
is that it hard codes a path into the executable. If the 'python'
executable supplied to --with-python was actually a symlink to another
location, the result will be an incorrect location is used as you
really want the location pointed at, not where the symlink was.
Another problem might be where people building binary distributions of
mod_python use some special Python installation not in the standard
location. It may work for them when they test it, but when they
release it it then make break for others because they may not have
Python installed where person who built it did.

What was found with mod_wsgi was that it was better to have a
directive in Apache configuration file which allowed one to set
PYTHONHOME. This still didn't work for Windows, but seemed the best
compromise. One benefit of making it configurable through the Apache
configuration file was that that mechanism could then be used to point
the interpreter at a Python virtual environment isolated from
site-packages of standard Python installation. For details on this
see:

  <A HREF="http://code.google.com/p/modwsgi/wiki/VirtualEnvironments">http://code.google.com/p/modwsgi/wiki/VirtualEnvironments</A>

You might also read section 'Multiple Python Versions' of:

  <A HREF="http://code.google.com/p/modwsgi/wiki/InstallationIssues">http://code.google.com/p/modwsgi/wiki/InstallationIssues</A>

which for mod_wsgi talks about the same problem with wrong version of
Python being found.

Graham
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025075.html">[mod_python] patch to use Py_SetProgramName()
</A></li>
	<LI>Next message: <A HREF="025082.html">[mod_python] patch to use Py_SetProgramName()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25076">[ date ]</a>
              <a href="thread.html#25076">[ thread ]</a>
              <a href="subject.html#25076">[ subject ]</a>
              <a href="author.html#25076">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
