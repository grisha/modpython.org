<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Cookies and Redirects
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Cookies%20and%20Redirects&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024930.html">
   <LINK REL="Next"  HREF="024927.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Cookies and Redirects</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Kathryn Van Stone</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Cookies%20and%20Redirects&In-Reply-To="
       TITLE="[mod_python] Cookies and Redirects">kvs at acm.org
       </A><BR>
    <I>Wed Mar  5 14:28:19 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="024930.html">[mod_python] MPServlets
</A></li>
        <LI>Next message: <A HREF="024927.html">[mod_python] Cookies and Redirects
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24926">[ date ]</a>
              <a href="thread.html#24926">[ thread ]</a>
              <a href="subject.html#24926">[ subject ]</a>
              <a href="author.html#24926">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Our web application has a login page that uses a POST.  Upon  
receiving the POST, we set some cookies on the request object by  
using mod_python's Cookie.add_cookie(request, c).  Then we set a  
Location header and return a 303 to redirect the user to their &quot;home  
page&quot;.

Specifically: the cookies header is set, the location header is set,  
the status is set to 303, and 303 is returned from the PythonHandler.  
Content is not set. We have no later handlers.

Unfortunately, the cookie headers do not seem to survive ---  they  
seem to be there in log output from the code immediately prior to  
returning, but if we examine the 303 response the client actually  
sees the cookie headers are gone and only the Location header  
remains.  (In an earlier iteration we returned a regular 200 with an  
HTML page that did a META redirect in the &lt;head&gt;; that worked fine.)

Any ideas?  Is Apache or mod_python eating the cookies at some lower  
level?  Is there a &quot;typical&quot; way people do this sort of operation?

Kathy Van Stone (for a co-worker).
<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">kvs at acm.org</A>

Note: we haven't yet tried a bare handler that does just the above  
steps.  If people here say &quot;hmm, that should have worked&quot; that will  
be our next step.  On the other hand, if there is a rule about  
redirects and cookies (or if we should be returning something besides  
a 303 from the handler), that would be helpful to know before we  
spend time trying to get this to work.

(Current workaround is to go back to the HTML page with a meta).
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080305/7ef9f555/attachment.html">http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080305/7ef9f555/attachment.html</A>
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024930.html">[mod_python] MPServlets
</A></li>
	<LI>Next message: <A HREF="024927.html">[mod_python] Cookies and Redirects
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24926">[ date ]</a>
              <a href="thread.html#24926">[ thread ]</a>
              <a href="subject.html#24926">[ subject ]</a>
              <a href="author.html#24926">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
