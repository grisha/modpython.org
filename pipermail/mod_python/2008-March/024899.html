<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] ChildInit handler?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20ChildInit%20handler%3F&In-Reply-To=232D8C27-2BD3-4977-9ADC-233A66A5ED25%40ardishealth.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024898.html">
   <LINK REL="Next"  HREF="024900.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] ChildInit handler?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20ChildInit%20handler%3F&In-Reply-To=232D8C27-2BD3-4977-9ADC-233A66A5ED25%40ardishealth.com"
       TITLE="[mod_python] ChildInit handler?">graham.dumpleton at gmail.com
       </A><BR>
    <I>Sun Mar  2 17:55:55 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="024898.html">[mod_python] ChildInit handler?
</A></li>
        <LI>Next message: <A HREF="024900.html">[mod_python] ChildInit handler?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24899">[ date ]</a>
              <a href="thread.html#24899">[ thread ]</a>
              <a href="subject.html#24899">[ subject ]</a>
              <a href="author.html#24899">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 03/03/2008, Sean Allen &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">sean at ardishealth.com</A>&gt; wrote:
&gt;<i>
</I>&gt;<i>  On Mar 2, 2008, at 3:48 PM, Graham Dumpleton wrote:
</I>&gt;<i>
</I>&gt;<i>  &gt; 'mod_python.apache.register_cleanup()'. Note though that no guarantee
</I>&gt;<i>  &gt; that cleanup code will be executed on process shutdown, so you should
</I>&gt;<i>  &gt; not religiously rely on it.
</I>&gt;<i>
</I>&gt;<i> under what circumstances might it not be executed?
</I>
When Apache is being stopped or restarted, the main Apache parent
process sends a special message to each child process to trigger the
process to shutdown. If that process doesn't shutdown within a few
seconds the the parent process will send it a SIGKILL and forcibly
kill it.

Thus, if there are delays in running to completion any shutdown code
registered by mod_python or any other Apache module, or possibly long
running requests which are causing things to hang in some way, such
that process shutdown doesn't even commence, then clean shutdown will
not occur and the process will be killed.

Obviously, if a process crashes for whatever reason, no cleanup code
will be run either.

Thus, any startup code you have must be able to cope with an unclean
shutdown of a previous instance.

Graham
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024898.html">[mod_python] ChildInit handler?
</A></li>
	<LI>Next message: <A HREF="024900.html">[mod_python] ChildInit handler?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24899">[ date ]</a>
              <a href="thread.html#24899">[ thread ]</a>
              <a href="subject.html#24899">[ subject ]</a>
              <a href="author.html#24899">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
