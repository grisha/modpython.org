<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Chaining handlers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Chaining%20handlers&In-Reply-To=20080324044053.GT10751%40monkey.uchicago.edu">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025054.html">
   <LINK REL="Next"  HREF="025059.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Chaining handlers</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Chaining%20handlers&In-Reply-To=20080324044053.GT10751%40monkey.uchicago.edu"
       TITLE="[mod_python] Chaining handlers">graham.dumpleton at gmail.com
       </A><BR>
    <I>Mon Mar 24 01:26:37 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="025054.html">[mod_python] Chaining handlers
</A></li>
        <LI>Next message: <A HREF="025059.html">[mod_python] Chaining handlers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25055">[ date ]</a>
              <a href="thread.html#25055">[ thread ]</a>
              <a href="subject.html#25055">[ subject ]</a>
              <a href="author.html#25055">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 24/03/2008, David Champion &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">dgc at uchicago.edu</A>&gt; wrote:
&gt;<i> &gt; Without seeing your Apache configuration for setting up the handlers
</I>&gt;<i>  &gt; and the code of the actual handlers, can't really say why you may be
</I>&gt;<i>  &gt; having a problem.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I get the same results without any of my own authN code.  It seems to be
</I>&gt;<i>  some really basic issue with mod_python or my use of it.
</I>&gt;<i>
</I>&gt;<i>  unix$ tail -7 httpd.conf
</I>&gt;<i>  &lt;Location /test&gt;
</I>&gt;<i>     PythonDebug On
</I>&gt;<i>     SetHandler mod_python
</I>
Don't define SetHandler here. This says that mod_python is handling
the content phase which you don't want as you want your CGI script to
do that.

Ie., only define SetHandler or AddHandler as appropriate when using
PythonHandler directive.

Graham

&gt;<i>     PythonHeaderParserHandler Example::handler
</I>&gt;<i>     PythonPath &quot;sys.path + ['/home/dgc/lib/python']&quot;
</I>&gt;<i>  &lt;/Location&gt;
</I>&gt;<i>
</I>&gt;<i>  unix$ cat Example.py
</I>&gt;<i>  from mod_python import apache
</I>&gt;<i>
</I>&gt;<i>  def handler(req):
</I>&gt;<i>         return apache.DECLINED
</I>&gt;<i>
</I>&gt;<i>  unix$ cat &lt;&lt;XXX &gt;/httpd/test/env.cgi
</I>&gt;<i>  #!/usr/bin/python
</I>&gt;<i>
</I>&gt;<i>  import sys
</I>&gt;<i>  import os
</I>&gt;<i>  import cgi
</I>&gt;<i>  import cgitb
</I>&gt;<i>
</I>&gt;<i>  def main():
</I>&gt;<i>     print &quot;Content-Type: text/html&quot;
</I>&gt;<i>     print
</I>&gt;<i>     cgi.print_environ()
</I>&gt;<i>
</I>&gt;<i>  if not os.isatty(0):
</I>&gt;<i>     cgitb.enable()
</I>&gt;<i>  if __name__ == &quot;__main__&quot;:
</I>&gt;<i>     main()
</I>&gt;<i>  XXX
</I>&gt;<i>
</I>&gt;<i>  Loading <A HREF="http://server/test/env.cgi">http://server/test/env.cgi</A> in a browser dumps the text of the
</I>&gt;<i>  CGI script to me as Content-type: text/html.  Without the &lt;Location/&gt;
</I>&gt;<i>  block, it works as a CGI should.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  --
</I>&gt;<i>   -D.    <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">dgc at uchicago.edu</A>    NSIT    University of Chicago
</I>&gt;<i>
</I></PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025054.html">[mod_python] Chaining handlers
</A></li>
	<LI>Next message: <A HREF="025059.html">[mod_python] Chaining handlers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25055">[ date ]</a>
              <a href="thread.html#25055">[ thread ]</a>
              <a href="subject.html#25055">[ subject ]</a>
              <a href="author.html#25055">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
