<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Chaining handlers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Chaining%20handlers&In-Reply-To=20080319201419.GM10751%40monkey.uchicago.edu">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025029.html">
   <LINK REL="Next"  HREF="025031.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Chaining handlers</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Chaining%20handlers&In-Reply-To=20080319201419.GM10751%40monkey.uchicago.edu"
       TITLE="[mod_python] Chaining handlers">graham.dumpleton at gmail.com
       </A><BR>
    <I>Wed Mar 19 21:55:05 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="025029.html">[mod_python] Chaining handlers
</A></li>
        <LI>Next message: <A HREF="025031.html">[mod_python] Chaining handlers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25030">[ date ]</a>
              <a href="thread.html#25030">[ thread ]</a>
              <a href="subject.html#25030">[ subject ]</a>
              <a href="author.html#25030">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 20/03/2008, David Champion &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">dgc at uchicago.edu</A>&gt; wrote:
&gt;<i> This seems like it should be a FAQ, but I don't see it.  Sorry if I've
</I>&gt;<i>  missed it -- pointers instead of answers are welcome.
</I>
The documentation does cover it, as long as you know what you are looking for.

&gt;<i>  I thought I understood that it's possible to chain handlers in Apache,
</I>&gt;<i>  such that multiple handlers can have a chance at completing the request,
</I>&gt;<i>  and the chain ends when a handler succeeds.  (I don't want to &quot;pipeline&quot;
</I>&gt;<i>  filters, so that each handler handles the same request in succession.)
</I>&gt;<i>  But I'm having trouble seeing how to make this work.
</I>&gt;<i>
</I>&gt;<i>  More specifically, what I'm trying to accomplish is to have mod_python
</I>&gt;<i>  implement an access control policy over a directory.  Provided that
</I>&gt;<i>  access is allowed, I want any content in that directory to be served as
</I>&gt;<i>  if mod_python were not present.  I have a script that implements the
</I>&gt;<i>  policy.  It amounts to this:
</I>&gt;<i>
</I>&gt;<i>         &lt;Location /test/*&gt;
</I>&gt;<i>                 SetHandler mod_python
</I>&gt;<i>                 PythonHandler MyPackage
</I>&gt;<i>         &lt;/Location&gt;
</I>&gt;<i>
</I>&gt;<i>         def handler(req):
</I>&gt;<i>                 # case 1
</I>&gt;<i>                 if accessOK(req):
</I>&gt;<i>                         return apache.DECLINED
</I>&gt;<i>
</I>&gt;<i>                 # case 2
</I>&gt;<i>                 else:
</I>&gt;<i>                         return apache.UNAUTHORIZED
</I>&gt;<i>
</I>&gt;<i>  Case 2 works, of course.  And when I request a static file, case 1 works
</I>&gt;<i>  too (I receive the file).  My problem is when the request is for an
</I>&gt;<i>  object that's covered by some other handler -- cgi, php, etc.  I receive
</I>&gt;<i>  the CGI as a static-content test/plain file instead.
</I>&gt;<i>
</I>&gt;<i>  Is this possible?  I feel like I must be missing something; there's a
</I>&gt;<i>  lot I still don't understand about the API.  I had started to implement
</I>&gt;<i>  this module in C, but decided I could probably do it in mod_python if
</I>&gt;<i>  it's possible in C.  Is that true?
</I>
Before can suggest something, need to know what the criteria is that
you are wanting to block on. Are you wanting to implement HTTP basic
authorisation, ie., require user to login, or wanting to block based
on something else, such as client IP?

Also, is this the only reason you are wanting to use mod_python, or do
you also have web applications that use mod_python specific APIs for
content handler? If you do have a web application, is it WSGI
compatible and thus could be hosted on any WSGI capable system?

Graham
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025029.html">[mod_python] Chaining handlers
</A></li>
	<LI>Next message: <A HREF="025031.html">[mod_python] Chaining handlers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25030">[ date ]</a>
              <a href="thread.html#25030">[ thread ]</a>
              <a href="subject.html#25030">[ subject ]</a>
              <a href="author.html#25030">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
