<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Another sessions problem...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Another%20sessions%20problem...&In-Reply-To=5213E58D85BC414998FA553C701E386C0EDCFAC3C4%40SGBD012511.dlrmail.ad.delarue.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025069.html">
   <LINK REL="Next"  HREF="025077.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Another sessions problem...</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Another%20sessions%20problem...&In-Reply-To=5213E58D85BC414998FA553C701E386C0EDCFAC3C4%40SGBD012511.dlrmail.ad.delarue.com"
       TITLE="[mod_python] Another sessions problem...">graham.dumpleton at gmail.com
       </A><BR>
    <I>Wed Mar 26 16:03:55 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="025069.html">[mod_python] Another sessions problem...
</A></li>
        <LI>Next message: <A HREF="025077.html">[mod_python] Another sessions problem...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25072">[ date ]</a>
              <a href="thread.html#25072">[ thread ]</a>
              <a href="subject.html#25072">[ subject ]</a>
              <a href="author.html#25072">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Inspect the value of the cookie in the browser, post it here. What is
the path attribute associated with it? Do you perhaps have two cookies
stored in the browser with different paths because of how you have
configured mod_python? You can also use live headers extension in
FireFox to see what the cookie header sent back in response is to
validate it looks right.

Graham

On 27/03/2008, <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Dominique.Holzwarth at ch.delarue.com</A>
&lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Dominique.Holzwarth at ch.delarue.com</A>&gt; wrote:
&gt;<i> Hello everyone
</I>&gt;<i>
</I>&gt;<i>  I've already did some testing with mod_python's session mechanism and so far it seemed to work nice. My latest test case doesn't work at all tho...
</I>&gt;<i>
</I>&gt;<i>  I have to scripts, sessiontest1.py and sessiontest2.py, both are directly in my &quot;python-root&quot; (the folder the publisher handler is using)
</I>&gt;<i>
</I>&gt;<i>  Sessiontest1.py:
</I>&gt;<i>  **************************************************
</I>&gt;<i>  from mod_python import Session
</I>&gt;<i>  import sessiontest2
</I>&gt;<i>
</I>&gt;<i>  secretText = &quot;mysecret&quot;
</I>&gt;<i>
</I>&gt;<i>  def index(req):
</I>&gt;<i>   myClassObject = sessiontest2.myClass()
</I>&gt;<i>   msg = myClassObject.add()
</I>&gt;<i>   req.session = Session.FileSession(req)
</I>&gt;<i>   req.session['test'] = 5
</I>&gt;<i>   req.session['meinKlassenObjekt'] = myClassObject
</I>&gt;<i>   req.session.save()
</I>&gt;<i>   return myClassObject.show(req.session.id())
</I>&gt;<i>
</I>&gt;<i>  **************************************************
</I>&gt;<i>
</I>&gt;<i>  Sessiontest2.py
</I>&gt;<i>  **************************************************
</I>&gt;<i>  from mod_python import Session
</I>&gt;<i>
</I>&gt;<i>  secretText = &quot;mysecret&quot;
</I>&gt;<i>
</I>&gt;<i>  def index(req):
</I>&gt;<i>     req.session = Session.FileSession(req)
</I>&gt;<i>     if req.session.is_new():
</I>&gt;<i>         return &quot;Session is new: &quot;+req.session.id()
</I>&gt;<i>     else:
</I>&gt;<i>         lala = req.session['test']
</I>&gt;<i>         myClassObject = req.session['meinKlassenObjekt']
</I>&gt;<i>         newVal = req.form.getfirst('button')
</I>&gt;<i>         cnt = myClassObject.add(newVal)
</I>&gt;<i>         req.session['meinKlassenObjekt'] = myClassObject
</I>&gt;<i>         req.session.save()
</I>&gt;<i>         return cnt
</I>&gt;<i>     return &quot;default return&quot;
</I>&gt;<i>
</I>&gt;<i>  class myClass:
</I>&gt;<i>     def __init__(self):
</I>&gt;<i>         self.counter = 0
</I>&gt;<i>
</I>&gt;<i>     def add(self, val=1):
</I>&gt;<i>         self.counter = self.counter + val
</I>&gt;<i>         return self.counter
</I>&gt;<i>
</I>&gt;<i>     def show(self, *value):
</I>&gt;<i>         msg = &quot;&quot;&quot;
</I>&gt;<i>  &lt;html&gt;&lt;body&gt;
</I>&gt;<i>  &lt;form action='/python/sessiontest2.py' method='post'&gt;
</I>&gt;<i>     &lt;input name='counter' type='text' readonly value='%s'/&gt;
</I>&gt;<i>     &lt;input name='new' type='text' /&gt;
</I>&gt;<i>     &lt;input name='button' type='submit' value='Add' /&gt;
</I>&gt;<i>  &lt;/form&gt;
</I>&gt;<i>  &lt;p&gt;ID: %s&lt;/p&gt;
</I>&gt;<i>  &lt;/body&gt;&lt;/html&gt;
</I>&gt;<i>         &quot;&quot;&quot; % (self.counter, value)
</I>&gt;<i>         return msg
</I>&gt;<i>  ****************************************************
</I>&gt;<i>
</I>&gt;<i>  Here's what's happening:
</I>&gt;<i>
</I>&gt;<i>  I call the sessiontest1.py which creates a new session (for a fresh browser window), does some stuff with the class-object, saves the object (resp. the session) and then it returns the html site generated from that class.
</I>&gt;<i>  When I submit that form the sessiontest2.py script is called and in my opinion it should load the previously created session (and do the stuff inside the 'else'). However, it always creates a new session instead of using the old one...
</I>&gt;<i>
</I>&gt;<i>  Maybe anyone got an idea what could be wrong? Would be really nice!
</I>&gt;<i>
</I>&gt;<i>  Greetings
</I>&gt;<i>  Dominique
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  _______________________________________________
</I>&gt;<i>  Mod_python mailing list
</I>&gt;<i>  <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i>  <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025069.html">[mod_python] Another sessions problem...
</A></li>
	<LI>Next message: <A HREF="025077.html">[mod_python] Another sessions problem...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25072">[ date ]</a>
              <a href="thread.html#25072">[ thread ]</a>
              <a href="subject.html#25072">[ subject ]</a>
              <a href="author.html#25072">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
