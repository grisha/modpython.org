From davidangulojunk at gmail.com  Tue Jul  1 21:17:57 2008
From: davidangulojunk at gmail.com (David AnguloJunk)
Date: Tue Jul  1 21:17:59 2008
Subject: [mod_python] undefined symbol: PyThread_acquire_lock
Message-ID: <6d4e8ccb0807011817p7dc5bcbaxbe05b941e008e58b@mail.gmail.com>

Could someone help me please?  In my code, I'm doing a:

    import zlib

and I get this:

   Mod_python error: "PythonHandler www"

   Traceback (most recent call last):

     File "/usr/local/lib/python2.5/site-packages/mod_python/apache.py",
line 181, in Dispatch
       module = import_module(module_name, _req)
     File "/usr/local/lib/python2.5/site-packages/mod_python/apache.py",
line 335, in import_module
       module = imp.load_module(mname, f, p, d)
     File "/home/barnah5/public_html/www/modules/www.py", line 8, in <module>
       import google_sitemap
     File "/home/barnah5/public_html/www/modules/google_sitemap.py",
line 2, in <module>
       import gzip
     File "/usr/local/lib/python2.5/gzip.py", line 9, in <module>
       import zlib
   ImportError: /usr/local/lib/python2.5/lib-dynload/zlib.so:
undefined symbol: PyThread_acquire_lock

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080701/86dc5001/attachment.html
From graham.dumpleton at gmail.com  Tue Jul  1 22:32:45 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Tue Jul  1 22:32:46 2008
Subject: [mod_python] undefined symbol: PyThread_acquire_lock
In-Reply-To: <6d4e8ccb0807011817p7dc5bcbaxbe05b941e008e58b@mail.gmail.com>
References: <6d4e8ccb0807011817p7dc5bcbaxbe05b941e008e58b@mail.gmail.com>
Message-ID: <88e286470807011932v10c1c974qd6a1ebe40d540b58@mail.gmail.com>

Did you have to heavily fiddle with Python paths to get mod_python to
use the installation of Python you wanted it to use? Looks a bit like
you are trying to use a Python installation different to what
mod_python was compiled for.

Graham

2008/7/2 David AnguloJunk <davidangulojunk@gmail.com>:
> Could someone help me please?  In my code, I'm doing a:
>
>     import zlib
>
> and I get this:
>
>    Mod_python error: "PythonHandler www"
>
>    Traceback (most recent call last):
>
>      File "/usr/local/lib/python2.5/site-packages/mod_python/apache.py",
> line 181, in Dispatch
>
>        module = import_module(module_name, _req)
>      File "/usr/local/lib/python2.5/site-packages/mod_python/apache.py",
> line 335, in import_module
>        module = imp.load_module(mname, f, p, d)
>      File "/home/barnah5/public_html/www/modules/www.py", line 8, in
> <module>
>
>        import google_sitemap
>      File "/home/barnah5/public_html/www/modules/google_sitemap.py", line 2,
> in <module>
>        import gzip
>      File "/usr/local/lib/python2.5/gzip.py", line 9, in <module>
>
>        import zlib
>    ImportError: /usr/local/lib/python2.5/lib-dynload/zlib.so: undefined
> symbol: PyThread_acquire_lock
>
> Thanks
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>
>
From chittybabu.v at gmail.com  Wed Jul  2 05:57:46 2008
From: chittybabu.v at gmail.com (chittybabu V)
Date: Wed Jul  2 05:57:52 2008
Subject: [mod_python] Installation on AIX..
Message-ID: <2424a8a00807020257p681aabe9s3db740b55c4deb72@mail.gmail.com>

Hi,

Can some one pass the download location for mod_python source/binary files
for AIX? Also pls. let me know how to install the same?

Regards,
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080702/cb003f00/attachment.html
From graham.dumpleton at gmail.com  Wed Jul  2 06:05:39 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Wed Jul  2 06:05:41 2008
Subject: [mod_python] Installation on AIX..
In-Reply-To: <2424a8a00807020257p681aabe9s3db740b55c4deb72@mail.gmail.com>
References: <2424a8a00807020257p681aabe9s3db740b55c4deb72@mail.gmail.com>
Message-ID: <88e286470807020305q2209652awbd5f18504d203bc4@mail.gmail.com>

Source and instructions is available from 'http://www.modpython.org',
the same site you probably learnt about this mailing list. No prebuilt
binaries are available for that platform unless packaged and
distributed by a third party.

Graham

2008/7/2 chittybabu V <chittybabu.v@gmail.com>:
> Hi,
>
> Can some one pass the download location for mod_python source/binary files
> for AIX? Also pls. let me know how to install the same?
>
> Regards,
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>
>
From albert77 at gmail.com  Thu Jul  3 03:49:27 2008
From: albert77 at gmail.com (=?ISO-8859-1?Q?Albert_Many=E0?=)
Date: Thu Jul  3 03:49:32 2008
Subject: [mod_python] Weird problem with PSP
Message-ID: <55fe89410807030049l644d011bp550c78cf0cac41d@mail.gmail.com>

Hi all!

I'm having a freakin' problem with PSP: I have the same simple application
running in two machines, both with Debian Etch and the same apache and
mod_python version. In one of them it works perfectly while the other
produces no output of any type.

I was doing a bit of debugging in psp.py and found that in the machine that
works the output of:

source = _psp.parse(fname, dire)

in load_from_file returns the code of my template while in the other machine
it returns an empty string.

Could you give some guidelines about what else could I check?

Thanks.

-- 
Albert Many? Pau <albert77@gmail.com>
http://www.milnou.net/~amanya
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080703/c587a555/attachment.html
From linux at qbox.es  Thu Jul  3 03:58:15 2008
From: linux at qbox.es (S.R.Parda)
Date: Thu Jul  3 04:06:21 2008
Subject: [mod_python] Can PSP.run can receive objects in return?
Message-ID: <1215071895.6323.10.camel@thorux>

I needed at some points to include a .psp file selected dinamically.

I set the vars parameter for global variables to share. When parameter
it's a string, or integer it can be changed. 

When I send a variable with a None value and I expect to get in return
an object instanciated from a class inside of the called .psp, it
doesn't. 
If I send an object with default values for its members (like None), and
make it global sending it in the run command, if doesn't work It remains
unchanged after the execution of the secondary .psp file.

I suspect, the problem could be that the second module import another
instance of the module where tha class is defined. And it's destroyed
after the second .psp file is executed.


Than You for your help,


From albert77 at gmail.com  Thu Jul  3 05:17:03 2008
From: albert77 at gmail.com (=?ISO-8859-1?Q?Albert_Many=E0?=)
Date: Thu Jul  3 05:17:08 2008
Subject: [mod_python] [SPAM] Re: Weird problem with PSP [Solved]
Message-ID: <55fe89410807030217r3c8ef435pa98741df6544f4de@mail.gmail.com>

Sorry, I have not seen this message before:

http://www.modpython.org/pipermail/mod_python/2007-September/024264.html

so, removing php5-recode solves my problem...

 (???)

On Thu, Jul 3, 2008 at 9:49 AM, Albert Many? <albert77@gmail.com> wrote:

> Hi all!
>
> I'm having a freakin' problem with PSP: I have the same simple application
> running in two machines, both with Debian Etch and the same apache and
> mod_python version. In one of them it works perfectly while the other
> produces no output of any type.
>
> I was doing a bit of debugging in psp.py and found that in the machine that
> works the output of:
>
> source = _psp.parse(fname, dire)
>
> in load_from_file returns the code of my template while in the other
> machine it returns an empty string.
>
> Could you give some guidelines about what else could I check?
>
> Thanks.
>
> --
> Albert Many? Pau <albert77@gmail.com>
> http://www.milnou.net/~amanya <http://www.milnou.net/%7Eamanya>




-- 
Albert Many? Pau <albert77@gmail.com>
http://www.milnou.net/~amanya
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080703/bc3a5954/attachment.html
From graham.dumpleton at gmail.com  Thu Jul  3 20:53:48 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Thu Jul  3 20:53:52 2008
Subject: [mod_python] undefined symbol: PyThread_acquire_lock
In-Reply-To: <6d4e8ccb0807031516y562957e2p736e0434ad874a29@mail.gmail.com>
References: <6d4e8ccb0807011817p7dc5bcbaxbe05b941e008e58b@mail.gmail.com>
	<88e286470807011932v10c1c974qd6a1ebe40d540b58@mail.gmail.com>
	<6d4e8ccb0807031516y562957e2p736e0434ad874a29@mail.gmail.com>
Message-ID: <88e286470807031753y5a323714l88230bd00ad42a0f@mail.gmail.com>

Please keep followups on list by using reply-all.

2008/7/4 David AnguloJunk <davidangulojunk@gmail.com>:
> I walked into an installation done by someone else.  There are three
> pythongs installed (2.3, 2.4, and 2.5).  I do not see anything setting paths
> to any of the three of these in either the httpd.conf  nor in the
> environment variables.  Where are the "python paths" set?  I am assuming
> that mod_python just has its path set into it at install time??

But where are the different versions installed? Are there some in /usr
and some in /usr/local and is any version appearing in both locations.

How mod_python finds Python installation is a bit convoluted, albeit
not mod_python's fault, but just how Python does it. Effectively, the
version of Python is known by mod_python by virtue of library being
linked in, but run time directories for Python found at run time,
which can cause problems if you have Python installations in multiple
different root directories.

Graham

> Thanks for your help.
>
> Dave
>
> On Tue, Jul 1, 2008 at 9:32 PM, Graham Dumpleton
> <graham.dumpleton@gmail.com> wrote:
>>
>> Did you have to heavily fiddle with Python paths to get mod_python to
>> use the installation of Python you wanted it to use? Looks a bit like
>> you are trying to use a Python installation different to what
>> mod_python was compiled for.
>>
>> Graham
>>
>> 2008/7/2 David AnguloJunk <davidangulojunk@gmail.com>:
>> > Could someone help me please?  In my code, I'm doing a:
>> >
>> >     import zlib
>> >
>> > and I get this:
>> >
>> >    Mod_python error: "PythonHandler www"
>> >
>> >    Traceback (most recent call last):
>> >
>> >      File "/usr/local/lib/python2.5/site-packages/mod_python/apache.py",
>> > line 181, in Dispatch
>> >
>> >        module = import_module(module_name, _req)
>> >      File "/usr/local/lib/python2.5/site-packages/mod_python/apache.py",
>> > line 335, in import_module
>> >        module = imp.load_module(mname, f, p, d)
>> >      File "/home/barnah5/public_html/www/modules/www.py", line 8, in
>> > <module>
>> >
>> >        import google_sitemap
>> >      File "/home/barnah5/public_html/www/modules/google_sitemap.py",
>> > line 2,
>> > in <module>
>> >        import gzip
>> >      File "/usr/local/lib/python2.5/gzip.py", line 9, in <module>
>> >
>> >        import zlib
>> >    ImportError: /usr/local/lib/python2.5/lib-dynload/zlib.so: undefined
>> > symbol: PyThread_acquire_lock
>> >
>> > Thanks
>> >
>> > _______________________________________________
>> > Mod_python mailing list
>> > Mod_python@modpython.org
>> > http://mailman.modpython.org/mailman/listinfo/mod_python
>> >
>> >
>
>
From DavidAnguloJunk at gmail.com  Mon Jul  7 14:20:29 2008
From: DavidAnguloJunk at gmail.com (David Angulo Junk)
Date: Mon Jul  7 14:20:32 2008
Subject: [mod_python] undefined symbol: PyThread_acquire_lock
In-Reply-To: <88e286470807031753y5a323714l88230bd00ad42a0f@mail.gmail.com>
References: <6d4e8ccb0807011817p7dc5bcbaxbe05b941e008e58b@mail.gmail.com>
	<88e286470807011932v10c1c974qd6a1ebe40d540b58@mail.gmail.com>
	<6d4e8ccb0807031516y562957e2p736e0434ad874a29@mail.gmail.com>
	<88e286470807031753y5a323714l88230bd00ad42a0f@mail.gmail.com>
Message-ID: <da620fc30807071120o44873954l5a35055ca46e1cf5@mail.gmail.com>

Thanks again.

The installations are at:

/usr/bin/python2.3
/usr/local/bin/python2.4
/usr/local/bin/python2.5

and the libraries are at:

/usr/lib/python2.3/
/usr/local/lib/python2.4/
/usr/local/lib/python2.5/

No, I don't see any installation in both places.


So, from what you said below, I take it I should uninstall some versions and
ensure they're all installed in a single location???

Thanks.

Dave



On Thu, Jul 3, 2008 at 7:53 PM, Graham Dumpleton <graham.dumpleton@gmail.com>
wrote:

> Please keep followups on list by using reply-all.
>
> 2008/7/4 David AnguloJunk <davidangulojunk@gmail.com>:
> > I walked into an installation done by someone else.  There are three
> > pythongs installed (2.3, 2.4, and 2.5).  I do not see anything setting
> paths
> > to any of the three of these in either the httpd.conf  nor in the
> > environment variables.  Where are the "python paths" set?  I am assuming
> > that mod_python just has its path set into it at install time??
>
> But where are the different versions installed? Are there some in /usr
> and some in /usr/local and is any version appearing in both locations.
>
> How mod_python finds Python installation is a bit convoluted, albeit
> not mod_python's fault, but just how Python does it. Effectively, the
> version of Python is known by mod_python by virtue of library being
> linked in, but run time directories for Python found at run time,
> which can cause problems if you have Python installations in multiple
> different root directories.
>
> Graham
>
> > Thanks for your help.
> >
> > Dave
> >
> > On Tue, Jul 1, 2008 at 9:32 PM, Graham Dumpleton
> > <graham.dumpleton@gmail.com> wrote:
> >>
> >> Did you have to heavily fiddle with Python paths to get mod_python to
> >> use the installation of Python you wanted it to use? Looks a bit like
> >> you are trying to use a Python installation different to what
> >> mod_python was compiled for.
> >>
> >> Graham
> >>
> >> 2008/7/2 David AnguloJunk <davidangulojunk@gmail.com>:
> >> > Could someone help me please?  In my code, I'm doing a:
> >> >
> >> >     import zlib
> >> >
> >> > and I get this:
> >> >
> >> >    Mod_python error: "PythonHandler www"
> >> >
> >> >    Traceback (most recent call last):
> >> >
> >> >      File
> "/usr/local/lib/python2.5/site-packages/mod_python/apache.py",
> >> > line 181, in Dispatch
> >> >
> >> >        module = import_module(module_name, _req)
> >> >      File
> "/usr/local/lib/python2.5/site-packages/mod_python/apache.py",
> >> > line 335, in import_module
> >> >        module = imp.load_module(mname, f, p, d)
> >> >      File "/home/barnah5/public_html/www/modules/www.py", line 8, in
> >> > <module>
> >> >
> >> >        import google_sitemap
> >> >      File "/home/barnah5/public_html/www/modules/google_sitemap.py",
> >> > line 2,
> >> > in <module>
> >> >        import gzip
> >> >      File "/usr/local/lib/python2.5/gzip.py", line 9, in <module>
> >> >
> >> >        import zlib
> >> >    ImportError: /usr/local/lib/python2.5/lib-dynload/zlib.so:
> undefined
> >> > symbol: PyThread_acquire_lock
> >> >
> >> > Thanks
> >> >
> >> > _______________________________________________
> >> > Mod_python mailing list
> >> > Mod_python@modpython.org
> >> > http://mailman.modpython.org/mailman/listinfo/mod_python
> >> >
> >> >
> >
> >
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080707/ac0d1e25/attachment.html
From graham.dumpleton at gmail.com  Mon Jul  7 23:34:58 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Mon Jul  7 23:35:04 2008
Subject: [mod_python] undefined symbol: PyThread_acquire_lock
In-Reply-To: <da620fc30807071120o44873954l5a35055ca46e1cf5@mail.gmail.com>
References: <6d4e8ccb0807011817p7dc5bcbaxbe05b941e008e58b@mail.gmail.com>
	<88e286470807011932v10c1c974qd6a1ebe40d540b58@mail.gmail.com>
	<6d4e8ccb0807031516y562957e2p736e0434ad874a29@mail.gmail.com>
	<88e286470807031753y5a323714l88230bd00ad42a0f@mail.gmail.com>
	<da620fc30807071120o44873954l5a35055ca46e1cf5@mail.gmail.com>
Message-ID: <88e286470807072034g75a37f27q5edd1b9f14f0ebdb@mail.gmail.com>

What does Apache startup message say about mod_python version:

[Tue Feb 01 16:08:21 2005] [notice] Apache/2.0.51 (Unix)
  mod_python/3.1.3 Python/2.3 configured -- resuming normal operations

Is a Python shared library being used. Ie., what do you get if do:

  ldd mod_python.so

and:

  ls -las mod_pyhthon.so

Graham

2008/7/8 David Angulo Junk <DavidAnguloJunk@gmail.com>:
> Thanks again.
>
> The installations are at:
>
> /usr/bin/python2.3
> /usr/local/bin/python2.4
> /usr/local/bin/python2.5
>
> and the libraries are at:
>
> /usr/lib/python2.3/
> /usr/local/lib/python2.4/
> /usr/local/lib/python2.5/
>
> No, I don't see any installation in both places.
>
>
> So, from what you said below, I take it I should uninstall some versions and
> ensure they're all installed in a single location???
>
> Thanks.
>
> Dave
>
>
>
> On Thu, Jul 3, 2008 at 7:53 PM, Graham Dumpleton
> <graham.dumpleton@gmail.com> wrote:
>>
>> Please keep followups on list by using reply-all.
>>
>> 2008/7/4 David AnguloJunk <davidangulojunk@gmail.com>:
>> > I walked into an installation done by someone else.  There are three
>> > pythongs installed (2.3, 2.4, and 2.5).  I do not see anything setting
>> > paths
>> > to any of the three of these in either the httpd.conf  nor in the
>> > environment variables.  Where are the "python paths" set?  I am assuming
>> > that mod_python just has its path set into it at install time??
>>
>> But where are the different versions installed? Are there some in /usr
>> and some in /usr/local and is any version appearing in both locations.
>>
>> How mod_python finds Python installation is a bit convoluted, albeit
>> not mod_python's fault, but just how Python does it. Effectively, the
>> version of Python is known by mod_python by virtue of library being
>> linked in, but run time directories for Python found at run time,
>> which can cause problems if you have Python installations in multiple
>> different root directories.
>>
>> Graham
>>
>> > Thanks for your help.
>> >
>> > Dave
>> >
>> > On Tue, Jul 1, 2008 at 9:32 PM, Graham Dumpleton
>> > <graham.dumpleton@gmail.com> wrote:
>> >>
>> >> Did you have to heavily fiddle with Python paths to get mod_python to
>> >> use the installation of Python you wanted it to use? Looks a bit like
>> >> you are trying to use a Python installation different to what
>> >> mod_python was compiled for.
>> >>
>> >> Graham
>> >>
>> >> 2008/7/2 David AnguloJunk <davidangulojunk@gmail.com>:
>> >> > Could someone help me please?  In my code, I'm doing a:
>> >> >
>> >> >     import zlib
>> >> >
>> >> > and I get this:
>> >> >
>> >> >    Mod_python error: "PythonHandler www"
>> >> >
>> >> >    Traceback (most recent call last):
>> >> >
>> >> >      File
>> >> > "/usr/local/lib/python2.5/site-packages/mod_python/apache.py",
>> >> > line 181, in Dispatch
>> >> >
>> >> >        module = import_module(module_name, _req)
>> >> >      File
>> >> > "/usr/local/lib/python2.5/site-packages/mod_python/apache.py",
>> >> > line 335, in import_module
>> >> >        module = imp.load_module(mname, f, p, d)
>> >> >      File "/home/barnah5/public_html/www/modules/www.py", line 8, in
>> >> > <module>
>> >> >
>> >> >        import google_sitemap
>> >> >      File "/home/barnah5/public_html/www/modules/google_sitemap.py",
>> >> > line 2,
>> >> > in <module>
>> >> >        import gzip
>> >> >      File "/usr/local/lib/python2.5/gzip.py", line 9, in <module>
>> >> >
>> >> >        import zlib
>> >> >    ImportError: /usr/local/lib/python2.5/lib-dynload/zlib.so:
>> >> > undefined
>> >> > symbol: PyThread_acquire_lock
>> >> >
>> >> > Thanks
>> >> >
>> >> > _______________________________________________
>> >> > Mod_python mailing list
>> >> > Mod_python@modpython.org
>> >> > http://mailman.modpython.org/mailman/listinfo/mod_python
>> >> >
>> >> >
>> >
>> >
>
>
From davidangulojunk at gmail.com  Tue Jul  8 11:57:17 2008
From: davidangulojunk at gmail.com (David AnguloJunk)
Date: Tue Jul  8 11:57:22 2008
Subject: [mod_python] undefined symbol: PyThread_acquire_lock
In-Reply-To: <88e286470807072034g75a37f27q5edd1b9f14f0ebdb@mail.gmail.com>
References: <6d4e8ccb0807011817p7dc5bcbaxbe05b941e008e58b@mail.gmail.com>
	<88e286470807011932v10c1c974qd6a1ebe40d540b58@mail.gmail.com>
	<6d4e8ccb0807031516y562957e2p736e0434ad874a29@mail.gmail.com>
	<88e286470807031753y5a323714l88230bd00ad42a0f@mail.gmail.com>
	<da620fc30807071120o44873954l5a35055ca46e1cf5@mail.gmail.com>
	<88e286470807072034g75a37f27q5edd1b9f14f0ebdb@mail.gmail.com>
Message-ID: <6d4e8ccb0807080857m97c653bsa85b6741dcf9923b@mail.gmail.com>

Re: apache startup.  I sent this earlier, but accidently cut off the
CC for the list, so I'll repost it

===========
Does this mean that the mod_python hasn't been installed correctly:

   [/home/x/public_html/conf]# python
   Python 2.3.4 (#1, Dec 11 2007, 05:27:57)
   [GCC 3.4.6 20060404 (Red Hat 3.4.6-9)] on linux2
   Type "help", "copyright", "credits" or "license" for more information.
   >>> import mod_python.psp

   Traceback (most recent call last):
     File "<stdin>", line 1, in ?
   ImportError: No module named mod_python.psp
   >


Also, I found this in the apache log:

   [Thu Jul  3 15:43:35 2008] [notice] Apache/1.3.39 (Unix)
   PHP/5.2.5 mod_python/2.7.11 Python/2.5.1
   mod_auth_passthrough/1.8 mod_bwlimited/1.4
   mod_log_bytes/1.2 mod_gzip/1.3.26.1a FrontPage/5.0.2.2635
   DAV/1.0.3 mod_ssl/2.8.30 OpenSSL/0.9.7a configured --
   resuming normal operations
=========


Re: Python shared library.  No, a shared library isn't being used:

x@y [~]# ldd mod_python.so
ldd: ./mod_python.so: No such file or directory
x@y [~]# ls -las mod_pyhthon.so
/bin/ls: mod_pyhthon.so: No such file or directory


but that's going to depend on which directory I'm in when I run it so:

x@y [~]# locate mod_python.so
/usr/local/apache/libexec/mod_python.so
/usr/src/mod_python-2.7.11/src/mod_python.so
x@y [~]# ls -las /usr/local/apache/libexec/mod_python.so
3951 -rwxr-xr-x  1 root root 4028236 Jan 16 14:48
/usr/local/apache/libexec/mod_python.so*





On 7/7/08, Graham Dumpleton <graham.dumpleton@gmail.com> wrote:
> What does Apache startup message say about mod_python version:
>
> [Tue Feb 01 16:08:21 2005] [notice] Apache/2.0.51 (Unix)
>   mod_python/3.1.3 Python/2.3 configured -- resuming normal operations
>
> Is a Python shared library being used. Ie., what do you get if do:
>
>   ldd mod_python.so
>
> and:
>
>   ls -las mod_pyhthon.so
>
> Graham
>
> 2008/7/8 David Angulo Junk <DavidAnguloJunk@gmail.com>:
>> Thanks again.
>>
>> The installations are at:
>>
>> /usr/bin/python2.3
>> /usr/local/bin/python2.4
>> /usr/local/bin/python2.5
>>
>> and the libraries are at:
>>
>> /usr/lib/python2.3/
>> /usr/local/lib/python2.4/
>> /usr/local/lib/python2.5/
>>
>> No, I don't see any installation in both places.
>>
>>
>> So, from what you said below, I take it I should uninstall some versions
>> and
>> ensure they're all installed in a single location???
>>
>> Thanks.
>>
>> Dave
>>
>>
>>
>> On Thu, Jul 3, 2008 at 7:53 PM, Graham Dumpleton
>> <graham.dumpleton@gmail.com> wrote:
>>>
>>> Please keep followups on list by using reply-all.
>>>
>>> 2008/7/4 David AnguloJunk <davidangulojunk@gmail.com>:
>>> > I walked into an installation done by someone else.  There are three
>>> > pythongs installed (2.3, 2.4, and 2.5).  I do not see anything setting
>>> > paths
>>> > to any of the three of these in either the httpd.conf  nor in the
>>> > environment variables.  Where are the "python paths" set?  I am
>>> > assuming
>>> > that mod_python just has its path set into it at install time??
>>>
>>> But where are the different versions installed? Are there some in /usr
>>> and some in /usr/local and is any version appearing in both locations.
>>>
>>> How mod_python finds Python installation is a bit convoluted, albeit
>>> not mod_python's fault, but just how Python does it. Effectively, the
>>> version of Python is known by mod_python by virtue of library being
>>> linked in, but run time directories for Python found at run time,
>>> which can cause problems if you have Python installations in multiple
>>> different root directories.
>>>
>>> Graham
>>>
>>> > Thanks for your help.
>>> >
>>> > Dave
>>> >
>>> > On Tue, Jul 1, 2008 at 9:32 PM, Graham Dumpleton
>>> > <graham.dumpleton@gmail.com> wrote:
>>> >>
>>> >> Did you have to heavily fiddle with Python paths to get mod_python to
>>> >> use the installation of Python you wanted it to use? Looks a bit like
>>> >> you are trying to use a Python installation different to what
>>> >> mod_python was compiled for.
>>> >>
>>> >> Graham
>>> >>
>>> >> 2008/7/2 David AnguloJunk <davidangulojunk@gmail.com>:
>>> >> > Could someone help me please?  In my code, I'm doing a:
>>> >> >
>>> >> >     import zlib
>>> >> >
>>> >> > and I get this:
>>> >> >
>>> >> >    Mod_python error: "PythonHandler www"
>>> >> >
>>> >> >    Traceback (most recent call last):
>>> >> >
>>> >> >      File
>>> >> > "/usr/local/lib/python2.5/site-packages/mod_python/apache.py",
>>> >> > line 181, in Dispatch
>>> >> >
>>> >> >        module = import_module(module_name, _req)
>>> >> >      File
>>> >> > "/usr/local/lib/python2.5/site-packages/mod_python/apache.py",
>>> >> > line 335, in import_module
>>> >> >        module = imp.load_module(mname, f, p, d)
>>> >> >      File "/home/x/public_html/www/modules/www.py", line 8, in
>>> >> > <module>
>>> >> >
>>> >> >        import google_sitemap
>>> >> >      File "/home/x/public_html/www/modules/google_sitemap.py",
>>> >> > line 2,
>>> >> > in <module>
>>> >> >        import gzip
>>> >> >      File "/usr/local/lib/python2.5/gzip.py", line 9, in <module>
>>> >> >
>>> >> >        import zlib
>>> >> >    ImportError: /usr/local/lib/python2.5/lib-dynload/zlib.so:
>>> >> > undefined
>>> >> > symbol: PyThread_acquire_lock
>>> >> >
>>> >> > Thanks
>>> >> >
>>> >> > _______________________________________________
>>> >> > Mod_python mailing list
>>> >> > Mod_python@modpython.org
>>> >> > http://mailman.modpython.org/mailman/listinfo/mod_python
>>> >> >
>>> >> >
>>> >
>>> >
>>
>>
>
From graham.dumpleton at gmail.com  Tue Jul  8 21:56:31 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Tue Jul  8 21:56:36 2008
Subject: [mod_python] undefined symbol: PyThread_acquire_lock
In-Reply-To: <6d4e8ccb0807080857m97c653bsa85b6741dcf9923b@mail.gmail.com>
References: <6d4e8ccb0807011817p7dc5bcbaxbe05b941e008e58b@mail.gmail.com>
	<88e286470807011932v10c1c974qd6a1ebe40d540b58@mail.gmail.com>
	<6d4e8ccb0807031516y562957e2p736e0434ad874a29@mail.gmail.com>
	<88e286470807031753y5a323714l88230bd00ad42a0f@mail.gmail.com>
	<da620fc30807071120o44873954l5a35055ca46e1cf5@mail.gmail.com>
	<88e286470807072034g75a37f27q5edd1b9f14f0ebdb@mail.gmail.com>
	<6d4e8ccb0807080857m97c653bsa85b6741dcf9923b@mail.gmail.com>
Message-ID: <88e286470807081856v76250ed1uc2071360a62715d0@mail.gmail.com>

2008/7/9 David AnguloJunk <davidangulojunk@gmail.com>:
> Re: apache startup.  I sent this earlier, but accidently cut off the
> CC for the list, so I'll repost it
>
> ===========
> Does this mean that the mod_python hasn't been installed correctly:
>
>   [/home/x/public_html/conf]# python
>   Python 2.3.4 (#1, Dec 11 2007, 05:27:57)
>   [GCC 3.4.6 20060404 (Red Hat 3.4.6-9)] on linux2
>   Type "help", "copyright", "credits" or "license" for more information.
>   >>> import mod_python.psp
>
>   Traceback (most recent call last):
>     File "<stdin>", line 1, in ?
>   ImportError: No module named mod_python.psp

Of course, you ran Python 2.3 and not Python 2.5.

> Also, I found this in the apache log:
>
>   [Thu Jul  3 15:43:35 2008] [notice] Apache/1.3.39 (Unix)
>   PHP/5.2.5 mod_python/2.7.11 Python/2.5.1
>   mod_auth_passthrough/1.8 mod_bwlimited/1.4
>   mod_log_bytes/1.2 mod_gzip/1.3.26.1a FrontPage/5.0.2.2635
>   DAV/1.0.3 mod_ssl/2.8.30 OpenSSL/0.9.7a configured --
>   resuming normal operations

Is there any chance you can upgrade to Apache 2 and latest mod_python.
Version 2.7.11 is no longer supported and not guaranteed to even work
on latest versions of Python.

> Re: Python shared library.  No, a shared library isn't being used:
>
> x@y [~]# ldd mod_python.so
> ldd: ./mod_python.so: No such file or directory
> x@y [~]# ls -las mod_pyhthon.so
> /bin/ls: mod_pyhthon.so: No such file or directory

Run in wrong directory, so this says nothing.

Obviously you should have run it with full path to mod_python.so if
not in same directory.

At this point, if you really want to use Apache 1.3 and are wanting to
host a WSGI capable application, eg, Django, Trac, TurboGears, Pylons
etc, then try mod_wsgi instead.

Importantly, read all the warnings in mod_wsgi documentation about
Python shared libraries.

  http://code.google.com/p/modwsgi/wiki/InstallationIssues

and perhaps fix your Python installation so it will all perform better anyway.

Graham

> but that's going to depend on which directory I'm in when I run it so:
>
> x@y [~]# locate mod_python.so
> /usr/local/apache/libexec/mod_python.so
> /usr/src/mod_python-2.7.11/src/mod_python.so
> x@y [~]# ls -las /usr/local/apache/libexec/mod_python.so
> 3951 -rwxr-xr-x  1 root root 4028236 Jan 16 14:48
> /usr/local/apache/libexec/mod_python.so*

That is big, so not using Python shared library.

> On 7/7/08, Graham Dumpleton <graham.dumpleton@gmail.com> wrote:
>> What does Apache startup message say about mod_python version:
>>
>> [Tue Feb 01 16:08:21 2005] [notice] Apache/2.0.51 (Unix)
>>   mod_python/3.1.3 Python/2.3 configured -- resuming normal operations
>>
>> Is a Python shared library being used. Ie., what do you get if do:
>>
>>   ldd mod_python.so
>>
>> and:
>>
>>   ls -las mod_pyhthon.so
>>
>> Graham
>>
>> 2008/7/8 David Angulo Junk <DavidAnguloJunk@gmail.com>:
>>> Thanks again.
>>>
>>> The installations are at:
>>>
>>> /usr/bin/python2.3
>>> /usr/local/bin/python2.4
>>> /usr/local/bin/python2.5
>>>
>>> and the libraries are at:
>>>
>>> /usr/lib/python2.3/
>>> /usr/local/lib/python2.4/
>>> /usr/local/lib/python2.5/
>>>
>>> No, I don't see any installation in both places.
>>>
>>>
>>> So, from what you said below, I take it I should uninstall some versions
>>> and
>>> ensure they're all installed in a single location???
>>>
>>> Thanks.
>>>
>>> Dave
>>>
>>>
>>>
>>> On Thu, Jul 3, 2008 at 7:53 PM, Graham Dumpleton
>>> <graham.dumpleton@gmail.com> wrote:
>>>>
>>>> Please keep followups on list by using reply-all.
>>>>
>>>> 2008/7/4 David AnguloJunk <davidangulojunk@gmail.com>:
>>>> > I walked into an installation done by someone else.  There are three
>>>> > pythongs installed (2.3, 2.4, and 2.5).  I do not see anything setting
>>>> > paths
>>>> > to any of the three of these in either the httpd.conf  nor in the
>>>> > environment variables.  Where are the "python paths" set?  I am
>>>> > assuming
>>>> > that mod_python just has its path set into it at install time??
>>>>
>>>> But where are the different versions installed? Are there some in /usr
>>>> and some in /usr/local and is any version appearing in both locations.
>>>>
>>>> How mod_python finds Python installation is a bit convoluted, albeit
>>>> not mod_python's fault, but just how Python does it. Effectively, the
>>>> version of Python is known by mod_python by virtue of library being
>>>> linked in, but run time directories for Python found at run time,
>>>> which can cause problems if you have Python installations in multiple
>>>> different root directories.
>>>>
>>>> Graham
>>>>
>>>> > Thanks for your help.
>>>> >
>>>> > Dave
>>>> >
>>>> > On Tue, Jul 1, 2008 at 9:32 PM, Graham Dumpleton
>>>> > <graham.dumpleton@gmail.com> wrote:
>>>> >>
>>>> >> Did you have to heavily fiddle with Python paths to get mod_python to
>>>> >> use the installation of Python you wanted it to use? Looks a bit like
>>>> >> you are trying to use a Python installation different to what
>>>> >> mod_python was compiled for.
>>>> >>
>>>> >> Graham
>>>> >>
>>>> >> 2008/7/2 David AnguloJunk <davidangulojunk@gmail.com>:
>>>> >> > Could someone help me please?  In my code, I'm doing a:
>>>> >> >
>>>> >> >     import zlib
>>>> >> >
>>>> >> > and I get this:
>>>> >> >
>>>> >> >    Mod_python error: "PythonHandler www"
>>>> >> >
>>>> >> >    Traceback (most recent call last):
>>>> >> >
>>>> >> >      File
>>>> >> > "/usr/local/lib/python2.5/site-packages/mod_python/apache.py",
>>>> >> > line 181, in Dispatch
>>>> >> >
>>>> >> >        module = import_module(module_name, _req)
>>>> >> >      File
>>>> >> > "/usr/local/lib/python2.5/site-packages/mod_python/apache.py",
>>>> >> > line 335, in import_module
>>>> >> >        module = imp.load_module(mname, f, p, d)
>>>> >> >      File "/home/x/public_html/www/modules/www.py", line 8, in
>>>> >> > <module>
>>>> >> >
>>>> >> >        import google_sitemap
>>>> >> >      File "/home/x/public_html/www/modules/google_sitemap.py",
>>>> >> > line 2,
>>>> >> > in <module>
>>>> >> >        import gzip
>>>> >> >      File "/usr/local/lib/python2.5/gzip.py", line 9, in <module>
>>>> >> >
>>>> >> >        import zlib
>>>> >> >    ImportError: /usr/local/lib/python2.5/lib-dynload/zlib.so:
>>>> >> > undefined
>>>> >> > symbol: PyThread_acquire_lock
>>>> >> >
>>>> >> > Thanks
>>>> >> >
>>>> >> > _______________________________________________
>>>> >> > Mod_python mailing list
>>>> >> > Mod_python@modpython.org
>>>> >> > http://mailman.modpython.org/mailman/listinfo/mod_python
>>>> >> >
>>>> >> >
>>>> >
>>>> >
>>>
>>>
>>
>
From sean at monkeysnatchbanana.com  Wed Jul  9 20:14:59 2008
From: sean at monkeysnatchbanana.com (Sean Allen)
Date: Wed Jul  9 22:36:26 2008
Subject: [mod_python] mod_python or wsgi
Message-ID: <6C80CDDC-9424-4498-AA31-F79EADE19447@monkeysnatchbanana.com>

We are doing a 'side port' from mod_perl over to python of a large  
mess of code.

Largely because developers keep getting tripped up on the idiomatic  
nature of OO perl.

The initial idea was to move everything to mod_python as it seemed the  
closet sidestep.
Looking for advice on the validity of that idea. Would it be as easy  
to move mod_perl code
to wsgi as mod_python?

i know the advantages of wsgi in terms of portability by that isnt the  
issue right now,
getting it done as quickly and as easily as possible is.

thoughts? experiences? comments?

thanks in advance,
sean

From graham.dumpleton at gmail.com  Thu Jul 10 01:15:02 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Thu Jul 10 01:15:15 2008
Subject: [mod_python] mod_python or wsgi
In-Reply-To: <6C80CDDC-9424-4498-AA31-F79EADE19447@monkeysnatchbanana.com>
References: <6C80CDDC-9424-4498-AA31-F79EADE19447@monkeysnatchbanana.com>
Message-ID: <88e286470807092215w74fb6ebdk90f3383fb4514430@mail.gmail.com>

2008/7/10 Sean Allen <sean@monkeysnatchbanana.com>:
> We are doing a 'side port' from mod_perl over to python of a large mess of
> code.
>
> Largely because developers keep getting tripped up on the idiomatic nature
> of OO perl.
>
> The initial idea was to move everything to mod_python as it seemed the
> closet sidestep.
> Looking for advice on the validity of that idea. Would it be as easy to move
> mod_perl code
> to wsgi as mod_python?
>
> i know the advantages of wsgi in terms of portability by that isnt the issue
> right now,
> getting it done as quickly and as easily as possible is.
>
> thoughts? experiences? comments?

Does your mod_perl code rely on being able to use Apache handler
phases other than the content handler phase? How much does it depend
upon mod_perl APIs to Apache libraries and internals? In other words,
is it just a content provider, or is it doing more than that and
hooking right into low levels of Apache?

If not hooking into Apache low level APIs, there certainly isn't much
point making your code mod_python specific and therefore not portable
to other hosting mechanisms if that would be a desirable point. Be
aware also that mod_perl exposes a much larger API to Apache stuff
than mod_python and there wouldn't be a direct correspondence when
trying to do a literal port anyway. Templating systems are also
potentially quite different as well.

Either way, I'd suggest there would be a fair bit of effort and using
one of mod_python or some WSGI toolkit/framework over the other isn't
probably going to save you much. So, more importantly, what sort of
features do you need as far as dispatch, templating, session support,
authentication, authorisation etc and at what level do you want to be
able to program, right at the low level, or are higher level
abstractions frameworks more desirable.

Graham
From sean at monkeysnatchbanana.com  Thu Jul 10 08:51:45 2008
From: sean at monkeysnatchbanana.com (Sean Allen)
Date: Thu Jul 10 08:51:54 2008
Subject: [mod_python] mod_python or wsgi
In-Reply-To: <88e286470807092215w74fb6ebdk90f3383fb4514430@mail.gmail.com>
References: <6C80CDDC-9424-4498-AA31-F79EADE19447@monkeysnatchbanana.com>
	<88e286470807092215w74fb6ebdk90f3383fb4514430@mail.gmail.com>
Message-ID: <B719ED24-5FED-48ED-9CB3-CFEA761A2EF9@monkeysnatchbanana.com>


On Jul 10, 2008, at 1:15 AM, Graham Dumpleton wrote:

> 2008/7/10 Sean Allen <sean@monkeysnatchbanana.com>:
>> We are doing a 'side port' from mod_perl over to python of a large  
>> mess of
>> code.
>>
>> Largely because developers keep getting tripped up on the idiomatic  
>> nature
>> of OO perl.
>>
>> The initial idea was to move everything to mod_python as it seemed  
>> the
>> closet sidestep.
>> Looking for advice on the validity of that idea. Would it be as  
>> easy to move
>> mod_perl code
>> to wsgi as mod_python?
>>
>> i know the advantages of wsgi in terms of portability by that isnt  
>> the issue
>> right now,
>> getting it done as quickly and as easily as possible is.
>>
>> thoughts? experiences? comments?
>
> Does your mod_perl code rely on being able to use Apache handler
> phases other than the content handler phase? How much does it depend
> upon mod_perl APIs to Apache libraries and internals? In other words,
> is it just a content provider, or is it doing more than that and
> hooking right into low levels of Apache?
>

We have one PostReadRequestHandler
All the rest of RequestHandlers

The PostReadRequestHandler does some across the board setup including  
setting
the remote_ip in the connection to the value of X-Forwarded-For, if said
header exists and if the connection is being proxied.

Additionally, there is code that extracts media source tracking  
information from the uri and
sets up that info for whatever RequestHandler is executed afterwards.

The RequestHandlers themselves dont do much with the Apache specific  
beyond
using Apache::Request ( apr ) to extract request info and pass it back.

> [ snip ]
>
> Either way, I'd suggest there would be a fair bit of effort and using
> one of mod_python or some WSGI toolkit/framework over the other isn't
> probably going to save you much. So, more importantly, what sort of
> features do you need as far as dispatch, templating, session support,
> authentication, authorisation etc and at what level do you want to be
> able to program, right at the low level, or are higher level
> abstractions frameworks more desirable.

Templating is currently done using the perl TemplateToolkit, the plan  
is to
use the python version which from limited testing should be fairly easy.

The only session state we have is a single cookie so that isnt much of  
a concern.

We have custom code for doing dispatch, authentication etc.

From graham.dumpleton at gmail.com  Thu Jul 10 22:07:52 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Thu Jul 10 22:07:54 2008
Subject: [mod_python] mod_python or wsgi
In-Reply-To: <B719ED24-5FED-48ED-9CB3-CFEA761A2EF9@monkeysnatchbanana.com>
References: <6C80CDDC-9424-4498-AA31-F79EADE19447@monkeysnatchbanana.com>
	<88e286470807092215w74fb6ebdk90f3383fb4514430@mail.gmail.com>
	<B719ED24-5FED-48ED-9CB3-CFEA761A2EF9@monkeysnatchbanana.com>
Message-ID: <88e286470807101907vf5e0687ycecbda21016455c7@mail.gmail.com>

2008/7/10 Sean Allen <sean@monkeysnatchbanana.com>:
>
> On Jul 10, 2008, at 1:15 AM, Graham Dumpleton wrote:
>
>> 2008/7/10 Sean Allen <sean@monkeysnatchbanana.com>:
>>>
>>> We are doing a 'side port' from mod_perl over to python of a large mess
>>> of
>>> code.
>>>
>>> Largely because developers keep getting tripped up on the idiomatic
>>> nature
>>> of OO perl.
>>>
>>> The initial idea was to move everything to mod_python as it seemed the
>>> closet sidestep.
>>> Looking for advice on the validity of that idea. Would it be as easy to
>>> move
>>> mod_perl code
>>> to wsgi as mod_python?
>>>
>>> i know the advantages of wsgi in terms of portability by that isnt the
>>> issue
>>> right now,
>>> getting it done as quickly and as easily as possible is.
>>>
>>> thoughts? experiences? comments?
>>
>> Does your mod_perl code rely on being able to use Apache handler
>> phases other than the content handler phase? How much does it depend
>> upon mod_perl APIs to Apache libraries and internals? In other words,
>> is it just a content provider, or is it doing more than that and
>> hooking right into low levels of Apache?
>>
>
> We have one PostReadRequestHandler
> All the rest of RequestHandlers
>
> The PostReadRequestHandler does some across the board setup including
> setting
> the remote_ip in the connection to the value of X-Forwarded-For, if said
> header exists and if the connection is being proxied.

Is that something which could be done by mod_headers or one of the
other modules available for fiddling with headers?

Graham

> Additionally, there is code that extracts media source tracking information
> from the uri and
> sets up that info for whatever RequestHandler is executed afterwards.
>
> The RequestHandlers themselves dont do much with the Apache specific beyond
> using Apache::Request ( apr ) to extract request info and pass it back.
>
>> [ snip ]
>>
>> Either way, I'd suggest there would be a fair bit of effort and using
>> one of mod_python or some WSGI toolkit/framework over the other isn't
>> probably going to save you much. So, more importantly, what sort of
>> features do you need as far as dispatch, templating, session support,
>> authentication, authorisation etc and at what level do you want to be
>> able to program, right at the low level, or are higher level
>> abstractions frameworks more desirable.
>
> Templating is currently done using the perl TemplateToolkit, the plan is to
> use the python version which from limited testing should be fairly easy.
>
> The only session state we have is a single cookie so that isnt much of a
> concern.
>
> We have custom code for doing dispatch, authentication etc.
>
>
From sean at monkeysnatchbanana.com  Fri Jul 11 00:30:31 2008
From: sean at monkeysnatchbanana.com (Sean Allen)
Date: Fri Jul 11 00:30:40 2008
Subject: [mod_python] mod_python or wsgi
In-Reply-To: <88e286470807101907vf5e0687ycecbda21016455c7@mail.gmail.com>
References: <6C80CDDC-9424-4498-AA31-F79EADE19447@monkeysnatchbanana.com>
	<88e286470807092215w74fb6ebdk90f3383fb4514430@mail.gmail.com>
	<B719ED24-5FED-48ED-9CB3-CFEA761A2EF9@monkeysnatchbanana.com>
	<88e286470807101907vf5e0687ycecbda21016455c7@mail.gmail.com>
Message-ID: <5DDD8015-654B-4515-96F0-939D1EA7ED98@monkeysnatchbanana.com>


On Jul 10, 2008, at 10:07 PM, Graham Dumpleton wrote:

>> We have one PostReadRequestHandler
>> All the rest of RequestHandlers
>>
>> The PostReadRequestHandler does some across the board setup including
>> setting
>> the remote_ip in the connection to the value of X-Forwarded-For, if  
>> said
>> header exists and if the connection is being proxied.
>
> Is that something which could be done by mod_headers or one of the
> other modules available for fiddling with headers?
>
> Graham

Well, the entire idea is that in mod_perl the remote_ip returns  
127.0.0.1
and the X-Forwarded-For header has the actual real value. The  
PostReadRequestHandler
corrects that so that code doesnt need to know if it is being proxied  
to or not.

So that is a bit beyond what mod_headers does. I take it from the  
question,
this could be an issue?

From graham.dumpleton at gmail.com  Fri Jul 11 06:17:23 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Fri Jul 11 06:17:25 2008
Subject: [mod_python] mod_python or wsgi
In-Reply-To: <5DDD8015-654B-4515-96F0-939D1EA7ED98@monkeysnatchbanana.com>
References: <6C80CDDC-9424-4498-AA31-F79EADE19447@monkeysnatchbanana.com>
	<88e286470807092215w74fb6ebdk90f3383fb4514430@mail.gmail.com>
	<B719ED24-5FED-48ED-9CB3-CFEA761A2EF9@monkeysnatchbanana.com>
	<88e286470807101907vf5e0687ycecbda21016455c7@mail.gmail.com>
	<5DDD8015-654B-4515-96F0-939D1EA7ED98@monkeysnatchbanana.com>
Message-ID: <88e286470807110317h1527d895od4898b867f97a950@mail.gmail.com>

2008/7/11 Sean Allen <sean@monkeysnatchbanana.com>:
>
> On Jul 10, 2008, at 10:07 PM, Graham Dumpleton wrote:
>
>>> We have one PostReadRequestHandler
>>> All the rest of RequestHandlers
>>>
>>> The PostReadRequestHandler does some across the board setup including
>>> setting
>>> the remote_ip in the connection to the value of X-Forwarded-For, if said
>>> header exists and if the connection is being proxied.
>>
>> Is that something which could be done by mod_headers or one of the
>> other modules available for fiddling with headers?
>>
>> Graham
>
> Well, the entire idea is that in mod_perl the remote_ip returns 127.0.0.1
> and the X-Forwarded-For header has the actual real value. The
> PostReadRequestHandler
> corrects that so that code doesnt need to know if it is being proxied to or
> not.
>
> So that is a bit beyond what mod_headers does. I take it from the question,
> this could be an issue?

Hmmm, you do realise though that the client IP cannot even really be
relied upon? For example, large ISPs often have all traffic from that
IP appearing as same client IP. This can often cause problems for
session based mechanisms which use client IP address in some way.

Anyway, it isn't really a problem at all if you are using WSGI, as
that sort of transformation can be done as WSGI middleware, given that
that change is only targeting your application content provider and
not any other phases of Apache.

Graham
From sean at monkeysnatchbanana.com  Fri Jul 11 08:59:38 2008
From: sean at monkeysnatchbanana.com (Sean Allen)
Date: Fri Jul 11 08:59:46 2008
Subject: [mod_python] mod_python or wsgi
In-Reply-To: <88e286470807110317h1527d895od4898b867f97a950@mail.gmail.com>
References: <6C80CDDC-9424-4498-AA31-F79EADE19447@monkeysnatchbanana.com>
	<88e286470807092215w74fb6ebdk90f3383fb4514430@mail.gmail.com>
	<B719ED24-5FED-48ED-9CB3-CFEA761A2EF9@monkeysnatchbanana.com>
	<88e286470807101907vf5e0687ycecbda21016455c7@mail.gmail.com>
	<5DDD8015-654B-4515-96F0-939D1EA7ED98@monkeysnatchbanana.com>
	<88e286470807110317h1527d895od4898b867f97a950@mail.gmail.com>
Message-ID: <C8A98896-B59A-430F-8666-19A37FAE7865@monkeysnatchbanana.com>


On Jul 11, 2008, at 6:17 AM, Graham Dumpleton wrote:

> 2008/7/11 Sean Allen <sean@monkeysnatchbanana.com>:
>>
>> On Jul 10, 2008, at 10:07 PM, Graham Dumpleton wrote:
>>
>>>> We have one PostReadRequestHandler
>>>> All the rest of RequestHandlers
>>>>
>>>> The PostReadRequestHandler does some across the board setup  
>>>> including
>>>> setting
>>>> the remote_ip in the connection to the value of X-Forwarded-For,  
>>>> if said
>>>> header exists and if the connection is being proxied.
>>>
>>> Is that something which could be done by mod_headers or one of the
>>> other modules available for fiddling with headers?
>>>
>>> Graham
>>
>> Well, the entire idea is that in mod_perl the remote_ip returns  
>> 127.0.0.1
>> and the X-Forwarded-For header has the actual real value. The
>> PostReadRequestHandler
>> corrects that so that code doesnt need to know if it is being  
>> proxied to or
>> not.
>>
>> So that is a bit beyond what mod_headers does. I take it from the  
>> question,
>> this could be an issue?
>
> Hmmm, you do realise though that the client IP cannot even really be
> relied upon? For example, large ISPs often have all traffic from that
> IP appearing as same client IP. This can often cause problems for
> session based mechanisms which use client IP address in some way.

I understand but we need to rely on them as much as possible for  
various legal reasons.
For example, we need the ip address if someone asks for more info
by filling out a form. If we mail them and they later complain and we  
dont
have an ip address that they came from ( even an aggregated one ), isps
tend to frown on you as its part of CAN-SPAM in the US to have to  
provide
'signup' url and ip address.

From chagel at gmail.com  Sat Jul 12 17:00:05 2008
From: chagel at gmail.com (Gang Chen)
Date: Sat Jul 12 17:00:13 2008
Subject: [mod_python] Apache fails to start
Message-ID: <C49EE7F5.2E3E%chagel@gmail.com>

Hi,

I?m installing mod_python 3.3 on my macxos10.5.4.
I have no problem with configure, make and install.
However, the apache can?t start after I add the ?loadmodule? statement, here
is the console message:

mike-chens-imac:mod_python-3.3.1 Mike$ sudo apachectl -k start
httpd: Syntax error on line 116 of /private/etc/apache2/httpd.conf: Cannot
load /usr/libexec/apache2/mod_python.so into server:
dlopen(/usr/libexec/apache2/mod_python.so, 10): no suitable image found.
Did find:\n\t/usr/libexec/apache2/mod_python.so: no matching architecture in
universal wrapper

The .so file is indeed there, anybody has idea? Thanks.

Regards,
-Mike




-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080712/695e17eb/attachment.html
From bharathv6.project at gmail.com  Mon Jul 14 03:18:22 2008
From: bharathv6.project at gmail.com (bharath venkatesh)
Date: Mon Jul 14 03:18:27 2008
Subject: [mod_python] loading configuration
In-Reply-To: <2613171a0807140011s4aec00adg8b507f9be237f90a@mail.gmail.com>
References: <2613171a0807140011s4aec00adg8b507f9be237f90a@mail.gmail.com>
Message-ID: <2613171a0807140018n2fd20a9h5def6fbedd969bea@mail.gmail.com>

hi everyone,
                    I want to load certain configuration from a
configuration file  when a appache starts in mod python or mod wsgi  using a
function take for example load_config() .. i don't want to include this
load_config function inside handler as i don't want it to  execute every
time.. and  also  when ever changes are made in the configuration file i
should be able to load the changed configuration with out restarting appache
... can any one tell me how this can be done ...


bharath
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080714/c74b1c1a/attachment.html
From scarfboy at gmail.com  Mon Jul 14 04:04:02 2008
From: scarfboy at gmail.com (Bart)
Date: Mon Jul 14 04:04:10 2008
Subject: [mod_python] loading configuration
In-Reply-To: <2613171a0807140018n2fd20a9h5def6fbedd969bea@mail.gmail.com>
References: <2613171a0807140011s4aec00adg8b507f9be237f90a@mail.gmail.com>
	<2613171a0807140018n2fd20a9h5def6fbedd969bea@mail.gmail.com>
Message-ID: <b71082d80807140104s7b4f27a8va5a8f801190ea278@mail.gmail.com>

I haven't used mod_wsgi yet so I don't know how much this applies to
it, but in mod_python my solution would probably be to put all my
configuration in variables in a config.py file and use the existing
mod_python reloading behaviour of reloading it *only* when its
modification date changes (...meaning whenever you edit it).

Note that if you do this, you want to explicitly call that
config.py-reloader function in every handler, so that it will check
every time. The check alone without it having to reload is pretty
light -- and as light as you're going to get if you want it fully
automatic, since you do want it to continually check the disk (and OS
caches are nice for this sort of thing).

(I'd personally move the reloading check into a decorator to keep that
reloader code in use in a single place instead of pasting it inside
each handler. For me that makes sense anyway, since I already use
decorators to apply Unicode conversion, selectively do form parsing
and such.)


I think you want to avoid having to duplicate this with your own
custom config-reloading code, since doing it yourself means you have
to think about handling per-child *and* as soon as possible, which is
annoying when you want to force a reload from code, since you would
probably hand that wish in via a handler (in a apache single child)
and would then have to communicate that wish somehow. (the way the
reloader uses mtime sounds like a handy solution to this, and if you
can just use it without any custom hacks, all the better...)


Regards,
--Bart


2008/7/14 bharath venkatesh <bharathv6.project@gmail.com>:
>
> hi everyone,
>                     I want to load certain configuration from a
> configuration file  when a appache starts in mod python or mod wsgi  using a
> function take for example load_config() .. i don't want to include this
> load_config function inside handler as i don't want it to  execute every
> time.. and  also  when ever changes are made in the configuration file i
> should be able to load the changed configuration with out restarting appache
> ... can any one tell me how this can be done ...
>
>
> bharath
From graham.dumpleton at gmail.com  Mon Jul 14 06:37:51 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Mon Jul 14 06:37:54 2008
Subject: [mod_python] Re: [modwsgi] loading configuration
In-Reply-To: <2613171a0807140011s4aec00adg8b507f9be237f90a@mail.gmail.com>
References: <2613171a0807140011s4aec00adg8b507f9be237f90a@mail.gmail.com>
Message-ID: <88e286470807140337q1de3b776qb6b8d2bb37e0758d@mail.gmail.com>

2008/7/14 bharath venkatesh <bharathv6.project@gmail.com>:
> hi everyone,
>                     I want to load certain configuration from a
> configuration file  when a appache starts in mod python or mod wsgi  using a
> function take for example load_config() .. i don't want to include this
> load_config function inside handler as i don't want it to  execute every
> time.. and  also  when ever changes are made in the configuration file i
> should be able to load the changed configuration with out restarting appache
> ... can any one tell me how this can be done ...

For both mod_python or mod_wsgi, you don't have to have it inside the
handler/application function, you can instead stick it at global scope
within the same code file and the code will be executed when the
module/file is first loaded. By default the file is loaded on first
request which targets the application. For mod_python you can force it
to load at process startup using PythonImport directive. For mod_wsgi
you can use WSGIImportScript directive. In mod_wsgi 3.0 you will also
through options to WSGIScriptAlias where you define application mount
point be able to set things so code is preloaded on process startup.

For mod_wsgi, information on reloading and how to can cause automatic
reload of application/configuration without restarting whole of
Apache, see:

  http://code.google.com/p/modwsgi/wiki/ReloadingSourceCode

In mod_python, you could use its code reloading ability, but your
configuration file would then have to be valid Python code and
couldn't be some other file format.

Graham
From workitharder at gmail.com  Mon Jul 14 12:20:59 2008
From: workitharder at gmail.com (Buck Golemon)
Date: Mon Jul 14 12:21:50 2008
Subject: [mod_python] ImportError: No module named
	_mp_6a56a751b58d143e34982c81384539ef
Message-ID: <c70f1ac50807140920xd01121ci1496944ab9750d72@mail.gmail.com>

I'm completely dumbfounded by this error. I'm sure you guys have seen it
before. I looked at the documentation and mailing list and didn't find
anything useful. Here's the full error:

MOD_PYTHON ERROR

ProcessId:      12137
Interpreter:    '127.0.1.1'

ServerName:     '127.0.1.1'
DocumentRoot:   '/var/www/'

URI:            '/modpython/xmlrpc.py'
Location:       None
Directory:      '/home/golemon/software/mod_python/'
Filename:       '/home/golemon/software/mod_python/xmlrpc.py'
PathInfo:       ''

Phase:          'PythonHandler'
Handler:        'xmlrpc'

Traceback (most recent call last):

  File "/usr/lib/python2.5/site-packages/mod_python/importer.py", line
1537, in HandlerDispatch
    default=default_handler, arg=req, silent=hlist.silent)

  File "/usr/lib/python2.5/site-packages/mod_python/importer.py", line
1229, in _process_target
    result = _execute_target(config, req, object, arg)

  File "/usr/lib/python2.5/site-packages/mod_python/importer.py", line
1128, in _execute_target
    result = object(arg)

  File "/home/golemon/software/mod_python/xmlrpc.py", line 38, in handler
    session = Session.Session(req)

  File "/usr/lib/python2.5/site-packages/mod_python/Session.py", line
803, in Session
    timeout=timeout, lock=lock)

  File "/usr/lib/python2.5/site-packages/mod_python/Session.py", line
372, in __init__
    timeout=timeout, lock=lock)

  File "/usr/lib/python2.5/site-packages/mod_python/Session.py", line
180, in __init__
    if self.load():

  File "/usr/lib/python2.5/site-packages/mod_python/Session.py", line
250, in load
    dict = self.do_load()

  File "/usr/lib/python2.5/site-packages/mod_python/Session.py", line
396, in do_load
    return cPickle.loads(dbm[self._sid])

ImportError: No module named _mp_6a56a751b58d143e34982c81384539ef


MODULE CACHE DETAILS

Accessed:       Mon Jul 14 09:09:22 2008
Generation:     0

_mp_a096311fc03d37d9ee4e366174222b70 {
  FileName:
'/home/golemon/software/mod_python/ApacheXMLRPCRequestHandler.py'
  Instance:     1 [IMPORT]
  Generation:   1
  Modified:     Sat Jul 12 18:23:08 2008
  Imported:     Mon Jul 14 09:09:22 2008
}

_mp_6a56a751b58d143e34982c81384539ef {
  FileName:     '/home/golemon/software/mod_python/xmlrpc.py'
  Instance:     1 [IMPORT]
  Generation:   2
  Modified:     Mon Jul 14 08:48:26 2008
  Imported:     Mon Jul 14 09:09:22 2008
  Children:
'/home/golemon/software/mod_python/ApacheXMLRPCRequestHandler.py'
}


Here's my apache config. The last two lines are my lame attempt to fix the
problem, not anything that's necessary.

Alias /modpython /home/golemon/software/mod_python/

<Directory /home/golemon/software/mod_python/>
      AddHandler mod_python .py
      PythonHandler xmlrpc
      PythonDebug On
      PythonOption mod_python.session.application_path "."
      PythonPath "sys.path+['/home/golemon/software/modpython']"
</Directory>


-- 
Buck Golemon
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080714/be868937/attachment.html
From workitharder at gmail.com  Mon Jul 14 13:52:15 2008
From: workitharder at gmail.com (Buck Golemon)
Date: Mon Jul 14 13:52:20 2008
Subject: [mod_python] ImportError: No module named
	_mp_6a56a751b58d143e34982c81384539ef
Message-ID: <c70f1ac50807141052m7cd2263id0fc63cd6c5d3c9a@mail.gmail.com>

I had to manually alter my class's __module__ attribute to get it to
unpickle successfully.

>>> print MyClass.__module__
_mp_6a56a751b58d143e34982c81384539ef
>>> MyClass.__module__ = "myscript"

This solved my problem, but is there something I'm doing wrong? It doesn't
seem like I should have to do this.

-- 
Buck Golemon
AIM: bukzor
Cell: (480) 272-1153
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080714/0c30c145/attachment.html
From bharathv6.project at gmail.com  Mon Jul 14 14:55:29 2008
From: bharathv6.project at gmail.com (bharath venkatesh)
Date: Mon Jul 14 14:55:37 2008
Subject: [mod_python] processing of post parameters
In-Reply-To: <2613171a0807141154v421a6d7ai2896131e1847c1c7@mail.gmail.com>
References: <2613171a0807141154v421a6d7ai2896131e1847c1c7@mail.gmail.com>
Message-ID: <2613171a0807141155i77f940e4raafae4b25a51d2eb@mail.gmail.com>

---------- Forwarded message ----------
From: bharath venkatesh <bharathv6.project@gmail.com>
Date: Mon, Jul 14, 2008 at 11:54 AM
Subject: processing of post parameters
To: modwsgi@googlegroups.com


hi everyone,
                 most of us know how to process get parameters . parameters
are too big to send through get parameters . I want to send it through post
parameters . but how to process post parameters in handlers or applications
.. ? can any one pls help me ..
                                   thanks
                                                          bharath
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080714/643fa254/attachment.html
From jim.nelson at neteasyinc.com  Mon Jul 14 17:09:04 2008
From: jim.nelson at neteasyinc.com (jim.nelson@neteasyinc.com)
Date: Mon Jul 14 17:09:07 2008
Subject: [mod_python] Bug in mod_python 3.3.1
Message-ID: <56176.75.145.244.105.1216069744.squirrel@webmail.neteasyinc.com>

I hadn't seen any information about the following bugs:

http://bugs.gentoo.org/show_bug.cgi?id=230211
http://trac.macports.org/ticket/15791

I ran into this trying to get mod_python set up on my Mac running OSX
10.5.  They're saying it's an upstream bug.

From graham.dumpleton at gmail.com  Mon Jul 14 20:09:19 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Mon Jul 14 20:09:34 2008
Subject: [mod_python] ImportError: No module named
	_mp_6a56a751b58d143e34982c81384539ef
In-Reply-To: <c70f1ac50807141052m7cd2263id0fc63cd6c5d3c9a@mail.gmail.com>
References: <c70f1ac50807141052m7cd2263id0fc63cd6c5d3c9a@mail.gmail.com>
Message-ID: <88e286470807141709p2c4ca9e6hb56dcb01848cd51f@mail.gmail.com>

Read:

  http://www.dscpl.com.au/wiki/ModPython/Articles/IssuesWithSessionObjects

You can't pickle objects which are contained in code files managed by
mod_python module importer.

Graham

2008/7/15 Buck Golemon <workitharder@gmail.com>:
> I had to manually alter my class's __module__ attribute to get it to
> unpickle successfully.
>
>>>> print MyClass.__module__
> _mp_6a56a751b58d143e34982c81384539ef
>>>> MyClass.__module__ = "myscript"
>
> This solved my problem, but is there something I'm doing wrong? It doesn't
> seem like I should have to do this.
>
> --
> Buck Golemon
> AIM: bukzor
> Cell: (480) 272-1153
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>
>
From graham.dumpleton at gmail.com  Mon Jul 14 20:22:29 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Mon Jul 14 20:22:45 2008
Subject: [mod_python] processing of post parameters
In-Reply-To: <2613171a0807141155i77f940e4raafae4b25a51d2eb@mail.gmail.com>
References: <2613171a0807141154v421a6d7ai2896131e1847c1c7@mail.gmail.com>
	<2613171a0807141155i77f940e4raafae4b25a51d2eb@mail.gmail.com>
Message-ID: <88e286470807141722t7cd45f65n19f69594dfe0b01e@mail.gmail.com>

For mod_python, read documentation for FieldStorage in mod_python
documentation, or use mod_python.publisher which will handle decoding
POST parameters for you.

BTW, why do you post in parallel to mod_wsgi and mod_python lists the
same question. Which are you actually using?

Graham

2008/7/15 bharath venkatesh <bharathv6.project@gmail.com>:
>
>
> ---------- Forwarded message ----------
> From: bharath venkatesh <bharathv6.project@gmail.com>
> Date: Mon, Jul 14, 2008 at 11:54 AM
> Subject: processing of post parameters
> To: modwsgi@googlegroups.com
>
>
> hi everyone,
>                  most of us know how to process get parameters . parameters
> are too big to send through get parameters . I want to send it through post
> parameters . but how to process post parameters in handlers or applications
> .. ? can any one pls help me ..
>                                    thanks
>                                                           bharath
>
>
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>
>
From graham.dumpleton at gmail.com  Mon Jul 14 20:32:39 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Mon Jul 14 20:32:43 2008
Subject: [mod_python] Bug in mod_python 3.3.1
In-Reply-To: <56176.75.145.244.105.1216069744.squirrel@webmail.neteasyinc.com>
References: <56176.75.145.244.105.1216069744.squirrel@webmail.neteasyinc.com>
Message-ID: <88e286470807141732y18144d78o1776cd8b7fe69d16@mail.gmail.com>

Could you log a report at:

  http://issues.apache.org/jira/browse/MODPYTHON

Do a cut and paste of required fix into description so people can
easily see workaround.

Thanks.

Graham

2008/7/15  <jim.nelson@neteasyinc.com>:
> I hadn't seen any information about the following bugs:
>
> http://bugs.gentoo.org/show_bug.cgi?id=230211
> http://trac.macports.org/ticket/15791
>
> I ran into this trying to get mod_python set up on my Mac running OSX
> 10.5.  They're saying it's an upstream bug.
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>
From rahul.warhekar at edisphere.com  Tue Jul 15 07:38:16 2008
From: rahul.warhekar at edisphere.com (rahul)
Date: Tue Jul 15 07:43:00 2008
Subject: [mod_python] Regarding SAAS developement
Message-ID: <20080715114144.180A76A45C3@server1.edisphere.com>

Hello all,

I am trying to build framework for SAAS Development for our product and for
that 

I am considering python as a scripting lang.



So, I would like to know from all of you whether python is suitable for SAAS
development.

If yes please add why?

If no please add why?

 

Thanks 

 

Rahul

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080715/28f2082a/attachment.html
From graham.dumpleton at gmail.com  Tue Jul 15 08:28:31 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Tue Jul 15 08:28:36 2008
Subject: [mod_python] ImportError: No module named
	_mp_6a56a751b58d143e34982c81384539ef
In-Reply-To: <c70f1ac50807142350l277785e0o4ddf05d2b729908b@mail.gmail.com>
References: <c70f1ac50807141052m7cd2263id0fc63cd6c5d3c9a@mail.gmail.com>
	<88e286470807141709p2c4ca9e6hb56dcb01848cd51f@mail.gmail.com>
	<c70f1ac50807142350l277785e0o4ddf05d2b729908b@mail.gmail.com>
Message-ID: <88e286470807150528p6adb612y69b6adbee298c0dd@mail.gmail.com>

2008/7/15 Buck Golemon <workitharder@gmail.com>:
> That's a real bummer. Is there any plan to remove this limitation?

No.

> Where did this module _mp_1234567 come from?

It is a value generated from the absolute pathname to the code file
for the module. This magic value is used to allow same handler code
file name to be used in different directories.

In other words, it is this way to get around the limitation in Python
that module names have to be unique.

I don't understand why this is a problem. Just put your code where
classes are that need pickling into a separate module and install that
into a directory on your sys.path and import it like a normal Python
module. That or don't use complex types, which aren't recommended as a
good idea, within a session dictionary.

Graham

> On Mon, Jul 14, 2008 at 5:09 PM, Graham Dumpleton
> <graham.dumpleton@gmail.com> wrote:
>>
>> Read:
>>
>>  http://www.dscpl.com.au/wiki/ModPython/Articles/IssuesWithSessionObjects
>>
>> You can't pickle objects which are contained in code files managed by
>> mod_python module importer.
>>
>> Graham
>>
>> 2008/7/15 Buck Golemon <workitharder@gmail.com>:
>> > I had to manually alter my class's __module__ attribute to get it to
>> > unpickle successfully.
>> >
>> >>>> print MyClass.__module__
>> > _mp_6a56a751b58d143e34982c81384539ef
>> >>>> MyClass.__module__ = "myscript"
>> >
>> > This solved my problem, but is there something I'm doing wrong? It
>> > doesn't
>> > seem like I should have to do this.
From graham.dumpleton at gmail.com  Tue Jul 15 08:52:38 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Tue Jul 15 08:52:46 2008
Subject: [mod_python] Regarding SAAS developement
In-Reply-To: <20080715114144.180A76A45C3@server1.edisphere.com>
References: <20080715114144.180A76A45C3@server1.edisphere.com>
Message-ID: <88e286470807150552q48fa7e16o4d4c9b49757fbc26@mail.gmail.com>

What do you mean by SAAS? Do you mean:

  http://en.wikipedia.org/wiki/Software_as_a_Service

You will have to be more precise about the sort of applications you
are trying to make.

Graham

2008/7/15 rahul <rahul.warhekar@edisphere.com>:
> Hello all,
>
> I am trying to build framework for SAAS Development for our product and for
> that
>
> I am considering python as a scripting lang.
>
> So, I would like to know from all of you whether python is suitable for SAAS
> development.
>
> If yes please add why?
>
> If no please add why?
>
>
>
> Thanks
>
>
>
> Rahul
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>
>
From graham.dumpleton at gmail.com  Tue Jul 15 09:36:35 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Tue Jul 15 09:36:38 2008
Subject: [mod_python] Bug in mod_python 3.3.1
In-Reply-To: <88e286470807141732y18144d78o1776cd8b7fe69d16@mail.gmail.com>
References: <56176.75.145.244.105.1216069744.squirrel@webmail.neteasyinc.com>
	<88e286470807141732y18144d78o1776cd8b7fe69d16@mail.gmail.com>
Message-ID: <88e286470807150636y70bbf377k79e806ab7dd796f@mail.gmail.com>

Thanks. See that JIRA issue is done. Have fixed it in subversion
repository trunk.

  https://issues.apache.org/jira/browse/MODPYTHON-249

Graham

2008/7/15 Graham Dumpleton <graham.dumpleton@gmail.com>:
> Could you log a report at:
>
>  http://issues.apache.org/jira/browse/MODPYTHON
>
> Do a cut and paste of required fix into description so people can
> easily see workaround.
>
> Thanks.
>
> Graham
>
> 2008/7/15  <jim.nelson@neteasyinc.com>:
>> I hadn't seen any information about the following bugs:
>>
>> http://bugs.gentoo.org/show_bug.cgi?id=230211
>> http://trac.macports.org/ticket/15791
>>
>> I ran into this trying to get mod_python set up on my Mac running OSX
>> 10.5.  They're saying it's an upstream bug.
>>
>> _______________________________________________
>> Mod_python mailing list
>> Mod_python@modpython.org
>> http://mailman.modpython.org/mailman/listinfo/mod_python
>>
>
From rahul.warhekar at edisphere.com  Wed Jul 16 00:27:47 2008
From: rahul.warhekar at edisphere.com (rahul)
Date: Wed Jul 16 00:32:34 2008
Subject: [mod_python] Regarding SAAS developement
In-Reply-To: <88e286470807150552q48fa7e16o4d4c9b49757fbc26@mail.gmail.com>
Message-ID: <20080716043115.D68B66A458F@server1.edisphere.com>


Hello,

SAAS means Software as a Service.
To be more precise I would like to know whether python is fully supported to
my requirements of SAAS development (as means: Multi-tenancy, Security,
features for GUI design, etc.....).

Thanks
Rahul
-----Original Message-----
From: Graham Dumpleton [mailto:graham.dumpleton@gmail.com] 
Sent: Tuesday, July 15, 2008 6:23 PM
To: rahul
Cc: mod_python@modpython.org
Subject: Re: [mod_python] Regarding SAAS developement

What do you mean by SAAS? Do you mean:

  http://en.wikipedia.org/wiki/Software_as_a_Service

You will have to be more precise about the sort of applications you
are trying to make.

Graham

2008/7/15 rahul <rahul.warhekar@edisphere.com>:
> Hello all,
>
> I am trying to build framework for SAAS Development for our product and
for
> that
>
> I am considering python as a scripting lang.
>
> So, I would like to know from all of you whether python is suitable for
SAAS
> development.
>
> If yes please add why?
>
> If no please add why?
>
>
>
> Thanks
>
>
>
> Rahul
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>
>

From rahul.warhekar at edisphere.com  Wed Jul 16 02:52:17 2008
From: rahul.warhekar at edisphere.com (rahul)
Date: Wed Jul 16 02:56:59 2008
Subject: [mod_python] regarding SAAS
Message-ID: <20080716065545.56DEC6A4593@server1.edisphere.com>

Hello,

 

SAAS means Software as a Service.

To be more precise I would like to know whether python is fully supported to
my requirements of SAAS development (as means: Multi-tenancy, Security,
features for GUI design, etc.....).

 

Thanks

Rahul

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080716/3b0457ff/attachment.html
From haeusler at fotofinder.de  Wed Jul 16 03:09:57 2008
From: haeusler at fotofinder.de (=?ISO-8859-1?Q?Kurt_H=E4usler?=)
Date: Wed Jul 16 03:10:35 2008
Subject: X-IMailSpam-DBL  RE: [mod_python] Regarding SAAS developement
In-Reply-To: <20080716043115.D68B66A458F@server1.edisphere.com>
References: <20080716043115.D68B66A458F@server1.edisphere.com>
Message-ID: <487D9EC5.2090105@fotofinder.de>

Write a small test program (you could write a unit test demonstrating 
each requirement for example) and find out, I mean who would use any 
technology without actually evaluating it first.
You wont get the right answers to such a broad question on a mailing list.

rahul wrote:
> Hello,
>
> SAAS means Software as a Service.
> To be more precise I would like to know whether python is fully supported to
> my requirements of SAAS development (as means: Multi-tenancy, Security,
> features for GUI design, etc.....).
>
>   
____________
Virus checked by G DATA AntiVirus
Version: AVKA 18.328 from 15.07.2008
Virus news: www.antiviruslab.com


From rahul.warhekar at edisphere.com  Wed Jul 16 03:11:32 2008
From: rahul.warhekar at edisphere.com (rahul)
Date: Wed Jul 16 03:16:16 2008
Subject: [mod_python] SAAS help
Message-ID: <20080716071500.1C90B6A4581@server1.edisphere.com>

Hello all,

 

If anybody knows any product , company, or project which uses python for its
SAAS development.

 

Thanks

Rahul

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080716/931041ff/attachment.html
From scarfboy at gmail.com  Wed Jul 16 05:02:51 2008
From: scarfboy at gmail.com (Bart)
Date: Wed Jul 16 05:02:54 2008
Subject: [mod_python] Regarding SAAS developement
In-Reply-To: <20080716043115.D68B66A458F@server1.edisphere.com>
References: <88e286470807150552q48fa7e16o4d4c9b49757fbc26@mail.gmail.com>
	<20080716043115.D68B66A458F@server1.edisphere.com>
Message-ID: <b71082d80807160202j74f4eb7dyc0f11585d3f02547@mail.gmail.com>

On Wed, Jul 16, 2008 at 6:27 AM, rahul <rahul.warhekar@edisphere.com> wrote:
>
> Hello,
>
> SAAS means Software as a Service.
> To be more precise I would like to know whether python is fully supported to
> my requirements of SAAS development (as means: Multi-tenancy, Security,
> features for GUI design, etc.....).

Supported/suitable how? SaaS seems more of a business model than a
software model. Building a service securely and multi-tenant style can
be done in any decent language - the language itself has fairly little
to do with it.

To me, the more interesting details would be scalability implications
of servers/frameworks, ease of speedy prototyping/coding (which is one
of the reasons I currently use python a bunch), and library
availability for given goals.

Things like GUI design is often entirely unrelated to the language too
- even when there is a GUI toolkit in the standard library, it tends
to make some quite specific design choices that some people will
always disagree with. In reality, people will often make GUI design
decisions often come down to personal comfort of a particular
style/specific library/framework's way of doing it. If GUIs are
central to your business, you should probably have some good
discussion of how and in what you want to develop them; some platforms
make creating some (often specific) types/complexities of GUI a lot
simpler, but it also depends on your goals, coders, and such.

If you mean to compare and contrast, we can't really say until you
give us some aspect to comment on :)

Regards,
--Bart
From rahul.warhekar at edisphere.com  Wed Jul 16 05:17:07 2008
From: rahul.warhekar at edisphere.com (rahul)
Date: Wed Jul 16 05:21:56 2008
Subject: [mod_python] Regarding SAAS developement
In-Reply-To: <b71082d80807160202j74f4eb7dyc0f11585d3f02547@mail.gmail.com>
Message-ID: <20080716092035.D5DE26A4581@server1.edisphere.com>

 

If you mean to compare and contrast, we can't really say until you

give us some aspect to comment on :)

 

In that case I want to compare python & java.

And also I would like to know more about "framework related to Service
Oriented Architecture."

-----Original Message-----
From: mod_python-bounces@modpython.org
[mailto:mod_python-bounces@modpython.org] On Behalf Of Bart
Sent: Wednesday, July 16, 2008 2:33 PM
To: mod_python@modpython.org
Subject: Re: [mod_python] Regarding SAAS developement

 

On Wed, Jul 16, 2008 at 6:27 AM, rahul <rahul.warhekar@edisphere.com> wrote:

> 

> Hello,

> 

> SAAS means Software as a Service.

> To be more precise I would like to know whether python is fully supported
to

> my requirements of SAAS development (as means: Multi-tenancy, Security,

> features for GUI design, etc.....).

 

Supported/suitable how? SaaS seems more of a business model than a

software model. Building a service securely and multi-tenant style can

be done in any decent language - the language itself has fairly little

to do with it.

 

To me, the more interesting details would be scalability implications

of servers/frameworks, ease of speedy prototyping/coding (which is one

of the reasons I currently use python a bunch), and library

availability for given goals.

 

Things like GUI design is often entirely unrelated to the language too

- even when there is a GUI toolkit in the standard library, it tends

to make some quite specific design choices that some people will

always disagree with. In reality, people will often make GUI design

decisions often come down to personal comfort of a particular

style/specific library/framework's way of doing it. If GUIs are

central to your business, you should probably have some good

discussion of how and in what you want to develop them; some platforms

make creating some (often specific) types/complexities of GUI a lot

simpler, but it also depends on your goals, coders, and such.

 

If you mean to compare and contrast, we can't really say until you

give us some aspect to comment on :)

 

Regards,

--Bart

_______________________________________________

Mod_python mailing list

Mod_python@modpython.org

http://mailman.modpython.org/mailman/listinfo/mod_python

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080716/b882e741/attachment-0001.html
From scarfboy at gmail.com  Wed Jul 16 05:55:32 2008
From: scarfboy at gmail.com (Bart)
Date: Wed Jul 16 05:55:38 2008
Subject: [mod_python] Regarding SAAS developement
In-Reply-To: <20080716092035.D5DE26A4581@server1.edisphere.com>
References: <b71082d80807160202j74f4eb7dyc0f11585d3f02547@mail.gmail.com>
	<20080716092035.D5DE26A4581@server1.edisphere.com>
Message-ID: <b71082d80807160255t527f8abfg91dad4a23c059842@mail.gmail.com>

On Wed, Jul 16, 2008 at 11:17 AM, rahul <rahul.warhekar@edisphere.com> wrote:
>
>
> If you mean to compare and contrast, we can't really say until you
> give us some aspect to comment on :)
>
>
> In that case I want to compare python & java.

You're still not saying how they should be compared. Programming
language choice generally doesn't matter, since good coders can write
good code in any decent language. While Java is not my favourite (and
not as hip as it used to be), it does fall into the decent category.

Language choice usually introduces relatively few constraints, say,
implications in your ability to find coders that are already
comfortable and/or able with the given language, general ease of
coding (python codes easier/faster than, say, C), ease of organization
(e.g. PHP gets messy fast), the availability of specific libraries
that allow rapid development of specific types of software, perhaps
the ease of finding (cheap) hosting online, and perhaps the ease with
which you can interact with other software, but that's all so general
that it comparisons still mostly depend on what you actually want to
do...


> And also I would like to know more about "framework related to Service
> Oriented Architecture."
Looks like another business model (-based architecture, somewhat).
Read wikipedia? Buy a book on it? I'm a coder, not a manager :)

Regards,
--Bart
From graham.dumpleton at gmail.com  Wed Jul 16 21:30:53 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Wed Jul 16 21:30:58 2008
Subject: [mod_python] SAAS help
In-Reply-To: <20080716071500.1C90B6A4581@server1.edisphere.com>
References: <20080716071500.1C90B6A4581@server1.edisphere.com>
Message-ID: <88e286470807161830i1ebe1fd6t1a20298bd1cd679f@mail.gmail.com>

2008/7/16 rahul <rahul.warhekar@edisphere.com>:
> Hello all,
>
>
>
> If anybody knows any product , company, or project which uses python for its
> SAAS development.

For a more general question like this, you may be better off asking on:

  http://groups.google.com/group/comp.lang.python/topics?hl=en

Graham
From graham.dumpleton at gmail.com  Wed Jul 16 21:40:23 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Wed Jul 16 21:40:28 2008
Subject: [mod_python] Re: Chunked request content patch
In-Reply-To: <487D8918.902@gmail.com>
References: <48761DD1.4050309@gmail.com>
	<88e286470807131832k2cf7ca08vf6592d5e0f152b66@mail.gmail.com>
	<487D8918.902@gmail.com>
Message-ID: <88e286470807161840n6000aac9s2a7a505b77dba793@mail.gmail.com>

Thanks for adding the patches.

If I ever get a chance, I'll compare your patches against completely
rewritten equivalent code I have in mod_wsgi and see how they compare
as far as satisfying the required functionality. Although, the
mod_wsgi code doesn't attempt to handled chunked as WSGI specification
doesn't allow it.

Graham

2008/7/16 Alex Cichowski <alex.cichowski@gmail.com>:
> OK, I have added the patch under MODPYTHON-222 (chunked requests) and
> referenced it under the others.
>
> For 234 (read() SystemError), if Matthew Woodcraft is correct about the
> unchecked call to ap_get_client_block() being the problem, then yes this
> patch will fix it.
>
> The original patch did not address 211 (readlines() leak), but for
> completeness I have added a rewrite of readlines() that is more rigorous in
> its error handling and memory management to the patch in JIRA.
>
> The revised patch also includes a new function, read_partial(), which
> attempts to ensure that it has returned all buffered data before blocking,
> by returning less than the requested amount where necessary. This is helpful
> to avoid deadlock when you would like to have the server read and respond to
> the first part of the client's request before the client sends the second
> part. I don't know whether it is strictly valid to use HTTP in this way or
> not, but I think it's nice to have this feature available anyway.
>
> Alex
>
>
>
> Graham Dumpleton wrote:
>>
>> Can you possibly add the suggested patches against the issues in JIRA,
>> otherwise they will get lost in the mailing list.
>>
>> Does, your suggested patches address:
>>
>>  http://issues.apache.org/jira/browse/MODPYTHON-234
>>
>>  http://issues.apache.org/jira/browse/MODPYTHON-211
>>
>> Graham
>>
>
>
From David_Greenberg at ltx.com  Thu Jul 17 11:09:40 2008
From: David_Greenberg at ltx.com (David_Greenberg@ltx.com)
Date: Thu Jul 17 11:09:46 2008
Subject: [mod_python] Compiling on Solaris 8
Message-ID: <OF0CAA07B8.78B525FC-ON85257489.00529C92-85257489.00534948@ltx.com>

Hi,

I am having trouble compiling mod_python on Solaris 8.  I see other people 
have had the error in the past, but I have not seen any solution that does 
not involve recompiling Python (not an option for me).  The error is as 
follows:

/usr/local/apache2/build/libtool --silent --mode=link gcc -o mod_python.la 
 -rpath /usr/local/apache2/modules -module -avoid-version finfoobject.lo 
hlistobject.lo hlist.lo filterobject.lo connobject.lo serverobject.lo 
util.lo tableobject.lo requestobject.lo _apachemodule.lo mod_python.lo 
-L/usr/local/lib/python2.5/config -L/usr/local/lib -R/usr/local/lib 
-R/usr/lib -L/usr/lib -R/usr/openwin/lib -L/usr/openwin/lib 
-L/usr/local/ssl/lib -R/usr/local/ssl/lib -L/usr/local/BerkeleyDB.4.2/lib 
-R/usr/local/BerkeleyDB.4.2/lib -L/usr/openwin/lib -R/usr/openwin/lib -lm 
-lpython2.5 -lresolv -lsocket -lnsl -lrt -ldl -lpthread -lm _eprintf.o 
_floatdidf.o _muldi3.o

*** Warning: Linking the shared library mod_python.la against the 
non-libtool
*** objects  _eprintf.o _floatdidf.o _muldi3.o is not portable!
Text relocation remains                         referenced
    against symbol                  offset      in file
<unknown>                           0x1030 
/usr/local/lib/python2.5/config/libpython2.5.a(floatobject.o)
<unknown>                           0x1034 
/usr/local/lib/python2.5/config/libpython2.5.a(floatobject.o)
...
...
...
clock                               0x2a4 
/usr/local/lib/python2.5/config/libpython2.5.a(xxsubtype.o)
utime                               0x158c 
/usr/local/lib/python2.5/config/libpython2.5.a(posixmodule.o)
ld: fatal: relocations remain against allocatable but non-writable 
sections
collect2: ld returned 1 exit status
apxs:Error: Command failed with rc=65536
.
make[1]: *** [mod_python.so] Error 1
make[1]: Leaving directory `/software/tmp/mod_python-3.3.1/src'
make: *** [do_dso] Error 2


The environment is as follows:
Solaris 8
mod_python 3.3.1 source
GCC 3.4.6 (from sunfreeware.com)
Apache 2.2.6 (from sunfreeware.com)
Python 2.5.1 (from sunfreeware.com)
Flex 2.5.31 (from sunfreeware.com)

I ran the following to compile:
./configure --with-apxs=/usr/local/apache2/bin/apxs --prefix=/usr/local
make

Does anyone have any ideas?  Is there a pre-compiled package somewhere for 
Solaris 8 that would work with my configuration?

Thank you,
David
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080717/45aea58c/attachment.html
From graham.dumpleton at gmail.com  Thu Jul 17 21:51:40 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Thu Jul 17 21:51:43 2008
Subject: [mod_python] Compiling on Solaris 8
In-Reply-To: <OF0CAA07B8.78B525FC-ON85257489.00529C92-85257489.00534948@ltx.com>
References: <OF0CAA07B8.78B525FC-ON85257489.00529C92-85257489.00534948@ltx.com>
Message-ID: <88e286470807171851k7f257814n971b0c4ef303d0cb@mail.gmail.com>

Hmmm, you do realise that Solaris 8 is really old.

Anyway, to start with, you need to compile and install Python with
support for shared libraries. Thus, use --enable-shared option when
running configure for Python and installing it. You will also need to
do a fiddle to get resultant .so appear in correct location. See
section 'Lack Of Python Shared Library' of:

  http://code.google.com/p/modwsgi/wiki/InstallationIssues

That documentation is for mod_wsgi, but same issues apply.

Alternatively, you may find solution described in:

  http://code.google.com/p/modwsgi/wiki/InstallationOnSolaris

works.

Again for mod_wsgi and not mod_python, but can still apply. You will
just need to find where in src/Makefile to add that option.

Graham

2008/7/18  <David_Greenberg@ltx.com>:
>
> Hi,
>
> I am having trouble compiling mod_python on Solaris 8.  I see other people
> have had the error in the past, but I have not seen any solution that does
> not involve recompiling Python (not an option for me).  The error is as
> follows:
>
> /usr/local/apache2/build/libtool --silent --mode=link gcc -o mod_python.la
>  -rpath /usr/local/apache2/modules -module -avoid-version    finfoobject.lo
> hlistobject.lo hlist.lo filterobject.lo connobject.lo serverobject.lo
> util.lo tableobject.lo requestobject.lo _apachemodule.lo mod_python.lo
> -L/usr/local/lib/python2.5/config -L/usr/local/lib -R/usr/local/lib
> -R/usr/lib -L/usr/lib -R/usr/openwin/lib -L/usr/openwin/lib
> -L/usr/local/ssl/lib -R/usr/local/ssl/lib -L/usr/local/BerkeleyDB.4.2/lib
> -R/usr/local/BerkeleyDB.4.2/lib -L/usr/openwin/lib -R/usr/openwin/lib -lm
> -lpython2.5 -lresolv -lsocket -lnsl -lrt -ldl -lpthread -lm _eprintf.o
> _floatdidf.o _muldi3.o
>
> *** Warning: Linking the shared library mod_python.la against the
> non-libtool
> *** objects  _eprintf.o _floatdidf.o _muldi3.o is not portable!
> Text relocation remains                         referenced
>     against symbol                  offset      in file
> <unknown>                           0x1030
>  /usr/local/lib/python2.5/config/libpython2.5.a(floatobject.o)
> <unknown>                           0x1034
>  /usr/local/lib/python2.5/config/libpython2.5.a(floatobject.o)
> ...
> ...
> ...
> clock                               0x2a4
> /usr/local/lib/python2.5/config/libpython2.5.a(xxsubtype.o)
> utime                               0x158c
>  /usr/local/lib/python2.5/config/libpython2.5.a(posixmodule.o)
> ld: fatal: relocations remain against allocatable but non-writable sections
> collect2: ld returned 1 exit status
> apxs:Error: Command failed with rc=65536
> .
> make[1]: *** [mod_python.so] Error 1
> make[1]: Leaving directory `/software/tmp/mod_python-3.3.1/src'
> make: *** [do_dso] Error 2
>
>
> The environment is as follows:
> Solaris 8
> mod_python 3.3.1 source
> GCC 3.4.6 (from sunfreeware.com)
> Apache 2.2.6 (from sunfreeware.com)
> Python 2.5.1 (from sunfreeware.com)
> Flex 2.5.31 (from sunfreeware.com)
>
> I ran the following to compile:
> ./configure --with-apxs=/usr/local/apache2/bin/apxs --prefix=/usr/local
> make
>
> Does anyone have any ideas?  Is there a pre-compiled package somewhere for
> Solaris 8 that would work with my configuration?
>
> Thank you,
> David
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>
>
From badmephisto at gmail.com  Sun Jul 20 21:10:34 2008
From: badmephisto at gmail.com (Mephisto)
Date: Sun Jul 20 21:10:40 2008
Subject: [mod_python] global variables are not made global?
Message-ID: <31373b2b0807201810r6f6938a4w8c01bb6c0cc6dbf6@mail.gmail.com>

Hi, I have been trying to fix this for a while, but I cant seem to do it:

essentially this is my code:

in my main .py file that handles requests:
from otherfile import othermethod
def handler():
global a
a=5
othermethod()

in otherfile:
def othermethod()
   #in this method, the value of a is not defined, even though i made it
global!

even though it says in the documentation that global data is normally
retained and handled. And all of the previous code runs within the same
request... am i doing something wrong? or not doing something?
thank you
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080720/30d99f66/attachment.html
From graham.dumpleton at gmail.com  Sun Jul 20 21:54:29 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Sun Jul 20 21:54:32 2008
Subject: [mod_python] global variables are not made global?
In-Reply-To: <31373b2b0807201810r6f6938a4w8c01bb6c0cc6dbf6@mail.gmail.com>
References: <31373b2b0807201810r6f6938a4w8c01bb6c0cc6dbf6@mail.gmail.com>
Message-ID: <88e286470807201854w8c6559cyf6fa4feb757f8efd@mail.gmail.com>

2008/7/21 Mephisto <badmephisto@gmail.com>:
> Hi, I have been trying to fix this for a while, but I cant seem to do it:
>
> essentially this is my code:
>
> in my main .py file that handles requests:
> from otherfile import othermethod
> def handler():
> global a
> a=5
> othermethod()
>
> in otherfile:
> def othermethod()
>    #in this method, the value of a is not defined, even though i made it
> global!
>
> even though it says in the documentation that global data is normally
> retained and handled. And all of the previous code runs within the same
> request... am i doing something wrong? or not doing something?
> thank you

Read:

  http://www.dscpl.com.au/wiki/ModPython/Articles/TheProcessInterpreterModel

Apache is a multiprocess web server (except on Windows), thus
subsequent requests will not necessarily be handled by the same
process.

It is not clear from your example whether you are talking about data
persisting across requests, or whether you are talking about data seen
by other modules imported as part of same request.

BTW, relying on globals is also dangerous for configurations where
Apache is running multithreaded.

That document summaries issues about global data and persistence at the end.

Graham
From graham.dumpleton at gmail.com  Sun Jul 20 22:06:58 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Sun Jul 20 22:07:00 2008
Subject: [mod_python] Dropping of support for non threaded Python.
Message-ID: <88e286470807201906q306fb72ft736dcd24ea220e86@mail.gmail.com>

For reasons unknown, I am having a go at fixing:

  http://issues.apache.org/jira/browse/MODPYTHON-217
  http://issues.apache.org/jira/browse/MODPYTHON-177

One of the problems in making these changes and in the maintainability
of the mod_python code base is that it still tries to support a Python
installation that has deliberately not had thread support built in.

>From what I have seen it has now been many years since any
distribution has deliberately disabled threading in Python. Last
platform to do it were some of the BSD platforms, but these days they
build with threaded Python as far as I know.

Consequently, I would like to drop the code which supports a non
threaded Python installation. This would get rid of a whole bunch of
#if conditionals and code variants and make making changes to Python a
lot easier. As is, don't know that the unthreaded code has even been
tested for a release since 3.1.X days and thus it may not even work
anyway.

Because of this and nature of changes being made, would also like to
bump version for mod_python in subversion up to 3.4.X as it isn't
going to be a trivial bug fix relative to 3.3.1.

Comments.

Graham
From badmephisto at gmail.com  Sun Jul 20 22:41:05 2008
From: badmephisto at gmail.com (Mephisto)
Date: Sun Jul 20 22:41:10 2008
Subject: [mod_python] global variables are not made global?
In-Reply-To: <88e286470807201854w8c6559cyf6fa4feb757f8efd@mail.gmail.com>
References: <31373b2b0807201810r6f6938a4w8c01bb6c0cc6dbf6@mail.gmail.com>
	<88e286470807201854w8c6559cyf6fa4feb757f8efd@mail.gmail.com>
Message-ID: <31373b2b0807201941l4f27a022w8ec41f2d3f3ab9b7@mail.gmail.com>

Hi, thank you fro your reply. I should have been a little clearer. I am
running Windows XP and the entire code is processed within one single
request, so I don't see how the problems with different interpreters should
affect me. Is there something else that I could try?

On Sun, Jul 20, 2008 at 9:54 PM, Graham Dumpleton <
graham.dumpleton@gmail.com> wrote:

> 2008/7/21 Mephisto <badmephisto@gmail.com>:
> > Hi, I have been trying to fix this for a while, but I cant seem to do it:
> >
> > essentially this is my code:
> >
> > in my main .py file that handles requests:
> > from otherfile import othermethod
> > def handler():
> > global a
> > a=5
> > othermethod()
> >
> > in otherfile:
> > def othermethod()
> >    #in this method, the value of a is not defined, even though i made it
> > global!
> >
> > even though it says in the documentation that global data is normally
> > retained and handled. And all of the previous code runs within the same
> > request... am i doing something wrong? or not doing something?
> > thank you
>
> Read:
>
>
> http://www.dscpl.com.au/wiki/ModPython/Articles/TheProcessInterpreterModel
>
> Apache is a multiprocess web server (except on Windows), thus
> subsequent requests will not necessarily be handled by the same
> process.
>
> It is not clear from your example whether you are talking about data
> persisting across requests, or whether you are talking about data seen
> by other modules imported as part of same request.
>
> BTW, relying on globals is also dangerous for configurations where
> Apache is running multithreaded.
>
> That document summaries issues about global data and persistence at the
> end.
>
> Graham
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080720/9643b4c5/attachment.html
From graham.dumpleton at gmail.com  Sun Jul 20 22:44:43 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Sun Jul 20 22:44:45 2008
Subject: [mod_python] global variables are not made global?
In-Reply-To: <31373b2b0807201941l4f27a022w8ec41f2d3f3ab9b7@mail.gmail.com>
References: <31373b2b0807201810r6f6938a4w8c01bb6c0cc6dbf6@mail.gmail.com>
	<88e286470807201854w8c6559cyf6fa4feb757f8efd@mail.gmail.com>
	<31373b2b0807201941l4f27a022w8ec41f2d3f3ab9b7@mail.gmail.com>
Message-ID: <88e286470807201944q26553830v3a0af6cdfc2701f9@mail.gmail.com>

I assume that in the second file you are at least doing:

  import main

and then referencing 'a' as 'main.a' in the code.

I was assuming that you were getting this most fundamental concept of
Python correct.

You should really post a complete (but small) example of real code
that shows your problem.

Graham

2008/7/21 Mephisto <badmephisto@gmail.com>:
> Hi, thank you fro your reply. I should have been a little clearer. I am
> running Windows XP and the entire code is processed within one single
> request, so I don't see how the problems with different interpreters should
> affect me. Is there something else that I could try?
>
> On Sun, Jul 20, 2008 at 9:54 PM, Graham Dumpleton
> <graham.dumpleton@gmail.com> wrote:
>>
>> 2008/7/21 Mephisto <badmephisto@gmail.com>:
>> > Hi, I have been trying to fix this for a while, but I cant seem to do
>> > it:
>> >
>> > essentially this is my code:
>> >
>> > in my main .py file that handles requests:
>> > from otherfile import othermethod
>> > def handler():
>> > global a
>> > a=5
>> > othermethod()
>> >
>> > in otherfile:
>> > def othermethod()
>> >    #in this method, the value of a is not defined, even though i made it
>> > global!
>> >
>> > even though it says in the documentation that global data is normally
>> > retained and handled. And all of the previous code runs within the same
>> > request... am i doing something wrong? or not doing something?
>> > thank you
>>
>> Read:
>>
>>
>>  http://www.dscpl.com.au/wiki/ModPython/Articles/TheProcessInterpreterModel
>>
>> Apache is a multiprocess web server (except on Windows), thus
>> subsequent requests will not necessarily be handled by the same
>> process.
>>
>> It is not clear from your example whether you are talking about data
>> persisting across requests, or whether you are talking about data seen
>> by other modules imported as part of same request.
>>
>> BTW, relying on globals is also dangerous for configurations where
>> Apache is running multithreaded.
>>
>> That document summaries issues about global data and persistence at the
>> end.
>>
>> Graham
>
>
From badmephisto at gmail.com  Mon Jul 21 01:51:01 2008
From: badmephisto at gmail.com (Mephisto)
Date: Mon Jul 21 01:51:09 2008
Subject: [mod_python] global variables are not made global?
In-Reply-To: <88e286470807201944q26553830v3a0af6cdfc2701f9@mail.gmail.com>
References: <31373b2b0807201810r6f6938a4w8c01bb6c0cc6dbf6@mail.gmail.com>
	<88e286470807201854w8c6559cyf6fa4feb757f8efd@mail.gmail.com>
	<31373b2b0807201941l4f27a022w8ec41f2d3f3ab9b7@mail.gmail.com>
	<88e286470807201944q26553830v3a0af6cdfc2701f9@mail.gmail.com>
Message-ID: <31373b2b0807202251m532757e5wb71a33e69ba7fda0@mail.gmail.com>

i'm so embarrassed, i cant write python I'm sorry. I made sure that I knew
how to do imports before I emailed here, but actually when i tried it i did
it just like you, with main.a and import main. However in my actual code for
mod_python I do from main import *, and then i tried to refer to a, just
normally without any prefix like in main.a. And it turns out that you cant
do that, it won't work. Sorry about that. Thank you very much for your help.

On Sun, Jul 20, 2008 at 10:44 PM, Graham Dumpleton <
graham.dumpleton@gmail.com> wrote:

> I assume that in the second file you are at least doing:
>
>  import main
>
> and then referencing 'a' as 'main.a' in the code.
>
> I was assuming that you were getting this most fundamental concept of
> Python correct.
>
> You should really post a complete (but small) example of real code
> that shows your problem.
>
> Graham
>
> 2008/7/21 Mephisto <badmephisto@gmail.com>:
> > Hi, thank you fro your reply. I should have been a little clearer. I am
> > running Windows XP and the entire code is processed within one single
> > request, so I don't see how the problems with different interpreters
> should
> > affect me. Is there something else that I could try?
> >
> > On Sun, Jul 20, 2008 at 9:54 PM, Graham Dumpleton
> > <graham.dumpleton@gmail.com> wrote:
> >>
> >> 2008/7/21 Mephisto <badmephisto@gmail.com>:
> >> > Hi, I have been trying to fix this for a while, but I cant seem to do
> >> > it:
> >> >
> >> > essentially this is my code:
> >> >
> >> > in my main .py file that handles requests:
> >> > from otherfile import othermethod
> >> > def handler():
> >> > global a
> >> > a=5
> >> > othermethod()
> >> >
> >> > in otherfile:
> >> > def othermethod()
> >> >    #in this method, the value of a is not defined, even though i made
> it
> >> > global!
> >> >
> >> > even though it says in the documentation that global data is normally
> >> > retained and handled. And all of the previous code runs within the
> same
> >> > request... am i doing something wrong? or not doing something?
> >> > thank you
> >>
> >> Read:
> >>
> >>
> >>
> http://www.dscpl.com.au/wiki/ModPython/Articles/TheProcessInterpreterModel
> >>
> >> Apache is a multiprocess web server (except on Windows), thus
> >> subsequent requests will not necessarily be handled by the same
> >> process.
> >>
> >> It is not clear from your example whether you are talking about data
> >> persisting across requests, or whether you are talking about data seen
> >> by other modules imported as part of same request.
> >>
> >> BTW, relying on globals is also dangerous for configurations where
> >> Apache is running multithreaded.
> >>
> >> That document summaries issues about global data and persistence at the
> >> end.
> >>
> >> Graham
> >
> >
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080721/0281dd00/attachment-0001.html
From martijn at xs4us.nu  Mon Jul 21 09:49:05 2008
From: martijn at xs4us.nu (Martijn Moeling)
Date: Mon Jul 21 09:49:17 2008
Subject: [mod_python] Regarding SAAS developement
References: <20080716043115.D68B66A458F@server1.edisphere.com>
Message-ID: <B6C73A5E30565245BB6D32B5F5DF7A52172E16@sense.emmastraat.pijnacker>

Hi,
 
I am working on a platform which is in production for 1,5 years now.
It is growing towards an "Operating system" for SAAS development.
 
It uses Apache,MySQL, SQLAlchemy, mod_python, python and Windows.js (moving to extjs at the moment)
 
the work done with it is http://www.lokalos.nl which is a (sorry dutch) community site with an 
"WebOS" as a backoffice to give users the ability to add/change content to the site.
 
Mod_python is extremely stable when used with the above modules and in total it has been running on a webserver which is up for way over two years, without maintenance and reboots..... (I updated several parts but never ever rebooted the machine)
 
My system is build in a way that many physical systems can host one or more websites fully automatically.
 
So to answer your question YES, Mod_python is good for using it as the basis for SAAS from a technical point of view.
 
I might trow the whole system in GPL but it is not as well documented as it should be and I'm halfway the EXTJS integration so it is bit of a mess now.
The whole system consistes of Python modules and a database (no files on disk).
 
If you are starting some development for SAAS, there are a few do's and do'nts I discovered over the past few years developing with mod_python (in conjunction with MySQL). I can help you out if you wish, just drop me a message. If it is beyond the scope of Mod_python I'll leave the mailing list adress out.
 
Kind regards,
 
Martijn Moeling

 
________________________________

Van: mod_python-bounces@modpython.org namens rahul
Verzonden: wo 16.07.2008 6:27
Aan: 'Graham Dumpleton'; mod_python@modpython.org
Onderwerp: RE: [mod_python] Regarding SAAS developement




Hello,

SAAS means Software as a Service.
To be more precise I would like to know whether python is fully supported to
my requirements of SAAS development (as means: Multi-tenancy, Security,
features for GUI design, etc.....).

Thanks
Rahul
-----Original Message-----
From: Graham Dumpleton [mailto:graham.dumpleton@gmail.com]
Sent: Tuesday, July 15, 2008 6:23 PM
To: rahul
Cc: mod_python@modpython.org
Subject: Re: [mod_python] Regarding SAAS developement

What do you mean by SAAS? Do you mean:

  http://en.wikipedia.org/wiki/Software_as_a_Service

You will have to be more precise about the sort of applications you
are trying to make.

Graham

2008/7/15 rahul <rahul.warhekar@edisphere.com>:
> Hello all,
>
> I am trying to build framework for SAAS Development for our product and
for
> that
>
> I am considering python as a scripting lang.
>
> So, I would like to know from all of you whether python is suitable for
SAAS
> development.
>
> If yes please add why?
>
> If no please add why?
>
>
>
> Thanks
>
>
>
> Rahul
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>
>

_______________________________________________
Mod_python mailing list
Mod_python@modpython.org
http://mailman.modpython.org/mailman/listinfo/mod_python


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080721/8cf45e65/attachment.html
From DavidAnguloJunk at gmail.com  Mon Jul 21 13:50:36 2008
From: DavidAnguloJunk at gmail.com (David Angulo Junk)
Date: Mon Jul 21 13:50:40 2008
Subject: [mod_python] reload() change to import_module()
Message-ID: <da620fc30807211050l60b6effbk1470a3fd1425d614@mail.gmail.com>

In this setup: Apache/2.2.9 (Unix) mod_python/3.3.1 Python/2.3.4
I have code that does this:

---- start code snippet ----
from mod_python import apache


def handler(req):

    apache.import_module('my_module')
---- start code snippet ----


And I'm getting this error:

    AttributeError: 'module' object has no attribute 'input_module'


Any idea what might be wrong?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080721/23c4ebaa/attachment.html
From dylan at dylanwolf.com  Mon Jul 21 14:21:39 2008
From: dylan at dylanwolf.com (dylan@dylanwolf.com)
Date: Mon Jul 21 14:21:45 2008
Subject: [mod_python] "Method Not Implemented" on AJAX POST
Message-ID: <54677.24.183.225.115.1216664499.squirrel@dwolf.user.openhosting.com>

Sorry if this is a repeat; I tried to send email earlier without actually
being subscribed and didn't see it on the archive.

Don't know if anyone else has run across this, but I've been getting "501
Method Not Implemented" when making AJAX calls on my mod_python site. This
has mainly happened when using Firefox 3 or the newest version of
prototype (JavaScript library).

I narrowed it down to the Content-Type of the request containing the
charset. For example, "Content-type: application/x-www-form-urlencoded;
charset=utf-8" rather than just "Content-type:
application/x-www-form-urlencoded."

I'm running mod_python 3.1.4 (on OpenHosting, if that helps explain my
setup). I was able to fix the problem by changing line 112 in
mod_python/util.py from:

if ctype == "application/x-www-form-urlencoded":

to

if ctype.startswith("application/x-www-form-urlencoded"):

Has this been already fixed in a later version of mod_python? If not, I
figured it might be a good idea to post my fix.
From graham.dumpleton at gmail.com  Mon Jul 21 19:55:41 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Mon Jul 21 19:55:44 2008
Subject: [mod_python] reload() change to import_module()
In-Reply-To: <da620fc30807211050l60b6effbk1470a3fd1425d614@mail.gmail.com>
References: <da620fc30807211050l60b6effbk1470a3fd1425d614@mail.gmail.com>
Message-ID: <88e286470807211655r36af25b3iff76223b7b7d7ac1@mail.gmail.com>

2008/7/22 David Angulo Junk <DavidAnguloJunk@gmail.com>:
> In this setup: Apache/2.2.9 (Unix) mod_python/3.3.1 Python/2.3.4
> I have code that does this:
>
> ---- start code snippet ----
> from mod_python import apache
>
>
> def handler(req):
>
>     apache.import_module('my_module')
> ---- start code snippet ----
>
>
> And I'm getting this error:
>
>     AttributeError: 'module' object has no attribute 'input_module'
>
>
> Any idea what might be wrong?

Where is my_module?

If my_module in same directory, in mod_python 3.3.1 you can still say just:

  import my_module

as it does some magic to map to apache.import_module(), provided it is
actually a candidate for reloading.

If still using apache.import_module() directly, you have to assign
result to a name and reference through name.

  my_module = apache.import_module('my_module')

  my_module.input_module

You don't show all the code, so can't see how you are trying to
reference the loaded module.

Graham
From graham.dumpleton at gmail.com  Mon Jul 21 20:01:15 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Mon Jul 21 20:01:17 2008
Subject: [mod_python] "Method Not Implemented" on AJAX POST
In-Reply-To: <54677.24.183.225.115.1216664499.squirrel@dwolf.user.openhosting.com>
References: <54677.24.183.225.115.1216664499.squirrel@dwolf.user.openhosting.com>
Message-ID: <88e286470807211701n176be84cseadbec01840cd4bc@mail.gmail.com>

You are using a very old version of mod_python, newer versions I
believe do you what you expect.

        if ctype.startswith("application/x-www-form-urlencoded"):
            pairs = parse_qsl(req.read(clen), keep_blank_values)
            for pair in pairs:
                self.add_field(pair[0], pair[1])
            return

Considering that the original author of mod_python is one of the
principles involved in OpenHosting, I'd be surprised if the default
setup is still installing such an old version of mod_python.

Graham

2008/7/22  <dylan@dylanwolf.com>:
> Sorry if this is a repeat; I tried to send email earlier without actually
> being subscribed and didn't see it on the archive.
>
> Don't know if anyone else has run across this, but I've been getting "501
> Method Not Implemented" when making AJAX calls on my mod_python site. This
> has mainly happened when using Firefox 3 or the newest version of
> prototype (JavaScript library).
>
> I narrowed it down to the Content-Type of the request containing the
> charset. For example, "Content-type: application/x-www-form-urlencoded;
> charset=utf-8" rather than just "Content-type:
> application/x-www-form-urlencoded."
>
> I'm running mod_python 3.1.4 (on OpenHosting, if that helps explain my
> setup). I was able to fix the problem by changing line 112 in
> mod_python/util.py from:
>
> if ctype == "application/x-www-form-urlencoded":
>
> to
>
> if ctype.startswith("application/x-www-form-urlencoded"):
>
> Has this been already fixed in a later version of mod_python? If not, I
> figured it might be a good idea to post my fix.
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>
From grisha at apache.org  Tue Jul 22 16:11:22 2008
From: grisha at apache.org (Gregory (Grisha) Trubetskoy)
Date: Tue Jul 22 16:11:49 2008
Subject: [mod_python] Re: Dropping of support for non threaded Python.
In-Reply-To: <88e286470807201906q306fb72ft736dcd24ea220e86@mail.gmail.com>
References: <88e286470807201906q306fb72ft736dcd24ea220e86@mail.gmail.com>
Message-ID: <20080722160943.M32197@grisha.dyndns.org>


+1 on both dropping non-thread and bumping version

Grisha

On Mon, 21 Jul 2008, Graham Dumpleton wrote:

> For reasons unknown, I am having a go at fixing:
>
>  http://issues.apache.org/jira/browse/MODPYTHON-217
>  http://issues.apache.org/jira/browse/MODPYTHON-177
>
> One of the problems in making these changes and in the maintainability
> of the mod_python code base is that it still tries to support a Python
> installation that has deliberately not had thread support built in.
>
>> From what I have seen it has now been many years since any
> distribution has deliberately disabled threading in Python. Last
> platform to do it were some of the BSD platforms, but these days they
> build with threaded Python as far as I know.
>
> Consequently, I would like to drop the code which supports a non
> threaded Python installation. This would get rid of a whole bunch of
> #if conditionals and code variants and make making changes to Python a
> lot easier. As is, don't know that the unthreaded code has even been
> tested for a release since 3.1.X days and thus it may not even work
> anyway.
>
> Because of this and nature of changes being made, would also like to
> bump version for mod_python in subversion up to 3.4.X as it isn't
> going to be a trivial bug fix relative to 3.3.1.
>
> Comments.
>
> Graham
>
From jorge.de-jesus at jrc.it  Wed Jul 23 02:17:06 2008
From: jorge.de-jesus at jrc.it (Jorge de Jesus)
Date: Wed Jul 23 02:16:07 2008
Subject: [mod_python] WPS 1.0.0 problem with KVP
Message-ID: <4886CCE2.7070401@jrc.it>

Hi to all

I am programming an OGC's Web Processing Service (WPS) 1.0.0 ,  and  
this standard defines a KVP like this:

http://foo.bar/foo?
   request=Execute&
   service=WPS&
   version=1.0.0&
   language=en-CA&
   Identifier=Buffer&
   DataInputs=Object=@xlink:href=http://foo.bar/foo;BufferDistance=10&
   ResponseDocument=BufferedPolygon&
   StoreExecuteResponse=true


The DataInputs contains several inputs separated by ";" and attribute 
information separated by "@", in my case my Datainput is like this:

DataInputs=Input1=100;Input2=200

I then use util.FieldStorage(Request) to get the KVP but this class 
doesn't split the request by the & but associates the key-values with 
the  =, so in the end I will have a dictionary like this:

{'DataInputs': [Field('DataInputs', 'Input1=10'0)], 'Input2': 
[Field('Input2', '200')]}

Basically Input2=10 is recognizes as another KVP and not a value from 
DataInputs, I need something like this:

{'DataInputs': [Field('DataInputs', 'Input1=10;Input2=200')]}

I read the API documentation and I cant find a proper solution for the 
problem, maybe to use a filter with some regular expression that would 
change de = from the DataInput

Any suggestions/help

Thanks
Jorge


-- 
Ph.D. Jorge Samuel Mendes de Jesus

European Commission (EC)
Joint Research Centre Directorate (DG JRC)
Institute for Environment and Sustainability (IES)
TP 441, Via Fermi 1
21020 Ispra (VA)
Italy

Phone: +39 0332 78 3536
Fax:   +39 0332 78 5466

http://rem.jrc.cec.eu.int

"The views expressed are purely those of the writer and may not in any circumstances be regarded as stating an official position of the European Commission"

From graham.dumpleton at gmail.com  Wed Jul 23 10:31:45 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Wed Jul 23 10:31:48 2008
Subject: [mod_python] WPS 1.0.0 problem with KVP
In-Reply-To: <4886CCE2.7070401@jrc.it>
References: <4886CCE2.7070401@jrc.it>
Message-ID: <88e286470807230731h4d69fcd8ya32af3457a8d52ea@mail.gmail.com>

Have you checked the HTTP RFC for GET URLs to see if what you are
supplying is valid GET URL?

Can you supply reference to part of RFC that indicates it is.

Will save me trying to track it down. :-)

Graham

2008/7/23 Jorge de Jesus <jorge.de-jesus@jrc.it>:
> Hi to all
>
> I am programming an OGC's Web Processing Service (WPS) 1.0.0 ,  and  this
> standard defines a KVP like this:
>
> http://foo.bar/foo?
>  request=Execute&
>  service=WPS&
>  version=1.0.0&
>  language=en-CA&
>  Identifier=Buffer&
>  DataInputs=Object=@xlink:href=http://foo.bar/foo;BufferDistance=10&
>  ResponseDocument=BufferedPolygon&
>  StoreExecuteResponse=true
>
>
> The DataInputs contains several inputs separated by ";" and attribute
> information separated by "@", in my case my Datainput is like this:
>
> DataInputs=Input1=100;Input2=200
>
> I then use util.FieldStorage(Request) to get the KVP but this class doesn't
> split the request by the & but associates the key-values with the  =, so in
> the end I will have a dictionary like this:
>
> {'DataInputs': [Field('DataInputs', 'Input1=10'0)], 'Input2':
> [Field('Input2', '200')]}
>
> Basically Input2=10 is recognizes as another KVP and not a value from
> DataInputs, I need something like this:
>
> {'DataInputs': [Field('DataInputs', 'Input1=10;Input2=200')]}
>
> I read the API documentation and I cant find a proper solution for the
> problem, maybe to use a filter with some regular expression that would
> change de = from the DataInput
>
> Any suggestions/help
>
> Thanks
> Jorge
>
>
> --
> Ph.D. Jorge Samuel Mendes de Jesus
>
> European Commission (EC)
> Joint Research Centre Directorate (DG JRC)
> Institute for Environment and Sustainability (IES)
> TP 441, Via Fermi 1
> 21020 Ispra (VA)
> Italy
>
> Phone: +39 0332 78 3536
> Fax:   +39 0332 78 5466
>
> http://rem.jrc.cec.eu.int
>
> "The views expressed are purely those of the writer and may not in any
> circumstances be regarded as stating an official position of the European
> Commission"
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>
From list at joreybump.com  Wed Jul 23 11:32:13 2008
From: list at joreybump.com (Jorey Bump)
Date: Wed Jul 23 11:32:22 2008
Subject: [mod_python] WPS 1.0.0 problem with KVP
In-Reply-To: <88e286470807230731h4d69fcd8ya32af3457a8d52ea@mail.gmail.com>
References: <4886CCE2.7070401@jrc.it>
	<88e286470807230731h4d69fcd8ya32af3457a8d52ea@mail.gmail.com>
Message-ID: <48874EFD.9060103@joreybump.com>

The semicolon (";") is a reserved character in RFC 3986:

  http://tools.ietf.org/html/rfc3986#section-2.2

And the W3C recommends its use as an alternative to the ampersand ("&"):

<http://www.w3.org/TR/1999/REC-html401-19991224/appendix/notes.html#h-B.2.2>

So it looks like FieldStorage is behaving correctly.

To treat the semicolons as data in the query string, you might try 
percent-encoding them as "%3B".

  DataInputs=Input1=100;Input2=200

becomes:

  DataInputs=Input1=100%3BInput2=200

Then your application must decode the semicolons in the value returned 
for 'DataInputs' and split the key/value pairs, etc.


Graham Dumpleton wrote, at 07/23/2008 10:31 AM:
> Have you checked the HTTP RFC for GET URLs to see if what you are
> supplying is valid GET URL?
> 
> Can you supply reference to part of RFC that indicates it is.
> 
> Will save me trying to track it down. :-)
> 
> Graham
> 
> 2008/7/23 Jorge de Jesus <jorge.de-jesus@jrc.it>:
>> Hi to all
>>
>> I am programming an OGC's Web Processing Service (WPS) 1.0.0 ,  and  this
>> standard defines a KVP like this:
>>
>> http://foo.bar/foo?
>>  request=Execute&
>>  service=WPS&
>>  version=1.0.0&
>>  language=en-CA&
>>  Identifier=Buffer&
>>  DataInputs=Object=@xlink:href=http://foo.bar/foo;BufferDistance=10&
>>  ResponseDocument=BufferedPolygon&
>>  StoreExecuteResponse=true
>>
>>
>> The DataInputs contains several inputs separated by ";" and attribute
>> information separated by "@", in my case my Datainput is like this:
>>
>> DataInputs=Input1=100;Input2=200
>>
>> I then use util.FieldStorage(Request) to get the KVP but this class doesn't
>> split the request by the & but associates the key-values with the  =, so in
>> the end I will have a dictionary like this:
>>
>> {'DataInputs': [Field('DataInputs', 'Input1=10'0)], 'Input2':
>> [Field('Input2', '200')]}
>>
>> Basically Input2=10 is recognizes as another KVP and not a value from
>> DataInputs, I need something like this:
>>
>> {'DataInputs': [Field('DataInputs', 'Input1=10;Input2=200')]}
>>
>> I read the API documentation and I cant find a proper solution for the
>> problem, maybe to use a filter with some regular expression that would
>> change de = from the DataInput
>>
>> Any suggestions/help
>>
>> Thanks
>> Jorge
>>
>>
>> --
>> Ph.D. Jorge Samuel Mendes de Jesus
>>
>> European Commission (EC)
>> Joint Research Centre Directorate (DG JRC)
>> Institute for Environment and Sustainability (IES)
>> TP 441, Via Fermi 1
>> 21020 Ispra (VA)
>> Italy
>>
>> Phone: +39 0332 78 3536
>> Fax:   +39 0332 78 5466
>>
>> http://rem.jrc.cec.eu.int
>>
>> "The views expressed are purely those of the writer and may not in any
>> circumstances be regarded as stating an official position of the European
>> Commission"
>>
>> _______________________________________________
>> Mod_python mailing list
>> Mod_python@modpython.org
>> http://mailman.modpython.org/mailman/listinfo/mod_python
>>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python

From matusis at yahoo.com  Thu Jul 24 02:48:47 2008
From: matusis at yahoo.com (Alec Matusis)
Date: Thu Jul 24 02:48:59 2008
Subject: [mod_python] cannot compile mod_python on 64bit AMD processor
Message-ID: <04f001c8ed59$53b93ca0$fb2bb5e0$@com>

I am trying to compile mod_python 3.3.1 on an AMD 64bit CPU

 

This is what I get:

 

/usr/lib64/gcc/x86_64-suse-linux/4.3/../../../../x86_64-suse-linux/bin/ld:
/usr/local/encap/python-2.4.1/lib/python2.4/config/libpython2.4.a(abstract.o
): relocation R_X86_64_32 against `a local symbol' can not be used when
making a shared object; recompile with -fPIC

/usr/local/encap/python-2.4.1/lib/python2.4/config/libpython2.4.a: could not
read symbols: Bad value

collect2: ld returned 1 exit status

apxs:Error: Command failed with rc=65536

.

make[1]: *** [mod_python.so] Error 1

make[1]: Leaving directory `/nail/sys/src/mod_python-3.3.1/src'

make: *** [do_dso] Error 2

 

#uname -a

Linux microtiger 2.6.25.5-1.1-default #1 SMP 2008-06-07 01:55:22 +0200
x86_64 x86_64 x86_64 GNU/Linux

#gcc --version

gcc (SUSE Linux) 4.3.1 20080507 (prerelease) [gcc-4_3-branch revision
135036]

 

Any help?

 

Thanks!

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080723/e63d3b4d/attachment.html
From matusis at yahoo.com  Thu Jul 24 04:23:48 2008
From: matusis at yahoo.com (Alec Matusis)
Date: Thu Jul 24 04:23:59 2008
Subject: [mod_python] cannot compile mod_python on 64bit AMD processor
In-Reply-To: <04f001c8ed59$53b93ca0$fb2bb5e0$@com>
References: <04f001c8ed59$53b93ca0$fb2bb5e0$@com>
Message-ID: <053d01c8ed66$990e56c0$cb2b0440$@com>

I think I found an answer to my own question.

On AMD x86_64, when I am linking a static library into a shared library,
position-dependent code in a shared library is not supported.

So I recompiled python with --enable-shared option, so that there is no
static library libpython2.4.a at all, and it worked.

 

I wonder if --enable-shared option causes any performance loss?

 

 

From: mod_python-bounces@modpython.org
[mailto:mod_python-bounces@modpython.org] On Behalf Of Alec Matusis
Sent: Wednesday, July 23, 2008 11:49 PM
To: mod_python@modpython.org
Subject: [mod_python] cannot compile mod_python on 64bit AMD processor

 

I am trying to compile mod_python 3.3.1 on an AMD 64bit CPU

 

This is what I get:

 

/usr/lib64/gcc/x86_64-suse-linux/4.3/../../../../x86_64-suse-linux/bin/ld:
/usr/local/encap/python-2.4.1/lib/python2.4/config/libpython2.4.a(abstract.o
): relocation R_X86_64_32 against `a local symbol' can not be used when
making a shared object; recompile with -fPIC

/usr/local/encap/python-2.4.1/lib/python2.4/config/libpython2.4.a: could not
read symbols: Bad value

collect2: ld returned 1 exit status

apxs:Error: Command failed with rc=65536

.

make[1]: *** [mod_python.so] Error 1

make[1]: Leaving directory `/nail/sys/src/mod_python-3.3.1/src'

make: *** [do_dso] Error 2

 

#uname -a

Linux microtiger 2.6.25.5-1.1-default #1 SMP 2008-06-07 01:55:22 +0200
x86_64 x86_64 x86_64 GNU/Linux

#gcc --version

gcc (SUSE Linux) 4.3.1 20080507 (prerelease) [gcc-4_3-branch revision
135036]

 

Any help?

 

Thanks!

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080724/6b77d286/attachment.html
From graham.dumpleton at gmail.com  Thu Jul 24 08:53:50 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Thu Jul 24 08:53:54 2008
Subject: [mod_python] cannot compile mod_python on 64bit AMD processor
In-Reply-To: <053d01c8ed66$990e56c0$cb2b0440$@com>
References: <04f001c8ed59$53b93ca0$fb2bb5e0$@com>
	<053d01c8ed66$990e56c0$cb2b0440$@com>
Message-ID: <88e286470807240553h712fe56foe5872f9420b38ff5@mail.gmail.com>

2008/7/24 Alec Matusis <matusis@yahoo.com>:
> I think I found an answer to my own question.
>
> On AMD x86_64, when I am linking a static library into a shared library,
> position-dependent code in a shared library is not supported.
>
> So I recompiled python with --enable-shared option, so that there is no
> static library libpython2.4.a at all, and it worked.
>
>
>
> I wonder if --enable-shared option causes any performance loss?

In the grand scheme of things, no.

Graham
From lingbao at swingvine.com  Fri Jul 25 07:54:47 2008
From: lingbao at swingvine.com (Ling Bao)
Date: Fri Jul 25 07:54:54 2008
Subject: [mod_python] Newbie question: do I need to worry about compilation
	of modules served directly by mod_python
Message-ID: <4d9a24d50807250454w464a1221u4dca26a4221bd822@mail.gmail.com>

I'm a newbie to mod_python and the open source community in general.  Here's
what might seem like a stupid question, but please entertain me : )

I'm building a site and serving its pages with mod_python out of a www
directory.  I have a bunch of .py files in the www directory for rendering
the home page, sign in page, etc.  Each of these modules also imports
packages and modules from other directories.

In the other directories containing the imported modules, I see .pyc files.
However, in the www directory where the mod_python handler is picking up the
top-level scripts for handling requests, I don't see any pyc files.  I think
this is expected because python doesn't auto-compile py files unless they're
imported by some other module.

My question is am I suffering any performance impact by letting mod_python
use py top-level scripts under the www directory instead of manually
compiling these scripts and having mod_python run the pyc files instead.  Or
is all this moot because mod_python does auto-reloading and keeps the
scripts under www in memory (unless the py files are modified in which case
a reload occurs)?

Thanks!
Ling
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080725/004fe5b9/attachment.html
From ambrose-bulk at vrvl.net  Sat Jul 26 07:29:16 2008
From: ambrose-bulk at vrvl.net (Ambrose Andrews)
Date: Sat Jul 26 07:29:23 2008
Subject: [mod_python] mod-gnutls 'SSL_SRP_USER' and ModPython
Message-ID: <20b1e36e0807260429l86f7e8bw2a4d61e786f70eec@mail.gmail.com>

[ N.B.  i sent an identical message to the mod_gnutls list, and send it
here too now since its an issue of interaction and i don't know
precisely where the problem lies.  -AA. ]

Hi...

I run Debian 'Lenny' testing with:
Apache2 v 2.2.9
Mod-Python v 3.3.1
Mod-GnuTLS v 0.5.1

I've struck some mod-gnutls specific trouble in interaction with
modpython - see this traceback:

"""
MOD_PYTHON ERROR

ProcessId:      15879
Interpreter:    'CRYPTO'

ServerName:     'www.pathogens.vrvl.net'
DocumentRoot:   '/var/www/SSL_www.zed.vrvl.net/'

URI:            '/'
Location:       '/'
Directory:      None
Filename:       '/var/www/SSL_www.zed.vrvl.net/'
PathInfo:       ''

Phase:          'PythonHandler'
Handler:        'django.core.handlers.modpython'

Traceback (most recent call last):

  File "/usr/lib/python2.5/site-packages/mod_python/importer.py", line
1537, in HandlerDispatch
    default=default_handler, arg=req, silent=hlist.silent)

  File "/usr/lib/python2.5/site-packages/mod_python/importer.py", line
1229, in _process_target
    result = _execute_target(config, req, object, arg)

  File "/usr/lib/python2.5/site-packages/mod_python/importer.py", line
1128, in _execute_target
    result = object(arg)

  File "/var/lib/python-support/python2.5/django/core/handlers/modpython.py",
line 177, in handler
    return ModPythonHandler()(req)

  File "/var/lib/python-support/python2.5/django/core/handlers/modpython.py",
line 137, in __call__
    os.environ.update(req.subprocess_env)

  File "/usr/lib/python2.5/os.py", line 489, in update
    self[k] = dict[k]

  File "/usr/lib/python2.5/os.py", line 474, in __setitem__
    putenv(key, item)

TypeError: putenv() argument 2 must be string, not None
"""

So to investigate, from inside a modpython script I get this output
for str(req.subprocess_env):

{
'SCRIPT_NAME': '/',
 'REQUEST_URI': '/',
 'QUERY_STRING': '',
 'REQUEST_METHOD': 'GET',
 'SERVER_PROTOCOL': 'HTTP/1.1',
 'GATEWAY_INTERFACE': 'CGI/1.1',
 'SSL_SERVER_S_AN1': 'UNSUPPORTED',
 'SSL_SERVER_S_AN0': 'DNSNAME:*.pathogens.vrvl.net',
 'SSL_SERVER_A_KEY': 'RSA',
 'SSL_SERVER_A_SIG': 'RSA-SHA',
 'SSL_SERVER_V_START': 'Jul 21 10:36:39 2008 EST',
'SSL_SERVER_V_END': 'Jul 21 10:36:39 2010 EST',
'SSL_SERVER_CERT_TYPE': 'X.509',
 'SSL_SERVER_M_VERSION': '3',
 'SSL_SERVER_M_SERIAL': '5B8F',
 'SSL_SERVER_I_DN': 'O=CAcert Inc.,OU=http://www.CAcert.org,CN=CAcert
Class 3 Root',
 'SSL_SERVER_S_DN': 'CN=*.pathogens.zed.vrvl.net',
 'SSL_SESSION_ID':
'2352784F1DDE3AA3687B3ED53D6C7055CBC3BA2F80B13B58760B9C33B9413EA2',
'SSL_CIPHER_EXPORT': 'false',
'SSL_CIPHER_ALGKEYSIZE': '256',
'SSL_CIPHER_USEKEYSIZE': '256',
 'SSL_CLIENT_VERIFY': 'NONE',
 'SSL_SRP_USER': None,
 'SSL_COMPRESS_METHOD': 'NULL',
 'SSL_CIPHER': 'DHE_RSA_AES_256_CBC_SHA1',
'SSL_PROTOCOL': 'SSL3.0',
'SSL_VERSION_INTERFACE': 'mod_gnutls/0.5.1',
'SSL_VERSION_LIBRARY': 'GnuTLS/2.2.1',
'HTTPS': 'on'
}

and was offered the following observation in the Django irc channel:

"""
19:47 < Magus-> aha
19:47 < Magus-> SSL_SRP_USER is being set wrong
19:48 < Magus-> it is None instead of a string like "NONE" like
SSL_CLIENT_VERIFY is set to
19:48 < Magus-> since you can't update environ with None as an env var value
19:51 < Magus-> its probably an issue in the module though, unless its
the modpython handler replacing None with 'NONE' on the other bits

"""

So I don't know if the problem is modpython not dealing with an exotic
environment variable it doesn't get from mod-ssl or whether it is a
mod-gnutls inconsistency.  Anyone know?


  -AA.



-- 
Ambrose Andrews
LPO box 8274 ANU Acton ACT 0200 Australia
http://www.vrvl.net/~ambrose/
mailto:ambrose@vrvl.net
home:+61_262305976
work:+61_261256749
mobile:+61_415544621
irc:{undernet|freenode|oftc}:znalo
xmpp:ambrose@jabber.fsfe.org
sip:znalo@ekiga.net
CE38 8B79 C0A7 DF4A 4F54 E352 2647 19A1 DB3B F823
556A 6D19 0904 827C 9DB8 3697 32D0 1E11 403F 2BE1
From dave6502 at googlemail.com  Sat Jul 26 18:26:00 2008
From: dave6502 at googlemail.com (dave selby)
Date: Sat Jul 26 18:26:06 2008
Subject: [mod_python] [SPAM] New to mod_python,
	basic mod_python.publisher question
Message-ID: <f52017b60807261526i1387250ax8264d606ed89826d@mail.gmail.com>

I have a file test.py (ok not so original) containing ....

#!/usr/bin/env python

from mod_python import apache

def handler(req):
    req.content_type = 'text/plain'
    req.write("Hello World!")
    return apache.OK

When I add the following to my vhost and access with it with a URL of
http://localhost:8085/test/ it works as expected ...

AddHandler mod_python .py
PythonHandler test
PythonDebug On

However I need mod_python.publisher so I substitute the above for ...

AddHandler mod_python .py
PythonHandler mod_python.publisher
PythonDebug On

And access with it with a URL of http://localhost:8085/test/ and I get
'The requested URL /test.py/ was not found on this server.'

Can anyone tell me what I am doing wrong ?

Cheers

Dave

-- 

Please avoid sending me Word or PowerPoint attachments.
See http://www.gnu.org/philosophy/no-word-attachments.html
From graham.dumpleton at gmail.com  Sun Jul 27 02:22:05 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Sun Jul 27 02:22:10 2008
Subject: [mod_python] Newbie question: do I need to worry about
	compilation of modules served directly by mod_python
In-Reply-To: <4d9a24d50807250454w464a1221u4dca26a4221bd822@mail.gmail.com>
References: <4d9a24d50807250454w464a1221u4dca26a4221bd822@mail.gmail.com>
Message-ID: <88e286470807262322o24988949t3139596fb100e5de@mail.gmail.com>

2008/7/25 Ling Bao <lingbao@swingvine.com>:
> I'm a newbie to mod_python and the open source community in general.  Here's
> what might seem like a stupid question, but please entertain me : )
>
> I'm building a site and serving its pages with mod_python out of a www
> directory.  I have a bunch of .py files in the www directory for rendering
> the home page, sign in page, etc.  Each of these modules also imports
> packages and modules from other directories.
>
> In the other directories containing the imported modules, I see .pyc files.
> However, in the www directory where the mod_python handler is picking up the
> top-level scripts for handling requests, I don't see any pyc files.  I think
> this is expected because python doesn't auto-compile py files unless they're
> imported by some other module.

A custom built module importer is used by mod_python, where for code
files which are reloadable, no .pyc file is generated nor used if it
existed previously.

> My question is am I suffering any performance impact by letting mod_python
> use py top-level scripts under the www directory instead of manually
> compiling these scripts and having mod_python run the pyc files instead.

No.

> Or  is all this moot because mod_python does auto-reloading and keeps the
> scripts under www in memory (unless the py files are modified in which case
> a reload occurs)?

Pretty well, that is the case.

Note that in Python web application hosting, the network performance,
whether Python optimisations is enabled, or whether .pyc files are
used are never going to be the performance bottleneck, so I wouldn't
particularly waste your time on it. Worry more about things like the
performance of algorithms used by your application and database query
performance.

Graham
From graham.dumpleton at gmail.com  Sun Jul 27 02:36:40 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Sun Jul 27 02:36:45 2008
Subject: [mod_python] mod-gnutls 'SSL_SRP_USER' and ModPython
In-Reply-To: <20b1e36e0807260429l86f7e8bw2a4d61e786f70eec@mail.gmail.com>
References: <20b1e36e0807260429l86f7e8bw2a4d61e786f70eec@mail.gmail.com>
Message-ID: <88e286470807262336o3bac3348vf1b0533fe9e0f5b8@mail.gmail.com>

Haven't mod_python code in front of me right now, but I suspect that
if SSL_SRP_USER is being set to None, it is because in the underlying
request_rec->subprocess_env in Apache C code, the value is referencing
a null pointer rather than a valid string value. You would need to ask
the module developers for the code that sets that variable in the
first place why it is a null pointer and not an actual string value,
even if it is an empty string value.

Also, the traceback suggests code:

  os.environ.update(req.subprocess_env)

is being executed. Again, don't have code to hand to look at, but me
thinks that means you are running mod_python.cgihandler. If that is
the case, I would really recommend you don't as the CGI handler in
mod_python is quite a hack and shouldn't be used for any serious
stuff. These days I'd suggest you port your CGI applications to use
WSGI instead thereby not relying on os.environ as means of being
passed request information in the first place.

Graham

2008/7/26 Ambrose Andrews <ambrose-bulk@vrvl.net>:
> [ N.B.  i sent an identical message to the mod_gnutls list, and send it
> here too now since its an issue of interaction and i don't know
> precisely where the problem lies.  -AA. ]
>
> Hi...
>
> I run Debian 'Lenny' testing with:
> Apache2 v 2.2.9
> Mod-Python v 3.3.1
> Mod-GnuTLS v 0.5.1
>
> I've struck some mod-gnutls specific trouble in interaction with
> modpython - see this traceback:
>
> """
> MOD_PYTHON ERROR
>
> ProcessId:      15879
> Interpreter:    'CRYPTO'
>
> ServerName:     'www.pathogens.vrvl.net'
> DocumentRoot:   '/var/www/SSL_www.zed.vrvl.net/'
>
> URI:            '/'
> Location:       '/'
> Directory:      None
> Filename:       '/var/www/SSL_www.zed.vrvl.net/'
> PathInfo:       ''
>
> Phase:          'PythonHandler'
> Handler:        'django.core.handlers.modpython'
>
> Traceback (most recent call last):
>
>  File "/usr/lib/python2.5/site-packages/mod_python/importer.py", line
> 1537, in HandlerDispatch
>    default=default_handler, arg=req, silent=hlist.silent)
>
>  File "/usr/lib/python2.5/site-packages/mod_python/importer.py", line
> 1229, in _process_target
>    result = _execute_target(config, req, object, arg)
>
>  File "/usr/lib/python2.5/site-packages/mod_python/importer.py", line
> 1128, in _execute_target
>    result = object(arg)
>
>  File "/var/lib/python-support/python2.5/django/core/handlers/modpython.py",
> line 177, in handler
>    return ModPythonHandler()(req)
>
>  File "/var/lib/python-support/python2.5/django/core/handlers/modpython.py",
> line 137, in __call__
>    os.environ.update(req.subprocess_env)
>
>  File "/usr/lib/python2.5/os.py", line 489, in update
>    self[k] = dict[k]
>
>  File "/usr/lib/python2.5/os.py", line 474, in __setitem__
>    putenv(key, item)
>
> TypeError: putenv() argument 2 must be string, not None
> """
>
> So to investigate, from inside a modpython script I get this output
> for str(req.subprocess_env):
>
> {
> 'SCRIPT_NAME': '/',
>  'REQUEST_URI': '/',
>  'QUERY_STRING': '',
>  'REQUEST_METHOD': 'GET',
>  'SERVER_PROTOCOL': 'HTTP/1.1',
>  'GATEWAY_INTERFACE': 'CGI/1.1',
>  'SSL_SERVER_S_AN1': 'UNSUPPORTED',
>  'SSL_SERVER_S_AN0': 'DNSNAME:*.pathogens.vrvl.net',
>  'SSL_SERVER_A_KEY': 'RSA',
>  'SSL_SERVER_A_SIG': 'RSA-SHA',
>  'SSL_SERVER_V_START': 'Jul 21 10:36:39 2008 EST',
> 'SSL_SERVER_V_END': 'Jul 21 10:36:39 2010 EST',
> 'SSL_SERVER_CERT_TYPE': 'X.509',
>  'SSL_SERVER_M_VERSION': '3',
>  'SSL_SERVER_M_SERIAL': '5B8F',
>  'SSL_SERVER_I_DN': 'O=CAcert Inc.,OU=http://www.CAcert.org,CN=CAcert
> Class 3 Root',
>  'SSL_SERVER_S_DN': 'CN=*.pathogens.zed.vrvl.net',
>  'SSL_SESSION_ID':
> '2352784F1DDE3AA3687B3ED53D6C7055CBC3BA2F80B13B58760B9C33B9413EA2',
> 'SSL_CIPHER_EXPORT': 'false',
> 'SSL_CIPHER_ALGKEYSIZE': '256',
> 'SSL_CIPHER_USEKEYSIZE': '256',
>  'SSL_CLIENT_VERIFY': 'NONE',
>  'SSL_SRP_USER': None,
>  'SSL_COMPRESS_METHOD': 'NULL',
>  'SSL_CIPHER': 'DHE_RSA_AES_256_CBC_SHA1',
> 'SSL_PROTOCOL': 'SSL3.0',
> 'SSL_VERSION_INTERFACE': 'mod_gnutls/0.5.1',
> 'SSL_VERSION_LIBRARY': 'GnuTLS/2.2.1',
> 'HTTPS': 'on'
> }
>
> and was offered the following observation in the Django irc channel:
>
> """
> 19:47 < Magus-> aha
> 19:47 < Magus-> SSL_SRP_USER is being set wrong
> 19:48 < Magus-> it is None instead of a string like "NONE" like
> SSL_CLIENT_VERIFY is set to
> 19:48 < Magus-> since you can't update environ with None as an env var value
> 19:51 < Magus-> its probably an issue in the module though, unless its
> the modpython handler replacing None with 'NONE' on the other bits
>
> """
>
> So I don't know if the problem is modpython not dealing with an exotic
> environment variable it doesn't get from mod-ssl or whether it is a
> mod-gnutls inconsistency.  Anyone know?
>
>
>  -AA.
>
>
>
> --
> Ambrose Andrews
> LPO box 8274 ANU Acton ACT 0200 Australia
> http://www.vrvl.net/~ambrose/
> mailto:ambrose@vrvl.net
> home:+61_262305976
> work:+61_261256749
> mobile:+61_415544621
> irc:{undernet|freenode|oftc}:znalo
> xmpp:ambrose@jabber.fsfe.org
> sip:znalo@ekiga.net
> CE38 8B79 C0A7 DF4A 4F54 E352 2647 19A1 DB3B F823
> 556A 6D19 0904 827C 9DB8 3697 32D0 1E11 403F 2BE1
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>
From graham.dumpleton at gmail.com  Sun Jul 27 02:40:48 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Sun Jul 27 02:40:52 2008
Subject: [SPAM] Re: [SPAM] [mod_python] [SPAM] New to mod_python,
	basic mod_python.publisher question
In-Reply-To: <f52017b60807261526i1387250ax8264d606ed89826d@mail.gmail.com>
References: <f52017b60807261526i1387250ax8264d606ed89826d@mail.gmail.com>
Message-ID: <88e286470807262340k59d869e6m5b3bd9efaa2cdabf@mail.gmail.com>

2008/7/27 dave selby <dave6502@googlemail.com>:
> I have a file test.py (ok not so original) containing ....
>
> #!/usr/bin/env python
>
> from mod_python import apache
>
> def handler(req):
>    req.content_type = 'text/plain'
>    req.write("Hello World!")
>    return apache.OK
>
> When I add the following to my vhost and access with it with a URL of
> http://localhost:8085/test/ it works as expected ...
>
> AddHandler mod_python .py
> PythonHandler test
> PythonDebug On
>
> However I need mod_python.publisher so I substitute the above for ...
>
> AddHandler mod_python .py
> PythonHandler mod_python.publisher
> PythonDebug On
>
> And access with it with a URL of http://localhost:8085/test/ and I get
> 'The requested URL /test.py/ was not found on this server.'
>
> Can anyone tell me what I am doing wrong ?

Yes, you aren't reading/interpreting the documentation properly. When
using mod_python.publisher, the entry point isn't necessarily called
handler() and doesn't follow the same calling semantics as basic
mod_python handler.

Thus, read the documentation on mod_python site again and also perhaps
read publisher tutorial at:

  http://webpython.codepoint.net/mod_python

Graham
From graham.dumpleton at gmail.com  Sun Jul 27 02:40:48 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Sun Jul 27 02:41:22 2008
Subject: [SPAM] Re: [SPAM] [mod_python] [SPAM] New to mod_python,
	basic mod_python.publisher question
In-Reply-To: <f52017b60807261526i1387250ax8264d606ed89826d@mail.gmail.com>
References: <f52017b60807261526i1387250ax8264d606ed89826d@mail.gmail.com>
Message-ID: <88e286470807262340k59d869e6m5b3bd9efaa2cdabf@mail.gmail.com>

2008/7/27 dave selby <dave6502@googlemail.com>:
> I have a file test.py (ok not so original) containing ....
>
> #!/usr/bin/env python
>
> from mod_python import apache
>
> def handler(req):
>    req.content_type = 'text/plain'
>    req.write("Hello World!")
>    return apache.OK
>
> When I add the following to my vhost and access with it with a URL of
> http://localhost:8085/test/ it works as expected ...
>
> AddHandler mod_python .py
> PythonHandler test
> PythonDebug On
>
> However I need mod_python.publisher so I substitute the above for ...
>
> AddHandler mod_python .py
> PythonHandler mod_python.publisher
> PythonDebug On
>
> And access with it with a URL of http://localhost:8085/test/ and I get
> 'The requested URL /test.py/ was not found on this server.'
>
> Can anyone tell me what I am doing wrong ?

Yes, you aren't reading/interpreting the documentation properly. When
using mod_python.publisher, the entry point isn't necessarily called
handler() and doesn't follow the same calling semantics as basic
mod_python handler.

Thus, read the documentation on mod_python site again and also perhaps
read publisher tutorial at:

  http://webpython.codepoint.net/mod_python

Graham
From ambrose-bulk at vrvl.net  Sun Jul 27 03:46:19 2008
From: ambrose-bulk at vrvl.net (Ambrose Andrews)
Date: Sun Jul 27 03:46:26 2008
Subject: [mod_python] mod-gnutls 'SSL_SRP_USER' and ModPython
In-Reply-To: <88e286470807262336o3bac3348vf1b0533fe9e0f5b8@mail.gmail.com>
References: <20b1e36e0807260429l86f7e8bw2a4d61e786f70eec@mail.gmail.com>
	<88e286470807262336o3bac3348vf1b0533fe9e0f5b8@mail.gmail.com>
Message-ID: <20b1e36e0807270046r6588091vc9444aea78c82854@mail.gmail.com>

2008/7/27 Graham Dumpleton <graham.dumpleton@gmail.com>:
> Haven't mod_python code in front of me right now, but I suspect that
> if SSL_SRP_USER is being set to None, it is because in the underlying
> request_rec->subprocess_env in Apache C code, the value is referencing
> a null pointer rather than a valid string value. You would need to ask
> the module developers for the code that sets that variable in the
> first place why it is a null pointer and not an actual string value,
> even if it is an empty string value.

Thanks Graham.

>
> Also, the traceback suggests code:
>
>  os.environ.update(req.subprocess_env)
>
> is being executed. Again, don't have code to hand to look at, but me
> thinks that means you are running mod_python.cgihandler. If that is
> the case, I would really recommend you don't as the CGI handler in
> mod_python is quite a hack and shouldn't be used for any serious
> stuff. These days I'd suggest you port your CGI applications to use
> WSGI instead thereby not relying on os.environ as means of being
> passed request information in the first place.

the os.environ.update(req.subprocess_env) is in
django  (core/handlers/modpython.py)
- part of the django distribution.

Anyway I'll proceed on the assumption it is a module problem.

Thanks for the advice.

  -AA.


-- 
Ambrose Andrews
LPO box 8274 ANU Acton ACT 0200 Australia
http://www.vrvl.net/~ambrose/
mailto:ambrose@vrvl.net
home:+61_262305976
work:+61_261256749
mobile:+61_415544621
irc:{undernet|freenode|oftc}:znalo
xmpp:ambrose@jabber.fsfe.org
sip:znalo@ekiga.net
CE38 8B79 C0A7 DF4A 4F54  E352 2647 19A1 DB3B F823
556A 6D19 0904 827C 9DB8  3697 32D0 1E11 403F 2BE1
From lingbao at swingvine.com  Sun Jul 27 05:13:21 2008
From: lingbao at swingvine.com (Ling Bao)
Date: Sun Jul 27 05:13:26 2008
Subject: [mod_python] Newbie question: do I need to worry about
	compilation of modules served directly by mod_python
In-Reply-To: <88e286470807262322o24988949t3139596fb100e5de@mail.gmail.com>
References: <4d9a24d50807250454w464a1221u4dca26a4221bd822@mail.gmail.com>
	<88e286470807262322o24988949t3139596fb100e5de@mail.gmail.com>
Message-ID: <4d9a24d50807270213h1402a9c2k8cc5748559cc8783@mail.gmail.com>

Thanks for addressing my question!  That was helpful.

On Sat, Jul 26, 2008 at 11:22 PM, Graham Dumpleton <
graham.dumpleton@gmail.com> wrote:

> 2008/7/25 Ling Bao <lingbao@swingvine.com>:
> > I'm a newbie to mod_python and the open source community in general.
>  Here's
> > what might seem like a stupid question, but please entertain me : )
> >
> > I'm building a site and serving its pages with mod_python out of a www
> > directory.  I have a bunch of .py files in the www directory for
> rendering
> > the home page, sign in page, etc.  Each of these modules also imports
> > packages and modules from other directories.
> >
> > In the other directories containing the imported modules, I see .pyc
> files.
> > However, in the www directory where the mod_python handler is picking up
> the
> > top-level scripts for handling requests, I don't see any pyc files.  I
> think
> > this is expected because python doesn't auto-compile py files unless
> they're
> > imported by some other module.
>
> A custom built module importer is used by mod_python, where for code
> files which are reloadable, no .pyc file is generated nor used if it
> existed previously.
>
> > My question is am I suffering any performance impact by letting
> mod_python
> > use py top-level scripts under the www directory instead of manually
> > compiling these scripts and having mod_python run the pyc files instead.
>
> No.
>
> > Or  is all this moot because mod_python does auto-reloading and keeps the
> > scripts under www in memory (unless the py files are modified in which
> case
> > a reload occurs)?
>
> Pretty well, that is the case.
>
> Note that in Python web application hosting, the network performance,
> whether Python optimisations is enabled, or whether .pyc files are
> used are never going to be the performance bottleneck, so I wouldn't
> particularly waste your time on it. Worry more about things like the
> performance of algorithms used by your application and database query
> performance.
>
> Graham
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080727/04b8dabb/attachment-0001.html
From graham.dumpleton at gmail.com  Sun Jul 27 07:09:29 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Sun Jul 27 07:09:37 2008
Subject: [mod_python] mod-gnutls 'SSL_SRP_USER' and ModPython
In-Reply-To: <20b1e36e0807270046r6588091vc9444aea78c82854@mail.gmail.com>
References: <20b1e36e0807260429l86f7e8bw2a4d61e786f70eec@mail.gmail.com>
	<88e286470807262336o3bac3348vf1b0533fe9e0f5b8@mail.gmail.com>
	<20b1e36e0807270046r6588091vc9444aea78c82854@mail.gmail.com>
Message-ID: <88e286470807270409i42129871w6e6a9e2f2deb764b@mail.gmail.com>

2008/7/27 Ambrose Andrews <ambrose-bulk@vrvl.net>:
> 2008/7/27 Graham Dumpleton <graham.dumpleton@gmail.com>:
>> Also, the traceback suggests code:
>>
>>  os.environ.update(req.subprocess_env)
>>
>> is being executed. Again, don't have code to hand to look at, but me
>> thinks that means you are running mod_python.cgihandler. If that is
>> the case, I would really recommend you don't as the CGI handler in
>> mod_python is quite a hack and shouldn't be used for any serious
>> stuff. These days I'd suggest you port your CGI applications to use
>> WSGI instead thereby not relying on os.environ as means of being
>> passed request information in the first place.
>
> the os.environ.update(req.subprocess_env) is in
> django  (core/handlers/modpython.py)
> - part of the django distribution.

Consider using mod_wsgi instead of mod_python then.

Graham
From alex.lurthu at yahoo.com  Sun Jul 27 10:41:59 2008
From: alex.lurthu at yahoo.com (Alex Lurthu)
Date: Sun Jul 27 10:42:07 2008
Subject: [mod_python] Trouble loading mod_python Mac Os X
Message-ID: <629052.4425.qm@web94615.mail.in2.yahoo.com>

 
Hi All,

I have been trying to add mod_python module to apache2. The first road block that i hit was :

httpd:
Syntax error on line 116 of /private/etc/apache2/httpd.conf: Cannot
load /usr/libexec/apache2/mod_python.so into server:
dlopen(/usr/libexec/apache2/mod_python.so, 10): no suitable image
found.  Did find:\n\t/usr/libexec/apache2/mod_python.so: mach-o, but
wrong architecture

To solve this i add the following lines to the Makefile under src directory :

CPPFLAGS = -I/System/Library/Frameworks/Python.framework/Versions/2.5/include/python2.5 -DNDEBUG -DMACOSX -DENABLE_DTRACE
CFLAGS =  -Wc,'-arch ppc7400' -Wc,'-arch ppc64' -Wc,'-arch i386' -Wc,'-arch x86_64'
LDFLAGS =  -arch ppc7400 -arch ppc64 -arch i386 -arch x86_64 -Wl,-F/System/Library/Frameworks -framework Python -u _PyMac_Error -framework Python
LDLIBS = -ldl

It got complied with the required format or platform support.

sh-3.2# file /usr/libexec/apache2/mod_python.so
/usr/libexec/apache2/mod_python.so: Mach-O universal binary with 4 architectures
/usr/libexec/apache2/mod_python.so (for architecture ppc):    Mach-O bundle ppc
/usr/libexec/apache2/mod_python.so (for architecture ppc64):    Mach-O 64-bit bundle ppc64
/usr/libexec/apache2/mod_python.so (for architecture i386):    Mach-O bundle i386
/usr/libexec/apache2/mod_python.so (for architecture x86_64):    Mach-O 64-bit bundle x86_64

After this step, when i tried LoadModule in the httpd.conf file i got the following error.

httpd: Syntax error on line 117 of /private/etc/apache2/httpd.conf: Can't locate API module structure `python_module' in file /usr/libexec/apache2/mod_python.so: dlsym(0x100216ae0, python_module): symbol not found

Stuck
at this point. Have a working wsgi module, but still wondering why this
is loading. Ensured that it got built against the correct apache
libraries and python libraries. 

The following are the versions that i use :

Python 2.5.1 (r251:54863, Jan 17 2008, 19:35:17) 
sh-3.2# apachectl -v
Server version: Apache/2.2.8 (Unix)
Server built:   Mar  4 2008 21:37:02

Platform : sh-3.2# uname -a
Darwin sickreturn-lm 9.4.0 Darwin Kernel Version 9.4.0: Mon Jun  9 19:30:53 PDT 2008; root:xnu-1228.5.20~1/RELEASE_I386 i386

Hardware : Apple Macbook Pro (Intel 32 bit )

Output of otool pasted at the end. Thanks for the help.

--
Alex
http://alexlurthu.wordpress.com

sh-3.2# otool -l /usr/libexec/apache2/mod_python.so
/usr/libexec/apache2/mod_python.so:
Load command 0
      cmd LC_SEGMENT
  cmdsize 328
  segname __TEXT
   vmaddr 0x00000000
   vmsize 0x00016000
  fileoff 0
 filesize 90112
  maxprot 0x00000007
 initprot 0x00000005
   nsects 4
    flags 0x0
Section
  sectname __text
   segname __TEXT
      addr 0x00001358
      size 0x00011f4c
    offset 4952
     align 2^2 (4)
    reloff 0
    nreloc 0
     flags 0x80000400
 reserved1 0
 reserved2 0
Section
  sectname __cstring
   segname __TEXT
      addr 0x000132a4
      size 0x00002caa
    offset 78500
     align 2^2 (4)
    reloff 0
    nreloc 0
     flags 0x00000002
 reserved1 0
 reserved2 0
Section
  sectname __const
   segname __TEXT
      addr 0x00015f50
      size 0x000000a0
    offset 89936
     align 2^4 (16)
    reloff 0
    nreloc 0
     flags 0x00000000
 reserved1 0
 reserved2 0
Section
  sectname __literal8
   segname __TEXT
      addr 0x00015ff0
      size 0x00000008
    offset 90096
     align 2^3 (8)
    reloff 0
    nreloc 0
     flags 0x00000004
 reserved1 0
 reserved2 0
Load command 1
      cmd LC_SEGMENT
  cmdsize 328
  segname __DATA
   vmaddr 0x00016000
   vmsize 0x00003000
  fileoff 90112
 filesize 12288
  maxprot 0x00000007
 initprot 0x00000003
   nsects 4
    flags 0x0
Section
  sectname __data
   segname __DATA
      addr 0x00016000
      size 0x0000227c
    offset 90112
     align 2^5 (32)
    reloff 0
    nreloc 0
     flags 0x00000000
 reserved1 0
 reserved2 0
Section
  sectname __dyld
   segname __DATA
      addr 0x0001827c
      size 0x00000008
    offset 98940
     align 2^2 (4)
    reloff 0
    nreloc 0
     flags 0x00000000
 reserved1 0
 reserved2 0
Section
  sectname __bss
   segname __DATA
      addr 0x00018284
      size 0x00000024
    offset 0
     align 2^2 (4)
    reloff 0
    nreloc 0
     flags 0x00000001
 reserved1 0
 reserved2 0
Section
  sectname __common
   segname __DATA
      addr 0x000182a8
      size 0x00000004
    offset 0
     align 2^2 (4)
    reloff 0
    nreloc 0
     flags 0x00000001
 reserved1 0
 reserved2 0
Load command 2
      cmd LC_SEGMENT
  cmdsize 192
  segname __IMPORT
   vmaddr 0x00019000
   vmsize 0x00001000
  fileoff 102400
 filesize 4096
  maxprot 0x00000007
 initprot 0x00000007
   nsects 2
    flags 0x0
Section
  sectname __pointers
   segname __IMPORT
      addr 0x00019000
      size 0x000000ac
    offset 102400
     align 2^2 (4)
    reloff 0
    nreloc 0
     flags 0x00000006
 reserved1 0 (index into indirect symbol table)
 reserved2 0
Section
  sectname __jump_table
   segname __IMPORT
      addr 0x000190c0
      size 0x000004dd
    offset 102592
     align 2^6 (64)
    reloff 0
    nreloc 0
     flags 0x04000008
 reserved1 43 (index into indirect symbol table)
 reserved2 5 (size of stubs)
Load command 3
      cmd LC_SEGMENT
  cmdsize 56
  segname __LINKEDIT
   vmaddr 0x0001a000
   vmsize 0x00006000
  fileoff 106496
 filesize 24436
  maxprot 0x00000007
 initprot 0x00000001
   nsects 0
    flags 0x0
Load command 4
     cmd LC_SYMTAB
 cmdsize 24
  symoff 112544
   nsyms 572
  stroff 120624
 strsize 10308
Load command 5
            cmd LC_DYSYMTAB
        cmdsize 80
      ilocalsym 0
      nlocalsym 262
     iextdefsym 262
     nextdefsym 44
      iundefsym 306
      nundefsym 266
         tocoff 0
           ntoc 0
      modtaboff 0
        nmodtab 0
   extrefsymoff 0
    nextrefsyms 0
 indirectsymoff 119456
  nindirectsyms 292
      extreloff 119408
        nextrel 6
      locreloff 106496
        nlocrel 756
Load command 6
          cmd LC_LOAD_DYLIB
      cmdsize 52
         name /usr/lib/libSystem.B.dylib (offset 24)
   time stamp 2 Thu Jan  1 05:30:02 1970
      current version 111.1.1
compatibility version 1.0.0
Load command 7
          cmd LC_LOAD_DYLIB
      cmdsize 88
         name /System/Library/Frameworks/Python.framework/Versions/2.5/Python (offset 24)
   time stamp 2 Thu Jan  1 05:30:02 1970
      current version 2.5.1
compatibility version 2.5.0
Load command 8
          cmd LC_LOAD_DYLIB
      cmdsize 52
         name /usr/lib/libgcc_s.1.dylib (offset 24)
   time stamp 2 Thu Jan  1 05:30:02 1970
      current version 1.0.0
compatibility version 1.0.0


      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080727/20eb92f9/attachment.html
From bharathv6.project at gmail.com  Mon Jul 28 06:31:04 2008
From: bharathv6.project at gmail.com (bharath venkatesh)
Date: Mon Jul 28 06:31:10 2008
Subject: [mod_python] importing a configuration module
In-Reply-To: <2613171a0807280329v191dbf42g8283529dc492edaa@mail.gmail.com>
References: <2613171a0807280329v191dbf42g8283529dc492edaa@mail.gmail.com>
Message-ID: <2613171a0807280331p7b232c1dqa10f50e343d263cb@mail.gmail.com>

Hi all,
        I am using mod python and publisher handler  for handling request ..
I want to load to some configuration so that this configuration is used for
all the request ...
so  i placed the  all the configuration in a .py file and imported it .. and
also i am doing some initialization in this file .. so i want  it to be
imported only once ..
but  apache reimports when  a request occurs after a gap of certain time ..
it doesn't reimport  if the request occurs continuously .. this is
toleratable   if i am only l loading configuration but i am doing
initialization also .. so if want to write into a file using
open("filename","w") .. if i place this line in the file i  am  importing
then... the file gets truncated each time the the file is imported ... this
is not desirable ..
i tried even setting  PythonAutoReload off but still apache was reimporting
the module
i tried using PythonImport directive .. (eg PythonImport
/home/bharath/config.py /usr/bin/python2.5 ) couldn't figure out how to get
it work .. if i place the config.py file in a different directive than the
directive in which the handler is placed(assuming that apache  will  import
this module during start up as it does for library modules )  .. i am
getting  a import error and also if i place the config.py in the same
directory that of the handler and if import it .. apache reimports it as
usuall ...

how to let apache import a module only once as it does for python library
modules  but apache should reimport it the when changes are made in the file
that is imported ...

                                                   bharath
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080728/988de67e/attachment.html
From bharathv6.project at gmail.com  Mon Jul 28 06:44:29 2008
From: bharathv6.project at gmail.com (bharath venkatesh)
Date: Mon Jul 28 06:44:34 2008
Subject: [mod_python] Re: importing a configuration module
In-Reply-To: <2613171a0807280331p7b232c1dqa10f50e343d263cb@mail.gmail.com>
References: <2613171a0807280329v191dbf42g8283529dc492edaa@mail.gmail.com>
	<2613171a0807280331p7b232c1dqa10f50e343d263cb@mail.gmail.com>
Message-ID: <2613171a0807280344h144a7555s375a770c33ba3f95@mail.gmail.com>

I have learnt from mod_python documentation that if  PythonAutoReload is set
to off then it doesn't reimport a  module even if  the module is changed
..but there is no change in the way apache  imports even if i set the
PythonAutoReload to off and   restart apache
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080728/eec8c464/attachment.html
From graham.dumpleton at gmail.com  Mon Jul 28 07:00:09 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Mon Jul 28 07:00:13 2008
Subject: [mod_python] importing a configuration module
In-Reply-To: <2613171a0807280331p7b232c1dqa10f50e343d263cb@mail.gmail.com>
References: <2613171a0807280329v191dbf42g8283529dc492edaa@mail.gmail.com>
	<2613171a0807280331p7b232c1dqa10f50e343d263cb@mail.gmail.com>
Message-ID: <88e286470807280400x72a25b46k169caab033c1e842@mail.gmail.com>

2008/7/28 bharath venkatesh <bharathv6.project@gmail.com>:
>
> Hi all,
>         I am using mod python and publisher handler  for handling request ..
> I want to load to some configuration so that this configuration is used for
> all the request ...
> so  i placed the  all the configuration in a .py file and imported it .. and
> also i am doing some initialization in this file .. so i want  it to be
> imported only once ..
> but  apache reimports when  a request occurs after a gap of certain time ..
> it doesn't reimport  if the request occurs continuously .. this is
> toleratable   if i am only l loading configuration but i am doing
> initialization also .. so if want to write into a file using
> open("filename","w") .. if i place this line in the file i  am  importing
> then... the file gets truncated each time the the file is imported ... this
> is not desirable ..
> i tried even setting  PythonAutoReload off but still apache was reimporting
> the module
> i tried using PythonImport directive .. (eg PythonImport
> /home/bharath/config.py /usr/bin/python2.5 ) couldn't figure out how to get
> it work .. if i place the config.py file in a different directive than the
> directive in which the handler is placed(assuming that apache  will  import
> this module during start up as it does for library modules )  .. i am
> getting  a import error and also if i place the config.py in the same
> directory that of the handler and if import it .. apache reimports it as
> usuall ...
>
> how to let apache import a module only once as it does for python library
> modules  but apache should reimport it the when changes are made in the file
> that is imported ...

You misunderstand how Apache works.

Apache is a multiprocess web server, it also recycles processes and/or
creates new ones as necessary. Thus, a code file although it may be
loaded only once by a process, can be getting loading by other
processes created by Apache as well. The lifetime of these processes
can all overlap with each over and not sequential.

Read:

  http://code.google.com/p/modwsgi/wiki/ProcessesAndThreading

This is from mod_wsgi documentation, but most also applies to
mod_python. Only bit that doesn't is mod_wsgi daemon mode as no
equivalent in mod_python.

Graham
From ebaumer at ics.uci.edu  Wed Jul 30 17:34:49 2008
From: ebaumer at ics.uci.edu (Eric Baumer)
Date: Wed Jul 30 17:34:57 2008
Subject: [mod_python] Pickle can't save classes instances in mod_python ?
Message-ID: <4890DE79.5090403@ics.uci.edu>

I was having trouble loading a pickled class object using mod_python 
when I came across this post in the mod_python archives from June 2007. 
even though the link below implies that loading a pickled object in this 
manner cannot be done, I believe I may have found a work around. I 
wanted to bounce this off the mod_python list for two reasons: (a) to 
make sure I'm not breaking anything, and (b) to share what may be a 
viable solution to this problem.

the link mentioned here seems to imply that one cannot load a pickled 
instance of a class in a script running through mod_python. the problem 
seems to be related to mod_python's method of importing. since there 
doesn't seem to be a good way to guarantee where on the file system the 
script will run when apache receives a request that invokes mod_python. 
thus, rather than referring to a module by name alone (with the standard 
"import module_name" approach), modules are referred to by their path on 
the file system using apache.import_module, for example "my_module = 
apache.import_module('/home/username/my_proj/my_module.py')".

the problem becomes that this method of importing doesn't register the 
module name with sys.modules. therefore, if I have a pickled instance of 
some class my_module.MyClass, when I try to load the pickled instance, 
python would complain that there is "No module named my_module" (as 
described by the OP), even if I had loaded it using apache.import_module.

the workaround that I found looks something like the following.

import sys
def index(req):
    my_module = apache.import_module('/home/username/my_proj/my_module.py')
    sys.modules['my_module'] = my_module

this code ensures that my_module is registered with the list of modules 
python knows about in sys.modules, so that when I load that pickled 
instance of my_module.MyClass, python knows about a module named 
"my_module" and thus can properly load the class.

I should note that, in practice, this has actually worked for me. 
whether or not it's a good idea, though, is another question.

what do you all think? have I gone horribly wrong, or is this a viable 
work around to loading a pickled instance of a class?

~Eric



>> >/ Read:
>> />/
>> />/   http://www.dscpl.com.au/wiki/ModPython/Articles/IssuesWithSessionObjects
>> />/
>> />/ Although document was written in reference to sessions, they use
>> />/ pickle and thus it still applies.
>> />/
>> />/ Graham
>> /
>> Ok, that's a limitation, but I'll now I understand what happened  !
>>
>> Thanks !
>>
>> Seb
> Hello !
>
> I've found something a bit strange in mod_python : the pickle
> instruction doesn't work when we want to save classes ( there is no
> probl?me with tupple or list.. )
>
> I made this code for explain it:
>
> -->
> import mod_python
> import pickle
>
> #Create a very simple class object
> class another_class:
>
>        def __init__(self, text):
>                self.text =     text
>
> #Another one class
> class a_class:
>
>        def __init__(self):
>                self.elements = []
>
>                #Add an element of the second class
>                self.add_entry("test")
>                self.save()
>
>        def add_entry(self, name):
>                self.elements.append( another_class(name) )
>
>        def save(self):
>                #Try to save it with pickle.. works but
>                result = pickle.dumps(self.elements)
>                #We can't load the data after !
>                self.elements = pickle.loads(result)
>
> #If all works good, send a message
> def handler(req):
>        req.write( 'ok' )
>        return(mod_python.apache.OK)
>
> #We run this class outside any mod_python event
> my_class = a_class()
> <--
>
> And here is the result :
>
> -->
> MOD_PYTHON ERROR
>
> ProcessId:      5104
> Interpreter:    'localhost.localdomain'
>
> ServerName:     'localhost.localdomain'
> DocumentRoot:   '/var/www/'
>
> URI:            '/~sebastien/test/'
> Location:       None
> Directory:      '/home/sebastien/public_html/test/'
> Filename:       '/home/sebastien/public_html/test/'
> PathInfo:       ''
>
> Phase:          'PythonHandler'
> Handler:        'handler'
>
> Traceback (most recent call last):
>
>  File "/usr/lib/python2.4/site-packages/mod_python/importer.py", line
> 1537, in HandlerDispatch
>    default=default_handler, arg=req, silent=hlist.silent)
>
>  File "/usr/lib/python2.4/site-packages/mod_python/importer.py", line
> 1202, in _process_target
>    module = import_module(module_name, path=path)
>
>  File "/usr/lib/python2.4/site-packages/mod_python/importer.py", line
> 296, in import_module
>    log, import_path)
>
>  File "/usr/lib/python2.4/site-packages/mod_python/importer.py", line
> 680, in import_module
>    execfile(file, module.__dict__)
>
>  File "/home/sebastien/public_html/test/handler.py", line 35, in ?
>    my_class = a_class()
>
>  File "/home/sebastien/public_html/test/handler.py", line 18, in __init__
>    self.save()
>
>  File "/home/sebastien/public_html/test/handler.py", line 27, in save
>    self.elements = pickle.loads(result)
>
>  File "pickle.py", line 1394, in loads
>    return Unpickler(file).load()
>
>  File "pickle.py", line 872, in load
>    dispatch[key](self)
>
>  File "pickle.py", line 1083, in load_inst
>    klass = self.find_class(module, name)
>
>  File "pickle.py", line 1138, in find_class
>    __import__(module)
>
> ImportError: No module named _mp_e3b5c44c50230d33c470783bc2809f23
>
>
> MODULE CACHE DETAILS
>
> Accessed:       Thu Jun 14 22:49:06 2007
> Generation:     3
>
> _mp_e3b5c44c50230d33c470783bc2809f23 {
>  FileName:     '/home/sebastien/public_html/test/handler.py'
>  Instance:     3 [RELOAD]
>  Generation:   3 [ERROR]
>  Modified:     Thu Jun 14 22:48:49 2007
>  Imported:     Thu Jun 14 22:37:06 2007
> }
> <--
>
> When I launch this program inside a terminal, all works fine, there
> are no error message, so I don't understand what happend..
>


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20080730/76c75ce5/attachment.html
From graham.dumpleton at gmail.com  Wed Jul 30 21:55:13 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Wed Jul 30 21:55:16 2008
Subject: [mod_python] Trouble loading mod_python Mac Os X
In-Reply-To: <629052.4425.qm@web94615.mail.in2.yahoo.com>
References: <629052.4425.qm@web94615.mail.in2.yahoo.com>
Message-ID: <88e286470807301855p51e65f01o38b36ff18489523e@mail.gmail.com>

If you still haven't sorted this, check out latest source code from:

  https://svn.apache.org/repos/asf/quetzalcoatl/mod_python/trunk

This incorporates all the correct MacOSX fat binary changes.

If that doesn't work then post specific issues you have with that version.

Graham

2008/7/28 Alex Lurthu <alex.lurthu@yahoo.com>:
> Hi All,
>
> I have been trying to add mod_python module to apache2. The first road block
> that i hit was :
>
> httpd: Syntax error on line 116 of /private/etc/apache2/httpd.conf: Cannot
> load /usr/libexec/apache2/mod_python.so into server:
> dlopen(/usr/libexec/apache2/mod_python.so, 10): no suitable image found.
> Did find:\n\t/usr/libexec/apache2/mod_python.so: mach-o, but wrong
> architecture
>
> To solve this i add the following lines to the Makefile under src directory
> :
>
> CPPFLAGS =
> -I/System/Library/Frameworks/Python.framework/Versions/2.5/include/python2.5
> -DNDEBUG -DMACOSX -DENABLE_DTRACE
> CFLAGS =  -Wc,'-arch ppc7400' -Wc,'-arch ppc64' -Wc,'-arch i386' -Wc,'-arch
> x86_64'
> LDFLAGS =  -arch ppc7400 -arch ppc64 -arch i386 -arch x86_64
> -Wl,-F/System/Library/Frameworks -framework Python -u _PyMac_Error
> -framework Python
> LDLIBS = -ldl
>
> It got complied with the required format or platform support.
>
> sh-3.2# file /usr/libexec/apache2/mod_python.so
> /usr/libexec/apache2/mod_python.so: Mach-O universal binary with 4
> architectures
> /usr/libexec/apache2/mod_python.so (for architecture ppc):    Mach-O bundle
> ppc
> /usr/libexec/apache2/mod_python.so (for architecture ppc64):    Mach-O
> 64-bit bundle ppc64
> /usr/libexec/apache2/mod_python.so (for architecture i386):    Mach-O bundle
> i386
> /usr/libexec/apache2/mod_python.so (for architecture x86_64):    Mach-O
> 64-bit bundle x86_64
>
> After this step, when i tried LoadModule in the httpd.conf file i got the
> following error.
>
> httpd: Syntax error on line 117 of /private/etc/apache2/httpd.conf: Can't
> locate API module structure `python_module' in file
> /usr/libexec/apache2/mod_python.so: dlsym(0x100216ae0, python_module):
> symbol not found
>
> Stuck at this point. Have a working wsgi module, but still wondering why
> this is loading. Ensured that it got built against the correct apache
> libraries and python libraries.
>
> The following are the versions that i use :
>
> Python 2.5.1 (r251:54863, Jan 17 2008, 19:35:17)
> sh-3.2# apachectl -v
> Server version: Apache/2.2.8 (Unix)
> Server built:   Mar  4 2008 21:37:02
>
> Platform : sh-3.2# uname -a
> Darwin sickreturn-lm 9.4.0 Darwin Kernel Version 9.4.0: Mon Jun  9 19:30:53
> PDT 2008; root:xnu-1228.5.20~1/RELEASE_I386 i386
>
> Hardware : Apple Macbook Pro (Intel 32 bit )
>
> Output of otool pasted at the end. Thanks for the help.
>
> --
> Alex
> http://alexlurthu.wordpress.com
> sh-3.2# otool -l /usr/libexec/apache2/mod_python.so
> /usr/libexec/apache2/mod_python.so:
> Load command 0
>       cmd LC_SEGMENT
>   cmdsize 328
>   segname __TEXT
>    vmaddr 0x00000000
>    vmsize 0x00016000
>   fileoff 0
>  filesize 90112
>   maxprot 0x00000007
>  initprot 0x00000005
>    nsects 4
>     flags 0x0
> Section
>   sectname __text
>    segname __TEXT
>       addr 0x00001358
>       size 0x00011f4c
>     offset 4952
>      align 2^2 (4)
>     reloff 0
>     nreloc 0
>      flags 0x80000400
>  reserved1 0
>  reserved2 0
> Section
>   sectname __cstring
>    segname __TEXT
>       addr 0x000132a4
>       size 0x00002caa
>     offset 78500
>      align 2^2 (4)
>     reloff 0
>     nreloc 0
>      flags 0x00000002
>  reserved1 0
>  reserved2 0
> Section
>   sectname __const
>    segname __TEXT
>       addr 0x00015f50
>       size 0x000000a0
>     offset 89936
>      align 2^4 (16)
>     reloff 0
>     nreloc 0
>      flags 0x00000000
>  reserved1 0
>  reserved2 0
> Section
>   sectname __literal8
>    segname __TEXT
>       addr 0x00015ff0
>       size 0x00000008
>     offset 90096
>      align 2^3 (8)
>     reloff 0
>     nreloc 0
>      flags 0x00000004
>  reserved1 0
>  reserved2 0
> Load command 1
>       cmd LC_SEGMENT
>   cmdsize 328
>   segname __DATA
>    vmaddr 0x00016000
>    vmsize 0x00003000
>   fileoff 90112
>  filesize 12288
>   maxprot 0x00000007
>  initprot 0x00000003
>    nsects 4
>     flags 0x0
> Section
>   sectname __data
>    segname __DATA
>       addr 0x00016000
>       size 0x0000227c
>     offset 90112
>      align 2^5 (32)
>     reloff 0
>     nreloc 0
>      flags 0x00000000
>  reserved1 0
>  reserved2 0
> Section
>   sectname __dyld
>    segname __DATA
>       addr 0x0001827c
>       size 0x00000008
>     offset 98940
>      align 2^2 (4)
>     reloff 0
>     nreloc 0
>      flags 0x00000000
>  reserved1 0
>  reserved2 0
> Section
>   sectname __bss
>    segname __DATA
>       addr 0x00018284
>       size 0x00000024
>     offset 0
>      align 2^2 (4)
>     reloff 0
>     nreloc 0
>      flags 0x00000001
>  reserved1 0
>  reserved2 0
> Section
>   sectname __common
>    segname __DATA
>       addr 0x000182a8
>       size 0x00000004
>     offset 0
>      align 2^2 (4)
>     reloff 0
>     nreloc 0
>      flags 0x00000001
>  reserved1 0
>  reserved2 0
> Load command 2
>       cmd LC_SEGMENT
>   cmdsize 192
>   segname __IMPORT
>    vmaddr 0x00019000
>    vmsize 0x00001000
>   fileoff 102400
>  filesize 4096
>   maxprot 0x00000007
>  initprot 0x00000007
>    nsects 2
>     flags 0x0
> Section
>   sectname __pointers
>    segname __IMPORT
>       addr 0x00019000
>       size 0x000000ac
>     offset 102400
>      align 2^2 (4)
>     reloff 0
>     nreloc 0
>      flags 0x00000006
>  reserved1 0 (index into indirect symbol table)
>  reserved2 0
> Section
>   sectname __jump_table
>    segname __IMPORT
>       addr 0x000190c0
>       size 0x000004dd
>     offset 102592
>      align 2^6 (64)
>     reloff 0
>     nreloc 0
>      flags 0x04000008
>  reserved1 43 (index into indirect symbol table)
>  reserved2 5 (size of stubs)
> Load command 3
>       cmd LC_SEGMENT
>   cmdsize 56
>   segname __LINKEDIT
>    vmaddr 0x0001a000
>    vmsize 0x00006000
>   fileoff 106496
>  filesize 24436
>   maxprot 0x00000007
>  initprot 0x00000001
>    nsects 0
>     flags 0x0
> Load command 4
>      cmd LC_SYMTAB
>  cmdsize 24
>   symoff 112544
>    nsyms 572
>   stroff 120624
>  strsize 10308
> Load command 5
>             cmd LC_DYSYMTAB
>         cmdsize 80
>       ilocalsym 0
>       nlocalsym 262
>      iextdefsym 262
>      nextdefsym 44
>       iundefsym 306
>       nundefsym 266
>          tocoff 0
>            ntoc 0
>       modtaboff 0
>         nmodtab 0
>    extrefsymoff 0
>     nextrefsyms 0
>  indirectsymoff 119456
>   nindirectsyms 292
>       extreloff 119408
>         nextrel 6
>       locreloff 106496
>         nlocrel 756
> Load command 6
>           cmd LC_LOAD_DYLIB
>       cmdsize 52
>          name /usr/lib/libSystem.B.dylib (offset 24)
>    time stamp 2 Thu Jan  1 05:30:02 1970
>       current version 111.1.1
> compatibility version 1.0.0
> Load command 7
>           cmd LC_LOAD_DYLIB
>       cmdsize 88
>          name
> /System/Library/Frameworks/Python.framework/Versions/2.5/Python (offset 24)
>    time stamp 2 Thu Jan  1 05:30:02 1970
>       current version 2.5.1
> compatibility version 2.5.0
> Load command 8
>           cmd LC_LOAD_DYLIB
>       cmdsize 52
>          name /usr/lib/libgcc_s.1.dylib (offset 24)
>    time stamp 2 Thu Jan  1 05:30:02 1970
>       current version 1.0.0
> compatibility version 1.0.0
>
>
>
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>
>
From graham.dumpleton at gmail.com  Wed Jul 30 22:10:20 2008
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Wed Jul 30 22:10:23 2008
Subject: [mod_python] Pickle can't save classes instances in mod_python ?
In-Reply-To: <4890DE79.5090403@ics.uci.edu>
References: <4890DE79.5090403@ics.uci.edu>
Message-ID: <88e286470807301910i5f962a29s12b76e14363bff68@mail.gmail.com>

2008/7/31 Eric Baumer <ebaumer@ics.uci.edu>:
> I was having trouble loading a pickled class object using mod_python when I
> came across this post in the mod_python archives from June 2007. even though
> the link below implies that loading a pickled object in this manner cannot
> be done, I believe I may have found a work around. I wanted to bounce this
> off the mod_python list for two reasons: (a) to make sure I'm not breaking
> anything, and (b) to share what may be a viable solution to this problem.
>
> the link mentioned here seems to imply that one cannot load a pickled
> instance of a class in a script running through mod_python. the problem
> seems to be related to mod_python's method of importing. since there doesn't
> seem to be a good way to guarantee where on the file system the script will
> run when apache receives a request that invokes mod_python. thus, rather
> than referring to a module by name alone (with the standard "import
> module_name" approach), modules are referred to by their path on the file
> system using apache.import_module, for example "my_module =
> apache.import_module('/home/username/my_proj/my_module.py')".
>
> the problem becomes that this method of importing doesn't register the
> module name with sys.modules. therefore, if I have a pickled instance of
> some class my_module.MyClass, when I try to load the pickled instance,
> python would complain that there is "No module named my_module" (as
> described by the OP), even if I had loaded it using apache.import_module.
>
> the workaround that I found looks something like the following.
>
> import sys
> def index(req):
>     my_module = apache.import_module('/home/username/my_proj/my_module.py')
>     sys.modules['my_module'] = my_module
>
> this code ensures that my_module is registered with the list of modules
> python knows about in sys.modules, so that when I load that pickled instance
> of my_module.MyClass, python knows about a module named "my_module" and thus
> can properly load the class.
>
> I should note that, in practice, this has actually worked for me. whether or
> not it's a good idea, though, is another question.
>
> what do you all think? have I gone horribly wrong, or is this a viable work
> around to loading a pickled instance of a class?

Why don't you do what the document suggests you do?

That is, put common code into a proper Python module/package in a
directory outside of the document tree served/managed by Apache and
use PythonPath directive to indicate where that directory is. Then use
standard 'import' statement to import that module. Thus code is in
standard module/package and not a special mod_python code module.

It is generally regarded as being bad practice to put too much code
within directories managed by Apache/mod_python anyway, because a
misconfiguration could expose your code to download, especially if the
code isn't even in a handler code file.

As to your code change. This could technically break at some point
because a thread race condition exists in modifying sys.modules. It is
also not really a good idea to have pickleable code coming from a
module which could be reloaded as multiple versions of class types and
thus multiple variations of instances could exist. This can cause
problems when comparing object types etc, if object instances are
passed/cached outside of that specific code file. You also have a
potential ordering issue here as well. What if something tries to
unpickle data requiring my_module before you have managed to load it.

So, I certainly would just recommend you factor out your common class
definitions etc into standard Python modules/packages installed on
normal Python module search path and don't store them in reloadable
mod_python managed code module files.

Graham
From martijn at xs4us.nu  Thu Jul 31 05:17:20 2008
From: martijn at xs4us.nu (Martijn)
Date: Thu Jul 31 05:17:49 2008
Subject: [mod_python] Upload progress indicator shows after upload?
In-Reply-To: <44CFE03E.40604@gmail.com>
References: <44CFE03E.40604@gmail.com>
Message-ID: <200807311117.20043.martijn@xs4us.nu>

Hi,

I would suggest a few things.

In stead of images I would use a DIV with either a background image (use CSS 
repeat and a n imagewitdh of 1) with that you can make a nice progressbar)

Next you need to req.write and req.flush in your while bytes_left loop 
otherwise no updates are send to the browser. you can send something like:
"<script>window.parent.getElementById('yourdiv').style.width=(maxwidth/100)*[yourcalculatedwith]</script>"
(this example is an indication it has to be checked) 

On the broser site, you can do a lot of things but I suggest using a hidden 
iframe where you set the target of the upload to...
You can also choose to put the progessbar in the Iframe, and do a "show" 
before the submit. Right after you can send another script to hide it again 
or make the iframe dissappear when it finished loading (by sending something 
right after the upload started: <script 
defer=true>window.parent.getElementById('YourIframe').visable=false</script>
the defer=true will make it run after all the the page finished loading 

I used different ways to make a progressbar in different projects all is 
depending on how you organise things in your site. The req.write en even more 
important the req.flush in the loop should do the trick.

All the other stuff is not Mod_python related.

Martijn


On Wednesday 02 August 2006 01:14, jadacyrus wrote:
> Essentially this is what I have setup for my upload script:
>
> [code]
>
> #HTML Stuff here
> #Declare variables etc...
>
>     while bytes_left >= 0:
>             fileData = req.form['filename'].file.read(1024)
>             filebuffer = filebuffer + fileData
>             bytes_left = bytes_left - 1024
>             bytes_read = bytes_read + 1024
>             percent = bytes_read/int(length) * 100
>
> #Some nested IF statements to display a progress indicator using images
> based on the percent variable.
>
> [/code]
>
> This is contained in my upload.py in the function upFile which is called
> from the POST method. However, It seems that the file uploads completely
> first and then it will show the progress indications afterwards. However
> this doesn't seem to be logically what my code should be doing. I'm
> somewhat new to mod_python but not python in general, any suggestions?
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
