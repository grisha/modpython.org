<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Re: File/Image upload
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20File/Image%20upload&In-Reply-To=200407080133.09965.neto%40visuaw.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015898.html">
   <LINK REL="Next"  HREF="015905.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Re: File/Image upload</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Benjamin Niemann</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20File/Image%20upload&In-Reply-To=200407080133.09965.neto%40visuaw.net"
       TITLE="[mod_python] Re: File/Image upload">b.niemann at betternet.de
       </A><BR>
    <I>Thu Jul  8 10:53:24 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="015898.html">[mod_python] File/Image upload
</A></li>
        <LI>Next message: <A HREF="015905.html">[mod_python] mod_python and unittest
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15899">[ date ]</a>
              <a href="thread.html#15899">[ thread ]</a>
              <a href="subject.html#15899">[ subject ]</a>
              <a href="author.html#15899">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Victor Tortorello Neto wrote:
&gt;<i> Hello!
</I>&gt;<i> 
</I>&gt;<i> I'm trying to upload an image to server. I was trying on Windows, opening an 
</I>&gt;<i> &quot;fd&quot; and writing image content in the fd.
</I>&gt;<i> 
</I>&gt;<i> I don't know if it's the best way to do this, if you know a better way please 
</I>&gt;<i> tell me! :)
</I>&gt;<i> 
</I>&gt;<i> Everything happens ok with Windows, open the fd with os.O_BINARY flag.
</I>&gt;<i> 
</I>&gt;<i> Today I have to migrate the web site to Linux, and only image upload has a 
</I>&gt;<i> problem, this problem.
</I>&gt;<i> 
</I>&gt;<i> Well, my question is:
</I>&gt;<i> 
</I>&gt;<i> Has some flag equivalent to Windows O_BINARY on Linux?
</I>Not really. Using O_BINARY won't hurt and is good practice to avoid 
problems when moving from UNIX style systems to windows. UNIX style 
systems - including Linux - always treat a file as binary data.

&gt;<i> And my error output:
</I>&gt;<i> 
</I>&gt;<i> IOError: image file is truncated (30 bytes not processed)
</I>When you try to open the uploaded file for reading? Is the file created 
at all?
A common problem for UNIX newcomers (and fileuploads through webservers 
in general) are access restrictions for the directory where the files 
are stored. Is the user, the webserver is running under (often something 
like www or www-data), allowed to write to the directory? Try &quot;chmod a+w 
dirname&quot;. If this works, look for more info about UNIX users, groups and 
permissions and find some working but more restrictive settings (a+w 
grants write access to everyone..).

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015898.html">[mod_python] File/Image upload
</A></li>
	<LI>Next message: <A HREF="015905.html">[mod_python] mod_python and unittest
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15899">[ date ]</a>
              <a href="thread.html#15899">[ thread ]</a>
              <a href="subject.html#15899">[ subject ]</a>
              <a href="author.html#15899">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
