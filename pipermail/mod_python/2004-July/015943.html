<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] python_cleanup/bsddb error
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20python_cleanup/bsddb%20error&In-Reply-To=20040715150600.C27164%40saint.ironport.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015940.html">
   <LINK REL="Next"  HREF="015942.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] python_cleanup/bsddb error</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>David Fraser</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20python_cleanup/bsddb%20error&In-Reply-To=20040715150600.C27164%40saint.ironport.com"
       TITLE="[mod_python] python_cleanup/bsddb error">davidf at sjsoft.com
       </A><BR>
    <I>Fri Jul 16 11:16:48 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="015940.html">[mod_python] python_cleanup/bsddb error
</A></li>
        <LI>Next message: <A HREF="015942.html">[mod_python] Multiple interpreter instances?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15943">[ date ]</a>
              <a href="thread.html#15943">[ thread ]</a>
              <a href="subject.html#15943">[ subject ]</a>
              <a href="author.html#15943">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi

I'm not sure of this, but sometimes the cleanup functions give an error 
because they end up getting run in restricted mode.
But in this case the error message posted is here:

&gt;<i> [Thu Jul 12 19:27:04 2004] [error] [client 10.1.1.67] python_cleanup: 
</I>&gt;<i> Error calling cleanup object &lt;function dbm_cleanup at 0x823fc8c&gt;, 
</I>&gt;<i> referer: <A HREF="http://mymachine/home">http://mymachine/home</A>
</I>&gt;<i> [Thu Jul 12 19:27:04 2004] [error] [client 10.1.1.67] bsddb.error: 
</I>&gt;<i> (22, 'Invalid argument'), referer: <A HREF="http://mymachine/home">http://mymachine/home</A>
</I>
Can you post more details on how you register the cleanup etc, any 
reasons why it might be giving an invalid argument?

David

Krishna Srinivasan wrote:

&gt;<i>
</I>&gt;<i> Greetings.
</I>&gt;<i>
</I>&gt;<i> Can some one please help me with this ?
</I>&gt;<i>
</I>&gt;<i> The /tmp/mp_sess.dbm is just growing
</I>&gt;<i> with time and doesn't get cleaned
</I>&gt;<i> up at all. Please atleast let me know
</I>&gt;<i> if this is NOT a mod_python error or
</I>&gt;<i> some dbm-module error, so I can investigate
</I>&gt;<i> further as to what is wrong.
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i> Krishna.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ---------- Forwarded message ----------
</I>&gt;<i> Date: Tue, 13 Jul 2004 16:33:19 -0700 (PDT)
</I>&gt;<i> From: Krishna Srinivasan &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">krishna at ironport.com</A>&gt;
</I>&gt;<i> To: Modpython &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>&gt;
</I>&gt;<i> Subject: python_cleanup/bsddb error
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Greetings.
</I>&gt;<i>
</I>&gt;<i> I get the following errors in my error_log.
</I>&gt;<i> I guess this is why my sessions don't get
</I>&gt;<i> cleaned up at all and hence the mp_sess.dbm
</I>&gt;<i> in /tmp is always growing.
</I>&gt;<i>
</I>&gt;<i> [Thu Jul 12 19:27:04 2004] [notice] [client 10.1.1.67] DbmSession: 
</I>&gt;<i> registered database cleanup., referer: <A HREF="http://mymachine/home">http://mymachine/home</A>
</I>&gt;<i> [Thu Jul 12 19:27:04 2004] [error] [client 10.1.1.67] python_cleanup: 
</I>&gt;<i> Error calling cleanup object &lt;function dbm_cleanup at 0x823fc8c&gt;, 
</I>&gt;<i> referer: <A HREF="http://mymachine/home">http://mymachine/home</A>
</I>&gt;<i> [Thu Jul 12 19:27:04 2004] [error] [client 10.1.1.67] bsddb.error: 
</I>&gt;<i> (22, 'Invalid argument'), referer: <A HREF="http://mymachine/home">http://mymachine/home</A>
</I>&gt;<i>
</I>&gt;<i> Can someone please give me pointers as to
</I>&gt;<i> how to correctly clean up the db ?
</I>&gt;<i>
</I>&gt;<i> Many thanks,
</I>&gt;<i> Krishna. 
</I>

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015940.html">[mod_python] python_cleanup/bsddb error
</A></li>
	<LI>Next message: <A HREF="015942.html">[mod_python] Multiple interpreter instances?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15943">[ date ]</a>
              <a href="thread.html#15943">[ thread ]</a>
              <a href="subject.html#15943">[ subject ]</a>
              <a href="author.html#15943">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
