<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Subinterpreters and index.py
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Subinterpreters%20and%20index.py&In-Reply-To=40E43A87.5010309%40joreybump.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015850.html">
   <LINK REL="Next"  HREF="015858.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Subinterpreters and index.py</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Nicolas Lehuen</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Subinterpreters%20and%20index.py&In-Reply-To=40E43A87.5010309%40joreybump.com"
       TITLE="[mod_python] Subinterpreters and index.py">nicolas at lehuen.com
       </A><BR>
    <I>Thu Jul  1 19:58:42 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="015850.html">[mod_python] Subinterpreters and index.py
</A></li>
        <LI>Next message: <A HREF="015858.html">[mod_python] Subinterpreters and index.py
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15854">[ date ]</a>
              <a href="thread.html#15854">[ thread ]</a>
              <a href="subject.html#15854">[ subject ]</a>
              <a href="author.html#15854">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Jorey Bump wrote:

&gt;<i> Nicolas Lehuen wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; Hi,
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; I'm encoutering an unexpected behaviours while using the publisher 
</I>&gt;<i> &gt; handlers and two index.py, one in /app/index.py and one in 
</I>&gt;<i> /app/subdir/index.py.
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; When I first call <A HREF="http://localhost/app/,">http://localhost/app/,</A> /app/index.py is 
</I>&gt;<i> called. Then 
</I>&gt;<i> &gt; if I call <A HREF="http://localhost/app/subdir/,">http://localhost/app/subdir/,</A> 
</I>&gt;<i> /app/subdir/index.py is called 
</I>&gt;<i> &gt; allright, but then if I try again <A HREF="http://localhost/app/,">http://localhost/app/,</A> I 
</I>&gt;<i> always get 
</I>&gt;<i> &gt; /app/subdir/index.py !
</I>&gt;<i> 
</I>&gt;<i> Modules are namespaces, regardless of their physical 
</I>&gt;<i> location. This is very important, even within subinterpreters.
</I>
I do understand this, and that's why I think that the module defined in
/app/index.py should not be overwritten by the one defined in
/app/subdir/index.py. Maybe the namespace of the module defined by
/app/subdir/index.py should be created within the namespace of the module
defined by /app/index.py, so that the latter would inherit names from the
former ? It seems that the publisher load each .py file as modules based on
the filename only, hence the name collisions. If directories or URIs could
be taken into account, this collision problem would disappear.

&gt;<i> mod_python already puts the directory at the front of the 
</I>&gt;<i> sys.path. You can determine this by creating a module:
</I>
[snip code]

Well, that's the first thing I tried a few month ago, but that's not the
case on my installation (Apache2 + mod_python running on Windows 2000 SP4).
Maybe this is due to the fact that I used the PythonPath directive ? I
defined it like this (in httpd.conf) :

LoadModule python_module python/mod_python.so
AddHandler mod_python .py .psp
PythonPath
&quot;sys.path+['C:/apache/python/Lib','C:/apache/Subversion/python','C:/apache/t
rac']&quot;
PythonHandler mod_python.publisher | .py
PythonHandler mod_python.psp | .psp
PythonDebug On

How can I benefit from the behaviour you describe while also declaring the
libraries I need on the Python path ?

Thanks for your help,

Regards,

Nicolas

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015850.html">[mod_python] Subinterpreters and index.py
</A></li>
	<LI>Next message: <A HREF="015858.html">[mod_python] Subinterpreters and index.py
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15854">[ date ]</a>
              <a href="thread.html#15854">[ thread ]</a>
              <a href="subject.html#15854">[ subject ]</a>
              <a href="author.html#15854">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
