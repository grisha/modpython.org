<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Output filters and 4xx error codes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Output%20filters%20and%204xx%20error%20codes&In-Reply-To=C56D4E6F.25236%25andrewr%40collab.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025854.html">
   <LINK REL="Next"  HREF="025858.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Output filters and 4xx error codes</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Output%20filters%20and%204xx%20error%20codes&In-Reply-To=C56D4E6F.25236%25andrewr%40collab.net"
       TITLE="[mod_python] Output filters and 4xx error codes">graham.dumpleton at gmail.com
       </A><BR>
    <I>Tue Dec 16 15:37:04 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="025854.html">[mod_python] Output filters and 4xx error codes
</A></li>
        <LI>Next message: <A HREF="025858.html">[mod_python] Output filters and 4xx error codes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25855">[ date ]</a>
              <a href="thread.html#25855">[ thread ]</a>
              <a href="subject.html#25855">[ subject ]</a>
              <a href="author.html#25855">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Post your Apache configuration snippet which shows in what context you
are setting up your fixup handler, ie., what URL subset.

For error documents, is it falling back to builtin Apache error
document strings or is ErrorDocument directive actually being set for
that error type?

Graham

2008/12/17 Andrew Ryan &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">andrewr at collab.net</A>&gt;:
&gt;<i> We have a mod_python tool which uses a FixupHandler to do some reverse
</I>&gt;<i> proxying and inline-rewriting (for the general idea, see Graham's example in
</I>&gt;<i> <A HREF="http://www.modpython.org/pipermail/mod_python/2006-March/020507.html">http://www.modpython.org/pipermail/mod_python/2006-March/020507.html</A>). In
</I>&gt;<i> the handler, we register an output filter, which does the inspecting and
</I>&gt;<i> rewriting of content.
</I>&gt;<i>
</I>&gt;<i> This works great as long as the response code sent back is 2xx or 3xx. But
</I>&gt;<i> in the case of a 4xx error code, the output filter doesn't run. Instead it
</I>&gt;<i> seems to trigger the proxy server's &quot;ErrorDocument&quot; setting. This is
</I>&gt;<i> problematic, since we'd like to see the real server's error page, not the
</I>&gt;<i> default one from the reverse proxy server.
</I>&gt;<i>
</I>&gt;<i> As far as I can tell from inspecting the request object, the fixuphandler
</I>&gt;<i> never sees the returned content, only the incoming request. And the
</I>&gt;<i> outputfilter is the only place that the outgoing content is seen. If it
</I>&gt;<i> isn't run, well, I don't see any other chance to modify the content that
</I>&gt;<i> gets sent back to the client.
</I>&gt;<i>
</I>&gt;<i> Sounds like this person was having a similar problem, but there is no
</I>&gt;<i> mention of a solution:
</I>&gt;<i> <A HREF="http://mail-archives.apache.org/mod_mbox/httpd-users/200710.mbox/%3Ca7a2b76b">http://mail-archives.apache.org/mod_mbox/httpd-users/200710.mbox/%3Ca7a2b76b</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">0710020850i3b2a0a25wd005f85350526ffa at mail.gmail.com</A>%3E
</I>&gt;<i> He was using mod_proxy though, which has the ProxyErrorOverride option. I
</I>&gt;<i> don't think there's an equivalent in mod_python, or something similar, but
</I>&gt;<i> I'm not sure.
</I>&gt;<i>
</I>&gt;<i> I was hoping someone else here had seen this problem and could offer a
</I>&gt;<i> suggestion.
</I>&gt;<i>
</I>&gt;<i> Thanks
</I>&gt;<i> --andrew
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I></PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025854.html">[mod_python] Output filters and 4xx error codes
</A></li>
	<LI>Next message: <A HREF="025858.html">[mod_python] Output filters and 4xx error codes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25855">[ date ]</a>
              <a href="thread.html#25855">[ thread ]</a>
              <a href="subject.html#25855">[ subject ]</a>
              <a href="author.html#25855">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
