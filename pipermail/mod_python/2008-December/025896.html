<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Apache/mod_python: Registering a request handler
	dynamically
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Apache/mod_python%3A%20Registering%20a%20request%20handler%0A%09dynamically&In-Reply-To=1230503387.26523.31.camel%40localhost">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025895.html">
   <LINK REL="Next"  HREF="025897.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Apache/mod_python: Registering a request handler
	dynamically</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Apache/mod_python%3A%20Registering%20a%20request%20handler%0A%09dynamically&In-Reply-To=1230503387.26523.31.camel%40localhost"
       TITLE="[mod_python] Apache/mod_python: Registering a request handler
	dynamically">graham.dumpleton at gmail.com
       </A><BR>
    <I>Sun Dec 28 18:26:20 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="025895.html">[mod_python] Apache/mod_python: Registering a request handler
	dynamically
</A></li>
        <LI>Next message: <A HREF="025897.html">[mod_python] Apache/mod_python: Registering a request handler
	dynamically
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25896">[ date ]</a>
              <a href="thread.html#25896">[ thread ]</a>
              <a href="subject.html#25896">[ subject ]</a>
              <a href="author.html#25896">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>2008/12/29 Samuel Abels &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">newsgroups at debain.org</A>&gt;:
&gt;<i> On Mon, 2008-12-29 at 09:11 +1100, Graham Dumpleton wrote:
</I>&gt;&gt;<i> If they can run CGI scripts already, then they can run a WSGI script.
</I>&gt;&gt;<i> They would not need to make changes to Apache configuration. That
</I>&gt;&gt;<i> example relies on having Python 2.5 for wsgiref, but you could instead
</I>&gt;&gt;<i> package your own simple CGI-WSGI bridge.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If they already have mod_wsgi available and Apache is configured to
</I>&gt;&gt;<i> run wsgi-script file type, or they can set AddHandler in .htaccess
</I>&gt;&gt;<i> file (same as CGI case), the same script will run fine with no
</I>&gt;&gt;<i> additional packages needing to be installed.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If they already have mod_python available and they can set AddHandler
</I>&gt;&gt;<i> in .htaccess file (same as CGI), you could supply your own
</I>&gt;&gt;<i> mod_python-WSGI bridge.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If they already have fastcgi/scgi/ajp available, they just need to
</I>&gt;&gt;<i> have flup installed, which supplies a WSGI bridge for those protocols.
</I>&gt;<i>
</I>&gt;<i> To summarize, all require action on part of the user and only work with
</I>&gt;<i> AllowOverride.
</I>
Yes, you can't avoid configuration. Configuration either has to be
done in main Apache configuration, or appropriate rights have to be
available to allow a user to do it themselves in .htaccess file. For
some hosting solutions you also need additional Python packages
installed which provide adapters, unless you are going to bundle them
all with your application.

Going back to your original request to be able to write:

  apache.set_default_handler(myhandler)

This can simply not work as the script file will not be loaded until a
request arrives which maps to that script, which is by then too late
to run that code.

One can provide handlers for various phases of Apache
programmatically, but it requires you to have written at least one
hook function to register it. This requires configuration to even have
that run and the registration is only for that specific request and
cannot be registered for all requests.

&gt;&gt;<i> So, WSGI can already be hosted on top of varying solutions. You seem
</I>&gt;&gt;<i> to suggest you want to ignore that and write your own bridges for all
</I>&gt;&gt;<i> the different hosting mechanisms out there, as well as come up with
</I>&gt;&gt;<i> your own private interface specification for talking to your
</I>&gt;&gt;<i> application.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> So, all this stuff has been done, but if you want to re-invent a lot
</I>&gt;&gt;<i> of stuff, that is your call.
</I>&gt;<i>
</I>&gt;<i> I am using WSGI as one alternative. The point is in adding fallback
</I>&gt;<i> solutions.
</I>
Then you are looking at it the wrong way. You should be targeting WSGI
API exclusively for how your application talks to the web server as it
is more or less now the Python standard for doing this. This way you
don't have to provide the support for the fallbacks as the existing
third party adapters, or built in support in hosting solutions for
WSGI should be used. You will find that all the major Python web
frameworks/applications are heading this way. Ie., ditching all but
WSGI support and relying on separate adapters for WSGI where needed.

Part of the problem as I sort of see it, is it looks like you have
made the decision to write your application against the mod_python
specific APIs and are now stuck because you have to make it work on
other hosting solutions, by creating your own custom adapters and fake
requests objects that look like mod_python request object. If you need
portability and this is what you are doing, then using mod_python
specific APIs was a poor choice to make.

Frankly, no new application code should be targeting mod_python
specific APIs, or using mod_python specific high level handlers. The
only good reason for using mod_python these days is if you need to
write custom handlers for interacting specifically with Apache, but
not for the content handler phase, only for earlier phases of request
handling.

So, long term goal of anyone writing actual content generating Python
web applications should really be to migrate to WSGI API.

Graham
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025895.html">[mod_python] Apache/mod_python: Registering a request handler
	dynamically
</A></li>
	<LI>Next message: <A HREF="025897.html">[mod_python] Apache/mod_python: Registering a request handler
	dynamically
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25896">[ date ]</a>
              <a href="thread.html#25896">[ thread ]</a>
              <a href="subject.html#25896">[ subject ]</a>
              <a href="author.html#25896">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
