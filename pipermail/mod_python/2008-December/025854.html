<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Output filters and 4xx error codes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Output%20filters%20and%204xx%20error%20codes&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025866.html">
   <LINK REL="Next"  HREF="025855.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Output filters and 4xx error codes</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Andrew Ryan</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Output%20filters%20and%204xx%20error%20codes&In-Reply-To="
       TITLE="[mod_python] Output filters and 4xx error codes">andrewr at collab.net
       </A><BR>
    <I>Tue Dec 16 15:24:15 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="025866.html">[mod_python] modpython, mysqldb best paractice
</A></li>
        <LI>Next message: <A HREF="025855.html">[mod_python] Output filters and 4xx error codes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25854">[ date ]</a>
              <a href="thread.html#25854">[ thread ]</a>
              <a href="subject.html#25854">[ subject ]</a>
              <a href="author.html#25854">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>We have a mod_python tool which uses a FixupHandler to do some reverse
proxying and inline-rewriting (for the general idea, see Graham's example in
<A HREF="http://www.modpython.org/pipermail/mod_python/2006-March/020507.html">http://www.modpython.org/pipermail/mod_python/2006-March/020507.html</A>). In
the handler, we register an output filter, which does the inspecting and
rewriting of content.

This works great as long as the response code sent back is 2xx or 3xx. But
in the case of a 4xx error code, the output filter doesn't run. Instead it
seems to trigger the proxy server's &quot;ErrorDocument&quot; setting. This is
problematic, since we'd like to see the real server's error page, not the
default one from the reverse proxy server.

As far as I can tell from inspecting the request object, the fixuphandler
never sees the returned content, only the incoming request. And the
outputfilter is the only place that the outgoing content is seen. If it
isn't run, well, I don't see any other chance to modify the content that
gets sent back to the client.

Sounds like this person was having a similar problem, but there is no
mention of a solution:
<A HREF="http://mail-archives.apache.org/mod_mbox/httpd-users/200710.mbox/%3Ca7a2b76b">http://mail-archives.apache.org/mod_mbox/httpd-users/200710.mbox/%3Ca7a2b76b</A>
<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">0710020850i3b2a0a25wd005f85350526ffa at mail.gmail.com</A>%3E
He was using mod_proxy though, which has the ProxyErrorOverride option. I
don't think there's an equivalent in mod_python, or something similar, but
I'm not sure.

I was hoping someone else here had seen this problem and could offer a
suggestion. 

Thanks
--andrew

</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025866.html">[mod_python] modpython, mysqldb best paractice
</A></li>
	<LI>Next message: <A HREF="025855.html">[mod_python] Output filters and 4xx error codes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25854">[ date ]</a>
              <a href="thread.html#25854">[ thread ]</a>
              <a href="subject.html#25854">[ subject ]</a>
              <a href="author.html#25854">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
