<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] ImportError issue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20ImportError%20issue&In-Reply-To=493680E5.9040002%40knewco.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025811.html">
   <LINK REL="Next"  HREF="025815.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] ImportError issue</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20ImportError%20issue&In-Reply-To=493680E5.9040002%40knewco.com"
       TITLE="[mod_python] ImportError issue">graham.dumpleton at gmail.com
       </A><BR>
    <I>Wed Dec  3 17:35:45 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="025811.html">[mod_python] ImportError issue
</A></li>
        <LI>Next message: <A HREF="025815.html">[mod_python] ImportError issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25814">[ date ]</a>
              <a href="thread.html#25814">[ thread ]</a>
              <a href="subject.html#25814">[ subject ]</a>
              <a href="author.html#25814">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>2008/12/3 Reuben A Christie &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">christie at knewco.com</A>&gt;:
&gt;<i> Hi all, I am pretty novice user of mod_python. and there is an issue that I
</I>&gt;<i> am experiencing with mod_python scripts for past 2 days that I am not able
</I>&gt;<i> to solve.
</I>&gt;<i>
</I>&gt;<i> my directory structure is as following,
</I>&gt;<i>
</I>&gt;<i> DocumentRoot :  /usr/local/apache2/htdocs/
</I>&gt;<i> i have a directory structure for mod_python scripts under DocumentRoot is,
</I>&gt;<i>
</I>&gt;<i> launch.py
</I>&gt;<i> python_test/p1/test1
</I>&gt;<i> python_test/p2/test2
</I>&gt;<i>
</I>&gt;<i> in apache config, i have added following
</I>&gt;<i>
</I>&gt;<i> &lt;Directory /usr/local/apache/htdocs/python_test &gt;
</I>&gt;<i>       AllowOverride All
</I>&gt;<i>       Order allow,deny
</I>&gt;<i>       allow from all             AddHandler mod_python .py
</I>&gt;<i>       PythonHandler launch
</I>&gt;<i>       PythonDebug On
</I>&gt;<i> &lt;/Directory&gt;
</I>&gt;<i>
</I>&gt;<i> and launch.py looks like this,
</I>&gt;<i>
</I>&gt;<i> import os.path
</I>&gt;<i> from mod_python import apache, Session, util
</I>&gt;<i>
</I>&gt;<i> def handler(req):
</I>&gt;<i>       request = os.path.splitext(os.path.basename( req.uri ))[0]
</I>&gt;<i>       req.content_type = 'text/plain'
</I>&gt;<i>       req.send_http_header()
</I>&gt;<i>
</I>&gt;<i>       status = apache.OK
</I>&gt;<i>       if request != None:
</I>&gt;<i>               mod = __import__(request)
</I>
This is the wrong way of going about it. See below.

&gt;<i>               if request == &quot;test1&quot;:
</I>&gt;<i>                       status = mod.handler(req)
</I>&gt;<i>        return status
</I>&gt;<i>            basically this script should act as gateway for rest of the
</I>&gt;<i> python scripts .
</I>&gt;<i>
</I>&gt;<i> when I test it with, <A HREF="http://localhost/python_test/test1.py">http://localhost/python_test/test1.py</A> it does not work
</I>&gt;<i> (i get Not found message) and if I do <A HREF="http://localhost/python_test/p1">http://localhost/python_test/p1</A> i get
</I>&gt;<i> the source code of the script appear.
</I>
For configuration as written, the launch.py file is in wrong location.

First off suggest that launch.py not be in htdocs as then someone can
download source code to your handler.

Presuming you are using mod_python 3.3.1 (if not then upgrade), move
the launch.py file elsewhere and then change configuration to use:

  PythonHandler /some/path/launch.py

Where path is location of launch.py outside of htdocs.

Also don't use __import__. You are better off using import_module()
from mod_python. That way you can just supply a path to file to import
and not have to worry about PythonPath and lots of other module
madness. See:

  <A HREF="http://www.modpython.org/live/current/doc-html/pyapi-apmeth.html">http://www.modpython.org/live/current/doc-html/pyapi-apmeth.html</A>

Graham
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025811.html">[mod_python] ImportError issue
</A></li>
	<LI>Next message: <A HREF="025815.html">[mod_python] ImportError issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25814">[ date ]</a>
              <a href="thread.html#25814">[ thread ]</a>
              <a href="subject.html#25814">[ subject ]</a>
              <a href="author.html#25814">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
