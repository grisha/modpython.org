<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Problems w/ sqlite3
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Problems%20w/%20sqlite3&In-Reply-To=20081218110902.GB1783%40awa.mat.agh.edu.pl">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025870.html">
   <LINK REL="Next"  HREF="025872.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Problems w/ sqlite3</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Problems%20w/%20sqlite3&In-Reply-To=20081218110902.GB1783%40awa.mat.agh.edu.pl"
       TITLE="[mod_python] Problems w/ sqlite3">graham.dumpleton at gmail.com
       </A><BR>
    <I>Thu Dec 18 06:20:08 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="025870.html">[mod_python] Problems w/ sqlite3
</A></li>
        <LI>Next message: <A HREF="025872.html">[mod_python] Problems w/ sqlite3
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25871">[ date ]</a>
              <a href="thread.html#25871">[ thread ]</a>
              <a href="subject.html#25871">[ subject ]</a>
              <a href="author.html#25871">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>2008/12/18 Pawel Oleksik &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">oleksik at awa.mat.agh.edu.pl</A>&gt;:
&gt;<i> On Thu, Dec 18, 2008 at 09:10:54PM +1100, Graham Dumpleton wrote:
</I>&gt;&gt;<i> Did you try disabling PHP altogether and then see if your code worked?
</I>&gt;&gt;<i> This would eliminate PHP still causing a conflict.
</I>&gt;<i>
</I>&gt;<i> You are absolutely right, I should be more thorough.
</I>&gt;<i> After commenting out the line that loads php (and restarting server) there is
</I>&gt;<i> still the problem. So indeed it seems to not be a conflict w/ php.
</I>&gt;<i>
</I>&gt;&gt;<i> And how do you know it is not a permissions problem? Apache/mod_python
</I>&gt;&gt;<i> runs as special user and SQLite has a requirement that both the
</I>&gt;<i> I read about this problem, so for test time set rights to 777 (for directory)
</I>&gt;<i> and 555 (for file).  (No danger at this moment: the server is not connected to
</I>&gt;<i> world.) Owner of parent directory and file is now apache:apache.
</I>&gt;<i> All up-to-root path is readable and searchable.
</I>&gt;<i>
</I>&gt;&gt;<i> So, how about actually posting what the error tracebacks are you are
</I>&gt;&gt;<i> getting so can see what actual problem is rather than what you think
</I>&gt;&gt;<i> it is.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Graham
</I>&gt;<i>
</I>&gt;<i> OK. Full log is quite long, so I'm pasting the most important lines.
</I>&gt;<i>
</I>&gt;<i> Script output:
</I>&gt;<i>
</I>&gt;<i> sqlite version: 2.3.2
</I>&gt;<i> sqlite3 version: 3.6.6.2
</I>&gt;<i> /usr/lib/python2.5/sqlite3/__init__.pyc
</I>&gt;<i> user: 80, GID: 80
</I>&gt;<i> groups: [80]
</I>&gt;<i> effective:
</I>&gt;<i>    EUID:80 EGID: 80
</I>&gt;<i>
</I>&gt;<i> Test:
</I>&gt;<i>
</I>&gt;<i> ## here is an exception and below its traceback (partial):
</I>&gt;<i>
</I>&gt;<i> MOD_PYTHON ERROR
</I>&gt;<i>
</I>&gt;<i> ServerName:     '127.0.0.1'
</I>&gt;<i> DocumentRoot:   '/srv/httpd/htdocs'
</I>&gt;<i> URI:            '/py-test/one.py'
</I>&gt;<i> Location:       None
</I>&gt;<i> Directory:      '/home/ftp/py-test/'
</I>&gt;<i> Filename:       '/home/ftp/py-test/one.py'
</I>&gt;<i> PathInfo:       ''
</I>&gt;<i> Phase:          'PythonHandler'
</I>&gt;<i> Handler:        'one'
</I>&gt;<i>
</I>&gt;<i> Traceback (most recent call last):
</I>&gt;<i>  File &quot;/usr/lib/python2.5/site-packages/mod_python/importer.py&quot;, line 1537 ..
</I>&gt;<i>  File &quot;/usr/lib/python2.5/site-packages/mod_python/importer.py&quot;, line 1229 ..
</I>&gt;<i>  File &quot;/usr/lib/python2.5/site-packages/mod_python/importer.py&quot;, line 1128 ..
</I>&gt;<i>
</I>&gt;<i>  File &quot;/home/ftp/py-test/one.py&quot;, line 16, in handler
</I>&gt;<i>    request.write( open_db() )
</I>&gt;<i>
</I>&gt;<i>  File &quot;/home/ftp/py-test/one.py&quot;, line 48, in open_db
</I>&gt;<i>    conn = sqlite3.connect('/home/ftp/DB/db_test')
</I>&gt;<i>
</I>&gt;<i> SystemError: NULL result without error in PyObject_Call
</I>
Did you check other Apache modules for dependencies like originally suggested.

<A HREF="http://www.mail-archive.com/sqlite-users@sqlite.org/msg34866.html">http://www.mail-archive.com/sqlite-users@sqlite.org/msg34866.html</A>

In particular, are you loading mod_mem_cache?

There is lots of other discussion around about this error as well and
other reasons it could occur as well. How many of them have you looked
at?

One thing to make sure you do, do a full stop of Apache and not just a
restart/reload. If the latter is done it can in some circumstances not
unloaded libraries properly and class may still exist.

Graham
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025870.html">[mod_python] Problems w/ sqlite3
</A></li>
	<LI>Next message: <A HREF="025872.html">[mod_python] Problems w/ sqlite3
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25871">[ date ]</a>
              <a href="thread.html#25871">[ thread ]</a>
              <a href="subject.html#25871">[ subject ]</a>
              <a href="author.html#25871">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
