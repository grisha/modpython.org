<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] mod_chroot &amp; mod_python problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_chroot%20%26%20mod_python%20problem&In-Reply-To=000201c50cfb%246af6a200%24747882c3%40jonsof">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017354.html">
   <LINK REL="Next"  HREF="017356.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] mod_chroot &amp; mod_python problem</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_chroot%20%26%20mod_python%20problem&In-Reply-To=000201c50cfb%246af6a200%24747882c3%40jonsof"
       TITLE="[mod_python] mod_chroot &amp; mod_python problem">grahamd at dscpl.com.au
       </A><BR>
    <I>Mon Feb  7 05:22:47 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="017354.html">[mod_python] mod_chroot &amp; mod_python problem
</A></li>
        <LI>Next message: <A HREF="017356.html">[mod_python] mod_chroot &amp; mod_python problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17355">[ date ]</a>
              <a href="thread.html#17355">[ thread ]</a>
              <a href="subject.html#17355">[ subject ]</a>
              <a href="author.html#17355">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Can you possibly run Apache manually yourself within the context of the 
chroot jail?

In the code prior to that point, it does:

     if (! ((m = PyImport_ImportModule(MODULENAME)))) {
         fprintf(stderr, &quot;make_obcallback(): could not import %s.\n&quot;, 
MODULENAME);
     }

     if (! ((obCallBack = PyObject_CallMethod(m, INITFUNC, NULL)))) {
         fprintf(stderr, &quot;make_obcallback(): could not call %s.\n&quot;,
                 INITFUNC);
     }

The problem is these print to stderr and not to the log and you 
wouldn't see the
error messages. If you can run httpd manually, maybe you can then see 
stderr.

Alternatively, you could change the code to use the log file instead. 
In mod_python
3.1.3 it has:

     if (! ((m = PyImport_ImportModule(MODULENAME)))) {
         ap_log_error(APLOG_MARK, APLOG_NOERRNO|APLOG_ERR, 0, s,
                      &quot;make_obcallback: could not import %s.\n&quot;, 
MODULENAME);
         PyErr_Print();
     }

     if (m &amp;&amp; ! ((obCallBack = PyObject_CallMethod(m, INITFUNC, NULL)))) 
{
         ap_log_error(APLOG_MARK, APLOG_NOERRNO|APLOG_ERR, 0, s,
                      &quot;make_obcallback: could not call %s.\n&quot;, INITFUNC);
         PyErr_Print();
     }

This will at least give you a little bit more information.

One could speculate though that there isn't a Python distribution 
accessible within
the chroot jail, or if there is, then mod_python isn't installed into 
it.

Graham

On 07/02/2005, at 8:36 PM, John wrote:

&gt;<i> Hello all
</I>&gt;<i> &#160;
</I>&gt;<i> I am using Apache/1.3.28 (Linux/SuSE) mod_python/2.7.10 Python/2.3+ 
</I>&gt;<i> PHP/4.3.3 mod_ssl/2.8.15 OpenSSL/0.9.7b mod_chroot 0.4
</I>&gt;<i> &#160;
</I>&gt;<i> mod_python works outside the chroot jail but when i jail the apache i 
</I>&gt;<i> receive that error in my logs
</I>&gt;<i> &#160;
</I>&gt;<i> python_handler: make_obcallback returned no obCallBack!
</I>&gt;<i> &#160;
</I>&gt;<i> Does anyone know why this happen?
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017354.html">[mod_python] mod_chroot &amp; mod_python problem
</A></li>
	<LI>Next message: <A HREF="017356.html">[mod_python] mod_chroot &amp; mod_python problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17355">[ date ]</a>
              <a href="thread.html#17355">[ thread ]</a>
              <a href="subject.html#17355">[ subject ]</a>
              <a href="author.html#17355">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
