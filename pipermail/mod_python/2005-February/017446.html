<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] trying to upgrade to Python2.4, Apache2.0.53,
	Mod_Python3.1.4 on Mac OsX
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20trying%20to%20upgrade%20to%20Python2.4%2C%20Apache2.0.53%2C%0A%09Mod_Python3.1.4%20on%20Mac%20OsX&In-Reply-To=1108511435.9372%40dscpl.user.openhosting.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017445.html">
   <LINK REL="Next"  HREF="017447.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] trying to upgrade to Python2.4, Apache2.0.53,
	Mod_Python3.1.4 on Mac OsX</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>John Raines</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20trying%20to%20upgrade%20to%20Python2.4%2C%20Apache2.0.53%2C%0A%09Mod_Python3.1.4%20on%20Mac%20OsX&In-Reply-To=1108511435.9372%40dscpl.user.openhosting.com"
       TITLE="[mod_python] trying to upgrade to Python2.4, Apache2.0.53,
	Mod_Python3.1.4 on Mac OsX">jrraines at comcast.net
       </A><BR>
    <I>Tue Feb 15 19:40:23 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="017445.html">[mod_python] trying to upgrade to Python2.4, Apache2.0.53,
	Mod_Python3.1.4 on Mac OsX
</A></li>
        <LI>Next message: <A HREF="017447.html">[mod_python] trying to upgrade to Python2.4, Apache2.0.53,
	Mod_Python3.1.4 on Mac OsX
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17446">[ date ]</a>
              <a href="thread.html#17446">[ thread ]</a>
              <a href="subject.html#17446">[ subject ]</a>
              <a href="author.html#17446">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The libraries certainly seem to be there:

jraines-Computer:/usr/local jrraines$ ls lib/python2.4/config
Makefile        Setup           Setup.config    Setup.local     
config.c        config.c.in     install-sh      libpython2.4.a  
makesetup       python.o
jraines-Computer:/usr/local jrraines$ ls 
lib/python2.4/site-packages/mod_python
Cookie.py       Session.py      __init__.py     _psp.so         
apache.pyo      cgihandler.pyo  psp.pyo         publisher.pyo   
util.pyo
Cookie.pyc      Session.pyc     __init__.pyc    apache.py       
cgihandler.py   psp.py          publisher.py    util.py
Cookie.pyo      Session.pyo     __init__.pyo    apache.pyc      
cgihandler.pyc  psp.pyc         publisher.pyc   util.pyc

jraines-Computer:/usr/local jrraines$ ls
apache2 bin     include lib     man     share

jraines-Computer:/usr/local jrraines$ ls bin
AlchemyTVSetTuner       pcpmac                  pmvmac                  
psync                   python2.4
idle                    pgetfinfo               psetfinfo               
pydoc                   smtpd.py

jraines-Computer:/usr/local jrraines$ ls lib/python2.4/lib-dynload
ColorPicker.so          _Evt.so                 _Qt.so                  
_csv.so                 audioop.so              gestalt.so              
regex.so
MacOS.so                _File.so                _Res.so                 
_curses.so              autoGIL.so              grp.so                  
resource.so
Nav.so                  _Fm.so                  _Scrap.so               
_curses_panel.so        binascii.so             icglue.so               
rgbimg.so
OSATerminology.so       _Folder.so              _Snd.so                 
_heapq.so               bsddb185.so             imageop.so              
select.so
_AE.so                  _Help.so                _TE.so                  
_hotshot.so             bz2.so                  itertools.so            
sha.so
_AH.so                  _IBCarbon.so            _Win.so                 
_locale.so              cPickle.so              math.so                 
strop.so
_App.so                 _Icn.so                 _bisect.so              
_multibytecodec.so      cStringIO.so            md5.so                  
struct.so
_CF.so                  _Launch.so              _bsddb.so               
_random.so              cmath.so                mmap.so                 
syslog.so
_CG.so                  _List.so                _codecs_cn.so           
_socket.so              collections.so          nis.so                  
termios.so
_CarbonEvt.so           _Menu.so                _codecs_hk.so           
_ssl.so                 crypt.so                operator.so             
time.so
_Cm.so                  _Mlte.so                _codecs_iso2022.so      
_testcapi.so            datetime.so             parser.so               
timing.so
_Ctl.so                 _OSA.so                 _codecs_jp.so           
_tkinter.so             dbm.so                  pwd.so                  
unicodedata.so
_Dlg.so                 _Qd.so                  _codecs_kr.so           
_weakref.so             fcntl.so                pyexpat.so              
zlib.so
_Drag.so                _Qdoffs.so              _codecs_tw.so           
array.so                gdbm.so                 readline.so

I thought linking Mod_Python to the Python 2.4 code was taken care of 
by the &quot;--with-python=/usr/local/bin/python2.4&quot; ? It seems to have 
gotten the site-packages directory put into the right location.

On Feb 15, 2005, at 5:50 PM, Graham Dumpleton wrote:

&gt;<i> If you really want to use Python 2.4, you are going to have to somehow
</I>&gt;<i> force a reference to the Python library in mod_python.so. Since you 
</I>&gt;<i> aren't
</I>&gt;<i> using a framework install, not sure what the library is you have to 
</I>&gt;<i> force
</I>&gt;<i> link with. You might want to look for Python related libraries in such
</I>&gt;<i> directories as:
</I>&gt;<i>
</I>&gt;<i>   /usr/local/lib
</I>&gt;<i>   /usr/local/lib/python2.4/config
</I>&gt;<i>
</I>&gt;<i> BTW, is there anything you really want in Python 2.4? Especially if 
</I>&gt;<i> you are
</I>&gt;<i> a UNIX novice, trying to host two different versions of Python on 
</I>&gt;<i> MacOSX
</I>&gt;<i> can be a problem. I guess at least you didn't use a framework install 
</I>&gt;<i> and
</I>&gt;<i> do it on top of the system supplied version of Python. Doing that can
</I>&gt;<i> really screw things up bad.
</I>&gt;<i>
</I>&gt;<i> The only catch on using standard MacOSX Python installation is that you
</I>&gt;<i> need to patch src/mod_python.c file in source to workaround a problem
</I>&gt;<i> with it. Use of &quot;worker&quot; may also trigger some other mod_python bugs.
</I>&gt;<i> Fixes for both are detailed in:
</I>&gt;<i>
</I>&gt;<i>   <A HREF="http://www.dscpl.com.au/projects/vampire/PATCHES">http://www.dscpl.com.au/projects/vampire/PATCHES</A>
</I>&gt;<i>
</I>&gt;<i> Graham
</I>&gt;<i>
</I>&gt;<i> John Raines wrote ..
</I>&gt;&gt;<i> My website had been stable and running without error but I'd been
</I>&gt;&gt;<i> running on 2.3.3, 2.0.52 and 3.1.3; since everything was behind the
</I>&gt;&gt;<i> times I decided to finally reinstall; I made the mistake of doing it 
</I>&gt;&gt;<i> on
</I>&gt;&gt;<i> the drive that everything was being served off of instead of using my
</I>&gt;&gt;<i> backup drive. :-(
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I installed python 2.4 and it seems to work when I call it from the
</I>&gt;&gt;<i> shell. I did not do a frameworkInstall, which seems to be recommended
</I>&gt;&gt;<i> by some people. I am too much of a unix novice to understand what the
</I>&gt;&gt;<i> implications of frameworkInstall are. I installed apache and 
</I>&gt;&gt;<i> mod_python
</I>&gt;&gt;<i> as follows:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> cd ~/Desktop/httpd-2.0.53
</I>&gt;&gt;<i> ./configure --enable-so --with-mpm=worker
</I>&gt;&gt;<i> make
</I>&gt;&gt;<i> sudo make install
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> cd ~/Desktop/mod_python-3.1.4
</I>&gt;&gt;<i> ./configure --with apxs=/usr/local/apache2/bin/apxs
</I>&gt;&gt;<i> --with-python=/usr/local/bin/python2.4
</I>&gt;&gt;<i> make
</I>&gt;&gt;<i> sudo make install
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I restored my old httpd.conf file and my website files. My index.html
</I>&gt;&gt;<i> file is straight html which links to .py files. As soon as I try to
</I>&gt;&gt;<i> access any of the .py stuff I now get an internal server error message
</I>&gt;&gt;<i> and the server log shows this:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> [Tue Feb 15 16:25:25 2005] [notice] mod_python: Creating 32 session
</I>&gt;&gt;<i> mutexes based on 6 max processes and 25 max threads.
</I>&gt;&gt;<i> [Tue Feb 15 16:25:25 2005] [notice] Apache configured -- resuming
</I>&gt;&gt;<i> normal operations
</I>&gt;&gt;<i> [Tue Feb 15 16:25:36 2005] [error] make_obcallback: could not import
</I>&gt;&gt;<i> mod_python.apache.\n
</I>&gt;&gt;<i> Traceback (most recent call last):
</I>&gt;&gt;<i>    File &quot;/usr/local/lib/python2.4/site-packages/mod_python/apache.py&quot;,
</I>&gt;&gt;<i> line 22, in ?
</I>&gt;&gt;<i>      import time
</I>&gt;&gt;<i> ImportError: Failure linking new module: : dyld:
</I>&gt;&gt;<i> /usr/local/apache2/bin/httpd Undefined symbols:
</I>&gt;&gt;<i> /usr/local/lib/python2.4/lib-dynload/time.so undefined reference to
</I>&gt;&gt;<i> _PyArg_Parse expected to be defined in the executable
</I>&gt;&gt;<i> /usr/local/lib/python2.4/lib-dynload/time.so undefined reference to
</I>&gt;&gt;<i> _PyArg_ParseTuple expected to be defined in the executable
</I>&gt;&gt;<i> /usr/local/lib/python2.4/lib-dynload/time.so undefined reference to
</I>&gt;&gt;<i> _PyDict_GetItemString expected to be defined in the executable
</I>&gt;&gt;<i> /usr/local/lib/python2.4/lib-dynload/time.so un
</I>&gt;&gt;<i>                                                               &lt;--what
</I>&gt;&gt;<i> happened here??
</I>&gt;&gt;<i> [Tue Feb 15 16:25:36 2005] [error] make_obcallback: could not import
</I>&gt;&gt;<i> mod_python.apache.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> for what its worth I can access various parts of the time module when 
</I>&gt;&gt;<i> I
</I>&gt;&gt;<i> run Python2.4 from the shell.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Going back through the the mailing list I saw that Graham Dumpleton
</I>&gt;&gt;<i> (back on Dec 23) suggested the output from this might be useful; what 
</I>&gt;&gt;<i> I
</I>&gt;&gt;<i> get is different from what he saw but I'm not sure what to make of my
</I>&gt;&gt;<i> result:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> jraines-Computer:~/Desktop/Website jrraines$ otool otool -L
</I>&gt;&gt;<i> /usr/local/apache2/modules/mod_python.so
</I>&gt;&gt;<i> otool: can't open file: otool (No such file or directory)
</I>&gt;&gt;<i> /usr/local/apache2/modules/mod_python.so:
</I>&gt;&gt;<i>          /usr/lib/libSystem.B.dylib (compatibility version 1.0.0,
</I>&gt;&gt;<i> current version 71.1.1)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> jraines-Computer:~/Desktop/Website jrraines$ ls
</I>&gt;&gt;<i> /usr/local/apache2/modules
</I>&gt;&gt;<i> httpd.exp       mod_python.so
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> My problem seemed like it might be similar to a thread titled Weird
</I>&gt;&gt;<i> ob_callback problems at the end of Jan. I tried the suggestions Grisha
</I>&gt;&gt;<i> made:Try defining DYLD_FORCE_FLAT_NAMESPACE=1 environment variable
</I>&gt;&gt;<i> before launching httpd.
</I>&gt;&gt;<i> That didn't help either.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Mod_python mailing list
</I>&gt;&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I>
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017445.html">[mod_python] trying to upgrade to Python2.4, Apache2.0.53,
	Mod_Python3.1.4 on Mac OsX
</A></li>
	<LI>Next message: <A HREF="017447.html">[mod_python] trying to upgrade to Python2.4, Apache2.0.53,
	Mod_Python3.1.4 on Mac OsX
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17446">[ date ]</a>
              <a href="thread.html#17446">[ thread ]</a>
              <a href="subject.html#17446">[ subject ]</a>
              <a href="author.html#17446">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
