<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] relative paths in templates
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20relative%20paths%20in%20templates&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017457.html">
   <LINK REL="Next"  HREF="017420.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] relative paths in templates</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Jef Dodson</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20relative%20paths%20in%20templates&In-Reply-To="
       TITLE="[mod_python] relative paths in templates">jefdodson at yahoo.com
       </A><BR>
    <I>Sun Feb 13 03:31:19 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="017457.html">[mod_python] [ANNOUNCE] Mod_python 3.1.4 and 2.7.11 (security)
</A></li>
        <LI>Next message: <A HREF="017420.html">[mod_python] relative paths in templates
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17419">[ date ]</a>
              <a href="thread.html#17419">[ thread ]</a>
              <a href="subject.html#17419">[ subject ]</a>
              <a href="author.html#17419">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>OK, another question for all of you mod_python experts.  I would like to use a template engine
(cheetah) with mod_python.  I have a directory structure as follows:

/scripts
/images 
/templates

I am using mod_python.publisher and have a script in the /scripts directory named my_script with a
function named test so the function will process the request from the url:

<A HREF="http://www.mysite.com/scripts/my_script/test">http://www.mysite.com/scripts/my_script/test</A>

I am able to get the path to the template file by doing the following:

cwd = os.path.dirname(__file__)
filepath = os.path.join(cwd, '../templates/test.tmpl')

So, that all works fine.  The problem is, in the test.tmpl file, I have a static reference to an
image file that lives in /images so the html looks like this:

&lt;img src=&quot;../images/my_image.gif&quot;&gt; 

This doesn't work.  However, if I change the link the following, it works:


&lt;img src=&quot;../../images/my_image.gif&quot;&gt;


I guess the browser uses /scripts/my_script/ as the base of the url, so a reference to ../images
in the template file would resolve to /scripts/images which doesn't exist.

So, my question is this: how do I deal with the general problem of relative paths without
resorting to changing all the links in my templates or putting a &lt;base&gt; tag in all the templates? 
Keep in mind that these are static paths, so changing them programmatically is not an option in
this case.  There must be some really clean and elegant way to solve this problem using the
almighty httpd.conf file, right?!  Thanks!

Jef









		
__________________________________ 
Do you Yahoo!? 
The all-new My Yahoo! - What will yours do?
<A HREF="http://my.yahoo.com">http://my.yahoo.com</A> 
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017457.html">[mod_python] [ANNOUNCE] Mod_python 3.1.4 and 2.7.11 (security)
</A></li>
	<LI>Next message: <A HREF="017420.html">[mod_python] relative paths in templates
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17419">[ date ]</a>
              <a href="thread.html#17419">[ thread ]</a>
              <a href="subject.html#17419">[ subject ]</a>
              <a href="author.html#17419">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
