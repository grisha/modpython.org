<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Session hanging
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Session%20hanging&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017506.html">
   <LINK REL="Next"  HREF="017509.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Session hanging</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Shawn Harrison</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Session%20hanging&In-Reply-To="
       TITLE="[mod_python] Session hanging">harrison at tbc.net
       </A><BR>
    <I>Wed Feb 23 23:47:34 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="017506.html">[mod_python] mod_python test
</A></li>
        <LI>Next message: <A HREF="017509.html">[mod_python] mod_python wiki
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17507">[ date ]</a>
              <a href="thread.html#17507">[ thread ]</a>
              <a href="subject.html#17507">[ subject ]</a>
              <a href="author.html#17507">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Very strange Session problem. On Debian Linux 2.4.25, Python 2.3.3, 
mod_python ??? (&quot;__init__.py,v 1.10 2004/02/16&quot;)

I've been using session variables to keep a list of the current users' 
allowed groups. On the login POST script:

         session = Session.Session(req)

         # Set the username and groups that this user belongs to
         grouplist = []
         groups = db.select('groups_memberships_users', 'groupname', 
&quot;username = '%s'&quot; % user.name)
         for i in range(len(groups)):
             grouplist.append(groups[i].groupname)
         session['groups'] = &quot;|&quot;.join(grouplist)

The result is, for instance, session['groups'] = 'editor|verified|admin' 
(for me).

This has been working just fine. However, today when I called the 
following code it hangs, every time:

def edit_group(req):
     from mod_python import Session
     sess = Session.Session(req) # &lt;-- Hangs here
     sess.load()

This is exactly what I have been doing all the time in my authen 
handler; this is outside of the authen handler in order to get the list 
of groups and the current user's name (I'm not using Apache 
authentication at all but am using Session for all of it).

Thereafter, any attempt to load a page which needs to access the Session 
  object hangs. That is, anything which is non-public and therefore goes 
through authen checking.

I suppose I could work around this by setting the req table with 
appropriate data during authen, which would make the user &amp; group info 
always available. Probably would be more efficient, too. But it begs the 
question: Is there some reason that this would be happening with Session?

Note: The same code works just fine on Windows 2000 w/Apache 2.0.52, but 
in that case of course it's a MemorySession rather than a DbmSession. So 
I'm guessing that the difference has to do with the DBM session object 
or underlying file.

Thanks,
Shawn Harrison
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017506.html">[mod_python] mod_python test
</A></li>
	<LI>Next message: <A HREF="017509.html">[mod_python] mod_python wiki
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17507">[ date ]</a>
              <a href="thread.html#17507">[ thread ]</a>
              <a href="subject.html#17507">[ subject ]</a>
              <a href="author.html#17507">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
