<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] trying to upgrade to Python2.4, Apache2.0.53,
	Mod_Python3.1.4 on Mac OsX
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20trying%20to%20upgrade%20to%20Python2.4%2C%20Apache2.0.53%2C%0A%09Mod_Python3.1.4%20on%20Mac%20OsX&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017444.html">
   <LINK REL="Next"  HREF="017446.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] trying to upgrade to Python2.4, Apache2.0.53,
	Mod_Python3.1.4 on Mac OsX</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20trying%20to%20upgrade%20to%20Python2.4%2C%20Apache2.0.53%2C%0A%09Mod_Python3.1.4%20on%20Mac%20OsX&In-Reply-To="
       TITLE="[mod_python] trying to upgrade to Python2.4, Apache2.0.53,
	Mod_Python3.1.4 on Mac OsX">grahamd at dscpl.com.au
       </A><BR>
    <I>Tue Feb 15 18:50:35 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="017444.html">[mod_python] trying to upgrade to Python2.4, Apache2.0.53,
	Mod_Python3.1.4 on Mac OsX
</A></li>
        <LI>Next message: <A HREF="017446.html">[mod_python] trying to upgrade to Python2.4, Apache2.0.53,
	Mod_Python3.1.4 on Mac OsX
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17445">[ date ]</a>
              <a href="thread.html#17445">[ thread ]</a>
              <a href="subject.html#17445">[ subject ]</a>
              <a href="author.html#17445">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>If you really want to use Python 2.4, you are going to have to somehow
force a reference to the Python library in mod_python.so. Since you aren't
using a framework install, not sure what the library is you have to force
link with. You might want to look for Python related libraries in such
directories as:

  /usr/local/lib
  /usr/local/lib/python2.4/config

BTW, is there anything you really want in Python 2.4? Especially if you are
a UNIX novice, trying to host two different versions of Python on MacOSX
can be a problem. I guess at least you didn't use a framework install and
do it on top of the system supplied version of Python. Doing that can
really screw things up bad.

The only catch on using standard MacOSX Python installation is that you
need to patch src/mod_python.c file in source to workaround a problem
with it. Use of &quot;worker&quot; may also trigger some other mod_python bugs.
Fixes for both are detailed in:

  <A HREF="http://www.dscpl.com.au/projects/vampire/PATCHES">http://www.dscpl.com.au/projects/vampire/PATCHES</A>

Graham

John Raines wrote ..
&gt;<i> My website had been stable and running without error but I'd been 
</I>&gt;<i> running on 2.3.3, 2.0.52 and 3.1.3; since everything was behind the 
</I>&gt;<i> times I decided to finally reinstall; I made the mistake of doing it on
</I>&gt;<i> the drive that everything was being served off of instead of using my 
</I>&gt;<i> backup drive. :-(
</I>&gt;<i> 
</I>&gt;<i> I installed python 2.4 and it seems to work when I call it from the 
</I>&gt;<i> shell. I did not do a frameworkInstall, which seems to be recommended 
</I>&gt;<i> by some people. I am too much of a unix novice to understand what the 
</I>&gt;<i> implications of frameworkInstall are. I installed apache and mod_python
</I>&gt;<i> as follows:
</I>&gt;<i> 
</I>&gt;<i> cd ~/Desktop/httpd-2.0.53
</I>&gt;<i> ./configure --enable-so --with-mpm=worker
</I>&gt;<i> make
</I>&gt;<i> sudo make install
</I>&gt;<i> 
</I>&gt;<i> cd ~/Desktop/mod_python-3.1.4
</I>&gt;<i> ./configure --with apxs=/usr/local/apache2/bin/apxs 
</I>&gt;<i> --with-python=/usr/local/bin/python2.4
</I>&gt;<i> make
</I>&gt;<i> sudo make install
</I>&gt;<i> 
</I>&gt;<i> I restored my old httpd.conf file and my website files. My index.html 
</I>&gt;<i> file is straight html which links to .py files. As soon as I try to 
</I>&gt;<i> access any of the .py stuff I now get an internal server error message
</I>&gt;<i> and the server log shows this:
</I>&gt;<i> 
</I>&gt;<i> [Tue Feb 15 16:25:25 2005] [notice] mod_python: Creating 32 session 
</I>&gt;<i> mutexes based on 6 max processes and 25 max threads.
</I>&gt;<i> [Tue Feb 15 16:25:25 2005] [notice] Apache configured -- resuming 
</I>&gt;<i> normal operations
</I>&gt;<i> [Tue Feb 15 16:25:36 2005] [error] make_obcallback: could not import 
</I>&gt;<i> mod_python.apache.\n
</I>&gt;<i> Traceback (most recent call last):
</I>&gt;<i>    File &quot;/usr/local/lib/python2.4/site-packages/mod_python/apache.py&quot;,
</I>&gt;<i> line 22, in ?
</I>&gt;<i>      import time
</I>&gt;<i> ImportError: Failure linking new module: : dyld: 
</I>&gt;<i> /usr/local/apache2/bin/httpd Undefined symbols:
</I>&gt;<i> /usr/local/lib/python2.4/lib-dynload/time.so undefined reference to 
</I>&gt;<i> _PyArg_Parse expected to be defined in the executable
</I>&gt;<i> /usr/local/lib/python2.4/lib-dynload/time.so undefined reference to 
</I>&gt;<i> _PyArg_ParseTuple expected to be defined in the executable
</I>&gt;<i> /usr/local/lib/python2.4/lib-dynload/time.so undefined reference to 
</I>&gt;<i> _PyDict_GetItemString expected to be defined in the executable
</I>&gt;<i> /usr/local/lib/python2.4/lib-dynload/time.so un                       
</I>&gt;<i>                                                               &lt;--what 
</I>&gt;<i> happened here??
</I>&gt;<i> [Tue Feb 15 16:25:36 2005] [error] make_obcallback: could not import 
</I>&gt;<i> mod_python.apache.
</I>&gt;<i> 
</I>&gt;<i> for what its worth I can access various parts of the time module when I
</I>&gt;<i> run Python2.4 from the shell.
</I>&gt;<i> 
</I>&gt;<i> Going back through the the mailing list I saw that Graham Dumpleton 
</I>&gt;<i> (back on Dec 23) suggested the output from this might be useful; what I
</I>&gt;<i> get is different from what he saw but I'm not sure what to make of my 
</I>&gt;<i> result:
</I>&gt;<i> 
</I>&gt;<i> jraines-Computer:~/Desktop/Website jrraines$ otool otool -L 
</I>&gt;<i> /usr/local/apache2/modules/mod_python.so
</I>&gt;<i> otool: can't open file: otool (No such file or directory)
</I>&gt;<i> /usr/local/apache2/modules/mod_python.so:
</I>&gt;<i>          /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, 
</I>&gt;<i> current version 71.1.1)
</I>&gt;<i> 
</I>&gt;<i> jraines-Computer:~/Desktop/Website jrraines$ ls 
</I>&gt;<i> /usr/local/apache2/modules
</I>&gt;<i> httpd.exp       mod_python.so
</I>&gt;<i> 
</I>&gt;<i> My problem seemed like it might be similar to a thread titled Weird 
</I>&gt;<i> ob_callback problems at the end of Jan. I tried the suggestions Grisha
</I>&gt;<i> made:Try defining DYLD_FORCE_FLAT_NAMESPACE=1 environment variable 
</I>&gt;<i> before launching httpd.
</I>&gt;<i> That didn't help either.
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I></PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017444.html">[mod_python] trying to upgrade to Python2.4, Apache2.0.53,
	Mod_Python3.1.4 on Mac OsX
</A></li>
	<LI>Next message: <A HREF="017446.html">[mod_python] trying to upgrade to Python2.4, Apache2.0.53,
	Mod_Python3.1.4 on Mac OsX
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17445">[ date ]</a>
              <a href="thread.html#17445">[ thread ]</a>
              <a href="subject.html#17445">[ subject ]</a>
              <a href="author.html#17445">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
