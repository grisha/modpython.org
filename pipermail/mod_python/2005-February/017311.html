<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] servlet sessions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20servlet%20sessions&In-Reply-To=20050202193741.44864.qmail%40web25005.mail.ukl.yahoo.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017310.html">
   <LINK REL="Next"  HREF="017312.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] servlet sessions</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Daniel Popowich</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20servlet%20sessions&In-Reply-To=20050202193741.44864.qmail%40web25005.mail.ukl.yahoo.com"
       TITLE="[mod_python] servlet sessions">dpopowich at comcast.net
       </A><BR>
    <I>Wed Feb  2 16:22:09 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="017310.html">[mod_python] servlet sessions
</A></li>
        <LI>Next message: <A HREF="017312.html">[mod_python] servlet sessions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17311">[ date ]</a>
              <a href="thread.html#17311">[ thread ]</a>
              <a href="subject.html#17311">[ subject ]</a>
              <a href="author.html#17311">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Colin Doherty writes:
&gt;<i> So I'm either still missing something or there is no
</I>&gt;<i> direct way of referencing the session variable in an
</I>&gt;<i> auth call - this would make sense if auth is called
</I>&gt;<i> before prep as it appears from the docs.
</I>
Yes, auth is called before prep, so the session instance variable is
not yet available.

I went around and around and around on this when first writing the
class.  I'm still not sure I got it right and could be convinced
otherwise, but conceptually, authentication should happen asap after
the request is made, so it makes sense auth is called first.

An early version of mpservlets (pre-publication) had Servlet.prep()
being a no-op and all the stuff that currently happens in that method
occurring in a method called Servlet.handler_prep(), or some such and
this was called before auth, prep, respond, etc.  I think it was an
overwhelming Attack Of Symmetry that had me move it all into
Servlet.prep().

If you want to use HTTP basic authentication and have it conditional
on the session or other such knowledge only known after some point in
prep, I'd do this:

   def mybasicauth(self):
      # coded just like you would auth, but give it a different name,
      # so it's not called before prep

   def prep(self):
      # call superclass' prep
      MySuperClass.prep(self)
      # do some other work if need be, then...
      self.mybasicauth()

Perhaps future versions will accommodate having the session instance
variable set prior to calling auth.  It does seem to make sense.
      
&gt;<i> BTW the servlet handler seems excellent as far I have
</I>&gt;<i> got it working, would it make the basis for either a
</I>&gt;<i> python J2EE equivalent ?
</I>
I'm glad you're finding it useful.

As for the python j2ee...I don't have any interest in &quot;mirroring&quot; the
j2ee spec in python.  If others feel there's a need and want to use
mpservlets as the jumping off place, go for it.  That's why it's
opensource!

If, on the other hand, you mean could it become the tool that python
programmers go to as the base of OO web solutions.  Sure!  Pass on
your contributions (like having the session instance variable
available before auth is called) and let's make it the best tool it
can be!!

Daniel Popowich
-----------------------------------------------
<A HREF="http://home.comcast.net/~d.popowich/mpservlets/">http://home.comcast.net/~d.popowich/mpservlets/</A>

</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017310.html">[mod_python] servlet sessions
</A></li>
	<LI>Next message: <A HREF="017312.html">[mod_python] servlet sessions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17311">[ date ]</a>
              <a href="thread.html#17311">[ thread ]</a>
              <a href="subject.html#17311">[ subject ]</a>
              <a href="author.html#17311">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
