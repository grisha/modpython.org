<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Force reload?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Force%20reload%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017328.html">
   <LINK REL="Next"  HREF="017324.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Force reload?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Force%20reload%3F&In-Reply-To="
       TITLE="[mod_python] Force reload?">grahamd at dscpl.com.au
       </A><BR>
    <I>Wed Feb  2 22:19:34 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="017328.html">[mod_python] Force reload?
</A></li>
        <LI>Next message: <A HREF="017324.html">[mod_python] Custom handler thread safety
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17315">[ date ]</a>
              <a href="thread.html#17315">[ thread ]</a>
              <a href="subject.html#17315">[ subject ]</a>
              <a href="author.html#17315">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Jon-Pierre Gentil wrote ..
&gt;<i> 
</I>&gt;<i> Argh!  I wish that mod_python would check all loaded modules for changes
</I>&gt;<i> as a flat rule, not as a tree...  because currently it will only reload
</I>&gt;<i> something if I touch the handler, because the reload code sees that the
</I>&gt;<i> handler hasn't changed and does not bother checking the modules that the
</I>&gt;<i> handler uses for changes.  Might as well not even use mod_python.import()
</I>&gt;<i> at all.
</I>
Use Vampire and use vampire.importModule() for imports instead of &quot;import&quot;.
In Vampire it tracks dependencies between parent/child modules and can
reimport parent modules when children change. If you look at Vampire and
want to know more, ask questions here on the mailing list.

Oh, if you are using mod_python.publisher, Vampire will require you to change
in part back to more traditional content handlers in some ways. Vampire and
some documentation can be found at:

  <A HREF="http://www.dscpl.com.au/projects/vampire">http://www.dscpl.com.au/projects/vampire</A>

&gt;<i> Anyway, is there an option I can use to force the reload of the handler
</I>&gt;<i> module each and every time a request is made?  I am only needing this for
</I>&gt;<i> debugging purposes, so I don't mind something that is a bit kludgey.
</I>
In your request handler, do this:

  __mtime__ = 0

The mod_python import mechanism caches the modification time in the module
itself and so setting it to 0 will force the module to be reloaded on the next
request.

Graham
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017328.html">[mod_python] Force reload?
</A></li>
	<LI>Next message: <A HREF="017324.html">[mod_python] Custom handler thread safety
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17315">[ date ]</a>
              <a href="thread.html#17315">[ thread ]</a>
              <a href="subject.html#17315">[ subject ]</a>
              <a href="author.html#17315">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
