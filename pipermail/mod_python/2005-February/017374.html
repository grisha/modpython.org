<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Re: Single Persisten DB conn across
	multiple	connections
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20Single%20Persisten%20DB%20conn%20across%0A%09multiple%09connections&In-Reply-To=4d11484d050209161710d76977%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017373.html">
   <LINK REL="Next"  HREF="017376.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Re: Single Persisten DB conn across
	multiple	connections</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>David Fraser</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20Single%20Persisten%20DB%20conn%20across%0A%09multiple%09connections&In-Reply-To=4d11484d050209161710d76977%40mail.gmail.com"
       TITLE="[mod_python] Re: Single Persisten DB conn across
	multiple	connections">davidf at sjsoft.com
       </A><BR>
    <I>Thu Feb 10 02:51:40 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="017373.html">[mod_python] Re: Single Persisten DB conn across multiple
	connections
</A></li>
        <LI>Next message: <A HREF="017376.html">[mod_python] how do I eliminate the .py extension in url?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17374">[ date ]</a>
              <a href="thread.html#17374">[ thread ]</a>
              <a href="subject.html#17374">[ subject ]</a>
              <a href="author.html#17374">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hmmm ... that certainly sounds like bad advice to me.
But if you're working an a multi-process Apache model, you can't share 
database connections between different child processes.
So either you have to be content with one connection per child process, 
or you have to switch Apache to only run in one process

Chris Jackson wrote:

&gt;<i>I've been reading this FAQ:
</I>&gt;<i>
</I>&gt;<i><A HREF="http://www.modpython.org/FAQ/faqw.py?req=show&amp;file=faq03.018.htp">http://www.modpython.org/FAQ/faqw.py?req=show&amp;file=faq03.018.htp</A>
</I>&gt;<i>
</I>&gt;<i>However, it doesn't answer my question of how to use one connection
</I>&gt;<i>accross multiple sessions.
</I>&gt;<i>It ends in saying:
</I>&gt;<i>
</I>&gt;<i>&quot;My advice is to renew database connections, configs and everything
</I>&gt;<i>you have to load for a request every hit during development. After
</I>&gt;<i>you're done coding and it turnes out that it's not fast enough:
</I>&gt;<i>profile...&quot;
</I>&gt;<i>
</I>&gt;<i>~= Chris =~
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>On Wed, 9 Feb 2005 18:57:40 -0500, Chris Jackson
</I>&gt;<i>&lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">christopher.jackson at gmail.com</A>&gt; wrote:
</I>&gt;<i>  
</I>&gt;<i>
</I>&gt;&gt;<i>What is the best way, or at least some way to create a single database
</I>&gt;&gt;<i>connection object in mod_python and have everyone who connects use
</I>&gt;&gt;<i>that same DB connection.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Note: I'm using the publisher handler.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>           DB
</I>&gt;&gt;<i>             |
</I>&gt;&gt;<i> DBconn object
</I>&gt;&gt;<i>       /     |    \
</I>&gt;&gt;<i>user  user  user
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>My original theory (tested, doesn't work -- Multiple DB Connections are made):
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>To create a global DBconn object and have each session rely on the
</I>&gt;&gt;<i>same global variable.
</I>&gt;&gt;<i>The idea fails I think because multiple interpreters are created with
</I>&gt;&gt;<i>each apache child process,
</I>&gt;&gt;<i>and so global variables are re-instantiated.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>New theory(untested):
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Make the DBconn object outside in a separate module so that python
</I>&gt;&gt;<i>only imports the module
</I>&gt;&gt;<i>once, hence using only a single DBconn object.  In this case module
</I>&gt;&gt;<i>space is consistent even
</I>&gt;&gt;<i>with multiple interpreters.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Any comments and/or solutions would be gladly appreciated.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Thanks,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>~= Chris =~
</I>&gt;&gt;<i>    
</I>&gt;&gt;<i>
</I>
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017373.html">[mod_python] Re: Single Persisten DB conn across multiple
	connections
</A></li>
	<LI>Next message: <A HREF="017376.html">[mod_python] how do I eliminate the .py extension in url?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17374">[ date ]</a>
              <a href="thread.html#17374">[ thread ]</a>
              <a href="subject.html#17374">[ subject ]</a>
              <a href="author.html#17374">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
