<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] MySQLDb or SQLObject connection pooling snippet
	wanted
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20MySQLDb%20or%20SQLObject%20connection%20pooling%20snippet%0A%09wanted&In-Reply-To=452F79EF.2030603%40natlab.research.philips.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022304.html">
   <LINK REL="Next"  HREF="022283.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] MySQLDb or SQLObject connection pooling snippet
	wanted</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Sean Davis</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20MySQLDb%20or%20SQLObject%20connection%20pooling%20snippet%0A%09wanted&In-Reply-To=452F79EF.2030603%40natlab.research.philips.com"
       TITLE="[mod_python] MySQLDb or SQLObject connection pooling snippet
	wanted">sdavis2 at mail.nih.gov
       </A><BR>
    <I>Fri Oct 13 08:03:20 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="022304.html">[mod_python] MySQLDb or SQLObject connection pooling snippet
	wanted
</A></li>
        <LI>Next message: <A HREF="022283.html">[mod_python] Restricted area - how to protect passwords ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22306">[ date ]</a>
              <a href="thread.html#22306">[ thread ]</a>
              <a href="subject.html#22306">[ subject ]</a>
              <a href="author.html#22306">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Friday 13 October 2006 07:35, Mike Looijmans wrote:
&gt;<i> For MySQL, I found that the best approach to connection pooling was &quot;not&quot;.
</I>&gt;<i>
</I>&gt;<i> I could not conclude any performance difference opening the same page a few
</I>&gt;<i> thousand times which executed a single SELECT returning a single row with a
</I>&gt;<i> (mutexed) singleton connection, with a pooled set or just connecting for
</I>&gt;<i> every request. Apparently, the overhead of calling MySQLdb.connect() is
</I>&gt;<i> neglegible compared to all the other stuff that happens (i did this on a
</I>&gt;<i> SUN Solaris 2.6 running Apache 2.0 with worker threads).
</I>&gt;<i>
</I>&gt;<i> The best performance gain is to put the SQL database on the same host and
</I>&gt;<i> use a UNIX socket (not TCP) or a named pipe (on Windows NT) for the
</I>&gt;<i> connection. I also improved security this way: No one can access the MySQL
</I>&gt;<i> DB from outside the webserver, even if they have the password.
</I>
Just to make a couple of small points here:

For small databases and small-footprint webservers on relatively large 
machines, having the database and webserver on the same machine is fine and 
is indeed the best solution.  However, when the database tables become 
larger, the database and webserver can begin to compete for memory resources.  
This is NOT the same as swapping; if the database can be cached in memory 
(which most databases try to do, in one way or another), operation is MUCH 
faster than if the database is constantly being read from disk.  Also, If the 
database is hit quite heavily, it will also consume i/o bandwidth--the same 
resource that the webserver needs to deliver content quickly.

So, while having the database and webserver on the same machine CAN be a fast 
solution for small sites, I think that dogma in the web development world is 
that one should not follow this pattern in a production environment where 
database and webserver are running at near peak usage and will be competing 
for resources.  Also, using fast switches (gigabit or better) can alleviate 
many of the data transfer issues associated with separate machines.

Sean
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022304.html">[mod_python] MySQLDb or SQLObject connection pooling snippet
	wanted
</A></li>
	<LI>Next message: <A HREF="022283.html">[mod_python] Restricted area - how to protect passwords ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22306">[ date ]</a>
              <a href="thread.html#22306">[ thread ]</a>
              <a href="subject.html#22306">[ subject ]</a>
              <a href="author.html#22306">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
