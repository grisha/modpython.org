<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Building a web application using Cheetah
	andmod_python
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Building%20a%20web%20application%20using%20Cheetah%0A%09andmod_python&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022439.html">
   <LINK REL="Next"  HREF="022440.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Building a web application using Cheetah
	andmod_python</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Building%20a%20web%20application%20using%20Cheetah%0A%09andmod_python&In-Reply-To="
       TITLE="[mod_python] Building a web application using Cheetah
	andmod_python">grahamd at dscpl.com.au
       </A><BR>
    <I>Mon Oct 30 20:46:23 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="022439.html">[mod_python] Can i have both Marshal and Signed
	CookieswithPublisher?
</A></li>
        <LI>Next message: <A HREF="022440.html">[mod_python] sendfile problems with IE
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22436">[ date ]</a>
              <a href="thread.html#22436">[ thread ]</a>
              <a href="subject.html#22436">[ subject ]</a>
              <a href="author.html#22436">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dirk van Oosterbosch, IR labs wrote ..
&gt;<i> Thanks,
</I>&gt;<i> 
</I>&gt;<i> &gt; Using current versions of mod_python available there is no way of  
</I>&gt;<i> &gt; doing it except
</I>&gt;<i> &gt; perhaps by using the Vampire extensions for mod_python.  
</I>&gt;<i> &gt; Alternatively, use
</I>&gt;<i> &gt; version 3.3 of mod_python out of Subversion repository or wait  
</I>&gt;<i> &gt; until it is released.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; [...]
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; This works even if 'from bar import bar' is used as they intercept  
</I>&gt;<i> &gt; the 'import'
</I>&gt;<i> &gt; statement and when an import is performed from inside a module  
</I>&gt;<i> &gt; which was
</I>&gt;<i> &gt; already imported using the module importer, it will use the module  
</I>&gt;<i> &gt; importer for
</I>&gt;<i> &gt; the 'import' as well. Ie., no need to use apache.import_module()  
</I>&gt;<i> &gt; explicitly. If the
</I>&gt;<i> &gt; module being imported using 'import' is in another directory  
</I>&gt;<i> &gt; though, it is necessary
</I>&gt;<i> &gt; to specify an option declaring the search path for the modules.  
</I>&gt;<i> &gt; This is a path which
</I>&gt;<i> &gt; is distinct from PythonPath as new importer will not use any module 
</I>&gt;<i> &gt; in PythonPath
</I>&gt;<i> &gt; as a candidate for reloading as that causes lots of problems.
</I>&gt;<i> 
</I>&gt;<i> Then, I guess it won't do it's magic for __import__(modulename)  :-(
</I>
No that still works as it hooks into the Python importer hooks which
is even below that.

&gt;<i> The way I am building my system, I'll need to call
</I>&gt;<i> 	module = __import__(modulename, globals(), locals(), [name])
</I>&gt;<i> since I don't know the name of the module (and of the object) until  
</I>&gt;<i> runtime.
</I>&gt;<i> Will there be a cure for this too?
</I>
In mod_python 3.3 there is a much better way of doing that, you simply
supply an absolute path name to the apache.import_module() command
instead of the module name. There are even tricky ways of specifying
paths relative to the current modules directory, or even the directory
where the handler was specified in order to avoiding having to hard
code absolute path names.

Where it is done at global scope, changes made to the child will cause
the parent to be reloaded as well next time it is needed. If the import is
done from inside a handler, then the fact that apache.import_module()
is called each time causes reload checks to be done anyway.

The only thing is that it returns the whole module so you then have
to use hasattr()/getattr() to look for and get a reference to a contained
attribute.

&gt;<i> (I wouldn't have a problem so much with issuing a special command to  
</I>&gt;<i> make mod_python reload all modules, if it just wasn't &quot;apachectl  
</I>&gt;<i> stop ... apachectl start&quot; ;)
</I>
Restarting Apache shouldn't be required, nor do you need to tell it to
reload modules at a particular time, it will reload modules as it sees
they have changed. You still have to be careful in changing files if you
need to change more than one at a time. In that case you might manage
by manipulating PythonAutoReload in a .htaccess file, but for a production
site you are still better off having a totally different directory containing
everything, changing an Alias directive and restarting Apache. Much safer
that way. Auto reloading is still more only for during development or
if your site is non critical.

I have been putting together an example of exactly how to integrate
Cheetah with mod_python 3.3 in the best way which I'll explain in an
article at some point and make available. No point making it available
yet if you aren't using mod_python 3.3 source from subversion.

Graham
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022439.html">[mod_python] Can i have both Marshal and Signed
	CookieswithPublisher?
</A></li>
	<LI>Next message: <A HREF="022440.html">[mod_python] sendfile problems with IE
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22436">[ date ]</a>
              <a href="thread.html#22436">[ thread ]</a>
              <a href="subject.html#22436">[ subject ]</a>
              <a href="author.html#22436">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
