<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Http Response None -  Page renders as Text
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Http%20Response%20None%20-%20%20Page%20renders%20as%20Text&In-Reply-To=20061028104005.31246.qmail%40web23302.mail.ird.yahoo.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022415.html">
   <LINK REL="Next"  HREF="022418.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Http Response None -  Page renders as Text</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Http%20Response%20None%20-%20%20Page%20renders%20as%20Text&In-Reply-To=20061028104005.31246.qmail%40web23302.mail.ird.yahoo.com"
       TITLE="[mod_python] Http Response None -  Page renders as Text">grahamd at dscpl.com.au
       </A><BR>
    <I>Sat Oct 28 08:10:21 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="022415.html">[mod_python] Http Response None -  Page renders as Text
</A></li>
        <LI>Next message: <A HREF="022418.html">&#920;&#941;&#956;&#945;: Re: [mod_python] Http Response None -  Page renders as Text
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22416">[ date ]</a>
              <a href="thread.html#22416">[ thread ]</a>
              <a href="subject.html#22416">[ subject ]</a>
              <a href="author.html#22416">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Try not setting a content length. You might be getting the content
length wrong and screwing up any HTTP 1.1 pipelining of requests.
Ie., overlength data from a prior request is coming through as start
of subsequent request.

Graham

On 28/10/2006, at 8:40 PM, Thimios Katsoulis wrote:

&gt;<i> Hello all.
</I>&gt;<i> I am developing a site in mod_python and I am facing a
</I>&gt;<i> problem.
</I>&gt;<i> The nasty thing is that this problem does not occur
</I>&gt;<i> all the time .
</I>&gt;<i> The problem is that firefox renders the  page and
</I>&gt;<i> displays it as text . So what you see is the html
</I>&gt;<i> source and not the rendered page.
</I>&gt;<i> This problem occurs once in many times . When you hit
</I>&gt;<i> refresh the page renders normally.
</I>&gt;<i> I have set content_type to &quot;text/html&quot;.
</I>&gt;<i> Here is the problematic output as seen on firefox:
</I>&gt;<i>
</I>&gt;<i> NoneHTTP/1.1 200 OK
</I>&gt;<i> Date: Sat, 28 Oct 2006 10:13:32 GMT
</I>&gt;<i> Server: Apache/2.0.55 (Ubuntu) mod_python/3.1.4
</I>&gt;<i> Python/2.4.3 PHP/5.1.2
</I>&gt;<i> Content-Length: 1974
</I>&gt;<i> Keep-Alive: timeout=15, max=95
</I>&gt;<i> Connection: Keep-Alive
</I>&gt;<i> Content-Type: text/html; charset=UTF-8
</I>&gt;<i>
</I>&gt;<i> &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0
</I>&gt;<i> Strict//EN&quot;
</I>&gt;<i> &quot;<A HREF="http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;">http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;</A>&gt;
</I>&gt;<i>
</I>&gt;<i> &lt;html xmlns=&quot;<A HREF="http://www.w3.org/1999/xhtml&quot;">http://www.w3.org/1999/xhtml&quot;</A>
</I>&gt;<i> xml:lang=&quot;en&quot;&gt;
</I>&gt;<i>
</I>&gt;<i> &lt;head&gt;
</I>&gt;<i>
</I>&gt;<i> .....
</I>&gt;<i> and the html source continues.
</I>&gt;<i>
</I>&gt;<i> If you hit refresh , I repeat , page renders normally.
</I>&gt;<i> This behaviour is seen on a 1.0.8 firefox on Suse
</I>&gt;<i> linux 10.0 on a machine on my local lan.
</I>&gt;<i> The test web server is also on my local lan and is
</I>&gt;<i> Ubuntu 6.0.6 with mod_python/3.1.4 as you can notice
</I>&gt;<i> on the header.
</I>&gt;<i> Please notice also the first line of the output
</I>&gt;<i> &quot;NoneHTTP/1.1 200 OK&quot; .
</I>&gt;<i>
</I>&gt;<i> Here are the settings of the site :
</I>&gt;<i> -----------------------------------------
</I>&gt;<i> &lt;VirtualHost *&gt;
</I>&gt;<i>         ServerAdmin <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">webmaster at localhost</A>
</I>&gt;<i>         ServerName www.evropi.com
</I>&gt;<i>         DocumentRoot /var/www/evropi
</I>&gt;<i>         &lt;Directory /var/www/evropi&gt;
</I>&gt;<i>                 Options None
</I>&gt;<i>                 AllowOverride All
</I>&gt;<i>                 Order allow,deny
</I>&gt;<i>                 allow from all
</I>&gt;<i>
</I>&gt;<i>                 SetHandler mod_python
</I>&gt;<i>                 PythonHandler start
</I>&gt;<i>                 PythonDebug On
</I>&gt;<i>
</I>&gt;<i>         &lt;/Directory&gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>         ErrorLog /var/log/apache2/error.log
</I>&gt;<i>
</I>&gt;<i>         # Possible values include: debug, info,
</I>&gt;<i> notice, warn, error, crit,
</I>&gt;<i>         # alert, emerg.
</I>&gt;<i>         LogLevel warn
</I>&gt;<i>
</I>&gt;<i>         ServerSignature On
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &lt;/VirtualHost&gt;
</I>&gt;<i> ----------------------------------------
</I>&gt;<i> Please notice also that this is not a real domain name
</I>&gt;<i> .
</I>&gt;<i> It's just used for development . I am testing a site
</I>&gt;<i> by modyfing my local lan's machine's /etc/hosts files.
</I>&gt;<i>
</I>&gt;<i> Here is the start.py python script :
</I>&gt;<i> ----------------------------------------------------
</I>&gt;<i> import time
</I>&gt;<i> from mod_python import apache
</I>&gt;<i> def handler(req):
</I>&gt;<i>         #start=time.time()
</I>&gt;<i>         req.content_type = &quot;text/html&quot;
</I>&gt;<i>         from lib import SiteBuilder
</I>&gt;<i>         reload(SiteBuilder)
</I>&gt;<i>         siteBuilder=SiteBuilder.SiteBuilder(req.uri)
</I>&gt;<i>         data=siteBuilder.BuildPage(req)
</I>&gt;<i>         #diff=time.time()-start
</I>&gt;<i>         #req.write(&quot;%f&quot; % (diff))
</I>&gt;<i>         data=str(data)
</I>&gt;<i>         lenData=len(data)
</I>&gt;<i>         req.content_type = &quot;text/html&quot;
</I>&gt;<i>         req.set_content_length(lenData)
</I>&gt;<i>         req.write(data)
</I>&gt;<i>
</I>&gt;<i>         return apache.OK
</I>&gt;<i>
</I>&gt;<i> -----------------------------------------------
</I>&gt;<i>
</I>&gt;<i> I have noticed this behaviour from other pc's as well
</I>&gt;<i> , mostly on Firefox.
</I>&gt;<i> But this does not happen all the times , it is
</I>&gt;<i> something random , and as a developer I consider
</I>&gt;<i> random problem occuring very nasty .
</I>&gt;<i> Anyone has seen this behaviour before ?
</I>&gt;<i> Should I send http headers before calling req.write()?
</I>&gt;<i> I 'll appreciate any help .
</I>&gt;<i>
</I>&gt;<i> Thanks.
</I>&gt;<i> Thimios Katsoulis
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 	
</I>&gt;<i>
</I>&gt;<i> 	
</I>&gt;<i> 		
</I>&gt;<i> ___________________________________________________________
</I>&gt;<i> &#935;&#961;&#951;&#963;&#953;&#956;&#959;&#960;&#959;&#953;&#949;&#943;&#964;&#949; Yahoo!;
</I>&gt;<i> &#914;&#945;&#961;&#949;&#952;&#942;&#954;&#945;&#964;&#949; &#964;&#945; &#949;&#957;&#959;&#967;&#955;&#951;&#964;&#953;&#954;&#940; &#956;&#951;&#957;&#973;&#956;&#945;&#964;&#945;  
</I>&gt;<i> (spam); &#932;&#959; Yahoo! Mail
</I>&gt;<i> &#948;&#953;&#945;&#952;&#941;&#964;&#949;&#953; &#964;&#951;&#957; &#954;&#945;&#955;&#973;&#964;&#949;&#961;&#951; &#948;&#965;&#957;&#945;&#964;&#942;  
</I>&gt;<i> &#960;&#961;&#959;&#963;&#964;&#945;&#963;&#943;&#945; &#954;&#945;&#964;&#940; &#964;&#969;&#957; &#949;&#957;&#959;&#967;&#955;&#951;&#964;&#953;&#954;&#974;&#957;
</I>&gt;<i> &#956;&#951;&#957;&#965;&#956;&#940;&#964;&#969;&#957; <A HREF="http://login.yahoo.com/config/mail?.intl=gr">http://login.yahoo.com/config/mail?.intl=gr</A>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022415.html">[mod_python] Http Response None -  Page renders as Text
</A></li>
	<LI>Next message: <A HREF="022418.html">&#920;&#941;&#956;&#945;: Re: [mod_python] Http Response None -  Page renders as Text
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22416">[ date ]</a>
              <a href="thread.html#22416">[ thread ]</a>
              <a href="subject.html#22416">[ subject ]</a>
              <a href="author.html#22416">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
