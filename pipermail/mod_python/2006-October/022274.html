<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] newbie filter won't work
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20newbie%20filter%20won%27t%20work&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022273.html">
   <LINK REL="Next"  HREF="022275.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] newbie filter won't work</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Sells, Fred</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20newbie%20filter%20won%27t%20work&In-Reply-To="
       TITLE="[mod_python] newbie filter won't work">fred at adventistcare.org
       </A><BR>
    <I>Wed Oct 11 13:10:34 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="022273.html">[mod_python] newbie cookie confusion
</A></li>
        <LI>Next message: <A HREF="022275.html">[mod_python] newbie filter won't work
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22274">[ date ]</a>
              <a href="thread.html#22274">[ thread ]</a>
              <a href="subject.html#22274">[ subject ]</a>
              <a href="author.html#22274">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm new to mod_python and to apache config.

I would like to setup a master security &quot;trap&quot; that intercepts all .py urls
and then  check for a cookie, and if it exists, I send it to the legacy
server which should respond with the user name.  Most of our web stuff is on
that legacy server and it has it's own security model that is outside my
responsibility.  If the cookie doesn't exist, I redirect to our standard
login page.

It doesn't look like I can use the Apache Basic authentication, since that
gives me the Apache login popup.  I tried input filter, but can't get it to
work.  Can anyone show what I'm doing wrong?  my setup is...

-----------httpd.conf---------------------------------
&lt;Directory &quot;/var/www/html/modpytest&quot;&gt;
        AddHandler mod_python .py
        PythonHandler form
#       PythonHandler mod_python.publisher
        PythonInputFilter security SECURITY
        AddInputFilter SECURITY .py
        PythonDebug On
&lt;/Directory&gt;


-------------form.py------------------------------
from mod_python import apache
from mod_python import Cookie
from mod_python import Session
import urllib2

def handler(req):
    apache.log_error('in handler')
    req.content_type = &quot;text/plain&quot;
    text = &quot;basic handler works&quot;
    text += '\ndir(req) = ' 				+ str( dir(req))
    text += '\nget_config returns %s' 		% req.get_config()
    text += '\nget_remote_host() returns %s' 	% req.get_remote_host()
    text += '\nreq.the_request %s' 			% req.the_request
    text += '\nreq.unparsed_uri %s' 		% req.unparsed_uri
    text += '\nreeq.uri %s' 				% req.uri
    text += '\nreq.args = ' 			+ str(req.args) +'
'+str(type(req.args))
    req.write(text)
    return apache.OK

------------------security.py-----------------------
from mod_python import apache

def inputfilter(filter):
    apache.log_error(&quot;inputfilter called&quot;)
    s = filter.read()
    while s:
        filter.write(s.upper())
        s = filter.read()
    if s is None:
        filter.close() 

---------------------------------------------------------------------------
The information contained in this message may be privileged and / or
confidential and protected from disclosure. If the reader of this message is
not the intended recipient, you are hereby notified that any dissemination,
distribution or copying of this communication is strictly prohibited. If you
have received this communication in error, please notify the sender
immediately by replying to this message and deleting the material from any
computer.
---------------------------------------------------------------------------

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022273.html">[mod_python] newbie cookie confusion
</A></li>
	<LI>Next message: <A HREF="022275.html">[mod_python] newbie filter won't work
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22274">[ date ]</a>
              <a href="thread.html#22274">[ thread ]</a>
              <a href="subject.html#22274">[ subject ]</a>
              <a href="author.html#22274">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
