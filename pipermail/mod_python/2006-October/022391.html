<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] util.FieldStorage
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20util.FieldStorage&In-Reply-To=A517B25C116F414281788C829739DB3B18F374%40stmail.Menai.local">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022390.html">
   <LINK REL="Next"  HREF="022392.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] util.FieldStorage</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20util.FieldStorage&In-Reply-To=A517B25C116F414281788C829739DB3B18F374%40stmail.Menai.local"
       TITLE="[mod_python] util.FieldStorage">grahamd at dscpl.com.au
       </A><BR>
    <I>Thu Oct 26 05:56:22 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="022390.html">[mod_python] util.FieldStorage
</A></li>
        <LI>Next message: <A HREF="022392.html">[mod_python] util.FieldStorage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22391">[ date ]</a>
              <a href="thread.html#22391">[ thread ]</a>
              <a href="subject.html#22391">[ subject ]</a>
              <a href="author.html#22391">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The util.FieldStorage implementation in mod_python 3.3 is quite a bit
different to what is used in older versions of mod_python and which
you based your changes upon. Thus your changes are not compatible
with the new code base.

Some have talked about making the new implementation of the
FieldStorage class more dictionary like than it is, but no one has
stepped up to provide any changes.

To be honest I haven't actually looked into how FieldStorage is
implemented as someone outside of the core developers provided
the updated code and it was integrated by someone other than
myself. Looking at the code now, I actually think it might be a bit
broken. I'll have to do some playing with the code.

BTW, what benefits do you think you get if it is more dictionary like?
I am not sure I understand the reason for making such changes in
the first place.

Graham

On 26/10/2006, at 7:14 PM, Brian Bird wrote:

&gt;<i> Is there anything in the works to make util.FieldStorage act more  
</I>&gt;<i> like a real dictionary? Specifically, it doesn&#8217;t support the  
</I>&gt;<i> __setitem__, __delitem__ methods. Since the documentation states  
</I>&gt;<i> &quot;it can be treated like a dictionary&#8221; I was surprised to find these  
</I>&gt;<i> methods missing.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I know it&#8217;s easy to change it to a real dictionary to get these  
</I>&gt;<i> methods, but then you lose the (very useful) getlist() method. At  
</I>&gt;<i> first glance it doesn&#8217;t look like much work to add the extra  
</I>&gt;<i> methods (but I haven&#8217;t looked at how it may affect values which  
</I>&gt;<i> aren&#8217;t StringField&#8217;s).
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I&#8217;ve just looked in the latest subversion and found that the items 
</I>&gt;<i> () method is now in util.FieldStorage, as well as a method add_field 
</I>&gt;<i> () which looks suspiciously like __setitem__ should, but no sign of  
</I>&gt;<i> a __delitem__. However, there now seems to be a self.dictionary  
</I>&gt;<i> object which could be useful &#8211; perhaps all unrecognised methods  
</I>&gt;<i> should be passed onto self.dictionary in the __getattr__ instead of  
</I>&gt;<i> raising an AttributeError?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I&#8217;ve put below what I thought needed adding to the  
</I>&gt;<i> util.FieldStorage class before I noticed self.dictionary in case  
</I>&gt;<i> it&#8217;s any help.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ### Disclaimer &#8211; completely untested! J ###
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> def __setitem__(self, key, value):
</I>&gt;<i>
</I>&gt;<i>     self.list.append(util.Field(key, cStringIO.StringIO(key), &quot;text/ 
</I>&gt;<i> plain&quot;, {}, None, {}))
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> def __delitem__(self, key):
</I>&gt;<i>
</I>&gt;<i>     for item in self.list:
</I>&gt;<i>
</I>&gt;<i>         if item.name == key:
</I>&gt;<i>
</I>&gt;<i>             self.list.remove(item)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> def items(self):
</I>&gt;<i>
</I>&gt;<i>     result = []
</I>&gt;<i>
</I>&gt;<i>     for key in self.keys():
</I>&gt;<i>
</I>&gt;<i>         result.append((key, self[key]))
</I>&gt;<i>
</I>&gt;<i>     return result
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> def update(self, d):
</I>&gt;<i>
</I>&gt;<i>     for k in d.keys():
</I>&gt;<i>
</I>&gt;<i>         self[k] = d[k]
</I>
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022390.html">[mod_python] util.FieldStorage
</A></li>
	<LI>Next message: <A HREF="022392.html">[mod_python] util.FieldStorage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22391">[ date ]</a>
              <a href="thread.html#22391">[ thread ]</a>
              <a href="subject.html#22391">[ subject ]</a>
              <a href="author.html#22391">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
