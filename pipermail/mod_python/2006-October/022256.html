<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] newbie cookie confusion
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20newbie%20cookie%20confusion&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022255.html">
   <LINK REL="Next"  HREF="022258.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] newbie cookie confusion</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20newbie%20cookie%20confusion&In-Reply-To="
       TITLE="[mod_python] newbie cookie confusion">grahamd at dscpl.com.au
       </A><BR>
    <I>Mon Oct  9 19:14:23 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="022255.html">[mod_python] newbie cookie confusion
</A></li>
        <LI>Next message: <A HREF="022258.html">[mod_python] Restricted area - how to protect passwords ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22256">[ date ]</a>
              <a href="thread.html#22256">[ thread ]</a>
              <a href="subject.html#22256">[ subject ]</a>
              <a href="author.html#22256">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Sells, Fred wrote ..
&gt;<i> I am using the mod_python.publisher; could that mess me up with cookies
</I>&gt;<i> somehow?
</I>&gt;<i> I'm just trying to get the basic demo from the manual to work.
</I>&gt;<i> 
</I>&gt;<i> I notice the manual writes a plain cookie but reads a marshall cookie.
</I>&gt;<i> Am I
</I>&gt;<i> correct in assuming these are not compatible cookies, and you had better
</I>&gt;<i> read the type you wrote?
</I>
What is the actual problem you are having. Someone already pointed out
what you were probably doing wrong after your first post. That is that
the result of Cookie.get_cookies() is a dictionary. You were not using the
value (cookie) from the dictionary, but the key (name of cookie) which is
a string.

Change your test program to use:

    for c in cookies.values():
        s += '\n%s %s' % (str(c), type(c))

and you will see the actual cookies read back. You still need to access
the name and value attributes of the cookie to get the decoded value.

In terms of the example in the documentation, the two examples should
be seen as distinct and not as working together. In the second example
it itself sets up the MarshalCookie if it wasn't there to begin with.

As far as not getting the examples to work, are you using them exactly
as in the documentation, or have you used it merely as a guide to write
your own code?

In the event that cookies cached in the browser are the cause of any
problems, are you deleting from your browser cache any specific cookie
used by the test code?

Graham

&gt;<i> Sells, Fred wrote:
</I>&gt;<i> &gt; I've googled but not found this, trying to do cookie example from docs.
</I>&gt;<i> The
</I>&gt;<i> &gt; output is always of type &lt;type 'str'&gt; and is the cookie name.  How do
</I>&gt;<i> I
</I>&gt;<i> get
</I>&gt;<i> &gt; value?
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; def makecookie(req):
</I>&gt;<i> &gt;     c = Cookie.MarshalCookie('spam', 'eggs', 'secret007')
</I>&gt;<i> &gt;     d = Cookie.MarshalCookie('xxxx', 'yyy', 'secret007')
</I>&gt;<i> &gt;     Cookie.add_cookie(req, c)
</I>&gt;<i> &gt;     Cookie.add_cookie(req, d)
</I>&gt;<i> &gt;     return 'cookie made'
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; def showcookies(req):
</I>&gt;<i> &gt;     cookies = Cookie.get_cookies(req, Cookie.MarshalCookie,
</I>&gt;<i> &gt; secret='secret007')
</I>&gt;<i> &gt;     s = 'There are %s cookies'% len(cookies)
</I>&gt;<i> &gt;     for c in cookies:
</I>&gt;<i> &gt;         s += '\n%s %s' % (str(c), type(c))
</I>&gt;<i> &gt;     return s
</I>&gt;<i> &gt; 
</I>&gt;<i> 
</I>&gt;<i> I haven't been through the docs but I'd suggest that you have a look at
</I>&gt;<i> cookies[c] in case cookies is a dictionary.
</I>&gt;<i> 
</I>&gt;<i> Scott
</I></PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022255.html">[mod_python] newbie cookie confusion
</A></li>
	<LI>Next message: <A HREF="022258.html">[mod_python] Restricted area - how to protect passwords ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22256">[ date ]</a>
              <a href="thread.html#22256">[ thread ]</a>
              <a href="subject.html#22256">[ subject ]</a>
              <a href="author.html#22256">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
