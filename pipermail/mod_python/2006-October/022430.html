<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Can i have both Marshal and Signed
	CookieswithPublisher?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Can%20i%20have%20both%20Marshal%20and%20Signed%0A%09CookieswithPublisher%3F&In-Reply-To=1162161173.20512%40dscpl.user.openhosting.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022429.html">
   <LINK REL="Next"  HREF="022431.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Can i have both Marshal and Signed
	CookieswithPublisher?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Clodoaldo Pinto Neto</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Can%20i%20have%20both%20Marshal%20and%20Signed%0A%09CookieswithPublisher%3F&In-Reply-To=1162161173.20512%40dscpl.user.openhosting.com"
       TITLE="[mod_python] Can i have both Marshal and Signed
	CookieswithPublisher?">clodoaldo.pinto at gmail.com
       </A><BR>
    <I>Sun Oct 29 18:24:31 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="022429.html">[mod_python] Can i have both Marshal and Signed
	CookieswithPublisher?
</A></li>
        <LI>Next message: <A HREF="022431.html">[mod_python] Can i have both Marshal and Signed
	CookieswithPublisher?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22430">[ date ]</a>
              <a href="thread.html#22430">[ thread ]</a>
              <a href="subject.html#22430">[ subject ]</a>
              <a href="author.html#22430">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>2006/10/29, Graham Dumpleton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">grahamd at dscpl.com.au</A>&gt;:
&gt;<i> I have created a JIRA issue for this at:
</I>&gt;<i>
</I>&gt;<i>   <A HREF="http://issues.apache.org/jira/browse/MODPYTHON-200">http://issues.apache.org/jira/browse/MODPYTHON-200</A>
</I>&gt;<i>
</I>&gt;<i> At the moment I have made changes (not committed), that would allow
</I>&gt;<i> one to do:
</I>&gt;<i>
</I>&gt;<i>     cookies = Cookie.get_cookies(req, Cookie.MarshalCookie, secret='secret', names=['marshal'])
</I>&gt;<i>
</I>&gt;<i> That is, when using Cookie.get_cookies(), one can optionally provide a
</I>&gt;<i> keyword argument called 'names' which is a set/list of cookie names
</I>&gt;<i> to decode.
</I>
IMHO, the least surprise behavior is if Cookie.get_cookies() returned
all cookies of the given class regardless of how many different cookie
classes there are in the header.

Why isn't the except clause catching the exception? What exception is
being raised?:

    def parse(Class, s, secret):

        dict = _parse_cookie(s, Class)

        for k in dict:
            c = dict[k]
            try:
                c.unmarshal(secret)
            except (CookieError, ValueError):
                # downgrade to Cookie
                dict[k] = Cookie.parse(Cookie.__str__(c))[k]

        return dict

What is the point in downgrading the cookie? If it is tampered or
corrupted then why not just discard it?

Regards, Clodoaldo Pinto Neto
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022429.html">[mod_python] Can i have both Marshal and Signed
	CookieswithPublisher?
</A></li>
	<LI>Next message: <A HREF="022431.html">[mod_python] Can i have both Marshal and Signed
	CookieswithPublisher?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22430">[ date ]</a>
              <a href="thread.html#22430">[ thread ]</a>
              <a href="subject.html#22430">[ subject ]</a>
              <a href="author.html#22430">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
