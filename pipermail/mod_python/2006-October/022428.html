<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Can i have both Marshal and Signed Cookies
	withPublisher?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Can%20i%20have%20both%20Marshal%20and%20Signed%20Cookies%0A%09withPublisher%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022427.html">
   <LINK REL="Next"  HREF="022429.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Can i have both Marshal and Signed Cookies
	withPublisher?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Can%20i%20have%20both%20Marshal%20and%20Signed%20Cookies%0A%09withPublisher%3F&In-Reply-To="
       TITLE="[mod_python] Can i have both Marshal and Signed Cookies
	withPublisher?">grahamd at dscpl.com.au
       </A><BR>
    <I>Sun Oct 29 16:09:51 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="022427.html">[mod_python] Can i have both Marshal and Signed Cookies with
	Publisher?
</A></li>
        <LI>Next message: <A HREF="022429.html">[mod_python] Can i have both Marshal and Signed
	CookieswithPublisher?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22428">[ date ]</a>
              <a href="thread.html#22428">[ thread ]</a>
              <a href="subject.html#22428">[ subject ]</a>
              <a href="author.html#22428">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>That would be understandable. The Cookie.get_cookies() expects you
to supply a class type and since there are multiple cookies stored of
differing types then the class type supplied may not be able to unpack
all of them.

There probably needs to be a Cookie.get_cookie() so you can say that
you only want to get a specific cookie by name. Not sure I understand
why there isn't one already unless I am missing something.

Besides writing your own version of Cookie.get_cookie(), the only other
way of getting around the problem for now is to set the 'path' attribute
of the cookies so that the cookies only get delivered to their respective
applications. But then, even that isn't necessarily going to help in all
cases because sessions use cookies as well, so it you want to use a
marshalled cookie in the same context as a session is used you are
similarly going to have a problem if the session is signed.

Graham

Clodoaldo Pinto Neto wrote ..
&gt;<i> If i set both a Signed and a Marshal cookie and try to retrieve the
</I>&gt;<i> Marshal one using the Publisher i get this error:
</I>&gt;<i> 
</I>&gt;<i> ----------------------------------------
</I>&gt;<i> Mod_python error: &quot;PythonHandler mod_python.publisher&quot;
</I>&gt;<i> 
</I>&gt;<i> Traceback (most recent call last):
</I>&gt;<i> 
</I>&gt;<i>   File &quot;/usr/lib/python2.4/site-packages/mod_python/apache.py&quot;, line
</I>&gt;<i> 299, in HandlerDispatch
</I>&gt;<i>     result = object(req)
</I>&gt;<i> 
</I>&gt;<i>   File &quot;/usr/lib/python2.4/site-packages/mod_python/publisher.py&quot;,
</I>&gt;<i> line 213, in handler
</I>&gt;<i>     published = publish_object(req, object)
</I>&gt;<i> 
</I>&gt;<i>   File &quot;/usr/lib/python2.4/site-packages/mod_python/publisher.py&quot;,
</I>&gt;<i> line 412, in publish_object
</I>&gt;<i>     return publish_object(req,util.apply_fs_data(object, req.form, req=req))
</I>&gt;<i> 
</I>&gt;<i>   File &quot;/usr/lib/python2.4/site-packages/mod_python/util.py&quot;, line
</I>&gt;<i> 439, in apply_fs_data
</I>&gt;<i>     return object(**args)
</I>&gt;<i> 
</I>&gt;<i>   File &quot;/var/www/html/teste/python/publisher/marshalcookie.py&quot;, line
</I>&gt;<i> 10, in index
</I>&gt;<i>     marshal_cookies = Cookie.get_cookies(
</I>&gt;<i> 
</I>&gt;<i>   File &quot;/usr/lib/python2.4/site-packages/mod_python/Cookie.py&quot;, line
</I>&gt;<i> 350, in get_cookies
</I>&gt;<i>     return Class.parse(cookies, **kw)
</I>&gt;<i> 
</I>&gt;<i>   File &quot;/usr/lib/python2.4/site-packages/mod_python/Cookie.py&quot;, line
</I>&gt;<i> 252, in parse
</I>&gt;<i>     c.unmarshal(secret)
</I>&gt;<i> 
</I>&gt;<i>   File &quot;/usr/lib/python2.4/site-packages/mod_python/Cookie.py&quot;, line
</I>&gt;<i> 280, in unmarshal
</I>&gt;<i>     self.value = marshal.loads(base64.decodestring(self.value))
</I>&gt;<i> 
</I>&gt;<i>   File &quot;/usr/lib/python2.4/base64.py&quot;, line 319, in decodestring
</I>&gt;<i>     return binascii.a2b_base64(s)
</I>&gt;<i> 
</I>&gt;<i> Error: Incorrect padding
</I>&gt;<i> ---------------------------------------------
</I>&gt;<i> 
</I>&gt;<i> If the Signed cookie is deleted then the Marshal cookie can be
</I>&gt;<i> retrieved with no errors.
</I>&gt;<i> 
</I>&gt;<i> The scripts that trigger the error are:
</I>&gt;<i> 
</I>&gt;<i> Set and retrieve the Signed cookie:
</I>&gt;<i> <A HREF="http://webpython.codepoint.net/mod_python_publisher_cookies_signed">http://webpython.codepoint.net/mod_python_publisher_cookies_signed</A>
</I>&gt;<i> 
</I>&gt;<i> Set and retrieve the Marshal cookie:
</I>&gt;<i> <A HREF="http://webpython.codepoint.net/mod_python_publisher_cookies_marshal">http://webpython.codepoint.net/mod_python_publisher_cookies_marshal</A>
</I>&gt;<i> 
</I>&gt;<i> I'm just building that tutorial. BTW i would appreciate to have it
</I>&gt;<i> corrected by the experts.
</I>&gt;<i> 
</I>&gt;<i> I tested in Firefox 1.5.0.7 and Opera 9.02. FC5, mod_python 3.2.8, Apache
</I>&gt;<i> 2.2.2.
</I>&gt;<i> 
</I>&gt;<i> Regards, Clodoaldo Pinto Neto
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I></PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022427.html">[mod_python] Can i have both Marshal and Signed Cookies with
	Publisher?
</A></li>
	<LI>Next message: <A HREF="022429.html">[mod_python] Can i have both Marshal and Signed
	CookieswithPublisher?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22428">[ date ]</a>
              <a href="thread.html#22428">[ thread ]</a>
              <a href="subject.html#22428">[ subject ]</a>
              <a href="author.html#22428">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
