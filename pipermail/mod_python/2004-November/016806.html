<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Sessions and Cookies with mod_python and more
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Sessions%20and%20Cookies%20with%20mod_python%20and%20more&In-Reply-To=419BD462.3010504%40phoenux.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016805.html">
   <LINK REL="Next"  HREF="016807.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Sessions and Cookies with mod_python and more</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Sessions%20and%20Cookies%20with%20mod_python%20and%20more&In-Reply-To=419BD462.3010504%40phoenux.org"
       TITLE="[mod_python] Sessions and Cookies with mod_python and more">grahamd at dscpl.com.au
       </A><BR>
    <I>Wed Nov 17 18:57:27 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="016805.html">[mod_python] Sessions and Cookies with mod_python and more
</A></li>
        <LI>Next message: <A HREF="016807.html">[mod_python] Help converting cgi to mod_python
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16806">[ date ]</a>
              <a href="thread.html#16806">[ thread ]</a>
              <a href="subject.html#16806">[ subject ]</a>
              <a href="author.html#16806">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Nov 17 17:44, Bram &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">bram-lists at phoenux.org</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> Subject: Re: [mod_python] Sessions and Cookies with mod_python and more
</I>&gt;<i>
</I>&gt;<i> Graham,
</I>&gt;<i> 
</I>&gt;<i> You hit the nail on the head, as I am speaking of XML-RPC. Your form 
</I>&gt;<i> example is a good one, and I will take a closer look at 
</I>&gt;<i> mod_python.utils.FieldStorage. Thanks for that bit of info. Although, I 
</I>&gt;<i> am not sure that it will meet my needs completely. That being said I 
</I>&gt;<i> will explain further. I am currently using a mod_perl XML-RPC server 
</I>&gt;<i> that was modified to handle large binary files. I have found that 
</I>&gt;<i> passing large binary strings in XML via XML-RPC (or any other protocol 
</I>&gt;<i> for that matter) even with careful attention to the encoding can lead to 
</I>&gt;<i> problems. I know that with XML-RPC one may use the &lt;base64&gt; tag to 
</I>&gt;<i> encapsulate binary data directly within the XML document. However, is 
</I>&gt;<i> this the best way to handle this when dealing with large files? In my 
</I>&gt;<i> mod_perl implementation, I have a multipart/related handing situation 
</I>&gt;<i> setup, i.e. the first part of the multipart/related message would be the 
</I>&gt;<i> XML-RPC request/reply and the second (and 3rd, 4th, etc. if need) part 
</I>&gt;<i> is binary data referenced by the XML-RPC data. I am not saying this is 
</I>&gt;<i> the best solution, and may not even adhere to any specification, but I 
</I>&gt;<i> haven't found a better one to date. I admit it is a little hackish. :) 
</I>&gt;<i> Any suggestions to improve upon this, or even suggestions totally 
</I>&gt;<i> rethinking it? In short, what would be an efficient way to transfer 
</I>&gt;<i> large files via an XML based, standards based web service like XML-RPC?
</I>
Hmmm, not really XML-RPC. More like SOAP with attachments.

Since though you are still trying to use the simpler XML-RPC for
the structured data component, also have a look at SimpleXMLRPCServer
and xmlrpclib modules.

It isn't too hard to use SimpleXMLRPCServer as a base to construct a
XML-RPC handler for mod_python. See vampire/xmlrpc.py in my Vampire
package at &quot;<A HREF="http://www.dscpl.com.au/projects/vampire&quot;">http://www.dscpl.com.au/projects/vampire&quot;</A> as an example.

In your case, you would need to change things though so as to use the
convention you want to to indicate that you are returning attachments
to the response or a multipart response.

Ie., normally xmlrpclib/SimpleXMLRPCServer will try and encode the
complete result of the method called. You might modify it such that if
you returned a class object of specific type, which had named components
in it and how to encode each, that the basic XML-RPC handler behaved
a bit different and put it back as multipart data. Obviously a standard
XML-RPC client can't be used to talk to it, but you already know that.

As well as looking at SimpleXMLRPCServer and xmlrpclib, Python also has
the cgi module. It also has a version of FieldStorage in it as well as some
more basic functions for parsing multipart messages. This would be
useful on the client side as the FieldStorage class in mod_python isn't
going to be usable outside of the context of a mod_python handler.

Having said all that, the REST folks would probably say that you shouldn't
return multipart data and that instead you should return a response
which then enumerates the links to each part and a subsequent request
made to get each bit. :-)

BTW, mean't &quot;mod_python.util.FieldStorage&quot;. Ie., &quot;util&quot;, not &quot;utils&quot;.

--
Graham Dumpleton (<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">grahamd at dscpl.com.au</A>)
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016805.html">[mod_python] Sessions and Cookies with mod_python and more
</A></li>
	<LI>Next message: <A HREF="016807.html">[mod_python] Help converting cgi to mod_python
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16806">[ date ]</a>
              <a href="thread.html#16806">[ thread ]</a>
              <a href="subject.html#16806">[ subject ]</a>
              <a href="author.html#16806">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
