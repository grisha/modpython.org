<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] module caching problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20module%20caching%20problem&In-Reply-To=7222FAFE-3DAD-11D9-8FFD-000A95D2D288%40apache.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016826.html">
   <LINK REL="Next"  HREF="016830.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] module caching problem</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Huzaifa Tapal</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20module%20caching%20problem&In-Reply-To=7222FAFE-3DAD-11D9-8FFD-000A95D2D288%40apache.org"
       TITLE="[mod_python] module caching problem">huzaifa at hostway.com
       </A><BR>
    <I>Tue Nov 23 19:43:26 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="016826.html">[mod_python] module caching problem
</A></li>
        <LI>Next message: <A HREF="016830.html">[mod_python] module caching problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16828">[ date ]</a>
              <a href="thread.html#16828">[ thread ]</a>
              <a href="subject.html#16828">[ subject ]</a>
              <a href="author.html#16828">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>How can I check if I am running a forked apache or a threaded apache.  Also
when you say &quot;PythonReload is off&quot; did you mean the PythonAutoReload
configuration directive in the mod_python handler declaration?

 

Hozi

 

  _____  

From: Scott Sanders [mailto:<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">sanders at apache.org</A>] 
Sent: Tuesday, November 23, 2004 6:12 PM
To: Huzaifa Tapal
Cc: <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython.org</A>
Subject: Re: [mod_python] module caching problem

 

If you are running a forked apache, the module has to be imported once per
process. If threaded, should only be imported once. Also make sure that
PythonReload is off.

Scott

On Nov 23, 2004, at 3:57 PM, Huzaifa Tapal wrote:

I am running into a problem with mod_python in that, I am importing a module
in the handler which creates a singleton in memory.  I am using the module
to hold cache information for any other modules that import the same module.

 

I started testing the cache mechanism when I noticed that the module was
being imported multiple times and not just once after the first request
after apache had started.  To test this, I put a few lines of code in the
module to write to a file the time it was last imported.  I noticed that
after restarting apache, the first time it writes to the file.  If I hit
refresh on my page immediately, multiple times, it doesn't write.  If I wait
like 10 seconds or more and then hit refresh again, it reimports that module
that should have been cached.

 

Also, If I make a request for a page from two different clients, it
reimports the module from each client.  Am I mistaken in thinking that any
module imported in the handler then is cached in mod_python's module cache
and subsequent imports of that module then are simply served up from the
cache.  Under what conditions then would the same module get reimported if
no modifications were made to that module?

 

Any help would be appreciated.

 

Hozi
_______________________________________________
Mod_python mailing list
<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20041123/e1ee7e51/attachment.html">http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20041123/e1ee7e51/attachment.html</A>
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016826.html">[mod_python] module caching problem
</A></li>
	<LI>Next message: <A HREF="016830.html">[mod_python] module caching problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16828">[ date ]</a>
              <a href="thread.html#16828">[ thread ]</a>
              <a href="subject.html#16828">[ subject ]</a>
              <a href="author.html#16828">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
