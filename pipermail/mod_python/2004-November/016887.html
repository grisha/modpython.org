<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Returning a Apache return code
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Returning%20a%20Apache%20return%20code&In-Reply-To=41ACAA00.8080401%40joreybump.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016884.html">
   <LINK REL="Next"  HREF="016889.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Returning a Apache return code</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Nick</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Returning%20a%20Apache%20return%20code&In-Reply-To=41ACAA00.8080401%40joreybump.com"
       TITLE="[mod_python] Returning a Apache return code">nick at dd.revealed.net
       </A><BR>
    <I>Tue Nov 30 12:39:33 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="016884.html">[mod_python] Returning a Apache return code
</A></li>
        <LI>Next message: <A HREF="016889.html">[mod_python] Returning a Apache return code
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16887">[ date ]</a>
              <a href="thread.html#16887">[ thread ]</a>
              <a href="subject.html#16887">[ subject ]</a>
              <a href="author.html#16887">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Note that you should almost always use 307 (moved temporarily) for a web 
application, because 301 tells the client to always go to the new location 
when the URL is requested without even asking for the original page.  I.e., 
the page has moved permanently, don't look here anymore.

Nick

Jorey Bump wrote:
&gt;<i> Golawala, Moiz M (GE Infrastructure) wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> I have am newbie and I seems to be having a problem return a
</I>&gt;&gt;<i> different apache return code. In my httpd.conf file I am using
</I>&gt;&gt;<i> PythonHandler mod_python.publisher.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> In my index.py file.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> index(req): req.header_out['Location'] = &quot;<A HREF="http://someurl:8080/">http://someurl:8080/</A> 
</I>&gt;<i> 
</I>&gt;<i>  &gt; return apache.HTTP_PERMANENTLY_MOVED
</I>&gt;<i> 
</I>&gt;<i> Try this:
</I>&gt;<i> 
</I>&gt;<i> from mod_python import apache
</I>&gt;<i> 
</I>&gt;<i> index(req)
</I>&gt;<i>     status = apache.HTTP_MOVED_PERMANENTLY
</I>&gt;<i>     req.headers_out['Location'] = url
</I>&gt;<i>     req.status = status
</I>&gt;<i>     raise apache.SERVER_RETURN, status
</I>&gt;<i> 
</I>&gt;<i> More info:
</I>&gt;<i> 
</I>&gt;<i>  <A HREF="http://www.modpython.org/live/current/doc-html/pyapi-handler.html">http://www.modpython.org/live/current/doc-html/pyapi-handler.html</A>
</I>&gt;<i> 
</I>&gt;&gt;<i> my problem is that this returns:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> HTTP/1.1 200 OK Date: Tue, 30 Nov 2004 01:12:06 GMT Server:
</I>&gt;&gt;<i> Apache/2.0.49 (Fedora) Location:  &quot;<A HREF="http://someurl:8080/&quot;">http://someurl:8080/&quot;</A> Connection:
</I>&gt;&gt;<i> close Transfer-Encoding: chunked Content-Type: text/html;
</I>&gt;&gt;<i> charset=UTF-8
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 3 301 0
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I would like to return HTTP/1.1 301.. instead of HTTP/1.1 200 OK.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> For some reason anything that the method return the publisher handler
</I>&gt;&gt;<i> puts it in the body of the request I cannot return a different return
</I>&gt;&gt;<i> code other than the default apache.OK
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Could some one please help me with this.
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016884.html">[mod_python] Returning a Apache return code
</A></li>
	<LI>Next message: <A HREF="016889.html">[mod_python] Returning a Apache return code
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16887">[ date ]</a>
              <a href="thread.html#16887">[ thread ]</a>
              <a href="subject.html#16887">[ subject ]</a>
              <a href="author.html#16887">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
