<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] ImportError: No module named _apache
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20ImportError%3A%20No%20module%20named%20_apache&In-Reply-To=f377591c041122103016f76601%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016821.html">
   <LINK REL="Next"  HREF="016823.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] ImportError: No module named _apache</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20ImportError%3A%20No%20module%20named%20_apache&In-Reply-To=f377591c041122103016f76601%40mail.gmail.com"
       TITLE="[mod_python] ImportError: No module named _apache">grahamd at dscpl.com.au
       </A><BR>
    <I>Mon Nov 22 16:22:05 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="016821.html">[mod_python] ImportError: No module named _apache
</A></li>
        <LI>Next message: <A HREF="016823.html">[mod_python] ImportError: No module named _apache
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16822">[ date ]</a>
              <a href="thread.html#16822">[ thread ]</a>
              <a href="subject.html#16822">[ subject ]</a>
              <a href="author.html#16822">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Nov 22 13:30, Alan Ezust &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">alan.ezust at gmail.com</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> Subject: Re: [mod_python] ImportError: No module named _apache
</I>&gt;<i>
</I>&gt;<i> I am getting the same error message. I am using the pre-installed
</I>&gt;<i> apache version 1, and I apt-got apache-mod-python.
</I>&gt;<i> 
</I>&gt;<i> my apache log looks like this:
</I>&gt;<i> 
</I>&gt;<i> Traceback (most recent call last):
</I>&gt;<i>   File &quot;/home/ezust/alan/school/uvic/phd/distquery/bin/modtest.py&quot;, line 3, in ?
</I>&gt;<i>     from mod_python import apache
</I>&gt;<i>   File &quot;/usr/lib/python2.3/site-packages/mod_python/apache.py&quot;, line 55, in ?
</I>&gt;<i>     import _apache
</I>&gt;<i> ImportError: No module named _apache
</I>&gt;<i> 
</I>&gt;<i> Which package is the module _apache supposed to come from?
</I>
It is installed by the mod_python module when it is loaded by Apache at startup.
Thus, only scripts which are executing under mod_python will actually be able
to import it.

The _apache module will not be available to a Python script which is executed
by Apache as a CGI script.

I raise this specific issue as this is the main reason one can see this error.
Specifically, that the Apache configuration is such that your script is actually
getting executed as a CGI script and not as a mod_python content handler.

One can generally tell this by looking at the messages in the Apache error log
file. You list some of the messages from your error log, but what comes just
after that. Do you also get an error messages talking about &quot;Premature end
of script headers&quot; as shown below.

Traceback (most recent call last):  
  File &quot;/usr/local/etc/httpd/cgi-bin/cgi-env.cgi&quot;, line 3, in ?
    from mod_python import apache
  File &quot;/usr/local/lib/python2.3/site-packages/mod_python/apache.py&quot;, line 55, i
n ?
    import _apache
ImportError: No module named _apache
[Mon Nov 22 14:09:52 2004] [error] [client 163.189.217.36] Premature end of scri
pt headers: /usr/local/etc/httpd/cgi-bin/cgi-env.cgi

This is what I get if I try and import mod_python.apache into a Python CGI script.

&gt;<i> David, I am running the latest version of Debian on my computer.  Also there
</I>&gt;<i> is no error when compiling the _apache module into mod_python and that is
</I>&gt;<i> what my original concern was that there seems to be no exception raised if
</I>&gt;<i> the compilation fails for _apache.
</I>&gt;<i> 
</I>&gt;<i> Here is what I am talking about:
</I>&gt;<i> 
</I>&gt;<i> _apacheModule.c: void init_apache(): line 533
</I>&gt;<i> 
</I>&gt;<i> Mp_ServerReturn = PyErr_NewException(&quot;_apache.SERVER_RETURN&quot;, NULL, NULL);
</I>&gt;<i> if (Mp_ServerReturn = NULL)
</I>&gt;<i> 	return;
</I>&gt;<i> 
</I>&gt;<i> _apacheModule does not seem to be raising any exceptions when that occurs.
</I>
I wouldn't be too concerned about that as it is unlikely to raise an exception as
it is compiled C code which is a part of mod_python itself.

&gt;<i> Brian, I just signed up with the list before I posted this message.  How can
</I>&gt;<i> I check all the previous list entries to find out how this problem was
</I>&gt;<i> covered.
</I>
FAQ: <A HREF="http://www.modpython.org/FAQ/faqw.py">http://www.modpython.org/FAQ/faqw.py</A>
ML ARCHIVE: <A HREF="http://www.modpython.org/pipermail/mod_python/">http://www.modpython.org/pipermail/mod_python/</A>

&gt;<i> As far as not running this through mod_python on the apache server, as far
</I>&gt;<i> as I am concerned, I am.  I pretty much followed exactly what is written in
</I>&gt;<i> the documentation including the test file they have to test mod_python, in
</I>&gt;<i> which the call to import apache fails:
</I>&gt;<i> 
</I>&gt;<i> from mod_python import apache
</I>&gt;<i> 
</I>&gt;<i> Any ideas guys?
</I>
Ensure that you haven't put your Python code file in a directory which has some
sort of overriding directive that says that all stuff there should be executed as a
CGI script. Alternatively make sure there is no mapping in place which marks a
.py file as a CGI script.

You might also post how you have set up you httpd.conf and/or .htaccess file
and the contents of your Python code file you are using to test so it can be
confirmed that it is correct.

Although the documentation seems to emphasise enabling mod_python for a
directory from the httpd.conf file, this seems to cause more problems that good.
Try instead doing it from a .htaccess file if you are doing it from httpd.conf. At
least then you don't usually have to restart Apache to see if it is going to work.

--
Graham Dumpleton (<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">grahamd at dscpl.com.au</A>)
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016821.html">[mod_python] ImportError: No module named _apache
</A></li>
	<LI>Next message: <A HREF="016823.html">[mod_python] ImportError: No module named _apache
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16822">[ date ]</a>
              <a href="thread.html#16822">[ thread ]</a>
              <a href="subject.html#16822">[ subject ]</a>
              <a href="author.html#16822">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
