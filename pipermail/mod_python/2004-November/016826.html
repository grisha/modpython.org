<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] module caching problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20module%20caching%20problem&In-Reply-To=20041124000232.06D9AB526%40fiona.siteprotect.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016825.html">
   <LINK REL="Next"  HREF="016828.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] module caching problem</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Scott Sanders</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20module%20caching%20problem&In-Reply-To=20041124000232.06D9AB526%40fiona.siteprotect.com"
       TITLE="[mod_python] module caching problem">sanders at apache.org
       </A><BR>
    <I>Tue Nov 23 19:11:53 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="016825.html">[mod_python] module caching problem
</A></li>
        <LI>Next message: <A HREF="016828.html">[mod_python] module caching problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16826">[ date ]</a>
              <a href="thread.html#16826">[ thread ]</a>
              <a href="subject.html#16826">[ subject ]</a>
              <a href="author.html#16826">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>If you are running a forked apache, the module has to be imported once 
per process.  If threaded, should only be imported once.  Also make 
sure that PythonReload is off.

Scott

On Nov 23, 2004, at 3:57 PM, Huzaifa Tapal wrote:

&gt;<i> I am running into a problem with mod_python in that, I am importing a 
</I>&gt;<i> module in the handler which creates a singleton in memory.&#160; I am using 
</I>&gt;<i> the module to hold cache information for any other modules that import 
</I>&gt;<i> the same module.
</I>&gt;<i>
</I>&gt;<i> &#160;
</I>&gt;<i>
</I>&gt;<i> I started testing the cache mechanism when I noticed that the module 
</I>&gt;<i> was being imported multiple times and not just once after the first 
</I>&gt;<i> request after apache had started.&#160; To test this, I put a few lines of 
</I>&gt;<i> code in the module to write to a file the time it was last imported.&#160; 
</I>&gt;<i> I noticed that after restarting apache, the first time it writes to 
</I>&gt;<i> the file.&#160; If I hit refresh on my page immediately, multiple times, it 
</I>&gt;<i> doesn&#8217;t write.&#160; If I wait like 10 seconds or more and then hit refresh 
</I>&gt;<i> again, it reimports that module that should have been cached.
</I>&gt;<i>
</I>&gt;<i> &#160;
</I>&gt;<i>
</I>&gt;<i> Also, If I make a request for a page from two different clients, it 
</I>&gt;<i> reimports the module from each client.&#160; Am I mistaken in thinking that 
</I>&gt;<i> any module imported in the handler then is cached in mod_python&#8217;s 
</I>&gt;<i> module cache and subsequent imports of that module then are simply 
</I>&gt;<i> served up from the cache.&#160; Under what conditions then would the same 
</I>&gt;<i> module get reimported if no modifications were made to that module?
</I>&gt;<i>
</I>&gt;<i> &#160;
</I>&gt;<i>
</I>&gt;<i> Any help would be appreciated.
</I>&gt;<i>
</I>&gt;<i> &#160;
</I>&gt;<i>
</I>&gt;<i> Hozi
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: text/enriched
Size: 2323 bytes
Desc: not available
Url : <A HREF="http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20041123/283a8f26/attachment.bin">http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20041123/283a8f26/attachment.bin</A>
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016825.html">[mod_python] module caching problem
</A></li>
	<LI>Next message: <A HREF="016828.html">[mod_python] module caching problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16826">[ date ]</a>
              <a href="thread.html#16826">[ thread ]</a>
              <a href="subject.html#16826">[ subject ]</a>
              <a href="author.html#16826">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
