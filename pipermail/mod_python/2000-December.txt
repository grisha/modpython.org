From Lisa  Mon Dec  4 22:18:18 2000
From: Lisa (Lisa)
Date: Fri Jan  9 21:46:06 2004
Subject: [mod_python] RE: Answer To Your Question.
Message-ID: <200012042025.UAA03461@mercury.ispol.com>

An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20001204/e8402cf1/attachment.htm
From arhiv at freemail.org.mk  Mon Dec  4 22:25:25 2000
From: arhiv at freemail.org.mk (Damjan)
Date: Fri Jan  9 21:46:06 2004
Subject: [mod_python] apache.send_file()
Message-ID: <Pine.LNX.4.30.0012042218140.460-100000@localhost.localdomain>

Is there a point in having something like
apache.send_file(PyObject * file) or apache.send_file(char * filename)

Of course I can do this with:
	f = open(...
	buf = f.read()
	req.write(buf)
but perhaps using apache calls will be faster.

-- 
Damjan Georgievski		|           ?????? ???????????
Skopje, Macedonia		|           ??????, ??????????


From grisha at ispol.com  Tue Dec  5 11:42:55 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:46:06 2004
Subject: [mod_python] apache.send_file()
In-Reply-To: <Pine.LNX.4.30.0012042218140.460-100000@localhost.localdomain>
Message-ID: <Pine.LNX.4.21.0012051133220.16800-100000@saturn.ispol.com>

Yeah, it will be faster.... (req.write(f.read()) is going to be pretty
damn fast too) I didn't bother implementing that one since I figured 99.9%
of the content will be dynamically generated. I'll see if I can implement
something in the next version.

Grisha

On Mon, 4 Dec 2000, Damjan wrote:

> Is there a point in having something like
> apache.send_file(PyObject * file) or apache.send_file(char * filename)
> 
> Of course I can do this with:
> 	f = open(...
> 	buf = f.read()
> 	req.write(buf)
> but perhaps using apache calls will be faster.
> 
> -- 
> Damjan Georgievski		|           ???????????? ??????????????????????
> Skopje, Macedonia		|           ????????????, ????????????????????
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From jb4mt at yahoo.com  Tue Dec  5 10:10:09 2000
From: jb4mt at yahoo.com (George Jempty)
Date: Fri Jan  9 21:46:06 2004
Subject: [mod_python] Site redesign
Message-ID: <20001205181009.26474.qmail@web3904.mail.yahoo.com>

I just subscribed to this list because I'm having
problems getting mod_python to work on my Windows 2000
system.  I plan on digging a little deeper on my own
first, but in the event I need to come back here I'm
trying to establish some good karma by working on the
site design as requested on the home page.  You can
see what I've come up with at:

http://webfielding.com/mod_python/

It's by no means complete but I think should give an
idea of the possiblities for organizing the site.  And
as for color, at first I thought the plum-colored
banner was too garish, and tried "thistle" instead,
but I'm liking plum more and more!

However, you can see the page with a thistle-colored
banner at:

http://webfielding.com/mod_python/thistle.htm

I'll look forward to everyone's feedback!

George

__________________________________________________
Do You Yahoo!?
Yahoo! Shopping - Thousands of Stores. Millions of Products.
http://shopping.yahoo.com/

From grisha at ispol.com  Tue Dec  5 16:03:59 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:46:06 2004
Subject: [mod_python] Site redesign
In-Reply-To: <20001205181009.26474.qmail@web3904.mail.yahoo.com>
Message-ID: <Pine.LNX.4.21.0012051602010.16800-100000@saturn.ispol.com>

Thanks George, this looks good I might put it out on the main site.

This sort of reorganization is long overdue. I've got another submission
of a site deisgn that I'm still holding on to partly because I don't have
time to put it out, partly because I'm hoping something better will come
around...

P.S. One comment - I'm not a big fan of frames....

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Tue, 5 Dec 2000, George Jempty wrote:

> I just subscribed to this list because I'm having
> problems getting mod_python to work on my Windows 2000
> system.  I plan on digging a little deeper on my own
> first, but in the event I need to come back here I'm
> trying to establish some good karma by working on the
> site design as requested on the home page.  You can
> see what I've come up with at:
> 
> http://webfielding.com/mod_python/
> 
> It's by no means complete but I think should give an
> idea of the possiblities for organizing the site.  And
> as for color, at first I thought the plum-colored
> banner was too garish, and tried "thistle" instead,
> but I'm liking plum more and more!
> 
> However, you can see the page with a thistle-colored
> banner at:
> 
> http://webfielding.com/mod_python/thistle.htm
> 
> I'll look forward to everyone's feedback!
> 
> George
> 
> __________________________________________________
> Do You Yahoo!?
> Yahoo! Shopping - Thousands of Stores. Millions of Products.
> http://shopping.yahoo.com/
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From jb4mt at yahoo.com  Tue Dec  5 14:50:47 2000
From: jb4mt at yahoo.com (George Jempty)
Date: Fri Jan  9 21:46:06 2004
Subject: [mod_python] Can't configure under Windows NT and Windows 2000
Message-ID: <20001205225047.17197.qmail@web3901.mail.yahoo.com>

When following the Windows installation instructions
for mod_python.py verbatim, I get the same error
message when trying to run test.py, under both NT4 and
Windows 2000.  That message is:

python_handler: make_obcallback returned no
obCallBack!

Your help in solving this problem will be appreciated.
 Also I have some comments about the install
instructions at:

http://www.modpython.org/live/mod_python-2.6.3/doc/windows.html

that might or might not shed light on my problem.

First of all these instructions only mention 1.52
whereas I'm running Python 2.0; I did however download
the .dll for 2.0 from the home page (NOT the 1.52
.dll).

Secondly, just to be certain, I downloaded the one and
only .tgz installation from the home page: does this
work for both Windows AND Linux?!

Furthermore, in contradiction to the Windows
installation doc, when I unzip the .tgz file I do NOT
get a "new folder".  Rather I get another .tar file;
extrapolating from the instructions, however, I just
extracted this to my python/lib folder
(C:\Python20\Lib), which resulted in a subfolder under
lib named "mod_python-2.6.3".

Moving on to the Apache Integration section of the
install, I stopped and re-started Apache after each
directive I added, to be certain!  However I do find
the instructions about the ScriptAlias/CGI section of
httpd.conf to be confusing: these aren't necessarily
the same thing.

On the first install (on Windows 2000) I added the
indicated directives to the others for my CGI
directory.  On the subsequent NT install I instead
followed the instructions verbatim, creating a
"python" directory under my document_root "htdocs"
directory.  Regardless, as noted above, I got the same
error message for both installs.

Finally, please note that as a final control I created
a test.py program in my cgi-bin as follows:

#! C:\Python20\python.exe

print "Content-type: text/html\n\n"
print "Whatever"

And it ran flawlessly.  So my Apache and Python are
working properly (and I can proceed to develop my
application if solving this problem doesn't happen
overnight ;)

OK, I will look forward to whatever light anybody in
the group can shed on this.  If I'm being an idiot
please be gentle.  On the other hand if any of my
comments are useful I would not mind getting involved
in revising the install docs (PS, the
installation.html that I extracted is not the same as
the installation for windows doc on the website)

Thanks in advance

George Jempty

__________________________________________________
Do You Yahoo!?
Yahoo! Shopping - Thousands of Stores. Millions of Products.
http://shopping.yahoo.com/

From djc at object-craft.com.au  Wed Dec  6 16:58:25 2000
From: djc at object-craft.com.au (Dave Cole)
Date: Fri Jan  9 21:46:06 2004
Subject: [mod_python] How do I find the document root?
Message-ID: <m3bsuqum4e.fsf@vole.object-craft.com.au>

I want to find out the value of the DocumentRoot directive.  I cannot
see any way to do this.

Can someone please point me in the right direction?

- Dave

-- 
http://www.object-craft.com.au


From grisha at ispol.com  Wed Dec  6 09:54:57 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:46:06 2004
Subject: [mod_python] How do I find the document root?
In-Reply-To: <m3bsuqum4e.fsf@vole.object-craft.com.au>
Message-ID: <Pine.LNX.4.21.0012060953250.20782-100000@saturn.ispol.com>

This may be a roundabout way of doing this, but you could use the
req.server.defn_name and req.server.defn_line_number to read the
DocumentRoot from the config file.

I haven't had my coffee yet, so I hope the above makes sense.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On 6 Dec 2000, Dave Cole wrote:

> I want to find out the value of the DocumentRoot directive.  I cannot
> see any way to do this.
> 
> Can someone please point me in the right direction?
> 
> - Dave
> 
> -- 
> http://www.object-craft.com.au
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From djc at object-craft.com.au  Thu Dec  7 10:01:57 2000
From: djc at object-craft.com.au (Dave Cole)
Date: Fri Jan  9 21:46:06 2004
Subject: [mod_python] How do I find the document root?
In-Reply-To: Gregory Trubetskoy's message of "Wed, 6 Dec 2000 09:54:57 -0500 (EST)"
References: <Pine.LNX.4.21.0012060953250.20782-100000@saturn.ispol.com>
Message-ID: <m3n1e99msa.fsf@vole.object-craft.com.au>

>>>>> "Gregory" == Gregory Trubetskoy <grisha@ispol.com> writes:

Gregory> This may be a roundabout way of doing this, but you could use
Gregory> the req.server.defn_name and req.server.defn_line_number to
Gregory> read the DocumentRoot from the config file.

Gregory> I haven't had my coffee yet, so I hope the above makes sense.

Yup, that makes sense.  It is not what I would call an ideal solution
though :-).

The other thing that I was trying to work out was how to direct all
requests below a certain directory to a single python program.  When
the request is referring to a directory, mod_dir/mod_autoindex kick
in.  I have come up with some mod_rewrite directives, but again, I
wish there were another way to just disable those modules below that
directory.

RewriteEngine on
RewriteRule ^$ main
RewriteRule .*/$ main
SetHandler python-program
PythonHandler main

- Dave

-- 
http://www.object-craft.com.au


From rayvd at firetail.org  Thu Dec  7 12:04:27 2000
From: rayvd at firetail.org (Ray Van Dolson)
Date: Fri Jan  9 21:46:07 2004
Subject: [mod_python] mod_python compiles fine, but gives errors...
Message-ID: <Pine.LNX.4.21.0012071201001.20882-100000@hotnest.firetail.org>

I'm compiling mod_python (latest version) as DSO into Apache 1.3.12
against a Python source tree with no threads.  Everything compiles fine
and even seems to install fine.  However, when starting up apache, it
gives me the following error:

[Thu Dec  7 11:58:16 2000] [warn] Loaded DSO libexec/mod_python.so usesplain Apache 1.3 API, this module might crash under EAPI! (please recompile it with -DEAPI)
[Thu Dec  7 11:58:16 2000] [notice] Apache/1.3.12 (Unix) mod_ssl/2.6.2 OpenSSL/0.9.4 mod_python/2.6.3 Python/1.5.2 mod_perl/1.22 PHP/3.0.16 configured -- resuming normal operations

What is this EAPI warning?  Should I worry about it?  Is it related in any
way to the following error I get when running the test program?  (This is
from the error_log file):

make_obcallback(): could not import mod_python.apache.
make_obcallback(): could not call init.
[Thu Dec  7 11:58:35 2000] [error] [client 199.236.177.11] python_handler: make_obcallback returned no obCallBack!

Apache is running as user nobody, which I read might pose a problem.  But
all the Python modules should be readable by this user.

Any ideas?

Ray Van Dolson


From greg at abbas.org  Thu Dec  7 14:47:07 2000
From: greg at abbas.org (Greg Abbas)
Date: Fri Jan  9 21:46:07 2004
Subject: [mod_python] python_handler: Dispatch() returned nothing.
Message-ID: <3A30136A.E3E6B4F2@abbas.org>

Hi all,

I'm running mod_python 2.6.3 with Apache 1.3.14 on RH 6.2, and it was
working well for a while, but now I've started running into a big
problem. Help please! I've got several name-based virtual hosts (i.e.,
on the same IP address), and I want to send requests to different
handlers, because I'm running several instances of Webware/WebKit
(http://webware.sourceforge.net/). What happens is that as the server
runs, I get more and more "internal server errors". The log shows the
following:

    python_handler: Dispatch() returned nothing.

After I restart the server, it seems to happen a little less (for a
short while). Any idea why this might be happening?

Before I set up the different host names, I was using different ports to
dispatch requests. I didn't get the above-mentioned error, but I got
other strange behavior: PythonPath didn't seem to work on a
per-VirtualHost basis. I set different paths for the different virtual
hosts, but they seemed to be executing code that was only in the other
virtual host's path. I'm not sure, but I think PythonHandler was
"bleeding over" between different virtual hosts, too. I am supposed to
be able to set these parameters differently for each VirtualHost
section, and invoke different handlers for each virtual host?

thanks,
-g.


--
Greg Abbas
greg@abbas.org
http://www.abbas.org



From rayvd at firetail.org  Thu Dec  7 15:15:31 2000
From: rayvd at firetail.org (Ray Van Dolson)
Date: Fri Jan  9 21:46:07 2004
Subject: [mod_python] mod_python compiles fine, but gives errors...
Message-ID: <Pine.LNX.4.21.0012071514490.24101-100000@hotnest.firetail.org>

Did a few things to check out the permissions possibility.  I su'd to root
and then su -'d to nobody.  I can access all the Python directories just
fine that way... Also, just to be sure, I changed the user that apache
runs at to one that I know has access to the Python directories (in this
case, myself).  However, the same problem occurs (same output in error_log
as well).

I have noticed some strange things, however.  When logged in in my normal
user account, if I fire up python and try to do a

import mod_python.apache

I get this:
>>> import mod_python.apache
Traceback (innermost last):
  File "<stdin>", line 1, in ?
  File "/usr/local/lib/python1.5/site-packages/mod_python/apache.py", line
19, in ?
    import _apache
ImportError: No module named _apache

While I see an apache.pyc along with a few other files, there is certainly
no _apache module file.  I notice that in the src tarball for mod_python
there is a file _apachemodule.c and _apachemodule.o.  Is this what python
needs to be loading?

Anyways, hoping to get this figured out.  Thanks for any help. :)

Ray Van Dolson





From Michael.Tellenbroeker at gmx.de  Fri Dec  8 16:34:52 2000
From: Michael.Tellenbroeker at gmx.de (Michael =?ISO-8859-1?Q?Tellenbr=F6ker?=)
Date: Fri Jan  9 21:46:07 2004
Subject: [mod_python] (no subject)
Message-ID: <3241.976289692@www19.gmx.net>

Hello everybody,
I have a little, possibly off-topic, question. I'm trying to connect to a
remote Informix-database, using Apache, mod_python and informixdb.
Stand-alone-access via informixdb runs like a charm, without trying to import
informixdb my mod_python-test-scripts run fine, too. Trying to import informixdb
into my mod_python scripts, I get following message:
  ImportError: Cannot locate C core module for informix db interface.

What's up? Knowing nearly nothing about apache-configuration I appreciate
any help

Thanks in advance
Michael 

-- 
Sent through GMX FreeMail - http://www.gmx.net


From arhiv at freemail.org.mk  Fri Dec  8 19:54:16 2000
From: arhiv at freemail.org.mk (Damjan)
Date: Fri Jan  9 21:46:07 2004
Subject: [mod_python] Small sugestion
Message-ID: <20001208195416.A552@localhost.localdomain>

Hi, Grisha.
I've noticed a lot of complaints about that 'make_obcallback...' errors in the
apache log. These are very often problems with the python path.
So I sugest you add the following two lines in make_obcallback:
(Here is a diff against 2.6.3)

--- mod_python.c.bak	Mon Dec  4 10:59:15 2000
+++ mod_python.c	Fri Dec  8 19:47:41 2000
@@ -479,6 +479,8 @@
 
     if (! ((m = PyImport_ImportModule(MODULENAME)))) {
 	fprintf(stderr, "make_obcallback(): could not import %s.\n", MODULENAME);
+	fprintf(stderr, "make_obcallback(): %s not found in %s.\n", MODULENAME, Py_GetPath());
+	return NULL;
     }
     
     if (! ((obCallBack = PyObject_CallMethod(m, INITFUNC, NULL)))) {

The 'return NULL;' is for the make_obcallback to return as soon as posible 
(and there's no reason to try and call the method when the module was not
loaded), and the apache log will be cleaner.



-- 
Damjan Georgievski		|           ?????? ???????????
Skopje, Macedonia		|           ??????, ??????????

From gstein at lyra.org  Sat Dec  9 05:08:43 2000
From: gstein at lyra.org (Greg Stein)
Date: Fri Jan  9 21:46:07 2004
Subject: [mod_python] Re: A Mod_python error Question
Message-ID: <20001209050843.C30644@lyra.org>

crap... missed the address the first time :-)

----- Forwarded message from Mail Delivery System <MAILER-DAEMON@python.org> -----
>...
From: Greg Stein <gstein@lyra.org>
To: mod_python@python.org
Cc: webmaster <webmaster@startcom.org>

mod_python people...

Could somebody please help this user? At first, I thought it was something
related to DAV, but apparently not. This is out of my area of expertise, but
I'm sure somebody in this forum can help.

Cheers,
-g

On Sat, Dec 09, 2000 at 12:13:38PM -0800, webmaster wrote:
> Hi Greg,
> 
> My problem is *not* mod_dav, DAV is running perfect. I don't want to learn
> right now python (You can't learn just everything). I just added mod_python
> support to one of our servers. Now, I tested it with the test-script
> provided with the contribution, which works well. But to test it, I needed
> to add some handler-stuff to the httpd.conf. So, the only question is
> really, which GLOBAL directive I have to input to the httpd.conf like for
> cgi > AddHandler cgi-script .pl .cgi  or for php I have > AddType
> application/x-httpd-php .php . I added like in the example from mod_python
> AddHandler python-program .py . But this does not seam to work for generally
> getting python executed. And I didn't found anything in mod_python-docs,
> sorry.
> 
> For any help I thank you very much.
> 
> Company:    StartCom (Group)
> Homepage:  http://www.startcom.org
> Branches:    MediaDesign Ltd. at http://mediadesign.startcom.org
>                    MediaHost Ltd. at http://mediahost.startcom.org
> 
> Signer: Eddy Nigg
> 
> ----- Original Message -----
> From: "Greg Stein" <gstein@lyra.org>
> To: "webmaster" <webmaster@startcom.org>
> Sent: Friday, December 08, 2000 2:10 PM
> Subject: Re: A Mod_python error Question
> 
> 
> > If you're using mod_dav, then the installation instructions are at:
> >     http://www.webdav.org/mod_dav/install.html
> >
> > davlib.py is *not* something that you would use as a "handler" in
> > mod_python. There isn't anything that you'd add to the httpd.conf for it.
> >
> > What are you trying to do? That might help me to at least point you in the
> > correct direction.
> >
> > At a minimum, if you are trying to learn Python, then go to
> > http://www.python.org/docs/ and reading the tutorial and some of the other
> > starter guides there.
> >
> > Cheers,
> > -g
> >
> > On Fri, Dec 08, 2000 at 02:46:59PM -0800, webmaster wrote:
> > > Yeah I know that,
> > >
> > > I'd like to know which config I have to enter in httpd.conf, like:
> > > PythonHandler or what?
> > > The DAV Server is successfully installed and already tested.
> > > Thanks if you could give me here some advice for your script and python
> in
> > > general, especially as I saw, that you are also a member of Apache.
> > >
> > > Regards
> > >
> > > Company:    StartCom (Group)
> > > Homepage:  http://www.startcom.org
> > > Branches:    MediaDesign Ltd. at http://mediadesign.startcom.org
> > >                    MediaHost Ltd. at http://mediahost.startcom.org
> > >
> > > Signer: Eddy Nigg
> > >
> > > ----- Original Message -----
> > > From: "Greg Stein" <gstein@lyra.org>
> > > To: "webmaster" <webmaster@startcom.org>
> > > Sent: Friday, December 08, 2000 4:36 AM
> > > Subject: Re: A Mod_python error Question
> > >
> > >
> > > > davlib.py is not intended as a handler module for mod_python. It is a
> > > > support module to be imported by other Python code. More specifically:
> it
> > > is
> > > > a DAV *client* ... not a server.
> > > >
> > > > If you want to DAV-enable your server, then use mod_dav.
> > > >
> > > > Cheers,
> > > > -g
> > > >
> > > > On Wed, Dec 06, 2000 at 12:27:01AM -0800, webmaster wrote:
> > > > > Hi Greg Stein,
> > > > >
> > > > > I tried to run your davlib-script, but not beeing a expert in python
> I
> > > kindly request your help. I installed mod_phyton for this purpose on the
> > > server and also expat. But somehow I don't see any information how to
> > > configure the conf-file so I don't get this error:
> > > > > Mod_python error: "PythonHandler davlib"
> > > > >
> > > > > Traceback (innermost last):
> > > > >
> > > > >   File "/usr/lib/python1.5/site-packages/mod_python/apache.py", line
> > > 178, in Dispatch
> > > > >     object = self.resolve_object(module, object_str)
> > > > >
> > > > >   File "/usr/lib/python1.5/site-packages/mod_python/apache.py", line
> 88,
> > > in resolve_object
> > > > >     raise AttributeError, s
> > > > >
> > > > > AttributeError: module '/home/startcom/www/davclient/davlib.pyc'
> > > contains no 'handler'
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > > Company:    StartCom (Group)
> > > > > Homepage:  http://www.startcom.org
> > > > > Branches:    MediaDesign Ltd. at http://mediadesign.startcom.org
> > > > >                    MediaHost Ltd. at http://mediahost.startcom.org
> > > > >
> > > > > Signer: Eddy Nigg
> > > > >
> > > >
> > > >
> > > >
> > > > --
> > > > Greg Stein, http://www.lyra.org/
> >
> >
> >
> > --
> > Greg Stein, http://www.lyra.org/



-- 
Greg Stein, http://www.lyra.org/


----- End forwarded message -----

-- 
Greg Stein, http://www.lyra.org/

From aiglauer at yahoo.com  Mon Dec 11 00:22:42 2000
From: aiglauer at yahoo.com (Alexis Iglauer)
Date: Fri Jan  9 21:46:07 2004
Subject: [mod_python] Writing to browser from C module
Message-ID: <20001211082242.11132.qmail@web2204.mail.yahoo.com>

Hi, 

me again - and with the same problem as before, just different :)

I have a Python handler which calls a C function - said C function
sometimes taking a long time to return (3+ minutes), long enough for
the browser to time out.  The way to keep the browser happy is to
occasionally send a few bytes of data its way (tried and tested).

So, I somehow need to execute req.write from inside the calculation
loop.  So I need to either a) call the python function req.write from
inside the C function or b) call the ap.rwrite (or similar) function
from inside my C loop.  Either way, I have to pass a pointer of some
form from the Python to C so that I can execute the function.  The best
result I have had so far has been a Segfault from Apache :(

I am currently wrapping my C function using SWIG, put I can pass
PyObjects directly if necessary.  Speed would be a bonus (how efficient
is it to call a Python function from inside C?).

Can anyone help me here?

Regards
Alexis


__________________________________________________
Do You Yahoo!?
Yahoo! Shopping - Thousands of Stores. Millions of Products.
http://shopping.yahoo.com/

From grisha at ispol.com  Tue Dec 12 10:35:06 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:46:07 2004
Subject: [mod_python] 2.6.4
Message-ID: <Pine.LNX.4.21.0012121029270.20083-100000@saturn.ispol.com>

There is a 2.6.4 available for download now. This is a bugfix release only
and has no new features. It should fix the problem that would manifest
itself by Internal Server Errors and "Dispatch() returned nothing" in the
error log. 

If you're using DSO, you will only need to replace mod_python.so. There
are no changes in the python libraries. I do recommend that you upgrade,
especially is you use multuple virtual servers/interpreters.

Windows users do not need to worry about upgrading, they were not affected
by the problem.

The bug had to do with misplaced #ifdef WITH_THREAD which caused
mod_python not to switch subinterpreters correctly and make python run in
restriced mode, in which __dict__ and some other things are not available.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com



From grisha at ispol.com  Wed Dec 13 18:58:47 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:46:07 2004
Subject: [mod_python] opensbd anyone?
Message-ID: <Pine.LNX.4.21.0012131857060.24979-100000@saturn.ispol.com>

Anyone out there use mod_python on Open BSD? There is a bug reported on
sourceforge
https://sourceforge.net/bugs/?func=detailbug&bug_id=123047&group_id=7107 I
would like to know if anyone can verify this.

Thanks!

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com


From gerhard.nospam at bigfoot.de  Thu Dec 14 19:26:52 2000
From: gerhard.nospam at bigfoot.de (Gerhard =?iso-8859-1?Q?H=E4ring?=)
Date: Fri Jan  9 21:46:07 2004
Subject: [mod_python] opensbd anyone?
References: <Pine.LNX.4.21.0012131857060.24979-100000@saturn.ispol.com>
Message-ID: <3A3910EC.8DD930FE@bigfoot.de>

I was the one who originally submitted the bug. I was silly enough to
assume that the Apache API didn't change between 1.3.12 and 1.3.14 (the
mod_python win32 build is for 1.3.14, while I used 1.3.12). Now I tried
to verify the bug under Apache 1.3.14, and it seems as if there never
was any bug wrt to win32 and SMP. mod_python now survives a stress test
with concurrent requests from another host. Sorry for the inconvenience.

Gerhard

Gregory Trubetskoy wrote:
> 
> [snip] There is a bug reported on
> sourceforge
> https://sourceforge.net/bugs/?func=detailbug&bug_id=123047&group_id=7107 I
> would like to know if anyone can verify this.
> 
> Thanks!
> 
> --
>   Gregory (Grisha) Trubetskoy
>        grisha@ispol.com

-- 
Sorry for the fake email, please use the real one below to reply.
contact: g e r h a r d @ b i g f o o t . d e
web:     http://highqualdev.com

From modpython at maya.com  Sat Dec 16 14:31:56 2000
From: modpython at maya.com (Seung Chan Lim)
Date: Fri Jan  9 21:46:07 2004
Subject: [mod_python] persistent storage?
Message-ID: <01be01c06796$dfd61b00$0100a8c0@djslim>

Is there a way to mimc the Application object in ASP or the __persistdict__
object in pyApache
with modpython??? so that all cgis running can share this storage space for
data.

thanks,

slim


From grisha at ispol.com  Sat Dec 16 21:25:29 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:46:07 2004
Subject: [mod_python] mod_python 2.7
Message-ID: <Pine.LNX.4.21.0012162124350.3958-100000@saturn.ispol.com>

...is out

enjoy!

Grisha


From Peter.GIANNOPOULOS at gemplus.com  Sun Dec 17 18:15:49 2000
From: Peter.GIANNOPOULOS at gemplus.com (Peter Giannopoulos)
Date: Fri Jan  9 21:46:07 2004
Subject: [mod_python] A configuration question.
Message-ID: <HEELLMEIEBHKANGCLEELAEPMCBAA.peter.giannopoulos@gemplus.com>

Hi all,

I'm new to the list/python/mod_python.

I am having some difficulty setting up Apache 1.3.14 and mod_python (on
RH7.0) to work the way I want them to. In the tutorial there an explanation
as to how to get myscript.py to handle requests for .py files. This is fine
and it seems to work. But this unfortunately is not enough. I would like to
have the same functionality as traditional cgi handling or servlet handling.
By this I mean that I would like to Have apache/mod_python process ANY .py
files asked for WITHOUT having to set up and individual handler for each in
my configuration files for apache.

Can anyone tell me how to do this?
Thanks in advance.





Peter Giannopoulos, Software Developer
Gemplus Software,   Advanced Projects Group

Phone: +15147322434
Fax:   +15147322401
Gemplus Card International
http://www.gemplus.com


-------------- next part --------------
A non-text attachment was scrubbed...
Name: Peter Giannopoulos.vcf
Type: text/x-vcard
Size: 613 bytes
Desc: not available
Url : http://mailman.modpython.org/pipermail/mod_python/attachments/20001217/654f36fb/PeterGiannopoulos.vcf
From grisha at ispol.com  Sun Dec 17 18:40:35 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:46:07 2004
Subject: [mod_python] A configuration question.
In-Reply-To: <HEELLMEIEBHKANGCLEELAEPMCBAA.peter.giannopoulos@gemplus.com>
Message-ID: <Pine.LNX.4.21.0012171839200.16900-100000@saturn.ispol.com>

Check out the publisher handler in 2.7. I don't have an RPM for 2.7 yet,
sorry, may be early next week, but you can get the source and compile it.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Sun, 17 Dec 2000, Peter Giannopoulos wrote:

> Hi all,
> 
> I'm new to the list/python/mod_python.
> 
> I am having some difficulty setting up Apache 1.3.14 and mod_python (on
> RH7.0) to work the way I want them to. In the tutorial there an explanation
> as to how to get myscript.py to handle requests for .py files. This is fine
> and it seems to work. But this unfortunately is not enough. I would like to
> have the same functionality as traditional cgi handling or servlet handling.
> By this I mean that I would like to Have apache/mod_python process ANY .py
> files asked for WITHOUT having to set up and individual handler for each in
> my configuration files for apache.
> 
> Can anyone tell me how to do this?
> Thanks in advance.
> 
> 
> 
> 
> 
> Peter Giannopoulos, Software Developer
> Gemplus Software,   Advanced Projects Group
> 
> Phone: +15147322434
> Fax:   +15147322401
> Gemplus Card International
> http://www.gemplus.com
> 
> 
> 


From arhiv at freemail.org.mk  Mon Dec 18 12:09:54 2000
From: arhiv at freemail.org.mk (Damjan)
Date: Fri Jan  9 21:46:07 2004
Subject: [mod_python] persistent storage?
In-Reply-To: <01be01c06796$dfd61b00$0100a8c0@djslim>; from modpython@maya.com on Sat, Dec 16, 2000 at 02:31:56PM -0500
References: <01be01c06796$dfd61b00$0100a8c0@djslim>
Message-ID: <20001218120954.A559@localhost.localdomain>

> Is there a way to mimc the Application object in ASP or the __persistdict__
> object in pyApache
> with modpython??? so that all cgis running can share this storage space for
> data.

You can use somehing like this:

### mod_test.py
cache = {}
def handler(req):
	global cache
	if cache.has_key('num'):
		cache['num'] = cache['num'] + 1
	else:
		cache['num'] = 1
	...

BUT, this is per apache-process persistent storage. Curently there is no way of
sharing data accross processes, except for going through a database.
Apache-2.0 may change this, when it provides a shared memory support.

What I would like to know, how does the above script work in a multithreaded
Apache/mod_python? 
Will the threads share the 'cache' object?


-- 
Damjan Georgievski		|           ?????? ???????????
Skopje, Macedonia		|           ??????, ??????????

From grisha at ispol.com  Mon Dec 18 09:58:00 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:46:07 2004
Subject: [mod_python] persistent storage?
In-Reply-To: <20001218120954.A559@localhost.localdomain>
Message-ID: <Pine.LNX.4.21.0012180957440.19353-100000@saturn.ispol.com>

On Mon, 18 Dec 2000, Damjan wrote:

> What I would like to know, how does the above script work in a multithreaded
> Apache/mod_python? 
> Will the threads share the 'cache' object?

yes


From Peter.GIANNOPOULOS at gemplus.com  Mon Dec 18 10:05:13 2000
From: Peter.GIANNOPOULOS at gemplus.com (Peter Giannopoulos)
Date: Fri Jan  9 21:46:07 2004
Subject: [mod_python] A configuration question.
In-Reply-To: <Pine.LNX.4.21.0012171839200.16900-100000@saturn.ispol.com>
Message-ID: <HEELLMEIEBHKANGCLEELOEPNCBAA.peter.giannopoulos@gemplus.com>

Thanks, for the prompt reply. I managed to build and install 2.7 but now
Apache can't load it...

Here is what I get as an erro message:


" Cannot load /usr/local/apache/libexec/mod_python.so into server: undefined
symbol: PyEval_RestoreTread "

I don't know enough about apache or mod_python to figure this one out by
mysef right now. Any suggestions?









Peter Giannopoulos, Software Developer
Gemplus Software,   Advanced Projects Group

Phone: +15147322434
Fax:   +15147322401
Gemplus Card International
http://www.gemplus.com




-----Original Message-----
From: Gregory Trubetskoy [mailto:grisha@ispol.com]
Sent: December 17, 2000 6:41 PM
To: Peter Giannopoulos
Cc: mod_python@modpython.org
Subject: Re: [mod_python] A configuration question.



Check out the publisher handler in 2.7. I don't have an RPM for 2.7 yet,
sorry, may be early next week, but you can get the source and compile it.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Sun, 17 Dec 2000, Peter Giannopoulos wrote:

> Hi all,
>
> I'm new to the list/python/mod_python.
>
> I am having some difficulty setting up Apache 1.3.14 and mod_python (on
> RH7.0) to work the way I want them to. In the tutorial there an
explanation
> as to how to get myscript.py to handle requests for .py files. This is
fine
> and it seems to work. But this unfortunately is not enough. I would like
to
> have the same functionality as traditional cgi handling or servlet
handling.
> By this I mean that I would like to Have apache/mod_python process ANY .py
> files asked for WITHOUT having to set up and individual handler for each
in
> my configuration files for apache.
>
> Can anyone tell me how to do this?
> Thanks in advance.
>
>
>
>
>
> Peter Giannopoulos, Software Developer
> Gemplus Software,   Advanced Projects Group
>
> Phone: +15147322434
> Fax:   +15147322401
> Gemplus Card International
> http://www.gemplus.com
>
>
>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Peter Giannopoulos.vcf
Type: text/x-vcard
Size: 613 bytes
Desc: not available
Url : http://mailman.modpython.org/pipermail/mod_python/attachments/20001218/f23646de/PeterGiannopoulos.vcf
From grisha at ispol.com  Mon Dec 18 12:07:07 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:46:07 2004
Subject: [mod_python] A configuration question.
In-Reply-To: <HEELLMEIEBHKANGCLEELOEPNCBAA.peter.giannopoulos@gemplus.com>
Message-ID: <Pine.LNX.4.21.0012181206160.19353-100000@saturn.ispol.com>

That's a bug. For now just inser an "h" in the word Tread so that it reads
Thread :-)

Grisha

On Mon, 18 Dec 2000, Peter Giannopoulos wrote:

> Thanks, for the prompt reply. I managed to build and install 2.7 but now
> Apache can't load it...
> 
> Here is what I get as an erro message:
> 
> 
> " Cannot load /usr/local/apache/libexec/mod_python.so into server: undefined
> symbol: PyEval_RestoreTread "
> 
> I don't know enough about apache or mod_python to figure this one out by
> mysef right now. Any suggestions?
> 
> 
> 
> 
> 
> 
> 
> 
> 
> Peter Giannopoulos, Software Developer
> Gemplus Software,   Advanced Projects Group
> 
> Phone: +15147322434
> Fax:   +15147322401
> Gemplus Card International
> http://www.gemplus.com
> 
> 
> 
> 
> -----Original Message-----
> From: Gregory Trubetskoy [mailto:grisha@ispol.com]
> Sent: December 17, 2000 6:41 PM
> To: Peter Giannopoulos
> Cc: mod_python@modpython.org
> Subject: Re: [mod_python] A configuration question.
> 
> 
> 
> Check out the publisher handler in 2.7. I don't have an RPM for 2.7 yet,
> sorry, may be early next week, but you can get the source and compile it.
> 
> --
>   Gregory (Grisha) Trubetskoy
>        grisha@ispol.com
> 
> On Sun, 17 Dec 2000, Peter Giannopoulos wrote:
> 
> > Hi all,
> >
> > I'm new to the list/python/mod_python.
> >
> > I am having some difficulty setting up Apache 1.3.14 and mod_python (on
> > RH7.0) to work the way I want them to. In the tutorial there an
> explanation
> > as to how to get myscript.py to handle requests for .py files. This is
> fine
> > and it seems to work. But this unfortunately is not enough. I would like
> to
> > have the same functionality as traditional cgi handling or servlet
> handling.
> > By this I mean that I would like to Have apache/mod_python process ANY .py
> > files asked for WITHOUT having to set up and individual handler for each
> in
> > my configuration files for apache.
> >
> > Can anyone tell me how to do this?
> > Thanks in advance.
> >
> >
> >
> >
> >
> > Peter Giannopoulos, Software Developer
> > Gemplus Software,   Advanced Projects Group
> >
> > Phone: +15147322434
> > Fax:   +15147322401
> > Gemplus Card International
> > http://www.gemplus.com
> >
> >
> >
> 
> 


From Peter.GIANNOPOULOS at gemplus.com  Mon Dec 18 12:27:20 2000
From: Peter.GIANNOPOULOS at gemplus.com (Peter Giannopoulos)
Date: Fri Jan  9 21:46:07 2004
Subject: [mod_python] Problems loading mod_python 2.7
Message-ID: <HEELLMEIEBHKANGCLEELAEPPCBAA.peter.giannopoulos@gemplus.com>

I am having a hard time with mod_python 2.7:

Building and installing works fine but when  I try to start apache (1.3.14)
on RedHat 7.0 and get the following message:

" Cannot load /usr/local/apache/libexec/mod_python.so into server: undefined
symbol: PyEval_RestoreTread "

The reason I am using 2.7 is because I don't want to write a handler for
EVERY .py file in my webapp. Is there a way to do this with 2.6.4 (loads and
works just fine on the same machine)? Or does anyone know how to fix the
above mentioned error?


Thanks.


Peter Giannopoulos, Software Developer
Gemplus Software,   Advanced Projects Group

Phone: +15147322434
Fax:   +15147322401
Gemplus Card International
http://www.gemplus.com


-------------- next part --------------
A non-text attachment was scrubbed...
Name: Peter Giannopoulos.vcf
Type: text/x-vcard
Size: 613 bytes
Desc: not available
Url : http://mailman.modpython.org/pipermail/mod_python/attachments/20001218/74005798/PeterGiannopoulos.vcf
From grisha at ispol.com  Mon Dec 18 16:40:39 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:46:07 2004
Subject: [mod_python] 2.7.1
Message-ID: <Pine.LNX.4.21.0012181638490.20344-100000@saturn.ispol.com>

We now have 2.7.1. There was a typo and some other things that wouldn't
work on win32 in 2.7.

There are also Python 1.5.2 and Python 2.0 DLL's, as well as a Red Hat RPM
available now.

enjoy

Grisha



From Peter.GIANNOPOULOS at gemplus.com  Mon Dec 18 17:22:37 2000
From: Peter.GIANNOPOULOS at gemplus.com (Peter Giannopoulos)
Date: Fri Jan  9 21:46:07 2004
Subject: [mod_python] Ok. One step closer now!
Message-ID: <HEELLMEIEBHKANGCLEELEEABCCAA.peter.giannopoulos@gemplus.com>

Ok. I corrected the syntax error in mod_python.c, rebuilt it and it now
loads but... :-(


I have the following in my httpd.conf

============================================================================
==============================
#This does not work I get : "The requested URL /say.py was not found on this
server."
# Yet the file does indeed exist and is exactly where specified "
<Directory /usr/local/apache/htdocs/webcard>
    AddHandler python-program .py
    PythonHandler mod_python.publisher
    PythonDebug On
</Directory>

#This does work
<Directory /usr/local/apache/htdocs/webcard/doc>
    AddHandler python-program .py
    PythonHandler mptest
    PythonDebug On
</Directory>

============================================================================
=============================


Again my specifics are: RedHat 7.0 , apache 1.3.14, python 2.0 and
mod_python 2.7
Any pointers?


Thanks in advance.




Peter Giannopoulos, Software Developer
Gemplus Software,   Advanced Projects Group

Phone: +15147322434
Fax:   +15147322401
Gemplus Card International
http://www.gemplus.com


-------------- next part --------------
A non-text attachment was scrubbed...
Name: Peter Giannopoulos.vcf
Type: text/x-vcard
Size: 613 bytes
Desc: not available
Url : http://mailman.modpython.org/pipermail/mod_python/attachments/20001218/fad79960/PeterGiannopoulos.vcf
From ytc87 at cs.ccu.edu.tw  Wed Dec 20 00:24:46 2000
From: ytc87 at cs.ccu.edu.tw (Yi-Tai Chen)
Date: Fri Jan  9 21:46:07 2004
Subject: [mod_python] question about start apache with mod_python...
Message-ID: <20001220002446.A1623@mdklinux.idv.tw>

  I already load mod_python first... but it still core dump...
  I need to do this step to make it work...
  First, comment the lines about load mod_python, start apache, 
  then uncomment the lines load mod_python, restart apache...
  after this mod_python can work fine... 
  Can start apache with mod_python directly??
  My OS is Mandrake 7.2, Python 2.0, Apache 1.3.14 and
  Mod_python 2.7.1... thanks a lot...

From fschwiet at u.washington.edu  Tue Dec 19 16:13:59 2000
From: fschwiet at u.washington.edu (F. Schwieterman)
Date: Fri Jan  9 21:46:07 2004
Subject: [mod_python] installation woes: Redhat 7.0, mod_python 2.7.1, apache 1.3.12
Message-ID: <Pine.A41.4.21.0012191603150.79868-100000@dante22.u.washington.edu>

  Well I was hoping that a fresh Redhat install 7.0, followed by a fresh
install of Apache 1.3.12, followed by an install of mod_python 2.7.1 would
quickly get me running.  (I've spent a lot of time trying to get
mod_python to work in Mandrake to no avail).

  Anyhow, installation goes smooth but the when I run the test file as
'http://localhost/mod_python/python_handler.py' I get an internal server
error.  (this is after restarting the server appropriately)

  Anyhow, the contents of /var/log/httpd/error_log is  
[Tue Dec 19 15:37:28 2000] [notice] Apache/1.3.12 (Unix)  (Red
Hat/Linux) mod_python/2.7.1 Python/2.0 configured -- resuming normal
operations
[Tue Dec 19 15:37:36 2000] [error] [client 127.0.0.1] File does not
exist: /var/www/html/mod_python
'import site' failed; use -v for traceback
make_obcallback(): could not import mod_python.apache.
make_obcallback(): could not call init.
[Tue Dec 19 15:38:20 2000] [error] [client 127.0.0.1]
python_handler: make_obcallback returned no obCallBack!
'import site' failed; use -v for traceback
make_obcallback(): could not import mod_python.apache.
make_obcallback(): could not call init.
[Tue Dec 19 15:59:27 2000] [error] [client 127.0.0.1]
python_handler: make_obcallback returned no obCallBack!


  Since accessing the test file as
'file:/var/www/mod_python_test/pythonhandler.py' simply gives me the text
of the result, I think that mod_python isn't at all installed so that the
following httpd.conf lines are being ignored:
<IfModule mod_python.c>
  Alias /mod_python/ /var/www/mod_python_test/
  <Directory /var/www/mod_python_test>
    AllowOverride FileInfo
  </Directory>
</IfModule>




  Anyhow I'm not really a Linux user so if anyone had any advice on how I
can get mod_python working that'd be great.  It seems like these RPMs
should be useable from a fresh Redhat install..  If I don't get any
replies soon I'll contact the RPM author to see what I'm missing.



From victor at prodigy.net  Wed Dec 20 01:02:35 2000
From: victor at prodigy.net (Victor Muslin)
Date: Fri Jan  9 21:46:07 2004
Subject: [mod_python] Newbie question
Message-ID: <4.3.2.7.0.20001220005229.00b9b420@pop.prodigy.net>

I am running Apache 1.3.12 on WindowsNT 4.0 with Python 2.0.

Tried to configure it to use mod_python. Made the following relevant 
changes in httpd.conf:
DocumentRoot "g:/top/public/web/dev/htdocs"
<Directory "g:/top/public/web/dev/htdocs">
#
LoadModule python_module modules/mod_python.dll
#
PassEnv PYTHONPATH

<Directory "g:/top/public/web/dev/htdocs/test">
         AllowOverride All
         AddHandler python-program .py
         PythonHandler mptest
         PythonDebug On
         PythonPath 
"['e:/apps/python20/lib','g:/top/public/web/dev/htdocs/test']"
</Directory>

(Not sure whether PythonPath is necessary; it was not in instructions on 
the mod_python web site, but I saw it in some news group posting. In any 
case, the behavior is the same with or without it.)

Seems that the server loads mod_python fine, because when it comes up it 
says: Apache 1.3.12 (Win32) mod_python/2.6.3 Python/2.0 running...

As per instructions I created mptest.py and placed it into 
g:/top/public/web/dev/htdocs/test.
from mod_python import apache

def handler(req):
     req.send_http_header()
     req.write("Hello World!")
     return apache.OK

However, when I point my browser to it 
(http://127.0.0.1:8000/test/mptest.py) I get an Internal Server Error. The 
message in the error log says: [Wed Dec 20 00:45:56 2000] [error] [client 
209.247.38.37] python_handler: make_obcallback returned no obCallBack!

Any insight would be appreciated.

TIA

_______________________________________________________________________
Victor Muslin 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20001220/0b75ab5d/attachment.htm
From hostmaster at bemarnet.es  Wed Dec 20 12:58:12 2000
From: hostmaster at bemarnet.es (Antonio Navarro Navarro)
Date: Fri Jan  9 21:46:07 2004
Subject: [mod_python] Problems with mod_python and Apache 1.3.14-3
Message-ID: <4.1.20001220125225.022faf00@pop3.bemarnet.es>

Hi All !

I have a RedHat 7.0 with Apache 1.3.14-3 installed from the RH Cd-Roms.
After installing the RPM for mod_python 2.7.1-1, the httpd shows the
following error and crashes:

[root@zeus /root]# httpd -x
[Wed Dec 20 12:55:01 2000] [warn] Loaded DSO modules/mod_python.so uses 
plain Apache 1.3 API, this module might crash under EAPI! (please recompile
it with -DEAPI)     

How can I bypass this error ? Do I need a RPM mod_python compiled with
-DEAPI ? If so, where can I find this ?

Can I generate a new RPM from the source mod_python ? How ?

Best regards,


Antonio Navarro Navarro
BemarNet Management
http://www.bemarnet.es
hostmaster@bemarnet.es
Tlf. +34-96-1656644
Fax. +34-96-1656514

From rriggs at doubleclick.net  Wed Dec 20 09:16:37 2000
From: rriggs at doubleclick.net (Rob Riggs)
Date: Fri Jan  9 21:46:07 2004
Subject: [mod_python] RH7 and mod_python and mod_php4 == apache crash
Message-ID: <3A40DB65.D03E9633@doubleclick.net>

Under RH7, it appears that one cannot have both mod_python and mod_php
installed. When both are installed and Apache is started from the init
script, it crashes. Note that running Apache without all of the
"-D HAVE_..." pieces that the init script passes to httpd seems to
prevent the crash.

Any ideas what is causing this?

--
Rob Riggs
Unix System Administrator
DoubleClick/DARTmail - Broomfield, CO




From grisha at ispol.com  Wed Dec 20 11:18:02 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:46:07 2004
Subject: [mod_python] Newbie question
In-Reply-To: <4.3.2.7.0.20001220005229.00b9b420@pop.prodigy.net>
Message-ID: <Pine.LNX.4.21.0012201000320.27015-100000@saturn.ispol.com>

I would verify where your mod_python PACKAGE is and make sure that it is
in PYTHONPATH. Not the PythonPath keyword you specified below, but the
sys.path (which can be altered via the PYTHONPATH variable prior to
starting apache) at the time when you start apache.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Wed, 20 Dec 2000, Victor Muslin wrote:

> I am running Apache 1.3.12 on WindowsNT 4.0 with Python 2.0.
> 
> Tried to configure it to use mod_python. Made the following relevant 
> changes in httpd.conf:
> DocumentRoot "g:/top/public/web/dev/htdocs"
> <Directory "g:/top/public/web/dev/htdocs">
> #
> LoadModule python_module modules/mod_python.dll
> #
> PassEnv PYTHONPATH
> 
> <Directory "g:/top/public/web/dev/htdocs/test">
>          AllowOverride All
>          AddHandler python-program .py
>          PythonHandler mptest
>          PythonDebug On
>          PythonPath 
> "['e:/apps/python20/lib','g:/top/public/web/dev/htdocs/test']"
> </Directory>
> 
> (Not sure whether PythonPath is necessary; it was not in instructions on 
> the mod_python web site, but I saw it in some news group posting. In any 
> case, the behavior is the same with or without it.)
> 
> Seems that the server loads mod_python fine, because when it comes up it 
> says: Apache 1.3.12 (Win32) mod_python/2.6.3 Python/2.0 running...
> 
> As per instructions I created mptest.py and placed it into 
> g:/top/public/web/dev/htdocs/test.
> from mod_python import apache
> 
> def handler(req):
>      req.send_http_header()
>      req.write("Hello World!")
>      return apache.OK
> 
> However, when I point my browser to it 
> (http://127.0.0.1:8000/test/mptest.py) I get an Internal Server Error. The 
> message in the error log says: [Wed Dec 20 00:45:56 2000] [error] [client 
> 209.247.38.37] python_handler: make_obcallback returned no obCallBack!
> 
> Any insight would be appreciated.
> 
> TIA
> 
> _______________________________________________________________________
> Victor Muslin 


From grisha at ispol.com  Wed Dec 20 11:36:19 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:46:07 2004
Subject: [mod_python] Problems with mod_python and Apache 1.3.14-3
In-Reply-To: <4.1.20001220125225.022faf00@pop3.bemarnet.es>
Message-ID: <Pine.LNX.4.21.0012201134130.27306-100000@saturn.ispol.com>

On Wed, 20 Dec 2000, Antonio Navarro Navarro wrote:

> [root@zeus /root]# httpd -x
> [Wed Dec 20 12:55:01 2000] [warn] Loaded DSO modules/mod_python.so uses 
> plain Apache 1.3 API, this module might crash under EAPI! (please recompile
> it with -DEAPI)     
> 
> How can I bypass this error ? 

You can recompile with -DEAPI, but I wouldn't worry about it.

> Can I generate a new RPM from the source mod_python ? How ?

http://www.modpython.org/dist/rpm/mod_python.spec
man rpm



Grisha


From hostmaster at bemarnet.es  Wed Dec 20 17:38:19 2000
From: hostmaster at bemarnet.es (Antonio Navarro Navarro)
Date: Fri Jan  9 21:46:07 2004
Subject: [mod_python] Problems with mod_python and Apache 1.3.14-3
In-Reply-To: <Pine.LNX.4.21.0012201134130.27306-100000@saturn.ispol.com>
References: <4.1.20001220125225.022faf00@pop3.bemarnet.es>
Message-ID: <4.1.20001220173800.02303100@pop3.bemarnet.es>

At 11.36 20/12/00 -0500, Gregory Trubetskoy wrote:

>On Wed, 20 Dec 2000, Antonio Navarro Navarro wrote:
>
>> [root@zeus /root]# httpd -x
>> [Wed Dec 20 12:55:01 2000] [warn] Loaded DSO modules/mod_python.so uses 
>> plain Apache 1.3 API, this module might crash under EAPI! (please recompile
>> it with -DEAPI)     
>> 
>> How can I bypass this error ? 
>
>You can recompile with -DEAPI, but I wouldn't worry about it.

Why ?

Regards,

Antonio Navarro Navarro
BemarNet Management
http://www.bemarnet.es
hostmaster@bemarnet.es
Tlf. +34-96-1656644
Fax. +34-96-1656514

From grisha at ispol.com  Wed Dec 20 13:03:50 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:46:07 2004
Subject: [mod_python] Problems with mod_python and Apache 1.3.14-3
In-Reply-To: <4.1.20001220173800.02303100@pop3.bemarnet.es>
Message-ID: <Pine.LNX.4.21.0012201302350.27306-100000@saturn.ispol.com>

I don't believe mod_python uses any of the API that is affected by
-DEAPI. I'll have to check to be 100% certain, but I've been getting this
warning on all my tests and have never seen a crash (at least the one
that I could relate to -DEAPI).


On Wed, 20 Dec 2000, Antonio Navarro Navarro wrote:

> At 11.36 20/12/00 -0500, Gregory Trubetskoy wrote:
> 
> >On Wed, 20 Dec 2000, Antonio Navarro Navarro wrote:
> >
> >> [root@zeus /root]# httpd -x
> >> [Wed Dec 20 12:55:01 2000] [warn] Loaded DSO modules/mod_python.so uses 
> >> plain Apache 1.3 API, this module might crash under EAPI! (please recompile
> >> it with -DEAPI)     
> >> 
> >> How can I bypass this error ? 
> >
> >You can recompile with -DEAPI, but I wouldn't worry about it.
> 
> Why ?
> 
> Regards,
> 
> Antonio Navarro Navarro
> BemarNet Management
> http://www.bemarnet.es
> hostmaster@bemarnet.es
> Tlf. +34-96-1656644
> Fax. +34-96-1656514
> 


From hostmaster at bemarnet.es  Wed Dec 20 19:21:42 2000
From: hostmaster at bemarnet.es (Antonio Navarro Navarro)
Date: Fri Jan  9 21:46:08 2004
Subject: [mod_python] Problems with mod_python and Apache 1.3.14-3
In-Reply-To: <Pine.LNX.4.21.0012201302350.27306-100000@saturn.ispol.com>
References: <4.1.20001220173800.02303100@pop3.bemarnet.es>
Message-ID: <4.1.20001220192013.02306210@pop3.bemarnet.es>

At 13.03 20/12/00 -0500, Gregory Trubetskoy wrote:

>I don't believe mod_python uses any of the API that is affected by
>-DEAPI. I'll have to check to be 100% certain, but I've been getting this
>warning on all my tests and have never seen a crash (at least the one
>that I could relate to -DEAPI).

Hi !

Well, the only thing I can say to you is that the downloaded i386.rpm
package dowsn't works for me.. I have downloaded the sources RPM, then I
have made a rpm -rebuild and the new rpm package works fine.

Regards,

Antonio Navarro Navarro
BemarNet Management
http://www.bemarnet.es
hostmaster@bemarnet.es
Tlf. +34-96-1656644
Fax. +34-96-1656514

From grisha at ispol.com  Wed Dec 20 15:48:26 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:46:08 2004
Subject: [mod_python] Problems with mod_python and Apache 1.3.14-3
In-Reply-To: <4.1.20001220192013.02306210@pop3.bemarnet.es>
Message-ID: <Pine.LNX.4.21.0012201543340.27862-100000@saturn.ispol.com>

May be it's be it's because I created them on Red Hat 2.6.

Perhaps I should take those RPM's off the site altogether, they seem to do
little good but confuse people and take up my time since there are
different variations of RedHat... (Mandrake?) I don't really have any
access to all those systems nor do I understand or like Red Hat enough to
be able to support those things.

Perhaps some Red Hat fan would like to volunteer to maintain the
RPM's? Your job would be to create all versions of RPM's every time there
is a release and perhaps answer questions about them on the list.

Grisha


On Wed, 20 Dec 2000, Antonio Navarro Navarro wrote:

> At 13.03 20/12/00 -0500, Gregory Trubetskoy wrote:
> 
> >I don't believe mod_python uses any of the API that is affected by
> >-DEAPI. I'll have to check to be 100% certain, but I've been getting this
> >warning on all my tests and have never seen a crash (at least the one
> >that I could relate to -DEAPI).
> 
> Hi !
> 
> Well, the only thing I can say to you is that the downloaded i386.rpm
> package dowsn't works for me.. I have downloaded the sources RPM, then I
> have made a rpm -rebuild and the new rpm package works fine.
> 
> Regards,
> 
> Antonio Navarro Navarro
> BemarNet Management
> http://www.bemarnet.es
> hostmaster@bemarnet.es
> Tlf. +34-96-1656644
> Fax. +34-96-1656514
> 


From benno at sesgroup.net  Thu Dec 21 12:06:05 2000
From: benno at sesgroup.net (Ben Leslie)
Date: Fri Jan  9 21:46:08 2004
Subject: [mod_python] RH7 and mod_python and mod_php4 == apache crash
In-Reply-To: <3A40DB65.D03E9633@doubleclick.net>; from rriggs@doubleclick.net on Wed, Dec 20, 2000 at 09:16:37AM -0700
References: <3A40DB65.D03E9633@doubleclick.net>
Message-ID: <20001221120605.A25968@sesgroup.net>

> Under RH7, it appears that one cannot have both mod_python and mod_php
> installed. When both are installed and Apache is started from the init
> script, it crashes. Note that running Apache without all of the
> "-D HAVE_..." pieces that the init script passes to httpd seems to
> prevent the crash.
> 
> Any ideas what is causing this?

Not sure if this will help but have you tried putting the Load Module 
directive for mod_python before any others. Sometimes mod_python insists
on being loaded first.

Hth,

Benno

From hostmaster at bemarnet.es  Thu Dec 21 09:06:39 2000
From: hostmaster at bemarnet.es (Antonio Navarro Navarro)
Date: Fri Jan  9 21:46:08 2004
Subject: [mod_python] Problems with mod_python and Apache 1.3.14-3
In-Reply-To: <Pine.LNX.4.21.0012201543340.27862-100000@saturn.ispol.com>
References: <4.1.20001220192013.02306210@pop3.bemarnet.es>
Message-ID: <4.1.20001221090457.016e8530@pop3.bemarnet.es>

At 15.48 20/12/00 -0500, Gregory Trubetskoy wrote:

>May be it's be it's because I created them on Red Hat 2.6.

6.2 I suppose... yes, this could be the problem.

>Perhaps I should take those RPM's off the site altogether, they seem to do
>little good but confuse people and take up my time since there are
>different variations of RedHat... (Mandrake?) I don't really have any
>access to all those systems nor do I understand or like Red Hat enough to
>be able to support those things.
>
>Perhaps some Red Hat fan would like to volunteer to maintain the
>RPM's? Your job would be to create all versions of RPM's every time there
>is a release and perhaps answer questions about them on the list.

I can create all version of RPM's from source in RedHat Linux, we are fans
of RH and allways have the latest version installed in our systems. Tell me
what can I do. :-)

Regards,

Antonio Navarro Navarro
BemarNet Management
http://www.bemarnet.es
hostmaster@bemarnet.es
Tlf. +34-96-1656644
Fax. +34-96-1656514

From arhiv at freemail.org.mk  Wed Dec 20 15:25:08 2000
From: arhiv at freemail.org.mk (Damjan)
Date: Fri Jan  9 21:46:08 2004
Subject: [mod_python] Small sugestion
In-Reply-To: <20001208195416.A552@localhost.localdomain>; from arhiv@freemail.org.mk on Fri, Dec 08, 2000 at 07:54:16PM +0100
References: <20001208195416.A552@localhost.localdomain>
Message-ID: <20001220152507.A1431@localhost.localdomain>

> Hi, Grisha.
> I've noticed a lot of complaints about that 'make_obcallback...' errors in the
> apache log. These are very often problems with the python path.
> So I sugest you add the following two lines in make_obcallback:
> (Here is a diff against 2.6.3)
> 
> --- mod_python.c.bak	Mon Dec  4 10:59:15 2000
> +++ mod_python.c	Fri Dec  8 19:47:41 2000
> @@ -479,6 +479,8 @@
>  
>      if (! ((m = PyImport_ImportModule(MODULENAME)))) {
>  	fprintf(stderr, "make_obcallback(): could not import %s.\n", MODULENAME);
> +	fprintf(stderr, "make_obcallback(): %s not found in %s.\n", MODULENAME, Py_GetPath());
> +	return NULL;
>      }
>      
>      if (! ((obCallBack = PyObject_CallMethod(m, INITFUNC, NULL)))) {
> 
> The 'return NULL;' is for the make_obcallback to return as soon as posible 
> (and there's no reason to try and call the method when the module was not
> loaded), and the apache log will be cleaner.

No comments on this ??


-- 
Damjan Georgievski		|           ?????? ???????????
Skopje, Macedonia		|           ??????, ??????????

From grisha at ispol.com  Thu Dec 21 09:55:48 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:46:08 2004
Subject: [mod_python] Small sugestion
In-Reply-To: <20001220152507.A1431@localhost.localdomain>
Message-ID: <Pine.LNX.4.21.0012210955070.30838-100000@saturn.ispol.com>

Sorry Damjan, somehow this one fell out of my task list. It's a good
suggestion, I'll add it in.

Grisha

On Wed, 20 Dec 2000, Damjan wrote:

> > Hi, Grisha.
> > I've noticed a lot of complaints about that 'make_obcallback...' errors in the
> > apache log. These are very often problems with the python path.
> > So I sugest you add the following two lines in make_obcallback:
> > (Here is a diff against 2.6.3)
> > 
> > --- mod_python.c.bak	Mon Dec  4 10:59:15 2000
> > +++ mod_python.c	Fri Dec  8 19:47:41 2000
> > @@ -479,6 +479,8 @@
> >  
> >      if (! ((m = PyImport_ImportModule(MODULENAME)))) {
> >  	fprintf(stderr, "make_obcallback(): could not import %s.\n", MODULENAME);
> > +	fprintf(stderr, "make_obcallback(): %s not found in %s.\n", MODULENAME, Py_GetPath());
> > +	return NULL;
> >      }
> >      
> >      if (! ((obCallBack = PyObject_CallMethod(m, INITFUNC, NULL)))) {
> > 
> > The 'return NULL;' is for the make_obcallback to return as soon as posible 
> > (and there's no reason to try and call the method when the module was not
> > loaded), and the apache log will be cleaner.
> 
> No comments on this ??
> 
> 
> -- 
> Damjan Georgievski		|           ???????????? ??????????????????????
> Skopje, Macedonia		|           ????????????, ????????????????????
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From rriggs at doubleclick.net  Thu Dec 21 08:30:31 2000
From: rriggs at doubleclick.net (Rob Riggs)
Date: Fri Jan  9 21:46:08 2004
Subject: [mod_python] RH7 and mod_python and mod_php4 == apache crash
References: <3A40DB65.D03E9633@doubleclick.net> <20001221120605.A25968@sesgroup.net>
Message-ID: <3A422217.996E8743@doubleclick.net>

Ben,

Thanks for the response. I am installing mod_python via the RPM (built
from the SRPM for Python 1.5.2), which appears to install correctly. The
RPM definitely puts the mod_python LoadModule directive first.


Ben Leslie wrote:

> > Under RH7, it appears that one cannot have both mod_python and mod_php
> > installed. When both are installed and Apache is started from the init
> > script, it crashes. Note that running Apache without all of the
> > "-D HAVE_..." pieces that the init script passes to httpd seems to
> > prevent the crash.
> >
> > Any ideas what is causing this?
>
> Not sure if this will help but have you tried putting the Load Module
> directive for mod_python before any others. Sometimes mod_python insists
> on being loaded first.
>
> Hth,
>
> Benno

--
Rob Riggs
Unix System Administrator
DoubleClick/DARTmail - Broomfield, CO




From djc at object-craft.com.au  Fri Dec 22 14:20:20 2000
From: djc at object-craft.com.au (Dave Cole)
Date: Fri Jan  9 21:46:08 2004
Subject: [mod_python] Yet another Python templating system
Message-ID: <m38zp93zwr.fsf@vole.object-craft.com.au>

A customer of ours has just given us permission to open source a set
of Python modules that we are developing as part of a contract with
them.

We started working on these modules a number of months ago, and they
are now in their third major revision.  The code was originally
developed to work in a CGI environment.  The modules are not just for
HTML template substitution, they are a toolkit for building session
based web applications with Python.

I have done some playing around to see how hard it would be to make
the modules work with mod_python.  The modules in their current form
need very little work to migrate to mod_python.

There is some introductory documentation at:

        http://www.object-craft.com.au/projects/fusion/intro.html

One of the things that is most likely to change in migrating to
mod_python is the application structure as described in the above
document.  Currently multiple application states / pages are
implemented in a single Python module.  This is good for small systems
like the applications we are developing for the customer, but become a
management problem for larger applications.  In the latest mod_python,
I noted with interest the new Publisher handler.  A modified or
extended version for this would be ideal for implementing each
application state as described in the intro document.

In making this toolkit more general, I would also like to be able to
build applications which are not session based.  The tree and paged
list tags both currently store state information in the session.

We are likely to release the code early in the new year once we have
finalised the license with our client.

- Dave

-- 
http://www.object-craft.com.au


From jrfsousa at esoterica.pt  Sat Dec 23 01:13:01 2000
From: jrfsousa at esoterica.pt (Jos Rui Faustino de Sousa)
Date: Fri Jan  9 21:46:08 2004
Subject: [mod_python] _apache again...
Message-ID: <000501c06c7d$7e586d10$fe00a8c0@krolik2piii1008>

Hi!

Has anyone solved the problem with the missing _apache module?

The test.py example does not work and I can not load _apache from the
python interpreter...

Where is this module?

Best regards
Jos Rui



From Lisa at mailgw1.netvision.net.il  Sat Dec 23 22:06:22 2000
From: Lisa at mailgw1.netvision.net.il (Lisa@mailgw1.netvision.net.il)
Date: Fri Jan  9 21:46:08 2004
Subject: [mod_python] new game try it
Message-ID: <200012232004.WAA28505@mailgw1.netvision.net.il>

An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20001223/2a1c4fbc/attachment.htm
From grisha at ispol.com  Sat Dec 23 19:44:00 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:46:08 2004
Subject: [mod_python] _apache again...
In-Reply-To: <000501c06c7d$7e586d10$fe00a8c0@krolik2piii1008>
Message-ID: <Pine.LNX.4.21.0012231943070.6793-100000@saturn.ispol.com>

_apache only exists within apache - you shouldn't be able to load
mod_python scripts in standard intepreter for this reason.

Grisha

On Sat, 23 Dec 2000, Jos? Rui Faustino de Sousa wrote:

> Hi!
> 
> Has anyone solved the problem with the missing _apache module?
> 
> The test.py example does not work and I can not load _apache from the
> python interpreter...
> 
> Where is this module?
> 
> Best regards
> Jos? Rui
> 
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From arhiv at freemail.org.mk  Tue Dec 26 14:13:45 2000
From: arhiv at freemail.org.mk (Damjan)
Date: Fri Jan  9 21:46:08 2004
Subject: [mod_python] _apache again...
In-Reply-To: <Pine.LNX.4.21.0012231943070.6793-100000@saturn.ispol.com>; from grisha@ispol.com on Sat, Dec 23, 2000 at 07:44:00PM -0500
References: <000501c06c7d$7e586d10$fe00a8c0@krolik2piii1008> <Pine.LNX.4.21.0012231943070.6793-100000@saturn.ispol.com>
Message-ID: <20001226141345.A1395@localhost.localdomain>

> _apache only exists within apache - you shouldn't be able to load
> mod_python scripts in standard intepreter for this reason.
> 
> > Has anyone solved the problem with the missing _apache module?
> > 
> > The test.py example does not work and I can not load _apache from the
> > python interpreter...

And dont use a 'test.py' script, there is a python package named 'test' and
things becam ugly. Use mptest.py or modtest.py or something...


-- 
Damjan Georgievski		|           ?????? ???????????
Skopje, Macedonia		|           ??????, ??????????

From arhiv at freemail.org.mk  Wed Dec 27 13:50:27 2000
From: arhiv at freemail.org.mk (Damjan)
Date: Fri Jan  9 21:46:08 2004
Subject: [mod_python] Multiple handlers in a single directory
Message-ID: <20001227135027.A224@localhost.localdomain>

I want to have multiple Python handlers in one directory, but each handling a
different type of file. Is there a way I can do this?

I imagined it could be done with a directive like this:
...
PythonAddHandler mod_python.publisher .py
PythonAddHandler myscripts.handler1 .pyml
PythonAddHandler myscripts.handler2 .html
...

How hard would it be to add a directive ike this?

Thanks.

-- 
Damjan Georgievski		|           ?????? ???????????
Skopje, Macedonia		|           ??????, ??????????

From grisha at ispol.com  Wed Dec 27 09:56:47 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:46:08 2004
Subject: [mod_python] Multiple handlers in a single directory
In-Reply-To: <20001227135027.A224@localhost.localdomain>
Message-ID: <Pine.LNX.4.21.0012270954460.28943-100000@saturn.ispol.com>

To be consistent, I would have to add a directive like this for every
phase....

A more or less simple alternative would be to write a handler that invokes
other handlers based on file extension.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Wed, 27 Dec 2000, Damjan wrote:

> I want to have multiple Python handlers in one directory, but each handling a
> different type of file. Is there a way I can do this?
> 
> I imagined it could be done with a directive like this:
> ...
> PythonAddHandler mod_python.publisher .py
> PythonAddHandler myscripts.handler1 .pyml
> PythonAddHandler myscripts.handler2 .html
> ...
> 
> How hard would it be to add a directive ike this?
> 
> Thanks.
> 
> -- 
> Damjan Georgievski		|           ???????????? ??????????????????????
> Skopje, Macedonia		|           ????????????, ????????????????????
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From jmcbray at bertrand.carcosa.net  Wed Dec 27 13:22:23 2000
From: jmcbray at bertrand.carcosa.net (Jason F. McBrayer)
Date: Fri Jan  9 21:46:08 2004
Subject: [mod_python] Multiple handlers in a single directory
In-Reply-To: <Pine.LNX.4.21.0012270954460.28943-100000@saturn.ispol.com>; from grisha@ispol.com on Wed, Dec 27, 2000 at 09:56:47AM -0500
References: <20001227135027.A224@localhost.localdomain> <Pine.LNX.4.21.0012270954460.28943-100000@saturn.ispol.com>
Message-ID: <20001227132223.A19070@bertrand.carcosa.net>

On Wed, Dec 27, 2000 at 09:56:47AM -0500, Gregory Trubetskoy wrote:
> 
> To be consistent, I would have to add a directive like this for every
> phase....
> 
> A more or less simple alternative would be to write a handler that invokes
> other handlers based on file extension.

This is what I'm doing currently.  It seems to be the best solution,
and it has its own kind of logic to it -- once you're in the handler,
you've handed things off to Python, so you might as well do all the
processing in Python instead of in the apache conf file.

-- 
+----------------------------------------------------------------+
| Jason F. McBrayer                         jmcbray@carcosa.net  |
| The scalloped tatters of the King in Yellow must hide Yhtill   |
| forever.                    R.W. Chambers _The King in Yellow_ |

From Mads at Kiilerich.com  Thu Dec 28 14:19:02 2000
From: Mads at Kiilerich.com (Mads Kiilerich)
Date: Fri Jan  9 21:46:08 2004
Subject: [mod_python] rpm-packaging and DESTDIR
Message-ID: <Pine.LNX.4.21.0012281410450.926-200000@localhost>

Hello,

I'm hacking the RedHat RPM specs.

First, I've found that 
	./configure --prefix=something 
has no effect at all. It should either be fixed or removed from
the documentation.

For RPM packaging installation in another directory than the one
compiled for is essential. Thus I suggest the attached patch. It
causes any installation to be done below $DESTDIR . If no
DESTDIR is defined in the environment it has no effect.

Also, could you please put the spec used to build rpms in cvs?
And could it be in the root, ie as mod_python/mod_python.spec?
(That makes rpm-building even easier; given a mod_python tar the
rpm's can be build with
	rpm -ta src/mod_python-2.7.1.tar.gz
)

I have some enhancements to the spec as well - but I'll sit on
them until the spec is in cvs.

Happy Newyear from

-- 
Mads Kiilerich          Sys.Adm. Cand.Polyt. Stud.Bibel.
Mads@Kiilerich.com      Tel. +45 26 20 07 73
Fxvqrevx! Fiva! Qrg re cvffrgneiryvtg ng xelcgrer zrq EBG-13.                   
-------------- next part --------------
Index: Makefile.in
===================================================================
RCS file: /cvsroot/modpython/mod_python/Makefile.in,v
retrieving revision 1.7
diff -u -u -r1.7 Makefile.in
--- Makefile.in	2000/12/06 03:05:37	1.7
+++ Makefile.in	2000/12/28 13:05:01
@@ -82,7 +82,7 @@
 	@echo
 	@echo "Performing DSO installation."
 	@echo
-	$(INSTALL) src/mod_python.so $(LIBEXECDIR)
+	$(INSTALL) src/mod_python.so $(DESTDIR)$(LIBEXECDIR)
 	@$(MAKE) install_py_lib
 	@echo
 	@echo "Now don't forget to edit your main config and add"
@@ -114,12 +114,12 @@
 	@echo
 
 install_py_lib:
-	$(INSTALL) -d $(PY_STD_LIB)/site-packages/mod_python
+	$(INSTALL) -d $(DESTDIR)$(PY_STD_LIB)/site-packages/mod_python
 	@for f in `ls lib/python/mod_python/*.py`; \
 	do \
-		$(INSTALL) $$f $(PY_STD_LIB)/site-packages/mod_python; \
+		$(INSTALL) $$f $(DESTDIR)$(PY_STD_LIB)/site-packages/mod_python; \
 	done
-	python $(PY_STD_LIB)/compileall.py $(PY_STD_LIB)/site-packages/mod_python
+	python $(PY_STD_LIB)/compileall.py $(DESTDIR)$(PY_STD_LIB)/site-packages/mod_python
 
 clean:
 	cd src && $(MAKE) clean
From Mads at Kiilerich.com  Thu Dec 28 14:25:05 2000
From: Mads at Kiilerich.com (Mads Kiilerich)
Date: Fri Jan  9 21:46:08 2004
Subject: [mod_python] -DEAPI fix
Message-ID: <Pine.LNX.4.21.0012281422310.926-200000@localhost>

Hello,

I've got the -DEAPI warning using mod_python with RedHat apache.
As mentioned on this list it shouldn't matter, but it is
annoying.

The attached patch fixes it for me. I'm not sure it is
TheRightWay to do it. Should everyone compile with -DEAPI? Or
should configure (con)figure it out? Should the OPT flag be
used? Or another introduced?

Regards,

-- 
Mads Kiilerich          Sys.Adm. Cand.Polyt. Stud.Bibel.
Mads@Kiilerich.com      Tel. +45 26 20 07 73
Fxvqrevx! Fiva! Qrg re cvffrgneiryvtg ng xelcgrer zrq EBG-13.                   
-------------- next part --------------
Index: src/Makefile.in
===================================================================
RCS file: /cvsroot/modpython/mod_python/src/Makefile.in,v
retrieving revision 1.7
diff -u -r1.7 Makefile.in
--- src/Makefile.in	2000/12/06 03:05:37	1.7
+++ src/Makefile.in	2000/12/28 13:17:06
@@ -52,7 +52,7 @@
 INCLUDES=@INCLUDES@
 LIBS=@LIBS@
 LDFLAGS=@LDFLAGS@
-OPT=
+OPT=-DEAPI
 CFLAGS=$(OPT) $(INCLUDES) 
 srcdir=.
 
@@ -76,7 +76,7 @@
 	@echo
 	@echo 'Compiling for DSO. For static, do "make static"'
 	@echo
-	$(APXS) $(INCLUDES) -c $(OBJS) $(LIBS)
+	$(APXS) $(OPT) $(INCLUDES) -c $(OBJS) $(LIBS)
 	@echo
 	@echo 'Now su and make install'
 	@echo '  (or, if you only want to perform a partial install,'
@@ -114,4 +114,4 @@
 serverobject.o: serverobject.c
 connobject.o: connobject.c
 
-# DO NOT DELETE THIS LINE
\ No newline at end of file
+# DO NOT DELETE THIS LINE
From Mads at Kiilerich.com  Thu Dec 28 14:41:33 2000
From: Mads at Kiilerich.com (Mads Kiilerich)
Date: Fri Jan  9 21:46:08 2004
Subject: [mod_python] doc-html and mkhowto
Message-ID: <Pine.LNX.4.21.0012281438480.926-100000@localhost>

Hello,

building html docs seems to require and mkhowto. 

Am I right that
mkhowto requires python 2.0? 

Still mod_python itself is only for
python <2.0?

Regards,
-- 
Mads Kiilerich          Sys.Adm. Cand.Polyt. Stud.Bibel.
Mads@Kiilerich.com      Tel. +45 26 20 07 73
Fxvqrevx! Fiva! Qrg re cvffrgneiryvtg ng xelcgrer zrq EBG-13.                   


From rsalz at CaveoSystems.com  Thu Dec 28 10:46:08 2000
From: rsalz at CaveoSystems.com (rsalz@CaveoSystems.com)
Date: Fri Jan  9 21:46:08 2004
Subject: [mod_python] -DEAPI fix
Message-ID: <200012281546.KAA26868@os390.caveosystems.com>

-


The -DEAPI flag adds extra fields to the end of the Apache "module"
structure.  If you compile some code with that flag, and some code
without that f lag, then you can -- and almost always will -- get some
modules that have bogus crap instead of NULL pointers.  This will
cause things to crash.

You *might* get lucky on some platforms sometime.  Do not count on it.

Always use -DEAPI or never do.  Do not mix.
	/r$

From grisha at ispol.com  Thu Dec 28 10:43:28 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:46:08 2004
Subject: [mod_python] doc-html and mkhowto
In-Reply-To: <Pine.LNX.4.21.0012281438480.926-100000@localhost>
Message-ID: <Pine.LNX.4.21.0012281038480.32595-100000@saturn.ispol.com>

On Thu, 28 Dec 2000, Mads Kiilerich wrote:

> Hello,
> 
> building html docs seems to require and mkhowto. 
> 
> Am I right that
> mkhowto requires python 2.0? 

In 1.5.2 it is distributed as part of the doc source distribution. It
requires a whole lot more than mkhowto, however. It needs a whole bunch of
TeX and LaTeX stuff and some other tools.

> Still mod_python itself is only for python <2.0?

mod_python is for 2.0 or 1.5.2 equally :-) I've been using 2.0 lately.

http://www.modpython.org/live/mod_python-2.7.1/doc-html/inst-prerequisites.html

Grisha


From grisha at ispol.com  Thu Dec 28 10:37:13 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:46:08 2004
Subject: [mod_python] rpm-packaging and DESTDIR
In-Reply-To: <Pine.LNX.4.21.0012281410450.926-200000@localhost>
Message-ID: <Pine.LNX.4.21.0012281020230.32595-100000@saturn.ispol.com>

On Thu, 28 Dec 2000, Mads Kiilerich wrote:

> Hello,
> 
> I'm hacking the RedHat RPM specs.
> 
> First, I've found that 
> 	./configure --prefix=something 
> has no effect at all. 

That is correct. There are two prefixes that depend on two things - the
Python location and the Apache location, both of which are predetermined.

> It should either be fixed or removed from the documentation.

I don't think it is in the documentation.

> For RPM packaging installation in another directory than the one
> compiled for is essential. Thus I suggest the attached patch. It
> causes any installation to be done below $DESTDIR . If no
> DESTDIR is defined in the environment it has no effect.

Antonio Navarro Navarro <hostmaster@bemarnet.es> has volunteered to create
RPM's, check with him. 

I would need some more convincing to add the mod_python.spec to cvs - I
really don't see why RedHat support whould be part of mod_python core
project. If we're going to maintin RPM's, then why not Debian packages,
sun packages, FreeBSD ports, Windows InstallShield, etc, etc.

I'm not saying these things are bad, I'm just saying they are outside the
scope of mod_python core, which is Apache/Python integration. At best
RPM's fall in the category of "contrib" stuff - if someone wants to
maintin them that is great, but I do not want to create the impression
that when a user downloads a mod_python.tgz that I somehow vouch for the
RedHat compatibility - because I don't. Not anymore than any other OS or
Linux distribution.

As far as I know, Debian already has a mod_python package that they
maintain under their CVS, FreeBSD has a mod_python port that is maintained
in the FreeBSD ports CVS. RPM support initiative should come from RedHat
if they find mod_python useful. Until that day, I'm willing to support a
spec and make RPM's downloadable, but I don't want RPM support to be part
of mod_python.

I hope I'm making sense here :-)

Grisha



From emm at scriptdigital.com  Thu Dec 28 12:07:38 2000
From: emm at scriptdigital.com (Emmanuel. M. Decarie)
Date: Fri Jan  9 21:46:08 2004
Subject: [mod_python] Publisher Handler
Message-ID: <v04220803b6711ecc58ee@[192.168.0.2]>

Hello,

I just tried the publisher handler with the "hello.py" example found 
in the manual:

>
>""" Publisher example """
>
>def say(req, what="NOTHING"):
>     return "I am saying %s" % what

http://www.modpython.org/live/mod_python-2.7.1/doc-html/hand-pub-intro.html

Its working fine. But I didn't find a way to send  some HTML. The 
publisher handler seems to always return "Content-Type: text/plain". 
How can I tell it  to return "Content-Type: text/html".

When I put at the top of the file "hello.py" this line:

from mod_python import apache

it look like that I can read the req object, but that I can't set values.

For example, If I rewrite the hello.py example:

from mod_python import apache

def say(req, what="NOTHING"):
	req.content_type = "text/html"
	req.send_http_header ()
	req.write (what)
	return apache.OK

And then try to access /hello.py/say, Apache is not serving the page.

I'm fairly new to Python, Apache and mod_python, so its a lot to swallow.

I'm using FreeBSD 4.0 and mod_python 2.7.1 and Python 2.0.

I like the way the publisher handler work, but I really need to have 
control on the HTTP headers returned by mod_python to be able to 
choose to publish plain text, html, or do redirection, send 404 code 
and so on.

TIA

Cheers

-Emmanuel
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Emmanuel D?carie - Consultant
   Programmation pour le Web - Programming for the Web
   UserLand Frontier  - Perl - JavaScript - AppleScript - HTML - XML
   http://www.scriptdigital.com

---> The Frontier Newbie Toolbox:
   <http://www.scriptdigital.com/fnt/frontierNewbieToolbox.html>

From grisha at ispol.com  Thu Dec 28 13:15:08 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:46:08 2004
Subject: [mod_python] Publisher Handler
In-Reply-To: <v04220803b6711ecc58ee@[192.168.0.2]>
Message-ID: <Pine.LNX.4.21.0012281312220.549-100000@saturn.ispol.com>

Try this:

def say(req, what="NOTHING"):
	req.content_type = "text/html"
        return "I am saying %s" % what
 

This is sort of a "bug"...  The publisher handler attempts to guess the
content_type, but *only* it isn't set already. Depending on your
configuration, Apache may take the liberty of setting it (in
mod_negotation for example). So far I haven't figured out a clean solution
to this.

Grisha
	

On Thu, 28 Dec 2000, Emmanuel. M. Decarie wrote:

> Hello,
> 
> I just tried the publisher handler with the "hello.py" example found 
> in the manual:
> 
> >
> >""" Publisher example """
> >
> >def say(req, what="NOTHING"):
> >     return "I am saying %s" % what
> 
> http://www.modpython.org/live/mod_python-2.7.1/doc-html/hand-pub-intro.html
> 
> Its working fine. But I didn't find a way to send  some HTML. The 
> publisher handler seems to always return "Content-Type: text/plain". 
> How can I tell it  to return "Content-Type: text/html".
> 
> When I put at the top of the file "hello.py" this line:
> 
> from mod_python import apache
> 
> it look like that I can read the req object, but that I can't set values.
> 
> For example, If I rewrite the hello.py example:
> 
> from mod_python import apache
> 
> def say(req, what="NOTHING"):
> 	req.content_type = "text/html"
> 	req.send_http_header ()
> 	req.write (what)
> 	return apache.OK
> 
> And then try to access /hello.py/say, Apache is not serving the page.
> 
> I'm fairly new to Python, Apache and mod_python, so its a lot to swallow.
> 
> I'm using FreeBSD 4.0 and mod_python 2.7.1 and Python 2.0.
> 
> I like the way the publisher handler work, but I really need to have 
> control on the HTTP headers returned by mod_python to be able to 
> choose to publish plain text, html, or do redirection, send 404 code 
> and so on.
> 
> TIA
> 
> Cheers
> 
> -Emmanuel
> ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
> Emmanuel D?carie - Consultant
>    Programmation pour le Web - Programming for the Web
>    UserLand Frontier  - Perl - JavaScript - AppleScript - HTML - XML
>    http://www.scriptdigital.com
> 
> ---> The Frontier Newbie Toolbox:
>    <http://www.scriptdigital.com/fnt/frontierNewbieToolbox.html>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From Mads at Kiilerich.com  Thu Dec 28 20:36:33 2000
From: Mads at Kiilerich.com (Mads Kiilerich)
Date: Fri Jan  9 21:46:08 2004
Subject: [mod_python] rpm-packaging and DESTDIR
In-Reply-To: <Pine.LNX.4.21.0012281020230.32595-100000@saturn.ispol.com>
Message-ID: <Pine.LNX.4.21.0012282026060.926-100000@localhost>

Today I got mail from Gregory Trubetskoy:

> > It should either be fixed or removed from the documentation.
> 
> I don't think it is in the documentation.

It is in ./configure --help IIRC.

> > For RPM packaging installation in another directory than the one
> > compiled for is essential. Thus I suggest the attached patch. It
> > causes any installation to be done below $DESTDIR . If no
> > DESTDIR is defined in the environment it has no effect.
> 
> Antonio Navarro Navarro <hostmaster@bemarnet.es> has volunteered to create
> RPM's, check with him. 

OK. But the patch I sent (or some kind of working --prefix) is
very usefull for any kind of packaging and non-root-compilation.
Thus I still suggest the patch.

...
> As far as I know, Debian already has a mod_python package that they
> maintain under their CVS, FreeBSD has a mod_python port that is maintained
> in the FreeBSD ports CVS. RPM support initiative should come from RedHat
> if they find mod_python useful. Until that day, I'm willing to support a
> spec and make RPM's downloadable, but I don't want RPM support to be part
> of mod_python.

OK. But IMHO: In order to make sure that cvs-mod_python works
under any OS the compilation and packaging for them should be
supplied in the cvs/tar. You do use configure scripts for a
reason, right? 

That's my opinion - and as it is TheRightOne you should have the
same! ;)

Roger and over,

-- 
Mads Kiilerich          Sys.Adm. Cand.Polyt. Stud.Bibel.
Mads@Kiilerich.com      Tel. +45 26 20 07 73
Fxvqrevx! Fiva! Qrg re cvffrgneiryvtg ng xelcgrer zrq EBG-13.                   


From bbhaydon at bigpond.com  Sun Dec 31 17:19:30 2000
From: bbhaydon at bigpond.com (Brett Haydon)
Date: Fri Jan  9 21:46:08 2004
Subject: [mod_python] Threads in mod_python - Publisher Handler (Just starting)
Message-ID: <NCBBKMABOKFCDLPIKKGIEEJBCCAA.bbhaydon@bigpond.com>

I'm just trying to come to grips with the
excellent Publisher Handler (on Win32).

I thought function calls are executed sequentially,
(ie browser1 executes func1 then browser2 exec func1)
but testing some code, (trimmed slightly):

cache{}
def func(req):

    while 1:
        cache[users.cookie] = [random.random()]

    return never

it appears that calling func() in multiple browsers
will start a thread in each of them that goes on until the
server is stopped.

I am trying to work out the implications for calls that
bump into each other (especially database calls) that share
objects. A quick test by starting some threads in a script
that call the same URLs (which have database functions)
appears to confirm this, in that in six threads up to three of them
apparantly produce a blank page.

Has anyone come up with strategies to deal with this.

regards,

Brett


From jsliv at jslove.org  Sun Dec 31 14:43:34 2000
From: jsliv at jslove.org (Jay Love)
Date: Fri Jan  9 21:46:08 2004
Subject: [mod_python] server.register_cleanup
Message-ID: <3A4F8C66.4000705@jslove.org>

Hi folks.

I'm having trouble using this function.  It gives me an error and tells 
me that the first argument must be a request object, which it is.

Here's the offending line, from the top of my handler function:

handler(self, req):
	res.server.register_callback(req, self.cleanup_func)

Any thoughts on what's going wrong?

I'm using Apache 1.3.14, RH 7.0, mod_python 2.6.3

Jay


From grisha at ispol.com  Sun Dec 31 15:21:52 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:46:08 2004
Subject: [mod_python] server.register_cleanup
In-Reply-To: <3A4F8C66.4000705@jslove.org>
Message-ID: <Pine.LNX.4.21.0012311519480.21119-100000@saturn.ispol.com>

this is a sideffect of a bug in 2.6.3, which is fixed in 2.6.4

I recommend upgrading to 2.7.1

Grisha

On Sun, 31 Dec 2000, Jay Love wrote:

> 
> Hi folks.
> 
> I'm having trouble using this function.  It gives me an error and tells 
> me that the first argument must be a request object, which it is.
> 
> Here's the offending line, from the top of my handler function:
> 
> handler(self, req):
> 	res.server.register_callback(req, self.cleanup_func)
> 
> Any thoughts on what's going wrong?
> 
> I'm using Apache 1.3.14, RH 7.0, mod_python 2.6.3
> 
> Jay
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From jsliv at jslove.org  Sun Dec 31 15:33:28 2000
From: jsliv at jslove.org (Jay Love)
Date: Fri Jan  9 21:46:08 2004
Subject: [mod_python] server.register_cleanup
References: <Pine.LNX.4.21.0012311519480.21119-100000@saturn.ispol.com>
Message-ID: <3A4F9818.2020209@jslove.org>

I did, and it still happens.  Are you sure it's fixed?

Jay


Gregory Trubetskoy wrote:

> this is a sideffect of a bug in 2.6.3, which is fixed in 2.6.4
> 
> I recommend upgrading to 2.7.1
> 
> Grisha
> 
> On Sun, 31 Dec 2000, Jay Love wrote:
> 
>> Hi folks.
>> 
>> I'm having trouble using this function.  It gives me an error and tells 
>> me that the first argument must be a request object, which it is.
>> 
>> Here's the offending line, from the top of my handler function:
>> 
>> handler(self, req):
>> 	res.server.register_callback(req, self.cleanup_func)
>> 
>> Any thoughts on what's going wrong?
>> 
>> I'm using Apache 1.3.14, RH 7.0, mod_python 2.6.3
>> 
>> Jay
>> 
>> _______________________________________________
>> Mod_python mailing list
>> Mod_python@modpython.org
>> http://www.modpython.org/mailman/listinfo/mod_python
>> 



From grisha at ispol.com  Sun Dec 31 15:39:37 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:46:08 2004
Subject: [mod_python] server.register_cleanup
In-Reply-To: <3A4F9818.2020209@jslove.org>
Message-ID: <Pine.LNX.4.21.0012311537040.21119-100000@saturn.ispol.com>

Ah, I see what's going on. It expecting a different kind of request
object, the old built-in one, which is no req._req.

try this:

	req.server.register_cleanup(req._req, ...)

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Sun, 31 Dec 2000, Jay Love wrote:

> 
> I did, and it still happens.  Are you sure it's fixed?
> 
> Jay
> 
> 
> Gregory Trubetskoy wrote:
> 
> > this is a sideffect of a bug in 2.6.3, which is fixed in 2.6.4
> > 
> > I recommend upgrading to 2.7.1
> > 
> > Grisha
> > 
> > On Sun, 31 Dec 2000, Jay Love wrote:
> > 
> >> Hi folks.
> >> 
> >> I'm having trouble using this function.  It gives me an error and tells 
> >> me that the first argument must be a request object, which it is.
> >> 
> >> Here's the offending line, from the top of my handler function:
> >> 
> >> handler(self, req):
> >> 	res.server.register_callback(req, self.cleanup_func)
> >> 
> >> Any thoughts on what's going wrong?
> >> 
> >> I'm using Apache 1.3.14, RH 7.0, mod_python 2.6.3
> >> 
> >> Jay
> >> 
> >> _______________________________________________
> >> Mod_python mailing list
> >> Mod_python@modpython.org
> >> http://www.modpython.org/mailman/listinfo/mod_python
> >> 
> 
> 


From jsliv at jslove.org  Sun Dec 31 15:52:18 2000
From: jsliv at jslove.org (Jay Love)
Date: Fri Jan  9 21:46:08 2004
Subject: [mod_python] server.register_cleanup
References: <Pine.LNX.4.21.0012311537040.21119-100000@saturn.ispol.com>
Message-ID: <3A4F9C82.6040303@jslove.org>

That got it.

Thanks-

Jay


Gregory Trubetskoy wrote:

> Ah, I see what's going on. It expecting a different kind of request
> object, the old built-in one, which is no req._req.
> 
> try this:
> 
> 	req.server.register_cleanup(req._req, ...)
> 
> --
>   Gregory (Grisha) Trubetskoy
>        grisha@ispol.com
> 
> On Sun, 31 Dec 2000, Jay Love wrote:
> 
>> I did, and it still happens.  Are you sure it's fixed?
>> 
>> Jay
>> 
>> 
>> Gregory Trubetskoy wrote:
>> 
>>> this is a sideffect of a bug in 2.6.3, which is fixed in 2.6.4
>>> 
>>> I recommend upgrading to 2.7.1
>>> 
>>> Grisha
>>> 
>>> On Sun, 31 Dec 2000, Jay Love wrote:
>>> 
>>>> Hi folks.
>>>> 
>>>> I'm having trouble using this function.  It gives me an error and tells 
>>>> me that the first argument must be a request object, which it is.
>>>> 
>>>> Here's the offending line, from the top of my handler function:
>>>> 
>>>> handler(self, req):
>>>> 	res.server.register_callback(req, self.cleanup_func)
>>>> 
>>>> Any thoughts on what's going wrong?
>>>> 
>>>> I'm using Apache 1.3.14, RH 7.0, mod_python 2.6.3
>>>> 
>>>> Jay
>>>> 
>>>> _______________________________________________
>>>> Mod_python mailing list
>>>> Mod_python@modpython.org
>>>> http://www.modpython.org/mailman/listinfo/mod_python
>>>> 



From Lisa  Mon Dec  4 22:18:18 2000
From: Lisa (Lisa)
Date: Fri Jan  9 21:52:11 2004
Subject: [mod_python] RE: Answer To Your Question.
Message-ID: <200012042025.UAA03461@mercury.ispol.com>

An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20001204/e8402cf1/attachment-0001.htm
From arhiv at freemail.org.mk  Mon Dec  4 22:25:25 2000
From: arhiv at freemail.org.mk (Damjan)
Date: Fri Jan  9 21:52:11 2004
Subject: [mod_python] apache.send_file()
Message-ID: <Pine.LNX.4.30.0012042218140.460-100000@localhost.localdomain>

Is there a point in having something like
apache.send_file(PyObject * file) or apache.send_file(char * filename)

Of course I can do this with:
	f = open(...
	buf = f.read()
	req.write(buf)
but perhaps using apache calls will be faster.

-- 
Damjan Georgievski		|           ?????? ???????????
Skopje, Macedonia		|           ??????, ??????????


From grisha at ispol.com  Tue Dec  5 11:42:55 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:11 2004
Subject: [mod_python] apache.send_file()
In-Reply-To: <Pine.LNX.4.30.0012042218140.460-100000@localhost.localdomain>
Message-ID: <Pine.LNX.4.21.0012051133220.16800-100000@saturn.ispol.com>

Yeah, it will be faster.... (req.write(f.read()) is going to be pretty
damn fast too) I didn't bother implementing that one since I figured 99.9%
of the content will be dynamically generated. I'll see if I can implement
something in the next version.

Grisha

On Mon, 4 Dec 2000, Damjan wrote:

> Is there a point in having something like
> apache.send_file(PyObject * file) or apache.send_file(char * filename)
> 
> Of course I can do this with:
> 	f = open(...
> 	buf = f.read()
> 	req.write(buf)
> but perhaps using apache calls will be faster.
> 
> -- 
> Damjan Georgievski		|           ???????????? ??????????????????????
> Skopje, Macedonia		|           ????????????, ????????????????????
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From jb4mt at yahoo.com  Tue Dec  5 10:10:09 2000
From: jb4mt at yahoo.com (George Jempty)
Date: Fri Jan  9 21:52:11 2004
Subject: [mod_python] Site redesign
Message-ID: <20001205181009.26474.qmail@web3904.mail.yahoo.com>

I just subscribed to this list because I'm having
problems getting mod_python to work on my Windows 2000
system.  I plan on digging a little deeper on my own
first, but in the event I need to come back here I'm
trying to establish some good karma by working on the
site design as requested on the home page.  You can
see what I've come up with at:

http://webfielding.com/mod_python/

It's by no means complete but I think should give an
idea of the possiblities for organizing the site.  And
as for color, at first I thought the plum-colored
banner was too garish, and tried "thistle" instead,
but I'm liking plum more and more!

However, you can see the page with a thistle-colored
banner at:

http://webfielding.com/mod_python/thistle.htm

I'll look forward to everyone's feedback!

George

__________________________________________________
Do You Yahoo!?
Yahoo! Shopping - Thousands of Stores. Millions of Products.
http://shopping.yahoo.com/

From grisha at ispol.com  Tue Dec  5 16:03:59 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:11 2004
Subject: [mod_python] Site redesign
In-Reply-To: <20001205181009.26474.qmail@web3904.mail.yahoo.com>
Message-ID: <Pine.LNX.4.21.0012051602010.16800-100000@saturn.ispol.com>

Thanks George, this looks good I might put it out on the main site.

This sort of reorganization is long overdue. I've got another submission
of a site deisgn that I'm still holding on to partly because I don't have
time to put it out, partly because I'm hoping something better will come
around...

P.S. One comment - I'm not a big fan of frames....

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Tue, 5 Dec 2000, George Jempty wrote:

> I just subscribed to this list because I'm having
> problems getting mod_python to work on my Windows 2000
> system.  I plan on digging a little deeper on my own
> first, but in the event I need to come back here I'm
> trying to establish some good karma by working on the
> site design as requested on the home page.  You can
> see what I've come up with at:
> 
> http://webfielding.com/mod_python/
> 
> It's by no means complete but I think should give an
> idea of the possiblities for organizing the site.  And
> as for color, at first I thought the plum-colored
> banner was too garish, and tried "thistle" instead,
> but I'm liking plum more and more!
> 
> However, you can see the page with a thistle-colored
> banner at:
> 
> http://webfielding.com/mod_python/thistle.htm
> 
> I'll look forward to everyone's feedback!
> 
> George
> 
> __________________________________________________
> Do You Yahoo!?
> Yahoo! Shopping - Thousands of Stores. Millions of Products.
> http://shopping.yahoo.com/
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From jb4mt at yahoo.com  Tue Dec  5 14:50:47 2000
From: jb4mt at yahoo.com (George Jempty)
Date: Fri Jan  9 21:52:11 2004
Subject: [mod_python] Can't configure under Windows NT and Windows 2000
Message-ID: <20001205225047.17197.qmail@web3901.mail.yahoo.com>

When following the Windows installation instructions
for mod_python.py verbatim, I get the same error
message when trying to run test.py, under both NT4 and
Windows 2000.  That message is:

python_handler: make_obcallback returned no
obCallBack!

Your help in solving this problem will be appreciated.
 Also I have some comments about the install
instructions at:

http://www.modpython.org/live/mod_python-2.6.3/doc/windows.html

that might or might not shed light on my problem.

First of all these instructions only mention 1.52
whereas I'm running Python 2.0; I did however download
the .dll for 2.0 from the home page (NOT the 1.52
.dll).

Secondly, just to be certain, I downloaded the one and
only .tgz installation from the home page: does this
work for both Windows AND Linux?!

Furthermore, in contradiction to the Windows
installation doc, when I unzip the .tgz file I do NOT
get a "new folder".  Rather I get another .tar file;
extrapolating from the instructions, however, I just
extracted this to my python/lib folder
(C:\Python20\Lib), which resulted in a subfolder under
lib named "mod_python-2.6.3".

Moving on to the Apache Integration section of the
install, I stopped and re-started Apache after each
directive I added, to be certain!  However I do find
the instructions about the ScriptAlias/CGI section of
httpd.conf to be confusing: these aren't necessarily
the same thing.

On the first install (on Windows 2000) I added the
indicated directives to the others for my CGI
directory.  On the subsequent NT install I instead
followed the instructions verbatim, creating a
"python" directory under my document_root "htdocs"
directory.  Regardless, as noted above, I got the same
error message for both installs.

Finally, please note that as a final control I created
a test.py program in my cgi-bin as follows:

#! C:\Python20\python.exe

print "Content-type: text/html\n\n"
print "Whatever"

And it ran flawlessly.  So my Apache and Python are
working properly (and I can proceed to develop my
application if solving this problem doesn't happen
overnight ;)

OK, I will look forward to whatever light anybody in
the group can shed on this.  If I'm being an idiot
please be gentle.  On the other hand if any of my
comments are useful I would not mind getting involved
in revising the install docs (PS, the
installation.html that I extracted is not the same as
the installation for windows doc on the website)

Thanks in advance

George Jempty

__________________________________________________
Do You Yahoo!?
Yahoo! Shopping - Thousands of Stores. Millions of Products.
http://shopping.yahoo.com/

From djc at object-craft.com.au  Wed Dec  6 16:58:25 2000
From: djc at object-craft.com.au (Dave Cole)
Date: Fri Jan  9 21:52:11 2004
Subject: [mod_python] How do I find the document root?
Message-ID: <m3bsuqum4e.fsf@vole.object-craft.com.au>

I want to find out the value of the DocumentRoot directive.  I cannot
see any way to do this.

Can someone please point me in the right direction?

- Dave

-- 
http://www.object-craft.com.au


From grisha at ispol.com  Wed Dec  6 09:54:57 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:11 2004
Subject: [mod_python] How do I find the document root?
In-Reply-To: <m3bsuqum4e.fsf@vole.object-craft.com.au>
Message-ID: <Pine.LNX.4.21.0012060953250.20782-100000@saturn.ispol.com>

This may be a roundabout way of doing this, but you could use the
req.server.defn_name and req.server.defn_line_number to read the
DocumentRoot from the config file.

I haven't had my coffee yet, so I hope the above makes sense.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On 6 Dec 2000, Dave Cole wrote:

> I want to find out the value of the DocumentRoot directive.  I cannot
> see any way to do this.
> 
> Can someone please point me in the right direction?
> 
> - Dave
> 
> -- 
> http://www.object-craft.com.au
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From djc at object-craft.com.au  Thu Dec  7 10:01:57 2000
From: djc at object-craft.com.au (Dave Cole)
Date: Fri Jan  9 21:52:11 2004
Subject: [mod_python] How do I find the document root?
In-Reply-To: Gregory Trubetskoy's message of "Wed, 6 Dec 2000 09:54:57 -0500 (EST)"
References: <Pine.LNX.4.21.0012060953250.20782-100000@saturn.ispol.com>
Message-ID: <m3n1e99msa.fsf@vole.object-craft.com.au>

>>>>> "Gregory" == Gregory Trubetskoy <grisha@ispol.com> writes:

Gregory> This may be a roundabout way of doing this, but you could use
Gregory> the req.server.defn_name and req.server.defn_line_number to
Gregory> read the DocumentRoot from the config file.

Gregory> I haven't had my coffee yet, so I hope the above makes sense.

Yup, that makes sense.  It is not what I would call an ideal solution
though :-).

The other thing that I was trying to work out was how to direct all
requests below a certain directory to a single python program.  When
the request is referring to a directory, mod_dir/mod_autoindex kick
in.  I have come up with some mod_rewrite directives, but again, I
wish there were another way to just disable those modules below that
directory.

RewriteEngine on
RewriteRule ^$ main
RewriteRule .*/$ main
SetHandler python-program
PythonHandler main

- Dave

-- 
http://www.object-craft.com.au


From rayvd at firetail.org  Thu Dec  7 12:04:27 2000
From: rayvd at firetail.org (Ray Van Dolson)
Date: Fri Jan  9 21:52:11 2004
Subject: [mod_python] mod_python compiles fine, but gives errors...
Message-ID: <Pine.LNX.4.21.0012071201001.20882-100000@hotnest.firetail.org>

I'm compiling mod_python (latest version) as DSO into Apache 1.3.12
against a Python source tree with no threads.  Everything compiles fine
and even seems to install fine.  However, when starting up apache, it
gives me the following error:

[Thu Dec  7 11:58:16 2000] [warn] Loaded DSO libexec/mod_python.so usesplain Apache 1.3 API, this module might crash under EAPI! (please recompile it with -DEAPI)
[Thu Dec  7 11:58:16 2000] [notice] Apache/1.3.12 (Unix) mod_ssl/2.6.2 OpenSSL/0.9.4 mod_python/2.6.3 Python/1.5.2 mod_perl/1.22 PHP/3.0.16 configured -- resuming normal operations

What is this EAPI warning?  Should I worry about it?  Is it related in any
way to the following error I get when running the test program?  (This is
from the error_log file):

make_obcallback(): could not import mod_python.apache.
make_obcallback(): could not call init.
[Thu Dec  7 11:58:35 2000] [error] [client 199.236.177.11] python_handler: make_obcallback returned no obCallBack!

Apache is running as user nobody, which I read might pose a problem.  But
all the Python modules should be readable by this user.

Any ideas?

Ray Van Dolson


From greg at abbas.org  Thu Dec  7 14:47:07 2000
From: greg at abbas.org (Greg Abbas)
Date: Fri Jan  9 21:52:11 2004
Subject: [mod_python] python_handler: Dispatch() returned nothing.
Message-ID: <3A30136A.E3E6B4F2@abbas.org>

Hi all,

I'm running mod_python 2.6.3 with Apache 1.3.14 on RH 6.2, and it was
working well for a while, but now I've started running into a big
problem. Help please! I've got several name-based virtual hosts (i.e.,
on the same IP address), and I want to send requests to different
handlers, because I'm running several instances of Webware/WebKit
(http://webware.sourceforge.net/). What happens is that as the server
runs, I get more and more "internal server errors". The log shows the
following:

    python_handler: Dispatch() returned nothing.

After I restart the server, it seems to happen a little less (for a
short while). Any idea why this might be happening?

Before I set up the different host names, I was using different ports to
dispatch requests. I didn't get the above-mentioned error, but I got
other strange behavior: PythonPath didn't seem to work on a
per-VirtualHost basis. I set different paths for the different virtual
hosts, but they seemed to be executing code that was only in the other
virtual host's path. I'm not sure, but I think PythonHandler was
"bleeding over" between different virtual hosts, too. I am supposed to
be able to set these parameters differently for each VirtualHost
section, and invoke different handlers for each virtual host?

thanks,
-g.


--
Greg Abbas
greg@abbas.org
http://www.abbas.org



From rayvd at firetail.org  Thu Dec  7 15:15:31 2000
From: rayvd at firetail.org (Ray Van Dolson)
Date: Fri Jan  9 21:52:11 2004
Subject: [mod_python] mod_python compiles fine, but gives errors...
Message-ID: <Pine.LNX.4.21.0012071514490.24101-100000@hotnest.firetail.org>

Did a few things to check out the permissions possibility.  I su'd to root
and then su -'d to nobody.  I can access all the Python directories just
fine that way... Also, just to be sure, I changed the user that apache
runs at to one that I know has access to the Python directories (in this
case, myself).  However, the same problem occurs (same output in error_log
as well).

I have noticed some strange things, however.  When logged in in my normal
user account, if I fire up python and try to do a

import mod_python.apache

I get this:
>>> import mod_python.apache
Traceback (innermost last):
  File "<stdin>", line 1, in ?
  File "/usr/local/lib/python1.5/site-packages/mod_python/apache.py", line
19, in ?
    import _apache
ImportError: No module named _apache

While I see an apache.pyc along with a few other files, there is certainly
no _apache module file.  I notice that in the src tarball for mod_python
there is a file _apachemodule.c and _apachemodule.o.  Is this what python
needs to be loading?

Anyways, hoping to get this figured out.  Thanks for any help. :)

Ray Van Dolson





From Michael.Tellenbroeker at gmx.de  Fri Dec  8 16:34:52 2000
From: Michael.Tellenbroeker at gmx.de (Michael =?ISO-8859-1?Q?Tellenbr=F6ker?=)
Date: Fri Jan  9 21:52:11 2004
Subject: [mod_python] (no subject)
Message-ID: <3241.976289692@www19.gmx.net>

Hello everybody,
I have a little, possibly off-topic, question. I'm trying to connect to a
remote Informix-database, using Apache, mod_python and informixdb.
Stand-alone-access via informixdb runs like a charm, without trying to import
informixdb my mod_python-test-scripts run fine, too. Trying to import informixdb
into my mod_python scripts, I get following message:
  ImportError: Cannot locate C core module for informix db interface.

What's up? Knowing nearly nothing about apache-configuration I appreciate
any help

Thanks in advance
Michael 

-- 
Sent through GMX FreeMail - http://www.gmx.net


From arhiv at freemail.org.mk  Fri Dec  8 19:54:16 2000
From: arhiv at freemail.org.mk (Damjan)
Date: Fri Jan  9 21:52:11 2004
Subject: [mod_python] Small sugestion
Message-ID: <20001208195416.A552@localhost.localdomain>

Hi, Grisha.
I've noticed a lot of complaints about that 'make_obcallback...' errors in the
apache log. These are very often problems with the python path.
So I sugest you add the following two lines in make_obcallback:
(Here is a diff against 2.6.3)

--- mod_python.c.bak	Mon Dec  4 10:59:15 2000
+++ mod_python.c	Fri Dec  8 19:47:41 2000
@@ -479,6 +479,8 @@
 
     if (! ((m = PyImport_ImportModule(MODULENAME)))) {
 	fprintf(stderr, "make_obcallback(): could not import %s.\n", MODULENAME);
+	fprintf(stderr, "make_obcallback(): %s not found in %s.\n", MODULENAME, Py_GetPath());
+	return NULL;
     }
     
     if (! ((obCallBack = PyObject_CallMethod(m, INITFUNC, NULL)))) {

The 'return NULL;' is for the make_obcallback to return as soon as posible 
(and there's no reason to try and call the method when the module was not
loaded), and the apache log will be cleaner.



-- 
Damjan Georgievski		|           ?????? ???????????
Skopje, Macedonia		|           ??????, ??????????

From gstein at lyra.org  Sat Dec  9 05:08:43 2000
From: gstein at lyra.org (Greg Stein)
Date: Fri Jan  9 21:52:11 2004
Subject: [mod_python] Re: A Mod_python error Question
Message-ID: <20001209050843.C30644@lyra.org>

crap... missed the address the first time :-)

----- Forwarded message from Mail Delivery System <MAILER-DAEMON@python.org> -----
>...
From: Greg Stein <gstein@lyra.org>
To: mod_python@python.org
Cc: webmaster <webmaster@startcom.org>

mod_python people...

Could somebody please help this user? At first, I thought it was something
related to DAV, but apparently not. This is out of my area of expertise, but
I'm sure somebody in this forum can help.

Cheers,
-g

On Sat, Dec 09, 2000 at 12:13:38PM -0800, webmaster wrote:
> Hi Greg,
> 
> My problem is *not* mod_dav, DAV is running perfect. I don't want to learn
> right now python (You can't learn just everything). I just added mod_python
> support to one of our servers. Now, I tested it with the test-script
> provided with the contribution, which works well. But to test it, I needed
> to add some handler-stuff to the httpd.conf. So, the only question is
> really, which GLOBAL directive I have to input to the httpd.conf like for
> cgi > AddHandler cgi-script .pl .cgi  or for php I have > AddType
> application/x-httpd-php .php . I added like in the example from mod_python
> AddHandler python-program .py . But this does not seam to work for generally
> getting python executed. And I didn't found anything in mod_python-docs,
> sorry.
> 
> For any help I thank you very much.
> 
> Company:    StartCom (Group)
> Homepage:  http://www.startcom.org
> Branches:    MediaDesign Ltd. at http://mediadesign.startcom.org
>                    MediaHost Ltd. at http://mediahost.startcom.org
> 
> Signer: Eddy Nigg
> 
> ----- Original Message -----
> From: "Greg Stein" <gstein@lyra.org>
> To: "webmaster" <webmaster@startcom.org>
> Sent: Friday, December 08, 2000 2:10 PM
> Subject: Re: A Mod_python error Question
> 
> 
> > If you're using mod_dav, then the installation instructions are at:
> >     http://www.webdav.org/mod_dav/install.html
> >
> > davlib.py is *not* something that you would use as a "handler" in
> > mod_python. There isn't anything that you'd add to the httpd.conf for it.
> >
> > What are you trying to do? That might help me to at least point you in the
> > correct direction.
> >
> > At a minimum, if you are trying to learn Python, then go to
> > http://www.python.org/docs/ and reading the tutorial and some of the other
> > starter guides there.
> >
> > Cheers,
> > -g
> >
> > On Fri, Dec 08, 2000 at 02:46:59PM -0800, webmaster wrote:
> > > Yeah I know that,
> > >
> > > I'd like to know which config I have to enter in httpd.conf, like:
> > > PythonHandler or what?
> > > The DAV Server is successfully installed and already tested.
> > > Thanks if you could give me here some advice for your script and python
> in
> > > general, especially as I saw, that you are also a member of Apache.
> > >
> > > Regards
> > >
> > > Company:    StartCom (Group)
> > > Homepage:  http://www.startcom.org
> > > Branches:    MediaDesign Ltd. at http://mediadesign.startcom.org
> > >                    MediaHost Ltd. at http://mediahost.startcom.org
> > >
> > > Signer: Eddy Nigg
> > >
> > > ----- Original Message -----
> > > From: "Greg Stein" <gstein@lyra.org>
> > > To: "webmaster" <webmaster@startcom.org>
> > > Sent: Friday, December 08, 2000 4:36 AM
> > > Subject: Re: A Mod_python error Question
> > >
> > >
> > > > davlib.py is not intended as a handler module for mod_python. It is a
> > > > support module to be imported by other Python code. More specifically:
> it
> > > is
> > > > a DAV *client* ... not a server.
> > > >
> > > > If you want to DAV-enable your server, then use mod_dav.
> > > >
> > > > Cheers,
> > > > -g
> > > >
> > > > On Wed, Dec 06, 2000 at 12:27:01AM -0800, webmaster wrote:
> > > > > Hi Greg Stein,
> > > > >
> > > > > I tried to run your davlib-script, but not beeing a expert in python
> I
> > > kindly request your help. I installed mod_phyton for this purpose on the
> > > server and also expat. But somehow I don't see any information how to
> > > configure the conf-file so I don't get this error:
> > > > > Mod_python error: "PythonHandler davlib"
> > > > >
> > > > > Traceback (innermost last):
> > > > >
> > > > >   File "/usr/lib/python1.5/site-packages/mod_python/apache.py", line
> > > 178, in Dispatch
> > > > >     object = self.resolve_object(module, object_str)
> > > > >
> > > > >   File "/usr/lib/python1.5/site-packages/mod_python/apache.py", line
> 88,
> > > in resolve_object
> > > > >     raise AttributeError, s
> > > > >
> > > > > AttributeError: module '/home/startcom/www/davclient/davlib.pyc'
> > > contains no 'handler'
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > > Company:    StartCom (Group)
> > > > > Homepage:  http://www.startcom.org
> > > > > Branches:    MediaDesign Ltd. at http://mediadesign.startcom.org
> > > > >                    MediaHost Ltd. at http://mediahost.startcom.org
> > > > >
> > > > > Signer: Eddy Nigg
> > > > >
> > > >
> > > >
> > > >
> > > > --
> > > > Greg Stein, http://www.lyra.org/
> >
> >
> >
> > --
> > Greg Stein, http://www.lyra.org/



-- 
Greg Stein, http://www.lyra.org/


----- End forwarded message -----

-- 
Greg Stein, http://www.lyra.org/

From aiglauer at yahoo.com  Mon Dec 11 00:22:42 2000
From: aiglauer at yahoo.com (Alexis Iglauer)
Date: Fri Jan  9 21:52:11 2004
Subject: [mod_python] Writing to browser from C module
Message-ID: <20001211082242.11132.qmail@web2204.mail.yahoo.com>

Hi, 

me again - and with the same problem as before, just different :)

I have a Python handler which calls a C function - said C function
sometimes taking a long time to return (3+ minutes), long enough for
the browser to time out.  The way to keep the browser happy is to
occasionally send a few bytes of data its way (tried and tested).

So, I somehow need to execute req.write from inside the calculation
loop.  So I need to either a) call the python function req.write from
inside the C function or b) call the ap.rwrite (or similar) function
from inside my C loop.  Either way, I have to pass a pointer of some
form from the Python to C so that I can execute the function.  The best
result I have had so far has been a Segfault from Apache :(

I am currently wrapping my C function using SWIG, put I can pass
PyObjects directly if necessary.  Speed would be a bonus (how efficient
is it to call a Python function from inside C?).

Can anyone help me here?

Regards
Alexis


__________________________________________________
Do You Yahoo!?
Yahoo! Shopping - Thousands of Stores. Millions of Products.
http://shopping.yahoo.com/

From grisha at ispol.com  Tue Dec 12 10:35:06 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:11 2004
Subject: [mod_python] 2.6.4
Message-ID: <Pine.LNX.4.21.0012121029270.20083-100000@saturn.ispol.com>

There is a 2.6.4 available for download now. This is a bugfix release only
and has no new features. It should fix the problem that would manifest
itself by Internal Server Errors and "Dispatch() returned nothing" in the
error log. 

If you're using DSO, you will only need to replace mod_python.so. There
are no changes in the python libraries. I do recommend that you upgrade,
especially is you use multuple virtual servers/interpreters.

Windows users do not need to worry about upgrading, they were not affected
by the problem.

The bug had to do with misplaced #ifdef WITH_THREAD which caused
mod_python not to switch subinterpreters correctly and make python run in
restriced mode, in which __dict__ and some other things are not available.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com



From grisha at ispol.com  Wed Dec 13 18:58:47 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:11 2004
Subject: [mod_python] opensbd anyone?
Message-ID: <Pine.LNX.4.21.0012131857060.24979-100000@saturn.ispol.com>

Anyone out there use mod_python on Open BSD? There is a bug reported on
sourceforge
https://sourceforge.net/bugs/?func=detailbug&bug_id=123047&group_id=7107 I
would like to know if anyone can verify this.

Thanks!

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com


From gerhard.nospam at bigfoot.de  Thu Dec 14 19:26:52 2000
From: gerhard.nospam at bigfoot.de (Gerhard =?iso-8859-1?Q?H=E4ring?=)
Date: Fri Jan  9 21:52:11 2004
Subject: [mod_python] opensbd anyone?
References: <Pine.LNX.4.21.0012131857060.24979-100000@saturn.ispol.com>
Message-ID: <3A3910EC.8DD930FE@bigfoot.de>

I was the one who originally submitted the bug. I was silly enough to
assume that the Apache API didn't change between 1.3.12 and 1.3.14 (the
mod_python win32 build is for 1.3.14, while I used 1.3.12). Now I tried
to verify the bug under Apache 1.3.14, and it seems as if there never
was any bug wrt to win32 and SMP. mod_python now survives a stress test
with concurrent requests from another host. Sorry for the inconvenience.

Gerhard

Gregory Trubetskoy wrote:
> 
> [snip] There is a bug reported on
> sourceforge
> https://sourceforge.net/bugs/?func=detailbug&bug_id=123047&group_id=7107 I
> would like to know if anyone can verify this.
> 
> Thanks!
> 
> --
>   Gregory (Grisha) Trubetskoy
>        grisha@ispol.com

-- 
Sorry for the fake email, please use the real one below to reply.
contact: g e r h a r d @ b i g f o o t . d e
web:     http://highqualdev.com

From modpython at maya.com  Sat Dec 16 14:31:56 2000
From: modpython at maya.com (Seung Chan Lim)
Date: Fri Jan  9 21:52:12 2004
Subject: [mod_python] persistent storage?
Message-ID: <01be01c06796$dfd61b00$0100a8c0@djslim>

Is there a way to mimc the Application object in ASP or the __persistdict__
object in pyApache
with modpython??? so that all cgis running can share this storage space for
data.

thanks,

slim


From grisha at ispol.com  Sat Dec 16 21:25:29 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:12 2004
Subject: [mod_python] mod_python 2.7
Message-ID: <Pine.LNX.4.21.0012162124350.3958-100000@saturn.ispol.com>

...is out

enjoy!

Grisha


From Peter.GIANNOPOULOS at gemplus.com  Sun Dec 17 18:15:49 2000
From: Peter.GIANNOPOULOS at gemplus.com (Peter Giannopoulos)
Date: Fri Jan  9 21:52:12 2004
Subject: [mod_python] A configuration question.
Message-ID: <HEELLMEIEBHKANGCLEELAEPMCBAA.peter.giannopoulos@gemplus.com>

Hi all,

I'm new to the list/python/mod_python.

I am having some difficulty setting up Apache 1.3.14 and mod_python (on
RH7.0) to work the way I want them to. In the tutorial there an explanation
as to how to get myscript.py to handle requests for .py files. This is fine
and it seems to work. But this unfortunately is not enough. I would like to
have the same functionality as traditional cgi handling or servlet handling.
By this I mean that I would like to Have apache/mod_python process ANY .py
files asked for WITHOUT having to set up and individual handler for each in
my configuration files for apache.

Can anyone tell me how to do this?
Thanks in advance.





Peter Giannopoulos, Software Developer
Gemplus Software,   Advanced Projects Group

Phone: +15147322434
Fax:   +15147322401
Gemplus Card International
http://www.gemplus.com


-------------- next part --------------
A non-text attachment was scrubbed...
Name: Peter Giannopoulos.vcf
Type: text/x-vcard
Size: 613 bytes
Desc: not available
Url : http://mailman.modpython.org/pipermail/mod_python/attachments/20001217/654f36fb/PeterGiannopoulos-0001.vcf
From grisha at ispol.com  Sun Dec 17 18:40:35 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:12 2004
Subject: [mod_python] A configuration question.
In-Reply-To: <HEELLMEIEBHKANGCLEELAEPMCBAA.peter.giannopoulos@gemplus.com>
Message-ID: <Pine.LNX.4.21.0012171839200.16900-100000@saturn.ispol.com>

Check out the publisher handler in 2.7. I don't have an RPM for 2.7 yet,
sorry, may be early next week, but you can get the source and compile it.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Sun, 17 Dec 2000, Peter Giannopoulos wrote:

> Hi all,
> 
> I'm new to the list/python/mod_python.
> 
> I am having some difficulty setting up Apache 1.3.14 and mod_python (on
> RH7.0) to work the way I want them to. In the tutorial there an explanation
> as to how to get myscript.py to handle requests for .py files. This is fine
> and it seems to work. But this unfortunately is not enough. I would like to
> have the same functionality as traditional cgi handling or servlet handling.
> By this I mean that I would like to Have apache/mod_python process ANY .py
> files asked for WITHOUT having to set up and individual handler for each in
> my configuration files for apache.
> 
> Can anyone tell me how to do this?
> Thanks in advance.
> 
> 
> 
> 
> 
> Peter Giannopoulos, Software Developer
> Gemplus Software,   Advanced Projects Group
> 
> Phone: +15147322434
> Fax:   +15147322401
> Gemplus Card International
> http://www.gemplus.com
> 
> 
> 


From arhiv at freemail.org.mk  Mon Dec 18 12:09:54 2000
From: arhiv at freemail.org.mk (Damjan)
Date: Fri Jan  9 21:52:12 2004
Subject: [mod_python] persistent storage?
In-Reply-To: <01be01c06796$dfd61b00$0100a8c0@djslim>; from modpython@maya.com on Sat, Dec 16, 2000 at 02:31:56PM -0500
References: <01be01c06796$dfd61b00$0100a8c0@djslim>
Message-ID: <20001218120954.A559@localhost.localdomain>

> Is there a way to mimc the Application object in ASP or the __persistdict__
> object in pyApache
> with modpython??? so that all cgis running can share this storage space for
> data.

You can use somehing like this:

### mod_test.py
cache = {}
def handler(req):
	global cache
	if cache.has_key('num'):
		cache['num'] = cache['num'] + 1
	else:
		cache['num'] = 1
	...

BUT, this is per apache-process persistent storage. Curently there is no way of
sharing data accross processes, except for going through a database.
Apache-2.0 may change this, when it provides a shared memory support.

What I would like to know, how does the above script work in a multithreaded
Apache/mod_python? 
Will the threads share the 'cache' object?


-- 
Damjan Georgievski		|           ?????? ???????????
Skopje, Macedonia		|           ??????, ??????????

From grisha at ispol.com  Mon Dec 18 09:58:00 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:12 2004
Subject: [mod_python] persistent storage?
In-Reply-To: <20001218120954.A559@localhost.localdomain>
Message-ID: <Pine.LNX.4.21.0012180957440.19353-100000@saturn.ispol.com>

On Mon, 18 Dec 2000, Damjan wrote:

> What I would like to know, how does the above script work in a multithreaded
> Apache/mod_python? 
> Will the threads share the 'cache' object?

yes


From Peter.GIANNOPOULOS at gemplus.com  Mon Dec 18 10:05:13 2000
From: Peter.GIANNOPOULOS at gemplus.com (Peter Giannopoulos)
Date: Fri Jan  9 21:52:12 2004
Subject: [mod_python] A configuration question.
In-Reply-To: <Pine.LNX.4.21.0012171839200.16900-100000@saturn.ispol.com>
Message-ID: <HEELLMEIEBHKANGCLEELOEPNCBAA.peter.giannopoulos@gemplus.com>

Thanks, for the prompt reply. I managed to build and install 2.7 but now
Apache can't load it...

Here is what I get as an erro message:


" Cannot load /usr/local/apache/libexec/mod_python.so into server: undefined
symbol: PyEval_RestoreTread "

I don't know enough about apache or mod_python to figure this one out by
mysef right now. Any suggestions?









Peter Giannopoulos, Software Developer
Gemplus Software,   Advanced Projects Group

Phone: +15147322434
Fax:   +15147322401
Gemplus Card International
http://www.gemplus.com




-----Original Message-----
From: Gregory Trubetskoy [mailto:grisha@ispol.com]
Sent: December 17, 2000 6:41 PM
To: Peter Giannopoulos
Cc: mod_python@modpython.org
Subject: Re: [mod_python] A configuration question.



Check out the publisher handler in 2.7. I don't have an RPM for 2.7 yet,
sorry, may be early next week, but you can get the source and compile it.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Sun, 17 Dec 2000, Peter Giannopoulos wrote:

> Hi all,
>
> I'm new to the list/python/mod_python.
>
> I am having some difficulty setting up Apache 1.3.14 and mod_python (on
> RH7.0) to work the way I want them to. In the tutorial there an
explanation
> as to how to get myscript.py to handle requests for .py files. This is
fine
> and it seems to work. But this unfortunately is not enough. I would like
to
> have the same functionality as traditional cgi handling or servlet
handling.
> By this I mean that I would like to Have apache/mod_python process ANY .py
> files asked for WITHOUT having to set up and individual handler for each
in
> my configuration files for apache.
>
> Can anyone tell me how to do this?
> Thanks in advance.
>
>
>
>
>
> Peter Giannopoulos, Software Developer
> Gemplus Software,   Advanced Projects Group
>
> Phone: +15147322434
> Fax:   +15147322401
> Gemplus Card International
> http://www.gemplus.com
>
>
>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Peter Giannopoulos.vcf
Type: text/x-vcard
Size: 613 bytes
Desc: not available
Url : http://mailman.modpython.org/pipermail/mod_python/attachments/20001218/f23646de/PeterGiannopoulos-0001.vcf
From grisha at ispol.com  Mon Dec 18 12:07:07 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:12 2004
Subject: [mod_python] A configuration question.
In-Reply-To: <HEELLMEIEBHKANGCLEELOEPNCBAA.peter.giannopoulos@gemplus.com>
Message-ID: <Pine.LNX.4.21.0012181206160.19353-100000@saturn.ispol.com>

That's a bug. For now just inser an "h" in the word Tread so that it reads
Thread :-)

Grisha

On Mon, 18 Dec 2000, Peter Giannopoulos wrote:

> Thanks, for the prompt reply. I managed to build and install 2.7 but now
> Apache can't load it...
> 
> Here is what I get as an erro message:
> 
> 
> " Cannot load /usr/local/apache/libexec/mod_python.so into server: undefined
> symbol: PyEval_RestoreTread "
> 
> I don't know enough about apache or mod_python to figure this one out by
> mysef right now. Any suggestions?
> 
> 
> 
> 
> 
> 
> 
> 
> 
> Peter Giannopoulos, Software Developer
> Gemplus Software,   Advanced Projects Group
> 
> Phone: +15147322434
> Fax:   +15147322401
> Gemplus Card International
> http://www.gemplus.com
> 
> 
> 
> 
> -----Original Message-----
> From: Gregory Trubetskoy [mailto:grisha@ispol.com]
> Sent: December 17, 2000 6:41 PM
> To: Peter Giannopoulos
> Cc: mod_python@modpython.org
> Subject: Re: [mod_python] A configuration question.
> 
> 
> 
> Check out the publisher handler in 2.7. I don't have an RPM for 2.7 yet,
> sorry, may be early next week, but you can get the source and compile it.
> 
> --
>   Gregory (Grisha) Trubetskoy
>        grisha@ispol.com
> 
> On Sun, 17 Dec 2000, Peter Giannopoulos wrote:
> 
> > Hi all,
> >
> > I'm new to the list/python/mod_python.
> >
> > I am having some difficulty setting up Apache 1.3.14 and mod_python (on
> > RH7.0) to work the way I want them to. In the tutorial there an
> explanation
> > as to how to get myscript.py to handle requests for .py files. This is
> fine
> > and it seems to work. But this unfortunately is not enough. I would like
> to
> > have the same functionality as traditional cgi handling or servlet
> handling.
> > By this I mean that I would like to Have apache/mod_python process ANY .py
> > files asked for WITHOUT having to set up and individual handler for each
> in
> > my configuration files for apache.
> >
> > Can anyone tell me how to do this?
> > Thanks in advance.
> >
> >
> >
> >
> >
> > Peter Giannopoulos, Software Developer
> > Gemplus Software,   Advanced Projects Group
> >
> > Phone: +15147322434
> > Fax:   +15147322401
> > Gemplus Card International
> > http://www.gemplus.com
> >
> >
> >
> 
> 


From Peter.GIANNOPOULOS at gemplus.com  Mon Dec 18 12:27:20 2000
From: Peter.GIANNOPOULOS at gemplus.com (Peter Giannopoulos)
Date: Fri Jan  9 21:52:12 2004
Subject: [mod_python] Problems loading mod_python 2.7
Message-ID: <HEELLMEIEBHKANGCLEELAEPPCBAA.peter.giannopoulos@gemplus.com>

I am having a hard time with mod_python 2.7:

Building and installing works fine but when  I try to start apache (1.3.14)
on RedHat 7.0 and get the following message:

" Cannot load /usr/local/apache/libexec/mod_python.so into server: undefined
symbol: PyEval_RestoreTread "

The reason I am using 2.7 is because I don't want to write a handler for
EVERY .py file in my webapp. Is there a way to do this with 2.6.4 (loads and
works just fine on the same machine)? Or does anyone know how to fix the
above mentioned error?


Thanks.


Peter Giannopoulos, Software Developer
Gemplus Software,   Advanced Projects Group

Phone: +15147322434
Fax:   +15147322401
Gemplus Card International
http://www.gemplus.com


-------------- next part --------------
A non-text attachment was scrubbed...
Name: Peter Giannopoulos.vcf
Type: text/x-vcard
Size: 613 bytes
Desc: not available
Url : http://mailman.modpython.org/pipermail/mod_python/attachments/20001218/74005798/PeterGiannopoulos-0001.vcf
From grisha at ispol.com  Mon Dec 18 16:40:39 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:12 2004
Subject: [mod_python] 2.7.1
Message-ID: <Pine.LNX.4.21.0012181638490.20344-100000@saturn.ispol.com>

We now have 2.7.1. There was a typo and some other things that wouldn't
work on win32 in 2.7.

There are also Python 1.5.2 and Python 2.0 DLL's, as well as a Red Hat RPM
available now.

enjoy

Grisha



From Peter.GIANNOPOULOS at gemplus.com  Mon Dec 18 17:22:37 2000
From: Peter.GIANNOPOULOS at gemplus.com (Peter Giannopoulos)
Date: Fri Jan  9 21:52:12 2004
Subject: [mod_python] Ok. One step closer now!
Message-ID: <HEELLMEIEBHKANGCLEELEEABCCAA.peter.giannopoulos@gemplus.com>

Ok. I corrected the syntax error in mod_python.c, rebuilt it and it now
loads but... :-(


I have the following in my httpd.conf

============================================================================
==============================
#This does not work I get : "The requested URL /say.py was not found on this
server."
# Yet the file does indeed exist and is exactly where specified "
<Directory /usr/local/apache/htdocs/webcard>
    AddHandler python-program .py
    PythonHandler mod_python.publisher
    PythonDebug On
</Directory>

#This does work
<Directory /usr/local/apache/htdocs/webcard/doc>
    AddHandler python-program .py
    PythonHandler mptest
    PythonDebug On
</Directory>

============================================================================
=============================


Again my specifics are: RedHat 7.0 , apache 1.3.14, python 2.0 and
mod_python 2.7
Any pointers?


Thanks in advance.




Peter Giannopoulos, Software Developer
Gemplus Software,   Advanced Projects Group

Phone: +15147322434
Fax:   +15147322401
Gemplus Card International
http://www.gemplus.com


-------------- next part --------------
A non-text attachment was scrubbed...
Name: Peter Giannopoulos.vcf
Type: text/x-vcard
Size: 613 bytes
Desc: not available
Url : http://mailman.modpython.org/pipermail/mod_python/attachments/20001218/fad79960/PeterGiannopoulos-0001.vcf
From ytc87 at cs.ccu.edu.tw  Wed Dec 20 00:24:46 2000
From: ytc87 at cs.ccu.edu.tw (Yi-Tai Chen)
Date: Fri Jan  9 21:52:12 2004
Subject: [mod_python] question about start apache with mod_python...
Message-ID: <20001220002446.A1623@mdklinux.idv.tw>

  I already load mod_python first... but it still core dump...
  I need to do this step to make it work...
  First, comment the lines about load mod_python, start apache, 
  then uncomment the lines load mod_python, restart apache...
  after this mod_python can work fine... 
  Can start apache with mod_python directly??
  My OS is Mandrake 7.2, Python 2.0, Apache 1.3.14 and
  Mod_python 2.7.1... thanks a lot...

From fschwiet at u.washington.edu  Tue Dec 19 16:13:59 2000
From: fschwiet at u.washington.edu (F. Schwieterman)
Date: Fri Jan  9 21:52:12 2004
Subject: [mod_python] installation woes: Redhat 7.0, mod_python 2.7.1, apache 1.3.12
Message-ID: <Pine.A41.4.21.0012191603150.79868-100000@dante22.u.washington.edu>

  Well I was hoping that a fresh Redhat install 7.0, followed by a fresh
install of Apache 1.3.12, followed by an install of mod_python 2.7.1 would
quickly get me running.  (I've spent a lot of time trying to get
mod_python to work in Mandrake to no avail).

  Anyhow, installation goes smooth but the when I run the test file as
'http://localhost/mod_python/python_handler.py' I get an internal server
error.  (this is after restarting the server appropriately)

  Anyhow, the contents of /var/log/httpd/error_log is  
[Tue Dec 19 15:37:28 2000] [notice] Apache/1.3.12 (Unix)  (Red
Hat/Linux) mod_python/2.7.1 Python/2.0 configured -- resuming normal
operations
[Tue Dec 19 15:37:36 2000] [error] [client 127.0.0.1] File does not
exist: /var/www/html/mod_python
'import site' failed; use -v for traceback
make_obcallback(): could not import mod_python.apache.
make_obcallback(): could not call init.
[Tue Dec 19 15:38:20 2000] [error] [client 127.0.0.1]
python_handler: make_obcallback returned no obCallBack!
'import site' failed; use -v for traceback
make_obcallback(): could not import mod_python.apache.
make_obcallback(): could not call init.
[Tue Dec 19 15:59:27 2000] [error] [client 127.0.0.1]
python_handler: make_obcallback returned no obCallBack!


  Since accessing the test file as
'file:/var/www/mod_python_test/pythonhandler.py' simply gives me the text
of the result, I think that mod_python isn't at all installed so that the
following httpd.conf lines are being ignored:
<IfModule mod_python.c>
  Alias /mod_python/ /var/www/mod_python_test/
  <Directory /var/www/mod_python_test>
    AllowOverride FileInfo
  </Directory>
</IfModule>




  Anyhow I'm not really a Linux user so if anyone had any advice on how I
can get mod_python working that'd be great.  It seems like these RPMs
should be useable from a fresh Redhat install..  If I don't get any
replies soon I'll contact the RPM author to see what I'm missing.



From victor at prodigy.net  Wed Dec 20 01:02:35 2000
From: victor at prodigy.net (Victor Muslin)
Date: Fri Jan  9 21:52:12 2004
Subject: [mod_python] Newbie question
Message-ID: <4.3.2.7.0.20001220005229.00b9b420@pop.prodigy.net>

I am running Apache 1.3.12 on WindowsNT 4.0 with Python 2.0.

Tried to configure it to use mod_python. Made the following relevant 
changes in httpd.conf:
DocumentRoot "g:/top/public/web/dev/htdocs"
<Directory "g:/top/public/web/dev/htdocs">
#
LoadModule python_module modules/mod_python.dll
#
PassEnv PYTHONPATH

<Directory "g:/top/public/web/dev/htdocs/test">
         AllowOverride All
         AddHandler python-program .py
         PythonHandler mptest
         PythonDebug On
         PythonPath 
"['e:/apps/python20/lib','g:/top/public/web/dev/htdocs/test']"
</Directory>

(Not sure whether PythonPath is necessary; it was not in instructions on 
the mod_python web site, but I saw it in some news group posting. In any 
case, the behavior is the same with or without it.)

Seems that the server loads mod_python fine, because when it comes up it 
says: Apache 1.3.12 (Win32) mod_python/2.6.3 Python/2.0 running...

As per instructions I created mptest.py and placed it into 
g:/top/public/web/dev/htdocs/test.
from mod_python import apache

def handler(req):
     req.send_http_header()
     req.write("Hello World!")
     return apache.OK

However, when I point my browser to it 
(http://127.0.0.1:8000/test/mptest.py) I get an Internal Server Error. The 
message in the error log says: [Wed Dec 20 00:45:56 2000] [error] [client 
209.247.38.37] python_handler: make_obcallback returned no obCallBack!

Any insight would be appreciated.

TIA

_______________________________________________________________________
Victor Muslin 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20001220/0b75ab5d/attachment-0001.htm
From hostmaster at bemarnet.es  Wed Dec 20 12:58:12 2000
From: hostmaster at bemarnet.es (Antonio Navarro Navarro)
Date: Fri Jan  9 21:52:12 2004
Subject: [mod_python] Problems with mod_python and Apache 1.3.14-3
Message-ID: <4.1.20001220125225.022faf00@pop3.bemarnet.es>

Hi All !

I have a RedHat 7.0 with Apache 1.3.14-3 installed from the RH Cd-Roms.
After installing the RPM for mod_python 2.7.1-1, the httpd shows the
following error and crashes:

[root@zeus /root]# httpd -x
[Wed Dec 20 12:55:01 2000] [warn] Loaded DSO modules/mod_python.so uses 
plain Apache 1.3 API, this module might crash under EAPI! (please recompile
it with -DEAPI)     

How can I bypass this error ? Do I need a RPM mod_python compiled with
-DEAPI ? If so, where can I find this ?

Can I generate a new RPM from the source mod_python ? How ?

Best regards,


Antonio Navarro Navarro
BemarNet Management
http://www.bemarnet.es
hostmaster@bemarnet.es
Tlf. +34-96-1656644
Fax. +34-96-1656514

From rriggs at doubleclick.net  Wed Dec 20 09:16:37 2000
From: rriggs at doubleclick.net (Rob Riggs)
Date: Fri Jan  9 21:52:12 2004
Subject: [mod_python] RH7 and mod_python and mod_php4 == apache crash
Message-ID: <3A40DB65.D03E9633@doubleclick.net>

Under RH7, it appears that one cannot have both mod_python and mod_php
installed. When both are installed and Apache is started from the init
script, it crashes. Note that running Apache without all of the
"-D HAVE_..." pieces that the init script passes to httpd seems to
prevent the crash.

Any ideas what is causing this?

--
Rob Riggs
Unix System Administrator
DoubleClick/DARTmail - Broomfield, CO




From grisha at ispol.com  Wed Dec 20 11:18:02 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:12 2004
Subject: [mod_python] Newbie question
In-Reply-To: <4.3.2.7.0.20001220005229.00b9b420@pop.prodigy.net>
Message-ID: <Pine.LNX.4.21.0012201000320.27015-100000@saturn.ispol.com>

I would verify where your mod_python PACKAGE is and make sure that it is
in PYTHONPATH. Not the PythonPath keyword you specified below, but the
sys.path (which can be altered via the PYTHONPATH variable prior to
starting apache) at the time when you start apache.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Wed, 20 Dec 2000, Victor Muslin wrote:

> I am running Apache 1.3.12 on WindowsNT 4.0 with Python 2.0.
> 
> Tried to configure it to use mod_python. Made the following relevant 
> changes in httpd.conf:
> DocumentRoot "g:/top/public/web/dev/htdocs"
> <Directory "g:/top/public/web/dev/htdocs">
> #
> LoadModule python_module modules/mod_python.dll
> #
> PassEnv PYTHONPATH
> 
> <Directory "g:/top/public/web/dev/htdocs/test">
>          AllowOverride All
>          AddHandler python-program .py
>          PythonHandler mptest
>          PythonDebug On
>          PythonPath 
> "['e:/apps/python20/lib','g:/top/public/web/dev/htdocs/test']"
> </Directory>
> 
> (Not sure whether PythonPath is necessary; it was not in instructions on 
> the mod_python web site, but I saw it in some news group posting. In any 
> case, the behavior is the same with or without it.)
> 
> Seems that the server loads mod_python fine, because when it comes up it 
> says: Apache 1.3.12 (Win32) mod_python/2.6.3 Python/2.0 running...
> 
> As per instructions I created mptest.py and placed it into 
> g:/top/public/web/dev/htdocs/test.
> from mod_python import apache
> 
> def handler(req):
>      req.send_http_header()
>      req.write("Hello World!")
>      return apache.OK
> 
> However, when I point my browser to it 
> (http://127.0.0.1:8000/test/mptest.py) I get an Internal Server Error. The 
> message in the error log says: [Wed Dec 20 00:45:56 2000] [error] [client 
> 209.247.38.37] python_handler: make_obcallback returned no obCallBack!
> 
> Any insight would be appreciated.
> 
> TIA
> 
> _______________________________________________________________________
> Victor Muslin 


From grisha at ispol.com  Wed Dec 20 11:36:19 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:12 2004
Subject: [mod_python] Problems with mod_python and Apache 1.3.14-3
In-Reply-To: <4.1.20001220125225.022faf00@pop3.bemarnet.es>
Message-ID: <Pine.LNX.4.21.0012201134130.27306-100000@saturn.ispol.com>

On Wed, 20 Dec 2000, Antonio Navarro Navarro wrote:

> [root@zeus /root]# httpd -x
> [Wed Dec 20 12:55:01 2000] [warn] Loaded DSO modules/mod_python.so uses 
> plain Apache 1.3 API, this module might crash under EAPI! (please recompile
> it with -DEAPI)     
> 
> How can I bypass this error ? 

You can recompile with -DEAPI, but I wouldn't worry about it.

> Can I generate a new RPM from the source mod_python ? How ?

http://www.modpython.org/dist/rpm/mod_python.spec
man rpm



Grisha


From hostmaster at bemarnet.es  Wed Dec 20 17:38:19 2000
From: hostmaster at bemarnet.es (Antonio Navarro Navarro)
Date: Fri Jan  9 21:52:12 2004
Subject: [mod_python] Problems with mod_python and Apache 1.3.14-3
In-Reply-To: <Pine.LNX.4.21.0012201134130.27306-100000@saturn.ispol.com>
References: <4.1.20001220125225.022faf00@pop3.bemarnet.es>
Message-ID: <4.1.20001220173800.02303100@pop3.bemarnet.es>

At 11.36 20/12/00 -0500, Gregory Trubetskoy wrote:

>On Wed, 20 Dec 2000, Antonio Navarro Navarro wrote:
>
>> [root@zeus /root]# httpd -x
>> [Wed Dec 20 12:55:01 2000] [warn] Loaded DSO modules/mod_python.so uses 
>> plain Apache 1.3 API, this module might crash under EAPI! (please recompile
>> it with -DEAPI)     
>> 
>> How can I bypass this error ? 
>
>You can recompile with -DEAPI, but I wouldn't worry about it.

Why ?

Regards,

Antonio Navarro Navarro
BemarNet Management
http://www.bemarnet.es
hostmaster@bemarnet.es
Tlf. +34-96-1656644
Fax. +34-96-1656514

From grisha at ispol.com  Wed Dec 20 13:03:50 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:12 2004
Subject: [mod_python] Problems with mod_python and Apache 1.3.14-3
In-Reply-To: <4.1.20001220173800.02303100@pop3.bemarnet.es>
Message-ID: <Pine.LNX.4.21.0012201302350.27306-100000@saturn.ispol.com>

I don't believe mod_python uses any of the API that is affected by
-DEAPI. I'll have to check to be 100% certain, but I've been getting this
warning on all my tests and have never seen a crash (at least the one
that I could relate to -DEAPI).


On Wed, 20 Dec 2000, Antonio Navarro Navarro wrote:

> At 11.36 20/12/00 -0500, Gregory Trubetskoy wrote:
> 
> >On Wed, 20 Dec 2000, Antonio Navarro Navarro wrote:
> >
> >> [root@zeus /root]# httpd -x
> >> [Wed Dec 20 12:55:01 2000] [warn] Loaded DSO modules/mod_python.so uses 
> >> plain Apache 1.3 API, this module might crash under EAPI! (please recompile
> >> it with -DEAPI)     
> >> 
> >> How can I bypass this error ? 
> >
> >You can recompile with -DEAPI, but I wouldn't worry about it.
> 
> Why ?
> 
> Regards,
> 
> Antonio Navarro Navarro
> BemarNet Management
> http://www.bemarnet.es
> hostmaster@bemarnet.es
> Tlf. +34-96-1656644
> Fax. +34-96-1656514
> 


From hostmaster at bemarnet.es  Wed Dec 20 19:21:42 2000
From: hostmaster at bemarnet.es (Antonio Navarro Navarro)
Date: Fri Jan  9 21:52:12 2004
Subject: [mod_python] Problems with mod_python and Apache 1.3.14-3
In-Reply-To: <Pine.LNX.4.21.0012201302350.27306-100000@saturn.ispol.com>
References: <4.1.20001220173800.02303100@pop3.bemarnet.es>
Message-ID: <4.1.20001220192013.02306210@pop3.bemarnet.es>

At 13.03 20/12/00 -0500, Gregory Trubetskoy wrote:

>I don't believe mod_python uses any of the API that is affected by
>-DEAPI. I'll have to check to be 100% certain, but I've been getting this
>warning on all my tests and have never seen a crash (at least the one
>that I could relate to -DEAPI).

Hi !

Well, the only thing I can say to you is that the downloaded i386.rpm
package dowsn't works for me.. I have downloaded the sources RPM, then I
have made a rpm -rebuild and the new rpm package works fine.

Regards,

Antonio Navarro Navarro
BemarNet Management
http://www.bemarnet.es
hostmaster@bemarnet.es
Tlf. +34-96-1656644
Fax. +34-96-1656514

From grisha at ispol.com  Wed Dec 20 15:48:26 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:12 2004
Subject: [mod_python] Problems with mod_python and Apache 1.3.14-3
In-Reply-To: <4.1.20001220192013.02306210@pop3.bemarnet.es>
Message-ID: <Pine.LNX.4.21.0012201543340.27862-100000@saturn.ispol.com>

May be it's be it's because I created them on Red Hat 2.6.

Perhaps I should take those RPM's off the site altogether, they seem to do
little good but confuse people and take up my time since there are
different variations of RedHat... (Mandrake?) I don't really have any
access to all those systems nor do I understand or like Red Hat enough to
be able to support those things.

Perhaps some Red Hat fan would like to volunteer to maintain the
RPM's? Your job would be to create all versions of RPM's every time there
is a release and perhaps answer questions about them on the list.

Grisha


On Wed, 20 Dec 2000, Antonio Navarro Navarro wrote:

> At 13.03 20/12/00 -0500, Gregory Trubetskoy wrote:
> 
> >I don't believe mod_python uses any of the API that is affected by
> >-DEAPI. I'll have to check to be 100% certain, but I've been getting this
> >warning on all my tests and have never seen a crash (at least the one
> >that I could relate to -DEAPI).
> 
> Hi !
> 
> Well, the only thing I can say to you is that the downloaded i386.rpm
> package dowsn't works for me.. I have downloaded the sources RPM, then I
> have made a rpm -rebuild and the new rpm package works fine.
> 
> Regards,
> 
> Antonio Navarro Navarro
> BemarNet Management
> http://www.bemarnet.es
> hostmaster@bemarnet.es
> Tlf. +34-96-1656644
> Fax. +34-96-1656514
> 


From benno at sesgroup.net  Thu Dec 21 12:06:05 2000
From: benno at sesgroup.net (Ben Leslie)
Date: Fri Jan  9 21:52:12 2004
Subject: [mod_python] RH7 and mod_python and mod_php4 == apache crash
In-Reply-To: <3A40DB65.D03E9633@doubleclick.net>; from rriggs@doubleclick.net on Wed, Dec 20, 2000 at 09:16:37AM -0700
References: <3A40DB65.D03E9633@doubleclick.net>
Message-ID: <20001221120605.A25968@sesgroup.net>

> Under RH7, it appears that one cannot have both mod_python and mod_php
> installed. When both are installed and Apache is started from the init
> script, it crashes. Note that running Apache without all of the
> "-D HAVE_..." pieces that the init script passes to httpd seems to
> prevent the crash.
> 
> Any ideas what is causing this?

Not sure if this will help but have you tried putting the Load Module 
directive for mod_python before any others. Sometimes mod_python insists
on being loaded first.

Hth,

Benno

From hostmaster at bemarnet.es  Thu Dec 21 09:06:39 2000
From: hostmaster at bemarnet.es (Antonio Navarro Navarro)
Date: Fri Jan  9 21:52:12 2004
Subject: [mod_python] Problems with mod_python and Apache 1.3.14-3
In-Reply-To: <Pine.LNX.4.21.0012201543340.27862-100000@saturn.ispol.com>
References: <4.1.20001220192013.02306210@pop3.bemarnet.es>
Message-ID: <4.1.20001221090457.016e8530@pop3.bemarnet.es>

At 15.48 20/12/00 -0500, Gregory Trubetskoy wrote:

>May be it's be it's because I created them on Red Hat 2.6.

6.2 I suppose... yes, this could be the problem.

>Perhaps I should take those RPM's off the site altogether, they seem to do
>little good but confuse people and take up my time since there are
>different variations of RedHat... (Mandrake?) I don't really have any
>access to all those systems nor do I understand or like Red Hat enough to
>be able to support those things.
>
>Perhaps some Red Hat fan would like to volunteer to maintain the
>RPM's? Your job would be to create all versions of RPM's every time there
>is a release and perhaps answer questions about them on the list.

I can create all version of RPM's from source in RedHat Linux, we are fans
of RH and allways have the latest version installed in our systems. Tell me
what can I do. :-)

Regards,

Antonio Navarro Navarro
BemarNet Management
http://www.bemarnet.es
hostmaster@bemarnet.es
Tlf. +34-96-1656644
Fax. +34-96-1656514

From arhiv at freemail.org.mk  Wed Dec 20 15:25:08 2000
From: arhiv at freemail.org.mk (Damjan)
Date: Fri Jan  9 21:52:12 2004
Subject: [mod_python] Small sugestion
In-Reply-To: <20001208195416.A552@localhost.localdomain>; from arhiv@freemail.org.mk on Fri, Dec 08, 2000 at 07:54:16PM +0100
References: <20001208195416.A552@localhost.localdomain>
Message-ID: <20001220152507.A1431@localhost.localdomain>

> Hi, Grisha.
> I've noticed a lot of complaints about that 'make_obcallback...' errors in the
> apache log. These are very often problems with the python path.
> So I sugest you add the following two lines in make_obcallback:
> (Here is a diff against 2.6.3)
> 
> --- mod_python.c.bak	Mon Dec  4 10:59:15 2000
> +++ mod_python.c	Fri Dec  8 19:47:41 2000
> @@ -479,6 +479,8 @@
>  
>      if (! ((m = PyImport_ImportModule(MODULENAME)))) {
>  	fprintf(stderr, "make_obcallback(): could not import %s.\n", MODULENAME);
> +	fprintf(stderr, "make_obcallback(): %s not found in %s.\n", MODULENAME, Py_GetPath());
> +	return NULL;
>      }
>      
>      if (! ((obCallBack = PyObject_CallMethod(m, INITFUNC, NULL)))) {
> 
> The 'return NULL;' is for the make_obcallback to return as soon as posible 
> (and there's no reason to try and call the method when the module was not
> loaded), and the apache log will be cleaner.

No comments on this ??


-- 
Damjan Georgievski		|           ?????? ???????????
Skopje, Macedonia		|           ??????, ??????????

From grisha at ispol.com  Thu Dec 21 09:55:48 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:12 2004
Subject: [mod_python] Small sugestion
In-Reply-To: <20001220152507.A1431@localhost.localdomain>
Message-ID: <Pine.LNX.4.21.0012210955070.30838-100000@saturn.ispol.com>

Sorry Damjan, somehow this one fell out of my task list. It's a good
suggestion, I'll add it in.

Grisha

On Wed, 20 Dec 2000, Damjan wrote:

> > Hi, Grisha.
> > I've noticed a lot of complaints about that 'make_obcallback...' errors in the
> > apache log. These are very often problems with the python path.
> > So I sugest you add the following two lines in make_obcallback:
> > (Here is a diff against 2.6.3)
> > 
> > --- mod_python.c.bak	Mon Dec  4 10:59:15 2000
> > +++ mod_python.c	Fri Dec  8 19:47:41 2000
> > @@ -479,6 +479,8 @@
> >  
> >      if (! ((m = PyImport_ImportModule(MODULENAME)))) {
> >  	fprintf(stderr, "make_obcallback(): could not import %s.\n", MODULENAME);
> > +	fprintf(stderr, "make_obcallback(): %s not found in %s.\n", MODULENAME, Py_GetPath());
> > +	return NULL;
> >      }
> >      
> >      if (! ((obCallBack = PyObject_CallMethod(m, INITFUNC, NULL)))) {
> > 
> > The 'return NULL;' is for the make_obcallback to return as soon as posible 
> > (and there's no reason to try and call the method when the module was not
> > loaded), and the apache log will be cleaner.
> 
> No comments on this ??
> 
> 
> -- 
> Damjan Georgievski		|           ???????????? ??????????????????????
> Skopje, Macedonia		|           ????????????, ????????????????????
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From rriggs at doubleclick.net  Thu Dec 21 08:30:31 2000
From: rriggs at doubleclick.net (Rob Riggs)
Date: Fri Jan  9 21:52:12 2004
Subject: [mod_python] RH7 and mod_python and mod_php4 == apache crash
References: <3A40DB65.D03E9633@doubleclick.net> <20001221120605.A25968@sesgroup.net>
Message-ID: <3A422217.996E8743@doubleclick.net>

Ben,

Thanks for the response. I am installing mod_python via the RPM (built
from the SRPM for Python 1.5.2), which appears to install correctly. The
RPM definitely puts the mod_python LoadModule directive first.


Ben Leslie wrote:

> > Under RH7, it appears that one cannot have both mod_python and mod_php
> > installed. When both are installed and Apache is started from the init
> > script, it crashes. Note that running Apache without all of the
> > "-D HAVE_..." pieces that the init script passes to httpd seems to
> > prevent the crash.
> >
> > Any ideas what is causing this?
>
> Not sure if this will help but have you tried putting the Load Module
> directive for mod_python before any others. Sometimes mod_python insists
> on being loaded first.
>
> Hth,
>
> Benno

--
Rob Riggs
Unix System Administrator
DoubleClick/DARTmail - Broomfield, CO




From djc at object-craft.com.au  Fri Dec 22 14:20:20 2000
From: djc at object-craft.com.au (Dave Cole)
Date: Fri Jan  9 21:52:13 2004
Subject: [mod_python] Yet another Python templating system
Message-ID: <m38zp93zwr.fsf@vole.object-craft.com.au>

A customer of ours has just given us permission to open source a set
of Python modules that we are developing as part of a contract with
them.

We started working on these modules a number of months ago, and they
are now in their third major revision.  The code was originally
developed to work in a CGI environment.  The modules are not just for
HTML template substitution, they are a toolkit for building session
based web applications with Python.

I have done some playing around to see how hard it would be to make
the modules work with mod_python.  The modules in their current form
need very little work to migrate to mod_python.

There is some introductory documentation at:

        http://www.object-craft.com.au/projects/fusion/intro.html

One of the things that is most likely to change in migrating to
mod_python is the application structure as described in the above
document.  Currently multiple application states / pages are
implemented in a single Python module.  This is good for small systems
like the applications we are developing for the customer, but become a
management problem for larger applications.  In the latest mod_python,
I noted with interest the new Publisher handler.  A modified or
extended version for this would be ideal for implementing each
application state as described in the intro document.

In making this toolkit more general, I would also like to be able to
build applications which are not session based.  The tree and paged
list tags both currently store state information in the session.

We are likely to release the code early in the new year once we have
finalised the license with our client.

- Dave

-- 
http://www.object-craft.com.au


From jrfsousa at esoterica.pt  Sat Dec 23 01:13:01 2000
From: jrfsousa at esoterica.pt (Jos Rui Faustino de Sousa)
Date: Fri Jan  9 21:52:13 2004
Subject: [mod_python] _apache again...
Message-ID: <000501c06c7d$7e586d10$fe00a8c0@krolik2piii1008>

Hi!

Has anyone solved the problem with the missing _apache module?

The test.py example does not work and I can not load _apache from the
python interpreter...

Where is this module?

Best regards
Jos Rui



From Lisa at mailgw1.netvision.net.il  Sat Dec 23 22:06:22 2000
From: Lisa at mailgw1.netvision.net.il (Lisa@mailgw1.netvision.net.il)
Date: Fri Jan  9 21:52:13 2004
Subject: [mod_python] new game try it
Message-ID: <200012232004.WAA28505@mailgw1.netvision.net.il>

An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20001223/2a1c4fbc/attachment-0001.htm
From grisha at ispol.com  Sat Dec 23 19:44:00 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:13 2004
Subject: [mod_python] _apache again...
In-Reply-To: <000501c06c7d$7e586d10$fe00a8c0@krolik2piii1008>
Message-ID: <Pine.LNX.4.21.0012231943070.6793-100000@saturn.ispol.com>

_apache only exists within apache - you shouldn't be able to load
mod_python scripts in standard intepreter for this reason.

Grisha

On Sat, 23 Dec 2000, Jos? Rui Faustino de Sousa wrote:

> Hi!
> 
> Has anyone solved the problem with the missing _apache module?
> 
> The test.py example does not work and I can not load _apache from the
> python interpreter...
> 
> Where is this module?
> 
> Best regards
> Jos? Rui
> 
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From arhiv at freemail.org.mk  Tue Dec 26 14:13:45 2000
From: arhiv at freemail.org.mk (Damjan)
Date: Fri Jan  9 21:52:13 2004
Subject: [mod_python] _apache again...
In-Reply-To: <Pine.LNX.4.21.0012231943070.6793-100000@saturn.ispol.com>; from grisha@ispol.com on Sat, Dec 23, 2000 at 07:44:00PM -0500
References: <000501c06c7d$7e586d10$fe00a8c0@krolik2piii1008> <Pine.LNX.4.21.0012231943070.6793-100000@saturn.ispol.com>
Message-ID: <20001226141345.A1395@localhost.localdomain>

> _apache only exists within apache - you shouldn't be able to load
> mod_python scripts in standard intepreter for this reason.
> 
> > Has anyone solved the problem with the missing _apache module?
> > 
> > The test.py example does not work and I can not load _apache from the
> > python interpreter...

And dont use a 'test.py' script, there is a python package named 'test' and
things becam ugly. Use mptest.py or modtest.py or something...


-- 
Damjan Georgievski		|           ?????? ???????????
Skopje, Macedonia		|           ??????, ??????????

From arhiv at freemail.org.mk  Wed Dec 27 13:50:27 2000
From: arhiv at freemail.org.mk (Damjan)
Date: Fri Jan  9 21:52:13 2004
Subject: [mod_python] Multiple handlers in a single directory
Message-ID: <20001227135027.A224@localhost.localdomain>

I want to have multiple Python handlers in one directory, but each handling a
different type of file. Is there a way I can do this?

I imagined it could be done with a directive like this:
...
PythonAddHandler mod_python.publisher .py
PythonAddHandler myscripts.handler1 .pyml
PythonAddHandler myscripts.handler2 .html
...

How hard would it be to add a directive ike this?

Thanks.

-- 
Damjan Georgievski		|           ?????? ???????????
Skopje, Macedonia		|           ??????, ??????????

From grisha at ispol.com  Wed Dec 27 09:56:47 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:13 2004
Subject: [mod_python] Multiple handlers in a single directory
In-Reply-To: <20001227135027.A224@localhost.localdomain>
Message-ID: <Pine.LNX.4.21.0012270954460.28943-100000@saturn.ispol.com>

To be consistent, I would have to add a directive like this for every
phase....

A more or less simple alternative would be to write a handler that invokes
other handlers based on file extension.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Wed, 27 Dec 2000, Damjan wrote:

> I want to have multiple Python handlers in one directory, but each handling a
> different type of file. Is there a way I can do this?
> 
> I imagined it could be done with a directive like this:
> ...
> PythonAddHandler mod_python.publisher .py
> PythonAddHandler myscripts.handler1 .pyml
> PythonAddHandler myscripts.handler2 .html
> ...
> 
> How hard would it be to add a directive ike this?
> 
> Thanks.
> 
> -- 
> Damjan Georgievski		|           ???????????? ??????????????????????
> Skopje, Macedonia		|           ????????????, ????????????????????
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From jmcbray at bertrand.carcosa.net  Wed Dec 27 13:22:23 2000
From: jmcbray at bertrand.carcosa.net (Jason F. McBrayer)
Date: Fri Jan  9 21:52:13 2004
Subject: [mod_python] Multiple handlers in a single directory
In-Reply-To: <Pine.LNX.4.21.0012270954460.28943-100000@saturn.ispol.com>; from grisha@ispol.com on Wed, Dec 27, 2000 at 09:56:47AM -0500
References: <20001227135027.A224@localhost.localdomain> <Pine.LNX.4.21.0012270954460.28943-100000@saturn.ispol.com>
Message-ID: <20001227132223.A19070@bertrand.carcosa.net>

On Wed, Dec 27, 2000 at 09:56:47AM -0500, Gregory Trubetskoy wrote:
> 
> To be consistent, I would have to add a directive like this for every
> phase....
> 
> A more or less simple alternative would be to write a handler that invokes
> other handlers based on file extension.

This is what I'm doing currently.  It seems to be the best solution,
and it has its own kind of logic to it -- once you're in the handler,
you've handed things off to Python, so you might as well do all the
processing in Python instead of in the apache conf file.

-- 
+----------------------------------------------------------------+
| Jason F. McBrayer                         jmcbray@carcosa.net  |
| The scalloped tatters of the King in Yellow must hide Yhtill   |
| forever.                    R.W. Chambers _The King in Yellow_ |

From Mads at Kiilerich.com  Thu Dec 28 14:19:02 2000
From: Mads at Kiilerich.com (Mads Kiilerich)
Date: Fri Jan  9 21:52:13 2004
Subject: [mod_python] rpm-packaging and DESTDIR
Message-ID: <Pine.LNX.4.21.0012281410450.926-200000@localhost>

Hello,

I'm hacking the RedHat RPM specs.

First, I've found that 
	./configure --prefix=something 
has no effect at all. It should either be fixed or removed from
the documentation.

For RPM packaging installation in another directory than the one
compiled for is essential. Thus I suggest the attached patch. It
causes any installation to be done below $DESTDIR . If no
DESTDIR is defined in the environment it has no effect.

Also, could you please put the spec used to build rpms in cvs?
And could it be in the root, ie as mod_python/mod_python.spec?
(That makes rpm-building even easier; given a mod_python tar the
rpm's can be build with
	rpm -ta src/mod_python-2.7.1.tar.gz
)

I have some enhancements to the spec as well - but I'll sit on
them until the spec is in cvs.

Happy Newyear from

-- 
Mads Kiilerich          Sys.Adm. Cand.Polyt. Stud.Bibel.
Mads@Kiilerich.com      Tel. +45 26 20 07 73
Fxvqrevx! Fiva! Qrg re cvffrgneiryvtg ng xelcgrer zrq EBG-13.                   
-------------- next part --------------
Index: Makefile.in
===================================================================
RCS file: /cvsroot/modpython/mod_python/Makefile.in,v
retrieving revision 1.7
diff -u -u -r1.7 Makefile.in
--- Makefile.in	2000/12/06 03:05:37	1.7
+++ Makefile.in	2000/12/28 13:05:01
@@ -82,7 +82,7 @@
 	@echo
 	@echo "Performing DSO installation."
 	@echo
-	$(INSTALL) src/mod_python.so $(LIBEXECDIR)
+	$(INSTALL) src/mod_python.so $(DESTDIR)$(LIBEXECDIR)
 	@$(MAKE) install_py_lib
 	@echo
 	@echo "Now don't forget to edit your main config and add"
@@ -114,12 +114,12 @@
 	@echo
 
 install_py_lib:
-	$(INSTALL) -d $(PY_STD_LIB)/site-packages/mod_python
+	$(INSTALL) -d $(DESTDIR)$(PY_STD_LIB)/site-packages/mod_python
 	@for f in `ls lib/python/mod_python/*.py`; \
 	do \
-		$(INSTALL) $$f $(PY_STD_LIB)/site-packages/mod_python; \
+		$(INSTALL) $$f $(DESTDIR)$(PY_STD_LIB)/site-packages/mod_python; \
 	done
-	python $(PY_STD_LIB)/compileall.py $(PY_STD_LIB)/site-packages/mod_python
+	python $(PY_STD_LIB)/compileall.py $(DESTDIR)$(PY_STD_LIB)/site-packages/mod_python
 
 clean:
 	cd src && $(MAKE) clean
From Mads at Kiilerich.com  Thu Dec 28 14:25:05 2000
From: Mads at Kiilerich.com (Mads Kiilerich)
Date: Fri Jan  9 21:52:13 2004
Subject: [mod_python] -DEAPI fix
Message-ID: <Pine.LNX.4.21.0012281422310.926-200000@localhost>

Hello,

I've got the -DEAPI warning using mod_python with RedHat apache.
As mentioned on this list it shouldn't matter, but it is
annoying.

The attached patch fixes it for me. I'm not sure it is
TheRightWay to do it. Should everyone compile with -DEAPI? Or
should configure (con)figure it out? Should the OPT flag be
used? Or another introduced?

Regards,

-- 
Mads Kiilerich          Sys.Adm. Cand.Polyt. Stud.Bibel.
Mads@Kiilerich.com      Tel. +45 26 20 07 73
Fxvqrevx! Fiva! Qrg re cvffrgneiryvtg ng xelcgrer zrq EBG-13.                   
-------------- next part --------------
Index: src/Makefile.in
===================================================================
RCS file: /cvsroot/modpython/mod_python/src/Makefile.in,v
retrieving revision 1.7
diff -u -r1.7 Makefile.in
--- src/Makefile.in	2000/12/06 03:05:37	1.7
+++ src/Makefile.in	2000/12/28 13:17:06
@@ -52,7 +52,7 @@
 INCLUDES=@INCLUDES@
 LIBS=@LIBS@
 LDFLAGS=@LDFLAGS@
-OPT=
+OPT=-DEAPI
 CFLAGS=$(OPT) $(INCLUDES) 
 srcdir=.
 
@@ -76,7 +76,7 @@
 	@echo
 	@echo 'Compiling for DSO. For static, do "make static"'
 	@echo
-	$(APXS) $(INCLUDES) -c $(OBJS) $(LIBS)
+	$(APXS) $(OPT) $(INCLUDES) -c $(OBJS) $(LIBS)
 	@echo
 	@echo 'Now su and make install'
 	@echo '  (or, if you only want to perform a partial install,'
@@ -114,4 +114,4 @@
 serverobject.o: serverobject.c
 connobject.o: connobject.c
 
-# DO NOT DELETE THIS LINE
\ No newline at end of file
+# DO NOT DELETE THIS LINE
From Mads at Kiilerich.com  Thu Dec 28 14:41:33 2000
From: Mads at Kiilerich.com (Mads Kiilerich)
Date: Fri Jan  9 21:52:13 2004
Subject: [mod_python] doc-html and mkhowto
Message-ID: <Pine.LNX.4.21.0012281438480.926-100000@localhost>

Hello,

building html docs seems to require and mkhowto. 

Am I right that
mkhowto requires python 2.0? 

Still mod_python itself is only for
python <2.0?

Regards,
-- 
Mads Kiilerich          Sys.Adm. Cand.Polyt. Stud.Bibel.
Mads@Kiilerich.com      Tel. +45 26 20 07 73
Fxvqrevx! Fiva! Qrg re cvffrgneiryvtg ng xelcgrer zrq EBG-13.                   


From rsalz at CaveoSystems.com  Thu Dec 28 10:46:08 2000
From: rsalz at CaveoSystems.com (rsalz@CaveoSystems.com)
Date: Fri Jan  9 21:52:13 2004
Subject: [mod_python] -DEAPI fix
Message-ID: <200012281546.KAA26868@os390.caveosystems.com>

-


The -DEAPI flag adds extra fields to the end of the Apache "module"
structure.  If you compile some code with that flag, and some code
without that f lag, then you can -- and almost always will -- get some
modules that have bogus crap instead of NULL pointers.  This will
cause things to crash.

You *might* get lucky on some platforms sometime.  Do not count on it.

Always use -DEAPI or never do.  Do not mix.
	/r$

From grisha at ispol.com  Thu Dec 28 10:43:28 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:13 2004
Subject: [mod_python] doc-html and mkhowto
In-Reply-To: <Pine.LNX.4.21.0012281438480.926-100000@localhost>
Message-ID: <Pine.LNX.4.21.0012281038480.32595-100000@saturn.ispol.com>

On Thu, 28 Dec 2000, Mads Kiilerich wrote:

> Hello,
> 
> building html docs seems to require and mkhowto. 
> 
> Am I right that
> mkhowto requires python 2.0? 

In 1.5.2 it is distributed as part of the doc source distribution. It
requires a whole lot more than mkhowto, however. It needs a whole bunch of
TeX and LaTeX stuff and some other tools.

> Still mod_python itself is only for python <2.0?

mod_python is for 2.0 or 1.5.2 equally :-) I've been using 2.0 lately.

http://www.modpython.org/live/mod_python-2.7.1/doc-html/inst-prerequisites.html

Grisha


From grisha at ispol.com  Thu Dec 28 10:37:13 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:13 2004
Subject: [mod_python] rpm-packaging and DESTDIR
In-Reply-To: <Pine.LNX.4.21.0012281410450.926-200000@localhost>
Message-ID: <Pine.LNX.4.21.0012281020230.32595-100000@saturn.ispol.com>

On Thu, 28 Dec 2000, Mads Kiilerich wrote:

> Hello,
> 
> I'm hacking the RedHat RPM specs.
> 
> First, I've found that 
> 	./configure --prefix=something 
> has no effect at all. 

That is correct. There are two prefixes that depend on two things - the
Python location and the Apache location, both of which are predetermined.

> It should either be fixed or removed from the documentation.

I don't think it is in the documentation.

> For RPM packaging installation in another directory than the one
> compiled for is essential. Thus I suggest the attached patch. It
> causes any installation to be done below $DESTDIR . If no
> DESTDIR is defined in the environment it has no effect.

Antonio Navarro Navarro <hostmaster@bemarnet.es> has volunteered to create
RPM's, check with him. 

I would need some more convincing to add the mod_python.spec to cvs - I
really don't see why RedHat support whould be part of mod_python core
project. If we're going to maintin RPM's, then why not Debian packages,
sun packages, FreeBSD ports, Windows InstallShield, etc, etc.

I'm not saying these things are bad, I'm just saying they are outside the
scope of mod_python core, which is Apache/Python integration. At best
RPM's fall in the category of "contrib" stuff - if someone wants to
maintin them that is great, but I do not want to create the impression
that when a user downloads a mod_python.tgz that I somehow vouch for the
RedHat compatibility - because I don't. Not anymore than any other OS or
Linux distribution.

As far as I know, Debian already has a mod_python package that they
maintain under their CVS, FreeBSD has a mod_python port that is maintained
in the FreeBSD ports CVS. RPM support initiative should come from RedHat
if they find mod_python useful. Until that day, I'm willing to support a
spec and make RPM's downloadable, but I don't want RPM support to be part
of mod_python.

I hope I'm making sense here :-)

Grisha



From emm at scriptdigital.com  Thu Dec 28 12:07:38 2000
From: emm at scriptdigital.com (Emmanuel. M. Decarie)
Date: Fri Jan  9 21:52:13 2004
Subject: [mod_python] Publisher Handler
Message-ID: <v04220803b6711ecc58ee@[192.168.0.2]>

Hello,

I just tried the publisher handler with the "hello.py" example found 
in the manual:

>
>""" Publisher example """
>
>def say(req, what="NOTHING"):
>     return "I am saying %s" % what

http://www.modpython.org/live/mod_python-2.7.1/doc-html/hand-pub-intro.html

Its working fine. But I didn't find a way to send  some HTML. The 
publisher handler seems to always return "Content-Type: text/plain". 
How can I tell it  to return "Content-Type: text/html".

When I put at the top of the file "hello.py" this line:

from mod_python import apache

it look like that I can read the req object, but that I can't set values.

For example, If I rewrite the hello.py example:

from mod_python import apache

def say(req, what="NOTHING"):
	req.content_type = "text/html"
	req.send_http_header ()
	req.write (what)
	return apache.OK

And then try to access /hello.py/say, Apache is not serving the page.

I'm fairly new to Python, Apache and mod_python, so its a lot to swallow.

I'm using FreeBSD 4.0 and mod_python 2.7.1 and Python 2.0.

I like the way the publisher handler work, but I really need to have 
control on the HTTP headers returned by mod_python to be able to 
choose to publish plain text, html, or do redirection, send 404 code 
and so on.

TIA

Cheers

-Emmanuel
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Emmanuel D?carie - Consultant
   Programmation pour le Web - Programming for the Web
   UserLand Frontier  - Perl - JavaScript - AppleScript - HTML - XML
   http://www.scriptdigital.com

---> The Frontier Newbie Toolbox:
   <http://www.scriptdigital.com/fnt/frontierNewbieToolbox.html>

From grisha at ispol.com  Thu Dec 28 13:15:08 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:13 2004
Subject: [mod_python] Publisher Handler
In-Reply-To: <v04220803b6711ecc58ee@[192.168.0.2]>
Message-ID: <Pine.LNX.4.21.0012281312220.549-100000@saturn.ispol.com>

Try this:

def say(req, what="NOTHING"):
	req.content_type = "text/html"
        return "I am saying %s" % what
 

This is sort of a "bug"...  The publisher handler attempts to guess the
content_type, but *only* it isn't set already. Depending on your
configuration, Apache may take the liberty of setting it (in
mod_negotation for example). So far I haven't figured out a clean solution
to this.

Grisha
	

On Thu, 28 Dec 2000, Emmanuel. M. Decarie wrote:

> Hello,
> 
> I just tried the publisher handler with the "hello.py" example found 
> in the manual:
> 
> >
> >""" Publisher example """
> >
> >def say(req, what="NOTHING"):
> >     return "I am saying %s" % what
> 
> http://www.modpython.org/live/mod_python-2.7.1/doc-html/hand-pub-intro.html
> 
> Its working fine. But I didn't find a way to send  some HTML. The 
> publisher handler seems to always return "Content-Type: text/plain". 
> How can I tell it  to return "Content-Type: text/html".
> 
> When I put at the top of the file "hello.py" this line:
> 
> from mod_python import apache
> 
> it look like that I can read the req object, but that I can't set values.
> 
> For example, If I rewrite the hello.py example:
> 
> from mod_python import apache
> 
> def say(req, what="NOTHING"):
> 	req.content_type = "text/html"
> 	req.send_http_header ()
> 	req.write (what)
> 	return apache.OK
> 
> And then try to access /hello.py/say, Apache is not serving the page.
> 
> I'm fairly new to Python, Apache and mod_python, so its a lot to swallow.
> 
> I'm using FreeBSD 4.0 and mod_python 2.7.1 and Python 2.0.
> 
> I like the way the publisher handler work, but I really need to have 
> control on the HTTP headers returned by mod_python to be able to 
> choose to publish plain text, html, or do redirection, send 404 code 
> and so on.
> 
> TIA
> 
> Cheers
> 
> -Emmanuel
> ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
> Emmanuel D?carie - Consultant
>    Programmation pour le Web - Programming for the Web
>    UserLand Frontier  - Perl - JavaScript - AppleScript - HTML - XML
>    http://www.scriptdigital.com
> 
> ---> The Frontier Newbie Toolbox:
>    <http://www.scriptdigital.com/fnt/frontierNewbieToolbox.html>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From Mads at Kiilerich.com  Thu Dec 28 20:36:33 2000
From: Mads at Kiilerich.com (Mads Kiilerich)
Date: Fri Jan  9 21:52:13 2004
Subject: [mod_python] rpm-packaging and DESTDIR
In-Reply-To: <Pine.LNX.4.21.0012281020230.32595-100000@saturn.ispol.com>
Message-ID: <Pine.LNX.4.21.0012282026060.926-100000@localhost>

Today I got mail from Gregory Trubetskoy:

> > It should either be fixed or removed from the documentation.
> 
> I don't think it is in the documentation.

It is in ./configure --help IIRC.

> > For RPM packaging installation in another directory than the one
> > compiled for is essential. Thus I suggest the attached patch. It
> > causes any installation to be done below $DESTDIR . If no
> > DESTDIR is defined in the environment it has no effect.
> 
> Antonio Navarro Navarro <hostmaster@bemarnet.es> has volunteered to create
> RPM's, check with him. 

OK. But the patch I sent (or some kind of working --prefix) is
very usefull for any kind of packaging and non-root-compilation.
Thus I still suggest the patch.

...
> As far as I know, Debian already has a mod_python package that they
> maintain under their CVS, FreeBSD has a mod_python port that is maintained
> in the FreeBSD ports CVS. RPM support initiative should come from RedHat
> if they find mod_python useful. Until that day, I'm willing to support a
> spec and make RPM's downloadable, but I don't want RPM support to be part
> of mod_python.

OK. But IMHO: In order to make sure that cvs-mod_python works
under any OS the compilation and packaging for them should be
supplied in the cvs/tar. You do use configure scripts for a
reason, right? 

That's my opinion - and as it is TheRightOne you should have the
same! ;)

Roger and over,

-- 
Mads Kiilerich          Sys.Adm. Cand.Polyt. Stud.Bibel.
Mads@Kiilerich.com      Tel. +45 26 20 07 73
Fxvqrevx! Fiva! Qrg re cvffrgneiryvtg ng xelcgrer zrq EBG-13.                   


From bbhaydon at bigpond.com  Sun Dec 31 17:19:30 2000
From: bbhaydon at bigpond.com (Brett Haydon)
Date: Fri Jan  9 21:52:13 2004
Subject: [mod_python] Threads in mod_python - Publisher Handler (Just starting)
Message-ID: <NCBBKMABOKFCDLPIKKGIEEJBCCAA.bbhaydon@bigpond.com>

I'm just trying to come to grips with the
excellent Publisher Handler (on Win32).

I thought function calls are executed sequentially,
(ie browser1 executes func1 then browser2 exec func1)
but testing some code, (trimmed slightly):

cache{}
def func(req):

    while 1:
        cache[users.cookie] = [random.random()]

    return never

it appears that calling func() in multiple browsers
will start a thread in each of them that goes on until the
server is stopped.

I am trying to work out the implications for calls that
bump into each other (especially database calls) that share
objects. A quick test by starting some threads in a script
that call the same URLs (which have database functions)
appears to confirm this, in that in six threads up to three of them
apparantly produce a blank page.

Has anyone come up with strategies to deal with this.

regards,

Brett


From jsliv at jslove.org  Sun Dec 31 14:43:34 2000
From: jsliv at jslove.org (Jay Love)
Date: Fri Jan  9 21:52:13 2004
Subject: [mod_python] server.register_cleanup
Message-ID: <3A4F8C66.4000705@jslove.org>

Hi folks.

I'm having trouble using this function.  It gives me an error and tells 
me that the first argument must be a request object, which it is.

Here's the offending line, from the top of my handler function:

handler(self, req):
	res.server.register_callback(req, self.cleanup_func)

Any thoughts on what's going wrong?

I'm using Apache 1.3.14, RH 7.0, mod_python 2.6.3

Jay


From grisha at ispol.com  Sun Dec 31 15:21:52 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:13 2004
Subject: [mod_python] server.register_cleanup
In-Reply-To: <3A4F8C66.4000705@jslove.org>
Message-ID: <Pine.LNX.4.21.0012311519480.21119-100000@saturn.ispol.com>

this is a sideffect of a bug in 2.6.3, which is fixed in 2.6.4

I recommend upgrading to 2.7.1

Grisha

On Sun, 31 Dec 2000, Jay Love wrote:

> 
> Hi folks.
> 
> I'm having trouble using this function.  It gives me an error and tells 
> me that the first argument must be a request object, which it is.
> 
> Here's the offending line, from the top of my handler function:
> 
> handler(self, req):
> 	res.server.register_callback(req, self.cleanup_func)
> 
> Any thoughts on what's going wrong?
> 
> I'm using Apache 1.3.14, RH 7.0, mod_python 2.6.3
> 
> Jay
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From jsliv at jslove.org  Sun Dec 31 15:33:28 2000
From: jsliv at jslove.org (Jay Love)
Date: Fri Jan  9 21:52:13 2004
Subject: [mod_python] server.register_cleanup
References: <Pine.LNX.4.21.0012311519480.21119-100000@saturn.ispol.com>
Message-ID: <3A4F9818.2020209@jslove.org>

I did, and it still happens.  Are you sure it's fixed?

Jay


Gregory Trubetskoy wrote:

> this is a sideffect of a bug in 2.6.3, which is fixed in 2.6.4
> 
> I recommend upgrading to 2.7.1
> 
> Grisha
> 
> On Sun, 31 Dec 2000, Jay Love wrote:
> 
>> Hi folks.
>> 
>> I'm having trouble using this function.  It gives me an error and tells 
>> me that the first argument must be a request object, which it is.
>> 
>> Here's the offending line, from the top of my handler function:
>> 
>> handler(self, req):
>> 	res.server.register_callback(req, self.cleanup_func)
>> 
>> Any thoughts on what's going wrong?
>> 
>> I'm using Apache 1.3.14, RH 7.0, mod_python 2.6.3
>> 
>> Jay
>> 
>> _______________________________________________
>> Mod_python mailing list
>> Mod_python@modpython.org
>> http://www.modpython.org/mailman/listinfo/mod_python
>> 



From grisha at ispol.com  Sun Dec 31 15:39:37 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:13 2004
Subject: [mod_python] server.register_cleanup
In-Reply-To: <3A4F9818.2020209@jslove.org>
Message-ID: <Pine.LNX.4.21.0012311537040.21119-100000@saturn.ispol.com>

Ah, I see what's going on. It expecting a different kind of request
object, the old built-in one, which is no req._req.

try this:

	req.server.register_cleanup(req._req, ...)

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Sun, 31 Dec 2000, Jay Love wrote:

> 
> I did, and it still happens.  Are you sure it's fixed?
> 
> Jay
> 
> 
> Gregory Trubetskoy wrote:
> 
> > this is a sideffect of a bug in 2.6.3, which is fixed in 2.6.4
> > 
> > I recommend upgrading to 2.7.1
> > 
> > Grisha
> > 
> > On Sun, 31 Dec 2000, Jay Love wrote:
> > 
> >> Hi folks.
> >> 
> >> I'm having trouble using this function.  It gives me an error and tells 
> >> me that the first argument must be a request object, which it is.
> >> 
> >> Here's the offending line, from the top of my handler function:
> >> 
> >> handler(self, req):
> >> 	res.server.register_callback(req, self.cleanup_func)
> >> 
> >> Any thoughts on what's going wrong?
> >> 
> >> I'm using Apache 1.3.14, RH 7.0, mod_python 2.6.3
> >> 
> >> Jay
> >> 
> >> _______________________________________________
> >> Mod_python mailing list
> >> Mod_python@modpython.org
> >> http://www.modpython.org/mailman/listinfo/mod_python
> >> 
> 
> 


From jsliv at jslove.org  Sun Dec 31 15:52:18 2000
From: jsliv at jslove.org (Jay Love)
Date: Fri Jan  9 21:52:13 2004
Subject: [mod_python] server.register_cleanup
References: <Pine.LNX.4.21.0012311537040.21119-100000@saturn.ispol.com>
Message-ID: <3A4F9C82.6040303@jslove.org>

That got it.

Thanks-

Jay


Gregory Trubetskoy wrote:

> Ah, I see what's going on. It expecting a different kind of request
> object, the old built-in one, which is no req._req.
> 
> try this:
> 
> 	req.server.register_cleanup(req._req, ...)
> 
> --
>   Gregory (Grisha) Trubetskoy
>        grisha@ispol.com
> 
> On Sun, 31 Dec 2000, Jay Love wrote:
> 
>> I did, and it still happens.  Are you sure it's fixed?
>> 
>> Jay
>> 
>> 
>> Gregory Trubetskoy wrote:
>> 
>>> this is a sideffect of a bug in 2.6.3, which is fixed in 2.6.4
>>> 
>>> I recommend upgrading to 2.7.1
>>> 
>>> Grisha
>>> 
>>> On Sun, 31 Dec 2000, Jay Love wrote:
>>> 
>>>> Hi folks.
>>>> 
>>>> I'm having trouble using this function.  It gives me an error and tells 
>>>> me that the first argument must be a request object, which it is.
>>>> 
>>>> Here's the offending line, from the top of my handler function:
>>>> 
>>>> handler(self, req):
>>>> 	res.server.register_callback(req, self.cleanup_func)
>>>> 
>>>> Any thoughts on what's going wrong?
>>>> 
>>>> I'm using Apache 1.3.14, RH 7.0, mod_python 2.6.3
>>>> 
>>>> Jay
>>>> 
>>>> _______________________________________________
>>>> Mod_python mailing list
>>>> Mod_python@modpython.org
>>>> http://www.modpython.org/mailman/listinfo/mod_python
>>>> 



From Lisa  Mon Dec  4 22:18:18 2000
From: Lisa (Lisa)
Date: Fri Jan  9 21:58:42 2004
Subject: [mod_python] RE: Answer To Your Question.
Message-ID: <200012042025.UAA03461@mercury.ispol.com>

An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20001204/e8402cf1/attachment-0002.htm
From arhiv at freemail.org.mk  Mon Dec  4 22:25:25 2000
From: arhiv at freemail.org.mk (Damjan)
Date: Fri Jan  9 21:58:43 2004
Subject: [mod_python] apache.send_file()
Message-ID: <Pine.LNX.4.30.0012042218140.460-100000@localhost.localdomain>

Is there a point in having something like
apache.send_file(PyObject * file) or apache.send_file(char * filename)

Of course I can do this with:
	f = open(...
	buf = f.read()
	req.write(buf)
but perhaps using apache calls will be faster.

-- 
Damjan Georgievski		|           ?????? ???????????
Skopje, Macedonia		|           ??????, ??????????


From grisha at ispol.com  Tue Dec  5 11:42:55 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:43 2004
Subject: [mod_python] apache.send_file()
In-Reply-To: <Pine.LNX.4.30.0012042218140.460-100000@localhost.localdomain>
Message-ID: <Pine.LNX.4.21.0012051133220.16800-100000@saturn.ispol.com>

Yeah, it will be faster.... (req.write(f.read()) is going to be pretty
damn fast too) I didn't bother implementing that one since I figured 99.9%
of the content will be dynamically generated. I'll see if I can implement
something in the next version.

Grisha

On Mon, 4 Dec 2000, Damjan wrote:

> Is there a point in having something like
> apache.send_file(PyObject * file) or apache.send_file(char * filename)
> 
> Of course I can do this with:
> 	f = open(...
> 	buf = f.read()
> 	req.write(buf)
> but perhaps using apache calls will be faster.
> 
> -- 
> Damjan Georgievski		|           ???????????? ??????????????????????
> Skopje, Macedonia		|           ????????????, ????????????????????
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From jb4mt at yahoo.com  Tue Dec  5 10:10:09 2000
From: jb4mt at yahoo.com (George Jempty)
Date: Fri Jan  9 21:58:43 2004
Subject: [mod_python] Site redesign
Message-ID: <20001205181009.26474.qmail@web3904.mail.yahoo.com>

I just subscribed to this list because I'm having
problems getting mod_python to work on my Windows 2000
system.  I plan on digging a little deeper on my own
first, but in the event I need to come back here I'm
trying to establish some good karma by working on the
site design as requested on the home page.  You can
see what I've come up with at:

http://webfielding.com/mod_python/

It's by no means complete but I think should give an
idea of the possiblities for organizing the site.  And
as for color, at first I thought the plum-colored
banner was too garish, and tried "thistle" instead,
but I'm liking plum more and more!

However, you can see the page with a thistle-colored
banner at:

http://webfielding.com/mod_python/thistle.htm

I'll look forward to everyone's feedback!

George

__________________________________________________
Do You Yahoo!?
Yahoo! Shopping - Thousands of Stores. Millions of Products.
http://shopping.yahoo.com/

From grisha at ispol.com  Tue Dec  5 16:03:59 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:43 2004
Subject: [mod_python] Site redesign
In-Reply-To: <20001205181009.26474.qmail@web3904.mail.yahoo.com>
Message-ID: <Pine.LNX.4.21.0012051602010.16800-100000@saturn.ispol.com>

Thanks George, this looks good I might put it out on the main site.

This sort of reorganization is long overdue. I've got another submission
of a site deisgn that I'm still holding on to partly because I don't have
time to put it out, partly because I'm hoping something better will come
around...

P.S. One comment - I'm not a big fan of frames....

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Tue, 5 Dec 2000, George Jempty wrote:

> I just subscribed to this list because I'm having
> problems getting mod_python to work on my Windows 2000
> system.  I plan on digging a little deeper on my own
> first, but in the event I need to come back here I'm
> trying to establish some good karma by working on the
> site design as requested on the home page.  You can
> see what I've come up with at:
> 
> http://webfielding.com/mod_python/
> 
> It's by no means complete but I think should give an
> idea of the possiblities for organizing the site.  And
> as for color, at first I thought the plum-colored
> banner was too garish, and tried "thistle" instead,
> but I'm liking plum more and more!
> 
> However, you can see the page with a thistle-colored
> banner at:
> 
> http://webfielding.com/mod_python/thistle.htm
> 
> I'll look forward to everyone's feedback!
> 
> George
> 
> __________________________________________________
> Do You Yahoo!?
> Yahoo! Shopping - Thousands of Stores. Millions of Products.
> http://shopping.yahoo.com/
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From jb4mt at yahoo.com  Tue Dec  5 14:50:47 2000
From: jb4mt at yahoo.com (George Jempty)
Date: Fri Jan  9 21:58:43 2004
Subject: [mod_python] Can't configure under Windows NT and Windows 2000
Message-ID: <20001205225047.17197.qmail@web3901.mail.yahoo.com>

When following the Windows installation instructions
for mod_python.py verbatim, I get the same error
message when trying to run test.py, under both NT4 and
Windows 2000.  That message is:

python_handler: make_obcallback returned no
obCallBack!

Your help in solving this problem will be appreciated.
 Also I have some comments about the install
instructions at:

http://www.modpython.org/live/mod_python-2.6.3/doc/windows.html

that might or might not shed light on my problem.

First of all these instructions only mention 1.52
whereas I'm running Python 2.0; I did however download
the .dll for 2.0 from the home page (NOT the 1.52
.dll).

Secondly, just to be certain, I downloaded the one and
only .tgz installation from the home page: does this
work for both Windows AND Linux?!

Furthermore, in contradiction to the Windows
installation doc, when I unzip the .tgz file I do NOT
get a "new folder".  Rather I get another .tar file;
extrapolating from the instructions, however, I just
extracted this to my python/lib folder
(C:\Python20\Lib), which resulted in a subfolder under
lib named "mod_python-2.6.3".

Moving on to the Apache Integration section of the
install, I stopped and re-started Apache after each
directive I added, to be certain!  However I do find
the instructions about the ScriptAlias/CGI section of
httpd.conf to be confusing: these aren't necessarily
the same thing.

On the first install (on Windows 2000) I added the
indicated directives to the others for my CGI
directory.  On the subsequent NT install I instead
followed the instructions verbatim, creating a
"python" directory under my document_root "htdocs"
directory.  Regardless, as noted above, I got the same
error message for both installs.

Finally, please note that as a final control I created
a test.py program in my cgi-bin as follows:

#! C:\Python20\python.exe

print "Content-type: text/html\n\n"
print "Whatever"

And it ran flawlessly.  So my Apache and Python are
working properly (and I can proceed to develop my
application if solving this problem doesn't happen
overnight ;)

OK, I will look forward to whatever light anybody in
the group can shed on this.  If I'm being an idiot
please be gentle.  On the other hand if any of my
comments are useful I would not mind getting involved
in revising the install docs (PS, the
installation.html that I extracted is not the same as
the installation for windows doc on the website)

Thanks in advance

George Jempty

__________________________________________________
Do You Yahoo!?
Yahoo! Shopping - Thousands of Stores. Millions of Products.
http://shopping.yahoo.com/

From djc at object-craft.com.au  Wed Dec  6 16:58:25 2000
From: djc at object-craft.com.au (Dave Cole)
Date: Fri Jan  9 21:58:43 2004
Subject: [mod_python] How do I find the document root?
Message-ID: <m3bsuqum4e.fsf@vole.object-craft.com.au>

I want to find out the value of the DocumentRoot directive.  I cannot
see any way to do this.

Can someone please point me in the right direction?

- Dave

-- 
http://www.object-craft.com.au


From grisha at ispol.com  Wed Dec  6 09:54:57 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:43 2004
Subject: [mod_python] How do I find the document root?
In-Reply-To: <m3bsuqum4e.fsf@vole.object-craft.com.au>
Message-ID: <Pine.LNX.4.21.0012060953250.20782-100000@saturn.ispol.com>

This may be a roundabout way of doing this, but you could use the
req.server.defn_name and req.server.defn_line_number to read the
DocumentRoot from the config file.

I haven't had my coffee yet, so I hope the above makes sense.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On 6 Dec 2000, Dave Cole wrote:

> I want to find out the value of the DocumentRoot directive.  I cannot
> see any way to do this.
> 
> Can someone please point me in the right direction?
> 
> - Dave
> 
> -- 
> http://www.object-craft.com.au
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From djc at object-craft.com.au  Thu Dec  7 10:01:57 2000
From: djc at object-craft.com.au (Dave Cole)
Date: Fri Jan  9 21:58:43 2004
Subject: [mod_python] How do I find the document root?
In-Reply-To: Gregory Trubetskoy's message of "Wed, 6 Dec 2000 09:54:57 -0500 (EST)"
References: <Pine.LNX.4.21.0012060953250.20782-100000@saturn.ispol.com>
Message-ID: <m3n1e99msa.fsf@vole.object-craft.com.au>

>>>>> "Gregory" == Gregory Trubetskoy <grisha@ispol.com> writes:

Gregory> This may be a roundabout way of doing this, but you could use
Gregory> the req.server.defn_name and req.server.defn_line_number to
Gregory> read the DocumentRoot from the config file.

Gregory> I haven't had my coffee yet, so I hope the above makes sense.

Yup, that makes sense.  It is not what I would call an ideal solution
though :-).

The other thing that I was trying to work out was how to direct all
requests below a certain directory to a single python program.  When
the request is referring to a directory, mod_dir/mod_autoindex kick
in.  I have come up with some mod_rewrite directives, but again, I
wish there were another way to just disable those modules below that
directory.

RewriteEngine on
RewriteRule ^$ main
RewriteRule .*/$ main
SetHandler python-program
PythonHandler main

- Dave

-- 
http://www.object-craft.com.au


From rayvd at firetail.org  Thu Dec  7 12:04:27 2000
From: rayvd at firetail.org (Ray Van Dolson)
Date: Fri Jan  9 21:58:43 2004
Subject: [mod_python] mod_python compiles fine, but gives errors...
Message-ID: <Pine.LNX.4.21.0012071201001.20882-100000@hotnest.firetail.org>

I'm compiling mod_python (latest version) as DSO into Apache 1.3.12
against a Python source tree with no threads.  Everything compiles fine
and even seems to install fine.  However, when starting up apache, it
gives me the following error:

[Thu Dec  7 11:58:16 2000] [warn] Loaded DSO libexec/mod_python.so usesplain Apache 1.3 API, this module might crash under EAPI! (please recompile it with -DEAPI)
[Thu Dec  7 11:58:16 2000] [notice] Apache/1.3.12 (Unix) mod_ssl/2.6.2 OpenSSL/0.9.4 mod_python/2.6.3 Python/1.5.2 mod_perl/1.22 PHP/3.0.16 configured -- resuming normal operations

What is this EAPI warning?  Should I worry about it?  Is it related in any
way to the following error I get when running the test program?  (This is
from the error_log file):

make_obcallback(): could not import mod_python.apache.
make_obcallback(): could not call init.
[Thu Dec  7 11:58:35 2000] [error] [client 199.236.177.11] python_handler: make_obcallback returned no obCallBack!

Apache is running as user nobody, which I read might pose a problem.  But
all the Python modules should be readable by this user.

Any ideas?

Ray Van Dolson


From greg at abbas.org  Thu Dec  7 14:47:07 2000
From: greg at abbas.org (Greg Abbas)
Date: Fri Jan  9 21:58:43 2004
Subject: [mod_python] python_handler: Dispatch() returned nothing.
Message-ID: <3A30136A.E3E6B4F2@abbas.org>

Hi all,

I'm running mod_python 2.6.3 with Apache 1.3.14 on RH 6.2, and it was
working well for a while, but now I've started running into a big
problem. Help please! I've got several name-based virtual hosts (i.e.,
on the same IP address), and I want to send requests to different
handlers, because I'm running several instances of Webware/WebKit
(http://webware.sourceforge.net/). What happens is that as the server
runs, I get more and more "internal server errors". The log shows the
following:

    python_handler: Dispatch() returned nothing.

After I restart the server, it seems to happen a little less (for a
short while). Any idea why this might be happening?

Before I set up the different host names, I was using different ports to
dispatch requests. I didn't get the above-mentioned error, but I got
other strange behavior: PythonPath didn't seem to work on a
per-VirtualHost basis. I set different paths for the different virtual
hosts, but they seemed to be executing code that was only in the other
virtual host's path. I'm not sure, but I think PythonHandler was
"bleeding over" between different virtual hosts, too. I am supposed to
be able to set these parameters differently for each VirtualHost
section, and invoke different handlers for each virtual host?

thanks,
-g.


--
Greg Abbas
greg@abbas.org
http://www.abbas.org



From rayvd at firetail.org  Thu Dec  7 15:15:31 2000
From: rayvd at firetail.org (Ray Van Dolson)
Date: Fri Jan  9 21:58:43 2004
Subject: [mod_python] mod_python compiles fine, but gives errors...
Message-ID: <Pine.LNX.4.21.0012071514490.24101-100000@hotnest.firetail.org>

Did a few things to check out the permissions possibility.  I su'd to root
and then su -'d to nobody.  I can access all the Python directories just
fine that way... Also, just to be sure, I changed the user that apache
runs at to one that I know has access to the Python directories (in this
case, myself).  However, the same problem occurs (same output in error_log
as well).

I have noticed some strange things, however.  When logged in in my normal
user account, if I fire up python and try to do a

import mod_python.apache

I get this:
>>> import mod_python.apache
Traceback (innermost last):
  File "<stdin>", line 1, in ?
  File "/usr/local/lib/python1.5/site-packages/mod_python/apache.py", line
19, in ?
    import _apache
ImportError: No module named _apache

While I see an apache.pyc along with a few other files, there is certainly
no _apache module file.  I notice that in the src tarball for mod_python
there is a file _apachemodule.c and _apachemodule.o.  Is this what python
needs to be loading?

Anyways, hoping to get this figured out.  Thanks for any help. :)

Ray Van Dolson





From Michael.Tellenbroeker at gmx.de  Fri Dec  8 16:34:52 2000
From: Michael.Tellenbroeker at gmx.de (Michael =?ISO-8859-1?Q?Tellenbr=F6ker?=)
Date: Fri Jan  9 21:58:43 2004
Subject: [mod_python] (no subject)
Message-ID: <3241.976289692@www19.gmx.net>

Hello everybody,
I have a little, possibly off-topic, question. I'm trying to connect to a
remote Informix-database, using Apache, mod_python and informixdb.
Stand-alone-access via informixdb runs like a charm, without trying to import
informixdb my mod_python-test-scripts run fine, too. Trying to import informixdb
into my mod_python scripts, I get following message:
  ImportError: Cannot locate C core module for informix db interface.

What's up? Knowing nearly nothing about apache-configuration I appreciate
any help

Thanks in advance
Michael 

-- 
Sent through GMX FreeMail - http://www.gmx.net


From arhiv at freemail.org.mk  Fri Dec  8 19:54:16 2000
From: arhiv at freemail.org.mk (Damjan)
Date: Fri Jan  9 21:58:43 2004
Subject: [mod_python] Small sugestion
Message-ID: <20001208195416.A552@localhost.localdomain>

Hi, Grisha.
I've noticed a lot of complaints about that 'make_obcallback...' errors in the
apache log. These are very often problems with the python path.
So I sugest you add the following two lines in make_obcallback:
(Here is a diff against 2.6.3)

--- mod_python.c.bak	Mon Dec  4 10:59:15 2000
+++ mod_python.c	Fri Dec  8 19:47:41 2000
@@ -479,6 +479,8 @@
 
     if (! ((m = PyImport_ImportModule(MODULENAME)))) {
 	fprintf(stderr, "make_obcallback(): could not import %s.\n", MODULENAME);
+	fprintf(stderr, "make_obcallback(): %s not found in %s.\n", MODULENAME, Py_GetPath());
+	return NULL;
     }
     
     if (! ((obCallBack = PyObject_CallMethod(m, INITFUNC, NULL)))) {

The 'return NULL;' is for the make_obcallback to return as soon as posible 
(and there's no reason to try and call the method when the module was not
loaded), and the apache log will be cleaner.



-- 
Damjan Georgievski		|           ?????? ???????????
Skopje, Macedonia		|           ??????, ??????????

From gstein at lyra.org  Sat Dec  9 05:08:43 2000
From: gstein at lyra.org (Greg Stein)
Date: Fri Jan  9 21:58:43 2004
Subject: [mod_python] Re: A Mod_python error Question
Message-ID: <20001209050843.C30644@lyra.org>

crap... missed the address the first time :-)

----- Forwarded message from Mail Delivery System <MAILER-DAEMON@python.org> -----
>...
From: Greg Stein <gstein@lyra.org>
To: mod_python@python.org
Cc: webmaster <webmaster@startcom.org>

mod_python people...

Could somebody please help this user? At first, I thought it was something
related to DAV, but apparently not. This is out of my area of expertise, but
I'm sure somebody in this forum can help.

Cheers,
-g

On Sat, Dec 09, 2000 at 12:13:38PM -0800, webmaster wrote:
> Hi Greg,
> 
> My problem is *not* mod_dav, DAV is running perfect. I don't want to learn
> right now python (You can't learn just everything). I just added mod_python
> support to one of our servers. Now, I tested it with the test-script
> provided with the contribution, which works well. But to test it, I needed
> to add some handler-stuff to the httpd.conf. So, the only question is
> really, which GLOBAL directive I have to input to the httpd.conf like for
> cgi > AddHandler cgi-script .pl .cgi  or for php I have > AddType
> application/x-httpd-php .php . I added like in the example from mod_python
> AddHandler python-program .py . But this does not seam to work for generally
> getting python executed. And I didn't found anything in mod_python-docs,
> sorry.
> 
> For any help I thank you very much.
> 
> Company:    StartCom (Group)
> Homepage:  http://www.startcom.org
> Branches:    MediaDesign Ltd. at http://mediadesign.startcom.org
>                    MediaHost Ltd. at http://mediahost.startcom.org
> 
> Signer: Eddy Nigg
> 
> ----- Original Message -----
> From: "Greg Stein" <gstein@lyra.org>
> To: "webmaster" <webmaster@startcom.org>
> Sent: Friday, December 08, 2000 2:10 PM
> Subject: Re: A Mod_python error Question
> 
> 
> > If you're using mod_dav, then the installation instructions are at:
> >     http://www.webdav.org/mod_dav/install.html
> >
> > davlib.py is *not* something that you would use as a "handler" in
> > mod_python. There isn't anything that you'd add to the httpd.conf for it.
> >
> > What are you trying to do? That might help me to at least point you in the
> > correct direction.
> >
> > At a minimum, if you are trying to learn Python, then go to
> > http://www.python.org/docs/ and reading the tutorial and some of the other
> > starter guides there.
> >
> > Cheers,
> > -g
> >
> > On Fri, Dec 08, 2000 at 02:46:59PM -0800, webmaster wrote:
> > > Yeah I know that,
> > >
> > > I'd like to know which config I have to enter in httpd.conf, like:
> > > PythonHandler or what?
> > > The DAV Server is successfully installed and already tested.
> > > Thanks if you could give me here some advice for your script and python
> in
> > > general, especially as I saw, that you are also a member of Apache.
> > >
> > > Regards
> > >
> > > Company:    StartCom (Group)
> > > Homepage:  http://www.startcom.org
> > > Branches:    MediaDesign Ltd. at http://mediadesign.startcom.org
> > >                    MediaHost Ltd. at http://mediahost.startcom.org
> > >
> > > Signer: Eddy Nigg
> > >
> > > ----- Original Message -----
> > > From: "Greg Stein" <gstein@lyra.org>
> > > To: "webmaster" <webmaster@startcom.org>
> > > Sent: Friday, December 08, 2000 4:36 AM
> > > Subject: Re: A Mod_python error Question
> > >
> > >
> > > > davlib.py is not intended as a handler module for mod_python. It is a
> > > > support module to be imported by other Python code. More specifically:
> it
> > > is
> > > > a DAV *client* ... not a server.
> > > >
> > > > If you want to DAV-enable your server, then use mod_dav.
> > > >
> > > > Cheers,
> > > > -g
> > > >
> > > > On Wed, Dec 06, 2000 at 12:27:01AM -0800, webmaster wrote:
> > > > > Hi Greg Stein,
> > > > >
> > > > > I tried to run your davlib-script, but not beeing a expert in python
> I
> > > kindly request your help. I installed mod_phyton for this purpose on the
> > > server and also expat. But somehow I don't see any information how to
> > > configure the conf-file so I don't get this error:
> > > > > Mod_python error: "PythonHandler davlib"
> > > > >
> > > > > Traceback (innermost last):
> > > > >
> > > > >   File "/usr/lib/python1.5/site-packages/mod_python/apache.py", line
> > > 178, in Dispatch
> > > > >     object = self.resolve_object(module, object_str)
> > > > >
> > > > >   File "/usr/lib/python1.5/site-packages/mod_python/apache.py", line
> 88,
> > > in resolve_object
> > > > >     raise AttributeError, s
> > > > >
> > > > > AttributeError: module '/home/startcom/www/davclient/davlib.pyc'
> > > contains no 'handler'
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > > Company:    StartCom (Group)
> > > > > Homepage:  http://www.startcom.org
> > > > > Branches:    MediaDesign Ltd. at http://mediadesign.startcom.org
> > > > >                    MediaHost Ltd. at http://mediahost.startcom.org
> > > > >
> > > > > Signer: Eddy Nigg
> > > > >
> > > >
> > > >
> > > >
> > > > --
> > > > Greg Stein, http://www.lyra.org/
> >
> >
> >
> > --
> > Greg Stein, http://www.lyra.org/



-- 
Greg Stein, http://www.lyra.org/


----- End forwarded message -----

-- 
Greg Stein, http://www.lyra.org/

From aiglauer at yahoo.com  Mon Dec 11 00:22:42 2000
From: aiglauer at yahoo.com (Alexis Iglauer)
Date: Fri Jan  9 21:58:43 2004
Subject: [mod_python] Writing to browser from C module
Message-ID: <20001211082242.11132.qmail@web2204.mail.yahoo.com>

Hi, 

me again - and with the same problem as before, just different :)

I have a Python handler which calls a C function - said C function
sometimes taking a long time to return (3+ minutes), long enough for
the browser to time out.  The way to keep the browser happy is to
occasionally send a few bytes of data its way (tried and tested).

So, I somehow need to execute req.write from inside the calculation
loop.  So I need to either a) call the python function req.write from
inside the C function or b) call the ap.rwrite (or similar) function
from inside my C loop.  Either way, I have to pass a pointer of some
form from the Python to C so that I can execute the function.  The best
result I have had so far has been a Segfault from Apache :(

I am currently wrapping my C function using SWIG, put I can pass
PyObjects directly if necessary.  Speed would be a bonus (how efficient
is it to call a Python function from inside C?).

Can anyone help me here?

Regards
Alexis


__________________________________________________
Do You Yahoo!?
Yahoo! Shopping - Thousands of Stores. Millions of Products.
http://shopping.yahoo.com/

From grisha at ispol.com  Tue Dec 12 10:35:06 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:43 2004
Subject: [mod_python] 2.6.4
Message-ID: <Pine.LNX.4.21.0012121029270.20083-100000@saturn.ispol.com>

There is a 2.6.4 available for download now. This is a bugfix release only
and has no new features. It should fix the problem that would manifest
itself by Internal Server Errors and "Dispatch() returned nothing" in the
error log. 

If you're using DSO, you will only need to replace mod_python.so. There
are no changes in the python libraries. I do recommend that you upgrade,
especially is you use multuple virtual servers/interpreters.

Windows users do not need to worry about upgrading, they were not affected
by the problem.

The bug had to do with misplaced #ifdef WITH_THREAD which caused
mod_python not to switch subinterpreters correctly and make python run in
restriced mode, in which __dict__ and some other things are not available.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com



From grisha at ispol.com  Wed Dec 13 18:58:47 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:43 2004
Subject: [mod_python] opensbd anyone?
Message-ID: <Pine.LNX.4.21.0012131857060.24979-100000@saturn.ispol.com>

Anyone out there use mod_python on Open BSD? There is a bug reported on
sourceforge
https://sourceforge.net/bugs/?func=detailbug&bug_id=123047&group_id=7107 I
would like to know if anyone can verify this.

Thanks!

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com


From gerhard.nospam at bigfoot.de  Thu Dec 14 19:26:52 2000
From: gerhard.nospam at bigfoot.de (Gerhard =?iso-8859-1?Q?H=E4ring?=)
Date: Fri Jan  9 21:58:43 2004
Subject: [mod_python] opensbd anyone?
References: <Pine.LNX.4.21.0012131857060.24979-100000@saturn.ispol.com>
Message-ID: <3A3910EC.8DD930FE@bigfoot.de>

I was the one who originally submitted the bug. I was silly enough to
assume that the Apache API didn't change between 1.3.12 and 1.3.14 (the
mod_python win32 build is for 1.3.14, while I used 1.3.12). Now I tried
to verify the bug under Apache 1.3.14, and it seems as if there never
was any bug wrt to win32 and SMP. mod_python now survives a stress test
with concurrent requests from another host. Sorry for the inconvenience.

Gerhard

Gregory Trubetskoy wrote:
> 
> [snip] There is a bug reported on
> sourceforge
> https://sourceforge.net/bugs/?func=detailbug&bug_id=123047&group_id=7107 I
> would like to know if anyone can verify this.
> 
> Thanks!
> 
> --
>   Gregory (Grisha) Trubetskoy
>        grisha@ispol.com

-- 
Sorry for the fake email, please use the real one below to reply.
contact: g e r h a r d @ b i g f o o t . d e
web:     http://highqualdev.com

From modpython at maya.com  Sat Dec 16 14:31:56 2000
From: modpython at maya.com (Seung Chan Lim)
Date: Fri Jan  9 21:58:43 2004
Subject: [mod_python] persistent storage?
Message-ID: <01be01c06796$dfd61b00$0100a8c0@djslim>

Is there a way to mimc the Application object in ASP or the __persistdict__
object in pyApache
with modpython??? so that all cgis running can share this storage space for
data.

thanks,

slim


From grisha at ispol.com  Sat Dec 16 21:25:29 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:43 2004
Subject: [mod_python] mod_python 2.7
Message-ID: <Pine.LNX.4.21.0012162124350.3958-100000@saturn.ispol.com>

...is out

enjoy!

Grisha


From Peter.GIANNOPOULOS at gemplus.com  Sun Dec 17 18:15:49 2000
From: Peter.GIANNOPOULOS at gemplus.com (Peter Giannopoulos)
Date: Fri Jan  9 21:58:43 2004
Subject: [mod_python] A configuration question.
Message-ID: <HEELLMEIEBHKANGCLEELAEPMCBAA.peter.giannopoulos@gemplus.com>

Hi all,

I'm new to the list/python/mod_python.

I am having some difficulty setting up Apache 1.3.14 and mod_python (on
RH7.0) to work the way I want them to. In the tutorial there an explanation
as to how to get myscript.py to handle requests for .py files. This is fine
and it seems to work. But this unfortunately is not enough. I would like to
have the same functionality as traditional cgi handling or servlet handling.
By this I mean that I would like to Have apache/mod_python process ANY .py
files asked for WITHOUT having to set up and individual handler for each in
my configuration files for apache.

Can anyone tell me how to do this?
Thanks in advance.





Peter Giannopoulos, Software Developer
Gemplus Software,   Advanced Projects Group

Phone: +15147322434
Fax:   +15147322401
Gemplus Card International
http://www.gemplus.com


-------------- next part --------------
A non-text attachment was scrubbed...
Name: Peter Giannopoulos.vcf
Type: text/x-vcard
Size: 613 bytes
Desc: not available
Url : http://mailman.modpython.org/pipermail/mod_python/attachments/20001217/654f36fb/PeterGiannopoulos-0002.vcf
From grisha at ispol.com  Sun Dec 17 18:40:35 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:43 2004
Subject: [mod_python] A configuration question.
In-Reply-To: <HEELLMEIEBHKANGCLEELAEPMCBAA.peter.giannopoulos@gemplus.com>
Message-ID: <Pine.LNX.4.21.0012171839200.16900-100000@saturn.ispol.com>

Check out the publisher handler in 2.7. I don't have an RPM for 2.7 yet,
sorry, may be early next week, but you can get the source and compile it.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Sun, 17 Dec 2000, Peter Giannopoulos wrote:

> Hi all,
> 
> I'm new to the list/python/mod_python.
> 
> I am having some difficulty setting up Apache 1.3.14 and mod_python (on
> RH7.0) to work the way I want them to. In the tutorial there an explanation
> as to how to get myscript.py to handle requests for .py files. This is fine
> and it seems to work. But this unfortunately is not enough. I would like to
> have the same functionality as traditional cgi handling or servlet handling.
> By this I mean that I would like to Have apache/mod_python process ANY .py
> files asked for WITHOUT having to set up and individual handler for each in
> my configuration files for apache.
> 
> Can anyone tell me how to do this?
> Thanks in advance.
> 
> 
> 
> 
> 
> Peter Giannopoulos, Software Developer
> Gemplus Software,   Advanced Projects Group
> 
> Phone: +15147322434
> Fax:   +15147322401
> Gemplus Card International
> http://www.gemplus.com
> 
> 
> 


From arhiv at freemail.org.mk  Mon Dec 18 12:09:54 2000
From: arhiv at freemail.org.mk (Damjan)
Date: Fri Jan  9 21:58:43 2004
Subject: [mod_python] persistent storage?
In-Reply-To: <01be01c06796$dfd61b00$0100a8c0@djslim>; from modpython@maya.com on Sat, Dec 16, 2000 at 02:31:56PM -0500
References: <01be01c06796$dfd61b00$0100a8c0@djslim>
Message-ID: <20001218120954.A559@localhost.localdomain>

> Is there a way to mimc the Application object in ASP or the __persistdict__
> object in pyApache
> with modpython??? so that all cgis running can share this storage space for
> data.

You can use somehing like this:

### mod_test.py
cache = {}
def handler(req):
	global cache
	if cache.has_key('num'):
		cache['num'] = cache['num'] + 1
	else:
		cache['num'] = 1
	...

BUT, this is per apache-process persistent storage. Curently there is no way of
sharing data accross processes, except for going through a database.
Apache-2.0 may change this, when it provides a shared memory support.

What I would like to know, how does the above script work in a multithreaded
Apache/mod_python? 
Will the threads share the 'cache' object?


-- 
Damjan Georgievski		|           ?????? ???????????
Skopje, Macedonia		|           ??????, ??????????

From grisha at ispol.com  Mon Dec 18 09:58:00 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:43 2004
Subject: [mod_python] persistent storage?
In-Reply-To: <20001218120954.A559@localhost.localdomain>
Message-ID: <Pine.LNX.4.21.0012180957440.19353-100000@saturn.ispol.com>

On Mon, 18 Dec 2000, Damjan wrote:

> What I would like to know, how does the above script work in a multithreaded
> Apache/mod_python? 
> Will the threads share the 'cache' object?

yes


From Peter.GIANNOPOULOS at gemplus.com  Mon Dec 18 10:05:13 2000
From: Peter.GIANNOPOULOS at gemplus.com (Peter Giannopoulos)
Date: Fri Jan  9 21:58:43 2004
Subject: [mod_python] A configuration question.
In-Reply-To: <Pine.LNX.4.21.0012171839200.16900-100000@saturn.ispol.com>
Message-ID: <HEELLMEIEBHKANGCLEELOEPNCBAA.peter.giannopoulos@gemplus.com>

Thanks, for the prompt reply. I managed to build and install 2.7 but now
Apache can't load it...

Here is what I get as an erro message:


" Cannot load /usr/local/apache/libexec/mod_python.so into server: undefined
symbol: PyEval_RestoreTread "

I don't know enough about apache or mod_python to figure this one out by
mysef right now. Any suggestions?









Peter Giannopoulos, Software Developer
Gemplus Software,   Advanced Projects Group

Phone: +15147322434
Fax:   +15147322401
Gemplus Card International
http://www.gemplus.com




-----Original Message-----
From: Gregory Trubetskoy [mailto:grisha@ispol.com]
Sent: December 17, 2000 6:41 PM
To: Peter Giannopoulos
Cc: mod_python@modpython.org
Subject: Re: [mod_python] A configuration question.



Check out the publisher handler in 2.7. I don't have an RPM for 2.7 yet,
sorry, may be early next week, but you can get the source and compile it.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Sun, 17 Dec 2000, Peter Giannopoulos wrote:

> Hi all,
>
> I'm new to the list/python/mod_python.
>
> I am having some difficulty setting up Apache 1.3.14 and mod_python (on
> RH7.0) to work the way I want them to. In the tutorial there an
explanation
> as to how to get myscript.py to handle requests for .py files. This is
fine
> and it seems to work. But this unfortunately is not enough. I would like
to
> have the same functionality as traditional cgi handling or servlet
handling.
> By this I mean that I would like to Have apache/mod_python process ANY .py
> files asked for WITHOUT having to set up and individual handler for each
in
> my configuration files for apache.
>
> Can anyone tell me how to do this?
> Thanks in advance.
>
>
>
>
>
> Peter Giannopoulos, Software Developer
> Gemplus Software,   Advanced Projects Group
>
> Phone: +15147322434
> Fax:   +15147322401
> Gemplus Card International
> http://www.gemplus.com
>
>
>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Peter Giannopoulos.vcf
Type: text/x-vcard
Size: 613 bytes
Desc: not available
Url : http://mailman.modpython.org/pipermail/mod_python/attachments/20001218/f23646de/PeterGiannopoulos-0002.vcf
From grisha at ispol.com  Mon Dec 18 12:07:07 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:43 2004
Subject: [mod_python] A configuration question.
In-Reply-To: <HEELLMEIEBHKANGCLEELOEPNCBAA.peter.giannopoulos@gemplus.com>
Message-ID: <Pine.LNX.4.21.0012181206160.19353-100000@saturn.ispol.com>

That's a bug. For now just inser an "h" in the word Tread so that it reads
Thread :-)

Grisha

On Mon, 18 Dec 2000, Peter Giannopoulos wrote:

> Thanks, for the prompt reply. I managed to build and install 2.7 but now
> Apache can't load it...
> 
> Here is what I get as an erro message:
> 
> 
> " Cannot load /usr/local/apache/libexec/mod_python.so into server: undefined
> symbol: PyEval_RestoreTread "
> 
> I don't know enough about apache or mod_python to figure this one out by
> mysef right now. Any suggestions?
> 
> 
> 
> 
> 
> 
> 
> 
> 
> Peter Giannopoulos, Software Developer
> Gemplus Software,   Advanced Projects Group
> 
> Phone: +15147322434
> Fax:   +15147322401
> Gemplus Card International
> http://www.gemplus.com
> 
> 
> 
> 
> -----Original Message-----
> From: Gregory Trubetskoy [mailto:grisha@ispol.com]
> Sent: December 17, 2000 6:41 PM
> To: Peter Giannopoulos
> Cc: mod_python@modpython.org
> Subject: Re: [mod_python] A configuration question.
> 
> 
> 
> Check out the publisher handler in 2.7. I don't have an RPM for 2.7 yet,
> sorry, may be early next week, but you can get the source and compile it.
> 
> --
>   Gregory (Grisha) Trubetskoy
>        grisha@ispol.com
> 
> On Sun, 17 Dec 2000, Peter Giannopoulos wrote:
> 
> > Hi all,
> >
> > I'm new to the list/python/mod_python.
> >
> > I am having some difficulty setting up Apache 1.3.14 and mod_python (on
> > RH7.0) to work the way I want them to. In the tutorial there an
> explanation
> > as to how to get myscript.py to handle requests for .py files. This is
> fine
> > and it seems to work. But this unfortunately is not enough. I would like
> to
> > have the same functionality as traditional cgi handling or servlet
> handling.
> > By this I mean that I would like to Have apache/mod_python process ANY .py
> > files asked for WITHOUT having to set up and individual handler for each
> in
> > my configuration files for apache.
> >
> > Can anyone tell me how to do this?
> > Thanks in advance.
> >
> >
> >
> >
> >
> > Peter Giannopoulos, Software Developer
> > Gemplus Software,   Advanced Projects Group
> >
> > Phone: +15147322434
> > Fax:   +15147322401
> > Gemplus Card International
> > http://www.gemplus.com
> >
> >
> >
> 
> 


From Peter.GIANNOPOULOS at gemplus.com  Mon Dec 18 12:27:20 2000
From: Peter.GIANNOPOULOS at gemplus.com (Peter Giannopoulos)
Date: Fri Jan  9 21:58:43 2004
Subject: [mod_python] Problems loading mod_python 2.7
Message-ID: <HEELLMEIEBHKANGCLEELAEPPCBAA.peter.giannopoulos@gemplus.com>

I am having a hard time with mod_python 2.7:

Building and installing works fine but when  I try to start apache (1.3.14)
on RedHat 7.0 and get the following message:

" Cannot load /usr/local/apache/libexec/mod_python.so into server: undefined
symbol: PyEval_RestoreTread "

The reason I am using 2.7 is because I don't want to write a handler for
EVERY .py file in my webapp. Is there a way to do this with 2.6.4 (loads and
works just fine on the same machine)? Or does anyone know how to fix the
above mentioned error?


Thanks.


Peter Giannopoulos, Software Developer
Gemplus Software,   Advanced Projects Group

Phone: +15147322434
Fax:   +15147322401
Gemplus Card International
http://www.gemplus.com


-------------- next part --------------
A non-text attachment was scrubbed...
Name: Peter Giannopoulos.vcf
Type: text/x-vcard
Size: 613 bytes
Desc: not available
Url : http://mailman.modpython.org/pipermail/mod_python/attachments/20001218/74005798/PeterGiannopoulos-0002.vcf
From grisha at ispol.com  Mon Dec 18 16:40:39 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:43 2004
Subject: [mod_python] 2.7.1
Message-ID: <Pine.LNX.4.21.0012181638490.20344-100000@saturn.ispol.com>

We now have 2.7.1. There was a typo and some other things that wouldn't
work on win32 in 2.7.

There are also Python 1.5.2 and Python 2.0 DLL's, as well as a Red Hat RPM
available now.

enjoy

Grisha



From Peter.GIANNOPOULOS at gemplus.com  Mon Dec 18 17:22:37 2000
From: Peter.GIANNOPOULOS at gemplus.com (Peter Giannopoulos)
Date: Fri Jan  9 21:58:43 2004
Subject: [mod_python] Ok. One step closer now!
Message-ID: <HEELLMEIEBHKANGCLEELEEABCCAA.peter.giannopoulos@gemplus.com>

Ok. I corrected the syntax error in mod_python.c, rebuilt it and it now
loads but... :-(


I have the following in my httpd.conf

============================================================================
==============================
#This does not work I get : "The requested URL /say.py was not found on this
server."
# Yet the file does indeed exist and is exactly where specified "
<Directory /usr/local/apache/htdocs/webcard>
    AddHandler python-program .py
    PythonHandler mod_python.publisher
    PythonDebug On
</Directory>

#This does work
<Directory /usr/local/apache/htdocs/webcard/doc>
    AddHandler python-program .py
    PythonHandler mptest
    PythonDebug On
</Directory>

============================================================================
=============================


Again my specifics are: RedHat 7.0 , apache 1.3.14, python 2.0 and
mod_python 2.7
Any pointers?


Thanks in advance.




Peter Giannopoulos, Software Developer
Gemplus Software,   Advanced Projects Group

Phone: +15147322434
Fax:   +15147322401
Gemplus Card International
http://www.gemplus.com


-------------- next part --------------
A non-text attachment was scrubbed...
Name: Peter Giannopoulos.vcf
Type: text/x-vcard
Size: 613 bytes
Desc: not available
Url : http://mailman.modpython.org/pipermail/mod_python/attachments/20001218/fad79960/PeterGiannopoulos-0002.vcf
From ytc87 at cs.ccu.edu.tw  Wed Dec 20 00:24:46 2000
From: ytc87 at cs.ccu.edu.tw (Yi-Tai Chen)
Date: Fri Jan  9 21:58:43 2004
Subject: [mod_python] question about start apache with mod_python...
Message-ID: <20001220002446.A1623@mdklinux.idv.tw>

  I already load mod_python first... but it still core dump...
  I need to do this step to make it work...
  First, comment the lines about load mod_python, start apache, 
  then uncomment the lines load mod_python, restart apache...
  after this mod_python can work fine... 
  Can start apache with mod_python directly??
  My OS is Mandrake 7.2, Python 2.0, Apache 1.3.14 and
  Mod_python 2.7.1... thanks a lot...

From fschwiet at u.washington.edu  Tue Dec 19 16:13:59 2000
From: fschwiet at u.washington.edu (F. Schwieterman)
Date: Fri Jan  9 21:58:43 2004
Subject: [mod_python] installation woes: Redhat 7.0, mod_python 2.7.1, apache 1.3.12
Message-ID: <Pine.A41.4.21.0012191603150.79868-100000@dante22.u.washington.edu>

  Well I was hoping that a fresh Redhat install 7.0, followed by a fresh
install of Apache 1.3.12, followed by an install of mod_python 2.7.1 would
quickly get me running.  (I've spent a lot of time trying to get
mod_python to work in Mandrake to no avail).

  Anyhow, installation goes smooth but the when I run the test file as
'http://localhost/mod_python/python_handler.py' I get an internal server
error.  (this is after restarting the server appropriately)

  Anyhow, the contents of /var/log/httpd/error_log is  
[Tue Dec 19 15:37:28 2000] [notice] Apache/1.3.12 (Unix)  (Red
Hat/Linux) mod_python/2.7.1 Python/2.0 configured -- resuming normal
operations
[Tue Dec 19 15:37:36 2000] [error] [client 127.0.0.1] File does not
exist: /var/www/html/mod_python
'import site' failed; use -v for traceback
make_obcallback(): could not import mod_python.apache.
make_obcallback(): could not call init.
[Tue Dec 19 15:38:20 2000] [error] [client 127.0.0.1]
python_handler: make_obcallback returned no obCallBack!
'import site' failed; use -v for traceback
make_obcallback(): could not import mod_python.apache.
make_obcallback(): could not call init.
[Tue Dec 19 15:59:27 2000] [error] [client 127.0.0.1]
python_handler: make_obcallback returned no obCallBack!


  Since accessing the test file as
'file:/var/www/mod_python_test/pythonhandler.py' simply gives me the text
of the result, I think that mod_python isn't at all installed so that the
following httpd.conf lines are being ignored:
<IfModule mod_python.c>
  Alias /mod_python/ /var/www/mod_python_test/
  <Directory /var/www/mod_python_test>
    AllowOverride FileInfo
  </Directory>
</IfModule>




  Anyhow I'm not really a Linux user so if anyone had any advice on how I
can get mod_python working that'd be great.  It seems like these RPMs
should be useable from a fresh Redhat install..  If I don't get any
replies soon I'll contact the RPM author to see what I'm missing.



From victor at prodigy.net  Wed Dec 20 01:02:35 2000
From: victor at prodigy.net (Victor Muslin)
Date: Fri Jan  9 21:58:44 2004
Subject: [mod_python] Newbie question
Message-ID: <4.3.2.7.0.20001220005229.00b9b420@pop.prodigy.net>

I am running Apache 1.3.12 on WindowsNT 4.0 with Python 2.0.

Tried to configure it to use mod_python. Made the following relevant 
changes in httpd.conf:
DocumentRoot "g:/top/public/web/dev/htdocs"
<Directory "g:/top/public/web/dev/htdocs">
#
LoadModule python_module modules/mod_python.dll
#
PassEnv PYTHONPATH

<Directory "g:/top/public/web/dev/htdocs/test">
         AllowOverride All
         AddHandler python-program .py
         PythonHandler mptest
         PythonDebug On
         PythonPath 
"['e:/apps/python20/lib','g:/top/public/web/dev/htdocs/test']"
</Directory>

(Not sure whether PythonPath is necessary; it was not in instructions on 
the mod_python web site, but I saw it in some news group posting. In any 
case, the behavior is the same with or without it.)

Seems that the server loads mod_python fine, because when it comes up it 
says: Apache 1.3.12 (Win32) mod_python/2.6.3 Python/2.0 running...

As per instructions I created mptest.py and placed it into 
g:/top/public/web/dev/htdocs/test.
from mod_python import apache

def handler(req):
     req.send_http_header()
     req.write("Hello World!")
     return apache.OK

However, when I point my browser to it 
(http://127.0.0.1:8000/test/mptest.py) I get an Internal Server Error. The 
message in the error log says: [Wed Dec 20 00:45:56 2000] [error] [client 
209.247.38.37] python_handler: make_obcallback returned no obCallBack!

Any insight would be appreciated.

TIA

_______________________________________________________________________
Victor Muslin 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20001220/0b75ab5d/attachment-0002.htm
From hostmaster at bemarnet.es  Wed Dec 20 12:58:12 2000
From: hostmaster at bemarnet.es (Antonio Navarro Navarro)
Date: Fri Jan  9 21:58:44 2004
Subject: [mod_python] Problems with mod_python and Apache 1.3.14-3
Message-ID: <4.1.20001220125225.022faf00@pop3.bemarnet.es>

Hi All !

I have a RedHat 7.0 with Apache 1.3.14-3 installed from the RH Cd-Roms.
After installing the RPM for mod_python 2.7.1-1, the httpd shows the
following error and crashes:

[root@zeus /root]# httpd -x
[Wed Dec 20 12:55:01 2000] [warn] Loaded DSO modules/mod_python.so uses 
plain Apache 1.3 API, this module might crash under EAPI! (please recompile
it with -DEAPI)     

How can I bypass this error ? Do I need a RPM mod_python compiled with
-DEAPI ? If so, where can I find this ?

Can I generate a new RPM from the source mod_python ? How ?

Best regards,


Antonio Navarro Navarro
BemarNet Management
http://www.bemarnet.es
hostmaster@bemarnet.es
Tlf. +34-96-1656644
Fax. +34-96-1656514

From rriggs at doubleclick.net  Wed Dec 20 09:16:37 2000
From: rriggs at doubleclick.net (Rob Riggs)
Date: Fri Jan  9 21:58:44 2004
Subject: [mod_python] RH7 and mod_python and mod_php4 == apache crash
Message-ID: <3A40DB65.D03E9633@doubleclick.net>

Under RH7, it appears that one cannot have both mod_python and mod_php
installed. When both are installed and Apache is started from the init
script, it crashes. Note that running Apache without all of the
"-D HAVE_..." pieces that the init script passes to httpd seems to
prevent the crash.

Any ideas what is causing this?

--
Rob Riggs
Unix System Administrator
DoubleClick/DARTmail - Broomfield, CO




From grisha at ispol.com  Wed Dec 20 11:18:02 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:44 2004
Subject: [mod_python] Newbie question
In-Reply-To: <4.3.2.7.0.20001220005229.00b9b420@pop.prodigy.net>
Message-ID: <Pine.LNX.4.21.0012201000320.27015-100000@saturn.ispol.com>

I would verify where your mod_python PACKAGE is and make sure that it is
in PYTHONPATH. Not the PythonPath keyword you specified below, but the
sys.path (which can be altered via the PYTHONPATH variable prior to
starting apache) at the time when you start apache.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Wed, 20 Dec 2000, Victor Muslin wrote:

> I am running Apache 1.3.12 on WindowsNT 4.0 with Python 2.0.
> 
> Tried to configure it to use mod_python. Made the following relevant 
> changes in httpd.conf:
> DocumentRoot "g:/top/public/web/dev/htdocs"
> <Directory "g:/top/public/web/dev/htdocs">
> #
> LoadModule python_module modules/mod_python.dll
> #
> PassEnv PYTHONPATH
> 
> <Directory "g:/top/public/web/dev/htdocs/test">
>          AllowOverride All
>          AddHandler python-program .py
>          PythonHandler mptest
>          PythonDebug On
>          PythonPath 
> "['e:/apps/python20/lib','g:/top/public/web/dev/htdocs/test']"
> </Directory>
> 
> (Not sure whether PythonPath is necessary; it was not in instructions on 
> the mod_python web site, but I saw it in some news group posting. In any 
> case, the behavior is the same with or without it.)
> 
> Seems that the server loads mod_python fine, because when it comes up it 
> says: Apache 1.3.12 (Win32) mod_python/2.6.3 Python/2.0 running...
> 
> As per instructions I created mptest.py and placed it into 
> g:/top/public/web/dev/htdocs/test.
> from mod_python import apache
> 
> def handler(req):
>      req.send_http_header()
>      req.write("Hello World!")
>      return apache.OK
> 
> However, when I point my browser to it 
> (http://127.0.0.1:8000/test/mptest.py) I get an Internal Server Error. The 
> message in the error log says: [Wed Dec 20 00:45:56 2000] [error] [client 
> 209.247.38.37] python_handler: make_obcallback returned no obCallBack!
> 
> Any insight would be appreciated.
> 
> TIA
> 
> _______________________________________________________________________
> Victor Muslin 


From grisha at ispol.com  Wed Dec 20 11:36:19 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:44 2004
Subject: [mod_python] Problems with mod_python and Apache 1.3.14-3
In-Reply-To: <4.1.20001220125225.022faf00@pop3.bemarnet.es>
Message-ID: <Pine.LNX.4.21.0012201134130.27306-100000@saturn.ispol.com>

On Wed, 20 Dec 2000, Antonio Navarro Navarro wrote:

> [root@zeus /root]# httpd -x
> [Wed Dec 20 12:55:01 2000] [warn] Loaded DSO modules/mod_python.so uses 
> plain Apache 1.3 API, this module might crash under EAPI! (please recompile
> it with -DEAPI)     
> 
> How can I bypass this error ? 

You can recompile with -DEAPI, but I wouldn't worry about it.

> Can I generate a new RPM from the source mod_python ? How ?

http://www.modpython.org/dist/rpm/mod_python.spec
man rpm



Grisha


From hostmaster at bemarnet.es  Wed Dec 20 17:38:19 2000
From: hostmaster at bemarnet.es (Antonio Navarro Navarro)
Date: Fri Jan  9 21:58:44 2004
Subject: [mod_python] Problems with mod_python and Apache 1.3.14-3
In-Reply-To: <Pine.LNX.4.21.0012201134130.27306-100000@saturn.ispol.com>
References: <4.1.20001220125225.022faf00@pop3.bemarnet.es>
Message-ID: <4.1.20001220173800.02303100@pop3.bemarnet.es>

At 11.36 20/12/00 -0500, Gregory Trubetskoy wrote:

>On Wed, 20 Dec 2000, Antonio Navarro Navarro wrote:
>
>> [root@zeus /root]# httpd -x
>> [Wed Dec 20 12:55:01 2000] [warn] Loaded DSO modules/mod_python.so uses 
>> plain Apache 1.3 API, this module might crash under EAPI! (please recompile
>> it with -DEAPI)     
>> 
>> How can I bypass this error ? 
>
>You can recompile with -DEAPI, but I wouldn't worry about it.

Why ?

Regards,

Antonio Navarro Navarro
BemarNet Management
http://www.bemarnet.es
hostmaster@bemarnet.es
Tlf. +34-96-1656644
Fax. +34-96-1656514

From grisha at ispol.com  Wed Dec 20 13:03:50 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:44 2004
Subject: [mod_python] Problems with mod_python and Apache 1.3.14-3
In-Reply-To: <4.1.20001220173800.02303100@pop3.bemarnet.es>
Message-ID: <Pine.LNX.4.21.0012201302350.27306-100000@saturn.ispol.com>

I don't believe mod_python uses any of the API that is affected by
-DEAPI. I'll have to check to be 100% certain, but I've been getting this
warning on all my tests and have never seen a crash (at least the one
that I could relate to -DEAPI).


On Wed, 20 Dec 2000, Antonio Navarro Navarro wrote:

> At 11.36 20/12/00 -0500, Gregory Trubetskoy wrote:
> 
> >On Wed, 20 Dec 2000, Antonio Navarro Navarro wrote:
> >
> >> [root@zeus /root]# httpd -x
> >> [Wed Dec 20 12:55:01 2000] [warn] Loaded DSO modules/mod_python.so uses 
> >> plain Apache 1.3 API, this module might crash under EAPI! (please recompile
> >> it with -DEAPI)     
> >> 
> >> How can I bypass this error ? 
> >
> >You can recompile with -DEAPI, but I wouldn't worry about it.
> 
> Why ?
> 
> Regards,
> 
> Antonio Navarro Navarro
> BemarNet Management
> http://www.bemarnet.es
> hostmaster@bemarnet.es
> Tlf. +34-96-1656644
> Fax. +34-96-1656514
> 


From hostmaster at bemarnet.es  Wed Dec 20 19:21:42 2000
From: hostmaster at bemarnet.es (Antonio Navarro Navarro)
Date: Fri Jan  9 21:58:44 2004
Subject: [mod_python] Problems with mod_python and Apache 1.3.14-3
In-Reply-To: <Pine.LNX.4.21.0012201302350.27306-100000@saturn.ispol.com>
References: <4.1.20001220173800.02303100@pop3.bemarnet.es>
Message-ID: <4.1.20001220192013.02306210@pop3.bemarnet.es>

At 13.03 20/12/00 -0500, Gregory Trubetskoy wrote:

>I don't believe mod_python uses any of the API that is affected by
>-DEAPI. I'll have to check to be 100% certain, but I've been getting this
>warning on all my tests and have never seen a crash (at least the one
>that I could relate to -DEAPI).

Hi !

Well, the only thing I can say to you is that the downloaded i386.rpm
package dowsn't works for me.. I have downloaded the sources RPM, then I
have made a rpm -rebuild and the new rpm package works fine.

Regards,

Antonio Navarro Navarro
BemarNet Management
http://www.bemarnet.es
hostmaster@bemarnet.es
Tlf. +34-96-1656644
Fax. +34-96-1656514

From grisha at ispol.com  Wed Dec 20 15:48:26 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:44 2004
Subject: [mod_python] Problems with mod_python and Apache 1.3.14-3
In-Reply-To: <4.1.20001220192013.02306210@pop3.bemarnet.es>
Message-ID: <Pine.LNX.4.21.0012201543340.27862-100000@saturn.ispol.com>

May be it's be it's because I created them on Red Hat 2.6.

Perhaps I should take those RPM's off the site altogether, they seem to do
little good but confuse people and take up my time since there are
different variations of RedHat... (Mandrake?) I don't really have any
access to all those systems nor do I understand or like Red Hat enough to
be able to support those things.

Perhaps some Red Hat fan would like to volunteer to maintain the
RPM's? Your job would be to create all versions of RPM's every time there
is a release and perhaps answer questions about them on the list.

Grisha


On Wed, 20 Dec 2000, Antonio Navarro Navarro wrote:

> At 13.03 20/12/00 -0500, Gregory Trubetskoy wrote:
> 
> >I don't believe mod_python uses any of the API that is affected by
> >-DEAPI. I'll have to check to be 100% certain, but I've been getting this
> >warning on all my tests and have never seen a crash (at least the one
> >that I could relate to -DEAPI).
> 
> Hi !
> 
> Well, the only thing I can say to you is that the downloaded i386.rpm
> package dowsn't works for me.. I have downloaded the sources RPM, then I
> have made a rpm -rebuild and the new rpm package works fine.
> 
> Regards,
> 
> Antonio Navarro Navarro
> BemarNet Management
> http://www.bemarnet.es
> hostmaster@bemarnet.es
> Tlf. +34-96-1656644
> Fax. +34-96-1656514
> 


From benno at sesgroup.net  Thu Dec 21 12:06:05 2000
From: benno at sesgroup.net (Ben Leslie)
Date: Fri Jan  9 21:58:44 2004
Subject: [mod_python] RH7 and mod_python and mod_php4 == apache crash
In-Reply-To: <3A40DB65.D03E9633@doubleclick.net>; from rriggs@doubleclick.net on Wed, Dec 20, 2000 at 09:16:37AM -0700
References: <3A40DB65.D03E9633@doubleclick.net>
Message-ID: <20001221120605.A25968@sesgroup.net>

> Under RH7, it appears that one cannot have both mod_python and mod_php
> installed. When both are installed and Apache is started from the init
> script, it crashes. Note that running Apache without all of the
> "-D HAVE_..." pieces that the init script passes to httpd seems to
> prevent the crash.
> 
> Any ideas what is causing this?

Not sure if this will help but have you tried putting the Load Module 
directive for mod_python before any others. Sometimes mod_python insists
on being loaded first.

Hth,

Benno

From hostmaster at bemarnet.es  Thu Dec 21 09:06:39 2000
From: hostmaster at bemarnet.es (Antonio Navarro Navarro)
Date: Fri Jan  9 21:58:44 2004
Subject: [mod_python] Problems with mod_python and Apache 1.3.14-3
In-Reply-To: <Pine.LNX.4.21.0012201543340.27862-100000@saturn.ispol.com>
References: <4.1.20001220192013.02306210@pop3.bemarnet.es>
Message-ID: <4.1.20001221090457.016e8530@pop3.bemarnet.es>

At 15.48 20/12/00 -0500, Gregory Trubetskoy wrote:

>May be it's be it's because I created them on Red Hat 2.6.

6.2 I suppose... yes, this could be the problem.

>Perhaps I should take those RPM's off the site altogether, they seem to do
>little good but confuse people and take up my time since there are
>different variations of RedHat... (Mandrake?) I don't really have any
>access to all those systems nor do I understand or like Red Hat enough to
>be able to support those things.
>
>Perhaps some Red Hat fan would like to volunteer to maintain the
>RPM's? Your job would be to create all versions of RPM's every time there
>is a release and perhaps answer questions about them on the list.

I can create all version of RPM's from source in RedHat Linux, we are fans
of RH and allways have the latest version installed in our systems. Tell me
what can I do. :-)

Regards,

Antonio Navarro Navarro
BemarNet Management
http://www.bemarnet.es
hostmaster@bemarnet.es
Tlf. +34-96-1656644
Fax. +34-96-1656514

From arhiv at freemail.org.mk  Wed Dec 20 15:25:08 2000
From: arhiv at freemail.org.mk (Damjan)
Date: Fri Jan  9 21:58:44 2004
Subject: [mod_python] Small sugestion
In-Reply-To: <20001208195416.A552@localhost.localdomain>; from arhiv@freemail.org.mk on Fri, Dec 08, 2000 at 07:54:16PM +0100
References: <20001208195416.A552@localhost.localdomain>
Message-ID: <20001220152507.A1431@localhost.localdomain>

> Hi, Grisha.
> I've noticed a lot of complaints about that 'make_obcallback...' errors in the
> apache log. These are very often problems with the python path.
> So I sugest you add the following two lines in make_obcallback:
> (Here is a diff against 2.6.3)
> 
> --- mod_python.c.bak	Mon Dec  4 10:59:15 2000
> +++ mod_python.c	Fri Dec  8 19:47:41 2000
> @@ -479,6 +479,8 @@
>  
>      if (! ((m = PyImport_ImportModule(MODULENAME)))) {
>  	fprintf(stderr, "make_obcallback(): could not import %s.\n", MODULENAME);
> +	fprintf(stderr, "make_obcallback(): %s not found in %s.\n", MODULENAME, Py_GetPath());
> +	return NULL;
>      }
>      
>      if (! ((obCallBack = PyObject_CallMethod(m, INITFUNC, NULL)))) {
> 
> The 'return NULL;' is for the make_obcallback to return as soon as posible 
> (and there's no reason to try and call the method when the module was not
> loaded), and the apache log will be cleaner.

No comments on this ??


-- 
Damjan Georgievski		|           ?????? ???????????
Skopje, Macedonia		|           ??????, ??????????

From grisha at ispol.com  Thu Dec 21 09:55:48 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:44 2004
Subject: [mod_python] Small sugestion
In-Reply-To: <20001220152507.A1431@localhost.localdomain>
Message-ID: <Pine.LNX.4.21.0012210955070.30838-100000@saturn.ispol.com>

Sorry Damjan, somehow this one fell out of my task list. It's a good
suggestion, I'll add it in.

Grisha

On Wed, 20 Dec 2000, Damjan wrote:

> > Hi, Grisha.
> > I've noticed a lot of complaints about that 'make_obcallback...' errors in the
> > apache log. These are very often problems with the python path.
> > So I sugest you add the following two lines in make_obcallback:
> > (Here is a diff against 2.6.3)
> > 
> > --- mod_python.c.bak	Mon Dec  4 10:59:15 2000
> > +++ mod_python.c	Fri Dec  8 19:47:41 2000
> > @@ -479,6 +479,8 @@
> >  
> >      if (! ((m = PyImport_ImportModule(MODULENAME)))) {
> >  	fprintf(stderr, "make_obcallback(): could not import %s.\n", MODULENAME);
> > +	fprintf(stderr, "make_obcallback(): %s not found in %s.\n", MODULENAME, Py_GetPath());
> > +	return NULL;
> >      }
> >      
> >      if (! ((obCallBack = PyObject_CallMethod(m, INITFUNC, NULL)))) {
> > 
> > The 'return NULL;' is for the make_obcallback to return as soon as posible 
> > (and there's no reason to try and call the method when the module was not
> > loaded), and the apache log will be cleaner.
> 
> No comments on this ??
> 
> 
> -- 
> Damjan Georgievski		|           ???????????? ??????????????????????
> Skopje, Macedonia		|           ????????????, ????????????????????
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From rriggs at doubleclick.net  Thu Dec 21 08:30:31 2000
From: rriggs at doubleclick.net (Rob Riggs)
Date: Fri Jan  9 21:58:44 2004
Subject: [mod_python] RH7 and mod_python and mod_php4 == apache crash
References: <3A40DB65.D03E9633@doubleclick.net> <20001221120605.A25968@sesgroup.net>
Message-ID: <3A422217.996E8743@doubleclick.net>

Ben,

Thanks for the response. I am installing mod_python via the RPM (built
from the SRPM for Python 1.5.2), which appears to install correctly. The
RPM definitely puts the mod_python LoadModule directive first.


Ben Leslie wrote:

> > Under RH7, it appears that one cannot have both mod_python and mod_php
> > installed. When both are installed and Apache is started from the init
> > script, it crashes. Note that running Apache without all of the
> > "-D HAVE_..." pieces that the init script passes to httpd seems to
> > prevent the crash.
> >
> > Any ideas what is causing this?
>
> Not sure if this will help but have you tried putting the Load Module
> directive for mod_python before any others. Sometimes mod_python insists
> on being loaded first.
>
> Hth,
>
> Benno

--
Rob Riggs
Unix System Administrator
DoubleClick/DARTmail - Broomfield, CO




From djc at object-craft.com.au  Fri Dec 22 14:20:20 2000
From: djc at object-craft.com.au (Dave Cole)
Date: Fri Jan  9 21:58:44 2004
Subject: [mod_python] Yet another Python templating system
Message-ID: <m38zp93zwr.fsf@vole.object-craft.com.au>

A customer of ours has just given us permission to open source a set
of Python modules that we are developing as part of a contract with
them.

We started working on these modules a number of months ago, and they
are now in their third major revision.  The code was originally
developed to work in a CGI environment.  The modules are not just for
HTML template substitution, they are a toolkit for building session
based web applications with Python.

I have done some playing around to see how hard it would be to make
the modules work with mod_python.  The modules in their current form
need very little work to migrate to mod_python.

There is some introductory documentation at:

        http://www.object-craft.com.au/projects/fusion/intro.html

One of the things that is most likely to change in migrating to
mod_python is the application structure as described in the above
document.  Currently multiple application states / pages are
implemented in a single Python module.  This is good for small systems
like the applications we are developing for the customer, but become a
management problem for larger applications.  In the latest mod_python,
I noted with interest the new Publisher handler.  A modified or
extended version for this would be ideal for implementing each
application state as described in the intro document.

In making this toolkit more general, I would also like to be able to
build applications which are not session based.  The tree and paged
list tags both currently store state information in the session.

We are likely to release the code early in the new year once we have
finalised the license with our client.

- Dave

-- 
http://www.object-craft.com.au


From jrfsousa at esoterica.pt  Sat Dec 23 01:13:01 2000
From: jrfsousa at esoterica.pt (Jos Rui Faustino de Sousa)
Date: Fri Jan  9 21:58:44 2004
Subject: [mod_python] _apache again...
Message-ID: <000501c06c7d$7e586d10$fe00a8c0@krolik2piii1008>

Hi!

Has anyone solved the problem with the missing _apache module?

The test.py example does not work and I can not load _apache from the
python interpreter...

Where is this module?

Best regards
Jos Rui



From Lisa at mailgw1.netvision.net.il  Sat Dec 23 22:06:22 2000
From: Lisa at mailgw1.netvision.net.il (Lisa@mailgw1.netvision.net.il)
Date: Fri Jan  9 21:58:44 2004
Subject: [mod_python] new game try it
Message-ID: <200012232004.WAA28505@mailgw1.netvision.net.il>

An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20001223/2a1c4fbc/attachment-0002.htm
From grisha at ispol.com  Sat Dec 23 19:44:00 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:44 2004
Subject: [mod_python] _apache again...
In-Reply-To: <000501c06c7d$7e586d10$fe00a8c0@krolik2piii1008>
Message-ID: <Pine.LNX.4.21.0012231943070.6793-100000@saturn.ispol.com>

_apache only exists within apache - you shouldn't be able to load
mod_python scripts in standard intepreter for this reason.

Grisha

On Sat, 23 Dec 2000, Jos? Rui Faustino de Sousa wrote:

> Hi!
> 
> Has anyone solved the problem with the missing _apache module?
> 
> The test.py example does not work and I can not load _apache from the
> python interpreter...
> 
> Where is this module?
> 
> Best regards
> Jos? Rui
> 
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From arhiv at freemail.org.mk  Tue Dec 26 14:13:45 2000
From: arhiv at freemail.org.mk (Damjan)
Date: Fri Jan  9 21:58:44 2004
Subject: [mod_python] _apache again...
In-Reply-To: <Pine.LNX.4.21.0012231943070.6793-100000@saturn.ispol.com>; from grisha@ispol.com on Sat, Dec 23, 2000 at 07:44:00PM -0500
References: <000501c06c7d$7e586d10$fe00a8c0@krolik2piii1008> <Pine.LNX.4.21.0012231943070.6793-100000@saturn.ispol.com>
Message-ID: <20001226141345.A1395@localhost.localdomain>

> _apache only exists within apache - you shouldn't be able to load
> mod_python scripts in standard intepreter for this reason.
> 
> > Has anyone solved the problem with the missing _apache module?
> > 
> > The test.py example does not work and I can not load _apache from the
> > python interpreter...

And dont use a 'test.py' script, there is a python package named 'test' and
things becam ugly. Use mptest.py or modtest.py or something...


-- 
Damjan Georgievski		|           ?????? ???????????
Skopje, Macedonia		|           ??????, ??????????

From arhiv at freemail.org.mk  Wed Dec 27 13:50:27 2000
From: arhiv at freemail.org.mk (Damjan)
Date: Fri Jan  9 21:58:44 2004
Subject: [mod_python] Multiple handlers in a single directory
Message-ID: <20001227135027.A224@localhost.localdomain>

I want to have multiple Python handlers in one directory, but each handling a
different type of file. Is there a way I can do this?

I imagined it could be done with a directive like this:
...
PythonAddHandler mod_python.publisher .py
PythonAddHandler myscripts.handler1 .pyml
PythonAddHandler myscripts.handler2 .html
...

How hard would it be to add a directive ike this?

Thanks.

-- 
Damjan Georgievski		|           ?????? ???????????
Skopje, Macedonia		|           ??????, ??????????

From grisha at ispol.com  Wed Dec 27 09:56:47 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:44 2004
Subject: [mod_python] Multiple handlers in a single directory
In-Reply-To: <20001227135027.A224@localhost.localdomain>
Message-ID: <Pine.LNX.4.21.0012270954460.28943-100000@saturn.ispol.com>

To be consistent, I would have to add a directive like this for every
phase....

A more or less simple alternative would be to write a handler that invokes
other handlers based on file extension.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Wed, 27 Dec 2000, Damjan wrote:

> I want to have multiple Python handlers in one directory, but each handling a
> different type of file. Is there a way I can do this?
> 
> I imagined it could be done with a directive like this:
> ...
> PythonAddHandler mod_python.publisher .py
> PythonAddHandler myscripts.handler1 .pyml
> PythonAddHandler myscripts.handler2 .html
> ...
> 
> How hard would it be to add a directive ike this?
> 
> Thanks.
> 
> -- 
> Damjan Georgievski		|           ???????????? ??????????????????????
> Skopje, Macedonia		|           ????????????, ????????????????????
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From jmcbray at bertrand.carcosa.net  Wed Dec 27 13:22:23 2000
From: jmcbray at bertrand.carcosa.net (Jason F. McBrayer)
Date: Fri Jan  9 21:58:44 2004
Subject: [mod_python] Multiple handlers in a single directory
In-Reply-To: <Pine.LNX.4.21.0012270954460.28943-100000@saturn.ispol.com>; from grisha@ispol.com on Wed, Dec 27, 2000 at 09:56:47AM -0500
References: <20001227135027.A224@localhost.localdomain> <Pine.LNX.4.21.0012270954460.28943-100000@saturn.ispol.com>
Message-ID: <20001227132223.A19070@bertrand.carcosa.net>

On Wed, Dec 27, 2000 at 09:56:47AM -0500, Gregory Trubetskoy wrote:
> 
> To be consistent, I would have to add a directive like this for every
> phase....
> 
> A more or less simple alternative would be to write a handler that invokes
> other handlers based on file extension.

This is what I'm doing currently.  It seems to be the best solution,
and it has its own kind of logic to it -- once you're in the handler,
you've handed things off to Python, so you might as well do all the
processing in Python instead of in the apache conf file.

-- 
+----------------------------------------------------------------+
| Jason F. McBrayer                         jmcbray@carcosa.net  |
| The scalloped tatters of the King in Yellow must hide Yhtill   |
| forever.                    R.W. Chambers _The King in Yellow_ |

From Mads at Kiilerich.com  Thu Dec 28 14:19:02 2000
From: Mads at Kiilerich.com (Mads Kiilerich)
Date: Fri Jan  9 21:58:44 2004
Subject: [mod_python] rpm-packaging and DESTDIR
Message-ID: <Pine.LNX.4.21.0012281410450.926-200000@localhost>

Hello,

I'm hacking the RedHat RPM specs.

First, I've found that 
	./configure --prefix=something 
has no effect at all. It should either be fixed or removed from
the documentation.

For RPM packaging installation in another directory than the one
compiled for is essential. Thus I suggest the attached patch. It
causes any installation to be done below $DESTDIR . If no
DESTDIR is defined in the environment it has no effect.

Also, could you please put the spec used to build rpms in cvs?
And could it be in the root, ie as mod_python/mod_python.spec?
(That makes rpm-building even easier; given a mod_python tar the
rpm's can be build with
	rpm -ta src/mod_python-2.7.1.tar.gz
)

I have some enhancements to the spec as well - but I'll sit on
them until the spec is in cvs.

Happy Newyear from

-- 
Mads Kiilerich          Sys.Adm. Cand.Polyt. Stud.Bibel.
Mads@Kiilerich.com      Tel. +45 26 20 07 73
Fxvqrevx! Fiva! Qrg re cvffrgneiryvtg ng xelcgrer zrq EBG-13.                   
-------------- next part --------------
Index: Makefile.in
===================================================================
RCS file: /cvsroot/modpython/mod_python/Makefile.in,v
retrieving revision 1.7
diff -u -u -r1.7 Makefile.in
--- Makefile.in	2000/12/06 03:05:37	1.7
+++ Makefile.in	2000/12/28 13:05:01
@@ -82,7 +82,7 @@
 	@echo
 	@echo "Performing DSO installation."
 	@echo
-	$(INSTALL) src/mod_python.so $(LIBEXECDIR)
+	$(INSTALL) src/mod_python.so $(DESTDIR)$(LIBEXECDIR)
 	@$(MAKE) install_py_lib
 	@echo
 	@echo "Now don't forget to edit your main config and add"
@@ -114,12 +114,12 @@
 	@echo
 
 install_py_lib:
-	$(INSTALL) -d $(PY_STD_LIB)/site-packages/mod_python
+	$(INSTALL) -d $(DESTDIR)$(PY_STD_LIB)/site-packages/mod_python
 	@for f in `ls lib/python/mod_python/*.py`; \
 	do \
-		$(INSTALL) $$f $(PY_STD_LIB)/site-packages/mod_python; \
+		$(INSTALL) $$f $(DESTDIR)$(PY_STD_LIB)/site-packages/mod_python; \
 	done
-	python $(PY_STD_LIB)/compileall.py $(PY_STD_LIB)/site-packages/mod_python
+	python $(PY_STD_LIB)/compileall.py $(DESTDIR)$(PY_STD_LIB)/site-packages/mod_python
 
 clean:
 	cd src && $(MAKE) clean
From Mads at Kiilerich.com  Thu Dec 28 14:25:05 2000
From: Mads at Kiilerich.com (Mads Kiilerich)
Date: Fri Jan  9 21:58:44 2004
Subject: [mod_python] -DEAPI fix
Message-ID: <Pine.LNX.4.21.0012281422310.926-200000@localhost>

Hello,

I've got the -DEAPI warning using mod_python with RedHat apache.
As mentioned on this list it shouldn't matter, but it is
annoying.

The attached patch fixes it for me. I'm not sure it is
TheRightWay to do it. Should everyone compile with -DEAPI? Or
should configure (con)figure it out? Should the OPT flag be
used? Or another introduced?

Regards,

-- 
Mads Kiilerich          Sys.Adm. Cand.Polyt. Stud.Bibel.
Mads@Kiilerich.com      Tel. +45 26 20 07 73
Fxvqrevx! Fiva! Qrg re cvffrgneiryvtg ng xelcgrer zrq EBG-13.                   
-------------- next part --------------
Index: src/Makefile.in
===================================================================
RCS file: /cvsroot/modpython/mod_python/src/Makefile.in,v
retrieving revision 1.7
diff -u -r1.7 Makefile.in
--- src/Makefile.in	2000/12/06 03:05:37	1.7
+++ src/Makefile.in	2000/12/28 13:17:06
@@ -52,7 +52,7 @@
 INCLUDES=@INCLUDES@
 LIBS=@LIBS@
 LDFLAGS=@LDFLAGS@
-OPT=
+OPT=-DEAPI
 CFLAGS=$(OPT) $(INCLUDES) 
 srcdir=.
 
@@ -76,7 +76,7 @@
 	@echo
 	@echo 'Compiling for DSO. For static, do "make static"'
 	@echo
-	$(APXS) $(INCLUDES) -c $(OBJS) $(LIBS)
+	$(APXS) $(OPT) $(INCLUDES) -c $(OBJS) $(LIBS)
 	@echo
 	@echo 'Now su and make install'
 	@echo '  (or, if you only want to perform a partial install,'
@@ -114,4 +114,4 @@
 serverobject.o: serverobject.c
 connobject.o: connobject.c
 
-# DO NOT DELETE THIS LINE
\ No newline at end of file
+# DO NOT DELETE THIS LINE
From Mads at Kiilerich.com  Thu Dec 28 14:41:33 2000
From: Mads at Kiilerich.com (Mads Kiilerich)
Date: Fri Jan  9 21:58:44 2004
Subject: [mod_python] doc-html and mkhowto
Message-ID: <Pine.LNX.4.21.0012281438480.926-100000@localhost>

Hello,

building html docs seems to require and mkhowto. 

Am I right that
mkhowto requires python 2.0? 

Still mod_python itself is only for
python <2.0?

Regards,
-- 
Mads Kiilerich          Sys.Adm. Cand.Polyt. Stud.Bibel.
Mads@Kiilerich.com      Tel. +45 26 20 07 73
Fxvqrevx! Fiva! Qrg re cvffrgneiryvtg ng xelcgrer zrq EBG-13.                   


From rsalz at CaveoSystems.com  Thu Dec 28 10:46:08 2000
From: rsalz at CaveoSystems.com (rsalz@CaveoSystems.com)
Date: Fri Jan  9 21:58:44 2004
Subject: [mod_python] -DEAPI fix
Message-ID: <200012281546.KAA26868@os390.caveosystems.com>

-


The -DEAPI flag adds extra fields to the end of the Apache "module"
structure.  If you compile some code with that flag, and some code
without that f lag, then you can -- and almost always will -- get some
modules that have bogus crap instead of NULL pointers.  This will
cause things to crash.

You *might* get lucky on some platforms sometime.  Do not count on it.

Always use -DEAPI or never do.  Do not mix.
	/r$

From grisha at ispol.com  Thu Dec 28 10:43:28 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:44 2004
Subject: [mod_python] doc-html and mkhowto
In-Reply-To: <Pine.LNX.4.21.0012281438480.926-100000@localhost>
Message-ID: <Pine.LNX.4.21.0012281038480.32595-100000@saturn.ispol.com>

On Thu, 28 Dec 2000, Mads Kiilerich wrote:

> Hello,
> 
> building html docs seems to require and mkhowto. 
> 
> Am I right that
> mkhowto requires python 2.0? 

In 1.5.2 it is distributed as part of the doc source distribution. It
requires a whole lot more than mkhowto, however. It needs a whole bunch of
TeX and LaTeX stuff and some other tools.

> Still mod_python itself is only for python <2.0?

mod_python is for 2.0 or 1.5.2 equally :-) I've been using 2.0 lately.

http://www.modpython.org/live/mod_python-2.7.1/doc-html/inst-prerequisites.html

Grisha


From grisha at ispol.com  Thu Dec 28 10:37:13 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:44 2004
Subject: [mod_python] rpm-packaging and DESTDIR
In-Reply-To: <Pine.LNX.4.21.0012281410450.926-200000@localhost>
Message-ID: <Pine.LNX.4.21.0012281020230.32595-100000@saturn.ispol.com>

On Thu, 28 Dec 2000, Mads Kiilerich wrote:

> Hello,
> 
> I'm hacking the RedHat RPM specs.
> 
> First, I've found that 
> 	./configure --prefix=something 
> has no effect at all. 

That is correct. There are two prefixes that depend on two things - the
Python location and the Apache location, both of which are predetermined.

> It should either be fixed or removed from the documentation.

I don't think it is in the documentation.

> For RPM packaging installation in another directory than the one
> compiled for is essential. Thus I suggest the attached patch. It
> causes any installation to be done below $DESTDIR . If no
> DESTDIR is defined in the environment it has no effect.

Antonio Navarro Navarro <hostmaster@bemarnet.es> has volunteered to create
RPM's, check with him. 

I would need some more convincing to add the mod_python.spec to cvs - I
really don't see why RedHat support whould be part of mod_python core
project. If we're going to maintin RPM's, then why not Debian packages,
sun packages, FreeBSD ports, Windows InstallShield, etc, etc.

I'm not saying these things are bad, I'm just saying they are outside the
scope of mod_python core, which is Apache/Python integration. At best
RPM's fall in the category of "contrib" stuff - if someone wants to
maintin them that is great, but I do not want to create the impression
that when a user downloads a mod_python.tgz that I somehow vouch for the
RedHat compatibility - because I don't. Not anymore than any other OS or
Linux distribution.

As far as I know, Debian already has a mod_python package that they
maintain under their CVS, FreeBSD has a mod_python port that is maintained
in the FreeBSD ports CVS. RPM support initiative should come from RedHat
if they find mod_python useful. Until that day, I'm willing to support a
spec and make RPM's downloadable, but I don't want RPM support to be part
of mod_python.

I hope I'm making sense here :-)

Grisha



From emm at scriptdigital.com  Thu Dec 28 12:07:38 2000
From: emm at scriptdigital.com (Emmanuel. M. Decarie)
Date: Fri Jan  9 21:58:44 2004
Subject: [mod_python] Publisher Handler
Message-ID: <v04220803b6711ecc58ee@[192.168.0.2]>

Hello,

I just tried the publisher handler with the "hello.py" example found 
in the manual:

>
>""" Publisher example """
>
>def say(req, what="NOTHING"):
>     return "I am saying %s" % what

http://www.modpython.org/live/mod_python-2.7.1/doc-html/hand-pub-intro.html

Its working fine. But I didn't find a way to send  some HTML. The 
publisher handler seems to always return "Content-Type: text/plain". 
How can I tell it  to return "Content-Type: text/html".

When I put at the top of the file "hello.py" this line:

from mod_python import apache

it look like that I can read the req object, but that I can't set values.

For example, If I rewrite the hello.py example:

from mod_python import apache

def say(req, what="NOTHING"):
	req.content_type = "text/html"
	req.send_http_header ()
	req.write (what)
	return apache.OK

And then try to access /hello.py/say, Apache is not serving the page.

I'm fairly new to Python, Apache and mod_python, so its a lot to swallow.

I'm using FreeBSD 4.0 and mod_python 2.7.1 and Python 2.0.

I like the way the publisher handler work, but I really need to have 
control on the HTTP headers returned by mod_python to be able to 
choose to publish plain text, html, or do redirection, send 404 code 
and so on.

TIA

Cheers

-Emmanuel
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Emmanuel D?carie - Consultant
   Programmation pour le Web - Programming for the Web
   UserLand Frontier  - Perl - JavaScript - AppleScript - HTML - XML
   http://www.scriptdigital.com

---> The Frontier Newbie Toolbox:
   <http://www.scriptdigital.com/fnt/frontierNewbieToolbox.html>

From grisha at ispol.com  Thu Dec 28 13:15:08 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:44 2004
Subject: [mod_python] Publisher Handler
In-Reply-To: <v04220803b6711ecc58ee@[192.168.0.2]>
Message-ID: <Pine.LNX.4.21.0012281312220.549-100000@saturn.ispol.com>

Try this:

def say(req, what="NOTHING"):
	req.content_type = "text/html"
        return "I am saying %s" % what
 

This is sort of a "bug"...  The publisher handler attempts to guess the
content_type, but *only* it isn't set already. Depending on your
configuration, Apache may take the liberty of setting it (in
mod_negotation for example). So far I haven't figured out a clean solution
to this.

Grisha
	

On Thu, 28 Dec 2000, Emmanuel. M. Decarie wrote:

> Hello,
> 
> I just tried the publisher handler with the "hello.py" example found 
> in the manual:
> 
> >
> >""" Publisher example """
> >
> >def say(req, what="NOTHING"):
> >     return "I am saying %s" % what
> 
> http://www.modpython.org/live/mod_python-2.7.1/doc-html/hand-pub-intro.html
> 
> Its working fine. But I didn't find a way to send  some HTML. The 
> publisher handler seems to always return "Content-Type: text/plain". 
> How can I tell it  to return "Content-Type: text/html".
> 
> When I put at the top of the file "hello.py" this line:
> 
> from mod_python import apache
> 
> it look like that I can read the req object, but that I can't set values.
> 
> For example, If I rewrite the hello.py example:
> 
> from mod_python import apache
> 
> def say(req, what="NOTHING"):
> 	req.content_type = "text/html"
> 	req.send_http_header ()
> 	req.write (what)
> 	return apache.OK
> 
> And then try to access /hello.py/say, Apache is not serving the page.
> 
> I'm fairly new to Python, Apache and mod_python, so its a lot to swallow.
> 
> I'm using FreeBSD 4.0 and mod_python 2.7.1 and Python 2.0.
> 
> I like the way the publisher handler work, but I really need to have 
> control on the HTTP headers returned by mod_python to be able to 
> choose to publish plain text, html, or do redirection, send 404 code 
> and so on.
> 
> TIA
> 
> Cheers
> 
> -Emmanuel
> ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
> Emmanuel D?carie - Consultant
>    Programmation pour le Web - Programming for the Web
>    UserLand Frontier  - Perl - JavaScript - AppleScript - HTML - XML
>    http://www.scriptdigital.com
> 
> ---> The Frontier Newbie Toolbox:
>    <http://www.scriptdigital.com/fnt/frontierNewbieToolbox.html>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From Mads at Kiilerich.com  Thu Dec 28 20:36:33 2000
From: Mads at Kiilerich.com (Mads Kiilerich)
Date: Fri Jan  9 21:58:44 2004
Subject: [mod_python] rpm-packaging and DESTDIR
In-Reply-To: <Pine.LNX.4.21.0012281020230.32595-100000@saturn.ispol.com>
Message-ID: <Pine.LNX.4.21.0012282026060.926-100000@localhost>

Today I got mail from Gregory Trubetskoy:

> > It should either be fixed or removed from the documentation.
> 
> I don't think it is in the documentation.

It is in ./configure --help IIRC.

> > For RPM packaging installation in another directory than the one
> > compiled for is essential. Thus I suggest the attached patch. It
> > causes any installation to be done below $DESTDIR . If no
> > DESTDIR is defined in the environment it has no effect.
> 
> Antonio Navarro Navarro <hostmaster@bemarnet.es> has volunteered to create
> RPM's, check with him. 

OK. But the patch I sent (or some kind of working --prefix) is
very usefull for any kind of packaging and non-root-compilation.
Thus I still suggest the patch.

...
> As far as I know, Debian already has a mod_python package that they
> maintain under their CVS, FreeBSD has a mod_python port that is maintained
> in the FreeBSD ports CVS. RPM support initiative should come from RedHat
> if they find mod_python useful. Until that day, I'm willing to support a
> spec and make RPM's downloadable, but I don't want RPM support to be part
> of mod_python.

OK. But IMHO: In order to make sure that cvs-mod_python works
under any OS the compilation and packaging for them should be
supplied in the cvs/tar. You do use configure scripts for a
reason, right? 

That's my opinion - and as it is TheRightOne you should have the
same! ;)

Roger and over,

-- 
Mads Kiilerich          Sys.Adm. Cand.Polyt. Stud.Bibel.
Mads@Kiilerich.com      Tel. +45 26 20 07 73
Fxvqrevx! Fiva! Qrg re cvffrgneiryvtg ng xelcgrer zrq EBG-13.                   


From bbhaydon at bigpond.com  Sun Dec 31 17:19:30 2000
From: bbhaydon at bigpond.com (Brett Haydon)
Date: Fri Jan  9 21:58:45 2004
Subject: [mod_python] Threads in mod_python - Publisher Handler (Just starting)
Message-ID: <NCBBKMABOKFCDLPIKKGIEEJBCCAA.bbhaydon@bigpond.com>

I'm just trying to come to grips with the
excellent Publisher Handler (on Win32).

I thought function calls are executed sequentially,
(ie browser1 executes func1 then browser2 exec func1)
but testing some code, (trimmed slightly):

cache{}
def func(req):

    while 1:
        cache[users.cookie] = [random.random()]

    return never

it appears that calling func() in multiple browsers
will start a thread in each of them that goes on until the
server is stopped.

I am trying to work out the implications for calls that
bump into each other (especially database calls) that share
objects. A quick test by starting some threads in a script
that call the same URLs (which have database functions)
appears to confirm this, in that in six threads up to three of them
apparantly produce a blank page.

Has anyone come up with strategies to deal with this.

regards,

Brett


From jsliv at jslove.org  Sun Dec 31 14:43:34 2000
From: jsliv at jslove.org (Jay Love)
Date: Fri Jan  9 21:58:45 2004
Subject: [mod_python] server.register_cleanup
Message-ID: <3A4F8C66.4000705@jslove.org>

Hi folks.

I'm having trouble using this function.  It gives me an error and tells 
me that the first argument must be a request object, which it is.

Here's the offending line, from the top of my handler function:

handler(self, req):
	res.server.register_callback(req, self.cleanup_func)

Any thoughts on what's going wrong?

I'm using Apache 1.3.14, RH 7.0, mod_python 2.6.3

Jay


From grisha at ispol.com  Sun Dec 31 15:21:52 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:45 2004
Subject: [mod_python] server.register_cleanup
In-Reply-To: <3A4F8C66.4000705@jslove.org>
Message-ID: <Pine.LNX.4.21.0012311519480.21119-100000@saturn.ispol.com>

this is a sideffect of a bug in 2.6.3, which is fixed in 2.6.4

I recommend upgrading to 2.7.1

Grisha

On Sun, 31 Dec 2000, Jay Love wrote:

> 
> Hi folks.
> 
> I'm having trouble using this function.  It gives me an error and tells 
> me that the first argument must be a request object, which it is.
> 
> Here's the offending line, from the top of my handler function:
> 
> handler(self, req):
> 	res.server.register_callback(req, self.cleanup_func)
> 
> Any thoughts on what's going wrong?
> 
> I'm using Apache 1.3.14, RH 7.0, mod_python 2.6.3
> 
> Jay
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From jsliv at jslove.org  Sun Dec 31 15:33:28 2000
From: jsliv at jslove.org (Jay Love)
Date: Fri Jan  9 21:58:45 2004
Subject: [mod_python] server.register_cleanup
References: <Pine.LNX.4.21.0012311519480.21119-100000@saturn.ispol.com>
Message-ID: <3A4F9818.2020209@jslove.org>

I did, and it still happens.  Are you sure it's fixed?

Jay


Gregory Trubetskoy wrote:

> this is a sideffect of a bug in 2.6.3, which is fixed in 2.6.4
> 
> I recommend upgrading to 2.7.1
> 
> Grisha
> 
> On Sun, 31 Dec 2000, Jay Love wrote:
> 
>> Hi folks.
>> 
>> I'm having trouble using this function.  It gives me an error and tells 
>> me that the first argument must be a request object, which it is.
>> 
>> Here's the offending line, from the top of my handler function:
>> 
>> handler(self, req):
>> 	res.server.register_callback(req, self.cleanup_func)
>> 
>> Any thoughts on what's going wrong?
>> 
>> I'm using Apache 1.3.14, RH 7.0, mod_python 2.6.3
>> 
>> Jay
>> 
>> _______________________________________________
>> Mod_python mailing list
>> Mod_python@modpython.org
>> http://www.modpython.org/mailman/listinfo/mod_python
>> 



From grisha at ispol.com  Sun Dec 31 15:39:37 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:45 2004
Subject: [mod_python] server.register_cleanup
In-Reply-To: <3A4F9818.2020209@jslove.org>
Message-ID: <Pine.LNX.4.21.0012311537040.21119-100000@saturn.ispol.com>

Ah, I see what's going on. It expecting a different kind of request
object, the old built-in one, which is no req._req.

try this:

	req.server.register_cleanup(req._req, ...)

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Sun, 31 Dec 2000, Jay Love wrote:

> 
> I did, and it still happens.  Are you sure it's fixed?
> 
> Jay
> 
> 
> Gregory Trubetskoy wrote:
> 
> > this is a sideffect of a bug in 2.6.3, which is fixed in 2.6.4
> > 
> > I recommend upgrading to 2.7.1
> > 
> > Grisha
> > 
> > On Sun, 31 Dec 2000, Jay Love wrote:
> > 
> >> Hi folks.
> >> 
> >> I'm having trouble using this function.  It gives me an error and tells 
> >> me that the first argument must be a request object, which it is.
> >> 
> >> Here's the offending line, from the top of my handler function:
> >> 
> >> handler(self, req):
> >> 	res.server.register_callback(req, self.cleanup_func)
> >> 
> >> Any thoughts on what's going wrong?
> >> 
> >> I'm using Apache 1.3.14, RH 7.0, mod_python 2.6.3
> >> 
> >> Jay
> >> 
> >> _______________________________________________
> >> Mod_python mailing list
> >> Mod_python@modpython.org
> >> http://www.modpython.org/mailman/listinfo/mod_python
> >> 
> 
> 


From jsliv at jslove.org  Sun Dec 31 15:52:18 2000
From: jsliv at jslove.org (Jay Love)
Date: Fri Jan  9 21:58:45 2004
Subject: [mod_python] server.register_cleanup
References: <Pine.LNX.4.21.0012311537040.21119-100000@saturn.ispol.com>
Message-ID: <3A4F9C82.6040303@jslove.org>

That got it.

Thanks-

Jay


Gregory Trubetskoy wrote:

> Ah, I see what's going on. It expecting a different kind of request
> object, the old built-in one, which is no req._req.
> 
> try this:
> 
> 	req.server.register_cleanup(req._req, ...)
> 
> --
>   Gregory (Grisha) Trubetskoy
>        grisha@ispol.com
> 
> On Sun, 31 Dec 2000, Jay Love wrote:
> 
>> I did, and it still happens.  Are you sure it's fixed?
>> 
>> Jay
>> 
>> 
>> Gregory Trubetskoy wrote:
>> 
>>> this is a sideffect of a bug in 2.6.3, which is fixed in 2.6.4
>>> 
>>> I recommend upgrading to 2.7.1
>>> 
>>> Grisha
>>> 
>>> On Sun, 31 Dec 2000, Jay Love wrote:
>>> 
>>>> Hi folks.
>>>> 
>>>> I'm having trouble using this function.  It gives me an error and tells 
>>>> me that the first argument must be a request object, which it is.
>>>> 
>>>> Here's the offending line, from the top of my handler function:
>>>> 
>>>> handler(self, req):
>>>> 	res.server.register_callback(req, self.cleanup_func)
>>>> 
>>>> Any thoughts on what's going wrong?
>>>> 
>>>> I'm using Apache 1.3.14, RH 7.0, mod_python 2.6.3
>>>> 
>>>> Jay
>>>> 
>>>> _______________________________________________
>>>> Mod_python mailing list
>>>> Mod_python@modpython.org
>>>> http://www.modpython.org/mailman/listinfo/mod_python
>>>> 



From Lisa  Mon Dec  4 22:18:18 2000
From: Lisa (Lisa)
Date: Fri Jan  9 22:02:32 2004
Subject: [mod_python] RE: Answer To Your Question.
Message-ID: <200012042025.UAA03461@mercury.ispol.com>

An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20001204/e8402cf1/attachment-0003.htm
From arhiv at freemail.org.mk  Mon Dec  4 22:25:25 2000
From: arhiv at freemail.org.mk (Damjan)
Date: Fri Jan  9 22:02:32 2004
Subject: [mod_python] apache.send_file()
Message-ID: <Pine.LNX.4.30.0012042218140.460-100000@localhost.localdomain>

Is there a point in having something like
apache.send_file(PyObject * file) or apache.send_file(char * filename)

Of course I can do this with:
	f = open(...
	buf = f.read()
	req.write(buf)
but perhaps using apache calls will be faster.

-- 
Damjan Georgievski		|           ?????? ???????????
Skopje, Macedonia		|           ??????, ??????????


From grisha at ispol.com  Tue Dec  5 11:42:55 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:32 2004
Subject: [mod_python] apache.send_file()
In-Reply-To: <Pine.LNX.4.30.0012042218140.460-100000@localhost.localdomain>
Message-ID: <Pine.LNX.4.21.0012051133220.16800-100000@saturn.ispol.com>

Yeah, it will be faster.... (req.write(f.read()) is going to be pretty
damn fast too) I didn't bother implementing that one since I figured 99.9%
of the content will be dynamically generated. I'll see if I can implement
something in the next version.

Grisha

On Mon, 4 Dec 2000, Damjan wrote:

> Is there a point in having something like
> apache.send_file(PyObject * file) or apache.send_file(char * filename)
> 
> Of course I can do this with:
> 	f = open(...
> 	buf = f.read()
> 	req.write(buf)
> but perhaps using apache calls will be faster.
> 
> -- 
> Damjan Georgievski		|           ???????????? ??????????????????????
> Skopje, Macedonia		|           ????????????, ????????????????????
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From jb4mt at yahoo.com  Tue Dec  5 10:10:09 2000
From: jb4mt at yahoo.com (George Jempty)
Date: Fri Jan  9 22:02:32 2004
Subject: [mod_python] Site redesign
Message-ID: <20001205181009.26474.qmail@web3904.mail.yahoo.com>

I just subscribed to this list because I'm having
problems getting mod_python to work on my Windows 2000
system.  I plan on digging a little deeper on my own
first, but in the event I need to come back here I'm
trying to establish some good karma by working on the
site design as requested on the home page.  You can
see what I've come up with at:

http://webfielding.com/mod_python/

It's by no means complete but I think should give an
idea of the possiblities for organizing the site.  And
as for color, at first I thought the plum-colored
banner was too garish, and tried "thistle" instead,
but I'm liking plum more and more!

However, you can see the page with a thistle-colored
banner at:

http://webfielding.com/mod_python/thistle.htm

I'll look forward to everyone's feedback!

George

__________________________________________________
Do You Yahoo!?
Yahoo! Shopping - Thousands of Stores. Millions of Products.
http://shopping.yahoo.com/

From grisha at ispol.com  Tue Dec  5 16:03:59 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:32 2004
Subject: [mod_python] Site redesign
In-Reply-To: <20001205181009.26474.qmail@web3904.mail.yahoo.com>
Message-ID: <Pine.LNX.4.21.0012051602010.16800-100000@saturn.ispol.com>

Thanks George, this looks good I might put it out on the main site.

This sort of reorganization is long overdue. I've got another submission
of a site deisgn that I'm still holding on to partly because I don't have
time to put it out, partly because I'm hoping something better will come
around...

P.S. One comment - I'm not a big fan of frames....

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Tue, 5 Dec 2000, George Jempty wrote:

> I just subscribed to this list because I'm having
> problems getting mod_python to work on my Windows 2000
> system.  I plan on digging a little deeper on my own
> first, but in the event I need to come back here I'm
> trying to establish some good karma by working on the
> site design as requested on the home page.  You can
> see what I've come up with at:
> 
> http://webfielding.com/mod_python/
> 
> It's by no means complete but I think should give an
> idea of the possiblities for organizing the site.  And
> as for color, at first I thought the plum-colored
> banner was too garish, and tried "thistle" instead,
> but I'm liking plum more and more!
> 
> However, you can see the page with a thistle-colored
> banner at:
> 
> http://webfielding.com/mod_python/thistle.htm
> 
> I'll look forward to everyone's feedback!
> 
> George
> 
> __________________________________________________
> Do You Yahoo!?
> Yahoo! Shopping - Thousands of Stores. Millions of Products.
> http://shopping.yahoo.com/
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From jb4mt at yahoo.com  Tue Dec  5 14:50:47 2000
From: jb4mt at yahoo.com (George Jempty)
Date: Fri Jan  9 22:02:32 2004
Subject: [mod_python] Can't configure under Windows NT and Windows 2000
Message-ID: <20001205225047.17197.qmail@web3901.mail.yahoo.com>

When following the Windows installation instructions
for mod_python.py verbatim, I get the same error
message when trying to run test.py, under both NT4 and
Windows 2000.  That message is:

python_handler: make_obcallback returned no
obCallBack!

Your help in solving this problem will be appreciated.
 Also I have some comments about the install
instructions at:

http://www.modpython.org/live/mod_python-2.6.3/doc/windows.html

that might or might not shed light on my problem.

First of all these instructions only mention 1.52
whereas I'm running Python 2.0; I did however download
the .dll for 2.0 from the home page (NOT the 1.52
.dll).

Secondly, just to be certain, I downloaded the one and
only .tgz installation from the home page: does this
work for both Windows AND Linux?!

Furthermore, in contradiction to the Windows
installation doc, when I unzip the .tgz file I do NOT
get a "new folder".  Rather I get another .tar file;
extrapolating from the instructions, however, I just
extracted this to my python/lib folder
(C:\Python20\Lib), which resulted in a subfolder under
lib named "mod_python-2.6.3".

Moving on to the Apache Integration section of the
install, I stopped and re-started Apache after each
directive I added, to be certain!  However I do find
the instructions about the ScriptAlias/CGI section of
httpd.conf to be confusing: these aren't necessarily
the same thing.

On the first install (on Windows 2000) I added the
indicated directives to the others for my CGI
directory.  On the subsequent NT install I instead
followed the instructions verbatim, creating a
"python" directory under my document_root "htdocs"
directory.  Regardless, as noted above, I got the same
error message for both installs.

Finally, please note that as a final control I created
a test.py program in my cgi-bin as follows:

#! C:\Python20\python.exe

print "Content-type: text/html\n\n"
print "Whatever"

And it ran flawlessly.  So my Apache and Python are
working properly (and I can proceed to develop my
application if solving this problem doesn't happen
overnight ;)

OK, I will look forward to whatever light anybody in
the group can shed on this.  If I'm being an idiot
please be gentle.  On the other hand if any of my
comments are useful I would not mind getting involved
in revising the install docs (PS, the
installation.html that I extracted is not the same as
the installation for windows doc on the website)

Thanks in advance

George Jempty

__________________________________________________
Do You Yahoo!?
Yahoo! Shopping - Thousands of Stores. Millions of Products.
http://shopping.yahoo.com/

From djc at object-craft.com.au  Wed Dec  6 16:58:25 2000
From: djc at object-craft.com.au (Dave Cole)
Date: Fri Jan  9 22:02:32 2004
Subject: [mod_python] How do I find the document root?
Message-ID: <m3bsuqum4e.fsf@vole.object-craft.com.au>

I want to find out the value of the DocumentRoot directive.  I cannot
see any way to do this.

Can someone please point me in the right direction?

- Dave

-- 
http://www.object-craft.com.au


From grisha at ispol.com  Wed Dec  6 09:54:57 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:32 2004
Subject: [mod_python] How do I find the document root?
In-Reply-To: <m3bsuqum4e.fsf@vole.object-craft.com.au>
Message-ID: <Pine.LNX.4.21.0012060953250.20782-100000@saturn.ispol.com>

This may be a roundabout way of doing this, but you could use the
req.server.defn_name and req.server.defn_line_number to read the
DocumentRoot from the config file.

I haven't had my coffee yet, so I hope the above makes sense.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On 6 Dec 2000, Dave Cole wrote:

> I want to find out the value of the DocumentRoot directive.  I cannot
> see any way to do this.
> 
> Can someone please point me in the right direction?
> 
> - Dave
> 
> -- 
> http://www.object-craft.com.au
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From djc at object-craft.com.au  Thu Dec  7 10:01:57 2000
From: djc at object-craft.com.au (Dave Cole)
Date: Fri Jan  9 22:02:32 2004
Subject: [mod_python] How do I find the document root?
In-Reply-To: Gregory Trubetskoy's message of "Wed, 6 Dec 2000 09:54:57 -0500 (EST)"
References: <Pine.LNX.4.21.0012060953250.20782-100000@saturn.ispol.com>
Message-ID: <m3n1e99msa.fsf@vole.object-craft.com.au>

>>>>> "Gregory" == Gregory Trubetskoy <grisha@ispol.com> writes:

Gregory> This may be a roundabout way of doing this, but you could use
Gregory> the req.server.defn_name and req.server.defn_line_number to
Gregory> read the DocumentRoot from the config file.

Gregory> I haven't had my coffee yet, so I hope the above makes sense.

Yup, that makes sense.  It is not what I would call an ideal solution
though :-).

The other thing that I was trying to work out was how to direct all
requests below a certain directory to a single python program.  When
the request is referring to a directory, mod_dir/mod_autoindex kick
in.  I have come up with some mod_rewrite directives, but again, I
wish there were another way to just disable those modules below that
directory.

RewriteEngine on
RewriteRule ^$ main
RewriteRule .*/$ main
SetHandler python-program
PythonHandler main

- Dave

-- 
http://www.object-craft.com.au


From rayvd at firetail.org  Thu Dec  7 12:04:27 2000
From: rayvd at firetail.org (Ray Van Dolson)
Date: Fri Jan  9 22:02:32 2004
Subject: [mod_python] mod_python compiles fine, but gives errors...
Message-ID: <Pine.LNX.4.21.0012071201001.20882-100000@hotnest.firetail.org>

I'm compiling mod_python (latest version) as DSO into Apache 1.3.12
against a Python source tree with no threads.  Everything compiles fine
and even seems to install fine.  However, when starting up apache, it
gives me the following error:

[Thu Dec  7 11:58:16 2000] [warn] Loaded DSO libexec/mod_python.so usesplain Apache 1.3 API, this module might crash under EAPI! (please recompile it with -DEAPI)
[Thu Dec  7 11:58:16 2000] [notice] Apache/1.3.12 (Unix) mod_ssl/2.6.2 OpenSSL/0.9.4 mod_python/2.6.3 Python/1.5.2 mod_perl/1.22 PHP/3.0.16 configured -- resuming normal operations

What is this EAPI warning?  Should I worry about it?  Is it related in any
way to the following error I get when running the test program?  (This is
from the error_log file):

make_obcallback(): could not import mod_python.apache.
make_obcallback(): could not call init.
[Thu Dec  7 11:58:35 2000] [error] [client 199.236.177.11] python_handler: make_obcallback returned no obCallBack!

Apache is running as user nobody, which I read might pose a problem.  But
all the Python modules should be readable by this user.

Any ideas?

Ray Van Dolson


From greg at abbas.org  Thu Dec  7 14:47:07 2000
From: greg at abbas.org (Greg Abbas)
Date: Fri Jan  9 22:02:32 2004
Subject: [mod_python] python_handler: Dispatch() returned nothing.
Message-ID: <3A30136A.E3E6B4F2@abbas.org>

Hi all,

I'm running mod_python 2.6.3 with Apache 1.3.14 on RH 6.2, and it was
working well for a while, but now I've started running into a big
problem. Help please! I've got several name-based virtual hosts (i.e.,
on the same IP address), and I want to send requests to different
handlers, because I'm running several instances of Webware/WebKit
(http://webware.sourceforge.net/). What happens is that as the server
runs, I get more and more "internal server errors". The log shows the
following:

    python_handler: Dispatch() returned nothing.

After I restart the server, it seems to happen a little less (for a
short while). Any idea why this might be happening?

Before I set up the different host names, I was using different ports to
dispatch requests. I didn't get the above-mentioned error, but I got
other strange behavior: PythonPath didn't seem to work on a
per-VirtualHost basis. I set different paths for the different virtual
hosts, but they seemed to be executing code that was only in the other
virtual host's path. I'm not sure, but I think PythonHandler was
"bleeding over" between different virtual hosts, too. I am supposed to
be able to set these parameters differently for each VirtualHost
section, and invoke different handlers for each virtual host?

thanks,
-g.


--
Greg Abbas
greg@abbas.org
http://www.abbas.org



From rayvd at firetail.org  Thu Dec  7 15:15:31 2000
From: rayvd at firetail.org (Ray Van Dolson)
Date: Fri Jan  9 22:02:32 2004
Subject: [mod_python] mod_python compiles fine, but gives errors...
Message-ID: <Pine.LNX.4.21.0012071514490.24101-100000@hotnest.firetail.org>

Did a few things to check out the permissions possibility.  I su'd to root
and then su -'d to nobody.  I can access all the Python directories just
fine that way... Also, just to be sure, I changed the user that apache
runs at to one that I know has access to the Python directories (in this
case, myself).  However, the same problem occurs (same output in error_log
as well).

I have noticed some strange things, however.  When logged in in my normal
user account, if I fire up python and try to do a

import mod_python.apache

I get this:
>>> import mod_python.apache
Traceback (innermost last):
  File "<stdin>", line 1, in ?
  File "/usr/local/lib/python1.5/site-packages/mod_python/apache.py", line
19, in ?
    import _apache
ImportError: No module named _apache

While I see an apache.pyc along with a few other files, there is certainly
no _apache module file.  I notice that in the src tarball for mod_python
there is a file _apachemodule.c and _apachemodule.o.  Is this what python
needs to be loading?

Anyways, hoping to get this figured out.  Thanks for any help. :)

Ray Van Dolson





From Michael.Tellenbroeker at gmx.de  Fri Dec  8 16:34:52 2000
From: Michael.Tellenbroeker at gmx.de (Michael =?ISO-8859-1?Q?Tellenbr=F6ker?=)
Date: Fri Jan  9 22:02:32 2004
Subject: [mod_python] (no subject)
Message-ID: <3241.976289692@www19.gmx.net>

Hello everybody,
I have a little, possibly off-topic, question. I'm trying to connect to a
remote Informix-database, using Apache, mod_python and informixdb.
Stand-alone-access via informixdb runs like a charm, without trying to import
informixdb my mod_python-test-scripts run fine, too. Trying to import informixdb
into my mod_python scripts, I get following message:
  ImportError: Cannot locate C core module for informix db interface.

What's up? Knowing nearly nothing about apache-configuration I appreciate
any help

Thanks in advance
Michael 

-- 
Sent through GMX FreeMail - http://www.gmx.net


From arhiv at freemail.org.mk  Fri Dec  8 19:54:16 2000
From: arhiv at freemail.org.mk (Damjan)
Date: Fri Jan  9 22:02:32 2004
Subject: [mod_python] Small sugestion
Message-ID: <20001208195416.A552@localhost.localdomain>

Hi, Grisha.
I've noticed a lot of complaints about that 'make_obcallback...' errors in the
apache log. These are very often problems with the python path.
So I sugest you add the following two lines in make_obcallback:
(Here is a diff against 2.6.3)

--- mod_python.c.bak	Mon Dec  4 10:59:15 2000
+++ mod_python.c	Fri Dec  8 19:47:41 2000
@@ -479,6 +479,8 @@
 
     if (! ((m = PyImport_ImportModule(MODULENAME)))) {
 	fprintf(stderr, "make_obcallback(): could not import %s.\n", MODULENAME);
+	fprintf(stderr, "make_obcallback(): %s not found in %s.\n", MODULENAME, Py_GetPath());
+	return NULL;
     }
     
     if (! ((obCallBack = PyObject_CallMethod(m, INITFUNC, NULL)))) {

The 'return NULL;' is for the make_obcallback to return as soon as posible 
(and there's no reason to try and call the method when the module was not
loaded), and the apache log will be cleaner.



-- 
Damjan Georgievski		|           ?????? ???????????
Skopje, Macedonia		|           ??????, ??????????

From gstein at lyra.org  Sat Dec  9 05:08:43 2000
From: gstein at lyra.org (Greg Stein)
Date: Fri Jan  9 22:02:32 2004
Subject: [mod_python] Re: A Mod_python error Question
Message-ID: <20001209050843.C30644@lyra.org>

crap... missed the address the first time :-)

----- Forwarded message from Mail Delivery System <MAILER-DAEMON@python.org> -----
>...
From: Greg Stein <gstein@lyra.org>
To: mod_python@python.org
Cc: webmaster <webmaster@startcom.org>

mod_python people...

Could somebody please help this user? At first, I thought it was something
related to DAV, but apparently not. This is out of my area of expertise, but
I'm sure somebody in this forum can help.

Cheers,
-g

On Sat, Dec 09, 2000 at 12:13:38PM -0800, webmaster wrote:
> Hi Greg,
> 
> My problem is *not* mod_dav, DAV is running perfect. I don't want to learn
> right now python (You can't learn just everything). I just added mod_python
> support to one of our servers. Now, I tested it with the test-script
> provided with the contribution, which works well. But to test it, I needed
> to add some handler-stuff to the httpd.conf. So, the only question is
> really, which GLOBAL directive I have to input to the httpd.conf like for
> cgi > AddHandler cgi-script .pl .cgi  or for php I have > AddType
> application/x-httpd-php .php . I added like in the example from mod_python
> AddHandler python-program .py . But this does not seam to work for generally
> getting python executed. And I didn't found anything in mod_python-docs,
> sorry.
> 
> For any help I thank you very much.
> 
> Company:    StartCom (Group)
> Homepage:  http://www.startcom.org
> Branches:    MediaDesign Ltd. at http://mediadesign.startcom.org
>                    MediaHost Ltd. at http://mediahost.startcom.org
> 
> Signer: Eddy Nigg
> 
> ----- Original Message -----
> From: "Greg Stein" <gstein@lyra.org>
> To: "webmaster" <webmaster@startcom.org>
> Sent: Friday, December 08, 2000 2:10 PM
> Subject: Re: A Mod_python error Question
> 
> 
> > If you're using mod_dav, then the installation instructions are at:
> >     http://www.webdav.org/mod_dav/install.html
> >
> > davlib.py is *not* something that you would use as a "handler" in
> > mod_python. There isn't anything that you'd add to the httpd.conf for it.
> >
> > What are you trying to do? That might help me to at least point you in the
> > correct direction.
> >
> > At a minimum, if you are trying to learn Python, then go to
> > http://www.python.org/docs/ and reading the tutorial and some of the other
> > starter guides there.
> >
> > Cheers,
> > -g
> >
> > On Fri, Dec 08, 2000 at 02:46:59PM -0800, webmaster wrote:
> > > Yeah I know that,
> > >
> > > I'd like to know which config I have to enter in httpd.conf, like:
> > > PythonHandler or what?
> > > The DAV Server is successfully installed and already tested.
> > > Thanks if you could give me here some advice for your script and python
> in
> > > general, especially as I saw, that you are also a member of Apache.
> > >
> > > Regards
> > >
> > > Company:    StartCom (Group)
> > > Homepage:  http://www.startcom.org
> > > Branches:    MediaDesign Ltd. at http://mediadesign.startcom.org
> > >                    MediaHost Ltd. at http://mediahost.startcom.org
> > >
> > > Signer: Eddy Nigg
> > >
> > > ----- Original Message -----
> > > From: "Greg Stein" <gstein@lyra.org>
> > > To: "webmaster" <webmaster@startcom.org>
> > > Sent: Friday, December 08, 2000 4:36 AM
> > > Subject: Re: A Mod_python error Question
> > >
> > >
> > > > davlib.py is not intended as a handler module for mod_python. It is a
> > > > support module to be imported by other Python code. More specifically:
> it
> > > is
> > > > a DAV *client* ... not a server.
> > > >
> > > > If you want to DAV-enable your server, then use mod_dav.
> > > >
> > > > Cheers,
> > > > -g
> > > >
> > > > On Wed, Dec 06, 2000 at 12:27:01AM -0800, webmaster wrote:
> > > > > Hi Greg Stein,
> > > > >
> > > > > I tried to run your davlib-script, but not beeing a expert in python
> I
> > > kindly request your help. I installed mod_phyton for this purpose on the
> > > server and also expat. But somehow I don't see any information how to
> > > configure the conf-file so I don't get this error:
> > > > > Mod_python error: "PythonHandler davlib"
> > > > >
> > > > > Traceback (innermost last):
> > > > >
> > > > >   File "/usr/lib/python1.5/site-packages/mod_python/apache.py", line
> > > 178, in Dispatch
> > > > >     object = self.resolve_object(module, object_str)
> > > > >
> > > > >   File "/usr/lib/python1.5/site-packages/mod_python/apache.py", line
> 88,
> > > in resolve_object
> > > > >     raise AttributeError, s
> > > > >
> > > > > AttributeError: module '/home/startcom/www/davclient/davlib.pyc'
> > > contains no 'handler'
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > > Company:    StartCom (Group)
> > > > > Homepage:  http://www.startcom.org
> > > > > Branches:    MediaDesign Ltd. at http://mediadesign.startcom.org
> > > > >                    MediaHost Ltd. at http://mediahost.startcom.org
> > > > >
> > > > > Signer: Eddy Nigg
> > > > >
> > > >
> > > >
> > > >
> > > > --
> > > > Greg Stein, http://www.lyra.org/
> >
> >
> >
> > --
> > Greg Stein, http://www.lyra.org/



-- 
Greg Stein, http://www.lyra.org/


----- End forwarded message -----

-- 
Greg Stein, http://www.lyra.org/

From aiglauer at yahoo.com  Mon Dec 11 00:22:42 2000
From: aiglauer at yahoo.com (Alexis Iglauer)
Date: Fri Jan  9 22:02:32 2004
Subject: [mod_python] Writing to browser from C module
Message-ID: <20001211082242.11132.qmail@web2204.mail.yahoo.com>

Hi, 

me again - and with the same problem as before, just different :)

I have a Python handler which calls a C function - said C function
sometimes taking a long time to return (3+ minutes), long enough for
the browser to time out.  The way to keep the browser happy is to
occasionally send a few bytes of data its way (tried and tested).

So, I somehow need to execute req.write from inside the calculation
loop.  So I need to either a) call the python function req.write from
inside the C function or b) call the ap.rwrite (or similar) function
from inside my C loop.  Either way, I have to pass a pointer of some
form from the Python to C so that I can execute the function.  The best
result I have had so far has been a Segfault from Apache :(

I am currently wrapping my C function using SWIG, put I can pass
PyObjects directly if necessary.  Speed would be a bonus (how efficient
is it to call a Python function from inside C?).

Can anyone help me here?

Regards
Alexis


__________________________________________________
Do You Yahoo!?
Yahoo! Shopping - Thousands of Stores. Millions of Products.
http://shopping.yahoo.com/

From grisha at ispol.com  Tue Dec 12 10:35:06 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:32 2004
Subject: [mod_python] 2.6.4
Message-ID: <Pine.LNX.4.21.0012121029270.20083-100000@saturn.ispol.com>

There is a 2.6.4 available for download now. This is a bugfix release only
and has no new features. It should fix the problem that would manifest
itself by Internal Server Errors and "Dispatch() returned nothing" in the
error log. 

If you're using DSO, you will only need to replace mod_python.so. There
are no changes in the python libraries. I do recommend that you upgrade,
especially is you use multuple virtual servers/interpreters.

Windows users do not need to worry about upgrading, they were not affected
by the problem.

The bug had to do with misplaced #ifdef WITH_THREAD which caused
mod_python not to switch subinterpreters correctly and make python run in
restriced mode, in which __dict__ and some other things are not available.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com



From grisha at ispol.com  Wed Dec 13 18:58:47 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:32 2004
Subject: [mod_python] opensbd anyone?
Message-ID: <Pine.LNX.4.21.0012131857060.24979-100000@saturn.ispol.com>

Anyone out there use mod_python on Open BSD? There is a bug reported on
sourceforge
https://sourceforge.net/bugs/?func=detailbug&bug_id=123047&group_id=7107 I
would like to know if anyone can verify this.

Thanks!

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com


From gerhard.nospam at bigfoot.de  Thu Dec 14 19:26:52 2000
From: gerhard.nospam at bigfoot.de (Gerhard =?iso-8859-1?Q?H=E4ring?=)
Date: Fri Jan  9 22:02:33 2004
Subject: [mod_python] opensbd anyone?
References: <Pine.LNX.4.21.0012131857060.24979-100000@saturn.ispol.com>
Message-ID: <3A3910EC.8DD930FE@bigfoot.de>

I was the one who originally submitted the bug. I was silly enough to
assume that the Apache API didn't change between 1.3.12 and 1.3.14 (the
mod_python win32 build is for 1.3.14, while I used 1.3.12). Now I tried
to verify the bug under Apache 1.3.14, and it seems as if there never
was any bug wrt to win32 and SMP. mod_python now survives a stress test
with concurrent requests from another host. Sorry for the inconvenience.

Gerhard

Gregory Trubetskoy wrote:
> 
> [snip] There is a bug reported on
> sourceforge
> https://sourceforge.net/bugs/?func=detailbug&bug_id=123047&group_id=7107 I
> would like to know if anyone can verify this.
> 
> Thanks!
> 
> --
>   Gregory (Grisha) Trubetskoy
>        grisha@ispol.com

-- 
Sorry for the fake email, please use the real one below to reply.
contact: g e r h a r d @ b i g f o o t . d e
web:     http://highqualdev.com

From modpython at maya.com  Sat Dec 16 14:31:56 2000
From: modpython at maya.com (Seung Chan Lim)
Date: Fri Jan  9 22:02:33 2004
Subject: [mod_python] persistent storage?
Message-ID: <01be01c06796$dfd61b00$0100a8c0@djslim>

Is there a way to mimc the Application object in ASP or the __persistdict__
object in pyApache
with modpython??? so that all cgis running can share this storage space for
data.

thanks,

slim


From grisha at ispol.com  Sat Dec 16 21:25:29 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:33 2004
Subject: [mod_python] mod_python 2.7
Message-ID: <Pine.LNX.4.21.0012162124350.3958-100000@saturn.ispol.com>

...is out

enjoy!

Grisha


From Peter.GIANNOPOULOS at gemplus.com  Sun Dec 17 18:15:49 2000
From: Peter.GIANNOPOULOS at gemplus.com (Peter Giannopoulos)
Date: Fri Jan  9 22:02:33 2004
Subject: [mod_python] A configuration question.
Message-ID: <HEELLMEIEBHKANGCLEELAEPMCBAA.peter.giannopoulos@gemplus.com>

Hi all,

I'm new to the list/python/mod_python.

I am having some difficulty setting up Apache 1.3.14 and mod_python (on
RH7.0) to work the way I want them to. In the tutorial there an explanation
as to how to get myscript.py to handle requests for .py files. This is fine
and it seems to work. But this unfortunately is not enough. I would like to
have the same functionality as traditional cgi handling or servlet handling.
By this I mean that I would like to Have apache/mod_python process ANY .py
files asked for WITHOUT having to set up and individual handler for each in
my configuration files for apache.

Can anyone tell me how to do this?
Thanks in advance.





Peter Giannopoulos, Software Developer
Gemplus Software,   Advanced Projects Group

Phone: +15147322434
Fax:   +15147322401
Gemplus Card International
http://www.gemplus.com


-------------- next part --------------
A non-text attachment was scrubbed...
Name: Peter Giannopoulos.vcf
Type: text/x-vcard
Size: 613 bytes
Desc: not available
Url : http://mailman.modpython.org/pipermail/mod_python/attachments/20001217/654f36fb/PeterGiannopoulos-0003.vcf
From grisha at ispol.com  Sun Dec 17 18:40:35 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:33 2004
Subject: [mod_python] A configuration question.
In-Reply-To: <HEELLMEIEBHKANGCLEELAEPMCBAA.peter.giannopoulos@gemplus.com>
Message-ID: <Pine.LNX.4.21.0012171839200.16900-100000@saturn.ispol.com>

Check out the publisher handler in 2.7. I don't have an RPM for 2.7 yet,
sorry, may be early next week, but you can get the source and compile it.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Sun, 17 Dec 2000, Peter Giannopoulos wrote:

> Hi all,
> 
> I'm new to the list/python/mod_python.
> 
> I am having some difficulty setting up Apache 1.3.14 and mod_python (on
> RH7.0) to work the way I want them to. In the tutorial there an explanation
> as to how to get myscript.py to handle requests for .py files. This is fine
> and it seems to work. But this unfortunately is not enough. I would like to
> have the same functionality as traditional cgi handling or servlet handling.
> By this I mean that I would like to Have apache/mod_python process ANY .py
> files asked for WITHOUT having to set up and individual handler for each in
> my configuration files for apache.
> 
> Can anyone tell me how to do this?
> Thanks in advance.
> 
> 
> 
> 
> 
> Peter Giannopoulos, Software Developer
> Gemplus Software,   Advanced Projects Group
> 
> Phone: +15147322434
> Fax:   +15147322401
> Gemplus Card International
> http://www.gemplus.com
> 
> 
> 


From arhiv at freemail.org.mk  Mon Dec 18 12:09:54 2000
From: arhiv at freemail.org.mk (Damjan)
Date: Fri Jan  9 22:02:33 2004
Subject: [mod_python] persistent storage?
In-Reply-To: <01be01c06796$dfd61b00$0100a8c0@djslim>; from modpython@maya.com on Sat, Dec 16, 2000 at 02:31:56PM -0500
References: <01be01c06796$dfd61b00$0100a8c0@djslim>
Message-ID: <20001218120954.A559@localhost.localdomain>

> Is there a way to mimc the Application object in ASP or the __persistdict__
> object in pyApache
> with modpython??? so that all cgis running can share this storage space for
> data.

You can use somehing like this:

### mod_test.py
cache = {}
def handler(req):
	global cache
	if cache.has_key('num'):
		cache['num'] = cache['num'] + 1
	else:
		cache['num'] = 1
	...

BUT, this is per apache-process persistent storage. Curently there is no way of
sharing data accross processes, except for going through a database.
Apache-2.0 may change this, when it provides a shared memory support.

What I would like to know, how does the above script work in a multithreaded
Apache/mod_python? 
Will the threads share the 'cache' object?


-- 
Damjan Georgievski		|           ?????? ???????????
Skopje, Macedonia		|           ??????, ??????????

From grisha at ispol.com  Mon Dec 18 09:58:00 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:33 2004
Subject: [mod_python] persistent storage?
In-Reply-To: <20001218120954.A559@localhost.localdomain>
Message-ID: <Pine.LNX.4.21.0012180957440.19353-100000@saturn.ispol.com>

On Mon, 18 Dec 2000, Damjan wrote:

> What I would like to know, how does the above script work in a multithreaded
> Apache/mod_python? 
> Will the threads share the 'cache' object?

yes


From Peter.GIANNOPOULOS at gemplus.com  Mon Dec 18 10:05:13 2000
From: Peter.GIANNOPOULOS at gemplus.com (Peter Giannopoulos)
Date: Fri Jan  9 22:02:33 2004
Subject: [mod_python] A configuration question.
In-Reply-To: <Pine.LNX.4.21.0012171839200.16900-100000@saturn.ispol.com>
Message-ID: <HEELLMEIEBHKANGCLEELOEPNCBAA.peter.giannopoulos@gemplus.com>

Thanks, for the prompt reply. I managed to build and install 2.7 but now
Apache can't load it...

Here is what I get as an erro message:


" Cannot load /usr/local/apache/libexec/mod_python.so into server: undefined
symbol: PyEval_RestoreTread "

I don't know enough about apache or mod_python to figure this one out by
mysef right now. Any suggestions?









Peter Giannopoulos, Software Developer
Gemplus Software,   Advanced Projects Group

Phone: +15147322434
Fax:   +15147322401
Gemplus Card International
http://www.gemplus.com




-----Original Message-----
From: Gregory Trubetskoy [mailto:grisha@ispol.com]
Sent: December 17, 2000 6:41 PM
To: Peter Giannopoulos
Cc: mod_python@modpython.org
Subject: Re: [mod_python] A configuration question.



Check out the publisher handler in 2.7. I don't have an RPM for 2.7 yet,
sorry, may be early next week, but you can get the source and compile it.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Sun, 17 Dec 2000, Peter Giannopoulos wrote:

> Hi all,
>
> I'm new to the list/python/mod_python.
>
> I am having some difficulty setting up Apache 1.3.14 and mod_python (on
> RH7.0) to work the way I want them to. In the tutorial there an
explanation
> as to how to get myscript.py to handle requests for .py files. This is
fine
> and it seems to work. But this unfortunately is not enough. I would like
to
> have the same functionality as traditional cgi handling or servlet
handling.
> By this I mean that I would like to Have apache/mod_python process ANY .py
> files asked for WITHOUT having to set up and individual handler for each
in
> my configuration files for apache.
>
> Can anyone tell me how to do this?
> Thanks in advance.
>
>
>
>
>
> Peter Giannopoulos, Software Developer
> Gemplus Software,   Advanced Projects Group
>
> Phone: +15147322434
> Fax:   +15147322401
> Gemplus Card International
> http://www.gemplus.com
>
>
>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Peter Giannopoulos.vcf
Type: text/x-vcard
Size: 613 bytes
Desc: not available
Url : http://mailman.modpython.org/pipermail/mod_python/attachments/20001218/f23646de/PeterGiannopoulos-0003.vcf
From grisha at ispol.com  Mon Dec 18 12:07:07 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:33 2004
Subject: [mod_python] A configuration question.
In-Reply-To: <HEELLMEIEBHKANGCLEELOEPNCBAA.peter.giannopoulos@gemplus.com>
Message-ID: <Pine.LNX.4.21.0012181206160.19353-100000@saturn.ispol.com>

That's a bug. For now just inser an "h" in the word Tread so that it reads
Thread :-)

Grisha

On Mon, 18 Dec 2000, Peter Giannopoulos wrote:

> Thanks, for the prompt reply. I managed to build and install 2.7 but now
> Apache can't load it...
> 
> Here is what I get as an erro message:
> 
> 
> " Cannot load /usr/local/apache/libexec/mod_python.so into server: undefined
> symbol: PyEval_RestoreTread "
> 
> I don't know enough about apache or mod_python to figure this one out by
> mysef right now. Any suggestions?
> 
> 
> 
> 
> 
> 
> 
> 
> 
> Peter Giannopoulos, Software Developer
> Gemplus Software,   Advanced Projects Group
> 
> Phone: +15147322434
> Fax:   +15147322401
> Gemplus Card International
> http://www.gemplus.com
> 
> 
> 
> 
> -----Original Message-----
> From: Gregory Trubetskoy [mailto:grisha@ispol.com]
> Sent: December 17, 2000 6:41 PM
> To: Peter Giannopoulos
> Cc: mod_python@modpython.org
> Subject: Re: [mod_python] A configuration question.
> 
> 
> 
> Check out the publisher handler in 2.7. I don't have an RPM for 2.7 yet,
> sorry, may be early next week, but you can get the source and compile it.
> 
> --
>   Gregory (Grisha) Trubetskoy
>        grisha@ispol.com
> 
> On Sun, 17 Dec 2000, Peter Giannopoulos wrote:
> 
> > Hi all,
> >
> > I'm new to the list/python/mod_python.
> >
> > I am having some difficulty setting up Apache 1.3.14 and mod_python (on
> > RH7.0) to work the way I want them to. In the tutorial there an
> explanation
> > as to how to get myscript.py to handle requests for .py files. This is
> fine
> > and it seems to work. But this unfortunately is not enough. I would like
> to
> > have the same functionality as traditional cgi handling or servlet
> handling.
> > By this I mean that I would like to Have apache/mod_python process ANY .py
> > files asked for WITHOUT having to set up and individual handler for each
> in
> > my configuration files for apache.
> >
> > Can anyone tell me how to do this?
> > Thanks in advance.
> >
> >
> >
> >
> >
> > Peter Giannopoulos, Software Developer
> > Gemplus Software,   Advanced Projects Group
> >
> > Phone: +15147322434
> > Fax:   +15147322401
> > Gemplus Card International
> > http://www.gemplus.com
> >
> >
> >
> 
> 


From Peter.GIANNOPOULOS at gemplus.com  Mon Dec 18 12:27:20 2000
From: Peter.GIANNOPOULOS at gemplus.com (Peter Giannopoulos)
Date: Fri Jan  9 22:02:33 2004
Subject: [mod_python] Problems loading mod_python 2.7
Message-ID: <HEELLMEIEBHKANGCLEELAEPPCBAA.peter.giannopoulos@gemplus.com>

I am having a hard time with mod_python 2.7:

Building and installing works fine but when  I try to start apache (1.3.14)
on RedHat 7.0 and get the following message:

" Cannot load /usr/local/apache/libexec/mod_python.so into server: undefined
symbol: PyEval_RestoreTread "

The reason I am using 2.7 is because I don't want to write a handler for
EVERY .py file in my webapp. Is there a way to do this with 2.6.4 (loads and
works just fine on the same machine)? Or does anyone know how to fix the
above mentioned error?


Thanks.


Peter Giannopoulos, Software Developer
Gemplus Software,   Advanced Projects Group

Phone: +15147322434
Fax:   +15147322401
Gemplus Card International
http://www.gemplus.com


-------------- next part --------------
A non-text attachment was scrubbed...
Name: Peter Giannopoulos.vcf
Type: text/x-vcard
Size: 613 bytes
Desc: not available
Url : http://mailman.modpython.org/pipermail/mod_python/attachments/20001218/74005798/PeterGiannopoulos-0003.vcf
From grisha at ispol.com  Mon Dec 18 16:40:39 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:33 2004
Subject: [mod_python] 2.7.1
Message-ID: <Pine.LNX.4.21.0012181638490.20344-100000@saturn.ispol.com>

We now have 2.7.1. There was a typo and some other things that wouldn't
work on win32 in 2.7.

There are also Python 1.5.2 and Python 2.0 DLL's, as well as a Red Hat RPM
available now.

enjoy

Grisha



From Peter.GIANNOPOULOS at gemplus.com  Mon Dec 18 17:22:37 2000
From: Peter.GIANNOPOULOS at gemplus.com (Peter Giannopoulos)
Date: Fri Jan  9 22:02:33 2004
Subject: [mod_python] Ok. One step closer now!
Message-ID: <HEELLMEIEBHKANGCLEELEEABCCAA.peter.giannopoulos@gemplus.com>

Ok. I corrected the syntax error in mod_python.c, rebuilt it and it now
loads but... :-(


I have the following in my httpd.conf

============================================================================
==============================
#This does not work I get : "The requested URL /say.py was not found on this
server."
# Yet the file does indeed exist and is exactly where specified "
<Directory /usr/local/apache/htdocs/webcard>
    AddHandler python-program .py
    PythonHandler mod_python.publisher
    PythonDebug On
</Directory>

#This does work
<Directory /usr/local/apache/htdocs/webcard/doc>
    AddHandler python-program .py
    PythonHandler mptest
    PythonDebug On
</Directory>

============================================================================
=============================


Again my specifics are: RedHat 7.0 , apache 1.3.14, python 2.0 and
mod_python 2.7
Any pointers?


Thanks in advance.




Peter Giannopoulos, Software Developer
Gemplus Software,   Advanced Projects Group

Phone: +15147322434
Fax:   +15147322401
Gemplus Card International
http://www.gemplus.com


-------------- next part --------------
A non-text attachment was scrubbed...
Name: Peter Giannopoulos.vcf
Type: text/x-vcard
Size: 613 bytes
Desc: not available
Url : http://mailman.modpython.org/pipermail/mod_python/attachments/20001218/fad79960/PeterGiannopoulos-0003.vcf
From ytc87 at cs.ccu.edu.tw  Wed Dec 20 00:24:46 2000
From: ytc87 at cs.ccu.edu.tw (Yi-Tai Chen)
Date: Fri Jan  9 22:02:33 2004
Subject: [mod_python] question about start apache with mod_python...
Message-ID: <20001220002446.A1623@mdklinux.idv.tw>

  I already load mod_python first... but it still core dump...
  I need to do this step to make it work...
  First, comment the lines about load mod_python, start apache, 
  then uncomment the lines load mod_python, restart apache...
  after this mod_python can work fine... 
  Can start apache with mod_python directly??
  My OS is Mandrake 7.2, Python 2.0, Apache 1.3.14 and
  Mod_python 2.7.1... thanks a lot...

From fschwiet at u.washington.edu  Tue Dec 19 16:13:59 2000
From: fschwiet at u.washington.edu (F. Schwieterman)
Date: Fri Jan  9 22:02:33 2004
Subject: [mod_python] installation woes: Redhat 7.0, mod_python 2.7.1, apache 1.3.12
Message-ID: <Pine.A41.4.21.0012191603150.79868-100000@dante22.u.washington.edu>

  Well I was hoping that a fresh Redhat install 7.0, followed by a fresh
install of Apache 1.3.12, followed by an install of mod_python 2.7.1 would
quickly get me running.  (I've spent a lot of time trying to get
mod_python to work in Mandrake to no avail).

  Anyhow, installation goes smooth but the when I run the test file as
'http://localhost/mod_python/python_handler.py' I get an internal server
error.  (this is after restarting the server appropriately)

  Anyhow, the contents of /var/log/httpd/error_log is  
[Tue Dec 19 15:37:28 2000] [notice] Apache/1.3.12 (Unix)  (Red
Hat/Linux) mod_python/2.7.1 Python/2.0 configured -- resuming normal
operations
[Tue Dec 19 15:37:36 2000] [error] [client 127.0.0.1] File does not
exist: /var/www/html/mod_python
'import site' failed; use -v for traceback
make_obcallback(): could not import mod_python.apache.
make_obcallback(): could not call init.
[Tue Dec 19 15:38:20 2000] [error] [client 127.0.0.1]
python_handler: make_obcallback returned no obCallBack!
'import site' failed; use -v for traceback
make_obcallback(): could not import mod_python.apache.
make_obcallback(): could not call init.
[Tue Dec 19 15:59:27 2000] [error] [client 127.0.0.1]
python_handler: make_obcallback returned no obCallBack!


  Since accessing the test file as
'file:/var/www/mod_python_test/pythonhandler.py' simply gives me the text
of the result, I think that mod_python isn't at all installed so that the
following httpd.conf lines are being ignored:
<IfModule mod_python.c>
  Alias /mod_python/ /var/www/mod_python_test/
  <Directory /var/www/mod_python_test>
    AllowOverride FileInfo
  </Directory>
</IfModule>




  Anyhow I'm not really a Linux user so if anyone had any advice on how I
can get mod_python working that'd be great.  It seems like these RPMs
should be useable from a fresh Redhat install..  If I don't get any
replies soon I'll contact the RPM author to see what I'm missing.



From victor at prodigy.net  Wed Dec 20 01:02:35 2000
From: victor at prodigy.net (Victor Muslin)
Date: Fri Jan  9 22:02:33 2004
Subject: [mod_python] Newbie question
Message-ID: <4.3.2.7.0.20001220005229.00b9b420@pop.prodigy.net>

I am running Apache 1.3.12 on WindowsNT 4.0 with Python 2.0.

Tried to configure it to use mod_python. Made the following relevant 
changes in httpd.conf:
DocumentRoot "g:/top/public/web/dev/htdocs"
<Directory "g:/top/public/web/dev/htdocs">
#
LoadModule python_module modules/mod_python.dll
#
PassEnv PYTHONPATH

<Directory "g:/top/public/web/dev/htdocs/test">
         AllowOverride All
         AddHandler python-program .py
         PythonHandler mptest
         PythonDebug On
         PythonPath 
"['e:/apps/python20/lib','g:/top/public/web/dev/htdocs/test']"
</Directory>

(Not sure whether PythonPath is necessary; it was not in instructions on 
the mod_python web site, but I saw it in some news group posting. In any 
case, the behavior is the same with or without it.)

Seems that the server loads mod_python fine, because when it comes up it 
says: Apache 1.3.12 (Win32) mod_python/2.6.3 Python/2.0 running...

As per instructions I created mptest.py and placed it into 
g:/top/public/web/dev/htdocs/test.
from mod_python import apache

def handler(req):
     req.send_http_header()
     req.write("Hello World!")
     return apache.OK

However, when I point my browser to it 
(http://127.0.0.1:8000/test/mptest.py) I get an Internal Server Error. The 
message in the error log says: [Wed Dec 20 00:45:56 2000] [error] [client 
209.247.38.37] python_handler: make_obcallback returned no obCallBack!

Any insight would be appreciated.

TIA

_______________________________________________________________________
Victor Muslin 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20001220/0b75ab5d/attachment-0003.htm
From hostmaster at bemarnet.es  Wed Dec 20 12:58:12 2000
From: hostmaster at bemarnet.es (Antonio Navarro Navarro)
Date: Fri Jan  9 22:02:33 2004
Subject: [mod_python] Problems with mod_python and Apache 1.3.14-3
Message-ID: <4.1.20001220125225.022faf00@pop3.bemarnet.es>

Hi All !

I have a RedHat 7.0 with Apache 1.3.14-3 installed from the RH Cd-Roms.
After installing the RPM for mod_python 2.7.1-1, the httpd shows the
following error and crashes:

[root@zeus /root]# httpd -x
[Wed Dec 20 12:55:01 2000] [warn] Loaded DSO modules/mod_python.so uses 
plain Apache 1.3 API, this module might crash under EAPI! (please recompile
it with -DEAPI)     

How can I bypass this error ? Do I need a RPM mod_python compiled with
-DEAPI ? If so, where can I find this ?

Can I generate a new RPM from the source mod_python ? How ?

Best regards,


Antonio Navarro Navarro
BemarNet Management
http://www.bemarnet.es
hostmaster@bemarnet.es
Tlf. +34-96-1656644
Fax. +34-96-1656514

From rriggs at doubleclick.net  Wed Dec 20 09:16:37 2000
From: rriggs at doubleclick.net (Rob Riggs)
Date: Fri Jan  9 22:02:33 2004
Subject: [mod_python] RH7 and mod_python and mod_php4 == apache crash
Message-ID: <3A40DB65.D03E9633@doubleclick.net>

Under RH7, it appears that one cannot have both mod_python and mod_php
installed. When both are installed and Apache is started from the init
script, it crashes. Note that running Apache without all of the
"-D HAVE_..." pieces that the init script passes to httpd seems to
prevent the crash.

Any ideas what is causing this?

--
Rob Riggs
Unix System Administrator
DoubleClick/DARTmail - Broomfield, CO




From grisha at ispol.com  Wed Dec 20 11:18:02 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:33 2004
Subject: [mod_python] Newbie question
In-Reply-To: <4.3.2.7.0.20001220005229.00b9b420@pop.prodigy.net>
Message-ID: <Pine.LNX.4.21.0012201000320.27015-100000@saturn.ispol.com>

I would verify where your mod_python PACKAGE is and make sure that it is
in PYTHONPATH. Not the PythonPath keyword you specified below, but the
sys.path (which can be altered via the PYTHONPATH variable prior to
starting apache) at the time when you start apache.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Wed, 20 Dec 2000, Victor Muslin wrote:

> I am running Apache 1.3.12 on WindowsNT 4.0 with Python 2.0.
> 
> Tried to configure it to use mod_python. Made the following relevant 
> changes in httpd.conf:
> DocumentRoot "g:/top/public/web/dev/htdocs"
> <Directory "g:/top/public/web/dev/htdocs">
> #
> LoadModule python_module modules/mod_python.dll
> #
> PassEnv PYTHONPATH
> 
> <Directory "g:/top/public/web/dev/htdocs/test">
>          AllowOverride All
>          AddHandler python-program .py
>          PythonHandler mptest
>          PythonDebug On
>          PythonPath 
> "['e:/apps/python20/lib','g:/top/public/web/dev/htdocs/test']"
> </Directory>
> 
> (Not sure whether PythonPath is necessary; it was not in instructions on 
> the mod_python web site, but I saw it in some news group posting. In any 
> case, the behavior is the same with or without it.)
> 
> Seems that the server loads mod_python fine, because when it comes up it 
> says: Apache 1.3.12 (Win32) mod_python/2.6.3 Python/2.0 running...
> 
> As per instructions I created mptest.py and placed it into 
> g:/top/public/web/dev/htdocs/test.
> from mod_python import apache
> 
> def handler(req):
>      req.send_http_header()
>      req.write("Hello World!")
>      return apache.OK
> 
> However, when I point my browser to it 
> (http://127.0.0.1:8000/test/mptest.py) I get an Internal Server Error. The 
> message in the error log says: [Wed Dec 20 00:45:56 2000] [error] [client 
> 209.247.38.37] python_handler: make_obcallback returned no obCallBack!
> 
> Any insight would be appreciated.
> 
> TIA
> 
> _______________________________________________________________________
> Victor Muslin 


From grisha at ispol.com  Wed Dec 20 11:36:19 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:33 2004
Subject: [mod_python] Problems with mod_python and Apache 1.3.14-3
In-Reply-To: <4.1.20001220125225.022faf00@pop3.bemarnet.es>
Message-ID: <Pine.LNX.4.21.0012201134130.27306-100000@saturn.ispol.com>

On Wed, 20 Dec 2000, Antonio Navarro Navarro wrote:

> [root@zeus /root]# httpd -x
> [Wed Dec 20 12:55:01 2000] [warn] Loaded DSO modules/mod_python.so uses 
> plain Apache 1.3 API, this module might crash under EAPI! (please recompile
> it with -DEAPI)     
> 
> How can I bypass this error ? 

You can recompile with -DEAPI, but I wouldn't worry about it.

> Can I generate a new RPM from the source mod_python ? How ?

http://www.modpython.org/dist/rpm/mod_python.spec
man rpm



Grisha


From hostmaster at bemarnet.es  Wed Dec 20 17:38:19 2000
From: hostmaster at bemarnet.es (Antonio Navarro Navarro)
Date: Fri Jan  9 22:02:33 2004
Subject: [mod_python] Problems with mod_python and Apache 1.3.14-3
In-Reply-To: <Pine.LNX.4.21.0012201134130.27306-100000@saturn.ispol.com>
References: <4.1.20001220125225.022faf00@pop3.bemarnet.es>
Message-ID: <4.1.20001220173800.02303100@pop3.bemarnet.es>

At 11.36 20/12/00 -0500, Gregory Trubetskoy wrote:

>On Wed, 20 Dec 2000, Antonio Navarro Navarro wrote:
>
>> [root@zeus /root]# httpd -x
>> [Wed Dec 20 12:55:01 2000] [warn] Loaded DSO modules/mod_python.so uses 
>> plain Apache 1.3 API, this module might crash under EAPI! (please recompile
>> it with -DEAPI)     
>> 
>> How can I bypass this error ? 
>
>You can recompile with -DEAPI, but I wouldn't worry about it.

Why ?

Regards,

Antonio Navarro Navarro
BemarNet Management
http://www.bemarnet.es
hostmaster@bemarnet.es
Tlf. +34-96-1656644
Fax. +34-96-1656514

From grisha at ispol.com  Wed Dec 20 13:03:50 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:33 2004
Subject: [mod_python] Problems with mod_python and Apache 1.3.14-3
In-Reply-To: <4.1.20001220173800.02303100@pop3.bemarnet.es>
Message-ID: <Pine.LNX.4.21.0012201302350.27306-100000@saturn.ispol.com>

I don't believe mod_python uses any of the API that is affected by
-DEAPI. I'll have to check to be 100% certain, but I've been getting this
warning on all my tests and have never seen a crash (at least the one
that I could relate to -DEAPI).


On Wed, 20 Dec 2000, Antonio Navarro Navarro wrote:

> At 11.36 20/12/00 -0500, Gregory Trubetskoy wrote:
> 
> >On Wed, 20 Dec 2000, Antonio Navarro Navarro wrote:
> >
> >> [root@zeus /root]# httpd -x
> >> [Wed Dec 20 12:55:01 2000] [warn] Loaded DSO modules/mod_python.so uses 
> >> plain Apache 1.3 API, this module might crash under EAPI! (please recompile
> >> it with -DEAPI)     
> >> 
> >> How can I bypass this error ? 
> >
> >You can recompile with -DEAPI, but I wouldn't worry about it.
> 
> Why ?
> 
> Regards,
> 
> Antonio Navarro Navarro
> BemarNet Management
> http://www.bemarnet.es
> hostmaster@bemarnet.es
> Tlf. +34-96-1656644
> Fax. +34-96-1656514
> 


From hostmaster at bemarnet.es  Wed Dec 20 19:21:42 2000
From: hostmaster at bemarnet.es (Antonio Navarro Navarro)
Date: Fri Jan  9 22:02:33 2004
Subject: [mod_python] Problems with mod_python and Apache 1.3.14-3
In-Reply-To: <Pine.LNX.4.21.0012201302350.27306-100000@saturn.ispol.com>
References: <4.1.20001220173800.02303100@pop3.bemarnet.es>
Message-ID: <4.1.20001220192013.02306210@pop3.bemarnet.es>

At 13.03 20/12/00 -0500, Gregory Trubetskoy wrote:

>I don't believe mod_python uses any of the API that is affected by
>-DEAPI. I'll have to check to be 100% certain, but I've been getting this
>warning on all my tests and have never seen a crash (at least the one
>that I could relate to -DEAPI).

Hi !

Well, the only thing I can say to you is that the downloaded i386.rpm
package dowsn't works for me.. I have downloaded the sources RPM, then I
have made a rpm -rebuild and the new rpm package works fine.

Regards,

Antonio Navarro Navarro
BemarNet Management
http://www.bemarnet.es
hostmaster@bemarnet.es
Tlf. +34-96-1656644
Fax. +34-96-1656514

From grisha at ispol.com  Wed Dec 20 15:48:26 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:33 2004
Subject: [mod_python] Problems with mod_python and Apache 1.3.14-3
In-Reply-To: <4.1.20001220192013.02306210@pop3.bemarnet.es>
Message-ID: <Pine.LNX.4.21.0012201543340.27862-100000@saturn.ispol.com>

May be it's be it's because I created them on Red Hat 2.6.

Perhaps I should take those RPM's off the site altogether, they seem to do
little good but confuse people and take up my time since there are
different variations of RedHat... (Mandrake?) I don't really have any
access to all those systems nor do I understand or like Red Hat enough to
be able to support those things.

Perhaps some Red Hat fan would like to volunteer to maintain the
RPM's? Your job would be to create all versions of RPM's every time there
is a release and perhaps answer questions about them on the list.

Grisha


On Wed, 20 Dec 2000, Antonio Navarro Navarro wrote:

> At 13.03 20/12/00 -0500, Gregory Trubetskoy wrote:
> 
> >I don't believe mod_python uses any of the API that is affected by
> >-DEAPI. I'll have to check to be 100% certain, but I've been getting this
> >warning on all my tests and have never seen a crash (at least the one
> >that I could relate to -DEAPI).
> 
> Hi !
> 
> Well, the only thing I can say to you is that the downloaded i386.rpm
> package dowsn't works for me.. I have downloaded the sources RPM, then I
> have made a rpm -rebuild and the new rpm package works fine.
> 
> Regards,
> 
> Antonio Navarro Navarro
> BemarNet Management
> http://www.bemarnet.es
> hostmaster@bemarnet.es
> Tlf. +34-96-1656644
> Fax. +34-96-1656514
> 


From benno at sesgroup.net  Thu Dec 21 12:06:05 2000
From: benno at sesgroup.net (Ben Leslie)
Date: Fri Jan  9 22:02:33 2004
Subject: [mod_python] RH7 and mod_python and mod_php4 == apache crash
In-Reply-To: <3A40DB65.D03E9633@doubleclick.net>; from rriggs@doubleclick.net on Wed, Dec 20, 2000 at 09:16:37AM -0700
References: <3A40DB65.D03E9633@doubleclick.net>
Message-ID: <20001221120605.A25968@sesgroup.net>

> Under RH7, it appears that one cannot have both mod_python and mod_php
> installed. When both are installed and Apache is started from the init
> script, it crashes. Note that running Apache without all of the
> "-D HAVE_..." pieces that the init script passes to httpd seems to
> prevent the crash.
> 
> Any ideas what is causing this?

Not sure if this will help but have you tried putting the Load Module 
directive for mod_python before any others. Sometimes mod_python insists
on being loaded first.

Hth,

Benno

From hostmaster at bemarnet.es  Thu Dec 21 09:06:39 2000
From: hostmaster at bemarnet.es (Antonio Navarro Navarro)
Date: Fri Jan  9 22:02:33 2004
Subject: [mod_python] Problems with mod_python and Apache 1.3.14-3
In-Reply-To: <Pine.LNX.4.21.0012201543340.27862-100000@saturn.ispol.com>
References: <4.1.20001220192013.02306210@pop3.bemarnet.es>
Message-ID: <4.1.20001221090457.016e8530@pop3.bemarnet.es>

At 15.48 20/12/00 -0500, Gregory Trubetskoy wrote:

>May be it's be it's because I created them on Red Hat 2.6.

6.2 I suppose... yes, this could be the problem.

>Perhaps I should take those RPM's off the site altogether, they seem to do
>little good but confuse people and take up my time since there are
>different variations of RedHat... (Mandrake?) I don't really have any
>access to all those systems nor do I understand or like Red Hat enough to
>be able to support those things.
>
>Perhaps some Red Hat fan would like to volunteer to maintain the
>RPM's? Your job would be to create all versions of RPM's every time there
>is a release and perhaps answer questions about them on the list.

I can create all version of RPM's from source in RedHat Linux, we are fans
of RH and allways have the latest version installed in our systems. Tell me
what can I do. :-)

Regards,

Antonio Navarro Navarro
BemarNet Management
http://www.bemarnet.es
hostmaster@bemarnet.es
Tlf. +34-96-1656644
Fax. +34-96-1656514

From arhiv at freemail.org.mk  Wed Dec 20 15:25:08 2000
From: arhiv at freemail.org.mk (Damjan)
Date: Fri Jan  9 22:02:33 2004
Subject: [mod_python] Small sugestion
In-Reply-To: <20001208195416.A552@localhost.localdomain>; from arhiv@freemail.org.mk on Fri, Dec 08, 2000 at 07:54:16PM +0100
References: <20001208195416.A552@localhost.localdomain>
Message-ID: <20001220152507.A1431@localhost.localdomain>

> Hi, Grisha.
> I've noticed a lot of complaints about that 'make_obcallback...' errors in the
> apache log. These are very often problems with the python path.
> So I sugest you add the following two lines in make_obcallback:
> (Here is a diff against 2.6.3)
> 
> --- mod_python.c.bak	Mon Dec  4 10:59:15 2000
> +++ mod_python.c	Fri Dec  8 19:47:41 2000
> @@ -479,6 +479,8 @@
>  
>      if (! ((m = PyImport_ImportModule(MODULENAME)))) {
>  	fprintf(stderr, "make_obcallback(): could not import %s.\n", MODULENAME);
> +	fprintf(stderr, "make_obcallback(): %s not found in %s.\n", MODULENAME, Py_GetPath());
> +	return NULL;
>      }
>      
>      if (! ((obCallBack = PyObject_CallMethod(m, INITFUNC, NULL)))) {
> 
> The 'return NULL;' is for the make_obcallback to return as soon as posible 
> (and there's no reason to try and call the method when the module was not
> loaded), and the apache log will be cleaner.

No comments on this ??


-- 
Damjan Georgievski		|           ?????? ???????????
Skopje, Macedonia		|           ??????, ??????????

From grisha at ispol.com  Thu Dec 21 09:55:48 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:33 2004
Subject: [mod_python] Small sugestion
In-Reply-To: <20001220152507.A1431@localhost.localdomain>
Message-ID: <Pine.LNX.4.21.0012210955070.30838-100000@saturn.ispol.com>

Sorry Damjan, somehow this one fell out of my task list. It's a good
suggestion, I'll add it in.

Grisha

On Wed, 20 Dec 2000, Damjan wrote:

> > Hi, Grisha.
> > I've noticed a lot of complaints about that 'make_obcallback...' errors in the
> > apache log. These are very often problems with the python path.
> > So I sugest you add the following two lines in make_obcallback:
> > (Here is a diff against 2.6.3)
> > 
> > --- mod_python.c.bak	Mon Dec  4 10:59:15 2000
> > +++ mod_python.c	Fri Dec  8 19:47:41 2000
> > @@ -479,6 +479,8 @@
> >  
> >      if (! ((m = PyImport_ImportModule(MODULENAME)))) {
> >  	fprintf(stderr, "make_obcallback(): could not import %s.\n", MODULENAME);
> > +	fprintf(stderr, "make_obcallback(): %s not found in %s.\n", MODULENAME, Py_GetPath());
> > +	return NULL;
> >      }
> >      
> >      if (! ((obCallBack = PyObject_CallMethod(m, INITFUNC, NULL)))) {
> > 
> > The 'return NULL;' is for the make_obcallback to return as soon as posible 
> > (and there's no reason to try and call the method when the module was not
> > loaded), and the apache log will be cleaner.
> 
> No comments on this ??
> 
> 
> -- 
> Damjan Georgievski		|           ???????????? ??????????????????????
> Skopje, Macedonia		|           ????????????, ????????????????????
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From rriggs at doubleclick.net  Thu Dec 21 08:30:31 2000
From: rriggs at doubleclick.net (Rob Riggs)
Date: Fri Jan  9 22:02:33 2004
Subject: [mod_python] RH7 and mod_python and mod_php4 == apache crash
References: <3A40DB65.D03E9633@doubleclick.net> <20001221120605.A25968@sesgroup.net>
Message-ID: <3A422217.996E8743@doubleclick.net>

Ben,

Thanks for the response. I am installing mod_python via the RPM (built
from the SRPM for Python 1.5.2), which appears to install correctly. The
RPM definitely puts the mod_python LoadModule directive first.


Ben Leslie wrote:

> > Under RH7, it appears that one cannot have both mod_python and mod_php
> > installed. When both are installed and Apache is started from the init
> > script, it crashes. Note that running Apache without all of the
> > "-D HAVE_..." pieces that the init script passes to httpd seems to
> > prevent the crash.
> >
> > Any ideas what is causing this?
>
> Not sure if this will help but have you tried putting the Load Module
> directive for mod_python before any others. Sometimes mod_python insists
> on being loaded first.
>
> Hth,
>
> Benno

--
Rob Riggs
Unix System Administrator
DoubleClick/DARTmail - Broomfield, CO




From djc at object-craft.com.au  Fri Dec 22 14:20:20 2000
From: djc at object-craft.com.au (Dave Cole)
Date: Fri Jan  9 22:02:33 2004
Subject: [mod_python] Yet another Python templating system
Message-ID: <m38zp93zwr.fsf@vole.object-craft.com.au>

A customer of ours has just given us permission to open source a set
of Python modules that we are developing as part of a contract with
them.

We started working on these modules a number of months ago, and they
are now in their third major revision.  The code was originally
developed to work in a CGI environment.  The modules are not just for
HTML template substitution, they are a toolkit for building session
based web applications with Python.

I have done some playing around to see how hard it would be to make
the modules work with mod_python.  The modules in their current form
need very little work to migrate to mod_python.

There is some introductory documentation at:

        http://www.object-craft.com.au/projects/fusion/intro.html

One of the things that is most likely to change in migrating to
mod_python is the application structure as described in the above
document.  Currently multiple application states / pages are
implemented in a single Python module.  This is good for small systems
like the applications we are developing for the customer, but become a
management problem for larger applications.  In the latest mod_python,
I noted with interest the new Publisher handler.  A modified or
extended version for this would be ideal for implementing each
application state as described in the intro document.

In making this toolkit more general, I would also like to be able to
build applications which are not session based.  The tree and paged
list tags both currently store state information in the session.

We are likely to release the code early in the new year once we have
finalised the license with our client.

- Dave

-- 
http://www.object-craft.com.au


From jrfsousa at esoterica.pt  Sat Dec 23 01:13:01 2000
From: jrfsousa at esoterica.pt (Jos Rui Faustino de Sousa)
Date: Fri Jan  9 22:02:34 2004
Subject: [mod_python] _apache again...
Message-ID: <000501c06c7d$7e586d10$fe00a8c0@krolik2piii1008>

Hi!

Has anyone solved the problem with the missing _apache module?

The test.py example does not work and I can not load _apache from the
python interpreter...

Where is this module?

Best regards
Jos Rui



From Lisa at mailgw1.netvision.net.il  Sat Dec 23 22:06:22 2000
From: Lisa at mailgw1.netvision.net.il (Lisa@mailgw1.netvision.net.il)
Date: Fri Jan  9 22:02:34 2004
Subject: [mod_python] new game try it
Message-ID: <200012232004.WAA28505@mailgw1.netvision.net.il>

An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20001223/2a1c4fbc/attachment-0003.htm
From grisha at ispol.com  Sat Dec 23 19:44:00 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:34 2004
Subject: [mod_python] _apache again...
In-Reply-To: <000501c06c7d$7e586d10$fe00a8c0@krolik2piii1008>
Message-ID: <Pine.LNX.4.21.0012231943070.6793-100000@saturn.ispol.com>

_apache only exists within apache - you shouldn't be able to load
mod_python scripts in standard intepreter for this reason.

Grisha

On Sat, 23 Dec 2000, Jos? Rui Faustino de Sousa wrote:

> Hi!
> 
> Has anyone solved the problem with the missing _apache module?
> 
> The test.py example does not work and I can not load _apache from the
> python interpreter...
> 
> Where is this module?
> 
> Best regards
> Jos? Rui
> 
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From arhiv at freemail.org.mk  Tue Dec 26 14:13:45 2000
From: arhiv at freemail.org.mk (Damjan)
Date: Fri Jan  9 22:02:34 2004
Subject: [mod_python] _apache again...
In-Reply-To: <Pine.LNX.4.21.0012231943070.6793-100000@saturn.ispol.com>; from grisha@ispol.com on Sat, Dec 23, 2000 at 07:44:00PM -0500
References: <000501c06c7d$7e586d10$fe00a8c0@krolik2piii1008> <Pine.LNX.4.21.0012231943070.6793-100000@saturn.ispol.com>
Message-ID: <20001226141345.A1395@localhost.localdomain>

> _apache only exists within apache - you shouldn't be able to load
> mod_python scripts in standard intepreter for this reason.
> 
> > Has anyone solved the problem with the missing _apache module?
> > 
> > The test.py example does not work and I can not load _apache from the
> > python interpreter...

And dont use a 'test.py' script, there is a python package named 'test' and
things becam ugly. Use mptest.py or modtest.py or something...


-- 
Damjan Georgievski		|           ?????? ???????????
Skopje, Macedonia		|           ??????, ??????????

From arhiv at freemail.org.mk  Wed Dec 27 13:50:27 2000
From: arhiv at freemail.org.mk (Damjan)
Date: Fri Jan  9 22:02:34 2004
Subject: [mod_python] Multiple handlers in a single directory
Message-ID: <20001227135027.A224@localhost.localdomain>

I want to have multiple Python handlers in one directory, but each handling a
different type of file. Is there a way I can do this?

I imagined it could be done with a directive like this:
...
PythonAddHandler mod_python.publisher .py
PythonAddHandler myscripts.handler1 .pyml
PythonAddHandler myscripts.handler2 .html
...

How hard would it be to add a directive ike this?

Thanks.

-- 
Damjan Georgievski		|           ?????? ???????????
Skopje, Macedonia		|           ??????, ??????????

From grisha at ispol.com  Wed Dec 27 09:56:47 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:34 2004
Subject: [mod_python] Multiple handlers in a single directory
In-Reply-To: <20001227135027.A224@localhost.localdomain>
Message-ID: <Pine.LNX.4.21.0012270954460.28943-100000@saturn.ispol.com>

To be consistent, I would have to add a directive like this for every
phase....

A more or less simple alternative would be to write a handler that invokes
other handlers based on file extension.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Wed, 27 Dec 2000, Damjan wrote:

> I want to have multiple Python handlers in one directory, but each handling a
> different type of file. Is there a way I can do this?
> 
> I imagined it could be done with a directive like this:
> ...
> PythonAddHandler mod_python.publisher .py
> PythonAddHandler myscripts.handler1 .pyml
> PythonAddHandler myscripts.handler2 .html
> ...
> 
> How hard would it be to add a directive ike this?
> 
> Thanks.
> 
> -- 
> Damjan Georgievski		|           ???????????? ??????????????????????
> Skopje, Macedonia		|           ????????????, ????????????????????
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From jmcbray at bertrand.carcosa.net  Wed Dec 27 13:22:23 2000
From: jmcbray at bertrand.carcosa.net (Jason F. McBrayer)
Date: Fri Jan  9 22:02:34 2004
Subject: [mod_python] Multiple handlers in a single directory
In-Reply-To: <Pine.LNX.4.21.0012270954460.28943-100000@saturn.ispol.com>; from grisha@ispol.com on Wed, Dec 27, 2000 at 09:56:47AM -0500
References: <20001227135027.A224@localhost.localdomain> <Pine.LNX.4.21.0012270954460.28943-100000@saturn.ispol.com>
Message-ID: <20001227132223.A19070@bertrand.carcosa.net>

On Wed, Dec 27, 2000 at 09:56:47AM -0500, Gregory Trubetskoy wrote:
> 
> To be consistent, I would have to add a directive like this for every
> phase....
> 
> A more or less simple alternative would be to write a handler that invokes
> other handlers based on file extension.

This is what I'm doing currently.  It seems to be the best solution,
and it has its own kind of logic to it -- once you're in the handler,
you've handed things off to Python, so you might as well do all the
processing in Python instead of in the apache conf file.

-- 
+----------------------------------------------------------------+
| Jason F. McBrayer                         jmcbray@carcosa.net  |
| The scalloped tatters of the King in Yellow must hide Yhtill   |
| forever.                    R.W. Chambers _The King in Yellow_ |

From Mads at Kiilerich.com  Thu Dec 28 14:19:02 2000
From: Mads at Kiilerich.com (Mads Kiilerich)
Date: Fri Jan  9 22:02:34 2004
Subject: [mod_python] rpm-packaging and DESTDIR
Message-ID: <Pine.LNX.4.21.0012281410450.926-200000@localhost>

Hello,

I'm hacking the RedHat RPM specs.

First, I've found that 
	./configure --prefix=something 
has no effect at all. It should either be fixed or removed from
the documentation.

For RPM packaging installation in another directory than the one
compiled for is essential. Thus I suggest the attached patch. It
causes any installation to be done below $DESTDIR . If no
DESTDIR is defined in the environment it has no effect.

Also, could you please put the spec used to build rpms in cvs?
And could it be in the root, ie as mod_python/mod_python.spec?
(That makes rpm-building even easier; given a mod_python tar the
rpm's can be build with
	rpm -ta src/mod_python-2.7.1.tar.gz
)

I have some enhancements to the spec as well - but I'll sit on
them until the spec is in cvs.

Happy Newyear from

-- 
Mads Kiilerich          Sys.Adm. Cand.Polyt. Stud.Bibel.
Mads@Kiilerich.com      Tel. +45 26 20 07 73
Fxvqrevx! Fiva! Qrg re cvffrgneiryvtg ng xelcgrer zrq EBG-13.                   
-------------- next part --------------
Index: Makefile.in
===================================================================
RCS file: /cvsroot/modpython/mod_python/Makefile.in,v
retrieving revision 1.7
diff -u -u -r1.7 Makefile.in
--- Makefile.in	2000/12/06 03:05:37	1.7
+++ Makefile.in	2000/12/28 13:05:01
@@ -82,7 +82,7 @@
 	@echo
 	@echo "Performing DSO installation."
 	@echo
-	$(INSTALL) src/mod_python.so $(LIBEXECDIR)
+	$(INSTALL) src/mod_python.so $(DESTDIR)$(LIBEXECDIR)
 	@$(MAKE) install_py_lib
 	@echo
 	@echo "Now don't forget to edit your main config and add"
@@ -114,12 +114,12 @@
 	@echo
 
 install_py_lib:
-	$(INSTALL) -d $(PY_STD_LIB)/site-packages/mod_python
+	$(INSTALL) -d $(DESTDIR)$(PY_STD_LIB)/site-packages/mod_python
 	@for f in `ls lib/python/mod_python/*.py`; \
 	do \
-		$(INSTALL) $$f $(PY_STD_LIB)/site-packages/mod_python; \
+		$(INSTALL) $$f $(DESTDIR)$(PY_STD_LIB)/site-packages/mod_python; \
 	done
-	python $(PY_STD_LIB)/compileall.py $(PY_STD_LIB)/site-packages/mod_python
+	python $(PY_STD_LIB)/compileall.py $(DESTDIR)$(PY_STD_LIB)/site-packages/mod_python
 
 clean:
 	cd src && $(MAKE) clean
From Mads at Kiilerich.com  Thu Dec 28 14:25:05 2000
From: Mads at Kiilerich.com (Mads Kiilerich)
Date: Fri Jan  9 22:02:34 2004
Subject: [mod_python] -DEAPI fix
Message-ID: <Pine.LNX.4.21.0012281422310.926-200000@localhost>

Hello,

I've got the -DEAPI warning using mod_python with RedHat apache.
As mentioned on this list it shouldn't matter, but it is
annoying.

The attached patch fixes it for me. I'm not sure it is
TheRightWay to do it. Should everyone compile with -DEAPI? Or
should configure (con)figure it out? Should the OPT flag be
used? Or another introduced?

Regards,

-- 
Mads Kiilerich          Sys.Adm. Cand.Polyt. Stud.Bibel.
Mads@Kiilerich.com      Tel. +45 26 20 07 73
Fxvqrevx! Fiva! Qrg re cvffrgneiryvtg ng xelcgrer zrq EBG-13.                   
-------------- next part --------------
Index: src/Makefile.in
===================================================================
RCS file: /cvsroot/modpython/mod_python/src/Makefile.in,v
retrieving revision 1.7
diff -u -r1.7 Makefile.in
--- src/Makefile.in	2000/12/06 03:05:37	1.7
+++ src/Makefile.in	2000/12/28 13:17:06
@@ -52,7 +52,7 @@
 INCLUDES=@INCLUDES@
 LIBS=@LIBS@
 LDFLAGS=@LDFLAGS@
-OPT=
+OPT=-DEAPI
 CFLAGS=$(OPT) $(INCLUDES) 
 srcdir=.
 
@@ -76,7 +76,7 @@
 	@echo
 	@echo 'Compiling for DSO. For static, do "make static"'
 	@echo
-	$(APXS) $(INCLUDES) -c $(OBJS) $(LIBS)
+	$(APXS) $(OPT) $(INCLUDES) -c $(OBJS) $(LIBS)
 	@echo
 	@echo 'Now su and make install'
 	@echo '  (or, if you only want to perform a partial install,'
@@ -114,4 +114,4 @@
 serverobject.o: serverobject.c
 connobject.o: connobject.c
 
-# DO NOT DELETE THIS LINE
\ No newline at end of file
+# DO NOT DELETE THIS LINE
From Mads at Kiilerich.com  Thu Dec 28 14:41:33 2000
From: Mads at Kiilerich.com (Mads Kiilerich)
Date: Fri Jan  9 22:02:34 2004
Subject: [mod_python] doc-html and mkhowto
Message-ID: <Pine.LNX.4.21.0012281438480.926-100000@localhost>

Hello,

building html docs seems to require and mkhowto. 

Am I right that
mkhowto requires python 2.0? 

Still mod_python itself is only for
python <2.0?

Regards,
-- 
Mads Kiilerich          Sys.Adm. Cand.Polyt. Stud.Bibel.
Mads@Kiilerich.com      Tel. +45 26 20 07 73
Fxvqrevx! Fiva! Qrg re cvffrgneiryvtg ng xelcgrer zrq EBG-13.                   


From rsalz at CaveoSystems.com  Thu Dec 28 10:46:08 2000
From: rsalz at CaveoSystems.com (rsalz@CaveoSystems.com)
Date: Fri Jan  9 22:02:34 2004
Subject: [mod_python] -DEAPI fix
Message-ID: <200012281546.KAA26868@os390.caveosystems.com>

-


The -DEAPI flag adds extra fields to the end of the Apache "module"
structure.  If you compile some code with that flag, and some code
without that f lag, then you can -- and almost always will -- get some
modules that have bogus crap instead of NULL pointers.  This will
cause things to crash.

You *might* get lucky on some platforms sometime.  Do not count on it.

Always use -DEAPI or never do.  Do not mix.
	/r$

From grisha at ispol.com  Thu Dec 28 10:43:28 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:34 2004
Subject: [mod_python] doc-html and mkhowto
In-Reply-To: <Pine.LNX.4.21.0012281438480.926-100000@localhost>
Message-ID: <Pine.LNX.4.21.0012281038480.32595-100000@saturn.ispol.com>

On Thu, 28 Dec 2000, Mads Kiilerich wrote:

> Hello,
> 
> building html docs seems to require and mkhowto. 
> 
> Am I right that
> mkhowto requires python 2.0? 

In 1.5.2 it is distributed as part of the doc source distribution. It
requires a whole lot more than mkhowto, however. It needs a whole bunch of
TeX and LaTeX stuff and some other tools.

> Still mod_python itself is only for python <2.0?

mod_python is for 2.0 or 1.5.2 equally :-) I've been using 2.0 lately.

http://www.modpython.org/live/mod_python-2.7.1/doc-html/inst-prerequisites.html

Grisha


From grisha at ispol.com  Thu Dec 28 10:37:13 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:34 2004
Subject: [mod_python] rpm-packaging and DESTDIR
In-Reply-To: <Pine.LNX.4.21.0012281410450.926-200000@localhost>
Message-ID: <Pine.LNX.4.21.0012281020230.32595-100000@saturn.ispol.com>

On Thu, 28 Dec 2000, Mads Kiilerich wrote:

> Hello,
> 
> I'm hacking the RedHat RPM specs.
> 
> First, I've found that 
> 	./configure --prefix=something 
> has no effect at all. 

That is correct. There are two prefixes that depend on two things - the
Python location and the Apache location, both of which are predetermined.

> It should either be fixed or removed from the documentation.

I don't think it is in the documentation.

> For RPM packaging installation in another directory than the one
> compiled for is essential. Thus I suggest the attached patch. It
> causes any installation to be done below $DESTDIR . If no
> DESTDIR is defined in the environment it has no effect.

Antonio Navarro Navarro <hostmaster@bemarnet.es> has volunteered to create
RPM's, check with him. 

I would need some more convincing to add the mod_python.spec to cvs - I
really don't see why RedHat support whould be part of mod_python core
project. If we're going to maintin RPM's, then why not Debian packages,
sun packages, FreeBSD ports, Windows InstallShield, etc, etc.

I'm not saying these things are bad, I'm just saying they are outside the
scope of mod_python core, which is Apache/Python integration. At best
RPM's fall in the category of "contrib" stuff - if someone wants to
maintin them that is great, but I do not want to create the impression
that when a user downloads a mod_python.tgz that I somehow vouch for the
RedHat compatibility - because I don't. Not anymore than any other OS or
Linux distribution.

As far as I know, Debian already has a mod_python package that they
maintain under their CVS, FreeBSD has a mod_python port that is maintained
in the FreeBSD ports CVS. RPM support initiative should come from RedHat
if they find mod_python useful. Until that day, I'm willing to support a
spec and make RPM's downloadable, but I don't want RPM support to be part
of mod_python.

I hope I'm making sense here :-)

Grisha



From emm at scriptdigital.com  Thu Dec 28 12:07:38 2000
From: emm at scriptdigital.com (Emmanuel. M. Decarie)
Date: Fri Jan  9 22:02:34 2004
Subject: [mod_python] Publisher Handler
Message-ID: <v04220803b6711ecc58ee@[192.168.0.2]>

Hello,

I just tried the publisher handler with the "hello.py" example found 
in the manual:

>
>""" Publisher example """
>
>def say(req, what="NOTHING"):
>     return "I am saying %s" % what

http://www.modpython.org/live/mod_python-2.7.1/doc-html/hand-pub-intro.html

Its working fine. But I didn't find a way to send  some HTML. The 
publisher handler seems to always return "Content-Type: text/plain". 
How can I tell it  to return "Content-Type: text/html".

When I put at the top of the file "hello.py" this line:

from mod_python import apache

it look like that I can read the req object, but that I can't set values.

For example, If I rewrite the hello.py example:

from mod_python import apache

def say(req, what="NOTHING"):
	req.content_type = "text/html"
	req.send_http_header ()
	req.write (what)
	return apache.OK

And then try to access /hello.py/say, Apache is not serving the page.

I'm fairly new to Python, Apache and mod_python, so its a lot to swallow.

I'm using FreeBSD 4.0 and mod_python 2.7.1 and Python 2.0.

I like the way the publisher handler work, but I really need to have 
control on the HTTP headers returned by mod_python to be able to 
choose to publish plain text, html, or do redirection, send 404 code 
and so on.

TIA

Cheers

-Emmanuel
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Emmanuel D?carie - Consultant
   Programmation pour le Web - Programming for the Web
   UserLand Frontier  - Perl - JavaScript - AppleScript - HTML - XML
   http://www.scriptdigital.com

---> The Frontier Newbie Toolbox:
   <http://www.scriptdigital.com/fnt/frontierNewbieToolbox.html>

From grisha at ispol.com  Thu Dec 28 13:15:08 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:34 2004
Subject: [mod_python] Publisher Handler
In-Reply-To: <v04220803b6711ecc58ee@[192.168.0.2]>
Message-ID: <Pine.LNX.4.21.0012281312220.549-100000@saturn.ispol.com>

Try this:

def say(req, what="NOTHING"):
	req.content_type = "text/html"
        return "I am saying %s" % what
 

This is sort of a "bug"...  The publisher handler attempts to guess the
content_type, but *only* it isn't set already. Depending on your
configuration, Apache may take the liberty of setting it (in
mod_negotation for example). So far I haven't figured out a clean solution
to this.

Grisha
	

On Thu, 28 Dec 2000, Emmanuel. M. Decarie wrote:

> Hello,
> 
> I just tried the publisher handler with the "hello.py" example found 
> in the manual:
> 
> >
> >""" Publisher example """
> >
> >def say(req, what="NOTHING"):
> >     return "I am saying %s" % what
> 
> http://www.modpython.org/live/mod_python-2.7.1/doc-html/hand-pub-intro.html
> 
> Its working fine. But I didn't find a way to send  some HTML. The 
> publisher handler seems to always return "Content-Type: text/plain". 
> How can I tell it  to return "Content-Type: text/html".
> 
> When I put at the top of the file "hello.py" this line:
> 
> from mod_python import apache
> 
> it look like that I can read the req object, but that I can't set values.
> 
> For example, If I rewrite the hello.py example:
> 
> from mod_python import apache
> 
> def say(req, what="NOTHING"):
> 	req.content_type = "text/html"
> 	req.send_http_header ()
> 	req.write (what)
> 	return apache.OK
> 
> And then try to access /hello.py/say, Apache is not serving the page.
> 
> I'm fairly new to Python, Apache and mod_python, so its a lot to swallow.
> 
> I'm using FreeBSD 4.0 and mod_python 2.7.1 and Python 2.0.
> 
> I like the way the publisher handler work, but I really need to have 
> control on the HTTP headers returned by mod_python to be able to 
> choose to publish plain text, html, or do redirection, send 404 code 
> and so on.
> 
> TIA
> 
> Cheers
> 
> -Emmanuel
> ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
> Emmanuel D?carie - Consultant
>    Programmation pour le Web - Programming for the Web
>    UserLand Frontier  - Perl - JavaScript - AppleScript - HTML - XML
>    http://www.scriptdigital.com
> 
> ---> The Frontier Newbie Toolbox:
>    <http://www.scriptdigital.com/fnt/frontierNewbieToolbox.html>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From Mads at Kiilerich.com  Thu Dec 28 20:36:33 2000
From: Mads at Kiilerich.com (Mads Kiilerich)
Date: Fri Jan  9 22:02:34 2004
Subject: [mod_python] rpm-packaging and DESTDIR
In-Reply-To: <Pine.LNX.4.21.0012281020230.32595-100000@saturn.ispol.com>
Message-ID: <Pine.LNX.4.21.0012282026060.926-100000@localhost>

Today I got mail from Gregory Trubetskoy:

> > It should either be fixed or removed from the documentation.
> 
> I don't think it is in the documentation.

It is in ./configure --help IIRC.

> > For RPM packaging installation in another directory than the one
> > compiled for is essential. Thus I suggest the attached patch. It
> > causes any installation to be done below $DESTDIR . If no
> > DESTDIR is defined in the environment it has no effect.
> 
> Antonio Navarro Navarro <hostmaster@bemarnet.es> has volunteered to create
> RPM's, check with him. 

OK. But the patch I sent (or some kind of working --prefix) is
very usefull for any kind of packaging and non-root-compilation.
Thus I still suggest the patch.

...
> As far as I know, Debian already has a mod_python package that they
> maintain under their CVS, FreeBSD has a mod_python port that is maintained
> in the FreeBSD ports CVS. RPM support initiative should come from RedHat
> if they find mod_python useful. Until that day, I'm willing to support a
> spec and make RPM's downloadable, but I don't want RPM support to be part
> of mod_python.

OK. But IMHO: In order to make sure that cvs-mod_python works
under any OS the compilation and packaging for them should be
supplied in the cvs/tar. You do use configure scripts for a
reason, right? 

That's my opinion - and as it is TheRightOne you should have the
same! ;)

Roger and over,

-- 
Mads Kiilerich          Sys.Adm. Cand.Polyt. Stud.Bibel.
Mads@Kiilerich.com      Tel. +45 26 20 07 73
Fxvqrevx! Fiva! Qrg re cvffrgneiryvtg ng xelcgrer zrq EBG-13.                   


From bbhaydon at bigpond.com  Sun Dec 31 17:19:30 2000
From: bbhaydon at bigpond.com (Brett Haydon)
Date: Fri Jan  9 22:02:34 2004
Subject: [mod_python] Threads in mod_python - Publisher Handler (Just starting)
Message-ID: <NCBBKMABOKFCDLPIKKGIEEJBCCAA.bbhaydon@bigpond.com>

I'm just trying to come to grips with the
excellent Publisher Handler (on Win32).

I thought function calls are executed sequentially,
(ie browser1 executes func1 then browser2 exec func1)
but testing some code, (trimmed slightly):

cache{}
def func(req):

    while 1:
        cache[users.cookie] = [random.random()]

    return never

it appears that calling func() in multiple browsers
will start a thread in each of them that goes on until the
server is stopped.

I am trying to work out the implications for calls that
bump into each other (especially database calls) that share
objects. A quick test by starting some threads in a script
that call the same URLs (which have database functions)
appears to confirm this, in that in six threads up to three of them
apparantly produce a blank page.

Has anyone come up with strategies to deal with this.

regards,

Brett


From jsliv at jslove.org  Sun Dec 31 14:43:34 2000
From: jsliv at jslove.org (Jay Love)
Date: Fri Jan  9 22:02:34 2004
Subject: [mod_python] server.register_cleanup
Message-ID: <3A4F8C66.4000705@jslove.org>

Hi folks.

I'm having trouble using this function.  It gives me an error and tells 
me that the first argument must be a request object, which it is.

Here's the offending line, from the top of my handler function:

handler(self, req):
	res.server.register_callback(req, self.cleanup_func)

Any thoughts on what's going wrong?

I'm using Apache 1.3.14, RH 7.0, mod_python 2.6.3

Jay


From grisha at ispol.com  Sun Dec 31 15:21:52 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:34 2004
Subject: [mod_python] server.register_cleanup
In-Reply-To: <3A4F8C66.4000705@jslove.org>
Message-ID: <Pine.LNX.4.21.0012311519480.21119-100000@saturn.ispol.com>

this is a sideffect of a bug in 2.6.3, which is fixed in 2.6.4

I recommend upgrading to 2.7.1

Grisha

On Sun, 31 Dec 2000, Jay Love wrote:

> 
> Hi folks.
> 
> I'm having trouble using this function.  It gives me an error and tells 
> me that the first argument must be a request object, which it is.
> 
> Here's the offending line, from the top of my handler function:
> 
> handler(self, req):
> 	res.server.register_callback(req, self.cleanup_func)
> 
> Any thoughts on what's going wrong?
> 
> I'm using Apache 1.3.14, RH 7.0, mod_python 2.6.3
> 
> Jay
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From jsliv at jslove.org  Sun Dec 31 15:33:28 2000
From: jsliv at jslove.org (Jay Love)
Date: Fri Jan  9 22:02:34 2004
Subject: [mod_python] server.register_cleanup
References: <Pine.LNX.4.21.0012311519480.21119-100000@saturn.ispol.com>
Message-ID: <3A4F9818.2020209@jslove.org>

I did, and it still happens.  Are you sure it's fixed?

Jay


Gregory Trubetskoy wrote:

> this is a sideffect of a bug in 2.6.3, which is fixed in 2.6.4
> 
> I recommend upgrading to 2.7.1
> 
> Grisha
> 
> On Sun, 31 Dec 2000, Jay Love wrote:
> 
>> Hi folks.
>> 
>> I'm having trouble using this function.  It gives me an error and tells 
>> me that the first argument must be a request object, which it is.
>> 
>> Here's the offending line, from the top of my handler function:
>> 
>> handler(self, req):
>> 	res.server.register_callback(req, self.cleanup_func)
>> 
>> Any thoughts on what's going wrong?
>> 
>> I'm using Apache 1.3.14, RH 7.0, mod_python 2.6.3
>> 
>> Jay
>> 
>> _______________________________________________
>> Mod_python mailing list
>> Mod_python@modpython.org
>> http://www.modpython.org/mailman/listinfo/mod_python
>> 



From grisha at ispol.com  Sun Dec 31 15:39:37 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:34 2004
Subject: [mod_python] server.register_cleanup
In-Reply-To: <3A4F9818.2020209@jslove.org>
Message-ID: <Pine.LNX.4.21.0012311537040.21119-100000@saturn.ispol.com>

Ah, I see what's going on. It expecting a different kind of request
object, the old built-in one, which is no req._req.

try this:

	req.server.register_cleanup(req._req, ...)

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Sun, 31 Dec 2000, Jay Love wrote:

> 
> I did, and it still happens.  Are you sure it's fixed?
> 
> Jay
> 
> 
> Gregory Trubetskoy wrote:
> 
> > this is a sideffect of a bug in 2.6.3, which is fixed in 2.6.4
> > 
> > I recommend upgrading to 2.7.1
> > 
> > Grisha
> > 
> > On Sun, 31 Dec 2000, Jay Love wrote:
> > 
> >> Hi folks.
> >> 
> >> I'm having trouble using this function.  It gives me an error and tells 
> >> me that the first argument must be a request object, which it is.
> >> 
> >> Here's the offending line, from the top of my handler function:
> >> 
> >> handler(self, req):
> >> 	res.server.register_callback(req, self.cleanup_func)
> >> 
> >> Any thoughts on what's going wrong?
> >> 
> >> I'm using Apache 1.3.14, RH 7.0, mod_python 2.6.3
> >> 
> >> Jay
> >> 
> >> _______________________________________________
> >> Mod_python mailing list
> >> Mod_python@modpython.org
> >> http://www.modpython.org/mailman/listinfo/mod_python
> >> 
> 
> 


From jsliv at jslove.org  Sun Dec 31 15:52:18 2000
From: jsliv at jslove.org (Jay Love)
Date: Fri Jan  9 22:02:34 2004
Subject: [mod_python] server.register_cleanup
References: <Pine.LNX.4.21.0012311537040.21119-100000@saturn.ispol.com>
Message-ID: <3A4F9C82.6040303@jslove.org>

That got it.

Thanks-

Jay


Gregory Trubetskoy wrote:

> Ah, I see what's going on. It expecting a different kind of request
> object, the old built-in one, which is no req._req.
> 
> try this:
> 
> 	req.server.register_cleanup(req._req, ...)
> 
> --
>   Gregory (Grisha) Trubetskoy
>        grisha@ispol.com
> 
> On Sun, 31 Dec 2000, Jay Love wrote:
> 
>> I did, and it still happens.  Are you sure it's fixed?
>> 
>> Jay
>> 
>> 
>> Gregory Trubetskoy wrote:
>> 
>>> this is a sideffect of a bug in 2.6.3, which is fixed in 2.6.4
>>> 
>>> I recommend upgrading to 2.7.1
>>> 
>>> Grisha
>>> 
>>> On Sun, 31 Dec 2000, Jay Love wrote:
>>> 
>>>> Hi folks.
>>>> 
>>>> I'm having trouble using this function.  It gives me an error and tells 
>>>> me that the first argument must be a request object, which it is.
>>>> 
>>>> Here's the offending line, from the top of my handler function:
>>>> 
>>>> handler(self, req):
>>>> 	res.server.register_callback(req, self.cleanup_func)
>>>> 
>>>> Any thoughts on what's going wrong?
>>>> 
>>>> I'm using Apache 1.3.14, RH 7.0, mod_python 2.6.3
>>>> 
>>>> Jay
>>>> 
>>>> _______________________________________________
>>>> Mod_python mailing list
>>>> Mod_python@modpython.org
>>>> http://www.modpython.org/mailman/listinfo/mod_python
>>>> 



