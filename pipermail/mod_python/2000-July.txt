From richard at whitequeen.com  Sun Jul  2 11:39:38 2000
From: richard at whitequeen.com (richard offer)
Date: Fri Jan  9 21:45:57 2004
Subject: [mod_python] *Occasional* AttributeError: Handler
Message-ID: <200007021839.e62Idc503947@erij.whitequeen.com>

Hi, its me again :-)

I've started getting the occasional 

[Sun Jul  2 11:13:46 2000] [error] PythonHandler index: Traceback (innermost last):
[Sun Jul  2 11:13:46 2000] [error] PythonHandler index:   File "/usr/local/lib/python1.5/site-packages/mod_python/apache.py", line 96, in Dispatch
    object = self.resolve_object(module, object_str)
[Sun Jul  2 11:13:46 2000] [error] PythonHandler index:   File "/usr/local/lib/python1.5/site-packages/mod_python/apache.py", line 42, in resolve_object
    obj = getattr(obj, obj_str)
[Sun Jul  2 11:13:46 2000] [error] PythonHandler index: AttributeError: handler


By occasional I mean I've got a page that loads lots of images from a
MySQL DB. Each image is a separate request. Most appear, but ~15%
don't. Hitting reload sometimes works, sometimes its a different set of
images that don't load.

This was working on the development server, moving across to the
production server I had to change the database access mechanism (from a
unix domain socket to a full inet socket (chroot) , and the production's
version of python is not threaded).


If anyone wants to check the failure mode of the site out its
alfieireland.com/scrapbook/.  I'll make the code available if anyone
can be bothered enough to ask for it. (this is a family site---neither
the site or the connection is designed for the /. effect, please don't
hurt it :-)

richard.

-- 
richard offer @ home 
          84 FE 48 E4 74 D0 26 D4  31 8E B6 86 98 74 E2 7C  8A FB BF A3
___________________________________http://216.185.15.144/users/richard/

From grisha at ispol.com  Sun Jul  2 19:43:37 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:45:57 2004
Subject: [mod_python] *Occasional* AttributeError: Handler
In-Reply-To: <200007021839.e62Idc503947@erij.whitequeen.com>
Message-ID: <Pine.LNX.4.21.0007021938400.30520-100000@saturn.ispol.com>

Interestingly enough, when I try it, I get all the pictures loaded fine. I
wonder if this has something to do with the speed of the link - mine is
64K ISDN.

I have a theory - 

I think that sometimes the "AttributeError: handler" message can be
misleading, when there was an error importing the module. Your module
seems to try to open a connection in-line:

db = MySQLdb.connect(host=host, user=user, passwd=passwd, db="scrapbook")

This can fail sometimes, and I think after that you get the misleading
error. Make sure that the MaxClients setting for Apache does not exceed
the maximum number of allowed connections for your MySQL server.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Sun, 2 Jul 2000, richard offer wrote:

> Hi, its me again :-)
> 
> I've started getting the occasional 
> 
> [Sun Jul  2 11:13:46 2000] [error] PythonHandler index: Traceback (innermost last):
> [Sun Jul  2 11:13:46 2000] [error] PythonHandler index:   File "/usr/local/lib/python1.5/site-packages/mod_python/apache.py", line 96, in Dispatch
>     object = self.resolve_object(module, object_str)
> [Sun Jul  2 11:13:46 2000] [error] PythonHandler index:   File "/usr/local/lib/python1.5/site-packages/mod_python/apache.py", line 42, in resolve_object
>     obj = getattr(obj, obj_str)
> [Sun Jul  2 11:13:46 2000] [error] PythonHandler index: AttributeError: handler
> 
> 
> By occasional I mean I've got a page that loads lots of images from a
> MySQL DB. Each image is a separate request. Most appear, but ~15%
> don't. Hitting reload sometimes works, sometimes its a different set of
> images that don't load.
> 
> This was working on the development server, moving across to the
> production server I had to change the database access mechanism (from a
> unix domain socket to a full inet socket (chroot) , and the production's
> version of python is not threaded).
> 
> 
> If anyone wants to check the failure mode of the site out its
> alfieireland.com/scrapbook/.  I'll make the code available if anyone
> can be bothered enough to ask for it. (this is a family site---neither
> the site or the connection is designed for the /. effect, please don't
> hurt it :-)
> 
> richard.
> 
> -- 
> richard offer @ home 
>           84 FE 48 E4 74 D0 26 D4  31 8E B6 86 98 74 E2 7C  8A FB BF A3
> ___________________________________http://216.185.15.144/users/richard/
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 



From iny at iki.fi  Tue Jul  4 16:58:02 2000
From: iny at iki.fi (Ilpo =?iso-8859-1?q?Nyyss=F6nen?=)
Date: Fri Jan  9 21:45:57 2004
Subject: [mod_python] httplib: [notice] child pid 8937 exit signal Segmentation fault (11)
Message-ID: <m3k8f2q9p1.fsf@iki.fi>

I tried to use urllib to retrieve some pictures dynamically, but the
child dies with segmentation fault. This happens also with httplib,
for example with the code below. The dying seems to happen when
closing the connection.

-- clip --
from mod_python import apache
import httplib

def handler(req):
    req.content_type = 'text/plain'
    req.send_http_header()
    
    h = httplib.HTTP('www.python.org')
    h.putrequest('GET', '/index.html')
    h.putheader('Accept', 'text/html')
    h.putheader('Accept', 'text/plain')
    h.endheaders()
    errcode, errmsg, headers = h.getreply()
    if errcode == 200:
        f = h.getfile()
        req.write(f.read())

    return apache.OK
-- clip --

-- 
Ilpo Nyyss?nen # biny
/* :-) */

From grisha at ispol.com  Tue Jul  4 12:11:22 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:45:57 2004
Subject: [mod_python] httplib: [notice] child pid 8937 exit signal
 Segmentation fault (11)
In-Reply-To: <m3k8f2q9p1.fsf@iki.fi>
Message-ID: <Pine.LNX.4.21.0007041158540.5022-100000@saturn.ispol.com>

Ilpo -

The code below worked for me without a hinch. This is on FreeBSD 4.0
Stable, Apache 1.3.12.

Anyone else on this list experiences this problem?

Grisha

On 4 Jul 2000, Ilpo Nyyss?nen wrote:

> 
> I tried to use urllib to retrieve some pictures dynamically, but the
> child dies with segmentation fault. This happens also with httplib,
> for example with the code below. The dying seems to happen when
> closing the connection.
> 
> -- clip --
> from mod_python import apache
> import httplib
> 
> def handler(req):
>     req.content_type = 'text/plain'
>     req.send_http_header()
>     
>     h = httplib.HTTP('www.python.org')
>     h.putrequest('GET', '/index.html')
>     h.putheader('Accept', 'text/html')
>     h.putheader('Accept', 'text/plain')
>     h.endheaders()
>     errcode, errmsg, headers = h.getreply()
>     if errcode == 200:
>         f = h.getfile()
>         req.write(f.read())
> 
>     return apache.OK
> -- clip --
> 
> -- 
> Ilpo Nyyss?nen # biny
> /* :-) */
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From grisha at ispol.com  Tue Jul  4 14:10:24 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:45:57 2004
Subject: [mod_python] US Independence Day release - 2.4.1
Message-ID: <Pine.LNX.4.21.0007041400470.5320-100000@saturn.ispol.com>

2.4.1, which is basically a couple of bugs fixed is available for
download.

For win32 users, the 2.4 DLL currently available for download should be
identical to 2.4.1, but you may want to update your apache.py file.

BTW, if there are any Win32 mod_python users out there - could you drop me
an e-mail? I'm just curious as to the actual number.

Happy 4th of July (to those who care about it)!

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com


From iny at iki.fi  Tue Jul  4 21:21:57 2000
From: iny at iki.fi (=?ISO-8859-1?Q?Ilpo_Nyyss=F6nen?=)
Date: Fri Jan  9 21:45:57 2004
Subject: [mod_python] httplib: [notice] child pid 8937 exit signal
 Segmentation fault (11)
In-Reply-To: <Pine.LNX.4.21.0007041158540.5022-100000@saturn.ispol.com>
Message-ID: <Pine.LNX.4.21.0007042112130.10834-200000@ypy.tky.hut.fi>

On Tue, 4 Jul 2000, Gregory Trubetskoy wrote:

> 
> Ilpo -
> 
> The code below worked for me without a hinch. This is on FreeBSD 4.0
> Stable, Apache 1.3.12.
> 
> Anyone else on this list experiences this problem?
> 
> Grisha
> 
> On 4 Jul 2000, Ilpo Nyyss?nen wrote:
> 
> > 
> > I tried to use urllib to retrieve some pictures dynamically, but the
> > child dies with segmentation fault. This happens also with httplib,
> > for example with the code below. The dying seems to happen when
> > closing the connection.

I forgot to mention that I have Apache 1.3.12 (this was just upgraded) in
Linux 2.2.13 (Red Hat).

I also attached a strace that I took few weeks ago.

-- 
Ilpo Nyyss?nen # biny
/* :-) */

-------------- next part --------------
socket(PF_INET, SOCK_DGRAM, IPPROTO_IP) = 6
connect(6, {sin_family=AF_INET, sin_port=htons(53), sin_addr=inet_addr("130.233.224.1")}, 16) = 0
send(6, "Z\355\1\0\0\1\0\0\0\0\0\0\3www\3"..., 28, 0) = 28
SYS_168(0xbfffd9b8, 0x1, 0x1388, 0x1388, 0xbfffd9b8) = 1
recvfrom(6, "Z\355\205\200\0\1\0\1\0\3\0\3\3w"..., 1024, 0, {sin_family=AF_INET, sin_port=htons(53), sin_addr=inet_addr("130.233.224.1")}, [16]) = 167
close(6)                                = 0
connect(5, {sin_family=AF_INET, sin_port=htons(80), sin_addr=inet_addr("130.233.220.31")}, 16) = 0
send(5, "GET / HTTP/1.0\r\n", 16, 0)    = 16
send(5, "Host: www.hut.fi\r\n", 18, 0)  = 18
send(5, "User-agent: Python-urllib/1.10\r"..., 32, 0) = 32
send(5, "\r\n", 2, 0)                   = 2
dup(5)                                  = 6
fcntl(6, F_GETFL)                       = 0x2 (flags O_RDWR)
fstat(6, {st_mode=033526, st_size=0, ...}) = 0
mmap(0, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x40615000
_llseek(0x6, 0, 0, 0xbffff1e4, 0x1)     = -1 ESPIPE (Illegal seek)
read(6, "HTTP/1.1 200 OK\r\nDate: Mon, 19"..., 1024) = 1024
close(5)                                = 0
connect(-1073745952, {...}, 1075363008) = 23
getpid()                                = 28286
open("/usr/tmp/@28286.test", O_WRONLY|O_CREAT|O_TRUNC, 0666) = 5
fstat(5, {st_mode=S_IFDIR|S_ISUID|0606, st_size=0, ...}) = 0
mmap(0, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x40618000
write(5, "blat", 4)                     = 4
close(5)                                = 0
munmap(0x40618000, 4096)                = 0
unlink("/usr/tmp/@28286.test")          = 0
getpid()                                = 28286
stat("/usr/tmp/@28286.1", 0xbffff318)   = -1 ENOENT (No such file or directory)
open("/usr/tmp/@28286.1", O_WRONLY|O_CREAT|O_TRUNC, 0666) = 5
brk(0x81a5000)                          = 0x81a5000
read(6, " href=\"http://www.hut.fi/Ajanko"..., 1024) = 875
read(6, "", 1024)                       = 0
fstat(5, {st_mode=S_IFDIR|S_ISUID|0606, st_size=0, ...}) = 0
mmap(0, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x40618000
read(6, "", 1024)                       = 0
close(6)                                = 0
munmap(0x40615000, 4096)                = 0
--- SIGSEGV (Segmentation fault) ---
chdir("/tmp")                           = 0
SYS_174(0xb, 0xbffff0bc, 0xbffff030, 0x8, 0xb) = 0
getpid()                                = 28286
kill(28286, SIGSEGV)                    = 0
sigreturn()                             = ? (mask now [])
--- SIGSEGV (Segmentation fault) ---
From morten at src.no  Sat Jul  8 14:43:59 2000
From: morten at src.no (Morten W. Petersen)
Date: Fri Jan  9 21:45:57 2004
Subject: [mod_python] Compiling on a Debian Potato with Apache binary (and apache-dev)
Message-ID: <Pine.LNX.4.21.0007081440220.31744-100000@lade.src.no>

I'm having problems compiling mod_python on a Debian 2.1; can anyone send
me a line that worked from them, compiling off of an Apache binary release
with apache-dev installed?

-Morten

-------------------------------------------------------------
How to reply to email:
  http://home.sol.no/~vidaandr/news/OBSquoting.html (norsk)
  http://home.sol.no/~vidaandr/news/FAQquoting.html (english)

Who is the bigger fool? The fool or the fool who follows him?


From richard at whitequeen.com  Thu Jul  6 21:13:04 2000
From: richard at whitequeen.com (richard offer)
Date: Fri Jan  9 21:45:57 2004
Subject: [mod_python] [ANN] slashbox - class to get/display slashdot.org news stories
Message-ID: <200007070413.e674D4510370@erij.whitequeen.com>

Hi,

Here's a quick hack of a class to get and format news stories from a
number of sites.

It was designed with mod_python in mind, so all you need to do is

import slashbox
...

def handler(req):
	...
    req.write(str(slashbox.Slashdot()))

To add the latest stories from slashdot to your page.

A number of other sites are included, its easy to add new ones simply
by sub-classing slashbox. The trick is to find the sites .rss/.rdf file.


You'll need the latest PyXML code.



richard.




# $Id: slashbox.py,v 1.2 2000/07/08 21:34:46 richard Exp $
# Copyright (c) 2000 Richard Offer <richard@whitequeen.com>. 
# All rights reserved.
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
# 
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
# 
# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL 
# Richard Offer BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN
# AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
# CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
# 
# Except as contained in this notice, the name of Richard Offer shall not be
# used in advertising or otherwise to promote the sale, use or other dealings
# in this Software without prior written authorization from Richard Offer.



#
#
# A python class to grab the Slashdot (and other sites using RSS/RDF) stories.


import stat
import xmllib
import urllib
import urlparse
import os
import time
import string
import sys
from xml.sax import saxlib,saxexts

class _myrdf(saxlib.HandlerBase):
	def __init__(self):
		self._in={}
		self._in["title"]=0
		self._in["link"]=0
		self._in["description"]=0
		self._txt={}
		self._txt["title"]=""
		self._txt["link"]=""
		self._txt["description"]=""

		self._stories=[]


	def startElement(self,ele,attr):
		if ele == 'item' :
			self._txt={}
			self._txt["title"]=""
			self._txt["link"]=""
			self._txt["description"]=""
		elif self._in.has_key(ele) :
			self._in[ele]=1
			
		else:
			pass

	def endElement(self,ele):
		if self._in.has_key(ele) :
			self._in[ele] = 0
			self._txt[ele] = string.join(string.split((self._txt[ele])))
		elif ele == 'item'  :
			self._stories.append(self._txt)

			
	
	def characters(self,ch,start,length):
		for i in self._in.keys():
				if self._in[i] == 1:
					self._txt[i] = self._txt[i] + ch[start:start+length]

	def stories(self):
		return self._stories

# class Site()

class slashbox:
	"""
Create a single slashbox.
  slashbox(url,freq)
		url is the url of the RSS/RDF file, freq is the update period (mins).
		The freq cannot be less than 30
  raw() 
		returns a list of stories (each story is stored in a dict).
  __str__() 
		returns a HTML table containing the stories.

Several subclasses are available, these already have the url defined,
so to get the headlines from slashdot.org simply do


>>> print Slashdot()

The list of built-in sites is 

	Slashdot()
	Freshmeat()
	SecurityFocus()
	Parnassus()
	LWN()
	Fool()
	LinuxNetNews()
	SourceForgeReleases()
	SourceForgeNews()


If you are using mod_python, you can embed a slashbox simply by

import slashbox
...

	req.write(str(slashbox.Slashdot()))


"""
	def __init__(self, url='http://slashdot.org/slashdot.rdf', freq=60):
		self._url=url
		if freq < 30:
			freq=30
		self._freq=freq
		_u=urlparse.urlparse(self._url)
		self._file=_u[1] + "-" + os.path.basename(url)
		if self._file == '':
			self._file = os.path.basename(url)

		self._file = "/tmp/slashbox-" + self._file

		self.site= _u[0]+ "://" + _u[1] + "/"
		self.name= _u[1]
		
		try:
			st=os.stat(self._file)
			if st[8] < ( time.time() - (self._freq*60) ):
				(fname,headers)=urllib.urlretrieve(self._url, self._file)	
		except OSError:
			(fname,headers)=urllib.urlretrieve(self._url,self._file)	

		fp=open(self._file)

		xmlp=saxexts.make_parser()

		self.dh=_myrdf()
		xmlp.setDocumentHandler(self.dh)
		xmlp.parseFile(fp)

	def stories(self):
		return self.dh.stories()
		

	def __str__(self):
		str="<SMALL>\n<TABLE BORDER=2 WIDTH=200>\n"
		str=str + '<TH><A HREF="%s">%s</A></TH>\n' % ( self.site,
				self.name )
		str=str + "<TR><TD>\n  <TABLE><TBODY>\n" 

		for i in self.dh.stories():
			str=str + '    <TR><TD><A HREF="%s">%s</A>' % ( i['link'],i['title'] )
			if i.has_key("description"):
				str=str + "<BR><SMALL>%s</SMALL>" % ( i['description'])
			str=str + '</TD></TR>\n' 
		str=str+"  </TBODY></TABLE></TD></TR>\n</TABLE></SMALL>\n\n"
		return str
		
	def setName(self,name):
		self.name=name



class Slashdot(slashbox):
	"""slashbox sub-class for Slashdot.org"""
	def __init__(self):
		_url='http://slashdot.org/slashdot.rdf'
		slashbox.__init__(self,url=_url)
		self.setName('Slashdot')

class Freshmeat(slashbox):
	"""slashbox sub-class for Freshmeat.net"""
	def __init__(self):
		_url='http://freshmeat.net/backend/fm.rdf'
		slashbox.__init__(self,url=_url)
		self.setName('Freshmeat')

class SecurityFocus(slashbox):
	"""slashbox sub-class for SecurityFocus.com"""
	def __init__(self):
		_url='http://www.securityfocus.com/topnews-rss.html'
		slashbox.__init__(self,url=_url)
		self.setName('Security Focus')

class Parnassus(slashbox):
	"""slashbox sub-class for the Vaults of Parnassus"""
	def __init__(self):
		_url='http://www.vex.net/parnassus/parnassus.rss'
		slashbox.__init__(self,url=_url)
		self.setName('Vaults of Parnassus')

class LWN(slashbox):
	"""slashbox sub-class for the Linux Weekly News"""
	def __init__(self):
		_url='http://lwn.net/headlines/rss'
		slashbox.__init__(self,url=_url)
		self.setName('Linux Weekly News')


class Fool(slashbox):
	"""slashbox sub-class for the Motley Fool"""
	def __init__(self):
		_url='http://www.fool.com/About/headlines/rss_headlines.asp'
		slashbox.__init__(self,url=_url)
		self.setName('The Motley Fool')

class LinuxNetNews(slashbox):
	"""slashbox sub-class for Linux Net News"""
	def __init__(self):
		_url='http://www.netnews.opensrc.org/index.rdf'
		slashbox.__init__(self,url=_url)
		self.setName('Linux Net News')

class SourceForgeReleases(slashbox):
	"""slashbox sub-class for new releases on SourceForge"""
	def __init__(self):
		_url='http://sourceforge.net/export/rss_sfnewreleases.php'
		slashbox.__init__(self,url=_url)
		self.setName('Sourceforge New Releases')

class SourceForgeNews(slashbox):
	"""slashbox sub-class for Project News at SourceForge"""
	def __init__(self):
		_url='http://sourceforge.net/export/rss_sfnews.php'
		slashbox.__init__(self,url=_url)
		self.setName('Sourceforge News')



if __name__ == "__main__":

	print Slashdot()	

-- 
richard offer @ home 
          84 FE 48 E4 74 D0 26 D4  31 8E B6 86 98 74 E2 7C  8A FB BF A3
___________________________________http://216.185.15.144/users/richard/

From martin at src.no  Sun Jul  9 02:40:41 2000
From: martin at src.no (Martin Jenssen)
Date: Fri Jan  9 21:45:57 2004
Subject: [mod_python] Compiling on a Debian Potato with Apache binary
 (and apache-dev)
In-Reply-To: <Pine.LNX.4.21.0007081440220.31744-100000@lade.src.no>
Message-ID: <Pine.LNX.4.21.0007090231050.9988-100000@lade.src.no>

On Sat, 8 Jul 2000, Morten W. Petersen wrote:

> I'm having problems compiling mod_python on a Debian 2.1; can anyone send
> me a line that worked from them, compiling off of an Apache binary release
> with apache-dev installed?

I am running Debian GNU/Linux 2.2 (potato), and have the following
packages installed:

	apache 1.3.12-1
	apache-common 1.3.12-1
	apache-dev 1.3.12-1

To compile this, I just did it via the method mentioned in the
documentation (as a Apache DSO):

	apxs -I /usr/include/python1.5 -c mod_python.c \
	/usr/lib/python1.5/config/libpython1.5.a -lpthread

Then I copied the mod_python.so file to /usr/lib/apache/1.3/ and added the
following line *before* any other `LoadModule'-line in
/etc/apache/httpd.conf:

	LoadModule python_module /usr/lib/apache/1.3/mod_python.so

The rest is in the documentation.  By the way, I used the official 2.4.1
release.


Martin Jenssen



From erno at iki.fi  Sun Jul  9 03:49:08 2000
From: erno at iki.fi (Erno Kuusela)
Date: Fri Jan  9 21:45:57 2004
Subject: [mod_python] Compiling on a Debian Potato with Apache binary (and apache-dev)
In-Reply-To: <Pine.LNX.4.21.0007090231050.9988-100000@lade.src.no>; from martin@src.no on Sun, Jul 09, 2000 at 02:40:41AM +0200
References: <Pine.LNX.4.21.0007081440220.31744-100000@lade.src.no> <Pine.LNX.4.21.0007090231050.9988-100000@lade.src.no>
Message-ID: <20000709034908.F8149@lib.hel.fi>

| I am running Debian GNU/Linux 2.2 (potato) [...]

| To compile this, I just did it via the method mentioned in the
| documentation (as a Apache DSO):
| 
| 	apxs -I /usr/include/python1.5 -c mod_python.c \
| 	/usr/lib/python1.5/config/libpython1.5.a -lpthread

the debian-packaged python also comes with a shared library,
so linking with -lpython1.5 instead will save you some
disk space and pehaps ram.

  -- erno

From morten at src.no  Sun Jul  9 11:54:56 2000
From: morten at src.no (Morten W. Petersen)
Date: Fri Jan  9 21:45:57 2004
Subject: [mod_python] Compiling on a Debian Potato with Apache binary
 (and apache-dev)
In-Reply-To: <Pine.LNX.4.21.0007090231050.9988-100000@lade.src.no>
Message-ID: <Pine.LNX.4.21.0007091153470.27686-100000@lade.src.no>

> To compile this, I just did it via the method mentioned in the
> documentation (as a Apache DSO):
> 
> 	apxs -I /usr/include/python1.5 -c mod_python.c \
> 	/usr/lib/python1.5/config/libpython1.5.a -lpthread

gaffel:/tmp/mod_python-2.4.1/src# gcc -DLINUX=2 -DUSE_HSREGEX -fpic \
	-DSHARED_MODULE -I/usr/include/apache-1.3 \
	-I/usr/include/python1.5 -c mod_python.c
mod_python.c:418: structure has no member named `vlist_validator'
mod_python.c:418: initializer element for `request_memberlist[29].offset'
is not constant

----
And now I'm a bit off. (...) Any ideas?

Regards, Morten


From michael at stroeder.com  Sun Jul  9 13:20:20 2000
From: michael at stroeder.com (Michael =?iso-8859-1?Q?Str=C3=B6der?=)
Date: Fri Jan  9 21:45:57 2004
Subject: [mod_python] mod_python, HTTP headers and CRLF
Message-ID: <39685FF4.246ED56F@stroeder.com>

HI!

I experienced some problems with sending HTTP headers. I'm
generating HTTP header lines separated with \r\n since HTTP standard
1.0 says in section 4.2 "Message Headers":

----------------------------- snip ------------------------------
       HTTP-header    = field-name ":" [ field-value ] CRLF
----------------------------- snip ------------------------------

In apache.py class CGIStdout method write() the headers are splitted
by using \n\n as separator which fails if scripts are sending header
conform to HTTP specs above. Here's a patch by using \r\n\r\n as
second possible
separator:

----------------------------- snip ------------------------------
395a396,400
> 
>             if len(ss) < 2:
>               # Second try with splitting by using \r\n\r\n as separator
>               ss = string.split(self.headers, '\r\n\r\n', 1)
> 
----------------------------- snip ------------------------------

Would be nice if this patch makes its way into the mod_python
distribution.

Ciao, Michael.

From martin at src.no  Sun Jul  9 15:27:12 2000
From: martin at src.no (Martin Jenssen)
Date: Fri Jan  9 21:45:57 2004
Subject: [mod_python] Compiling on a Debian Potato with Apache binary (and apache-dev)
In-Reply-To: <Pine.LNX.4.21.0007091153470.27686-100000@lade.src.no>; from morten@src.no on Sun, Jul 09, 2000 at 11:54:56AM +0200
References: <Pine.LNX.4.21.0007090231050.9988-100000@lade.src.no> <Pine.LNX.4.21.0007091153470.27686-100000@lade.src.no>
Message-ID: <20000709152712.A1317@localhost>

On Sun, Jul 09, 2000 at 11:54:56AM +0200, Morten W. Petersen wrote:

| gaffel:/tmp/mod_python-2.4.1/src# gcc -DLINUX=2 -DUSE_HSREGEX -fpic \
| 	-DSHARED_MODULE -I/usr/include/apache-1.3 \
| 	-I/usr/include/python1.5 -c mod_python.c
| mod_python.c:418: structure has no member named `vlist_validator'
| mod_python.c:418: initializer element for `request_memberlist[29].offset'
| is not constant

It seems that you are using an older collection of the apache C header
files.  Check if your /usr/include/apache-1.3/httpd.h have a line
defining vlist_validator.


Martin Jenssen


From grisha at ispol.com  Mon Jul 10 08:13:21 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:45:57 2004
Subject: [mod_python] mod_python, HTTP headers and CRLF
In-Reply-To: <39685FF4.246ED56F@stroeder.com>
Message-ID: <Pine.LNX.4.21.0007100812370.5519-100000@saturn.ispol.com>

This is clearly a bug and I'll make sure it's fixed. Thanks for pointing
it out.

Grisha

On Sun, 9 Jul 2000, Michael Str??der wrote:

> HI!
> 
> I experienced some problems with sending HTTP headers. I'm
> generating HTTP header lines separated with \r\n since HTTP standard
> 1.0 says in section 4.2 "Message Headers":
> 
> ----------------------------- snip ------------------------------
>        HTTP-header    = field-name ":" [ field-value ] CRLF
> ----------------------------- snip ------------------------------
> 
> In apache.py class CGIStdout method write() the headers are splitted
> by using \n\n as separator which fails if scripts are sending header
> conform to HTTP specs above. Here's a patch by using \r\n\r\n as
> second possible
> separator:
> 
> ----------------------------- snip ------------------------------
> 395a396,400
> > 
> >             if len(ss) < 2:
> >               # Second try with splitting by using \r\n\r\n as separator
> >               ss = string.split(self.headers, '\r\n\r\n', 1)
> > 
> ----------------------------- snip ------------------------------
> 
> Would be nice if this patch makes its way into the mod_python
> distribution.
> 
> Ciao, Michael.
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From list-modpython at ccraig.org  Tue Jul 11 22:23:10 2000
From: list-modpython at ccraig.org (list-modpython@ccraig.org)
Date: Fri Jan  9 21:45:58 2004
Subject: [mod_python] Segfault on Apache Startup
Message-ID: <m3lmz8dr3l.fsf@elbereth.ccraig.org>

#LoadModule mmap_static_module modules/mod_mmap_static.so
LoadModule python_module modules/mod_python.so
LoadModule vhost_alias_module modules/mod_vhost_alias.so
LoadModule env_module         modules/mod_env.so
LoadModule config_log_module  modules/mod_log_config.so
LoadModule agent_log_module   modules/mod_log_agent.so
LoadModule referer_log_module modules/mod_log_referer.so
#LoadModule mime_magic_module  modules/mod_mime_magic.so
LoadModule mime_module        modules/mod_mime.so
LoadModule negotiation_module modules/mod_negotiation.so
LoadModule status_module      modules/mod_status.so
LoadModule info_module        modules/mod_info.so
LoadModule includes_module    modules/mod_include.so
LoadModule autoindex_module   modules/mod_autoindex.so
LoadModule dir_module         modules/mod_dir.so
LoadModule cgi_module         modules/mod_cgi.so
LoadModule asis_module        modules/mod_asis.so
LoadModule imap_module        modules/mod_imap.so
LoadModule action_module      modules/mod_actions.so
#LoadModule speling_module     modules/mod_speling.so
LoadModule userdir_module     modules/mod_userdir.so
LoadModule alias_module       modules/mod_alias.so
LoadModule rewrite_module     modules/mod_rewrite.so
LoadModule access_module      modules/mod_access.so
LoadModule auth_module        modules/mod_auth.so
LoadModule anon_auth_module   modules/mod_auth_anon.so
LoadModule db_auth_module     modules/mod_auth_db.so
LoadModule digest_module      modules/mod_digest.so
LoadModule proxy_module       modules/libproxy.so
#LoadModule cern_meta_module   modules/mod_cern_meta.so
LoadModule expires_module     modules/mod_expires.so
LoadModule headers_module     modules/mod_headers.so
LoadModule usertrack_module   modules/mod_usertrack.so
#LoadModule example_module     modules/mod_example.so
#LoadModule unique_id_module   modules/mod_unique_id.so
LoadModule setenvif_module    modules/mod_setenvif.so
#LoadModule bandwidth_module   modules/mod_bandwidth.so
#LoadModule put_module		modules/mod_put.so

# Extra Modules
#LoadModule perl_module        modules/libperl.so
#LoadModule php_module         modules/mod_php.so
#LoadModule php3_module        modules/libphp3.so


#  Reconstruction of the complete module list from all available modules
#  (static and shared ones) to achieve correct module execution order.
#  [WHENEVER YOU CHANGE THE LOADMODULE SECTION ABOVE UPDATE THIS, TOO]
ClearModuleList
AddModule mod_python.c
#AddModule mod_mmap_static.c
AddModule mod_vhost_alias.c
AddModule mod_env.c
AddModule mod_log_config.c
AddModule mod_log_agent.c
AddModule mod_log_referer.c
#AddModule mod_mime_magic.c
AddModule mod_mime.c
AddModule mod_negotiation.c
AddModule mod_status.c
AddModule mod_info.c
AddModule mod_include.c
AddModule mod_autoindex.c
AddModule mod_dir.c
AddModule mod_cgi.c
AddModule mod_asis.c
AddModule mod_imap.c
AddModule mod_actions.c
#AddModule mod_speling.c
AddModule mod_userdir.c
AddModule mod_alias.c
AddModule mod_rewrite.c
AddModule mod_access.c
AddModule mod_auth.c
AddModule mod_auth_anon.c
AddModule mod_auth_db.c
AddModule mod_digest.c
AddModule mod_proxy.c
#AddModule mod_cern_meta.c
AddModule mod_expires.c
AddModule mod_headers.c
AddModule mod_usertrack.c
#AddModule mod_example.c
#AddModule mod_unique_id.c
AddModule mod_so.c
AddModule mod_setenvif.c
#AddModule mod_bandwidth.c
#AddModule mod_put.c

# Extra Modules
#AddModule mod_perl.c
#AddModule mod_php.c
#AddModule mod_php3.c
-------------- next part --------------
GNU gdb 4.18
Copyright 1998 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "i386-redhat-linux"...
(no debugging symbols found)...
Core was generated by `httpd -X'.
Program terminated with signal 11, Segmentation fault.
Reading symbols from /lib/libm.so.6...done.
Reading symbols from /lib/libcrypt.so.1...done.
Reading symbols from /lib/libdb.so.3...done.
Reading symbols from /lib/libdl.so.2...done.
Reading symbols from /lib/libc.so.6...done.
Reading symbols from /lib/ld-linux.so.2...done.
Reading symbols from /lib/libnss_files.so.2...done.
Reading symbols from /etc/httpd/modules/mod_python.so...done.
Reading symbols from /lib/libpthread.so.0...done.
Reading symbols from /etc/httpd/modules/mod_vhost_alias.so...done.
Reading symbols from /etc/httpd/modules/mod_env.so...done.
Reading symbols from /etc/httpd/modules/mod_log_config.so...done.
Reading symbols from /etc/httpd/modules/mod_log_agent.so...done.
Reading symbols from /etc/httpd/modules/mod_log_referer.so...done.
Reading symbols from /etc/httpd/modules/mod_mime.so...done.
Reading symbols from /etc/httpd/modules/mod_negotiation.so...done.
Reading symbols from /etc/httpd/modules/mod_status.so...done.
Reading symbols from /etc/httpd/modules/mod_info.so...done.
Reading symbols from /etc/httpd/modules/mod_include.so...done.
Reading symbols from /etc/httpd/modules/mod_autoindex.so...done.
Reading symbols from /etc/httpd/modules/mod_dir.so...done.
Reading symbols from /etc/httpd/modules/mod_cgi.so...done.
Reading symbols from /etc/httpd/modules/mod_asis.so...done.
Reading symbols from /etc/httpd/modules/mod_imap.so...done.
Reading symbols from /etc/httpd/modules/mod_actions.so...done.
Reading symbols from /etc/httpd/modules/mod_userdir.so...done.
Reading symbols from /etc/httpd/modules/mod_alias.so...done.
Reading symbols from /etc/httpd/modules/mod_rewrite.so...done.
Reading symbols from /etc/httpd/modules/mod_access.so...done.
Reading symbols from /etc/httpd/modules/mod_auth.so...done.
Reading symbols from /etc/httpd/modules/mod_auth_anon.so...done.
Reading symbols from /etc/httpd/modules/mod_auth_db.so...done.
Reading symbols from /etc/httpd/modules/mod_digest.so...done.
Reading symbols from /etc/httpd/modules/libproxy.so...done.
Reading symbols from /etc/httpd/modules/mod_expires.so...done.
Reading symbols from /etc/httpd/modules/mod_headers.so...done.
Reading symbols from /etc/httpd/modules/mod_usertrack.so...done.
Reading symbols from /etc/httpd/modules/mod_setenvif.so...done.
#0  0x4021a047 in ?? () from /lib/libpthread.so.0
(gdb) bt
#0  0x4021a047 in ?? () from /lib/libpthread.so.0
#1  0x401352eb in __getpwnam_r (name=0x80a9dc4 "nobody", resbuf=0x40196240, 
    buffer=0x80a6f08 "nobody", buflen=1024, result=0xbfffd5fc)
    at ../nss/getXXbyYY_r.c:182
#2  0x40134ba0 in getpwnam () at ../nss/getXXbyYY.c:156
#3  0x8064c26 in ap_uname2id ()
#4  0x8057043 in ap_exists_config_define ()
#5  0x8053e8c in ap_clear_module_list ()
#6  0x80540cc in ap_handle_command ()
#7  0x8054118 in ap_srm_command_loop ()
#8  0x8054487 in ap_process_resource_config ()
#9  0x8054b04 in ap_read_config ()
#10 0x805bf97 in ap_child_terminate ()
#11 0x805c65f in main ()
#12 0x400bc9cb in __libc_start_main () at ../sysdeps/generic/libc-start.c:122
(gdb) 
-------------- next part --------------

I'm using mod_python version 2.4.1 on a RedHat 6.2 machine,
kernel 2.2.16 and Apache 1.3.12

The module was compiled with the following command:

apxs -c -I/usr/include/python1.5 -L/usr/lib/python1.5/config \
-lpython1.5 -lpthread -lieee -lm -ldl mod_python.c


I'm including a complete list of module loads and a backtrace of the
core dump.  This segfault does not occur if the LoadModule for
mod_python are commented out, but does if only the AddModule is.

I hope this was somewhat helpful,

-- 
Christopher A. Craig <ccraig@ccraig.org>
When you say "I wrote a program that crashed Windows", people just stare at
you blankly and say "Hey, I got those with the system, *for free*". - Linus
http://www.ccraig.org
From richard at whitequeen.com  Sun Jul  9 06:30:47 2000
From: richard at whitequeen.com (richard offer)
Date: Fri Jan  9 21:45:58 2004
Subject: [mod_python] Segfault on Apache Startup
In-Reply-To: list-modpython@ccraig.org
       "[mod_python] Segfault on Apache Startup" (Jul 11, 10:23pm)
Message-ID: <200007091330.e69DUlZ14193@erij.whitequeen.com>

* $ from list-modpython@ccraig.org at "11-Jul:10:23pm" | sed "1,$s/^/* /" 
*
* #0  0x4021a047 in ?? () from /lib/libpthread.so.0
* (gdb) bt
* #0  0x4021a047 in ?? () from /lib/libpthread.so.0
* #1  0x401352eb in __getpwnam_r (name=0x80a9dc4 "nobody", resbuf=0x40196240, 
*     buffer=0x80a6f08 "nobody", buflen=1024, result=0xbfffd5fc)
*     at ../nss/getXXbyYY_r.c:182
* #2  0x40134ba0 in getpwnam () at ../nss/getXXbyYY.c:156
* #3  0x8064c26 in ap_uname2id ()
* #4  0x8057043 in ap_exists_config_define ()
* #5  0x8053e8c in ap_clear_module_list ()
* #6  0x80540cc in ap_handle_command ()
* #7  0x8054118 in ap_srm_command_loop ()
* #8  0x8054487 in ap_process_resource_config ()
* #9  0x8054b04 in ap_read_config ()
* #10 0x805bf97 in ap_child_terminate ()
* #11 0x805c65f in main ()
* #12 0x400bc9cb in __libc_start_main () at ../sysdeps/generic/libc-start.c:122
* (gdb) 
* --=-=-=
* 
* 
* I'm using mod_python version 2.4.1 on a RedHat 6.2 machine,
* kernel 2.2.16 and Apache 1.3.12
* 
* The module was compiled with the following command:
* 
* apxs -c -I/usr/include/python1.5 -L/usr/lib/python1.5/config \
* -lpython1.5 -lpthread -lieee -lm -ldl mod_python.c

You probably want to link python in statically, I did something like

apxs -c -I/usr/include/python1.5 mod_python.c
/usr/lib/python1.5/config/libpython1.5.a -lpthread

* 
* 
* I'm including a complete list of module loads and a backtrace of the
* core dump.  This segfault does not occur if the LoadModule for
* mod_python are commented out, but does if only the AddModule is.
* 
* I hope this was somewhat helpful,

I assume that you are consistant in the threading (both python and mod_python are threaded or neither).


However something that I found was that trying to use a threaded python
in a chroot'ed environment didn't work. Threaded python worked okay
outside the chroot and a non-threaded python worked okay in th chroot.

* Christopher A. Craig <ccraig@ccraig.org>


richard.


-- 
richard offer @ home 
          84 FE 48 E4 74 D0 26 D4  31 8E B6 86 98 74 E2 7C  8A FB BF A3
___________________________________http://216.185.15.144/users/richard/

From grisha at ispol.com  Wed Jul 12 13:46:15 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:45:58 2004
Subject: [mod_python] embedded Python
Message-ID: <Pine.LNX.4.21.0007121334500.14643-100000@saturn.ispol.com>


Based on what I've seen in the newsgroups and the e-mails that I often
get, there seems to be a strong interest in html-embedded Python, in fact,
from what I gather, some people went through the trouble of downloading
and installing mod_python with that expectation only to find out that it
does no such thing.

I personally think it would be extremely nice if mod_python came bundled
with a (reliable and usable) handler that processed Python embedded within
HTML. There a couple of questions that I have about it though -

1. First - is there really a great need for embedded Python? Are a lot of
people using PMZ and similar things and want them to work with mod_python?

2. Would this be something that is more desired than other fancy things
like dynamic handler registration and a deeper integration with apache
api? In other words, would you rather have a cool embedded Python thing
than the ability to create your own Apache configuration directives?

3. Should embedded Python be a project of its own, or would it be
appropriate to include it in the scope of mod_python?

Any other comments, suggestions, pointers, etc are appreciated.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com


From richard at whitequeen.com  Sun Jul  9 09:19:04 2000
From: richard at whitequeen.com (richard offer)
Date: Fri Jan  9 21:45:58 2004
Subject: [mod_python] embedded Python
In-Reply-To: Gregory Trubetskoy <grisha@ispol.com>
       "[mod_python] embedded Python" (Jul 12,  1:46pm)
Message-ID: <200007091619.e69GJ4V14406@erij.whitequeen.com>

* $ from grisha@ispol.com at "12-Jul: 1:46pm" | sed "1,$s/^/* /" 
*
*
* 
* 
* Based on what I've seen in the newsgroups and the e-mails that I often
* get, there seems to be a strong interest in html-embedded Python, in fact,
* from what I gather, some people went through the trouble of downloading
* and installing mod_python with that expectation only to find out that it
* does no such thing.
* 
* I personally think it would be extremely nice if mod_python came bundled
* with a (reliable and usable) handler that processed Python embedded within
* HTML. There a couple of questions that I have about it though -
* 
* 1. First - is there really a great need for embedded Python? Are a lot of
* people using PMZ and similar things and want them to work with mod_python?
* 
* 2. Would this be something that is more desired than other fancy things
* like dynamic handler registration and a deeper integration with apache
* api? In other words, would you rather have a cool embedded Python thing
* than the ability to create your own Apache configuration directives?
* 
* 3. Should embedded Python be a project of its own, or would it be
* appropriate to include it in the scope of mod_python?

I think it belongs in mod_python, I see a sort of spectrum, at one end
you have an HTML file that has a few lines of Python to replace a SSI,
at the other full python programs that happen to spit out HTML. However,
you could argue that for the HTML case, the startup time for an external
intrepreter would be even more excessive than a large python application.

I could also see how it could be useful to be able to have different
handlers in the embedded code (say to display different information
depending on whether you have authenticated yourself). But this okay to
leave until version n+1. :-)

Is it possible to have multiple (completely distinct) apps in the same
directory ?

I'm biased, I'm just an average engineer, someone who'd rather write
code to spit out HTML, than HTML :-)

*   Gregory (Grisha) Trubetskoy
*        grisha@ispol.com
* 

richard.

-- 
richard offer @ home 
          84 FE 48 E4 74 D0 26 D4  31 8E B6 86 98 74 E2 7C  8A FB BF A3
___________________________________http://216.185.15.144/users/richard/

From sylvan at ravinet.com  Thu Jul 13 02:12:15 2000
From: sylvan at ravinet.com (Sylvan Ravinet)
Date: Fri Jan  9 21:45:58 2004
Subject: [mod_python] embedded Python
References: <Pine.LNX.4.21.0007121334500.14643-100000@saturn.ispol.com>
Message-ID: <396CFB4F.4B0B12CE@ravinet.com>

hello,

Gregory Trubetskoy wrote:
> 
> Based on what I've seen in the newsgroups and the e-mails that I often
> get, there seems to be a strong interest in html-embedded Python, in fact,
> from what I gather, some people went through the trouble of downloading
> and installing mod_python with that expectation only to find out that it
> does no such thing.

I'm among those...

> I personally think it would be extremely nice if mod_python came bundled
> with a (reliable and usable) handler that processed Python embedded within
> HTML.

I fully agree.

>There a couple of questions that I have about it though -
> 
> 1. First - is there really a great need for embedded Python? Are a lot of
> people using PMZ and similar things and want them to work with mod_python?

I'm not using PMZ, but I tried moderately to make it work with
mod_python. I have to say that this Handler process is still cryptic to
me.

> 2. Would this be something that is more desired than other fancy things
> like dynamic handler registration and a deeper integration with apache
> api? In other words, would you rather have a cool embedded Python thing
> than the ability to create your own Apache configuration directives?

Is that so difficult to implement? Isn't this PMZ already usable for
this purpose? (of course, with a good knowledge of mod_python)

> 3. Should embedded Python be a project of its own, or would it be
> appropriate to include it in the scope of mod_python?

Why another project? As a dedicated python handler for mod_python, that
sounds fine to me. (that can be only one example of mod_python use,
really good indeed)

Thank you for the good work already put in mod_python,

Best regards,

-Sylvan

--
Do, or do not. There is no try. -Yoda
Sylvan Ravinet: http://www.ravinet.com/sylvan/contact

From gtalvola at nameconnector.com  Thu Jul 13 09:35:55 2000
From: gtalvola at nameconnector.com (Geoff Talvola)
Date: Fri Jan  9 21:45:58 2004
Subject: [mod_python] embedded Python
References: <Pine.LNX.4.21.0007121334500.14643-100000@saturn.ispol.com> <396CFB4F.4B0B12CE@ravinet.com>
Message-ID: <396DC5BB.BF4A741E@NameConnector.com>

One project that allows embedding of Python in HTML is WebWare for Python, which
has a Python Server Pages component.  See http://webware.sourceforge.net/ for
details.

WebWare is still in Alpha phase, but it looks quite useful already.  It has a
number of nice features such as Session objects to automatically handle session
data, and the ability to write web applications in an object-oriented manner.
You can mix and match Python Server Pages with pages that are implemented as
Python classes.

And it should work with mod_python on Linux -- I remember some messages on the
mailing list to that effect.  I'm planning on trying to get it to work with
mod_python on Windows NT, which I don't think anyone has attempted yet.  You can
also use it with plain old CGI (which will be slower) or FastCGI.

--


- Geoff Talvola
  Parlance Corporation
  gtalvola@NameConnector.com


From grisha at ispol.com  Thu Jul 13 17:26:31 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:45:58 2004
Subject: [mod_python] embedded Python
In-Reply-To: <396DC5BB.BF4A741E@NameConnector.com>
Message-ID: <Pine.LNX.4.21.0007131725240.19178-100000@saturn.ispol.com>

If that thing works reliably, then we can just put a pointer to it as a
"recommended solution" for this sort of thing with mod_python on the
website or the faq somewhere.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Thu, 13 Jul 2000, Geoff Talvola wrote:

> One project that allows embedding of Python in HTML is WebWare for Python, which
> has a Python Server Pages component.  See http://webware.sourceforge.net/ for
> details.
> 
> WebWare is still in Alpha phase, but it looks quite useful already.  It has a
> number of nice features such as Session objects to automatically handle session
> data, and the ability to write web applications in an object-oriented manner.
> You can mix and match Python Server Pages with pages that are implemented as
> Python classes.
> 
> And it should work with mod_python on Linux -- I remember some messages on the
> mailing list to that effect.  I'm planning on trying to get it to work with
> mod_python on Windows NT, which I don't think anyone has attempted yet.  You can
> also use it with plain old CGI (which will be slower) or FastCGI.
> 
> --
> 
> 
> - Geoff Talvola
>   Parlance Corporation
>   gtalvola@NameConnector.com
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From jtravis at cse.unl.edu  Thu Jul 13 17:01:19 2000
From: jtravis at cse.unl.edu (Jon Travis)
Date: Fri Jan  9 21:45:58 2004
Subject: [mod_python] embedded Python
In-Reply-To: <396DC5BB.BF4A741E@NameConnector.com> from Geoff Talvola at "Jul
 13, 2000 09:35:55 am"
Message-ID: <200007132201.RAA12712709@cse.unl.edu>

I don't know if it is inappropriate to post this, but:

Another project that already allows embedded Python is the mod_snake
project @ http://modsnake.sourceforge.net

-- Jon


> One project that allows embedding of Python in HTML is WebWare for Python, which
> has a Python Server Pages component.  See http://webware.sourceforge.net/ for
> details.
> 
> WebWare is still in Alpha phase, but it looks quite useful already.  It has a
> number of nice features such as Session objects to automatically handle session
> data, and the ability to write web applications in an object-oriented manner.
> You can mix and match Python Server Pages with pages that are implemented as
> Python classes.
> 
> And it should work with mod_python on Linux -- I remember some messages on the
> mailing list to that effect.  I'm planning on trying to get it to work with
> mod_python on Windows NT, which I don't think anyone has attempted yet.  You can
> also use it with plain old CGI (which will be slower) or FastCGI.
> 
> --
> 
> 
> - Geoff Talvola
>   Parlance Corporation
>   gtalvola@NameConnector.com
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From grisha at ispol.com  Thu Jul 13 18:53:36 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:45:58 2004
Subject: [mod_python] embedded Python
In-Reply-To: <200007132201.RAA12712709@cse.unl.edu>
Message-ID: <Pine.LNX.4.21.0007131852280.19470-100000@saturn.ispol.com>

On Thu, 13 Jul 2000, Jon Travis wrote:

> I don't know if it is inappropriate to post this, but:
> 
> Another project that already allows embedded Python is the mod_snake
> project @ http://modsnake.sourceforge.net

Yeah, but who wants to use mod_snake?

(Juuust kidding!!!!)

Grisha


From gstein at lyra.org  Thu Jul 13 16:16:47 2000
From: gstein at lyra.org (Greg Stein)
Date: Fri Jan  9 21:45:58 2004
Subject: [mod_python] embedded Python
In-Reply-To: <Pine.LNX.4.21.0007131852280.19470-100000@saturn.ispol.com>; from grisha@ispol.com on Thu, Jul 13, 2000 at 06:53:36PM -0400
References: <200007132201.RAA12712709@cse.unl.edu> <Pine.LNX.4.21.0007131852280.19470-100000@saturn.ispol.com>
Message-ID: <20000713161647.F29590@lyra.org>

What cracks me up, is that Python was not named after the snake. So
mod_snake is a complete misnomer :-)

[ Python was named after Monty Python's Flying Circus ]

Cheers,
-g

On Thu, Jul 13, 2000 at 06:53:36PM -0400, Gregory Trubetskoy wrote:
> 
> On Thu, 13 Jul 2000, Jon Travis wrote:
> 
> > I don't know if it is inappropriate to post this, but:
> > 
> > Another project that already allows embedded Python is the mod_snake
> > project @ http://modsnake.sourceforge.net
> 
> Yeah, but who wants to use mod_snake?
> 
> (Juuust kidding!!!!)
> 
> Grisha
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python

-- 
Greg Stein, http://www.lyra.org/

From jtravis at cse.unl.edu  Thu Jul 13 18:25:29 2000
From: jtravis at cse.unl.edu (Jon Travis)
Date: Fri Jan  9 21:45:58 2004
Subject: [mod_python] embedded Python
In-Reply-To: <20000713161647.F29590@lyra.org> from Greg Stein at "Jul 13, 2000
 04:16:47 pm"
Message-ID: <200007132325.SAA14020407@cse.unl.edu>

I realize where the name came from ;-)  I couldn't think of
anything that would work well, like, mod_spamity_spam, or 
ministry_of_apache_modules, so I decided this was about as
good as I could do.  Originally it was mod_snakey, but .. ya know..
one can only be soooo lame.  ;-)

-- Jon


> What cracks me up, is that Python was not named after the snake. So
> mod_snake is a complete misnomer :-)
> 
> [ Python was named after Monty Python's Flying Circus ]
> 
> Cheers,
> -g
> 
> On Thu, Jul 13, 2000 at 06:53:36PM -0400, Gregory Trubetskoy wrote:
> > 
> > On Thu, 13 Jul 2000, Jon Travis wrote:
> > 
> > > I don't know if it is inappropriate to post this, but:
> > > 
> > > Another project that already allows embedded Python is the mod_snake
> > > project @ http://modsnake.sourceforge.net
> > 
> > Yeah, but who wants to use mod_snake?
> > 
> > (Juuust kidding!!!!)
> > 
> > Grisha
> > 
> > _______________________________________________
> > Mod_python mailing list
> > Mod_python@modpython.org
> > http://www.modpython.org/mailman/listinfo/mod_python
> 
> -- 
> Greg Stein, http://www.lyra.org/
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From grisha at ispol.com  Thu Jul 13 23:17:03 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:45:58 2004
Subject: [mod_python] embedded Python
In-Reply-To: <200007132325.SAA14020407@cse.unl.edu>
Message-ID: <Pine.LNX.4.21.0007132301530.20200-100000@saturn.ispol.com>

How about mod_monty?

Getting more to the point though - I am a proponent of the idea that
competition in the open source is not a good thing. It makes the life of
users more complicated.... I'd much rather there was one module that was
done right than several half-ass ones, like what we have now.

Grisha


On Thu, 13 Jul 2000, Jon Travis wrote:

> I realize where the name came from ;-)  I couldn't think of
> anything that would work well, like, mod_spamity_spam, or 
> ministry_of_apache_modules, so I decided this was about as
> good as I could do.  Originally it was mod_snakey, but .. ya know..
> one can only be soooo lame.  ;-)
> 
> -- Jon
> 
> 
> > What cracks me up, is that Python was not named after the snake. So
> > mod_snake is a complete misnomer :-)
> > 
> > [ Python was named after Monty Python's Flying Circus ]
> > 
> > Cheers,
> > -g
> > 
> > On Thu, Jul 13, 2000 at 06:53:36PM -0400, Gregory Trubetskoy wrote:
> > > 
> > > On Thu, 13 Jul 2000, Jon Travis wrote:
> > > 
> > > > I don't know if it is inappropriate to post this, but:
> > > > 
> > > > Another project that already allows embedded Python is the mod_snake
> > > > project @ http://modsnake.sourceforge.net
> > > 
> > > Yeah, but who wants to use mod_snake?
> > > 
> > > (Juuust kidding!!!!)
> > > 
> > > Grisha
> > > 
> > > _______________________________________________
> > > Mod_python mailing list
> > > Mod_python@modpython.org
> > > http://www.modpython.org/mailman/listinfo/mod_python
> > 
> > -- 
> > Greg Stein, http://www.lyra.org/
> > _______________________________________________
> > Mod_python mailing list
> > Mod_python@modpython.org
> > http://www.modpython.org/mailman/listinfo/mod_python
> > 
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From richard at whitequeen.com  Thu Jul 13 17:27:52 2000
From: richard at whitequeen.com (richard offer)
Date: Fri Jan  9 21:45:58 2004
Subject: [mod_python] embedded Python
In-Reply-To: Gregory Trubetskoy <grisha@ispol.com>
       "Re: [mod_python] embedded Python" (Jul 13, 11:17pm)
Message-ID: <200007140027.e6E0RqB03344@erij.whitequeen.com>

* $ from grisha@ispol.com at "13-Jul:11:17pm" | sed "1,$s/^/* /" 
*
*
* 
* How about mod_monty?

mod_fullmonty ?

* 
* Getting more to the point though - I am a proponent of the idea that
* competition in the open source is not a good thing. It makes the life of
* users more complicated.... I'd much rather there was one module that was
* done right than several half-ass ones, like what we have now.

So, what do you see as the strengths and weaknesses of each ? 

* 
* Grisha
* 

richard.

-- 
richard offer @ home 
          84 FE 48 E4 74 D0 26 D4  31 8E B6 86 98 74 E2 7C  8A FB BF A3
___________________________________http://216.185.15.144/users/richard/

From rsalz at CaveoSystems.com  Sat Jul 15 22:31:36 2000
From: rsalz at CaveoSystems.com (rsalz@CaveoSystems.com)
Date: Fri Jan  9 21:45:58 2004
Subject: [mod_python] Swig, and mod_ssl
Message-ID: <200007160231.WAA04120@pc1.caveosystems.com>

Swig (http://www.swig.org) is a "compiler" that can parse most C
header files and automatically generate code for Perl, Tcl, Python,
and Java.  At a rough guess, approximately half of mod_python.c could
be replaced by a couple-dozen lines.  I wonder if it makes sense
to use SWIG, and for sites without it, include the Swig output.
(Just like some programs include the output of Yacc, for those without it.)

Second question, which motivated the first: anyone looked at what
could/should be added to the mod_python objects when mod_ssl is used?
	/r$

From michael at stroeder.com  Sun Jul 16 14:46:45 2000
From: michael at stroeder.com (Michael =?iso-8859-1?Q?Str=F6der?=)
Date: Fri Jan  9 21:45:58 2004
Subject: [mod_python] Swig, and mod_ssl
References: <200007160231.WAA04120@pc1.caveosystems.com>
Message-ID: <3971AEB5.AB577533@stroeder.com>

rsalz@caveosystems.com wrote:
> 
> Second question, which motivated the first: anyone looked at what
> could/should be added to the mod_python objects when mod_ssl is used?

Callback functions for checking client certificates.
Well, one can do this also with M2Crypto anyway.

Ciao, Michael.

From rsalz at CaveoSystems.com  Sun Jul 16 15:37:27 2000
From: rsalz at CaveoSystems.com (rsalz@CaveoSystems.com)
Date: Fri Jan  9 21:45:58 2004
Subject: [mod_python] Swig, and mod_ssl
Message-ID: <200007161937.PAA10021@pc1.caveosystems.com>

>Callback functions for checking client certificates.
>Well, one can do this also with M2Crypto anyway.

Well yeah, but M2Crypto isn't integrated with mod_ssl and Apache.
(M2Crypto is a SWIG interface to OpenSSL, for those who don't know.)
At a minimum, I'd like to be able to get the client cert if
coming in via SSL, or know if there isn't one.
	/r$

From grisha at ispol.com  Sun Jul 16 21:02:58 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:45:58 2004
Subject: [mod_python] Swig, and mod_ssl
In-Reply-To: <200007160231.WAA04120@pc1.caveosystems.com>
Message-ID: <Pine.LNX.4.21.0007162059470.8470-100000@saturn.ispol.com>

On Sat, 15 Jul 2000 rsalz@caveosystems.com wrote:

> Swig (http://www.swig.org) is a "compiler" that can parse most C
> header files and automatically generate code for Perl, Tcl, Python,
> and Java.  At a rough guess, approximately half of mod_python.c could
> be replaced by a couple-dozen lines.  I wonder if it makes sense
> to use SWIG, and for sites without it, include the Swig output.
> (Just like some programs include the output of Yacc, for those without it.)

mod_snake is swig-based. I don't know enough about swig to make a
judgement. So far I've getting by fine without it - I sort of assumed it's
more trouble than it's worth.

> Second question, which motivated the first: anyone looked at what
> could/should be added to the mod_python objects when mod_ssl is used?

mod_python should work just fine with mod_ssl. At least it did for me on
FreeBSD. How is SSL different from anything else that you need special
objects?

Grisha


From rsalz at CaveoSystems.com  Sun Jul 16 22:23:41 2000
From: rsalz at CaveoSystems.com (rsalz@CaveoSystems.com)
Date: Fri Jan  9 21:45:58 2004
Subject: [mod_python] Swig, and mod_ssl
Message-ID: <200007170223.WAA10313@pc1.caveosystems.com>

Thanks, I'll check out mod_snake. (What's its relationship to mod_python,
and where can I find it?  I know, I should just check the archives since
that discussion just happened.)

SWIG seems pretty easy to get running on most platforms -- it should
generally be almost as simple to build as python.  I think it would
be worth the trouble. I think about half of mod_python.c, or over 1000
lines, could be removed -- SWIG could read httpd.h (et al) and
generate the C code for the "request" object (and the others)
automatically.  I'd suggest you give it a look-see.

As for SSL, I'm not sure.  Certainly I want to get the client cert.
I have to rummage more through mod_ssl, first.
	/r$

From peter at wl.vg  Sun Jul 16 23:28:44 2000
From: peter at wl.vg (Peter Halliday)
Date: Fri Jan  9 21:45:58 2004
Subject: [mod_python] problem compiling mod_python
Message-ID: <39727D6C.A7AA1541@wl.vg>

While waiting for someone to email me an RPM of mod_python 2.4.1, I
tried compiling it.  I got a copy of the apache source as well as the
above mod_python source.  Then I installed it using the DSO instructions
on the modpython webpage.  Everything seemed to go ok.  (One problem
however, I was unsure whether my python was compiled using thread
support because I use RedHat with the standard RPM that came with it. 
However, everything seemed ok when I compiled.  No error messages.  I
added these lines to my apache config file.

LoadModule python_module  module/mod_python.so
AddModule mod_python.c
AddHandler python-program .py
PythonHandler test
PythonDebug On
and then in my mime.types file I added:
application/x-python py
 
In my DocumentRoot directory I created a directory called test.  I had a
script with the following contents.

from mod_python import apache

def handler(req):
	req.send_http_header()
        req.write("Hello World!")
        return apache.OK 

I still get the same error when I add a '#!/usr/bin/python' to the top
of the file.  The following is the error that I receive.  I am running
RedHat Linux 6.2, Apache 1.3.12, mod_python 2.4.1., python 1.5.  I have
kept everything standard as came on RedHat.  

Mod_python error: "PythonHandler test"

Traceback (innermost last):

  File "/usr/lib/python1.5/site-packages/mod_python/apache.py", line
116, in Dispatch
    object = self.resolve_object(module, object_str)

  File "/usr/lib/python1.5/site-packages/mod_python/apache.py", line 51,
in resolve_object
    raise AttributeError, s

AttributeError: module '/usr/lib/python1.5/test/__init__.pyc' contains
no 'handler'


-- 
Peter Halliday
Online Application Developer
Whetstone Logic, Inc.       http://www.whetstonelogic.com
icq#75769411           AIM screen name: hoaggelos

From peter at wl.vg  Sun Jul 16 23:37:25 2000
From: peter at wl.vg (Peter Halliday)
Date: Fri Jan  9 21:45:58 2004
Subject: [mod_python] Problems with mod_python
Message-ID: <39727F75.7E2A95C6@wl.vg>

While waiting for someone to email me an RPM of mod_python 2.4.1, I
tried compiling it.  I got a copy of the apache source as well as the
above mod_python source.  Then I installed it using the DSO instructions
on the modpython webpage.  Everything seemed to go ok.  (One problem
however, I was unsure whether my python was compiled using thread
support because I use RedHat with the standard RPM that came with it. 
However, everything seemed ok when I compiled.  No error messages.  I
added these lines to my apache config file.

LoadModule python_module  module/mod_python.so
AddModule mod_python.c
AddHandler python-program .py
PythonHandler test
PythonDebug On
I changed the FileInfo directive to AllowOverride in the apache conf
file
and then in my mime.types file I added:
application/x-python py

 
In my DocumentRoot directory I created a directory called test.  I had a
script with the following contents.

from mod_python import apache

def handler(req):
        req.send_http_header()
        req.write("Hello World!")
        return apache.OK 

I still get the same error when I add a '#!/usr/bin/python' to the top
of the file.  The following is the error that I receive.  I am running
RedHat Linux 6.2, Apache 1.3.12, mod_python 2.4.1., python 1.5.  I have
kept everything standard as came on RedHat.  

Mod_python error: "PythonHandler test"

Traceback (innermost last):

  File "/usr/lib/python1.5/site-packages/mod_python/apache.py", line
116, in Dispatch
    object = self.resolve_object(module, object_str)

  File "/usr/lib/python1.5/site-packages/mod_python/apache.py", line 51,
in resolve_object
    raise AttributeError, s

AttributeError: module '/usr/lib/python1.5/test/__init__.pyc' contains
no 'handler'


-- 
Peter Halliday
Online Application Developer
Whetstone Logic, Inc.       http://www.whetstonelogic.com
icq#75769411           AIM screen name: hoaggelos

From grisha at ispol.com  Mon Jul 17 07:49:03 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:45:58 2004
Subject: [mod_python] Problems with mod_python
In-Reply-To: <39727F75.7E2A95C6@wl.vg>
Message-ID: <Pine.LNX.4.21.0007170748030.10692-100000@saturn.ispol.com>


On Sun, 16 Jul 2000, Peter Halliday wrote:

> AttributeError: module '/usr/lib/python1.5/test/__init__.pyc' contains
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
> no 'handler'

Your answer is in the message.

Grisha


From frneh at wmdata.com  Wed Jul 19 14:43:33 2000
From: frneh at wmdata.com (Nehr, Fredrik)
Date: Fri Jan  9 21:45:58 2004
Subject: [mod_python] Ho do make mod_python execute more then one script in a directory
 ?
Message-ID: <058FBD36E4D3D21193210008C72B64FD01296A51@WMSTO3SI1361>

With my current configuration only the generic handler of the script named
by the "PythonHandler" directive is executed even if I point my browser at
one of the other scripts in the same directory. How can i make mod_python
execute the "right" script?

I'm using mod_python 2.4.1 with Apache 1.3.12 and Python 1.5.2 on Windows
2000 Professional.

BTW: Why is argv missing from the sys module?


Regards,

Fredrik Nehr

From grisha at ispol.com  Wed Jul 19 11:29:31 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:45:58 2004
Subject: [mod_python] Ho do make mod_python execute more then one script
 in a directory ?
In-Reply-To: <058FBD36E4D3D21193210008C72B64FD01296A51@WMSTO3SI1361>
Message-ID: <Pine.LNX.4.21.0007191112250.18643-100000@saturn.ispol.com>

On Wed, 19 Jul 2000, Nehr, Fredrik wrote:

> With my current configuration only the generic handler of the script named
> by the "PythonHandler" directive is executed even if I point my browser at
> one of the other scripts in the same directory. How can i make mod_python
> execute the "right" script?

That's the way Apache modules work. Quoting from the tutorial:

       Some food for thought: If you were paying attention, you noticed
  that nowhere did it say that in order for all of the above to happen,
  the URL needs to refer to myscript.py. The only requirement was that it
  refers to a .py file. In fact the name of the file doesn't matter, and
  the file referred to in the URL doesn't have to exist. So, given the
  above configuration, http://myserver/mywebdir/myscript.py and
  http://myserver/mywebdir/montypython.py would give the exact same
  result.

       At this point, if you didn't understand the above paragraph, go
  back and read it again, until you do. 

> BTW: Why is argv missing from the sys module?

sys.argv is something that appears only during interactive invocation of
Python. sys.argv is created by PySys_SetArgv() C API function which is
called from main(). If python is not invoked from the command line,
main() is never executed, thus no sys.argv. This is actually one way to
tell whether you're running from the command line or embedded. 

The documentation for Py_Initialize() function mentions this, BTW.

Grisha


From mike at schwager.com  Mon Jul 24 03:20:44 2000
From: mike at schwager.com (Michael Schwager)
Date: Fri Jan  9 21:45:58 2004
Subject: [mod_python] Errors with Apache 1.3.12 and mod_python
Message-ID: <2336170196.964408844@celery.schwager.com>

Hi,
Yes- I am a newbie.  I just installed apache 1.3.12 with mod_python 2.4.1 
on my Solaris 2.6 box.  Everything went ok, except I am getting an error 
when I try to run the test.py as instructed in the install docs (see 
below).  Notice that, strangely, I get no errors- indeed the script works 
fine- if I run httpd with the -X option.  I note that I must be in the 
htdocs directory for that to work (thus, httpd sees the test subdir, which 
contains the test.py file).  So I'm not sure how the directories and 
filenames are related to PythonHandler, and how they are found by httpd 
and/or python.  But I think the problem is path-related.

Any useful help will be appreciated.  I do not have a .htaccess file; I put 
the appropriate lines in the httpd.conf file:
AddHandler python-program .py
PythonHandler test
PythonDebug On

Here is the error:
[Mon Jul 24 02:17:20 2000] [error] PythonHandler test: Traceback (most 
recent call last):
[Mon Jul 24 02:17:20 2000] [error] PythonHandler test:   File 
"/usr/local/lib/python1.6/site-packages/mod_python/apache.py", line 116, in 
Dispatch
    object = self.resolve_object(module, object_str)
[Mon Jul 24 02:17:20 2000] [error] PythonHandler test:   File 
"/usr/local/lib/python1.6/site-packages/mod_python/apache.py", line 51, in 
resolve_object
    raise AttributeError, s
[Mon Jul 24 02:17:20 2000] [error] PythonHandler test: AttributeError: 
module '/usr/local/lib/python1.6/test/__init__.pyc' contains no 'handler'
--
-Mike                                Mike@Schwager.com
        

From vanicek at brailcom.cz  Mon Jul 24 10:27:56 2000
From: vanicek at brailcom.cz (Roman Vanicek)
Date: Fri Jan  9 21:45:58 2004
Subject: [mod_python] multiple headers (cookies) are not sent
Message-ID: <4ak8ec0w6r.fsf@gnu.brailcom.cz>

Hi all,

I have a problem with mod_python: when I use cgihandler and I try to
send one cookie to the user, it works fine. But if I send several
cookies (which is legal according to cookie spec), just one of them (the
last one) is sent. When I do the same thing with regular python CGI
script, all the cookies are sent all right.

I have tried to track down the problem, I even played with my own python
handlers and it seems to me, that req.headers_out simply don't support
the notion of multiple headers. This is the dictionary and there can be
only one record per key (ie. one Set-Cookie header in this case) and the
value can be string only (it can't be the sequence of strings which
would maybe solve the problem).

What do you think about it?
Any help is appreciated, Roman Vanicek

From grisha at ispol.com  Mon Jul 24 08:48:52 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:45:58 2004
Subject: [mod_python] multiple headers (cookies) are not sent
In-Reply-To: <4ak8ec0w6r.fsf@gnu.brailcom.cz>
Message-ID: <Pine.LNX.4.21.0007240846430.15004-100000@saturn.ispol.com>

On 24 Jul 2000, Roman Vanicek wrote:

> I have tried to track down the problem, I even played with my own python
> handlers and it seems to me, that req.headers_out simply don't support
> the notion of multiple headers. 

That is correct. I'll have to think about how to get around this one....

Grisha


From db at cinetic.de  Mon Jul 24 15:27:55 2000
From: db at cinetic.de (Denys Bogatz)
Date: Fri Jan  9 21:45:58 2004
Subject: [mod_python] undefined symbol: stat
Message-ID: <003e01bff572$fb6c0320$876be2c3@cinetic.de>

Hello Folks,

I encountered a problem using mod_python as Apache-DSO.
Starting Apache results in an error: Can't load module ..../mod_python into
server: ..../mod_python: undefined symbol stat

That's all!
I'm sorry - I use Linux now for one week by know and I don't know what to
do...
(...using SuSE6.2, Python 1.5.2 and Apache 1.3)

Regards,

Denys!


From grisha at ispol.com  Mon Jul 24 09:56:01 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:45:58 2004
Subject: [mod_python] Errors with Apache 1.3.12 and mod_python
In-Reply-To: <2336170196.964408844@celery.schwager.com>
Message-ID: <Pine.LNX.4.21.0007240950470.15004-100000@saturn.ispol.com>

When you run httpd with the -X option from the directory where test.py
lives, it works because by default has the current directory in the python
path.

When you run httpd as a daemon, then your current directory is undefined
(most likely it is ServerRoot). 

To get around this, mod_python prepends the directory for which the
directive is specified to the pythopath. But because you put your
directives in httpd.conf outside of any <Directory> directives, mod_python
does not modify your python path in any way, because it doesn't know how
to. What you should do, if you're not using .htaccess, is:

<Directory /dir/where/test.py/is>
	AddHandler python-program .py
	PythonHandler test
	PythonDebug On
</Directory>

Then "/dir/where/test.py/is" will be added to the python path and it will
work fine.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Mon, 24 Jul 2000, Michael Schwager wrote:

> Hi,
> Yes- I am a newbie.  I just installed apache 1.3.12 with mod_python 2.4.1 
> on my Solaris 2.6 box.  Everything went ok, except I am getting an error 
> when I try to run the test.py as instructed in the install docs (see 
> below).  Notice that, strangely, I get no errors- indeed the script works 
> fine- if I run httpd with the -X option.  I note that I must be in the 
> htdocs directory for that to work (thus, httpd sees the test subdir, which 
> contains the test.py file).  So I'm not sure how the directories and 
> filenames are related to PythonHandler, and how they are found by httpd 
> and/or python.  But I think the problem is path-related.
> 
> Any useful help will be appreciated.  I do not have a .htaccess file; I put 
> the appropriate lines in the httpd.conf file:
> AddHandler python-program .py
> PythonHandler test
> PythonDebug On
> 
> Here is the error:
> [Mon Jul 24 02:17:20 2000] [error] PythonHandler test: Traceback (most 
> recent call last):
> [Mon Jul 24 02:17:20 2000] [error] PythonHandler test:   File 
> "/usr/local/lib/python1.6/site-packages/mod_python/apache.py", line 116, in 
> Dispatch
>     object = self.resolve_object(module, object_str)
> [Mon Jul 24 02:17:20 2000] [error] PythonHandler test:   File 
> "/usr/local/lib/python1.6/site-packages/mod_python/apache.py", line 51, in 
> resolve_object
>     raise AttributeError, s
> [Mon Jul 24 02:17:20 2000] [error] PythonHandler test: AttributeError: 
> module '/usr/local/lib/python1.6/test/__init__.pyc' contains no 'handler'
> --
> -Mike                                Mike@Schwager.com
>         
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From grisha at ispol.com  Mon Jul 24 12:09:09 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:45:58 2004
Subject: [mod_python] undefined symbol: stat
In-Reply-To: <003e01bff572$fb6c0320$876be2c3@cinetic.de>
Message-ID: <Pine.LNX.4.21.0007240956360.15004-100000@saturn.ispol.com>

You're missing a library of some kind when you're linking. I'm not sure
where stat lives, but you may want to check what libraries apache and
python are linked against.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Mon, 24 Jul 2000, Denys Bogatz wrote:

> Hello Folks,
> 
> I encountered a problem using mod_python as Apache-DSO.
> Starting Apache results in an error: Can't load module ..../mod_python into
> server: ..../mod_python: undefined symbol stat
> 
> That's all!
> I'm sorry - I use Linux now for one week by know and I don't know what to
> do...
> (...using SuSE6.2, Python 1.5.2 and Apache 1.3)
> 
> Regards,
> 
> Denys!
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From db at cinetic.de  Mon Jul 24 18:32:06 2000
From: db at cinetic.de (Denys Bogatz)
Date: Fri Jan  9 21:45:58 2004
Subject: AW: [mod_python] undefined symbol: stat
In-Reply-To: <Pine.LNX.4.21.0007240956360.15004-100000@saturn.ispol.com>
Message-ID: <004a01bff58c$b52f8480$876be2c3@cinetic.de>

Thanx!

I tried to find the lib with:
ar -x /usr/local/lib/.../libgcc.a stat.o
...but I haven't found it! :-(

As I wrote I'm kindly new on Linux, so I've got no idea where to search for
it...

Bye, Denys!
(I may try to solve the problem by building my own version of python (still
using the version supplied by SuSE6.2) - maybe that will work!?)


>You're missing a library of some kind when you're linking. I'm not sure
>where stat lives, but you may want to check what libraries apache and
>python are linked against.
>
>--
>  Gregory (Grisha) Trubetskoy
>       grisha@ispol.com
>


From grisha at ispol.com  Mon Jul 24 14:17:22 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:45:58 2004
Subject: AW: [mod_python] undefined symbol: stat
In-Reply-To: <004a01bff58c$b52f8480$876be2c3@cinetic.de>
Message-ID: <Pine.LNX.4.21.0007241415530.15752-100000@saturn.ispol.com>

Check this web page out: http://jarre.pair.com/insadmin/gerhard/

Perhaps Gerhard could update his Suse RPM's to 2.4.1?

Grisha


On Mon, 24 Jul 2000, Denys Bogatz wrote:

> Thanx!
> 
> I tried to find the lib with:
> ar -x /usr/local/lib/.../libgcc.a stat.o
> ...but I haven't found it! :-(
> 
> As I wrote I'm kindly new on Linux, so I've got no idea where to search for
> it...
> 
> Bye, Denys!
> (I may try to solve the problem by building my own version of python (still
> using the version supplied by SuSE6.2) - maybe that will work!?)
> 
> 
> >You're missing a library of some kind when you're linking. I'm not sure
> >where stat lives, but you may want to check what libraries apache and
> >python are linked against.
> >
> >--
> >  Gregory (Grisha) Trubetskoy
> >       grisha@ispol.com
> >
> 



From bjrubble at dagobah.com  Mon Jul 24 13:57:35 2000
From: bjrubble at dagobah.com (Adam Clark)
Date: Fri Jan  9 21:45:58 2004
Subject: [mod_python] Basic mod_python questions
In-Reply-To: <Pine.LNX.4.21.0007241415530.15752-100000@saturn.ispol.com>
Message-ID: <Pine.BSF.4.21.0007241346550.27728-100000@shell16.ba.best.com>

Hi,

I have what I'm sure are some basic questions.  I'm trying to transfer
stuff from a CGI environment, and I'm not sure how you're supposed to
handle all the inputs.  I'm currently using the cgi module to manually
parse the query string, but do I have to write all the get/post switching
stuff myself?  What about file uploads?  Cookies?  I'd rather write this
right than become dependent on the CGI Handler, but I'm not sure how these
things are supposed to be done.

Thanks a lot
Adam



From grisha at ispol.com  Mon Jul 24 17:24:35 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:45:58 2004
Subject: [mod_python] Basic mod_python questions
In-Reply-To: <Pine.BSF.4.21.0007241346550.27728-100000@shell16.ba.best.com>
Message-ID: <Pine.LNX.4.21.0007241723001.16397-100000@saturn.ispol.com>

req.read(), req.headers_out and req.headers_in are your friends here. You
will still need a lot of functionality from the cgi.py standard Python
library module to parse multipart content from POST operations.

Grisha

On Mon, 24 Jul 2000, Adam Clark wrote:

> Hi,
> 
> I have what I'm sure are some basic questions.  I'm trying to transfer
> stuff from a CGI environment, and I'm not sure how you're supposed to
> handle all the inputs.  I'm currently using the cgi module to manually
> parse the query string, but do I have to write all the get/post switching
> stuff myself?  What about file uploads?  Cookies?  I'd rather write this
> right than become dependent on the CGI Handler, but I'm not sure how these
> things are supposed to be done.
> 
> Thanks a lot
> Adam
> 
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From db at cinetic.de  Tue Jul 25 10:04:36 2000
From: db at cinetic.de (Denys Bogatz)
Date: Fri Jan  9 21:45:59 2004
Subject: AW: AW: [mod_python] undefined symbol: stat solved!
In-Reply-To: <Pine.LNX.4.21.0007241415530.15752-100000@saturn.ispol.com>
Message-ID: <005501bff60e$f9ee9200$876be2c3@cinetic.de>

I solved the problem by linking /usr/lib/modules/2.2.10/libc.a within
mod_python...
(I found "stat.o" inside this library, extracted that and got some other
undefined symbols - so I decided to link the whole libc.a)
But now my mod_python.so is somewhat over 300k in size - is this too much?

Another problem: My IExplorer downloads test.py for some reasons...
(I got it working for some time but now the script won't be executed!)

>
> Check this web page out: http://jarre.pair.com/insadmin/gerhard/
>
> Perhaps Gerhard could update his Suse RPM's to 2.4.1?
>
> Grisha
>
>
> On Mon, 24 Jul 2000, Denys Bogatz wrote:
>
> > Thanx!
> >
> > I tried to find the lib with:
> > ar -x /usr/local/lib/.../libgcc.a stat.o
> > ...but I haven't found it! :-(
> >
> > As I wrote I'm kindly new on Linux, so I've got no idea
> where to search for
> > it...
> >
> > Bye, Denys!
> > (I may try to solve the problem by building my own version
> of python (still
> > using the version supplied by SuSE6.2) - maybe that will work!?)


From grisha at ispol.com  Tue Jul 25 08:48:03 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:45:59 2004
Subject: AW: AW: [mod_python] undefined symbol: stat solved!
In-Reply-To: <005501bff60e$f9ee9200$876be2c3@cinetic.de>
Message-ID: <Pine.LNX.4.21.0007250844250.19360-100000@saturn.ispol.com>

On Tue, 25 Jul 2000, Denys Bogatz wrote:

> 
> I solved the problem by linking /usr/lib/modules/2.2.10/libc.a within
> mod_python...
>
> (I found "stat.o" inside this library, extracted that and got some
> other undefined symbols - so I decided to link the whole libc.a) But
> now my mod_python.so is somewhat over 300k in size - is this too much?

to make it smaller, you can try something like:

ar x /usr/lib/modules/2.2.10/libc.a stat.o

then add stat.o as an argument to your apxs command.

> Another problem: My IExplorer downloads test.py for some reasons...
> (I got it working for some time but now the script won't be executed!)

This has nothing to do with explorer. You're missing your set-handler
directive, perhaps AllowOverride isn't FileInfo for that directory.

Grisha


From iny at iki.fi  Tue Jul 25 17:58:41 2000
From: iny at iki.fi (Ilpo =?iso-8859-1?q?Nyyss=F6nen?=)
Date: Fri Jan  9 21:45:59 2004
Subject: AW: AW: [mod_python] undefined symbol: stat solved!
In-Reply-To: Gregory Trubetskoy's message of "Tue, 25 Jul 2000 08:48:03 -0400 (EDT)"
References: <Pine.LNX.4.21.0007250844250.19360-100000@saturn.ispol.com>
Message-ID: <m3hf9e45pa.fsf@ypy.tky.hut.fi>

Gregory Trubetskoy <grisha@ispol.com> writes:

> On Tue, 25 Jul 2000, Denys Bogatz wrote:
> 
> > I solved the problem by linking /usr/lib/modules/2.2.10/libc.a within
> > mod_python...
> >
> > (I found "stat.o" inside this library, extracted that and got some
> > other undefined symbols - so I decided to link the whole libc.a) But
> > now my mod_python.so is somewhat over 300k in size - is this too much?
> 
> to make it smaller, you can try something like:
> 
> ar x /usr/lib/modules/2.2.10/libc.a stat.o
> 
> then add stat.o as an argument to your apxs command.

Or even add -lc to the apxs command. That is what I did, but I still
have that problem with urllib I wrote about.

-- 
Ilpo Nyyss?nen # biny
/* :-) */

From Daniel.Plagge at tu-clausthal.de  Fri Jul 28 14:26:27 2000
From: Daniel.Plagge at tu-clausthal.de (Daniel Plagge)
Date: Fri Jan  9 21:45:59 2004
Subject: [mod_python] compile errors on solaris
Message-ID: <20000728142627.A742@wintermute.esw-heim.tu-clausthal.de>

Hello,

on Solaris the Sun-C-compiler complaints about some syntax errors,
mainly because C++ syntax is used. I append a trivial patch which
should solve the problem, so later versions of mod_python could
compile out of the box. :)

Bye,
Daniel





*** mod_python.c.orig	Fri Jul 28 12:32:52 2000
--- mod_python.c	Fri Jul 28 12:52:50 2000
***************
*** 600,606 ****
  static int tablelength(tableobject *self) 
  { 
      return ap_table_elts(self->table)->nelts;
! };
  
  /**
   ** tablesetitem
--- 600,606 ----
  static int tablelength(tableobject *self) 
  { 
      return ap_table_elts(self->table)->nelts;
! }
  
  /**
   ** tablesetitem
***************
*** 638,644 ****
  	ap_table_set(self->table, k, PyString_AsString(val));
      }
      return 0;
! };
  
  /**
   ** tb_setitem
--- 638,644 ----
  	ap_table_set(self->table, k, PyString_AsString(val));
      }
      return 0;
! }
  
  /**
   ** tb_setitem
***************
*** 2253,2260 ****
  	    char *module = elts[i].key;
  	    char *dir = elts[i].val;
  
! 	    // XXXXXX PythonInterpreter!!!
! 	    // This needs to be addressed in config_merge?
  	    interpreter = dir;
  
  #ifdef WITH_THREAD  
--- 2253,2260 ----
  	    char *module = elts[i].key;
  	    char *dir = elts[i].val;
  
! 	    /* XXXXXX PythonInterpreter!!! */
! 	    /* This needs to be addressed in config_merge? */
  	    interpreter = dir;
  
  #ifdef WITH_THREAD  
***************
*** 2355,2361 ****
      return python_handler(req, "PythonLogHandler");
  }
  static void PythonChildExitHandler(server_rec *srv, pool *p) {
!     // printf("In ExitHandler\n");
  }
  
  
--- 2355,2361 ----
      return python_handler(req, "PythonLogHandler");
  }
  static void PythonChildExitHandler(server_rec *srv, pool *p) {
!   /* printf("In ExitHandler\n"); */
  }
  
  

From richard at whitequeen.com  Sun Jul  2 11:39:38 2000
From: richard at whitequeen.com (richard offer)
Date: Fri Jan  9 21:52:01 2004
Subject: [mod_python] *Occasional* AttributeError: Handler
Message-ID: <200007021839.e62Idc503947@erij.whitequeen.com>

Hi, its me again :-)

I've started getting the occasional 

[Sun Jul  2 11:13:46 2000] [error] PythonHandler index: Traceback (innermost last):
[Sun Jul  2 11:13:46 2000] [error] PythonHandler index:   File "/usr/local/lib/python1.5/site-packages/mod_python/apache.py", line 96, in Dispatch
    object = self.resolve_object(module, object_str)
[Sun Jul  2 11:13:46 2000] [error] PythonHandler index:   File "/usr/local/lib/python1.5/site-packages/mod_python/apache.py", line 42, in resolve_object
    obj = getattr(obj, obj_str)
[Sun Jul  2 11:13:46 2000] [error] PythonHandler index: AttributeError: handler


By occasional I mean I've got a page that loads lots of images from a
MySQL DB. Each image is a separate request. Most appear, but ~15%
don't. Hitting reload sometimes works, sometimes its a different set of
images that don't load.

This was working on the development server, moving across to the
production server I had to change the database access mechanism (from a
unix domain socket to a full inet socket (chroot) , and the production's
version of python is not threaded).


If anyone wants to check the failure mode of the site out its
alfieireland.com/scrapbook/.  I'll make the code available if anyone
can be bothered enough to ask for it. (this is a family site---neither
the site or the connection is designed for the /. effect, please don't
hurt it :-)

richard.

-- 
richard offer @ home 
          84 FE 48 E4 74 D0 26 D4  31 8E B6 86 98 74 E2 7C  8A FB BF A3
___________________________________http://216.185.15.144/users/richard/

From grisha at ispol.com  Sun Jul  2 19:43:37 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:01 2004
Subject: [mod_python] *Occasional* AttributeError: Handler
In-Reply-To: <200007021839.e62Idc503947@erij.whitequeen.com>
Message-ID: <Pine.LNX.4.21.0007021938400.30520-100000@saturn.ispol.com>

Interestingly enough, when I try it, I get all the pictures loaded fine. I
wonder if this has something to do with the speed of the link - mine is
64K ISDN.

I have a theory - 

I think that sometimes the "AttributeError: handler" message can be
misleading, when there was an error importing the module. Your module
seems to try to open a connection in-line:

db = MySQLdb.connect(host=host, user=user, passwd=passwd, db="scrapbook")

This can fail sometimes, and I think after that you get the misleading
error. Make sure that the MaxClients setting for Apache does not exceed
the maximum number of allowed connections for your MySQL server.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Sun, 2 Jul 2000, richard offer wrote:

> Hi, its me again :-)
> 
> I've started getting the occasional 
> 
> [Sun Jul  2 11:13:46 2000] [error] PythonHandler index: Traceback (innermost last):
> [Sun Jul  2 11:13:46 2000] [error] PythonHandler index:   File "/usr/local/lib/python1.5/site-packages/mod_python/apache.py", line 96, in Dispatch
>     object = self.resolve_object(module, object_str)
> [Sun Jul  2 11:13:46 2000] [error] PythonHandler index:   File "/usr/local/lib/python1.5/site-packages/mod_python/apache.py", line 42, in resolve_object
>     obj = getattr(obj, obj_str)
> [Sun Jul  2 11:13:46 2000] [error] PythonHandler index: AttributeError: handler
> 
> 
> By occasional I mean I've got a page that loads lots of images from a
> MySQL DB. Each image is a separate request. Most appear, but ~15%
> don't. Hitting reload sometimes works, sometimes its a different set of
> images that don't load.
> 
> This was working on the development server, moving across to the
> production server I had to change the database access mechanism (from a
> unix domain socket to a full inet socket (chroot) , and the production's
> version of python is not threaded).
> 
> 
> If anyone wants to check the failure mode of the site out its
> alfieireland.com/scrapbook/.  I'll make the code available if anyone
> can be bothered enough to ask for it. (this is a family site---neither
> the site or the connection is designed for the /. effect, please don't
> hurt it :-)
> 
> richard.
> 
> -- 
> richard offer @ home 
>           84 FE 48 E4 74 D0 26 D4  31 8E B6 86 98 74 E2 7C  8A FB BF A3
> ___________________________________http://216.185.15.144/users/richard/
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 



From iny at iki.fi  Tue Jul  4 16:58:02 2000
From: iny at iki.fi (Ilpo =?iso-8859-1?q?Nyyss=F6nen?=)
Date: Fri Jan  9 21:52:01 2004
Subject: [mod_python] httplib: [notice] child pid 8937 exit signal Segmentation fault (11)
Message-ID: <m3k8f2q9p1.fsf@iki.fi>

I tried to use urllib to retrieve some pictures dynamically, but the
child dies with segmentation fault. This happens also with httplib,
for example with the code below. The dying seems to happen when
closing the connection.

-- clip --
from mod_python import apache
import httplib

def handler(req):
    req.content_type = 'text/plain'
    req.send_http_header()
    
    h = httplib.HTTP('www.python.org')
    h.putrequest('GET', '/index.html')
    h.putheader('Accept', 'text/html')
    h.putheader('Accept', 'text/plain')
    h.endheaders()
    errcode, errmsg, headers = h.getreply()
    if errcode == 200:
        f = h.getfile()
        req.write(f.read())

    return apache.OK
-- clip --

-- 
Ilpo Nyyss?nen # biny
/* :-) */

From grisha at ispol.com  Tue Jul  4 12:11:22 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:01 2004
Subject: [mod_python] httplib: [notice] child pid 8937 exit signal
 Segmentation fault (11)
In-Reply-To: <m3k8f2q9p1.fsf@iki.fi>
Message-ID: <Pine.LNX.4.21.0007041158540.5022-100000@saturn.ispol.com>

Ilpo -

The code below worked for me without a hinch. This is on FreeBSD 4.0
Stable, Apache 1.3.12.

Anyone else on this list experiences this problem?

Grisha

On 4 Jul 2000, Ilpo Nyyss?nen wrote:

> 
> I tried to use urllib to retrieve some pictures dynamically, but the
> child dies with segmentation fault. This happens also with httplib,
> for example with the code below. The dying seems to happen when
> closing the connection.
> 
> -- clip --
> from mod_python import apache
> import httplib
> 
> def handler(req):
>     req.content_type = 'text/plain'
>     req.send_http_header()
>     
>     h = httplib.HTTP('www.python.org')
>     h.putrequest('GET', '/index.html')
>     h.putheader('Accept', 'text/html')
>     h.putheader('Accept', 'text/plain')
>     h.endheaders()
>     errcode, errmsg, headers = h.getreply()
>     if errcode == 200:
>         f = h.getfile()
>         req.write(f.read())
> 
>     return apache.OK
> -- clip --
> 
> -- 
> Ilpo Nyyss?nen # biny
> /* :-) */
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From grisha at ispol.com  Tue Jul  4 14:10:24 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:01 2004
Subject: [mod_python] US Independence Day release - 2.4.1
Message-ID: <Pine.LNX.4.21.0007041400470.5320-100000@saturn.ispol.com>

2.4.1, which is basically a couple of bugs fixed is available for
download.

For win32 users, the 2.4 DLL currently available for download should be
identical to 2.4.1, but you may want to update your apache.py file.

BTW, if there are any Win32 mod_python users out there - could you drop me
an e-mail? I'm just curious as to the actual number.

Happy 4th of July (to those who care about it)!

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com


From iny at iki.fi  Tue Jul  4 21:21:57 2000
From: iny at iki.fi (=?ISO-8859-1?Q?Ilpo_Nyyss=F6nen?=)
Date: Fri Jan  9 21:52:02 2004
Subject: [mod_python] httplib: [notice] child pid 8937 exit signal
 Segmentation fault (11)
In-Reply-To: <Pine.LNX.4.21.0007041158540.5022-100000@saturn.ispol.com>
Message-ID: <Pine.LNX.4.21.0007042112130.10834-200000@ypy.tky.hut.fi>

On Tue, 4 Jul 2000, Gregory Trubetskoy wrote:

> 
> Ilpo -
> 
> The code below worked for me without a hinch. This is on FreeBSD 4.0
> Stable, Apache 1.3.12.
> 
> Anyone else on this list experiences this problem?
> 
> Grisha
> 
> On 4 Jul 2000, Ilpo Nyyss?nen wrote:
> 
> > 
> > I tried to use urllib to retrieve some pictures dynamically, but the
> > child dies with segmentation fault. This happens also with httplib,
> > for example with the code below. The dying seems to happen when
> > closing the connection.

I forgot to mention that I have Apache 1.3.12 (this was just upgraded) in
Linux 2.2.13 (Red Hat).

I also attached a strace that I took few weeks ago.

-- 
Ilpo Nyyss?nen # biny
/* :-) */

-------------- next part --------------
socket(PF_INET, SOCK_DGRAM, IPPROTO_IP) = 6
connect(6, {sin_family=AF_INET, sin_port=htons(53), sin_addr=inet_addr("130.233.224.1")}, 16) = 0
send(6, "Z\355\1\0\0\1\0\0\0\0\0\0\3www\3"..., 28, 0) = 28
SYS_168(0xbfffd9b8, 0x1, 0x1388, 0x1388, 0xbfffd9b8) = 1
recvfrom(6, "Z\355\205\200\0\1\0\1\0\3\0\3\3w"..., 1024, 0, {sin_family=AF_INET, sin_port=htons(53), sin_addr=inet_addr("130.233.224.1")}, [16]) = 167
close(6)                                = 0
connect(5, {sin_family=AF_INET, sin_port=htons(80), sin_addr=inet_addr("130.233.220.31")}, 16) = 0
send(5, "GET / HTTP/1.0\r\n", 16, 0)    = 16
send(5, "Host: www.hut.fi\r\n", 18, 0)  = 18
send(5, "User-agent: Python-urllib/1.10\r"..., 32, 0) = 32
send(5, "\r\n", 2, 0)                   = 2
dup(5)                                  = 6
fcntl(6, F_GETFL)                       = 0x2 (flags O_RDWR)
fstat(6, {st_mode=033526, st_size=0, ...}) = 0
mmap(0, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x40615000
_llseek(0x6, 0, 0, 0xbffff1e4, 0x1)     = -1 ESPIPE (Illegal seek)
read(6, "HTTP/1.1 200 OK\r\nDate: Mon, 19"..., 1024) = 1024
close(5)                                = 0
connect(-1073745952, {...}, 1075363008) = 23
getpid()                                = 28286
open("/usr/tmp/@28286.test", O_WRONLY|O_CREAT|O_TRUNC, 0666) = 5
fstat(5, {st_mode=S_IFDIR|S_ISUID|0606, st_size=0, ...}) = 0
mmap(0, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x40618000
write(5, "blat", 4)                     = 4
close(5)                                = 0
munmap(0x40618000, 4096)                = 0
unlink("/usr/tmp/@28286.test")          = 0
getpid()                                = 28286
stat("/usr/tmp/@28286.1", 0xbffff318)   = -1 ENOENT (No such file or directory)
open("/usr/tmp/@28286.1", O_WRONLY|O_CREAT|O_TRUNC, 0666) = 5
brk(0x81a5000)                          = 0x81a5000
read(6, " href=\"http://www.hut.fi/Ajanko"..., 1024) = 875
read(6, "", 1024)                       = 0
fstat(5, {st_mode=S_IFDIR|S_ISUID|0606, st_size=0, ...}) = 0
mmap(0, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x40618000
read(6, "", 1024)                       = 0
close(6)                                = 0
munmap(0x40615000, 4096)                = 0
--- SIGSEGV (Segmentation fault) ---
chdir("/tmp")                           = 0
SYS_174(0xb, 0xbffff0bc, 0xbffff030, 0x8, 0xb) = 0
getpid()                                = 28286
kill(28286, SIGSEGV)                    = 0
sigreturn()                             = ? (mask now [])
--- SIGSEGV (Segmentation fault) ---
From morten at src.no  Sat Jul  8 14:43:59 2000
From: morten at src.no (Morten W. Petersen)
Date: Fri Jan  9 21:52:02 2004
Subject: [mod_python] Compiling on a Debian Potato with Apache binary (and apache-dev)
Message-ID: <Pine.LNX.4.21.0007081440220.31744-100000@lade.src.no>

I'm having problems compiling mod_python on a Debian 2.1; can anyone send
me a line that worked from them, compiling off of an Apache binary release
with apache-dev installed?

-Morten

-------------------------------------------------------------
How to reply to email:
  http://home.sol.no/~vidaandr/news/OBSquoting.html (norsk)
  http://home.sol.no/~vidaandr/news/FAQquoting.html (english)

Who is the bigger fool? The fool or the fool who follows him?


From richard at whitequeen.com  Thu Jul  6 21:13:04 2000
From: richard at whitequeen.com (richard offer)
Date: Fri Jan  9 21:52:02 2004
Subject: [mod_python] [ANN] slashbox - class to get/display slashdot.org news stories
Message-ID: <200007070413.e674D4510370@erij.whitequeen.com>

Hi,

Here's a quick hack of a class to get and format news stories from a
number of sites.

It was designed with mod_python in mind, so all you need to do is

import slashbox
...

def handler(req):
	...
    req.write(str(slashbox.Slashdot()))

To add the latest stories from slashdot to your page.

A number of other sites are included, its easy to add new ones simply
by sub-classing slashbox. The trick is to find the sites .rss/.rdf file.


You'll need the latest PyXML code.



richard.




# $Id: slashbox.py,v 1.2 2000/07/08 21:34:46 richard Exp $
# Copyright (c) 2000 Richard Offer <richard@whitequeen.com>. 
# All rights reserved.
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
# 
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
# 
# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL 
# Richard Offer BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN
# AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
# CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
# 
# Except as contained in this notice, the name of Richard Offer shall not be
# used in advertising or otherwise to promote the sale, use or other dealings
# in this Software without prior written authorization from Richard Offer.



#
#
# A python class to grab the Slashdot (and other sites using RSS/RDF) stories.


import stat
import xmllib
import urllib
import urlparse
import os
import time
import string
import sys
from xml.sax import saxlib,saxexts

class _myrdf(saxlib.HandlerBase):
	def __init__(self):
		self._in={}
		self._in["title"]=0
		self._in["link"]=0
		self._in["description"]=0
		self._txt={}
		self._txt["title"]=""
		self._txt["link"]=""
		self._txt["description"]=""

		self._stories=[]


	def startElement(self,ele,attr):
		if ele == 'item' :
			self._txt={}
			self._txt["title"]=""
			self._txt["link"]=""
			self._txt["description"]=""
		elif self._in.has_key(ele) :
			self._in[ele]=1
			
		else:
			pass

	def endElement(self,ele):
		if self._in.has_key(ele) :
			self._in[ele] = 0
			self._txt[ele] = string.join(string.split((self._txt[ele])))
		elif ele == 'item'  :
			self._stories.append(self._txt)

			
	
	def characters(self,ch,start,length):
		for i in self._in.keys():
				if self._in[i] == 1:
					self._txt[i] = self._txt[i] + ch[start:start+length]

	def stories(self):
		return self._stories

# class Site()

class slashbox:
	"""
Create a single slashbox.
  slashbox(url,freq)
		url is the url of the RSS/RDF file, freq is the update period (mins).
		The freq cannot be less than 30
  raw() 
		returns a list of stories (each story is stored in a dict).
  __str__() 
		returns a HTML table containing the stories.

Several subclasses are available, these already have the url defined,
so to get the headlines from slashdot.org simply do


>>> print Slashdot()

The list of built-in sites is 

	Slashdot()
	Freshmeat()
	SecurityFocus()
	Parnassus()
	LWN()
	Fool()
	LinuxNetNews()
	SourceForgeReleases()
	SourceForgeNews()


If you are using mod_python, you can embed a slashbox simply by

import slashbox
...

	req.write(str(slashbox.Slashdot()))


"""
	def __init__(self, url='http://slashdot.org/slashdot.rdf', freq=60):
		self._url=url
		if freq < 30:
			freq=30
		self._freq=freq
		_u=urlparse.urlparse(self._url)
		self._file=_u[1] + "-" + os.path.basename(url)
		if self._file == '':
			self._file = os.path.basename(url)

		self._file = "/tmp/slashbox-" + self._file

		self.site= _u[0]+ "://" + _u[1] + "/"
		self.name= _u[1]
		
		try:
			st=os.stat(self._file)
			if st[8] < ( time.time() - (self._freq*60) ):
				(fname,headers)=urllib.urlretrieve(self._url, self._file)	
		except OSError:
			(fname,headers)=urllib.urlretrieve(self._url,self._file)	

		fp=open(self._file)

		xmlp=saxexts.make_parser()

		self.dh=_myrdf()
		xmlp.setDocumentHandler(self.dh)
		xmlp.parseFile(fp)

	def stories(self):
		return self.dh.stories()
		

	def __str__(self):
		str="<SMALL>\n<TABLE BORDER=2 WIDTH=200>\n"
		str=str + '<TH><A HREF="%s">%s</A></TH>\n' % ( self.site,
				self.name )
		str=str + "<TR><TD>\n  <TABLE><TBODY>\n" 

		for i in self.dh.stories():
			str=str + '    <TR><TD><A HREF="%s">%s</A>' % ( i['link'],i['title'] )
			if i.has_key("description"):
				str=str + "<BR><SMALL>%s</SMALL>" % ( i['description'])
			str=str + '</TD></TR>\n' 
		str=str+"  </TBODY></TABLE></TD></TR>\n</TABLE></SMALL>\n\n"
		return str
		
	def setName(self,name):
		self.name=name



class Slashdot(slashbox):
	"""slashbox sub-class for Slashdot.org"""
	def __init__(self):
		_url='http://slashdot.org/slashdot.rdf'
		slashbox.__init__(self,url=_url)
		self.setName('Slashdot')

class Freshmeat(slashbox):
	"""slashbox sub-class for Freshmeat.net"""
	def __init__(self):
		_url='http://freshmeat.net/backend/fm.rdf'
		slashbox.__init__(self,url=_url)
		self.setName('Freshmeat')

class SecurityFocus(slashbox):
	"""slashbox sub-class for SecurityFocus.com"""
	def __init__(self):
		_url='http://www.securityfocus.com/topnews-rss.html'
		slashbox.__init__(self,url=_url)
		self.setName('Security Focus')

class Parnassus(slashbox):
	"""slashbox sub-class for the Vaults of Parnassus"""
	def __init__(self):
		_url='http://www.vex.net/parnassus/parnassus.rss'
		slashbox.__init__(self,url=_url)
		self.setName('Vaults of Parnassus')

class LWN(slashbox):
	"""slashbox sub-class for the Linux Weekly News"""
	def __init__(self):
		_url='http://lwn.net/headlines/rss'
		slashbox.__init__(self,url=_url)
		self.setName('Linux Weekly News')


class Fool(slashbox):
	"""slashbox sub-class for the Motley Fool"""
	def __init__(self):
		_url='http://www.fool.com/About/headlines/rss_headlines.asp'
		slashbox.__init__(self,url=_url)
		self.setName('The Motley Fool')

class LinuxNetNews(slashbox):
	"""slashbox sub-class for Linux Net News"""
	def __init__(self):
		_url='http://www.netnews.opensrc.org/index.rdf'
		slashbox.__init__(self,url=_url)
		self.setName('Linux Net News')

class SourceForgeReleases(slashbox):
	"""slashbox sub-class for new releases on SourceForge"""
	def __init__(self):
		_url='http://sourceforge.net/export/rss_sfnewreleases.php'
		slashbox.__init__(self,url=_url)
		self.setName('Sourceforge New Releases')

class SourceForgeNews(slashbox):
	"""slashbox sub-class for Project News at SourceForge"""
	def __init__(self):
		_url='http://sourceforge.net/export/rss_sfnews.php'
		slashbox.__init__(self,url=_url)
		self.setName('Sourceforge News')



if __name__ == "__main__":

	print Slashdot()	

-- 
richard offer @ home 
          84 FE 48 E4 74 D0 26 D4  31 8E B6 86 98 74 E2 7C  8A FB BF A3
___________________________________http://216.185.15.144/users/richard/

From martin at src.no  Sun Jul  9 02:40:41 2000
From: martin at src.no (Martin Jenssen)
Date: Fri Jan  9 21:52:02 2004
Subject: [mod_python] Compiling on a Debian Potato with Apache binary
 (and apache-dev)
In-Reply-To: <Pine.LNX.4.21.0007081440220.31744-100000@lade.src.no>
Message-ID: <Pine.LNX.4.21.0007090231050.9988-100000@lade.src.no>

On Sat, 8 Jul 2000, Morten W. Petersen wrote:

> I'm having problems compiling mod_python on a Debian 2.1; can anyone send
> me a line that worked from them, compiling off of an Apache binary release
> with apache-dev installed?

I am running Debian GNU/Linux 2.2 (potato), and have the following
packages installed:

	apache 1.3.12-1
	apache-common 1.3.12-1
	apache-dev 1.3.12-1

To compile this, I just did it via the method mentioned in the
documentation (as a Apache DSO):

	apxs -I /usr/include/python1.5 -c mod_python.c \
	/usr/lib/python1.5/config/libpython1.5.a -lpthread

Then I copied the mod_python.so file to /usr/lib/apache/1.3/ and added the
following line *before* any other `LoadModule'-line in
/etc/apache/httpd.conf:

	LoadModule python_module /usr/lib/apache/1.3/mod_python.so

The rest is in the documentation.  By the way, I used the official 2.4.1
release.


Martin Jenssen



From erno at iki.fi  Sun Jul  9 03:49:08 2000
From: erno at iki.fi (Erno Kuusela)
Date: Fri Jan  9 21:52:02 2004
Subject: [mod_python] Compiling on a Debian Potato with Apache binary (and apache-dev)
In-Reply-To: <Pine.LNX.4.21.0007090231050.9988-100000@lade.src.no>; from martin@src.no on Sun, Jul 09, 2000 at 02:40:41AM +0200
References: <Pine.LNX.4.21.0007081440220.31744-100000@lade.src.no> <Pine.LNX.4.21.0007090231050.9988-100000@lade.src.no>
Message-ID: <20000709034908.F8149@lib.hel.fi>

| I am running Debian GNU/Linux 2.2 (potato) [...]

| To compile this, I just did it via the method mentioned in the
| documentation (as a Apache DSO):
| 
| 	apxs -I /usr/include/python1.5 -c mod_python.c \
| 	/usr/lib/python1.5/config/libpython1.5.a -lpthread

the debian-packaged python also comes with a shared library,
so linking with -lpython1.5 instead will save you some
disk space and pehaps ram.

  -- erno

From morten at src.no  Sun Jul  9 11:54:56 2000
From: morten at src.no (Morten W. Petersen)
Date: Fri Jan  9 21:52:02 2004
Subject: [mod_python] Compiling on a Debian Potato with Apache binary
 (and apache-dev)
In-Reply-To: <Pine.LNX.4.21.0007090231050.9988-100000@lade.src.no>
Message-ID: <Pine.LNX.4.21.0007091153470.27686-100000@lade.src.no>

> To compile this, I just did it via the method mentioned in the
> documentation (as a Apache DSO):
> 
> 	apxs -I /usr/include/python1.5 -c mod_python.c \
> 	/usr/lib/python1.5/config/libpython1.5.a -lpthread

gaffel:/tmp/mod_python-2.4.1/src# gcc -DLINUX=2 -DUSE_HSREGEX -fpic \
	-DSHARED_MODULE -I/usr/include/apache-1.3 \
	-I/usr/include/python1.5 -c mod_python.c
mod_python.c:418: structure has no member named `vlist_validator'
mod_python.c:418: initializer element for `request_memberlist[29].offset'
is not constant

----
And now I'm a bit off. (...) Any ideas?

Regards, Morten


From michael at stroeder.com  Sun Jul  9 13:20:20 2000
From: michael at stroeder.com (Michael =?iso-8859-1?Q?Str=C3=B6der?=)
Date: Fri Jan  9 21:52:02 2004
Subject: [mod_python] mod_python, HTTP headers and CRLF
Message-ID: <39685FF4.246ED56F@stroeder.com>

HI!

I experienced some problems with sending HTTP headers. I'm
generating HTTP header lines separated with \r\n since HTTP standard
1.0 says in section 4.2 "Message Headers":

----------------------------- snip ------------------------------
       HTTP-header    = field-name ":" [ field-value ] CRLF
----------------------------- snip ------------------------------

In apache.py class CGIStdout method write() the headers are splitted
by using \n\n as separator which fails if scripts are sending header
conform to HTTP specs above. Here's a patch by using \r\n\r\n as
second possible
separator:

----------------------------- snip ------------------------------
395a396,400
> 
>             if len(ss) < 2:
>               # Second try with splitting by using \r\n\r\n as separator
>               ss = string.split(self.headers, '\r\n\r\n', 1)
> 
----------------------------- snip ------------------------------

Would be nice if this patch makes its way into the mod_python
distribution.

Ciao, Michael.

From martin at src.no  Sun Jul  9 15:27:12 2000
From: martin at src.no (Martin Jenssen)
Date: Fri Jan  9 21:52:02 2004
Subject: [mod_python] Compiling on a Debian Potato with Apache binary (and apache-dev)
In-Reply-To: <Pine.LNX.4.21.0007091153470.27686-100000@lade.src.no>; from morten@src.no on Sun, Jul 09, 2000 at 11:54:56AM +0200
References: <Pine.LNX.4.21.0007090231050.9988-100000@lade.src.no> <Pine.LNX.4.21.0007091153470.27686-100000@lade.src.no>
Message-ID: <20000709152712.A1317@localhost>

On Sun, Jul 09, 2000 at 11:54:56AM +0200, Morten W. Petersen wrote:

| gaffel:/tmp/mod_python-2.4.1/src# gcc -DLINUX=2 -DUSE_HSREGEX -fpic \
| 	-DSHARED_MODULE -I/usr/include/apache-1.3 \
| 	-I/usr/include/python1.5 -c mod_python.c
| mod_python.c:418: structure has no member named `vlist_validator'
| mod_python.c:418: initializer element for `request_memberlist[29].offset'
| is not constant

It seems that you are using an older collection of the apache C header
files.  Check if your /usr/include/apache-1.3/httpd.h have a line
defining vlist_validator.


Martin Jenssen


From grisha at ispol.com  Mon Jul 10 08:13:21 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:02 2004
Subject: [mod_python] mod_python, HTTP headers and CRLF
In-Reply-To: <39685FF4.246ED56F@stroeder.com>
Message-ID: <Pine.LNX.4.21.0007100812370.5519-100000@saturn.ispol.com>

This is clearly a bug and I'll make sure it's fixed. Thanks for pointing
it out.

Grisha

On Sun, 9 Jul 2000, Michael Str??der wrote:

> HI!
> 
> I experienced some problems with sending HTTP headers. I'm
> generating HTTP header lines separated with \r\n since HTTP standard
> 1.0 says in section 4.2 "Message Headers":
> 
> ----------------------------- snip ------------------------------
>        HTTP-header    = field-name ":" [ field-value ] CRLF
> ----------------------------- snip ------------------------------
> 
> In apache.py class CGIStdout method write() the headers are splitted
> by using \n\n as separator which fails if scripts are sending header
> conform to HTTP specs above. Here's a patch by using \r\n\r\n as
> second possible
> separator:
> 
> ----------------------------- snip ------------------------------
> 395a396,400
> > 
> >             if len(ss) < 2:
> >               # Second try with splitting by using \r\n\r\n as separator
> >               ss = string.split(self.headers, '\r\n\r\n', 1)
> > 
> ----------------------------- snip ------------------------------
> 
> Would be nice if this patch makes its way into the mod_python
> distribution.
> 
> Ciao, Michael.
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From list-modpython at ccraig.org  Tue Jul 11 22:23:10 2000
From: list-modpython at ccraig.org (list-modpython@ccraig.org)
Date: Fri Jan  9 21:52:02 2004
Subject: [mod_python] Segfault on Apache Startup
Message-ID: <m3lmz8dr3l.fsf@elbereth.ccraig.org>

#LoadModule mmap_static_module modules/mod_mmap_static.so
LoadModule python_module modules/mod_python.so
LoadModule vhost_alias_module modules/mod_vhost_alias.so
LoadModule env_module         modules/mod_env.so
LoadModule config_log_module  modules/mod_log_config.so
LoadModule agent_log_module   modules/mod_log_agent.so
LoadModule referer_log_module modules/mod_log_referer.so
#LoadModule mime_magic_module  modules/mod_mime_magic.so
LoadModule mime_module        modules/mod_mime.so
LoadModule negotiation_module modules/mod_negotiation.so
LoadModule status_module      modules/mod_status.so
LoadModule info_module        modules/mod_info.so
LoadModule includes_module    modules/mod_include.so
LoadModule autoindex_module   modules/mod_autoindex.so
LoadModule dir_module         modules/mod_dir.so
LoadModule cgi_module         modules/mod_cgi.so
LoadModule asis_module        modules/mod_asis.so
LoadModule imap_module        modules/mod_imap.so
LoadModule action_module      modules/mod_actions.so
#LoadModule speling_module     modules/mod_speling.so
LoadModule userdir_module     modules/mod_userdir.so
LoadModule alias_module       modules/mod_alias.so
LoadModule rewrite_module     modules/mod_rewrite.so
LoadModule access_module      modules/mod_access.so
LoadModule auth_module        modules/mod_auth.so
LoadModule anon_auth_module   modules/mod_auth_anon.so
LoadModule db_auth_module     modules/mod_auth_db.so
LoadModule digest_module      modules/mod_digest.so
LoadModule proxy_module       modules/libproxy.so
#LoadModule cern_meta_module   modules/mod_cern_meta.so
LoadModule expires_module     modules/mod_expires.so
LoadModule headers_module     modules/mod_headers.so
LoadModule usertrack_module   modules/mod_usertrack.so
#LoadModule example_module     modules/mod_example.so
#LoadModule unique_id_module   modules/mod_unique_id.so
LoadModule setenvif_module    modules/mod_setenvif.so
#LoadModule bandwidth_module   modules/mod_bandwidth.so
#LoadModule put_module		modules/mod_put.so

# Extra Modules
#LoadModule perl_module        modules/libperl.so
#LoadModule php_module         modules/mod_php.so
#LoadModule php3_module        modules/libphp3.so


#  Reconstruction of the complete module list from all available modules
#  (static and shared ones) to achieve correct module execution order.
#  [WHENEVER YOU CHANGE THE LOADMODULE SECTION ABOVE UPDATE THIS, TOO]
ClearModuleList
AddModule mod_python.c
#AddModule mod_mmap_static.c
AddModule mod_vhost_alias.c
AddModule mod_env.c
AddModule mod_log_config.c
AddModule mod_log_agent.c
AddModule mod_log_referer.c
#AddModule mod_mime_magic.c
AddModule mod_mime.c
AddModule mod_negotiation.c
AddModule mod_status.c
AddModule mod_info.c
AddModule mod_include.c
AddModule mod_autoindex.c
AddModule mod_dir.c
AddModule mod_cgi.c
AddModule mod_asis.c
AddModule mod_imap.c
AddModule mod_actions.c
#AddModule mod_speling.c
AddModule mod_userdir.c
AddModule mod_alias.c
AddModule mod_rewrite.c
AddModule mod_access.c
AddModule mod_auth.c
AddModule mod_auth_anon.c
AddModule mod_auth_db.c
AddModule mod_digest.c
AddModule mod_proxy.c
#AddModule mod_cern_meta.c
AddModule mod_expires.c
AddModule mod_headers.c
AddModule mod_usertrack.c
#AddModule mod_example.c
#AddModule mod_unique_id.c
AddModule mod_so.c
AddModule mod_setenvif.c
#AddModule mod_bandwidth.c
#AddModule mod_put.c

# Extra Modules
#AddModule mod_perl.c
#AddModule mod_php.c
#AddModule mod_php3.c
-------------- next part --------------
GNU gdb 4.18
Copyright 1998 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "i386-redhat-linux"...
(no debugging symbols found)...
Core was generated by `httpd -X'.
Program terminated with signal 11, Segmentation fault.
Reading symbols from /lib/libm.so.6...done.
Reading symbols from /lib/libcrypt.so.1...done.
Reading symbols from /lib/libdb.so.3...done.
Reading symbols from /lib/libdl.so.2...done.
Reading symbols from /lib/libc.so.6...done.
Reading symbols from /lib/ld-linux.so.2...done.
Reading symbols from /lib/libnss_files.so.2...done.
Reading symbols from /etc/httpd/modules/mod_python.so...done.
Reading symbols from /lib/libpthread.so.0...done.
Reading symbols from /etc/httpd/modules/mod_vhost_alias.so...done.
Reading symbols from /etc/httpd/modules/mod_env.so...done.
Reading symbols from /etc/httpd/modules/mod_log_config.so...done.
Reading symbols from /etc/httpd/modules/mod_log_agent.so...done.
Reading symbols from /etc/httpd/modules/mod_log_referer.so...done.
Reading symbols from /etc/httpd/modules/mod_mime.so...done.
Reading symbols from /etc/httpd/modules/mod_negotiation.so...done.
Reading symbols from /etc/httpd/modules/mod_status.so...done.
Reading symbols from /etc/httpd/modules/mod_info.so...done.
Reading symbols from /etc/httpd/modules/mod_include.so...done.
Reading symbols from /etc/httpd/modules/mod_autoindex.so...done.
Reading symbols from /etc/httpd/modules/mod_dir.so...done.
Reading symbols from /etc/httpd/modules/mod_cgi.so...done.
Reading symbols from /etc/httpd/modules/mod_asis.so...done.
Reading symbols from /etc/httpd/modules/mod_imap.so...done.
Reading symbols from /etc/httpd/modules/mod_actions.so...done.
Reading symbols from /etc/httpd/modules/mod_userdir.so...done.
Reading symbols from /etc/httpd/modules/mod_alias.so...done.
Reading symbols from /etc/httpd/modules/mod_rewrite.so...done.
Reading symbols from /etc/httpd/modules/mod_access.so...done.
Reading symbols from /etc/httpd/modules/mod_auth.so...done.
Reading symbols from /etc/httpd/modules/mod_auth_anon.so...done.
Reading symbols from /etc/httpd/modules/mod_auth_db.so...done.
Reading symbols from /etc/httpd/modules/mod_digest.so...done.
Reading symbols from /etc/httpd/modules/libproxy.so...done.
Reading symbols from /etc/httpd/modules/mod_expires.so...done.
Reading symbols from /etc/httpd/modules/mod_headers.so...done.
Reading symbols from /etc/httpd/modules/mod_usertrack.so...done.
Reading symbols from /etc/httpd/modules/mod_setenvif.so...done.
#0  0x4021a047 in ?? () from /lib/libpthread.so.0
(gdb) bt
#0  0x4021a047 in ?? () from /lib/libpthread.so.0
#1  0x401352eb in __getpwnam_r (name=0x80a9dc4 "nobody", resbuf=0x40196240, 
    buffer=0x80a6f08 "nobody", buflen=1024, result=0xbfffd5fc)
    at ../nss/getXXbyYY_r.c:182
#2  0x40134ba0 in getpwnam () at ../nss/getXXbyYY.c:156
#3  0x8064c26 in ap_uname2id ()
#4  0x8057043 in ap_exists_config_define ()
#5  0x8053e8c in ap_clear_module_list ()
#6  0x80540cc in ap_handle_command ()
#7  0x8054118 in ap_srm_command_loop ()
#8  0x8054487 in ap_process_resource_config ()
#9  0x8054b04 in ap_read_config ()
#10 0x805bf97 in ap_child_terminate ()
#11 0x805c65f in main ()
#12 0x400bc9cb in __libc_start_main () at ../sysdeps/generic/libc-start.c:122
(gdb) 
-------------- next part --------------

I'm using mod_python version 2.4.1 on a RedHat 6.2 machine,
kernel 2.2.16 and Apache 1.3.12

The module was compiled with the following command:

apxs -c -I/usr/include/python1.5 -L/usr/lib/python1.5/config \
-lpython1.5 -lpthread -lieee -lm -ldl mod_python.c


I'm including a complete list of module loads and a backtrace of the
core dump.  This segfault does not occur if the LoadModule for
mod_python are commented out, but does if only the AddModule is.

I hope this was somewhat helpful,

-- 
Christopher A. Craig <ccraig@ccraig.org>
When you say "I wrote a program that crashed Windows", people just stare at
you blankly and say "Hey, I got those with the system, *for free*". - Linus
http://www.ccraig.org
From richard at whitequeen.com  Sun Jul  9 06:30:47 2000
From: richard at whitequeen.com (richard offer)
Date: Fri Jan  9 21:52:02 2004
Subject: [mod_python] Segfault on Apache Startup
In-Reply-To: list-modpython@ccraig.org
       "[mod_python] Segfault on Apache Startup" (Jul 11, 10:23pm)
Message-ID: <200007091330.e69DUlZ14193@erij.whitequeen.com>

* $ from list-modpython@ccraig.org at "11-Jul:10:23pm" | sed "1,$s/^/* /" 
*
* #0  0x4021a047 in ?? () from /lib/libpthread.so.0
* (gdb) bt
* #0  0x4021a047 in ?? () from /lib/libpthread.so.0
* #1  0x401352eb in __getpwnam_r (name=0x80a9dc4 "nobody", resbuf=0x40196240, 
*     buffer=0x80a6f08 "nobody", buflen=1024, result=0xbfffd5fc)
*     at ../nss/getXXbyYY_r.c:182
* #2  0x40134ba0 in getpwnam () at ../nss/getXXbyYY.c:156
* #3  0x8064c26 in ap_uname2id ()
* #4  0x8057043 in ap_exists_config_define ()
* #5  0x8053e8c in ap_clear_module_list ()
* #6  0x80540cc in ap_handle_command ()
* #7  0x8054118 in ap_srm_command_loop ()
* #8  0x8054487 in ap_process_resource_config ()
* #9  0x8054b04 in ap_read_config ()
* #10 0x805bf97 in ap_child_terminate ()
* #11 0x805c65f in main ()
* #12 0x400bc9cb in __libc_start_main () at ../sysdeps/generic/libc-start.c:122
* (gdb) 
* --=-=-=
* 
* 
* I'm using mod_python version 2.4.1 on a RedHat 6.2 machine,
* kernel 2.2.16 and Apache 1.3.12
* 
* The module was compiled with the following command:
* 
* apxs -c -I/usr/include/python1.5 -L/usr/lib/python1.5/config \
* -lpython1.5 -lpthread -lieee -lm -ldl mod_python.c

You probably want to link python in statically, I did something like

apxs -c -I/usr/include/python1.5 mod_python.c
/usr/lib/python1.5/config/libpython1.5.a -lpthread

* 
* 
* I'm including a complete list of module loads and a backtrace of the
* core dump.  This segfault does not occur if the LoadModule for
* mod_python are commented out, but does if only the AddModule is.
* 
* I hope this was somewhat helpful,

I assume that you are consistant in the threading (both python and mod_python are threaded or neither).


However something that I found was that trying to use a threaded python
in a chroot'ed environment didn't work. Threaded python worked okay
outside the chroot and a non-threaded python worked okay in th chroot.

* Christopher A. Craig <ccraig@ccraig.org>


richard.


-- 
richard offer @ home 
          84 FE 48 E4 74 D0 26 D4  31 8E B6 86 98 74 E2 7C  8A FB BF A3
___________________________________http://216.185.15.144/users/richard/

From grisha at ispol.com  Wed Jul 12 13:46:15 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:02 2004
Subject: [mod_python] embedded Python
Message-ID: <Pine.LNX.4.21.0007121334500.14643-100000@saturn.ispol.com>


Based on what I've seen in the newsgroups and the e-mails that I often
get, there seems to be a strong interest in html-embedded Python, in fact,
from what I gather, some people went through the trouble of downloading
and installing mod_python with that expectation only to find out that it
does no such thing.

I personally think it would be extremely nice if mod_python came bundled
with a (reliable and usable) handler that processed Python embedded within
HTML. There a couple of questions that I have about it though -

1. First - is there really a great need for embedded Python? Are a lot of
people using PMZ and similar things and want them to work with mod_python?

2. Would this be something that is more desired than other fancy things
like dynamic handler registration and a deeper integration with apache
api? In other words, would you rather have a cool embedded Python thing
than the ability to create your own Apache configuration directives?

3. Should embedded Python be a project of its own, or would it be
appropriate to include it in the scope of mod_python?

Any other comments, suggestions, pointers, etc are appreciated.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com


From richard at whitequeen.com  Sun Jul  9 09:19:04 2000
From: richard at whitequeen.com (richard offer)
Date: Fri Jan  9 21:52:02 2004
Subject: [mod_python] embedded Python
In-Reply-To: Gregory Trubetskoy <grisha@ispol.com>
       "[mod_python] embedded Python" (Jul 12,  1:46pm)
Message-ID: <200007091619.e69GJ4V14406@erij.whitequeen.com>

* $ from grisha@ispol.com at "12-Jul: 1:46pm" | sed "1,$s/^/* /" 
*
*
* 
* 
* Based on what I've seen in the newsgroups and the e-mails that I often
* get, there seems to be a strong interest in html-embedded Python, in fact,
* from what I gather, some people went through the trouble of downloading
* and installing mod_python with that expectation only to find out that it
* does no such thing.
* 
* I personally think it would be extremely nice if mod_python came bundled
* with a (reliable and usable) handler that processed Python embedded within
* HTML. There a couple of questions that I have about it though -
* 
* 1. First - is there really a great need for embedded Python? Are a lot of
* people using PMZ and similar things and want them to work with mod_python?
* 
* 2. Would this be something that is more desired than other fancy things
* like dynamic handler registration and a deeper integration with apache
* api? In other words, would you rather have a cool embedded Python thing
* than the ability to create your own Apache configuration directives?
* 
* 3. Should embedded Python be a project of its own, or would it be
* appropriate to include it in the scope of mod_python?

I think it belongs in mod_python, I see a sort of spectrum, at one end
you have an HTML file that has a few lines of Python to replace a SSI,
at the other full python programs that happen to spit out HTML. However,
you could argue that for the HTML case, the startup time for an external
intrepreter would be even more excessive than a large python application.

I could also see how it could be useful to be able to have different
handlers in the embedded code (say to display different information
depending on whether you have authenticated yourself). But this okay to
leave until version n+1. :-)

Is it possible to have multiple (completely distinct) apps in the same
directory ?

I'm biased, I'm just an average engineer, someone who'd rather write
code to spit out HTML, than HTML :-)

*   Gregory (Grisha) Trubetskoy
*        grisha@ispol.com
* 

richard.

-- 
richard offer @ home 
          84 FE 48 E4 74 D0 26 D4  31 8E B6 86 98 74 E2 7C  8A FB BF A3
___________________________________http://216.185.15.144/users/richard/

From sylvan at ravinet.com  Thu Jul 13 02:12:15 2000
From: sylvan at ravinet.com (Sylvan Ravinet)
Date: Fri Jan  9 21:52:02 2004
Subject: [mod_python] embedded Python
References: <Pine.LNX.4.21.0007121334500.14643-100000@saturn.ispol.com>
Message-ID: <396CFB4F.4B0B12CE@ravinet.com>

hello,

Gregory Trubetskoy wrote:
> 
> Based on what I've seen in the newsgroups and the e-mails that I often
> get, there seems to be a strong interest in html-embedded Python, in fact,
> from what I gather, some people went through the trouble of downloading
> and installing mod_python with that expectation only to find out that it
> does no such thing.

I'm among those...

> I personally think it would be extremely nice if mod_python came bundled
> with a (reliable and usable) handler that processed Python embedded within
> HTML.

I fully agree.

>There a couple of questions that I have about it though -
> 
> 1. First - is there really a great need for embedded Python? Are a lot of
> people using PMZ and similar things and want them to work with mod_python?

I'm not using PMZ, but I tried moderately to make it work with
mod_python. I have to say that this Handler process is still cryptic to
me.

> 2. Would this be something that is more desired than other fancy things
> like dynamic handler registration and a deeper integration with apache
> api? In other words, would you rather have a cool embedded Python thing
> than the ability to create your own Apache configuration directives?

Is that so difficult to implement? Isn't this PMZ already usable for
this purpose? (of course, with a good knowledge of mod_python)

> 3. Should embedded Python be a project of its own, or would it be
> appropriate to include it in the scope of mod_python?

Why another project? As a dedicated python handler for mod_python, that
sounds fine to me. (that can be only one example of mod_python use,
really good indeed)

Thank you for the good work already put in mod_python,

Best regards,

-Sylvan

--
Do, or do not. There is no try. -Yoda
Sylvan Ravinet: http://www.ravinet.com/sylvan/contact

From gtalvola at nameconnector.com  Thu Jul 13 09:35:55 2000
From: gtalvola at nameconnector.com (Geoff Talvola)
Date: Fri Jan  9 21:52:02 2004
Subject: [mod_python] embedded Python
References: <Pine.LNX.4.21.0007121334500.14643-100000@saturn.ispol.com> <396CFB4F.4B0B12CE@ravinet.com>
Message-ID: <396DC5BB.BF4A741E@NameConnector.com>

One project that allows embedding of Python in HTML is WebWare for Python, which
has a Python Server Pages component.  See http://webware.sourceforge.net/ for
details.

WebWare is still in Alpha phase, but it looks quite useful already.  It has a
number of nice features such as Session objects to automatically handle session
data, and the ability to write web applications in an object-oriented manner.
You can mix and match Python Server Pages with pages that are implemented as
Python classes.

And it should work with mod_python on Linux -- I remember some messages on the
mailing list to that effect.  I'm planning on trying to get it to work with
mod_python on Windows NT, which I don't think anyone has attempted yet.  You can
also use it with plain old CGI (which will be slower) or FastCGI.

--


- Geoff Talvola
  Parlance Corporation
  gtalvola@NameConnector.com


From grisha at ispol.com  Thu Jul 13 17:26:31 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:02 2004
Subject: [mod_python] embedded Python
In-Reply-To: <396DC5BB.BF4A741E@NameConnector.com>
Message-ID: <Pine.LNX.4.21.0007131725240.19178-100000@saturn.ispol.com>

If that thing works reliably, then we can just put a pointer to it as a
"recommended solution" for this sort of thing with mod_python on the
website or the faq somewhere.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Thu, 13 Jul 2000, Geoff Talvola wrote:

> One project that allows embedding of Python in HTML is WebWare for Python, which
> has a Python Server Pages component.  See http://webware.sourceforge.net/ for
> details.
> 
> WebWare is still in Alpha phase, but it looks quite useful already.  It has a
> number of nice features such as Session objects to automatically handle session
> data, and the ability to write web applications in an object-oriented manner.
> You can mix and match Python Server Pages with pages that are implemented as
> Python classes.
> 
> And it should work with mod_python on Linux -- I remember some messages on the
> mailing list to that effect.  I'm planning on trying to get it to work with
> mod_python on Windows NT, which I don't think anyone has attempted yet.  You can
> also use it with plain old CGI (which will be slower) or FastCGI.
> 
> --
> 
> 
> - Geoff Talvola
>   Parlance Corporation
>   gtalvola@NameConnector.com
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From jtravis at cse.unl.edu  Thu Jul 13 17:01:19 2000
From: jtravis at cse.unl.edu (Jon Travis)
Date: Fri Jan  9 21:52:02 2004
Subject: [mod_python] embedded Python
In-Reply-To: <396DC5BB.BF4A741E@NameConnector.com> from Geoff Talvola at "Jul
 13, 2000 09:35:55 am"
Message-ID: <200007132201.RAA12712709@cse.unl.edu>

I don't know if it is inappropriate to post this, but:

Another project that already allows embedded Python is the mod_snake
project @ http://modsnake.sourceforge.net

-- Jon


> One project that allows embedding of Python in HTML is WebWare for Python, which
> has a Python Server Pages component.  See http://webware.sourceforge.net/ for
> details.
> 
> WebWare is still in Alpha phase, but it looks quite useful already.  It has a
> number of nice features such as Session objects to automatically handle session
> data, and the ability to write web applications in an object-oriented manner.
> You can mix and match Python Server Pages with pages that are implemented as
> Python classes.
> 
> And it should work with mod_python on Linux -- I remember some messages on the
> mailing list to that effect.  I'm planning on trying to get it to work with
> mod_python on Windows NT, which I don't think anyone has attempted yet.  You can
> also use it with plain old CGI (which will be slower) or FastCGI.
> 
> --
> 
> 
> - Geoff Talvola
>   Parlance Corporation
>   gtalvola@NameConnector.com
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From grisha at ispol.com  Thu Jul 13 18:53:36 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:02 2004
Subject: [mod_python] embedded Python
In-Reply-To: <200007132201.RAA12712709@cse.unl.edu>
Message-ID: <Pine.LNX.4.21.0007131852280.19470-100000@saturn.ispol.com>

On Thu, 13 Jul 2000, Jon Travis wrote:

> I don't know if it is inappropriate to post this, but:
> 
> Another project that already allows embedded Python is the mod_snake
> project @ http://modsnake.sourceforge.net

Yeah, but who wants to use mod_snake?

(Juuust kidding!!!!)

Grisha


From gstein at lyra.org  Thu Jul 13 16:16:47 2000
From: gstein at lyra.org (Greg Stein)
Date: Fri Jan  9 21:52:02 2004
Subject: [mod_python] embedded Python
In-Reply-To: <Pine.LNX.4.21.0007131852280.19470-100000@saturn.ispol.com>; from grisha@ispol.com on Thu, Jul 13, 2000 at 06:53:36PM -0400
References: <200007132201.RAA12712709@cse.unl.edu> <Pine.LNX.4.21.0007131852280.19470-100000@saturn.ispol.com>
Message-ID: <20000713161647.F29590@lyra.org>

What cracks me up, is that Python was not named after the snake. So
mod_snake is a complete misnomer :-)

[ Python was named after Monty Python's Flying Circus ]

Cheers,
-g

On Thu, Jul 13, 2000 at 06:53:36PM -0400, Gregory Trubetskoy wrote:
> 
> On Thu, 13 Jul 2000, Jon Travis wrote:
> 
> > I don't know if it is inappropriate to post this, but:
> > 
> > Another project that already allows embedded Python is the mod_snake
> > project @ http://modsnake.sourceforge.net
> 
> Yeah, but who wants to use mod_snake?
> 
> (Juuust kidding!!!!)
> 
> Grisha
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python

-- 
Greg Stein, http://www.lyra.org/

From jtravis at cse.unl.edu  Thu Jul 13 18:25:29 2000
From: jtravis at cse.unl.edu (Jon Travis)
Date: Fri Jan  9 21:52:02 2004
Subject: [mod_python] embedded Python
In-Reply-To: <20000713161647.F29590@lyra.org> from Greg Stein at "Jul 13, 2000
 04:16:47 pm"
Message-ID: <200007132325.SAA14020407@cse.unl.edu>

I realize where the name came from ;-)  I couldn't think of
anything that would work well, like, mod_spamity_spam, or 
ministry_of_apache_modules, so I decided this was about as
good as I could do.  Originally it was mod_snakey, but .. ya know..
one can only be soooo lame.  ;-)

-- Jon


> What cracks me up, is that Python was not named after the snake. So
> mod_snake is a complete misnomer :-)
> 
> [ Python was named after Monty Python's Flying Circus ]
> 
> Cheers,
> -g
> 
> On Thu, Jul 13, 2000 at 06:53:36PM -0400, Gregory Trubetskoy wrote:
> > 
> > On Thu, 13 Jul 2000, Jon Travis wrote:
> > 
> > > I don't know if it is inappropriate to post this, but:
> > > 
> > > Another project that already allows embedded Python is the mod_snake
> > > project @ http://modsnake.sourceforge.net
> > 
> > Yeah, but who wants to use mod_snake?
> > 
> > (Juuust kidding!!!!)
> > 
> > Grisha
> > 
> > _______________________________________________
> > Mod_python mailing list
> > Mod_python@modpython.org
> > http://www.modpython.org/mailman/listinfo/mod_python
> 
> -- 
> Greg Stein, http://www.lyra.org/
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From grisha at ispol.com  Thu Jul 13 23:17:03 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:02 2004
Subject: [mod_python] embedded Python
In-Reply-To: <200007132325.SAA14020407@cse.unl.edu>
Message-ID: <Pine.LNX.4.21.0007132301530.20200-100000@saturn.ispol.com>

How about mod_monty?

Getting more to the point though - I am a proponent of the idea that
competition in the open source is not a good thing. It makes the life of
users more complicated.... I'd much rather there was one module that was
done right than several half-ass ones, like what we have now.

Grisha


On Thu, 13 Jul 2000, Jon Travis wrote:

> I realize where the name came from ;-)  I couldn't think of
> anything that would work well, like, mod_spamity_spam, or 
> ministry_of_apache_modules, so I decided this was about as
> good as I could do.  Originally it was mod_snakey, but .. ya know..
> one can only be soooo lame.  ;-)
> 
> -- Jon
> 
> 
> > What cracks me up, is that Python was not named after the snake. So
> > mod_snake is a complete misnomer :-)
> > 
> > [ Python was named after Monty Python's Flying Circus ]
> > 
> > Cheers,
> > -g
> > 
> > On Thu, Jul 13, 2000 at 06:53:36PM -0400, Gregory Trubetskoy wrote:
> > > 
> > > On Thu, 13 Jul 2000, Jon Travis wrote:
> > > 
> > > > I don't know if it is inappropriate to post this, but:
> > > > 
> > > > Another project that already allows embedded Python is the mod_snake
> > > > project @ http://modsnake.sourceforge.net
> > > 
> > > Yeah, but who wants to use mod_snake?
> > > 
> > > (Juuust kidding!!!!)
> > > 
> > > Grisha
> > > 
> > > _______________________________________________
> > > Mod_python mailing list
> > > Mod_python@modpython.org
> > > http://www.modpython.org/mailman/listinfo/mod_python
> > 
> > -- 
> > Greg Stein, http://www.lyra.org/
> > _______________________________________________
> > Mod_python mailing list
> > Mod_python@modpython.org
> > http://www.modpython.org/mailman/listinfo/mod_python
> > 
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From richard at whitequeen.com  Thu Jul 13 17:27:52 2000
From: richard at whitequeen.com (richard offer)
Date: Fri Jan  9 21:52:02 2004
Subject: [mod_python] embedded Python
In-Reply-To: Gregory Trubetskoy <grisha@ispol.com>
       "Re: [mod_python] embedded Python" (Jul 13, 11:17pm)
Message-ID: <200007140027.e6E0RqB03344@erij.whitequeen.com>

* $ from grisha@ispol.com at "13-Jul:11:17pm" | sed "1,$s/^/* /" 
*
*
* 
* How about mod_monty?

mod_fullmonty ?

* 
* Getting more to the point though - I am a proponent of the idea that
* competition in the open source is not a good thing. It makes the life of
* users more complicated.... I'd much rather there was one module that was
* done right than several half-ass ones, like what we have now.

So, what do you see as the strengths and weaknesses of each ? 

* 
* Grisha
* 

richard.

-- 
richard offer @ home 
          84 FE 48 E4 74 D0 26 D4  31 8E B6 86 98 74 E2 7C  8A FB BF A3
___________________________________http://216.185.15.144/users/richard/

From rsalz at CaveoSystems.com  Sat Jul 15 22:31:36 2000
From: rsalz at CaveoSystems.com (rsalz@CaveoSystems.com)
Date: Fri Jan  9 21:52:02 2004
Subject: [mod_python] Swig, and mod_ssl
Message-ID: <200007160231.WAA04120@pc1.caveosystems.com>

Swig (http://www.swig.org) is a "compiler" that can parse most C
header files and automatically generate code for Perl, Tcl, Python,
and Java.  At a rough guess, approximately half of mod_python.c could
be replaced by a couple-dozen lines.  I wonder if it makes sense
to use SWIG, and for sites without it, include the Swig output.
(Just like some programs include the output of Yacc, for those without it.)

Second question, which motivated the first: anyone looked at what
could/should be added to the mod_python objects when mod_ssl is used?
	/r$

From michael at stroeder.com  Sun Jul 16 14:46:45 2000
From: michael at stroeder.com (Michael =?iso-8859-1?Q?Str=F6der?=)
Date: Fri Jan  9 21:52:02 2004
Subject: [mod_python] Swig, and mod_ssl
References: <200007160231.WAA04120@pc1.caveosystems.com>
Message-ID: <3971AEB5.AB577533@stroeder.com>

rsalz@caveosystems.com wrote:
> 
> Second question, which motivated the first: anyone looked at what
> could/should be added to the mod_python objects when mod_ssl is used?

Callback functions for checking client certificates.
Well, one can do this also with M2Crypto anyway.

Ciao, Michael.

From rsalz at CaveoSystems.com  Sun Jul 16 15:37:27 2000
From: rsalz at CaveoSystems.com (rsalz@CaveoSystems.com)
Date: Fri Jan  9 21:52:02 2004
Subject: [mod_python] Swig, and mod_ssl
Message-ID: <200007161937.PAA10021@pc1.caveosystems.com>

>Callback functions for checking client certificates.
>Well, one can do this also with M2Crypto anyway.

Well yeah, but M2Crypto isn't integrated with mod_ssl and Apache.
(M2Crypto is a SWIG interface to OpenSSL, for those who don't know.)
At a minimum, I'd like to be able to get the client cert if
coming in via SSL, or know if there isn't one.
	/r$

From grisha at ispol.com  Sun Jul 16 21:02:58 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:02 2004
Subject: [mod_python] Swig, and mod_ssl
In-Reply-To: <200007160231.WAA04120@pc1.caveosystems.com>
Message-ID: <Pine.LNX.4.21.0007162059470.8470-100000@saturn.ispol.com>

On Sat, 15 Jul 2000 rsalz@caveosystems.com wrote:

> Swig (http://www.swig.org) is a "compiler" that can parse most C
> header files and automatically generate code for Perl, Tcl, Python,
> and Java.  At a rough guess, approximately half of mod_python.c could
> be replaced by a couple-dozen lines.  I wonder if it makes sense
> to use SWIG, and for sites without it, include the Swig output.
> (Just like some programs include the output of Yacc, for those without it.)

mod_snake is swig-based. I don't know enough about swig to make a
judgement. So far I've getting by fine without it - I sort of assumed it's
more trouble than it's worth.

> Second question, which motivated the first: anyone looked at what
> could/should be added to the mod_python objects when mod_ssl is used?

mod_python should work just fine with mod_ssl. At least it did for me on
FreeBSD. How is SSL different from anything else that you need special
objects?

Grisha


From rsalz at CaveoSystems.com  Sun Jul 16 22:23:41 2000
From: rsalz at CaveoSystems.com (rsalz@CaveoSystems.com)
Date: Fri Jan  9 21:52:02 2004
Subject: [mod_python] Swig, and mod_ssl
Message-ID: <200007170223.WAA10313@pc1.caveosystems.com>

Thanks, I'll check out mod_snake. (What's its relationship to mod_python,
and where can I find it?  I know, I should just check the archives since
that discussion just happened.)

SWIG seems pretty easy to get running on most platforms -- it should
generally be almost as simple to build as python.  I think it would
be worth the trouble. I think about half of mod_python.c, or over 1000
lines, could be removed -- SWIG could read httpd.h (et al) and
generate the C code for the "request" object (and the others)
automatically.  I'd suggest you give it a look-see.

As for SSL, I'm not sure.  Certainly I want to get the client cert.
I have to rummage more through mod_ssl, first.
	/r$

From peter at wl.vg  Sun Jul 16 23:28:44 2000
From: peter at wl.vg (Peter Halliday)
Date: Fri Jan  9 21:52:02 2004
Subject: [mod_python] problem compiling mod_python
Message-ID: <39727D6C.A7AA1541@wl.vg>

While waiting for someone to email me an RPM of mod_python 2.4.1, I
tried compiling it.  I got a copy of the apache source as well as the
above mod_python source.  Then I installed it using the DSO instructions
on the modpython webpage.  Everything seemed to go ok.  (One problem
however, I was unsure whether my python was compiled using thread
support because I use RedHat with the standard RPM that came with it. 
However, everything seemed ok when I compiled.  No error messages.  I
added these lines to my apache config file.

LoadModule python_module  module/mod_python.so
AddModule mod_python.c
AddHandler python-program .py
PythonHandler test
PythonDebug On
and then in my mime.types file I added:
application/x-python py
 
In my DocumentRoot directory I created a directory called test.  I had a
script with the following contents.

from mod_python import apache

def handler(req):
	req.send_http_header()
        req.write("Hello World!")
        return apache.OK 

I still get the same error when I add a '#!/usr/bin/python' to the top
of the file.  The following is the error that I receive.  I am running
RedHat Linux 6.2, Apache 1.3.12, mod_python 2.4.1., python 1.5.  I have
kept everything standard as came on RedHat.  

Mod_python error: "PythonHandler test"

Traceback (innermost last):

  File "/usr/lib/python1.5/site-packages/mod_python/apache.py", line
116, in Dispatch
    object = self.resolve_object(module, object_str)

  File "/usr/lib/python1.5/site-packages/mod_python/apache.py", line 51,
in resolve_object
    raise AttributeError, s

AttributeError: module '/usr/lib/python1.5/test/__init__.pyc' contains
no 'handler'


-- 
Peter Halliday
Online Application Developer
Whetstone Logic, Inc.       http://www.whetstonelogic.com
icq#75769411           AIM screen name: hoaggelos

From peter at wl.vg  Sun Jul 16 23:37:25 2000
From: peter at wl.vg (Peter Halliday)
Date: Fri Jan  9 21:52:02 2004
Subject: [mod_python] Problems with mod_python
Message-ID: <39727F75.7E2A95C6@wl.vg>

While waiting for someone to email me an RPM of mod_python 2.4.1, I
tried compiling it.  I got a copy of the apache source as well as the
above mod_python source.  Then I installed it using the DSO instructions
on the modpython webpage.  Everything seemed to go ok.  (One problem
however, I was unsure whether my python was compiled using thread
support because I use RedHat with the standard RPM that came with it. 
However, everything seemed ok when I compiled.  No error messages.  I
added these lines to my apache config file.

LoadModule python_module  module/mod_python.so
AddModule mod_python.c
AddHandler python-program .py
PythonHandler test
PythonDebug On
I changed the FileInfo directive to AllowOverride in the apache conf
file
and then in my mime.types file I added:
application/x-python py

 
In my DocumentRoot directory I created a directory called test.  I had a
script with the following contents.

from mod_python import apache

def handler(req):
        req.send_http_header()
        req.write("Hello World!")
        return apache.OK 

I still get the same error when I add a '#!/usr/bin/python' to the top
of the file.  The following is the error that I receive.  I am running
RedHat Linux 6.2, Apache 1.3.12, mod_python 2.4.1., python 1.5.  I have
kept everything standard as came on RedHat.  

Mod_python error: "PythonHandler test"

Traceback (innermost last):

  File "/usr/lib/python1.5/site-packages/mod_python/apache.py", line
116, in Dispatch
    object = self.resolve_object(module, object_str)

  File "/usr/lib/python1.5/site-packages/mod_python/apache.py", line 51,
in resolve_object
    raise AttributeError, s

AttributeError: module '/usr/lib/python1.5/test/__init__.pyc' contains
no 'handler'


-- 
Peter Halliday
Online Application Developer
Whetstone Logic, Inc.       http://www.whetstonelogic.com
icq#75769411           AIM screen name: hoaggelos

From grisha at ispol.com  Mon Jul 17 07:49:03 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:02 2004
Subject: [mod_python] Problems with mod_python
In-Reply-To: <39727F75.7E2A95C6@wl.vg>
Message-ID: <Pine.LNX.4.21.0007170748030.10692-100000@saturn.ispol.com>


On Sun, 16 Jul 2000, Peter Halliday wrote:

> AttributeError: module '/usr/lib/python1.5/test/__init__.pyc' contains
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
> no 'handler'

Your answer is in the message.

Grisha


From frneh at wmdata.com  Wed Jul 19 14:43:33 2000
From: frneh at wmdata.com (Nehr, Fredrik)
Date: Fri Jan  9 21:52:02 2004
Subject: [mod_python] Ho do make mod_python execute more then one script in a directory
 ?
Message-ID: <058FBD36E4D3D21193210008C72B64FD01296A51@WMSTO3SI1361>

With my current configuration only the generic handler of the script named
by the "PythonHandler" directive is executed even if I point my browser at
one of the other scripts in the same directory. How can i make mod_python
execute the "right" script?

I'm using mod_python 2.4.1 with Apache 1.3.12 and Python 1.5.2 on Windows
2000 Professional.

BTW: Why is argv missing from the sys module?


Regards,

Fredrik Nehr

From grisha at ispol.com  Wed Jul 19 11:29:31 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:02 2004
Subject: [mod_python] Ho do make mod_python execute more then one script
 in a directory ?
In-Reply-To: <058FBD36E4D3D21193210008C72B64FD01296A51@WMSTO3SI1361>
Message-ID: <Pine.LNX.4.21.0007191112250.18643-100000@saturn.ispol.com>

On Wed, 19 Jul 2000, Nehr, Fredrik wrote:

> With my current configuration only the generic handler of the script named
> by the "PythonHandler" directive is executed even if I point my browser at
> one of the other scripts in the same directory. How can i make mod_python
> execute the "right" script?

That's the way Apache modules work. Quoting from the tutorial:

       Some food for thought: If you were paying attention, you noticed
  that nowhere did it say that in order for all of the above to happen,
  the URL needs to refer to myscript.py. The only requirement was that it
  refers to a .py file. In fact the name of the file doesn't matter, and
  the file referred to in the URL doesn't have to exist. So, given the
  above configuration, http://myserver/mywebdir/myscript.py and
  http://myserver/mywebdir/montypython.py would give the exact same
  result.

       At this point, if you didn't understand the above paragraph, go
  back and read it again, until you do. 

> BTW: Why is argv missing from the sys module?

sys.argv is something that appears only during interactive invocation of
Python. sys.argv is created by PySys_SetArgv() C API function which is
called from main(). If python is not invoked from the command line,
main() is never executed, thus no sys.argv. This is actually one way to
tell whether you're running from the command line or embedded. 

The documentation for Py_Initialize() function mentions this, BTW.

Grisha


From mike at schwager.com  Mon Jul 24 03:20:44 2000
From: mike at schwager.com (Michael Schwager)
Date: Fri Jan  9 21:52:03 2004
Subject: [mod_python] Errors with Apache 1.3.12 and mod_python
Message-ID: <2336170196.964408844@celery.schwager.com>

Hi,
Yes- I am a newbie.  I just installed apache 1.3.12 with mod_python 2.4.1 
on my Solaris 2.6 box.  Everything went ok, except I am getting an error 
when I try to run the test.py as instructed in the install docs (see 
below).  Notice that, strangely, I get no errors- indeed the script works 
fine- if I run httpd with the -X option.  I note that I must be in the 
htdocs directory for that to work (thus, httpd sees the test subdir, which 
contains the test.py file).  So I'm not sure how the directories and 
filenames are related to PythonHandler, and how they are found by httpd 
and/or python.  But I think the problem is path-related.

Any useful help will be appreciated.  I do not have a .htaccess file; I put 
the appropriate lines in the httpd.conf file:
AddHandler python-program .py
PythonHandler test
PythonDebug On

Here is the error:
[Mon Jul 24 02:17:20 2000] [error] PythonHandler test: Traceback (most 
recent call last):
[Mon Jul 24 02:17:20 2000] [error] PythonHandler test:   File 
"/usr/local/lib/python1.6/site-packages/mod_python/apache.py", line 116, in 
Dispatch
    object = self.resolve_object(module, object_str)
[Mon Jul 24 02:17:20 2000] [error] PythonHandler test:   File 
"/usr/local/lib/python1.6/site-packages/mod_python/apache.py", line 51, in 
resolve_object
    raise AttributeError, s
[Mon Jul 24 02:17:20 2000] [error] PythonHandler test: AttributeError: 
module '/usr/local/lib/python1.6/test/__init__.pyc' contains no 'handler'
--
-Mike                                Mike@Schwager.com
        

From vanicek at brailcom.cz  Mon Jul 24 10:27:56 2000
From: vanicek at brailcom.cz (Roman Vanicek)
Date: Fri Jan  9 21:52:03 2004
Subject: [mod_python] multiple headers (cookies) are not sent
Message-ID: <4ak8ec0w6r.fsf@gnu.brailcom.cz>

Hi all,

I have a problem with mod_python: when I use cgihandler and I try to
send one cookie to the user, it works fine. But if I send several
cookies (which is legal according to cookie spec), just one of them (the
last one) is sent. When I do the same thing with regular python CGI
script, all the cookies are sent all right.

I have tried to track down the problem, I even played with my own python
handlers and it seems to me, that req.headers_out simply don't support
the notion of multiple headers. This is the dictionary and there can be
only one record per key (ie. one Set-Cookie header in this case) and the
value can be string only (it can't be the sequence of strings which
would maybe solve the problem).

What do you think about it?
Any help is appreciated, Roman Vanicek

From grisha at ispol.com  Mon Jul 24 08:48:52 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:03 2004
Subject: [mod_python] multiple headers (cookies) are not sent
In-Reply-To: <4ak8ec0w6r.fsf@gnu.brailcom.cz>
Message-ID: <Pine.LNX.4.21.0007240846430.15004-100000@saturn.ispol.com>

On 24 Jul 2000, Roman Vanicek wrote:

> I have tried to track down the problem, I even played with my own python
> handlers and it seems to me, that req.headers_out simply don't support
> the notion of multiple headers. 

That is correct. I'll have to think about how to get around this one....

Grisha


From db at cinetic.de  Mon Jul 24 15:27:55 2000
From: db at cinetic.de (Denys Bogatz)
Date: Fri Jan  9 21:52:03 2004
Subject: [mod_python] undefined symbol: stat
Message-ID: <003e01bff572$fb6c0320$876be2c3@cinetic.de>

Hello Folks,

I encountered a problem using mod_python as Apache-DSO.
Starting Apache results in an error: Can't load module ..../mod_python into
server: ..../mod_python: undefined symbol stat

That's all!
I'm sorry - I use Linux now for one week by know and I don't know what to
do...
(...using SuSE6.2, Python 1.5.2 and Apache 1.3)

Regards,

Denys!


From grisha at ispol.com  Mon Jul 24 09:56:01 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:03 2004
Subject: [mod_python] Errors with Apache 1.3.12 and mod_python
In-Reply-To: <2336170196.964408844@celery.schwager.com>
Message-ID: <Pine.LNX.4.21.0007240950470.15004-100000@saturn.ispol.com>

When you run httpd with the -X option from the directory where test.py
lives, it works because by default has the current directory in the python
path.

When you run httpd as a daemon, then your current directory is undefined
(most likely it is ServerRoot). 

To get around this, mod_python prepends the directory for which the
directive is specified to the pythopath. But because you put your
directives in httpd.conf outside of any <Directory> directives, mod_python
does not modify your python path in any way, because it doesn't know how
to. What you should do, if you're not using .htaccess, is:

<Directory /dir/where/test.py/is>
	AddHandler python-program .py
	PythonHandler test
	PythonDebug On
</Directory>

Then "/dir/where/test.py/is" will be added to the python path and it will
work fine.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Mon, 24 Jul 2000, Michael Schwager wrote:

> Hi,
> Yes- I am a newbie.  I just installed apache 1.3.12 with mod_python 2.4.1 
> on my Solaris 2.6 box.  Everything went ok, except I am getting an error 
> when I try to run the test.py as instructed in the install docs (see 
> below).  Notice that, strangely, I get no errors- indeed the script works 
> fine- if I run httpd with the -X option.  I note that I must be in the 
> htdocs directory for that to work (thus, httpd sees the test subdir, which 
> contains the test.py file).  So I'm not sure how the directories and 
> filenames are related to PythonHandler, and how they are found by httpd 
> and/or python.  But I think the problem is path-related.
> 
> Any useful help will be appreciated.  I do not have a .htaccess file; I put 
> the appropriate lines in the httpd.conf file:
> AddHandler python-program .py
> PythonHandler test
> PythonDebug On
> 
> Here is the error:
> [Mon Jul 24 02:17:20 2000] [error] PythonHandler test: Traceback (most 
> recent call last):
> [Mon Jul 24 02:17:20 2000] [error] PythonHandler test:   File 
> "/usr/local/lib/python1.6/site-packages/mod_python/apache.py", line 116, in 
> Dispatch
>     object = self.resolve_object(module, object_str)
> [Mon Jul 24 02:17:20 2000] [error] PythonHandler test:   File 
> "/usr/local/lib/python1.6/site-packages/mod_python/apache.py", line 51, in 
> resolve_object
>     raise AttributeError, s
> [Mon Jul 24 02:17:20 2000] [error] PythonHandler test: AttributeError: 
> module '/usr/local/lib/python1.6/test/__init__.pyc' contains no 'handler'
> --
> -Mike                                Mike@Schwager.com
>         
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From grisha at ispol.com  Mon Jul 24 12:09:09 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:03 2004
Subject: [mod_python] undefined symbol: stat
In-Reply-To: <003e01bff572$fb6c0320$876be2c3@cinetic.de>
Message-ID: <Pine.LNX.4.21.0007240956360.15004-100000@saturn.ispol.com>

You're missing a library of some kind when you're linking. I'm not sure
where stat lives, but you may want to check what libraries apache and
python are linked against.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Mon, 24 Jul 2000, Denys Bogatz wrote:

> Hello Folks,
> 
> I encountered a problem using mod_python as Apache-DSO.
> Starting Apache results in an error: Can't load module ..../mod_python into
> server: ..../mod_python: undefined symbol stat
> 
> That's all!
> I'm sorry - I use Linux now for one week by know and I don't know what to
> do...
> (...using SuSE6.2, Python 1.5.2 and Apache 1.3)
> 
> Regards,
> 
> Denys!
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From db at cinetic.de  Mon Jul 24 18:32:06 2000
From: db at cinetic.de (Denys Bogatz)
Date: Fri Jan  9 21:52:03 2004
Subject: AW: [mod_python] undefined symbol: stat
In-Reply-To: <Pine.LNX.4.21.0007240956360.15004-100000@saturn.ispol.com>
Message-ID: <004a01bff58c$b52f8480$876be2c3@cinetic.de>

Thanx!

I tried to find the lib with:
ar -x /usr/local/lib/.../libgcc.a stat.o
...but I haven't found it! :-(

As I wrote I'm kindly new on Linux, so I've got no idea where to search for
it...

Bye, Denys!
(I may try to solve the problem by building my own version of python (still
using the version supplied by SuSE6.2) - maybe that will work!?)


>You're missing a library of some kind when you're linking. I'm not sure
>where stat lives, but you may want to check what libraries apache and
>python are linked against.
>
>--
>  Gregory (Grisha) Trubetskoy
>       grisha@ispol.com
>


From grisha at ispol.com  Mon Jul 24 14:17:22 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:03 2004
Subject: AW: [mod_python] undefined symbol: stat
In-Reply-To: <004a01bff58c$b52f8480$876be2c3@cinetic.de>
Message-ID: <Pine.LNX.4.21.0007241415530.15752-100000@saturn.ispol.com>

Check this web page out: http://jarre.pair.com/insadmin/gerhard/

Perhaps Gerhard could update his Suse RPM's to 2.4.1?

Grisha


On Mon, 24 Jul 2000, Denys Bogatz wrote:

> Thanx!
> 
> I tried to find the lib with:
> ar -x /usr/local/lib/.../libgcc.a stat.o
> ...but I haven't found it! :-(
> 
> As I wrote I'm kindly new on Linux, so I've got no idea where to search for
> it...
> 
> Bye, Denys!
> (I may try to solve the problem by building my own version of python (still
> using the version supplied by SuSE6.2) - maybe that will work!?)
> 
> 
> >You're missing a library of some kind when you're linking. I'm not sure
> >where stat lives, but you may want to check what libraries apache and
> >python are linked against.
> >
> >--
> >  Gregory (Grisha) Trubetskoy
> >       grisha@ispol.com
> >
> 



From bjrubble at dagobah.com  Mon Jul 24 13:57:35 2000
From: bjrubble at dagobah.com (Adam Clark)
Date: Fri Jan  9 21:52:03 2004
Subject: [mod_python] Basic mod_python questions
In-Reply-To: <Pine.LNX.4.21.0007241415530.15752-100000@saturn.ispol.com>
Message-ID: <Pine.BSF.4.21.0007241346550.27728-100000@shell16.ba.best.com>

Hi,

I have what I'm sure are some basic questions.  I'm trying to transfer
stuff from a CGI environment, and I'm not sure how you're supposed to
handle all the inputs.  I'm currently using the cgi module to manually
parse the query string, but do I have to write all the get/post switching
stuff myself?  What about file uploads?  Cookies?  I'd rather write this
right than become dependent on the CGI Handler, but I'm not sure how these
things are supposed to be done.

Thanks a lot
Adam



From grisha at ispol.com  Mon Jul 24 17:24:35 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:03 2004
Subject: [mod_python] Basic mod_python questions
In-Reply-To: <Pine.BSF.4.21.0007241346550.27728-100000@shell16.ba.best.com>
Message-ID: <Pine.LNX.4.21.0007241723001.16397-100000@saturn.ispol.com>

req.read(), req.headers_out and req.headers_in are your friends here. You
will still need a lot of functionality from the cgi.py standard Python
library module to parse multipart content from POST operations.

Grisha

On Mon, 24 Jul 2000, Adam Clark wrote:

> Hi,
> 
> I have what I'm sure are some basic questions.  I'm trying to transfer
> stuff from a CGI environment, and I'm not sure how you're supposed to
> handle all the inputs.  I'm currently using the cgi module to manually
> parse the query string, but do I have to write all the get/post switching
> stuff myself?  What about file uploads?  Cookies?  I'd rather write this
> right than become dependent on the CGI Handler, but I'm not sure how these
> things are supposed to be done.
> 
> Thanks a lot
> Adam
> 
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From db at cinetic.de  Tue Jul 25 10:04:36 2000
From: db at cinetic.de (Denys Bogatz)
Date: Fri Jan  9 21:52:03 2004
Subject: AW: AW: [mod_python] undefined symbol: stat solved!
In-Reply-To: <Pine.LNX.4.21.0007241415530.15752-100000@saturn.ispol.com>
Message-ID: <005501bff60e$f9ee9200$876be2c3@cinetic.de>

I solved the problem by linking /usr/lib/modules/2.2.10/libc.a within
mod_python...
(I found "stat.o" inside this library, extracted that and got some other
undefined symbols - so I decided to link the whole libc.a)
But now my mod_python.so is somewhat over 300k in size - is this too much?

Another problem: My IExplorer downloads test.py for some reasons...
(I got it working for some time but now the script won't be executed!)

>
> Check this web page out: http://jarre.pair.com/insadmin/gerhard/
>
> Perhaps Gerhard could update his Suse RPM's to 2.4.1?
>
> Grisha
>
>
> On Mon, 24 Jul 2000, Denys Bogatz wrote:
>
> > Thanx!
> >
> > I tried to find the lib with:
> > ar -x /usr/local/lib/.../libgcc.a stat.o
> > ...but I haven't found it! :-(
> >
> > As I wrote I'm kindly new on Linux, so I've got no idea
> where to search for
> > it...
> >
> > Bye, Denys!
> > (I may try to solve the problem by building my own version
> of python (still
> > using the version supplied by SuSE6.2) - maybe that will work!?)


From grisha at ispol.com  Tue Jul 25 08:48:03 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:52:03 2004
Subject: AW: AW: [mod_python] undefined symbol: stat solved!
In-Reply-To: <005501bff60e$f9ee9200$876be2c3@cinetic.de>
Message-ID: <Pine.LNX.4.21.0007250844250.19360-100000@saturn.ispol.com>

On Tue, 25 Jul 2000, Denys Bogatz wrote:

> 
> I solved the problem by linking /usr/lib/modules/2.2.10/libc.a within
> mod_python...
>
> (I found "stat.o" inside this library, extracted that and got some
> other undefined symbols - so I decided to link the whole libc.a) But
> now my mod_python.so is somewhat over 300k in size - is this too much?

to make it smaller, you can try something like:

ar x /usr/lib/modules/2.2.10/libc.a stat.o

then add stat.o as an argument to your apxs command.

> Another problem: My IExplorer downloads test.py for some reasons...
> (I got it working for some time but now the script won't be executed!)

This has nothing to do with explorer. You're missing your set-handler
directive, perhaps AllowOverride isn't FileInfo for that directory.

Grisha


From iny at iki.fi  Tue Jul 25 17:58:41 2000
From: iny at iki.fi (Ilpo =?iso-8859-1?q?Nyyss=F6nen?=)
Date: Fri Jan  9 21:52:03 2004
Subject: AW: AW: [mod_python] undefined symbol: stat solved!
In-Reply-To: Gregory Trubetskoy's message of "Tue, 25 Jul 2000 08:48:03 -0400 (EDT)"
References: <Pine.LNX.4.21.0007250844250.19360-100000@saturn.ispol.com>
Message-ID: <m3hf9e45pa.fsf@ypy.tky.hut.fi>

Gregory Trubetskoy <grisha@ispol.com> writes:

> On Tue, 25 Jul 2000, Denys Bogatz wrote:
> 
> > I solved the problem by linking /usr/lib/modules/2.2.10/libc.a within
> > mod_python...
> >
> > (I found "stat.o" inside this library, extracted that and got some
> > other undefined symbols - so I decided to link the whole libc.a) But
> > now my mod_python.so is somewhat over 300k in size - is this too much?
> 
> to make it smaller, you can try something like:
> 
> ar x /usr/lib/modules/2.2.10/libc.a stat.o
> 
> then add stat.o as an argument to your apxs command.

Or even add -lc to the apxs command. That is what I did, but I still
have that problem with urllib I wrote about.

-- 
Ilpo Nyyss?nen # biny
/* :-) */

From Daniel.Plagge at tu-clausthal.de  Fri Jul 28 14:26:27 2000
From: Daniel.Plagge at tu-clausthal.de (Daniel Plagge)
Date: Fri Jan  9 21:52:03 2004
Subject: [mod_python] compile errors on solaris
Message-ID: <20000728142627.A742@wintermute.esw-heim.tu-clausthal.de>

Hello,

on Solaris the Sun-C-compiler complaints about some syntax errors,
mainly because C++ syntax is used. I append a trivial patch which
should solve the problem, so later versions of mod_python could
compile out of the box. :)

Bye,
Daniel





*** mod_python.c.orig	Fri Jul 28 12:32:52 2000
--- mod_python.c	Fri Jul 28 12:52:50 2000
***************
*** 600,606 ****
  static int tablelength(tableobject *self) 
  { 
      return ap_table_elts(self->table)->nelts;
! };
  
  /**
   ** tablesetitem
--- 600,606 ----
  static int tablelength(tableobject *self) 
  { 
      return ap_table_elts(self->table)->nelts;
! }
  
  /**
   ** tablesetitem
***************
*** 638,644 ****
  	ap_table_set(self->table, k, PyString_AsString(val));
      }
      return 0;
! };
  
  /**
   ** tb_setitem
--- 638,644 ----
  	ap_table_set(self->table, k, PyString_AsString(val));
      }
      return 0;
! }
  
  /**
   ** tb_setitem
***************
*** 2253,2260 ****
  	    char *module = elts[i].key;
  	    char *dir = elts[i].val;
  
! 	    // XXXXXX PythonInterpreter!!!
! 	    // This needs to be addressed in config_merge?
  	    interpreter = dir;
  
  #ifdef WITH_THREAD  
--- 2253,2260 ----
  	    char *module = elts[i].key;
  	    char *dir = elts[i].val;
  
! 	    /* XXXXXX PythonInterpreter!!! */
! 	    /* This needs to be addressed in config_merge? */
  	    interpreter = dir;
  
  #ifdef WITH_THREAD  
***************
*** 2355,2361 ****
      return python_handler(req, "PythonLogHandler");
  }
  static void PythonChildExitHandler(server_rec *srv, pool *p) {
!     // printf("In ExitHandler\n");
  }
  
  
--- 2355,2361 ----
      return python_handler(req, "PythonLogHandler");
  }
  static void PythonChildExitHandler(server_rec *srv, pool *p) {
!   /* printf("In ExitHandler\n"); */
  }
  
  

From richard at whitequeen.com  Sun Jul  2 11:39:38 2000
From: richard at whitequeen.com (richard offer)
Date: Fri Jan  9 21:58:33 2004
Subject: [mod_python] *Occasional* AttributeError: Handler
Message-ID: <200007021839.e62Idc503947@erij.whitequeen.com>

Hi, its me again :-)

I've started getting the occasional 

[Sun Jul  2 11:13:46 2000] [error] PythonHandler index: Traceback (innermost last):
[Sun Jul  2 11:13:46 2000] [error] PythonHandler index:   File "/usr/local/lib/python1.5/site-packages/mod_python/apache.py", line 96, in Dispatch
    object = self.resolve_object(module, object_str)
[Sun Jul  2 11:13:46 2000] [error] PythonHandler index:   File "/usr/local/lib/python1.5/site-packages/mod_python/apache.py", line 42, in resolve_object
    obj = getattr(obj, obj_str)
[Sun Jul  2 11:13:46 2000] [error] PythonHandler index: AttributeError: handler


By occasional I mean I've got a page that loads lots of images from a
MySQL DB. Each image is a separate request. Most appear, but ~15%
don't. Hitting reload sometimes works, sometimes its a different set of
images that don't load.

This was working on the development server, moving across to the
production server I had to change the database access mechanism (from a
unix domain socket to a full inet socket (chroot) , and the production's
version of python is not threaded).


If anyone wants to check the failure mode of the site out its
alfieireland.com/scrapbook/.  I'll make the code available if anyone
can be bothered enough to ask for it. (this is a family site---neither
the site or the connection is designed for the /. effect, please don't
hurt it :-)

richard.

-- 
richard offer @ home 
          84 FE 48 E4 74 D0 26 D4  31 8E B6 86 98 74 E2 7C  8A FB BF A3
___________________________________http://216.185.15.144/users/richard/

From grisha at ispol.com  Sun Jul  2 19:43:37 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:33 2004
Subject: [mod_python] *Occasional* AttributeError: Handler
In-Reply-To: <200007021839.e62Idc503947@erij.whitequeen.com>
Message-ID: <Pine.LNX.4.21.0007021938400.30520-100000@saturn.ispol.com>

Interestingly enough, when I try it, I get all the pictures loaded fine. I
wonder if this has something to do with the speed of the link - mine is
64K ISDN.

I have a theory - 

I think that sometimes the "AttributeError: handler" message can be
misleading, when there was an error importing the module. Your module
seems to try to open a connection in-line:

db = MySQLdb.connect(host=host, user=user, passwd=passwd, db="scrapbook")

This can fail sometimes, and I think after that you get the misleading
error. Make sure that the MaxClients setting for Apache does not exceed
the maximum number of allowed connections for your MySQL server.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Sun, 2 Jul 2000, richard offer wrote:

> Hi, its me again :-)
> 
> I've started getting the occasional 
> 
> [Sun Jul  2 11:13:46 2000] [error] PythonHandler index: Traceback (innermost last):
> [Sun Jul  2 11:13:46 2000] [error] PythonHandler index:   File "/usr/local/lib/python1.5/site-packages/mod_python/apache.py", line 96, in Dispatch
>     object = self.resolve_object(module, object_str)
> [Sun Jul  2 11:13:46 2000] [error] PythonHandler index:   File "/usr/local/lib/python1.5/site-packages/mod_python/apache.py", line 42, in resolve_object
>     obj = getattr(obj, obj_str)
> [Sun Jul  2 11:13:46 2000] [error] PythonHandler index: AttributeError: handler
> 
> 
> By occasional I mean I've got a page that loads lots of images from a
> MySQL DB. Each image is a separate request. Most appear, but ~15%
> don't. Hitting reload sometimes works, sometimes its a different set of
> images that don't load.
> 
> This was working on the development server, moving across to the
> production server I had to change the database access mechanism (from a
> unix domain socket to a full inet socket (chroot) , and the production's
> version of python is not threaded).
> 
> 
> If anyone wants to check the failure mode of the site out its
> alfieireland.com/scrapbook/.  I'll make the code available if anyone
> can be bothered enough to ask for it. (this is a family site---neither
> the site or the connection is designed for the /. effect, please don't
> hurt it :-)
> 
> richard.
> 
> -- 
> richard offer @ home 
>           84 FE 48 E4 74 D0 26 D4  31 8E B6 86 98 74 E2 7C  8A FB BF A3
> ___________________________________http://216.185.15.144/users/richard/
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 



From iny at iki.fi  Tue Jul  4 16:58:02 2000
From: iny at iki.fi (Ilpo =?iso-8859-1?q?Nyyss=F6nen?=)
Date: Fri Jan  9 21:58:33 2004
Subject: [mod_python] httplib: [notice] child pid 8937 exit signal Segmentation fault (11)
Message-ID: <m3k8f2q9p1.fsf@iki.fi>

I tried to use urllib to retrieve some pictures dynamically, but the
child dies with segmentation fault. This happens also with httplib,
for example with the code below. The dying seems to happen when
closing the connection.

-- clip --
from mod_python import apache
import httplib

def handler(req):
    req.content_type = 'text/plain'
    req.send_http_header()
    
    h = httplib.HTTP('www.python.org')
    h.putrequest('GET', '/index.html')
    h.putheader('Accept', 'text/html')
    h.putheader('Accept', 'text/plain')
    h.endheaders()
    errcode, errmsg, headers = h.getreply()
    if errcode == 200:
        f = h.getfile()
        req.write(f.read())

    return apache.OK
-- clip --

-- 
Ilpo Nyyss?nen # biny
/* :-) */

From grisha at ispol.com  Tue Jul  4 12:11:22 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:33 2004
Subject: [mod_python] httplib: [notice] child pid 8937 exit signal
 Segmentation fault (11)
In-Reply-To: <m3k8f2q9p1.fsf@iki.fi>
Message-ID: <Pine.LNX.4.21.0007041158540.5022-100000@saturn.ispol.com>

Ilpo -

The code below worked for me without a hinch. This is on FreeBSD 4.0
Stable, Apache 1.3.12.

Anyone else on this list experiences this problem?

Grisha

On 4 Jul 2000, Ilpo Nyyss?nen wrote:

> 
> I tried to use urllib to retrieve some pictures dynamically, but the
> child dies with segmentation fault. This happens also with httplib,
> for example with the code below. The dying seems to happen when
> closing the connection.
> 
> -- clip --
> from mod_python import apache
> import httplib
> 
> def handler(req):
>     req.content_type = 'text/plain'
>     req.send_http_header()
>     
>     h = httplib.HTTP('www.python.org')
>     h.putrequest('GET', '/index.html')
>     h.putheader('Accept', 'text/html')
>     h.putheader('Accept', 'text/plain')
>     h.endheaders()
>     errcode, errmsg, headers = h.getreply()
>     if errcode == 200:
>         f = h.getfile()
>         req.write(f.read())
> 
>     return apache.OK
> -- clip --
> 
> -- 
> Ilpo Nyyss?nen # biny
> /* :-) */
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From grisha at ispol.com  Tue Jul  4 14:10:24 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:33 2004
Subject: [mod_python] US Independence Day release - 2.4.1
Message-ID: <Pine.LNX.4.21.0007041400470.5320-100000@saturn.ispol.com>

2.4.1, which is basically a couple of bugs fixed is available for
download.

For win32 users, the 2.4 DLL currently available for download should be
identical to 2.4.1, but you may want to update your apache.py file.

BTW, if there are any Win32 mod_python users out there - could you drop me
an e-mail? I'm just curious as to the actual number.

Happy 4th of July (to those who care about it)!

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com


From iny at iki.fi  Tue Jul  4 21:21:57 2000
From: iny at iki.fi (=?ISO-8859-1?Q?Ilpo_Nyyss=F6nen?=)
Date: Fri Jan  9 21:58:33 2004
Subject: [mod_python] httplib: [notice] child pid 8937 exit signal
 Segmentation fault (11)
In-Reply-To: <Pine.LNX.4.21.0007041158540.5022-100000@saturn.ispol.com>
Message-ID: <Pine.LNX.4.21.0007042112130.10834-200000@ypy.tky.hut.fi>

On Tue, 4 Jul 2000, Gregory Trubetskoy wrote:

> 
> Ilpo -
> 
> The code below worked for me without a hinch. This is on FreeBSD 4.0
> Stable, Apache 1.3.12.
> 
> Anyone else on this list experiences this problem?
> 
> Grisha
> 
> On 4 Jul 2000, Ilpo Nyyss?nen wrote:
> 
> > 
> > I tried to use urllib to retrieve some pictures dynamically, but the
> > child dies with segmentation fault. This happens also with httplib,
> > for example with the code below. The dying seems to happen when
> > closing the connection.

I forgot to mention that I have Apache 1.3.12 (this was just upgraded) in
Linux 2.2.13 (Red Hat).

I also attached a strace that I took few weeks ago.

-- 
Ilpo Nyyss?nen # biny
/* :-) */

-------------- next part --------------
socket(PF_INET, SOCK_DGRAM, IPPROTO_IP) = 6
connect(6, {sin_family=AF_INET, sin_port=htons(53), sin_addr=inet_addr("130.233.224.1")}, 16) = 0
send(6, "Z\355\1\0\0\1\0\0\0\0\0\0\3www\3"..., 28, 0) = 28
SYS_168(0xbfffd9b8, 0x1, 0x1388, 0x1388, 0xbfffd9b8) = 1
recvfrom(6, "Z\355\205\200\0\1\0\1\0\3\0\3\3w"..., 1024, 0, {sin_family=AF_INET, sin_port=htons(53), sin_addr=inet_addr("130.233.224.1")}, [16]) = 167
close(6)                                = 0
connect(5, {sin_family=AF_INET, sin_port=htons(80), sin_addr=inet_addr("130.233.220.31")}, 16) = 0
send(5, "GET / HTTP/1.0\r\n", 16, 0)    = 16
send(5, "Host: www.hut.fi\r\n", 18, 0)  = 18
send(5, "User-agent: Python-urllib/1.10\r"..., 32, 0) = 32
send(5, "\r\n", 2, 0)                   = 2
dup(5)                                  = 6
fcntl(6, F_GETFL)                       = 0x2 (flags O_RDWR)
fstat(6, {st_mode=033526, st_size=0, ...}) = 0
mmap(0, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x40615000
_llseek(0x6, 0, 0, 0xbffff1e4, 0x1)     = -1 ESPIPE (Illegal seek)
read(6, "HTTP/1.1 200 OK\r\nDate: Mon, 19"..., 1024) = 1024
close(5)                                = 0
connect(-1073745952, {...}, 1075363008) = 23
getpid()                                = 28286
open("/usr/tmp/@28286.test", O_WRONLY|O_CREAT|O_TRUNC, 0666) = 5
fstat(5, {st_mode=S_IFDIR|S_ISUID|0606, st_size=0, ...}) = 0
mmap(0, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x40618000
write(5, "blat", 4)                     = 4
close(5)                                = 0
munmap(0x40618000, 4096)                = 0
unlink("/usr/tmp/@28286.test")          = 0
getpid()                                = 28286
stat("/usr/tmp/@28286.1", 0xbffff318)   = -1 ENOENT (No such file or directory)
open("/usr/tmp/@28286.1", O_WRONLY|O_CREAT|O_TRUNC, 0666) = 5
brk(0x81a5000)                          = 0x81a5000
read(6, " href=\"http://www.hut.fi/Ajanko"..., 1024) = 875
read(6, "", 1024)                       = 0
fstat(5, {st_mode=S_IFDIR|S_ISUID|0606, st_size=0, ...}) = 0
mmap(0, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x40618000
read(6, "", 1024)                       = 0
close(6)                                = 0
munmap(0x40615000, 4096)                = 0
--- SIGSEGV (Segmentation fault) ---
chdir("/tmp")                           = 0
SYS_174(0xb, 0xbffff0bc, 0xbffff030, 0x8, 0xb) = 0
getpid()                                = 28286
kill(28286, SIGSEGV)                    = 0
sigreturn()                             = ? (mask now [])
--- SIGSEGV (Segmentation fault) ---
From morten at src.no  Sat Jul  8 14:43:59 2000
From: morten at src.no (Morten W. Petersen)
Date: Fri Jan  9 21:58:33 2004
Subject: [mod_python] Compiling on a Debian Potato with Apache binary (and apache-dev)
Message-ID: <Pine.LNX.4.21.0007081440220.31744-100000@lade.src.no>

I'm having problems compiling mod_python on a Debian 2.1; can anyone send
me a line that worked from them, compiling off of an Apache binary release
with apache-dev installed?

-Morten

-------------------------------------------------------------
How to reply to email:
  http://home.sol.no/~vidaandr/news/OBSquoting.html (norsk)
  http://home.sol.no/~vidaandr/news/FAQquoting.html (english)

Who is the bigger fool? The fool or the fool who follows him?


From richard at whitequeen.com  Thu Jul  6 21:13:04 2000
From: richard at whitequeen.com (richard offer)
Date: Fri Jan  9 21:58:34 2004
Subject: [mod_python] [ANN] slashbox - class to get/display slashdot.org news stories
Message-ID: <200007070413.e674D4510370@erij.whitequeen.com>

Hi,

Here's a quick hack of a class to get and format news stories from a
number of sites.

It was designed with mod_python in mind, so all you need to do is

import slashbox
...

def handler(req):
	...
    req.write(str(slashbox.Slashdot()))

To add the latest stories from slashdot to your page.

A number of other sites are included, its easy to add new ones simply
by sub-classing slashbox. The trick is to find the sites .rss/.rdf file.


You'll need the latest PyXML code.



richard.




# $Id: slashbox.py,v 1.2 2000/07/08 21:34:46 richard Exp $
# Copyright (c) 2000 Richard Offer <richard@whitequeen.com>. 
# All rights reserved.
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
# 
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
# 
# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL 
# Richard Offer BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN
# AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
# CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
# 
# Except as contained in this notice, the name of Richard Offer shall not be
# used in advertising or otherwise to promote the sale, use or other dealings
# in this Software without prior written authorization from Richard Offer.



#
#
# A python class to grab the Slashdot (and other sites using RSS/RDF) stories.


import stat
import xmllib
import urllib
import urlparse
import os
import time
import string
import sys
from xml.sax import saxlib,saxexts

class _myrdf(saxlib.HandlerBase):
	def __init__(self):
		self._in={}
		self._in["title"]=0
		self._in["link"]=0
		self._in["description"]=0
		self._txt={}
		self._txt["title"]=""
		self._txt["link"]=""
		self._txt["description"]=""

		self._stories=[]


	def startElement(self,ele,attr):
		if ele == 'item' :
			self._txt={}
			self._txt["title"]=""
			self._txt["link"]=""
			self._txt["description"]=""
		elif self._in.has_key(ele) :
			self._in[ele]=1
			
		else:
			pass

	def endElement(self,ele):
		if self._in.has_key(ele) :
			self._in[ele] = 0
			self._txt[ele] = string.join(string.split((self._txt[ele])))
		elif ele == 'item'  :
			self._stories.append(self._txt)

			
	
	def characters(self,ch,start,length):
		for i in self._in.keys():
				if self._in[i] == 1:
					self._txt[i] = self._txt[i] + ch[start:start+length]

	def stories(self):
		return self._stories

# class Site()

class slashbox:
	"""
Create a single slashbox.
  slashbox(url,freq)
		url is the url of the RSS/RDF file, freq is the update period (mins).
		The freq cannot be less than 30
  raw() 
		returns a list of stories (each story is stored in a dict).
  __str__() 
		returns a HTML table containing the stories.

Several subclasses are available, these already have the url defined,
so to get the headlines from slashdot.org simply do


>>> print Slashdot()

The list of built-in sites is 

	Slashdot()
	Freshmeat()
	SecurityFocus()
	Parnassus()
	LWN()
	Fool()
	LinuxNetNews()
	SourceForgeReleases()
	SourceForgeNews()


If you are using mod_python, you can embed a slashbox simply by

import slashbox
...

	req.write(str(slashbox.Slashdot()))


"""
	def __init__(self, url='http://slashdot.org/slashdot.rdf', freq=60):
		self._url=url
		if freq < 30:
			freq=30
		self._freq=freq
		_u=urlparse.urlparse(self._url)
		self._file=_u[1] + "-" + os.path.basename(url)
		if self._file == '':
			self._file = os.path.basename(url)

		self._file = "/tmp/slashbox-" + self._file

		self.site= _u[0]+ "://" + _u[1] + "/"
		self.name= _u[1]
		
		try:
			st=os.stat(self._file)
			if st[8] < ( time.time() - (self._freq*60) ):
				(fname,headers)=urllib.urlretrieve(self._url, self._file)	
		except OSError:
			(fname,headers)=urllib.urlretrieve(self._url,self._file)	

		fp=open(self._file)

		xmlp=saxexts.make_parser()

		self.dh=_myrdf()
		xmlp.setDocumentHandler(self.dh)
		xmlp.parseFile(fp)

	def stories(self):
		return self.dh.stories()
		

	def __str__(self):
		str="<SMALL>\n<TABLE BORDER=2 WIDTH=200>\n"
		str=str + '<TH><A HREF="%s">%s</A></TH>\n' % ( self.site,
				self.name )
		str=str + "<TR><TD>\n  <TABLE><TBODY>\n" 

		for i in self.dh.stories():
			str=str + '    <TR><TD><A HREF="%s">%s</A>' % ( i['link'],i['title'] )
			if i.has_key("description"):
				str=str + "<BR><SMALL>%s</SMALL>" % ( i['description'])
			str=str + '</TD></TR>\n' 
		str=str+"  </TBODY></TABLE></TD></TR>\n</TABLE></SMALL>\n\n"
		return str
		
	def setName(self,name):
		self.name=name



class Slashdot(slashbox):
	"""slashbox sub-class for Slashdot.org"""
	def __init__(self):
		_url='http://slashdot.org/slashdot.rdf'
		slashbox.__init__(self,url=_url)
		self.setName('Slashdot')

class Freshmeat(slashbox):
	"""slashbox sub-class for Freshmeat.net"""
	def __init__(self):
		_url='http://freshmeat.net/backend/fm.rdf'
		slashbox.__init__(self,url=_url)
		self.setName('Freshmeat')

class SecurityFocus(slashbox):
	"""slashbox sub-class for SecurityFocus.com"""
	def __init__(self):
		_url='http://www.securityfocus.com/topnews-rss.html'
		slashbox.__init__(self,url=_url)
		self.setName('Security Focus')

class Parnassus(slashbox):
	"""slashbox sub-class for the Vaults of Parnassus"""
	def __init__(self):
		_url='http://www.vex.net/parnassus/parnassus.rss'
		slashbox.__init__(self,url=_url)
		self.setName('Vaults of Parnassus')

class LWN(slashbox):
	"""slashbox sub-class for the Linux Weekly News"""
	def __init__(self):
		_url='http://lwn.net/headlines/rss'
		slashbox.__init__(self,url=_url)
		self.setName('Linux Weekly News')


class Fool(slashbox):
	"""slashbox sub-class for the Motley Fool"""
	def __init__(self):
		_url='http://www.fool.com/About/headlines/rss_headlines.asp'
		slashbox.__init__(self,url=_url)
		self.setName('The Motley Fool')

class LinuxNetNews(slashbox):
	"""slashbox sub-class for Linux Net News"""
	def __init__(self):
		_url='http://www.netnews.opensrc.org/index.rdf'
		slashbox.__init__(self,url=_url)
		self.setName('Linux Net News')

class SourceForgeReleases(slashbox):
	"""slashbox sub-class for new releases on SourceForge"""
	def __init__(self):
		_url='http://sourceforge.net/export/rss_sfnewreleases.php'
		slashbox.__init__(self,url=_url)
		self.setName('Sourceforge New Releases')

class SourceForgeNews(slashbox):
	"""slashbox sub-class for Project News at SourceForge"""
	def __init__(self):
		_url='http://sourceforge.net/export/rss_sfnews.php'
		slashbox.__init__(self,url=_url)
		self.setName('Sourceforge News')



if __name__ == "__main__":

	print Slashdot()	

-- 
richard offer @ home 
          84 FE 48 E4 74 D0 26 D4  31 8E B6 86 98 74 E2 7C  8A FB BF A3
___________________________________http://216.185.15.144/users/richard/

From martin at src.no  Sun Jul  9 02:40:41 2000
From: martin at src.no (Martin Jenssen)
Date: Fri Jan  9 21:58:34 2004
Subject: [mod_python] Compiling on a Debian Potato with Apache binary
 (and apache-dev)
In-Reply-To: <Pine.LNX.4.21.0007081440220.31744-100000@lade.src.no>
Message-ID: <Pine.LNX.4.21.0007090231050.9988-100000@lade.src.no>

On Sat, 8 Jul 2000, Morten W. Petersen wrote:

> I'm having problems compiling mod_python on a Debian 2.1; can anyone send
> me a line that worked from them, compiling off of an Apache binary release
> with apache-dev installed?

I am running Debian GNU/Linux 2.2 (potato), and have the following
packages installed:

	apache 1.3.12-1
	apache-common 1.3.12-1
	apache-dev 1.3.12-1

To compile this, I just did it via the method mentioned in the
documentation (as a Apache DSO):

	apxs -I /usr/include/python1.5 -c mod_python.c \
	/usr/lib/python1.5/config/libpython1.5.a -lpthread

Then I copied the mod_python.so file to /usr/lib/apache/1.3/ and added the
following line *before* any other `LoadModule'-line in
/etc/apache/httpd.conf:

	LoadModule python_module /usr/lib/apache/1.3/mod_python.so

The rest is in the documentation.  By the way, I used the official 2.4.1
release.


Martin Jenssen



From erno at iki.fi  Sun Jul  9 03:49:08 2000
From: erno at iki.fi (Erno Kuusela)
Date: Fri Jan  9 21:58:34 2004
Subject: [mod_python] Compiling on a Debian Potato with Apache binary (and apache-dev)
In-Reply-To: <Pine.LNX.4.21.0007090231050.9988-100000@lade.src.no>; from martin@src.no on Sun, Jul 09, 2000 at 02:40:41AM +0200
References: <Pine.LNX.4.21.0007081440220.31744-100000@lade.src.no> <Pine.LNX.4.21.0007090231050.9988-100000@lade.src.no>
Message-ID: <20000709034908.F8149@lib.hel.fi>

| I am running Debian GNU/Linux 2.2 (potato) [...]

| To compile this, I just did it via the method mentioned in the
| documentation (as a Apache DSO):
| 
| 	apxs -I /usr/include/python1.5 -c mod_python.c \
| 	/usr/lib/python1.5/config/libpython1.5.a -lpthread

the debian-packaged python also comes with a shared library,
so linking with -lpython1.5 instead will save you some
disk space and pehaps ram.

  -- erno

From morten at src.no  Sun Jul  9 11:54:56 2000
From: morten at src.no (Morten W. Petersen)
Date: Fri Jan  9 21:58:34 2004
Subject: [mod_python] Compiling on a Debian Potato with Apache binary
 (and apache-dev)
In-Reply-To: <Pine.LNX.4.21.0007090231050.9988-100000@lade.src.no>
Message-ID: <Pine.LNX.4.21.0007091153470.27686-100000@lade.src.no>

> To compile this, I just did it via the method mentioned in the
> documentation (as a Apache DSO):
> 
> 	apxs -I /usr/include/python1.5 -c mod_python.c \
> 	/usr/lib/python1.5/config/libpython1.5.a -lpthread

gaffel:/tmp/mod_python-2.4.1/src# gcc -DLINUX=2 -DUSE_HSREGEX -fpic \
	-DSHARED_MODULE -I/usr/include/apache-1.3 \
	-I/usr/include/python1.5 -c mod_python.c
mod_python.c:418: structure has no member named `vlist_validator'
mod_python.c:418: initializer element for `request_memberlist[29].offset'
is not constant

----
And now I'm a bit off. (...) Any ideas?

Regards, Morten


From michael at stroeder.com  Sun Jul  9 13:20:20 2000
From: michael at stroeder.com (Michael =?iso-8859-1?Q?Str=C3=B6der?=)
Date: Fri Jan  9 21:58:34 2004
Subject: [mod_python] mod_python, HTTP headers and CRLF
Message-ID: <39685FF4.246ED56F@stroeder.com>

HI!

I experienced some problems with sending HTTP headers. I'm
generating HTTP header lines separated with \r\n since HTTP standard
1.0 says in section 4.2 "Message Headers":

----------------------------- snip ------------------------------
       HTTP-header    = field-name ":" [ field-value ] CRLF
----------------------------- snip ------------------------------

In apache.py class CGIStdout method write() the headers are splitted
by using \n\n as separator which fails if scripts are sending header
conform to HTTP specs above. Here's a patch by using \r\n\r\n as
second possible
separator:

----------------------------- snip ------------------------------
395a396,400
> 
>             if len(ss) < 2:
>               # Second try with splitting by using \r\n\r\n as separator
>               ss = string.split(self.headers, '\r\n\r\n', 1)
> 
----------------------------- snip ------------------------------

Would be nice if this patch makes its way into the mod_python
distribution.

Ciao, Michael.

From martin at src.no  Sun Jul  9 15:27:12 2000
From: martin at src.no (Martin Jenssen)
Date: Fri Jan  9 21:58:34 2004
Subject: [mod_python] Compiling on a Debian Potato with Apache binary (and apache-dev)
In-Reply-To: <Pine.LNX.4.21.0007091153470.27686-100000@lade.src.no>; from morten@src.no on Sun, Jul 09, 2000 at 11:54:56AM +0200
References: <Pine.LNX.4.21.0007090231050.9988-100000@lade.src.no> <Pine.LNX.4.21.0007091153470.27686-100000@lade.src.no>
Message-ID: <20000709152712.A1317@localhost>

On Sun, Jul 09, 2000 at 11:54:56AM +0200, Morten W. Petersen wrote:

| gaffel:/tmp/mod_python-2.4.1/src# gcc -DLINUX=2 -DUSE_HSREGEX -fpic \
| 	-DSHARED_MODULE -I/usr/include/apache-1.3 \
| 	-I/usr/include/python1.5 -c mod_python.c
| mod_python.c:418: structure has no member named `vlist_validator'
| mod_python.c:418: initializer element for `request_memberlist[29].offset'
| is not constant

It seems that you are using an older collection of the apache C header
files.  Check if your /usr/include/apache-1.3/httpd.h have a line
defining vlist_validator.


Martin Jenssen


From grisha at ispol.com  Mon Jul 10 08:13:21 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:34 2004
Subject: [mod_python] mod_python, HTTP headers and CRLF
In-Reply-To: <39685FF4.246ED56F@stroeder.com>
Message-ID: <Pine.LNX.4.21.0007100812370.5519-100000@saturn.ispol.com>

This is clearly a bug and I'll make sure it's fixed. Thanks for pointing
it out.

Grisha

On Sun, 9 Jul 2000, Michael Str??der wrote:

> HI!
> 
> I experienced some problems with sending HTTP headers. I'm
> generating HTTP header lines separated with \r\n since HTTP standard
> 1.0 says in section 4.2 "Message Headers":
> 
> ----------------------------- snip ------------------------------
>        HTTP-header    = field-name ":" [ field-value ] CRLF
> ----------------------------- snip ------------------------------
> 
> In apache.py class CGIStdout method write() the headers are splitted
> by using \n\n as separator which fails if scripts are sending header
> conform to HTTP specs above. Here's a patch by using \r\n\r\n as
> second possible
> separator:
> 
> ----------------------------- snip ------------------------------
> 395a396,400
> > 
> >             if len(ss) < 2:
> >               # Second try with splitting by using \r\n\r\n as separator
> >               ss = string.split(self.headers, '\r\n\r\n', 1)
> > 
> ----------------------------- snip ------------------------------
> 
> Would be nice if this patch makes its way into the mod_python
> distribution.
> 
> Ciao, Michael.
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From list-modpython at ccraig.org  Tue Jul 11 22:23:10 2000
From: list-modpython at ccraig.org (list-modpython@ccraig.org)
Date: Fri Jan  9 21:58:34 2004
Subject: [mod_python] Segfault on Apache Startup
Message-ID: <m3lmz8dr3l.fsf@elbereth.ccraig.org>

#LoadModule mmap_static_module modules/mod_mmap_static.so
LoadModule python_module modules/mod_python.so
LoadModule vhost_alias_module modules/mod_vhost_alias.so
LoadModule env_module         modules/mod_env.so
LoadModule config_log_module  modules/mod_log_config.so
LoadModule agent_log_module   modules/mod_log_agent.so
LoadModule referer_log_module modules/mod_log_referer.so
#LoadModule mime_magic_module  modules/mod_mime_magic.so
LoadModule mime_module        modules/mod_mime.so
LoadModule negotiation_module modules/mod_negotiation.so
LoadModule status_module      modules/mod_status.so
LoadModule info_module        modules/mod_info.so
LoadModule includes_module    modules/mod_include.so
LoadModule autoindex_module   modules/mod_autoindex.so
LoadModule dir_module         modules/mod_dir.so
LoadModule cgi_module         modules/mod_cgi.so
LoadModule asis_module        modules/mod_asis.so
LoadModule imap_module        modules/mod_imap.so
LoadModule action_module      modules/mod_actions.so
#LoadModule speling_module     modules/mod_speling.so
LoadModule userdir_module     modules/mod_userdir.so
LoadModule alias_module       modules/mod_alias.so
LoadModule rewrite_module     modules/mod_rewrite.so
LoadModule access_module      modules/mod_access.so
LoadModule auth_module        modules/mod_auth.so
LoadModule anon_auth_module   modules/mod_auth_anon.so
LoadModule db_auth_module     modules/mod_auth_db.so
LoadModule digest_module      modules/mod_digest.so
LoadModule proxy_module       modules/libproxy.so
#LoadModule cern_meta_module   modules/mod_cern_meta.so
LoadModule expires_module     modules/mod_expires.so
LoadModule headers_module     modules/mod_headers.so
LoadModule usertrack_module   modules/mod_usertrack.so
#LoadModule example_module     modules/mod_example.so
#LoadModule unique_id_module   modules/mod_unique_id.so
LoadModule setenvif_module    modules/mod_setenvif.so
#LoadModule bandwidth_module   modules/mod_bandwidth.so
#LoadModule put_module		modules/mod_put.so

# Extra Modules
#LoadModule perl_module        modules/libperl.so
#LoadModule php_module         modules/mod_php.so
#LoadModule php3_module        modules/libphp3.so


#  Reconstruction of the complete module list from all available modules
#  (static and shared ones) to achieve correct module execution order.
#  [WHENEVER YOU CHANGE THE LOADMODULE SECTION ABOVE UPDATE THIS, TOO]
ClearModuleList
AddModule mod_python.c
#AddModule mod_mmap_static.c
AddModule mod_vhost_alias.c
AddModule mod_env.c
AddModule mod_log_config.c
AddModule mod_log_agent.c
AddModule mod_log_referer.c
#AddModule mod_mime_magic.c
AddModule mod_mime.c
AddModule mod_negotiation.c
AddModule mod_status.c
AddModule mod_info.c
AddModule mod_include.c
AddModule mod_autoindex.c
AddModule mod_dir.c
AddModule mod_cgi.c
AddModule mod_asis.c
AddModule mod_imap.c
AddModule mod_actions.c
#AddModule mod_speling.c
AddModule mod_userdir.c
AddModule mod_alias.c
AddModule mod_rewrite.c
AddModule mod_access.c
AddModule mod_auth.c
AddModule mod_auth_anon.c
AddModule mod_auth_db.c
AddModule mod_digest.c
AddModule mod_proxy.c
#AddModule mod_cern_meta.c
AddModule mod_expires.c
AddModule mod_headers.c
AddModule mod_usertrack.c
#AddModule mod_example.c
#AddModule mod_unique_id.c
AddModule mod_so.c
AddModule mod_setenvif.c
#AddModule mod_bandwidth.c
#AddModule mod_put.c

# Extra Modules
#AddModule mod_perl.c
#AddModule mod_php.c
#AddModule mod_php3.c
-------------- next part --------------
GNU gdb 4.18
Copyright 1998 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "i386-redhat-linux"...
(no debugging symbols found)...
Core was generated by `httpd -X'.
Program terminated with signal 11, Segmentation fault.
Reading symbols from /lib/libm.so.6...done.
Reading symbols from /lib/libcrypt.so.1...done.
Reading symbols from /lib/libdb.so.3...done.
Reading symbols from /lib/libdl.so.2...done.
Reading symbols from /lib/libc.so.6...done.
Reading symbols from /lib/ld-linux.so.2...done.
Reading symbols from /lib/libnss_files.so.2...done.
Reading symbols from /etc/httpd/modules/mod_python.so...done.
Reading symbols from /lib/libpthread.so.0...done.
Reading symbols from /etc/httpd/modules/mod_vhost_alias.so...done.
Reading symbols from /etc/httpd/modules/mod_env.so...done.
Reading symbols from /etc/httpd/modules/mod_log_config.so...done.
Reading symbols from /etc/httpd/modules/mod_log_agent.so...done.
Reading symbols from /etc/httpd/modules/mod_log_referer.so...done.
Reading symbols from /etc/httpd/modules/mod_mime.so...done.
Reading symbols from /etc/httpd/modules/mod_negotiation.so...done.
Reading symbols from /etc/httpd/modules/mod_status.so...done.
Reading symbols from /etc/httpd/modules/mod_info.so...done.
Reading symbols from /etc/httpd/modules/mod_include.so...done.
Reading symbols from /etc/httpd/modules/mod_autoindex.so...done.
Reading symbols from /etc/httpd/modules/mod_dir.so...done.
Reading symbols from /etc/httpd/modules/mod_cgi.so...done.
Reading symbols from /etc/httpd/modules/mod_asis.so...done.
Reading symbols from /etc/httpd/modules/mod_imap.so...done.
Reading symbols from /etc/httpd/modules/mod_actions.so...done.
Reading symbols from /etc/httpd/modules/mod_userdir.so...done.
Reading symbols from /etc/httpd/modules/mod_alias.so...done.
Reading symbols from /etc/httpd/modules/mod_rewrite.so...done.
Reading symbols from /etc/httpd/modules/mod_access.so...done.
Reading symbols from /etc/httpd/modules/mod_auth.so...done.
Reading symbols from /etc/httpd/modules/mod_auth_anon.so...done.
Reading symbols from /etc/httpd/modules/mod_auth_db.so...done.
Reading symbols from /etc/httpd/modules/mod_digest.so...done.
Reading symbols from /etc/httpd/modules/libproxy.so...done.
Reading symbols from /etc/httpd/modules/mod_expires.so...done.
Reading symbols from /etc/httpd/modules/mod_headers.so...done.
Reading symbols from /etc/httpd/modules/mod_usertrack.so...done.
Reading symbols from /etc/httpd/modules/mod_setenvif.so...done.
#0  0x4021a047 in ?? () from /lib/libpthread.so.0
(gdb) bt
#0  0x4021a047 in ?? () from /lib/libpthread.so.0
#1  0x401352eb in __getpwnam_r (name=0x80a9dc4 "nobody", resbuf=0x40196240, 
    buffer=0x80a6f08 "nobody", buflen=1024, result=0xbfffd5fc)
    at ../nss/getXXbyYY_r.c:182
#2  0x40134ba0 in getpwnam () at ../nss/getXXbyYY.c:156
#3  0x8064c26 in ap_uname2id ()
#4  0x8057043 in ap_exists_config_define ()
#5  0x8053e8c in ap_clear_module_list ()
#6  0x80540cc in ap_handle_command ()
#7  0x8054118 in ap_srm_command_loop ()
#8  0x8054487 in ap_process_resource_config ()
#9  0x8054b04 in ap_read_config ()
#10 0x805bf97 in ap_child_terminate ()
#11 0x805c65f in main ()
#12 0x400bc9cb in __libc_start_main () at ../sysdeps/generic/libc-start.c:122
(gdb) 
-------------- next part --------------

I'm using mod_python version 2.4.1 on a RedHat 6.2 machine,
kernel 2.2.16 and Apache 1.3.12

The module was compiled with the following command:

apxs -c -I/usr/include/python1.5 -L/usr/lib/python1.5/config \
-lpython1.5 -lpthread -lieee -lm -ldl mod_python.c


I'm including a complete list of module loads and a backtrace of the
core dump.  This segfault does not occur if the LoadModule for
mod_python are commented out, but does if only the AddModule is.

I hope this was somewhat helpful,

-- 
Christopher A. Craig <ccraig@ccraig.org>
When you say "I wrote a program that crashed Windows", people just stare at
you blankly and say "Hey, I got those with the system, *for free*". - Linus
http://www.ccraig.org
From richard at whitequeen.com  Sun Jul  9 06:30:47 2000
From: richard at whitequeen.com (richard offer)
Date: Fri Jan  9 21:58:34 2004
Subject: [mod_python] Segfault on Apache Startup
In-Reply-To: list-modpython@ccraig.org
       "[mod_python] Segfault on Apache Startup" (Jul 11, 10:23pm)
Message-ID: <200007091330.e69DUlZ14193@erij.whitequeen.com>

* $ from list-modpython@ccraig.org at "11-Jul:10:23pm" | sed "1,$s/^/* /" 
*
* #0  0x4021a047 in ?? () from /lib/libpthread.so.0
* (gdb) bt
* #0  0x4021a047 in ?? () from /lib/libpthread.so.0
* #1  0x401352eb in __getpwnam_r (name=0x80a9dc4 "nobody", resbuf=0x40196240, 
*     buffer=0x80a6f08 "nobody", buflen=1024, result=0xbfffd5fc)
*     at ../nss/getXXbyYY_r.c:182
* #2  0x40134ba0 in getpwnam () at ../nss/getXXbyYY.c:156
* #3  0x8064c26 in ap_uname2id ()
* #4  0x8057043 in ap_exists_config_define ()
* #5  0x8053e8c in ap_clear_module_list ()
* #6  0x80540cc in ap_handle_command ()
* #7  0x8054118 in ap_srm_command_loop ()
* #8  0x8054487 in ap_process_resource_config ()
* #9  0x8054b04 in ap_read_config ()
* #10 0x805bf97 in ap_child_terminate ()
* #11 0x805c65f in main ()
* #12 0x400bc9cb in __libc_start_main () at ../sysdeps/generic/libc-start.c:122
* (gdb) 
* --=-=-=
* 
* 
* I'm using mod_python version 2.4.1 on a RedHat 6.2 machine,
* kernel 2.2.16 and Apache 1.3.12
* 
* The module was compiled with the following command:
* 
* apxs -c -I/usr/include/python1.5 -L/usr/lib/python1.5/config \
* -lpython1.5 -lpthread -lieee -lm -ldl mod_python.c

You probably want to link python in statically, I did something like

apxs -c -I/usr/include/python1.5 mod_python.c
/usr/lib/python1.5/config/libpython1.5.a -lpthread

* 
* 
* I'm including a complete list of module loads and a backtrace of the
* core dump.  This segfault does not occur if the LoadModule for
* mod_python are commented out, but does if only the AddModule is.
* 
* I hope this was somewhat helpful,

I assume that you are consistant in the threading (both python and mod_python are threaded or neither).


However something that I found was that trying to use a threaded python
in a chroot'ed environment didn't work. Threaded python worked okay
outside the chroot and a non-threaded python worked okay in th chroot.

* Christopher A. Craig <ccraig@ccraig.org>


richard.


-- 
richard offer @ home 
          84 FE 48 E4 74 D0 26 D4  31 8E B6 86 98 74 E2 7C  8A FB BF A3
___________________________________http://216.185.15.144/users/richard/

From grisha at ispol.com  Wed Jul 12 13:46:15 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:34 2004
Subject: [mod_python] embedded Python
Message-ID: <Pine.LNX.4.21.0007121334500.14643-100000@saturn.ispol.com>


Based on what I've seen in the newsgroups and the e-mails that I often
get, there seems to be a strong interest in html-embedded Python, in fact,
from what I gather, some people went through the trouble of downloading
and installing mod_python with that expectation only to find out that it
does no such thing.

I personally think it would be extremely nice if mod_python came bundled
with a (reliable and usable) handler that processed Python embedded within
HTML. There a couple of questions that I have about it though -

1. First - is there really a great need for embedded Python? Are a lot of
people using PMZ and similar things and want them to work with mod_python?

2. Would this be something that is more desired than other fancy things
like dynamic handler registration and a deeper integration with apache
api? In other words, would you rather have a cool embedded Python thing
than the ability to create your own Apache configuration directives?

3. Should embedded Python be a project of its own, or would it be
appropriate to include it in the scope of mod_python?

Any other comments, suggestions, pointers, etc are appreciated.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com


From richard at whitequeen.com  Sun Jul  9 09:19:04 2000
From: richard at whitequeen.com (richard offer)
Date: Fri Jan  9 21:58:34 2004
Subject: [mod_python] embedded Python
In-Reply-To: Gregory Trubetskoy <grisha@ispol.com>
       "[mod_python] embedded Python" (Jul 12,  1:46pm)
Message-ID: <200007091619.e69GJ4V14406@erij.whitequeen.com>

* $ from grisha@ispol.com at "12-Jul: 1:46pm" | sed "1,$s/^/* /" 
*
*
* 
* 
* Based on what I've seen in the newsgroups and the e-mails that I often
* get, there seems to be a strong interest in html-embedded Python, in fact,
* from what I gather, some people went through the trouble of downloading
* and installing mod_python with that expectation only to find out that it
* does no such thing.
* 
* I personally think it would be extremely nice if mod_python came bundled
* with a (reliable and usable) handler that processed Python embedded within
* HTML. There a couple of questions that I have about it though -
* 
* 1. First - is there really a great need for embedded Python? Are a lot of
* people using PMZ and similar things and want them to work with mod_python?
* 
* 2. Would this be something that is more desired than other fancy things
* like dynamic handler registration and a deeper integration with apache
* api? In other words, would you rather have a cool embedded Python thing
* than the ability to create your own Apache configuration directives?
* 
* 3. Should embedded Python be a project of its own, or would it be
* appropriate to include it in the scope of mod_python?

I think it belongs in mod_python, I see a sort of spectrum, at one end
you have an HTML file that has a few lines of Python to replace a SSI,
at the other full python programs that happen to spit out HTML. However,
you could argue that for the HTML case, the startup time for an external
intrepreter would be even more excessive than a large python application.

I could also see how it could be useful to be able to have different
handlers in the embedded code (say to display different information
depending on whether you have authenticated yourself). But this okay to
leave until version n+1. :-)

Is it possible to have multiple (completely distinct) apps in the same
directory ?

I'm biased, I'm just an average engineer, someone who'd rather write
code to spit out HTML, than HTML :-)

*   Gregory (Grisha) Trubetskoy
*        grisha@ispol.com
* 

richard.

-- 
richard offer @ home 
          84 FE 48 E4 74 D0 26 D4  31 8E B6 86 98 74 E2 7C  8A FB BF A3
___________________________________http://216.185.15.144/users/richard/

From sylvan at ravinet.com  Thu Jul 13 02:12:15 2000
From: sylvan at ravinet.com (Sylvan Ravinet)
Date: Fri Jan  9 21:58:34 2004
Subject: [mod_python] embedded Python
References: <Pine.LNX.4.21.0007121334500.14643-100000@saturn.ispol.com>
Message-ID: <396CFB4F.4B0B12CE@ravinet.com>

hello,

Gregory Trubetskoy wrote:
> 
> Based on what I've seen in the newsgroups and the e-mails that I often
> get, there seems to be a strong interest in html-embedded Python, in fact,
> from what I gather, some people went through the trouble of downloading
> and installing mod_python with that expectation only to find out that it
> does no such thing.

I'm among those...

> I personally think it would be extremely nice if mod_python came bundled
> with a (reliable and usable) handler that processed Python embedded within
> HTML.

I fully agree.

>There a couple of questions that I have about it though -
> 
> 1. First - is there really a great need for embedded Python? Are a lot of
> people using PMZ and similar things and want them to work with mod_python?

I'm not using PMZ, but I tried moderately to make it work with
mod_python. I have to say that this Handler process is still cryptic to
me.

> 2. Would this be something that is more desired than other fancy things
> like dynamic handler registration and a deeper integration with apache
> api? In other words, would you rather have a cool embedded Python thing
> than the ability to create your own Apache configuration directives?

Is that so difficult to implement? Isn't this PMZ already usable for
this purpose? (of course, with a good knowledge of mod_python)

> 3. Should embedded Python be a project of its own, or would it be
> appropriate to include it in the scope of mod_python?

Why another project? As a dedicated python handler for mod_python, that
sounds fine to me. (that can be only one example of mod_python use,
really good indeed)

Thank you for the good work already put in mod_python,

Best regards,

-Sylvan

--
Do, or do not. There is no try. -Yoda
Sylvan Ravinet: http://www.ravinet.com/sylvan/contact

From gtalvola at nameconnector.com  Thu Jul 13 09:35:55 2000
From: gtalvola at nameconnector.com (Geoff Talvola)
Date: Fri Jan  9 21:58:34 2004
Subject: [mod_python] embedded Python
References: <Pine.LNX.4.21.0007121334500.14643-100000@saturn.ispol.com> <396CFB4F.4B0B12CE@ravinet.com>
Message-ID: <396DC5BB.BF4A741E@NameConnector.com>

One project that allows embedding of Python in HTML is WebWare for Python, which
has a Python Server Pages component.  See http://webware.sourceforge.net/ for
details.

WebWare is still in Alpha phase, but it looks quite useful already.  It has a
number of nice features such as Session objects to automatically handle session
data, and the ability to write web applications in an object-oriented manner.
You can mix and match Python Server Pages with pages that are implemented as
Python classes.

And it should work with mod_python on Linux -- I remember some messages on the
mailing list to that effect.  I'm planning on trying to get it to work with
mod_python on Windows NT, which I don't think anyone has attempted yet.  You can
also use it with plain old CGI (which will be slower) or FastCGI.

--


- Geoff Talvola
  Parlance Corporation
  gtalvola@NameConnector.com


From grisha at ispol.com  Thu Jul 13 17:26:31 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:34 2004
Subject: [mod_python] embedded Python
In-Reply-To: <396DC5BB.BF4A741E@NameConnector.com>
Message-ID: <Pine.LNX.4.21.0007131725240.19178-100000@saturn.ispol.com>

If that thing works reliably, then we can just put a pointer to it as a
"recommended solution" for this sort of thing with mod_python on the
website or the faq somewhere.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Thu, 13 Jul 2000, Geoff Talvola wrote:

> One project that allows embedding of Python in HTML is WebWare for Python, which
> has a Python Server Pages component.  See http://webware.sourceforge.net/ for
> details.
> 
> WebWare is still in Alpha phase, but it looks quite useful already.  It has a
> number of nice features such as Session objects to automatically handle session
> data, and the ability to write web applications in an object-oriented manner.
> You can mix and match Python Server Pages with pages that are implemented as
> Python classes.
> 
> And it should work with mod_python on Linux -- I remember some messages on the
> mailing list to that effect.  I'm planning on trying to get it to work with
> mod_python on Windows NT, which I don't think anyone has attempted yet.  You can
> also use it with plain old CGI (which will be slower) or FastCGI.
> 
> --
> 
> 
> - Geoff Talvola
>   Parlance Corporation
>   gtalvola@NameConnector.com
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From jtravis at cse.unl.edu  Thu Jul 13 17:01:19 2000
From: jtravis at cse.unl.edu (Jon Travis)
Date: Fri Jan  9 21:58:34 2004
Subject: [mod_python] embedded Python
In-Reply-To: <396DC5BB.BF4A741E@NameConnector.com> from Geoff Talvola at "Jul
 13, 2000 09:35:55 am"
Message-ID: <200007132201.RAA12712709@cse.unl.edu>

I don't know if it is inappropriate to post this, but:

Another project that already allows embedded Python is the mod_snake
project @ http://modsnake.sourceforge.net

-- Jon


> One project that allows embedding of Python in HTML is WebWare for Python, which
> has a Python Server Pages component.  See http://webware.sourceforge.net/ for
> details.
> 
> WebWare is still in Alpha phase, but it looks quite useful already.  It has a
> number of nice features such as Session objects to automatically handle session
> data, and the ability to write web applications in an object-oriented manner.
> You can mix and match Python Server Pages with pages that are implemented as
> Python classes.
> 
> And it should work with mod_python on Linux -- I remember some messages on the
> mailing list to that effect.  I'm planning on trying to get it to work with
> mod_python on Windows NT, which I don't think anyone has attempted yet.  You can
> also use it with plain old CGI (which will be slower) or FastCGI.
> 
> --
> 
> 
> - Geoff Talvola
>   Parlance Corporation
>   gtalvola@NameConnector.com
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From grisha at ispol.com  Thu Jul 13 18:53:36 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:34 2004
Subject: [mod_python] embedded Python
In-Reply-To: <200007132201.RAA12712709@cse.unl.edu>
Message-ID: <Pine.LNX.4.21.0007131852280.19470-100000@saturn.ispol.com>

On Thu, 13 Jul 2000, Jon Travis wrote:

> I don't know if it is inappropriate to post this, but:
> 
> Another project that already allows embedded Python is the mod_snake
> project @ http://modsnake.sourceforge.net

Yeah, but who wants to use mod_snake?

(Juuust kidding!!!!)

Grisha


From gstein at lyra.org  Thu Jul 13 16:16:47 2000
From: gstein at lyra.org (Greg Stein)
Date: Fri Jan  9 21:58:34 2004
Subject: [mod_python] embedded Python
In-Reply-To: <Pine.LNX.4.21.0007131852280.19470-100000@saturn.ispol.com>; from grisha@ispol.com on Thu, Jul 13, 2000 at 06:53:36PM -0400
References: <200007132201.RAA12712709@cse.unl.edu> <Pine.LNX.4.21.0007131852280.19470-100000@saturn.ispol.com>
Message-ID: <20000713161647.F29590@lyra.org>

What cracks me up, is that Python was not named after the snake. So
mod_snake is a complete misnomer :-)

[ Python was named after Monty Python's Flying Circus ]

Cheers,
-g

On Thu, Jul 13, 2000 at 06:53:36PM -0400, Gregory Trubetskoy wrote:
> 
> On Thu, 13 Jul 2000, Jon Travis wrote:
> 
> > I don't know if it is inappropriate to post this, but:
> > 
> > Another project that already allows embedded Python is the mod_snake
> > project @ http://modsnake.sourceforge.net
> 
> Yeah, but who wants to use mod_snake?
> 
> (Juuust kidding!!!!)
> 
> Grisha
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python

-- 
Greg Stein, http://www.lyra.org/

From jtravis at cse.unl.edu  Thu Jul 13 18:25:29 2000
From: jtravis at cse.unl.edu (Jon Travis)
Date: Fri Jan  9 21:58:34 2004
Subject: [mod_python] embedded Python
In-Reply-To: <20000713161647.F29590@lyra.org> from Greg Stein at "Jul 13, 2000
 04:16:47 pm"
Message-ID: <200007132325.SAA14020407@cse.unl.edu>

I realize where the name came from ;-)  I couldn't think of
anything that would work well, like, mod_spamity_spam, or 
ministry_of_apache_modules, so I decided this was about as
good as I could do.  Originally it was mod_snakey, but .. ya know..
one can only be soooo lame.  ;-)

-- Jon


> What cracks me up, is that Python was not named after the snake. So
> mod_snake is a complete misnomer :-)
> 
> [ Python was named after Monty Python's Flying Circus ]
> 
> Cheers,
> -g
> 
> On Thu, Jul 13, 2000 at 06:53:36PM -0400, Gregory Trubetskoy wrote:
> > 
> > On Thu, 13 Jul 2000, Jon Travis wrote:
> > 
> > > I don't know if it is inappropriate to post this, but:
> > > 
> > > Another project that already allows embedded Python is the mod_snake
> > > project @ http://modsnake.sourceforge.net
> > 
> > Yeah, but who wants to use mod_snake?
> > 
> > (Juuust kidding!!!!)
> > 
> > Grisha
> > 
> > _______________________________________________
> > Mod_python mailing list
> > Mod_python@modpython.org
> > http://www.modpython.org/mailman/listinfo/mod_python
> 
> -- 
> Greg Stein, http://www.lyra.org/
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From grisha at ispol.com  Thu Jul 13 23:17:03 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:34 2004
Subject: [mod_python] embedded Python
In-Reply-To: <200007132325.SAA14020407@cse.unl.edu>
Message-ID: <Pine.LNX.4.21.0007132301530.20200-100000@saturn.ispol.com>

How about mod_monty?

Getting more to the point though - I am a proponent of the idea that
competition in the open source is not a good thing. It makes the life of
users more complicated.... I'd much rather there was one module that was
done right than several half-ass ones, like what we have now.

Grisha


On Thu, 13 Jul 2000, Jon Travis wrote:

> I realize where the name came from ;-)  I couldn't think of
> anything that would work well, like, mod_spamity_spam, or 
> ministry_of_apache_modules, so I decided this was about as
> good as I could do.  Originally it was mod_snakey, but .. ya know..
> one can only be soooo lame.  ;-)
> 
> -- Jon
> 
> 
> > What cracks me up, is that Python was not named after the snake. So
> > mod_snake is a complete misnomer :-)
> > 
> > [ Python was named after Monty Python's Flying Circus ]
> > 
> > Cheers,
> > -g
> > 
> > On Thu, Jul 13, 2000 at 06:53:36PM -0400, Gregory Trubetskoy wrote:
> > > 
> > > On Thu, 13 Jul 2000, Jon Travis wrote:
> > > 
> > > > I don't know if it is inappropriate to post this, but:
> > > > 
> > > > Another project that already allows embedded Python is the mod_snake
> > > > project @ http://modsnake.sourceforge.net
> > > 
> > > Yeah, but who wants to use mod_snake?
> > > 
> > > (Juuust kidding!!!!)
> > > 
> > > Grisha
> > > 
> > > _______________________________________________
> > > Mod_python mailing list
> > > Mod_python@modpython.org
> > > http://www.modpython.org/mailman/listinfo/mod_python
> > 
> > -- 
> > Greg Stein, http://www.lyra.org/
> > _______________________________________________
> > Mod_python mailing list
> > Mod_python@modpython.org
> > http://www.modpython.org/mailman/listinfo/mod_python
> > 
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From richard at whitequeen.com  Thu Jul 13 17:27:52 2000
From: richard at whitequeen.com (richard offer)
Date: Fri Jan  9 21:58:34 2004
Subject: [mod_python] embedded Python
In-Reply-To: Gregory Trubetskoy <grisha@ispol.com>
       "Re: [mod_python] embedded Python" (Jul 13, 11:17pm)
Message-ID: <200007140027.e6E0RqB03344@erij.whitequeen.com>

* $ from grisha@ispol.com at "13-Jul:11:17pm" | sed "1,$s/^/* /" 
*
*
* 
* How about mod_monty?

mod_fullmonty ?

* 
* Getting more to the point though - I am a proponent of the idea that
* competition in the open source is not a good thing. It makes the life of
* users more complicated.... I'd much rather there was one module that was
* done right than several half-ass ones, like what we have now.

So, what do you see as the strengths and weaknesses of each ? 

* 
* Grisha
* 

richard.

-- 
richard offer @ home 
          84 FE 48 E4 74 D0 26 D4  31 8E B6 86 98 74 E2 7C  8A FB BF A3
___________________________________http://216.185.15.144/users/richard/

From rsalz at CaveoSystems.com  Sat Jul 15 22:31:36 2000
From: rsalz at CaveoSystems.com (rsalz@CaveoSystems.com)
Date: Fri Jan  9 21:58:34 2004
Subject: [mod_python] Swig, and mod_ssl
Message-ID: <200007160231.WAA04120@pc1.caveosystems.com>

Swig (http://www.swig.org) is a "compiler" that can parse most C
header files and automatically generate code for Perl, Tcl, Python,
and Java.  At a rough guess, approximately half of mod_python.c could
be replaced by a couple-dozen lines.  I wonder if it makes sense
to use SWIG, and for sites without it, include the Swig output.
(Just like some programs include the output of Yacc, for those without it.)

Second question, which motivated the first: anyone looked at what
could/should be added to the mod_python objects when mod_ssl is used?
	/r$

From michael at stroeder.com  Sun Jul 16 14:46:45 2000
From: michael at stroeder.com (Michael =?iso-8859-1?Q?Str=F6der?=)
Date: Fri Jan  9 21:58:34 2004
Subject: [mod_python] Swig, and mod_ssl
References: <200007160231.WAA04120@pc1.caveosystems.com>
Message-ID: <3971AEB5.AB577533@stroeder.com>

rsalz@caveosystems.com wrote:
> 
> Second question, which motivated the first: anyone looked at what
> could/should be added to the mod_python objects when mod_ssl is used?

Callback functions for checking client certificates.
Well, one can do this also with M2Crypto anyway.

Ciao, Michael.

From rsalz at CaveoSystems.com  Sun Jul 16 15:37:27 2000
From: rsalz at CaveoSystems.com (rsalz@CaveoSystems.com)
Date: Fri Jan  9 21:58:34 2004
Subject: [mod_python] Swig, and mod_ssl
Message-ID: <200007161937.PAA10021@pc1.caveosystems.com>

>Callback functions for checking client certificates.
>Well, one can do this also with M2Crypto anyway.

Well yeah, but M2Crypto isn't integrated with mod_ssl and Apache.
(M2Crypto is a SWIG interface to OpenSSL, for those who don't know.)
At a minimum, I'd like to be able to get the client cert if
coming in via SSL, or know if there isn't one.
	/r$

From grisha at ispol.com  Sun Jul 16 21:02:58 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:34 2004
Subject: [mod_python] Swig, and mod_ssl
In-Reply-To: <200007160231.WAA04120@pc1.caveosystems.com>
Message-ID: <Pine.LNX.4.21.0007162059470.8470-100000@saturn.ispol.com>

On Sat, 15 Jul 2000 rsalz@caveosystems.com wrote:

> Swig (http://www.swig.org) is a "compiler" that can parse most C
> header files and automatically generate code for Perl, Tcl, Python,
> and Java.  At a rough guess, approximately half of mod_python.c could
> be replaced by a couple-dozen lines.  I wonder if it makes sense
> to use SWIG, and for sites without it, include the Swig output.
> (Just like some programs include the output of Yacc, for those without it.)

mod_snake is swig-based. I don't know enough about swig to make a
judgement. So far I've getting by fine without it - I sort of assumed it's
more trouble than it's worth.

> Second question, which motivated the first: anyone looked at what
> could/should be added to the mod_python objects when mod_ssl is used?

mod_python should work just fine with mod_ssl. At least it did for me on
FreeBSD. How is SSL different from anything else that you need special
objects?

Grisha


From rsalz at CaveoSystems.com  Sun Jul 16 22:23:41 2000
From: rsalz at CaveoSystems.com (rsalz@CaveoSystems.com)
Date: Fri Jan  9 21:58:34 2004
Subject: [mod_python] Swig, and mod_ssl
Message-ID: <200007170223.WAA10313@pc1.caveosystems.com>

Thanks, I'll check out mod_snake. (What's its relationship to mod_python,
and where can I find it?  I know, I should just check the archives since
that discussion just happened.)

SWIG seems pretty easy to get running on most platforms -- it should
generally be almost as simple to build as python.  I think it would
be worth the trouble. I think about half of mod_python.c, or over 1000
lines, could be removed -- SWIG could read httpd.h (et al) and
generate the C code for the "request" object (and the others)
automatically.  I'd suggest you give it a look-see.

As for SSL, I'm not sure.  Certainly I want to get the client cert.
I have to rummage more through mod_ssl, first.
	/r$

From peter at wl.vg  Sun Jul 16 23:28:44 2000
From: peter at wl.vg (Peter Halliday)
Date: Fri Jan  9 21:58:34 2004
Subject: [mod_python] problem compiling mod_python
Message-ID: <39727D6C.A7AA1541@wl.vg>

While waiting for someone to email me an RPM of mod_python 2.4.1, I
tried compiling it.  I got a copy of the apache source as well as the
above mod_python source.  Then I installed it using the DSO instructions
on the modpython webpage.  Everything seemed to go ok.  (One problem
however, I was unsure whether my python was compiled using thread
support because I use RedHat with the standard RPM that came with it. 
However, everything seemed ok when I compiled.  No error messages.  I
added these lines to my apache config file.

LoadModule python_module  module/mod_python.so
AddModule mod_python.c
AddHandler python-program .py
PythonHandler test
PythonDebug On
and then in my mime.types file I added:
application/x-python py
 
In my DocumentRoot directory I created a directory called test.  I had a
script with the following contents.

from mod_python import apache

def handler(req):
	req.send_http_header()
        req.write("Hello World!")
        return apache.OK 

I still get the same error when I add a '#!/usr/bin/python' to the top
of the file.  The following is the error that I receive.  I am running
RedHat Linux 6.2, Apache 1.3.12, mod_python 2.4.1., python 1.5.  I have
kept everything standard as came on RedHat.  

Mod_python error: "PythonHandler test"

Traceback (innermost last):

  File "/usr/lib/python1.5/site-packages/mod_python/apache.py", line
116, in Dispatch
    object = self.resolve_object(module, object_str)

  File "/usr/lib/python1.5/site-packages/mod_python/apache.py", line 51,
in resolve_object
    raise AttributeError, s

AttributeError: module '/usr/lib/python1.5/test/__init__.pyc' contains
no 'handler'


-- 
Peter Halliday
Online Application Developer
Whetstone Logic, Inc.       http://www.whetstonelogic.com
icq#75769411           AIM screen name: hoaggelos

From peter at wl.vg  Sun Jul 16 23:37:25 2000
From: peter at wl.vg (Peter Halliday)
Date: Fri Jan  9 21:58:34 2004
Subject: [mod_python] Problems with mod_python
Message-ID: <39727F75.7E2A95C6@wl.vg>

While waiting for someone to email me an RPM of mod_python 2.4.1, I
tried compiling it.  I got a copy of the apache source as well as the
above mod_python source.  Then I installed it using the DSO instructions
on the modpython webpage.  Everything seemed to go ok.  (One problem
however, I was unsure whether my python was compiled using thread
support because I use RedHat with the standard RPM that came with it. 
However, everything seemed ok when I compiled.  No error messages.  I
added these lines to my apache config file.

LoadModule python_module  module/mod_python.so
AddModule mod_python.c
AddHandler python-program .py
PythonHandler test
PythonDebug On
I changed the FileInfo directive to AllowOverride in the apache conf
file
and then in my mime.types file I added:
application/x-python py

 
In my DocumentRoot directory I created a directory called test.  I had a
script with the following contents.

from mod_python import apache

def handler(req):
        req.send_http_header()
        req.write("Hello World!")
        return apache.OK 

I still get the same error when I add a '#!/usr/bin/python' to the top
of the file.  The following is the error that I receive.  I am running
RedHat Linux 6.2, Apache 1.3.12, mod_python 2.4.1., python 1.5.  I have
kept everything standard as came on RedHat.  

Mod_python error: "PythonHandler test"

Traceback (innermost last):

  File "/usr/lib/python1.5/site-packages/mod_python/apache.py", line
116, in Dispatch
    object = self.resolve_object(module, object_str)

  File "/usr/lib/python1.5/site-packages/mod_python/apache.py", line 51,
in resolve_object
    raise AttributeError, s

AttributeError: module '/usr/lib/python1.5/test/__init__.pyc' contains
no 'handler'


-- 
Peter Halliday
Online Application Developer
Whetstone Logic, Inc.       http://www.whetstonelogic.com
icq#75769411           AIM screen name: hoaggelos

From grisha at ispol.com  Mon Jul 17 07:49:03 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:34 2004
Subject: [mod_python] Problems with mod_python
In-Reply-To: <39727F75.7E2A95C6@wl.vg>
Message-ID: <Pine.LNX.4.21.0007170748030.10692-100000@saturn.ispol.com>


On Sun, 16 Jul 2000, Peter Halliday wrote:

> AttributeError: module '/usr/lib/python1.5/test/__init__.pyc' contains
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
> no 'handler'

Your answer is in the message.

Grisha


From frneh at wmdata.com  Wed Jul 19 14:43:33 2000
From: frneh at wmdata.com (Nehr, Fredrik)
Date: Fri Jan  9 21:58:34 2004
Subject: [mod_python] Ho do make mod_python execute more then one script in a directory
 ?
Message-ID: <058FBD36E4D3D21193210008C72B64FD01296A51@WMSTO3SI1361>

With my current configuration only the generic handler of the script named
by the "PythonHandler" directive is executed even if I point my browser at
one of the other scripts in the same directory. How can i make mod_python
execute the "right" script?

I'm using mod_python 2.4.1 with Apache 1.3.12 and Python 1.5.2 on Windows
2000 Professional.

BTW: Why is argv missing from the sys module?


Regards,

Fredrik Nehr

From grisha at ispol.com  Wed Jul 19 11:29:31 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:34 2004
Subject: [mod_python] Ho do make mod_python execute more then one script
 in a directory ?
In-Reply-To: <058FBD36E4D3D21193210008C72B64FD01296A51@WMSTO3SI1361>
Message-ID: <Pine.LNX.4.21.0007191112250.18643-100000@saturn.ispol.com>

On Wed, 19 Jul 2000, Nehr, Fredrik wrote:

> With my current configuration only the generic handler of the script named
> by the "PythonHandler" directive is executed even if I point my browser at
> one of the other scripts in the same directory. How can i make mod_python
> execute the "right" script?

That's the way Apache modules work. Quoting from the tutorial:

       Some food for thought: If you were paying attention, you noticed
  that nowhere did it say that in order for all of the above to happen,
  the URL needs to refer to myscript.py. The only requirement was that it
  refers to a .py file. In fact the name of the file doesn't matter, and
  the file referred to in the URL doesn't have to exist. So, given the
  above configuration, http://myserver/mywebdir/myscript.py and
  http://myserver/mywebdir/montypython.py would give the exact same
  result.

       At this point, if you didn't understand the above paragraph, go
  back and read it again, until you do. 

> BTW: Why is argv missing from the sys module?

sys.argv is something that appears only during interactive invocation of
Python. sys.argv is created by PySys_SetArgv() C API function which is
called from main(). If python is not invoked from the command line,
main() is never executed, thus no sys.argv. This is actually one way to
tell whether you're running from the command line or embedded. 

The documentation for Py_Initialize() function mentions this, BTW.

Grisha


From mike at schwager.com  Mon Jul 24 03:20:44 2000
From: mike at schwager.com (Michael Schwager)
Date: Fri Jan  9 21:58:34 2004
Subject: [mod_python] Errors with Apache 1.3.12 and mod_python
Message-ID: <2336170196.964408844@celery.schwager.com>

Hi,
Yes- I am a newbie.  I just installed apache 1.3.12 with mod_python 2.4.1 
on my Solaris 2.6 box.  Everything went ok, except I am getting an error 
when I try to run the test.py as instructed in the install docs (see 
below).  Notice that, strangely, I get no errors- indeed the script works 
fine- if I run httpd with the -X option.  I note that I must be in the 
htdocs directory for that to work (thus, httpd sees the test subdir, which 
contains the test.py file).  So I'm not sure how the directories and 
filenames are related to PythonHandler, and how they are found by httpd 
and/or python.  But I think the problem is path-related.

Any useful help will be appreciated.  I do not have a .htaccess file; I put 
the appropriate lines in the httpd.conf file:
AddHandler python-program .py
PythonHandler test
PythonDebug On

Here is the error:
[Mon Jul 24 02:17:20 2000] [error] PythonHandler test: Traceback (most 
recent call last):
[Mon Jul 24 02:17:20 2000] [error] PythonHandler test:   File 
"/usr/local/lib/python1.6/site-packages/mod_python/apache.py", line 116, in 
Dispatch
    object = self.resolve_object(module, object_str)
[Mon Jul 24 02:17:20 2000] [error] PythonHandler test:   File 
"/usr/local/lib/python1.6/site-packages/mod_python/apache.py", line 51, in 
resolve_object
    raise AttributeError, s
[Mon Jul 24 02:17:20 2000] [error] PythonHandler test: AttributeError: 
module '/usr/local/lib/python1.6/test/__init__.pyc' contains no 'handler'
--
-Mike                                Mike@Schwager.com
        

From vanicek at brailcom.cz  Mon Jul 24 10:27:56 2000
From: vanicek at brailcom.cz (Roman Vanicek)
Date: Fri Jan  9 21:58:34 2004
Subject: [mod_python] multiple headers (cookies) are not sent
Message-ID: <4ak8ec0w6r.fsf@gnu.brailcom.cz>

Hi all,

I have a problem with mod_python: when I use cgihandler and I try to
send one cookie to the user, it works fine. But if I send several
cookies (which is legal according to cookie spec), just one of them (the
last one) is sent. When I do the same thing with regular python CGI
script, all the cookies are sent all right.

I have tried to track down the problem, I even played with my own python
handlers and it seems to me, that req.headers_out simply don't support
the notion of multiple headers. This is the dictionary and there can be
only one record per key (ie. one Set-Cookie header in this case) and the
value can be string only (it can't be the sequence of strings which
would maybe solve the problem).

What do you think about it?
Any help is appreciated, Roman Vanicek

From grisha at ispol.com  Mon Jul 24 08:48:52 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:34 2004
Subject: [mod_python] multiple headers (cookies) are not sent
In-Reply-To: <4ak8ec0w6r.fsf@gnu.brailcom.cz>
Message-ID: <Pine.LNX.4.21.0007240846430.15004-100000@saturn.ispol.com>

On 24 Jul 2000, Roman Vanicek wrote:

> I have tried to track down the problem, I even played with my own python
> handlers and it seems to me, that req.headers_out simply don't support
> the notion of multiple headers. 

That is correct. I'll have to think about how to get around this one....

Grisha


From db at cinetic.de  Mon Jul 24 15:27:55 2000
From: db at cinetic.de (Denys Bogatz)
Date: Fri Jan  9 21:58:34 2004
Subject: [mod_python] undefined symbol: stat
Message-ID: <003e01bff572$fb6c0320$876be2c3@cinetic.de>

Hello Folks,

I encountered a problem using mod_python as Apache-DSO.
Starting Apache results in an error: Can't load module ..../mod_python into
server: ..../mod_python: undefined symbol stat

That's all!
I'm sorry - I use Linux now for one week by know and I don't know what to
do...
(...using SuSE6.2, Python 1.5.2 and Apache 1.3)

Regards,

Denys!


From grisha at ispol.com  Mon Jul 24 09:56:01 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:35 2004
Subject: [mod_python] Errors with Apache 1.3.12 and mod_python
In-Reply-To: <2336170196.964408844@celery.schwager.com>
Message-ID: <Pine.LNX.4.21.0007240950470.15004-100000@saturn.ispol.com>

When you run httpd with the -X option from the directory where test.py
lives, it works because by default has the current directory in the python
path.

When you run httpd as a daemon, then your current directory is undefined
(most likely it is ServerRoot). 

To get around this, mod_python prepends the directory for which the
directive is specified to the pythopath. But because you put your
directives in httpd.conf outside of any <Directory> directives, mod_python
does not modify your python path in any way, because it doesn't know how
to. What you should do, if you're not using .htaccess, is:

<Directory /dir/where/test.py/is>
	AddHandler python-program .py
	PythonHandler test
	PythonDebug On
</Directory>

Then "/dir/where/test.py/is" will be added to the python path and it will
work fine.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Mon, 24 Jul 2000, Michael Schwager wrote:

> Hi,
> Yes- I am a newbie.  I just installed apache 1.3.12 with mod_python 2.4.1 
> on my Solaris 2.6 box.  Everything went ok, except I am getting an error 
> when I try to run the test.py as instructed in the install docs (see 
> below).  Notice that, strangely, I get no errors- indeed the script works 
> fine- if I run httpd with the -X option.  I note that I must be in the 
> htdocs directory for that to work (thus, httpd sees the test subdir, which 
> contains the test.py file).  So I'm not sure how the directories and 
> filenames are related to PythonHandler, and how they are found by httpd 
> and/or python.  But I think the problem is path-related.
> 
> Any useful help will be appreciated.  I do not have a .htaccess file; I put 
> the appropriate lines in the httpd.conf file:
> AddHandler python-program .py
> PythonHandler test
> PythonDebug On
> 
> Here is the error:
> [Mon Jul 24 02:17:20 2000] [error] PythonHandler test: Traceback (most 
> recent call last):
> [Mon Jul 24 02:17:20 2000] [error] PythonHandler test:   File 
> "/usr/local/lib/python1.6/site-packages/mod_python/apache.py", line 116, in 
> Dispatch
>     object = self.resolve_object(module, object_str)
> [Mon Jul 24 02:17:20 2000] [error] PythonHandler test:   File 
> "/usr/local/lib/python1.6/site-packages/mod_python/apache.py", line 51, in 
> resolve_object
>     raise AttributeError, s
> [Mon Jul 24 02:17:20 2000] [error] PythonHandler test: AttributeError: 
> module '/usr/local/lib/python1.6/test/__init__.pyc' contains no 'handler'
> --
> -Mike                                Mike@Schwager.com
>         
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From grisha at ispol.com  Mon Jul 24 12:09:09 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:35 2004
Subject: [mod_python] undefined symbol: stat
In-Reply-To: <003e01bff572$fb6c0320$876be2c3@cinetic.de>
Message-ID: <Pine.LNX.4.21.0007240956360.15004-100000@saturn.ispol.com>

You're missing a library of some kind when you're linking. I'm not sure
where stat lives, but you may want to check what libraries apache and
python are linked against.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Mon, 24 Jul 2000, Denys Bogatz wrote:

> Hello Folks,
> 
> I encountered a problem using mod_python as Apache-DSO.
> Starting Apache results in an error: Can't load module ..../mod_python into
> server: ..../mod_python: undefined symbol stat
> 
> That's all!
> I'm sorry - I use Linux now for one week by know and I don't know what to
> do...
> (...using SuSE6.2, Python 1.5.2 and Apache 1.3)
> 
> Regards,
> 
> Denys!
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From db at cinetic.de  Mon Jul 24 18:32:06 2000
From: db at cinetic.de (Denys Bogatz)
Date: Fri Jan  9 21:58:35 2004
Subject: AW: [mod_python] undefined symbol: stat
In-Reply-To: <Pine.LNX.4.21.0007240956360.15004-100000@saturn.ispol.com>
Message-ID: <004a01bff58c$b52f8480$876be2c3@cinetic.de>

Thanx!

I tried to find the lib with:
ar -x /usr/local/lib/.../libgcc.a stat.o
...but I haven't found it! :-(

As I wrote I'm kindly new on Linux, so I've got no idea where to search for
it...

Bye, Denys!
(I may try to solve the problem by building my own version of python (still
using the version supplied by SuSE6.2) - maybe that will work!?)


>You're missing a library of some kind when you're linking. I'm not sure
>where stat lives, but you may want to check what libraries apache and
>python are linked against.
>
>--
>  Gregory (Grisha) Trubetskoy
>       grisha@ispol.com
>


From grisha at ispol.com  Mon Jul 24 14:17:22 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:35 2004
Subject: AW: [mod_python] undefined symbol: stat
In-Reply-To: <004a01bff58c$b52f8480$876be2c3@cinetic.de>
Message-ID: <Pine.LNX.4.21.0007241415530.15752-100000@saturn.ispol.com>

Check this web page out: http://jarre.pair.com/insadmin/gerhard/

Perhaps Gerhard could update his Suse RPM's to 2.4.1?

Grisha


On Mon, 24 Jul 2000, Denys Bogatz wrote:

> Thanx!
> 
> I tried to find the lib with:
> ar -x /usr/local/lib/.../libgcc.a stat.o
> ...but I haven't found it! :-(
> 
> As I wrote I'm kindly new on Linux, so I've got no idea where to search for
> it...
> 
> Bye, Denys!
> (I may try to solve the problem by building my own version of python (still
> using the version supplied by SuSE6.2) - maybe that will work!?)
> 
> 
> >You're missing a library of some kind when you're linking. I'm not sure
> >where stat lives, but you may want to check what libraries apache and
> >python are linked against.
> >
> >--
> >  Gregory (Grisha) Trubetskoy
> >       grisha@ispol.com
> >
> 



From bjrubble at dagobah.com  Mon Jul 24 13:57:35 2000
From: bjrubble at dagobah.com (Adam Clark)
Date: Fri Jan  9 21:58:35 2004
Subject: [mod_python] Basic mod_python questions
In-Reply-To: <Pine.LNX.4.21.0007241415530.15752-100000@saturn.ispol.com>
Message-ID: <Pine.BSF.4.21.0007241346550.27728-100000@shell16.ba.best.com>

Hi,

I have what I'm sure are some basic questions.  I'm trying to transfer
stuff from a CGI environment, and I'm not sure how you're supposed to
handle all the inputs.  I'm currently using the cgi module to manually
parse the query string, but do I have to write all the get/post switching
stuff myself?  What about file uploads?  Cookies?  I'd rather write this
right than become dependent on the CGI Handler, but I'm not sure how these
things are supposed to be done.

Thanks a lot
Adam



From grisha at ispol.com  Mon Jul 24 17:24:35 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:35 2004
Subject: [mod_python] Basic mod_python questions
In-Reply-To: <Pine.BSF.4.21.0007241346550.27728-100000@shell16.ba.best.com>
Message-ID: <Pine.LNX.4.21.0007241723001.16397-100000@saturn.ispol.com>

req.read(), req.headers_out and req.headers_in are your friends here. You
will still need a lot of functionality from the cgi.py standard Python
library module to parse multipart content from POST operations.

Grisha

On Mon, 24 Jul 2000, Adam Clark wrote:

> Hi,
> 
> I have what I'm sure are some basic questions.  I'm trying to transfer
> stuff from a CGI environment, and I'm not sure how you're supposed to
> handle all the inputs.  I'm currently using the cgi module to manually
> parse the query string, but do I have to write all the get/post switching
> stuff myself?  What about file uploads?  Cookies?  I'd rather write this
> right than become dependent on the CGI Handler, but I'm not sure how these
> things are supposed to be done.
> 
> Thanks a lot
> Adam
> 
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From db at cinetic.de  Tue Jul 25 10:04:36 2000
From: db at cinetic.de (Denys Bogatz)
Date: Fri Jan  9 21:58:35 2004
Subject: AW: AW: [mod_python] undefined symbol: stat solved!
In-Reply-To: <Pine.LNX.4.21.0007241415530.15752-100000@saturn.ispol.com>
Message-ID: <005501bff60e$f9ee9200$876be2c3@cinetic.de>

I solved the problem by linking /usr/lib/modules/2.2.10/libc.a within
mod_python...
(I found "stat.o" inside this library, extracted that and got some other
undefined symbols - so I decided to link the whole libc.a)
But now my mod_python.so is somewhat over 300k in size - is this too much?

Another problem: My IExplorer downloads test.py for some reasons...
(I got it working for some time but now the script won't be executed!)

>
> Check this web page out: http://jarre.pair.com/insadmin/gerhard/
>
> Perhaps Gerhard could update his Suse RPM's to 2.4.1?
>
> Grisha
>
>
> On Mon, 24 Jul 2000, Denys Bogatz wrote:
>
> > Thanx!
> >
> > I tried to find the lib with:
> > ar -x /usr/local/lib/.../libgcc.a stat.o
> > ...but I haven't found it! :-(
> >
> > As I wrote I'm kindly new on Linux, so I've got no idea
> where to search for
> > it...
> >
> > Bye, Denys!
> > (I may try to solve the problem by building my own version
> of python (still
> > using the version supplied by SuSE6.2) - maybe that will work!?)


From grisha at ispol.com  Tue Jul 25 08:48:03 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 21:58:35 2004
Subject: AW: AW: [mod_python] undefined symbol: stat solved!
In-Reply-To: <005501bff60e$f9ee9200$876be2c3@cinetic.de>
Message-ID: <Pine.LNX.4.21.0007250844250.19360-100000@saturn.ispol.com>

On Tue, 25 Jul 2000, Denys Bogatz wrote:

> 
> I solved the problem by linking /usr/lib/modules/2.2.10/libc.a within
> mod_python...
>
> (I found "stat.o" inside this library, extracted that and got some
> other undefined symbols - so I decided to link the whole libc.a) But
> now my mod_python.so is somewhat over 300k in size - is this too much?

to make it smaller, you can try something like:

ar x /usr/lib/modules/2.2.10/libc.a stat.o

then add stat.o as an argument to your apxs command.

> Another problem: My IExplorer downloads test.py for some reasons...
> (I got it working for some time but now the script won't be executed!)

This has nothing to do with explorer. You're missing your set-handler
directive, perhaps AllowOverride isn't FileInfo for that directory.

Grisha


From iny at iki.fi  Tue Jul 25 17:58:41 2000
From: iny at iki.fi (Ilpo =?iso-8859-1?q?Nyyss=F6nen?=)
Date: Fri Jan  9 21:58:35 2004
Subject: AW: AW: [mod_python] undefined symbol: stat solved!
In-Reply-To: Gregory Trubetskoy's message of "Tue, 25 Jul 2000 08:48:03 -0400 (EDT)"
References: <Pine.LNX.4.21.0007250844250.19360-100000@saturn.ispol.com>
Message-ID: <m3hf9e45pa.fsf@ypy.tky.hut.fi>

Gregory Trubetskoy <grisha@ispol.com> writes:

> On Tue, 25 Jul 2000, Denys Bogatz wrote:
> 
> > I solved the problem by linking /usr/lib/modules/2.2.10/libc.a within
> > mod_python...
> >
> > (I found "stat.o" inside this library, extracted that and got some
> > other undefined symbols - so I decided to link the whole libc.a) But
> > now my mod_python.so is somewhat over 300k in size - is this too much?
> 
> to make it smaller, you can try something like:
> 
> ar x /usr/lib/modules/2.2.10/libc.a stat.o
> 
> then add stat.o as an argument to your apxs command.

Or even add -lc to the apxs command. That is what I did, but I still
have that problem with urllib I wrote about.

-- 
Ilpo Nyyss?nen # biny
/* :-) */

From Daniel.Plagge at tu-clausthal.de  Fri Jul 28 14:26:27 2000
From: Daniel.Plagge at tu-clausthal.de (Daniel Plagge)
Date: Fri Jan  9 21:58:35 2004
Subject: [mod_python] compile errors on solaris
Message-ID: <20000728142627.A742@wintermute.esw-heim.tu-clausthal.de>

Hello,

on Solaris the Sun-C-compiler complaints about some syntax errors,
mainly because C++ syntax is used. I append a trivial patch which
should solve the problem, so later versions of mod_python could
compile out of the box. :)

Bye,
Daniel





*** mod_python.c.orig	Fri Jul 28 12:32:52 2000
--- mod_python.c	Fri Jul 28 12:52:50 2000
***************
*** 600,606 ****
  static int tablelength(tableobject *self) 
  { 
      return ap_table_elts(self->table)->nelts;
! };
  
  /**
   ** tablesetitem
--- 600,606 ----
  static int tablelength(tableobject *self) 
  { 
      return ap_table_elts(self->table)->nelts;
! }
  
  /**
   ** tablesetitem
***************
*** 638,644 ****
  	ap_table_set(self->table, k, PyString_AsString(val));
      }
      return 0;
! };
  
  /**
   ** tb_setitem
--- 638,644 ----
  	ap_table_set(self->table, k, PyString_AsString(val));
      }
      return 0;
! }
  
  /**
   ** tb_setitem
***************
*** 2253,2260 ****
  	    char *module = elts[i].key;
  	    char *dir = elts[i].val;
  
! 	    // XXXXXX PythonInterpreter!!!
! 	    // This needs to be addressed in config_merge?
  	    interpreter = dir;
  
  #ifdef WITH_THREAD  
--- 2253,2260 ----
  	    char *module = elts[i].key;
  	    char *dir = elts[i].val;
  
! 	    /* XXXXXX PythonInterpreter!!! */
! 	    /* This needs to be addressed in config_merge? */
  	    interpreter = dir;
  
  #ifdef WITH_THREAD  
***************
*** 2355,2361 ****
      return python_handler(req, "PythonLogHandler");
  }
  static void PythonChildExitHandler(server_rec *srv, pool *p) {
!     // printf("In ExitHandler\n");
  }
  
  
--- 2355,2361 ----
      return python_handler(req, "PythonLogHandler");
  }
  static void PythonChildExitHandler(server_rec *srv, pool *p) {
!   /* printf("In ExitHandler\n"); */
  }
  
  

From richard at whitequeen.com  Sun Jul  2 11:39:38 2000
From: richard at whitequeen.com (richard offer)
Date: Fri Jan  9 22:02:22 2004
Subject: [mod_python] *Occasional* AttributeError: Handler
Message-ID: <200007021839.e62Idc503947@erij.whitequeen.com>

Hi, its me again :-)

I've started getting the occasional 

[Sun Jul  2 11:13:46 2000] [error] PythonHandler index: Traceback (innermost last):
[Sun Jul  2 11:13:46 2000] [error] PythonHandler index:   File "/usr/local/lib/python1.5/site-packages/mod_python/apache.py", line 96, in Dispatch
    object = self.resolve_object(module, object_str)
[Sun Jul  2 11:13:46 2000] [error] PythonHandler index:   File "/usr/local/lib/python1.5/site-packages/mod_python/apache.py", line 42, in resolve_object
    obj = getattr(obj, obj_str)
[Sun Jul  2 11:13:46 2000] [error] PythonHandler index: AttributeError: handler


By occasional I mean I've got a page that loads lots of images from a
MySQL DB. Each image is a separate request. Most appear, but ~15%
don't. Hitting reload sometimes works, sometimes its a different set of
images that don't load.

This was working on the development server, moving across to the
production server I had to change the database access mechanism (from a
unix domain socket to a full inet socket (chroot) , and the production's
version of python is not threaded).


If anyone wants to check the failure mode of the site out its
alfieireland.com/scrapbook/.  I'll make the code available if anyone
can be bothered enough to ask for it. (this is a family site---neither
the site or the connection is designed for the /. effect, please don't
hurt it :-)

richard.

-- 
richard offer @ home 
          84 FE 48 E4 74 D0 26 D4  31 8E B6 86 98 74 E2 7C  8A FB BF A3
___________________________________http://216.185.15.144/users/richard/

From grisha at ispol.com  Sun Jul  2 19:43:37 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:23 2004
Subject: [mod_python] *Occasional* AttributeError: Handler
In-Reply-To: <200007021839.e62Idc503947@erij.whitequeen.com>
Message-ID: <Pine.LNX.4.21.0007021938400.30520-100000@saturn.ispol.com>

Interestingly enough, when I try it, I get all the pictures loaded fine. I
wonder if this has something to do with the speed of the link - mine is
64K ISDN.

I have a theory - 

I think that sometimes the "AttributeError: handler" message can be
misleading, when there was an error importing the module. Your module
seems to try to open a connection in-line:

db = MySQLdb.connect(host=host, user=user, passwd=passwd, db="scrapbook")

This can fail sometimes, and I think after that you get the misleading
error. Make sure that the MaxClients setting for Apache does not exceed
the maximum number of allowed connections for your MySQL server.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Sun, 2 Jul 2000, richard offer wrote:

> Hi, its me again :-)
> 
> I've started getting the occasional 
> 
> [Sun Jul  2 11:13:46 2000] [error] PythonHandler index: Traceback (innermost last):
> [Sun Jul  2 11:13:46 2000] [error] PythonHandler index:   File "/usr/local/lib/python1.5/site-packages/mod_python/apache.py", line 96, in Dispatch
>     object = self.resolve_object(module, object_str)
> [Sun Jul  2 11:13:46 2000] [error] PythonHandler index:   File "/usr/local/lib/python1.5/site-packages/mod_python/apache.py", line 42, in resolve_object
>     obj = getattr(obj, obj_str)
> [Sun Jul  2 11:13:46 2000] [error] PythonHandler index: AttributeError: handler
> 
> 
> By occasional I mean I've got a page that loads lots of images from a
> MySQL DB. Each image is a separate request. Most appear, but ~15%
> don't. Hitting reload sometimes works, sometimes its a different set of
> images that don't load.
> 
> This was working on the development server, moving across to the
> production server I had to change the database access mechanism (from a
> unix domain socket to a full inet socket (chroot) , and the production's
> version of python is not threaded).
> 
> 
> If anyone wants to check the failure mode of the site out its
> alfieireland.com/scrapbook/.  I'll make the code available if anyone
> can be bothered enough to ask for it. (this is a family site---neither
> the site or the connection is designed for the /. effect, please don't
> hurt it :-)
> 
> richard.
> 
> -- 
> richard offer @ home 
>           84 FE 48 E4 74 D0 26 D4  31 8E B6 86 98 74 E2 7C  8A FB BF A3
> ___________________________________http://216.185.15.144/users/richard/
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 



From iny at iki.fi  Tue Jul  4 16:58:02 2000
From: iny at iki.fi (Ilpo =?iso-8859-1?q?Nyyss=F6nen?=)
Date: Fri Jan  9 22:02:23 2004
Subject: [mod_python] httplib: [notice] child pid 8937 exit signal Segmentation fault (11)
Message-ID: <m3k8f2q9p1.fsf@iki.fi>

I tried to use urllib to retrieve some pictures dynamically, but the
child dies with segmentation fault. This happens also with httplib,
for example with the code below. The dying seems to happen when
closing the connection.

-- clip --
from mod_python import apache
import httplib

def handler(req):
    req.content_type = 'text/plain'
    req.send_http_header()
    
    h = httplib.HTTP('www.python.org')
    h.putrequest('GET', '/index.html')
    h.putheader('Accept', 'text/html')
    h.putheader('Accept', 'text/plain')
    h.endheaders()
    errcode, errmsg, headers = h.getreply()
    if errcode == 200:
        f = h.getfile()
        req.write(f.read())

    return apache.OK
-- clip --

-- 
Ilpo Nyyss?nen # biny
/* :-) */

From grisha at ispol.com  Tue Jul  4 12:11:22 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:23 2004
Subject: [mod_python] httplib: [notice] child pid 8937 exit signal
 Segmentation fault (11)
In-Reply-To: <m3k8f2q9p1.fsf@iki.fi>
Message-ID: <Pine.LNX.4.21.0007041158540.5022-100000@saturn.ispol.com>

Ilpo -

The code below worked for me without a hinch. This is on FreeBSD 4.0
Stable, Apache 1.3.12.

Anyone else on this list experiences this problem?

Grisha

On 4 Jul 2000, Ilpo Nyyss?nen wrote:

> 
> I tried to use urllib to retrieve some pictures dynamically, but the
> child dies with segmentation fault. This happens also with httplib,
> for example with the code below. The dying seems to happen when
> closing the connection.
> 
> -- clip --
> from mod_python import apache
> import httplib
> 
> def handler(req):
>     req.content_type = 'text/plain'
>     req.send_http_header()
>     
>     h = httplib.HTTP('www.python.org')
>     h.putrequest('GET', '/index.html')
>     h.putheader('Accept', 'text/html')
>     h.putheader('Accept', 'text/plain')
>     h.endheaders()
>     errcode, errmsg, headers = h.getreply()
>     if errcode == 200:
>         f = h.getfile()
>         req.write(f.read())
> 
>     return apache.OK
> -- clip --
> 
> -- 
> Ilpo Nyyss?nen # biny
> /* :-) */
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From grisha at ispol.com  Tue Jul  4 14:10:24 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:23 2004
Subject: [mod_python] US Independence Day release - 2.4.1
Message-ID: <Pine.LNX.4.21.0007041400470.5320-100000@saturn.ispol.com>

2.4.1, which is basically a couple of bugs fixed is available for
download.

For win32 users, the 2.4 DLL currently available for download should be
identical to 2.4.1, but you may want to update your apache.py file.

BTW, if there are any Win32 mod_python users out there - could you drop me
an e-mail? I'm just curious as to the actual number.

Happy 4th of July (to those who care about it)!

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com


From iny at iki.fi  Tue Jul  4 21:21:57 2000
From: iny at iki.fi (=?ISO-8859-1?Q?Ilpo_Nyyss=F6nen?=)
Date: Fri Jan  9 22:02:23 2004
Subject: [mod_python] httplib: [notice] child pid 8937 exit signal
 Segmentation fault (11)
In-Reply-To: <Pine.LNX.4.21.0007041158540.5022-100000@saturn.ispol.com>
Message-ID: <Pine.LNX.4.21.0007042112130.10834-200000@ypy.tky.hut.fi>

On Tue, 4 Jul 2000, Gregory Trubetskoy wrote:

> 
> Ilpo -
> 
> The code below worked for me without a hinch. This is on FreeBSD 4.0
> Stable, Apache 1.3.12.
> 
> Anyone else on this list experiences this problem?
> 
> Grisha
> 
> On 4 Jul 2000, Ilpo Nyyss?nen wrote:
> 
> > 
> > I tried to use urllib to retrieve some pictures dynamically, but the
> > child dies with segmentation fault. This happens also with httplib,
> > for example with the code below. The dying seems to happen when
> > closing the connection.

I forgot to mention that I have Apache 1.3.12 (this was just upgraded) in
Linux 2.2.13 (Red Hat).

I also attached a strace that I took few weeks ago.

-- 
Ilpo Nyyss?nen # biny
/* :-) */

-------------- next part --------------
socket(PF_INET, SOCK_DGRAM, IPPROTO_IP) = 6
connect(6, {sin_family=AF_INET, sin_port=htons(53), sin_addr=inet_addr("130.233.224.1")}, 16) = 0
send(6, "Z\355\1\0\0\1\0\0\0\0\0\0\3www\3"..., 28, 0) = 28
SYS_168(0xbfffd9b8, 0x1, 0x1388, 0x1388, 0xbfffd9b8) = 1
recvfrom(6, "Z\355\205\200\0\1\0\1\0\3\0\3\3w"..., 1024, 0, {sin_family=AF_INET, sin_port=htons(53), sin_addr=inet_addr("130.233.224.1")}, [16]) = 167
close(6)                                = 0
connect(5, {sin_family=AF_INET, sin_port=htons(80), sin_addr=inet_addr("130.233.220.31")}, 16) = 0
send(5, "GET / HTTP/1.0\r\n", 16, 0)    = 16
send(5, "Host: www.hut.fi\r\n", 18, 0)  = 18
send(5, "User-agent: Python-urllib/1.10\r"..., 32, 0) = 32
send(5, "\r\n", 2, 0)                   = 2
dup(5)                                  = 6
fcntl(6, F_GETFL)                       = 0x2 (flags O_RDWR)
fstat(6, {st_mode=033526, st_size=0, ...}) = 0
mmap(0, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x40615000
_llseek(0x6, 0, 0, 0xbffff1e4, 0x1)     = -1 ESPIPE (Illegal seek)
read(6, "HTTP/1.1 200 OK\r\nDate: Mon, 19"..., 1024) = 1024
close(5)                                = 0
connect(-1073745952, {...}, 1075363008) = 23
getpid()                                = 28286
open("/usr/tmp/@28286.test", O_WRONLY|O_CREAT|O_TRUNC, 0666) = 5
fstat(5, {st_mode=S_IFDIR|S_ISUID|0606, st_size=0, ...}) = 0
mmap(0, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x40618000
write(5, "blat", 4)                     = 4
close(5)                                = 0
munmap(0x40618000, 4096)                = 0
unlink("/usr/tmp/@28286.test")          = 0
getpid()                                = 28286
stat("/usr/tmp/@28286.1", 0xbffff318)   = -1 ENOENT (No such file or directory)
open("/usr/tmp/@28286.1", O_WRONLY|O_CREAT|O_TRUNC, 0666) = 5
brk(0x81a5000)                          = 0x81a5000
read(6, " href=\"http://www.hut.fi/Ajanko"..., 1024) = 875
read(6, "", 1024)                       = 0
fstat(5, {st_mode=S_IFDIR|S_ISUID|0606, st_size=0, ...}) = 0
mmap(0, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x40618000
read(6, "", 1024)                       = 0
close(6)                                = 0
munmap(0x40615000, 4096)                = 0
--- SIGSEGV (Segmentation fault) ---
chdir("/tmp")                           = 0
SYS_174(0xb, 0xbffff0bc, 0xbffff030, 0x8, 0xb) = 0
getpid()                                = 28286
kill(28286, SIGSEGV)                    = 0
sigreturn()                             = ? (mask now [])
--- SIGSEGV (Segmentation fault) ---
From morten at src.no  Sat Jul  8 14:43:59 2000
From: morten at src.no (Morten W. Petersen)
Date: Fri Jan  9 22:02:23 2004
Subject: [mod_python] Compiling on a Debian Potato with Apache binary (and apache-dev)
Message-ID: <Pine.LNX.4.21.0007081440220.31744-100000@lade.src.no>

I'm having problems compiling mod_python on a Debian 2.1; can anyone send
me a line that worked from them, compiling off of an Apache binary release
with apache-dev installed?

-Morten

-------------------------------------------------------------
How to reply to email:
  http://home.sol.no/~vidaandr/news/OBSquoting.html (norsk)
  http://home.sol.no/~vidaandr/news/FAQquoting.html (english)

Who is the bigger fool? The fool or the fool who follows him?


From richard at whitequeen.com  Thu Jul  6 21:13:04 2000
From: richard at whitequeen.com (richard offer)
Date: Fri Jan  9 22:02:23 2004
Subject: [mod_python] [ANN] slashbox - class to get/display slashdot.org news stories
Message-ID: <200007070413.e674D4510370@erij.whitequeen.com>

Hi,

Here's a quick hack of a class to get and format news stories from a
number of sites.

It was designed with mod_python in mind, so all you need to do is

import slashbox
...

def handler(req):
	...
    req.write(str(slashbox.Slashdot()))

To add the latest stories from slashdot to your page.

A number of other sites are included, its easy to add new ones simply
by sub-classing slashbox. The trick is to find the sites .rss/.rdf file.


You'll need the latest PyXML code.



richard.




# $Id: slashbox.py,v 1.2 2000/07/08 21:34:46 richard Exp $
# Copyright (c) 2000 Richard Offer <richard@whitequeen.com>. 
# All rights reserved.
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
# 
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
# 
# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL 
# Richard Offer BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN
# AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
# CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
# 
# Except as contained in this notice, the name of Richard Offer shall not be
# used in advertising or otherwise to promote the sale, use or other dealings
# in this Software without prior written authorization from Richard Offer.



#
#
# A python class to grab the Slashdot (and other sites using RSS/RDF) stories.


import stat
import xmllib
import urllib
import urlparse
import os
import time
import string
import sys
from xml.sax import saxlib,saxexts

class _myrdf(saxlib.HandlerBase):
	def __init__(self):
		self._in={}
		self._in["title"]=0
		self._in["link"]=0
		self._in["description"]=0
		self._txt={}
		self._txt["title"]=""
		self._txt["link"]=""
		self._txt["description"]=""

		self._stories=[]


	def startElement(self,ele,attr):
		if ele == 'item' :
			self._txt={}
			self._txt["title"]=""
			self._txt["link"]=""
			self._txt["description"]=""
		elif self._in.has_key(ele) :
			self._in[ele]=1
			
		else:
			pass

	def endElement(self,ele):
		if self._in.has_key(ele) :
			self._in[ele] = 0
			self._txt[ele] = string.join(string.split((self._txt[ele])))
		elif ele == 'item'  :
			self._stories.append(self._txt)

			
	
	def characters(self,ch,start,length):
		for i in self._in.keys():
				if self._in[i] == 1:
					self._txt[i] = self._txt[i] + ch[start:start+length]

	def stories(self):
		return self._stories

# class Site()

class slashbox:
	"""
Create a single slashbox.
  slashbox(url,freq)
		url is the url of the RSS/RDF file, freq is the update period (mins).
		The freq cannot be less than 30
  raw() 
		returns a list of stories (each story is stored in a dict).
  __str__() 
		returns a HTML table containing the stories.

Several subclasses are available, these already have the url defined,
so to get the headlines from slashdot.org simply do


>>> print Slashdot()

The list of built-in sites is 

	Slashdot()
	Freshmeat()
	SecurityFocus()
	Parnassus()
	LWN()
	Fool()
	LinuxNetNews()
	SourceForgeReleases()
	SourceForgeNews()


If you are using mod_python, you can embed a slashbox simply by

import slashbox
...

	req.write(str(slashbox.Slashdot()))


"""
	def __init__(self, url='http://slashdot.org/slashdot.rdf', freq=60):
		self._url=url
		if freq < 30:
			freq=30
		self._freq=freq
		_u=urlparse.urlparse(self._url)
		self._file=_u[1] + "-" + os.path.basename(url)
		if self._file == '':
			self._file = os.path.basename(url)

		self._file = "/tmp/slashbox-" + self._file

		self.site= _u[0]+ "://" + _u[1] + "/"
		self.name= _u[1]
		
		try:
			st=os.stat(self._file)
			if st[8] < ( time.time() - (self._freq*60) ):
				(fname,headers)=urllib.urlretrieve(self._url, self._file)	
		except OSError:
			(fname,headers)=urllib.urlretrieve(self._url,self._file)	

		fp=open(self._file)

		xmlp=saxexts.make_parser()

		self.dh=_myrdf()
		xmlp.setDocumentHandler(self.dh)
		xmlp.parseFile(fp)

	def stories(self):
		return self.dh.stories()
		

	def __str__(self):
		str="<SMALL>\n<TABLE BORDER=2 WIDTH=200>\n"
		str=str + '<TH><A HREF="%s">%s</A></TH>\n' % ( self.site,
				self.name )
		str=str + "<TR><TD>\n  <TABLE><TBODY>\n" 

		for i in self.dh.stories():
			str=str + '    <TR><TD><A HREF="%s">%s</A>' % ( i['link'],i['title'] )
			if i.has_key("description"):
				str=str + "<BR><SMALL>%s</SMALL>" % ( i['description'])
			str=str + '</TD></TR>\n' 
		str=str+"  </TBODY></TABLE></TD></TR>\n</TABLE></SMALL>\n\n"
		return str
		
	def setName(self,name):
		self.name=name



class Slashdot(slashbox):
	"""slashbox sub-class for Slashdot.org"""
	def __init__(self):
		_url='http://slashdot.org/slashdot.rdf'
		slashbox.__init__(self,url=_url)
		self.setName('Slashdot')

class Freshmeat(slashbox):
	"""slashbox sub-class for Freshmeat.net"""
	def __init__(self):
		_url='http://freshmeat.net/backend/fm.rdf'
		slashbox.__init__(self,url=_url)
		self.setName('Freshmeat')

class SecurityFocus(slashbox):
	"""slashbox sub-class for SecurityFocus.com"""
	def __init__(self):
		_url='http://www.securityfocus.com/topnews-rss.html'
		slashbox.__init__(self,url=_url)
		self.setName('Security Focus')

class Parnassus(slashbox):
	"""slashbox sub-class for the Vaults of Parnassus"""
	def __init__(self):
		_url='http://www.vex.net/parnassus/parnassus.rss'
		slashbox.__init__(self,url=_url)
		self.setName('Vaults of Parnassus')

class LWN(slashbox):
	"""slashbox sub-class for the Linux Weekly News"""
	def __init__(self):
		_url='http://lwn.net/headlines/rss'
		slashbox.__init__(self,url=_url)
		self.setName('Linux Weekly News')


class Fool(slashbox):
	"""slashbox sub-class for the Motley Fool"""
	def __init__(self):
		_url='http://www.fool.com/About/headlines/rss_headlines.asp'
		slashbox.__init__(self,url=_url)
		self.setName('The Motley Fool')

class LinuxNetNews(slashbox):
	"""slashbox sub-class for Linux Net News"""
	def __init__(self):
		_url='http://www.netnews.opensrc.org/index.rdf'
		slashbox.__init__(self,url=_url)
		self.setName('Linux Net News')

class SourceForgeReleases(slashbox):
	"""slashbox sub-class for new releases on SourceForge"""
	def __init__(self):
		_url='http://sourceforge.net/export/rss_sfnewreleases.php'
		slashbox.__init__(self,url=_url)
		self.setName('Sourceforge New Releases')

class SourceForgeNews(slashbox):
	"""slashbox sub-class for Project News at SourceForge"""
	def __init__(self):
		_url='http://sourceforge.net/export/rss_sfnews.php'
		slashbox.__init__(self,url=_url)
		self.setName('Sourceforge News')



if __name__ == "__main__":

	print Slashdot()	

-- 
richard offer @ home 
          84 FE 48 E4 74 D0 26 D4  31 8E B6 86 98 74 E2 7C  8A FB BF A3
___________________________________http://216.185.15.144/users/richard/

From martin at src.no  Sun Jul  9 02:40:41 2000
From: martin at src.no (Martin Jenssen)
Date: Fri Jan  9 22:02:23 2004
Subject: [mod_python] Compiling on a Debian Potato with Apache binary
 (and apache-dev)
In-Reply-To: <Pine.LNX.4.21.0007081440220.31744-100000@lade.src.no>
Message-ID: <Pine.LNX.4.21.0007090231050.9988-100000@lade.src.no>

On Sat, 8 Jul 2000, Morten W. Petersen wrote:

> I'm having problems compiling mod_python on a Debian 2.1; can anyone send
> me a line that worked from them, compiling off of an Apache binary release
> with apache-dev installed?

I am running Debian GNU/Linux 2.2 (potato), and have the following
packages installed:

	apache 1.3.12-1
	apache-common 1.3.12-1
	apache-dev 1.3.12-1

To compile this, I just did it via the method mentioned in the
documentation (as a Apache DSO):

	apxs -I /usr/include/python1.5 -c mod_python.c \
	/usr/lib/python1.5/config/libpython1.5.a -lpthread

Then I copied the mod_python.so file to /usr/lib/apache/1.3/ and added the
following line *before* any other `LoadModule'-line in
/etc/apache/httpd.conf:

	LoadModule python_module /usr/lib/apache/1.3/mod_python.so

The rest is in the documentation.  By the way, I used the official 2.4.1
release.


Martin Jenssen



From erno at iki.fi  Sun Jul  9 03:49:08 2000
From: erno at iki.fi (Erno Kuusela)
Date: Fri Jan  9 22:02:23 2004
Subject: [mod_python] Compiling on a Debian Potato with Apache binary (and apache-dev)
In-Reply-To: <Pine.LNX.4.21.0007090231050.9988-100000@lade.src.no>; from martin@src.no on Sun, Jul 09, 2000 at 02:40:41AM +0200
References: <Pine.LNX.4.21.0007081440220.31744-100000@lade.src.no> <Pine.LNX.4.21.0007090231050.9988-100000@lade.src.no>
Message-ID: <20000709034908.F8149@lib.hel.fi>

| I am running Debian GNU/Linux 2.2 (potato) [...]

| To compile this, I just did it via the method mentioned in the
| documentation (as a Apache DSO):
| 
| 	apxs -I /usr/include/python1.5 -c mod_python.c \
| 	/usr/lib/python1.5/config/libpython1.5.a -lpthread

the debian-packaged python also comes with a shared library,
so linking with -lpython1.5 instead will save you some
disk space and pehaps ram.

  -- erno

From morten at src.no  Sun Jul  9 11:54:56 2000
From: morten at src.no (Morten W. Petersen)
Date: Fri Jan  9 22:02:23 2004
Subject: [mod_python] Compiling on a Debian Potato with Apache binary
 (and apache-dev)
In-Reply-To: <Pine.LNX.4.21.0007090231050.9988-100000@lade.src.no>
Message-ID: <Pine.LNX.4.21.0007091153470.27686-100000@lade.src.no>

> To compile this, I just did it via the method mentioned in the
> documentation (as a Apache DSO):
> 
> 	apxs -I /usr/include/python1.5 -c mod_python.c \
> 	/usr/lib/python1.5/config/libpython1.5.a -lpthread

gaffel:/tmp/mod_python-2.4.1/src# gcc -DLINUX=2 -DUSE_HSREGEX -fpic \
	-DSHARED_MODULE -I/usr/include/apache-1.3 \
	-I/usr/include/python1.5 -c mod_python.c
mod_python.c:418: structure has no member named `vlist_validator'
mod_python.c:418: initializer element for `request_memberlist[29].offset'
is not constant

----
And now I'm a bit off. (...) Any ideas?

Regards, Morten


From michael at stroeder.com  Sun Jul  9 13:20:20 2000
From: michael at stroeder.com (Michael =?iso-8859-1?Q?Str=C3=B6der?=)
Date: Fri Jan  9 22:02:23 2004
Subject: [mod_python] mod_python, HTTP headers and CRLF
Message-ID: <39685FF4.246ED56F@stroeder.com>

HI!

I experienced some problems with sending HTTP headers. I'm
generating HTTP header lines separated with \r\n since HTTP standard
1.0 says in section 4.2 "Message Headers":

----------------------------- snip ------------------------------
       HTTP-header    = field-name ":" [ field-value ] CRLF
----------------------------- snip ------------------------------

In apache.py class CGIStdout method write() the headers are splitted
by using \n\n as separator which fails if scripts are sending header
conform to HTTP specs above. Here's a patch by using \r\n\r\n as
second possible
separator:

----------------------------- snip ------------------------------
395a396,400
> 
>             if len(ss) < 2:
>               # Second try with splitting by using \r\n\r\n as separator
>               ss = string.split(self.headers, '\r\n\r\n', 1)
> 
----------------------------- snip ------------------------------

Would be nice if this patch makes its way into the mod_python
distribution.

Ciao, Michael.

From martin at src.no  Sun Jul  9 15:27:12 2000
From: martin at src.no (Martin Jenssen)
Date: Fri Jan  9 22:02:23 2004
Subject: [mod_python] Compiling on a Debian Potato with Apache binary (and apache-dev)
In-Reply-To: <Pine.LNX.4.21.0007091153470.27686-100000@lade.src.no>; from morten@src.no on Sun, Jul 09, 2000 at 11:54:56AM +0200
References: <Pine.LNX.4.21.0007090231050.9988-100000@lade.src.no> <Pine.LNX.4.21.0007091153470.27686-100000@lade.src.no>
Message-ID: <20000709152712.A1317@localhost>

On Sun, Jul 09, 2000 at 11:54:56AM +0200, Morten W. Petersen wrote:

| gaffel:/tmp/mod_python-2.4.1/src# gcc -DLINUX=2 -DUSE_HSREGEX -fpic \
| 	-DSHARED_MODULE -I/usr/include/apache-1.3 \
| 	-I/usr/include/python1.5 -c mod_python.c
| mod_python.c:418: structure has no member named `vlist_validator'
| mod_python.c:418: initializer element for `request_memberlist[29].offset'
| is not constant

It seems that you are using an older collection of the apache C header
files.  Check if your /usr/include/apache-1.3/httpd.h have a line
defining vlist_validator.


Martin Jenssen


From grisha at ispol.com  Mon Jul 10 08:13:21 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:23 2004
Subject: [mod_python] mod_python, HTTP headers and CRLF
In-Reply-To: <39685FF4.246ED56F@stroeder.com>
Message-ID: <Pine.LNX.4.21.0007100812370.5519-100000@saturn.ispol.com>

This is clearly a bug and I'll make sure it's fixed. Thanks for pointing
it out.

Grisha

On Sun, 9 Jul 2000, Michael Str??der wrote:

> HI!
> 
> I experienced some problems with sending HTTP headers. I'm
> generating HTTP header lines separated with \r\n since HTTP standard
> 1.0 says in section 4.2 "Message Headers":
> 
> ----------------------------- snip ------------------------------
>        HTTP-header    = field-name ":" [ field-value ] CRLF
> ----------------------------- snip ------------------------------
> 
> In apache.py class CGIStdout method write() the headers are splitted
> by using \n\n as separator which fails if scripts are sending header
> conform to HTTP specs above. Here's a patch by using \r\n\r\n as
> second possible
> separator:
> 
> ----------------------------- snip ------------------------------
> 395a396,400
> > 
> >             if len(ss) < 2:
> >               # Second try with splitting by using \r\n\r\n as separator
> >               ss = string.split(self.headers, '\r\n\r\n', 1)
> > 
> ----------------------------- snip ------------------------------
> 
> Would be nice if this patch makes its way into the mod_python
> distribution.
> 
> Ciao, Michael.
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From list-modpython at ccraig.org  Tue Jul 11 22:23:10 2000
From: list-modpython at ccraig.org (list-modpython@ccraig.org)
Date: Fri Jan  9 22:02:23 2004
Subject: [mod_python] Segfault on Apache Startup
Message-ID: <m3lmz8dr3l.fsf@elbereth.ccraig.org>

#LoadModule mmap_static_module modules/mod_mmap_static.so
LoadModule python_module modules/mod_python.so
LoadModule vhost_alias_module modules/mod_vhost_alias.so
LoadModule env_module         modules/mod_env.so
LoadModule config_log_module  modules/mod_log_config.so
LoadModule agent_log_module   modules/mod_log_agent.so
LoadModule referer_log_module modules/mod_log_referer.so
#LoadModule mime_magic_module  modules/mod_mime_magic.so
LoadModule mime_module        modules/mod_mime.so
LoadModule negotiation_module modules/mod_negotiation.so
LoadModule status_module      modules/mod_status.so
LoadModule info_module        modules/mod_info.so
LoadModule includes_module    modules/mod_include.so
LoadModule autoindex_module   modules/mod_autoindex.so
LoadModule dir_module         modules/mod_dir.so
LoadModule cgi_module         modules/mod_cgi.so
LoadModule asis_module        modules/mod_asis.so
LoadModule imap_module        modules/mod_imap.so
LoadModule action_module      modules/mod_actions.so
#LoadModule speling_module     modules/mod_speling.so
LoadModule userdir_module     modules/mod_userdir.so
LoadModule alias_module       modules/mod_alias.so
LoadModule rewrite_module     modules/mod_rewrite.so
LoadModule access_module      modules/mod_access.so
LoadModule auth_module        modules/mod_auth.so
LoadModule anon_auth_module   modules/mod_auth_anon.so
LoadModule db_auth_module     modules/mod_auth_db.so
LoadModule digest_module      modules/mod_digest.so
LoadModule proxy_module       modules/libproxy.so
#LoadModule cern_meta_module   modules/mod_cern_meta.so
LoadModule expires_module     modules/mod_expires.so
LoadModule headers_module     modules/mod_headers.so
LoadModule usertrack_module   modules/mod_usertrack.so
#LoadModule example_module     modules/mod_example.so
#LoadModule unique_id_module   modules/mod_unique_id.so
LoadModule setenvif_module    modules/mod_setenvif.so
#LoadModule bandwidth_module   modules/mod_bandwidth.so
#LoadModule put_module		modules/mod_put.so

# Extra Modules
#LoadModule perl_module        modules/libperl.so
#LoadModule php_module         modules/mod_php.so
#LoadModule php3_module        modules/libphp3.so


#  Reconstruction of the complete module list from all available modules
#  (static and shared ones) to achieve correct module execution order.
#  [WHENEVER YOU CHANGE THE LOADMODULE SECTION ABOVE UPDATE THIS, TOO]
ClearModuleList
AddModule mod_python.c
#AddModule mod_mmap_static.c
AddModule mod_vhost_alias.c
AddModule mod_env.c
AddModule mod_log_config.c
AddModule mod_log_agent.c
AddModule mod_log_referer.c
#AddModule mod_mime_magic.c
AddModule mod_mime.c
AddModule mod_negotiation.c
AddModule mod_status.c
AddModule mod_info.c
AddModule mod_include.c
AddModule mod_autoindex.c
AddModule mod_dir.c
AddModule mod_cgi.c
AddModule mod_asis.c
AddModule mod_imap.c
AddModule mod_actions.c
#AddModule mod_speling.c
AddModule mod_userdir.c
AddModule mod_alias.c
AddModule mod_rewrite.c
AddModule mod_access.c
AddModule mod_auth.c
AddModule mod_auth_anon.c
AddModule mod_auth_db.c
AddModule mod_digest.c
AddModule mod_proxy.c
#AddModule mod_cern_meta.c
AddModule mod_expires.c
AddModule mod_headers.c
AddModule mod_usertrack.c
#AddModule mod_example.c
#AddModule mod_unique_id.c
AddModule mod_so.c
AddModule mod_setenvif.c
#AddModule mod_bandwidth.c
#AddModule mod_put.c

# Extra Modules
#AddModule mod_perl.c
#AddModule mod_php.c
#AddModule mod_php3.c
-------------- next part --------------
GNU gdb 4.18
Copyright 1998 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "i386-redhat-linux"...
(no debugging symbols found)...
Core was generated by `httpd -X'.
Program terminated with signal 11, Segmentation fault.
Reading symbols from /lib/libm.so.6...done.
Reading symbols from /lib/libcrypt.so.1...done.
Reading symbols from /lib/libdb.so.3...done.
Reading symbols from /lib/libdl.so.2...done.
Reading symbols from /lib/libc.so.6...done.
Reading symbols from /lib/ld-linux.so.2...done.
Reading symbols from /lib/libnss_files.so.2...done.
Reading symbols from /etc/httpd/modules/mod_python.so...done.
Reading symbols from /lib/libpthread.so.0...done.
Reading symbols from /etc/httpd/modules/mod_vhost_alias.so...done.
Reading symbols from /etc/httpd/modules/mod_env.so...done.
Reading symbols from /etc/httpd/modules/mod_log_config.so...done.
Reading symbols from /etc/httpd/modules/mod_log_agent.so...done.
Reading symbols from /etc/httpd/modules/mod_log_referer.so...done.
Reading symbols from /etc/httpd/modules/mod_mime.so...done.
Reading symbols from /etc/httpd/modules/mod_negotiation.so...done.
Reading symbols from /etc/httpd/modules/mod_status.so...done.
Reading symbols from /etc/httpd/modules/mod_info.so...done.
Reading symbols from /etc/httpd/modules/mod_include.so...done.
Reading symbols from /etc/httpd/modules/mod_autoindex.so...done.
Reading symbols from /etc/httpd/modules/mod_dir.so...done.
Reading symbols from /etc/httpd/modules/mod_cgi.so...done.
Reading symbols from /etc/httpd/modules/mod_asis.so...done.
Reading symbols from /etc/httpd/modules/mod_imap.so...done.
Reading symbols from /etc/httpd/modules/mod_actions.so...done.
Reading symbols from /etc/httpd/modules/mod_userdir.so...done.
Reading symbols from /etc/httpd/modules/mod_alias.so...done.
Reading symbols from /etc/httpd/modules/mod_rewrite.so...done.
Reading symbols from /etc/httpd/modules/mod_access.so...done.
Reading symbols from /etc/httpd/modules/mod_auth.so...done.
Reading symbols from /etc/httpd/modules/mod_auth_anon.so...done.
Reading symbols from /etc/httpd/modules/mod_auth_db.so...done.
Reading symbols from /etc/httpd/modules/mod_digest.so...done.
Reading symbols from /etc/httpd/modules/libproxy.so...done.
Reading symbols from /etc/httpd/modules/mod_expires.so...done.
Reading symbols from /etc/httpd/modules/mod_headers.so...done.
Reading symbols from /etc/httpd/modules/mod_usertrack.so...done.
Reading symbols from /etc/httpd/modules/mod_setenvif.so...done.
#0  0x4021a047 in ?? () from /lib/libpthread.so.0
(gdb) bt
#0  0x4021a047 in ?? () from /lib/libpthread.so.0
#1  0x401352eb in __getpwnam_r (name=0x80a9dc4 "nobody", resbuf=0x40196240, 
    buffer=0x80a6f08 "nobody", buflen=1024, result=0xbfffd5fc)
    at ../nss/getXXbyYY_r.c:182
#2  0x40134ba0 in getpwnam () at ../nss/getXXbyYY.c:156
#3  0x8064c26 in ap_uname2id ()
#4  0x8057043 in ap_exists_config_define ()
#5  0x8053e8c in ap_clear_module_list ()
#6  0x80540cc in ap_handle_command ()
#7  0x8054118 in ap_srm_command_loop ()
#8  0x8054487 in ap_process_resource_config ()
#9  0x8054b04 in ap_read_config ()
#10 0x805bf97 in ap_child_terminate ()
#11 0x805c65f in main ()
#12 0x400bc9cb in __libc_start_main () at ../sysdeps/generic/libc-start.c:122
(gdb) 
-------------- next part --------------

I'm using mod_python version 2.4.1 on a RedHat 6.2 machine,
kernel 2.2.16 and Apache 1.3.12

The module was compiled with the following command:

apxs -c -I/usr/include/python1.5 -L/usr/lib/python1.5/config \
-lpython1.5 -lpthread -lieee -lm -ldl mod_python.c


I'm including a complete list of module loads and a backtrace of the
core dump.  This segfault does not occur if the LoadModule for
mod_python are commented out, but does if only the AddModule is.

I hope this was somewhat helpful,

-- 
Christopher A. Craig <ccraig@ccraig.org>
When you say "I wrote a program that crashed Windows", people just stare at
you blankly and say "Hey, I got those with the system, *for free*". - Linus
http://www.ccraig.org
From richard at whitequeen.com  Sun Jul  9 06:30:47 2000
From: richard at whitequeen.com (richard offer)
Date: Fri Jan  9 22:02:23 2004
Subject: [mod_python] Segfault on Apache Startup
In-Reply-To: list-modpython@ccraig.org
       "[mod_python] Segfault on Apache Startup" (Jul 11, 10:23pm)
Message-ID: <200007091330.e69DUlZ14193@erij.whitequeen.com>

* $ from list-modpython@ccraig.org at "11-Jul:10:23pm" | sed "1,$s/^/* /" 
*
* #0  0x4021a047 in ?? () from /lib/libpthread.so.0
* (gdb) bt
* #0  0x4021a047 in ?? () from /lib/libpthread.so.0
* #1  0x401352eb in __getpwnam_r (name=0x80a9dc4 "nobody", resbuf=0x40196240, 
*     buffer=0x80a6f08 "nobody", buflen=1024, result=0xbfffd5fc)
*     at ../nss/getXXbyYY_r.c:182
* #2  0x40134ba0 in getpwnam () at ../nss/getXXbyYY.c:156
* #3  0x8064c26 in ap_uname2id ()
* #4  0x8057043 in ap_exists_config_define ()
* #5  0x8053e8c in ap_clear_module_list ()
* #6  0x80540cc in ap_handle_command ()
* #7  0x8054118 in ap_srm_command_loop ()
* #8  0x8054487 in ap_process_resource_config ()
* #9  0x8054b04 in ap_read_config ()
* #10 0x805bf97 in ap_child_terminate ()
* #11 0x805c65f in main ()
* #12 0x400bc9cb in __libc_start_main () at ../sysdeps/generic/libc-start.c:122
* (gdb) 
* --=-=-=
* 
* 
* I'm using mod_python version 2.4.1 on a RedHat 6.2 machine,
* kernel 2.2.16 and Apache 1.3.12
* 
* The module was compiled with the following command:
* 
* apxs -c -I/usr/include/python1.5 -L/usr/lib/python1.5/config \
* -lpython1.5 -lpthread -lieee -lm -ldl mod_python.c

You probably want to link python in statically, I did something like

apxs -c -I/usr/include/python1.5 mod_python.c
/usr/lib/python1.5/config/libpython1.5.a -lpthread

* 
* 
* I'm including a complete list of module loads and a backtrace of the
* core dump.  This segfault does not occur if the LoadModule for
* mod_python are commented out, but does if only the AddModule is.
* 
* I hope this was somewhat helpful,

I assume that you are consistant in the threading (both python and mod_python are threaded or neither).


However something that I found was that trying to use a threaded python
in a chroot'ed environment didn't work. Threaded python worked okay
outside the chroot and a non-threaded python worked okay in th chroot.

* Christopher A. Craig <ccraig@ccraig.org>


richard.


-- 
richard offer @ home 
          84 FE 48 E4 74 D0 26 D4  31 8E B6 86 98 74 E2 7C  8A FB BF A3
___________________________________http://216.185.15.144/users/richard/

From grisha at ispol.com  Wed Jul 12 13:46:15 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:23 2004
Subject: [mod_python] embedded Python
Message-ID: <Pine.LNX.4.21.0007121334500.14643-100000@saturn.ispol.com>


Based on what I've seen in the newsgroups and the e-mails that I often
get, there seems to be a strong interest in html-embedded Python, in fact,
from what I gather, some people went through the trouble of downloading
and installing mod_python with that expectation only to find out that it
does no such thing.

I personally think it would be extremely nice if mod_python came bundled
with a (reliable and usable) handler that processed Python embedded within
HTML. There a couple of questions that I have about it though -

1. First - is there really a great need for embedded Python? Are a lot of
people using PMZ and similar things and want them to work with mod_python?

2. Would this be something that is more desired than other fancy things
like dynamic handler registration and a deeper integration with apache
api? In other words, would you rather have a cool embedded Python thing
than the ability to create your own Apache configuration directives?

3. Should embedded Python be a project of its own, or would it be
appropriate to include it in the scope of mod_python?

Any other comments, suggestions, pointers, etc are appreciated.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com


From richard at whitequeen.com  Sun Jul  9 09:19:04 2000
From: richard at whitequeen.com (richard offer)
Date: Fri Jan  9 22:02:23 2004
Subject: [mod_python] embedded Python
In-Reply-To: Gregory Trubetskoy <grisha@ispol.com>
       "[mod_python] embedded Python" (Jul 12,  1:46pm)
Message-ID: <200007091619.e69GJ4V14406@erij.whitequeen.com>

* $ from grisha@ispol.com at "12-Jul: 1:46pm" | sed "1,$s/^/* /" 
*
*
* 
* 
* Based on what I've seen in the newsgroups and the e-mails that I often
* get, there seems to be a strong interest in html-embedded Python, in fact,
* from what I gather, some people went through the trouble of downloading
* and installing mod_python with that expectation only to find out that it
* does no such thing.
* 
* I personally think it would be extremely nice if mod_python came bundled
* with a (reliable and usable) handler that processed Python embedded within
* HTML. There a couple of questions that I have about it though -
* 
* 1. First - is there really a great need for embedded Python? Are a lot of
* people using PMZ and similar things and want them to work with mod_python?
* 
* 2. Would this be something that is more desired than other fancy things
* like dynamic handler registration and a deeper integration with apache
* api? In other words, would you rather have a cool embedded Python thing
* than the ability to create your own Apache configuration directives?
* 
* 3. Should embedded Python be a project of its own, or would it be
* appropriate to include it in the scope of mod_python?

I think it belongs in mod_python, I see a sort of spectrum, at one end
you have an HTML file that has a few lines of Python to replace a SSI,
at the other full python programs that happen to spit out HTML. However,
you could argue that for the HTML case, the startup time for an external
intrepreter would be even more excessive than a large python application.

I could also see how it could be useful to be able to have different
handlers in the embedded code (say to display different information
depending on whether you have authenticated yourself). But this okay to
leave until version n+1. :-)

Is it possible to have multiple (completely distinct) apps in the same
directory ?

I'm biased, I'm just an average engineer, someone who'd rather write
code to spit out HTML, than HTML :-)

*   Gregory (Grisha) Trubetskoy
*        grisha@ispol.com
* 

richard.

-- 
richard offer @ home 
          84 FE 48 E4 74 D0 26 D4  31 8E B6 86 98 74 E2 7C  8A FB BF A3
___________________________________http://216.185.15.144/users/richard/

From sylvan at ravinet.com  Thu Jul 13 02:12:15 2000
From: sylvan at ravinet.com (Sylvan Ravinet)
Date: Fri Jan  9 22:02:23 2004
Subject: [mod_python] embedded Python
References: <Pine.LNX.4.21.0007121334500.14643-100000@saturn.ispol.com>
Message-ID: <396CFB4F.4B0B12CE@ravinet.com>

hello,

Gregory Trubetskoy wrote:
> 
> Based on what I've seen in the newsgroups and the e-mails that I often
> get, there seems to be a strong interest in html-embedded Python, in fact,
> from what I gather, some people went through the trouble of downloading
> and installing mod_python with that expectation only to find out that it
> does no such thing.

I'm among those...

> I personally think it would be extremely nice if mod_python came bundled
> with a (reliable and usable) handler that processed Python embedded within
> HTML.

I fully agree.

>There a couple of questions that I have about it though -
> 
> 1. First - is there really a great need for embedded Python? Are a lot of
> people using PMZ and similar things and want them to work with mod_python?

I'm not using PMZ, but I tried moderately to make it work with
mod_python. I have to say that this Handler process is still cryptic to
me.

> 2. Would this be something that is more desired than other fancy things
> like dynamic handler registration and a deeper integration with apache
> api? In other words, would you rather have a cool embedded Python thing
> than the ability to create your own Apache configuration directives?

Is that so difficult to implement? Isn't this PMZ already usable for
this purpose? (of course, with a good knowledge of mod_python)

> 3. Should embedded Python be a project of its own, or would it be
> appropriate to include it in the scope of mod_python?

Why another project? As a dedicated python handler for mod_python, that
sounds fine to me. (that can be only one example of mod_python use,
really good indeed)

Thank you for the good work already put in mod_python,

Best regards,

-Sylvan

--
Do, or do not. There is no try. -Yoda
Sylvan Ravinet: http://www.ravinet.com/sylvan/contact

From gtalvola at nameconnector.com  Thu Jul 13 09:35:55 2000
From: gtalvola at nameconnector.com (Geoff Talvola)
Date: Fri Jan  9 22:02:23 2004
Subject: [mod_python] embedded Python
References: <Pine.LNX.4.21.0007121334500.14643-100000@saturn.ispol.com> <396CFB4F.4B0B12CE@ravinet.com>
Message-ID: <396DC5BB.BF4A741E@NameConnector.com>

One project that allows embedding of Python in HTML is WebWare for Python, which
has a Python Server Pages component.  See http://webware.sourceforge.net/ for
details.

WebWare is still in Alpha phase, but it looks quite useful already.  It has a
number of nice features such as Session objects to automatically handle session
data, and the ability to write web applications in an object-oriented manner.
You can mix and match Python Server Pages with pages that are implemented as
Python classes.

And it should work with mod_python on Linux -- I remember some messages on the
mailing list to that effect.  I'm planning on trying to get it to work with
mod_python on Windows NT, which I don't think anyone has attempted yet.  You can
also use it with plain old CGI (which will be slower) or FastCGI.

--


- Geoff Talvola
  Parlance Corporation
  gtalvola@NameConnector.com


From grisha at ispol.com  Thu Jul 13 17:26:31 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:23 2004
Subject: [mod_python] embedded Python
In-Reply-To: <396DC5BB.BF4A741E@NameConnector.com>
Message-ID: <Pine.LNX.4.21.0007131725240.19178-100000@saturn.ispol.com>

If that thing works reliably, then we can just put a pointer to it as a
"recommended solution" for this sort of thing with mod_python on the
website or the faq somewhere.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Thu, 13 Jul 2000, Geoff Talvola wrote:

> One project that allows embedding of Python in HTML is WebWare for Python, which
> has a Python Server Pages component.  See http://webware.sourceforge.net/ for
> details.
> 
> WebWare is still in Alpha phase, but it looks quite useful already.  It has a
> number of nice features such as Session objects to automatically handle session
> data, and the ability to write web applications in an object-oriented manner.
> You can mix and match Python Server Pages with pages that are implemented as
> Python classes.
> 
> And it should work with mod_python on Linux -- I remember some messages on the
> mailing list to that effect.  I'm planning on trying to get it to work with
> mod_python on Windows NT, which I don't think anyone has attempted yet.  You can
> also use it with plain old CGI (which will be slower) or FastCGI.
> 
> --
> 
> 
> - Geoff Talvola
>   Parlance Corporation
>   gtalvola@NameConnector.com
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From jtravis at cse.unl.edu  Thu Jul 13 17:01:19 2000
From: jtravis at cse.unl.edu (Jon Travis)
Date: Fri Jan  9 22:02:23 2004
Subject: [mod_python] embedded Python
In-Reply-To: <396DC5BB.BF4A741E@NameConnector.com> from Geoff Talvola at "Jul
 13, 2000 09:35:55 am"
Message-ID: <200007132201.RAA12712709@cse.unl.edu>

I don't know if it is inappropriate to post this, but:

Another project that already allows embedded Python is the mod_snake
project @ http://modsnake.sourceforge.net

-- Jon


> One project that allows embedding of Python in HTML is WebWare for Python, which
> has a Python Server Pages component.  See http://webware.sourceforge.net/ for
> details.
> 
> WebWare is still in Alpha phase, but it looks quite useful already.  It has a
> number of nice features such as Session objects to automatically handle session
> data, and the ability to write web applications in an object-oriented manner.
> You can mix and match Python Server Pages with pages that are implemented as
> Python classes.
> 
> And it should work with mod_python on Linux -- I remember some messages on the
> mailing list to that effect.  I'm planning on trying to get it to work with
> mod_python on Windows NT, which I don't think anyone has attempted yet.  You can
> also use it with plain old CGI (which will be slower) or FastCGI.
> 
> --
> 
> 
> - Geoff Talvola
>   Parlance Corporation
>   gtalvola@NameConnector.com
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From grisha at ispol.com  Thu Jul 13 18:53:36 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:23 2004
Subject: [mod_python] embedded Python
In-Reply-To: <200007132201.RAA12712709@cse.unl.edu>
Message-ID: <Pine.LNX.4.21.0007131852280.19470-100000@saturn.ispol.com>

On Thu, 13 Jul 2000, Jon Travis wrote:

> I don't know if it is inappropriate to post this, but:
> 
> Another project that already allows embedded Python is the mod_snake
> project @ http://modsnake.sourceforge.net

Yeah, but who wants to use mod_snake?

(Juuust kidding!!!!)

Grisha


From gstein at lyra.org  Thu Jul 13 16:16:47 2000
From: gstein at lyra.org (Greg Stein)
Date: Fri Jan  9 22:02:23 2004
Subject: [mod_python] embedded Python
In-Reply-To: <Pine.LNX.4.21.0007131852280.19470-100000@saturn.ispol.com>; from grisha@ispol.com on Thu, Jul 13, 2000 at 06:53:36PM -0400
References: <200007132201.RAA12712709@cse.unl.edu> <Pine.LNX.4.21.0007131852280.19470-100000@saturn.ispol.com>
Message-ID: <20000713161647.F29590@lyra.org>

What cracks me up, is that Python was not named after the snake. So
mod_snake is a complete misnomer :-)

[ Python was named after Monty Python's Flying Circus ]

Cheers,
-g

On Thu, Jul 13, 2000 at 06:53:36PM -0400, Gregory Trubetskoy wrote:
> 
> On Thu, 13 Jul 2000, Jon Travis wrote:
> 
> > I don't know if it is inappropriate to post this, but:
> > 
> > Another project that already allows embedded Python is the mod_snake
> > project @ http://modsnake.sourceforge.net
> 
> Yeah, but who wants to use mod_snake?
> 
> (Juuust kidding!!!!)
> 
> Grisha
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python

-- 
Greg Stein, http://www.lyra.org/

From jtravis at cse.unl.edu  Thu Jul 13 18:25:29 2000
From: jtravis at cse.unl.edu (Jon Travis)
Date: Fri Jan  9 22:02:24 2004
Subject: [mod_python] embedded Python
In-Reply-To: <20000713161647.F29590@lyra.org> from Greg Stein at "Jul 13, 2000
 04:16:47 pm"
Message-ID: <200007132325.SAA14020407@cse.unl.edu>

I realize where the name came from ;-)  I couldn't think of
anything that would work well, like, mod_spamity_spam, or 
ministry_of_apache_modules, so I decided this was about as
good as I could do.  Originally it was mod_snakey, but .. ya know..
one can only be soooo lame.  ;-)

-- Jon


> What cracks me up, is that Python was not named after the snake. So
> mod_snake is a complete misnomer :-)
> 
> [ Python was named after Monty Python's Flying Circus ]
> 
> Cheers,
> -g
> 
> On Thu, Jul 13, 2000 at 06:53:36PM -0400, Gregory Trubetskoy wrote:
> > 
> > On Thu, 13 Jul 2000, Jon Travis wrote:
> > 
> > > I don't know if it is inappropriate to post this, but:
> > > 
> > > Another project that already allows embedded Python is the mod_snake
> > > project @ http://modsnake.sourceforge.net
> > 
> > Yeah, but who wants to use mod_snake?
> > 
> > (Juuust kidding!!!!)
> > 
> > Grisha
> > 
> > _______________________________________________
> > Mod_python mailing list
> > Mod_python@modpython.org
> > http://www.modpython.org/mailman/listinfo/mod_python
> 
> -- 
> Greg Stein, http://www.lyra.org/
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From grisha at ispol.com  Thu Jul 13 23:17:03 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:24 2004
Subject: [mod_python] embedded Python
In-Reply-To: <200007132325.SAA14020407@cse.unl.edu>
Message-ID: <Pine.LNX.4.21.0007132301530.20200-100000@saturn.ispol.com>

How about mod_monty?

Getting more to the point though - I am a proponent of the idea that
competition in the open source is not a good thing. It makes the life of
users more complicated.... I'd much rather there was one module that was
done right than several half-ass ones, like what we have now.

Grisha


On Thu, 13 Jul 2000, Jon Travis wrote:

> I realize where the name came from ;-)  I couldn't think of
> anything that would work well, like, mod_spamity_spam, or 
> ministry_of_apache_modules, so I decided this was about as
> good as I could do.  Originally it was mod_snakey, but .. ya know..
> one can only be soooo lame.  ;-)
> 
> -- Jon
> 
> 
> > What cracks me up, is that Python was not named after the snake. So
> > mod_snake is a complete misnomer :-)
> > 
> > [ Python was named after Monty Python's Flying Circus ]
> > 
> > Cheers,
> > -g
> > 
> > On Thu, Jul 13, 2000 at 06:53:36PM -0400, Gregory Trubetskoy wrote:
> > > 
> > > On Thu, 13 Jul 2000, Jon Travis wrote:
> > > 
> > > > I don't know if it is inappropriate to post this, but:
> > > > 
> > > > Another project that already allows embedded Python is the mod_snake
> > > > project @ http://modsnake.sourceforge.net
> > > 
> > > Yeah, but who wants to use mod_snake?
> > > 
> > > (Juuust kidding!!!!)
> > > 
> > > Grisha
> > > 
> > > _______________________________________________
> > > Mod_python mailing list
> > > Mod_python@modpython.org
> > > http://www.modpython.org/mailman/listinfo/mod_python
> > 
> > -- 
> > Greg Stein, http://www.lyra.org/
> > _______________________________________________
> > Mod_python mailing list
> > Mod_python@modpython.org
> > http://www.modpython.org/mailman/listinfo/mod_python
> > 
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From richard at whitequeen.com  Thu Jul 13 17:27:52 2000
From: richard at whitequeen.com (richard offer)
Date: Fri Jan  9 22:02:24 2004
Subject: [mod_python] embedded Python
In-Reply-To: Gregory Trubetskoy <grisha@ispol.com>
       "Re: [mod_python] embedded Python" (Jul 13, 11:17pm)
Message-ID: <200007140027.e6E0RqB03344@erij.whitequeen.com>

* $ from grisha@ispol.com at "13-Jul:11:17pm" | sed "1,$s/^/* /" 
*
*
* 
* How about mod_monty?

mod_fullmonty ?

* 
* Getting more to the point though - I am a proponent of the idea that
* competition in the open source is not a good thing. It makes the life of
* users more complicated.... I'd much rather there was one module that was
* done right than several half-ass ones, like what we have now.

So, what do you see as the strengths and weaknesses of each ? 

* 
* Grisha
* 

richard.

-- 
richard offer @ home 
          84 FE 48 E4 74 D0 26 D4  31 8E B6 86 98 74 E2 7C  8A FB BF A3
___________________________________http://216.185.15.144/users/richard/

From rsalz at CaveoSystems.com  Sat Jul 15 22:31:36 2000
From: rsalz at CaveoSystems.com (rsalz@CaveoSystems.com)
Date: Fri Jan  9 22:02:24 2004
Subject: [mod_python] Swig, and mod_ssl
Message-ID: <200007160231.WAA04120@pc1.caveosystems.com>

Swig (http://www.swig.org) is a "compiler" that can parse most C
header files and automatically generate code for Perl, Tcl, Python,
and Java.  At a rough guess, approximately half of mod_python.c could
be replaced by a couple-dozen lines.  I wonder if it makes sense
to use SWIG, and for sites without it, include the Swig output.
(Just like some programs include the output of Yacc, for those without it.)

Second question, which motivated the first: anyone looked at what
could/should be added to the mod_python objects when mod_ssl is used?
	/r$

From michael at stroeder.com  Sun Jul 16 14:46:45 2000
From: michael at stroeder.com (Michael =?iso-8859-1?Q?Str=F6der?=)
Date: Fri Jan  9 22:02:24 2004
Subject: [mod_python] Swig, and mod_ssl
References: <200007160231.WAA04120@pc1.caveosystems.com>
Message-ID: <3971AEB5.AB577533@stroeder.com>

rsalz@caveosystems.com wrote:
> 
> Second question, which motivated the first: anyone looked at what
> could/should be added to the mod_python objects when mod_ssl is used?

Callback functions for checking client certificates.
Well, one can do this also with M2Crypto anyway.

Ciao, Michael.

From rsalz at CaveoSystems.com  Sun Jul 16 15:37:27 2000
From: rsalz at CaveoSystems.com (rsalz@CaveoSystems.com)
Date: Fri Jan  9 22:02:24 2004
Subject: [mod_python] Swig, and mod_ssl
Message-ID: <200007161937.PAA10021@pc1.caveosystems.com>

>Callback functions for checking client certificates.
>Well, one can do this also with M2Crypto anyway.

Well yeah, but M2Crypto isn't integrated with mod_ssl and Apache.
(M2Crypto is a SWIG interface to OpenSSL, for those who don't know.)
At a minimum, I'd like to be able to get the client cert if
coming in via SSL, or know if there isn't one.
	/r$

From grisha at ispol.com  Sun Jul 16 21:02:58 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:24 2004
Subject: [mod_python] Swig, and mod_ssl
In-Reply-To: <200007160231.WAA04120@pc1.caveosystems.com>
Message-ID: <Pine.LNX.4.21.0007162059470.8470-100000@saturn.ispol.com>

On Sat, 15 Jul 2000 rsalz@caveosystems.com wrote:

> Swig (http://www.swig.org) is a "compiler" that can parse most C
> header files and automatically generate code for Perl, Tcl, Python,
> and Java.  At a rough guess, approximately half of mod_python.c could
> be replaced by a couple-dozen lines.  I wonder if it makes sense
> to use SWIG, and for sites without it, include the Swig output.
> (Just like some programs include the output of Yacc, for those without it.)

mod_snake is swig-based. I don't know enough about swig to make a
judgement. So far I've getting by fine without it - I sort of assumed it's
more trouble than it's worth.

> Second question, which motivated the first: anyone looked at what
> could/should be added to the mod_python objects when mod_ssl is used?

mod_python should work just fine with mod_ssl. At least it did for me on
FreeBSD. How is SSL different from anything else that you need special
objects?

Grisha


From rsalz at CaveoSystems.com  Sun Jul 16 22:23:41 2000
From: rsalz at CaveoSystems.com (rsalz@CaveoSystems.com)
Date: Fri Jan  9 22:02:24 2004
Subject: [mod_python] Swig, and mod_ssl
Message-ID: <200007170223.WAA10313@pc1.caveosystems.com>

Thanks, I'll check out mod_snake. (What's its relationship to mod_python,
and where can I find it?  I know, I should just check the archives since
that discussion just happened.)

SWIG seems pretty easy to get running on most platforms -- it should
generally be almost as simple to build as python.  I think it would
be worth the trouble. I think about half of mod_python.c, or over 1000
lines, could be removed -- SWIG could read httpd.h (et al) and
generate the C code for the "request" object (and the others)
automatically.  I'd suggest you give it a look-see.

As for SSL, I'm not sure.  Certainly I want to get the client cert.
I have to rummage more through mod_ssl, first.
	/r$

From peter at wl.vg  Sun Jul 16 23:28:44 2000
From: peter at wl.vg (Peter Halliday)
Date: Fri Jan  9 22:02:24 2004
Subject: [mod_python] problem compiling mod_python
Message-ID: <39727D6C.A7AA1541@wl.vg>

While waiting for someone to email me an RPM of mod_python 2.4.1, I
tried compiling it.  I got a copy of the apache source as well as the
above mod_python source.  Then I installed it using the DSO instructions
on the modpython webpage.  Everything seemed to go ok.  (One problem
however, I was unsure whether my python was compiled using thread
support because I use RedHat with the standard RPM that came with it. 
However, everything seemed ok when I compiled.  No error messages.  I
added these lines to my apache config file.

LoadModule python_module  module/mod_python.so
AddModule mod_python.c
AddHandler python-program .py
PythonHandler test
PythonDebug On
and then in my mime.types file I added:
application/x-python py
 
In my DocumentRoot directory I created a directory called test.  I had a
script with the following contents.

from mod_python import apache

def handler(req):
	req.send_http_header()
        req.write("Hello World!")
        return apache.OK 

I still get the same error when I add a '#!/usr/bin/python' to the top
of the file.  The following is the error that I receive.  I am running
RedHat Linux 6.2, Apache 1.3.12, mod_python 2.4.1., python 1.5.  I have
kept everything standard as came on RedHat.  

Mod_python error: "PythonHandler test"

Traceback (innermost last):

  File "/usr/lib/python1.5/site-packages/mod_python/apache.py", line
116, in Dispatch
    object = self.resolve_object(module, object_str)

  File "/usr/lib/python1.5/site-packages/mod_python/apache.py", line 51,
in resolve_object
    raise AttributeError, s

AttributeError: module '/usr/lib/python1.5/test/__init__.pyc' contains
no 'handler'


-- 
Peter Halliday
Online Application Developer
Whetstone Logic, Inc.       http://www.whetstonelogic.com
icq#75769411           AIM screen name: hoaggelos

From peter at wl.vg  Sun Jul 16 23:37:25 2000
From: peter at wl.vg (Peter Halliday)
Date: Fri Jan  9 22:02:24 2004
Subject: [mod_python] Problems with mod_python
Message-ID: <39727F75.7E2A95C6@wl.vg>

While waiting for someone to email me an RPM of mod_python 2.4.1, I
tried compiling it.  I got a copy of the apache source as well as the
above mod_python source.  Then I installed it using the DSO instructions
on the modpython webpage.  Everything seemed to go ok.  (One problem
however, I was unsure whether my python was compiled using thread
support because I use RedHat with the standard RPM that came with it. 
However, everything seemed ok when I compiled.  No error messages.  I
added these lines to my apache config file.

LoadModule python_module  module/mod_python.so
AddModule mod_python.c
AddHandler python-program .py
PythonHandler test
PythonDebug On
I changed the FileInfo directive to AllowOverride in the apache conf
file
and then in my mime.types file I added:
application/x-python py

 
In my DocumentRoot directory I created a directory called test.  I had a
script with the following contents.

from mod_python import apache

def handler(req):
        req.send_http_header()
        req.write("Hello World!")
        return apache.OK 

I still get the same error when I add a '#!/usr/bin/python' to the top
of the file.  The following is the error that I receive.  I am running
RedHat Linux 6.2, Apache 1.3.12, mod_python 2.4.1., python 1.5.  I have
kept everything standard as came on RedHat.  

Mod_python error: "PythonHandler test"

Traceback (innermost last):

  File "/usr/lib/python1.5/site-packages/mod_python/apache.py", line
116, in Dispatch
    object = self.resolve_object(module, object_str)

  File "/usr/lib/python1.5/site-packages/mod_python/apache.py", line 51,
in resolve_object
    raise AttributeError, s

AttributeError: module '/usr/lib/python1.5/test/__init__.pyc' contains
no 'handler'


-- 
Peter Halliday
Online Application Developer
Whetstone Logic, Inc.       http://www.whetstonelogic.com
icq#75769411           AIM screen name: hoaggelos

From grisha at ispol.com  Mon Jul 17 07:49:03 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:24 2004
Subject: [mod_python] Problems with mod_python
In-Reply-To: <39727F75.7E2A95C6@wl.vg>
Message-ID: <Pine.LNX.4.21.0007170748030.10692-100000@saturn.ispol.com>


On Sun, 16 Jul 2000, Peter Halliday wrote:

> AttributeError: module '/usr/lib/python1.5/test/__init__.pyc' contains
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
> no 'handler'

Your answer is in the message.

Grisha


From frneh at wmdata.com  Wed Jul 19 14:43:33 2000
From: frneh at wmdata.com (Nehr, Fredrik)
Date: Fri Jan  9 22:02:24 2004
Subject: [mod_python] Ho do make mod_python execute more then one script in a directory
 ?
Message-ID: <058FBD36E4D3D21193210008C72B64FD01296A51@WMSTO3SI1361>

With my current configuration only the generic handler of the script named
by the "PythonHandler" directive is executed even if I point my browser at
one of the other scripts in the same directory. How can i make mod_python
execute the "right" script?

I'm using mod_python 2.4.1 with Apache 1.3.12 and Python 1.5.2 on Windows
2000 Professional.

BTW: Why is argv missing from the sys module?


Regards,

Fredrik Nehr

From grisha at ispol.com  Wed Jul 19 11:29:31 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:24 2004
Subject: [mod_python] Ho do make mod_python execute more then one script
 in a directory ?
In-Reply-To: <058FBD36E4D3D21193210008C72B64FD01296A51@WMSTO3SI1361>
Message-ID: <Pine.LNX.4.21.0007191112250.18643-100000@saturn.ispol.com>

On Wed, 19 Jul 2000, Nehr, Fredrik wrote:

> With my current configuration only the generic handler of the script named
> by the "PythonHandler" directive is executed even if I point my browser at
> one of the other scripts in the same directory. How can i make mod_python
> execute the "right" script?

That's the way Apache modules work. Quoting from the tutorial:

       Some food for thought: If you were paying attention, you noticed
  that nowhere did it say that in order for all of the above to happen,
  the URL needs to refer to myscript.py. The only requirement was that it
  refers to a .py file. In fact the name of the file doesn't matter, and
  the file referred to in the URL doesn't have to exist. So, given the
  above configuration, http://myserver/mywebdir/myscript.py and
  http://myserver/mywebdir/montypython.py would give the exact same
  result.

       At this point, if you didn't understand the above paragraph, go
  back and read it again, until you do. 

> BTW: Why is argv missing from the sys module?

sys.argv is something that appears only during interactive invocation of
Python. sys.argv is created by PySys_SetArgv() C API function which is
called from main(). If python is not invoked from the command line,
main() is never executed, thus no sys.argv. This is actually one way to
tell whether you're running from the command line or embedded. 

The documentation for Py_Initialize() function mentions this, BTW.

Grisha


From mike at schwager.com  Mon Jul 24 03:20:44 2000
From: mike at schwager.com (Michael Schwager)
Date: Fri Jan  9 22:02:24 2004
Subject: [mod_python] Errors with Apache 1.3.12 and mod_python
Message-ID: <2336170196.964408844@celery.schwager.com>

Hi,
Yes- I am a newbie.  I just installed apache 1.3.12 with mod_python 2.4.1 
on my Solaris 2.6 box.  Everything went ok, except I am getting an error 
when I try to run the test.py as instructed in the install docs (see 
below).  Notice that, strangely, I get no errors- indeed the script works 
fine- if I run httpd with the -X option.  I note that I must be in the 
htdocs directory for that to work (thus, httpd sees the test subdir, which 
contains the test.py file).  So I'm not sure how the directories and 
filenames are related to PythonHandler, and how they are found by httpd 
and/or python.  But I think the problem is path-related.

Any useful help will be appreciated.  I do not have a .htaccess file; I put 
the appropriate lines in the httpd.conf file:
AddHandler python-program .py
PythonHandler test
PythonDebug On

Here is the error:
[Mon Jul 24 02:17:20 2000] [error] PythonHandler test: Traceback (most 
recent call last):
[Mon Jul 24 02:17:20 2000] [error] PythonHandler test:   File 
"/usr/local/lib/python1.6/site-packages/mod_python/apache.py", line 116, in 
Dispatch
    object = self.resolve_object(module, object_str)
[Mon Jul 24 02:17:20 2000] [error] PythonHandler test:   File 
"/usr/local/lib/python1.6/site-packages/mod_python/apache.py", line 51, in 
resolve_object
    raise AttributeError, s
[Mon Jul 24 02:17:20 2000] [error] PythonHandler test: AttributeError: 
module '/usr/local/lib/python1.6/test/__init__.pyc' contains no 'handler'
--
-Mike                                Mike@Schwager.com
        

From vanicek at brailcom.cz  Mon Jul 24 10:27:56 2000
From: vanicek at brailcom.cz (Roman Vanicek)
Date: Fri Jan  9 22:02:24 2004
Subject: [mod_python] multiple headers (cookies) are not sent
Message-ID: <4ak8ec0w6r.fsf@gnu.brailcom.cz>

Hi all,

I have a problem with mod_python: when I use cgihandler and I try to
send one cookie to the user, it works fine. But if I send several
cookies (which is legal according to cookie spec), just one of them (the
last one) is sent. When I do the same thing with regular python CGI
script, all the cookies are sent all right.

I have tried to track down the problem, I even played with my own python
handlers and it seems to me, that req.headers_out simply don't support
the notion of multiple headers. This is the dictionary and there can be
only one record per key (ie. one Set-Cookie header in this case) and the
value can be string only (it can't be the sequence of strings which
would maybe solve the problem).

What do you think about it?
Any help is appreciated, Roman Vanicek

From grisha at ispol.com  Mon Jul 24 08:48:52 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:24 2004
Subject: [mod_python] multiple headers (cookies) are not sent
In-Reply-To: <4ak8ec0w6r.fsf@gnu.brailcom.cz>
Message-ID: <Pine.LNX.4.21.0007240846430.15004-100000@saturn.ispol.com>

On 24 Jul 2000, Roman Vanicek wrote:

> I have tried to track down the problem, I even played with my own python
> handlers and it seems to me, that req.headers_out simply don't support
> the notion of multiple headers. 

That is correct. I'll have to think about how to get around this one....

Grisha


From db at cinetic.de  Mon Jul 24 15:27:55 2000
From: db at cinetic.de (Denys Bogatz)
Date: Fri Jan  9 22:02:24 2004
Subject: [mod_python] undefined symbol: stat
Message-ID: <003e01bff572$fb6c0320$876be2c3@cinetic.de>

Hello Folks,

I encountered a problem using mod_python as Apache-DSO.
Starting Apache results in an error: Can't load module ..../mod_python into
server: ..../mod_python: undefined symbol stat

That's all!
I'm sorry - I use Linux now for one week by know and I don't know what to
do...
(...using SuSE6.2, Python 1.5.2 and Apache 1.3)

Regards,

Denys!


From grisha at ispol.com  Mon Jul 24 09:56:01 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:24 2004
Subject: [mod_python] Errors with Apache 1.3.12 and mod_python
In-Reply-To: <2336170196.964408844@celery.schwager.com>
Message-ID: <Pine.LNX.4.21.0007240950470.15004-100000@saturn.ispol.com>

When you run httpd with the -X option from the directory where test.py
lives, it works because by default has the current directory in the python
path.

When you run httpd as a daemon, then your current directory is undefined
(most likely it is ServerRoot). 

To get around this, mod_python prepends the directory for which the
directive is specified to the pythopath. But because you put your
directives in httpd.conf outside of any <Directory> directives, mod_python
does not modify your python path in any way, because it doesn't know how
to. What you should do, if you're not using .htaccess, is:

<Directory /dir/where/test.py/is>
	AddHandler python-program .py
	PythonHandler test
	PythonDebug On
</Directory>

Then "/dir/where/test.py/is" will be added to the python path and it will
work fine.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Mon, 24 Jul 2000, Michael Schwager wrote:

> Hi,
> Yes- I am a newbie.  I just installed apache 1.3.12 with mod_python 2.4.1 
> on my Solaris 2.6 box.  Everything went ok, except I am getting an error 
> when I try to run the test.py as instructed in the install docs (see 
> below).  Notice that, strangely, I get no errors- indeed the script works 
> fine- if I run httpd with the -X option.  I note that I must be in the 
> htdocs directory for that to work (thus, httpd sees the test subdir, which 
> contains the test.py file).  So I'm not sure how the directories and 
> filenames are related to PythonHandler, and how they are found by httpd 
> and/or python.  But I think the problem is path-related.
> 
> Any useful help will be appreciated.  I do not have a .htaccess file; I put 
> the appropriate lines in the httpd.conf file:
> AddHandler python-program .py
> PythonHandler test
> PythonDebug On
> 
> Here is the error:
> [Mon Jul 24 02:17:20 2000] [error] PythonHandler test: Traceback (most 
> recent call last):
> [Mon Jul 24 02:17:20 2000] [error] PythonHandler test:   File 
> "/usr/local/lib/python1.6/site-packages/mod_python/apache.py", line 116, in 
> Dispatch
>     object = self.resolve_object(module, object_str)
> [Mon Jul 24 02:17:20 2000] [error] PythonHandler test:   File 
> "/usr/local/lib/python1.6/site-packages/mod_python/apache.py", line 51, in 
> resolve_object
>     raise AttributeError, s
> [Mon Jul 24 02:17:20 2000] [error] PythonHandler test: AttributeError: 
> module '/usr/local/lib/python1.6/test/__init__.pyc' contains no 'handler'
> --
> -Mike                                Mike@Schwager.com
>         
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From grisha at ispol.com  Mon Jul 24 12:09:09 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:24 2004
Subject: [mod_python] undefined symbol: stat
In-Reply-To: <003e01bff572$fb6c0320$876be2c3@cinetic.de>
Message-ID: <Pine.LNX.4.21.0007240956360.15004-100000@saturn.ispol.com>

You're missing a library of some kind when you're linking. I'm not sure
where stat lives, but you may want to check what libraries apache and
python are linked against.

--
  Gregory (Grisha) Trubetskoy
       grisha@ispol.com

On Mon, 24 Jul 2000, Denys Bogatz wrote:

> Hello Folks,
> 
> I encountered a problem using mod_python as Apache-DSO.
> Starting Apache results in an error: Can't load module ..../mod_python into
> server: ..../mod_python: undefined symbol stat
> 
> That's all!
> I'm sorry - I use Linux now for one week by know and I don't know what to
> do...
> (...using SuSE6.2, Python 1.5.2 and Apache 1.3)
> 
> Regards,
> 
> Denys!
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From db at cinetic.de  Mon Jul 24 18:32:06 2000
From: db at cinetic.de (Denys Bogatz)
Date: Fri Jan  9 22:02:24 2004
Subject: AW: [mod_python] undefined symbol: stat
In-Reply-To: <Pine.LNX.4.21.0007240956360.15004-100000@saturn.ispol.com>
Message-ID: <004a01bff58c$b52f8480$876be2c3@cinetic.de>

Thanx!

I tried to find the lib with:
ar -x /usr/local/lib/.../libgcc.a stat.o
...but I haven't found it! :-(

As I wrote I'm kindly new on Linux, so I've got no idea where to search for
it...

Bye, Denys!
(I may try to solve the problem by building my own version of python (still
using the version supplied by SuSE6.2) - maybe that will work!?)


>You're missing a library of some kind when you're linking. I'm not sure
>where stat lives, but you may want to check what libraries apache and
>python are linked against.
>
>--
>  Gregory (Grisha) Trubetskoy
>       grisha@ispol.com
>


From grisha at ispol.com  Mon Jul 24 14:17:22 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:24 2004
Subject: AW: [mod_python] undefined symbol: stat
In-Reply-To: <004a01bff58c$b52f8480$876be2c3@cinetic.de>
Message-ID: <Pine.LNX.4.21.0007241415530.15752-100000@saturn.ispol.com>

Check this web page out: http://jarre.pair.com/insadmin/gerhard/

Perhaps Gerhard could update his Suse RPM's to 2.4.1?

Grisha


On Mon, 24 Jul 2000, Denys Bogatz wrote:

> Thanx!
> 
> I tried to find the lib with:
> ar -x /usr/local/lib/.../libgcc.a stat.o
> ...but I haven't found it! :-(
> 
> As I wrote I'm kindly new on Linux, so I've got no idea where to search for
> it...
> 
> Bye, Denys!
> (I may try to solve the problem by building my own version of python (still
> using the version supplied by SuSE6.2) - maybe that will work!?)
> 
> 
> >You're missing a library of some kind when you're linking. I'm not sure
> >where stat lives, but you may want to check what libraries apache and
> >python are linked against.
> >
> >--
> >  Gregory (Grisha) Trubetskoy
> >       grisha@ispol.com
> >
> 



From bjrubble at dagobah.com  Mon Jul 24 13:57:35 2000
From: bjrubble at dagobah.com (Adam Clark)
Date: Fri Jan  9 22:02:24 2004
Subject: [mod_python] Basic mod_python questions
In-Reply-To: <Pine.LNX.4.21.0007241415530.15752-100000@saturn.ispol.com>
Message-ID: <Pine.BSF.4.21.0007241346550.27728-100000@shell16.ba.best.com>

Hi,

I have what I'm sure are some basic questions.  I'm trying to transfer
stuff from a CGI environment, and I'm not sure how you're supposed to
handle all the inputs.  I'm currently using the cgi module to manually
parse the query string, but do I have to write all the get/post switching
stuff myself?  What about file uploads?  Cookies?  I'd rather write this
right than become dependent on the CGI Handler, but I'm not sure how these
things are supposed to be done.

Thanks a lot
Adam



From grisha at ispol.com  Mon Jul 24 17:24:35 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:24 2004
Subject: [mod_python] Basic mod_python questions
In-Reply-To: <Pine.BSF.4.21.0007241346550.27728-100000@shell16.ba.best.com>
Message-ID: <Pine.LNX.4.21.0007241723001.16397-100000@saturn.ispol.com>

req.read(), req.headers_out and req.headers_in are your friends here. You
will still need a lot of functionality from the cgi.py standard Python
library module to parse multipart content from POST operations.

Grisha

On Mon, 24 Jul 2000, Adam Clark wrote:

> Hi,
> 
> I have what I'm sure are some basic questions.  I'm trying to transfer
> stuff from a CGI environment, and I'm not sure how you're supposed to
> handle all the inputs.  I'm currently using the cgi module to manually
> parse the query string, but do I have to write all the get/post switching
> stuff myself?  What about file uploads?  Cookies?  I'd rather write this
> right than become dependent on the CGI Handler, but I'm not sure how these
> things are supposed to be done.
> 
> Thanks a lot
> Adam
> 
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 


From db at cinetic.de  Tue Jul 25 10:04:36 2000
From: db at cinetic.de (Denys Bogatz)
Date: Fri Jan  9 22:02:24 2004
Subject: AW: AW: [mod_python] undefined symbol: stat solved!
In-Reply-To: <Pine.LNX.4.21.0007241415530.15752-100000@saturn.ispol.com>
Message-ID: <005501bff60e$f9ee9200$876be2c3@cinetic.de>

I solved the problem by linking /usr/lib/modules/2.2.10/libc.a within
mod_python...
(I found "stat.o" inside this library, extracted that and got some other
undefined symbols - so I decided to link the whole libc.a)
But now my mod_python.so is somewhat over 300k in size - is this too much?

Another problem: My IExplorer downloads test.py for some reasons...
(I got it working for some time but now the script won't be executed!)

>
> Check this web page out: http://jarre.pair.com/insadmin/gerhard/
>
> Perhaps Gerhard could update his Suse RPM's to 2.4.1?
>
> Grisha
>
>
> On Mon, 24 Jul 2000, Denys Bogatz wrote:
>
> > Thanx!
> >
> > I tried to find the lib with:
> > ar -x /usr/local/lib/.../libgcc.a stat.o
> > ...but I haven't found it! :-(
> >
> > As I wrote I'm kindly new on Linux, so I've got no idea
> where to search for
> > it...
> >
> > Bye, Denys!
> > (I may try to solve the problem by building my own version
> of python (still
> > using the version supplied by SuSE6.2) - maybe that will work!?)


From grisha at ispol.com  Tue Jul 25 08:48:03 2000
From: grisha at ispol.com (Gregory Trubetskoy)
Date: Fri Jan  9 22:02:24 2004
Subject: AW: AW: [mod_python] undefined symbol: stat solved!
In-Reply-To: <005501bff60e$f9ee9200$876be2c3@cinetic.de>
Message-ID: <Pine.LNX.4.21.0007250844250.19360-100000@saturn.ispol.com>

On Tue, 25 Jul 2000, Denys Bogatz wrote:

> 
> I solved the problem by linking /usr/lib/modules/2.2.10/libc.a within
> mod_python...
>
> (I found "stat.o" inside this library, extracted that and got some
> other undefined symbols - so I decided to link the whole libc.a) But
> now my mod_python.so is somewhat over 300k in size - is this too much?

to make it smaller, you can try something like:

ar x /usr/lib/modules/2.2.10/libc.a stat.o

then add stat.o as an argument to your apxs command.

> Another problem: My IExplorer downloads test.py for some reasons...
> (I got it working for some time but now the script won't be executed!)

This has nothing to do with explorer. You're missing your set-handler
directive, perhaps AllowOverride isn't FileInfo for that directory.

Grisha


From iny at iki.fi  Tue Jul 25 17:58:41 2000
From: iny at iki.fi (Ilpo =?iso-8859-1?q?Nyyss=F6nen?=)
Date: Fri Jan  9 22:02:24 2004
Subject: AW: AW: [mod_python] undefined symbol: stat solved!
In-Reply-To: Gregory Trubetskoy's message of "Tue, 25 Jul 2000 08:48:03 -0400 (EDT)"
References: <Pine.LNX.4.21.0007250844250.19360-100000@saturn.ispol.com>
Message-ID: <m3hf9e45pa.fsf@ypy.tky.hut.fi>

Gregory Trubetskoy <grisha@ispol.com> writes:

> On Tue, 25 Jul 2000, Denys Bogatz wrote:
> 
> > I solved the problem by linking /usr/lib/modules/2.2.10/libc.a within
> > mod_python...
> >
> > (I found "stat.o" inside this library, extracted that and got some
> > other undefined symbols - so I decided to link the whole libc.a) But
> > now my mod_python.so is somewhat over 300k in size - is this too much?
> 
> to make it smaller, you can try something like:
> 
> ar x /usr/lib/modules/2.2.10/libc.a stat.o
> 
> then add stat.o as an argument to your apxs command.

Or even add -lc to the apxs command. That is what I did, but I still
have that problem with urllib I wrote about.

-- 
Ilpo Nyyss?nen # biny
/* :-) */

From Daniel.Plagge at tu-clausthal.de  Fri Jul 28 14:26:27 2000
From: Daniel.Plagge at tu-clausthal.de (Daniel Plagge)
Date: Fri Jan  9 22:02:24 2004
Subject: [mod_python] compile errors on solaris
Message-ID: <20000728142627.A742@wintermute.esw-heim.tu-clausthal.de>

Hello,

on Solaris the Sun-C-compiler complaints about some syntax errors,
mainly because C++ syntax is used. I append a trivial patch which
should solve the problem, so later versions of mod_python could
compile out of the box. :)

Bye,
Daniel





*** mod_python.c.orig	Fri Jul 28 12:32:52 2000
--- mod_python.c	Fri Jul 28 12:52:50 2000
***************
*** 600,606 ****
  static int tablelength(tableobject *self) 
  { 
      return ap_table_elts(self->table)->nelts;
! };
  
  /**
   ** tablesetitem
--- 600,606 ----
  static int tablelength(tableobject *self) 
  { 
      return ap_table_elts(self->table)->nelts;
! }
  
  /**
   ** tablesetitem
***************
*** 638,644 ****
  	ap_table_set(self->table, k, PyString_AsString(val));
      }
      return 0;
! };
  
  /**
   ** tb_setitem
--- 638,644 ----
  	ap_table_set(self->table, k, PyString_AsString(val));
      }
      return 0;
! }
  
  /**
   ** tb_setitem
***************
*** 2253,2260 ****
  	    char *module = elts[i].key;
  	    char *dir = elts[i].val;
  
! 	    // XXXXXX PythonInterpreter!!!
! 	    // This needs to be addressed in config_merge?
  	    interpreter = dir;
  
  #ifdef WITH_THREAD  
--- 2253,2260 ----
  	    char *module = elts[i].key;
  	    char *dir = elts[i].val;
  
! 	    /* XXXXXX PythonInterpreter!!! */
! 	    /* This needs to be addressed in config_merge? */
  	    interpreter = dir;
  
  #ifdef WITH_THREAD  
***************
*** 2355,2361 ****
      return python_handler(req, "PythonLogHandler");
  }
  static void PythonChildExitHandler(server_rec *srv, pool *p) {
!     // printf("In ExitHandler\n");
  }
  
  
--- 2355,2361 ----
      return python_handler(req, "PythonLogHandler");
  }
  static void PythonChildExitHandler(server_rec *srv, pool *p) {
!   /* printf("In ExitHandler\n"); */
  }
  
  

