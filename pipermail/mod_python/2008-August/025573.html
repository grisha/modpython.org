<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] persistence in mod_python
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20persistence%20in%20mod_python&In-Reply-To=17E75A0C-D0AF-4A1E-930F-C8CCF8B56E4B%40vierfalt.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025564.html">
   <LINK REL="Next"  HREF="025576.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] persistence in mod_python</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20persistence%20in%20mod_python&In-Reply-To=17E75A0C-D0AF-4A1E-930F-C8CCF8B56E4B%40vierfalt.com"
       TITLE="[mod_python] persistence in mod_python">graham.dumpleton at gmail.com
       </A><BR>
    <I>Thu Aug 21 20:28:44 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="025564.html">[mod_python] persistence in mod_python
</A></li>
        <LI>Next message: <A HREF="025576.html">[mod_python] persistence in mod_python
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25573">[ date ]</a>
              <a href="thread.html#25573">[ thread ]</a>
              <a href="subject.html#25573">[ subject ]</a>
              <a href="author.html#25573">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>2008/8/21 Simon Bierbaum &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">bierbaum at vierfalt.com</A>&gt;:
&gt;<i> Thanks, Graham. From reading this and also
</I>&gt;<i> <A HREF="http://www.dscpl.com.au/wiki/ModPython/Articles/ModuleImportingIsBroken,">http://www.dscpl.com.au/wiki/ModPython/Articles/ModuleImportingIsBroken,</A> I
</I>&gt;<i> believe that two distinct requests, handled consecutively by the same
</I>&gt;<i> unrecycled apache prefork child, will see the same global module objects and
</I>&gt;<i> thus the same module state. Is that correct?
</I>
Yes.

&gt;<i> I know this data sharing method
</I>&gt;<i> should not be used,
</I>
The sharing method can be used, but not for stuff that must be the
same across all processes. Thus you can still use module global data
for caching information which is effectively read only and where if
necessary you have checks to ensure it is refreshed as needed.

&gt;<i> but it would mean the bug I'm hunting could be caused by
</I>&gt;<i> some unintentionally left over state within a module, making the second
</I>&gt;<i> request work with stale data.
</I>
It could also be due to that caching mechanism not being threaded
protected properly. For example, if one request is updating the cache
will a concurrent request in same process is using data from the
cache.

Without know more detail about the problem you are seeing and example
code showing how you are using global module data, had to say.

Graham

&gt;<i> Am 20.08.2008 um 22:43 schrieb Graham Dumpleton:
</I>&gt;<i>
</I>&gt;&gt;<i> For a start, read:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  <A HREF="http://www.dscpl.com.au/wiki/ModPython/Articles/TheProcessInterpreterModel">http://www.dscpl.com.au/wiki/ModPython/Articles/TheProcessInterpreterModel</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Graham
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 2008/8/21 Simon Bierbaum &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">bierbaum at vierfalt.com</A>&gt;:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Hi all,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I would like to know exactly what bits in mod_python are persistent
</I>&gt;&gt;&gt;<i> across
</I>&gt;&gt;&gt;<i> multiple requests to the same apache process. I.e., once apache is
</I>&gt;&gt;&gt;<i> started
</I>&gt;&gt;&gt;<i> and mod_python is loaded, between two requests served by the same apache
</I>&gt;&gt;&gt;<i> process and the same Python handler,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> - does mod_python reload modules, i.e. is module initialization code only
</I>&gt;&gt;&gt;<i> run once during the apache process lifespan?
</I>&gt;&gt;&gt;<i> - is there a way for modules to store objects persistently, e.g. a
</I>&gt;&gt;&gt;<i> database
</I>&gt;&gt;&gt;<i> connection pool?
</I>&gt;&gt;&gt;<i> - what happens to variables defined in the handler script but not locally
</I>&gt;&gt;&gt;<i> within the handler() function (I'm not sure whether this is what Python
</I>&gt;&gt;&gt;<i> calls &quot;global&quot;)?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I have a bug in my application which uses mod_python, MySQLdb and the
</I>&gt;&gt;&gt;<i> InnoDB
</I>&gt;&gt;&gt;<i> storage engine revolving around transactions, and it's driving me
</I>&gt;&gt;&gt;<i> mad...any
</I>&gt;&gt;&gt;<i> help or a pointer to documentation is greatly appreciated.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Thanks, Simon
</I>&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;<i> Mod_python mailing list
</I>&gt;&gt;&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;&gt;&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I></PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025564.html">[mod_python] persistence in mod_python
</A></li>
	<LI>Next message: <A HREF="025576.html">[mod_python] persistence in mod_python
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25573">[ date ]</a>
              <a href="thread.html#25573">[ thread ]</a>
              <a href="subject.html#25573">[ subject ]</a>
              <a href="author.html#25573">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
