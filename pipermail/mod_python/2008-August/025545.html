<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] problems with logging
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20problems%20with%20logging&In-Reply-To=01b201c8ff9a%249ef63080%24dce29180%24%40com.br">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025544.html">
   <LINK REL="Next"  HREF="025546.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] problems with logging</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20problems%20with%20logging&In-Reply-To=01b201c8ff9a%249ef63080%24dce29180%24%40com.br"
       TITLE="[mod_python] problems with logging">graham.dumpleton at gmail.com
       </A><BR>
    <I>Sat Aug 16 08:31:25 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="025544.html">[mod_python] problems with logging
</A></li>
        <LI>Next message: <A HREF="025546.html">[mod_python] [SPAM] [Newbie] import_module() function or Python's
	import statement
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25545">[ date ]</a>
              <a href="thread.html#25545">[ thread ]</a>
              <a href="subject.html#25545">[ subject ]</a>
              <a href="author.html#25545">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please use reply-all and keep discussion on list.

If it doesn't work, then possibly because I assumed you were talking
about output appearing in Apache error log. Reading code you are
trying to have logging module send it somewhere else. Thus, if you are
complaining that output not appearing in your separate log file, then
can't really help.

Only further comment I can make is that you should not be initialising
logging module in the context of a request handler. You would want to
do it at global scope and preferably in a Python module which isn't
possibly being reloaded causing it to be configured multiple times in
lifetime of process. Also not sure how thread safe configuring logging
module is, which would be an issue when doing it in context of request
handler.

Graham

2008/8/16 Camilo Telles &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">camilot at terra.com.br</A>&gt;:
&gt;<i> Dear Graham,
</I>&gt;<i>
</I>&gt;<i> It didn't work.
</I>&gt;<i> Any ideas?
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Camilo
</I>&gt;<i>
</I>&gt;&gt;<i> -----Original Message-----
</I>&gt;&gt;<i> From: Graham Dumpleton [mailto:<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>]
</I>&gt;&gt;<i> Sent: s&#225;bado, 16 de agosto de 2008 09:10
</I>&gt;&gt;<i> To: Camilo Telles
</I>&gt;&gt;<i> Cc: mod_python
</I>&gt;&gt;<i> Subject: Re: [mod_python] problems with logging
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 2008/8/16 Camilo Telles &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">camilot at terra.com.br</A>&gt;:
</I>&gt;&gt;<i> &gt; Graham,
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; How do I flush it? How I get access to the FileHandler from the logging
</I>&gt;&gt;<i> object?
</I>&gt;&gt;<i> &gt; I prefer to use the logging module, so I can split the content to be
</I>&gt;<i> logged
</I>&gt;&gt;<i> between two files.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Use:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>   import sys
</I>&gt;&gt;<i>   sys.stderr.flush()
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It is a standard Python file like object.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Graham
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; ---------- Cabe&#231;alho original -----------
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; De: &quot;Graham Dumpleton&quot; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>
</I>&gt;&gt;<i> &gt; Para: &quot;Camilo Telles&quot; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">camilot at terra.com.br</A>
</I>&gt;&gt;<i> &gt; C&#243;pia: &quot;mod_python&quot; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython.org</A>
</I>&gt;&gt;<i> &gt; Data: Sat, 16 Aug 2008 21:22:31 +1000
</I>&gt;&gt;<i> &gt; Assunto: Re: [mod_python] problems with logging
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;&gt; The sys.stderr stream in mod_python is buffered, you need to flush it.
</I>&gt;&gt;<i> &gt;&gt; You are better of implementing a logging module handler which logs
</I>&gt;&gt;<i> &gt;&gt; using apache.log_error().
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; Graham
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; 2008/8/16 Camilo Telles &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">camilot at terra.com.br</A>&gt;:
</I>&gt;&gt;<i> &gt;&gt; &gt; Sirs,
</I>&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;<i> &gt;&gt; &gt; I have an annoying problem happening with mod_python and logging.
</I>&gt;&gt;<i> &gt;&gt; &gt; Here is the code:
</I>&gt;&gt;<i> &gt;&gt; &gt; ===========================================
</I>&gt;&gt;<i> &gt;&gt; &gt; import logging
</I>&gt;&gt;<i> &gt;&gt; &gt; from mod_python import util
</I>&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;<i> &gt;&gt; &gt; def index(req, email):
</I>&gt;&gt;<i> &gt;&gt; &gt;        logging.basicConfig(level=logging.DEBUG,
</I>&gt;&gt;<i> &gt;&gt; &gt;                    format='%(asctime)s;%(message)s',
</I>&gt;&gt;<i> &gt;&gt; &gt;                    filename='log_email.txt',
</I>&gt;&gt;<i> &gt;&gt; &gt;                    filemode='a')
</I>&gt;&gt;<i> &gt;&gt; &gt;        logging.info(email)
</I>&gt;&gt;<i> &gt;&gt; &gt;        logging.shutdown()
</I>&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;<i> &gt;&gt; &gt;        util.redirect(req, '<A HREF="http://dummy/download.html'">http://dummy/download.html'</A>)
</I>&gt;&gt;<i> &gt;&gt; &gt; ======================================
</I>&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;<i> &gt;&gt; &gt; What happens: sometimes the logs occurs, sometimes it not. It&#180;s
</I>&gt;&gt;<i> completely random.
</I>&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;<i> &gt;&gt; &gt; I&#180;m using:
</I>&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;<i> &gt;&gt; &gt; Apache/2.2.8 (Ubuntu)
</I>&gt;&gt;<i> &gt;&gt; &gt; mod_python/3.3.1
</I>&gt;&gt;<i> &gt;&gt; &gt; Python/2.5.2
</I>&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;<i> &gt;&gt; &gt; Any clue? I need to do some kind of flush? If yes, how?
</I>&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;<i> &gt;&gt; &gt; Thanks in advance.
</I>&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;<i> &gt;&gt; &gt; Camilo
</I>&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;<i> &gt;&gt; &gt; _______________________________________________
</I>&gt;&gt;<i> &gt;&gt; &gt; Mod_python mailing list
</I>&gt;&gt;<i> &gt;&gt; &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;&gt;<i> &gt;&gt; &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; Esta mensagem foi verificada pelo E-mail Protegido Terra.
</I>&gt;&gt;<i> &gt;&gt; Atualizado em 16/08/2008
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; _______________________________________________
</I>&gt;&gt;<i> &gt; Mod_python mailing list
</I>&gt;&gt;<i> &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;&gt;<i> &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Esta mensagem foi verificada pelo E-mail Protegido Terra.
</I>&gt;&gt;<i> Atualizado em 15/08/2008
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025544.html">[mod_python] problems with logging
</A></li>
	<LI>Next message: <A HREF="025546.html">[mod_python] [SPAM] [Newbie] import_module() function or Python's
	import statement
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25545">[ date ]</a>
              <a href="thread.html#25545">[ thread ]</a>
              <a href="subject.html#25545">[ subject ]</a>
              <a href="author.html#25545">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
