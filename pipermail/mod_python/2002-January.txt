From ray_drew at yahoo.co.uk  Wed Jan  2 11:15:12 2002
From: ray_drew at yahoo.co.uk (Ray Drew)
Date: Fri Jan  9 21:46:35 2004
Subject: [mod_python] Python 2.2
References: <Pine.BSF.4.32.0112171033370.20970-100000@localhost>
Message-ID: <024f01c1937e$c0349b40$df13000a@RDREWXP>


>
> I haven't tried compiling it with 2.2 yet, but chances are it will work
> without any modifications... I guess we'll see when it comes out. :)
>
> On Mon, 17 Dec 2001, Ray Drew wrote:
>
> > Is mod_python avalable for Python 2.2 yet? Python 2.2 final is scheduled
for
> > release later this week.
> >

Now that Python 2.2 is out, do you know when mod_python will support it? I'm
running with Apache 1.3.22 on Windows NT/XP.

Thanks,

Ray Drew


_________________________________________________________
Do You Yahoo!?
Get your free @yahoo.com address at http://mail.yahoo.com


From grisha at modpython.org  Wed Jan  2 13:04:50 2002
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:46:35 2004
Subject: [mod_python] Python 2.2
In-Reply-To: <024f01c1937e$c0349b40$df13000a@RDREWXP>
Message-ID: <Pine.BSF.4.32.0201021303190.98580-100000@localhost>

AFAIK it will work with 2.2 as is, it's just a matter of compiling a DLL.
My access to a windows box with a compiler is somewhat limited right now -
perhaps someone on the list would contribute a compiled DLL?

Grisha

On Wed, 2 Jan 2002, Ray Drew wrote:

>
>
> >
> > I haven't tried compiling it with 2.2 yet, but chances are it will work
> > without any modifications... I guess we'll see when it comes out. :)
> >
> > On Mon, 17 Dec 2001, Ray Drew wrote:
> >
> > > Is mod_python avalable for Python 2.2 yet? Python 2.2 final is scheduled
> for
> > > release later this week.
> > >
>
> Now that Python 2.2 is out, do you know when mod_python will support it? I'm
> running with Apache 1.3.22 on Windows NT/XP.
>
> Thanks,
>
> Ray Drew
>
>
> _________________________________________________________
> Do You Yahoo!?
> Get your free @yahoo.com address at http://mail.yahoo.com
>
>


From rsalz at zolera.com  Thu Jan  3 12:34:19 2002
From: rsalz at zolera.com (Rich Salz)
Date: Fri Jan  9 21:46:35 2004
Subject: [mod_python] configure.in patch
Message-ID: <3C34961B.1000705@zolera.com>

configure[.in] has code to set AP_SRC_OWN and AP_SRC_GRP by parsing the 
output of "ls -ld".  It wants that information so that it can chown the 
files it copies into the apache source tree.   There are a number of 
problems with this.

0.  it requires root privs.
1.  the operation is often unnecessary, as the installer of mod-python 
should be the apache owner.
2.  if they are not the same, masking the owner looses accountability :)
3.  the output of "ls -l" is different across platforms, including the 
placement of the fields (for extraction via awk) and some versions put a
  "total nnnn" line out first.

I believe the best solution is to not chown things; we patch the 
Makefile so that the install targets do not do that. The attached diff, 
however, merely makes mod_python's configure more robust in the fact of 
multi-line "ls" output.  It does not address the more fundamental 
problem, which is that the output of "ls" puts those fields in different 
  places on different hosts.  One way to address that would be to gather 
the values via a short python program.
	/r$
-- 
Zolera Systems, Your Key to Online Integrity
Securing Web services: XML, SOAP, Dig-sig, Encryption
http://www.zolera.com
-------------- next part --------------
*** configure.in.ORIG	Thu Jan  3 12:17:06 2002
--- configure.in	Thu Jan  3 12:25:34 2002
***************
*** 163,170 ****
    AP_INCLUDES="-I${AP_SRC}/src/include -I${AP_SRC}/src/os/unix"
  
    # note who owns the apache source directory
!   AP_SRC_OWN="`ls -ld $AP_SRC | awk '{print $3}'`"
!   AP_SRC_GRP="`ls -ld $AP_SRC | awk '{print $4}'`"
  ],
  AC_MSG_RESULT(no))
  
--- 163,170 ----
    AP_INCLUDES="-I${AP_SRC}/src/include -I${AP_SRC}/src/os/unix"
  
    # note who owns the apache source directory
!   AP_SRC_OWN="`ls -ld $AP_SRC | awk '{print $3}' | tr -d '[\012\015]'`"
!   AP_SRC_GRP="`ls -ld $AP_SRC | awk '{print $4}' | tr -d '[\012\015]'`"
  ],
  AC_MSG_RESULT(no))
  
From x at Vex.Net  Fri Jan  4 14:28:48 2002
From: x at Vex.Net (Tm)
Date: Fri Jan  9 21:46:35 2004
Subject: [mod_python] ob-CallBack Kenobi
Message-ID: <20020104193220.92BD144A9A6@spitfire.velocet.net>

This is an issue that seems to come up periodically on this list. I've 
searched and read all the messages I could find on the subject. The 
realy strange thing is that I've installed, setup, and used succesfully 
mod_python on two other NetBSD systems, with no problems. But the 
NetBSD system I'm trying to get it going on now (essentially identical 
to the previous ones) just refuses to cooperate:

make_obcallback(): could not import mod_python.apache.
make_obcallback(): could not call init.
python_handler: make_obcallback returned no obCallBack!

I've checked the permissions of the libraries, i've checked the 
locatoins, i've fiddled with the python path.

Can anyone give any more tips on how I might debug this situation and 
figure out what is actually going wrong here?

I'm using NetBSD 1.5.1, Apache 1.3.22, Python 2.01 without threads 
(installed in the standard NetBSD locations).


From eelgueta at vtr.net  Sat Jan  5 15:21:35 2002
From: eelgueta at vtr.net (Eduardo Elgueta)
Date: Fri Jan  9 21:46:35 2004
Subject: [mod_python] unsuscribe
Message-ID: <1010254896.6694.3.camel@jerry.srd.cl>

unsuscribe




From x at Vex.Net  Sun Jan  6 00:18:02 2002
From: x at Vex.Net (T. Muddletin)
Date: Fri Jan  9 21:46:35 2004
Subject: [mod_python] ob-CallBack Kenobi
In-Reply-To: <20020104193220.92BD144A9A6@spitfire.velocet.net>
References: <20020104193220.92BD144A9A6@spitfire.velocet.net>
Message-ID: <55371568667.20020106001802@Vex.Net>

Tim wrote on Friday, January 04, 2002, 2:28:48 PM:
> I've checked the permissions of the libraries, i've checked the
> locations, i've fiddled with the python path.

As a last resort i hauled out the apache source and managed to build
mod_python statically with it. And it seems to be working fine this
way. Strange that the DSO module won't work on this machine, but the
statically compiled one does? I'm not familiar enough with the
internals to speculate as to why, but just thought i'd mention this is
how i solved the dilemma finally, in case anyone else has a similar
problem...

Though i would really like to get the DSO module to work on this
machine eventually. At least it works statically for now, and
development can move ahead.

-- 
Tim Middleton | Cain Gang Ltd | But the trouble was that my hysterical fit
x@veX.net     | www.Vex.Net   | could not go on for ever. --Dost (NFTU)


From modpython at xhaus.com  Mon Jan  7 19:32:10 2002
From: modpython at xhaus.com (Alan Kennedy)
Date: Fri Jan  9 21:46:35 2004
Subject: [mod_python] TransHandler help?
Message-ID: <3C39F7BA.653BE2A8@xhaus.com>

Greetings All,

And many thanks to Grisha for an excellent body of work.

I'm trying to get a PythonTransHandler working.

What I am trying to do is modify an URL before it goes through standard
Apache processing. (See below for an explanation why, if you wish)

Could someone possibly give me a simple example (including
configuration) of how I could, for example, change every request for a
.html file to a request for a .xyz file. That is, a request for

/admin/index.html

would become a request for

/admin/index.xyz

*without* sending a redirect back to the client. Or a more sophisticated
example, how could I turn a request for

/admin/abc1234/update/item4567

into a request for

/admin/doit.html?sessionID=abc1234&command=update&what=item4567

Many thanks for any help offered.

Regards,

Alan.

P.S. I'm working with modpython 2.7.6, win2k, apache 1.3.22 and Python
2.1.1

P.P.S.
Why: I am trying to implement URL rewriting for session tracking. Rather
than try to modify every <a href> and <form action> to contain a session
ID, I was hoping to take a quick solution using a <base href> element in
<head>. In fact I was hoping to encode several parameters like this,
i.e. as pseudo-directory names. Why do it this way, rather than setting
all the parameters as query args, i.e. "?sessID=abc123&command=update".

For a couple of reasons:-

1. Because it looks far neater in the URL
2. Because I can put all that stuff into the <base href>, which is
simpler in code terms, because I don't have to worry about <a href> and
<form action> adding their own query parameters, and potentially having
two "?" query delimiters in the URI, which is invalid.

So, the way it would work is this:

A HTML document (H) is transmitted which contains the parameters as
"directory names" in the <base href>

When the client activates a link in H or submits a form from H, I
extract the parameters out of the requested URI, and execute whatever
functionality.

The problem is that Apache complains if any of the "pseudo directories"
does not physically exist. Which is a rather a pain. That's why I need
to change the URL before Apache gets at it, which the documentation
implies TransHandler can do. I quote :- "This routine gives allows for
an opportunity to translate the URI into an actual filename, before the
server's default rules (Alias directives and the like) are followed. "




From oliver at redgecko.org  Mon Jan  7 22:08:09 2002
From: oliver at redgecko.org (Oliver Cope)
Date: Fri Jan  9 21:46:35 2004
Subject: [mod_python] TransHandler help?
In-Reply-To: <3C39F7BA.653BE2A8@xhaus.com>
References: <3C39F7BA.653BE2A8@xhaus.com>
Message-ID: <20020107220809.GA4997@canoodle.redgecko.org>

On Mon, Jan 07, 2002 at 07:32:10PM +0000, Alan Kennedy wrote:
>
> I'm trying to get a PythonTransHandler working.
> 
<snip>

> *without* sending a redirect back to the client. Or a more sophisticated
> example, how could I turn a request for
> 
> /admin/abc1234/update/item4567
> 
> into a request for
> 
> /admin/doit.html?sessionID=abc1234&command=update&what=item4567
> 
I too have spent some time trying to configure a PythonTransHandler, but
couldn't get it to work :o(
		
I've had more luck using mod_rewrite for this kind of thing:

RewriteEngine On
RewriteRule /admin/(.*)/(.*)/(.*) /admin/doit.html?sessionID=$1&command=$2&what=$3 [PT]

This will rewrite requests without sending redirects back to the client.
You can remove the '[PT]' if you don't need to further process the
rewritten URL (e.g. through a PythonHandler).

Obviously regular expressions are not as flexible as a Python
handler can be, so this will only work for simple translations.  Also
you'll need to have Apache compiled with mod_rewrite, I'm not sure if
this is the default.

Regards,

Olly.


From modpython at xhaus.com  Mon Jan  7 23:18:34 2002
From: modpython at xhaus.com (Alan Kennedy)
Date: Fri Jan  9 21:46:35 2004
Subject: [mod_python] TransHandler help?
References: <3C39F7BA.653BE2A8@xhaus.com> <20020107220809.GA4997@canoodle.redgecko.org>
Message-ID: <3C3A2CCA.88920E9F@xhaus.com>

Thanks Olly,

It's good to know that I'm not the only who can't get it to work :-\

I've been avoiding relying on mod_rewrite and its "cool voodoo". I have the training and
background to get my head around it, but members of my team unfortunately don't, whereas
they are all very comfortable with python.......

Thanks for the reply,

Cheers,

Alan.

Oliver Cope wrote:

> On Mon, Jan 07, 2002 at 07:32:10PM +0000, Alan Kennedy wrote:
> >
> > I'm trying to get a PythonTransHandler working.
> >
> <snip>
>
> > *without* sending a redirect back to the client. Or a more sophisticated
> > example, how could I turn a request for
> >
> > /admin/abc1234/update/item4567
> >
> > into a request for
> >
> > /admin/doit.html?sessionID=abc1234&command=update&what=item4567
> >
> I too have spent some time trying to configure a PythonTransHandler, but
> couldn't get it to work :o(
>
> I've had more luck using mod_rewrite for this kind of thing:
>
> RewriteEngine On
> RewriteRule /admin/(.*)/(.*)/(.*) /admin/doit.html?sessionID=$1&command=$2&what=$3 [PT]
>
> This will rewrite requests without sending redirects back to the client.
> You can remove the '[PT]' if you don't need to further process the
> rewritten URL (e.g. through a PythonHandler).
>
> Obviously regular expressions are not as flexible as a Python
> handler can be, so this will only work for simple translations.  Also
> you'll need to have Apache compiled with mod_rewrite, I'm not sure if
> this is the default.
>
> Regards,
>
> Olly.
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python


From grisha at modpython.org  Mon Jan  7 19:10:39 2002
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:46:35 2004
Subject: [mod_python] TransHandler help?
In-Reply-To: <3C3A2CCA.88920E9F@xhaus.com>
Message-ID: <Pine.BSF.4.32.0201071910200.58948-100000@localhost>

I'll have look into this some day. I *think* what mod_rewrite does is
create a sub-request, but sub-requests are not supported by mod_python (i
don't think there is anything that makes it impossible, the code is simple
not there, it's just a SMOP ("simple matter of programming")...)

Grisha


On Mon, 7 Jan 2002, Alan Kennedy wrote:

> Thanks Olly,
>
> It's good to know that I'm not the only who can't get it to work :-\
>
> I've been avoiding relying on mod_rewrite and its "cool voodoo". I have the training and
> background to get my head around it, but members of my team unfortunately don't, whereas
> they are all very comfortable with python.......
>
> Thanks for the reply,
>
> Cheers,
>
> Alan.
>
> Oliver Cope wrote:
>
> > On Mon, Jan 07, 2002 at 07:32:10PM +0000, Alan Kennedy wrote:
> > >
> > > I'm trying to get a PythonTransHandler working.
> > >
> > <snip>
> >
> > > *without* sending a redirect back to the client. Or a more sophisticated
> > > example, how could I turn a request for
> > >
> > > /admin/abc1234/update/item4567
> > >
> > > into a request for
> > >
> > > /admin/doit.html?sessionID=abc1234&command=update&what=item4567
> > >
> > I too have spent some time trying to configure a PythonTransHandler, but
> > couldn't get it to work :o(
> >
> > I've had more luck using mod_rewrite for this kind of thing:
> >
> > RewriteEngine On
> > RewriteRule /admin/(.*)/(.*)/(.*) /admin/doit.html?sessionID=$1&command=$2&what=$3 [PT]
> >
> > This will rewrite requests without sending redirects back to the client.
> > You can remove the '[PT]' if you don't need to further process the
> > rewritten URL (e.g. through a PythonHandler).
> >
> > Obviously regular expressions are not as flexible as a Python
> > handler can be, so this will only work for simple translations.  Also
> > you'll need to have Apache compiled with mod_rewrite, I'm not sure if
> > this is the default.
> >
> > Regards,
> >
> > Olly.
> >
> > _______________________________________________
> > Mod_python mailing list
> > Mod_python@modpython.org
> > http://www.modpython.org/mailman/listinfo/mod_python
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From mengland at mengland.net  Mon Jan  7 19:43:01 2002
From: mengland at mengland.net (Matthew England)
Date: Fri Jan  9 21:46:35 2004
Subject: [mod_python] How to hide implementation specifics in URIs/URLs?
Message-ID: <5.1.0.14.0.20020107191928.02441230@mail.core.com>

I'd like to be able to eliminate any web-server implementation specifics in 
my URIs/URLs as per 
<http://www.w3.org/Provider/Style/URI.html>.  Specifically, I'd like to 
eliminate the references to ".py" in my mod_python-managed URIs.  What are 
my apache options to do this?

These references:

<http://www.apacheweek.com/features/negotiation>
<http://httpd.apache.org/docs/content-negotiation.html>

...seem to be more interested in client-side-decision of content 
negotiation.  while this concept is interesting, and i might use it in the 
future, i'm not interested in this now.  i simply want to hide the 
server-side implemenation from my web user.

here's the basic algorithm i'm looking to implement in apache:

for said URI <http://myexampledomain.org/tickets/reserve>,

i would like apache to look in the [...]/tickets/ directory for a reserve.* 
file.  if there exists a [...]/tickets/reserve.py file, then apache 
immediately throws this .py file at the python handlers.  if there are 
multiple matches, ie, multiple files with the same 'reserve' but with 
different extensions, i want apache to decide what to do with the 
'ambiguous' URI by looking at a prioritized list of "content managers," 
probably a list specified by me in httpd.conf.  for example, i envision 
these lines placed in httpd.conf (and this is completely theoretical syntax):

ContentManager call-the-python-handler .py
ContentManager call-the-php-handler .php .php3
ContentManager call-the-cgi-handler .cgi

The order here is important, for .py files will be displayed/"managed" 
prior to .php or other files.  In my theoretical behavioral httpd.conf 
prototype syntax, i would have all unspecified extensions behave as they 
seem to "out of the box"...ie, whatever makes 
<http://192.168.1.50/~mengland/calendar> and 
<http://192.168.1.50/~mengland/calendar.html> do the same thing in my 
opera.com browser (maybe it's the same mechanism that i describe above?).

Notice how all of this stuff is totally managed by the server and requires 
no client-side input from the browser.  As I mentioned before, i'm not 
trying to have the client-side browser give language or media 
directives.  My main purpose is to keep my URIs clean and stable so that my 
users (and therefore much of my web server itself) don't have to change 
their URLs if i switch to some other underlying technology implementation 
(say if i switched from python to php for any segments of the web server).


disclaimer:

I'm constructing a web-database server for ticket reservations and am new 
to mod_python...and most everything else devshed.com-type-stuff-related.  I 
find openbsd-postgresql-python-apache to be the most attractive combination 
that i see now (openbsd for security purposes)...but since I'm new to these 
technologies, i'm far from certain of things yet.  I therefore apologize 
for any "newbie annoyance," or for a duplicate question.


thanks in advance for any help,
-Matt


From rsalz at zolera.com  Mon Jan  7 21:08:15 2002
From: rsalz at zolera.com (Rich Salz)
Date: Fri Jan  9 21:46:35 2004
Subject: [mod_python] How to hide implementation specifics in URIs/URLs?
References: <5.1.0.14.0.20020107191928.02441230@mail.core.com>
Message-ID: <3C3A548F.7EDC3D6C@zolera.com>

> <http://www.w3.org/Provider/Style/URI.html>.  Specifically, I'd like to
> eliminate the references to ".py" in my mod_python-managed URIs.  What are
> my apache options to do this?

AddHandler python-program .py
DirectoryIndex index.py index.php index.html
-- 
Zolera Systems, Securing web services (XML, SOAP, Signatures,
Encryption)
http://www.zolera.com

From mengland at mengland.net  Mon Jan  7 20:40:47 2002
From: mengland at mengland.net (Matthew England)
Date: Fri Jan  9 21:46:35 2004
Subject: [mod_python] How to hide implementation specifics in
  URIs/URLs?
In-Reply-To: <3C3A548F.7EDC3D6C@zolera.com>
References: <5.1.0.14.0.20020107191928.02441230@mail.core.com>
Message-ID: <5.1.0.14.0.20020107203236.0243f0f8@mail.core.com>

At 1/7/2002 08:08 PM, Rich Salz wrote:
> > <http://www.w3.org/Provider/Style/URI.html>.  Specifically, I'd like to
> > eliminate the references to ".py" in my mod_python-managed URIs.  What are
> > my apache options to do this?
>
>AddHandler python-program .py
>DirectoryIndex index.py index.php index.html

Thanks for the quick response.  This appears to only work if i create a 
subdirectory with index.* files in it.  While this does get me one step 
closer to my goal, it doesn't get me all the way there.  Maybe I'll just 
have to deal with it?

To be a little more specific:

On my server, the URI:

   <http://192.168.1.50/tmp/mptest.py>

prints some arbitrary text in the browser display.

I wanted:

   <http://192.168.1.50/tmp/mptest>

(without the ".py") to do the same thing.  And I want this to work with any 
file in the web-server directory space (or any directory space that i want).

In order to get this to work with the above suggestion, i have to make a 
"mptest" subdirectory and copy mptest.py to mptest/index.py.  Not as 
convenient as i would like for the developers.  Furthermore, my user has to 
include a "/" at the end of the URI in order to ensure relative-link 
reference in the host/domain part of the URI (or at least, that seems to be 
the apparent behavior...something which i don't fully understand 
yet).  Otherwise without the trailing "/" i get a reverse-dns-lookup 
happening that replaces the host-domain part of the URI automatically (at 
least with my apache-server and opera-client).  This is undersire-able for 
my system.

-Matt


From rsalz at zolera.com  Mon Jan  7 22:50:17 2002
From: rsalz at zolera.com (Rich Salz)
Date: Fri Jan  9 21:46:35 2004
Subject: [mod_python] How to hide implementation specifics inURIs/URLs?
References: <5.1.0.14.0.20020107191928.02441230@mail.core.com> <5.1.0.14.0.20020107203236.0243f0f8@mail.core.com>
Message-ID: <3C3A6C79.8E07BE5F@zolera.com>

> On my server, the URI:
> 
>    <http://192.168.1.50/tmp/mptest.py>

Yes, it will require your users to create mptest/index.py et al.
The translation /path/to/dir/foo.py to /path/to/dir/foo/index.py should
be pretty easy for them to figure out, however. :)

> convenient as i would like for the developers.  Furthermore, my user has to
> include a "/" at the end of the URI in order to ensure relative-link

I do'nt think so.  If someone asks for /path/to/dir/foo, apache will
send a redirect, telling them to ask for /path/to/dir/foo/, which will
then kick in the index trick.
You can set the ServerName (or something like that) in httpd.conf to be
whatever you need/want.
	/r$
-- 
Zolera Systems, Securing web services (XML, SOAP, Signatures,
Encryption)
http://www.zolera.com

From grisha at modpython.org  Mon Jan  7 22:51:23 2002
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:46:35 2004
Subject: [mod_python] How to hide implementation specifics in  URIs/URLs?
In-Reply-To: <5.1.0.14.0.20020107203236.0243f0f8@mail.core.com>
Message-ID: <Pine.BSF.4.32.0201072250560.59147-100000@localhost>

Take a look at the Apache SetHandler directive, I think it does what you
need.

Grisha


On Mon, 7 Jan 2002, Matthew England wrote:

> At 1/7/2002 08:08 PM, Rich Salz wrote:
> > > <http://www.w3.org/Provider/Style/URI.html>.  Specifically, I'd like to
> > > eliminate the references to ".py" in my mod_python-managed URIs.  What are
> > > my apache options to do this?
> >
> >AddHandler python-program .py
> >DirectoryIndex index.py index.php index.html
>
> Thanks for the quick response.  This appears to only work if i create a
> subdirectory with index.* files in it.  While this does get me one step
> closer to my goal, it doesn't get me all the way there.  Maybe I'll just
> have to deal with it?
>
> To be a little more specific:
>
> On my server, the URI:
>
>    <http://192.168.1.50/tmp/mptest.py>
>
> prints some arbitrary text in the browser display.
>
> I wanted:
>
>    <http://192.168.1.50/tmp/mptest>
>
> (without the ".py") to do the same thing.  And I want this to work with any
> file in the web-server directory space (or any directory space that i want).
>
> In order to get this to work with the above suggestion, i have to make a
> "mptest" subdirectory and copy mptest.py to mptest/index.py.  Not as
> convenient as i would like for the developers.  Furthermore, my user has to
> include a "/" at the end of the URI in order to ensure relative-link
> reference in the host/domain part of the URI (or at least, that seems to be
> the apparent behavior...something which i don't fully understand
> yet).  Otherwise without the trailing "/" i get a reverse-dns-lookup
> happening that replaces the host-domain part of the URI automatically (at
> least with my apache-server and opera-client).  This is undersire-able for
> my system.
>
> -Matt
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From rsalz at zolera.com  Mon Jan  7 22:55:02 2002
From: rsalz at zolera.com (Rich Salz)
Date: Fri Jan  9 21:46:35 2004
Subject: [mod_python] How to hide implementation specifics inURIs/URLs?
References: <5.1.0.14.0.20020107191928.02441230@mail.core.com> <5.1.0.14.0.20020107203236.0243f0f8@mail.core.com> <3C3A6C79.8E07BE5F@zolera.com>
Message-ID: <3C3A6D96.C7FFF660@zolera.com>

> Yes, it will require your users to create mptest/index.py et al.

arrgh, typing too late.  your "programmers", not users.

> The translation /path/to/dir/foo.py to /path/to/dir/foo/index.py should
> be pretty easy for them to figure out, however. :)
> 
> > convenient as i would like for the developers.  Furthermore, my user has to
> > include a "/" at the end of the URI in order to ensure relative-link
> 
> I do'nt think so.  If someone asks for /path/to/dir/foo, apache will
> send a redirect, telling them to ask for /path/to/dir/foo/, which will
> then kick in the index trick.
> You can set the ServerName (or something like that) in httpd.conf to be
> whatever you need/want.
>         /r$

From mike at mikebell.org  Mon Jan  7 20:17:17 2002
From: mike at mikebell.org (Mike Bell)
Date: Fri Jan  9 21:46:35 2004
Subject: [mod_python] How to hide implementation specifics in URIs/URLs?
In-Reply-To: <5.1.0.14.0.20020107203236.0243f0f8@mail.core.com>; from mengland@mengland.net on Mon, Jan 07, 2002 at 08:40:47PM -0600
References: <5.1.0.14.0.20020107191928.02441230@mail.core.com> <3C3A548F.7EDC3D6C@zolera.com> <5.1.0.14.0.20020107203236.0243f0f8@mail.core.com>
Message-ID: <20020107201716.T2731@kryten.mikebell.org>

On Mon, Jan 07, 2002 at 08:40:47PM -0600, Matthew England wrote:
> Thanks for the quick response.  This appears to only work if i create a 
> subdirectory with index.* files in it.  While this does get me one step 
> closer to my goal, it doesn't get me all the way there.  Maybe I'll just 
> have to deal with it?
> 
> To be a little more specific:
> 
> On my server, the URI:
> 
>    <http://192.168.1.50/tmp/mptest.py>
> 
> prints some arbitrary text in the browser display.
> 
> I wanted:
> 
>    <http://192.168.1.50/tmp/mptest>

How about

<Location /tmp/mptest>
  Sethandler python-program
  PythonHandler mptest
</Location>

?

From mengland at mengland.net  Mon Jan  7 22:59:25 2002
From: mengland at mengland.net (Matthew England)
Date: Fri Jan  9 21:46:35 2004
Subject: [mod_python] How to hide implementation specifics in
  URIs/URLs?
In-Reply-To: <20020107201716.T2731@kryten.mikebell.org>
References: <5.1.0.14.0.20020107203236.0243f0f8@mail.core.com>
 <5.1.0.14.0.20020107191928.02441230@mail.core.com>
 <3C3A548F.7EDC3D6C@zolera.com>
 <5.1.0.14.0.20020107203236.0243f0f8@mail.core.com>
Message-ID: <5.1.0.14.0.20020107225708.02439e40@mail.core.com>

At 1/7/2002 10:17 PM, Mike Bell wrote:

>How about
>
><Location /tmp/mptest>
>   Sethandler python-program
>   PythonHandler mptest
></Location>
>
>?

Unless I'm missing something (and again remember i'm a newbie), this 
doesn't help me for other files in other directories.

I basically want any python script to be stripped of its .py extension in 
the URI that uses it.  Otherwise, as i see it, a web-server developer has 
to make an entry in httpd.conf for *every* .py file.  ouch.

-Matt


From grisha at modpython.org  Tue Jan  8 01:30:13 2002
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:46:35 2004
Subject: [mod_python] How to hide implementation specifics in  URIs/URLs?
In-Reply-To: <5.1.0.14.0.20020107225708.02439e40@mail.core.com>
Message-ID: <Pine.BSF.4.32.0201080127550.63527-100000@localhost>


I think simply adding

SetHandler python-program
PythonHandler mptest

at the DocumentRoot level would achieve that effect, but you better be
prepared to handle *every* request with modpython, which includes images,
html, etc.

Grisha


On Mon, 7 Jan 2002, Matthew England wrote:

> At 1/7/2002 10:17 PM, Mike Bell wrote:
>
> >How about
> >
> ><Location /tmp/mptest>
> >   Sethandler python-program
> >   PythonHandler mptest
> ></Location>
> >
> >?
>
> Unless I'm missing something (and again remember i'm a newbie), this
> doesn't help me for other files in other directories.
>
> I basically want any python script to be stripped of its .py extension in
> the URI that uses it.  Otherwise, as i see it, a web-server developer has
> to make an entry in httpd.conf for *every* .py file.  ouch.
>
> -Matt
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From neilb at nbt.co.za  Tue Jan  8 10:19:31 2002
From: neilb at nbt.co.za (Neil Beattie)
Date: Fri Jan  9 21:46:35 2004
Subject: [mod_python] Please Help
Message-ID: <NFBBKACIPKNFKAHLGHGBKEDADOAA.neilb@nbt.co.za>

Hi,
I'm am in a bit of trouble as I need to demo some code that used Python 2.2
I am using Python 2.2 and Apache 2.3.22 and Windows nt.
Is there anyone who could let me have a compiled dll.
I can change to Apache 2.3.20 if required.

I have tried compiling Mod_Python using C++ 5 but have had no success. Is it
possible?

Regards,
Neil.


From foofboy at speakeasy.net  Tue Jan  8 11:38:23 2002
From: foofboy at speakeasy.net (Robert Sherwood)
Date: Fri Jan  9 21:46:36 2004
Subject: [mod_python] TransHandler help?
In-Reply-To: <Pine.BSF.4.32.0201071910200.58948-100000@localhost>
References: <Pine.BSF.4.32.0201071910200.58948-100000@localhost>
Message-ID: <1010507904.19779.5.camel@lucifer>

Hi,

Transhandler translates a request from a URL to a filename. Though you
can rewrite a URL, I found it was easier simply to use the URL that I
had, particularly since, In my case, I could count on the argument order
and such.

This is an extremely simple example, but I wanted to set the file
request to main.py, which handled all the URL processing itself. The
important thing to remember is that the TransHandler figures out which
file you're requesting based on the URL you pass in. It can obviously do
any processing you need, but that is it's primary function.

from mod_python import apache
import string

def transhandler(req):
    #We want to use main.py
    req.filename = "main.py"
    return apache.OK

Again, I didn't use mod_python to process the URL, that is done by the
main Python Handler, as below (adapted slightly for your situation):

def handler(req):
    #remove trailing slash, if present
    URI = req.uri
    if URI[len(URI)-1] == '/':
        URI = URI[:len(URI)-1]

    #disassemble the URI for processing
    components = string.split(URI,'/')[1:]

    sessionID = components[0]

    command = components[1]

    what = components[2]

    # Do stuff here

There's no error checking or anything, but I found it was easier to use
the request as it came in, rather than rewriting it and processing that.
However, I had to use the TransHandler to set the request filename to
the script that did the processing.

Hope this helps.

Rob



On Mon, 2002-01-07 at 19:10, Gregory (Grisha) Trubetskoy wrote:
> 
> I'll have look into this some day. I *think* what mod_rewrite does is
> create a sub-request, but sub-requests are not supported by mod_python (i
> don't think there is anything that makes it impossible, the code is simple
> not there, it's just a SMOP ("simple matter of programming")...)
> 
> Grisha
> 
> 
> On Mon, 7 Jan 2002, Alan Kennedy wrote:
> 
> > Thanks Olly,
> >
> > It's good to know that I'm not the only who can't get it to work :-\
> >
> > I've been avoiding relying on mod_rewrite and its "cool voodoo". I have the training and
> > background to get my head around it, but members of my team unfortunately don't, whereas
> > they are all very comfortable with python.......
> >
> > Thanks for the reply,
> >
> > Cheers,
> >
> > Alan.
> >
> > Oliver Cope wrote:
> >
> > > On Mon, Jan 07, 2002 at 07:32:10PM +0000, Alan Kennedy wrote:
> > > >
> > > > I'm trying to get a PythonTransHandler working.
> > > >
> > > <snip>
> > >
> > > > *without* sending a redirect back to the client. Or a more sophisticated
> > > > example, how could I turn a request for
> > > >
> > > > /admin/abc1234/update/item4567
> > > >
> > > > into a request for
> > > >
> > > > /admin/doit.html?sessionID=abc1234&command=update&what=item4567
> > > >
> > > I too have spent some time trying to configure a PythonTransHandler, but
> > > couldn't get it to work :o(
> > >
> > > I've had more luck using mod_rewrite for this kind of thing:
> > >
> > > RewriteEngine On
> > > RewriteRule /admin/(.*)/(.*)/(.*) /admin/doit.html?sessionID=$1&command=$2&what=$3 [PT]
> > >
> > > This will rewrite requests without sending redirects back to the client.
> > > You can remove the '[PT]' if you don't need to further process the
> > > rewritten URL (e.g. through a PythonHandler).
> > >
> > > Obviously regular expressions are not as flexible as a Python
> > > handler can be, so this will only work for simple translations.  Also
> > > you'll need to have Apache compiled with mod_rewrite, I'm not sure if
> > > this is the default.
> > >
> > > Regards,
> > >
> > > Olly.
> > >
> > > _______________________________________________
> > > Mod_python mailing list
> > > Mod_python@modpython.org
> > > http://www.modpython.org/mailman/listinfo/mod_python
> >
> > _______________________________________________
> > Mod_python mailing list
> > Mod_python@modpython.org
> > http://www.modpython.org/mailman/listinfo/mod_python
> >
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 



From modpython at xhaus.com  Tue Jan  8 21:30:45 2002
From: modpython at xhaus.com (Alan Kennedy)
Date: Fri Jan  9 21:46:36 2004
Subject: [mod_python] TransHandler help?
References: <Pine.BSF.4.32.0201071910200.58948-100000@localhost> <1010507904.19779.5.camel@lucifer>
Message-ID: <3C3B6504.2AC7A3AD@xhaus.com>

Rob,

Bingo! That hit the nail square on the head, and drove it right home!

Excellent!

I obviously didn't read the documentation thoroughly enough. It states in section 5.1.3 about
PythonTransHandler:

"This routine gives allows for an opportunity to translate the URI into an actual *filename*" [my
emphasis].

That's filename, NOT uri. I mixed it up, and tried to modify the request URI, which is a
read-only attribute. Hence why I couldn't get it to work :*)

Many thanks for clearing this up. This means that I can forge ahead and rewrite URLs to contain
session IDs, without having to resort to "?sess=xyz" style query parameters.

Thanks again.

Alan.

Robert Sherwood wrote:

> Hi,
>
> Transhandler translates a request from a URL to a filename. Though you
> can rewrite a URL, I found it was easier simply to use the URL that I
> had, particularly since, In my case, I could count on the argument order
> and such.
>
> This is an extremely simple example, but I wanted to set the file
> request to main.py, which handled all the URL processing itself. The
> important thing to remember is that the TransHandler figures out which
> file you're requesting based on the URL you pass in. It can obviously do
> any processing you need, but that is it's primary function.
>
> from mod_python import apache
> import string
>
> def transhandler(req):
>     #We want to use main.py
>     req.filename = "main.py"
>     return apache.OK
>
> Again, I didn't use mod_python to process the URL, that is done by the
> main Python Handler, as below (adapted slightly for your situation):
>
> def handler(req):
>     #remove trailing slash, if present
>     URI = req.uri
>     if URI[len(URI)-1] == '/':
>         URI = URI[:len(URI)-1]
>
>     #disassemble the URI for processing
>     components = string.split(URI,'/')[1:]
>
>     sessionID = components[0]
>
>     command = components[1]
>
>     what = components[2]
>
>     # Do stuff here
>
> There's no error checking or anything, but I found it was easier to use
> the request as it came in, rather than rewriting it and processing that.
> However, I had to use the TransHandler to set the request filename to
> the script that did the processing.
>
> Hope this helps.
>
> Rob


From neilb at nbt.co.za  Wed Jan  9 22:59:28 2002
From: neilb at nbt.co.za (Neil Beattie)
Date: Fri Jan  9 21:46:36 2004
Subject: [mod_python] DLL for Windows
Message-ID: <NFBBKACIPKNFKAHLGHGBIEHODOAA.neilb@nbt.co.za>

Hi All,
I am desperately looking for a compiled dll for mod_python for Python 2.2
I can use Apache 3.20 or 3.22

I am a newbie at all things open source having decided to migrate my product
from VB last year.

I have been trying to compile mod_python using VC++ 5 but have not
succeeded.

Any help would be appreciated.

Neil




From neilb at nbt.co.za  Thu Jan 10 11:04:20 2002
From: neilb at nbt.co.za (Neil Beattie)
Date: Fri Jan  9 21:46:36 2004
Subject: [mod_python] DLL for Windows
In-Reply-To: <NFBBKACIPKNFKAHLGHGBIEHODOAA.neilb@nbt.co.za>
Message-ID: <NFBBKACIPKNFKAHLGHGBGEJJDOAA.neilb@nbt.co.za>

Ok I managed to compile a dll for Python 2.2 that works for me.
Anybody in the same position that I was in need it?
Neil.


> -----Original Message-----
> From: mod_python-admin@modpython.org
> [mailto:mod_python-admin@modpython.org]On Behalf Of Neil Beattie
> Sent: Wednesday, January 09, 2002 10:59 PM
> To: mod_python@modpython.org
> Subject: [mod_python] DLL for Windows
> 
> 
> Hi All,
> I am desperately looking for a compiled dll for mod_python for Python 2.2
> I can use Apache 1.3.20 or 3.22
> 
> I am a newbie at all things open source having decided to migrate 
> my product
> from VB last year.
> 
> I have been trying to compile mod_python using VC++ 5 but have not
> succeeded.
> 
> Any help would be appreciated.
> 
> Neil
> 
> 
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 

From jgardn at alumni.washington.edu  Thu Jan 10 21:58:28 2002
From: jgardn at alumni.washington.edu (Jonathan Gardner)
Date: Fri Jan  9 21:46:36 2004
Subject: [mod_python] Redirection with the Location Header and publisher handler
Message-ID: <200201101250.g0ACoIJ12496@my.knctv.co.kr>

I read through the documentation a few times. I am not sure how to do this.

What I want to do is to receive a hit to a function, and then have that 
function redirect the browser to another location.

For instance, I have a function that will present a form for adding an entry 
into a database. When the user hits "submit", I want to have the function 
that inserts the stuff into the db called, and then have it redirect the 
browser back to the original page with a status message of the sort "Row 
added" or "Cannot enter duplicate items in a unique column" or whatnot.

I know that there are two ways of doing this:

1) Sending some HTML that will redirect it to the appropriate location. This 
is a non-smooth solution.

2) Sending the Location header with the new location.

 (It's been a few months since I have done this, and I don't have the example 
code, plus it was done in mod_perl... this is three strikes against my 
memory. I could be wrong).

I've tried something like this: (Remember, I am using publisher as the 
handler)

def myfunc(req):
	req.headers_out['Location']="http://url/to/new/location"
	req.send_http_headers()
	return apache.OK

and I've tried a bunch of variations on this theme... but nothing seems to 
work write. Can someone give me a pointer or let me know where I'm confused?

Of course, I've read all the documentation, but nothing seems to help.

Jonathan



From foofboy at speakeasy.net  Thu Jan 10 11:31:42 2002
From: foofboy at speakeasy.net (Robert Sherwood)
Date: Fri Jan  9 21:46:36 2004
Subject: [mod_python] Redirection with the Location Header and publisher
	handler
In-Reply-To: <200201101250.g0ACoIJ12496@my.knctv.co.kr>
References: <200201101250.g0ACoIJ12496@my.knctv.co.kr>
Message-ID: <1010680303.3287.2.camel@lucifer>

I think you're looking for this:

req.content_type = 'text/html'
req.err_headers_out['Refresh'] = '3;http://usl/to/new/location'
#Redirect after 3 Seconds
req.send_http_header()
return apache.HTTP_MOVED_PERMANENTLY

Rob


On Thu, 2002-01-10 at 07:58, Jonathan Gardner wrote:
> I read through the documentation a few times. I am not sure how to do this.
> 
> What I want to do is to receive a hit to a function, and then have that 
> function redirect the browser to another location.
> 
> For instance, I have a function that will present a form for adding an entry 
> into a database. When the user hits "submit", I want to have the function 
> that inserts the stuff into the db called, and then have it redirect the 
> browser back to the original page with a status message of the sort "Row 
> added" or "Cannot enter duplicate items in a unique column" or whatnot.
> 
> I know that there are two ways of doing this:
> 
> 1) Sending some HTML that will redirect it to the appropriate location. This 
> is a non-smooth solution.
> 
> 2) Sending the Location header with the new location.
> 
>  (It's been a few months since I have done this, and I don't have the example 
> code, plus it was done in mod_perl... this is three strikes against my 
> memory. I could be wrong).
> 
> I've tried something like this: (Remember, I am using publisher as the 
> handler)
> 
> def myfunc(req):
> 	req.headers_out['Location']="http://url/to/new/location"
> 	req.send_http_headers()
> 	return apache.OK
> 
> and I've tried a bunch of variations on this theme... but nothing seems to 
> work write. Can someone give me a pointer or let me know where I'm confused?
> 
> Of course, I've read all the documentation, but nothing seems to help.
> 
> Jonathan
> 
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 



From sep27 at cornell.edu  Thu Jan 10 12:04:56 2002
From: sep27 at cornell.edu (S.Plake)
Date: Fri Jan  9 21:46:36 2004
Subject: [mod_python] (no subject)
Message-ID: <5.1.0.14.2.20020110120439.00b0a920@postoffice.mail.cornell.edu>

I need to search for a string in an html page and add code at a particular
line. This can be done online or off-line. I am having a problem searching
or the string. Can someone help? Thanks


From cl at scriptall.com  Thu Jan 10 14:33:55 2002
From: cl at scriptall.com (Chuck Lima)
Date: Fri Jan  9 21:46:36 2004
Subject: [mod_python] apache.py
Message-ID: <1010691235.1974.24.camel@px101>

Hello,

I may be a little late to the game on this one, but here goes.

python 2.1
apache 1.3.22
mod_python 2.7.6

Lines 356 and 359 of apache.py were hacking off the "y" from my modules
i.e.: "mymodule.py"  was not found because apache.py was looking for
"mymodule.p".  It seems the intention was to avoid loading compiled
modules.  mod_pyton has never compiled my modules -- is this not
standard?


Changes I made - -

original 356:
if os.path.exists(filepath[:-1]) :

new 356:
if os.path.exists(filepath) :

Also, "filepath[:-1]" on line 359 was changed to "filepath".

This seems to have solved the problem without adversely affecting the
running of my scripts.


The really odd thing, though; is that I've got another system running
the (practically) same setup with no mods.  The difference being the
apache version.

no mods here:
python 2.1
apache 1.3.19
mod_python 2.7.6

Comments, please.

Thanks,
-Chuck


From grisha at modpython.org  Thu Jan 10 15:59:10 2002
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:46:36 2004
Subject: [mod_python] Redirection with the Location Header and publisher
 handler
In-Reply-To: <200201101250.g0ACoIJ12496@my.knctv.co.kr>
Message-ID: <Pine.BSF.4.32.0201101556070.34235-100000@localhost>


if you're using the publisher, then something like this should work:

def myfunc(req):
 	req.headers_out['Location']="http://blah/blah"
	req.status = apache.HTTP_MOVED_TEMPORARILY
 	return 'You are being redirected to a <a href="http://blah/blah"> new location</a>'


On Thu, 10 Jan 2002, Jonathan Gardner wrote:

> def myfunc(req):
> 	req.headers_out['Location']="http://url/to/new/location"
> 	req.send_http_headers()
> 	return apache.OK



From grisha at modpython.org  Thu Jan 10 16:01:02 2002
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:46:36 2004
Subject: [mod_python] apache.py
In-Reply-To: <1010691235.1974.24.camel@px101>
Message-ID: <Pine.BSF.4.32.0201101600400.34235-100000@localhost>

http://www.modpython.org/FAQ/faqw.py?req=all#2.3

On 10 Jan 2002, Chuck Lima wrote:

> Hello,
>
> I may be a little late to the game on this one, but here goes.
>
> python 2.1
> apache 1.3.22
> mod_python 2.7.6
>
> Lines 356 and 359 of apache.py were hacking off the "y" from my modules
> i.e.: "mymodule.py"  was not found because apache.py was looking for
> "mymodule.p".  It seems the intention was to avoid loading compiled
> modules.  mod_pyton has never compiled my modules -- is this not
> standard?
>
>
> Changes I made - -
>
> original 356:
> if os.path.exists(filepath[:-1]) :
>
> new 356:
> if os.path.exists(filepath) :
>
> Also, "filepath[:-1]" on line 359 was changed to "filepath".
>
> This seems to have solved the problem without adversely affecting the
> running of my scripts.
>
>
> The really odd thing, though; is that I've got another system running
> the (practically) same setup with no mods.  The difference being the
> apache version.
>
> no mods here:
> python 2.1
> apache 1.3.19
> mod_python 2.7.6
>
> Comments, please.
>
> Thanks,
> -Chuck
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From jgardn at alumni.washington.edu  Fri Jan 11 07:02:12 2002
From: jgardn at alumni.washington.edu (Jonathan Gardner)
Date: Fri Jan  9 21:46:36 2004
Subject: [mod_python] Redirection with the Location Header and publisher handler
In-Reply-To: <Pine.BSF.4.32.0201101556070.34235-100000@localhost>
References: <Pine.BSF.4.32.0201101556070.34235-100000@localhost>
Message-ID: <200201102153.g0ALrlJ09318@my.knctv.co.kr>

On Friday 11 January 2002 05:59 am, Gregory (Grisha) Trubetskoy wrote:
> if you're using the publisher, then something like this should work:
>
> def myfunc(req):
>  	req.headers_out['Location']="http://blah/blah"
> 	req.status = apache.HTTP_MOVED_TEMPORARILY
>  	return 'You are being redirected to a <a href="http://blah/blah"> new
> location</a>'
>

1) There's a status attribute? =) I think this should be added to the 
documentation.

2) I have scoured the 'net for a good explanation of the HTTP error codes, to 
no avail.

It looks like you are saying HTTP_MOVED_TEMPORARILY means "Dear browser, I 
want you to go to this new place instead of here. But next time you get a 
link here, come straight here without delay, do not pass go, and do not 
collect $200."

Conversely, HTTP_MOVED_PERMANENTLY might mean, "Dear browser, how many times 
have I got to tell you you won't find anything here! Stop looking here, go to 
this other place to find what you are looking for."

What is HTTP_TEMPORARY_REDIRECT for? Does it mean the same as 
HTTP_MOVED_TEMPORARILY?

Jonathan

From tree at basistech.com  Thu Jan 10 17:07:50 2002
From: tree at basistech.com (Tom Emerson)
Date: Fri Jan  9 21:46:36 2004
Subject: [mod_python] Redirection with the Location Header and publisher handler
In-Reply-To: <200201102153.g0ALrlJ09318@my.knctv.co.kr>
References: <Pine.BSF.4.32.0201101556070.34235-100000@localhost>
	<200201102153.g0ALrlJ09318@my.knctv.co.kr>
Message-ID: <15422.4278.657220.93787@magrathea.basistech.com>

Jonathan Gardner writes:
[...]
> 2) I have scoured the 'net for a good explanation of the HTTP error codes, to 
> no avail.

Section 10 of RFC 2616 (HTTP 1.1) describes the HTTP result codes in
great detail, describing the behavior of a conforming
implementation. Section 10.3 covers redirection.

    -tree

-- 
Tom Emerson                                          Basis Technology Corp.
Sr. Computational Linguist                         http://www.basistech.com
  "Beware the lollipop of mediocrity: lick it once and you suck forever"

From jgardn at alumni.washington.edu  Fri Jan 11 07:14:33 2002
From: jgardn at alumni.washington.edu (Jonathan Gardner)
Date: Fri Jan  9 21:46:36 2004
Subject: [mod_python] Patch - **args with Publisher
Message-ID: <200201102206.g0AM68J09472@my.knctv.co.kr>

I expected to be able to get all the script args with a piece of code like 
this:

def scriptname(req, **args):
	...

but instead I got none of them at all.

Here is the patch that does what I expect. If I need to submit this 
differently, let me know.

*** publisher.py	Mon Jul  9 21:54:40 2001
--- /usr/local/lib/python2.0/site-packages/mod_python/publisher.py	Fri Jan 11 
07:08:51 2002
***************
*** 150,155 ****
--- 150,157 ----
          # and for that we need to get a list of them. There
          # are a few options for callable objects here:
  
+         # Whether or not there is a **args argument in the function list.
+         has_keyarg = 0
          if str(type(object)) == "<type 'instance'>":
              # instances are callable when they have __call__()
              object = object.__call__
***************
*** 158,172 ****
              # function
              fc = object.func_code
              expected = fc.co_varnames[0:fc.co_argcount]
          elif hasattr(object, 'im_func'):
              # method
              fc = object.im_func.func_code
              expected = fc.co_varnames[1:fc.co_argcount]
  
          # remove unexpected args
!         for name in args.keys():
!             if name not in expected:
!                 del args[name]
  
          result = apply(object, (), args)
  
--- 160,177 ----
              # function
              fc = object.func_code
              expected = fc.co_varnames[0:fc.co_argcount]
+             has_keyarg = fc.co_flags & 0x08
          elif hasattr(object, 'im_func'):
              # method
              fc = object.im_func.func_code
              expected = fc.co_varnames[1:fc.co_argcount]
+             has_keyarg = fc.co_flags & 0x08
  
          # remove unexpected args
!         if not has_keyarg:
!             for name in args.keys():
!                 if name not in expected:
!                     del args[name]
  
          result = apply(object, (), args)

From jgardn at alumni.washington.edu  Fri Jan 11 07:26:18 2002
From: jgardn at alumni.washington.edu (Jonathan Gardner)
Date: Fri Jan  9 21:46:36 2004
Subject: [mod_python] Redirection with the Location Header and publisher handler
In-Reply-To: <15422.4278.657220.93787@magrathea.basistech.com>
References: <Pine.BSF.4.32.0201101556070.34235-100000@localhost> <200201102153.g0ALrlJ09318@my.knctv.co.kr> <15422.4278.657220.93787@magrathea.basistech.com>
Message-ID: <200201102217.g0AMHqJ09593@my.knctv.co.kr>

On Friday 11 January 2002 07:07 am, you wrote:
> Jonathan Gardner writes:
> [...]
>
> > 2) I have scoured the 'net for a good explanation of the HTTP error
> > codes, to no avail.
>
> Section 10 of RFC 2616 (HTTP 1.1) describes the HTTP result codes in
> great detail, describing the behavior of a conforming
> implementation. Section 10.3 covers redirection.
>
>     -tree

I know it probably sounds like you're speaking with an idiot, but you have no 
idea how much that has helped. 

Where can I find a listing of all these RFC's and what they stand for?

Thanks a million, literally!

Jonathan

From tree at basistech.com  Thu Jan 10 17:35:35 2002
From: tree at basistech.com (Tom Emerson)
Date: Fri Jan  9 21:46:36 2004
Subject: [mod_python] Redirection with the Location Header and publisher handler
In-Reply-To: <200201102217.g0AMHqJ09593@my.knctv.co.kr>
References: <Pine.BSF.4.32.0201101556070.34235-100000@localhost>
	<200201102153.g0ALrlJ09318@my.knctv.co.kr>
	<15422.4278.657220.93787@magrathea.basistech.com>
	<200201102217.g0AMHqJ09593@my.knctv.co.kr>
Message-ID: <15422.5943.969913.409274@magrathea.basistech.com>

Jonathan Gardner writes:
[...]
> I know it probably sounds like you're speaking with an idiot, but you have no 
> idea how much that has helped. 

I'm glad I could be of assistance.

> Where can I find a listing of all these RFC's and what they stand for?

Try <http://www.ietf.org/rfc.html> : you can retrieve by number of
view the index which includes titles.

For web-related technology, the first place I would look, however, is
the W3C's website, <http://www.w3.org/>. In particular you can find a
lot of information on HTTP and its related technology at

<http://www.w3.org/Protocols/>

including references to the RFC I mentioned.

    -tree

-- 
Tom Emerson                                          Basis Technology Corp.
Sr. Computational Linguist                         http://www.basistech.com
  "Beware the lollipop of mediocrity: lick it once and you suck forever"

From grisha at modpython.org  Thu Jan 10 17:59:45 2002
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:46:36 2004
Subject: [mod_python] Redirection with the Location Header and publisher
 handler
In-Reply-To: <200201102153.g0ALrlJ09318@my.knctv.co.kr>
Message-ID: <Pine.BSF.4.32.0201101735430.34235-100000@localhost>


On Fri, 11 Jan 2002, Jonathan Gardner wrote:

> 1) There's a status attribute? =) I think this should be added to the
> documentation.

Yes, somehow it slipped in the documentation, but the FAQ entry regarding
redirection shows it.

> 2) I have scoured the 'net for a good explanation of the HTTP error codes, to
> no avail.

Check out RFC2616 http://www.w3.org/Protocols/rfc2616/rfc2616.txt

I don't know what the difference between 302 and 307 is. If you look at
the (older) RFC2068, 302 used to be called "moved temporarily", and with
RFC2616 it became "found"  and a new code 307 "temporary redirect" was
introduced which seems to be functionally equivalent to 302 (the text is
word for word the same).

Here is a link I found that talks about this stuff
http://ppewww.ph.gla.ac.uk/~flavell/www/post-redirect.html

For all practical purposes I would use 302 - I suspect 307 is not
supported on many older browsers.

Grisha


From grisha at modpython.org  Thu Jan 10 18:01:22 2002
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:46:36 2004
Subject: [mod_python] Patch - **args with Publisher
In-Reply-To: <200201102206.g0AM68J09472@my.knctv.co.kr>
Message-ID: <Pine.BSF.4.32.0201101800280.34235-100000@localhost>

Thanks - someone already submitted a patch for this and version 3 will
behave this way.

On Fri, 11 Jan 2002, Jonathan Gardner wrote:

> I expected to be able to get all the script args with a piece of code like
> this:
>
> def scriptname(req, **args):
> 	...
>
> but instead I got none of them at all.
>
> Here is the patch that does what I expect. If I need to submit this
> differently, let me know.
>
> *** publisher.py	Mon Jul  9 21:54:40 2001
> --- /usr/local/lib/python2.0/site-packages/mod_python/publisher.py	Fri Jan 11
> 07:08:51 2002
> ***************
> *** 150,155 ****
> --- 150,157 ----
>           # and for that we need to get a list of them. There
>           # are a few options for callable objects here:
>
> +         # Whether or not there is a **args argument in the function list.
> +         has_keyarg = 0
>           if str(type(object)) == "<type 'instance'>":
>               # instances are callable when they have __call__()
>               object = object.__call__
> ***************
> *** 158,172 ****
>               # function
>               fc = object.func_code
>               expected = fc.co_varnames[0:fc.co_argcount]
>           elif hasattr(object, 'im_func'):
>               # method
>               fc = object.im_func.func_code
>               expected = fc.co_varnames[1:fc.co_argcount]
>
>           # remove unexpected args
> !         for name in args.keys():
> !             if name not in expected:
> !                 del args[name]
>
>           result = apply(object, (), args)
>
> --- 160,177 ----
>               # function
>               fc = object.func_code
>               expected = fc.co_varnames[0:fc.co_argcount]
> +             has_keyarg = fc.co_flags & 0x08
>           elif hasattr(object, 'im_func'):
>               # method
>               fc = object.im_func.func_code
>               expected = fc.co_varnames[1:fc.co_argcount]
> +             has_keyarg = fc.co_flags & 0x08
>
>           # remove unexpected args
> !         if not has_keyarg:
> !             for name in args.keys():
> !                 if name not in expected:
> !                     del args[name]
>
>           result = apply(object, (), args)
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From cl at scriptall.com  Thu Jan 10 18:02:21 2002
From: cl at scriptall.com (Chuck Lima)
Date: Fri Jan  9 21:46:36 2004
Subject: [mod_python] apache.py
In-Reply-To: <3C3E0CF4.5020206@city.dk>
References: <1010691235.1974.24.camel@px101>  <3C3E0CF4.5020206@city.dk>
Message-ID: <1010703742.2071.2.camel@px101>

Thanks, will do.


On Thu, 2002-01-10 at 16:51, Ole Hansen wrote:
> Hi,
> 
> I had the very same problem, and for a while I thought I was the only 
> one in the universe. I also made similar hack.
> 
> This is a bug in python itself. The bug was introduced somewhere between 
> Python 2.0 and 2.1.1 and fixed in Python 2.2b3, but Python 2.2 (final) 
> has been released now, so I would go for the final Python 2.2.
> 
> Happy coding :-)
> 
> Br,
> Ole Hansen
> 
> 
> 
> Chuck Lima wrote:
> 
> > Hello,
> > 
> > I may be a little late to the game on this one, but here goes.
> > 
> > python 2.1
> > apache 1.3.22
> > mod_python 2.7.6
> > 
> > Lines 356 and 359 of apache.py were hacking off the "y" from my modules
> > i.e.: "mymodule.py"  was not found because apache.py was looking for
> > "mymodule.p".  It seems the intention was to avoid loading compiled
> > modules.  mod_pyton has never compiled my modules -- is this not
> > standard?
> > 
> > 
> > Changes I made - -
> > 
> > original 356:
> > if os.path.exists(filepath[:-1]) :
> > 
> > new 356:
> > if os.path.exists(filepath) :
> > 
> > Also, "filepath[:-1]" on line 359 was changed to "filepath".
> > 
> > This seems to have solved the problem without adversely affecting the
> > running of my scripts.
> > 
> > 
> > The really odd thing, though; is that I've got another system running
> > the (practically) same setup with no mods.  The difference being the
> > apache version.
> > 
> > no mods here:
> > python 2.1
> > apache 1.3.19
> > mod_python 2.7.6
> > 
> > Comments, please.
> > 
> > Thanks,
> > -Chuck
> > 
> > _______________________________________________
> > Mod_python mailing list
> > Mod_python@modpython.org
> > http://www.modpython.org/mailman/listinfo/mod_python
> > 
> > .
> > 
> > 
> 
> 
> 
> 



From oliver at redgecko.org  Thu Jan 10 23:12:46 2002
From: oliver at redgecko.org (Oliver Cope)
Date: Fri Jan  9 21:46:36 2004
Subject: [mod_python] Redirection with the Location Header and publisher handler
In-Reply-To: <200201102217.g0AMHqJ09593@my.knctv.co.kr>
References: <Pine.BSF.4.32.0201101556070.34235-100000@localhost> <200201102153.g0ALrlJ09318@my.knctv.co.kr> <15422.4278.657220.93787@magrathea.basistech.com> <200201102217.g0AMHqJ09593@my.knctv.co.kr>
Message-ID: <20020110231246.GA23053@canoodle.redgecko.org>

On Fri, Jan 11, 2002 at 07:26:18AM +0900, Jonathan Gardner wrote:
> >
> > Section 10 of RFC 2616 (HTTP 1.1) describes the HTTP result codes in
> > great detail, describing the behavior of a conforming
> > implementation. Section 10.3 covers redirection.
> >
> >     -tree
> 
> Where can I find a listing of all these RFC's and what they stand for?
> 
http://rfc.net/

The RFC mentioned above may be found at http://rfc.net/rfc2616.html

Olly.


From lbergman at abi.tconline.net  Fri Jan 11 09:05:17 2002
From: lbergman at abi.tconline.net (Lewis Bergman)
Date: Fri Jan  9 21:46:36 2004
Subject: [mod_python] error on make install
Message-ID: <200201111505.g0BF5Hb32618@lewis.abi.tconline.net>

I have searched the recent archives and I haven't seen anyone else with this 
problem. I therefore assume I have done something stupid. This is my first 
attempt at mod_python and I am new to python as well.

Background:
Python 2.2 , configured --with-threads=no
mod_python 2.7.6
Apache 1.3.22-2 , (rpm)
Apache-devel 1.3.22-2 , (rpm) for apxs

My configure line looks like this:
./configure --with-apxs=/usr/sbin/apxs --with-python=/root/tar/Python-2.2
no errors here.
I do a make and get no errors.

On make install I get this:
python /usr/local/lib/python2.2/compileall.py 
/usr/local/lib/python2.2/site-packages/mod_python
Traceback (innermost last):
  File "/usr/local/lib/python2.2/compileall.py", line 147, in ?
    exit_status = not main()
  File "/usr/local/lib/python2.2/compileall.py", line 104, in main
    import getopt
  File "/usr/local/lib/python2.2/getopt.py", line 101
    possibilities = [o for o in longopts if o.startswith(opt)]
                                   ^
SyntaxError: invalid syntax
make[2]: *** [install_py_lib] Error 1
make[2]: Leaving directory `/root/tar/mod_python-2.7.6'
make[1]: *** [install_dso] Error 2
make[1]: Leaving directory `/root/tar/mod_python-2.7.6'
make: *** [install] Error 2

Does anyone have a clue as to what I have (or have not) done?
It says syntax error but no-one else seems to be having difficulty. Any help 
is greatly appreciated.
-- 
Lewis Bergman
Texas Communications
4309 Maple St.
Abilene, TX 79602-8044
915-695-6962 ext 115

From jgardn at alumni.washington.edu  Sat Jan 12 12:37:03 2002
From: jgardn at alumni.washington.edu (Jonathan Gardner)
Date: Fri Jan  9 21:46:36 2004
Subject: [mod_python] Redirection with the Location Header and publisher handler
In-Reply-To: <1010680303.3287.2.camel@lucifer>
References: <200201101250.g0ACoIJ12496@my.knctv.co.kr> <1010680303.3287.2.camel@lucifer>
Message-ID: <200201120330.g0C3SBJ22837@my.knctv.co.kr>

On Friday 11 January 2002 01:31 am, Robert Sherwood wrote:
> I think you're looking for this:
>
> req.content_type = 'text/html'
> req.err_headers_out['Refresh'] = '3;http://usl/to/new/location'
> #Redirect after 3 Seconds
> req.send_http_header()
> return apache.HTTP_MOVED_PERMANENTLY
>
> Rob

It wasn't what I was looking for, and it doesn't quite work right.

I can't seem to get the Refresh header to behave properly with the default 
setting of Apache. However, this works wonderfully:

req.headers_out['Location'] = "http://www.google.com/"
return apache.HTTP_MOVED_PERMANENTLY

Of course, you can use HTTP_MOVED_TEMPORARILY or HTTP_TEMPORARY_REDIRECT is 
you like.

Jonathan

From foofboy at speakeasy.net  Sat Jan 12 12:38:04 2002
From: foofboy at speakeasy.net (Robert Sherwood)
Date: Fri Jan  9 21:46:36 2004
Subject: [mod_python] Redirection with the Location Header and publisher
	handler
In-Reply-To: <200201120330.g0C3SBJ22837@my.knctv.co.kr>
References: <200201101250.g0ACoIJ12496@my.knctv.co.kr>
	<1010680303.3287.2.camel@lucifer> 
	<200201120330.g0C3SBJ22837@my.knctv.co.kr>
Message-ID: <1010857085.6132.2.camel@lucifer>

Okay, now I'm confused. I didn't think that the configuration of the
webserver would have any effect on this. It should be one hundred
percent dependent on the browser. Looks like I have some reading to do.

Rob

On Fri, 2002-01-11 at 22:37, Jonathan Gardner wrote:
> On Friday 11 January 2002 01:31 am, Robert Sherwood wrote:
> > I think you're looking for this:
> >
> > req.content_type = 'text/html'
> > req.err_headers_out['Refresh'] = '3;http://usl/to/new/location'
> > #Redirect after 3 Seconds
> > req.send_http_header()
> > return apache.HTTP_MOVED_PERMANENTLY
> >
> > Rob
> 
> It wasn't what I was looking for, and it doesn't quite work right.
> 
> I can't seem to get the Refresh header to behave properly with the default 
> setting of Apache. However, this works wonderfully:
> 
> req.headers_out['Location'] = "http://www.google.com/"
> return apache.HTTP_MOVED_PERMANENTLY
> 
> Of course, you can use HTTP_MOVED_TEMPORARILY or HTTP_TEMPORARY_REDIRECT is 
> you like.
> 
> Jonathan
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 



From modpython at xhaus.com  Sun Jan 13 23:05:18 2002
From: modpython at xhaus.com (Alan Kennedy)
Date: Fri Jan  9 21:46:36 2004
Subject: [mod_python] HTTP compression.
Message-ID: <3C4212AE.47644F9E@xhaus.com>

Greetings all,

If anyone is interested, I've put together a page about compressing
content over HTTP with gzip, to minimise bandwidth usage. You can read
the page at

http://www.iol.ie/~alank/python/httpcomp.html

There is some sample mod_python code on the page.

Regards,

Alan.



From jfk at informaticon.dk  Mon Jan 14 09:36:15 2002
From: jfk at informaticon.dk (=?iso-8859-1?q?J=F8rgen=20Fr=F8jk=20Kj=E6rsgaard?=)
Date: Fri Jan  9 21:46:36 2004
Subject: [mod_python] Re: HTTP compression.
In-Reply-To: <3C4212AE.47644F9E@xhaus.com>
References: <3C4212AE.47644F9E@xhaus.com>
Message-ID: <02011409361500.01463@adele>

Mandag 14. Januar 2002 00:05 skrev du:
> Greetings all,
>
> If anyone is interested, I've put together a page about compressing
> content over HTTP with gzip, to minimise bandwidth usage. You can read
> the page at
>
> http://www.iol.ie/~alank/python/httpcomp.html
>
> There is some sample mod_python code on the page.

An alternative to this scheme is to use mod_gzip 
(http://www.remotecommunications.com/apache/mod_gzip/). This module is 
capable of compressing any HTTP data, static as well as dynamically 
generated. I use it successfully e.g. on the mod_python based site 
www.get2stamps.com. The gzip compression reduces the transfer time for tables 
with much similar data by more than 80%!

regards, J?rgen

-- 
J?rgen Fr?jk Kj?rsgaard, Systemkonsulent (Systems Consultant)
Informaticon ApS * Web: www.informaticon.dk * Tlf: +45 8672 0093
Internetkataloger * Dataindsamling * Specialudvikling * Systemarbejde

From thegreengrinch at operamail.com  Mon Jan 14 02:10:38 2002
From: thegreengrinch at operamail.com (Eric Mangold)
Date: Fri Jan  9 21:46:36 2004
Subject: [mod_python] Compilation problem.
Message-ID: <001301c19ce3$b74a65a0$050a010a@ericxp>

I'm attempting to compile mod_python 3, under Linux, glibc2.2, with apache
2.0.28 and python2.2 final. apache is compiled and installed under
/usr/local/apache. python is compiled and installed under /usr. my configure
line is as follows:

# CFLAGS="-O6 -march=i686 -ffast-math"
./configure --with-apxs=/usr/local/apache/bin/apxs

and i try to make it as follows:

# make dso
make[1]: Entering directory `/download/mod_python3/src'
gcc  -I/download/mod_python3/src/include -I/usr/local/apache/include -I/usr/
include/python2.2    -c -o mod_python.o mod_python.c
mod_python.c: In function `python_filter':
mod_python.c:1019: warning: passing arg 4 of `ap_get_brigade' from
incompatible pointer type
mod_python.c: In function `directive_PythonInputFilter':
mod_python.c:1479: warning: passing arg 2 of `ap_register_input_filter' from
incompatible pointer type
gcc  -I/download/mod_python3/src/include -I/usr/local/apache/include -I/usr/
include/python2.2    -c -o _apachemodule.o _apachemodule.c
gcc  -I/download/mod_python3/src/include -I/usr/local/apache/include -I/usr/
include/python2.2    -c -o requestobject.o requestobject.c
requestobject.c:916: structure has no member named `content_language'
requestobject.c:916: initializer element is not constant
requestobject.c:916: (near initialization for
`request_memberlist[41].offset')
requestobject.c:1015: parse error before `u'
requestobject.c: In function `tuple_from_parsed_uri':
requestobject.c:1021: `u' undeclared (first use in this function)
requestobject.c:1021: (Each undeclared identifier is reported only once
requestobject.c:1021: for each function it appears in.)
make[1]: *** [requestobject.o] Error 1
make[1]: Leaving directory `/download/mod_python3/src'
make: *** [do_dso] Error 2

python is compiled without thread support, however, apache is compiled with
the 'worker' MPM, if that means anything.


From ray_drew at yahoo.co.uk  Mon Jan 14 18:04:19 2002
From: ray_drew at yahoo.co.uk (Ray Drew)
Date: Fri Jan  9 21:46:36 2004
Subject: [mod_python] DLL for Windows
References: <NFBBKACIPKNFKAHLGHGBIEJLDOAA.neilb@nbt.co.za>
Message-ID: <015a01c19d25$e436c530$df13000a@RDREWXP>

----- Original Message -----
From: "Neil Beattie" <neilb@nbt.co.za>
To: "Ray Drew" <ray_drew@yahoo.co.uk>
Sent: Thursday, January 10, 2002 10:11 AM
Subject: RE: [mod_python] DLL for Windows


> Hi Ray,
> I compiled it against apache 1.3.22 but have tested it on a machine that
is
> running 1.3.20
> Hope it works for you!
> Neil.
>
>

Neil,

Yes this works for me on Apache 1.3.22.

Thanks very much,

Ray




_________________________________________________________
Do You Yahoo!?
Get your free @yahoo.com address at http://mail.yahoo.com


From roman at it-ukraine.com  Tue Jan 15 13:03:57 2002
From: roman at it-ukraine.com (Roman V Moroz)
Date: Fri Jan  9 21:46:36 2004
Subject: [mod_python] mod_python per VirtualHost
Message-ID: <200201151104.g0FB3v785297@violator.zp.ua>

Hi!

Is there possibility to turn on/off mod_python per-VirtualHost?
How to do this if possible?  

Thanx,
--------------------------------------------------------------
Roman V Moroz                   IT-Ukraine ltd
System Administrator
NIC-HDL: VIO13-RIPE             Zaporozhye,   Ukraine
http://www.moroz.zp.ua		http://www.it-ukraine.com


From rsherwood at cryptoknights.com  Wed Jan 16 12:30:22 2002
From: rsherwood at cryptoknights.com (Robert Sherwood)
Date: Fri Jan  9 21:46:36 2004
Subject: [mod_python] Python Path
Message-ID: <1011202223.14792.17.camel@lucifer>

Greetings all:

Someone is going to kick me, but I know I'm overlooking something
obvious and I was hoping one of you could spot it.

I am trying to have my main PythonHandler import a module that is below
it in the directory tree. Here is the basic information:

=========================================================

0. mod_python 2.7.6 running on debian unstable, using python-2.1.1

1. Scripts located in and below "/var/python"

2. mod_python listening on an apache VirtualHost

3. Config file as follows:
  Listen 8080
  <VirtualHost beelzebub:8080>
    DocumentRoot /var/python
    PythonPath "['/var/python/'] + sys.path"
    PythonDebug On
    PythonAutoReload On
    SetHandler python-program
    PythonTransHandler trans
    PythonHandler main
  </VirtualHost>

4. Python handler main failing at this directive:

  File "/var/python/main.py", line 3, in ?
     import browse.listArtists

  ImportError: No module named browse.listArtists

5. ls -F /var/python

admin/	 data/	  main.pyc  objects/	 playlists/    template/  trans.pyc 
browse/  main.py  mod_mp3/  parseRDF.py  preferences/  trans.py

6. ls -F /var/python/browse

__init__.py  listArtistAlbumSongs.py  listArtistAlbums.py 
listArtists.py

========================================================

I can't figure it out. It is as if the PythonPath directive were not
being inherited by the interpreter running main.py. Is this a bug, or am
I stupid?

Or both :)

Thanks in advance for any help anyone can offer.

Robert Sherwood


From modpython at xhaus.com  Wed Jan 16 20:09:17 2002
From: modpython at xhaus.com (Alan Kennedy)
Date: Fri Jan  9 21:46:36 2004
Subject: [mod_python] Python Path
References: <1011202223.14792.17.camel@lucifer>
Message-ID: <3C45DDEC.7FCAA7B@xhaus.com>

Rob,

I'm not sure if this will solve your problem, but have you tried placing an
__init__.py in the /var/python directory. With content like this

__all__ = ['browse']

To setup the "browse" package.

Just a suggestion,

Alan.

Robert Sherwood wrote:

> Greetings all:
>
> Someone is going to kick me, but I know I'm overlooking something
> obvious and I was hoping one of you could spot it.
>
> I am trying to have my main PythonHandler import a module that is below
> it in the directory tree. Here is the basic information:
>
> =========================================================
>
> 0. mod_python 2.7.6 running on debian unstable, using python-2.1.1
>
> 1. Scripts located in and below "/var/python"
>
> 2. mod_python listening on an apache VirtualHost
>
> 3. Config file as follows:
>   Listen 8080
>   <VirtualHost beelzebub:8080>
>     DocumentRoot /var/python
>     PythonPath "['/var/python/'] + sys.path"
>     PythonDebug On
>     PythonAutoReload On
>     SetHandler python-program
>     PythonTransHandler trans
>     PythonHandler main
>   </VirtualHost>
>
> 4. Python handler main failing at this directive:
>
>   File "/var/python/main.py", line 3, in ?
>      import browse.listArtists
>
>   ImportError: No module named browse.listArtists
>
> 5. ls -F /var/python
>
> admin/   data/    main.pyc  objects/     playlists/    template/  trans.pyc
> browse/  main.py  mod_mp3/  parseRDF.py  preferences/  trans.py
>
> 6. ls -F /var/python/browse
>
> __init__.py  listArtistAlbumSongs.py  listArtistAlbums.py
> listArtists.py
>
> ========================================================
>
> I can't figure it out. It is as if the PythonPath directive were not
> being inherited by the interpreter running main.py. Is this a bug, or am
> I stupid?
>
> Or both :)
>
> Thanks in advance for any help anyone can offer.
>
> Robert Sherwood
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python


From jgardn at alumni.washington.edu  Fri Jan 18 07:20:23 2002
From: jgardn at alumni.washington.edu (Jonathan Gardner)
Date: Fri Jan  9 21:46:36 2004
Subject: [mod_python] PyHTMLArch
Message-ID: <200201172235.g0HMZSO32204@my.knctv.co.kr>

For fun and education, I coded up my own handler. I wanted something like a 
bare-bones HTML::Mason, and I wanted to keep the template and the code 
completely seperate. What I came up with is PyHTMLArch. It is now at 
sourceforge - http://sf.net/projects/pyhtmlarch

It has several features that I like.
 - The code an the template are seperate
 - The template executes bits of code rather than doing a substitute. This is 
so you can write "The current time is <% time() %>" or " <% name %> has phone 
number of <% phone_nos[name] %>".
 - The code has full access to the request object. However, the CGI 
parameters are parsed and passed in as arguments.
 - It is simple, yet powerful. Combined with a working understanding of 
Apache and mod_python, it is quite a useful bit of code.

You can download it with CVS or as a bzip2. If you have any questions, be 
sure to email me. If you actually end up playing with it, let me know how you 
use it because I am very interested. I am always open to suggestions, bug 
fixes, etc... I am also interested in helping you get to use it.

Jonathan


From jgardn at alumni.washington.edu  Sat Jan 19 01:10:07 2002
From: jgardn at alumni.washington.edu (Jonathan Gardner)
Date: Fri Jan  9 21:46:36 2004
Subject: [mod_python] installing --with-python Python 2.2
Message-ID: <200201181625.g0IGPTY24849@my.knctv.co.kr>

Summary:
After a lot of research, I still can't get the --with-python option to work 
properly with Python 2.2. Linking problems.

Details:
I searched the entire archive of the mailing list. [NOTE: The link to 
download the entire mailing list from 
http://www.modpython.org/pipermail/mod_python/ is broken], I found only one 
helpful tip for my compiling problems: Don't use --with-python.

Sure enough, it works with 2.2 if I have it all installed so I don't need the 
--with-python option.

I know for a fact that 2.0.1 and 2.1.2 work with the --with-python option 
because I have installed both of them several times without a hitch. Well, I 
lie, but you after a while I got everything working together like they should.

My system: SuSE 7.1, running self-compiled Linux 2.4.14 kernel. 

I downloaded the sources for Python 2.2, Apache1.3.22, and mod_python 2.7.6.

1) Uncompressed all the sources to /usr/local/src/

2) Made a seperate source directory for the no threads version: 
  $ cp -R Python-2.2 Python-2.2-no-threads

3) For /usr/local/src/Python-2.2/, I did:
  $ ./configure
  $ make
  # make install

  Everything went smoothly.

4) For /usr/local/src/Python-2.2-no-threads/, I did:
  $ ./configure --without-threads
  $ make
  
  I also did this, so as to make everything available to Apache. I am sure 
that I only need to do a couple files, but which ones I do not know.
  $ chmod -R a+w *

  Everything went smoothly.

5) Went into the mod_python directory, and ran the following instructions. 
  $ ./configure --with-python=/usr/local/src/Python-2.2-no-threads/ \
    --with-apache=/usr/local/src/apache_1.3.22
  $ make static
  $ make install_static
  # make install_py_lib
  
  Everything went smoothly.

6) Went into the apache directory and did:
  $ ./configure --activate-module=src/modules/python/libpython.a
  $ make

  This is where it stops working. The complaint it spits out is:

gcc  -DLINUX=22 -DUSE_HSREGEX -DNO_DL_NEEDED `./apaci` -Xlinker 
-export-dynamic       \
      -o httpd buildmark.o modules.o modules/standard/libstandard.a 
modules/python/libpython.a main/libmain.a ./os/unix/libos.a ap/libap.a 
regex/libregex.a   -lm -lcrypt -lm  
/usr/local/src/Python-2.2-no-threads/libpython2.2.a   -lexpat
/usr/local/src/Python-2.2-no-threads/libpython2.2.a(posixmodule.o): In 
function `posix_tmpnam':
/usr/local/src/Python-2.2-no-threads/./Modules/posixmodule.c:4510: the use of 
`tmpnam' is dangerous, better use `mkstemp'
/usr/local/src/Python-2.2-no-threads/libpython2.2.a(posixmodule.o): In 
function `posix_tempnam':
/usr/local/src/Python-2.2-no-threads/./Modules/posixmodule.c:4458: the use of 
`tempnam' is dangerous, better use `mkstemp'
/usr/local/src/Python-2.2-no-threads/libpython2.2.a(dynload_shlib.o): In 
function `_PyImport_GetDynLoadFunc':
/usr/local/src/Python-2.2-no-threads/Python/dynload_shlib.c:90: undefined 
reference to `dlopen'
/usr/local/src/Python-2.2-no-threads/Python/dynload_shlib.c:93: undefined 
reference to `dlerror'
/usr/local/src/Python-2.2-no-threads/Python/dynload_shlib.c:98: undefined 
reference to `dlsym'
/usr/local/src/Python-2.2-no-threads/libpython2.2.a(posixmodule.o): In 
function `posix_openpty':
/usr/local/src/Python-2.2-no-threads/./Modules/posixmodule.c:1942: undefined 
reference to `openpty'
/usr/local/src/Python-2.2-no-threads/libpython2.2.a(posixmodule.o): In 
function `posix_forkpty':
/usr/local/src/Python-2.2-no-threads/./Modules/posixmodule.c:1973: undefined 
reference to `forkpty'
collect2: ld returned 1 exit status

IANAPIH - I am not a Python internals hacker so I have no idea what this 
means.

Jonathan

From alain at onesite.org  Fri Jan 18 21:10:28 2002
From: alain at onesite.org (Alain Tesio)
Date: Fri Jan  9 21:46:37 2004
Subject: [mod_python] Import problem with math.so
Message-ID: <20020118211028.5587b591.alain@onesite.org>

Hi, from time to time I get this error, top fix it I must go
to the modpython src dir and run make && make install.

Mod_python error: "PythonHandler observer_www"

Traceback (most recent call last):

  File "/usr/local/lib/python2.1/site-packages/mod_python/apache.py", line 181, in Dispatch
    module = import_module(module_name, _req)

  File "/usr/local/lib/python2.1/site-packages/mod_python/apache.py", line 338, in import_module
    module = imp.load_module(mname, f, p, d)

  File "/home/observer/scripts/observer_www.py", line 13, in ?
    import wwwlib

  File "/home/observer/scripts/wwwlib.py", line 1, in ?
    import mycgi

  File "/home/observer/scripts/mycgi.py", line 9, in ?
    import math

ImportError: /usr/lib/python2.1/lib-dynload/math.so: undefined symbol: PyFPE_jbuf


However ldd gives only shared libs in the standard path:

05:53:18 observer ~/scripts $ldd /usr/lib/python2.1/lib-dynload/math.so
        libm.so.6 => /lib/libm.so.6 (0x40009000)
        libc.so.6 => /lib/libc.so.6 (0x4002b000)
        /lib/ld-linux.so.2 => /lib/ld-linux.so.2 (0x80000000)

I can import the module from the interpreter:

05:53:34 observer ~/scripts $python
Python 2.1.1 (#2, Jan 13 2002, 17:07:14)
[GCC 2.95.4 20011006 (Debian prerelease)] on linux2
Type "copyright", "credits" or "license" for more information.
>>> import math
>>>

The configure line is:

../configure --with-apxs=`which apxs` --with-python=/usr/src/Python-2.1.1

and the compilation commands:

/usr/bin/apxs -I/usr/src/mod_python-2.7.6/src/include -I/usr/include/apache-1.3 -I/usr/src/Python-2.1.1 -I/usr/src/Python-2.1.1/Include -c mod_python.o _apachemodule.o requestobject.o tableobject.o util.o serverobject.o connobject.o  -lm  /usr/src/Python-2.1.1/libpython2.1.a   -ldl  -lutil   -lm           -lreadline -ltermcap
gcc -shared -o mod_python.so mod_python.o _apachemodule.o requestobject.o tableobject.o util.o serverobject.o connobject.o -lm /usr/src/Python-2.1.1/libpython2.1.a -ldl -lutil -lm -lreadline -ltermcap -lc -lm -lcrypt -ldb1 -ldb


Another similar error I can't explain, fixed the same way is with one of
my modules:

>   File "/home/observer/scripts/observer_www.py", line 18, in handler
>     form_items=wwwlib.mod_python_form_items(req)
> 
> AttributeError: 'wwwlib' module has no attribute 'mod_python_form_items'



Any idea ?

Thanks
Alain

From djc at object-craft.com.au  Sat Jan 19 15:06:37 2002
From: djc at object-craft.com.au (Dave Cole)
Date: Fri Jan  9 21:46:37 2004
Subject: [mod_python] Re: PyHTMLArch
In-Reply-To: <200201172235.g0HMZSO32204@my.knctv.co.kr>
References: <200201172235.g0HMZSO32204@my.knctv.co.kr>
Message-ID: <m3zo3bf0he.fsf@ferret.object-craft.com.au>

> For fun and education, I coded up my own handler. I wanted something
> like a bare-bones HTML::Mason, and I wanted to keep the template and
> the code completely seperate. What I came up with is PyHTMLArch. It
> is now at sourceforge - http://sf.net/projects/pyhtmlarch

You might also want to have a look at the Albatross toolkit (I am the
primary developer).  Albatross is slightly more ambitious in that it
allows you to deploy your application either via mod_python or as a
CGI program.  This is quite handy while you are doing development.

> It has several features that I like.  - The code an the template are
> seperate - The template executes bits of code rather than doing a
> substitute. This is so you can write "The current time is <% time()
> %>" or " <% name %> has phone number of <% phone_nos[name] %>".  -
> The code has full access to the request object. However, the CGI
> parameters are parsed and passed in as arguments.  - It is simple,
> yet powerful. Combined with a working understanding of Apache and
> mod_python, it is quite a useful bit of code.

Albatross uses a DTML like templating syntax with some interesting
capabilities.  latex2html choked on some of the text causing the
template to be truncated, but the PDF documentation shows the template
text correctly.

    http://www.object-craft.com.au/projects/albatross/albatross/tug-tree.html

Macro expansion is a nice way to make your templates maintainable.

    http://www.object-craft.com.au/projects/albatross/albatross/tag-macro.html

There are a number of ways to implement server or client side
sessions.

Albatross is not an application server, it is a toolkit which you can
bend to your particular needs.  Most of the code in the toolkit is a
collection of small classes which are mixed together in different ways
to provide a suite of application frameworks and request execution
contexts.  To get you started quickly there are a number of
pre-packaged classes which are likely to suit your needs.  If these
are not exactly what you require you can provide drop in replacements
for any of the building blocks.

In the following diagram the light grey boxes enclose the pre-packaged
application and execution context classes.  The darker grey boxes
enclose classes which provide the same function but with different
semantics.  By providing your own drop in replacement for any of these
classes you can change one or more aspects of the toolkit behaviour.

    http://www.object-craft.com.au/projects/albatross/albatross/pack-overview.html

The home page for the toolkit is here:

    http://www.object-craft.com.au/projects/albatross/

We use Albatross for paid consulting work, so we are very serious
about making Albatross useful.

The current PDF documentation stands at 125 pages and the current line
count for Albatross (using the highly scientific wc -l metric) is 2646
lines.

- Dave

-- 
http://www.object-craft.com.au


From tchur at optushome.com.au  Sat Jan 19 19:00:38 2002
From: tchur at optushome.com.au (Tim Churches)
Date: Fri Jan  9 21:46:37 2004
Subject: [mod_python] Re: PyHTMLArch
References: <200201172235.g0HMZSO32204@my.knctv.co.kr> <m3zo3bf0he.fsf@ferret.object-craft.com.au>
Message-ID: <3C4927A6.5B6B33B4@optushome.com.au>

Dave Cole wrote:
> The current PDF documentation stands at 125 pages and the current line
> count for Albatross (using the highly scientific wc -l metric) is 2646
> lines.

If one assumes a mean of 20 lines of text per page of documentation,
that means the documentation-to-code line count ratio for Albatross must
be pretty close to unity, which is encouraging. The ideal ratio of lines
of documentation to lines of code is, of course, phi, the Golden Mean,
which is an irrational number with a value of approximately
1.6180339887499...

Tim C

From modpython at xhaus.com  Fri Jan 25 09:35:06 2002
From: modpython at xhaus.com (Alan Kennedy)
Date: Fri Jan  9 21:46:37 2004
Subject: [mod_python] Web sessions and threading.
Message-ID: <200201251445.JAA38220@spool4.valueweb.net>

Greetings All,

I'm putting together a session tracking mechanism for
Apache and mod_python, on Win and Linux. And my mind is
being twisted trying to decide if I need to worry about
thread safety or not.

My confusion arises from trying to juggle the concepts of
the Python Global Interpreter Lock and the way that
Apache handles simultaneous requests.

On Windows, Apache spawns a single child, which then
creates a thread to service every request received. On
Linux, Apache maintains a pool of single-threaded child
processes, which compete to service incoming requests.

So, imagine I have a mod_python handler function, which
is going to extract a session ID from incoming requests,
and use that as a key to retrieve a corresponding session
object from some storage (say, a memory mapped file,
rdbms(?)).

That session object can then be modified by the handler
function, and thus must then be written back to storage.

Since it is possible for two requests from the same
session to be handled by different threads
windows)/processes(linux), I obviously have a concurrent
access problem.

On Linux, there are no threading issues, since all of
the processes serving requests are single-threaded.

However, it is obviously different on multi-threaded 
Windows. On Windows, I don't know if it is possible for
two threads to update the same python object at the same
time, i.e. I don't know the effect of the Global
Interpreter Lock(GIL).

On Windows, the two threads will definitely be run in
the same interpreter (the default configuration for
mod_python).

So, my question: do I need to protect the session objects
against concurrent access from multiple threads (and thus
complicate the code)? Or can I ignore the issue, i.e. is
access to the object serialised by the GIL?

I know I could probably answer my question by reading and
understanding the python and mod_python source code. But I
was hoping someone might be able to give me pointers to
documentation which might throw some light on the scenario?

Many thanks,

Alan.



---------------------------------------------
This message was sent using WebMail by CyberGate.
http://www.gate.net/webmail



From grisha at modpython.org  Fri Jan 25 13:20:55 2002
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:46:37 2004
Subject: [mod_python] Web sessions and threading.
In-Reply-To: <200201251445.JAA38220@spool4.valueweb.net>
Message-ID: <Pine.BSF.4.32.0201251318270.7431-100000@localhost>


On Fri, 25 Jan 2002, Alan Kennedy wrote:

> Greetings All,
>
> I'm putting together a session tracking mechanism for
> Apache and mod_python, on Win and Linux. And my mind is
> being twisted trying to decide if I need to worry about
> thread safety or not.

The general answer is "yes". Even thoug Python will make sure that access
is serialized, your logic needs to anticipate and prevent unexpected
changes to an object.

On UNIX it doesn't matter now, but it will with Apache 2.0.

Grisha


From lbergman at abi.tconline.net  Mon Jan 28 08:04:27 2002
From: lbergman at abi.tconline.net (Lewis Bergman)
Date: Fri Jan  9 21:46:37 2004
Subject: [mod_python] python web tools?
Message-ID: <200201281404.g0SE4S014732@lewis.abi.tconline.net>

Does anyone know of web tools for use with mod_python?

I was thinking of something along the lines of a validation class, forms 
class, authentication class. General tools for handling common tasks on the 
web.

-- 
Lewis Bergman
Texas Communications
4309 Maple St.
Abilene, TX 79602-8044
915-695-6962 ext 115

From lbergman at abi.tconline.net  Mon Jan 28 11:16:37 2002
From: lbergman at abi.tconline.net (Lewis Bergman)
Date: Fri Jan  9 21:46:37 2004
Subject: [mod_python] Re: mod_python make install problem
In-Reply-To: <3C496FB4.7A6E2E@ndh.net>
References: <3C496FB4.7A6E2E@ndh.net>
Message-ID: <200201281716.g0SHGbn14970@lewis.abi.tconline.net>

> Another reason could be that the getopt code from the Python 2.2
> library is actually executed by an older Python interpreter that
> doesn't know of list comprehensions.

It seems that this explanation is correct. I had installed python2.2 on this 
machine with the make altinstall command as it is a RH7.2 install. simply 
using make install breaks all kinds of things including printing.

So, somehow, even though the instructions were followed completely and the 
--with-python switch was pointing to the right place, the make install was 
somehow using the other 1.5.2 install of python.

I used a spare machine, installed python2.2 as the only python and it worked.
curious.

I do get an error about mod_python being compiled without -DEAPI though. Is 
this something to worry about? Perhaps I forgot to compile 2.2 with the 
--with-threads=no option and this caused it?
-- 
Lewis Bergman
Texas Communications
4309 Maple St.
Abilene, TX 79602-8044
915-695-6962 ext 115


From grisha at modpython.org  Mon Jan 28 13:40:57 2002
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:46:37 2004
Subject: [mod_python] Re: mod_python make install problem
In-Reply-To: <200201281716.g0SHGbn14970@lewis.abi.tconline.net>
Message-ID: <Pine.BSF.4.32.0201281331300.37930-100000@localhost>

If I recall correctly, the issue here is that until Python is installed
(i.e. make install was run), there is no way to determine some install
time parameters, such as where the lib directory is.

the last paragraph on this page talks about it a little bit:
http://www.modpython.org/live/mod_python-2.7.6/doc-html/inst-configure.html

Grisha

On Mon, 28 Jan 2002, Lewis Bergman wrote:

> > Another reason could be that the getopt code from the Python 2.2
> > library is actually executed by an older Python interpreter that
> > doesn't know of list comprehensions.
>
> It seems that this explanation is correct. I had installed python2.2 on this
> machine with the make altinstall command as it is a RH7.2 install. simply
> using make install breaks all kinds of things including printing.
>
> So, somehow, even though the instructions were followed completely and the
> --with-python switch was pointing to the right place, the make install was
> somehow using the other 1.5.2 install of python.
>
> I used a spare machine, installed python2.2 as the only python and it worked.
> curious.
>
> I do get an error about mod_python being compiled without -DEAPI though. Is
> this something to worry about? Perhaps I forgot to compile 2.2 with the
> --with-threads=no option and this caused it?
> --
> Lewis Bergman
> Texas Communications
> 4309 Maple St.
> Abilene, TX 79602-8044
> 915-695-6962 ext 115
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From bakey at traq.com  Mon Jan 28 15:06:37 2002
From: bakey at traq.com (Brian Akey)
Date: Fri Jan  9 21:46:37 2004
Subject: [mod_python] A python help site
Message-ID: <780A5D64B1CC9544AB7B702F39219C1E5FB8@traqexch.traq.com>

I made up a site to help people trying to setup mod_python.
If anyone sees some mistakes or thinks I should add something, please
drop me an email at bakey@traq.com <mailto:bakey@traq.com> 
 
Brian Akey
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20020128/62bf7f5d/attachment.htm
From woodm at equire.com  Mon Jan 28 14:37:27 2002
From: woodm at equire.com (Matthew D. Wood)
Date: Fri Jan  9 21:46:37 2004
Subject: [mod_python] A python help site
In-Reply-To: <780A5D64B1CC9544AB7B702F39219C1E5FB8@traqexch.traq.com>
References: <780A5D64B1CC9544AB7B702F39219C1E5FB8@traqexch.traq.com>
Message-ID: <1012253847.1836.17.camel@localhost.localdomain>

Yes, I do believe that I have found something that you were missing...

What's the address? :-)

On Mon, 2002-01-28 at 14:06, Brian Akey wrote:
> I made up a site to help people trying to setup mod_python.
> If anyone sees some mistakes or thinks I should add something, please
> drop me an email at bakey@traq.com <mailto:bakey@traq.com> 
>  
> Brian Akey
-- 
                                               _________________________
----------------------------------------------/                         
                                             /  Matthew D. Wood         
 "activist for accuracy"                    /  Home Phone: 303.415.1550 
                                           /  E-Mail: woodm@equire.com  
                                          /                             
_________________________________________/------------------------------

From bakey at traq.com  Mon Jan 28 15:27:24 2002
From: bakey at traq.com (Brian Akey)
Date: Fri Jan  9 21:46:37 2004
Subject: [mod_python] A python help site
Message-ID: <780A5D64B1CC9544AB7B702F39219C1E5FBA@traqexch.traq.com>

http://cricket.ironkeytech.com <http://cricket.ironkeytech.com>  


I made up a site to help people trying to setup mod_python.
If anyone sees some mistakes or thinks I should add something, please
drop me an email at bakey@traq.com <mailto:bakey@traq.com> 
 
Brian Akey

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20020128/33d945b4/attachment.htm
From magnus at hetland.org  Mon Jan 28 22:58:10 2002
From: magnus at hetland.org (Magnus Lie Hetland)
Date: Fri Jan  9 21:46:37 2004
Subject: [mod_python] A python help site
In-Reply-To: <1012253847.1836.17.camel@localhost.localdomain>; from woodm@equire.com on Mon, Jan 28, 2002 at 02:37:27PM -0700
References: <780A5D64B1CC9544AB7B702F39219C1E5FB8@traqexch.traq.com> <1012253847.1836.17.camel@localhost.localdomain>
Message-ID: <20020128225810.C14200@idi.ntnu.no>

Matthew D. Wood <woodm@equire.com>:
>
> Yes, I do believe that I have found something that you were missing...
> 
> What's the address? :-)
 
That was in the original mail:

http://cricket.ironkeytech.com 

--
Magnus Lie Hetland                                  The Anygui Project
http://hetland.org                                  http://anygui.org

From magnus at hetland.org  Mon Jan 28 23:25:32 2002
From: magnus at hetland.org (Magnus Lie Hetland)
Date: Fri Jan  9 21:46:37 2004
Subject: [mod_python] A python help site
In-Reply-To: <20020128225810.C14200@idi.ntnu.no>; from magnus@hetland.org on Mon, Jan 28, 2002 at 10:58:10PM +0100
References: <780A5D64B1CC9544AB7B702F39219C1E5FB8@traqexch.traq.com> <1012253847.1836.17.camel@localhost.localdomain> <20020128225810.C14200@idi.ntnu.no>
Message-ID: <20020128232532.D14200@idi.ntnu.no>

Magnus Lie Hetland <magnus@hetland.org>:
>
> Matthew D. Wood <woodm@equire.com>:
> >
> > Yes, I do believe that I have found something that you were missing...
> > 
> > What's the address? :-)
>  
> That was in the original mail:

<ahem>

Sorry -- I was a bit quick there :)

--
Magnus Lie Hetland                                  The Anygui Project
http://hetland.org                                  http://anygui.org

From gbeasley at tsa.ac.za  Tue Jan 29 12:47:06 2002
From: gbeasley at tsa.ac.za (Grant Beasley)
Date: Fri Jan  9 21:46:37 2004
Subject: [mod_python] Persistent variables?
Message-ID: <OOENKCHGJGHILGPAGHGOKEIMCBAA.gbeasley@tsa.ac.za>

Hi

Firstly, I hope this hasn't already come up, but I've searched the archives
back a few months and can't find anything.

I have a mod python authentification script which, upon authentification,
reads user details from a database and places them in a global dictionary
indexed on the userid. This is kept in a separate module (called Globals),
and accessed through functions in the global module. This dictionary seems
to persist through HTTP connections, so on subsequent calls I can just read
the dictionary instead of the database.

I haven't come up with any problems thus far, except that isinstance doesn't
seem to function correctly. If I create a Widget instance and store it in my
global dictionary, on subsequent sessions, although the Widget instance
exists, and widget.__class__ is equal to the Widget class (in string terms),
isinstance returns 0. I'd assume this is because I've somehow reloaded the
Widget class and hence it does not compare equally to the class stored with
the original widget instance.

I hope that makes sense and doesn't sound like complete gibberish. Can
anyone explain this to me, and indicate whether storing user data like this
is safe and sensible? Should I be reading user details from my database?

Thanks
Grant Beasley
Technikon SA


From grisha at modpython.org  Wed Jan 30 14:00:20 2002
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:46:37 2004
Subject: [mod_python] About authentication
In-Reply-To: <Pine.LNX.4.10.10110041113020.7933-100000@mrham.hamslab.com>
Message-ID: <Pine.BSF.4.32.0201301353430.94999-100000@localhost>

No passwdord is not an unusual condition - your code should deal with
users who do not supply passwords by returning them HTTP_UNAUTHORIZED.

So something like:

if password:
	md5.new(password).hexdigest()
else:
	return apache.HTTP_UNAUTHORIZED

On Thu, 4 Oct 2001 nineclue@bigfoot.com wrote:

> I'm trying to implement custom authentication using authenhandler.
> I want to save user info and password in encrypted file that other users
> can only read. So I've tried to use md5.new('password').hexdigest().
> 'password' is a variable that stores password using
> req.get_basic_auth_pw().
>
> When I've tried to load restricted page, I got error saying 'password'
> variable is not read-only buffer, but None. I can use direct comparison
> of username and password with string as to the mod_python document, but I
> can't use it in a function that accepts string as a argument.
>
> Any comment or help would be appreciated.
> mod_python is 2.7.2.
>
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From jm at eemsystems.cjb.net  Wed Jan 30 18:25:26 2002
From: jm at eemsystems.cjb.net (Julio Mendoza)
Date: Fri Jan  9 21:46:37 2004
Subject: [mod_python] mod_python and form process
Message-ID: <1012433126.26213.13.camel@eemsystems>

I need to process a form with variable number of fields.

how to do that with mod_python?


thanks,

JM





From malex at purdue.edu  Thu Jan 31 01:38:03 2002
From: malex at purdue.edu (Oleksandr Moskalenko)
Date: Fri Jan  9 21:46:37 2004
Subject: [mod_python] Import Error puzzle
Message-ID: <20020131063803.GA32627@purdue.edu>

 Hello all,

I'm really puzzled by this problem. I have two identical configurations
on two pretty much identical Debian GNU/Linux Unstable systems. Both use
python 2.1 + mod_python 2.7.6. Mod_python works fine on one of those,
but on the other it produces the following error:

Mod_python error: "PythonHandler mptest"

Traceback (most recent call last):

  File "/usr/lib/python2.1/site-packages/mod_python/apache.py", line
181, in Dispatch
    module = import_module(module_name, _req)

  File "/usr/lib/python2.1/site-packages/mod_python/apache.py", line
335, in import_module
    f, p, d = imp.find_module(parts[i], path)

ImportError: No module named mptest



Now as far as I understand mod_python adds the current directory to the
front of the sys.path and then imports module by name. What could go
wrong here? Regular python cgi scripts work fine. I can successfully run
the following, for example:
#!/usr/bin/env python

print 'Content-Type: text/html'
print
print '<html>'
print ' <head>'
print '  <title>My CGI application</title>'
print ' </head>'
print ' <body>'
print '  Hello from my simple CGI application!'
print ' </body>'
print '</html>'

and get the Hello... string

Can anybody help me troubleshoot this?


Thank you,

Alex.

-----------------------
Oleksandr Moskalenko
malex@purdue.edu
-----------------------
pub  1024D/6C5F196B 2001-08-17 /* http://www.tagancha.org/pgp */
Oleksandr V. Moskalenko (Alex) <malex@tagancha.org>
Fingerprint = EE63 C471 ADBA 5D80 ADFB  1054 DA28 6F32 6C5F 196B
----------------------------------------------------------------

From bakey at traq.com  Thu Jan 31 09:59:37 2002
From: bakey at traq.com (Brian Akey)
Date: Fri Jan  9 21:46:37 2004
Subject: [mod_python] mod_python and form process
Message-ID: <780A5D64B1CC9544AB7B702F39219C1E5FCF@traqexch.traq.com>

You can use the regular dictionary functions of python.
form = util.FieldStorage(req)
That gets you the post information
form.keys() will give you a list of keys

fn = form.keys()
for fn1 in fn:
	req.write('keyname is ' + str(fn1) + '<br>\n')
	req.write('value is ' + str(form[fn1]) + '<br>\n')

Brian

>I need to process a form with variable number of fields.
>
>how to do that with mod_python?

From ray_drew at yahoo.co.uk  Wed Jan  2 11:15:12 2002
From: ray_drew at yahoo.co.uk (Ray Drew)
Date: Fri Jan  9 21:52:40 2004
Subject: [mod_python] Python 2.2
References: <Pine.BSF.4.32.0112171033370.20970-100000@localhost>
Message-ID: <024f01c1937e$c0349b40$df13000a@RDREWXP>


>
> I haven't tried compiling it with 2.2 yet, but chances are it will work
> without any modifications... I guess we'll see when it comes out. :)
>
> On Mon, 17 Dec 2001, Ray Drew wrote:
>
> > Is mod_python avalable for Python 2.2 yet? Python 2.2 final is scheduled
for
> > release later this week.
> >

Now that Python 2.2 is out, do you know when mod_python will support it? I'm
running with Apache 1.3.22 on Windows NT/XP.

Thanks,

Ray Drew


_________________________________________________________
Do You Yahoo!?
Get your free @yahoo.com address at http://mail.yahoo.com


From grisha at modpython.org  Wed Jan  2 13:04:50 2002
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:52:40 2004
Subject: [mod_python] Python 2.2
In-Reply-To: <024f01c1937e$c0349b40$df13000a@RDREWXP>
Message-ID: <Pine.BSF.4.32.0201021303190.98580-100000@localhost>

AFAIK it will work with 2.2 as is, it's just a matter of compiling a DLL.
My access to a windows box with a compiler is somewhat limited right now -
perhaps someone on the list would contribute a compiled DLL?

Grisha

On Wed, 2 Jan 2002, Ray Drew wrote:

>
>
> >
> > I haven't tried compiling it with 2.2 yet, but chances are it will work
> > without any modifications... I guess we'll see when it comes out. :)
> >
> > On Mon, 17 Dec 2001, Ray Drew wrote:
> >
> > > Is mod_python avalable for Python 2.2 yet? Python 2.2 final is scheduled
> for
> > > release later this week.
> > >
>
> Now that Python 2.2 is out, do you know when mod_python will support it? I'm
> running with Apache 1.3.22 on Windows NT/XP.
>
> Thanks,
>
> Ray Drew
>
>
> _________________________________________________________
> Do You Yahoo!?
> Get your free @yahoo.com address at http://mail.yahoo.com
>
>


From rsalz at zolera.com  Thu Jan  3 12:34:19 2002
From: rsalz at zolera.com (Rich Salz)
Date: Fri Jan  9 21:52:40 2004
Subject: [mod_python] configure.in patch
Message-ID: <3C34961B.1000705@zolera.com>

configure[.in] has code to set AP_SRC_OWN and AP_SRC_GRP by parsing the 
output of "ls -ld".  It wants that information so that it can chown the 
files it copies into the apache source tree.   There are a number of 
problems with this.

0.  it requires root privs.
1.  the operation is often unnecessary, as the installer of mod-python 
should be the apache owner.
2.  if they are not the same, masking the owner looses accountability :)
3.  the output of "ls -l" is different across platforms, including the 
placement of the fields (for extraction via awk) and some versions put a
  "total nnnn" line out first.

I believe the best solution is to not chown things; we patch the 
Makefile so that the install targets do not do that. The attached diff, 
however, merely makes mod_python's configure more robust in the fact of 
multi-line "ls" output.  It does not address the more fundamental 
problem, which is that the output of "ls" puts those fields in different 
  places on different hosts.  One way to address that would be to gather 
the values via a short python program.
	/r$
-- 
Zolera Systems, Your Key to Online Integrity
Securing Web services: XML, SOAP, Dig-sig, Encryption
http://www.zolera.com
-------------- next part --------------
*** configure.in.ORIG	Thu Jan  3 12:17:06 2002
--- configure.in	Thu Jan  3 12:25:34 2002
***************
*** 163,170 ****
    AP_INCLUDES="-I${AP_SRC}/src/include -I${AP_SRC}/src/os/unix"
  
    # note who owns the apache source directory
!   AP_SRC_OWN="`ls -ld $AP_SRC | awk '{print $3}'`"
!   AP_SRC_GRP="`ls -ld $AP_SRC | awk '{print $4}'`"
  ],
  AC_MSG_RESULT(no))
  
--- 163,170 ----
    AP_INCLUDES="-I${AP_SRC}/src/include -I${AP_SRC}/src/os/unix"
  
    # note who owns the apache source directory
!   AP_SRC_OWN="`ls -ld $AP_SRC | awk '{print $3}' | tr -d '[\012\015]'`"
!   AP_SRC_GRP="`ls -ld $AP_SRC | awk '{print $4}' | tr -d '[\012\015]'`"
  ],
  AC_MSG_RESULT(no))
  
From x at Vex.Net  Fri Jan  4 14:28:48 2002
From: x at Vex.Net (Tm)
Date: Fri Jan  9 21:52:40 2004
Subject: [mod_python] ob-CallBack Kenobi
Message-ID: <20020104193220.92BD144A9A6@spitfire.velocet.net>

This is an issue that seems to come up periodically on this list. I've 
searched and read all the messages I could find on the subject. The 
realy strange thing is that I've installed, setup, and used succesfully 
mod_python on two other NetBSD systems, with no problems. But the 
NetBSD system I'm trying to get it going on now (essentially identical 
to the previous ones) just refuses to cooperate:

make_obcallback(): could not import mod_python.apache.
make_obcallback(): could not call init.
python_handler: make_obcallback returned no obCallBack!

I've checked the permissions of the libraries, i've checked the 
locatoins, i've fiddled with the python path.

Can anyone give any more tips on how I might debug this situation and 
figure out what is actually going wrong here?

I'm using NetBSD 1.5.1, Apache 1.3.22, Python 2.01 without threads 
(installed in the standard NetBSD locations).


From eelgueta at vtr.net  Sat Jan  5 15:21:35 2002
From: eelgueta at vtr.net (Eduardo Elgueta)
Date: Fri Jan  9 21:52:40 2004
Subject: [mod_python] unsuscribe
Message-ID: <1010254896.6694.3.camel@jerry.srd.cl>

unsuscribe




From x at Vex.Net  Sun Jan  6 00:18:02 2002
From: x at Vex.Net (T. Muddletin)
Date: Fri Jan  9 21:52:40 2004
Subject: [mod_python] ob-CallBack Kenobi
In-Reply-To: <20020104193220.92BD144A9A6@spitfire.velocet.net>
References: <20020104193220.92BD144A9A6@spitfire.velocet.net>
Message-ID: <55371568667.20020106001802@Vex.Net>

Tim wrote on Friday, January 04, 2002, 2:28:48 PM:
> I've checked the permissions of the libraries, i've checked the
> locations, i've fiddled with the python path.

As a last resort i hauled out the apache source and managed to build
mod_python statically with it. And it seems to be working fine this
way. Strange that the DSO module won't work on this machine, but the
statically compiled one does? I'm not familiar enough with the
internals to speculate as to why, but just thought i'd mention this is
how i solved the dilemma finally, in case anyone else has a similar
problem...

Though i would really like to get the DSO module to work on this
machine eventually. At least it works statically for now, and
development can move ahead.

-- 
Tim Middleton | Cain Gang Ltd | But the trouble was that my hysterical fit
x@veX.net     | www.Vex.Net   | could not go on for ever. --Dost (NFTU)


From modpython at xhaus.com  Mon Jan  7 19:32:10 2002
From: modpython at xhaus.com (Alan Kennedy)
Date: Fri Jan  9 21:52:40 2004
Subject: [mod_python] TransHandler help?
Message-ID: <3C39F7BA.653BE2A8@xhaus.com>

Greetings All,

And many thanks to Grisha for an excellent body of work.

I'm trying to get a PythonTransHandler working.

What I am trying to do is modify an URL before it goes through standard
Apache processing. (See below for an explanation why, if you wish)

Could someone possibly give me a simple example (including
configuration) of how I could, for example, change every request for a
.html file to a request for a .xyz file. That is, a request for

/admin/index.html

would become a request for

/admin/index.xyz

*without* sending a redirect back to the client. Or a more sophisticated
example, how could I turn a request for

/admin/abc1234/update/item4567

into a request for

/admin/doit.html?sessionID=abc1234&command=update&what=item4567

Many thanks for any help offered.

Regards,

Alan.

P.S. I'm working with modpython 2.7.6, win2k, apache 1.3.22 and Python
2.1.1

P.P.S.
Why: I am trying to implement URL rewriting for session tracking. Rather
than try to modify every <a href> and <form action> to contain a session
ID, I was hoping to take a quick solution using a <base href> element in
<head>. In fact I was hoping to encode several parameters like this,
i.e. as pseudo-directory names. Why do it this way, rather than setting
all the parameters as query args, i.e. "?sessID=abc123&command=update".

For a couple of reasons:-

1. Because it looks far neater in the URL
2. Because I can put all that stuff into the <base href>, which is
simpler in code terms, because I don't have to worry about <a href> and
<form action> adding their own query parameters, and potentially having
two "?" query delimiters in the URI, which is invalid.

So, the way it would work is this:

A HTML document (H) is transmitted which contains the parameters as
"directory names" in the <base href>

When the client activates a link in H or submits a form from H, I
extract the parameters out of the requested URI, and execute whatever
functionality.

The problem is that Apache complains if any of the "pseudo directories"
does not physically exist. Which is a rather a pain. That's why I need
to change the URL before Apache gets at it, which the documentation
implies TransHandler can do. I quote :- "This routine gives allows for
an opportunity to translate the URI into an actual filename, before the
server's default rules (Alias directives and the like) are followed. "




From oliver at redgecko.org  Mon Jan  7 22:08:09 2002
From: oliver at redgecko.org (Oliver Cope)
Date: Fri Jan  9 21:52:40 2004
Subject: [mod_python] TransHandler help?
In-Reply-To: <3C39F7BA.653BE2A8@xhaus.com>
References: <3C39F7BA.653BE2A8@xhaus.com>
Message-ID: <20020107220809.GA4997@canoodle.redgecko.org>

On Mon, Jan 07, 2002 at 07:32:10PM +0000, Alan Kennedy wrote:
>
> I'm trying to get a PythonTransHandler working.
> 
<snip>

> *without* sending a redirect back to the client. Or a more sophisticated
> example, how could I turn a request for
> 
> /admin/abc1234/update/item4567
> 
> into a request for
> 
> /admin/doit.html?sessionID=abc1234&command=update&what=item4567
> 
I too have spent some time trying to configure a PythonTransHandler, but
couldn't get it to work :o(
		
I've had more luck using mod_rewrite for this kind of thing:

RewriteEngine On
RewriteRule /admin/(.*)/(.*)/(.*) /admin/doit.html?sessionID=$1&command=$2&what=$3 [PT]

This will rewrite requests without sending redirects back to the client.
You can remove the '[PT]' if you don't need to further process the
rewritten URL (e.g. through a PythonHandler).

Obviously regular expressions are not as flexible as a Python
handler can be, so this will only work for simple translations.  Also
you'll need to have Apache compiled with mod_rewrite, I'm not sure if
this is the default.

Regards,

Olly.


From modpython at xhaus.com  Mon Jan  7 23:18:34 2002
From: modpython at xhaus.com (Alan Kennedy)
Date: Fri Jan  9 21:52:40 2004
Subject: [mod_python] TransHandler help?
References: <3C39F7BA.653BE2A8@xhaus.com> <20020107220809.GA4997@canoodle.redgecko.org>
Message-ID: <3C3A2CCA.88920E9F@xhaus.com>

Thanks Olly,

It's good to know that I'm not the only who can't get it to work :-\

I've been avoiding relying on mod_rewrite and its "cool voodoo". I have the training and
background to get my head around it, but members of my team unfortunately don't, whereas
they are all very comfortable with python.......

Thanks for the reply,

Cheers,

Alan.

Oliver Cope wrote:

> On Mon, Jan 07, 2002 at 07:32:10PM +0000, Alan Kennedy wrote:
> >
> > I'm trying to get a PythonTransHandler working.
> >
> <snip>
>
> > *without* sending a redirect back to the client. Or a more sophisticated
> > example, how could I turn a request for
> >
> > /admin/abc1234/update/item4567
> >
> > into a request for
> >
> > /admin/doit.html?sessionID=abc1234&command=update&what=item4567
> >
> I too have spent some time trying to configure a PythonTransHandler, but
> couldn't get it to work :o(
>
> I've had more luck using mod_rewrite for this kind of thing:
>
> RewriteEngine On
> RewriteRule /admin/(.*)/(.*)/(.*) /admin/doit.html?sessionID=$1&command=$2&what=$3 [PT]
>
> This will rewrite requests without sending redirects back to the client.
> You can remove the '[PT]' if you don't need to further process the
> rewritten URL (e.g. through a PythonHandler).
>
> Obviously regular expressions are not as flexible as a Python
> handler can be, so this will only work for simple translations.  Also
> you'll need to have Apache compiled with mod_rewrite, I'm not sure if
> this is the default.
>
> Regards,
>
> Olly.
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python


From grisha at modpython.org  Mon Jan  7 19:10:39 2002
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:52:40 2004
Subject: [mod_python] TransHandler help?
In-Reply-To: <3C3A2CCA.88920E9F@xhaus.com>
Message-ID: <Pine.BSF.4.32.0201071910200.58948-100000@localhost>

I'll have look into this some day. I *think* what mod_rewrite does is
create a sub-request, but sub-requests are not supported by mod_python (i
don't think there is anything that makes it impossible, the code is simple
not there, it's just a SMOP ("simple matter of programming")...)

Grisha


On Mon, 7 Jan 2002, Alan Kennedy wrote:

> Thanks Olly,
>
> It's good to know that I'm not the only who can't get it to work :-\
>
> I've been avoiding relying on mod_rewrite and its "cool voodoo". I have the training and
> background to get my head around it, but members of my team unfortunately don't, whereas
> they are all very comfortable with python.......
>
> Thanks for the reply,
>
> Cheers,
>
> Alan.
>
> Oliver Cope wrote:
>
> > On Mon, Jan 07, 2002 at 07:32:10PM +0000, Alan Kennedy wrote:
> > >
> > > I'm trying to get a PythonTransHandler working.
> > >
> > <snip>
> >
> > > *without* sending a redirect back to the client. Or a more sophisticated
> > > example, how could I turn a request for
> > >
> > > /admin/abc1234/update/item4567
> > >
> > > into a request for
> > >
> > > /admin/doit.html?sessionID=abc1234&command=update&what=item4567
> > >
> > I too have spent some time trying to configure a PythonTransHandler, but
> > couldn't get it to work :o(
> >
> > I've had more luck using mod_rewrite for this kind of thing:
> >
> > RewriteEngine On
> > RewriteRule /admin/(.*)/(.*)/(.*) /admin/doit.html?sessionID=$1&command=$2&what=$3 [PT]
> >
> > This will rewrite requests without sending redirects back to the client.
> > You can remove the '[PT]' if you don't need to further process the
> > rewritten URL (e.g. through a PythonHandler).
> >
> > Obviously regular expressions are not as flexible as a Python
> > handler can be, so this will only work for simple translations.  Also
> > you'll need to have Apache compiled with mod_rewrite, I'm not sure if
> > this is the default.
> >
> > Regards,
> >
> > Olly.
> >
> > _______________________________________________
> > Mod_python mailing list
> > Mod_python@modpython.org
> > http://www.modpython.org/mailman/listinfo/mod_python
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From mengland at mengland.net  Mon Jan  7 19:43:01 2002
From: mengland at mengland.net (Matthew England)
Date: Fri Jan  9 21:52:40 2004
Subject: [mod_python] How to hide implementation specifics in URIs/URLs?
Message-ID: <5.1.0.14.0.20020107191928.02441230@mail.core.com>

I'd like to be able to eliminate any web-server implementation specifics in 
my URIs/URLs as per 
<http://www.w3.org/Provider/Style/URI.html>.  Specifically, I'd like to 
eliminate the references to ".py" in my mod_python-managed URIs.  What are 
my apache options to do this?

These references:

<http://www.apacheweek.com/features/negotiation>
<http://httpd.apache.org/docs/content-negotiation.html>

...seem to be more interested in client-side-decision of content 
negotiation.  while this concept is interesting, and i might use it in the 
future, i'm not interested in this now.  i simply want to hide the 
server-side implemenation from my web user.

here's the basic algorithm i'm looking to implement in apache:

for said URI <http://myexampledomain.org/tickets/reserve>,

i would like apache to look in the [...]/tickets/ directory for a reserve.* 
file.  if there exists a [...]/tickets/reserve.py file, then apache 
immediately throws this .py file at the python handlers.  if there are 
multiple matches, ie, multiple files with the same 'reserve' but with 
different extensions, i want apache to decide what to do with the 
'ambiguous' URI by looking at a prioritized list of "content managers," 
probably a list specified by me in httpd.conf.  for example, i envision 
these lines placed in httpd.conf (and this is completely theoretical syntax):

ContentManager call-the-python-handler .py
ContentManager call-the-php-handler .php .php3
ContentManager call-the-cgi-handler .cgi

The order here is important, for .py files will be displayed/"managed" 
prior to .php or other files.  In my theoretical behavioral httpd.conf 
prototype syntax, i would have all unspecified extensions behave as they 
seem to "out of the box"...ie, whatever makes 
<http://192.168.1.50/~mengland/calendar> and 
<http://192.168.1.50/~mengland/calendar.html> do the same thing in my 
opera.com browser (maybe it's the same mechanism that i describe above?).

Notice how all of this stuff is totally managed by the server and requires 
no client-side input from the browser.  As I mentioned before, i'm not 
trying to have the client-side browser give language or media 
directives.  My main purpose is to keep my URIs clean and stable so that my 
users (and therefore much of my web server itself) don't have to change 
their URLs if i switch to some other underlying technology implementation 
(say if i switched from python to php for any segments of the web server).


disclaimer:

I'm constructing a web-database server for ticket reservations and am new 
to mod_python...and most everything else devshed.com-type-stuff-related.  I 
find openbsd-postgresql-python-apache to be the most attractive combination 
that i see now (openbsd for security purposes)...but since I'm new to these 
technologies, i'm far from certain of things yet.  I therefore apologize 
for any "newbie annoyance," or for a duplicate question.


thanks in advance for any help,
-Matt


From rsalz at zolera.com  Mon Jan  7 21:08:15 2002
From: rsalz at zolera.com (Rich Salz)
Date: Fri Jan  9 21:52:40 2004
Subject: [mod_python] How to hide implementation specifics in URIs/URLs?
References: <5.1.0.14.0.20020107191928.02441230@mail.core.com>
Message-ID: <3C3A548F.7EDC3D6C@zolera.com>

> <http://www.w3.org/Provider/Style/URI.html>.  Specifically, I'd like to
> eliminate the references to ".py" in my mod_python-managed URIs.  What are
> my apache options to do this?

AddHandler python-program .py
DirectoryIndex index.py index.php index.html
-- 
Zolera Systems, Securing web services (XML, SOAP, Signatures,
Encryption)
http://www.zolera.com

From mengland at mengland.net  Mon Jan  7 20:40:47 2002
From: mengland at mengland.net (Matthew England)
Date: Fri Jan  9 21:52:40 2004
Subject: [mod_python] How to hide implementation specifics in
  URIs/URLs?
In-Reply-To: <3C3A548F.7EDC3D6C@zolera.com>
References: <5.1.0.14.0.20020107191928.02441230@mail.core.com>
Message-ID: <5.1.0.14.0.20020107203236.0243f0f8@mail.core.com>

At 1/7/2002 08:08 PM, Rich Salz wrote:
> > <http://www.w3.org/Provider/Style/URI.html>.  Specifically, I'd like to
> > eliminate the references to ".py" in my mod_python-managed URIs.  What are
> > my apache options to do this?
>
>AddHandler python-program .py
>DirectoryIndex index.py index.php index.html

Thanks for the quick response.  This appears to only work if i create a 
subdirectory with index.* files in it.  While this does get me one step 
closer to my goal, it doesn't get me all the way there.  Maybe I'll just 
have to deal with it?

To be a little more specific:

On my server, the URI:

   <http://192.168.1.50/tmp/mptest.py>

prints some arbitrary text in the browser display.

I wanted:

   <http://192.168.1.50/tmp/mptest>

(without the ".py") to do the same thing.  And I want this to work with any 
file in the web-server directory space (or any directory space that i want).

In order to get this to work with the above suggestion, i have to make a 
"mptest" subdirectory and copy mptest.py to mptest/index.py.  Not as 
convenient as i would like for the developers.  Furthermore, my user has to 
include a "/" at the end of the URI in order to ensure relative-link 
reference in the host/domain part of the URI (or at least, that seems to be 
the apparent behavior...something which i don't fully understand 
yet).  Otherwise without the trailing "/" i get a reverse-dns-lookup 
happening that replaces the host-domain part of the URI automatically (at 
least with my apache-server and opera-client).  This is undersire-able for 
my system.

-Matt


From rsalz at zolera.com  Mon Jan  7 22:50:17 2002
From: rsalz at zolera.com (Rich Salz)
Date: Fri Jan  9 21:52:40 2004
Subject: [mod_python] How to hide implementation specifics inURIs/URLs?
References: <5.1.0.14.0.20020107191928.02441230@mail.core.com> <5.1.0.14.0.20020107203236.0243f0f8@mail.core.com>
Message-ID: <3C3A6C79.8E07BE5F@zolera.com>

> On my server, the URI:
> 
>    <http://192.168.1.50/tmp/mptest.py>

Yes, it will require your users to create mptest/index.py et al.
The translation /path/to/dir/foo.py to /path/to/dir/foo/index.py should
be pretty easy for them to figure out, however. :)

> convenient as i would like for the developers.  Furthermore, my user has to
> include a "/" at the end of the URI in order to ensure relative-link

I do'nt think so.  If someone asks for /path/to/dir/foo, apache will
send a redirect, telling them to ask for /path/to/dir/foo/, which will
then kick in the index trick.
You can set the ServerName (or something like that) in httpd.conf to be
whatever you need/want.
	/r$
-- 
Zolera Systems, Securing web services (XML, SOAP, Signatures,
Encryption)
http://www.zolera.com

From grisha at modpython.org  Mon Jan  7 22:51:23 2002
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:52:40 2004
Subject: [mod_python] How to hide implementation specifics in  URIs/URLs?
In-Reply-To: <5.1.0.14.0.20020107203236.0243f0f8@mail.core.com>
Message-ID: <Pine.BSF.4.32.0201072250560.59147-100000@localhost>

Take a look at the Apache SetHandler directive, I think it does what you
need.

Grisha


On Mon, 7 Jan 2002, Matthew England wrote:

> At 1/7/2002 08:08 PM, Rich Salz wrote:
> > > <http://www.w3.org/Provider/Style/URI.html>.  Specifically, I'd like to
> > > eliminate the references to ".py" in my mod_python-managed URIs.  What are
> > > my apache options to do this?
> >
> >AddHandler python-program .py
> >DirectoryIndex index.py index.php index.html
>
> Thanks for the quick response.  This appears to only work if i create a
> subdirectory with index.* files in it.  While this does get me one step
> closer to my goal, it doesn't get me all the way there.  Maybe I'll just
> have to deal with it?
>
> To be a little more specific:
>
> On my server, the URI:
>
>    <http://192.168.1.50/tmp/mptest.py>
>
> prints some arbitrary text in the browser display.
>
> I wanted:
>
>    <http://192.168.1.50/tmp/mptest>
>
> (without the ".py") to do the same thing.  And I want this to work with any
> file in the web-server directory space (or any directory space that i want).
>
> In order to get this to work with the above suggestion, i have to make a
> "mptest" subdirectory and copy mptest.py to mptest/index.py.  Not as
> convenient as i would like for the developers.  Furthermore, my user has to
> include a "/" at the end of the URI in order to ensure relative-link
> reference in the host/domain part of the URI (or at least, that seems to be
> the apparent behavior...something which i don't fully understand
> yet).  Otherwise without the trailing "/" i get a reverse-dns-lookup
> happening that replaces the host-domain part of the URI automatically (at
> least with my apache-server and opera-client).  This is undersire-able for
> my system.
>
> -Matt
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From rsalz at zolera.com  Mon Jan  7 22:55:02 2002
From: rsalz at zolera.com (Rich Salz)
Date: Fri Jan  9 21:52:40 2004
Subject: [mod_python] How to hide implementation specifics inURIs/URLs?
References: <5.1.0.14.0.20020107191928.02441230@mail.core.com> <5.1.0.14.0.20020107203236.0243f0f8@mail.core.com> <3C3A6C79.8E07BE5F@zolera.com>
Message-ID: <3C3A6D96.C7FFF660@zolera.com>

> Yes, it will require your users to create mptest/index.py et al.

arrgh, typing too late.  your "programmers", not users.

> The translation /path/to/dir/foo.py to /path/to/dir/foo/index.py should
> be pretty easy for them to figure out, however. :)
> 
> > convenient as i would like for the developers.  Furthermore, my user has to
> > include a "/" at the end of the URI in order to ensure relative-link
> 
> I do'nt think so.  If someone asks for /path/to/dir/foo, apache will
> send a redirect, telling them to ask for /path/to/dir/foo/, which will
> then kick in the index trick.
> You can set the ServerName (or something like that) in httpd.conf to be
> whatever you need/want.
>         /r$

From mike at mikebell.org  Mon Jan  7 20:17:17 2002
From: mike at mikebell.org (Mike Bell)
Date: Fri Jan  9 21:52:40 2004
Subject: [mod_python] How to hide implementation specifics in URIs/URLs?
In-Reply-To: <5.1.0.14.0.20020107203236.0243f0f8@mail.core.com>; from mengland@mengland.net on Mon, Jan 07, 2002 at 08:40:47PM -0600
References: <5.1.0.14.0.20020107191928.02441230@mail.core.com> <3C3A548F.7EDC3D6C@zolera.com> <5.1.0.14.0.20020107203236.0243f0f8@mail.core.com>
Message-ID: <20020107201716.T2731@kryten.mikebell.org>

On Mon, Jan 07, 2002 at 08:40:47PM -0600, Matthew England wrote:
> Thanks for the quick response.  This appears to only work if i create a 
> subdirectory with index.* files in it.  While this does get me one step 
> closer to my goal, it doesn't get me all the way there.  Maybe I'll just 
> have to deal with it?
> 
> To be a little more specific:
> 
> On my server, the URI:
> 
>    <http://192.168.1.50/tmp/mptest.py>
> 
> prints some arbitrary text in the browser display.
> 
> I wanted:
> 
>    <http://192.168.1.50/tmp/mptest>

How about

<Location /tmp/mptest>
  Sethandler python-program
  PythonHandler mptest
</Location>

?

From mengland at mengland.net  Mon Jan  7 22:59:25 2002
From: mengland at mengland.net (Matthew England)
Date: Fri Jan  9 21:52:40 2004
Subject: [mod_python] How to hide implementation specifics in
  URIs/URLs?
In-Reply-To: <20020107201716.T2731@kryten.mikebell.org>
References: <5.1.0.14.0.20020107203236.0243f0f8@mail.core.com>
 <5.1.0.14.0.20020107191928.02441230@mail.core.com>
 <3C3A548F.7EDC3D6C@zolera.com>
 <5.1.0.14.0.20020107203236.0243f0f8@mail.core.com>
Message-ID: <5.1.0.14.0.20020107225708.02439e40@mail.core.com>

At 1/7/2002 10:17 PM, Mike Bell wrote:

>How about
>
><Location /tmp/mptest>
>   Sethandler python-program
>   PythonHandler mptest
></Location>
>
>?

Unless I'm missing something (and again remember i'm a newbie), this 
doesn't help me for other files in other directories.

I basically want any python script to be stripped of its .py extension in 
the URI that uses it.  Otherwise, as i see it, a web-server developer has 
to make an entry in httpd.conf for *every* .py file.  ouch.

-Matt


From grisha at modpython.org  Tue Jan  8 01:30:13 2002
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:52:40 2004
Subject: [mod_python] How to hide implementation specifics in  URIs/URLs?
In-Reply-To: <5.1.0.14.0.20020107225708.02439e40@mail.core.com>
Message-ID: <Pine.BSF.4.32.0201080127550.63527-100000@localhost>


I think simply adding

SetHandler python-program
PythonHandler mptest

at the DocumentRoot level would achieve that effect, but you better be
prepared to handle *every* request with modpython, which includes images,
html, etc.

Grisha


On Mon, 7 Jan 2002, Matthew England wrote:

> At 1/7/2002 10:17 PM, Mike Bell wrote:
>
> >How about
> >
> ><Location /tmp/mptest>
> >   Sethandler python-program
> >   PythonHandler mptest
> ></Location>
> >
> >?
>
> Unless I'm missing something (and again remember i'm a newbie), this
> doesn't help me for other files in other directories.
>
> I basically want any python script to be stripped of its .py extension in
> the URI that uses it.  Otherwise, as i see it, a web-server developer has
> to make an entry in httpd.conf for *every* .py file.  ouch.
>
> -Matt
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From neilb at nbt.co.za  Tue Jan  8 10:19:31 2002
From: neilb at nbt.co.za (Neil Beattie)
Date: Fri Jan  9 21:52:41 2004
Subject: [mod_python] Please Help
Message-ID: <NFBBKACIPKNFKAHLGHGBKEDADOAA.neilb@nbt.co.za>

Hi,
I'm am in a bit of trouble as I need to demo some code that used Python 2.2
I am using Python 2.2 and Apache 2.3.22 and Windows nt.
Is there anyone who could let me have a compiled dll.
I can change to Apache 2.3.20 if required.

I have tried compiling Mod_Python using C++ 5 but have had no success. Is it
possible?

Regards,
Neil.


From foofboy at speakeasy.net  Tue Jan  8 11:38:23 2002
From: foofboy at speakeasy.net (Robert Sherwood)
Date: Fri Jan  9 21:52:41 2004
Subject: [mod_python] TransHandler help?
In-Reply-To: <Pine.BSF.4.32.0201071910200.58948-100000@localhost>
References: <Pine.BSF.4.32.0201071910200.58948-100000@localhost>
Message-ID: <1010507904.19779.5.camel@lucifer>

Hi,

Transhandler translates a request from a URL to a filename. Though you
can rewrite a URL, I found it was easier simply to use the URL that I
had, particularly since, In my case, I could count on the argument order
and such.

This is an extremely simple example, but I wanted to set the file
request to main.py, which handled all the URL processing itself. The
important thing to remember is that the TransHandler figures out which
file you're requesting based on the URL you pass in. It can obviously do
any processing you need, but that is it's primary function.

from mod_python import apache
import string

def transhandler(req):
    #We want to use main.py
    req.filename = "main.py"
    return apache.OK

Again, I didn't use mod_python to process the URL, that is done by the
main Python Handler, as below (adapted slightly for your situation):

def handler(req):
    #remove trailing slash, if present
    URI = req.uri
    if URI[len(URI)-1] == '/':
        URI = URI[:len(URI)-1]

    #disassemble the URI for processing
    components = string.split(URI,'/')[1:]

    sessionID = components[0]

    command = components[1]

    what = components[2]

    # Do stuff here

There's no error checking or anything, but I found it was easier to use
the request as it came in, rather than rewriting it and processing that.
However, I had to use the TransHandler to set the request filename to
the script that did the processing.

Hope this helps.

Rob



On Mon, 2002-01-07 at 19:10, Gregory (Grisha) Trubetskoy wrote:
> 
> I'll have look into this some day. I *think* what mod_rewrite does is
> create a sub-request, but sub-requests are not supported by mod_python (i
> don't think there is anything that makes it impossible, the code is simple
> not there, it's just a SMOP ("simple matter of programming")...)
> 
> Grisha
> 
> 
> On Mon, 7 Jan 2002, Alan Kennedy wrote:
> 
> > Thanks Olly,
> >
> > It's good to know that I'm not the only who can't get it to work :-\
> >
> > I've been avoiding relying on mod_rewrite and its "cool voodoo". I have the training and
> > background to get my head around it, but members of my team unfortunately don't, whereas
> > they are all very comfortable with python.......
> >
> > Thanks for the reply,
> >
> > Cheers,
> >
> > Alan.
> >
> > Oliver Cope wrote:
> >
> > > On Mon, Jan 07, 2002 at 07:32:10PM +0000, Alan Kennedy wrote:
> > > >
> > > > I'm trying to get a PythonTransHandler working.
> > > >
> > > <snip>
> > >
> > > > *without* sending a redirect back to the client. Or a more sophisticated
> > > > example, how could I turn a request for
> > > >
> > > > /admin/abc1234/update/item4567
> > > >
> > > > into a request for
> > > >
> > > > /admin/doit.html?sessionID=abc1234&command=update&what=item4567
> > > >
> > > I too have spent some time trying to configure a PythonTransHandler, but
> > > couldn't get it to work :o(
> > >
> > > I've had more luck using mod_rewrite for this kind of thing:
> > >
> > > RewriteEngine On
> > > RewriteRule /admin/(.*)/(.*)/(.*) /admin/doit.html?sessionID=$1&command=$2&what=$3 [PT]
> > >
> > > This will rewrite requests without sending redirects back to the client.
> > > You can remove the '[PT]' if you don't need to further process the
> > > rewritten URL (e.g. through a PythonHandler).
> > >
> > > Obviously regular expressions are not as flexible as a Python
> > > handler can be, so this will only work for simple translations.  Also
> > > you'll need to have Apache compiled with mod_rewrite, I'm not sure if
> > > this is the default.
> > >
> > > Regards,
> > >
> > > Olly.
> > >
> > > _______________________________________________
> > > Mod_python mailing list
> > > Mod_python@modpython.org
> > > http://www.modpython.org/mailman/listinfo/mod_python
> >
> > _______________________________________________
> > Mod_python mailing list
> > Mod_python@modpython.org
> > http://www.modpython.org/mailman/listinfo/mod_python
> >
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 



From modpython at xhaus.com  Tue Jan  8 21:30:45 2002
From: modpython at xhaus.com (Alan Kennedy)
Date: Fri Jan  9 21:52:41 2004
Subject: [mod_python] TransHandler help?
References: <Pine.BSF.4.32.0201071910200.58948-100000@localhost> <1010507904.19779.5.camel@lucifer>
Message-ID: <3C3B6504.2AC7A3AD@xhaus.com>

Rob,

Bingo! That hit the nail square on the head, and drove it right home!

Excellent!

I obviously didn't read the documentation thoroughly enough. It states in section 5.1.3 about
PythonTransHandler:

"This routine gives allows for an opportunity to translate the URI into an actual *filename*" [my
emphasis].

That's filename, NOT uri. I mixed it up, and tried to modify the request URI, which is a
read-only attribute. Hence why I couldn't get it to work :*)

Many thanks for clearing this up. This means that I can forge ahead and rewrite URLs to contain
session IDs, without having to resort to "?sess=xyz" style query parameters.

Thanks again.

Alan.

Robert Sherwood wrote:

> Hi,
>
> Transhandler translates a request from a URL to a filename. Though you
> can rewrite a URL, I found it was easier simply to use the URL that I
> had, particularly since, In my case, I could count on the argument order
> and such.
>
> This is an extremely simple example, but I wanted to set the file
> request to main.py, which handled all the URL processing itself. The
> important thing to remember is that the TransHandler figures out which
> file you're requesting based on the URL you pass in. It can obviously do
> any processing you need, but that is it's primary function.
>
> from mod_python import apache
> import string
>
> def transhandler(req):
>     #We want to use main.py
>     req.filename = "main.py"
>     return apache.OK
>
> Again, I didn't use mod_python to process the URL, that is done by the
> main Python Handler, as below (adapted slightly for your situation):
>
> def handler(req):
>     #remove trailing slash, if present
>     URI = req.uri
>     if URI[len(URI)-1] == '/':
>         URI = URI[:len(URI)-1]
>
>     #disassemble the URI for processing
>     components = string.split(URI,'/')[1:]
>
>     sessionID = components[0]
>
>     command = components[1]
>
>     what = components[2]
>
>     # Do stuff here
>
> There's no error checking or anything, but I found it was easier to use
> the request as it came in, rather than rewriting it and processing that.
> However, I had to use the TransHandler to set the request filename to
> the script that did the processing.
>
> Hope this helps.
>
> Rob


From neilb at nbt.co.za  Wed Jan  9 22:59:28 2002
From: neilb at nbt.co.za (Neil Beattie)
Date: Fri Jan  9 21:52:41 2004
Subject: [mod_python] DLL for Windows
Message-ID: <NFBBKACIPKNFKAHLGHGBIEHODOAA.neilb@nbt.co.za>

Hi All,
I am desperately looking for a compiled dll for mod_python for Python 2.2
I can use Apache 3.20 or 3.22

I am a newbie at all things open source having decided to migrate my product
from VB last year.

I have been trying to compile mod_python using VC++ 5 but have not
succeeded.

Any help would be appreciated.

Neil




From neilb at nbt.co.za  Thu Jan 10 11:04:20 2002
From: neilb at nbt.co.za (Neil Beattie)
Date: Fri Jan  9 21:52:41 2004
Subject: [mod_python] DLL for Windows
In-Reply-To: <NFBBKACIPKNFKAHLGHGBIEHODOAA.neilb@nbt.co.za>
Message-ID: <NFBBKACIPKNFKAHLGHGBGEJJDOAA.neilb@nbt.co.za>

Ok I managed to compile a dll for Python 2.2 that works for me.
Anybody in the same position that I was in need it?
Neil.


> -----Original Message-----
> From: mod_python-admin@modpython.org
> [mailto:mod_python-admin@modpython.org]On Behalf Of Neil Beattie
> Sent: Wednesday, January 09, 2002 10:59 PM
> To: mod_python@modpython.org
> Subject: [mod_python] DLL for Windows
> 
> 
> Hi All,
> I am desperately looking for a compiled dll for mod_python for Python 2.2
> I can use Apache 1.3.20 or 3.22
> 
> I am a newbie at all things open source having decided to migrate 
> my product
> from VB last year.
> 
> I have been trying to compile mod_python using VC++ 5 but have not
> succeeded.
> 
> Any help would be appreciated.
> 
> Neil
> 
> 
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 

From jgardn at alumni.washington.edu  Thu Jan 10 21:58:28 2002
From: jgardn at alumni.washington.edu (Jonathan Gardner)
Date: Fri Jan  9 21:52:41 2004
Subject: [mod_python] Redirection with the Location Header and publisher handler
Message-ID: <200201101250.g0ACoIJ12496@my.knctv.co.kr>

I read through the documentation a few times. I am not sure how to do this.

What I want to do is to receive a hit to a function, and then have that 
function redirect the browser to another location.

For instance, I have a function that will present a form for adding an entry 
into a database. When the user hits "submit", I want to have the function 
that inserts the stuff into the db called, and then have it redirect the 
browser back to the original page with a status message of the sort "Row 
added" or "Cannot enter duplicate items in a unique column" or whatnot.

I know that there are two ways of doing this:

1) Sending some HTML that will redirect it to the appropriate location. This 
is a non-smooth solution.

2) Sending the Location header with the new location.

 (It's been a few months since I have done this, and I don't have the example 
code, plus it was done in mod_perl... this is three strikes against my 
memory. I could be wrong).

I've tried something like this: (Remember, I am using publisher as the 
handler)

def myfunc(req):
	req.headers_out['Location']="http://url/to/new/location"
	req.send_http_headers()
	return apache.OK

and I've tried a bunch of variations on this theme... but nothing seems to 
work write. Can someone give me a pointer or let me know where I'm confused?

Of course, I've read all the documentation, but nothing seems to help.

Jonathan



From foofboy at speakeasy.net  Thu Jan 10 11:31:42 2002
From: foofboy at speakeasy.net (Robert Sherwood)
Date: Fri Jan  9 21:52:41 2004
Subject: [mod_python] Redirection with the Location Header and publisher
	handler
In-Reply-To: <200201101250.g0ACoIJ12496@my.knctv.co.kr>
References: <200201101250.g0ACoIJ12496@my.knctv.co.kr>
Message-ID: <1010680303.3287.2.camel@lucifer>

I think you're looking for this:

req.content_type = 'text/html'
req.err_headers_out['Refresh'] = '3;http://usl/to/new/location'
#Redirect after 3 Seconds
req.send_http_header()
return apache.HTTP_MOVED_PERMANENTLY

Rob


On Thu, 2002-01-10 at 07:58, Jonathan Gardner wrote:
> I read through the documentation a few times. I am not sure how to do this.
> 
> What I want to do is to receive a hit to a function, and then have that 
> function redirect the browser to another location.
> 
> For instance, I have a function that will present a form for adding an entry 
> into a database. When the user hits "submit", I want to have the function 
> that inserts the stuff into the db called, and then have it redirect the 
> browser back to the original page with a status message of the sort "Row 
> added" or "Cannot enter duplicate items in a unique column" or whatnot.
> 
> I know that there are two ways of doing this:
> 
> 1) Sending some HTML that will redirect it to the appropriate location. This 
> is a non-smooth solution.
> 
> 2) Sending the Location header with the new location.
> 
>  (It's been a few months since I have done this, and I don't have the example 
> code, plus it was done in mod_perl... this is three strikes against my 
> memory. I could be wrong).
> 
> I've tried something like this: (Remember, I am using publisher as the 
> handler)
> 
> def myfunc(req):
> 	req.headers_out['Location']="http://url/to/new/location"
> 	req.send_http_headers()
> 	return apache.OK
> 
> and I've tried a bunch of variations on this theme... but nothing seems to 
> work write. Can someone give me a pointer or let me know where I'm confused?
> 
> Of course, I've read all the documentation, but nothing seems to help.
> 
> Jonathan
> 
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 



From sep27 at cornell.edu  Thu Jan 10 12:04:56 2002
From: sep27 at cornell.edu (S.Plake)
Date: Fri Jan  9 21:52:41 2004
Subject: [mod_python] (no subject)
Message-ID: <5.1.0.14.2.20020110120439.00b0a920@postoffice.mail.cornell.edu>

I need to search for a string in an html page and add code at a particular
line. This can be done online or off-line. I am having a problem searching
or the string. Can someone help? Thanks


From cl at scriptall.com  Thu Jan 10 14:33:55 2002
From: cl at scriptall.com (Chuck Lima)
Date: Fri Jan  9 21:52:41 2004
Subject: [mod_python] apache.py
Message-ID: <1010691235.1974.24.camel@px101>

Hello,

I may be a little late to the game on this one, but here goes.

python 2.1
apache 1.3.22
mod_python 2.7.6

Lines 356 and 359 of apache.py were hacking off the "y" from my modules
i.e.: "mymodule.py"  was not found because apache.py was looking for
"mymodule.p".  It seems the intention was to avoid loading compiled
modules.  mod_pyton has never compiled my modules -- is this not
standard?


Changes I made - -

original 356:
if os.path.exists(filepath[:-1]) :

new 356:
if os.path.exists(filepath) :

Also, "filepath[:-1]" on line 359 was changed to "filepath".

This seems to have solved the problem without adversely affecting the
running of my scripts.


The really odd thing, though; is that I've got another system running
the (practically) same setup with no mods.  The difference being the
apache version.

no mods here:
python 2.1
apache 1.3.19
mod_python 2.7.6

Comments, please.

Thanks,
-Chuck


From grisha at modpython.org  Thu Jan 10 15:59:10 2002
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:52:41 2004
Subject: [mod_python] Redirection with the Location Header and publisher
 handler
In-Reply-To: <200201101250.g0ACoIJ12496@my.knctv.co.kr>
Message-ID: <Pine.BSF.4.32.0201101556070.34235-100000@localhost>


if you're using the publisher, then something like this should work:

def myfunc(req):
 	req.headers_out['Location']="http://blah/blah"
	req.status = apache.HTTP_MOVED_TEMPORARILY
 	return 'You are being redirected to a <a href="http://blah/blah"> new location</a>'


On Thu, 10 Jan 2002, Jonathan Gardner wrote:

> def myfunc(req):
> 	req.headers_out['Location']="http://url/to/new/location"
> 	req.send_http_headers()
> 	return apache.OK



From grisha at modpython.org  Thu Jan 10 16:01:02 2002
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:52:41 2004
Subject: [mod_python] apache.py
In-Reply-To: <1010691235.1974.24.camel@px101>
Message-ID: <Pine.BSF.4.32.0201101600400.34235-100000@localhost>

http://www.modpython.org/FAQ/faqw.py?req=all#2.3

On 10 Jan 2002, Chuck Lima wrote:

> Hello,
>
> I may be a little late to the game on this one, but here goes.
>
> python 2.1
> apache 1.3.22
> mod_python 2.7.6
>
> Lines 356 and 359 of apache.py were hacking off the "y" from my modules
> i.e.: "mymodule.py"  was not found because apache.py was looking for
> "mymodule.p".  It seems the intention was to avoid loading compiled
> modules.  mod_pyton has never compiled my modules -- is this not
> standard?
>
>
> Changes I made - -
>
> original 356:
> if os.path.exists(filepath[:-1]) :
>
> new 356:
> if os.path.exists(filepath) :
>
> Also, "filepath[:-1]" on line 359 was changed to "filepath".
>
> This seems to have solved the problem without adversely affecting the
> running of my scripts.
>
>
> The really odd thing, though; is that I've got another system running
> the (practically) same setup with no mods.  The difference being the
> apache version.
>
> no mods here:
> python 2.1
> apache 1.3.19
> mod_python 2.7.6
>
> Comments, please.
>
> Thanks,
> -Chuck
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From jgardn at alumni.washington.edu  Fri Jan 11 07:02:12 2002
From: jgardn at alumni.washington.edu (Jonathan Gardner)
Date: Fri Jan  9 21:52:41 2004
Subject: [mod_python] Redirection with the Location Header and publisher handler
In-Reply-To: <Pine.BSF.4.32.0201101556070.34235-100000@localhost>
References: <Pine.BSF.4.32.0201101556070.34235-100000@localhost>
Message-ID: <200201102153.g0ALrlJ09318@my.knctv.co.kr>

On Friday 11 January 2002 05:59 am, Gregory (Grisha) Trubetskoy wrote:
> if you're using the publisher, then something like this should work:
>
> def myfunc(req):
>  	req.headers_out['Location']="http://blah/blah"
> 	req.status = apache.HTTP_MOVED_TEMPORARILY
>  	return 'You are being redirected to a <a href="http://blah/blah"> new
> location</a>'
>

1) There's a status attribute? =) I think this should be added to the 
documentation.

2) I have scoured the 'net for a good explanation of the HTTP error codes, to 
no avail.

It looks like you are saying HTTP_MOVED_TEMPORARILY means "Dear browser, I 
want you to go to this new place instead of here. But next time you get a 
link here, come straight here without delay, do not pass go, and do not 
collect $200."

Conversely, HTTP_MOVED_PERMANENTLY might mean, "Dear browser, how many times 
have I got to tell you you won't find anything here! Stop looking here, go to 
this other place to find what you are looking for."

What is HTTP_TEMPORARY_REDIRECT for? Does it mean the same as 
HTTP_MOVED_TEMPORARILY?

Jonathan

From tree at basistech.com  Thu Jan 10 17:07:50 2002
From: tree at basistech.com (Tom Emerson)
Date: Fri Jan  9 21:52:41 2004
Subject: [mod_python] Redirection with the Location Header and publisher handler
In-Reply-To: <200201102153.g0ALrlJ09318@my.knctv.co.kr>
References: <Pine.BSF.4.32.0201101556070.34235-100000@localhost>
	<200201102153.g0ALrlJ09318@my.knctv.co.kr>
Message-ID: <15422.4278.657220.93787@magrathea.basistech.com>

Jonathan Gardner writes:
[...]
> 2) I have scoured the 'net for a good explanation of the HTTP error codes, to 
> no avail.

Section 10 of RFC 2616 (HTTP 1.1) describes the HTTP result codes in
great detail, describing the behavior of a conforming
implementation. Section 10.3 covers redirection.

    -tree

-- 
Tom Emerson                                          Basis Technology Corp.
Sr. Computational Linguist                         http://www.basistech.com
  "Beware the lollipop of mediocrity: lick it once and you suck forever"

From jgardn at alumni.washington.edu  Fri Jan 11 07:14:33 2002
From: jgardn at alumni.washington.edu (Jonathan Gardner)
Date: Fri Jan  9 21:52:41 2004
Subject: [mod_python] Patch - **args with Publisher
Message-ID: <200201102206.g0AM68J09472@my.knctv.co.kr>

I expected to be able to get all the script args with a piece of code like 
this:

def scriptname(req, **args):
	...

but instead I got none of them at all.

Here is the patch that does what I expect. If I need to submit this 
differently, let me know.

*** publisher.py	Mon Jul  9 21:54:40 2001
--- /usr/local/lib/python2.0/site-packages/mod_python/publisher.py	Fri Jan 11 
07:08:51 2002
***************
*** 150,155 ****
--- 150,157 ----
          # and for that we need to get a list of them. There
          # are a few options for callable objects here:
  
+         # Whether or not there is a **args argument in the function list.
+         has_keyarg = 0
          if str(type(object)) == "<type 'instance'>":
              # instances are callable when they have __call__()
              object = object.__call__
***************
*** 158,172 ****
              # function
              fc = object.func_code
              expected = fc.co_varnames[0:fc.co_argcount]
          elif hasattr(object, 'im_func'):
              # method
              fc = object.im_func.func_code
              expected = fc.co_varnames[1:fc.co_argcount]
  
          # remove unexpected args
!         for name in args.keys():
!             if name not in expected:
!                 del args[name]
  
          result = apply(object, (), args)
  
--- 160,177 ----
              # function
              fc = object.func_code
              expected = fc.co_varnames[0:fc.co_argcount]
+             has_keyarg = fc.co_flags & 0x08
          elif hasattr(object, 'im_func'):
              # method
              fc = object.im_func.func_code
              expected = fc.co_varnames[1:fc.co_argcount]
+             has_keyarg = fc.co_flags & 0x08
  
          # remove unexpected args
!         if not has_keyarg:
!             for name in args.keys():
!                 if name not in expected:
!                     del args[name]
  
          result = apply(object, (), args)

From jgardn at alumni.washington.edu  Fri Jan 11 07:26:18 2002
From: jgardn at alumni.washington.edu (Jonathan Gardner)
Date: Fri Jan  9 21:52:41 2004
Subject: [mod_python] Redirection with the Location Header and publisher handler
In-Reply-To: <15422.4278.657220.93787@magrathea.basistech.com>
References: <Pine.BSF.4.32.0201101556070.34235-100000@localhost> <200201102153.g0ALrlJ09318@my.knctv.co.kr> <15422.4278.657220.93787@magrathea.basistech.com>
Message-ID: <200201102217.g0AMHqJ09593@my.knctv.co.kr>

On Friday 11 January 2002 07:07 am, you wrote:
> Jonathan Gardner writes:
> [...]
>
> > 2) I have scoured the 'net for a good explanation of the HTTP error
> > codes, to no avail.
>
> Section 10 of RFC 2616 (HTTP 1.1) describes the HTTP result codes in
> great detail, describing the behavior of a conforming
> implementation. Section 10.3 covers redirection.
>
>     -tree

I know it probably sounds like you're speaking with an idiot, but you have no 
idea how much that has helped. 

Where can I find a listing of all these RFC's and what they stand for?

Thanks a million, literally!

Jonathan

From tree at basistech.com  Thu Jan 10 17:35:35 2002
From: tree at basistech.com (Tom Emerson)
Date: Fri Jan  9 21:52:41 2004
Subject: [mod_python] Redirection with the Location Header and publisher handler
In-Reply-To: <200201102217.g0AMHqJ09593@my.knctv.co.kr>
References: <Pine.BSF.4.32.0201101556070.34235-100000@localhost>
	<200201102153.g0ALrlJ09318@my.knctv.co.kr>
	<15422.4278.657220.93787@magrathea.basistech.com>
	<200201102217.g0AMHqJ09593@my.knctv.co.kr>
Message-ID: <15422.5943.969913.409274@magrathea.basistech.com>

Jonathan Gardner writes:
[...]
> I know it probably sounds like you're speaking with an idiot, but you have no 
> idea how much that has helped. 

I'm glad I could be of assistance.

> Where can I find a listing of all these RFC's and what they stand for?

Try <http://www.ietf.org/rfc.html> : you can retrieve by number of
view the index which includes titles.

For web-related technology, the first place I would look, however, is
the W3C's website, <http://www.w3.org/>. In particular you can find a
lot of information on HTTP and its related technology at

<http://www.w3.org/Protocols/>

including references to the RFC I mentioned.

    -tree

-- 
Tom Emerson                                          Basis Technology Corp.
Sr. Computational Linguist                         http://www.basistech.com
  "Beware the lollipop of mediocrity: lick it once and you suck forever"

From grisha at modpython.org  Thu Jan 10 17:59:45 2002
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:52:41 2004
Subject: [mod_python] Redirection with the Location Header and publisher
 handler
In-Reply-To: <200201102153.g0ALrlJ09318@my.knctv.co.kr>
Message-ID: <Pine.BSF.4.32.0201101735430.34235-100000@localhost>


On Fri, 11 Jan 2002, Jonathan Gardner wrote:

> 1) There's a status attribute? =) I think this should be added to the
> documentation.

Yes, somehow it slipped in the documentation, but the FAQ entry regarding
redirection shows it.

> 2) I have scoured the 'net for a good explanation of the HTTP error codes, to
> no avail.

Check out RFC2616 http://www.w3.org/Protocols/rfc2616/rfc2616.txt

I don't know what the difference between 302 and 307 is. If you look at
the (older) RFC2068, 302 used to be called "moved temporarily", and with
RFC2616 it became "found"  and a new code 307 "temporary redirect" was
introduced which seems to be functionally equivalent to 302 (the text is
word for word the same).

Here is a link I found that talks about this stuff
http://ppewww.ph.gla.ac.uk/~flavell/www/post-redirect.html

For all practical purposes I would use 302 - I suspect 307 is not
supported on many older browsers.

Grisha


From grisha at modpython.org  Thu Jan 10 18:01:22 2002
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:52:41 2004
Subject: [mod_python] Patch - **args with Publisher
In-Reply-To: <200201102206.g0AM68J09472@my.knctv.co.kr>
Message-ID: <Pine.BSF.4.32.0201101800280.34235-100000@localhost>

Thanks - someone already submitted a patch for this and version 3 will
behave this way.

On Fri, 11 Jan 2002, Jonathan Gardner wrote:

> I expected to be able to get all the script args with a piece of code like
> this:
>
> def scriptname(req, **args):
> 	...
>
> but instead I got none of them at all.
>
> Here is the patch that does what I expect. If I need to submit this
> differently, let me know.
>
> *** publisher.py	Mon Jul  9 21:54:40 2001
> --- /usr/local/lib/python2.0/site-packages/mod_python/publisher.py	Fri Jan 11
> 07:08:51 2002
> ***************
> *** 150,155 ****
> --- 150,157 ----
>           # and for that we need to get a list of them. There
>           # are a few options for callable objects here:
>
> +         # Whether or not there is a **args argument in the function list.
> +         has_keyarg = 0
>           if str(type(object)) == "<type 'instance'>":
>               # instances are callable when they have __call__()
>               object = object.__call__
> ***************
> *** 158,172 ****
>               # function
>               fc = object.func_code
>               expected = fc.co_varnames[0:fc.co_argcount]
>           elif hasattr(object, 'im_func'):
>               # method
>               fc = object.im_func.func_code
>               expected = fc.co_varnames[1:fc.co_argcount]
>
>           # remove unexpected args
> !         for name in args.keys():
> !             if name not in expected:
> !                 del args[name]
>
>           result = apply(object, (), args)
>
> --- 160,177 ----
>               # function
>               fc = object.func_code
>               expected = fc.co_varnames[0:fc.co_argcount]
> +             has_keyarg = fc.co_flags & 0x08
>           elif hasattr(object, 'im_func'):
>               # method
>               fc = object.im_func.func_code
>               expected = fc.co_varnames[1:fc.co_argcount]
> +             has_keyarg = fc.co_flags & 0x08
>
>           # remove unexpected args
> !         if not has_keyarg:
> !             for name in args.keys():
> !                 if name not in expected:
> !                     del args[name]
>
>           result = apply(object, (), args)
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From cl at scriptall.com  Thu Jan 10 18:02:21 2002
From: cl at scriptall.com (Chuck Lima)
Date: Fri Jan  9 21:52:41 2004
Subject: [mod_python] apache.py
In-Reply-To: <3C3E0CF4.5020206@city.dk>
References: <1010691235.1974.24.camel@px101>  <3C3E0CF4.5020206@city.dk>
Message-ID: <1010703742.2071.2.camel@px101>

Thanks, will do.


On Thu, 2002-01-10 at 16:51, Ole Hansen wrote:
> Hi,
> 
> I had the very same problem, and for a while I thought I was the only 
> one in the universe. I also made similar hack.
> 
> This is a bug in python itself. The bug was introduced somewhere between 
> Python 2.0 and 2.1.1 and fixed in Python 2.2b3, but Python 2.2 (final) 
> has been released now, so I would go for the final Python 2.2.
> 
> Happy coding :-)
> 
> Br,
> Ole Hansen
> 
> 
> 
> Chuck Lima wrote:
> 
> > Hello,
> > 
> > I may be a little late to the game on this one, but here goes.
> > 
> > python 2.1
> > apache 1.3.22
> > mod_python 2.7.6
> > 
> > Lines 356 and 359 of apache.py were hacking off the "y" from my modules
> > i.e.: "mymodule.py"  was not found because apache.py was looking for
> > "mymodule.p".  It seems the intention was to avoid loading compiled
> > modules.  mod_pyton has never compiled my modules -- is this not
> > standard?
> > 
> > 
> > Changes I made - -
> > 
> > original 356:
> > if os.path.exists(filepath[:-1]) :
> > 
> > new 356:
> > if os.path.exists(filepath) :
> > 
> > Also, "filepath[:-1]" on line 359 was changed to "filepath".
> > 
> > This seems to have solved the problem without adversely affecting the
> > running of my scripts.
> > 
> > 
> > The really odd thing, though; is that I've got another system running
> > the (practically) same setup with no mods.  The difference being the
> > apache version.
> > 
> > no mods here:
> > python 2.1
> > apache 1.3.19
> > mod_python 2.7.6
> > 
> > Comments, please.
> > 
> > Thanks,
> > -Chuck
> > 
> > _______________________________________________
> > Mod_python mailing list
> > Mod_python@modpython.org
> > http://www.modpython.org/mailman/listinfo/mod_python
> > 
> > .
> > 
> > 
> 
> 
> 
> 



From oliver at redgecko.org  Thu Jan 10 23:12:46 2002
From: oliver at redgecko.org (Oliver Cope)
Date: Fri Jan  9 21:52:41 2004
Subject: [mod_python] Redirection with the Location Header and publisher handler
In-Reply-To: <200201102217.g0AMHqJ09593@my.knctv.co.kr>
References: <Pine.BSF.4.32.0201101556070.34235-100000@localhost> <200201102153.g0ALrlJ09318@my.knctv.co.kr> <15422.4278.657220.93787@magrathea.basistech.com> <200201102217.g0AMHqJ09593@my.knctv.co.kr>
Message-ID: <20020110231246.GA23053@canoodle.redgecko.org>

On Fri, Jan 11, 2002 at 07:26:18AM +0900, Jonathan Gardner wrote:
> >
> > Section 10 of RFC 2616 (HTTP 1.1) describes the HTTP result codes in
> > great detail, describing the behavior of a conforming
> > implementation. Section 10.3 covers redirection.
> >
> >     -tree
> 
> Where can I find a listing of all these RFC's and what they stand for?
> 
http://rfc.net/

The RFC mentioned above may be found at http://rfc.net/rfc2616.html

Olly.


From lbergman at abi.tconline.net  Fri Jan 11 09:05:17 2002
From: lbergman at abi.tconline.net (Lewis Bergman)
Date: Fri Jan  9 21:52:41 2004
Subject: [mod_python] error on make install
Message-ID: <200201111505.g0BF5Hb32618@lewis.abi.tconline.net>

I have searched the recent archives and I haven't seen anyone else with this 
problem. I therefore assume I have done something stupid. This is my first 
attempt at mod_python and I am new to python as well.

Background:
Python 2.2 , configured --with-threads=no
mod_python 2.7.6
Apache 1.3.22-2 , (rpm)
Apache-devel 1.3.22-2 , (rpm) for apxs

My configure line looks like this:
./configure --with-apxs=/usr/sbin/apxs --with-python=/root/tar/Python-2.2
no errors here.
I do a make and get no errors.

On make install I get this:
python /usr/local/lib/python2.2/compileall.py 
/usr/local/lib/python2.2/site-packages/mod_python
Traceback (innermost last):
  File "/usr/local/lib/python2.2/compileall.py", line 147, in ?
    exit_status = not main()
  File "/usr/local/lib/python2.2/compileall.py", line 104, in main
    import getopt
  File "/usr/local/lib/python2.2/getopt.py", line 101
    possibilities = [o for o in longopts if o.startswith(opt)]
                                   ^
SyntaxError: invalid syntax
make[2]: *** [install_py_lib] Error 1
make[2]: Leaving directory `/root/tar/mod_python-2.7.6'
make[1]: *** [install_dso] Error 2
make[1]: Leaving directory `/root/tar/mod_python-2.7.6'
make: *** [install] Error 2

Does anyone have a clue as to what I have (or have not) done?
It says syntax error but no-one else seems to be having difficulty. Any help 
is greatly appreciated.
-- 
Lewis Bergman
Texas Communications
4309 Maple St.
Abilene, TX 79602-8044
915-695-6962 ext 115

From jgardn at alumni.washington.edu  Sat Jan 12 12:37:03 2002
From: jgardn at alumni.washington.edu (Jonathan Gardner)
Date: Fri Jan  9 21:52:41 2004
Subject: [mod_python] Redirection with the Location Header and publisher handler
In-Reply-To: <1010680303.3287.2.camel@lucifer>
References: <200201101250.g0ACoIJ12496@my.knctv.co.kr> <1010680303.3287.2.camel@lucifer>
Message-ID: <200201120330.g0C3SBJ22837@my.knctv.co.kr>

On Friday 11 January 2002 01:31 am, Robert Sherwood wrote:
> I think you're looking for this:
>
> req.content_type = 'text/html'
> req.err_headers_out['Refresh'] = '3;http://usl/to/new/location'
> #Redirect after 3 Seconds
> req.send_http_header()
> return apache.HTTP_MOVED_PERMANENTLY
>
> Rob

It wasn't what I was looking for, and it doesn't quite work right.

I can't seem to get the Refresh header to behave properly with the default 
setting of Apache. However, this works wonderfully:

req.headers_out['Location'] = "http://www.google.com/"
return apache.HTTP_MOVED_PERMANENTLY

Of course, you can use HTTP_MOVED_TEMPORARILY or HTTP_TEMPORARY_REDIRECT is 
you like.

Jonathan

From foofboy at speakeasy.net  Sat Jan 12 12:38:04 2002
From: foofboy at speakeasy.net (Robert Sherwood)
Date: Fri Jan  9 21:52:41 2004
Subject: [mod_python] Redirection with the Location Header and publisher
	handler
In-Reply-To: <200201120330.g0C3SBJ22837@my.knctv.co.kr>
References: <200201101250.g0ACoIJ12496@my.knctv.co.kr>
	<1010680303.3287.2.camel@lucifer> 
	<200201120330.g0C3SBJ22837@my.knctv.co.kr>
Message-ID: <1010857085.6132.2.camel@lucifer>

Okay, now I'm confused. I didn't think that the configuration of the
webserver would have any effect on this. It should be one hundred
percent dependent on the browser. Looks like I have some reading to do.

Rob

On Fri, 2002-01-11 at 22:37, Jonathan Gardner wrote:
> On Friday 11 January 2002 01:31 am, Robert Sherwood wrote:
> > I think you're looking for this:
> >
> > req.content_type = 'text/html'
> > req.err_headers_out['Refresh'] = '3;http://usl/to/new/location'
> > #Redirect after 3 Seconds
> > req.send_http_header()
> > return apache.HTTP_MOVED_PERMANENTLY
> >
> > Rob
> 
> It wasn't what I was looking for, and it doesn't quite work right.
> 
> I can't seem to get the Refresh header to behave properly with the default 
> setting of Apache. However, this works wonderfully:
> 
> req.headers_out['Location'] = "http://www.google.com/"
> return apache.HTTP_MOVED_PERMANENTLY
> 
> Of course, you can use HTTP_MOVED_TEMPORARILY or HTTP_TEMPORARY_REDIRECT is 
> you like.
> 
> Jonathan
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 



From modpython at xhaus.com  Sun Jan 13 23:05:18 2002
From: modpython at xhaus.com (Alan Kennedy)
Date: Fri Jan  9 21:52:41 2004
Subject: [mod_python] HTTP compression.
Message-ID: <3C4212AE.47644F9E@xhaus.com>

Greetings all,

If anyone is interested, I've put together a page about compressing
content over HTTP with gzip, to minimise bandwidth usage. You can read
the page at

http://www.iol.ie/~alank/python/httpcomp.html

There is some sample mod_python code on the page.

Regards,

Alan.



From jfk at informaticon.dk  Mon Jan 14 09:36:15 2002
From: jfk at informaticon.dk (=?iso-8859-1?q?J=F8rgen=20Fr=F8jk=20Kj=E6rsgaard?=)
Date: Fri Jan  9 21:52:41 2004
Subject: [mod_python] Re: HTTP compression.
In-Reply-To: <3C4212AE.47644F9E@xhaus.com>
References: <3C4212AE.47644F9E@xhaus.com>
Message-ID: <02011409361500.01463@adele>

Mandag 14. Januar 2002 00:05 skrev du:
> Greetings all,
>
> If anyone is interested, I've put together a page about compressing
> content over HTTP with gzip, to minimise bandwidth usage. You can read
> the page at
>
> http://www.iol.ie/~alank/python/httpcomp.html
>
> There is some sample mod_python code on the page.

An alternative to this scheme is to use mod_gzip 
(http://www.remotecommunications.com/apache/mod_gzip/). This module is 
capable of compressing any HTTP data, static as well as dynamically 
generated. I use it successfully e.g. on the mod_python based site 
www.get2stamps.com. The gzip compression reduces the transfer time for tables 
with much similar data by more than 80%!

regards, J?rgen

-- 
J?rgen Fr?jk Kj?rsgaard, Systemkonsulent (Systems Consultant)
Informaticon ApS * Web: www.informaticon.dk * Tlf: +45 8672 0093
Internetkataloger * Dataindsamling * Specialudvikling * Systemarbejde

From thegreengrinch at operamail.com  Mon Jan 14 02:10:38 2002
From: thegreengrinch at operamail.com (Eric Mangold)
Date: Fri Jan  9 21:52:41 2004
Subject: [mod_python] Compilation problem.
Message-ID: <001301c19ce3$b74a65a0$050a010a@ericxp>

I'm attempting to compile mod_python 3, under Linux, glibc2.2, with apache
2.0.28 and python2.2 final. apache is compiled and installed under
/usr/local/apache. python is compiled and installed under /usr. my configure
line is as follows:

# CFLAGS="-O6 -march=i686 -ffast-math"
./configure --with-apxs=/usr/local/apache/bin/apxs

and i try to make it as follows:

# make dso
make[1]: Entering directory `/download/mod_python3/src'
gcc  -I/download/mod_python3/src/include -I/usr/local/apache/include -I/usr/
include/python2.2    -c -o mod_python.o mod_python.c
mod_python.c: In function `python_filter':
mod_python.c:1019: warning: passing arg 4 of `ap_get_brigade' from
incompatible pointer type
mod_python.c: In function `directive_PythonInputFilter':
mod_python.c:1479: warning: passing arg 2 of `ap_register_input_filter' from
incompatible pointer type
gcc  -I/download/mod_python3/src/include -I/usr/local/apache/include -I/usr/
include/python2.2    -c -o _apachemodule.o _apachemodule.c
gcc  -I/download/mod_python3/src/include -I/usr/local/apache/include -I/usr/
include/python2.2    -c -o requestobject.o requestobject.c
requestobject.c:916: structure has no member named `content_language'
requestobject.c:916: initializer element is not constant
requestobject.c:916: (near initialization for
`request_memberlist[41].offset')
requestobject.c:1015: parse error before `u'
requestobject.c: In function `tuple_from_parsed_uri':
requestobject.c:1021: `u' undeclared (first use in this function)
requestobject.c:1021: (Each undeclared identifier is reported only once
requestobject.c:1021: for each function it appears in.)
make[1]: *** [requestobject.o] Error 1
make[1]: Leaving directory `/download/mod_python3/src'
make: *** [do_dso] Error 2

python is compiled without thread support, however, apache is compiled with
the 'worker' MPM, if that means anything.


From ray_drew at yahoo.co.uk  Mon Jan 14 18:04:19 2002
From: ray_drew at yahoo.co.uk (Ray Drew)
Date: Fri Jan  9 21:52:41 2004
Subject: [mod_python] DLL for Windows
References: <NFBBKACIPKNFKAHLGHGBIEJLDOAA.neilb@nbt.co.za>
Message-ID: <015a01c19d25$e436c530$df13000a@RDREWXP>

----- Original Message -----
From: "Neil Beattie" <neilb@nbt.co.za>
To: "Ray Drew" <ray_drew@yahoo.co.uk>
Sent: Thursday, January 10, 2002 10:11 AM
Subject: RE: [mod_python] DLL for Windows


> Hi Ray,
> I compiled it against apache 1.3.22 but have tested it on a machine that
is
> running 1.3.20
> Hope it works for you!
> Neil.
>
>

Neil,

Yes this works for me on Apache 1.3.22.

Thanks very much,

Ray




_________________________________________________________
Do You Yahoo!?
Get your free @yahoo.com address at http://mail.yahoo.com


From roman at it-ukraine.com  Tue Jan 15 13:03:57 2002
From: roman at it-ukraine.com (Roman V Moroz)
Date: Fri Jan  9 21:52:41 2004
Subject: [mod_python] mod_python per VirtualHost
Message-ID: <200201151104.g0FB3v785297@violator.zp.ua>

Hi!

Is there possibility to turn on/off mod_python per-VirtualHost?
How to do this if possible?  

Thanx,
--------------------------------------------------------------
Roman V Moroz                   IT-Ukraine ltd
System Administrator
NIC-HDL: VIO13-RIPE             Zaporozhye,   Ukraine
http://www.moroz.zp.ua		http://www.it-ukraine.com


From rsherwood at cryptoknights.com  Wed Jan 16 12:30:22 2002
From: rsherwood at cryptoknights.com (Robert Sherwood)
Date: Fri Jan  9 21:52:41 2004
Subject: [mod_python] Python Path
Message-ID: <1011202223.14792.17.camel@lucifer>

Greetings all:

Someone is going to kick me, but I know I'm overlooking something
obvious and I was hoping one of you could spot it.

I am trying to have my main PythonHandler import a module that is below
it in the directory tree. Here is the basic information:

=========================================================

0. mod_python 2.7.6 running on debian unstable, using python-2.1.1

1. Scripts located in and below "/var/python"

2. mod_python listening on an apache VirtualHost

3. Config file as follows:
  Listen 8080
  <VirtualHost beelzebub:8080>
    DocumentRoot /var/python
    PythonPath "['/var/python/'] + sys.path"
    PythonDebug On
    PythonAutoReload On
    SetHandler python-program
    PythonTransHandler trans
    PythonHandler main
  </VirtualHost>

4. Python handler main failing at this directive:

  File "/var/python/main.py", line 3, in ?
     import browse.listArtists

  ImportError: No module named browse.listArtists

5. ls -F /var/python

admin/	 data/	  main.pyc  objects/	 playlists/    template/  trans.pyc 
browse/  main.py  mod_mp3/  parseRDF.py  preferences/  trans.py

6. ls -F /var/python/browse

__init__.py  listArtistAlbumSongs.py  listArtistAlbums.py 
listArtists.py

========================================================

I can't figure it out. It is as if the PythonPath directive were not
being inherited by the interpreter running main.py. Is this a bug, or am
I stupid?

Or both :)

Thanks in advance for any help anyone can offer.

Robert Sherwood


From modpython at xhaus.com  Wed Jan 16 20:09:17 2002
From: modpython at xhaus.com (Alan Kennedy)
Date: Fri Jan  9 21:52:41 2004
Subject: [mod_python] Python Path
References: <1011202223.14792.17.camel@lucifer>
Message-ID: <3C45DDEC.7FCAA7B@xhaus.com>

Rob,

I'm not sure if this will solve your problem, but have you tried placing an
__init__.py in the /var/python directory. With content like this

__all__ = ['browse']

To setup the "browse" package.

Just a suggestion,

Alan.

Robert Sherwood wrote:

> Greetings all:
>
> Someone is going to kick me, but I know I'm overlooking something
> obvious and I was hoping one of you could spot it.
>
> I am trying to have my main PythonHandler import a module that is below
> it in the directory tree. Here is the basic information:
>
> =========================================================
>
> 0. mod_python 2.7.6 running on debian unstable, using python-2.1.1
>
> 1. Scripts located in and below "/var/python"
>
> 2. mod_python listening on an apache VirtualHost
>
> 3. Config file as follows:
>   Listen 8080
>   <VirtualHost beelzebub:8080>
>     DocumentRoot /var/python
>     PythonPath "['/var/python/'] + sys.path"
>     PythonDebug On
>     PythonAutoReload On
>     SetHandler python-program
>     PythonTransHandler trans
>     PythonHandler main
>   </VirtualHost>
>
> 4. Python handler main failing at this directive:
>
>   File "/var/python/main.py", line 3, in ?
>      import browse.listArtists
>
>   ImportError: No module named browse.listArtists
>
> 5. ls -F /var/python
>
> admin/   data/    main.pyc  objects/     playlists/    template/  trans.pyc
> browse/  main.py  mod_mp3/  parseRDF.py  preferences/  trans.py
>
> 6. ls -F /var/python/browse
>
> __init__.py  listArtistAlbumSongs.py  listArtistAlbums.py
> listArtists.py
>
> ========================================================
>
> I can't figure it out. It is as if the PythonPath directive were not
> being inherited by the interpreter running main.py. Is this a bug, or am
> I stupid?
>
> Or both :)
>
> Thanks in advance for any help anyone can offer.
>
> Robert Sherwood
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python


From jgardn at alumni.washington.edu  Fri Jan 18 07:20:23 2002
From: jgardn at alumni.washington.edu (Jonathan Gardner)
Date: Fri Jan  9 21:52:41 2004
Subject: [mod_python] PyHTMLArch
Message-ID: <200201172235.g0HMZSO32204@my.knctv.co.kr>

For fun and education, I coded up my own handler. I wanted something like a 
bare-bones HTML::Mason, and I wanted to keep the template and the code 
completely seperate. What I came up with is PyHTMLArch. It is now at 
sourceforge - http://sf.net/projects/pyhtmlarch

It has several features that I like.
 - The code an the template are seperate
 - The template executes bits of code rather than doing a substitute. This is 
so you can write "The current time is <% time() %>" or " <% name %> has phone 
number of <% phone_nos[name] %>".
 - The code has full access to the request object. However, the CGI 
parameters are parsed and passed in as arguments.
 - It is simple, yet powerful. Combined with a working understanding of 
Apache and mod_python, it is quite a useful bit of code.

You can download it with CVS or as a bzip2. If you have any questions, be 
sure to email me. If you actually end up playing with it, let me know how you 
use it because I am very interested. I am always open to suggestions, bug 
fixes, etc... I am also interested in helping you get to use it.

Jonathan


From jgardn at alumni.washington.edu  Sat Jan 19 01:10:07 2002
From: jgardn at alumni.washington.edu (Jonathan Gardner)
Date: Fri Jan  9 21:52:42 2004
Subject: [mod_python] installing --with-python Python 2.2
Message-ID: <200201181625.g0IGPTY24849@my.knctv.co.kr>

Summary:
After a lot of research, I still can't get the --with-python option to work 
properly with Python 2.2. Linking problems.

Details:
I searched the entire archive of the mailing list. [NOTE: The link to 
download the entire mailing list from 
http://www.modpython.org/pipermail/mod_python/ is broken], I found only one 
helpful tip for my compiling problems: Don't use --with-python.

Sure enough, it works with 2.2 if I have it all installed so I don't need the 
--with-python option.

I know for a fact that 2.0.1 and 2.1.2 work with the --with-python option 
because I have installed both of them several times without a hitch. Well, I 
lie, but you after a while I got everything working together like they should.

My system: SuSE 7.1, running self-compiled Linux 2.4.14 kernel. 

I downloaded the sources for Python 2.2, Apache1.3.22, and mod_python 2.7.6.

1) Uncompressed all the sources to /usr/local/src/

2) Made a seperate source directory for the no threads version: 
  $ cp -R Python-2.2 Python-2.2-no-threads

3) For /usr/local/src/Python-2.2/, I did:
  $ ./configure
  $ make
  # make install

  Everything went smoothly.

4) For /usr/local/src/Python-2.2-no-threads/, I did:
  $ ./configure --without-threads
  $ make
  
  I also did this, so as to make everything available to Apache. I am sure 
that I only need to do a couple files, but which ones I do not know.
  $ chmod -R a+w *

  Everything went smoothly.

5) Went into the mod_python directory, and ran the following instructions. 
  $ ./configure --with-python=/usr/local/src/Python-2.2-no-threads/ \
    --with-apache=/usr/local/src/apache_1.3.22
  $ make static
  $ make install_static
  # make install_py_lib
  
  Everything went smoothly.

6) Went into the apache directory and did:
  $ ./configure --activate-module=src/modules/python/libpython.a
  $ make

  This is where it stops working. The complaint it spits out is:

gcc  -DLINUX=22 -DUSE_HSREGEX -DNO_DL_NEEDED `./apaci` -Xlinker 
-export-dynamic       \
      -o httpd buildmark.o modules.o modules/standard/libstandard.a 
modules/python/libpython.a main/libmain.a ./os/unix/libos.a ap/libap.a 
regex/libregex.a   -lm -lcrypt -lm  
/usr/local/src/Python-2.2-no-threads/libpython2.2.a   -lexpat
/usr/local/src/Python-2.2-no-threads/libpython2.2.a(posixmodule.o): In 
function `posix_tmpnam':
/usr/local/src/Python-2.2-no-threads/./Modules/posixmodule.c:4510: the use of 
`tmpnam' is dangerous, better use `mkstemp'
/usr/local/src/Python-2.2-no-threads/libpython2.2.a(posixmodule.o): In 
function `posix_tempnam':
/usr/local/src/Python-2.2-no-threads/./Modules/posixmodule.c:4458: the use of 
`tempnam' is dangerous, better use `mkstemp'
/usr/local/src/Python-2.2-no-threads/libpython2.2.a(dynload_shlib.o): In 
function `_PyImport_GetDynLoadFunc':
/usr/local/src/Python-2.2-no-threads/Python/dynload_shlib.c:90: undefined 
reference to `dlopen'
/usr/local/src/Python-2.2-no-threads/Python/dynload_shlib.c:93: undefined 
reference to `dlerror'
/usr/local/src/Python-2.2-no-threads/Python/dynload_shlib.c:98: undefined 
reference to `dlsym'
/usr/local/src/Python-2.2-no-threads/libpython2.2.a(posixmodule.o): In 
function `posix_openpty':
/usr/local/src/Python-2.2-no-threads/./Modules/posixmodule.c:1942: undefined 
reference to `openpty'
/usr/local/src/Python-2.2-no-threads/libpython2.2.a(posixmodule.o): In 
function `posix_forkpty':
/usr/local/src/Python-2.2-no-threads/./Modules/posixmodule.c:1973: undefined 
reference to `forkpty'
collect2: ld returned 1 exit status

IANAPIH - I am not a Python internals hacker so I have no idea what this 
means.

Jonathan

From alain at onesite.org  Fri Jan 18 21:10:28 2002
From: alain at onesite.org (Alain Tesio)
Date: Fri Jan  9 21:52:42 2004
Subject: [mod_python] Import problem with math.so
Message-ID: <20020118211028.5587b591.alain@onesite.org>

Hi, from time to time I get this error, top fix it I must go
to the modpython src dir and run make && make install.

Mod_python error: "PythonHandler observer_www"

Traceback (most recent call last):

  File "/usr/local/lib/python2.1/site-packages/mod_python/apache.py", line 181, in Dispatch
    module = import_module(module_name, _req)

  File "/usr/local/lib/python2.1/site-packages/mod_python/apache.py", line 338, in import_module
    module = imp.load_module(mname, f, p, d)

  File "/home/observer/scripts/observer_www.py", line 13, in ?
    import wwwlib

  File "/home/observer/scripts/wwwlib.py", line 1, in ?
    import mycgi

  File "/home/observer/scripts/mycgi.py", line 9, in ?
    import math

ImportError: /usr/lib/python2.1/lib-dynload/math.so: undefined symbol: PyFPE_jbuf


However ldd gives only shared libs in the standard path:

05:53:18 observer ~/scripts $ldd /usr/lib/python2.1/lib-dynload/math.so
        libm.so.6 => /lib/libm.so.6 (0x40009000)
        libc.so.6 => /lib/libc.so.6 (0x4002b000)
        /lib/ld-linux.so.2 => /lib/ld-linux.so.2 (0x80000000)

I can import the module from the interpreter:

05:53:34 observer ~/scripts $python
Python 2.1.1 (#2, Jan 13 2002, 17:07:14)
[GCC 2.95.4 20011006 (Debian prerelease)] on linux2
Type "copyright", "credits" or "license" for more information.
>>> import math
>>>

The configure line is:

../configure --with-apxs=`which apxs` --with-python=/usr/src/Python-2.1.1

and the compilation commands:

/usr/bin/apxs -I/usr/src/mod_python-2.7.6/src/include -I/usr/include/apache-1.3 -I/usr/src/Python-2.1.1 -I/usr/src/Python-2.1.1/Include -c mod_python.o _apachemodule.o requestobject.o tableobject.o util.o serverobject.o connobject.o  -lm  /usr/src/Python-2.1.1/libpython2.1.a   -ldl  -lutil   -lm           -lreadline -ltermcap
gcc -shared -o mod_python.so mod_python.o _apachemodule.o requestobject.o tableobject.o util.o serverobject.o connobject.o -lm /usr/src/Python-2.1.1/libpython2.1.a -ldl -lutil -lm -lreadline -ltermcap -lc -lm -lcrypt -ldb1 -ldb


Another similar error I can't explain, fixed the same way is with one of
my modules:

>   File "/home/observer/scripts/observer_www.py", line 18, in handler
>     form_items=wwwlib.mod_python_form_items(req)
> 
> AttributeError: 'wwwlib' module has no attribute 'mod_python_form_items'



Any idea ?

Thanks
Alain

From djc at object-craft.com.au  Sat Jan 19 15:06:37 2002
From: djc at object-craft.com.au (Dave Cole)
Date: Fri Jan  9 21:52:42 2004
Subject: [mod_python] Re: PyHTMLArch
In-Reply-To: <200201172235.g0HMZSO32204@my.knctv.co.kr>
References: <200201172235.g0HMZSO32204@my.knctv.co.kr>
Message-ID: <m3zo3bf0he.fsf@ferret.object-craft.com.au>

> For fun and education, I coded up my own handler. I wanted something
> like a bare-bones HTML::Mason, and I wanted to keep the template and
> the code completely seperate. What I came up with is PyHTMLArch. It
> is now at sourceforge - http://sf.net/projects/pyhtmlarch

You might also want to have a look at the Albatross toolkit (I am the
primary developer).  Albatross is slightly more ambitious in that it
allows you to deploy your application either via mod_python or as a
CGI program.  This is quite handy while you are doing development.

> It has several features that I like.  - The code an the template are
> seperate - The template executes bits of code rather than doing a
> substitute. This is so you can write "The current time is <% time()
> %>" or " <% name %> has phone number of <% phone_nos[name] %>".  -
> The code has full access to the request object. However, the CGI
> parameters are parsed and passed in as arguments.  - It is simple,
> yet powerful. Combined with a working understanding of Apache and
> mod_python, it is quite a useful bit of code.

Albatross uses a DTML like templating syntax with some interesting
capabilities.  latex2html choked on some of the text causing the
template to be truncated, but the PDF documentation shows the template
text correctly.

    http://www.object-craft.com.au/projects/albatross/albatross/tug-tree.html

Macro expansion is a nice way to make your templates maintainable.

    http://www.object-craft.com.au/projects/albatross/albatross/tag-macro.html

There are a number of ways to implement server or client side
sessions.

Albatross is not an application server, it is a toolkit which you can
bend to your particular needs.  Most of the code in the toolkit is a
collection of small classes which are mixed together in different ways
to provide a suite of application frameworks and request execution
contexts.  To get you started quickly there are a number of
pre-packaged classes which are likely to suit your needs.  If these
are not exactly what you require you can provide drop in replacements
for any of the building blocks.

In the following diagram the light grey boxes enclose the pre-packaged
application and execution context classes.  The darker grey boxes
enclose classes which provide the same function but with different
semantics.  By providing your own drop in replacement for any of these
classes you can change one or more aspects of the toolkit behaviour.

    http://www.object-craft.com.au/projects/albatross/albatross/pack-overview.html

The home page for the toolkit is here:

    http://www.object-craft.com.au/projects/albatross/

We use Albatross for paid consulting work, so we are very serious
about making Albatross useful.

The current PDF documentation stands at 125 pages and the current line
count for Albatross (using the highly scientific wc -l metric) is 2646
lines.

- Dave

-- 
http://www.object-craft.com.au


From tchur at optushome.com.au  Sat Jan 19 19:00:38 2002
From: tchur at optushome.com.au (Tim Churches)
Date: Fri Jan  9 21:52:42 2004
Subject: [mod_python] Re: PyHTMLArch
References: <200201172235.g0HMZSO32204@my.knctv.co.kr> <m3zo3bf0he.fsf@ferret.object-craft.com.au>
Message-ID: <3C4927A6.5B6B33B4@optushome.com.au>

Dave Cole wrote:
> The current PDF documentation stands at 125 pages and the current line
> count for Albatross (using the highly scientific wc -l metric) is 2646
> lines.

If one assumes a mean of 20 lines of text per page of documentation,
that means the documentation-to-code line count ratio for Albatross must
be pretty close to unity, which is encouraging. The ideal ratio of lines
of documentation to lines of code is, of course, phi, the Golden Mean,
which is an irrational number with a value of approximately
1.6180339887499...

Tim C

From modpython at xhaus.com  Fri Jan 25 09:35:06 2002
From: modpython at xhaus.com (Alan Kennedy)
Date: Fri Jan  9 21:52:42 2004
Subject: [mod_python] Web sessions and threading.
Message-ID: <200201251445.JAA38220@spool4.valueweb.net>

Greetings All,

I'm putting together a session tracking mechanism for
Apache and mod_python, on Win and Linux. And my mind is
being twisted trying to decide if I need to worry about
thread safety or not.

My confusion arises from trying to juggle the concepts of
the Python Global Interpreter Lock and the way that
Apache handles simultaneous requests.

On Windows, Apache spawns a single child, which then
creates a thread to service every request received. On
Linux, Apache maintains a pool of single-threaded child
processes, which compete to service incoming requests.

So, imagine I have a mod_python handler function, which
is going to extract a session ID from incoming requests,
and use that as a key to retrieve a corresponding session
object from some storage (say, a memory mapped file,
rdbms(?)).

That session object can then be modified by the handler
function, and thus must then be written back to storage.

Since it is possible for two requests from the same
session to be handled by different threads
windows)/processes(linux), I obviously have a concurrent
access problem.

On Linux, there are no threading issues, since all of
the processes serving requests are single-threaded.

However, it is obviously different on multi-threaded 
Windows. On Windows, I don't know if it is possible for
two threads to update the same python object at the same
time, i.e. I don't know the effect of the Global
Interpreter Lock(GIL).

On Windows, the two threads will definitely be run in
the same interpreter (the default configuration for
mod_python).

So, my question: do I need to protect the session objects
against concurrent access from multiple threads (and thus
complicate the code)? Or can I ignore the issue, i.e. is
access to the object serialised by the GIL?

I know I could probably answer my question by reading and
understanding the python and mod_python source code. But I
was hoping someone might be able to give me pointers to
documentation which might throw some light on the scenario?

Many thanks,

Alan.



---------------------------------------------
This message was sent using WebMail by CyberGate.
http://www.gate.net/webmail



From grisha at modpython.org  Fri Jan 25 13:20:55 2002
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:52:42 2004
Subject: [mod_python] Web sessions and threading.
In-Reply-To: <200201251445.JAA38220@spool4.valueweb.net>
Message-ID: <Pine.BSF.4.32.0201251318270.7431-100000@localhost>


On Fri, 25 Jan 2002, Alan Kennedy wrote:

> Greetings All,
>
> I'm putting together a session tracking mechanism for
> Apache and mod_python, on Win and Linux. And my mind is
> being twisted trying to decide if I need to worry about
> thread safety or not.

The general answer is "yes". Even thoug Python will make sure that access
is serialized, your logic needs to anticipate and prevent unexpected
changes to an object.

On UNIX it doesn't matter now, but it will with Apache 2.0.

Grisha


From lbergman at abi.tconline.net  Mon Jan 28 08:04:27 2002
From: lbergman at abi.tconline.net (Lewis Bergman)
Date: Fri Jan  9 21:52:42 2004
Subject: [mod_python] python web tools?
Message-ID: <200201281404.g0SE4S014732@lewis.abi.tconline.net>

Does anyone know of web tools for use with mod_python?

I was thinking of something along the lines of a validation class, forms 
class, authentication class. General tools for handling common tasks on the 
web.

-- 
Lewis Bergman
Texas Communications
4309 Maple St.
Abilene, TX 79602-8044
915-695-6962 ext 115

From lbergman at abi.tconline.net  Mon Jan 28 11:16:37 2002
From: lbergman at abi.tconline.net (Lewis Bergman)
Date: Fri Jan  9 21:52:42 2004
Subject: [mod_python] Re: mod_python make install problem
In-Reply-To: <3C496FB4.7A6E2E@ndh.net>
References: <3C496FB4.7A6E2E@ndh.net>
Message-ID: <200201281716.g0SHGbn14970@lewis.abi.tconline.net>

> Another reason could be that the getopt code from the Python 2.2
> library is actually executed by an older Python interpreter that
> doesn't know of list comprehensions.

It seems that this explanation is correct. I had installed python2.2 on this 
machine with the make altinstall command as it is a RH7.2 install. simply 
using make install breaks all kinds of things including printing.

So, somehow, even though the instructions were followed completely and the 
--with-python switch was pointing to the right place, the make install was 
somehow using the other 1.5.2 install of python.

I used a spare machine, installed python2.2 as the only python and it worked.
curious.

I do get an error about mod_python being compiled without -DEAPI though. Is 
this something to worry about? Perhaps I forgot to compile 2.2 with the 
--with-threads=no option and this caused it?
-- 
Lewis Bergman
Texas Communications
4309 Maple St.
Abilene, TX 79602-8044
915-695-6962 ext 115


From grisha at modpython.org  Mon Jan 28 13:40:57 2002
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:52:42 2004
Subject: [mod_python] Re: mod_python make install problem
In-Reply-To: <200201281716.g0SHGbn14970@lewis.abi.tconline.net>
Message-ID: <Pine.BSF.4.32.0201281331300.37930-100000@localhost>

If I recall correctly, the issue here is that until Python is installed
(i.e. make install was run), there is no way to determine some install
time parameters, such as where the lib directory is.

the last paragraph on this page talks about it a little bit:
http://www.modpython.org/live/mod_python-2.7.6/doc-html/inst-configure.html

Grisha

On Mon, 28 Jan 2002, Lewis Bergman wrote:

> > Another reason could be that the getopt code from the Python 2.2
> > library is actually executed by an older Python interpreter that
> > doesn't know of list comprehensions.
>
> It seems that this explanation is correct. I had installed python2.2 on this
> machine with the make altinstall command as it is a RH7.2 install. simply
> using make install breaks all kinds of things including printing.
>
> So, somehow, even though the instructions were followed completely and the
> --with-python switch was pointing to the right place, the make install was
> somehow using the other 1.5.2 install of python.
>
> I used a spare machine, installed python2.2 as the only python and it worked.
> curious.
>
> I do get an error about mod_python being compiled without -DEAPI though. Is
> this something to worry about? Perhaps I forgot to compile 2.2 with the
> --with-threads=no option and this caused it?
> --
> Lewis Bergman
> Texas Communications
> 4309 Maple St.
> Abilene, TX 79602-8044
> 915-695-6962 ext 115
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From bakey at traq.com  Mon Jan 28 15:06:37 2002
From: bakey at traq.com (Brian Akey)
Date: Fri Jan  9 21:52:42 2004
Subject: [mod_python] A python help site
Message-ID: <780A5D64B1CC9544AB7B702F39219C1E5FB8@traqexch.traq.com>

I made up a site to help people trying to setup mod_python.
If anyone sees some mistakes or thinks I should add something, please
drop me an email at bakey@traq.com <mailto:bakey@traq.com> 
 
Brian Akey
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20020128/62bf7f5d/attachment-0001.htm
From woodm at equire.com  Mon Jan 28 14:37:27 2002
From: woodm at equire.com (Matthew D. Wood)
Date: Fri Jan  9 21:52:42 2004
Subject: [mod_python] A python help site
In-Reply-To: <780A5D64B1CC9544AB7B702F39219C1E5FB8@traqexch.traq.com>
References: <780A5D64B1CC9544AB7B702F39219C1E5FB8@traqexch.traq.com>
Message-ID: <1012253847.1836.17.camel@localhost.localdomain>

Yes, I do believe that I have found something that you were missing...

What's the address? :-)

On Mon, 2002-01-28 at 14:06, Brian Akey wrote:
> I made up a site to help people trying to setup mod_python.
> If anyone sees some mistakes or thinks I should add something, please
> drop me an email at bakey@traq.com <mailto:bakey@traq.com> 
>  
> Brian Akey
-- 
                                               _________________________
----------------------------------------------/                         
                                             /  Matthew D. Wood         
 "activist for accuracy"                    /  Home Phone: 303.415.1550 
                                           /  E-Mail: woodm@equire.com  
                                          /                             
_________________________________________/------------------------------

From bakey at traq.com  Mon Jan 28 15:27:24 2002
From: bakey at traq.com (Brian Akey)
Date: Fri Jan  9 21:52:42 2004
Subject: [mod_python] A python help site
Message-ID: <780A5D64B1CC9544AB7B702F39219C1E5FBA@traqexch.traq.com>

http://cricket.ironkeytech.com <http://cricket.ironkeytech.com>  


I made up a site to help people trying to setup mod_python.
If anyone sees some mistakes or thinks I should add something, please
drop me an email at bakey@traq.com <mailto:bakey@traq.com> 
 
Brian Akey

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20020128/33d945b4/attachment-0001.htm
From magnus at hetland.org  Mon Jan 28 22:58:10 2002
From: magnus at hetland.org (Magnus Lie Hetland)
Date: Fri Jan  9 21:52:42 2004
Subject: [mod_python] A python help site
In-Reply-To: <1012253847.1836.17.camel@localhost.localdomain>; from woodm@equire.com on Mon, Jan 28, 2002 at 02:37:27PM -0700
References: <780A5D64B1CC9544AB7B702F39219C1E5FB8@traqexch.traq.com> <1012253847.1836.17.camel@localhost.localdomain>
Message-ID: <20020128225810.C14200@idi.ntnu.no>

Matthew D. Wood <woodm@equire.com>:
>
> Yes, I do believe that I have found something that you were missing...
> 
> What's the address? :-)
 
That was in the original mail:

http://cricket.ironkeytech.com 

--
Magnus Lie Hetland                                  The Anygui Project
http://hetland.org                                  http://anygui.org

From magnus at hetland.org  Mon Jan 28 23:25:32 2002
From: magnus at hetland.org (Magnus Lie Hetland)
Date: Fri Jan  9 21:52:42 2004
Subject: [mod_python] A python help site
In-Reply-To: <20020128225810.C14200@idi.ntnu.no>; from magnus@hetland.org on Mon, Jan 28, 2002 at 10:58:10PM +0100
References: <780A5D64B1CC9544AB7B702F39219C1E5FB8@traqexch.traq.com> <1012253847.1836.17.camel@localhost.localdomain> <20020128225810.C14200@idi.ntnu.no>
Message-ID: <20020128232532.D14200@idi.ntnu.no>

Magnus Lie Hetland <magnus@hetland.org>:
>
> Matthew D. Wood <woodm@equire.com>:
> >
> > Yes, I do believe that I have found something that you were missing...
> > 
> > What's the address? :-)
>  
> That was in the original mail:

<ahem>

Sorry -- I was a bit quick there :)

--
Magnus Lie Hetland                                  The Anygui Project
http://hetland.org                                  http://anygui.org

From gbeasley at tsa.ac.za  Tue Jan 29 12:47:06 2002
From: gbeasley at tsa.ac.za (Grant Beasley)
Date: Fri Jan  9 21:52:42 2004
Subject: [mod_python] Persistent variables?
Message-ID: <OOENKCHGJGHILGPAGHGOKEIMCBAA.gbeasley@tsa.ac.za>

Hi

Firstly, I hope this hasn't already come up, but I've searched the archives
back a few months and can't find anything.

I have a mod python authentification script which, upon authentification,
reads user details from a database and places them in a global dictionary
indexed on the userid. This is kept in a separate module (called Globals),
and accessed through functions in the global module. This dictionary seems
to persist through HTTP connections, so on subsequent calls I can just read
the dictionary instead of the database.

I haven't come up with any problems thus far, except that isinstance doesn't
seem to function correctly. If I create a Widget instance and store it in my
global dictionary, on subsequent sessions, although the Widget instance
exists, and widget.__class__ is equal to the Widget class (in string terms),
isinstance returns 0. I'd assume this is because I've somehow reloaded the
Widget class and hence it does not compare equally to the class stored with
the original widget instance.

I hope that makes sense and doesn't sound like complete gibberish. Can
anyone explain this to me, and indicate whether storing user data like this
is safe and sensible? Should I be reading user details from my database?

Thanks
Grant Beasley
Technikon SA


From grisha at modpython.org  Wed Jan 30 14:00:20 2002
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:52:42 2004
Subject: [mod_python] About authentication
In-Reply-To: <Pine.LNX.4.10.10110041113020.7933-100000@mrham.hamslab.com>
Message-ID: <Pine.BSF.4.32.0201301353430.94999-100000@localhost>

No passwdord is not an unusual condition - your code should deal with
users who do not supply passwords by returning them HTTP_UNAUTHORIZED.

So something like:

if password:
	md5.new(password).hexdigest()
else:
	return apache.HTTP_UNAUTHORIZED

On Thu, 4 Oct 2001 nineclue@bigfoot.com wrote:

> I'm trying to implement custom authentication using authenhandler.
> I want to save user info and password in encrypted file that other users
> can only read. So I've tried to use md5.new('password').hexdigest().
> 'password' is a variable that stores password using
> req.get_basic_auth_pw().
>
> When I've tried to load restricted page, I got error saying 'password'
> variable is not read-only buffer, but None. I can use direct comparison
> of username and password with string as to the mod_python document, but I
> can't use it in a function that accepts string as a argument.
>
> Any comment or help would be appreciated.
> mod_python is 2.7.2.
>
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From jm at eemsystems.cjb.net  Wed Jan 30 18:25:26 2002
From: jm at eemsystems.cjb.net (Julio Mendoza)
Date: Fri Jan  9 21:52:42 2004
Subject: [mod_python] mod_python and form process
Message-ID: <1012433126.26213.13.camel@eemsystems>

I need to process a form with variable number of fields.

how to do that with mod_python?


thanks,

JM





From malex at purdue.edu  Thu Jan 31 01:38:03 2002
From: malex at purdue.edu (Oleksandr Moskalenko)
Date: Fri Jan  9 21:52:42 2004
Subject: [mod_python] Import Error puzzle
Message-ID: <20020131063803.GA32627@purdue.edu>

 Hello all,

I'm really puzzled by this problem. I have two identical configurations
on two pretty much identical Debian GNU/Linux Unstable systems. Both use
python 2.1 + mod_python 2.7.6. Mod_python works fine on one of those,
but on the other it produces the following error:

Mod_python error: "PythonHandler mptest"

Traceback (most recent call last):

  File "/usr/lib/python2.1/site-packages/mod_python/apache.py", line
181, in Dispatch
    module = import_module(module_name, _req)

  File "/usr/lib/python2.1/site-packages/mod_python/apache.py", line
335, in import_module
    f, p, d = imp.find_module(parts[i], path)

ImportError: No module named mptest



Now as far as I understand mod_python adds the current directory to the
front of the sys.path and then imports module by name. What could go
wrong here? Regular python cgi scripts work fine. I can successfully run
the following, for example:
#!/usr/bin/env python

print 'Content-Type: text/html'
print
print '<html>'
print ' <head>'
print '  <title>My CGI application</title>'
print ' </head>'
print ' <body>'
print '  Hello from my simple CGI application!'
print ' </body>'
print '</html>'

and get the Hello... string

Can anybody help me troubleshoot this?


Thank you,

Alex.

-----------------------
Oleksandr Moskalenko
malex@purdue.edu
-----------------------
pub  1024D/6C5F196B 2001-08-17 /* http://www.tagancha.org/pgp */
Oleksandr V. Moskalenko (Alex) <malex@tagancha.org>
Fingerprint = EE63 C471 ADBA 5D80 ADFB  1054 DA28 6F32 6C5F 196B
----------------------------------------------------------------

From bakey at traq.com  Thu Jan 31 09:59:37 2002
From: bakey at traq.com (Brian Akey)
Date: Fri Jan  9 21:52:42 2004
Subject: [mod_python] mod_python and form process
Message-ID: <780A5D64B1CC9544AB7B702F39219C1E5FCF@traqexch.traq.com>

You can use the regular dictionary functions of python.
form = util.FieldStorage(req)
That gets you the post information
form.keys() will give you a list of keys

fn = form.keys()
for fn1 in fn:
	req.write('keyname is ' + str(fn1) + '<br>\n')
	req.write('value is ' + str(form[fn1]) + '<br>\n')

Brian

>I need to process a form with variable number of fields.
>
>how to do that with mod_python?

From ray_drew at yahoo.co.uk  Wed Jan  2 11:15:12 2002
From: ray_drew at yahoo.co.uk (Ray Drew)
Date: Fri Jan  9 21:59:11 2004
Subject: [mod_python] Python 2.2
References: <Pine.BSF.4.32.0112171033370.20970-100000@localhost>
Message-ID: <024f01c1937e$c0349b40$df13000a@RDREWXP>


>
> I haven't tried compiling it with 2.2 yet, but chances are it will work
> without any modifications... I guess we'll see when it comes out. :)
>
> On Mon, 17 Dec 2001, Ray Drew wrote:
>
> > Is mod_python avalable for Python 2.2 yet? Python 2.2 final is scheduled
for
> > release later this week.
> >

Now that Python 2.2 is out, do you know when mod_python will support it? I'm
running with Apache 1.3.22 on Windows NT/XP.

Thanks,

Ray Drew


_________________________________________________________
Do You Yahoo!?
Get your free @yahoo.com address at http://mail.yahoo.com


From grisha at modpython.org  Wed Jan  2 13:04:50 2002
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:59:11 2004
Subject: [mod_python] Python 2.2
In-Reply-To: <024f01c1937e$c0349b40$df13000a@RDREWXP>
Message-ID: <Pine.BSF.4.32.0201021303190.98580-100000@localhost>

AFAIK it will work with 2.2 as is, it's just a matter of compiling a DLL.
My access to a windows box with a compiler is somewhat limited right now -
perhaps someone on the list would contribute a compiled DLL?

Grisha

On Wed, 2 Jan 2002, Ray Drew wrote:

>
>
> >
> > I haven't tried compiling it with 2.2 yet, but chances are it will work
> > without any modifications... I guess we'll see when it comes out. :)
> >
> > On Mon, 17 Dec 2001, Ray Drew wrote:
> >
> > > Is mod_python avalable for Python 2.2 yet? Python 2.2 final is scheduled
> for
> > > release later this week.
> > >
>
> Now that Python 2.2 is out, do you know when mod_python will support it? I'm
> running with Apache 1.3.22 on Windows NT/XP.
>
> Thanks,
>
> Ray Drew
>
>
> _________________________________________________________
> Do You Yahoo!?
> Get your free @yahoo.com address at http://mail.yahoo.com
>
>


From rsalz at zolera.com  Thu Jan  3 12:34:19 2002
From: rsalz at zolera.com (Rich Salz)
Date: Fri Jan  9 21:59:11 2004
Subject: [mod_python] configure.in patch
Message-ID: <3C34961B.1000705@zolera.com>

configure[.in] has code to set AP_SRC_OWN and AP_SRC_GRP by parsing the 
output of "ls -ld".  It wants that information so that it can chown the 
files it copies into the apache source tree.   There are a number of 
problems with this.

0.  it requires root privs.
1.  the operation is often unnecessary, as the installer of mod-python 
should be the apache owner.
2.  if they are not the same, masking the owner looses accountability :)
3.  the output of "ls -l" is different across platforms, including the 
placement of the fields (for extraction via awk) and some versions put a
  "total nnnn" line out first.

I believe the best solution is to not chown things; we patch the 
Makefile so that the install targets do not do that. The attached diff, 
however, merely makes mod_python's configure more robust in the fact of 
multi-line "ls" output.  It does not address the more fundamental 
problem, which is that the output of "ls" puts those fields in different 
  places on different hosts.  One way to address that would be to gather 
the values via a short python program.
	/r$
-- 
Zolera Systems, Your Key to Online Integrity
Securing Web services: XML, SOAP, Dig-sig, Encryption
http://www.zolera.com
-------------- next part --------------
*** configure.in.ORIG	Thu Jan  3 12:17:06 2002
--- configure.in	Thu Jan  3 12:25:34 2002
***************
*** 163,170 ****
    AP_INCLUDES="-I${AP_SRC}/src/include -I${AP_SRC}/src/os/unix"
  
    # note who owns the apache source directory
!   AP_SRC_OWN="`ls -ld $AP_SRC | awk '{print $3}'`"
!   AP_SRC_GRP="`ls -ld $AP_SRC | awk '{print $4}'`"
  ],
  AC_MSG_RESULT(no))
  
--- 163,170 ----
    AP_INCLUDES="-I${AP_SRC}/src/include -I${AP_SRC}/src/os/unix"
  
    # note who owns the apache source directory
!   AP_SRC_OWN="`ls -ld $AP_SRC | awk '{print $3}' | tr -d '[\012\015]'`"
!   AP_SRC_GRP="`ls -ld $AP_SRC | awk '{print $4}' | tr -d '[\012\015]'`"
  ],
  AC_MSG_RESULT(no))
  
From x at Vex.Net  Fri Jan  4 14:28:48 2002
From: x at Vex.Net (Tm)
Date: Fri Jan  9 21:59:11 2004
Subject: [mod_python] ob-CallBack Kenobi
Message-ID: <20020104193220.92BD144A9A6@spitfire.velocet.net>

This is an issue that seems to come up periodically on this list. I've 
searched and read all the messages I could find on the subject. The 
realy strange thing is that I've installed, setup, and used succesfully 
mod_python on two other NetBSD systems, with no problems. But the 
NetBSD system I'm trying to get it going on now (essentially identical 
to the previous ones) just refuses to cooperate:

make_obcallback(): could not import mod_python.apache.
make_obcallback(): could not call init.
python_handler: make_obcallback returned no obCallBack!

I've checked the permissions of the libraries, i've checked the 
locatoins, i've fiddled with the python path.

Can anyone give any more tips on how I might debug this situation and 
figure out what is actually going wrong here?

I'm using NetBSD 1.5.1, Apache 1.3.22, Python 2.01 without threads 
(installed in the standard NetBSD locations).


From eelgueta at vtr.net  Sat Jan  5 15:21:35 2002
From: eelgueta at vtr.net (Eduardo Elgueta)
Date: Fri Jan  9 21:59:11 2004
Subject: [mod_python] unsuscribe
Message-ID: <1010254896.6694.3.camel@jerry.srd.cl>

unsuscribe




From x at Vex.Net  Sun Jan  6 00:18:02 2002
From: x at Vex.Net (T. Muddletin)
Date: Fri Jan  9 21:59:11 2004
Subject: [mod_python] ob-CallBack Kenobi
In-Reply-To: <20020104193220.92BD144A9A6@spitfire.velocet.net>
References: <20020104193220.92BD144A9A6@spitfire.velocet.net>
Message-ID: <55371568667.20020106001802@Vex.Net>

Tim wrote on Friday, January 04, 2002, 2:28:48 PM:
> I've checked the permissions of the libraries, i've checked the
> locations, i've fiddled with the python path.

As a last resort i hauled out the apache source and managed to build
mod_python statically with it. And it seems to be working fine this
way. Strange that the DSO module won't work on this machine, but the
statically compiled one does? I'm not familiar enough with the
internals to speculate as to why, but just thought i'd mention this is
how i solved the dilemma finally, in case anyone else has a similar
problem...

Though i would really like to get the DSO module to work on this
machine eventually. At least it works statically for now, and
development can move ahead.

-- 
Tim Middleton | Cain Gang Ltd | But the trouble was that my hysterical fit
x@veX.net     | www.Vex.Net   | could not go on for ever. --Dost (NFTU)


From modpython at xhaus.com  Mon Jan  7 19:32:10 2002
From: modpython at xhaus.com (Alan Kennedy)
Date: Fri Jan  9 21:59:11 2004
Subject: [mod_python] TransHandler help?
Message-ID: <3C39F7BA.653BE2A8@xhaus.com>

Greetings All,

And many thanks to Grisha for an excellent body of work.

I'm trying to get a PythonTransHandler working.

What I am trying to do is modify an URL before it goes through standard
Apache processing. (See below for an explanation why, if you wish)

Could someone possibly give me a simple example (including
configuration) of how I could, for example, change every request for a
.html file to a request for a .xyz file. That is, a request for

/admin/index.html

would become a request for

/admin/index.xyz

*without* sending a redirect back to the client. Or a more sophisticated
example, how could I turn a request for

/admin/abc1234/update/item4567

into a request for

/admin/doit.html?sessionID=abc1234&command=update&what=item4567

Many thanks for any help offered.

Regards,

Alan.

P.S. I'm working with modpython 2.7.6, win2k, apache 1.3.22 and Python
2.1.1

P.P.S.
Why: I am trying to implement URL rewriting for session tracking. Rather
than try to modify every <a href> and <form action> to contain a session
ID, I was hoping to take a quick solution using a <base href> element in
<head>. In fact I was hoping to encode several parameters like this,
i.e. as pseudo-directory names. Why do it this way, rather than setting
all the parameters as query args, i.e. "?sessID=abc123&command=update".

For a couple of reasons:-

1. Because it looks far neater in the URL
2. Because I can put all that stuff into the <base href>, which is
simpler in code terms, because I don't have to worry about <a href> and
<form action> adding their own query parameters, and potentially having
two "?" query delimiters in the URI, which is invalid.

So, the way it would work is this:

A HTML document (H) is transmitted which contains the parameters as
"directory names" in the <base href>

When the client activates a link in H or submits a form from H, I
extract the parameters out of the requested URI, and execute whatever
functionality.

The problem is that Apache complains if any of the "pseudo directories"
does not physically exist. Which is a rather a pain. That's why I need
to change the URL before Apache gets at it, which the documentation
implies TransHandler can do. I quote :- "This routine gives allows for
an opportunity to translate the URI into an actual filename, before the
server's default rules (Alias directives and the like) are followed. "




From oliver at redgecko.org  Mon Jan  7 22:08:09 2002
From: oliver at redgecko.org (Oliver Cope)
Date: Fri Jan  9 21:59:11 2004
Subject: [mod_python] TransHandler help?
In-Reply-To: <3C39F7BA.653BE2A8@xhaus.com>
References: <3C39F7BA.653BE2A8@xhaus.com>
Message-ID: <20020107220809.GA4997@canoodle.redgecko.org>

On Mon, Jan 07, 2002 at 07:32:10PM +0000, Alan Kennedy wrote:
>
> I'm trying to get a PythonTransHandler working.
> 
<snip>

> *without* sending a redirect back to the client. Or a more sophisticated
> example, how could I turn a request for
> 
> /admin/abc1234/update/item4567
> 
> into a request for
> 
> /admin/doit.html?sessionID=abc1234&command=update&what=item4567
> 
I too have spent some time trying to configure a PythonTransHandler, but
couldn't get it to work :o(
		
I've had more luck using mod_rewrite for this kind of thing:

RewriteEngine On
RewriteRule /admin/(.*)/(.*)/(.*) /admin/doit.html?sessionID=$1&command=$2&what=$3 [PT]

This will rewrite requests without sending redirects back to the client.
You can remove the '[PT]' if you don't need to further process the
rewritten URL (e.g. through a PythonHandler).

Obviously regular expressions are not as flexible as a Python
handler can be, so this will only work for simple translations.  Also
you'll need to have Apache compiled with mod_rewrite, I'm not sure if
this is the default.

Regards,

Olly.


From modpython at xhaus.com  Mon Jan  7 23:18:34 2002
From: modpython at xhaus.com (Alan Kennedy)
Date: Fri Jan  9 21:59:11 2004
Subject: [mod_python] TransHandler help?
References: <3C39F7BA.653BE2A8@xhaus.com> <20020107220809.GA4997@canoodle.redgecko.org>
Message-ID: <3C3A2CCA.88920E9F@xhaus.com>

Thanks Olly,

It's good to know that I'm not the only who can't get it to work :-\

I've been avoiding relying on mod_rewrite and its "cool voodoo". I have the training and
background to get my head around it, but members of my team unfortunately don't, whereas
they are all very comfortable with python.......

Thanks for the reply,

Cheers,

Alan.

Oliver Cope wrote:

> On Mon, Jan 07, 2002 at 07:32:10PM +0000, Alan Kennedy wrote:
> >
> > I'm trying to get a PythonTransHandler working.
> >
> <snip>
>
> > *without* sending a redirect back to the client. Or a more sophisticated
> > example, how could I turn a request for
> >
> > /admin/abc1234/update/item4567
> >
> > into a request for
> >
> > /admin/doit.html?sessionID=abc1234&command=update&what=item4567
> >
> I too have spent some time trying to configure a PythonTransHandler, but
> couldn't get it to work :o(
>
> I've had more luck using mod_rewrite for this kind of thing:
>
> RewriteEngine On
> RewriteRule /admin/(.*)/(.*)/(.*) /admin/doit.html?sessionID=$1&command=$2&what=$3 [PT]
>
> This will rewrite requests without sending redirects back to the client.
> You can remove the '[PT]' if you don't need to further process the
> rewritten URL (e.g. through a PythonHandler).
>
> Obviously regular expressions are not as flexible as a Python
> handler can be, so this will only work for simple translations.  Also
> you'll need to have Apache compiled with mod_rewrite, I'm not sure if
> this is the default.
>
> Regards,
>
> Olly.
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python


From grisha at modpython.org  Mon Jan  7 19:10:39 2002
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:59:11 2004
Subject: [mod_python] TransHandler help?
In-Reply-To: <3C3A2CCA.88920E9F@xhaus.com>
Message-ID: <Pine.BSF.4.32.0201071910200.58948-100000@localhost>

I'll have look into this some day. I *think* what mod_rewrite does is
create a sub-request, but sub-requests are not supported by mod_python (i
don't think there is anything that makes it impossible, the code is simple
not there, it's just a SMOP ("simple matter of programming")...)

Grisha


On Mon, 7 Jan 2002, Alan Kennedy wrote:

> Thanks Olly,
>
> It's good to know that I'm not the only who can't get it to work :-\
>
> I've been avoiding relying on mod_rewrite and its "cool voodoo". I have the training and
> background to get my head around it, but members of my team unfortunately don't, whereas
> they are all very comfortable with python.......
>
> Thanks for the reply,
>
> Cheers,
>
> Alan.
>
> Oliver Cope wrote:
>
> > On Mon, Jan 07, 2002 at 07:32:10PM +0000, Alan Kennedy wrote:
> > >
> > > I'm trying to get a PythonTransHandler working.
> > >
> > <snip>
> >
> > > *without* sending a redirect back to the client. Or a more sophisticated
> > > example, how could I turn a request for
> > >
> > > /admin/abc1234/update/item4567
> > >
> > > into a request for
> > >
> > > /admin/doit.html?sessionID=abc1234&command=update&what=item4567
> > >
> > I too have spent some time trying to configure a PythonTransHandler, but
> > couldn't get it to work :o(
> >
> > I've had more luck using mod_rewrite for this kind of thing:
> >
> > RewriteEngine On
> > RewriteRule /admin/(.*)/(.*)/(.*) /admin/doit.html?sessionID=$1&command=$2&what=$3 [PT]
> >
> > This will rewrite requests without sending redirects back to the client.
> > You can remove the '[PT]' if you don't need to further process the
> > rewritten URL (e.g. through a PythonHandler).
> >
> > Obviously regular expressions are not as flexible as a Python
> > handler can be, so this will only work for simple translations.  Also
> > you'll need to have Apache compiled with mod_rewrite, I'm not sure if
> > this is the default.
> >
> > Regards,
> >
> > Olly.
> >
> > _______________________________________________
> > Mod_python mailing list
> > Mod_python@modpython.org
> > http://www.modpython.org/mailman/listinfo/mod_python
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From mengland at mengland.net  Mon Jan  7 19:43:01 2002
From: mengland at mengland.net (Matthew England)
Date: Fri Jan  9 21:59:11 2004
Subject: [mod_python] How to hide implementation specifics in URIs/URLs?
Message-ID: <5.1.0.14.0.20020107191928.02441230@mail.core.com>

I'd like to be able to eliminate any web-server implementation specifics in 
my URIs/URLs as per 
<http://www.w3.org/Provider/Style/URI.html>.  Specifically, I'd like to 
eliminate the references to ".py" in my mod_python-managed URIs.  What are 
my apache options to do this?

These references:

<http://www.apacheweek.com/features/negotiation>
<http://httpd.apache.org/docs/content-negotiation.html>

...seem to be more interested in client-side-decision of content 
negotiation.  while this concept is interesting, and i might use it in the 
future, i'm not interested in this now.  i simply want to hide the 
server-side implemenation from my web user.

here's the basic algorithm i'm looking to implement in apache:

for said URI <http://myexampledomain.org/tickets/reserve>,

i would like apache to look in the [...]/tickets/ directory for a reserve.* 
file.  if there exists a [...]/tickets/reserve.py file, then apache 
immediately throws this .py file at the python handlers.  if there are 
multiple matches, ie, multiple files with the same 'reserve' but with 
different extensions, i want apache to decide what to do with the 
'ambiguous' URI by looking at a prioritized list of "content managers," 
probably a list specified by me in httpd.conf.  for example, i envision 
these lines placed in httpd.conf (and this is completely theoretical syntax):

ContentManager call-the-python-handler .py
ContentManager call-the-php-handler .php .php3
ContentManager call-the-cgi-handler .cgi

The order here is important, for .py files will be displayed/"managed" 
prior to .php or other files.  In my theoretical behavioral httpd.conf 
prototype syntax, i would have all unspecified extensions behave as they 
seem to "out of the box"...ie, whatever makes 
<http://192.168.1.50/~mengland/calendar> and 
<http://192.168.1.50/~mengland/calendar.html> do the same thing in my 
opera.com browser (maybe it's the same mechanism that i describe above?).

Notice how all of this stuff is totally managed by the server and requires 
no client-side input from the browser.  As I mentioned before, i'm not 
trying to have the client-side browser give language or media 
directives.  My main purpose is to keep my URIs clean and stable so that my 
users (and therefore much of my web server itself) don't have to change 
their URLs if i switch to some other underlying technology implementation 
(say if i switched from python to php for any segments of the web server).


disclaimer:

I'm constructing a web-database server for ticket reservations and am new 
to mod_python...and most everything else devshed.com-type-stuff-related.  I 
find openbsd-postgresql-python-apache to be the most attractive combination 
that i see now (openbsd for security purposes)...but since I'm new to these 
technologies, i'm far from certain of things yet.  I therefore apologize 
for any "newbie annoyance," or for a duplicate question.


thanks in advance for any help,
-Matt


From rsalz at zolera.com  Mon Jan  7 21:08:15 2002
From: rsalz at zolera.com (Rich Salz)
Date: Fri Jan  9 21:59:11 2004
Subject: [mod_python] How to hide implementation specifics in URIs/URLs?
References: <5.1.0.14.0.20020107191928.02441230@mail.core.com>
Message-ID: <3C3A548F.7EDC3D6C@zolera.com>

> <http://www.w3.org/Provider/Style/URI.html>.  Specifically, I'd like to
> eliminate the references to ".py" in my mod_python-managed URIs.  What are
> my apache options to do this?

AddHandler python-program .py
DirectoryIndex index.py index.php index.html
-- 
Zolera Systems, Securing web services (XML, SOAP, Signatures,
Encryption)
http://www.zolera.com

From mengland at mengland.net  Mon Jan  7 20:40:47 2002
From: mengland at mengland.net (Matthew England)
Date: Fri Jan  9 21:59:12 2004
Subject: [mod_python] How to hide implementation specifics in
  URIs/URLs?
In-Reply-To: <3C3A548F.7EDC3D6C@zolera.com>
References: <5.1.0.14.0.20020107191928.02441230@mail.core.com>
Message-ID: <5.1.0.14.0.20020107203236.0243f0f8@mail.core.com>

At 1/7/2002 08:08 PM, Rich Salz wrote:
> > <http://www.w3.org/Provider/Style/URI.html>.  Specifically, I'd like to
> > eliminate the references to ".py" in my mod_python-managed URIs.  What are
> > my apache options to do this?
>
>AddHandler python-program .py
>DirectoryIndex index.py index.php index.html

Thanks for the quick response.  This appears to only work if i create a 
subdirectory with index.* files in it.  While this does get me one step 
closer to my goal, it doesn't get me all the way there.  Maybe I'll just 
have to deal with it?

To be a little more specific:

On my server, the URI:

   <http://192.168.1.50/tmp/mptest.py>

prints some arbitrary text in the browser display.

I wanted:

   <http://192.168.1.50/tmp/mptest>

(without the ".py") to do the same thing.  And I want this to work with any 
file in the web-server directory space (or any directory space that i want).

In order to get this to work with the above suggestion, i have to make a 
"mptest" subdirectory and copy mptest.py to mptest/index.py.  Not as 
convenient as i would like for the developers.  Furthermore, my user has to 
include a "/" at the end of the URI in order to ensure relative-link 
reference in the host/domain part of the URI (or at least, that seems to be 
the apparent behavior...something which i don't fully understand 
yet).  Otherwise without the trailing "/" i get a reverse-dns-lookup 
happening that replaces the host-domain part of the URI automatically (at 
least with my apache-server and opera-client).  This is undersire-able for 
my system.

-Matt


From rsalz at zolera.com  Mon Jan  7 22:50:17 2002
From: rsalz at zolera.com (Rich Salz)
Date: Fri Jan  9 21:59:12 2004
Subject: [mod_python] How to hide implementation specifics inURIs/URLs?
References: <5.1.0.14.0.20020107191928.02441230@mail.core.com> <5.1.0.14.0.20020107203236.0243f0f8@mail.core.com>
Message-ID: <3C3A6C79.8E07BE5F@zolera.com>

> On my server, the URI:
> 
>    <http://192.168.1.50/tmp/mptest.py>

Yes, it will require your users to create mptest/index.py et al.
The translation /path/to/dir/foo.py to /path/to/dir/foo/index.py should
be pretty easy for them to figure out, however. :)

> convenient as i would like for the developers.  Furthermore, my user has to
> include a "/" at the end of the URI in order to ensure relative-link

I do'nt think so.  If someone asks for /path/to/dir/foo, apache will
send a redirect, telling them to ask for /path/to/dir/foo/, which will
then kick in the index trick.
You can set the ServerName (or something like that) in httpd.conf to be
whatever you need/want.
	/r$
-- 
Zolera Systems, Securing web services (XML, SOAP, Signatures,
Encryption)
http://www.zolera.com

From grisha at modpython.org  Mon Jan  7 22:51:23 2002
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:59:12 2004
Subject: [mod_python] How to hide implementation specifics in  URIs/URLs?
In-Reply-To: <5.1.0.14.0.20020107203236.0243f0f8@mail.core.com>
Message-ID: <Pine.BSF.4.32.0201072250560.59147-100000@localhost>

Take a look at the Apache SetHandler directive, I think it does what you
need.

Grisha


On Mon, 7 Jan 2002, Matthew England wrote:

> At 1/7/2002 08:08 PM, Rich Salz wrote:
> > > <http://www.w3.org/Provider/Style/URI.html>.  Specifically, I'd like to
> > > eliminate the references to ".py" in my mod_python-managed URIs.  What are
> > > my apache options to do this?
> >
> >AddHandler python-program .py
> >DirectoryIndex index.py index.php index.html
>
> Thanks for the quick response.  This appears to only work if i create a
> subdirectory with index.* files in it.  While this does get me one step
> closer to my goal, it doesn't get me all the way there.  Maybe I'll just
> have to deal with it?
>
> To be a little more specific:
>
> On my server, the URI:
>
>    <http://192.168.1.50/tmp/mptest.py>
>
> prints some arbitrary text in the browser display.
>
> I wanted:
>
>    <http://192.168.1.50/tmp/mptest>
>
> (without the ".py") to do the same thing.  And I want this to work with any
> file in the web-server directory space (or any directory space that i want).
>
> In order to get this to work with the above suggestion, i have to make a
> "mptest" subdirectory and copy mptest.py to mptest/index.py.  Not as
> convenient as i would like for the developers.  Furthermore, my user has to
> include a "/" at the end of the URI in order to ensure relative-link
> reference in the host/domain part of the URI (or at least, that seems to be
> the apparent behavior...something which i don't fully understand
> yet).  Otherwise without the trailing "/" i get a reverse-dns-lookup
> happening that replaces the host-domain part of the URI automatically (at
> least with my apache-server and opera-client).  This is undersire-able for
> my system.
>
> -Matt
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From rsalz at zolera.com  Mon Jan  7 22:55:02 2002
From: rsalz at zolera.com (Rich Salz)
Date: Fri Jan  9 21:59:12 2004
Subject: [mod_python] How to hide implementation specifics inURIs/URLs?
References: <5.1.0.14.0.20020107191928.02441230@mail.core.com> <5.1.0.14.0.20020107203236.0243f0f8@mail.core.com> <3C3A6C79.8E07BE5F@zolera.com>
Message-ID: <3C3A6D96.C7FFF660@zolera.com>

> Yes, it will require your users to create mptest/index.py et al.

arrgh, typing too late.  your "programmers", not users.

> The translation /path/to/dir/foo.py to /path/to/dir/foo/index.py should
> be pretty easy for them to figure out, however. :)
> 
> > convenient as i would like for the developers.  Furthermore, my user has to
> > include a "/" at the end of the URI in order to ensure relative-link
> 
> I do'nt think so.  If someone asks for /path/to/dir/foo, apache will
> send a redirect, telling them to ask for /path/to/dir/foo/, which will
> then kick in the index trick.
> You can set the ServerName (or something like that) in httpd.conf to be
> whatever you need/want.
>         /r$

From mike at mikebell.org  Mon Jan  7 20:17:17 2002
From: mike at mikebell.org (Mike Bell)
Date: Fri Jan  9 21:59:12 2004
Subject: [mod_python] How to hide implementation specifics in URIs/URLs?
In-Reply-To: <5.1.0.14.0.20020107203236.0243f0f8@mail.core.com>; from mengland@mengland.net on Mon, Jan 07, 2002 at 08:40:47PM -0600
References: <5.1.0.14.0.20020107191928.02441230@mail.core.com> <3C3A548F.7EDC3D6C@zolera.com> <5.1.0.14.0.20020107203236.0243f0f8@mail.core.com>
Message-ID: <20020107201716.T2731@kryten.mikebell.org>

On Mon, Jan 07, 2002 at 08:40:47PM -0600, Matthew England wrote:
> Thanks for the quick response.  This appears to only work if i create a 
> subdirectory with index.* files in it.  While this does get me one step 
> closer to my goal, it doesn't get me all the way there.  Maybe I'll just 
> have to deal with it?
> 
> To be a little more specific:
> 
> On my server, the URI:
> 
>    <http://192.168.1.50/tmp/mptest.py>
> 
> prints some arbitrary text in the browser display.
> 
> I wanted:
> 
>    <http://192.168.1.50/tmp/mptest>

How about

<Location /tmp/mptest>
  Sethandler python-program
  PythonHandler mptest
</Location>

?

From mengland at mengland.net  Mon Jan  7 22:59:25 2002
From: mengland at mengland.net (Matthew England)
Date: Fri Jan  9 21:59:12 2004
Subject: [mod_python] How to hide implementation specifics in
  URIs/URLs?
In-Reply-To: <20020107201716.T2731@kryten.mikebell.org>
References: <5.1.0.14.0.20020107203236.0243f0f8@mail.core.com>
 <5.1.0.14.0.20020107191928.02441230@mail.core.com>
 <3C3A548F.7EDC3D6C@zolera.com>
 <5.1.0.14.0.20020107203236.0243f0f8@mail.core.com>
Message-ID: <5.1.0.14.0.20020107225708.02439e40@mail.core.com>

At 1/7/2002 10:17 PM, Mike Bell wrote:

>How about
>
><Location /tmp/mptest>
>   Sethandler python-program
>   PythonHandler mptest
></Location>
>
>?

Unless I'm missing something (and again remember i'm a newbie), this 
doesn't help me for other files in other directories.

I basically want any python script to be stripped of its .py extension in 
the URI that uses it.  Otherwise, as i see it, a web-server developer has 
to make an entry in httpd.conf for *every* .py file.  ouch.

-Matt


From grisha at modpython.org  Tue Jan  8 01:30:13 2002
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:59:12 2004
Subject: [mod_python] How to hide implementation specifics in  URIs/URLs?
In-Reply-To: <5.1.0.14.0.20020107225708.02439e40@mail.core.com>
Message-ID: <Pine.BSF.4.32.0201080127550.63527-100000@localhost>


I think simply adding

SetHandler python-program
PythonHandler mptest

at the DocumentRoot level would achieve that effect, but you better be
prepared to handle *every* request with modpython, which includes images,
html, etc.

Grisha


On Mon, 7 Jan 2002, Matthew England wrote:

> At 1/7/2002 10:17 PM, Mike Bell wrote:
>
> >How about
> >
> ><Location /tmp/mptest>
> >   Sethandler python-program
> >   PythonHandler mptest
> ></Location>
> >
> >?
>
> Unless I'm missing something (and again remember i'm a newbie), this
> doesn't help me for other files in other directories.
>
> I basically want any python script to be stripped of its .py extension in
> the URI that uses it.  Otherwise, as i see it, a web-server developer has
> to make an entry in httpd.conf for *every* .py file.  ouch.
>
> -Matt
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From neilb at nbt.co.za  Tue Jan  8 10:19:31 2002
From: neilb at nbt.co.za (Neil Beattie)
Date: Fri Jan  9 21:59:12 2004
Subject: [mod_python] Please Help
Message-ID: <NFBBKACIPKNFKAHLGHGBKEDADOAA.neilb@nbt.co.za>

Hi,
I'm am in a bit of trouble as I need to demo some code that used Python 2.2
I am using Python 2.2 and Apache 2.3.22 and Windows nt.
Is there anyone who could let me have a compiled dll.
I can change to Apache 2.3.20 if required.

I have tried compiling Mod_Python using C++ 5 but have had no success. Is it
possible?

Regards,
Neil.


From foofboy at speakeasy.net  Tue Jan  8 11:38:23 2002
From: foofboy at speakeasy.net (Robert Sherwood)
Date: Fri Jan  9 21:59:12 2004
Subject: [mod_python] TransHandler help?
In-Reply-To: <Pine.BSF.4.32.0201071910200.58948-100000@localhost>
References: <Pine.BSF.4.32.0201071910200.58948-100000@localhost>
Message-ID: <1010507904.19779.5.camel@lucifer>

Hi,

Transhandler translates a request from a URL to a filename. Though you
can rewrite a URL, I found it was easier simply to use the URL that I
had, particularly since, In my case, I could count on the argument order
and such.

This is an extremely simple example, but I wanted to set the file
request to main.py, which handled all the URL processing itself. The
important thing to remember is that the TransHandler figures out which
file you're requesting based on the URL you pass in. It can obviously do
any processing you need, but that is it's primary function.

from mod_python import apache
import string

def transhandler(req):
    #We want to use main.py
    req.filename = "main.py"
    return apache.OK

Again, I didn't use mod_python to process the URL, that is done by the
main Python Handler, as below (adapted slightly for your situation):

def handler(req):
    #remove trailing slash, if present
    URI = req.uri
    if URI[len(URI)-1] == '/':
        URI = URI[:len(URI)-1]

    #disassemble the URI for processing
    components = string.split(URI,'/')[1:]

    sessionID = components[0]

    command = components[1]

    what = components[2]

    # Do stuff here

There's no error checking or anything, but I found it was easier to use
the request as it came in, rather than rewriting it and processing that.
However, I had to use the TransHandler to set the request filename to
the script that did the processing.

Hope this helps.

Rob



On Mon, 2002-01-07 at 19:10, Gregory (Grisha) Trubetskoy wrote:
> 
> I'll have look into this some day. I *think* what mod_rewrite does is
> create a sub-request, but sub-requests are not supported by mod_python (i
> don't think there is anything that makes it impossible, the code is simple
> not there, it's just a SMOP ("simple matter of programming")...)
> 
> Grisha
> 
> 
> On Mon, 7 Jan 2002, Alan Kennedy wrote:
> 
> > Thanks Olly,
> >
> > It's good to know that I'm not the only who can't get it to work :-\
> >
> > I've been avoiding relying on mod_rewrite and its "cool voodoo". I have the training and
> > background to get my head around it, but members of my team unfortunately don't, whereas
> > they are all very comfortable with python.......
> >
> > Thanks for the reply,
> >
> > Cheers,
> >
> > Alan.
> >
> > Oliver Cope wrote:
> >
> > > On Mon, Jan 07, 2002 at 07:32:10PM +0000, Alan Kennedy wrote:
> > > >
> > > > I'm trying to get a PythonTransHandler working.
> > > >
> > > <snip>
> > >
> > > > *without* sending a redirect back to the client. Or a more sophisticated
> > > > example, how could I turn a request for
> > > >
> > > > /admin/abc1234/update/item4567
> > > >
> > > > into a request for
> > > >
> > > > /admin/doit.html?sessionID=abc1234&command=update&what=item4567
> > > >
> > > I too have spent some time trying to configure a PythonTransHandler, but
> > > couldn't get it to work :o(
> > >
> > > I've had more luck using mod_rewrite for this kind of thing:
> > >
> > > RewriteEngine On
> > > RewriteRule /admin/(.*)/(.*)/(.*) /admin/doit.html?sessionID=$1&command=$2&what=$3 [PT]
> > >
> > > This will rewrite requests without sending redirects back to the client.
> > > You can remove the '[PT]' if you don't need to further process the
> > > rewritten URL (e.g. through a PythonHandler).
> > >
> > > Obviously regular expressions are not as flexible as a Python
> > > handler can be, so this will only work for simple translations.  Also
> > > you'll need to have Apache compiled with mod_rewrite, I'm not sure if
> > > this is the default.
> > >
> > > Regards,
> > >
> > > Olly.
> > >
> > > _______________________________________________
> > > Mod_python mailing list
> > > Mod_python@modpython.org
> > > http://www.modpython.org/mailman/listinfo/mod_python
> >
> > _______________________________________________
> > Mod_python mailing list
> > Mod_python@modpython.org
> > http://www.modpython.org/mailman/listinfo/mod_python
> >
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 



From modpython at xhaus.com  Tue Jan  8 21:30:45 2002
From: modpython at xhaus.com (Alan Kennedy)
Date: Fri Jan  9 21:59:12 2004
Subject: [mod_python] TransHandler help?
References: <Pine.BSF.4.32.0201071910200.58948-100000@localhost> <1010507904.19779.5.camel@lucifer>
Message-ID: <3C3B6504.2AC7A3AD@xhaus.com>

Rob,

Bingo! That hit the nail square on the head, and drove it right home!

Excellent!

I obviously didn't read the documentation thoroughly enough. It states in section 5.1.3 about
PythonTransHandler:

"This routine gives allows for an opportunity to translate the URI into an actual *filename*" [my
emphasis].

That's filename, NOT uri. I mixed it up, and tried to modify the request URI, which is a
read-only attribute. Hence why I couldn't get it to work :*)

Many thanks for clearing this up. This means that I can forge ahead and rewrite URLs to contain
session IDs, without having to resort to "?sess=xyz" style query parameters.

Thanks again.

Alan.

Robert Sherwood wrote:

> Hi,
>
> Transhandler translates a request from a URL to a filename. Though you
> can rewrite a URL, I found it was easier simply to use the URL that I
> had, particularly since, In my case, I could count on the argument order
> and such.
>
> This is an extremely simple example, but I wanted to set the file
> request to main.py, which handled all the URL processing itself. The
> important thing to remember is that the TransHandler figures out which
> file you're requesting based on the URL you pass in. It can obviously do
> any processing you need, but that is it's primary function.
>
> from mod_python import apache
> import string
>
> def transhandler(req):
>     #We want to use main.py
>     req.filename = "main.py"
>     return apache.OK
>
> Again, I didn't use mod_python to process the URL, that is done by the
> main Python Handler, as below (adapted slightly for your situation):
>
> def handler(req):
>     #remove trailing slash, if present
>     URI = req.uri
>     if URI[len(URI)-1] == '/':
>         URI = URI[:len(URI)-1]
>
>     #disassemble the URI for processing
>     components = string.split(URI,'/')[1:]
>
>     sessionID = components[0]
>
>     command = components[1]
>
>     what = components[2]
>
>     # Do stuff here
>
> There's no error checking or anything, but I found it was easier to use
> the request as it came in, rather than rewriting it and processing that.
> However, I had to use the TransHandler to set the request filename to
> the script that did the processing.
>
> Hope this helps.
>
> Rob


From neilb at nbt.co.za  Wed Jan  9 22:59:28 2002
From: neilb at nbt.co.za (Neil Beattie)
Date: Fri Jan  9 21:59:12 2004
Subject: [mod_python] DLL for Windows
Message-ID: <NFBBKACIPKNFKAHLGHGBIEHODOAA.neilb@nbt.co.za>

Hi All,
I am desperately looking for a compiled dll for mod_python for Python 2.2
I can use Apache 3.20 or 3.22

I am a newbie at all things open source having decided to migrate my product
from VB last year.

I have been trying to compile mod_python using VC++ 5 but have not
succeeded.

Any help would be appreciated.

Neil




From neilb at nbt.co.za  Thu Jan 10 11:04:20 2002
From: neilb at nbt.co.za (Neil Beattie)
Date: Fri Jan  9 21:59:12 2004
Subject: [mod_python] DLL for Windows
In-Reply-To: <NFBBKACIPKNFKAHLGHGBIEHODOAA.neilb@nbt.co.za>
Message-ID: <NFBBKACIPKNFKAHLGHGBGEJJDOAA.neilb@nbt.co.za>

Ok I managed to compile a dll for Python 2.2 that works for me.
Anybody in the same position that I was in need it?
Neil.


> -----Original Message-----
> From: mod_python-admin@modpython.org
> [mailto:mod_python-admin@modpython.org]On Behalf Of Neil Beattie
> Sent: Wednesday, January 09, 2002 10:59 PM
> To: mod_python@modpython.org
> Subject: [mod_python] DLL for Windows
> 
> 
> Hi All,
> I am desperately looking for a compiled dll for mod_python for Python 2.2
> I can use Apache 1.3.20 or 3.22
> 
> I am a newbie at all things open source having decided to migrate 
> my product
> from VB last year.
> 
> I have been trying to compile mod_python using VC++ 5 but have not
> succeeded.
> 
> Any help would be appreciated.
> 
> Neil
> 
> 
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 

From jgardn at alumni.washington.edu  Thu Jan 10 21:58:28 2002
From: jgardn at alumni.washington.edu (Jonathan Gardner)
Date: Fri Jan  9 21:59:12 2004
Subject: [mod_python] Redirection with the Location Header and publisher handler
Message-ID: <200201101250.g0ACoIJ12496@my.knctv.co.kr>

I read through the documentation a few times. I am not sure how to do this.

What I want to do is to receive a hit to a function, and then have that 
function redirect the browser to another location.

For instance, I have a function that will present a form for adding an entry 
into a database. When the user hits "submit", I want to have the function 
that inserts the stuff into the db called, and then have it redirect the 
browser back to the original page with a status message of the sort "Row 
added" or "Cannot enter duplicate items in a unique column" or whatnot.

I know that there are two ways of doing this:

1) Sending some HTML that will redirect it to the appropriate location. This 
is a non-smooth solution.

2) Sending the Location header with the new location.

 (It's been a few months since I have done this, and I don't have the example 
code, plus it was done in mod_perl... this is three strikes against my 
memory. I could be wrong).

I've tried something like this: (Remember, I am using publisher as the 
handler)

def myfunc(req):
	req.headers_out['Location']="http://url/to/new/location"
	req.send_http_headers()
	return apache.OK

and I've tried a bunch of variations on this theme... but nothing seems to 
work write. Can someone give me a pointer or let me know where I'm confused?

Of course, I've read all the documentation, but nothing seems to help.

Jonathan



From foofboy at speakeasy.net  Thu Jan 10 11:31:42 2002
From: foofboy at speakeasy.net (Robert Sherwood)
Date: Fri Jan  9 21:59:12 2004
Subject: [mod_python] Redirection with the Location Header and publisher
	handler
In-Reply-To: <200201101250.g0ACoIJ12496@my.knctv.co.kr>
References: <200201101250.g0ACoIJ12496@my.knctv.co.kr>
Message-ID: <1010680303.3287.2.camel@lucifer>

I think you're looking for this:

req.content_type = 'text/html'
req.err_headers_out['Refresh'] = '3;http://usl/to/new/location'
#Redirect after 3 Seconds
req.send_http_header()
return apache.HTTP_MOVED_PERMANENTLY

Rob


On Thu, 2002-01-10 at 07:58, Jonathan Gardner wrote:
> I read through the documentation a few times. I am not sure how to do this.
> 
> What I want to do is to receive a hit to a function, and then have that 
> function redirect the browser to another location.
> 
> For instance, I have a function that will present a form for adding an entry 
> into a database. When the user hits "submit", I want to have the function 
> that inserts the stuff into the db called, and then have it redirect the 
> browser back to the original page with a status message of the sort "Row 
> added" or "Cannot enter duplicate items in a unique column" or whatnot.
> 
> I know that there are two ways of doing this:
> 
> 1) Sending some HTML that will redirect it to the appropriate location. This 
> is a non-smooth solution.
> 
> 2) Sending the Location header with the new location.
> 
>  (It's been a few months since I have done this, and I don't have the example 
> code, plus it was done in mod_perl... this is three strikes against my 
> memory. I could be wrong).
> 
> I've tried something like this: (Remember, I am using publisher as the 
> handler)
> 
> def myfunc(req):
> 	req.headers_out['Location']="http://url/to/new/location"
> 	req.send_http_headers()
> 	return apache.OK
> 
> and I've tried a bunch of variations on this theme... but nothing seems to 
> work write. Can someone give me a pointer or let me know where I'm confused?
> 
> Of course, I've read all the documentation, but nothing seems to help.
> 
> Jonathan
> 
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 



From sep27 at cornell.edu  Thu Jan 10 12:04:56 2002
From: sep27 at cornell.edu (S.Plake)
Date: Fri Jan  9 21:59:12 2004
Subject: [mod_python] (no subject)
Message-ID: <5.1.0.14.2.20020110120439.00b0a920@postoffice.mail.cornell.edu>

I need to search for a string in an html page and add code at a particular
line. This can be done online or off-line. I am having a problem searching
or the string. Can someone help? Thanks


From cl at scriptall.com  Thu Jan 10 14:33:55 2002
From: cl at scriptall.com (Chuck Lima)
Date: Fri Jan  9 21:59:12 2004
Subject: [mod_python] apache.py
Message-ID: <1010691235.1974.24.camel@px101>

Hello,

I may be a little late to the game on this one, but here goes.

python 2.1
apache 1.3.22
mod_python 2.7.6

Lines 356 and 359 of apache.py were hacking off the "y" from my modules
i.e.: "mymodule.py"  was not found because apache.py was looking for
"mymodule.p".  It seems the intention was to avoid loading compiled
modules.  mod_pyton has never compiled my modules -- is this not
standard?


Changes I made - -

original 356:
if os.path.exists(filepath[:-1]) :

new 356:
if os.path.exists(filepath) :

Also, "filepath[:-1]" on line 359 was changed to "filepath".

This seems to have solved the problem without adversely affecting the
running of my scripts.


The really odd thing, though; is that I've got another system running
the (practically) same setup with no mods.  The difference being the
apache version.

no mods here:
python 2.1
apache 1.3.19
mod_python 2.7.6

Comments, please.

Thanks,
-Chuck


From grisha at modpython.org  Thu Jan 10 15:59:10 2002
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:59:12 2004
Subject: [mod_python] Redirection with the Location Header and publisher
 handler
In-Reply-To: <200201101250.g0ACoIJ12496@my.knctv.co.kr>
Message-ID: <Pine.BSF.4.32.0201101556070.34235-100000@localhost>


if you're using the publisher, then something like this should work:

def myfunc(req):
 	req.headers_out['Location']="http://blah/blah"
	req.status = apache.HTTP_MOVED_TEMPORARILY
 	return 'You are being redirected to a <a href="http://blah/blah"> new location</a>'


On Thu, 10 Jan 2002, Jonathan Gardner wrote:

> def myfunc(req):
> 	req.headers_out['Location']="http://url/to/new/location"
> 	req.send_http_headers()
> 	return apache.OK



From grisha at modpython.org  Thu Jan 10 16:01:02 2002
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:59:12 2004
Subject: [mod_python] apache.py
In-Reply-To: <1010691235.1974.24.camel@px101>
Message-ID: <Pine.BSF.4.32.0201101600400.34235-100000@localhost>

http://www.modpython.org/FAQ/faqw.py?req=all#2.3

On 10 Jan 2002, Chuck Lima wrote:

> Hello,
>
> I may be a little late to the game on this one, but here goes.
>
> python 2.1
> apache 1.3.22
> mod_python 2.7.6
>
> Lines 356 and 359 of apache.py were hacking off the "y" from my modules
> i.e.: "mymodule.py"  was not found because apache.py was looking for
> "mymodule.p".  It seems the intention was to avoid loading compiled
> modules.  mod_pyton has never compiled my modules -- is this not
> standard?
>
>
> Changes I made - -
>
> original 356:
> if os.path.exists(filepath[:-1]) :
>
> new 356:
> if os.path.exists(filepath) :
>
> Also, "filepath[:-1]" on line 359 was changed to "filepath".
>
> This seems to have solved the problem without adversely affecting the
> running of my scripts.
>
>
> The really odd thing, though; is that I've got another system running
> the (practically) same setup with no mods.  The difference being the
> apache version.
>
> no mods here:
> python 2.1
> apache 1.3.19
> mod_python 2.7.6
>
> Comments, please.
>
> Thanks,
> -Chuck
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From jgardn at alumni.washington.edu  Fri Jan 11 07:02:12 2002
From: jgardn at alumni.washington.edu (Jonathan Gardner)
Date: Fri Jan  9 21:59:12 2004
Subject: [mod_python] Redirection with the Location Header and publisher handler
In-Reply-To: <Pine.BSF.4.32.0201101556070.34235-100000@localhost>
References: <Pine.BSF.4.32.0201101556070.34235-100000@localhost>
Message-ID: <200201102153.g0ALrlJ09318@my.knctv.co.kr>

On Friday 11 January 2002 05:59 am, Gregory (Grisha) Trubetskoy wrote:
> if you're using the publisher, then something like this should work:
>
> def myfunc(req):
>  	req.headers_out['Location']="http://blah/blah"
> 	req.status = apache.HTTP_MOVED_TEMPORARILY
>  	return 'You are being redirected to a <a href="http://blah/blah"> new
> location</a>'
>

1) There's a status attribute? =) I think this should be added to the 
documentation.

2) I have scoured the 'net for a good explanation of the HTTP error codes, to 
no avail.

It looks like you are saying HTTP_MOVED_TEMPORARILY means "Dear browser, I 
want you to go to this new place instead of here. But next time you get a 
link here, come straight here without delay, do not pass go, and do not 
collect $200."

Conversely, HTTP_MOVED_PERMANENTLY might mean, "Dear browser, how many times 
have I got to tell you you won't find anything here! Stop looking here, go to 
this other place to find what you are looking for."

What is HTTP_TEMPORARY_REDIRECT for? Does it mean the same as 
HTTP_MOVED_TEMPORARILY?

Jonathan

From tree at basistech.com  Thu Jan 10 17:07:50 2002
From: tree at basistech.com (Tom Emerson)
Date: Fri Jan  9 21:59:12 2004
Subject: [mod_python] Redirection with the Location Header and publisher handler
In-Reply-To: <200201102153.g0ALrlJ09318@my.knctv.co.kr>
References: <Pine.BSF.4.32.0201101556070.34235-100000@localhost>
	<200201102153.g0ALrlJ09318@my.knctv.co.kr>
Message-ID: <15422.4278.657220.93787@magrathea.basistech.com>

Jonathan Gardner writes:
[...]
> 2) I have scoured the 'net for a good explanation of the HTTP error codes, to 
> no avail.

Section 10 of RFC 2616 (HTTP 1.1) describes the HTTP result codes in
great detail, describing the behavior of a conforming
implementation. Section 10.3 covers redirection.

    -tree

-- 
Tom Emerson                                          Basis Technology Corp.
Sr. Computational Linguist                         http://www.basistech.com
  "Beware the lollipop of mediocrity: lick it once and you suck forever"

From jgardn at alumni.washington.edu  Fri Jan 11 07:14:33 2002
From: jgardn at alumni.washington.edu (Jonathan Gardner)
Date: Fri Jan  9 21:59:12 2004
Subject: [mod_python] Patch - **args with Publisher
Message-ID: <200201102206.g0AM68J09472@my.knctv.co.kr>

I expected to be able to get all the script args with a piece of code like 
this:

def scriptname(req, **args):
	...

but instead I got none of them at all.

Here is the patch that does what I expect. If I need to submit this 
differently, let me know.

*** publisher.py	Mon Jul  9 21:54:40 2001
--- /usr/local/lib/python2.0/site-packages/mod_python/publisher.py	Fri Jan 11 
07:08:51 2002
***************
*** 150,155 ****
--- 150,157 ----
          # and for that we need to get a list of them. There
          # are a few options for callable objects here:
  
+         # Whether or not there is a **args argument in the function list.
+         has_keyarg = 0
          if str(type(object)) == "<type 'instance'>":
              # instances are callable when they have __call__()
              object = object.__call__
***************
*** 158,172 ****
              # function
              fc = object.func_code
              expected = fc.co_varnames[0:fc.co_argcount]
          elif hasattr(object, 'im_func'):
              # method
              fc = object.im_func.func_code
              expected = fc.co_varnames[1:fc.co_argcount]
  
          # remove unexpected args
!         for name in args.keys():
!             if name not in expected:
!                 del args[name]
  
          result = apply(object, (), args)
  
--- 160,177 ----
              # function
              fc = object.func_code
              expected = fc.co_varnames[0:fc.co_argcount]
+             has_keyarg = fc.co_flags & 0x08
          elif hasattr(object, 'im_func'):
              # method
              fc = object.im_func.func_code
              expected = fc.co_varnames[1:fc.co_argcount]
+             has_keyarg = fc.co_flags & 0x08
  
          # remove unexpected args
!         if not has_keyarg:
!             for name in args.keys():
!                 if name not in expected:
!                     del args[name]
  
          result = apply(object, (), args)

From jgardn at alumni.washington.edu  Fri Jan 11 07:26:18 2002
From: jgardn at alumni.washington.edu (Jonathan Gardner)
Date: Fri Jan  9 21:59:12 2004
Subject: [mod_python] Redirection with the Location Header and publisher handler
In-Reply-To: <15422.4278.657220.93787@magrathea.basistech.com>
References: <Pine.BSF.4.32.0201101556070.34235-100000@localhost> <200201102153.g0ALrlJ09318@my.knctv.co.kr> <15422.4278.657220.93787@magrathea.basistech.com>
Message-ID: <200201102217.g0AMHqJ09593@my.knctv.co.kr>

On Friday 11 January 2002 07:07 am, you wrote:
> Jonathan Gardner writes:
> [...]
>
> > 2) I have scoured the 'net for a good explanation of the HTTP error
> > codes, to no avail.
>
> Section 10 of RFC 2616 (HTTP 1.1) describes the HTTP result codes in
> great detail, describing the behavior of a conforming
> implementation. Section 10.3 covers redirection.
>
>     -tree

I know it probably sounds like you're speaking with an idiot, but you have no 
idea how much that has helped. 

Where can I find a listing of all these RFC's and what they stand for?

Thanks a million, literally!

Jonathan

From tree at basistech.com  Thu Jan 10 17:35:35 2002
From: tree at basistech.com (Tom Emerson)
Date: Fri Jan  9 21:59:12 2004
Subject: [mod_python] Redirection with the Location Header and publisher handler
In-Reply-To: <200201102217.g0AMHqJ09593@my.knctv.co.kr>
References: <Pine.BSF.4.32.0201101556070.34235-100000@localhost>
	<200201102153.g0ALrlJ09318@my.knctv.co.kr>
	<15422.4278.657220.93787@magrathea.basistech.com>
	<200201102217.g0AMHqJ09593@my.knctv.co.kr>
Message-ID: <15422.5943.969913.409274@magrathea.basistech.com>

Jonathan Gardner writes:
[...]
> I know it probably sounds like you're speaking with an idiot, but you have no 
> idea how much that has helped. 

I'm glad I could be of assistance.

> Where can I find a listing of all these RFC's and what they stand for?

Try <http://www.ietf.org/rfc.html> : you can retrieve by number of
view the index which includes titles.

For web-related technology, the first place I would look, however, is
the W3C's website, <http://www.w3.org/>. In particular you can find a
lot of information on HTTP and its related technology at

<http://www.w3.org/Protocols/>

including references to the RFC I mentioned.

    -tree

-- 
Tom Emerson                                          Basis Technology Corp.
Sr. Computational Linguist                         http://www.basistech.com
  "Beware the lollipop of mediocrity: lick it once and you suck forever"

From grisha at modpython.org  Thu Jan 10 17:59:45 2002
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:59:12 2004
Subject: [mod_python] Redirection with the Location Header and publisher
 handler
In-Reply-To: <200201102153.g0ALrlJ09318@my.knctv.co.kr>
Message-ID: <Pine.BSF.4.32.0201101735430.34235-100000@localhost>


On Fri, 11 Jan 2002, Jonathan Gardner wrote:

> 1) There's a status attribute? =) I think this should be added to the
> documentation.

Yes, somehow it slipped in the documentation, but the FAQ entry regarding
redirection shows it.

> 2) I have scoured the 'net for a good explanation of the HTTP error codes, to
> no avail.

Check out RFC2616 http://www.w3.org/Protocols/rfc2616/rfc2616.txt

I don't know what the difference between 302 and 307 is. If you look at
the (older) RFC2068, 302 used to be called "moved temporarily", and with
RFC2616 it became "found"  and a new code 307 "temporary redirect" was
introduced which seems to be functionally equivalent to 302 (the text is
word for word the same).

Here is a link I found that talks about this stuff
http://ppewww.ph.gla.ac.uk/~flavell/www/post-redirect.html

For all practical purposes I would use 302 - I suspect 307 is not
supported on many older browsers.

Grisha


From grisha at modpython.org  Thu Jan 10 18:01:22 2002
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:59:12 2004
Subject: [mod_python] Patch - **args with Publisher
In-Reply-To: <200201102206.g0AM68J09472@my.knctv.co.kr>
Message-ID: <Pine.BSF.4.32.0201101800280.34235-100000@localhost>

Thanks - someone already submitted a patch for this and version 3 will
behave this way.

On Fri, 11 Jan 2002, Jonathan Gardner wrote:

> I expected to be able to get all the script args with a piece of code like
> this:
>
> def scriptname(req, **args):
> 	...
>
> but instead I got none of them at all.
>
> Here is the patch that does what I expect. If I need to submit this
> differently, let me know.
>
> *** publisher.py	Mon Jul  9 21:54:40 2001
> --- /usr/local/lib/python2.0/site-packages/mod_python/publisher.py	Fri Jan 11
> 07:08:51 2002
> ***************
> *** 150,155 ****
> --- 150,157 ----
>           # and for that we need to get a list of them. There
>           # are a few options for callable objects here:
>
> +         # Whether or not there is a **args argument in the function list.
> +         has_keyarg = 0
>           if str(type(object)) == "<type 'instance'>":
>               # instances are callable when they have __call__()
>               object = object.__call__
> ***************
> *** 158,172 ****
>               # function
>               fc = object.func_code
>               expected = fc.co_varnames[0:fc.co_argcount]
>           elif hasattr(object, 'im_func'):
>               # method
>               fc = object.im_func.func_code
>               expected = fc.co_varnames[1:fc.co_argcount]
>
>           # remove unexpected args
> !         for name in args.keys():
> !             if name not in expected:
> !                 del args[name]
>
>           result = apply(object, (), args)
>
> --- 160,177 ----
>               # function
>               fc = object.func_code
>               expected = fc.co_varnames[0:fc.co_argcount]
> +             has_keyarg = fc.co_flags & 0x08
>           elif hasattr(object, 'im_func'):
>               # method
>               fc = object.im_func.func_code
>               expected = fc.co_varnames[1:fc.co_argcount]
> +             has_keyarg = fc.co_flags & 0x08
>
>           # remove unexpected args
> !         if not has_keyarg:
> !             for name in args.keys():
> !                 if name not in expected:
> !                     del args[name]
>
>           result = apply(object, (), args)
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From cl at scriptall.com  Thu Jan 10 18:02:21 2002
From: cl at scriptall.com (Chuck Lima)
Date: Fri Jan  9 21:59:12 2004
Subject: [mod_python] apache.py
In-Reply-To: <3C3E0CF4.5020206@city.dk>
References: <1010691235.1974.24.camel@px101>  <3C3E0CF4.5020206@city.dk>
Message-ID: <1010703742.2071.2.camel@px101>

Thanks, will do.


On Thu, 2002-01-10 at 16:51, Ole Hansen wrote:
> Hi,
> 
> I had the very same problem, and for a while I thought I was the only 
> one in the universe. I also made similar hack.
> 
> This is a bug in python itself. The bug was introduced somewhere between 
> Python 2.0 and 2.1.1 and fixed in Python 2.2b3, but Python 2.2 (final) 
> has been released now, so I would go for the final Python 2.2.
> 
> Happy coding :-)
> 
> Br,
> Ole Hansen
> 
> 
> 
> Chuck Lima wrote:
> 
> > Hello,
> > 
> > I may be a little late to the game on this one, but here goes.
> > 
> > python 2.1
> > apache 1.3.22
> > mod_python 2.7.6
> > 
> > Lines 356 and 359 of apache.py were hacking off the "y" from my modules
> > i.e.: "mymodule.py"  was not found because apache.py was looking for
> > "mymodule.p".  It seems the intention was to avoid loading compiled
> > modules.  mod_pyton has never compiled my modules -- is this not
> > standard?
> > 
> > 
> > Changes I made - -
> > 
> > original 356:
> > if os.path.exists(filepath[:-1]) :
> > 
> > new 356:
> > if os.path.exists(filepath) :
> > 
> > Also, "filepath[:-1]" on line 359 was changed to "filepath".
> > 
> > This seems to have solved the problem without adversely affecting the
> > running of my scripts.
> > 
> > 
> > The really odd thing, though; is that I've got another system running
> > the (practically) same setup with no mods.  The difference being the
> > apache version.
> > 
> > no mods here:
> > python 2.1
> > apache 1.3.19
> > mod_python 2.7.6
> > 
> > Comments, please.
> > 
> > Thanks,
> > -Chuck
> > 
> > _______________________________________________
> > Mod_python mailing list
> > Mod_python@modpython.org
> > http://www.modpython.org/mailman/listinfo/mod_python
> > 
> > .
> > 
> > 
> 
> 
> 
> 



From oliver at redgecko.org  Thu Jan 10 23:12:46 2002
From: oliver at redgecko.org (Oliver Cope)
Date: Fri Jan  9 21:59:12 2004
Subject: [mod_python] Redirection with the Location Header and publisher handler
In-Reply-To: <200201102217.g0AMHqJ09593@my.knctv.co.kr>
References: <Pine.BSF.4.32.0201101556070.34235-100000@localhost> <200201102153.g0ALrlJ09318@my.knctv.co.kr> <15422.4278.657220.93787@magrathea.basistech.com> <200201102217.g0AMHqJ09593@my.knctv.co.kr>
Message-ID: <20020110231246.GA23053@canoodle.redgecko.org>

On Fri, Jan 11, 2002 at 07:26:18AM +0900, Jonathan Gardner wrote:
> >
> > Section 10 of RFC 2616 (HTTP 1.1) describes the HTTP result codes in
> > great detail, describing the behavior of a conforming
> > implementation. Section 10.3 covers redirection.
> >
> >     -tree
> 
> Where can I find a listing of all these RFC's and what they stand for?
> 
http://rfc.net/

The RFC mentioned above may be found at http://rfc.net/rfc2616.html

Olly.


From lbergman at abi.tconline.net  Fri Jan 11 09:05:17 2002
From: lbergman at abi.tconline.net (Lewis Bergman)
Date: Fri Jan  9 21:59:12 2004
Subject: [mod_python] error on make install
Message-ID: <200201111505.g0BF5Hb32618@lewis.abi.tconline.net>

I have searched the recent archives and I haven't seen anyone else with this 
problem. I therefore assume I have done something stupid. This is my first 
attempt at mod_python and I am new to python as well.

Background:
Python 2.2 , configured --with-threads=no
mod_python 2.7.6
Apache 1.3.22-2 , (rpm)
Apache-devel 1.3.22-2 , (rpm) for apxs

My configure line looks like this:
./configure --with-apxs=/usr/sbin/apxs --with-python=/root/tar/Python-2.2
no errors here.
I do a make and get no errors.

On make install I get this:
python /usr/local/lib/python2.2/compileall.py 
/usr/local/lib/python2.2/site-packages/mod_python
Traceback (innermost last):
  File "/usr/local/lib/python2.2/compileall.py", line 147, in ?
    exit_status = not main()
  File "/usr/local/lib/python2.2/compileall.py", line 104, in main
    import getopt
  File "/usr/local/lib/python2.2/getopt.py", line 101
    possibilities = [o for o in longopts if o.startswith(opt)]
                                   ^
SyntaxError: invalid syntax
make[2]: *** [install_py_lib] Error 1
make[2]: Leaving directory `/root/tar/mod_python-2.7.6'
make[1]: *** [install_dso] Error 2
make[1]: Leaving directory `/root/tar/mod_python-2.7.6'
make: *** [install] Error 2

Does anyone have a clue as to what I have (or have not) done?
It says syntax error but no-one else seems to be having difficulty. Any help 
is greatly appreciated.
-- 
Lewis Bergman
Texas Communications
4309 Maple St.
Abilene, TX 79602-8044
915-695-6962 ext 115

From jgardn at alumni.washington.edu  Sat Jan 12 12:37:03 2002
From: jgardn at alumni.washington.edu (Jonathan Gardner)
Date: Fri Jan  9 21:59:12 2004
Subject: [mod_python] Redirection with the Location Header and publisher handler
In-Reply-To: <1010680303.3287.2.camel@lucifer>
References: <200201101250.g0ACoIJ12496@my.knctv.co.kr> <1010680303.3287.2.camel@lucifer>
Message-ID: <200201120330.g0C3SBJ22837@my.knctv.co.kr>

On Friday 11 January 2002 01:31 am, Robert Sherwood wrote:
> I think you're looking for this:
>
> req.content_type = 'text/html'
> req.err_headers_out['Refresh'] = '3;http://usl/to/new/location'
> #Redirect after 3 Seconds
> req.send_http_header()
> return apache.HTTP_MOVED_PERMANENTLY
>
> Rob

It wasn't what I was looking for, and it doesn't quite work right.

I can't seem to get the Refresh header to behave properly with the default 
setting of Apache. However, this works wonderfully:

req.headers_out['Location'] = "http://www.google.com/"
return apache.HTTP_MOVED_PERMANENTLY

Of course, you can use HTTP_MOVED_TEMPORARILY or HTTP_TEMPORARY_REDIRECT is 
you like.

Jonathan

From foofboy at speakeasy.net  Sat Jan 12 12:38:04 2002
From: foofboy at speakeasy.net (Robert Sherwood)
Date: Fri Jan  9 21:59:12 2004
Subject: [mod_python] Redirection with the Location Header and publisher
	handler
In-Reply-To: <200201120330.g0C3SBJ22837@my.knctv.co.kr>
References: <200201101250.g0ACoIJ12496@my.knctv.co.kr>
	<1010680303.3287.2.camel@lucifer> 
	<200201120330.g0C3SBJ22837@my.knctv.co.kr>
Message-ID: <1010857085.6132.2.camel@lucifer>

Okay, now I'm confused. I didn't think that the configuration of the
webserver would have any effect on this. It should be one hundred
percent dependent on the browser. Looks like I have some reading to do.

Rob

On Fri, 2002-01-11 at 22:37, Jonathan Gardner wrote:
> On Friday 11 January 2002 01:31 am, Robert Sherwood wrote:
> > I think you're looking for this:
> >
> > req.content_type = 'text/html'
> > req.err_headers_out['Refresh'] = '3;http://usl/to/new/location'
> > #Redirect after 3 Seconds
> > req.send_http_header()
> > return apache.HTTP_MOVED_PERMANENTLY
> >
> > Rob
> 
> It wasn't what I was looking for, and it doesn't quite work right.
> 
> I can't seem to get the Refresh header to behave properly with the default 
> setting of Apache. However, this works wonderfully:
> 
> req.headers_out['Location'] = "http://www.google.com/"
> return apache.HTTP_MOVED_PERMANENTLY
> 
> Of course, you can use HTTP_MOVED_TEMPORARILY or HTTP_TEMPORARY_REDIRECT is 
> you like.
> 
> Jonathan
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 



From modpython at xhaus.com  Sun Jan 13 23:05:18 2002
From: modpython at xhaus.com (Alan Kennedy)
Date: Fri Jan  9 21:59:12 2004
Subject: [mod_python] HTTP compression.
Message-ID: <3C4212AE.47644F9E@xhaus.com>

Greetings all,

If anyone is interested, I've put together a page about compressing
content over HTTP with gzip, to minimise bandwidth usage. You can read
the page at

http://www.iol.ie/~alank/python/httpcomp.html

There is some sample mod_python code on the page.

Regards,

Alan.



From jfk at informaticon.dk  Mon Jan 14 09:36:15 2002
From: jfk at informaticon.dk (=?iso-8859-1?q?J=F8rgen=20Fr=F8jk=20Kj=E6rsgaard?=)
Date: Fri Jan  9 21:59:13 2004
Subject: [mod_python] Re: HTTP compression.
In-Reply-To: <3C4212AE.47644F9E@xhaus.com>
References: <3C4212AE.47644F9E@xhaus.com>
Message-ID: <02011409361500.01463@adele>

Mandag 14. Januar 2002 00:05 skrev du:
> Greetings all,
>
> If anyone is interested, I've put together a page about compressing
> content over HTTP with gzip, to minimise bandwidth usage. You can read
> the page at
>
> http://www.iol.ie/~alank/python/httpcomp.html
>
> There is some sample mod_python code on the page.

An alternative to this scheme is to use mod_gzip 
(http://www.remotecommunications.com/apache/mod_gzip/). This module is 
capable of compressing any HTTP data, static as well as dynamically 
generated. I use it successfully e.g. on the mod_python based site 
www.get2stamps.com. The gzip compression reduces the transfer time for tables 
with much similar data by more than 80%!

regards, J?rgen

-- 
J?rgen Fr?jk Kj?rsgaard, Systemkonsulent (Systems Consultant)
Informaticon ApS * Web: www.informaticon.dk * Tlf: +45 8672 0093
Internetkataloger * Dataindsamling * Specialudvikling * Systemarbejde

From thegreengrinch at operamail.com  Mon Jan 14 02:10:38 2002
From: thegreengrinch at operamail.com (Eric Mangold)
Date: Fri Jan  9 21:59:13 2004
Subject: [mod_python] Compilation problem.
Message-ID: <001301c19ce3$b74a65a0$050a010a@ericxp>

I'm attempting to compile mod_python 3, under Linux, glibc2.2, with apache
2.0.28 and python2.2 final. apache is compiled and installed under
/usr/local/apache. python is compiled and installed under /usr. my configure
line is as follows:

# CFLAGS="-O6 -march=i686 -ffast-math"
./configure --with-apxs=/usr/local/apache/bin/apxs

and i try to make it as follows:

# make dso
make[1]: Entering directory `/download/mod_python3/src'
gcc  -I/download/mod_python3/src/include -I/usr/local/apache/include -I/usr/
include/python2.2    -c -o mod_python.o mod_python.c
mod_python.c: In function `python_filter':
mod_python.c:1019: warning: passing arg 4 of `ap_get_brigade' from
incompatible pointer type
mod_python.c: In function `directive_PythonInputFilter':
mod_python.c:1479: warning: passing arg 2 of `ap_register_input_filter' from
incompatible pointer type
gcc  -I/download/mod_python3/src/include -I/usr/local/apache/include -I/usr/
include/python2.2    -c -o _apachemodule.o _apachemodule.c
gcc  -I/download/mod_python3/src/include -I/usr/local/apache/include -I/usr/
include/python2.2    -c -o requestobject.o requestobject.c
requestobject.c:916: structure has no member named `content_language'
requestobject.c:916: initializer element is not constant
requestobject.c:916: (near initialization for
`request_memberlist[41].offset')
requestobject.c:1015: parse error before `u'
requestobject.c: In function `tuple_from_parsed_uri':
requestobject.c:1021: `u' undeclared (first use in this function)
requestobject.c:1021: (Each undeclared identifier is reported only once
requestobject.c:1021: for each function it appears in.)
make[1]: *** [requestobject.o] Error 1
make[1]: Leaving directory `/download/mod_python3/src'
make: *** [do_dso] Error 2

python is compiled without thread support, however, apache is compiled with
the 'worker' MPM, if that means anything.


From ray_drew at yahoo.co.uk  Mon Jan 14 18:04:19 2002
From: ray_drew at yahoo.co.uk (Ray Drew)
Date: Fri Jan  9 21:59:13 2004
Subject: [mod_python] DLL for Windows
References: <NFBBKACIPKNFKAHLGHGBIEJLDOAA.neilb@nbt.co.za>
Message-ID: <015a01c19d25$e436c530$df13000a@RDREWXP>

----- Original Message -----
From: "Neil Beattie" <neilb@nbt.co.za>
To: "Ray Drew" <ray_drew@yahoo.co.uk>
Sent: Thursday, January 10, 2002 10:11 AM
Subject: RE: [mod_python] DLL for Windows


> Hi Ray,
> I compiled it against apache 1.3.22 but have tested it on a machine that
is
> running 1.3.20
> Hope it works for you!
> Neil.
>
>

Neil,

Yes this works for me on Apache 1.3.22.

Thanks very much,

Ray




_________________________________________________________
Do You Yahoo!?
Get your free @yahoo.com address at http://mail.yahoo.com


From roman at it-ukraine.com  Tue Jan 15 13:03:57 2002
From: roman at it-ukraine.com (Roman V Moroz)
Date: Fri Jan  9 21:59:13 2004
Subject: [mod_python] mod_python per VirtualHost
Message-ID: <200201151104.g0FB3v785297@violator.zp.ua>

Hi!

Is there possibility to turn on/off mod_python per-VirtualHost?
How to do this if possible?  

Thanx,
--------------------------------------------------------------
Roman V Moroz                   IT-Ukraine ltd
System Administrator
NIC-HDL: VIO13-RIPE             Zaporozhye,   Ukraine
http://www.moroz.zp.ua		http://www.it-ukraine.com


From rsherwood at cryptoknights.com  Wed Jan 16 12:30:22 2002
From: rsherwood at cryptoknights.com (Robert Sherwood)
Date: Fri Jan  9 21:59:13 2004
Subject: [mod_python] Python Path
Message-ID: <1011202223.14792.17.camel@lucifer>

Greetings all:

Someone is going to kick me, but I know I'm overlooking something
obvious and I was hoping one of you could spot it.

I am trying to have my main PythonHandler import a module that is below
it in the directory tree. Here is the basic information:

=========================================================

0. mod_python 2.7.6 running on debian unstable, using python-2.1.1

1. Scripts located in and below "/var/python"

2. mod_python listening on an apache VirtualHost

3. Config file as follows:
  Listen 8080
  <VirtualHost beelzebub:8080>
    DocumentRoot /var/python
    PythonPath "['/var/python/'] + sys.path"
    PythonDebug On
    PythonAutoReload On
    SetHandler python-program
    PythonTransHandler trans
    PythonHandler main
  </VirtualHost>

4. Python handler main failing at this directive:

  File "/var/python/main.py", line 3, in ?
     import browse.listArtists

  ImportError: No module named browse.listArtists

5. ls -F /var/python

admin/	 data/	  main.pyc  objects/	 playlists/    template/  trans.pyc 
browse/  main.py  mod_mp3/  parseRDF.py  preferences/  trans.py

6. ls -F /var/python/browse

__init__.py  listArtistAlbumSongs.py  listArtistAlbums.py 
listArtists.py

========================================================

I can't figure it out. It is as if the PythonPath directive were not
being inherited by the interpreter running main.py. Is this a bug, or am
I stupid?

Or both :)

Thanks in advance for any help anyone can offer.

Robert Sherwood


From modpython at xhaus.com  Wed Jan 16 20:09:17 2002
From: modpython at xhaus.com (Alan Kennedy)
Date: Fri Jan  9 21:59:13 2004
Subject: [mod_python] Python Path
References: <1011202223.14792.17.camel@lucifer>
Message-ID: <3C45DDEC.7FCAA7B@xhaus.com>

Rob,

I'm not sure if this will solve your problem, but have you tried placing an
__init__.py in the /var/python directory. With content like this

__all__ = ['browse']

To setup the "browse" package.

Just a suggestion,

Alan.

Robert Sherwood wrote:

> Greetings all:
>
> Someone is going to kick me, but I know I'm overlooking something
> obvious and I was hoping one of you could spot it.
>
> I am trying to have my main PythonHandler import a module that is below
> it in the directory tree. Here is the basic information:
>
> =========================================================
>
> 0. mod_python 2.7.6 running on debian unstable, using python-2.1.1
>
> 1. Scripts located in and below "/var/python"
>
> 2. mod_python listening on an apache VirtualHost
>
> 3. Config file as follows:
>   Listen 8080
>   <VirtualHost beelzebub:8080>
>     DocumentRoot /var/python
>     PythonPath "['/var/python/'] + sys.path"
>     PythonDebug On
>     PythonAutoReload On
>     SetHandler python-program
>     PythonTransHandler trans
>     PythonHandler main
>   </VirtualHost>
>
> 4. Python handler main failing at this directive:
>
>   File "/var/python/main.py", line 3, in ?
>      import browse.listArtists
>
>   ImportError: No module named browse.listArtists
>
> 5. ls -F /var/python
>
> admin/   data/    main.pyc  objects/     playlists/    template/  trans.pyc
> browse/  main.py  mod_mp3/  parseRDF.py  preferences/  trans.py
>
> 6. ls -F /var/python/browse
>
> __init__.py  listArtistAlbumSongs.py  listArtistAlbums.py
> listArtists.py
>
> ========================================================
>
> I can't figure it out. It is as if the PythonPath directive were not
> being inherited by the interpreter running main.py. Is this a bug, or am
> I stupid?
>
> Or both :)
>
> Thanks in advance for any help anyone can offer.
>
> Robert Sherwood
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python


From jgardn at alumni.washington.edu  Fri Jan 18 07:20:23 2002
From: jgardn at alumni.washington.edu (Jonathan Gardner)
Date: Fri Jan  9 21:59:13 2004
Subject: [mod_python] PyHTMLArch
Message-ID: <200201172235.g0HMZSO32204@my.knctv.co.kr>

For fun and education, I coded up my own handler. I wanted something like a 
bare-bones HTML::Mason, and I wanted to keep the template and the code 
completely seperate. What I came up with is PyHTMLArch. It is now at 
sourceforge - http://sf.net/projects/pyhtmlarch

It has several features that I like.
 - The code an the template are seperate
 - The template executes bits of code rather than doing a substitute. This is 
so you can write "The current time is <% time() %>" or " <% name %> has phone 
number of <% phone_nos[name] %>".
 - The code has full access to the request object. However, the CGI 
parameters are parsed and passed in as arguments.
 - It is simple, yet powerful. Combined with a working understanding of 
Apache and mod_python, it is quite a useful bit of code.

You can download it with CVS or as a bzip2. If you have any questions, be 
sure to email me. If you actually end up playing with it, let me know how you 
use it because I am very interested. I am always open to suggestions, bug 
fixes, etc... I am also interested in helping you get to use it.

Jonathan


From jgardn at alumni.washington.edu  Sat Jan 19 01:10:07 2002
From: jgardn at alumni.washington.edu (Jonathan Gardner)
Date: Fri Jan  9 21:59:13 2004
Subject: [mod_python] installing --with-python Python 2.2
Message-ID: <200201181625.g0IGPTY24849@my.knctv.co.kr>

Summary:
After a lot of research, I still can't get the --with-python option to work 
properly with Python 2.2. Linking problems.

Details:
I searched the entire archive of the mailing list. [NOTE: The link to 
download the entire mailing list from 
http://www.modpython.org/pipermail/mod_python/ is broken], I found only one 
helpful tip for my compiling problems: Don't use --with-python.

Sure enough, it works with 2.2 if I have it all installed so I don't need the 
--with-python option.

I know for a fact that 2.0.1 and 2.1.2 work with the --with-python option 
because I have installed both of them several times without a hitch. Well, I 
lie, but you after a while I got everything working together like they should.

My system: SuSE 7.1, running self-compiled Linux 2.4.14 kernel. 

I downloaded the sources for Python 2.2, Apache1.3.22, and mod_python 2.7.6.

1) Uncompressed all the sources to /usr/local/src/

2) Made a seperate source directory for the no threads version: 
  $ cp -R Python-2.2 Python-2.2-no-threads

3) For /usr/local/src/Python-2.2/, I did:
  $ ./configure
  $ make
  # make install

  Everything went smoothly.

4) For /usr/local/src/Python-2.2-no-threads/, I did:
  $ ./configure --without-threads
  $ make
  
  I also did this, so as to make everything available to Apache. I am sure 
that I only need to do a couple files, but which ones I do not know.
  $ chmod -R a+w *

  Everything went smoothly.

5) Went into the mod_python directory, and ran the following instructions. 
  $ ./configure --with-python=/usr/local/src/Python-2.2-no-threads/ \
    --with-apache=/usr/local/src/apache_1.3.22
  $ make static
  $ make install_static
  # make install_py_lib
  
  Everything went smoothly.

6) Went into the apache directory and did:
  $ ./configure --activate-module=src/modules/python/libpython.a
  $ make

  This is where it stops working. The complaint it spits out is:

gcc  -DLINUX=22 -DUSE_HSREGEX -DNO_DL_NEEDED `./apaci` -Xlinker 
-export-dynamic       \
      -o httpd buildmark.o modules.o modules/standard/libstandard.a 
modules/python/libpython.a main/libmain.a ./os/unix/libos.a ap/libap.a 
regex/libregex.a   -lm -lcrypt -lm  
/usr/local/src/Python-2.2-no-threads/libpython2.2.a   -lexpat
/usr/local/src/Python-2.2-no-threads/libpython2.2.a(posixmodule.o): In 
function `posix_tmpnam':
/usr/local/src/Python-2.2-no-threads/./Modules/posixmodule.c:4510: the use of 
`tmpnam' is dangerous, better use `mkstemp'
/usr/local/src/Python-2.2-no-threads/libpython2.2.a(posixmodule.o): In 
function `posix_tempnam':
/usr/local/src/Python-2.2-no-threads/./Modules/posixmodule.c:4458: the use of 
`tempnam' is dangerous, better use `mkstemp'
/usr/local/src/Python-2.2-no-threads/libpython2.2.a(dynload_shlib.o): In 
function `_PyImport_GetDynLoadFunc':
/usr/local/src/Python-2.2-no-threads/Python/dynload_shlib.c:90: undefined 
reference to `dlopen'
/usr/local/src/Python-2.2-no-threads/Python/dynload_shlib.c:93: undefined 
reference to `dlerror'
/usr/local/src/Python-2.2-no-threads/Python/dynload_shlib.c:98: undefined 
reference to `dlsym'
/usr/local/src/Python-2.2-no-threads/libpython2.2.a(posixmodule.o): In 
function `posix_openpty':
/usr/local/src/Python-2.2-no-threads/./Modules/posixmodule.c:1942: undefined 
reference to `openpty'
/usr/local/src/Python-2.2-no-threads/libpython2.2.a(posixmodule.o): In 
function `posix_forkpty':
/usr/local/src/Python-2.2-no-threads/./Modules/posixmodule.c:1973: undefined 
reference to `forkpty'
collect2: ld returned 1 exit status

IANAPIH - I am not a Python internals hacker so I have no idea what this 
means.

Jonathan

From alain at onesite.org  Fri Jan 18 21:10:28 2002
From: alain at onesite.org (Alain Tesio)
Date: Fri Jan  9 21:59:13 2004
Subject: [mod_python] Import problem with math.so
Message-ID: <20020118211028.5587b591.alain@onesite.org>

Hi, from time to time I get this error, top fix it I must go
to the modpython src dir and run make && make install.

Mod_python error: "PythonHandler observer_www"

Traceback (most recent call last):

  File "/usr/local/lib/python2.1/site-packages/mod_python/apache.py", line 181, in Dispatch
    module = import_module(module_name, _req)

  File "/usr/local/lib/python2.1/site-packages/mod_python/apache.py", line 338, in import_module
    module = imp.load_module(mname, f, p, d)

  File "/home/observer/scripts/observer_www.py", line 13, in ?
    import wwwlib

  File "/home/observer/scripts/wwwlib.py", line 1, in ?
    import mycgi

  File "/home/observer/scripts/mycgi.py", line 9, in ?
    import math

ImportError: /usr/lib/python2.1/lib-dynload/math.so: undefined symbol: PyFPE_jbuf


However ldd gives only shared libs in the standard path:

05:53:18 observer ~/scripts $ldd /usr/lib/python2.1/lib-dynload/math.so
        libm.so.6 => /lib/libm.so.6 (0x40009000)
        libc.so.6 => /lib/libc.so.6 (0x4002b000)
        /lib/ld-linux.so.2 => /lib/ld-linux.so.2 (0x80000000)

I can import the module from the interpreter:

05:53:34 observer ~/scripts $python
Python 2.1.1 (#2, Jan 13 2002, 17:07:14)
[GCC 2.95.4 20011006 (Debian prerelease)] on linux2
Type "copyright", "credits" or "license" for more information.
>>> import math
>>>

The configure line is:

../configure --with-apxs=`which apxs` --with-python=/usr/src/Python-2.1.1

and the compilation commands:

/usr/bin/apxs -I/usr/src/mod_python-2.7.6/src/include -I/usr/include/apache-1.3 -I/usr/src/Python-2.1.1 -I/usr/src/Python-2.1.1/Include -c mod_python.o _apachemodule.o requestobject.o tableobject.o util.o serverobject.o connobject.o  -lm  /usr/src/Python-2.1.1/libpython2.1.a   -ldl  -lutil   -lm           -lreadline -ltermcap
gcc -shared -o mod_python.so mod_python.o _apachemodule.o requestobject.o tableobject.o util.o serverobject.o connobject.o -lm /usr/src/Python-2.1.1/libpython2.1.a -ldl -lutil -lm -lreadline -ltermcap -lc -lm -lcrypt -ldb1 -ldb


Another similar error I can't explain, fixed the same way is with one of
my modules:

>   File "/home/observer/scripts/observer_www.py", line 18, in handler
>     form_items=wwwlib.mod_python_form_items(req)
> 
> AttributeError: 'wwwlib' module has no attribute 'mod_python_form_items'



Any idea ?

Thanks
Alain

From djc at object-craft.com.au  Sat Jan 19 15:06:37 2002
From: djc at object-craft.com.au (Dave Cole)
Date: Fri Jan  9 21:59:13 2004
Subject: [mod_python] Re: PyHTMLArch
In-Reply-To: <200201172235.g0HMZSO32204@my.knctv.co.kr>
References: <200201172235.g0HMZSO32204@my.knctv.co.kr>
Message-ID: <m3zo3bf0he.fsf@ferret.object-craft.com.au>

> For fun and education, I coded up my own handler. I wanted something
> like a bare-bones HTML::Mason, and I wanted to keep the template and
> the code completely seperate. What I came up with is PyHTMLArch. It
> is now at sourceforge - http://sf.net/projects/pyhtmlarch

You might also want to have a look at the Albatross toolkit (I am the
primary developer).  Albatross is slightly more ambitious in that it
allows you to deploy your application either via mod_python or as a
CGI program.  This is quite handy while you are doing development.

> It has several features that I like.  - The code an the template are
> seperate - The template executes bits of code rather than doing a
> substitute. This is so you can write "The current time is <% time()
> %>" or " <% name %> has phone number of <% phone_nos[name] %>".  -
> The code has full access to the request object. However, the CGI
> parameters are parsed and passed in as arguments.  - It is simple,
> yet powerful. Combined with a working understanding of Apache and
> mod_python, it is quite a useful bit of code.

Albatross uses a DTML like templating syntax with some interesting
capabilities.  latex2html choked on some of the text causing the
template to be truncated, but the PDF documentation shows the template
text correctly.

    http://www.object-craft.com.au/projects/albatross/albatross/tug-tree.html

Macro expansion is a nice way to make your templates maintainable.

    http://www.object-craft.com.au/projects/albatross/albatross/tag-macro.html

There are a number of ways to implement server or client side
sessions.

Albatross is not an application server, it is a toolkit which you can
bend to your particular needs.  Most of the code in the toolkit is a
collection of small classes which are mixed together in different ways
to provide a suite of application frameworks and request execution
contexts.  To get you started quickly there are a number of
pre-packaged classes which are likely to suit your needs.  If these
are not exactly what you require you can provide drop in replacements
for any of the building blocks.

In the following diagram the light grey boxes enclose the pre-packaged
application and execution context classes.  The darker grey boxes
enclose classes which provide the same function but with different
semantics.  By providing your own drop in replacement for any of these
classes you can change one or more aspects of the toolkit behaviour.

    http://www.object-craft.com.au/projects/albatross/albatross/pack-overview.html

The home page for the toolkit is here:

    http://www.object-craft.com.au/projects/albatross/

We use Albatross for paid consulting work, so we are very serious
about making Albatross useful.

The current PDF documentation stands at 125 pages and the current line
count for Albatross (using the highly scientific wc -l metric) is 2646
lines.

- Dave

-- 
http://www.object-craft.com.au


From tchur at optushome.com.au  Sat Jan 19 19:00:38 2002
From: tchur at optushome.com.au (Tim Churches)
Date: Fri Jan  9 21:59:13 2004
Subject: [mod_python] Re: PyHTMLArch
References: <200201172235.g0HMZSO32204@my.knctv.co.kr> <m3zo3bf0he.fsf@ferret.object-craft.com.au>
Message-ID: <3C4927A6.5B6B33B4@optushome.com.au>

Dave Cole wrote:
> The current PDF documentation stands at 125 pages and the current line
> count for Albatross (using the highly scientific wc -l metric) is 2646
> lines.

If one assumes a mean of 20 lines of text per page of documentation,
that means the documentation-to-code line count ratio for Albatross must
be pretty close to unity, which is encouraging. The ideal ratio of lines
of documentation to lines of code is, of course, phi, the Golden Mean,
which is an irrational number with a value of approximately
1.6180339887499...

Tim C

From modpython at xhaus.com  Fri Jan 25 09:35:06 2002
From: modpython at xhaus.com (Alan Kennedy)
Date: Fri Jan  9 21:59:13 2004
Subject: [mod_python] Web sessions and threading.
Message-ID: <200201251445.JAA38220@spool4.valueweb.net>

Greetings All,

I'm putting together a session tracking mechanism for
Apache and mod_python, on Win and Linux. And my mind is
being twisted trying to decide if I need to worry about
thread safety or not.

My confusion arises from trying to juggle the concepts of
the Python Global Interpreter Lock and the way that
Apache handles simultaneous requests.

On Windows, Apache spawns a single child, which then
creates a thread to service every request received. On
Linux, Apache maintains a pool of single-threaded child
processes, which compete to service incoming requests.

So, imagine I have a mod_python handler function, which
is going to extract a session ID from incoming requests,
and use that as a key to retrieve a corresponding session
object from some storage (say, a memory mapped file,
rdbms(?)).

That session object can then be modified by the handler
function, and thus must then be written back to storage.

Since it is possible for two requests from the same
session to be handled by different threads
windows)/processes(linux), I obviously have a concurrent
access problem.

On Linux, there are no threading issues, since all of
the processes serving requests are single-threaded.

However, it is obviously different on multi-threaded 
Windows. On Windows, I don't know if it is possible for
two threads to update the same python object at the same
time, i.e. I don't know the effect of the Global
Interpreter Lock(GIL).

On Windows, the two threads will definitely be run in
the same interpreter (the default configuration for
mod_python).

So, my question: do I need to protect the session objects
against concurrent access from multiple threads (and thus
complicate the code)? Or can I ignore the issue, i.e. is
access to the object serialised by the GIL?

I know I could probably answer my question by reading and
understanding the python and mod_python source code. But I
was hoping someone might be able to give me pointers to
documentation which might throw some light on the scenario?

Many thanks,

Alan.



---------------------------------------------
This message was sent using WebMail by CyberGate.
http://www.gate.net/webmail



From grisha at modpython.org  Fri Jan 25 13:20:55 2002
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:59:13 2004
Subject: [mod_python] Web sessions and threading.
In-Reply-To: <200201251445.JAA38220@spool4.valueweb.net>
Message-ID: <Pine.BSF.4.32.0201251318270.7431-100000@localhost>


On Fri, 25 Jan 2002, Alan Kennedy wrote:

> Greetings All,
>
> I'm putting together a session tracking mechanism for
> Apache and mod_python, on Win and Linux. And my mind is
> being twisted trying to decide if I need to worry about
> thread safety or not.

The general answer is "yes". Even thoug Python will make sure that access
is serialized, your logic needs to anticipate and prevent unexpected
changes to an object.

On UNIX it doesn't matter now, but it will with Apache 2.0.

Grisha


From lbergman at abi.tconline.net  Mon Jan 28 08:04:27 2002
From: lbergman at abi.tconline.net (Lewis Bergman)
Date: Fri Jan  9 21:59:13 2004
Subject: [mod_python] python web tools?
Message-ID: <200201281404.g0SE4S014732@lewis.abi.tconline.net>

Does anyone know of web tools for use with mod_python?

I was thinking of something along the lines of a validation class, forms 
class, authentication class. General tools for handling common tasks on the 
web.

-- 
Lewis Bergman
Texas Communications
4309 Maple St.
Abilene, TX 79602-8044
915-695-6962 ext 115

From lbergman at abi.tconline.net  Mon Jan 28 11:16:37 2002
From: lbergman at abi.tconline.net (Lewis Bergman)
Date: Fri Jan  9 21:59:13 2004
Subject: [mod_python] Re: mod_python make install problem
In-Reply-To: <3C496FB4.7A6E2E@ndh.net>
References: <3C496FB4.7A6E2E@ndh.net>
Message-ID: <200201281716.g0SHGbn14970@lewis.abi.tconline.net>

> Another reason could be that the getopt code from the Python 2.2
> library is actually executed by an older Python interpreter that
> doesn't know of list comprehensions.

It seems that this explanation is correct. I had installed python2.2 on this 
machine with the make altinstall command as it is a RH7.2 install. simply 
using make install breaks all kinds of things including printing.

So, somehow, even though the instructions were followed completely and the 
--with-python switch was pointing to the right place, the make install was 
somehow using the other 1.5.2 install of python.

I used a spare machine, installed python2.2 as the only python and it worked.
curious.

I do get an error about mod_python being compiled without -DEAPI though. Is 
this something to worry about? Perhaps I forgot to compile 2.2 with the 
--with-threads=no option and this caused it?
-- 
Lewis Bergman
Texas Communications
4309 Maple St.
Abilene, TX 79602-8044
915-695-6962 ext 115


From grisha at modpython.org  Mon Jan 28 13:40:57 2002
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:59:13 2004
Subject: [mod_python] Re: mod_python make install problem
In-Reply-To: <200201281716.g0SHGbn14970@lewis.abi.tconline.net>
Message-ID: <Pine.BSF.4.32.0201281331300.37930-100000@localhost>

If I recall correctly, the issue here is that until Python is installed
(i.e. make install was run), there is no way to determine some install
time parameters, such as where the lib directory is.

the last paragraph on this page talks about it a little bit:
http://www.modpython.org/live/mod_python-2.7.6/doc-html/inst-configure.html

Grisha

On Mon, 28 Jan 2002, Lewis Bergman wrote:

> > Another reason could be that the getopt code from the Python 2.2
> > library is actually executed by an older Python interpreter that
> > doesn't know of list comprehensions.
>
> It seems that this explanation is correct. I had installed python2.2 on this
> machine with the make altinstall command as it is a RH7.2 install. simply
> using make install breaks all kinds of things including printing.
>
> So, somehow, even though the instructions were followed completely and the
> --with-python switch was pointing to the right place, the make install was
> somehow using the other 1.5.2 install of python.
>
> I used a spare machine, installed python2.2 as the only python and it worked.
> curious.
>
> I do get an error about mod_python being compiled without -DEAPI though. Is
> this something to worry about? Perhaps I forgot to compile 2.2 with the
> --with-threads=no option and this caused it?
> --
> Lewis Bergman
> Texas Communications
> 4309 Maple St.
> Abilene, TX 79602-8044
> 915-695-6962 ext 115
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From bakey at traq.com  Mon Jan 28 15:06:37 2002
From: bakey at traq.com (Brian Akey)
Date: Fri Jan  9 21:59:13 2004
Subject: [mod_python] A python help site
Message-ID: <780A5D64B1CC9544AB7B702F39219C1E5FB8@traqexch.traq.com>

I made up a site to help people trying to setup mod_python.
If anyone sees some mistakes or thinks I should add something, please
drop me an email at bakey@traq.com <mailto:bakey@traq.com> 
 
Brian Akey
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20020128/62bf7f5d/attachment-0002.htm
From woodm at equire.com  Mon Jan 28 14:37:27 2002
From: woodm at equire.com (Matthew D. Wood)
Date: Fri Jan  9 21:59:13 2004
Subject: [mod_python] A python help site
In-Reply-To: <780A5D64B1CC9544AB7B702F39219C1E5FB8@traqexch.traq.com>
References: <780A5D64B1CC9544AB7B702F39219C1E5FB8@traqexch.traq.com>
Message-ID: <1012253847.1836.17.camel@localhost.localdomain>

Yes, I do believe that I have found something that you were missing...

What's the address? :-)

On Mon, 2002-01-28 at 14:06, Brian Akey wrote:
> I made up a site to help people trying to setup mod_python.
> If anyone sees some mistakes or thinks I should add something, please
> drop me an email at bakey@traq.com <mailto:bakey@traq.com> 
>  
> Brian Akey
-- 
                                               _________________________
----------------------------------------------/                         
                                             /  Matthew D. Wood         
 "activist for accuracy"                    /  Home Phone: 303.415.1550 
                                           /  E-Mail: woodm@equire.com  
                                          /                             
_________________________________________/------------------------------

From bakey at traq.com  Mon Jan 28 15:27:24 2002
From: bakey at traq.com (Brian Akey)
Date: Fri Jan  9 21:59:13 2004
Subject: [mod_python] A python help site
Message-ID: <780A5D64B1CC9544AB7B702F39219C1E5FBA@traqexch.traq.com>

http://cricket.ironkeytech.com <http://cricket.ironkeytech.com>  


I made up a site to help people trying to setup mod_python.
If anyone sees some mistakes or thinks I should add something, please
drop me an email at bakey@traq.com <mailto:bakey@traq.com> 
 
Brian Akey

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20020128/33d945b4/attachment-0002.htm
From magnus at hetland.org  Mon Jan 28 22:58:10 2002
From: magnus at hetland.org (Magnus Lie Hetland)
Date: Fri Jan  9 21:59:13 2004
Subject: [mod_python] A python help site
In-Reply-To: <1012253847.1836.17.camel@localhost.localdomain>; from woodm@equire.com on Mon, Jan 28, 2002 at 02:37:27PM -0700
References: <780A5D64B1CC9544AB7B702F39219C1E5FB8@traqexch.traq.com> <1012253847.1836.17.camel@localhost.localdomain>
Message-ID: <20020128225810.C14200@idi.ntnu.no>

Matthew D. Wood <woodm@equire.com>:
>
> Yes, I do believe that I have found something that you were missing...
> 
> What's the address? :-)
 
That was in the original mail:

http://cricket.ironkeytech.com 

--
Magnus Lie Hetland                                  The Anygui Project
http://hetland.org                                  http://anygui.org

From magnus at hetland.org  Mon Jan 28 23:25:32 2002
From: magnus at hetland.org (Magnus Lie Hetland)
Date: Fri Jan  9 21:59:13 2004
Subject: [mod_python] A python help site
In-Reply-To: <20020128225810.C14200@idi.ntnu.no>; from magnus@hetland.org on Mon, Jan 28, 2002 at 10:58:10PM +0100
References: <780A5D64B1CC9544AB7B702F39219C1E5FB8@traqexch.traq.com> <1012253847.1836.17.camel@localhost.localdomain> <20020128225810.C14200@idi.ntnu.no>
Message-ID: <20020128232532.D14200@idi.ntnu.no>

Magnus Lie Hetland <magnus@hetland.org>:
>
> Matthew D. Wood <woodm@equire.com>:
> >
> > Yes, I do believe that I have found something that you were missing...
> > 
> > What's the address? :-)
>  
> That was in the original mail:

<ahem>

Sorry -- I was a bit quick there :)

--
Magnus Lie Hetland                                  The Anygui Project
http://hetland.org                                  http://anygui.org

From gbeasley at tsa.ac.za  Tue Jan 29 12:47:06 2002
From: gbeasley at tsa.ac.za (Grant Beasley)
Date: Fri Jan  9 21:59:13 2004
Subject: [mod_python] Persistent variables?
Message-ID: <OOENKCHGJGHILGPAGHGOKEIMCBAA.gbeasley@tsa.ac.za>

Hi

Firstly, I hope this hasn't already come up, but I've searched the archives
back a few months and can't find anything.

I have a mod python authentification script which, upon authentification,
reads user details from a database and places them in a global dictionary
indexed on the userid. This is kept in a separate module (called Globals),
and accessed through functions in the global module. This dictionary seems
to persist through HTTP connections, so on subsequent calls I can just read
the dictionary instead of the database.

I haven't come up with any problems thus far, except that isinstance doesn't
seem to function correctly. If I create a Widget instance and store it in my
global dictionary, on subsequent sessions, although the Widget instance
exists, and widget.__class__ is equal to the Widget class (in string terms),
isinstance returns 0. I'd assume this is because I've somehow reloaded the
Widget class and hence it does not compare equally to the class stored with
the original widget instance.

I hope that makes sense and doesn't sound like complete gibberish. Can
anyone explain this to me, and indicate whether storing user data like this
is safe and sensible? Should I be reading user details from my database?

Thanks
Grant Beasley
Technikon SA


From grisha at modpython.org  Wed Jan 30 14:00:20 2002
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:59:13 2004
Subject: [mod_python] About authentication
In-Reply-To: <Pine.LNX.4.10.10110041113020.7933-100000@mrham.hamslab.com>
Message-ID: <Pine.BSF.4.32.0201301353430.94999-100000@localhost>

No passwdord is not an unusual condition - your code should deal with
users who do not supply passwords by returning them HTTP_UNAUTHORIZED.

So something like:

if password:
	md5.new(password).hexdigest()
else:
	return apache.HTTP_UNAUTHORIZED

On Thu, 4 Oct 2001 nineclue@bigfoot.com wrote:

> I'm trying to implement custom authentication using authenhandler.
> I want to save user info and password in encrypted file that other users
> can only read. So I've tried to use md5.new('password').hexdigest().
> 'password' is a variable that stores password using
> req.get_basic_auth_pw().
>
> When I've tried to load restricted page, I got error saying 'password'
> variable is not read-only buffer, but None. I can use direct comparison
> of username and password with string as to the mod_python document, but I
> can't use it in a function that accepts string as a argument.
>
> Any comment or help would be appreciated.
> mod_python is 2.7.2.
>
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From jm at eemsystems.cjb.net  Wed Jan 30 18:25:26 2002
From: jm at eemsystems.cjb.net (Julio Mendoza)
Date: Fri Jan  9 21:59:13 2004
Subject: [mod_python] mod_python and form process
Message-ID: <1012433126.26213.13.camel@eemsystems>

I need to process a form with variable number of fields.

how to do that with mod_python?


thanks,

JM





From malex at purdue.edu  Thu Jan 31 01:38:03 2002
From: malex at purdue.edu (Oleksandr Moskalenko)
Date: Fri Jan  9 21:59:13 2004
Subject: [mod_python] Import Error puzzle
Message-ID: <20020131063803.GA32627@purdue.edu>

 Hello all,

I'm really puzzled by this problem. I have two identical configurations
on two pretty much identical Debian GNU/Linux Unstable systems. Both use
python 2.1 + mod_python 2.7.6. Mod_python works fine on one of those,
but on the other it produces the following error:

Mod_python error: "PythonHandler mptest"

Traceback (most recent call last):

  File "/usr/lib/python2.1/site-packages/mod_python/apache.py", line
181, in Dispatch
    module = import_module(module_name, _req)

  File "/usr/lib/python2.1/site-packages/mod_python/apache.py", line
335, in import_module
    f, p, d = imp.find_module(parts[i], path)

ImportError: No module named mptest



Now as far as I understand mod_python adds the current directory to the
front of the sys.path and then imports module by name. What could go
wrong here? Regular python cgi scripts work fine. I can successfully run
the following, for example:
#!/usr/bin/env python

print 'Content-Type: text/html'
print
print '<html>'
print ' <head>'
print '  <title>My CGI application</title>'
print ' </head>'
print ' <body>'
print '  Hello from my simple CGI application!'
print ' </body>'
print '</html>'

and get the Hello... string

Can anybody help me troubleshoot this?


Thank you,

Alex.

-----------------------
Oleksandr Moskalenko
malex@purdue.edu
-----------------------
pub  1024D/6C5F196B 2001-08-17 /* http://www.tagancha.org/pgp */
Oleksandr V. Moskalenko (Alex) <malex@tagancha.org>
Fingerprint = EE63 C471 ADBA 5D80 ADFB  1054 DA28 6F32 6C5F 196B
----------------------------------------------------------------

From bakey at traq.com  Thu Jan 31 09:59:37 2002
From: bakey at traq.com (Brian Akey)
Date: Fri Jan  9 21:59:13 2004
Subject: [mod_python] mod_python and form process
Message-ID: <780A5D64B1CC9544AB7B702F39219C1E5FCF@traqexch.traq.com>

You can use the regular dictionary functions of python.
form = util.FieldStorage(req)
That gets you the post information
form.keys() will give you a list of keys

fn = form.keys()
for fn1 in fn:
	req.write('keyname is ' + str(fn1) + '<br>\n')
	req.write('value is ' + str(form[fn1]) + '<br>\n')

Brian

>I need to process a form with variable number of fields.
>
>how to do that with mod_python?

From ray_drew at yahoo.co.uk  Wed Jan  2 11:15:12 2002
From: ray_drew at yahoo.co.uk (Ray Drew)
Date: Fri Jan  9 22:03:01 2004
Subject: [mod_python] Python 2.2
References: <Pine.BSF.4.32.0112171033370.20970-100000@localhost>
Message-ID: <024f01c1937e$c0349b40$df13000a@RDREWXP>


>
> I haven't tried compiling it with 2.2 yet, but chances are it will work
> without any modifications... I guess we'll see when it comes out. :)
>
> On Mon, 17 Dec 2001, Ray Drew wrote:
>
> > Is mod_python avalable for Python 2.2 yet? Python 2.2 final is scheduled
for
> > release later this week.
> >

Now that Python 2.2 is out, do you know when mod_python will support it? I'm
running with Apache 1.3.22 on Windows NT/XP.

Thanks,

Ray Drew


_________________________________________________________
Do You Yahoo!?
Get your free @yahoo.com address at http://mail.yahoo.com


From grisha at modpython.org  Wed Jan  2 13:04:50 2002
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 22:03:01 2004
Subject: [mod_python] Python 2.2
In-Reply-To: <024f01c1937e$c0349b40$df13000a@RDREWXP>
Message-ID: <Pine.BSF.4.32.0201021303190.98580-100000@localhost>

AFAIK it will work with 2.2 as is, it's just a matter of compiling a DLL.
My access to a windows box with a compiler is somewhat limited right now -
perhaps someone on the list would contribute a compiled DLL?

Grisha

On Wed, 2 Jan 2002, Ray Drew wrote:

>
>
> >
> > I haven't tried compiling it with 2.2 yet, but chances are it will work
> > without any modifications... I guess we'll see when it comes out. :)
> >
> > On Mon, 17 Dec 2001, Ray Drew wrote:
> >
> > > Is mod_python avalable for Python 2.2 yet? Python 2.2 final is scheduled
> for
> > > release later this week.
> > >
>
> Now that Python 2.2 is out, do you know when mod_python will support it? I'm
> running with Apache 1.3.22 on Windows NT/XP.
>
> Thanks,
>
> Ray Drew
>
>
> _________________________________________________________
> Do You Yahoo!?
> Get your free @yahoo.com address at http://mail.yahoo.com
>
>


From rsalz at zolera.com  Thu Jan  3 12:34:19 2002
From: rsalz at zolera.com (Rich Salz)
Date: Fri Jan  9 22:03:01 2004
Subject: [mod_python] configure.in patch
Message-ID: <3C34961B.1000705@zolera.com>

configure[.in] has code to set AP_SRC_OWN and AP_SRC_GRP by parsing the 
output of "ls -ld".  It wants that information so that it can chown the 
files it copies into the apache source tree.   There are a number of 
problems with this.

0.  it requires root privs.
1.  the operation is often unnecessary, as the installer of mod-python 
should be the apache owner.
2.  if they are not the same, masking the owner looses accountability :)
3.  the output of "ls -l" is different across platforms, including the 
placement of the fields (for extraction via awk) and some versions put a
  "total nnnn" line out first.

I believe the best solution is to not chown things; we patch the 
Makefile so that the install targets do not do that. The attached diff, 
however, merely makes mod_python's configure more robust in the fact of 
multi-line "ls" output.  It does not address the more fundamental 
problem, which is that the output of "ls" puts those fields in different 
  places on different hosts.  One way to address that would be to gather 
the values via a short python program.
	/r$
-- 
Zolera Systems, Your Key to Online Integrity
Securing Web services: XML, SOAP, Dig-sig, Encryption
http://www.zolera.com
-------------- next part --------------
*** configure.in.ORIG	Thu Jan  3 12:17:06 2002
--- configure.in	Thu Jan  3 12:25:34 2002
***************
*** 163,170 ****
    AP_INCLUDES="-I${AP_SRC}/src/include -I${AP_SRC}/src/os/unix"
  
    # note who owns the apache source directory
!   AP_SRC_OWN="`ls -ld $AP_SRC | awk '{print $3}'`"
!   AP_SRC_GRP="`ls -ld $AP_SRC | awk '{print $4}'`"
  ],
  AC_MSG_RESULT(no))
  
--- 163,170 ----
    AP_INCLUDES="-I${AP_SRC}/src/include -I${AP_SRC}/src/os/unix"
  
    # note who owns the apache source directory
!   AP_SRC_OWN="`ls -ld $AP_SRC | awk '{print $3}' | tr -d '[\012\015]'`"
!   AP_SRC_GRP="`ls -ld $AP_SRC | awk '{print $4}' | tr -d '[\012\015]'`"
  ],
  AC_MSG_RESULT(no))
  
From x at Vex.Net  Fri Jan  4 14:28:48 2002
From: x at Vex.Net (Tm)
Date: Fri Jan  9 22:03:01 2004
Subject: [mod_python] ob-CallBack Kenobi
Message-ID: <20020104193220.92BD144A9A6@spitfire.velocet.net>

This is an issue that seems to come up periodically on this list. I've 
searched and read all the messages I could find on the subject. The 
realy strange thing is that I've installed, setup, and used succesfully 
mod_python on two other NetBSD systems, with no problems. But the 
NetBSD system I'm trying to get it going on now (essentially identical 
to the previous ones) just refuses to cooperate:

make_obcallback(): could not import mod_python.apache.
make_obcallback(): could not call init.
python_handler: make_obcallback returned no obCallBack!

I've checked the permissions of the libraries, i've checked the 
locatoins, i've fiddled with the python path.

Can anyone give any more tips on how I might debug this situation and 
figure out what is actually going wrong here?

I'm using NetBSD 1.5.1, Apache 1.3.22, Python 2.01 without threads 
(installed in the standard NetBSD locations).


From eelgueta at vtr.net  Sat Jan  5 15:21:35 2002
From: eelgueta at vtr.net (Eduardo Elgueta)
Date: Fri Jan  9 22:03:01 2004
Subject: [mod_python] unsuscribe
Message-ID: <1010254896.6694.3.camel@jerry.srd.cl>

unsuscribe




From x at Vex.Net  Sun Jan  6 00:18:02 2002
From: x at Vex.Net (T. Muddletin)
Date: Fri Jan  9 22:03:01 2004
Subject: [mod_python] ob-CallBack Kenobi
In-Reply-To: <20020104193220.92BD144A9A6@spitfire.velocet.net>
References: <20020104193220.92BD144A9A6@spitfire.velocet.net>
Message-ID: <55371568667.20020106001802@Vex.Net>

Tim wrote on Friday, January 04, 2002, 2:28:48 PM:
> I've checked the permissions of the libraries, i've checked the
> locations, i've fiddled with the python path.

As a last resort i hauled out the apache source and managed to build
mod_python statically with it. And it seems to be working fine this
way. Strange that the DSO module won't work on this machine, but the
statically compiled one does? I'm not familiar enough with the
internals to speculate as to why, but just thought i'd mention this is
how i solved the dilemma finally, in case anyone else has a similar
problem...

Though i would really like to get the DSO module to work on this
machine eventually. At least it works statically for now, and
development can move ahead.

-- 
Tim Middleton | Cain Gang Ltd | But the trouble was that my hysterical fit
x@veX.net     | www.Vex.Net   | could not go on for ever. --Dost (NFTU)


From modpython at xhaus.com  Mon Jan  7 19:32:10 2002
From: modpython at xhaus.com (Alan Kennedy)
Date: Fri Jan  9 22:03:01 2004
Subject: [mod_python] TransHandler help?
Message-ID: <3C39F7BA.653BE2A8@xhaus.com>

Greetings All,

And many thanks to Grisha for an excellent body of work.

I'm trying to get a PythonTransHandler working.

What I am trying to do is modify an URL before it goes through standard
Apache processing. (See below for an explanation why, if you wish)

Could someone possibly give me a simple example (including
configuration) of how I could, for example, change every request for a
.html file to a request for a .xyz file. That is, a request for

/admin/index.html

would become a request for

/admin/index.xyz

*without* sending a redirect back to the client. Or a more sophisticated
example, how could I turn a request for

/admin/abc1234/update/item4567

into a request for

/admin/doit.html?sessionID=abc1234&command=update&what=item4567

Many thanks for any help offered.

Regards,

Alan.

P.S. I'm working with modpython 2.7.6, win2k, apache 1.3.22 and Python
2.1.1

P.P.S.
Why: I am trying to implement URL rewriting for session tracking. Rather
than try to modify every <a href> and <form action> to contain a session
ID, I was hoping to take a quick solution using a <base href> element in
<head>. In fact I was hoping to encode several parameters like this,
i.e. as pseudo-directory names. Why do it this way, rather than setting
all the parameters as query args, i.e. "?sessID=abc123&command=update".

For a couple of reasons:-

1. Because it looks far neater in the URL
2. Because I can put all that stuff into the <base href>, which is
simpler in code terms, because I don't have to worry about <a href> and
<form action> adding their own query parameters, and potentially having
two "?" query delimiters in the URI, which is invalid.

So, the way it would work is this:

A HTML document (H) is transmitted which contains the parameters as
"directory names" in the <base href>

When the client activates a link in H or submits a form from H, I
extract the parameters out of the requested URI, and execute whatever
functionality.

The problem is that Apache complains if any of the "pseudo directories"
does not physically exist. Which is a rather a pain. That's why I need
to change the URL before Apache gets at it, which the documentation
implies TransHandler can do. I quote :- "This routine gives allows for
an opportunity to translate the URI into an actual filename, before the
server's default rules (Alias directives and the like) are followed. "




From oliver at redgecko.org  Mon Jan  7 22:08:09 2002
From: oliver at redgecko.org (Oliver Cope)
Date: Fri Jan  9 22:03:01 2004
Subject: [mod_python] TransHandler help?
In-Reply-To: <3C39F7BA.653BE2A8@xhaus.com>
References: <3C39F7BA.653BE2A8@xhaus.com>
Message-ID: <20020107220809.GA4997@canoodle.redgecko.org>

On Mon, Jan 07, 2002 at 07:32:10PM +0000, Alan Kennedy wrote:
>
> I'm trying to get a PythonTransHandler working.
> 
<snip>

> *without* sending a redirect back to the client. Or a more sophisticated
> example, how could I turn a request for
> 
> /admin/abc1234/update/item4567
> 
> into a request for
> 
> /admin/doit.html?sessionID=abc1234&command=update&what=item4567
> 
I too have spent some time trying to configure a PythonTransHandler, but
couldn't get it to work :o(
		
I've had more luck using mod_rewrite for this kind of thing:

RewriteEngine On
RewriteRule /admin/(.*)/(.*)/(.*) /admin/doit.html?sessionID=$1&command=$2&what=$3 [PT]

This will rewrite requests without sending redirects back to the client.
You can remove the '[PT]' if you don't need to further process the
rewritten URL (e.g. through a PythonHandler).

Obviously regular expressions are not as flexible as a Python
handler can be, so this will only work for simple translations.  Also
you'll need to have Apache compiled with mod_rewrite, I'm not sure if
this is the default.

Regards,

Olly.


From modpython at xhaus.com  Mon Jan  7 23:18:34 2002
From: modpython at xhaus.com (Alan Kennedy)
Date: Fri Jan  9 22:03:01 2004
Subject: [mod_python] TransHandler help?
References: <3C39F7BA.653BE2A8@xhaus.com> <20020107220809.GA4997@canoodle.redgecko.org>
Message-ID: <3C3A2CCA.88920E9F@xhaus.com>

Thanks Olly,

It's good to know that I'm not the only who can't get it to work :-\

I've been avoiding relying on mod_rewrite and its "cool voodoo". I have the training and
background to get my head around it, but members of my team unfortunately don't, whereas
they are all very comfortable with python.......

Thanks for the reply,

Cheers,

Alan.

Oliver Cope wrote:

> On Mon, Jan 07, 2002 at 07:32:10PM +0000, Alan Kennedy wrote:
> >
> > I'm trying to get a PythonTransHandler working.
> >
> <snip>
>
> > *without* sending a redirect back to the client. Or a more sophisticated
> > example, how could I turn a request for
> >
> > /admin/abc1234/update/item4567
> >
> > into a request for
> >
> > /admin/doit.html?sessionID=abc1234&command=update&what=item4567
> >
> I too have spent some time trying to configure a PythonTransHandler, but
> couldn't get it to work :o(
>
> I've had more luck using mod_rewrite for this kind of thing:
>
> RewriteEngine On
> RewriteRule /admin/(.*)/(.*)/(.*) /admin/doit.html?sessionID=$1&command=$2&what=$3 [PT]
>
> This will rewrite requests without sending redirects back to the client.
> You can remove the '[PT]' if you don't need to further process the
> rewritten URL (e.g. through a PythonHandler).
>
> Obviously regular expressions are not as flexible as a Python
> handler can be, so this will only work for simple translations.  Also
> you'll need to have Apache compiled with mod_rewrite, I'm not sure if
> this is the default.
>
> Regards,
>
> Olly.
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python


From grisha at modpython.org  Mon Jan  7 19:10:39 2002
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 22:03:01 2004
Subject: [mod_python] TransHandler help?
In-Reply-To: <3C3A2CCA.88920E9F@xhaus.com>
Message-ID: <Pine.BSF.4.32.0201071910200.58948-100000@localhost>

I'll have look into this some day. I *think* what mod_rewrite does is
create a sub-request, but sub-requests are not supported by mod_python (i
don't think there is anything that makes it impossible, the code is simple
not there, it's just a SMOP ("simple matter of programming")...)

Grisha


On Mon, 7 Jan 2002, Alan Kennedy wrote:

> Thanks Olly,
>
> It's good to know that I'm not the only who can't get it to work :-\
>
> I've been avoiding relying on mod_rewrite and its "cool voodoo". I have the training and
> background to get my head around it, but members of my team unfortunately don't, whereas
> they are all very comfortable with python.......
>
> Thanks for the reply,
>
> Cheers,
>
> Alan.
>
> Oliver Cope wrote:
>
> > On Mon, Jan 07, 2002 at 07:32:10PM +0000, Alan Kennedy wrote:
> > >
> > > I'm trying to get a PythonTransHandler working.
> > >
> > <snip>
> >
> > > *without* sending a redirect back to the client. Or a more sophisticated
> > > example, how could I turn a request for
> > >
> > > /admin/abc1234/update/item4567
> > >
> > > into a request for
> > >
> > > /admin/doit.html?sessionID=abc1234&command=update&what=item4567
> > >
> > I too have spent some time trying to configure a PythonTransHandler, but
> > couldn't get it to work :o(
> >
> > I've had more luck using mod_rewrite for this kind of thing:
> >
> > RewriteEngine On
> > RewriteRule /admin/(.*)/(.*)/(.*) /admin/doit.html?sessionID=$1&command=$2&what=$3 [PT]
> >
> > This will rewrite requests without sending redirects back to the client.
> > You can remove the '[PT]' if you don't need to further process the
> > rewritten URL (e.g. through a PythonHandler).
> >
> > Obviously regular expressions are not as flexible as a Python
> > handler can be, so this will only work for simple translations.  Also
> > you'll need to have Apache compiled with mod_rewrite, I'm not sure if
> > this is the default.
> >
> > Regards,
> >
> > Olly.
> >
> > _______________________________________________
> > Mod_python mailing list
> > Mod_python@modpython.org
> > http://www.modpython.org/mailman/listinfo/mod_python
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From mengland at mengland.net  Mon Jan  7 19:43:01 2002
From: mengland at mengland.net (Matthew England)
Date: Fri Jan  9 22:03:01 2004
Subject: [mod_python] How to hide implementation specifics in URIs/URLs?
Message-ID: <5.1.0.14.0.20020107191928.02441230@mail.core.com>

I'd like to be able to eliminate any web-server implementation specifics in 
my URIs/URLs as per 
<http://www.w3.org/Provider/Style/URI.html>.  Specifically, I'd like to 
eliminate the references to ".py" in my mod_python-managed URIs.  What are 
my apache options to do this?

These references:

<http://www.apacheweek.com/features/negotiation>
<http://httpd.apache.org/docs/content-negotiation.html>

...seem to be more interested in client-side-decision of content 
negotiation.  while this concept is interesting, and i might use it in the 
future, i'm not interested in this now.  i simply want to hide the 
server-side implemenation from my web user.

here's the basic algorithm i'm looking to implement in apache:

for said URI <http://myexampledomain.org/tickets/reserve>,

i would like apache to look in the [...]/tickets/ directory for a reserve.* 
file.  if there exists a [...]/tickets/reserve.py file, then apache 
immediately throws this .py file at the python handlers.  if there are 
multiple matches, ie, multiple files with the same 'reserve' but with 
different extensions, i want apache to decide what to do with the 
'ambiguous' URI by looking at a prioritized list of "content managers," 
probably a list specified by me in httpd.conf.  for example, i envision 
these lines placed in httpd.conf (and this is completely theoretical syntax):

ContentManager call-the-python-handler .py
ContentManager call-the-php-handler .php .php3
ContentManager call-the-cgi-handler .cgi

The order here is important, for .py files will be displayed/"managed" 
prior to .php or other files.  In my theoretical behavioral httpd.conf 
prototype syntax, i would have all unspecified extensions behave as they 
seem to "out of the box"...ie, whatever makes 
<http://192.168.1.50/~mengland/calendar> and 
<http://192.168.1.50/~mengland/calendar.html> do the same thing in my 
opera.com browser (maybe it's the same mechanism that i describe above?).

Notice how all of this stuff is totally managed by the server and requires 
no client-side input from the browser.  As I mentioned before, i'm not 
trying to have the client-side browser give language or media 
directives.  My main purpose is to keep my URIs clean and stable so that my 
users (and therefore much of my web server itself) don't have to change 
their URLs if i switch to some other underlying technology implementation 
(say if i switched from python to php for any segments of the web server).


disclaimer:

I'm constructing a web-database server for ticket reservations and am new 
to mod_python...and most everything else devshed.com-type-stuff-related.  I 
find openbsd-postgresql-python-apache to be the most attractive combination 
that i see now (openbsd for security purposes)...but since I'm new to these 
technologies, i'm far from certain of things yet.  I therefore apologize 
for any "newbie annoyance," or for a duplicate question.


thanks in advance for any help,
-Matt


From rsalz at zolera.com  Mon Jan  7 21:08:15 2002
From: rsalz at zolera.com (Rich Salz)
Date: Fri Jan  9 22:03:01 2004
Subject: [mod_python] How to hide implementation specifics in URIs/URLs?
References: <5.1.0.14.0.20020107191928.02441230@mail.core.com>
Message-ID: <3C3A548F.7EDC3D6C@zolera.com>

> <http://www.w3.org/Provider/Style/URI.html>.  Specifically, I'd like to
> eliminate the references to ".py" in my mod_python-managed URIs.  What are
> my apache options to do this?

AddHandler python-program .py
DirectoryIndex index.py index.php index.html
-- 
Zolera Systems, Securing web services (XML, SOAP, Signatures,
Encryption)
http://www.zolera.com

From mengland at mengland.net  Mon Jan  7 20:40:47 2002
From: mengland at mengland.net (Matthew England)
Date: Fri Jan  9 22:03:01 2004
Subject: [mod_python] How to hide implementation specifics in
  URIs/URLs?
In-Reply-To: <3C3A548F.7EDC3D6C@zolera.com>
References: <5.1.0.14.0.20020107191928.02441230@mail.core.com>
Message-ID: <5.1.0.14.0.20020107203236.0243f0f8@mail.core.com>

At 1/7/2002 08:08 PM, Rich Salz wrote:
> > <http://www.w3.org/Provider/Style/URI.html>.  Specifically, I'd like to
> > eliminate the references to ".py" in my mod_python-managed URIs.  What are
> > my apache options to do this?
>
>AddHandler python-program .py
>DirectoryIndex index.py index.php index.html

Thanks for the quick response.  This appears to only work if i create a 
subdirectory with index.* files in it.  While this does get me one step 
closer to my goal, it doesn't get me all the way there.  Maybe I'll just 
have to deal with it?

To be a little more specific:

On my server, the URI:

   <http://192.168.1.50/tmp/mptest.py>

prints some arbitrary text in the browser display.

I wanted:

   <http://192.168.1.50/tmp/mptest>

(without the ".py") to do the same thing.  And I want this to work with any 
file in the web-server directory space (or any directory space that i want).

In order to get this to work with the above suggestion, i have to make a 
"mptest" subdirectory and copy mptest.py to mptest/index.py.  Not as 
convenient as i would like for the developers.  Furthermore, my user has to 
include a "/" at the end of the URI in order to ensure relative-link 
reference in the host/domain part of the URI (or at least, that seems to be 
the apparent behavior...something which i don't fully understand 
yet).  Otherwise without the trailing "/" i get a reverse-dns-lookup 
happening that replaces the host-domain part of the URI automatically (at 
least with my apache-server and opera-client).  This is undersire-able for 
my system.

-Matt


From rsalz at zolera.com  Mon Jan  7 22:50:17 2002
From: rsalz at zolera.com (Rich Salz)
Date: Fri Jan  9 22:03:01 2004
Subject: [mod_python] How to hide implementation specifics inURIs/URLs?
References: <5.1.0.14.0.20020107191928.02441230@mail.core.com> <5.1.0.14.0.20020107203236.0243f0f8@mail.core.com>
Message-ID: <3C3A6C79.8E07BE5F@zolera.com>

> On my server, the URI:
> 
>    <http://192.168.1.50/tmp/mptest.py>

Yes, it will require your users to create mptest/index.py et al.
The translation /path/to/dir/foo.py to /path/to/dir/foo/index.py should
be pretty easy for them to figure out, however. :)

> convenient as i would like for the developers.  Furthermore, my user has to
> include a "/" at the end of the URI in order to ensure relative-link

I do'nt think so.  If someone asks for /path/to/dir/foo, apache will
send a redirect, telling them to ask for /path/to/dir/foo/, which will
then kick in the index trick.
You can set the ServerName (or something like that) in httpd.conf to be
whatever you need/want.
	/r$
-- 
Zolera Systems, Securing web services (XML, SOAP, Signatures,
Encryption)
http://www.zolera.com

From grisha at modpython.org  Mon Jan  7 22:51:23 2002
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 22:03:01 2004
Subject: [mod_python] How to hide implementation specifics in  URIs/URLs?
In-Reply-To: <5.1.0.14.0.20020107203236.0243f0f8@mail.core.com>
Message-ID: <Pine.BSF.4.32.0201072250560.59147-100000@localhost>

Take a look at the Apache SetHandler directive, I think it does what you
need.

Grisha


On Mon, 7 Jan 2002, Matthew England wrote:

> At 1/7/2002 08:08 PM, Rich Salz wrote:
> > > <http://www.w3.org/Provider/Style/URI.html>.  Specifically, I'd like to
> > > eliminate the references to ".py" in my mod_python-managed URIs.  What are
> > > my apache options to do this?
> >
> >AddHandler python-program .py
> >DirectoryIndex index.py index.php index.html
>
> Thanks for the quick response.  This appears to only work if i create a
> subdirectory with index.* files in it.  While this does get me one step
> closer to my goal, it doesn't get me all the way there.  Maybe I'll just
> have to deal with it?
>
> To be a little more specific:
>
> On my server, the URI:
>
>    <http://192.168.1.50/tmp/mptest.py>
>
> prints some arbitrary text in the browser display.
>
> I wanted:
>
>    <http://192.168.1.50/tmp/mptest>
>
> (without the ".py") to do the same thing.  And I want this to work with any
> file in the web-server directory space (or any directory space that i want).
>
> In order to get this to work with the above suggestion, i have to make a
> "mptest" subdirectory and copy mptest.py to mptest/index.py.  Not as
> convenient as i would like for the developers.  Furthermore, my user has to
> include a "/" at the end of the URI in order to ensure relative-link
> reference in the host/domain part of the URI (or at least, that seems to be
> the apparent behavior...something which i don't fully understand
> yet).  Otherwise without the trailing "/" i get a reverse-dns-lookup
> happening that replaces the host-domain part of the URI automatically (at
> least with my apache-server and opera-client).  This is undersire-able for
> my system.
>
> -Matt
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From rsalz at zolera.com  Mon Jan  7 22:55:02 2002
From: rsalz at zolera.com (Rich Salz)
Date: Fri Jan  9 22:03:01 2004
Subject: [mod_python] How to hide implementation specifics inURIs/URLs?
References: <5.1.0.14.0.20020107191928.02441230@mail.core.com> <5.1.0.14.0.20020107203236.0243f0f8@mail.core.com> <3C3A6C79.8E07BE5F@zolera.com>
Message-ID: <3C3A6D96.C7FFF660@zolera.com>

> Yes, it will require your users to create mptest/index.py et al.

arrgh, typing too late.  your "programmers", not users.

> The translation /path/to/dir/foo.py to /path/to/dir/foo/index.py should
> be pretty easy for them to figure out, however. :)
> 
> > convenient as i would like for the developers.  Furthermore, my user has to
> > include a "/" at the end of the URI in order to ensure relative-link
> 
> I do'nt think so.  If someone asks for /path/to/dir/foo, apache will
> send a redirect, telling them to ask for /path/to/dir/foo/, which will
> then kick in the index trick.
> You can set the ServerName (or something like that) in httpd.conf to be
> whatever you need/want.
>         /r$

From mike at mikebell.org  Mon Jan  7 20:17:17 2002
From: mike at mikebell.org (Mike Bell)
Date: Fri Jan  9 22:03:01 2004
Subject: [mod_python] How to hide implementation specifics in URIs/URLs?
In-Reply-To: <5.1.0.14.0.20020107203236.0243f0f8@mail.core.com>; from mengland@mengland.net on Mon, Jan 07, 2002 at 08:40:47PM -0600
References: <5.1.0.14.0.20020107191928.02441230@mail.core.com> <3C3A548F.7EDC3D6C@zolera.com> <5.1.0.14.0.20020107203236.0243f0f8@mail.core.com>
Message-ID: <20020107201716.T2731@kryten.mikebell.org>

On Mon, Jan 07, 2002 at 08:40:47PM -0600, Matthew England wrote:
> Thanks for the quick response.  This appears to only work if i create a 
> subdirectory with index.* files in it.  While this does get me one step 
> closer to my goal, it doesn't get me all the way there.  Maybe I'll just 
> have to deal with it?
> 
> To be a little more specific:
> 
> On my server, the URI:
> 
>    <http://192.168.1.50/tmp/mptest.py>
> 
> prints some arbitrary text in the browser display.
> 
> I wanted:
> 
>    <http://192.168.1.50/tmp/mptest>

How about

<Location /tmp/mptest>
  Sethandler python-program
  PythonHandler mptest
</Location>

?

From mengland at mengland.net  Mon Jan  7 22:59:25 2002
From: mengland at mengland.net (Matthew England)
Date: Fri Jan  9 22:03:01 2004
Subject: [mod_python] How to hide implementation specifics in
  URIs/URLs?
In-Reply-To: <20020107201716.T2731@kryten.mikebell.org>
References: <5.1.0.14.0.20020107203236.0243f0f8@mail.core.com>
 <5.1.0.14.0.20020107191928.02441230@mail.core.com>
 <3C3A548F.7EDC3D6C@zolera.com>
 <5.1.0.14.0.20020107203236.0243f0f8@mail.core.com>
Message-ID: <5.1.0.14.0.20020107225708.02439e40@mail.core.com>

At 1/7/2002 10:17 PM, Mike Bell wrote:

>How about
>
><Location /tmp/mptest>
>   Sethandler python-program
>   PythonHandler mptest
></Location>
>
>?

Unless I'm missing something (and again remember i'm a newbie), this 
doesn't help me for other files in other directories.

I basically want any python script to be stripped of its .py extension in 
the URI that uses it.  Otherwise, as i see it, a web-server developer has 
to make an entry in httpd.conf for *every* .py file.  ouch.

-Matt


From grisha at modpython.org  Tue Jan  8 01:30:13 2002
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 22:03:01 2004
Subject: [mod_python] How to hide implementation specifics in  URIs/URLs?
In-Reply-To: <5.1.0.14.0.20020107225708.02439e40@mail.core.com>
Message-ID: <Pine.BSF.4.32.0201080127550.63527-100000@localhost>


I think simply adding

SetHandler python-program
PythonHandler mptest

at the DocumentRoot level would achieve that effect, but you better be
prepared to handle *every* request with modpython, which includes images,
html, etc.

Grisha


On Mon, 7 Jan 2002, Matthew England wrote:

> At 1/7/2002 10:17 PM, Mike Bell wrote:
>
> >How about
> >
> ><Location /tmp/mptest>
> >   Sethandler python-program
> >   PythonHandler mptest
> ></Location>
> >
> >?
>
> Unless I'm missing something (and again remember i'm a newbie), this
> doesn't help me for other files in other directories.
>
> I basically want any python script to be stripped of its .py extension in
> the URI that uses it.  Otherwise, as i see it, a web-server developer has
> to make an entry in httpd.conf for *every* .py file.  ouch.
>
> -Matt
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From neilb at nbt.co.za  Tue Jan  8 10:19:31 2002
From: neilb at nbt.co.za (Neil Beattie)
Date: Fri Jan  9 22:03:01 2004
Subject: [mod_python] Please Help
Message-ID: <NFBBKACIPKNFKAHLGHGBKEDADOAA.neilb@nbt.co.za>

Hi,
I'm am in a bit of trouble as I need to demo some code that used Python 2.2
I am using Python 2.2 and Apache 2.3.22 and Windows nt.
Is there anyone who could let me have a compiled dll.
I can change to Apache 2.3.20 if required.

I have tried compiling Mod_Python using C++ 5 but have had no success. Is it
possible?

Regards,
Neil.


From foofboy at speakeasy.net  Tue Jan  8 11:38:23 2002
From: foofboy at speakeasy.net (Robert Sherwood)
Date: Fri Jan  9 22:03:02 2004
Subject: [mod_python] TransHandler help?
In-Reply-To: <Pine.BSF.4.32.0201071910200.58948-100000@localhost>
References: <Pine.BSF.4.32.0201071910200.58948-100000@localhost>
Message-ID: <1010507904.19779.5.camel@lucifer>

Hi,

Transhandler translates a request from a URL to a filename. Though you
can rewrite a URL, I found it was easier simply to use the URL that I
had, particularly since, In my case, I could count on the argument order
and such.

This is an extremely simple example, but I wanted to set the file
request to main.py, which handled all the URL processing itself. The
important thing to remember is that the TransHandler figures out which
file you're requesting based on the URL you pass in. It can obviously do
any processing you need, but that is it's primary function.

from mod_python import apache
import string

def transhandler(req):
    #We want to use main.py
    req.filename = "main.py"
    return apache.OK

Again, I didn't use mod_python to process the URL, that is done by the
main Python Handler, as below (adapted slightly for your situation):

def handler(req):
    #remove trailing slash, if present
    URI = req.uri
    if URI[len(URI)-1] == '/':
        URI = URI[:len(URI)-1]

    #disassemble the URI for processing
    components = string.split(URI,'/')[1:]

    sessionID = components[0]

    command = components[1]

    what = components[2]

    # Do stuff here

There's no error checking or anything, but I found it was easier to use
the request as it came in, rather than rewriting it and processing that.
However, I had to use the TransHandler to set the request filename to
the script that did the processing.

Hope this helps.

Rob



On Mon, 2002-01-07 at 19:10, Gregory (Grisha) Trubetskoy wrote:
> 
> I'll have look into this some day. I *think* what mod_rewrite does is
> create a sub-request, but sub-requests are not supported by mod_python (i
> don't think there is anything that makes it impossible, the code is simple
> not there, it's just a SMOP ("simple matter of programming")...)
> 
> Grisha
> 
> 
> On Mon, 7 Jan 2002, Alan Kennedy wrote:
> 
> > Thanks Olly,
> >
> > It's good to know that I'm not the only who can't get it to work :-\
> >
> > I've been avoiding relying on mod_rewrite and its "cool voodoo". I have the training and
> > background to get my head around it, but members of my team unfortunately don't, whereas
> > they are all very comfortable with python.......
> >
> > Thanks for the reply,
> >
> > Cheers,
> >
> > Alan.
> >
> > Oliver Cope wrote:
> >
> > > On Mon, Jan 07, 2002 at 07:32:10PM +0000, Alan Kennedy wrote:
> > > >
> > > > I'm trying to get a PythonTransHandler working.
> > > >
> > > <snip>
> > >
> > > > *without* sending a redirect back to the client. Or a more sophisticated
> > > > example, how could I turn a request for
> > > >
> > > > /admin/abc1234/update/item4567
> > > >
> > > > into a request for
> > > >
> > > > /admin/doit.html?sessionID=abc1234&command=update&what=item4567
> > > >
> > > I too have spent some time trying to configure a PythonTransHandler, but
> > > couldn't get it to work :o(
> > >
> > > I've had more luck using mod_rewrite for this kind of thing:
> > >
> > > RewriteEngine On
> > > RewriteRule /admin/(.*)/(.*)/(.*) /admin/doit.html?sessionID=$1&command=$2&what=$3 [PT]
> > >
> > > This will rewrite requests without sending redirects back to the client.
> > > You can remove the '[PT]' if you don't need to further process the
> > > rewritten URL (e.g. through a PythonHandler).
> > >
> > > Obviously regular expressions are not as flexible as a Python
> > > handler can be, so this will only work for simple translations.  Also
> > > you'll need to have Apache compiled with mod_rewrite, I'm not sure if
> > > this is the default.
> > >
> > > Regards,
> > >
> > > Olly.
> > >
> > > _______________________________________________
> > > Mod_python mailing list
> > > Mod_python@modpython.org
> > > http://www.modpython.org/mailman/listinfo/mod_python
> >
> > _______________________________________________
> > Mod_python mailing list
> > Mod_python@modpython.org
> > http://www.modpython.org/mailman/listinfo/mod_python
> >
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 



From modpython at xhaus.com  Tue Jan  8 21:30:45 2002
From: modpython at xhaus.com (Alan Kennedy)
Date: Fri Jan  9 22:03:02 2004
Subject: [mod_python] TransHandler help?
References: <Pine.BSF.4.32.0201071910200.58948-100000@localhost> <1010507904.19779.5.camel@lucifer>
Message-ID: <3C3B6504.2AC7A3AD@xhaus.com>

Rob,

Bingo! That hit the nail square on the head, and drove it right home!

Excellent!

I obviously didn't read the documentation thoroughly enough. It states in section 5.1.3 about
PythonTransHandler:

"This routine gives allows for an opportunity to translate the URI into an actual *filename*" [my
emphasis].

That's filename, NOT uri. I mixed it up, and tried to modify the request URI, which is a
read-only attribute. Hence why I couldn't get it to work :*)

Many thanks for clearing this up. This means that I can forge ahead and rewrite URLs to contain
session IDs, without having to resort to "?sess=xyz" style query parameters.

Thanks again.

Alan.

Robert Sherwood wrote:

> Hi,
>
> Transhandler translates a request from a URL to a filename. Though you
> can rewrite a URL, I found it was easier simply to use the URL that I
> had, particularly since, In my case, I could count on the argument order
> and such.
>
> This is an extremely simple example, but I wanted to set the file
> request to main.py, which handled all the URL processing itself. The
> important thing to remember is that the TransHandler figures out which
> file you're requesting based on the URL you pass in. It can obviously do
> any processing you need, but that is it's primary function.
>
> from mod_python import apache
> import string
>
> def transhandler(req):
>     #We want to use main.py
>     req.filename = "main.py"
>     return apache.OK
>
> Again, I didn't use mod_python to process the URL, that is done by the
> main Python Handler, as below (adapted slightly for your situation):
>
> def handler(req):
>     #remove trailing slash, if present
>     URI = req.uri
>     if URI[len(URI)-1] == '/':
>         URI = URI[:len(URI)-1]
>
>     #disassemble the URI for processing
>     components = string.split(URI,'/')[1:]
>
>     sessionID = components[0]
>
>     command = components[1]
>
>     what = components[2]
>
>     # Do stuff here
>
> There's no error checking or anything, but I found it was easier to use
> the request as it came in, rather than rewriting it and processing that.
> However, I had to use the TransHandler to set the request filename to
> the script that did the processing.
>
> Hope this helps.
>
> Rob


From neilb at nbt.co.za  Wed Jan  9 22:59:28 2002
From: neilb at nbt.co.za (Neil Beattie)
Date: Fri Jan  9 22:03:02 2004
Subject: [mod_python] DLL for Windows
Message-ID: <NFBBKACIPKNFKAHLGHGBIEHODOAA.neilb@nbt.co.za>

Hi All,
I am desperately looking for a compiled dll for mod_python for Python 2.2
I can use Apache 3.20 or 3.22

I am a newbie at all things open source having decided to migrate my product
from VB last year.

I have been trying to compile mod_python using VC++ 5 but have not
succeeded.

Any help would be appreciated.

Neil




From neilb at nbt.co.za  Thu Jan 10 11:04:20 2002
From: neilb at nbt.co.za (Neil Beattie)
Date: Fri Jan  9 22:03:02 2004
Subject: [mod_python] DLL for Windows
In-Reply-To: <NFBBKACIPKNFKAHLGHGBIEHODOAA.neilb@nbt.co.za>
Message-ID: <NFBBKACIPKNFKAHLGHGBGEJJDOAA.neilb@nbt.co.za>

Ok I managed to compile a dll for Python 2.2 that works for me.
Anybody in the same position that I was in need it?
Neil.


> -----Original Message-----
> From: mod_python-admin@modpython.org
> [mailto:mod_python-admin@modpython.org]On Behalf Of Neil Beattie
> Sent: Wednesday, January 09, 2002 10:59 PM
> To: mod_python@modpython.org
> Subject: [mod_python] DLL for Windows
> 
> 
> Hi All,
> I am desperately looking for a compiled dll for mod_python for Python 2.2
> I can use Apache 1.3.20 or 3.22
> 
> I am a newbie at all things open source having decided to migrate 
> my product
> from VB last year.
> 
> I have been trying to compile mod_python using VC++ 5 but have not
> succeeded.
> 
> Any help would be appreciated.
> 
> Neil
> 
> 
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 

From jgardn at alumni.washington.edu  Thu Jan 10 21:58:28 2002
From: jgardn at alumni.washington.edu (Jonathan Gardner)
Date: Fri Jan  9 22:03:02 2004
Subject: [mod_python] Redirection with the Location Header and publisher handler
Message-ID: <200201101250.g0ACoIJ12496@my.knctv.co.kr>

I read through the documentation a few times. I am not sure how to do this.

What I want to do is to receive a hit to a function, and then have that 
function redirect the browser to another location.

For instance, I have a function that will present a form for adding an entry 
into a database. When the user hits "submit", I want to have the function 
that inserts the stuff into the db called, and then have it redirect the 
browser back to the original page with a status message of the sort "Row 
added" or "Cannot enter duplicate items in a unique column" or whatnot.

I know that there are two ways of doing this:

1) Sending some HTML that will redirect it to the appropriate location. This 
is a non-smooth solution.

2) Sending the Location header with the new location.

 (It's been a few months since I have done this, and I don't have the example 
code, plus it was done in mod_perl... this is three strikes against my 
memory. I could be wrong).

I've tried something like this: (Remember, I am using publisher as the 
handler)

def myfunc(req):
	req.headers_out['Location']="http://url/to/new/location"
	req.send_http_headers()
	return apache.OK

and I've tried a bunch of variations on this theme... but nothing seems to 
work write. Can someone give me a pointer or let me know where I'm confused?

Of course, I've read all the documentation, but nothing seems to help.

Jonathan



From foofboy at speakeasy.net  Thu Jan 10 11:31:42 2002
From: foofboy at speakeasy.net (Robert Sherwood)
Date: Fri Jan  9 22:03:02 2004
Subject: [mod_python] Redirection with the Location Header and publisher
	handler
In-Reply-To: <200201101250.g0ACoIJ12496@my.knctv.co.kr>
References: <200201101250.g0ACoIJ12496@my.knctv.co.kr>
Message-ID: <1010680303.3287.2.camel@lucifer>

I think you're looking for this:

req.content_type = 'text/html'
req.err_headers_out['Refresh'] = '3;http://usl/to/new/location'
#Redirect after 3 Seconds
req.send_http_header()
return apache.HTTP_MOVED_PERMANENTLY

Rob


On Thu, 2002-01-10 at 07:58, Jonathan Gardner wrote:
> I read through the documentation a few times. I am not sure how to do this.
> 
> What I want to do is to receive a hit to a function, and then have that 
> function redirect the browser to another location.
> 
> For instance, I have a function that will present a form for adding an entry 
> into a database. When the user hits "submit", I want to have the function 
> that inserts the stuff into the db called, and then have it redirect the 
> browser back to the original page with a status message of the sort "Row 
> added" or "Cannot enter duplicate items in a unique column" or whatnot.
> 
> I know that there are two ways of doing this:
> 
> 1) Sending some HTML that will redirect it to the appropriate location. This 
> is a non-smooth solution.
> 
> 2) Sending the Location header with the new location.
> 
>  (It's been a few months since I have done this, and I don't have the example 
> code, plus it was done in mod_perl... this is three strikes against my 
> memory. I could be wrong).
> 
> I've tried something like this: (Remember, I am using publisher as the 
> handler)
> 
> def myfunc(req):
> 	req.headers_out['Location']="http://url/to/new/location"
> 	req.send_http_headers()
> 	return apache.OK
> 
> and I've tried a bunch of variations on this theme... but nothing seems to 
> work write. Can someone give me a pointer or let me know where I'm confused?
> 
> Of course, I've read all the documentation, but nothing seems to help.
> 
> Jonathan
> 
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 



From sep27 at cornell.edu  Thu Jan 10 12:04:56 2002
From: sep27 at cornell.edu (S.Plake)
Date: Fri Jan  9 22:03:02 2004
Subject: [mod_python] (no subject)
Message-ID: <5.1.0.14.2.20020110120439.00b0a920@postoffice.mail.cornell.edu>

I need to search for a string in an html page and add code at a particular
line. This can be done online or off-line. I am having a problem searching
or the string. Can someone help? Thanks


From cl at scriptall.com  Thu Jan 10 14:33:55 2002
From: cl at scriptall.com (Chuck Lima)
Date: Fri Jan  9 22:03:02 2004
Subject: [mod_python] apache.py
Message-ID: <1010691235.1974.24.camel@px101>

Hello,

I may be a little late to the game on this one, but here goes.

python 2.1
apache 1.3.22
mod_python 2.7.6

Lines 356 and 359 of apache.py were hacking off the "y" from my modules
i.e.: "mymodule.py"  was not found because apache.py was looking for
"mymodule.p".  It seems the intention was to avoid loading compiled
modules.  mod_pyton has never compiled my modules -- is this not
standard?


Changes I made - -

original 356:
if os.path.exists(filepath[:-1]) :

new 356:
if os.path.exists(filepath) :

Also, "filepath[:-1]" on line 359 was changed to "filepath".

This seems to have solved the problem without adversely affecting the
running of my scripts.


The really odd thing, though; is that I've got another system running
the (practically) same setup with no mods.  The difference being the
apache version.

no mods here:
python 2.1
apache 1.3.19
mod_python 2.7.6

Comments, please.

Thanks,
-Chuck


From grisha at modpython.org  Thu Jan 10 15:59:10 2002
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 22:03:02 2004
Subject: [mod_python] Redirection with the Location Header and publisher
 handler
In-Reply-To: <200201101250.g0ACoIJ12496@my.knctv.co.kr>
Message-ID: <Pine.BSF.4.32.0201101556070.34235-100000@localhost>


if you're using the publisher, then something like this should work:

def myfunc(req):
 	req.headers_out['Location']="http://blah/blah"
	req.status = apache.HTTP_MOVED_TEMPORARILY
 	return 'You are being redirected to a <a href="http://blah/blah"> new location</a>'


On Thu, 10 Jan 2002, Jonathan Gardner wrote:

> def myfunc(req):
> 	req.headers_out['Location']="http://url/to/new/location"
> 	req.send_http_headers()
> 	return apache.OK



From grisha at modpython.org  Thu Jan 10 16:01:02 2002
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 22:03:02 2004
Subject: [mod_python] apache.py
In-Reply-To: <1010691235.1974.24.camel@px101>
Message-ID: <Pine.BSF.4.32.0201101600400.34235-100000@localhost>

http://www.modpython.org/FAQ/faqw.py?req=all#2.3

On 10 Jan 2002, Chuck Lima wrote:

> Hello,
>
> I may be a little late to the game on this one, but here goes.
>
> python 2.1
> apache 1.3.22
> mod_python 2.7.6
>
> Lines 356 and 359 of apache.py were hacking off the "y" from my modules
> i.e.: "mymodule.py"  was not found because apache.py was looking for
> "mymodule.p".  It seems the intention was to avoid loading compiled
> modules.  mod_pyton has never compiled my modules -- is this not
> standard?
>
>
> Changes I made - -
>
> original 356:
> if os.path.exists(filepath[:-1]) :
>
> new 356:
> if os.path.exists(filepath) :
>
> Also, "filepath[:-1]" on line 359 was changed to "filepath".
>
> This seems to have solved the problem without adversely affecting the
> running of my scripts.
>
>
> The really odd thing, though; is that I've got another system running
> the (practically) same setup with no mods.  The difference being the
> apache version.
>
> no mods here:
> python 2.1
> apache 1.3.19
> mod_python 2.7.6
>
> Comments, please.
>
> Thanks,
> -Chuck
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From jgardn at alumni.washington.edu  Fri Jan 11 07:02:12 2002
From: jgardn at alumni.washington.edu (Jonathan Gardner)
Date: Fri Jan  9 22:03:02 2004
Subject: [mod_python] Redirection with the Location Header and publisher handler
In-Reply-To: <Pine.BSF.4.32.0201101556070.34235-100000@localhost>
References: <Pine.BSF.4.32.0201101556070.34235-100000@localhost>
Message-ID: <200201102153.g0ALrlJ09318@my.knctv.co.kr>

On Friday 11 January 2002 05:59 am, Gregory (Grisha) Trubetskoy wrote:
> if you're using the publisher, then something like this should work:
>
> def myfunc(req):
>  	req.headers_out['Location']="http://blah/blah"
> 	req.status = apache.HTTP_MOVED_TEMPORARILY
>  	return 'You are being redirected to a <a href="http://blah/blah"> new
> location</a>'
>

1) There's a status attribute? =) I think this should be added to the 
documentation.

2) I have scoured the 'net for a good explanation of the HTTP error codes, to 
no avail.

It looks like you are saying HTTP_MOVED_TEMPORARILY means "Dear browser, I 
want you to go to this new place instead of here. But next time you get a 
link here, come straight here without delay, do not pass go, and do not 
collect $200."

Conversely, HTTP_MOVED_PERMANENTLY might mean, "Dear browser, how many times 
have I got to tell you you won't find anything here! Stop looking here, go to 
this other place to find what you are looking for."

What is HTTP_TEMPORARY_REDIRECT for? Does it mean the same as 
HTTP_MOVED_TEMPORARILY?

Jonathan

From tree at basistech.com  Thu Jan 10 17:07:50 2002
From: tree at basistech.com (Tom Emerson)
Date: Fri Jan  9 22:03:02 2004
Subject: [mod_python] Redirection with the Location Header and publisher handler
In-Reply-To: <200201102153.g0ALrlJ09318@my.knctv.co.kr>
References: <Pine.BSF.4.32.0201101556070.34235-100000@localhost>
	<200201102153.g0ALrlJ09318@my.knctv.co.kr>
Message-ID: <15422.4278.657220.93787@magrathea.basistech.com>

Jonathan Gardner writes:
[...]
> 2) I have scoured the 'net for a good explanation of the HTTP error codes, to 
> no avail.

Section 10 of RFC 2616 (HTTP 1.1) describes the HTTP result codes in
great detail, describing the behavior of a conforming
implementation. Section 10.3 covers redirection.

    -tree

-- 
Tom Emerson                                          Basis Technology Corp.
Sr. Computational Linguist                         http://www.basistech.com
  "Beware the lollipop of mediocrity: lick it once and you suck forever"

From jgardn at alumni.washington.edu  Fri Jan 11 07:14:33 2002
From: jgardn at alumni.washington.edu (Jonathan Gardner)
Date: Fri Jan  9 22:03:02 2004
Subject: [mod_python] Patch - **args with Publisher
Message-ID: <200201102206.g0AM68J09472@my.knctv.co.kr>

I expected to be able to get all the script args with a piece of code like 
this:

def scriptname(req, **args):
	...

but instead I got none of them at all.

Here is the patch that does what I expect. If I need to submit this 
differently, let me know.

*** publisher.py	Mon Jul  9 21:54:40 2001
--- /usr/local/lib/python2.0/site-packages/mod_python/publisher.py	Fri Jan 11 
07:08:51 2002
***************
*** 150,155 ****
--- 150,157 ----
          # and for that we need to get a list of them. There
          # are a few options for callable objects here:
  
+         # Whether or not there is a **args argument in the function list.
+         has_keyarg = 0
          if str(type(object)) == "<type 'instance'>":
              # instances are callable when they have __call__()
              object = object.__call__
***************
*** 158,172 ****
              # function
              fc = object.func_code
              expected = fc.co_varnames[0:fc.co_argcount]
          elif hasattr(object, 'im_func'):
              # method
              fc = object.im_func.func_code
              expected = fc.co_varnames[1:fc.co_argcount]
  
          # remove unexpected args
!         for name in args.keys():
!             if name not in expected:
!                 del args[name]
  
          result = apply(object, (), args)
  
--- 160,177 ----
              # function
              fc = object.func_code
              expected = fc.co_varnames[0:fc.co_argcount]
+             has_keyarg = fc.co_flags & 0x08
          elif hasattr(object, 'im_func'):
              # method
              fc = object.im_func.func_code
              expected = fc.co_varnames[1:fc.co_argcount]
+             has_keyarg = fc.co_flags & 0x08
  
          # remove unexpected args
!         if not has_keyarg:
!             for name in args.keys():
!                 if name not in expected:
!                     del args[name]
  
          result = apply(object, (), args)

From jgardn at alumni.washington.edu  Fri Jan 11 07:26:18 2002
From: jgardn at alumni.washington.edu (Jonathan Gardner)
Date: Fri Jan  9 22:03:02 2004
Subject: [mod_python] Redirection with the Location Header and publisher handler
In-Reply-To: <15422.4278.657220.93787@magrathea.basistech.com>
References: <Pine.BSF.4.32.0201101556070.34235-100000@localhost> <200201102153.g0ALrlJ09318@my.knctv.co.kr> <15422.4278.657220.93787@magrathea.basistech.com>
Message-ID: <200201102217.g0AMHqJ09593@my.knctv.co.kr>

On Friday 11 January 2002 07:07 am, you wrote:
> Jonathan Gardner writes:
> [...]
>
> > 2) I have scoured the 'net for a good explanation of the HTTP error
> > codes, to no avail.
>
> Section 10 of RFC 2616 (HTTP 1.1) describes the HTTP result codes in
> great detail, describing the behavior of a conforming
> implementation. Section 10.3 covers redirection.
>
>     -tree

I know it probably sounds like you're speaking with an idiot, but you have no 
idea how much that has helped. 

Where can I find a listing of all these RFC's and what they stand for?

Thanks a million, literally!

Jonathan

From tree at basistech.com  Thu Jan 10 17:35:35 2002
From: tree at basistech.com (Tom Emerson)
Date: Fri Jan  9 22:03:02 2004
Subject: [mod_python] Redirection with the Location Header and publisher handler
In-Reply-To: <200201102217.g0AMHqJ09593@my.knctv.co.kr>
References: <Pine.BSF.4.32.0201101556070.34235-100000@localhost>
	<200201102153.g0ALrlJ09318@my.knctv.co.kr>
	<15422.4278.657220.93787@magrathea.basistech.com>
	<200201102217.g0AMHqJ09593@my.knctv.co.kr>
Message-ID: <15422.5943.969913.409274@magrathea.basistech.com>

Jonathan Gardner writes:
[...]
> I know it probably sounds like you're speaking with an idiot, but you have no 
> idea how much that has helped. 

I'm glad I could be of assistance.

> Where can I find a listing of all these RFC's and what they stand for?

Try <http://www.ietf.org/rfc.html> : you can retrieve by number of
view the index which includes titles.

For web-related technology, the first place I would look, however, is
the W3C's website, <http://www.w3.org/>. In particular you can find a
lot of information on HTTP and its related technology at

<http://www.w3.org/Protocols/>

including references to the RFC I mentioned.

    -tree

-- 
Tom Emerson                                          Basis Technology Corp.
Sr. Computational Linguist                         http://www.basistech.com
  "Beware the lollipop of mediocrity: lick it once and you suck forever"

From grisha at modpython.org  Thu Jan 10 17:59:45 2002
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 22:03:02 2004
Subject: [mod_python] Redirection with the Location Header and publisher
 handler
In-Reply-To: <200201102153.g0ALrlJ09318@my.knctv.co.kr>
Message-ID: <Pine.BSF.4.32.0201101735430.34235-100000@localhost>


On Fri, 11 Jan 2002, Jonathan Gardner wrote:

> 1) There's a status attribute? =) I think this should be added to the
> documentation.

Yes, somehow it slipped in the documentation, but the FAQ entry regarding
redirection shows it.

> 2) I have scoured the 'net for a good explanation of the HTTP error codes, to
> no avail.

Check out RFC2616 http://www.w3.org/Protocols/rfc2616/rfc2616.txt

I don't know what the difference between 302 and 307 is. If you look at
the (older) RFC2068, 302 used to be called "moved temporarily", and with
RFC2616 it became "found"  and a new code 307 "temporary redirect" was
introduced which seems to be functionally equivalent to 302 (the text is
word for word the same).

Here is a link I found that talks about this stuff
http://ppewww.ph.gla.ac.uk/~flavell/www/post-redirect.html

For all practical purposes I would use 302 - I suspect 307 is not
supported on many older browsers.

Grisha


From grisha at modpython.org  Thu Jan 10 18:01:22 2002
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 22:03:02 2004
Subject: [mod_python] Patch - **args with Publisher
In-Reply-To: <200201102206.g0AM68J09472@my.knctv.co.kr>
Message-ID: <Pine.BSF.4.32.0201101800280.34235-100000@localhost>

Thanks - someone already submitted a patch for this and version 3 will
behave this way.

On Fri, 11 Jan 2002, Jonathan Gardner wrote:

> I expected to be able to get all the script args with a piece of code like
> this:
>
> def scriptname(req, **args):
> 	...
>
> but instead I got none of them at all.
>
> Here is the patch that does what I expect. If I need to submit this
> differently, let me know.
>
> *** publisher.py	Mon Jul  9 21:54:40 2001
> --- /usr/local/lib/python2.0/site-packages/mod_python/publisher.py	Fri Jan 11
> 07:08:51 2002
> ***************
> *** 150,155 ****
> --- 150,157 ----
>           # and for that we need to get a list of them. There
>           # are a few options for callable objects here:
>
> +         # Whether or not there is a **args argument in the function list.
> +         has_keyarg = 0
>           if str(type(object)) == "<type 'instance'>":
>               # instances are callable when they have __call__()
>               object = object.__call__
> ***************
> *** 158,172 ****
>               # function
>               fc = object.func_code
>               expected = fc.co_varnames[0:fc.co_argcount]
>           elif hasattr(object, 'im_func'):
>               # method
>               fc = object.im_func.func_code
>               expected = fc.co_varnames[1:fc.co_argcount]
>
>           # remove unexpected args
> !         for name in args.keys():
> !             if name not in expected:
> !                 del args[name]
>
>           result = apply(object, (), args)
>
> --- 160,177 ----
>               # function
>               fc = object.func_code
>               expected = fc.co_varnames[0:fc.co_argcount]
> +             has_keyarg = fc.co_flags & 0x08
>           elif hasattr(object, 'im_func'):
>               # method
>               fc = object.im_func.func_code
>               expected = fc.co_varnames[1:fc.co_argcount]
> +             has_keyarg = fc.co_flags & 0x08
>
>           # remove unexpected args
> !         if not has_keyarg:
> !             for name in args.keys():
> !                 if name not in expected:
> !                     del args[name]
>
>           result = apply(object, (), args)
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From cl at scriptall.com  Thu Jan 10 18:02:21 2002
From: cl at scriptall.com (Chuck Lima)
Date: Fri Jan  9 22:03:02 2004
Subject: [mod_python] apache.py
In-Reply-To: <3C3E0CF4.5020206@city.dk>
References: <1010691235.1974.24.camel@px101>  <3C3E0CF4.5020206@city.dk>
Message-ID: <1010703742.2071.2.camel@px101>

Thanks, will do.


On Thu, 2002-01-10 at 16:51, Ole Hansen wrote:
> Hi,
> 
> I had the very same problem, and for a while I thought I was the only 
> one in the universe. I also made similar hack.
> 
> This is a bug in python itself. The bug was introduced somewhere between 
> Python 2.0 and 2.1.1 and fixed in Python 2.2b3, but Python 2.2 (final) 
> has been released now, so I would go for the final Python 2.2.
> 
> Happy coding :-)
> 
> Br,
> Ole Hansen
> 
> 
> 
> Chuck Lima wrote:
> 
> > Hello,
> > 
> > I may be a little late to the game on this one, but here goes.
> > 
> > python 2.1
> > apache 1.3.22
> > mod_python 2.7.6
> > 
> > Lines 356 and 359 of apache.py were hacking off the "y" from my modules
> > i.e.: "mymodule.py"  was not found because apache.py was looking for
> > "mymodule.p".  It seems the intention was to avoid loading compiled
> > modules.  mod_pyton has never compiled my modules -- is this not
> > standard?
> > 
> > 
> > Changes I made - -
> > 
> > original 356:
> > if os.path.exists(filepath[:-1]) :
> > 
> > new 356:
> > if os.path.exists(filepath) :
> > 
> > Also, "filepath[:-1]" on line 359 was changed to "filepath".
> > 
> > This seems to have solved the problem without adversely affecting the
> > running of my scripts.
> > 
> > 
> > The really odd thing, though; is that I've got another system running
> > the (practically) same setup with no mods.  The difference being the
> > apache version.
> > 
> > no mods here:
> > python 2.1
> > apache 1.3.19
> > mod_python 2.7.6
> > 
> > Comments, please.
> > 
> > Thanks,
> > -Chuck
> > 
> > _______________________________________________
> > Mod_python mailing list
> > Mod_python@modpython.org
> > http://www.modpython.org/mailman/listinfo/mod_python
> > 
> > .
> > 
> > 
> 
> 
> 
> 



From oliver at redgecko.org  Thu Jan 10 23:12:46 2002
From: oliver at redgecko.org (Oliver Cope)
Date: Fri Jan  9 22:03:02 2004
Subject: [mod_python] Redirection with the Location Header and publisher handler
In-Reply-To: <200201102217.g0AMHqJ09593@my.knctv.co.kr>
References: <Pine.BSF.4.32.0201101556070.34235-100000@localhost> <200201102153.g0ALrlJ09318@my.knctv.co.kr> <15422.4278.657220.93787@magrathea.basistech.com> <200201102217.g0AMHqJ09593@my.knctv.co.kr>
Message-ID: <20020110231246.GA23053@canoodle.redgecko.org>

On Fri, Jan 11, 2002 at 07:26:18AM +0900, Jonathan Gardner wrote:
> >
> > Section 10 of RFC 2616 (HTTP 1.1) describes the HTTP result codes in
> > great detail, describing the behavior of a conforming
> > implementation. Section 10.3 covers redirection.
> >
> >     -tree
> 
> Where can I find a listing of all these RFC's and what they stand for?
> 
http://rfc.net/

The RFC mentioned above may be found at http://rfc.net/rfc2616.html

Olly.


From lbergman at abi.tconline.net  Fri Jan 11 09:05:17 2002
From: lbergman at abi.tconline.net (Lewis Bergman)
Date: Fri Jan  9 22:03:02 2004
Subject: [mod_python] error on make install
Message-ID: <200201111505.g0BF5Hb32618@lewis.abi.tconline.net>

I have searched the recent archives and I haven't seen anyone else with this 
problem. I therefore assume I have done something stupid. This is my first 
attempt at mod_python and I am new to python as well.

Background:
Python 2.2 , configured --with-threads=no
mod_python 2.7.6
Apache 1.3.22-2 , (rpm)
Apache-devel 1.3.22-2 , (rpm) for apxs

My configure line looks like this:
./configure --with-apxs=/usr/sbin/apxs --with-python=/root/tar/Python-2.2
no errors here.
I do a make and get no errors.

On make install I get this:
python /usr/local/lib/python2.2/compileall.py 
/usr/local/lib/python2.2/site-packages/mod_python
Traceback (innermost last):
  File "/usr/local/lib/python2.2/compileall.py", line 147, in ?
    exit_status = not main()
  File "/usr/local/lib/python2.2/compileall.py", line 104, in main
    import getopt
  File "/usr/local/lib/python2.2/getopt.py", line 101
    possibilities = [o for o in longopts if o.startswith(opt)]
                                   ^
SyntaxError: invalid syntax
make[2]: *** [install_py_lib] Error 1
make[2]: Leaving directory `/root/tar/mod_python-2.7.6'
make[1]: *** [install_dso] Error 2
make[1]: Leaving directory `/root/tar/mod_python-2.7.6'
make: *** [install] Error 2

Does anyone have a clue as to what I have (or have not) done?
It says syntax error but no-one else seems to be having difficulty. Any help 
is greatly appreciated.
-- 
Lewis Bergman
Texas Communications
4309 Maple St.
Abilene, TX 79602-8044
915-695-6962 ext 115

From jgardn at alumni.washington.edu  Sat Jan 12 12:37:03 2002
From: jgardn at alumni.washington.edu (Jonathan Gardner)
Date: Fri Jan  9 22:03:02 2004
Subject: [mod_python] Redirection with the Location Header and publisher handler
In-Reply-To: <1010680303.3287.2.camel@lucifer>
References: <200201101250.g0ACoIJ12496@my.knctv.co.kr> <1010680303.3287.2.camel@lucifer>
Message-ID: <200201120330.g0C3SBJ22837@my.knctv.co.kr>

On Friday 11 January 2002 01:31 am, Robert Sherwood wrote:
> I think you're looking for this:
>
> req.content_type = 'text/html'
> req.err_headers_out['Refresh'] = '3;http://usl/to/new/location'
> #Redirect after 3 Seconds
> req.send_http_header()
> return apache.HTTP_MOVED_PERMANENTLY
>
> Rob

It wasn't what I was looking for, and it doesn't quite work right.

I can't seem to get the Refresh header to behave properly with the default 
setting of Apache. However, this works wonderfully:

req.headers_out['Location'] = "http://www.google.com/"
return apache.HTTP_MOVED_PERMANENTLY

Of course, you can use HTTP_MOVED_TEMPORARILY or HTTP_TEMPORARY_REDIRECT is 
you like.

Jonathan

From foofboy at speakeasy.net  Sat Jan 12 12:38:04 2002
From: foofboy at speakeasy.net (Robert Sherwood)
Date: Fri Jan  9 22:03:02 2004
Subject: [mod_python] Redirection with the Location Header and publisher
	handler
In-Reply-To: <200201120330.g0C3SBJ22837@my.knctv.co.kr>
References: <200201101250.g0ACoIJ12496@my.knctv.co.kr>
	<1010680303.3287.2.camel@lucifer> 
	<200201120330.g0C3SBJ22837@my.knctv.co.kr>
Message-ID: <1010857085.6132.2.camel@lucifer>

Okay, now I'm confused. I didn't think that the configuration of the
webserver would have any effect on this. It should be one hundred
percent dependent on the browser. Looks like I have some reading to do.

Rob

On Fri, 2002-01-11 at 22:37, Jonathan Gardner wrote:
> On Friday 11 January 2002 01:31 am, Robert Sherwood wrote:
> > I think you're looking for this:
> >
> > req.content_type = 'text/html'
> > req.err_headers_out['Refresh'] = '3;http://usl/to/new/location'
> > #Redirect after 3 Seconds
> > req.send_http_header()
> > return apache.HTTP_MOVED_PERMANENTLY
> >
> > Rob
> 
> It wasn't what I was looking for, and it doesn't quite work right.
> 
> I can't seem to get the Refresh header to behave properly with the default 
> setting of Apache. However, this works wonderfully:
> 
> req.headers_out['Location'] = "http://www.google.com/"
> return apache.HTTP_MOVED_PERMANENTLY
> 
> Of course, you can use HTTP_MOVED_TEMPORARILY or HTTP_TEMPORARY_REDIRECT is 
> you like.
> 
> Jonathan
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 



From modpython at xhaus.com  Sun Jan 13 23:05:18 2002
From: modpython at xhaus.com (Alan Kennedy)
Date: Fri Jan  9 22:03:02 2004
Subject: [mod_python] HTTP compression.
Message-ID: <3C4212AE.47644F9E@xhaus.com>

Greetings all,

If anyone is interested, I've put together a page about compressing
content over HTTP with gzip, to minimise bandwidth usage. You can read
the page at

http://www.iol.ie/~alank/python/httpcomp.html

There is some sample mod_python code on the page.

Regards,

Alan.



From jfk at informaticon.dk  Mon Jan 14 09:36:15 2002
From: jfk at informaticon.dk (=?iso-8859-1?q?J=F8rgen=20Fr=F8jk=20Kj=E6rsgaard?=)
Date: Fri Jan  9 22:03:02 2004
Subject: [mod_python] Re: HTTP compression.
In-Reply-To: <3C4212AE.47644F9E@xhaus.com>
References: <3C4212AE.47644F9E@xhaus.com>
Message-ID: <02011409361500.01463@adele>

Mandag 14. Januar 2002 00:05 skrev du:
> Greetings all,
>
> If anyone is interested, I've put together a page about compressing
> content over HTTP with gzip, to minimise bandwidth usage. You can read
> the page at
>
> http://www.iol.ie/~alank/python/httpcomp.html
>
> There is some sample mod_python code on the page.

An alternative to this scheme is to use mod_gzip 
(http://www.remotecommunications.com/apache/mod_gzip/). This module is 
capable of compressing any HTTP data, static as well as dynamically 
generated. I use it successfully e.g. on the mod_python based site 
www.get2stamps.com. The gzip compression reduces the transfer time for tables 
with much similar data by more than 80%!

regards, J?rgen

-- 
J?rgen Fr?jk Kj?rsgaard, Systemkonsulent (Systems Consultant)
Informaticon ApS * Web: www.informaticon.dk * Tlf: +45 8672 0093
Internetkataloger * Dataindsamling * Specialudvikling * Systemarbejde

From thegreengrinch at operamail.com  Mon Jan 14 02:10:38 2002
From: thegreengrinch at operamail.com (Eric Mangold)
Date: Fri Jan  9 22:03:02 2004
Subject: [mod_python] Compilation problem.
Message-ID: <001301c19ce3$b74a65a0$050a010a@ericxp>

I'm attempting to compile mod_python 3, under Linux, glibc2.2, with apache
2.0.28 and python2.2 final. apache is compiled and installed under
/usr/local/apache. python is compiled and installed under /usr. my configure
line is as follows:

# CFLAGS="-O6 -march=i686 -ffast-math"
./configure --with-apxs=/usr/local/apache/bin/apxs

and i try to make it as follows:

# make dso
make[1]: Entering directory `/download/mod_python3/src'
gcc  -I/download/mod_python3/src/include -I/usr/local/apache/include -I/usr/
include/python2.2    -c -o mod_python.o mod_python.c
mod_python.c: In function `python_filter':
mod_python.c:1019: warning: passing arg 4 of `ap_get_brigade' from
incompatible pointer type
mod_python.c: In function `directive_PythonInputFilter':
mod_python.c:1479: warning: passing arg 2 of `ap_register_input_filter' from
incompatible pointer type
gcc  -I/download/mod_python3/src/include -I/usr/local/apache/include -I/usr/
include/python2.2    -c -o _apachemodule.o _apachemodule.c
gcc  -I/download/mod_python3/src/include -I/usr/local/apache/include -I/usr/
include/python2.2    -c -o requestobject.o requestobject.c
requestobject.c:916: structure has no member named `content_language'
requestobject.c:916: initializer element is not constant
requestobject.c:916: (near initialization for
`request_memberlist[41].offset')
requestobject.c:1015: parse error before `u'
requestobject.c: In function `tuple_from_parsed_uri':
requestobject.c:1021: `u' undeclared (first use in this function)
requestobject.c:1021: (Each undeclared identifier is reported only once
requestobject.c:1021: for each function it appears in.)
make[1]: *** [requestobject.o] Error 1
make[1]: Leaving directory `/download/mod_python3/src'
make: *** [do_dso] Error 2

python is compiled without thread support, however, apache is compiled with
the 'worker' MPM, if that means anything.


From ray_drew at yahoo.co.uk  Mon Jan 14 18:04:19 2002
From: ray_drew at yahoo.co.uk (Ray Drew)
Date: Fri Jan  9 22:03:02 2004
Subject: [mod_python] DLL for Windows
References: <NFBBKACIPKNFKAHLGHGBIEJLDOAA.neilb@nbt.co.za>
Message-ID: <015a01c19d25$e436c530$df13000a@RDREWXP>

----- Original Message -----
From: "Neil Beattie" <neilb@nbt.co.za>
To: "Ray Drew" <ray_drew@yahoo.co.uk>
Sent: Thursday, January 10, 2002 10:11 AM
Subject: RE: [mod_python] DLL for Windows


> Hi Ray,
> I compiled it against apache 1.3.22 but have tested it on a machine that
is
> running 1.3.20
> Hope it works for you!
> Neil.
>
>

Neil,

Yes this works for me on Apache 1.3.22.

Thanks very much,

Ray




_________________________________________________________
Do You Yahoo!?
Get your free @yahoo.com address at http://mail.yahoo.com


From roman at it-ukraine.com  Tue Jan 15 13:03:57 2002
From: roman at it-ukraine.com (Roman V Moroz)
Date: Fri Jan  9 22:03:02 2004
Subject: [mod_python] mod_python per VirtualHost
Message-ID: <200201151104.g0FB3v785297@violator.zp.ua>

Hi!

Is there possibility to turn on/off mod_python per-VirtualHost?
How to do this if possible?  

Thanx,
--------------------------------------------------------------
Roman V Moroz                   IT-Ukraine ltd
System Administrator
NIC-HDL: VIO13-RIPE             Zaporozhye,   Ukraine
http://www.moroz.zp.ua		http://www.it-ukraine.com


From rsherwood at cryptoknights.com  Wed Jan 16 12:30:22 2002
From: rsherwood at cryptoknights.com (Robert Sherwood)
Date: Fri Jan  9 22:03:02 2004
Subject: [mod_python] Python Path
Message-ID: <1011202223.14792.17.camel@lucifer>

Greetings all:

Someone is going to kick me, but I know I'm overlooking something
obvious and I was hoping one of you could spot it.

I am trying to have my main PythonHandler import a module that is below
it in the directory tree. Here is the basic information:

=========================================================

0. mod_python 2.7.6 running on debian unstable, using python-2.1.1

1. Scripts located in and below "/var/python"

2. mod_python listening on an apache VirtualHost

3. Config file as follows:
  Listen 8080
  <VirtualHost beelzebub:8080>
    DocumentRoot /var/python
    PythonPath "['/var/python/'] + sys.path"
    PythonDebug On
    PythonAutoReload On
    SetHandler python-program
    PythonTransHandler trans
    PythonHandler main
  </VirtualHost>

4. Python handler main failing at this directive:

  File "/var/python/main.py", line 3, in ?
     import browse.listArtists

  ImportError: No module named browse.listArtists

5. ls -F /var/python

admin/	 data/	  main.pyc  objects/	 playlists/    template/  trans.pyc 
browse/  main.py  mod_mp3/  parseRDF.py  preferences/  trans.py

6. ls -F /var/python/browse

__init__.py  listArtistAlbumSongs.py  listArtistAlbums.py 
listArtists.py

========================================================

I can't figure it out. It is as if the PythonPath directive were not
being inherited by the interpreter running main.py. Is this a bug, or am
I stupid?

Or both :)

Thanks in advance for any help anyone can offer.

Robert Sherwood


From modpython at xhaus.com  Wed Jan 16 20:09:17 2002
From: modpython at xhaus.com (Alan Kennedy)
Date: Fri Jan  9 22:03:02 2004
Subject: [mod_python] Python Path
References: <1011202223.14792.17.camel@lucifer>
Message-ID: <3C45DDEC.7FCAA7B@xhaus.com>

Rob,

I'm not sure if this will solve your problem, but have you tried placing an
__init__.py in the /var/python directory. With content like this

__all__ = ['browse']

To setup the "browse" package.

Just a suggestion,

Alan.

Robert Sherwood wrote:

> Greetings all:
>
> Someone is going to kick me, but I know I'm overlooking something
> obvious and I was hoping one of you could spot it.
>
> I am trying to have my main PythonHandler import a module that is below
> it in the directory tree. Here is the basic information:
>
> =========================================================
>
> 0. mod_python 2.7.6 running on debian unstable, using python-2.1.1
>
> 1. Scripts located in and below "/var/python"
>
> 2. mod_python listening on an apache VirtualHost
>
> 3. Config file as follows:
>   Listen 8080
>   <VirtualHost beelzebub:8080>
>     DocumentRoot /var/python
>     PythonPath "['/var/python/'] + sys.path"
>     PythonDebug On
>     PythonAutoReload On
>     SetHandler python-program
>     PythonTransHandler trans
>     PythonHandler main
>   </VirtualHost>
>
> 4. Python handler main failing at this directive:
>
>   File "/var/python/main.py", line 3, in ?
>      import browse.listArtists
>
>   ImportError: No module named browse.listArtists
>
> 5. ls -F /var/python
>
> admin/   data/    main.pyc  objects/     playlists/    template/  trans.pyc
> browse/  main.py  mod_mp3/  parseRDF.py  preferences/  trans.py
>
> 6. ls -F /var/python/browse
>
> __init__.py  listArtistAlbumSongs.py  listArtistAlbums.py
> listArtists.py
>
> ========================================================
>
> I can't figure it out. It is as if the PythonPath directive were not
> being inherited by the interpreter running main.py. Is this a bug, or am
> I stupid?
>
> Or both :)
>
> Thanks in advance for any help anyone can offer.
>
> Robert Sherwood
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python


From jgardn at alumni.washington.edu  Fri Jan 18 07:20:23 2002
From: jgardn at alumni.washington.edu (Jonathan Gardner)
Date: Fri Jan  9 22:03:02 2004
Subject: [mod_python] PyHTMLArch
Message-ID: <200201172235.g0HMZSO32204@my.knctv.co.kr>

For fun and education, I coded up my own handler. I wanted something like a 
bare-bones HTML::Mason, and I wanted to keep the template and the code 
completely seperate. What I came up with is PyHTMLArch. It is now at 
sourceforge - http://sf.net/projects/pyhtmlarch

It has several features that I like.
 - The code an the template are seperate
 - The template executes bits of code rather than doing a substitute. This is 
so you can write "The current time is <% time() %>" or " <% name %> has phone 
number of <% phone_nos[name] %>".
 - The code has full access to the request object. However, the CGI 
parameters are parsed and passed in as arguments.
 - It is simple, yet powerful. Combined with a working understanding of 
Apache and mod_python, it is quite a useful bit of code.

You can download it with CVS or as a bzip2. If you have any questions, be 
sure to email me. If you actually end up playing with it, let me know how you 
use it because I am very interested. I am always open to suggestions, bug 
fixes, etc... I am also interested in helping you get to use it.

Jonathan


From jgardn at alumni.washington.edu  Sat Jan 19 01:10:07 2002
From: jgardn at alumni.washington.edu (Jonathan Gardner)
Date: Fri Jan  9 22:03:02 2004
Subject: [mod_python] installing --with-python Python 2.2
Message-ID: <200201181625.g0IGPTY24849@my.knctv.co.kr>

Summary:
After a lot of research, I still can't get the --with-python option to work 
properly with Python 2.2. Linking problems.

Details:
I searched the entire archive of the mailing list. [NOTE: The link to 
download the entire mailing list from 
http://www.modpython.org/pipermail/mod_python/ is broken], I found only one 
helpful tip for my compiling problems: Don't use --with-python.

Sure enough, it works with 2.2 if I have it all installed so I don't need the 
--with-python option.

I know for a fact that 2.0.1 and 2.1.2 work with the --with-python option 
because I have installed both of them several times without a hitch. Well, I 
lie, but you after a while I got everything working together like they should.

My system: SuSE 7.1, running self-compiled Linux 2.4.14 kernel. 

I downloaded the sources for Python 2.2, Apache1.3.22, and mod_python 2.7.6.

1) Uncompressed all the sources to /usr/local/src/

2) Made a seperate source directory for the no threads version: 
  $ cp -R Python-2.2 Python-2.2-no-threads

3) For /usr/local/src/Python-2.2/, I did:
  $ ./configure
  $ make
  # make install

  Everything went smoothly.

4) For /usr/local/src/Python-2.2-no-threads/, I did:
  $ ./configure --without-threads
  $ make
  
  I also did this, so as to make everything available to Apache. I am sure 
that I only need to do a couple files, but which ones I do not know.
  $ chmod -R a+w *

  Everything went smoothly.

5) Went into the mod_python directory, and ran the following instructions. 
  $ ./configure --with-python=/usr/local/src/Python-2.2-no-threads/ \
    --with-apache=/usr/local/src/apache_1.3.22
  $ make static
  $ make install_static
  # make install_py_lib
  
  Everything went smoothly.

6) Went into the apache directory and did:
  $ ./configure --activate-module=src/modules/python/libpython.a
  $ make

  This is where it stops working. The complaint it spits out is:

gcc  -DLINUX=22 -DUSE_HSREGEX -DNO_DL_NEEDED `./apaci` -Xlinker 
-export-dynamic       \
      -o httpd buildmark.o modules.o modules/standard/libstandard.a 
modules/python/libpython.a main/libmain.a ./os/unix/libos.a ap/libap.a 
regex/libregex.a   -lm -lcrypt -lm  
/usr/local/src/Python-2.2-no-threads/libpython2.2.a   -lexpat
/usr/local/src/Python-2.2-no-threads/libpython2.2.a(posixmodule.o): In 
function `posix_tmpnam':
/usr/local/src/Python-2.2-no-threads/./Modules/posixmodule.c:4510: the use of 
`tmpnam' is dangerous, better use `mkstemp'
/usr/local/src/Python-2.2-no-threads/libpython2.2.a(posixmodule.o): In 
function `posix_tempnam':
/usr/local/src/Python-2.2-no-threads/./Modules/posixmodule.c:4458: the use of 
`tempnam' is dangerous, better use `mkstemp'
/usr/local/src/Python-2.2-no-threads/libpython2.2.a(dynload_shlib.o): In 
function `_PyImport_GetDynLoadFunc':
/usr/local/src/Python-2.2-no-threads/Python/dynload_shlib.c:90: undefined 
reference to `dlopen'
/usr/local/src/Python-2.2-no-threads/Python/dynload_shlib.c:93: undefined 
reference to `dlerror'
/usr/local/src/Python-2.2-no-threads/Python/dynload_shlib.c:98: undefined 
reference to `dlsym'
/usr/local/src/Python-2.2-no-threads/libpython2.2.a(posixmodule.o): In 
function `posix_openpty':
/usr/local/src/Python-2.2-no-threads/./Modules/posixmodule.c:1942: undefined 
reference to `openpty'
/usr/local/src/Python-2.2-no-threads/libpython2.2.a(posixmodule.o): In 
function `posix_forkpty':
/usr/local/src/Python-2.2-no-threads/./Modules/posixmodule.c:1973: undefined 
reference to `forkpty'
collect2: ld returned 1 exit status

IANAPIH - I am not a Python internals hacker so I have no idea what this 
means.

Jonathan

From alain at onesite.org  Fri Jan 18 21:10:28 2002
From: alain at onesite.org (Alain Tesio)
Date: Fri Jan  9 22:03:03 2004
Subject: [mod_python] Import problem with math.so
Message-ID: <20020118211028.5587b591.alain@onesite.org>

Hi, from time to time I get this error, top fix it I must go
to the modpython src dir and run make && make install.

Mod_python error: "PythonHandler observer_www"

Traceback (most recent call last):

  File "/usr/local/lib/python2.1/site-packages/mod_python/apache.py", line 181, in Dispatch
    module = import_module(module_name, _req)

  File "/usr/local/lib/python2.1/site-packages/mod_python/apache.py", line 338, in import_module
    module = imp.load_module(mname, f, p, d)

  File "/home/observer/scripts/observer_www.py", line 13, in ?
    import wwwlib

  File "/home/observer/scripts/wwwlib.py", line 1, in ?
    import mycgi

  File "/home/observer/scripts/mycgi.py", line 9, in ?
    import math

ImportError: /usr/lib/python2.1/lib-dynload/math.so: undefined symbol: PyFPE_jbuf


However ldd gives only shared libs in the standard path:

05:53:18 observer ~/scripts $ldd /usr/lib/python2.1/lib-dynload/math.so
        libm.so.6 => /lib/libm.so.6 (0x40009000)
        libc.so.6 => /lib/libc.so.6 (0x4002b000)
        /lib/ld-linux.so.2 => /lib/ld-linux.so.2 (0x80000000)

I can import the module from the interpreter:

05:53:34 observer ~/scripts $python
Python 2.1.1 (#2, Jan 13 2002, 17:07:14)
[GCC 2.95.4 20011006 (Debian prerelease)] on linux2
Type "copyright", "credits" or "license" for more information.
>>> import math
>>>

The configure line is:

../configure --with-apxs=`which apxs` --with-python=/usr/src/Python-2.1.1

and the compilation commands:

/usr/bin/apxs -I/usr/src/mod_python-2.7.6/src/include -I/usr/include/apache-1.3 -I/usr/src/Python-2.1.1 -I/usr/src/Python-2.1.1/Include -c mod_python.o _apachemodule.o requestobject.o tableobject.o util.o serverobject.o connobject.o  -lm  /usr/src/Python-2.1.1/libpython2.1.a   -ldl  -lutil   -lm           -lreadline -ltermcap
gcc -shared -o mod_python.so mod_python.o _apachemodule.o requestobject.o tableobject.o util.o serverobject.o connobject.o -lm /usr/src/Python-2.1.1/libpython2.1.a -ldl -lutil -lm -lreadline -ltermcap -lc -lm -lcrypt -ldb1 -ldb


Another similar error I can't explain, fixed the same way is with one of
my modules:

>   File "/home/observer/scripts/observer_www.py", line 18, in handler
>     form_items=wwwlib.mod_python_form_items(req)
> 
> AttributeError: 'wwwlib' module has no attribute 'mod_python_form_items'



Any idea ?

Thanks
Alain

From djc at object-craft.com.au  Sat Jan 19 15:06:37 2002
From: djc at object-craft.com.au (Dave Cole)
Date: Fri Jan  9 22:03:03 2004
Subject: [mod_python] Re: PyHTMLArch
In-Reply-To: <200201172235.g0HMZSO32204@my.knctv.co.kr>
References: <200201172235.g0HMZSO32204@my.knctv.co.kr>
Message-ID: <m3zo3bf0he.fsf@ferret.object-craft.com.au>

> For fun and education, I coded up my own handler. I wanted something
> like a bare-bones HTML::Mason, and I wanted to keep the template and
> the code completely seperate. What I came up with is PyHTMLArch. It
> is now at sourceforge - http://sf.net/projects/pyhtmlarch

You might also want to have a look at the Albatross toolkit (I am the
primary developer).  Albatross is slightly more ambitious in that it
allows you to deploy your application either via mod_python or as a
CGI program.  This is quite handy while you are doing development.

> It has several features that I like.  - The code an the template are
> seperate - The template executes bits of code rather than doing a
> substitute. This is so you can write "The current time is <% time()
> %>" or " <% name %> has phone number of <% phone_nos[name] %>".  -
> The code has full access to the request object. However, the CGI
> parameters are parsed and passed in as arguments.  - It is simple,
> yet powerful. Combined with a working understanding of Apache and
> mod_python, it is quite a useful bit of code.

Albatross uses a DTML like templating syntax with some interesting
capabilities.  latex2html choked on some of the text causing the
template to be truncated, but the PDF documentation shows the template
text correctly.

    http://www.object-craft.com.au/projects/albatross/albatross/tug-tree.html

Macro expansion is a nice way to make your templates maintainable.

    http://www.object-craft.com.au/projects/albatross/albatross/tag-macro.html

There are a number of ways to implement server or client side
sessions.

Albatross is not an application server, it is a toolkit which you can
bend to your particular needs.  Most of the code in the toolkit is a
collection of small classes which are mixed together in different ways
to provide a suite of application frameworks and request execution
contexts.  To get you started quickly there are a number of
pre-packaged classes which are likely to suit your needs.  If these
are not exactly what you require you can provide drop in replacements
for any of the building blocks.

In the following diagram the light grey boxes enclose the pre-packaged
application and execution context classes.  The darker grey boxes
enclose classes which provide the same function but with different
semantics.  By providing your own drop in replacement for any of these
classes you can change one or more aspects of the toolkit behaviour.

    http://www.object-craft.com.au/projects/albatross/albatross/pack-overview.html

The home page for the toolkit is here:

    http://www.object-craft.com.au/projects/albatross/

We use Albatross for paid consulting work, so we are very serious
about making Albatross useful.

The current PDF documentation stands at 125 pages and the current line
count for Albatross (using the highly scientific wc -l metric) is 2646
lines.

- Dave

-- 
http://www.object-craft.com.au


From tchur at optushome.com.au  Sat Jan 19 19:00:38 2002
From: tchur at optushome.com.au (Tim Churches)
Date: Fri Jan  9 22:03:03 2004
Subject: [mod_python] Re: PyHTMLArch
References: <200201172235.g0HMZSO32204@my.knctv.co.kr> <m3zo3bf0he.fsf@ferret.object-craft.com.au>
Message-ID: <3C4927A6.5B6B33B4@optushome.com.au>

Dave Cole wrote:
> The current PDF documentation stands at 125 pages and the current line
> count for Albatross (using the highly scientific wc -l metric) is 2646
> lines.

If one assumes a mean of 20 lines of text per page of documentation,
that means the documentation-to-code line count ratio for Albatross must
be pretty close to unity, which is encouraging. The ideal ratio of lines
of documentation to lines of code is, of course, phi, the Golden Mean,
which is an irrational number with a value of approximately
1.6180339887499...

Tim C

From modpython at xhaus.com  Fri Jan 25 09:35:06 2002
From: modpython at xhaus.com (Alan Kennedy)
Date: Fri Jan  9 22:03:03 2004
Subject: [mod_python] Web sessions and threading.
Message-ID: <200201251445.JAA38220@spool4.valueweb.net>

Greetings All,

I'm putting together a session tracking mechanism for
Apache and mod_python, on Win and Linux. And my mind is
being twisted trying to decide if I need to worry about
thread safety or not.

My confusion arises from trying to juggle the concepts of
the Python Global Interpreter Lock and the way that
Apache handles simultaneous requests.

On Windows, Apache spawns a single child, which then
creates a thread to service every request received. On
Linux, Apache maintains a pool of single-threaded child
processes, which compete to service incoming requests.

So, imagine I have a mod_python handler function, which
is going to extract a session ID from incoming requests,
and use that as a key to retrieve a corresponding session
object from some storage (say, a memory mapped file,
rdbms(?)).

That session object can then be modified by the handler
function, and thus must then be written back to storage.

Since it is possible for two requests from the same
session to be handled by different threads
windows)/processes(linux), I obviously have a concurrent
access problem.

On Linux, there are no threading issues, since all of
the processes serving requests are single-threaded.

However, it is obviously different on multi-threaded 
Windows. On Windows, I don't know if it is possible for
two threads to update the same python object at the same
time, i.e. I don't know the effect of the Global
Interpreter Lock(GIL).

On Windows, the two threads will definitely be run in
the same interpreter (the default configuration for
mod_python).

So, my question: do I need to protect the session objects
against concurrent access from multiple threads (and thus
complicate the code)? Or can I ignore the issue, i.e. is
access to the object serialised by the GIL?

I know I could probably answer my question by reading and
understanding the python and mod_python source code. But I
was hoping someone might be able to give me pointers to
documentation which might throw some light on the scenario?

Many thanks,

Alan.



---------------------------------------------
This message was sent using WebMail by CyberGate.
http://www.gate.net/webmail



From grisha at modpython.org  Fri Jan 25 13:20:55 2002
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 22:03:03 2004
Subject: [mod_python] Web sessions and threading.
In-Reply-To: <200201251445.JAA38220@spool4.valueweb.net>
Message-ID: <Pine.BSF.4.32.0201251318270.7431-100000@localhost>


On Fri, 25 Jan 2002, Alan Kennedy wrote:

> Greetings All,
>
> I'm putting together a session tracking mechanism for
> Apache and mod_python, on Win and Linux. And my mind is
> being twisted trying to decide if I need to worry about
> thread safety or not.

The general answer is "yes". Even thoug Python will make sure that access
is serialized, your logic needs to anticipate and prevent unexpected
changes to an object.

On UNIX it doesn't matter now, but it will with Apache 2.0.

Grisha


From lbergman at abi.tconline.net  Mon Jan 28 08:04:27 2002
From: lbergman at abi.tconline.net (Lewis Bergman)
Date: Fri Jan  9 22:03:03 2004
Subject: [mod_python] python web tools?
Message-ID: <200201281404.g0SE4S014732@lewis.abi.tconline.net>

Does anyone know of web tools for use with mod_python?

I was thinking of something along the lines of a validation class, forms 
class, authentication class. General tools for handling common tasks on the 
web.

-- 
Lewis Bergman
Texas Communications
4309 Maple St.
Abilene, TX 79602-8044
915-695-6962 ext 115

From lbergman at abi.tconline.net  Mon Jan 28 11:16:37 2002
From: lbergman at abi.tconline.net (Lewis Bergman)
Date: Fri Jan  9 22:03:03 2004
Subject: [mod_python] Re: mod_python make install problem
In-Reply-To: <3C496FB4.7A6E2E@ndh.net>
References: <3C496FB4.7A6E2E@ndh.net>
Message-ID: <200201281716.g0SHGbn14970@lewis.abi.tconline.net>

> Another reason could be that the getopt code from the Python 2.2
> library is actually executed by an older Python interpreter that
> doesn't know of list comprehensions.

It seems that this explanation is correct. I had installed python2.2 on this 
machine with the make altinstall command as it is a RH7.2 install. simply 
using make install breaks all kinds of things including printing.

So, somehow, even though the instructions were followed completely and the 
--with-python switch was pointing to the right place, the make install was 
somehow using the other 1.5.2 install of python.

I used a spare machine, installed python2.2 as the only python and it worked.
curious.

I do get an error about mod_python being compiled without -DEAPI though. Is 
this something to worry about? Perhaps I forgot to compile 2.2 with the 
--with-threads=no option and this caused it?
-- 
Lewis Bergman
Texas Communications
4309 Maple St.
Abilene, TX 79602-8044
915-695-6962 ext 115


From grisha at modpython.org  Mon Jan 28 13:40:57 2002
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 22:03:03 2004
Subject: [mod_python] Re: mod_python make install problem
In-Reply-To: <200201281716.g0SHGbn14970@lewis.abi.tconline.net>
Message-ID: <Pine.BSF.4.32.0201281331300.37930-100000@localhost>

If I recall correctly, the issue here is that until Python is installed
(i.e. make install was run), there is no way to determine some install
time parameters, such as where the lib directory is.

the last paragraph on this page talks about it a little bit:
http://www.modpython.org/live/mod_python-2.7.6/doc-html/inst-configure.html

Grisha

On Mon, 28 Jan 2002, Lewis Bergman wrote:

> > Another reason could be that the getopt code from the Python 2.2
> > library is actually executed by an older Python interpreter that
> > doesn't know of list comprehensions.
>
> It seems that this explanation is correct. I had installed python2.2 on this
> machine with the make altinstall command as it is a RH7.2 install. simply
> using make install breaks all kinds of things including printing.
>
> So, somehow, even though the instructions were followed completely and the
> --with-python switch was pointing to the right place, the make install was
> somehow using the other 1.5.2 install of python.
>
> I used a spare machine, installed python2.2 as the only python and it worked.
> curious.
>
> I do get an error about mod_python being compiled without -DEAPI though. Is
> this something to worry about? Perhaps I forgot to compile 2.2 with the
> --with-threads=no option and this caused it?
> --
> Lewis Bergman
> Texas Communications
> 4309 Maple St.
> Abilene, TX 79602-8044
> 915-695-6962 ext 115
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From bakey at traq.com  Mon Jan 28 15:06:37 2002
From: bakey at traq.com (Brian Akey)
Date: Fri Jan  9 22:03:03 2004
Subject: [mod_python] A python help site
Message-ID: <780A5D64B1CC9544AB7B702F39219C1E5FB8@traqexch.traq.com>

I made up a site to help people trying to setup mod_python.
If anyone sees some mistakes or thinks I should add something, please
drop me an email at bakey@traq.com <mailto:bakey@traq.com> 
 
Brian Akey
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20020128/62bf7f5d/attachment-0003.htm
From woodm at equire.com  Mon Jan 28 14:37:27 2002
From: woodm at equire.com (Matthew D. Wood)
Date: Fri Jan  9 22:03:03 2004
Subject: [mod_python] A python help site
In-Reply-To: <780A5D64B1CC9544AB7B702F39219C1E5FB8@traqexch.traq.com>
References: <780A5D64B1CC9544AB7B702F39219C1E5FB8@traqexch.traq.com>
Message-ID: <1012253847.1836.17.camel@localhost.localdomain>

Yes, I do believe that I have found something that you were missing...

What's the address? :-)

On Mon, 2002-01-28 at 14:06, Brian Akey wrote:
> I made up a site to help people trying to setup mod_python.
> If anyone sees some mistakes or thinks I should add something, please
> drop me an email at bakey@traq.com <mailto:bakey@traq.com> 
>  
> Brian Akey
-- 
                                               _________________________
----------------------------------------------/                         
                                             /  Matthew D. Wood         
 "activist for accuracy"                    /  Home Phone: 303.415.1550 
                                           /  E-Mail: woodm@equire.com  
                                          /                             
_________________________________________/------------------------------

From bakey at traq.com  Mon Jan 28 15:27:24 2002
From: bakey at traq.com (Brian Akey)
Date: Fri Jan  9 22:03:03 2004
Subject: [mod_python] A python help site
Message-ID: <780A5D64B1CC9544AB7B702F39219C1E5FBA@traqexch.traq.com>

http://cricket.ironkeytech.com <http://cricket.ironkeytech.com>  


I made up a site to help people trying to setup mod_python.
If anyone sees some mistakes or thinks I should add something, please
drop me an email at bakey@traq.com <mailto:bakey@traq.com> 
 
Brian Akey

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20020128/33d945b4/attachment-0003.htm
From magnus at hetland.org  Mon Jan 28 22:58:10 2002
From: magnus at hetland.org (Magnus Lie Hetland)
Date: Fri Jan  9 22:03:03 2004
Subject: [mod_python] A python help site
In-Reply-To: <1012253847.1836.17.camel@localhost.localdomain>; from woodm@equire.com on Mon, Jan 28, 2002 at 02:37:27PM -0700
References: <780A5D64B1CC9544AB7B702F39219C1E5FB8@traqexch.traq.com> <1012253847.1836.17.camel@localhost.localdomain>
Message-ID: <20020128225810.C14200@idi.ntnu.no>

Matthew D. Wood <woodm@equire.com>:
>
> Yes, I do believe that I have found something that you were missing...
> 
> What's the address? :-)
 
That was in the original mail:

http://cricket.ironkeytech.com 

--
Magnus Lie Hetland                                  The Anygui Project
http://hetland.org                                  http://anygui.org

From magnus at hetland.org  Mon Jan 28 23:25:32 2002
From: magnus at hetland.org (Magnus Lie Hetland)
Date: Fri Jan  9 22:03:03 2004
Subject: [mod_python] A python help site
In-Reply-To: <20020128225810.C14200@idi.ntnu.no>; from magnus@hetland.org on Mon, Jan 28, 2002 at 10:58:10PM +0100
References: <780A5D64B1CC9544AB7B702F39219C1E5FB8@traqexch.traq.com> <1012253847.1836.17.camel@localhost.localdomain> <20020128225810.C14200@idi.ntnu.no>
Message-ID: <20020128232532.D14200@idi.ntnu.no>

Magnus Lie Hetland <magnus@hetland.org>:
>
> Matthew D. Wood <woodm@equire.com>:
> >
> > Yes, I do believe that I have found something that you were missing...
> > 
> > What's the address? :-)
>  
> That was in the original mail:

<ahem>

Sorry -- I was a bit quick there :)

--
Magnus Lie Hetland                                  The Anygui Project
http://hetland.org                                  http://anygui.org

From gbeasley at tsa.ac.za  Tue Jan 29 12:47:06 2002
From: gbeasley at tsa.ac.za (Grant Beasley)
Date: Fri Jan  9 22:03:03 2004
Subject: [mod_python] Persistent variables?
Message-ID: <OOENKCHGJGHILGPAGHGOKEIMCBAA.gbeasley@tsa.ac.za>

Hi

Firstly, I hope this hasn't already come up, but I've searched the archives
back a few months and can't find anything.

I have a mod python authentification script which, upon authentification,
reads user details from a database and places them in a global dictionary
indexed on the userid. This is kept in a separate module (called Globals),
and accessed through functions in the global module. This dictionary seems
to persist through HTTP connections, so on subsequent calls I can just read
the dictionary instead of the database.

I haven't come up with any problems thus far, except that isinstance doesn't
seem to function correctly. If I create a Widget instance and store it in my
global dictionary, on subsequent sessions, although the Widget instance
exists, and widget.__class__ is equal to the Widget class (in string terms),
isinstance returns 0. I'd assume this is because I've somehow reloaded the
Widget class and hence it does not compare equally to the class stored with
the original widget instance.

I hope that makes sense and doesn't sound like complete gibberish. Can
anyone explain this to me, and indicate whether storing user data like this
is safe and sensible? Should I be reading user details from my database?

Thanks
Grant Beasley
Technikon SA


From grisha at modpython.org  Wed Jan 30 14:00:20 2002
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 22:03:03 2004
Subject: [mod_python] About authentication
In-Reply-To: <Pine.LNX.4.10.10110041113020.7933-100000@mrham.hamslab.com>
Message-ID: <Pine.BSF.4.32.0201301353430.94999-100000@localhost>

No passwdord is not an unusual condition - your code should deal with
users who do not supply passwords by returning them HTTP_UNAUTHORIZED.

So something like:

if password:
	md5.new(password).hexdigest()
else:
	return apache.HTTP_UNAUTHORIZED

On Thu, 4 Oct 2001 nineclue@bigfoot.com wrote:

> I'm trying to implement custom authentication using authenhandler.
> I want to save user info and password in encrypted file that other users
> can only read. So I've tried to use md5.new('password').hexdigest().
> 'password' is a variable that stores password using
> req.get_basic_auth_pw().
>
> When I've tried to load restricted page, I got error saying 'password'
> variable is not read-only buffer, but None. I can use direct comparison
> of username and password with string as to the mod_python document, but I
> can't use it in a function that accepts string as a argument.
>
> Any comment or help would be appreciated.
> mod_python is 2.7.2.
>
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From jm at eemsystems.cjb.net  Wed Jan 30 18:25:26 2002
From: jm at eemsystems.cjb.net (Julio Mendoza)
Date: Fri Jan  9 22:03:03 2004
Subject: [mod_python] mod_python and form process
Message-ID: <1012433126.26213.13.camel@eemsystems>

I need to process a form with variable number of fields.

how to do that with mod_python?


thanks,

JM





From malex at purdue.edu  Thu Jan 31 01:38:03 2002
From: malex at purdue.edu (Oleksandr Moskalenko)
Date: Fri Jan  9 22:03:03 2004
Subject: [mod_python] Import Error puzzle
Message-ID: <20020131063803.GA32627@purdue.edu>

 Hello all,

I'm really puzzled by this problem. I have two identical configurations
on two pretty much identical Debian GNU/Linux Unstable systems. Both use
python 2.1 + mod_python 2.7.6. Mod_python works fine on one of those,
but on the other it produces the following error:

Mod_python error: "PythonHandler mptest"

Traceback (most recent call last):

  File "/usr/lib/python2.1/site-packages/mod_python/apache.py", line
181, in Dispatch
    module = import_module(module_name, _req)

  File "/usr/lib/python2.1/site-packages/mod_python/apache.py", line
335, in import_module
    f, p, d = imp.find_module(parts[i], path)

ImportError: No module named mptest



Now as far as I understand mod_python adds the current directory to the
front of the sys.path and then imports module by name. What could go
wrong here? Regular python cgi scripts work fine. I can successfully run
the following, for example:
#!/usr/bin/env python

print 'Content-Type: text/html'
print
print '<html>'
print ' <head>'
print '  <title>My CGI application</title>'
print ' </head>'
print ' <body>'
print '  Hello from my simple CGI application!'
print ' </body>'
print '</html>'

and get the Hello... string

Can anybody help me troubleshoot this?


Thank you,

Alex.

-----------------------
Oleksandr Moskalenko
malex@purdue.edu
-----------------------
pub  1024D/6C5F196B 2001-08-17 /* http://www.tagancha.org/pgp */
Oleksandr V. Moskalenko (Alex) <malex@tagancha.org>
Fingerprint = EE63 C471 ADBA 5D80 ADFB  1054 DA28 6F32 6C5F 196B
----------------------------------------------------------------

From bakey at traq.com  Thu Jan 31 09:59:37 2002
From: bakey at traq.com (Brian Akey)
Date: Fri Jan  9 22:03:03 2004
Subject: [mod_python] mod_python and form process
Message-ID: <780A5D64B1CC9544AB7B702F39219C1E5FCF@traqexch.traq.com>

You can use the regular dictionary functions of python.
form = util.FieldStorage(req)
That gets you the post information
form.keys() will give you a list of keys

fn = form.keys()
for fn1 in fn:
	req.write('keyname is ' + str(fn1) + '<br>\n')
	req.write('value is ' + str(form[fn1]) + '<br>\n')

Brian

>I need to process a form with variable number of fields.
>
>how to do that with mod_python?

