<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Graphs in a webpage
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Graphs%20in%20a%20webpage&In-Reply-To=006f01c04dc5%24f93e9c60%240401a8c0%40charis">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004111.html">
   <LINK REL="Next"  HREF="004112.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Graphs in a webpage</H1>
    <B>Gregory Trubetskoy</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Graphs%20in%20a%20webpage&In-Reply-To=006f01c04dc5%24f93e9c60%240401a8c0%40charis"
       TITLE="[mod_python] Graphs in a webpage">grisha at modpython.org
       </A><BR>
    <I>Mon Nov 13 22:07:38 EST 2000</I>
    <P><UL>
        <LI>Previous message: <A HREF="004111.html">[mod_python] Graphs in a webpage
</A></li>
        <LI>Next message: <A HREF="004112.html">[mod_python] Graphs in a webpage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4113">[ date ]</a>
              <a href="thread.html#4113">[ thread ]</a>
              <a href="subject.html#4113">[ subject ]</a>
              <a href="author.html#4113">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<table border=0 width="100%"><tr><td>
<!--beginarticle-->
<PRE>I used gd with nsapy on a windows machine in 1997 and it was very very
fast (considering computers were slow back then). Yahoo uses it on their
quotes.yahoo.com of all other tools, mrtg uses it, it's probably the
fastest thign out there.

The things that are the slowest are repetetive operations that involve
memory allocations - e.g. if you're building some large list from the
ascii files one byte at a time and your ascii file is 90K, it will be
slow. You will see a big improvement if you only build the list once and
cache it inside a module somewhere. 

If your content is dynamic and cannot be cached, then try to avoid things
like readlines() of the whole file, then copying it some list. A much
faster solution is to read the file as you need the data avoiding all
unnecessary mallocs.

A database may make things faster - it very much depends on what you
do. For example if you try to process data in some way, i.e. sort or
select records, etc, then most definitely a database, especially if ran on
a separate server will give you an improvement. 

If you're just using it as flat file storage, then it will be about as
fast as a file, perhaps a little slower.

mod_python interpreter lives as long the as the apache process (or in case
of win32 thread) lives. The simplest way to cache data is to use the
Python &quot;import&quot; mechanism - make a module that reads all your ascii files,
then import it from a script. Python only imports once the first time and
ignores all subsequent requests - perfect for caching.

HTH

--
  Gregory (Grisha) Trubetskoy
       <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">grisha at modpython.org</A>

On Tue, 14 Nov 2000, Alexis Iglauer wrote:

&gt;<i> This may be the wrong forum for this, but......
</I>&gt;<i> 
</I>&gt;<i> I am writing an app which takes data out of text files and makes graphs.
</I>&gt;<i> The user interactively specifies the graphs in a browser, with everything
</I>&gt;<i> being done in Python as a handler.  The resulting page can have 10+ graphs
</I>&gt;<i> on it.
</I>&gt;<i> 
</I>&gt;<i> Problem is, my solution is sloooooow.  I am using gdchart to generate the
</I>&gt;<i> graphs on the fly (&lt;img src=&quot;grph.py?color=0x0000ff&quot; alt=&quot;xxx&quot;&gt; and plain
</I>&gt;<i> vanilla python for the rest.
</I>&gt;<i> 
</I>&gt;<i> I am not sure whether reading the ASCII files is slow and whether sticking
</I>&gt;<i> them into a database will be worth the effort (ideas, anyone?).  I get some
</I>&gt;<i> advantage when running apache single-threaded by checking whether my data is
</I>&gt;<i> already loaded, but as soon as I run apache normally this advantage
</I>&gt;<i> disappears.
</I>&gt;<i> 
</I>&gt;<i> I think the bottleneck is creating the graph, and in trying to solve that I
</I>&gt;<i> have a few questions regarding how mod_python works.  How long does an
</I>&gt;<i> instance of mod_python exist?  When is an instance destroyed?  What data can
</I>&gt;<i> be passed from one instance to the next?  Also, does anyone have any ideas
</I>&gt;<i> on how to efficiently generate graphs from a reasonably large number of
</I>&gt;<i> datapoints?
</I>&gt;<i> 
</I>&gt;<i> Thanks in advance
</I>&gt;<i> Alexis
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://www.modpython.org/mailman/listinfo/mod_python">http://www.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i> 
</I>

</PRE>
<!--endarticle-->
</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004111.html">[mod_python] Graphs in a webpage
</A></li>
	<LI>Next message: <A HREF="004112.html">[mod_python] Graphs in a webpage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4113">[ date ]</a>
              <a href="thread.html#4113">[ thread ]</a>
              <a href="subject.html#4113">[ subject ]</a>
              <a href="author.html#4113">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
