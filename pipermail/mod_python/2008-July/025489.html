<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Trouble loading mod_python Mac Os X
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Trouble%20loading%20mod_python%20Mac%20Os%20X&In-Reply-To=629052.4425.qm%40web94615.mail.in2.yahoo.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025484.html">
   <LINK REL="Next"  HREF="025485.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Trouble loading mod_python Mac Os X</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Trouble%20loading%20mod_python%20Mac%20Os%20X&In-Reply-To=629052.4425.qm%40web94615.mail.in2.yahoo.com"
       TITLE="[mod_python] Trouble loading mod_python Mac Os X">graham.dumpleton at gmail.com
       </A><BR>
    <I>Wed Jul 30 21:55:13 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="025484.html">[mod_python] Trouble loading mod_python Mac Os X
</A></li>
        <LI>Next message: <A HREF="025485.html">[mod_python] importing a configuration module
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25489">[ date ]</a>
              <a href="thread.html#25489">[ thread ]</a>
              <a href="subject.html#25489">[ subject ]</a>
              <a href="author.html#25489">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>If you still haven't sorted this, check out latest source code from:

  <A HREF="https://svn.apache.org/repos/asf/quetzalcoatl/mod_python/trunk">https://svn.apache.org/repos/asf/quetzalcoatl/mod_python/trunk</A>

This incorporates all the correct MacOSX fat binary changes.

If that doesn't work then post specific issues you have with that version.

Graham

2008/7/28 Alex Lurthu &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">alex.lurthu at yahoo.com</A>&gt;:
&gt;<i> Hi All,
</I>&gt;<i>
</I>&gt;<i> I have been trying to add mod_python module to apache2. The first road block
</I>&gt;<i> that i hit was :
</I>&gt;<i>
</I>&gt;<i> httpd: Syntax error on line 116 of /private/etc/apache2/httpd.conf: Cannot
</I>&gt;<i> load /usr/libexec/apache2/mod_python.so into server:
</I>&gt;<i> dlopen(/usr/libexec/apache2/mod_python.so, 10): no suitable image found.
</I>&gt;<i> Did find:\n\t/usr/libexec/apache2/mod_python.so: mach-o, but wrong
</I>&gt;<i> architecture
</I>&gt;<i>
</I>&gt;<i> To solve this i add the following lines to the Makefile under src directory
</I>&gt;<i> :
</I>&gt;<i>
</I>&gt;<i> CPPFLAGS =
</I>&gt;<i> -I/System/Library/Frameworks/Python.framework/Versions/2.5/include/python2.5
</I>&gt;<i> -DNDEBUG -DMACOSX -DENABLE_DTRACE
</I>&gt;<i> CFLAGS =  -Wc,'-arch ppc7400' -Wc,'-arch ppc64' -Wc,'-arch i386' -Wc,'-arch
</I>&gt;<i> x86_64'
</I>&gt;<i> LDFLAGS =  -arch ppc7400 -arch ppc64 -arch i386 -arch x86_64
</I>&gt;<i> -Wl,-F/System/Library/Frameworks -framework Python -u _PyMac_Error
</I>&gt;<i> -framework Python
</I>&gt;<i> LDLIBS = -ldl
</I>&gt;<i>
</I>&gt;<i> It got complied with the required format or platform support.
</I>&gt;<i>
</I>&gt;<i> sh-3.2# file /usr/libexec/apache2/mod_python.so
</I>&gt;<i> /usr/libexec/apache2/mod_python.so: Mach-O universal binary with 4
</I>&gt;<i> architectures
</I>&gt;<i> /usr/libexec/apache2/mod_python.so (for architecture ppc):    Mach-O bundle
</I>&gt;<i> ppc
</I>&gt;<i> /usr/libexec/apache2/mod_python.so (for architecture ppc64):    Mach-O
</I>&gt;<i> 64-bit bundle ppc64
</I>&gt;<i> /usr/libexec/apache2/mod_python.so (for architecture i386):    Mach-O bundle
</I>&gt;<i> i386
</I>&gt;<i> /usr/libexec/apache2/mod_python.so (for architecture x86_64):    Mach-O
</I>&gt;<i> 64-bit bundle x86_64
</I>&gt;<i>
</I>&gt;<i> After this step, when i tried LoadModule in the httpd.conf file i got the
</I>&gt;<i> following error.
</I>&gt;<i>
</I>&gt;<i> httpd: Syntax error on line 117 of /private/etc/apache2/httpd.conf: Can't
</I>&gt;<i> locate API module structure `python_module' in file
</I>&gt;<i> /usr/libexec/apache2/mod_python.so: dlsym(0x100216ae0, python_module):
</I>&gt;<i> symbol not found
</I>&gt;<i>
</I>&gt;<i> Stuck at this point. Have a working wsgi module, but still wondering why
</I>&gt;<i> this is loading. Ensured that it got built against the correct apache
</I>&gt;<i> libraries and python libraries.
</I>&gt;<i>
</I>&gt;<i> The following are the versions that i use :
</I>&gt;<i>
</I>&gt;<i> Python 2.5.1 (r251:54863, Jan 17 2008, 19:35:17)
</I>&gt;<i> sh-3.2# apachectl -v
</I>&gt;<i> Server version: Apache/2.2.8 (Unix)
</I>&gt;<i> Server built:   Mar  4 2008 21:37:02
</I>&gt;<i>
</I>&gt;<i> Platform : sh-3.2# uname -a
</I>&gt;<i> Darwin sickreturn-lm 9.4.0 Darwin Kernel Version 9.4.0: Mon Jun  9 19:30:53
</I>&gt;<i> PDT 2008; root:xnu-1228.5.20~1/RELEASE_I386 i386
</I>&gt;<i>
</I>&gt;<i> Hardware : Apple Macbook Pro (Intel 32 bit )
</I>&gt;<i>
</I>&gt;<i> Output of otool pasted at the end. Thanks for the help.
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Alex
</I>&gt;<i> <A HREF="http://alexlurthu.wordpress.com">http://alexlurthu.wordpress.com</A>
</I>&gt;<i> sh-3.2# otool -l /usr/libexec/apache2/mod_python.so
</I>&gt;<i> /usr/libexec/apache2/mod_python.so:
</I>&gt;<i> Load command 0
</I>&gt;<i>       cmd LC_SEGMENT
</I>&gt;<i>   cmdsize 328
</I>&gt;<i>   segname __TEXT
</I>&gt;<i>    vmaddr 0x00000000
</I>&gt;<i>    vmsize 0x00016000
</I>&gt;<i>   fileoff 0
</I>&gt;<i>  filesize 90112
</I>&gt;<i>   maxprot 0x00000007
</I>&gt;<i>  initprot 0x00000005
</I>&gt;<i>    nsects 4
</I>&gt;<i>     flags 0x0
</I>&gt;<i> Section
</I>&gt;<i>   sectname __text
</I>&gt;<i>    segname __TEXT
</I>&gt;<i>       addr 0x00001358
</I>&gt;<i>       size 0x00011f4c
</I>&gt;<i>     offset 4952
</I>&gt;<i>      align 2^2 (4)
</I>&gt;<i>     reloff 0
</I>&gt;<i>     nreloc 0
</I>&gt;<i>      flags 0x80000400
</I>&gt;<i>  reserved1 0
</I>&gt;<i>  reserved2 0
</I>&gt;<i> Section
</I>&gt;<i>   sectname __cstring
</I>&gt;<i>    segname __TEXT
</I>&gt;<i>       addr 0x000132a4
</I>&gt;<i>       size 0x00002caa
</I>&gt;<i>     offset 78500
</I>&gt;<i>      align 2^2 (4)
</I>&gt;<i>     reloff 0
</I>&gt;<i>     nreloc 0
</I>&gt;<i>      flags 0x00000002
</I>&gt;<i>  reserved1 0
</I>&gt;<i>  reserved2 0
</I>&gt;<i> Section
</I>&gt;<i>   sectname __const
</I>&gt;<i>    segname __TEXT
</I>&gt;<i>       addr 0x00015f50
</I>&gt;<i>       size 0x000000a0
</I>&gt;<i>     offset 89936
</I>&gt;<i>      align 2^4 (16)
</I>&gt;<i>     reloff 0
</I>&gt;<i>     nreloc 0
</I>&gt;<i>      flags 0x00000000
</I>&gt;<i>  reserved1 0
</I>&gt;<i>  reserved2 0
</I>&gt;<i> Section
</I>&gt;<i>   sectname __literal8
</I>&gt;<i>    segname __TEXT
</I>&gt;<i>       addr 0x00015ff0
</I>&gt;<i>       size 0x00000008
</I>&gt;<i>     offset 90096
</I>&gt;<i>      align 2^3 (8)
</I>&gt;<i>     reloff 0
</I>&gt;<i>     nreloc 0
</I>&gt;<i>      flags 0x00000004
</I>&gt;<i>  reserved1 0
</I>&gt;<i>  reserved2 0
</I>&gt;<i> Load command 1
</I>&gt;<i>       cmd LC_SEGMENT
</I>&gt;<i>   cmdsize 328
</I>&gt;<i>   segname __DATA
</I>&gt;<i>    vmaddr 0x00016000
</I>&gt;<i>    vmsize 0x00003000
</I>&gt;<i>   fileoff 90112
</I>&gt;<i>  filesize 12288
</I>&gt;<i>   maxprot 0x00000007
</I>&gt;<i>  initprot 0x00000003
</I>&gt;<i>    nsects 4
</I>&gt;<i>     flags 0x0
</I>&gt;<i> Section
</I>&gt;<i>   sectname __data
</I>&gt;<i>    segname __DATA
</I>&gt;<i>       addr 0x00016000
</I>&gt;<i>       size 0x0000227c
</I>&gt;<i>     offset 90112
</I>&gt;<i>      align 2^5 (32)
</I>&gt;<i>     reloff 0
</I>&gt;<i>     nreloc 0
</I>&gt;<i>      flags 0x00000000
</I>&gt;<i>  reserved1 0
</I>&gt;<i>  reserved2 0
</I>&gt;<i> Section
</I>&gt;<i>   sectname __dyld
</I>&gt;<i>    segname __DATA
</I>&gt;<i>       addr 0x0001827c
</I>&gt;<i>       size 0x00000008
</I>&gt;<i>     offset 98940
</I>&gt;<i>      align 2^2 (4)
</I>&gt;<i>     reloff 0
</I>&gt;<i>     nreloc 0
</I>&gt;<i>      flags 0x00000000
</I>&gt;<i>  reserved1 0
</I>&gt;<i>  reserved2 0
</I>&gt;<i> Section
</I>&gt;<i>   sectname __bss
</I>&gt;<i>    segname __DATA
</I>&gt;<i>       addr 0x00018284
</I>&gt;<i>       size 0x00000024
</I>&gt;<i>     offset 0
</I>&gt;<i>      align 2^2 (4)
</I>&gt;<i>     reloff 0
</I>&gt;<i>     nreloc 0
</I>&gt;<i>      flags 0x00000001
</I>&gt;<i>  reserved1 0
</I>&gt;<i>  reserved2 0
</I>&gt;<i> Section
</I>&gt;<i>   sectname __common
</I>&gt;<i>    segname __DATA
</I>&gt;<i>       addr 0x000182a8
</I>&gt;<i>       size 0x00000004
</I>&gt;<i>     offset 0
</I>&gt;<i>      align 2^2 (4)
</I>&gt;<i>     reloff 0
</I>&gt;<i>     nreloc 0
</I>&gt;<i>      flags 0x00000001
</I>&gt;<i>  reserved1 0
</I>&gt;<i>  reserved2 0
</I>&gt;<i> Load command 2
</I>&gt;<i>       cmd LC_SEGMENT
</I>&gt;<i>   cmdsize 192
</I>&gt;<i>   segname __IMPORT
</I>&gt;<i>    vmaddr 0x00019000
</I>&gt;<i>    vmsize 0x00001000
</I>&gt;<i>   fileoff 102400
</I>&gt;<i>  filesize 4096
</I>&gt;<i>   maxprot 0x00000007
</I>&gt;<i>  initprot 0x00000007
</I>&gt;<i>    nsects 2
</I>&gt;<i>     flags 0x0
</I>&gt;<i> Section
</I>&gt;<i>   sectname __pointers
</I>&gt;<i>    segname __IMPORT
</I>&gt;<i>       addr 0x00019000
</I>&gt;<i>       size 0x000000ac
</I>&gt;<i>     offset 102400
</I>&gt;<i>      align 2^2 (4)
</I>&gt;<i>     reloff 0
</I>&gt;<i>     nreloc 0
</I>&gt;<i>      flags 0x00000006
</I>&gt;<i>  reserved1 0 (index into indirect symbol table)
</I>&gt;<i>  reserved2 0
</I>&gt;<i> Section
</I>&gt;<i>   sectname __jump_table
</I>&gt;<i>    segname __IMPORT
</I>&gt;<i>       addr 0x000190c0
</I>&gt;<i>       size 0x000004dd
</I>&gt;<i>     offset 102592
</I>&gt;<i>      align 2^6 (64)
</I>&gt;<i>     reloff 0
</I>&gt;<i>     nreloc 0
</I>&gt;<i>      flags 0x04000008
</I>&gt;<i>  reserved1 43 (index into indirect symbol table)
</I>&gt;<i>  reserved2 5 (size of stubs)
</I>&gt;<i> Load command 3
</I>&gt;<i>       cmd LC_SEGMENT
</I>&gt;<i>   cmdsize 56
</I>&gt;<i>   segname __LINKEDIT
</I>&gt;<i>    vmaddr 0x0001a000
</I>&gt;<i>    vmsize 0x00006000
</I>&gt;<i>   fileoff 106496
</I>&gt;<i>  filesize 24436
</I>&gt;<i>   maxprot 0x00000007
</I>&gt;<i>  initprot 0x00000001
</I>&gt;<i>    nsects 0
</I>&gt;<i>     flags 0x0
</I>&gt;<i> Load command 4
</I>&gt;<i>      cmd LC_SYMTAB
</I>&gt;<i>  cmdsize 24
</I>&gt;<i>   symoff 112544
</I>&gt;<i>    nsyms 572
</I>&gt;<i>   stroff 120624
</I>&gt;<i>  strsize 10308
</I>&gt;<i> Load command 5
</I>&gt;<i>             cmd LC_DYSYMTAB
</I>&gt;<i>         cmdsize 80
</I>&gt;<i>       ilocalsym 0
</I>&gt;<i>       nlocalsym 262
</I>&gt;<i>      iextdefsym 262
</I>&gt;<i>      nextdefsym 44
</I>&gt;<i>       iundefsym 306
</I>&gt;<i>       nundefsym 266
</I>&gt;<i>          tocoff 0
</I>&gt;<i>            ntoc 0
</I>&gt;<i>       modtaboff 0
</I>&gt;<i>         nmodtab 0
</I>&gt;<i>    extrefsymoff 0
</I>&gt;<i>     nextrefsyms 0
</I>&gt;<i>  indirectsymoff 119456
</I>&gt;<i>   nindirectsyms 292
</I>&gt;<i>       extreloff 119408
</I>&gt;<i>         nextrel 6
</I>&gt;<i>       locreloff 106496
</I>&gt;<i>         nlocrel 756
</I>&gt;<i> Load command 6
</I>&gt;<i>           cmd LC_LOAD_DYLIB
</I>&gt;<i>       cmdsize 52
</I>&gt;<i>          name /usr/lib/libSystem.B.dylib (offset 24)
</I>&gt;<i>    time stamp 2 Thu Jan  1 05:30:02 1970
</I>&gt;<i>       current version 111.1.1
</I>&gt;<i> compatibility version 1.0.0
</I>&gt;<i> Load command 7
</I>&gt;<i>           cmd LC_LOAD_DYLIB
</I>&gt;<i>       cmdsize 88
</I>&gt;<i>          name
</I>&gt;<i> /System/Library/Frameworks/Python.framework/Versions/2.5/Python (offset 24)
</I>&gt;<i>    time stamp 2 Thu Jan  1 05:30:02 1970
</I>&gt;<i>       current version 2.5.1
</I>&gt;<i> compatibility version 2.5.0
</I>&gt;<i> Load command 8
</I>&gt;<i>           cmd LC_LOAD_DYLIB
</I>&gt;<i>       cmdsize 52
</I>&gt;<i>          name /usr/lib/libgcc_s.1.dylib (offset 24)
</I>&gt;<i>    time stamp 2 Thu Jan  1 05:30:02 1970
</I>&gt;<i>       current version 1.0.0
</I>&gt;<i> compatibility version 1.0.0
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I>&gt;<i>
</I></PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025484.html">[mod_python] Trouble loading mod_python Mac Os X
</A></li>
	<LI>Next message: <A HREF="025485.html">[mod_python] importing a configuration module
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25489">[ date ]</a>
              <a href="thread.html#25489">[ thread ]</a>
              <a href="subject.html#25489">[ subject ]</a>
              <a href="author.html#25489">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
