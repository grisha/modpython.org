<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] mod_python, django and class variables
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python%2C%20django%20and%20class%20variables&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023187.html">
   <LINK REL="Next"  HREF="023189.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] mod_python, django and class variables</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Rory Campbell-Lange</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python%2C%20django%20and%20class%20variables&In-Reply-To="
       TITLE="[mod_python] mod_python, django and class variables">rory at campbell-lange.net
       </A><BR>
    <I>Thu Feb 22 17:40:56 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023187.html">[mod_python] Showing sys.executable would be a useful addition to
 mod_python.testhandler.py would it not?
</A></li>
        <LI>Next message: <A HREF="023189.html">[mod_python] Differences between mod_python under Windows and Linux?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23188">[ date ]</a>
              <a href="thread.html#23188">[ thread ]</a>
              <a href="subject.html#23188">[ subject ]</a>
              <a href="author.html#23188">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi. I'm trying out the Django web framework, which I am running through
mod_python. I mention this because I am not clear precisely how Django
hooks into mod_python.

However it has become clear that we have a problem with class variables.
A simple version of our problem is depicted below. Essentially we need
to aggregate data between instances of a class, and have been using
class variables to do this. Under mod_python the class variables keep
incrementing, however, as common-sense (but alas, not foresight)
dictates.

I would be very grateful for advice on how to somehow make our class
variables local to any particular invocation of the script in which they
are accessed. 

Regards
Rory

class Part (object):
        totalgia = 0
        def __init__(self, gia):
            self.gia = gia  # gross internal area
            self.giaratio = 0
            Part.totalgia += self.gia
        def addavgbm(self):
            self.giaratio = float(self.gia)/float(Part.totalgia)
        def __repr__(self):
            return &quot;gia: %0.1f giaratio: %0.2f&quot; % (self.gia, self.giaratio)

    if __name__ == '__main__':
        p1 = Part(20)
        p2 = Part(30)
        for p in p1, p2:
            p.addavgbm()
            print p
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023187.html">[mod_python] Showing sys.executable would be a useful addition to
 mod_python.testhandler.py would it not?
</A></li>
	<LI>Next message: <A HREF="023189.html">[mod_python] Differences between mod_python under Windows and Linux?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23188">[ date ]</a>
              <a href="thread.html#23188">[ thread ]</a>
              <a href="subject.html#23188">[ subject ]</a>
              <a href="author.html#23188">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
