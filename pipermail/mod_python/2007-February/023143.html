<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] How to set utf-8 charset from mod_python?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20How%20to%20set%20utf-8%20charset%20from%20mod_python%3F&In-Reply-To=45C1C028.16204.17B73A50%40export.hope.cz">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023142.html">
   <LINK REL="Next"  HREF="023144.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] How to set utf-8 charset from mod_python?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20How%20to%20set%20utf-8%20charset%20from%20mod_python%3F&In-Reply-To=45C1C028.16204.17B73A50%40export.hope.cz"
       TITLE="[mod_python] How to set utf-8 charset from mod_python?">grahamd at dscpl.com.au
       </A><BR>
    <I>Thu Feb  1 05:58:26 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023142.html">[mod_python] How to set utf-8 charset from mod_python?
</A></li>
        <LI>Next message: <A HREF="023144.html">[mod_python] mod_python webhosts?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23143">[ date ]</a>
              <a href="thread.html#23143">[ thread ]</a>
              <a href="subject.html#23143">[ subject ]</a>
              <a href="author.html#23143">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 01/02/2007, at 8:25 PM, <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">export at hope.cz</A> wrote:

&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> Like req.write(' &lt;html&gt;....').encode('utf-8')
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Or
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Def do_some_processing(Req):
</I>&gt;&gt;<i>  Req.return_html+=&quot;&lt;!-- --&gt;\n&quot;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Handler(Req):
</I>&gt;&gt;<i>  Req.return_html=&quot;&quot;
</I>&gt;&gt;<i>  Req.return_html+=&quot;&lt;html&gt;....\n&quot;
</I>&gt;&gt;<i>       do_some_processing(Req)
</I>&gt;&gt;<i>  Req.write(Req.return_html).encode('utf-8')
</I>&gt;&gt;<i>  ......
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Martijn
</I>&gt;<i>
</I>&gt;<i> Martin,
</I>&gt;<i> Thank you for your reply.
</I>&gt;&gt;<i> req.write(' &lt;html&gt;....').encode('utf-8')
</I>&gt;<i> That  does not work for me. I receive the error:
</I>&gt;<i> AttributeError: 'NoneType' object has no attribute 'encode'
</I>&gt;<i>
</I>&gt;<i> I normally use
</I>&gt;<i> &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;&gt;
</I>&gt;<i> in my HTRL page but it does NOT work with mod_python handler for me.
</I>&gt;<i> When I open the page in a browser and check the Encoding from  the  
</I>&gt;<i> browser menu,
</I>&gt;<i> it is set to Western European(ISO) not to UTF-8.
</I>&gt;<i>
</I>&gt;<i> Where can be a problem?
</I>
The encode() method is something one calls on strings. If you look up
the Python documentation for string objects you will find what it does.
 From that you might then see that the example he sent simply had some
minor typos (mistakes) in it in that he wrongly applied the encode()  
method
to the result of the write() call and not to the string argument that  
was being
passed as argument to it. Ie., it should be something like:

   body = u&quot;&lt;html&gt; ..... &lt;/html&gt;&quot;
   req.write(body.encode('utf-8'))

There is still a bit more to it though as others are pointing out, as  
you have
to be mindful about content of the HTML/XML as well.

Graham
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023142.html">[mod_python] How to set utf-8 charset from mod_python?
</A></li>
	<LI>Next message: <A HREF="023144.html">[mod_python] mod_python webhosts?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23143">[ date ]</a>
              <a href="thread.html#23143">[ thread ]</a>
              <a href="subject.html#23143">[ subject ]</a>
              <a href="author.html#23143">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
