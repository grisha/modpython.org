<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] mod_python adapter for mod_wsgi in the make
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python%20adapter%20for%20mod_wsgi%20in%20the%20make&In-Reply-To=88e286470911252018y658d165fp87bf63e4494cd041%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026383.html">
   <LINK REL="Next"  HREF="026391.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] mod_python adapter for mod_wsgi in the make</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python%20adapter%20for%20mod_wsgi%20in%20the%20make&In-Reply-To=88e286470911252018y658d165fp87bf63e4494cd041%40mail.gmail.com"
       TITLE="[mod_python] mod_python adapter for mod_wsgi in the make">graham.dumpleton at gmail.com
       </A><BR>
    <I>Mon Nov 30 20:13:00 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="026383.html">[mod_python] mod_python adapter for mod_wsgi in the make
</A></li>
        <LI>Next message: <A HREF="026391.html">[mod_python] mod_python adapter for mod_wsgi in the make
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26390">[ date ]</a>
              <a href="thread.html#26390">[ thread ]</a>
              <a href="subject.html#26390">[ subject ]</a>
              <a href="author.html#26390">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>2009/11/26 Graham Dumpleton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>&gt;:
&gt;<i> I have moved it to:
</I>&gt;<i>
</I>&gt;<i> &#160;<A HREF="http://bitbucket.org/grahamdumpleton/apswigpy/">http://bitbucket.org/grahamdumpleton/apswigpy/</A>
</I>&gt;<i>
</I>&gt;<i> I'll add some basic documentation on building and usage.
</I>
Quick cheat sheet.

1. Do a checkout/pull latest code for apswigpy from bitbucket and
install it. Need this as added a little bridge for WSGI to at least
get things going.

2. Add following configuration to Apache. I had this inside its own VirtualHost.

WSGIHandlerScript python-script (apache.wsgi)

&lt;Directory /Users/grahamd/Testing/modpysfu&gt;
WSGIProcessGroup %{GLOBAL}
WSGIApplicationGroup modpysfu
WSGIPassApacheRequest On

AddHandler python-script .py

Options MultiViews FollowSymLinks
MultiviewsMatch Handlers

Order allow,deny
Allow from all
&lt;/Directory&gt;

In my case that directory was what DocumentRoot for host was set to.

You would need to Alias it in some way if don't want to do it for DocumentRoot.

3. Now dump '.py' files in that directory and access URL as if
accessing them as static file. A couple of examples are:

# hello.py

from apache.httpd import *
from apache.http_protocol import *

def handler(r):
    output = '&lt;html&gt;&lt;body&gt;Hello World!&lt;/body&gt;&lt;/html&gt;'

    r.status = HTTP_OK
    ap_set_content_type(r, 'text/html')
    #ap_set_content_length(r, len(output))
    ap_rwrite(output, r)
    ap_rflush(r)

    return OK

# echo.py

from apache.httpd import *
from apache.http_protocol import *

def handler(r):
    r.status = HTTP_OK
    ap_set_content_type(r, 'text/plain')

    for (name, value) in r.headers_in.items():
        ap_rwrite('%s: %s\n' % (name, value), r)

    ap_rflush(r)

    return OK

Note that this is raw SWIG binding, no mod_python specific additions
at this point. Some things have had to be Pythonised such as APR
tables as used by headers_in, but otherwise trying to keep truthful to
APR/AP APIs.

I know some things don't work, such as 'ap_set_content_length()'. Some
issue with SWIG bindings type equivalence has to be worked out for
that one and haven't had chance to read SWIG documentation.

Graham

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026383.html">[mod_python] mod_python adapter for mod_wsgi in the make
</A></li>
	<LI>Next message: <A HREF="026391.html">[mod_python] mod_python adapter for mod_wsgi in the make
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26390">[ date ]</a>
              <a href="thread.html#26390">[ thread ]</a>
              <a href="subject.html#26390">[ subject ]</a>
              <a href="author.html#26390">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
