<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] mod_python adapter for mod_wsgi in the make
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python%20adapter%20for%20mod_wsgi%20in%20the%20make&In-Reply-To=88e286470911301713o54da1c64h933e4bc1cee72a1a%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026390.html">
   <LINK REL="Next"  HREF="026392.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] mod_python adapter for mod_wsgi in the make</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python%20adapter%20for%20mod_wsgi%20in%20the%20make&In-Reply-To=88e286470911301713o54da1c64h933e4bc1cee72a1a%40mail.gmail.com"
       TITLE="[mod_python] mod_python adapter for mod_wsgi in the make">graham.dumpleton at gmail.com
       </A><BR>
    <I>Mon Nov 30 20:24:10 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="026390.html">[mod_python] mod_python adapter for mod_wsgi in the make
</A></li>
        <LI>Next message: <A HREF="026392.html">[mod_python] mod_python adapter for mod_wsgi in the make
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26391">[ date ]</a>
              <a href="thread.html#26391">[ thread ]</a>
              <a href="subject.html#26391">[ subject ]</a>
              <a href="author.html#26391">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I forgot to mention there is no automatic code reloading. Thus, if
changing any of the .py files you need to do an Apache restart.

The point is that this is just a proof of concept of WSGI bridge at
the moment. The intent would be to have separate package 'modpysfu'
which adds back all that automatic code reloading that mod_python had
as well as mod_python compatible interfaces for stuff.

Graham

2009/12/1 Graham Dumpleton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>&gt;:
&gt;<i> 2009/11/26 Graham Dumpleton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>&gt;:
</I>&gt;&gt;<i> I have moved it to:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160;<A HREF="http://bitbucket.org/grahamdumpleton/apswigpy/">http://bitbucket.org/grahamdumpleton/apswigpy/</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I'll add some basic documentation on building and usage.
</I>&gt;<i>
</I>&gt;<i> Quick cheat sheet.
</I>&gt;<i>
</I>&gt;<i> 1. Do a checkout/pull latest code for apswigpy from bitbucket and
</I>&gt;<i> install it. Need this as added a little bridge for WSGI to at least
</I>&gt;<i> get things going.
</I>&gt;<i>
</I>&gt;<i> 2. Add following configuration to Apache. I had this inside its own VirtualHost.
</I>&gt;<i>
</I>&gt;<i> WSGIHandlerScript python-script (apache.wsgi)
</I>&gt;<i>
</I>&gt;<i> &lt;Directory /Users/grahamd/Testing/modpysfu&gt;
</I>&gt;<i> WSGIProcessGroup %{GLOBAL}
</I>&gt;<i> WSGIApplicationGroup modpysfu
</I>&gt;<i> WSGIPassApacheRequest On
</I>&gt;<i>
</I>&gt;<i> AddHandler python-script .py
</I>&gt;<i>
</I>&gt;<i> Options MultiViews FollowSymLinks
</I>&gt;<i> MultiviewsMatch Handlers
</I>&gt;<i>
</I>&gt;<i> Order allow,deny
</I>&gt;<i> Allow from all
</I>&gt;<i> &lt;/Directory&gt;
</I>&gt;<i>
</I>&gt;<i> In my case that directory was what DocumentRoot for host was set to.
</I>&gt;<i>
</I>&gt;<i> You would need to Alias it in some way if don't want to do it for DocumentRoot.
</I>&gt;<i>
</I>&gt;<i> 3. Now dump '.py' files in that directory and access URL as if
</I>&gt;<i> accessing them as static file. A couple of examples are:
</I>&gt;<i>
</I>&gt;<i> # hello.py
</I>&gt;<i>
</I>&gt;<i> from apache.httpd import *
</I>&gt;<i> from apache.http_protocol import *
</I>&gt;<i>
</I>&gt;<i> def handler(r):
</I>&gt;<i> &#160; &#160;output = '&lt;html&gt;&lt;body&gt;Hello World!&lt;/body&gt;&lt;/html&gt;'
</I>&gt;<i>
</I>&gt;<i> &#160; &#160;r.status = HTTP_OK
</I>&gt;<i> &#160; &#160;ap_set_content_type(r, 'text/html')
</I>&gt;<i> &#160; &#160;#ap_set_content_length(r, len(output))
</I>&gt;<i> &#160; &#160;ap_rwrite(output, r)
</I>&gt;<i> &#160; &#160;ap_rflush(r)
</I>&gt;<i>
</I>&gt;<i> &#160; &#160;return OK
</I>&gt;<i>
</I>&gt;<i> # echo.py
</I>&gt;<i>
</I>&gt;<i> from apache.httpd import *
</I>&gt;<i> from apache.http_protocol import *
</I>&gt;<i>
</I>&gt;<i> def handler(r):
</I>&gt;<i> &#160; &#160;r.status = HTTP_OK
</I>&gt;<i> &#160; &#160;ap_set_content_type(r, 'text/plain')
</I>&gt;<i>
</I>&gt;<i> &#160; &#160;for (name, value) in r.headers_in.items():
</I>&gt;<i> &#160; &#160; &#160; &#160;ap_rwrite('%s: %s\n' % (name, value), r)
</I>&gt;<i>
</I>&gt;<i> &#160; &#160;ap_rflush(r)
</I>&gt;<i>
</I>&gt;<i> &#160; &#160;return OK
</I>&gt;<i>
</I>&gt;<i> Note that this is raw SWIG binding, no mod_python specific additions
</I>&gt;<i> at this point. Some things have had to be Pythonised such as APR
</I>&gt;<i> tables as used by headers_in, but otherwise trying to keep truthful to
</I>&gt;<i> APR/AP APIs.
</I>&gt;<i>
</I>&gt;<i> I know some things don't work, such as 'ap_set_content_length()'. Some
</I>&gt;<i> issue with SWIG bindings type equivalence has to be worked out for
</I>&gt;<i> that one and haven't had chance to read SWIG documentation.
</I>&gt;<i>
</I>&gt;<i> Graham
</I>&gt;<i>
</I>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026390.html">[mod_python] mod_python adapter for mod_wsgi in the make
</A></li>
	<LI>Next message: <A HREF="026392.html">[mod_python] mod_python adapter for mod_wsgi in the make
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26391">[ date ]</a>
              <a href="thread.html#26391">[ thread ]</a>
              <a href="subject.html#26391">[ subject ]</a>
              <a href="author.html#26391">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
