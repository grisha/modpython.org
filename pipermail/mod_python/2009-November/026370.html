<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Re: [modwsgi] mod_python publisher
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20%5Bmodwsgi%5D%20mod_python%20publisher&In-Reply-To=88e286470911101529p21fbbae0l170afd6fe1888efb%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026369.html">
   <LINK REL="Next"  HREF="026371.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Re: [modwsgi] mod_python publisher</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Martijn Moeling</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20%5Bmodwsgi%5D%20mod_python%20publisher&In-Reply-To=88e286470911101529p21fbbae0l170afd6fe1888efb%40mail.gmail.com"
       TITLE="[mod_python] Re: [modwsgi] mod_python publisher">martijn at xs4us.nu
       </A><BR>
    <I>Wed Nov 11 03:31:12 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="026369.html">[mod_python] Re: [modwsgi] mod_python publisher
</A></li>
        <LI>Next message: <A HREF="026371.html">[mod_python] Re: [modwsgi] mod_python publisher
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26370">[ date ]</a>
              <a href="thread.html#26370">[ thread ]</a>
              <a href="subject.html#26370">[ subject ]</a>
              <a href="author.html#26370">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Graham,

Thank you, You gave me the answer I expected....

I need a MOD_PYTHON_WSGI module so I will build one. I do not mind it to go public if it helps.
It will be a pure Python module so people can easily ajust/extend for there own needs...
at first I will create a request object and then I will add stuff like sessions.

Since I never have used the publisher handler (and to be true not even know how it works) I will leave that to others.

I'll keep the mod_python and mod_wsgi groups up to date, but I might bother you with some minor details.
Is it OK for me to re-use MP code?

I think MP programmers like the way they can define their application without a framework, like me the transition to WSGI cannot include a framework that doubles work already done (my system is an implementation on its own framework).
People interested might email me to get their &quot;wishes&quot; and needs.

we'll see

Martijn


On Nov 11, 2009, at 12:29 AM, Graham Dumpleton wrote:

&gt;<i> 2009/11/11 Martijn Moeling &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">martijn at xs4us.nu</A>&gt;:
</I>&gt;&gt;<i> Graham,
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I was searching the list searching for answers about moving away from MP to MWSGI and stumbled upon the below conversation.
</I>&gt;&gt;<i> Because of the workings of MP my application is heavily based around passing reference to the Request object.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Also I have modified Session.py from the MP package to store session data in a database behind SQLAlchemy.
</I>&gt;&gt;<i> Due to trial and error i found out that connecting to the database on each request with the Database closure in
</I>&gt;&gt;<i> a fixup request was the best solution in MP not sure yet about WSGI but I would like a similar scenario (which is in the WSGI wiki examples)
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> In the random number generation part of Session.py is some MP specific code (I do not seem to understand that part)
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I have been thinking of making a WSGI-MP adapter to get rid of the runtime or live troubles of MP being code compatible as base for MP applications.
</I>&gt;&gt;<i> so yes I am interested, and I would not mind contributing.
</I>&gt;<i> 
</I>&gt;<i> It isn't something I have time for these days. Can't even find time to
</I>&gt;<i> get next version of mod_wsgi released and only way I will achieve that
</I>&gt;<i> is to rip out some half done stuff I had added related to statistics
</I>&gt;<i> generation, deferring it to later or try and do it at Python code
</I>&gt;<i> level as an example rather than in C code of mod_wsgi itself.
</I>&gt;<i> 
</I>&gt;<i> There have been some people who have mentioned before they were
</I>&gt;<i> constructing mod_python request like objects for use in WSGI
</I>&gt;<i> applications for porting, but seems they only do it for themselves and
</I>&gt;<i> aren't interested in making it public.
</I>&gt;<i> 
</I>&gt;<i> BTW, mod_python only compiles on latest Apache 2.X versions by
</I>&gt;<i> applying a fix. In Apache 2.3 (2.4), even with that fix it is unlikely
</I>&gt;<i> to compile as they have changed quite a bit authorization handler
</I>&gt;<i> APIs. So, Apache 2.3 (2.4) may spell the end for mod_python unless
</I>&gt;<i> someone does the work in fixing mod_python.
</I>&gt;<i> 
</I>&gt;<i> Graham
</I>&gt;<i> 
</I>&gt;&gt;<i> Martijn
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> On Apr 24, 2009, at 8:16 AM, Graham Dumpleton wrote:
</I>&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> 2009/4/24 Matt Newville &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">matt.newville at gmail.com</A>&gt;:
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> I'm looking to move from mod_python to mod_wsgi, and reading through
</I>&gt;&gt;&gt;&gt;<i> the on-line documentation.
</I>&gt;&gt;&gt;&gt;<i> 've been fairly happy with mod_python for my own scripts, but do
</I>&gt;&gt;&gt;&gt;<i> appreciate that mod_wsgi is a better design and the future. I also
</I>&gt;&gt;&gt;&gt;<i> want to update a MoinMoin wiki on the same server to using mod_wsgi,
</I>&gt;&gt;&gt;&gt;<i> and am concerned about trying to have both mod_python and mod_wsgi
</I>&gt;&gt;&gt;&gt;<i> running on the same server.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> You can run mod_python and mod_wsgi on the same server, but in that
</I>&gt;&gt;&gt;<i> case certain features of mod_wsgi don't work as mod_python takes
</I>&gt;&gt;&gt;<i> control of initialising Python.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> Currently, I'm using mod_python's publisher handler for mapping url to
</I>&gt;&gt;&gt;&gt;<i> python function name and arguments, and for basic authentication.  By
</I>&gt;&gt;&gt;&gt;<i> themselves, the mod_python/publisher scripts I have  (ie, the code
</I>&gt;&gt;&gt;&gt;<i> with &quot;from mod_python import apache&quot;) are fairly small and simple and
</I>&gt;&gt;&gt;&gt;<i> mostly manage a connection to larger python modules  for the
</I>&gt;&gt;&gt;&gt;<i> application logic.
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> It looks like there isn't an immediate replacement for these features
</I>&gt;&gt;&gt;&gt;<i> within mod_wsgi, with the rationale given that such functionality is
</I>&gt;&gt;&gt;&gt;<i> best handled elsewhere, perhaps in a larger framework.  Is this a
</I>&gt;&gt;&gt;&gt;<i> correct reading?
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> It is only intended that mod_wsgi provide the low level gateway to the
</I>&gt;&gt;&gt;<i> server itself. This is in contrast to mod_python which provides the
</I>&gt;&gt;&gt;<i> low level gateway to the server, but also high level handlers.
</I>&gt;&gt;&gt;<i> Personally I think that mod_python did this was wrong, and the high
</I>&gt;&gt;&gt;<i> level handlers should have been separate. Problem it now causes is
</I>&gt;&gt;&gt;<i> that people don't want to give up mod_python because they are bound to
</I>&gt;&gt;&gt;<i> APIs which are part of the mod_python package. If those high level
</I>&gt;&gt;&gt;<i> handlers were separate, then there would have been a better chance
</I>&gt;&gt;&gt;<i> that they could have been rehosted on alternatives such as WSGI to
</I>&gt;&gt;&gt;<i> allow portability and migration away from mod_python.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> If so, what is the recommended path for those for
</I>&gt;&gt;&gt;&gt;<i> whom the publisher handler was a good fit?  Are there recommended
</I>&gt;&gt;&gt;&gt;<i> extensions that provide this functionality, or migration paths for
</I>&gt;&gt;&gt;&gt;<i> code currently using mod_python publisher?
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> There was someone on this list who was trying to come up with a
</I>&gt;&gt;&gt;<i> package which offered compatibility with mod_python.publisher but such
</I>&gt;&gt;&gt;<i> that it could be hosted on WSGI instead. For my mind, although it may
</I>&gt;&gt;&gt;<i> aid in migrating away from mod_python, I don't believe that an exactly
</I>&gt;&gt;&gt;<i> compatible system is a good idea, as mod_python.publisher has various
</I>&gt;&gt;&gt;<i> aspects which I regard as being broken.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Although I have resisted before, partly due to lack of time, but also
</I>&gt;&gt;&gt;<i> because I had some bigger ideas in mind, I haven't pursued the idea of
</I>&gt;&gt;&gt;<i> creating a package which could be a stepping stone to get away from
</I>&gt;&gt;&gt;<i> mod_python and onto mod_wsgi instead. Since I am treading water a bit
</I>&gt;&gt;&gt;<i> at the moment working out what direction I am going to take with
</I>&gt;&gt;&gt;<i> mod_wsgi and whether I branch out and do something to improve fastcgi
</I>&gt;&gt;&gt;<i> hosting, maybe I can have a look at this a bit now.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> As it turns out, most of the work is already done, as my Vampire
</I>&gt;&gt;&gt;<i> package for mod_python had a rewritten mod_python.publisher
</I>&gt;&gt;&gt;<i> equivalent. This fixes some of the problems in mod_python.publisher
</I>&gt;&gt;&gt;<i> and makes it more flexible, but still doesn't fix some of the things I
</I>&gt;&gt;&gt;<i> hate most about mod_python.publisher.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Anyway, I could take Vampire and repurpose it on top of WSGI and more
</I>&gt;&gt;&gt;<i> specifically mod_wsgi. The main thing I am missing to be able to do
</I>&gt;&gt;&gt;<i> that is a request object as obviously relied upon that from
</I>&gt;&gt;&gt;<i> mod_python. There are a couple of options there. First is to write my
</I>&gt;&gt;&gt;<i> own in order to avoid external dependencies, or use webob. There is
</I>&gt;&gt;&gt;<i> also Werkzeug, but it is much more than a request object so may be
</I>&gt;&gt;&gt;<i> bringing too much baggage.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> For forms processing, would just fall back on cgi.FieldStorage, which
</I>&gt;&gt;&gt;<i> does mean a loss of a few mod_python features, albeit not often used.
</I>&gt;&gt;&gt;<i> The only other thing, but which wasn't really a part of
</I>&gt;&gt;&gt;<i> mod_python.publisher, is session support. In some sort of first
</I>&gt;&gt;&gt;<i> version one could ignore session support though. Another future area
</I>&gt;&gt;&gt;<i> to look at might be to bring across PSP support into the package.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> The question is whether there is sufficient interest. In terms of
</I>&gt;&gt;&gt;<i> gauging that, have also cc'd this to mod_python list. If replying
</I>&gt;&gt;&gt;<i> please ensure you reply-all to both lists.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Do note that I wouldn't aim for compatibility as me being a pedantic
</I>&gt;&gt;&gt;<i> ass means I will not allow some of the stuff in mod_python.publisher
</I>&gt;&gt;&gt;<i> which I think is wrong. Obviously the request object isn't going to be
</I>&gt;&gt;&gt;<i> the same, although maybe one could have a mode where by you use a
</I>&gt;&gt;&gt;<i> request object wrapper to make it closer. As for the other stuff, that
</I>&gt;&gt;&gt;<i> may or may not affect many people. The particular area I have an issue
</I>&gt;&gt;&gt;<i> with in that respect is the really bad way mod_python.publisher deals
</I>&gt;&gt;&gt;<i> with trailing slashes. So, porting work would definitely be required.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> So, is there any interest in a mod_python.publisher like package to
</I>&gt;&gt;&gt;<i> act as a easy migration path away from mod_python?
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Graham
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;<i> Mod_python mailing list
</I>&gt;&gt;&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;&gt;&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026369.html">[mod_python] Re: [modwsgi] mod_python publisher
</A></li>
	<LI>Next message: <A HREF="026371.html">[mod_python] Re: [modwsgi] mod_python publisher
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26370">[ date ]</a>
              <a href="thread.html#26370">[ thread ]</a>
              <a href="subject.html#26370">[ subject ]</a>
              <a href="author.html#26370">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
