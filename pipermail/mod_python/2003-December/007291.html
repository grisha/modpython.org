<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Changing the status code with custom content
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Changing%20the%20status%20code%20with%20custom%20content&In-Reply-To=C0FC22C08B82074A88B500617641577787A7F0%40johnson.mediapulse.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007280.html">
   <LINK REL="Next"  HREF="007275.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Changing the status code with custom content</H1>
    <B>Gregory (Grisha) Trubetskoy</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Changing%20the%20status%20code%20with%20custom%20content&In-Reply-To=C0FC22C08B82074A88B500617641577787A7F0%40johnson.mediapulse.net"
       TITLE="[mod_python] Changing the status code with custom content">grisha at modpython.org
       </A><BR>
    <I>Mon Dec 22 19:42:38 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="007280.html">[mod_python] Changing the status code with custom content
</A></li>
        <LI>Next message: <A HREF="007275.html">[mod_python] mod_python and the semaphore bug
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7291">[ date ]</a>
              <a href="thread.html#7291">[ thread ]</a>
              <a href="subject.html#7291">[ subject ]</a>
              <a href="author.html#7291">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<table border=0 width="100%"><tr><td>
<!--beginarticle-->
<PRE>
I believe you should req.write() your error page, set req.status to the
the error code you want and return apache.OK. If you retrun anything other
then apache.OK, then Apache assumes you want it to send its own stock
error page.

(Hope this answers your question, I'm a bit woozy on nuquil right now....)

Grisha

On Mon, 22 Dec 2003, Michael C. Neel wrote:

&gt;<i> I'm having trouble using mod_python to change the status code and have
</I>&gt;<i> custom content in the error message.  If I return something other than
</I>&gt;<i> apache.OK in my handler, the status line is set correctly set but apache
</I>&gt;<i> returns the default error page.  If I have sent custom content for the
</I>&gt;<i> error message, the apache error message is added to the end of the
</I>&gt;<i> document.  I can get around this by using an ErrorDocument directive in
</I>&gt;<i> apache's conf, but I loose access to the traceback of the error and thus
</I>&gt;<i> the ability to have a really custom error message.
</I>&gt;<i>
</I>&gt;<i> At first glance this didn't seem to matter.  As long as the content said
</I>&gt;<i> error, the user knew of the problem, even if the status was 200 OK.
</I>&gt;<i> However I've found out now with search bots this does matter - they
</I>&gt;<i> don't know that they have a bad url for the site and are indexing error
</I>&gt;<i> pages thinking they are legit.
</I>&gt;<i>
</I>&gt;<i> Any thoughts on what I may be over looking?
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i> Mike
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I></PRE>
<!--endarticle-->
</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007280.html">[mod_python] Changing the status code with custom content
</A></li>
	<LI>Next message: <A HREF="007275.html">[mod_python] mod_python and the semaphore bug
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7291">[ date ]</a>
              <a href="thread.html#7291">[ thread ]</a>
              <a href="subject.html#7291">[ subject ]</a>
              <a href="author.html#7291">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
