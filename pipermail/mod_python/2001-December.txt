From bob at redivi.com  Sun Dec  2 09:08:22 2001
From: bob at redivi.com (Bob Ippolito)
Date: Fri Jan  9 21:46:34 2004
Subject: [mod_python] <Location> vs <Directory> ?
Message-ID: <20011202090822.A1135@redivi.com>

It seems to be possible to use <Location /some/url> instead of <Directory /some/path> with mod_python.

It can be desirable at times to be able to use a PythonHandler at any arbitrary URL, not just directories or files with the .py extension.  I didn't see this documented anywhere, or talked about on the list (at a glance of subjects for the past couple months).  This way you can make a python script look like a single file.. i.e.

<Location /some/url/somefile.html>
  SetHandler python-program
  PythonHandler myHandler
</Location>

this won't affect other .html files at /some/url.

-bob

From mike at mikebell.org  Sun Dec  2 11:30:10 2001
From: mike at mikebell.org (mike@mikebell.org)
Date: Fri Jan  9 21:46:34 2004
Subject: [mod_python] <Location> vs <Directory> ?
In-Reply-To: <20011202090822.A1135@redivi.com>
References: <20011202090822.A1135@redivi.com>
Message-ID: <20011202113009.A7474@mikebell.org>

On Sun, Dec 02, 2001 at 09:08:22AM -0500, Bob Ippolito wrote:
> It seems to be possible to use <Location /some/url> instead of <Directory
> /some/path> with mod_python.
> 
> It can be desirable at times to be able to use a PythonHandler at any
> arbitrary URL, not just directories or files with the .py extension.  I
> didn't see this documented anywhere, or talked about on the list (at a
> glance of subjects for the past couple months).  This way you can make a
> python script look like a single file.. i.e.
> 
> <Location /some/url/somefile.html>
>   SetHandler python-program
>   PythonHandler myHandler
> </Location>
> 
> this won't affect other .html files at /some/url.

Yes, I've been doing this since I first started using mod_python for things
like <Location /camera>. If you find some neat trick like that which you
think others might be interested in, why not make it a new entry in the FAQ?
Then it'll be there for people in the future without them having to read
through the mailing list archives.

From noamhooper at hotmail.com  Tue Dec  4 20:03:04 2001
From: noamhooper at hotmail.com (Noam Hoffer)
Date: Fri Jan  9 21:46:34 2004
Subject: [mod_python] MySQL problem on win32
Message-ID: <OE65Vuelu79YzvxsVeg00012711@hotmail.com>

Hello,
I didn't succed in using MySQLdb module from mod_python. I get the following error:
Mod_python error: "PythonHandler mptest"

Traceback (most recent call last):

  File "C:\Python21\Lib\mod_python\apache.py", line 181, in Dispatch
    module = import_module(module_name, _req)

  File "C:\Python21\Lib\mod_python\apache.py", line 338, in import_module
    module = imp.load_module(mname, f, p, d)

  File "C:\Program Files\Apache Group\Apache\htdocs\python\test\mptest.py", line 2, in ?
    import MySQLdb

  File "C:\Python21\MySQLdb\__init__.py", line 27, in ?
    import _mysql

ImportError: _mysql: init failed

when using it from the interpreter it works file.
here is my script:
from mod_python import apacheimport MySQLdb
def _db_login(relogin = 0):    """Login to the database    """
    global DB_CONN
    if relogin:        DB_CONN = MySQLdb.connect(db="test")        return DB_CONN    else:        try:            d = DB_CONN            return d
        except NameError:     DB_CONN = MySQLdb.connect(db="test")            return DB_CONN
def handler(req):    req.content_type = "text/plain"    req.send_http_header()    req.write("Hello World!")    conn = _db_login()    cur = conn.cursor()    cur.execute("select * from stam")    req.write(cur.fetchall())
    return apache.OK


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20011204/8221f032/attachment.htm
From PhoenixWR at hotmail.com  Sat Dec  8 04:50:24 2001
From: PhoenixWR at hotmail.com (WRFan)
Date: Fri Jan  9 21:46:34 2004
Subject: [mod_python] mod_python publisher module doesn't work (404 error); AttributeError: module ...contains no handler
Message-ID: <OE20oiMyr5NJvKk69Z000014e0e@hotmail.com>

Hi,

I installed mod_python 2.7.4 (Python 2.1.1) on my Apache server 1.3.20 and windows 98. However, I can't use the mod_python publisher module 
( PythonHandler mod_python.publisher ). 
If I insert this into a htaccess file or into the Apache config file and execute the usual "Hello world" testing script, I get a 404 error (page not found). I opened the publisher.py file and it seems that if there is a problem, this module makes Apache display an error page. I just don't understand what the problem is. When I use the name of the file as the handler, e.g. for a file test.py:

PythonHandler test

the script is executed all right, I see the "Hello World message". Do you know what the problem might be with PythonHandler mod_python.publisher ?

I added this to my httpd.conf file:

AddHandler python-program .py 

and this I put into a htaccess file:

AddHandler python-program .py 

AddHandler python-program .pyc

AddHandler python-program .python

SetHandler python-program 

PythonHandler test

#PythonHandler mod_python.publisher 

PythonDebug on 

Also if I try to use some python scripts downloaded from the net through Apache, I get this error:

Mod_python error: "PythonHandler Index"

Traceback (most recent call last):

  File "C:\Programme\Server\Python\Lib\mod_python\apache.py", line 185, in Dispatch
    object = resolve_object(req, module, object_str, silent)

  File "C:\Programme\Server\Python\Lib\mod_python\apache.py", line 395, in resolve_object
    raise AttributeError, s

AttributeError: module 'c:/programme/server/apache/public/python/ransacker/\Index.pyc' contains no 'handler'


It's always this error. Does that mean that python scripts can't be executed through mod_python, but have to be re-written for the Apache module?
Please email me at PhoenixWR@hotmail.com.
Thank you,
Regards,
Gerhart.  

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20011208/21941b76/attachment.htm
From seant at webreply.com  Tue Dec 11 12:15:32 2001
From: seant at webreply.com (Sean True)
Date: Fri Jan  9 21:46:34 2004
Subject: [mod_python] Marrying BaseHTTPServer to modpython?
Message-ID: <MJEHLHJKGINLONDMMKNEAEIEECAA.seant@webreply.com>

Before diving in myself, I thought I would ask if anyone has made a handler
that will support software
which expect to subclass the BaseHTTPServer class? I've found some useful
DAV software (file system transport
over HTTP) which works as a complicated subclass of BaseHTTPServer.

-- Sean
-------
Sean True
WebReply.Com, Inc.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Sean True.vcf
Type: text/x-vcard
Size: 309 bytes
Desc: not available
Url : http://mailman.modpython.org/pipermail/mod_python/attachments/20011211/5e77a1c4/SeanTrue.vcf
From ray_drew at yahoo.co.uk  Mon Dec 17 10:11:09 2001
From: ray_drew at yahoo.co.uk (Ray Drew)
Date: Fri Jan  9 21:46:34 2004
Subject: [mod_python] Python 2.2
Message-ID: <004701c186e3$269bafc0$df13000a@RDREWXP>

Is mod_python avalable for Python 2.2 yet? Python 2.2 final is scheduled for
release later this week.

regards,

Ray Drew


_________________________________________________________
Do You Yahoo!?
Get your free @yahoo.com address at http://mail.yahoo.com


From grisha at modpython.org  Mon Dec 17 10:34:19 2001
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:46:34 2004
Subject: [mod_python] Python 2.2
In-Reply-To: <004701c186e3$269bafc0$df13000a@RDREWXP>
Message-ID: <Pine.BSF.4.32.0112171033370.20970-100000@localhost>

I haven't tried compiling it with 2.2 yet, but chances are it will work
without any modifications... I guess we'll see when it comes out. :)

On Mon, 17 Dec 2001, Ray Drew wrote:

> Is mod_python avalable for Python 2.2 yet? Python 2.2 final is scheduled for
> release later this week.
>
> regards,
>
> Ray Drew
>
>
> _________________________________________________________
> Do You Yahoo!?
> Get your free @yahoo.com address at http://mail.yahoo.com
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From sobral at sj.univali.br  Mon Dec 17 13:11:46 2001
From: sobral at sj.univali.br (MARCELO MAIA SOBRAL)
Date: Fri Jan  9 21:46:34 2004
Subject: [mod_python] Python 2.2
In-Reply-To: <Pine.BSF.4.32.0112171033370.20970-100000@localhost>
Message-ID: <Pine.LNX.4.30.0112171310370.32268-100000@so.sj.univali.br>

   I have compiled mod_python 2.7.6 with python 2.2, and it has been
working fine.

On Mon, 17 Dec 2001, Gregory (Grisha) Trubetskoy wrote:

> I haven't tried compiling it with 2.2 yet, but chances are it will work
> without any modifications... I guess we'll see when it comes out. :)
>
> On Mon, 17 Dec 2001, Ray Drew wrote:
>
> > Is mod_python avalable for Python 2.2 yet? Python 2.2 final is scheduled for
> > release later this week.

  -----------------------------
  Prof. Marcelo Maia Sobral
  Administrador de Redes
  Nucleo de Informatica
  Univali - Campus S?o Jos?
  Fone: (0xx48) 281-1558
  -----------------------------


From guido at python.org  Mon Dec 17 10:59:39 2001
From: guido at python.org (Guido van Rossum)
Date: Fri Jan  9 21:46:34 2004
Subject: [mod_python] Python 2.2
In-Reply-To: Your message of "Mon, 17 Dec 2001 10:34:19 EST."
             <Pine.BSF.4.32.0112171033370.20970-100000@localhost> 
References: <Pine.BSF.4.32.0112171033370.20970-100000@localhost> 
Message-ID: <200112171559.KAA21926@cj20424-a.reston1.va.home.com>

> I haven't tried compiling it with 2.2 yet, but chances are it will work
> without any modifications... I guess we'll see when it comes out. :)

Why don't you try it with the release candidate, 2.2c1?  We can use
all the testing we can get! :-)

--Guido van Rossum (home page: http://www.python.org/~guido/)


From mailer at mailer.ru  Mon Dec 17 18:39:21 2001
From: mailer at mailer.ru (mailer)
Date: Fri Jan  9 21:46:34 2004
Subject: [mod_python] =?windows-1251?B?zvIg5O7x8u7p7e7pIP3q7u3u7OjoIC0g6iDk7vHy8+/t7ukg8O7x6g==?=
 =?windows-1251?B?7vjoIS4u?=
Message-ID: <000901c186f7$da1a8620$32c8a8c0@webmaster>


    ???????? ?????? ????????? ????????? ?????????, ?????????? ?? ??????? ?? ?????? ?????? ????? ?? ???? ??? ?????? ?? ?????? ? ????????: 

 - ??? ???, ????? ?????, ??????, ?????? ? ????????.

 - ????????? ????? ?????? ?? ??????. 


--------------------------------------------------------------------------------

???? ??? ?? ?????????????? ???? ??????????? ? ?? ?????? ?? ?????? ???????? ??? ???????? - ???????? ???? ???????? ?????????. ?????? ??????? ?????? ?????? ? ????? E-Mail ?? ????? major-pain@yandex.ru ? ?? ?????? ????????? ?? ??????? ??????????????? ??????? ??????????.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20011217/6b7421f2/attachment.htm
From cva_ at yahoo.com  Mon Dec 17 12:42:31 2001
From: cva_ at yahoo.com (Chris Anderson)
Date: Fri Jan  9 21:46:34 2004
Subject: [mod_python] sporadic import errors...
Message-ID: <20011217204231.37269.qmail@web11604.mail.yahoo.com>

okay, i'm running Python 2.1.1, mod_python 2.7.6, and apache 1.3.19
under Linux 2.2.14. the mod_python module is build statically.

after hitting our app a couple of times, i sporadically receive the
following error:

'import site' failed; traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python2.1/site.py", line 60, in ?
    import sys, os
  File "/usr/local/lib/python2.1/os.py", line 54, in ?
    __all__.extend(_get_exports_list(posix))
  File "/usr/local/lib/python2.1/os.py", line 35, in _get_exports_list
    return list(module.__all__)
AttributeError: 'posix' module has no attribute '__all__'
make_obcallback(): could not import mod_python.apache.
make_obcallback(): could not call init.

and i'm having a terrible time isolating what could be causing this to
occur.

interesting things which could be related:

o multiple instances of the app are running under the same apache with
different <Directory> tags handling the different apache/mod_python
settings

o i have PythonInterpPerDir turned on

o the problem seems most easily exaccerbated by running multiple
scripts simultaneously

the biggest problem i'm having (besides the error itself) is that i
can't figure out any way to tell which subinterpreter i am in when
these errors happen. i've poked through the documentation and
pythonrun.c to no avail.

any tips would be most helpful.

cva

__________________________________________________
Do You Yahoo!?
Check out Yahoo! Shopping and Yahoo! Auctions for all of
your unique holiday gifts! Buy at http://shopping.yahoo.com
or bid at http://auctions.yahoo.com

From guido at python.org  Mon Dec 17 16:01:35 2001
From: guido at python.org (Guido van Rossum)
Date: Fri Jan  9 21:46:34 2004
Subject: [mod_python] sporadic import errors...
In-Reply-To: Your message of "Mon, 17 Dec 2001 12:42:31 PST."
             <20011217204231.37269.qmail@web11604.mail.yahoo.com> 
References: <20011217204231.37269.qmail@web11604.mail.yahoo.com> 
Message-ID: <200112172101.QAA18776@cj20424-a.reston1.va.home.com>

> okay, i'm running Python 2.1.1, mod_python 2.7.6, and apache 1.3.19
> under Linux 2.2.14. the mod_python module is build statically.
> 
> after hitting our app a couple of times, i sporadically receive the
> following error:
> 
> 'import site' failed; traceback:
> Traceback (most recent call last):
>   File "/usr/local/lib/python2.1/site.py", line 60, in ?
>     import sys, os
>   File "/usr/local/lib/python2.1/os.py", line 54, in ?
>     __all__.extend(_get_exports_list(posix))
>   File "/usr/local/lib/python2.1/os.py", line 35, in _get_exports_list
>     return list(module.__all__)
> AttributeError: 'posix' module has no attribute '__all__'
> make_obcallback(): could not import mod_python.apache.
> make_obcallback(): could not call init.
> 
> and i'm having a terrible time isolating what could be causing this to
> occur.
> 
> interesting things which could be related:
> 
> o multiple instances of the app are running under the same apache with
> different <Directory> tags handling the different apache/mod_python
> settings
> 
> o i have PythonInterpPerDir turned on
> 
> o the problem seems most easily exaccerbated by running multiple
> scripts simultaneously

Here's my analysis of the case.  Looking at the source code of os.py:

def _get_exports_list(module):
    try:
        return list(module.__all__)
    except AttributeError:
        return [n for n in dir(module) if n[0] != '_']

the AttributeError should be caught -- but it isn't!  I think this is
because each Python interpreter instance initializes its own copy of
the exceptions -- but store them in a global shared by all instances
running in the same process!

> the biggest problem i'm having (besides the error itself) is that i
> can't figure out any way to tell which subinterpreter i am in when
> these errors happen. i've poked through the documentation and
> pythonrun.c to no avail.

Can you try this with Python 2.2c1?  I think we've fixed it there.  If
you can't try 2.2c1, try the patch to pythonrun.c from rev 2.143 to
2.144:
http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/python/python/dist/src/Python/pythonrun.c.diff?r1=2.143&r2=2.144.

--Guido van Rossum (home page: http://www.python.org/~guido/)

From cva_ at yahoo.com  Mon Dec 17 13:49:47 2001
From: cva_ at yahoo.com (Chris Anderson)
Date: Fri Jan  9 21:46:34 2004
Subject: [mod_python] sporadic import errors...
In-Reply-To: <200112172101.QAA18776@cj20424-a.reston1.va.home.com>
Message-ID: <20011217214947.86064.qmail@web11606.mail.yahoo.com>



--- Guido van Rossum <guido@python.org> wrote:
> 
> Here's my analysis of the case.  Looking at the source code of os.py:
> 
> def _get_exports_list(module):
>     try:
>         return list(module.__all__)
>     except AttributeError:
>         return [n for n in dir(module) if n[0] != '_']
> 
> the AttributeError should be caught -- but it isn't!  I think this is
> because each Python interpreter instance initializes its own copy of
> the exceptions -- but store them in a global shared by all instances
> running in the same process!
> 
> > the biggest problem i'm having (besides the error itself) is that i
> > can't figure out any way to tell which subinterpreter i am in when
> > these errors happen. i've poked through the documentation and
> > pythonrun.c to no avail.
> 
> Can you try this with Python 2.2c1?  I think we've fixed it there. 
> If
> you can't try 2.2c1, try the patch to pythonrun.c from rev 2.143 to
> 2.144:
>
http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/python/python/dist/src/Python/pythonrun.c.diff?r1=2.143&r2=2.144.

i didn't have an opportunity to try with 2.2c1, but the patch against
2.1.1 seems to have fixed the problem.

thanks much,

cva

__________________________________________________
Do You Yahoo!?
Check out Yahoo! Shopping and Yahoo! Auctions for all of
your unique holiday gifts! Buy at http://shopping.yahoo.com
or bid at http://auctions.yahoo.com

From harm at millionmonkeys.nl  Tue Dec 18 22:57:49 2001
From: harm at millionmonkeys.nl (harm)
Date: Fri Jan  9 21:46:34 2004
Subject: [mod_python] getvalue() in util.py
Message-ID: <20011218225749.E29846@godel>

Moi,

is there any reason there is no getvalue() in mod_python/util.py?
Could be as simple as this:

harm@turing:/tmp$ diff util.py.orig util.py
252a253,259
>     def getvalue(self, key, default=None):
>         """Dictionary style get() method, including 'value' lookup."""
>         if self.has_key(key):
>             return self[key]
>         else:
>             return default
> 

cgi.py has it as well, makes life easier if they one can use the same
funtions under mod_python and plain cgi...


Thanks,

Harmen


-- 
                               The Moon is Waxing Crescent (16% of Full)

From johnny at johnnysfunhouse.com  Tue Dec 18 21:21:37 2001
From: johnny at johnnysfunhouse.com (Refrigerator Johnny)
Date: Fri Jan  9 21:46:35 2004
Subject: [mod_python] apache [linux] config file.
Message-ID: <025501c18833$e392e890$6401a8c0@cj543266b>

I statically linked mod_python into apache on a linux 6.2 system.
I can see in my log file, that it is loaded.
I added the following to my apache.conf file:
<Directory /usr/local/apache/test>
   AddHandler python-program .py
   Pythonhandler mptest
  PythonDebug On
</Directory>

when I go to localhost/test/mptest.py,
I get a listing of the python file.
What else do I have to do?
Thanks for any insight into this problem!
-john
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20011218/64b4981c/attachment.htm
From sep27 at cornell.edu  Wed Dec 19 00:58:46 2001
From: sep27 at cornell.edu (S.Plake)
Date: Fri Jan  9 21:46:35 2004
Subject: [mod_python] installation problem
Message-ID: <5.1.0.14.2.20011219005240.00adc7b8@postoffice.mail.cornell.edu>

I am currently dual booting win2k pro and RH 7.2, I have apache on both 
sides and python 2.1 on both. I am currently trying to get the python_mod 
into apache on win2k side but have run into a problem. I get an error when 
I restart Apache that says:

"Invalid Command 'PythonHandler' perhaps mis-spelled or defined by a module 
not included in the server configuration"

I followed word for word the instructions on installation on the modpython 
website. I am hoping someone on this list will be able to help me figure 
this out.

Thank you,

steve










From gege at mail.china.com  Thu Dec 20 10:42:41 2001
From: gege at mail.china.com (ОДБъ)
Date: Fri Jan  9 21:46:35 2004
Subject: [mod_python] Dose Anyone can give me a new version mod_python DLL ?
Message-ID: <Of988779895758.23369@webmail4>

I want a mod_python 2.7.6 DLL with Apache 1.3.22,which can run under Windows XP. If you have, email me please. Thank you very much.

Regards

Wenlong Liu



From alc20020 at mailcity.com  Sat Dec 22 08:09:56 2001
From: alc20020 at mailcity.com (ALC)
Date: Fri Jan  9 21:46:35 2004
Subject: [mod_python] American Language Center- 156-0000 Merry Christmas!
Message-ID: <22120100003$999219783670864$1516794660$0@exploder3.em5000.net>



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20011222/7397f8d8/attachment.htm
From dds at aport.ru  Wed Dec 26 18:37:06 2001
From: dds at aport.ru (Dmitri D. Sayakin)
Date: Fri Jan  9 21:46:35 2004
Subject: [mod_python] mod_python bug?
Message-ID: <200112261537.SAA04082@www.megapage.ru>

Trying to work with encoding="koi8-r" (and "cp1251","iso-8859-5") in site.py,
can't start mod_python-2.7.6 with apache/1.3.22 rus/PL30.9. After changing
back to "ascii", mod_python started and works. Is this normal behavior?

From rodrigo at dgf.uchile.cl  Thu Dec 27 19:14:47 2001
From: rodrigo at dgf.uchile.cl (rodrigo)
Date: Fri Jan  9 21:46:35 2004
Subject: [mod_python] Python 2.1.1 and apache 1.3.22
Message-ID: <3C2B9D57.9B1BFAE0@dgf.uchile.cl>

Dear experts
  I have compiled  Python-2.1.1 with  "--without-threads" option....
  (then make and make install)

 I have compiled  mod_python_2.7.6 with options :
 --with-apache=../apache_1.3.22  --with-python
 (then make and make install)

I have compiled  apache_1.3.22 with the following options:
  ./configure   --activate-module=src/modules/python/libpython.a
and then, when I do "make" ... I get the following compiling errors:
---------------------------------------------------------------------
gcc  -DSOLARIS2=270 -DUSE_EXPAT -I./lib/expat-lite -DNO_DL_NEEDED
`./apaci`  \
    -o httpd buildmark.o modules.o modules/python/libpython.a
modules/standard/libstandard.a   \
      main/libmain.a  ./os/unix/libos.a  ap/libap.a
lib/expat-lite/libexpat.a  -lsocket -lns

modules/python/libpython.a(mod_python.o): In function
`make_interpreter':
mod_python.o(.text+0xc): undefined reference to `Py_NewInterpreter'
mod_python.o(.text+0x6c): undefined reference to `PyThreadState_Swap'
modules/python/libpython.a(mod_python.o): In function
`get_interpreter_data':
mod_python.o(.text+0xc4): undefined reference to `PyDict_GetItemString'
mod_python.o(.text+0x130): undefined reference to
`PyCObject_FromVoidPtr'
mod_python.o(.text+0x150): undefined reference to `PyDict_SetItemString'

.....
modules/python/libpython.a(mod_python.o): In function `python_cleanup':
mod_python.o(.text+0x338): undefined reference to `PyThreadState_New'
mod_python.o(.text+0x348): undefined reference to `PyThreadState_Swap'
mod_python.o(.text+0x368): undefined reference to
`PyObject_CallFunction'
.....
and so ...
----------------------------------------------------------------------
when I add  "--with-apxs" option in mod_python_2.7.6, and compile apache
adding
"--enable-module=rewrite --enable-shared=rewrite" options...  apache
failed
to start, in the lines:
LoadModule rewrite_module     libexec/mod_rewrite.so
LoadModule python_module      libexec/mod_python.so
...

I'm really confused ...
Any idea ?


Rodrigo Sanchez Olavarria
DGF. U. de Chile



From bakey at traq.com  Thu Dec 27 13:58:18 2001
From: bakey at traq.com (Brian Akey)
Date: Fri Jan  9 21:46:35 2004
Subject: [mod_python] Python 2.1.1 and apache 1.3.22
Message-ID: <780A5D64B1CC9544AB7B702F39219C1E5F38@traqexch.traq.com>

I have found that mod_python compiles better if you
do ./configure --with-apache=../apache
--with-apxs=/usr/local/apache/bin/apxs
make static
make install_static
cd apache
./configure   --activate-module=src/modules/python/libpython.a
make
make install

I don't use the --with-python
I make sure the python without-threads is in the path (/usr/bin/python)
I have not had good luck with the --with-python
Also if you want to use python with threads just mv your old python and use
ln -s to the one that mod_python needs. After you compile apache mv or ln -s
the old python back.


-----Original Message-----
From: rodrigo [mailto:rodrigo@dgf.uchile.cl]
Sent: Thursday, December 27, 2001 4:15 PM
To: mod_python@modpython.org; rodrigo@dgf.uchile.cl
Subject: [mod_python] Python 2.1.1 and apache 1.3.22


Dear experts
  I have compiled  Python-2.1.1 with  "--without-threads" option....
  (then make and make install)

 I have compiled  mod_python_2.7.6 with options :
 --with-apache=../apache_1.3.22  --with-python
 (then make and make install)

I have compiled  apache_1.3.22 with the following options:
  ./configure   --activate-module=src/modules/python/libpython.a
and then, when I do "make" ... I get the following compiling errors:

From e_v_s1234 at email.ru  Sat Dec 29 16:35:25 2001
From: e_v_s1234 at email.ru (VISA SUPPORT)
Date: Fri Jan  9 21:46:35 2004
Subject: [mod_python] ПАСПОРТНО-ВИЗОВЫЕ УСЛУГИ / VISA SUPPORT
Message-ID: <200112291443.fBTEhhi19579@card.co.ru>

ОФОРМЛЕНИЕ ЗАГРАНПАСПОРТОВ

(Цены указаны для жителей Москвы и Моск. области)

35 раб.дней - $70
21-23 раб.дней - $140
15-17 раб.дней - $180
10-12 раб.дней - $260
8-9 раб. дней - $330
6-7 раб. дней - $390

По Вашему запросу вышлем комплект необходимых
документов для оформления загранпаспорта.

В И З О В Ы Е    У С Л У Г И

Оформление приглашений для ИНОСТРАНЦЕВ в Россию.
Однократное на 1 месяц - $ 25
Многократное на 1 год- $ 150

*Правовые вопросы относительно пребывания иностранных граждан на территории РФ,
 проблемные случаи.
*Вопросы выезда РОССИЯН за рубеж, оформление надлежащих документов
 (ВИЗЫ).

БЕСПЛАТНЫЙ ВЫЕЗД КУРЬЕРА К ВАМ В ОФИС В ПРЕДЕЛАХ г. МОСКВЫ

ТЕЛ./ФАКС: (095) 797-04-82,  797-04-08,  107-78-58


V I S A   S E R V I C E S

L e g a l i z a t i o n   o f   t h e   R u s s i a n   v i s a - i n v i t a t i o n s
f o r   f o r e i g n c i t i z e n s.

Single for 1 month-only $25
Multiple for 1 year-only $150

*S o l u t i o n   o f   l e g a l   m a t t e r s   c o n c e r n i n g   f o r e i g n   c i t i z e n s   s t a y
o n   t h e   t e r r i t o r y   o f   R u s s i a n   F e d e r a t i o n,   q u e s t i o n a b l e   i s s u e s.

*A s s i s t a n c e   i n   v i s a s   r e g i s t r a t i o n   f o r   t h e
f o r e i g n   c i t i z e n s   i n   R u s s i a.

*S o l u t i o n   o f   t h e   p r o b l e m s   c o n c e r n i n g   R U S S I A N
c i t i z e n s   d e p a r t u r e   a b r o a d,   r e g i s t r a t i o n
o f   t h e   p r o p e r   d o c u m e n t s:   f o r e i g n   p a s s p o r t s   a n d   v i s a s.

TEL./FAX: +7(095) 797-04-82,  797-04-08,  107-78-58

From clarence at netlojix.com  Mon Dec 31 13:51:38 2001
From: clarence at netlojix.com (Clarence Gardner)
Date: Fri Jan  9 21:46:35 2004
Subject: [mod_python] HTTP response codes
Message-ID: <20011231135138.D3328@liberty.sba2.netlojix.net>

I'm not seeing a way to do much with the response code. In particular,
I want to do a redirection, which requires a 3xx response and a Location
header.

If I just return HTTP_MOVED_PERMANENTLY, the server sends an HTML
document containing an empty link, with a status of 301. If I set
the header, call send_http_header, and then return that status, I
get the same HTML, but with a 200 status (and my Location header
isn't included anyway).

Have I missed something?
Thanks.

-- 
Clarence Gardner
Software Engineer
NetLojix Communications
clarence@netlojix.com

From clarence at netlojix.com  Mon Dec 31 14:24:17 2001
From: clarence at netlojix.com (Clarence Gardner)
Date: Fri Jan  9 21:46:35 2004
Subject: [mod_python] Mea culpa
Message-ID: <20011231142417.F3328@liberty.sba2.netlojix.net>

I see that this is addressed in the FAQ that I was pointed
to. [but I *did* RTFM :)]

Sorry.

I also see that the FAQ mentions req.status which is not mentioned in
the manual.

-- 
Clarence Gardner
Software Engineer
NetLojix Communications
clarence@netlojix.com

From grisha at modpython.org  Mon Dec 31 17:37:01 2001
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:46:35 2004
Subject: [mod_python] HTTP response codes
In-Reply-To: <20011231135138.D3328@liberty.sba2.netlojix.net>
Message-ID: <Pine.BSF.4.32.0112311731590.43002-100000@localhost>

By returning an error code, you're asking Apache to deal with your error.
Apache will then display a stock error page, and will send error headers
(req.err_headers_out instead of req.headers_out), which is why you didn't
see your header amongst them.

What you want to do instead is handle everything yourself, and then let
Apache know it's done by returning apache.OK.

Something like this should work (this is from the FAQ, btw):

 def handler(req):
     req.headers_out['location'] = 'http://www.modpython.org/'
     req.status = apache.HTTP_MOVED_TEMPORARILY
     req.send_http_header()
     return apache.OK

Grisha


On Mon, 31 Dec 2001, Clarence Gardner wrote:

>
> I'm not seeing a way to do much with the response code. In particular,
> I want to do a redirection, which requires a 3xx response and a Location
> header.
>
> If I just return HTTP_MOVED_PERMANENTLY, the server sends an HTML
> document containing an empty link, with a status of 301. If I set
> the header, call send_http_header, and then return that status, I
> get the same HTML, but with a 200 status (and my Location header
> isn't included anyway).
>
> Have I missed something?
> Thanks.
>
> --
> Clarence Gardner
> Software Engineer
> NetLojix Communications
> clarence@netlojix.com
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From bob at redivi.com  Sun Dec  2 09:08:22 2001
From: bob at redivi.com (Bob Ippolito)
Date: Fri Jan  9 21:52:39 2004
Subject: [mod_python] <Location> vs <Directory> ?
Message-ID: <20011202090822.A1135@redivi.com>

It seems to be possible to use <Location /some/url> instead of <Directory /some/path> with mod_python.

It can be desirable at times to be able to use a PythonHandler at any arbitrary URL, not just directories or files with the .py extension.  I didn't see this documented anywhere, or talked about on the list (at a glance of subjects for the past couple months).  This way you can make a python script look like a single file.. i.e.

<Location /some/url/somefile.html>
  SetHandler python-program
  PythonHandler myHandler
</Location>

this won't affect other .html files at /some/url.

-bob

From mike at mikebell.org  Sun Dec  2 11:30:10 2001
From: mike at mikebell.org (mike@mikebell.org)
Date: Fri Jan  9 21:52:39 2004
Subject: [mod_python] <Location> vs <Directory> ?
In-Reply-To: <20011202090822.A1135@redivi.com>
References: <20011202090822.A1135@redivi.com>
Message-ID: <20011202113009.A7474@mikebell.org>

On Sun, Dec 02, 2001 at 09:08:22AM -0500, Bob Ippolito wrote:
> It seems to be possible to use <Location /some/url> instead of <Directory
> /some/path> with mod_python.
> 
> It can be desirable at times to be able to use a PythonHandler at any
> arbitrary URL, not just directories or files with the .py extension.  I
> didn't see this documented anywhere, or talked about on the list (at a
> glance of subjects for the past couple months).  This way you can make a
> python script look like a single file.. i.e.
> 
> <Location /some/url/somefile.html>
>   SetHandler python-program
>   PythonHandler myHandler
> </Location>
> 
> this won't affect other .html files at /some/url.

Yes, I've been doing this since I first started using mod_python for things
like <Location /camera>. If you find some neat trick like that which you
think others might be interested in, why not make it a new entry in the FAQ?
Then it'll be there for people in the future without them having to read
through the mailing list archives.

From noamhooper at hotmail.com  Tue Dec  4 20:03:04 2001
From: noamhooper at hotmail.com (Noam Hoffer)
Date: Fri Jan  9 21:52:39 2004
Subject: [mod_python] MySQL problem on win32
Message-ID: <OE65Vuelu79YzvxsVeg00012711@hotmail.com>

Hello,
I didn't succed in using MySQLdb module from mod_python. I get the following error:
Mod_python error: "PythonHandler mptest"

Traceback (most recent call last):

  File "C:\Python21\Lib\mod_python\apache.py", line 181, in Dispatch
    module = import_module(module_name, _req)

  File "C:\Python21\Lib\mod_python\apache.py", line 338, in import_module
    module = imp.load_module(mname, f, p, d)

  File "C:\Program Files\Apache Group\Apache\htdocs\python\test\mptest.py", line 2, in ?
    import MySQLdb

  File "C:\Python21\MySQLdb\__init__.py", line 27, in ?
    import _mysql

ImportError: _mysql: init failed

when using it from the interpreter it works file.
here is my script:
from mod_python import apacheimport MySQLdb
def _db_login(relogin = 0):    """Login to the database    """
    global DB_CONN
    if relogin:        DB_CONN = MySQLdb.connect(db="test")        return DB_CONN    else:        try:            d = DB_CONN            return d
        except NameError:     DB_CONN = MySQLdb.connect(db="test")            return DB_CONN
def handler(req):    req.content_type = "text/plain"    req.send_http_header()    req.write("Hello World!")    conn = _db_login()    cur = conn.cursor()    cur.execute("select * from stam")    req.write(cur.fetchall())
    return apache.OK


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20011204/8221f032/attachment-0001.htm
From PhoenixWR at hotmail.com  Sat Dec  8 04:50:24 2001
From: PhoenixWR at hotmail.com (WRFan)
Date: Fri Jan  9 21:52:39 2004
Subject: [mod_python] mod_python publisher module doesn't work (404 error); AttributeError: module ...contains no handler
Message-ID: <OE20oiMyr5NJvKk69Z000014e0e@hotmail.com>

Hi,

I installed mod_python 2.7.4 (Python 2.1.1) on my Apache server 1.3.20 and windows 98. However, I can't use the mod_python publisher module 
( PythonHandler mod_python.publisher ). 
If I insert this into a htaccess file or into the Apache config file and execute the usual "Hello world" testing script, I get a 404 error (page not found). I opened the publisher.py file and it seems that if there is a problem, this module makes Apache display an error page. I just don't understand what the problem is. When I use the name of the file as the handler, e.g. for a file test.py:

PythonHandler test

the script is executed all right, I see the "Hello World message". Do you know what the problem might be with PythonHandler mod_python.publisher ?

I added this to my httpd.conf file:

AddHandler python-program .py 

and this I put into a htaccess file:

AddHandler python-program .py 

AddHandler python-program .pyc

AddHandler python-program .python

SetHandler python-program 

PythonHandler test

#PythonHandler mod_python.publisher 

PythonDebug on 

Also if I try to use some python scripts downloaded from the net through Apache, I get this error:

Mod_python error: "PythonHandler Index"

Traceback (most recent call last):

  File "C:\Programme\Server\Python\Lib\mod_python\apache.py", line 185, in Dispatch
    object = resolve_object(req, module, object_str, silent)

  File "C:\Programme\Server\Python\Lib\mod_python\apache.py", line 395, in resolve_object
    raise AttributeError, s

AttributeError: module 'c:/programme/server/apache/public/python/ransacker/\Index.pyc' contains no 'handler'


It's always this error. Does that mean that python scripts can't be executed through mod_python, but have to be re-written for the Apache module?
Please email me at PhoenixWR@hotmail.com.
Thank you,
Regards,
Gerhart.  

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20011208/21941b76/attachment-0001.htm
From seant at webreply.com  Tue Dec 11 12:15:32 2001
From: seant at webreply.com (Sean True)
Date: Fri Jan  9 21:52:39 2004
Subject: [mod_python] Marrying BaseHTTPServer to modpython?
Message-ID: <MJEHLHJKGINLONDMMKNEAEIEECAA.seant@webreply.com>

Before diving in myself, I thought I would ask if anyone has made a handler
that will support software
which expect to subclass the BaseHTTPServer class? I've found some useful
DAV software (file system transport
over HTTP) which works as a complicated subclass of BaseHTTPServer.

-- Sean
-------
Sean True
WebReply.Com, Inc.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Sean True.vcf
Type: text/x-vcard
Size: 309 bytes
Desc: not available
Url : http://mailman.modpython.org/pipermail/mod_python/attachments/20011211/5e77a1c4/SeanTrue-0001.vcf
From ray_drew at yahoo.co.uk  Mon Dec 17 10:11:09 2001
From: ray_drew at yahoo.co.uk (Ray Drew)
Date: Fri Jan  9 21:52:39 2004
Subject: [mod_python] Python 2.2
Message-ID: <004701c186e3$269bafc0$df13000a@RDREWXP>

Is mod_python avalable for Python 2.2 yet? Python 2.2 final is scheduled for
release later this week.

regards,

Ray Drew


_________________________________________________________
Do You Yahoo!?
Get your free @yahoo.com address at http://mail.yahoo.com


From grisha at modpython.org  Mon Dec 17 10:34:19 2001
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:52:39 2004
Subject: [mod_python] Python 2.2
In-Reply-To: <004701c186e3$269bafc0$df13000a@RDREWXP>
Message-ID: <Pine.BSF.4.32.0112171033370.20970-100000@localhost>

I haven't tried compiling it with 2.2 yet, but chances are it will work
without any modifications... I guess we'll see when it comes out. :)

On Mon, 17 Dec 2001, Ray Drew wrote:

> Is mod_python avalable for Python 2.2 yet? Python 2.2 final is scheduled for
> release later this week.
>
> regards,
>
> Ray Drew
>
>
> _________________________________________________________
> Do You Yahoo!?
> Get your free @yahoo.com address at http://mail.yahoo.com
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From sobral at sj.univali.br  Mon Dec 17 13:11:46 2001
From: sobral at sj.univali.br (MARCELO MAIA SOBRAL)
Date: Fri Jan  9 21:52:39 2004
Subject: [mod_python] Python 2.2
In-Reply-To: <Pine.BSF.4.32.0112171033370.20970-100000@localhost>
Message-ID: <Pine.LNX.4.30.0112171310370.32268-100000@so.sj.univali.br>

   I have compiled mod_python 2.7.6 with python 2.2, and it has been
working fine.

On Mon, 17 Dec 2001, Gregory (Grisha) Trubetskoy wrote:

> I haven't tried compiling it with 2.2 yet, but chances are it will work
> without any modifications... I guess we'll see when it comes out. :)
>
> On Mon, 17 Dec 2001, Ray Drew wrote:
>
> > Is mod_python avalable for Python 2.2 yet? Python 2.2 final is scheduled for
> > release later this week.

  -----------------------------
  Prof. Marcelo Maia Sobral
  Administrador de Redes
  Nucleo de Informatica
  Univali - Campus S?o Jos?
  Fone: (0xx48) 281-1558
  -----------------------------


From guido at python.org  Mon Dec 17 10:59:39 2001
From: guido at python.org (Guido van Rossum)
Date: Fri Jan  9 21:52:39 2004
Subject: [mod_python] Python 2.2
In-Reply-To: Your message of "Mon, 17 Dec 2001 10:34:19 EST."
             <Pine.BSF.4.32.0112171033370.20970-100000@localhost> 
References: <Pine.BSF.4.32.0112171033370.20970-100000@localhost> 
Message-ID: <200112171559.KAA21926@cj20424-a.reston1.va.home.com>

> I haven't tried compiling it with 2.2 yet, but chances are it will work
> without any modifications... I guess we'll see when it comes out. :)

Why don't you try it with the release candidate, 2.2c1?  We can use
all the testing we can get! :-)

--Guido van Rossum (home page: http://www.python.org/~guido/)


From mailer at mailer.ru  Mon Dec 17 18:39:21 2001
From: mailer at mailer.ru (mailer)
Date: Fri Jan  9 21:52:39 2004
Subject: [mod_python] =?windows-1251?B?zvIg5O7x8u7p7e7pIP3q7u3u7OjoIC0g6iDk7vHy8+/t7ukg8O7x6g==?=
 =?windows-1251?B?7vjoIS4u?=
Message-ID: <000901c186f7$da1a8620$32c8a8c0@webmaster>


    ???????? ?????? ????????? ????????? ?????????, ?????????? ?? ??????? ?? ?????? ?????? ????? ?? ???? ??? ?????? ?? ?????? ? ????????: 

 - ??? ???, ????? ?????, ??????, ?????? ? ????????.

 - ????????? ????? ?????? ?? ??????. 


--------------------------------------------------------------------------------

???? ??? ?? ?????????????? ???? ??????????? ? ?? ?????? ?? ?????? ???????? ??? ???????? - ???????? ???? ???????? ?????????. ?????? ??????? ?????? ?????? ? ????? E-Mail ?? ????? major-pain@yandex.ru ? ?? ?????? ????????? ?? ??????? ??????????????? ??????? ??????????.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20011217/6b7421f2/attachment-0001.htm
From cva_ at yahoo.com  Mon Dec 17 12:42:31 2001
From: cva_ at yahoo.com (Chris Anderson)
Date: Fri Jan  9 21:52:39 2004
Subject: [mod_python] sporadic import errors...
Message-ID: <20011217204231.37269.qmail@web11604.mail.yahoo.com>

okay, i'm running Python 2.1.1, mod_python 2.7.6, and apache 1.3.19
under Linux 2.2.14. the mod_python module is build statically.

after hitting our app a couple of times, i sporadically receive the
following error:

'import site' failed; traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python2.1/site.py", line 60, in ?
    import sys, os
  File "/usr/local/lib/python2.1/os.py", line 54, in ?
    __all__.extend(_get_exports_list(posix))
  File "/usr/local/lib/python2.1/os.py", line 35, in _get_exports_list
    return list(module.__all__)
AttributeError: 'posix' module has no attribute '__all__'
make_obcallback(): could not import mod_python.apache.
make_obcallback(): could not call init.

and i'm having a terrible time isolating what could be causing this to
occur.

interesting things which could be related:

o multiple instances of the app are running under the same apache with
different <Directory> tags handling the different apache/mod_python
settings

o i have PythonInterpPerDir turned on

o the problem seems most easily exaccerbated by running multiple
scripts simultaneously

the biggest problem i'm having (besides the error itself) is that i
can't figure out any way to tell which subinterpreter i am in when
these errors happen. i've poked through the documentation and
pythonrun.c to no avail.

any tips would be most helpful.

cva

__________________________________________________
Do You Yahoo!?
Check out Yahoo! Shopping and Yahoo! Auctions for all of
your unique holiday gifts! Buy at http://shopping.yahoo.com
or bid at http://auctions.yahoo.com

From guido at python.org  Mon Dec 17 16:01:35 2001
From: guido at python.org (Guido van Rossum)
Date: Fri Jan  9 21:52:39 2004
Subject: [mod_python] sporadic import errors...
In-Reply-To: Your message of "Mon, 17 Dec 2001 12:42:31 PST."
             <20011217204231.37269.qmail@web11604.mail.yahoo.com> 
References: <20011217204231.37269.qmail@web11604.mail.yahoo.com> 
Message-ID: <200112172101.QAA18776@cj20424-a.reston1.va.home.com>

> okay, i'm running Python 2.1.1, mod_python 2.7.6, and apache 1.3.19
> under Linux 2.2.14. the mod_python module is build statically.
> 
> after hitting our app a couple of times, i sporadically receive the
> following error:
> 
> 'import site' failed; traceback:
> Traceback (most recent call last):
>   File "/usr/local/lib/python2.1/site.py", line 60, in ?
>     import sys, os
>   File "/usr/local/lib/python2.1/os.py", line 54, in ?
>     __all__.extend(_get_exports_list(posix))
>   File "/usr/local/lib/python2.1/os.py", line 35, in _get_exports_list
>     return list(module.__all__)
> AttributeError: 'posix' module has no attribute '__all__'
> make_obcallback(): could not import mod_python.apache.
> make_obcallback(): could not call init.
> 
> and i'm having a terrible time isolating what could be causing this to
> occur.
> 
> interesting things which could be related:
> 
> o multiple instances of the app are running under the same apache with
> different <Directory> tags handling the different apache/mod_python
> settings
> 
> o i have PythonInterpPerDir turned on
> 
> o the problem seems most easily exaccerbated by running multiple
> scripts simultaneously

Here's my analysis of the case.  Looking at the source code of os.py:

def _get_exports_list(module):
    try:
        return list(module.__all__)
    except AttributeError:
        return [n for n in dir(module) if n[0] != '_']

the AttributeError should be caught -- but it isn't!  I think this is
because each Python interpreter instance initializes its own copy of
the exceptions -- but store them in a global shared by all instances
running in the same process!

> the biggest problem i'm having (besides the error itself) is that i
> can't figure out any way to tell which subinterpreter i am in when
> these errors happen. i've poked through the documentation and
> pythonrun.c to no avail.

Can you try this with Python 2.2c1?  I think we've fixed it there.  If
you can't try 2.2c1, try the patch to pythonrun.c from rev 2.143 to
2.144:
http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/python/python/dist/src/Python/pythonrun.c.diff?r1=2.143&r2=2.144.

--Guido van Rossum (home page: http://www.python.org/~guido/)

From cva_ at yahoo.com  Mon Dec 17 13:49:47 2001
From: cva_ at yahoo.com (Chris Anderson)
Date: Fri Jan  9 21:52:39 2004
Subject: [mod_python] sporadic import errors...
In-Reply-To: <200112172101.QAA18776@cj20424-a.reston1.va.home.com>
Message-ID: <20011217214947.86064.qmail@web11606.mail.yahoo.com>



--- Guido van Rossum <guido@python.org> wrote:
> 
> Here's my analysis of the case.  Looking at the source code of os.py:
> 
> def _get_exports_list(module):
>     try:
>         return list(module.__all__)
>     except AttributeError:
>         return [n for n in dir(module) if n[0] != '_']
> 
> the AttributeError should be caught -- but it isn't!  I think this is
> because each Python interpreter instance initializes its own copy of
> the exceptions -- but store them in a global shared by all instances
> running in the same process!
> 
> > the biggest problem i'm having (besides the error itself) is that i
> > can't figure out any way to tell which subinterpreter i am in when
> > these errors happen. i've poked through the documentation and
> > pythonrun.c to no avail.
> 
> Can you try this with Python 2.2c1?  I think we've fixed it there. 
> If
> you can't try 2.2c1, try the patch to pythonrun.c from rev 2.143 to
> 2.144:
>
http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/python/python/dist/src/Python/pythonrun.c.diff?r1=2.143&r2=2.144.

i didn't have an opportunity to try with 2.2c1, but the patch against
2.1.1 seems to have fixed the problem.

thanks much,

cva

__________________________________________________
Do You Yahoo!?
Check out Yahoo! Shopping and Yahoo! Auctions for all of
your unique holiday gifts! Buy at http://shopping.yahoo.com
or bid at http://auctions.yahoo.com

From harm at millionmonkeys.nl  Tue Dec 18 22:57:49 2001
From: harm at millionmonkeys.nl (harm)
Date: Fri Jan  9 21:52:39 2004
Subject: [mod_python] getvalue() in util.py
Message-ID: <20011218225749.E29846@godel>

Moi,

is there any reason there is no getvalue() in mod_python/util.py?
Could be as simple as this:

harm@turing:/tmp$ diff util.py.orig util.py
252a253,259
>     def getvalue(self, key, default=None):
>         """Dictionary style get() method, including 'value' lookup."""
>         if self.has_key(key):
>             return self[key]
>         else:
>             return default
> 

cgi.py has it as well, makes life easier if they one can use the same
funtions under mod_python and plain cgi...


Thanks,

Harmen


-- 
                               The Moon is Waxing Crescent (16% of Full)

From johnny at johnnysfunhouse.com  Tue Dec 18 21:21:37 2001
From: johnny at johnnysfunhouse.com (Refrigerator Johnny)
Date: Fri Jan  9 21:52:40 2004
Subject: [mod_python] apache [linux] config file.
Message-ID: <025501c18833$e392e890$6401a8c0@cj543266b>

I statically linked mod_python into apache on a linux 6.2 system.
I can see in my log file, that it is loaded.
I added the following to my apache.conf file:
<Directory /usr/local/apache/test>
   AddHandler python-program .py
   Pythonhandler mptest
  PythonDebug On
</Directory>

when I go to localhost/test/mptest.py,
I get a listing of the python file.
What else do I have to do?
Thanks for any insight into this problem!
-john
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20011218/64b4981c/attachment-0001.htm
From sep27 at cornell.edu  Wed Dec 19 00:58:46 2001
From: sep27 at cornell.edu (S.Plake)
Date: Fri Jan  9 21:52:40 2004
Subject: [mod_python] installation problem
Message-ID: <5.1.0.14.2.20011219005240.00adc7b8@postoffice.mail.cornell.edu>

I am currently dual booting win2k pro and RH 7.2, I have apache on both 
sides and python 2.1 on both. I am currently trying to get the python_mod 
into apache on win2k side but have run into a problem. I get an error when 
I restart Apache that says:

"Invalid Command 'PythonHandler' perhaps mis-spelled or defined by a module 
not included in the server configuration"

I followed word for word the instructions on installation on the modpython 
website. I am hoping someone on this list will be able to help me figure 
this out.

Thank you,

steve










From gege at mail.china.com  Thu Dec 20 10:42:41 2001
From: gege at mail.china.com (ОДБъ)
Date: Fri Jan  9 21:52:40 2004
Subject: [mod_python] Dose Anyone can give me a new version mod_python DLL ?
Message-ID: <Of988779895758.23369@webmail4>

I want a mod_python 2.7.6 DLL with Apache 1.3.22,which can run under Windows XP. If you have, email me please. Thank you very much.

Regards

Wenlong Liu



From alc20020 at mailcity.com  Sat Dec 22 08:09:56 2001
From: alc20020 at mailcity.com (ALC)
Date: Fri Jan  9 21:52:40 2004
Subject: [mod_python] American Language Center- 156-0000 Merry Christmas!
Message-ID: <22120100003$999219783670864$1516794660$0@exploder3.em5000.net>



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20011222/7397f8d8/attachment-0001.htm
From dds at aport.ru  Wed Dec 26 18:37:06 2001
From: dds at aport.ru (Dmitri D. Sayakin)
Date: Fri Jan  9 21:52:40 2004
Subject: [mod_python] mod_python bug?
Message-ID: <200112261537.SAA04082@www.megapage.ru>

Trying to work with encoding="koi8-r" (and "cp1251","iso-8859-5") in site.py,
can't start mod_python-2.7.6 with apache/1.3.22 rus/PL30.9. After changing
back to "ascii", mod_python started and works. Is this normal behavior?

From rodrigo at dgf.uchile.cl  Thu Dec 27 19:14:47 2001
From: rodrigo at dgf.uchile.cl (rodrigo)
Date: Fri Jan  9 21:52:40 2004
Subject: [mod_python] Python 2.1.1 and apache 1.3.22
Message-ID: <3C2B9D57.9B1BFAE0@dgf.uchile.cl>

Dear experts
  I have compiled  Python-2.1.1 with  "--without-threads" option....
  (then make and make install)

 I have compiled  mod_python_2.7.6 with options :
 --with-apache=../apache_1.3.22  --with-python
 (then make and make install)

I have compiled  apache_1.3.22 with the following options:
  ./configure   --activate-module=src/modules/python/libpython.a
and then, when I do "make" ... I get the following compiling errors:
---------------------------------------------------------------------
gcc  -DSOLARIS2=270 -DUSE_EXPAT -I./lib/expat-lite -DNO_DL_NEEDED
`./apaci`  \
    -o httpd buildmark.o modules.o modules/python/libpython.a
modules/standard/libstandard.a   \
      main/libmain.a  ./os/unix/libos.a  ap/libap.a
lib/expat-lite/libexpat.a  -lsocket -lns

modules/python/libpython.a(mod_python.o): In function
`make_interpreter':
mod_python.o(.text+0xc): undefined reference to `Py_NewInterpreter'
mod_python.o(.text+0x6c): undefined reference to `PyThreadState_Swap'
modules/python/libpython.a(mod_python.o): In function
`get_interpreter_data':
mod_python.o(.text+0xc4): undefined reference to `PyDict_GetItemString'
mod_python.o(.text+0x130): undefined reference to
`PyCObject_FromVoidPtr'
mod_python.o(.text+0x150): undefined reference to `PyDict_SetItemString'

.....
modules/python/libpython.a(mod_python.o): In function `python_cleanup':
mod_python.o(.text+0x338): undefined reference to `PyThreadState_New'
mod_python.o(.text+0x348): undefined reference to `PyThreadState_Swap'
mod_python.o(.text+0x368): undefined reference to
`PyObject_CallFunction'
.....
and so ...
----------------------------------------------------------------------
when I add  "--with-apxs" option in mod_python_2.7.6, and compile apache
adding
"--enable-module=rewrite --enable-shared=rewrite" options...  apache
failed
to start, in the lines:
LoadModule rewrite_module     libexec/mod_rewrite.so
LoadModule python_module      libexec/mod_python.so
...

I'm really confused ...
Any idea ?


Rodrigo Sanchez Olavarria
DGF. U. de Chile



From bakey at traq.com  Thu Dec 27 13:58:18 2001
From: bakey at traq.com (Brian Akey)
Date: Fri Jan  9 21:52:40 2004
Subject: [mod_python] Python 2.1.1 and apache 1.3.22
Message-ID: <780A5D64B1CC9544AB7B702F39219C1E5F38@traqexch.traq.com>

I have found that mod_python compiles better if you
do ./configure --with-apache=../apache
--with-apxs=/usr/local/apache/bin/apxs
make static
make install_static
cd apache
./configure   --activate-module=src/modules/python/libpython.a
make
make install

I don't use the --with-python
I make sure the python without-threads is in the path (/usr/bin/python)
I have not had good luck with the --with-python
Also if you want to use python with threads just mv your old python and use
ln -s to the one that mod_python needs. After you compile apache mv or ln -s
the old python back.


-----Original Message-----
From: rodrigo [mailto:rodrigo@dgf.uchile.cl]
Sent: Thursday, December 27, 2001 4:15 PM
To: mod_python@modpython.org; rodrigo@dgf.uchile.cl
Subject: [mod_python] Python 2.1.1 and apache 1.3.22


Dear experts
  I have compiled  Python-2.1.1 with  "--without-threads" option....
  (then make and make install)

 I have compiled  mod_python_2.7.6 with options :
 --with-apache=../apache_1.3.22  --with-python
 (then make and make install)

I have compiled  apache_1.3.22 with the following options:
  ./configure   --activate-module=src/modules/python/libpython.a
and then, when I do "make" ... I get the following compiling errors:

From e_v_s1234 at email.ru  Sat Dec 29 16:35:25 2001
From: e_v_s1234 at email.ru (VISA SUPPORT)
Date: Fri Jan  9 21:52:40 2004
Subject: [mod_python] ПАСПОРТНО-ВИЗОВЫЕ УСЛУГИ / VISA SUPPORT
Message-ID: <200112291443.fBTEhhi19579@card.co.ru>

ОФОРМЛЕНИЕ ЗАГРАНПАСПОРТОВ

(Цены указаны для жителей Москвы и Моск. области)

35 раб.дней - $70
21-23 раб.дней - $140
15-17 раб.дней - $180
10-12 раб.дней - $260
8-9 раб. дней - $330
6-7 раб. дней - $390

По Вашему запросу вышлем комплект необходимых
документов для оформления загранпаспорта.

В И З О В Ы Е    У С Л У Г И

Оформление приглашений для ИНОСТРАНЦЕВ в Россию.
Однократное на 1 месяц - $ 25
Многократное на 1 год- $ 150

*Правовые вопросы относительно пребывания иностранных граждан на территории РФ,
 проблемные случаи.
*Вопросы выезда РОССИЯН за рубеж, оформление надлежащих документов
 (ВИЗЫ).

БЕСПЛАТНЫЙ ВЫЕЗД КУРЬЕРА К ВАМ В ОФИС В ПРЕДЕЛАХ г. МОСКВЫ

ТЕЛ./ФАКС: (095) 797-04-82,  797-04-08,  107-78-58


V I S A   S E R V I C E S

L e g a l i z a t i o n   o f   t h e   R u s s i a n   v i s a - i n v i t a t i o n s
f o r   f o r e i g n c i t i z e n s.

Single for 1 month-only $25
Multiple for 1 year-only $150

*S o l u t i o n   o f   l e g a l   m a t t e r s   c o n c e r n i n g   f o r e i g n   c i t i z e n s   s t a y
o n   t h e   t e r r i t o r y   o f   R u s s i a n   F e d e r a t i o n,   q u e s t i o n a b l e   i s s u e s.

*A s s i s t a n c e   i n   v i s a s   r e g i s t r a t i o n   f o r   t h e
f o r e i g n   c i t i z e n s   i n   R u s s i a.

*S o l u t i o n   o f   t h e   p r o b l e m s   c o n c e r n i n g   R U S S I A N
c i t i z e n s   d e p a r t u r e   a b r o a d,   r e g i s t r a t i o n
o f   t h e   p r o p e r   d o c u m e n t s:   f o r e i g n   p a s s p o r t s   a n d   v i s a s.

TEL./FAX: +7(095) 797-04-82,  797-04-08,  107-78-58

From clarence at netlojix.com  Mon Dec 31 13:51:38 2001
From: clarence at netlojix.com (Clarence Gardner)
Date: Fri Jan  9 21:52:40 2004
Subject: [mod_python] HTTP response codes
Message-ID: <20011231135138.D3328@liberty.sba2.netlojix.net>

I'm not seeing a way to do much with the response code. In particular,
I want to do a redirection, which requires a 3xx response and a Location
header.

If I just return HTTP_MOVED_PERMANENTLY, the server sends an HTML
document containing an empty link, with a status of 301. If I set
the header, call send_http_header, and then return that status, I
get the same HTML, but with a 200 status (and my Location header
isn't included anyway).

Have I missed something?
Thanks.

-- 
Clarence Gardner
Software Engineer
NetLojix Communications
clarence@netlojix.com

From clarence at netlojix.com  Mon Dec 31 14:24:17 2001
From: clarence at netlojix.com (Clarence Gardner)
Date: Fri Jan  9 21:52:40 2004
Subject: [mod_python] Mea culpa
Message-ID: <20011231142417.F3328@liberty.sba2.netlojix.net>

I see that this is addressed in the FAQ that I was pointed
to. [but I *did* RTFM :)]

Sorry.

I also see that the FAQ mentions req.status which is not mentioned in
the manual.

-- 
Clarence Gardner
Software Engineer
NetLojix Communications
clarence@netlojix.com

From grisha at modpython.org  Mon Dec 31 17:37:01 2001
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:52:40 2004
Subject: [mod_python] HTTP response codes
In-Reply-To: <20011231135138.D3328@liberty.sba2.netlojix.net>
Message-ID: <Pine.BSF.4.32.0112311731590.43002-100000@localhost>

By returning an error code, you're asking Apache to deal with your error.
Apache will then display a stock error page, and will send error headers
(req.err_headers_out instead of req.headers_out), which is why you didn't
see your header amongst them.

What you want to do instead is handle everything yourself, and then let
Apache know it's done by returning apache.OK.

Something like this should work (this is from the FAQ, btw):

 def handler(req):
     req.headers_out['location'] = 'http://www.modpython.org/'
     req.status = apache.HTTP_MOVED_TEMPORARILY
     req.send_http_header()
     return apache.OK

Grisha


On Mon, 31 Dec 2001, Clarence Gardner wrote:

>
> I'm not seeing a way to do much with the response code. In particular,
> I want to do a redirection, which requires a 3xx response and a Location
> header.
>
> If I just return HTTP_MOVED_PERMANENTLY, the server sends an HTML
> document containing an empty link, with a status of 301. If I set
> the header, call send_http_header, and then return that status, I
> get the same HTML, but with a 200 status (and my Location header
> isn't included anyway).
>
> Have I missed something?
> Thanks.
>
> --
> Clarence Gardner
> Software Engineer
> NetLojix Communications
> clarence@netlojix.com
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From bob at redivi.com  Sun Dec  2 09:08:22 2001
From: bob at redivi.com (Bob Ippolito)
Date: Fri Jan  9 21:59:10 2004
Subject: [mod_python] <Location> vs <Directory> ?
Message-ID: <20011202090822.A1135@redivi.com>

It seems to be possible to use <Location /some/url> instead of <Directory /some/path> with mod_python.

It can be desirable at times to be able to use a PythonHandler at any arbitrary URL, not just directories or files with the .py extension.  I didn't see this documented anywhere, or talked about on the list (at a glance of subjects for the past couple months).  This way you can make a python script look like a single file.. i.e.

<Location /some/url/somefile.html>
  SetHandler python-program
  PythonHandler myHandler
</Location>

this won't affect other .html files at /some/url.

-bob

From mike at mikebell.org  Sun Dec  2 11:30:10 2001
From: mike at mikebell.org (mike@mikebell.org)
Date: Fri Jan  9 21:59:10 2004
Subject: [mod_python] <Location> vs <Directory> ?
In-Reply-To: <20011202090822.A1135@redivi.com>
References: <20011202090822.A1135@redivi.com>
Message-ID: <20011202113009.A7474@mikebell.org>

On Sun, Dec 02, 2001 at 09:08:22AM -0500, Bob Ippolito wrote:
> It seems to be possible to use <Location /some/url> instead of <Directory
> /some/path> with mod_python.
> 
> It can be desirable at times to be able to use a PythonHandler at any
> arbitrary URL, not just directories or files with the .py extension.  I
> didn't see this documented anywhere, or talked about on the list (at a
> glance of subjects for the past couple months).  This way you can make a
> python script look like a single file.. i.e.
> 
> <Location /some/url/somefile.html>
>   SetHandler python-program
>   PythonHandler myHandler
> </Location>
> 
> this won't affect other .html files at /some/url.

Yes, I've been doing this since I first started using mod_python for things
like <Location /camera>. If you find some neat trick like that which you
think others might be interested in, why not make it a new entry in the FAQ?
Then it'll be there for people in the future without them having to read
through the mailing list archives.

From noamhooper at hotmail.com  Tue Dec  4 20:03:04 2001
From: noamhooper at hotmail.com (Noam Hoffer)
Date: Fri Jan  9 21:59:10 2004
Subject: [mod_python] MySQL problem on win32
Message-ID: <OE65Vuelu79YzvxsVeg00012711@hotmail.com>

Hello,
I didn't succed in using MySQLdb module from mod_python. I get the following error:
Mod_python error: "PythonHandler mptest"

Traceback (most recent call last):

  File "C:\Python21\Lib\mod_python\apache.py", line 181, in Dispatch
    module = import_module(module_name, _req)

  File "C:\Python21\Lib\mod_python\apache.py", line 338, in import_module
    module = imp.load_module(mname, f, p, d)

  File "C:\Program Files\Apache Group\Apache\htdocs\python\test\mptest.py", line 2, in ?
    import MySQLdb

  File "C:\Python21\MySQLdb\__init__.py", line 27, in ?
    import _mysql

ImportError: _mysql: init failed

when using it from the interpreter it works file.
here is my script:
from mod_python import apacheimport MySQLdb
def _db_login(relogin = 0):    """Login to the database    """
    global DB_CONN
    if relogin:        DB_CONN = MySQLdb.connect(db="test")        return DB_CONN    else:        try:            d = DB_CONN            return d
        except NameError:     DB_CONN = MySQLdb.connect(db="test")            return DB_CONN
def handler(req):    req.content_type = "text/plain"    req.send_http_header()    req.write("Hello World!")    conn = _db_login()    cur = conn.cursor()    cur.execute("select * from stam")    req.write(cur.fetchall())
    return apache.OK


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20011204/8221f032/attachment-0002.htm
From PhoenixWR at hotmail.com  Sat Dec  8 04:50:24 2001
From: PhoenixWR at hotmail.com (WRFan)
Date: Fri Jan  9 21:59:10 2004
Subject: [mod_python] mod_python publisher module doesn't work (404 error); AttributeError: module ...contains no handler
Message-ID: <OE20oiMyr5NJvKk69Z000014e0e@hotmail.com>

Hi,

I installed mod_python 2.7.4 (Python 2.1.1) on my Apache server 1.3.20 and windows 98. However, I can't use the mod_python publisher module 
( PythonHandler mod_python.publisher ). 
If I insert this into a htaccess file or into the Apache config file and execute the usual "Hello world" testing script, I get a 404 error (page not found). I opened the publisher.py file and it seems that if there is a problem, this module makes Apache display an error page. I just don't understand what the problem is. When I use the name of the file as the handler, e.g. for a file test.py:

PythonHandler test

the script is executed all right, I see the "Hello World message". Do you know what the problem might be with PythonHandler mod_python.publisher ?

I added this to my httpd.conf file:

AddHandler python-program .py 

and this I put into a htaccess file:

AddHandler python-program .py 

AddHandler python-program .pyc

AddHandler python-program .python

SetHandler python-program 

PythonHandler test

#PythonHandler mod_python.publisher 

PythonDebug on 

Also if I try to use some python scripts downloaded from the net through Apache, I get this error:

Mod_python error: "PythonHandler Index"

Traceback (most recent call last):

  File "C:\Programme\Server\Python\Lib\mod_python\apache.py", line 185, in Dispatch
    object = resolve_object(req, module, object_str, silent)

  File "C:\Programme\Server\Python\Lib\mod_python\apache.py", line 395, in resolve_object
    raise AttributeError, s

AttributeError: module 'c:/programme/server/apache/public/python/ransacker/\Index.pyc' contains no 'handler'


It's always this error. Does that mean that python scripts can't be executed through mod_python, but have to be re-written for the Apache module?
Please email me at PhoenixWR@hotmail.com.
Thank you,
Regards,
Gerhart.  

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20011208/21941b76/attachment-0002.htm
From seant at webreply.com  Tue Dec 11 12:15:32 2001
From: seant at webreply.com (Sean True)
Date: Fri Jan  9 21:59:10 2004
Subject: [mod_python] Marrying BaseHTTPServer to modpython?
Message-ID: <MJEHLHJKGINLONDMMKNEAEIEECAA.seant@webreply.com>

Before diving in myself, I thought I would ask if anyone has made a handler
that will support software
which expect to subclass the BaseHTTPServer class? I've found some useful
DAV software (file system transport
over HTTP) which works as a complicated subclass of BaseHTTPServer.

-- Sean
-------
Sean True
WebReply.Com, Inc.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Sean True.vcf
Type: text/x-vcard
Size: 309 bytes
Desc: not available
Url : http://mailman.modpython.org/pipermail/mod_python/attachments/20011211/5e77a1c4/SeanTrue-0002.vcf
From ray_drew at yahoo.co.uk  Mon Dec 17 10:11:09 2001
From: ray_drew at yahoo.co.uk (Ray Drew)
Date: Fri Jan  9 21:59:10 2004
Subject: [mod_python] Python 2.2
Message-ID: <004701c186e3$269bafc0$df13000a@RDREWXP>

Is mod_python avalable for Python 2.2 yet? Python 2.2 final is scheduled for
release later this week.

regards,

Ray Drew


_________________________________________________________
Do You Yahoo!?
Get your free @yahoo.com address at http://mail.yahoo.com


From grisha at modpython.org  Mon Dec 17 10:34:19 2001
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:59:10 2004
Subject: [mod_python] Python 2.2
In-Reply-To: <004701c186e3$269bafc0$df13000a@RDREWXP>
Message-ID: <Pine.BSF.4.32.0112171033370.20970-100000@localhost>

I haven't tried compiling it with 2.2 yet, but chances are it will work
without any modifications... I guess we'll see when it comes out. :)

On Mon, 17 Dec 2001, Ray Drew wrote:

> Is mod_python avalable for Python 2.2 yet? Python 2.2 final is scheduled for
> release later this week.
>
> regards,
>
> Ray Drew
>
>
> _________________________________________________________
> Do You Yahoo!?
> Get your free @yahoo.com address at http://mail.yahoo.com
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From sobral at sj.univali.br  Mon Dec 17 13:11:46 2001
From: sobral at sj.univali.br (MARCELO MAIA SOBRAL)
Date: Fri Jan  9 21:59:11 2004
Subject: [mod_python] Python 2.2
In-Reply-To: <Pine.BSF.4.32.0112171033370.20970-100000@localhost>
Message-ID: <Pine.LNX.4.30.0112171310370.32268-100000@so.sj.univali.br>

   I have compiled mod_python 2.7.6 with python 2.2, and it has been
working fine.

On Mon, 17 Dec 2001, Gregory (Grisha) Trubetskoy wrote:

> I haven't tried compiling it with 2.2 yet, but chances are it will work
> without any modifications... I guess we'll see when it comes out. :)
>
> On Mon, 17 Dec 2001, Ray Drew wrote:
>
> > Is mod_python avalable for Python 2.2 yet? Python 2.2 final is scheduled for
> > release later this week.

  -----------------------------
  Prof. Marcelo Maia Sobral
  Administrador de Redes
  Nucleo de Informatica
  Univali - Campus S?o Jos?
  Fone: (0xx48) 281-1558
  -----------------------------


From guido at python.org  Mon Dec 17 10:59:39 2001
From: guido at python.org (Guido van Rossum)
Date: Fri Jan  9 21:59:11 2004
Subject: [mod_python] Python 2.2
In-Reply-To: Your message of "Mon, 17 Dec 2001 10:34:19 EST."
             <Pine.BSF.4.32.0112171033370.20970-100000@localhost> 
References: <Pine.BSF.4.32.0112171033370.20970-100000@localhost> 
Message-ID: <200112171559.KAA21926@cj20424-a.reston1.va.home.com>

> I haven't tried compiling it with 2.2 yet, but chances are it will work
> without any modifications... I guess we'll see when it comes out. :)

Why don't you try it with the release candidate, 2.2c1?  We can use
all the testing we can get! :-)

--Guido van Rossum (home page: http://www.python.org/~guido/)


From mailer at mailer.ru  Mon Dec 17 18:39:21 2001
From: mailer at mailer.ru (mailer)
Date: Fri Jan  9 21:59:11 2004
Subject: [mod_python] =?windows-1251?B?zvIg5O7x8u7p7e7pIP3q7u3u7OjoIC0g6iDk7vHy8+/t7ukg8O7x6g==?=
 =?windows-1251?B?7vjoIS4u?=
Message-ID: <000901c186f7$da1a8620$32c8a8c0@webmaster>


    ???????? ?????? ????????? ????????? ?????????, ?????????? ?? ??????? ?? ?????? ?????? ????? ?? ???? ??? ?????? ?? ?????? ? ????????: 

 - ??? ???, ????? ?????, ??????, ?????? ? ????????.

 - ????????? ????? ?????? ?? ??????. 


--------------------------------------------------------------------------------

???? ??? ?? ?????????????? ???? ??????????? ? ?? ?????? ?? ?????? ???????? ??? ???????? - ???????? ???? ???????? ?????????. ?????? ??????? ?????? ?????? ? ????? E-Mail ?? ????? major-pain@yandex.ru ? ?? ?????? ????????? ?? ??????? ??????????????? ??????? ??????????.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20011217/6b7421f2/attachment-0002.htm
From cva_ at yahoo.com  Mon Dec 17 12:42:31 2001
From: cva_ at yahoo.com (Chris Anderson)
Date: Fri Jan  9 21:59:11 2004
Subject: [mod_python] sporadic import errors...
Message-ID: <20011217204231.37269.qmail@web11604.mail.yahoo.com>

okay, i'm running Python 2.1.1, mod_python 2.7.6, and apache 1.3.19
under Linux 2.2.14. the mod_python module is build statically.

after hitting our app a couple of times, i sporadically receive the
following error:

'import site' failed; traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python2.1/site.py", line 60, in ?
    import sys, os
  File "/usr/local/lib/python2.1/os.py", line 54, in ?
    __all__.extend(_get_exports_list(posix))
  File "/usr/local/lib/python2.1/os.py", line 35, in _get_exports_list
    return list(module.__all__)
AttributeError: 'posix' module has no attribute '__all__'
make_obcallback(): could not import mod_python.apache.
make_obcallback(): could not call init.

and i'm having a terrible time isolating what could be causing this to
occur.

interesting things which could be related:

o multiple instances of the app are running under the same apache with
different <Directory> tags handling the different apache/mod_python
settings

o i have PythonInterpPerDir turned on

o the problem seems most easily exaccerbated by running multiple
scripts simultaneously

the biggest problem i'm having (besides the error itself) is that i
can't figure out any way to tell which subinterpreter i am in when
these errors happen. i've poked through the documentation and
pythonrun.c to no avail.

any tips would be most helpful.

cva

__________________________________________________
Do You Yahoo!?
Check out Yahoo! Shopping and Yahoo! Auctions for all of
your unique holiday gifts! Buy at http://shopping.yahoo.com
or bid at http://auctions.yahoo.com

From guido at python.org  Mon Dec 17 16:01:35 2001
From: guido at python.org (Guido van Rossum)
Date: Fri Jan  9 21:59:11 2004
Subject: [mod_python] sporadic import errors...
In-Reply-To: Your message of "Mon, 17 Dec 2001 12:42:31 PST."
             <20011217204231.37269.qmail@web11604.mail.yahoo.com> 
References: <20011217204231.37269.qmail@web11604.mail.yahoo.com> 
Message-ID: <200112172101.QAA18776@cj20424-a.reston1.va.home.com>

> okay, i'm running Python 2.1.1, mod_python 2.7.6, and apache 1.3.19
> under Linux 2.2.14. the mod_python module is build statically.
> 
> after hitting our app a couple of times, i sporadically receive the
> following error:
> 
> 'import site' failed; traceback:
> Traceback (most recent call last):
>   File "/usr/local/lib/python2.1/site.py", line 60, in ?
>     import sys, os
>   File "/usr/local/lib/python2.1/os.py", line 54, in ?
>     __all__.extend(_get_exports_list(posix))
>   File "/usr/local/lib/python2.1/os.py", line 35, in _get_exports_list
>     return list(module.__all__)
> AttributeError: 'posix' module has no attribute '__all__'
> make_obcallback(): could not import mod_python.apache.
> make_obcallback(): could not call init.
> 
> and i'm having a terrible time isolating what could be causing this to
> occur.
> 
> interesting things which could be related:
> 
> o multiple instances of the app are running under the same apache with
> different <Directory> tags handling the different apache/mod_python
> settings
> 
> o i have PythonInterpPerDir turned on
> 
> o the problem seems most easily exaccerbated by running multiple
> scripts simultaneously

Here's my analysis of the case.  Looking at the source code of os.py:

def _get_exports_list(module):
    try:
        return list(module.__all__)
    except AttributeError:
        return [n for n in dir(module) if n[0] != '_']

the AttributeError should be caught -- but it isn't!  I think this is
because each Python interpreter instance initializes its own copy of
the exceptions -- but store them in a global shared by all instances
running in the same process!

> the biggest problem i'm having (besides the error itself) is that i
> can't figure out any way to tell which subinterpreter i am in when
> these errors happen. i've poked through the documentation and
> pythonrun.c to no avail.

Can you try this with Python 2.2c1?  I think we've fixed it there.  If
you can't try 2.2c1, try the patch to pythonrun.c from rev 2.143 to
2.144:
http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/python/python/dist/src/Python/pythonrun.c.diff?r1=2.143&r2=2.144.

--Guido van Rossum (home page: http://www.python.org/~guido/)

From cva_ at yahoo.com  Mon Dec 17 13:49:47 2001
From: cva_ at yahoo.com (Chris Anderson)
Date: Fri Jan  9 21:59:11 2004
Subject: [mod_python] sporadic import errors...
In-Reply-To: <200112172101.QAA18776@cj20424-a.reston1.va.home.com>
Message-ID: <20011217214947.86064.qmail@web11606.mail.yahoo.com>



--- Guido van Rossum <guido@python.org> wrote:
> 
> Here's my analysis of the case.  Looking at the source code of os.py:
> 
> def _get_exports_list(module):
>     try:
>         return list(module.__all__)
>     except AttributeError:
>         return [n for n in dir(module) if n[0] != '_']
> 
> the AttributeError should be caught -- but it isn't!  I think this is
> because each Python interpreter instance initializes its own copy of
> the exceptions -- but store them in a global shared by all instances
> running in the same process!
> 
> > the biggest problem i'm having (besides the error itself) is that i
> > can't figure out any way to tell which subinterpreter i am in when
> > these errors happen. i've poked through the documentation and
> > pythonrun.c to no avail.
> 
> Can you try this with Python 2.2c1?  I think we've fixed it there. 
> If
> you can't try 2.2c1, try the patch to pythonrun.c from rev 2.143 to
> 2.144:
>
http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/python/python/dist/src/Python/pythonrun.c.diff?r1=2.143&r2=2.144.

i didn't have an opportunity to try with 2.2c1, but the patch against
2.1.1 seems to have fixed the problem.

thanks much,

cva

__________________________________________________
Do You Yahoo!?
Check out Yahoo! Shopping and Yahoo! Auctions for all of
your unique holiday gifts! Buy at http://shopping.yahoo.com
or bid at http://auctions.yahoo.com

From harm at millionmonkeys.nl  Tue Dec 18 22:57:49 2001
From: harm at millionmonkeys.nl (harm)
Date: Fri Jan  9 21:59:11 2004
Subject: [mod_python] getvalue() in util.py
Message-ID: <20011218225749.E29846@godel>

Moi,

is there any reason there is no getvalue() in mod_python/util.py?
Could be as simple as this:

harm@turing:/tmp$ diff util.py.orig util.py
252a253,259
>     def getvalue(self, key, default=None):
>         """Dictionary style get() method, including 'value' lookup."""
>         if self.has_key(key):
>             return self[key]
>         else:
>             return default
> 

cgi.py has it as well, makes life easier if they one can use the same
funtions under mod_python and plain cgi...


Thanks,

Harmen


-- 
                               The Moon is Waxing Crescent (16% of Full)

From johnny at johnnysfunhouse.com  Tue Dec 18 21:21:37 2001
From: johnny at johnnysfunhouse.com (Refrigerator Johnny)
Date: Fri Jan  9 21:59:11 2004
Subject: [mod_python] apache [linux] config file.
Message-ID: <025501c18833$e392e890$6401a8c0@cj543266b>

I statically linked mod_python into apache on a linux 6.2 system.
I can see in my log file, that it is loaded.
I added the following to my apache.conf file:
<Directory /usr/local/apache/test>
   AddHandler python-program .py
   Pythonhandler mptest
  PythonDebug On
</Directory>

when I go to localhost/test/mptest.py,
I get a listing of the python file.
What else do I have to do?
Thanks for any insight into this problem!
-john
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20011218/64b4981c/attachment-0002.htm
From sep27 at cornell.edu  Wed Dec 19 00:58:46 2001
From: sep27 at cornell.edu (S.Plake)
Date: Fri Jan  9 21:59:11 2004
Subject: [mod_python] installation problem
Message-ID: <5.1.0.14.2.20011219005240.00adc7b8@postoffice.mail.cornell.edu>

I am currently dual booting win2k pro and RH 7.2, I have apache on both 
sides and python 2.1 on both. I am currently trying to get the python_mod 
into apache on win2k side but have run into a problem. I get an error when 
I restart Apache that says:

"Invalid Command 'PythonHandler' perhaps mis-spelled or defined by a module 
not included in the server configuration"

I followed word for word the instructions on installation on the modpython 
website. I am hoping someone on this list will be able to help me figure 
this out.

Thank you,

steve










From gege at mail.china.com  Thu Dec 20 10:42:41 2001
From: gege at mail.china.com (ОДБъ)
Date: Fri Jan  9 21:59:11 2004
Subject: [mod_python] Dose Anyone can give me a new version mod_python DLL ?
Message-ID: <Of988779895758.23369@webmail4>

I want a mod_python 2.7.6 DLL with Apache 1.3.22,which can run under Windows XP. If you have, email me please. Thank you very much.

Regards

Wenlong Liu



From alc20020 at mailcity.com  Sat Dec 22 08:09:56 2001
From: alc20020 at mailcity.com (ALC)
Date: Fri Jan  9 21:59:11 2004
Subject: [mod_python] American Language Center- 156-0000 Merry Christmas!
Message-ID: <22120100003$999219783670864$1516794660$0@exploder3.em5000.net>



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20011222/7397f8d8/attachment-0002.htm
From dds at aport.ru  Wed Dec 26 18:37:06 2001
From: dds at aport.ru (Dmitri D. Sayakin)
Date: Fri Jan  9 21:59:11 2004
Subject: [mod_python] mod_python bug?
Message-ID: <200112261537.SAA04082@www.megapage.ru>

Trying to work with encoding="koi8-r" (and "cp1251","iso-8859-5") in site.py,
can't start mod_python-2.7.6 with apache/1.3.22 rus/PL30.9. After changing
back to "ascii", mod_python started and works. Is this normal behavior?

From rodrigo at dgf.uchile.cl  Thu Dec 27 19:14:47 2001
From: rodrigo at dgf.uchile.cl (rodrigo)
Date: Fri Jan  9 21:59:11 2004
Subject: [mod_python] Python 2.1.1 and apache 1.3.22
Message-ID: <3C2B9D57.9B1BFAE0@dgf.uchile.cl>

Dear experts
  I have compiled  Python-2.1.1 with  "--without-threads" option....
  (then make and make install)

 I have compiled  mod_python_2.7.6 with options :
 --with-apache=../apache_1.3.22  --with-python
 (then make and make install)

I have compiled  apache_1.3.22 with the following options:
  ./configure   --activate-module=src/modules/python/libpython.a
and then, when I do "make" ... I get the following compiling errors:
---------------------------------------------------------------------
gcc  -DSOLARIS2=270 -DUSE_EXPAT -I./lib/expat-lite -DNO_DL_NEEDED
`./apaci`  \
    -o httpd buildmark.o modules.o modules/python/libpython.a
modules/standard/libstandard.a   \
      main/libmain.a  ./os/unix/libos.a  ap/libap.a
lib/expat-lite/libexpat.a  -lsocket -lns

modules/python/libpython.a(mod_python.o): In function
`make_interpreter':
mod_python.o(.text+0xc): undefined reference to `Py_NewInterpreter'
mod_python.o(.text+0x6c): undefined reference to `PyThreadState_Swap'
modules/python/libpython.a(mod_python.o): In function
`get_interpreter_data':
mod_python.o(.text+0xc4): undefined reference to `PyDict_GetItemString'
mod_python.o(.text+0x130): undefined reference to
`PyCObject_FromVoidPtr'
mod_python.o(.text+0x150): undefined reference to `PyDict_SetItemString'

.....
modules/python/libpython.a(mod_python.o): In function `python_cleanup':
mod_python.o(.text+0x338): undefined reference to `PyThreadState_New'
mod_python.o(.text+0x348): undefined reference to `PyThreadState_Swap'
mod_python.o(.text+0x368): undefined reference to
`PyObject_CallFunction'
.....
and so ...
----------------------------------------------------------------------
when I add  "--with-apxs" option in mod_python_2.7.6, and compile apache
adding
"--enable-module=rewrite --enable-shared=rewrite" options...  apache
failed
to start, in the lines:
LoadModule rewrite_module     libexec/mod_rewrite.so
LoadModule python_module      libexec/mod_python.so
...

I'm really confused ...
Any idea ?


Rodrigo Sanchez Olavarria
DGF. U. de Chile



From bakey at traq.com  Thu Dec 27 13:58:18 2001
From: bakey at traq.com (Brian Akey)
Date: Fri Jan  9 21:59:11 2004
Subject: [mod_python] Python 2.1.1 and apache 1.3.22
Message-ID: <780A5D64B1CC9544AB7B702F39219C1E5F38@traqexch.traq.com>

I have found that mod_python compiles better if you
do ./configure --with-apache=../apache
--with-apxs=/usr/local/apache/bin/apxs
make static
make install_static
cd apache
./configure   --activate-module=src/modules/python/libpython.a
make
make install

I don't use the --with-python
I make sure the python without-threads is in the path (/usr/bin/python)
I have not had good luck with the --with-python
Also if you want to use python with threads just mv your old python and use
ln -s to the one that mod_python needs. After you compile apache mv or ln -s
the old python back.


-----Original Message-----
From: rodrigo [mailto:rodrigo@dgf.uchile.cl]
Sent: Thursday, December 27, 2001 4:15 PM
To: mod_python@modpython.org; rodrigo@dgf.uchile.cl
Subject: [mod_python] Python 2.1.1 and apache 1.3.22


Dear experts
  I have compiled  Python-2.1.1 with  "--without-threads" option....
  (then make and make install)

 I have compiled  mod_python_2.7.6 with options :
 --with-apache=../apache_1.3.22  --with-python
 (then make and make install)

I have compiled  apache_1.3.22 with the following options:
  ./configure   --activate-module=src/modules/python/libpython.a
and then, when I do "make" ... I get the following compiling errors:

From e_v_s1234 at email.ru  Sat Dec 29 16:35:25 2001
From: e_v_s1234 at email.ru (VISA SUPPORT)
Date: Fri Jan  9 21:59:11 2004
Subject: [mod_python] ПАСПОРТНО-ВИЗОВЫЕ УСЛУГИ / VISA SUPPORT
Message-ID: <200112291443.fBTEhhi19579@card.co.ru>

ОФОРМЛЕНИЕ ЗАГРАНПАСПОРТОВ

(Цены указаны для жителей Москвы и Моск. области)

35 раб.дней - $70
21-23 раб.дней - $140
15-17 раб.дней - $180
10-12 раб.дней - $260
8-9 раб. дней - $330
6-7 раб. дней - $390

По Вашему запросу вышлем комплект необходимых
документов для оформления загранпаспорта.

В И З О В Ы Е    У С Л У Г И

Оформление приглашений для ИНОСТРАНЦЕВ в Россию.
Однократное на 1 месяц - $ 25
Многократное на 1 год- $ 150

*Правовые вопросы относительно пребывания иностранных граждан на территории РФ,
 проблемные случаи.
*Вопросы выезда РОССИЯН за рубеж, оформление надлежащих документов
 (ВИЗЫ).

БЕСПЛАТНЫЙ ВЫЕЗД КУРЬЕРА К ВАМ В ОФИС В ПРЕДЕЛАХ г. МОСКВЫ

ТЕЛ./ФАКС: (095) 797-04-82,  797-04-08,  107-78-58


V I S A   S E R V I C E S

L e g a l i z a t i o n   o f   t h e   R u s s i a n   v i s a - i n v i t a t i o n s
f o r   f o r e i g n c i t i z e n s.

Single for 1 month-only $25
Multiple for 1 year-only $150

*S o l u t i o n   o f   l e g a l   m a t t e r s   c o n c e r n i n g   f o r e i g n   c i t i z e n s   s t a y
o n   t h e   t e r r i t o r y   o f   R u s s i a n   F e d e r a t i o n,   q u e s t i o n a b l e   i s s u e s.

*A s s i s t a n c e   i n   v i s a s   r e g i s t r a t i o n   f o r   t h e
f o r e i g n   c i t i z e n s   i n   R u s s i a.

*S o l u t i o n   o f   t h e   p r o b l e m s   c o n c e r n i n g   R U S S I A N
c i t i z e n s   d e p a r t u r e   a b r o a d,   r e g i s t r a t i o n
o f   t h e   p r o p e r   d o c u m e n t s:   f o r e i g n   p a s s p o r t s   a n d   v i s a s.

TEL./FAX: +7(095) 797-04-82,  797-04-08,  107-78-58

From clarence at netlojix.com  Mon Dec 31 13:51:38 2001
From: clarence at netlojix.com (Clarence Gardner)
Date: Fri Jan  9 21:59:11 2004
Subject: [mod_python] HTTP response codes
Message-ID: <20011231135138.D3328@liberty.sba2.netlojix.net>

I'm not seeing a way to do much with the response code. In particular,
I want to do a redirection, which requires a 3xx response and a Location
header.

If I just return HTTP_MOVED_PERMANENTLY, the server sends an HTML
document containing an empty link, with a status of 301. If I set
the header, call send_http_header, and then return that status, I
get the same HTML, but with a 200 status (and my Location header
isn't included anyway).

Have I missed something?
Thanks.

-- 
Clarence Gardner
Software Engineer
NetLojix Communications
clarence@netlojix.com

From clarence at netlojix.com  Mon Dec 31 14:24:17 2001
From: clarence at netlojix.com (Clarence Gardner)
Date: Fri Jan  9 21:59:11 2004
Subject: [mod_python] Mea culpa
Message-ID: <20011231142417.F3328@liberty.sba2.netlojix.net>

I see that this is addressed in the FAQ that I was pointed
to. [but I *did* RTFM :)]

Sorry.

I also see that the FAQ mentions req.status which is not mentioned in
the manual.

-- 
Clarence Gardner
Software Engineer
NetLojix Communications
clarence@netlojix.com

From grisha at modpython.org  Mon Dec 31 17:37:01 2001
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:59:11 2004
Subject: [mod_python] HTTP response codes
In-Reply-To: <20011231135138.D3328@liberty.sba2.netlojix.net>
Message-ID: <Pine.BSF.4.32.0112311731590.43002-100000@localhost>

By returning an error code, you're asking Apache to deal with your error.
Apache will then display a stock error page, and will send error headers
(req.err_headers_out instead of req.headers_out), which is why you didn't
see your header amongst them.

What you want to do instead is handle everything yourself, and then let
Apache know it's done by returning apache.OK.

Something like this should work (this is from the FAQ, btw):

 def handler(req):
     req.headers_out['location'] = 'http://www.modpython.org/'
     req.status = apache.HTTP_MOVED_TEMPORARILY
     req.send_http_header()
     return apache.OK

Grisha


On Mon, 31 Dec 2001, Clarence Gardner wrote:

>
> I'm not seeing a way to do much with the response code. In particular,
> I want to do a redirection, which requires a 3xx response and a Location
> header.
>
> If I just return HTTP_MOVED_PERMANENTLY, the server sends an HTML
> document containing an empty link, with a status of 301. If I set
> the header, call send_http_header, and then return that status, I
> get the same HTML, but with a 200 status (and my Location header
> isn't included anyway).
>
> Have I missed something?
> Thanks.
>
> --
> Clarence Gardner
> Software Engineer
> NetLojix Communications
> clarence@netlojix.com
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From bob at redivi.com  Sun Dec  2 09:08:22 2001
From: bob at redivi.com (Bob Ippolito)
Date: Fri Jan  9 22:03:00 2004
Subject: [mod_python] <Location> vs <Directory> ?
Message-ID: <20011202090822.A1135@redivi.com>

It seems to be possible to use <Location /some/url> instead of <Directory /some/path> with mod_python.

It can be desirable at times to be able to use a PythonHandler at any arbitrary URL, not just directories or files with the .py extension.  I didn't see this documented anywhere, or talked about on the list (at a glance of subjects for the past couple months).  This way you can make a python script look like a single file.. i.e.

<Location /some/url/somefile.html>
  SetHandler python-program
  PythonHandler myHandler
</Location>

this won't affect other .html files at /some/url.

-bob

From mike at mikebell.org  Sun Dec  2 11:30:10 2001
From: mike at mikebell.org (mike@mikebell.org)
Date: Fri Jan  9 22:03:00 2004
Subject: [mod_python] <Location> vs <Directory> ?
In-Reply-To: <20011202090822.A1135@redivi.com>
References: <20011202090822.A1135@redivi.com>
Message-ID: <20011202113009.A7474@mikebell.org>

On Sun, Dec 02, 2001 at 09:08:22AM -0500, Bob Ippolito wrote:
> It seems to be possible to use <Location /some/url> instead of <Directory
> /some/path> with mod_python.
> 
> It can be desirable at times to be able to use a PythonHandler at any
> arbitrary URL, not just directories or files with the .py extension.  I
> didn't see this documented anywhere, or talked about on the list (at a
> glance of subjects for the past couple months).  This way you can make a
> python script look like a single file.. i.e.
> 
> <Location /some/url/somefile.html>
>   SetHandler python-program
>   PythonHandler myHandler
> </Location>
> 
> this won't affect other .html files at /some/url.

Yes, I've been doing this since I first started using mod_python for things
like <Location /camera>. If you find some neat trick like that which you
think others might be interested in, why not make it a new entry in the FAQ?
Then it'll be there for people in the future without them having to read
through the mailing list archives.

From noamhooper at hotmail.com  Tue Dec  4 20:03:04 2001
From: noamhooper at hotmail.com (Noam Hoffer)
Date: Fri Jan  9 22:03:00 2004
Subject: [mod_python] MySQL problem on win32
Message-ID: <OE65Vuelu79YzvxsVeg00012711@hotmail.com>

Hello,
I didn't succed in using MySQLdb module from mod_python. I get the following error:
Mod_python error: "PythonHandler mptest"

Traceback (most recent call last):

  File "C:\Python21\Lib\mod_python\apache.py", line 181, in Dispatch
    module = import_module(module_name, _req)

  File "C:\Python21\Lib\mod_python\apache.py", line 338, in import_module
    module = imp.load_module(mname, f, p, d)

  File "C:\Program Files\Apache Group\Apache\htdocs\python\test\mptest.py", line 2, in ?
    import MySQLdb

  File "C:\Python21\MySQLdb\__init__.py", line 27, in ?
    import _mysql

ImportError: _mysql: init failed

when using it from the interpreter it works file.
here is my script:
from mod_python import apacheimport MySQLdb
def _db_login(relogin = 0):    """Login to the database    """
    global DB_CONN
    if relogin:        DB_CONN = MySQLdb.connect(db="test")        return DB_CONN    else:        try:            d = DB_CONN            return d
        except NameError:     DB_CONN = MySQLdb.connect(db="test")            return DB_CONN
def handler(req):    req.content_type = "text/plain"    req.send_http_header()    req.write("Hello World!")    conn = _db_login()    cur = conn.cursor()    cur.execute("select * from stam")    req.write(cur.fetchall())
    return apache.OK


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20011204/8221f032/attachment-0003.htm
From PhoenixWR at hotmail.com  Sat Dec  8 04:50:24 2001
From: PhoenixWR at hotmail.com (WRFan)
Date: Fri Jan  9 22:03:00 2004
Subject: [mod_python] mod_python publisher module doesn't work (404 error); AttributeError: module ...contains no handler
Message-ID: <OE20oiMyr5NJvKk69Z000014e0e@hotmail.com>

Hi,

I installed mod_python 2.7.4 (Python 2.1.1) on my Apache server 1.3.20 and windows 98. However, I can't use the mod_python publisher module 
( PythonHandler mod_python.publisher ). 
If I insert this into a htaccess file or into the Apache config file and execute the usual "Hello world" testing script, I get a 404 error (page not found). I opened the publisher.py file and it seems that if there is a problem, this module makes Apache display an error page. I just don't understand what the problem is. When I use the name of the file as the handler, e.g. for a file test.py:

PythonHandler test

the script is executed all right, I see the "Hello World message". Do you know what the problem might be with PythonHandler mod_python.publisher ?

I added this to my httpd.conf file:

AddHandler python-program .py 

and this I put into a htaccess file:

AddHandler python-program .py 

AddHandler python-program .pyc

AddHandler python-program .python

SetHandler python-program 

PythonHandler test

#PythonHandler mod_python.publisher 

PythonDebug on 

Also if I try to use some python scripts downloaded from the net through Apache, I get this error:

Mod_python error: "PythonHandler Index"

Traceback (most recent call last):

  File "C:\Programme\Server\Python\Lib\mod_python\apache.py", line 185, in Dispatch
    object = resolve_object(req, module, object_str, silent)

  File "C:\Programme\Server\Python\Lib\mod_python\apache.py", line 395, in resolve_object
    raise AttributeError, s

AttributeError: module 'c:/programme/server/apache/public/python/ransacker/\Index.pyc' contains no 'handler'


It's always this error. Does that mean that python scripts can't be executed through mod_python, but have to be re-written for the Apache module?
Please email me at PhoenixWR@hotmail.com.
Thank you,
Regards,
Gerhart.  

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20011208/21941b76/attachment-0003.htm
From seant at webreply.com  Tue Dec 11 12:15:32 2001
From: seant at webreply.com (Sean True)
Date: Fri Jan  9 22:03:00 2004
Subject: [mod_python] Marrying BaseHTTPServer to modpython?
Message-ID: <MJEHLHJKGINLONDMMKNEAEIEECAA.seant@webreply.com>

Before diving in myself, I thought I would ask if anyone has made a handler
that will support software
which expect to subclass the BaseHTTPServer class? I've found some useful
DAV software (file system transport
over HTTP) which works as a complicated subclass of BaseHTTPServer.

-- Sean
-------
Sean True
WebReply.Com, Inc.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Sean True.vcf
Type: text/x-vcard
Size: 309 bytes
Desc: not available
Url : http://mailman.modpython.org/pipermail/mod_python/attachments/20011211/5e77a1c4/SeanTrue-0003.vcf
From ray_drew at yahoo.co.uk  Mon Dec 17 10:11:09 2001
From: ray_drew at yahoo.co.uk (Ray Drew)
Date: Fri Jan  9 22:03:00 2004
Subject: [mod_python] Python 2.2
Message-ID: <004701c186e3$269bafc0$df13000a@RDREWXP>

Is mod_python avalable for Python 2.2 yet? Python 2.2 final is scheduled for
release later this week.

regards,

Ray Drew


_________________________________________________________
Do You Yahoo!?
Get your free @yahoo.com address at http://mail.yahoo.com


From grisha at modpython.org  Mon Dec 17 10:34:19 2001
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 22:03:00 2004
Subject: [mod_python] Python 2.2
In-Reply-To: <004701c186e3$269bafc0$df13000a@RDREWXP>
Message-ID: <Pine.BSF.4.32.0112171033370.20970-100000@localhost>

I haven't tried compiling it with 2.2 yet, but chances are it will work
without any modifications... I guess we'll see when it comes out. :)

On Mon, 17 Dec 2001, Ray Drew wrote:

> Is mod_python avalable for Python 2.2 yet? Python 2.2 final is scheduled for
> release later this week.
>
> regards,
>
> Ray Drew
>
>
> _________________________________________________________
> Do You Yahoo!?
> Get your free @yahoo.com address at http://mail.yahoo.com
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From sobral at sj.univali.br  Mon Dec 17 13:11:46 2001
From: sobral at sj.univali.br (MARCELO MAIA SOBRAL)
Date: Fri Jan  9 22:03:00 2004
Subject: [mod_python] Python 2.2
In-Reply-To: <Pine.BSF.4.32.0112171033370.20970-100000@localhost>
Message-ID: <Pine.LNX.4.30.0112171310370.32268-100000@so.sj.univali.br>

   I have compiled mod_python 2.7.6 with python 2.2, and it has been
working fine.

On Mon, 17 Dec 2001, Gregory (Grisha) Trubetskoy wrote:

> I haven't tried compiling it with 2.2 yet, but chances are it will work
> without any modifications... I guess we'll see when it comes out. :)
>
> On Mon, 17 Dec 2001, Ray Drew wrote:
>
> > Is mod_python avalable for Python 2.2 yet? Python 2.2 final is scheduled for
> > release later this week.

  -----------------------------
  Prof. Marcelo Maia Sobral
  Administrador de Redes
  Nucleo de Informatica
  Univali - Campus S?o Jos?
  Fone: (0xx48) 281-1558
  -----------------------------


From guido at python.org  Mon Dec 17 10:59:39 2001
From: guido at python.org (Guido van Rossum)
Date: Fri Jan  9 22:03:00 2004
Subject: [mod_python] Python 2.2
In-Reply-To: Your message of "Mon, 17 Dec 2001 10:34:19 EST."
             <Pine.BSF.4.32.0112171033370.20970-100000@localhost> 
References: <Pine.BSF.4.32.0112171033370.20970-100000@localhost> 
Message-ID: <200112171559.KAA21926@cj20424-a.reston1.va.home.com>

> I haven't tried compiling it with 2.2 yet, but chances are it will work
> without any modifications... I guess we'll see when it comes out. :)

Why don't you try it with the release candidate, 2.2c1?  We can use
all the testing we can get! :-)

--Guido van Rossum (home page: http://www.python.org/~guido/)


From mailer at mailer.ru  Mon Dec 17 18:39:21 2001
From: mailer at mailer.ru (mailer)
Date: Fri Jan  9 22:03:00 2004
Subject: [mod_python] =?windows-1251?B?zvIg5O7x8u7p7e7pIP3q7u3u7OjoIC0g6iDk7vHy8+/t7ukg8O7x6g==?=
 =?windows-1251?B?7vjoIS4u?=
Message-ID: <000901c186f7$da1a8620$32c8a8c0@webmaster>


    ???????? ?????? ????????? ????????? ?????????, ?????????? ?? ??????? ?? ?????? ?????? ????? ?? ???? ??? ?????? ?? ?????? ? ????????: 

 - ??? ???, ????? ?????, ??????, ?????? ? ????????.

 - ????????? ????? ?????? ?? ??????. 


--------------------------------------------------------------------------------

???? ??? ?? ?????????????? ???? ??????????? ? ?? ?????? ?? ?????? ???????? ??? ???????? - ???????? ???? ???????? ?????????. ?????? ??????? ?????? ?????? ? ????? E-Mail ?? ????? major-pain@yandex.ru ? ?? ?????? ????????? ?? ??????? ??????????????? ??????? ??????????.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20011217/6b7421f2/attachment-0003.htm
From cva_ at yahoo.com  Mon Dec 17 12:42:31 2001
From: cva_ at yahoo.com (Chris Anderson)
Date: Fri Jan  9 22:03:00 2004
Subject: [mod_python] sporadic import errors...
Message-ID: <20011217204231.37269.qmail@web11604.mail.yahoo.com>

okay, i'm running Python 2.1.1, mod_python 2.7.6, and apache 1.3.19
under Linux 2.2.14. the mod_python module is build statically.

after hitting our app a couple of times, i sporadically receive the
following error:

'import site' failed; traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python2.1/site.py", line 60, in ?
    import sys, os
  File "/usr/local/lib/python2.1/os.py", line 54, in ?
    __all__.extend(_get_exports_list(posix))
  File "/usr/local/lib/python2.1/os.py", line 35, in _get_exports_list
    return list(module.__all__)
AttributeError: 'posix' module has no attribute '__all__'
make_obcallback(): could not import mod_python.apache.
make_obcallback(): could not call init.

and i'm having a terrible time isolating what could be causing this to
occur.

interesting things which could be related:

o multiple instances of the app are running under the same apache with
different <Directory> tags handling the different apache/mod_python
settings

o i have PythonInterpPerDir turned on

o the problem seems most easily exaccerbated by running multiple
scripts simultaneously

the biggest problem i'm having (besides the error itself) is that i
can't figure out any way to tell which subinterpreter i am in when
these errors happen. i've poked through the documentation and
pythonrun.c to no avail.

any tips would be most helpful.

cva

__________________________________________________
Do You Yahoo!?
Check out Yahoo! Shopping and Yahoo! Auctions for all of
your unique holiday gifts! Buy at http://shopping.yahoo.com
or bid at http://auctions.yahoo.com

From guido at python.org  Mon Dec 17 16:01:35 2001
From: guido at python.org (Guido van Rossum)
Date: Fri Jan  9 22:03:00 2004
Subject: [mod_python] sporadic import errors...
In-Reply-To: Your message of "Mon, 17 Dec 2001 12:42:31 PST."
             <20011217204231.37269.qmail@web11604.mail.yahoo.com> 
References: <20011217204231.37269.qmail@web11604.mail.yahoo.com> 
Message-ID: <200112172101.QAA18776@cj20424-a.reston1.va.home.com>

> okay, i'm running Python 2.1.1, mod_python 2.7.6, and apache 1.3.19
> under Linux 2.2.14. the mod_python module is build statically.
> 
> after hitting our app a couple of times, i sporadically receive the
> following error:
> 
> 'import site' failed; traceback:
> Traceback (most recent call last):
>   File "/usr/local/lib/python2.1/site.py", line 60, in ?
>     import sys, os
>   File "/usr/local/lib/python2.1/os.py", line 54, in ?
>     __all__.extend(_get_exports_list(posix))
>   File "/usr/local/lib/python2.1/os.py", line 35, in _get_exports_list
>     return list(module.__all__)
> AttributeError: 'posix' module has no attribute '__all__'
> make_obcallback(): could not import mod_python.apache.
> make_obcallback(): could not call init.
> 
> and i'm having a terrible time isolating what could be causing this to
> occur.
> 
> interesting things which could be related:
> 
> o multiple instances of the app are running under the same apache with
> different <Directory> tags handling the different apache/mod_python
> settings
> 
> o i have PythonInterpPerDir turned on
> 
> o the problem seems most easily exaccerbated by running multiple
> scripts simultaneously

Here's my analysis of the case.  Looking at the source code of os.py:

def _get_exports_list(module):
    try:
        return list(module.__all__)
    except AttributeError:
        return [n for n in dir(module) if n[0] != '_']

the AttributeError should be caught -- but it isn't!  I think this is
because each Python interpreter instance initializes its own copy of
the exceptions -- but store them in a global shared by all instances
running in the same process!

> the biggest problem i'm having (besides the error itself) is that i
> can't figure out any way to tell which subinterpreter i am in when
> these errors happen. i've poked through the documentation and
> pythonrun.c to no avail.

Can you try this with Python 2.2c1?  I think we've fixed it there.  If
you can't try 2.2c1, try the patch to pythonrun.c from rev 2.143 to
2.144:
http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/python/python/dist/src/Python/pythonrun.c.diff?r1=2.143&r2=2.144.

--Guido van Rossum (home page: http://www.python.org/~guido/)

From cva_ at yahoo.com  Mon Dec 17 13:49:47 2001
From: cva_ at yahoo.com (Chris Anderson)
Date: Fri Jan  9 22:03:00 2004
Subject: [mod_python] sporadic import errors...
In-Reply-To: <200112172101.QAA18776@cj20424-a.reston1.va.home.com>
Message-ID: <20011217214947.86064.qmail@web11606.mail.yahoo.com>



--- Guido van Rossum <guido@python.org> wrote:
> 
> Here's my analysis of the case.  Looking at the source code of os.py:
> 
> def _get_exports_list(module):
>     try:
>         return list(module.__all__)
>     except AttributeError:
>         return [n for n in dir(module) if n[0] != '_']
> 
> the AttributeError should be caught -- but it isn't!  I think this is
> because each Python interpreter instance initializes its own copy of
> the exceptions -- but store them in a global shared by all instances
> running in the same process!
> 
> > the biggest problem i'm having (besides the error itself) is that i
> > can't figure out any way to tell which subinterpreter i am in when
> > these errors happen. i've poked through the documentation and
> > pythonrun.c to no avail.
> 
> Can you try this with Python 2.2c1?  I think we've fixed it there. 
> If
> you can't try 2.2c1, try the patch to pythonrun.c from rev 2.143 to
> 2.144:
>
http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/python/python/dist/src/Python/pythonrun.c.diff?r1=2.143&r2=2.144.

i didn't have an opportunity to try with 2.2c1, but the patch against
2.1.1 seems to have fixed the problem.

thanks much,

cva

__________________________________________________
Do You Yahoo!?
Check out Yahoo! Shopping and Yahoo! Auctions for all of
your unique holiday gifts! Buy at http://shopping.yahoo.com
or bid at http://auctions.yahoo.com

From harm at millionmonkeys.nl  Tue Dec 18 22:57:49 2001
From: harm at millionmonkeys.nl (harm)
Date: Fri Jan  9 22:03:00 2004
Subject: [mod_python] getvalue() in util.py
Message-ID: <20011218225749.E29846@godel>

Moi,

is there any reason there is no getvalue() in mod_python/util.py?
Could be as simple as this:

harm@turing:/tmp$ diff util.py.orig util.py
252a253,259
>     def getvalue(self, key, default=None):
>         """Dictionary style get() method, including 'value' lookup."""
>         if self.has_key(key):
>             return self[key]
>         else:
>             return default
> 

cgi.py has it as well, makes life easier if they one can use the same
funtions under mod_python and plain cgi...


Thanks,

Harmen


-- 
                               The Moon is Waxing Crescent (16% of Full)

From johnny at johnnysfunhouse.com  Tue Dec 18 21:21:37 2001
From: johnny at johnnysfunhouse.com (Refrigerator Johnny)
Date: Fri Jan  9 22:03:01 2004
Subject: [mod_python] apache [linux] config file.
Message-ID: <025501c18833$e392e890$6401a8c0@cj543266b>

I statically linked mod_python into apache on a linux 6.2 system.
I can see in my log file, that it is loaded.
I added the following to my apache.conf file:
<Directory /usr/local/apache/test>
   AddHandler python-program .py
   Pythonhandler mptest
  PythonDebug On
</Directory>

when I go to localhost/test/mptest.py,
I get a listing of the python file.
What else do I have to do?
Thanks for any insight into this problem!
-john
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20011218/64b4981c/attachment-0003.htm
From sep27 at cornell.edu  Wed Dec 19 00:58:46 2001
From: sep27 at cornell.edu (S.Plake)
Date: Fri Jan  9 22:03:01 2004
Subject: [mod_python] installation problem
Message-ID: <5.1.0.14.2.20011219005240.00adc7b8@postoffice.mail.cornell.edu>

I am currently dual booting win2k pro and RH 7.2, I have apache on both 
sides and python 2.1 on both. I am currently trying to get the python_mod 
into apache on win2k side but have run into a problem. I get an error when 
I restart Apache that says:

"Invalid Command 'PythonHandler' perhaps mis-spelled or defined by a module 
not included in the server configuration"

I followed word for word the instructions on installation on the modpython 
website. I am hoping someone on this list will be able to help me figure 
this out.

Thank you,

steve










From gege at mail.china.com  Thu Dec 20 10:42:41 2001
From: gege at mail.china.com (ОДБъ)
Date: Fri Jan  9 22:03:01 2004
Subject: [mod_python] Dose Anyone can give me a new version mod_python DLL ?
Message-ID: <Of988779895758.23369@webmail4>

I want a mod_python 2.7.6 DLL with Apache 1.3.22,which can run under Windows XP. If you have, email me please. Thank you very much.

Regards

Wenlong Liu



From alc20020 at mailcity.com  Sat Dec 22 08:09:56 2001
From: alc20020 at mailcity.com (ALC)
Date: Fri Jan  9 22:03:01 2004
Subject: [mod_python] American Language Center- 156-0000 Merry Christmas!
Message-ID: <22120100003$999219783670864$1516794660$0@exploder3.em5000.net>



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20011222/7397f8d8/attachment-0003.htm
From dds at aport.ru  Wed Dec 26 18:37:06 2001
From: dds at aport.ru (Dmitri D. Sayakin)
Date: Fri Jan  9 22:03:01 2004
Subject: [mod_python] mod_python bug?
Message-ID: <200112261537.SAA04082@www.megapage.ru>

Trying to work with encoding="koi8-r" (and "cp1251","iso-8859-5") in site.py,
can't start mod_python-2.7.6 with apache/1.3.22 rus/PL30.9. After changing
back to "ascii", mod_python started and works. Is this normal behavior?

From rodrigo at dgf.uchile.cl  Thu Dec 27 19:14:47 2001
From: rodrigo at dgf.uchile.cl (rodrigo)
Date: Fri Jan  9 22:03:01 2004
Subject: [mod_python] Python 2.1.1 and apache 1.3.22
Message-ID: <3C2B9D57.9B1BFAE0@dgf.uchile.cl>

Dear experts
  I have compiled  Python-2.1.1 with  "--without-threads" option....
  (then make and make install)

 I have compiled  mod_python_2.7.6 with options :
 --with-apache=../apache_1.3.22  --with-python
 (then make and make install)

I have compiled  apache_1.3.22 with the following options:
  ./configure   --activate-module=src/modules/python/libpython.a
and then, when I do "make" ... I get the following compiling errors:
---------------------------------------------------------------------
gcc  -DSOLARIS2=270 -DUSE_EXPAT -I./lib/expat-lite -DNO_DL_NEEDED
`./apaci`  \
    -o httpd buildmark.o modules.o modules/python/libpython.a
modules/standard/libstandard.a   \
      main/libmain.a  ./os/unix/libos.a  ap/libap.a
lib/expat-lite/libexpat.a  -lsocket -lns

modules/python/libpython.a(mod_python.o): In function
`make_interpreter':
mod_python.o(.text+0xc): undefined reference to `Py_NewInterpreter'
mod_python.o(.text+0x6c): undefined reference to `PyThreadState_Swap'
modules/python/libpython.a(mod_python.o): In function
`get_interpreter_data':
mod_python.o(.text+0xc4): undefined reference to `PyDict_GetItemString'
mod_python.o(.text+0x130): undefined reference to
`PyCObject_FromVoidPtr'
mod_python.o(.text+0x150): undefined reference to `PyDict_SetItemString'

.....
modules/python/libpython.a(mod_python.o): In function `python_cleanup':
mod_python.o(.text+0x338): undefined reference to `PyThreadState_New'
mod_python.o(.text+0x348): undefined reference to `PyThreadState_Swap'
mod_python.o(.text+0x368): undefined reference to
`PyObject_CallFunction'
.....
and so ...
----------------------------------------------------------------------
when I add  "--with-apxs" option in mod_python_2.7.6, and compile apache
adding
"--enable-module=rewrite --enable-shared=rewrite" options...  apache
failed
to start, in the lines:
LoadModule rewrite_module     libexec/mod_rewrite.so
LoadModule python_module      libexec/mod_python.so
...

I'm really confused ...
Any idea ?


Rodrigo Sanchez Olavarria
DGF. U. de Chile



From bakey at traq.com  Thu Dec 27 13:58:18 2001
From: bakey at traq.com (Brian Akey)
Date: Fri Jan  9 22:03:01 2004
Subject: [mod_python] Python 2.1.1 and apache 1.3.22
Message-ID: <780A5D64B1CC9544AB7B702F39219C1E5F38@traqexch.traq.com>

I have found that mod_python compiles better if you
do ./configure --with-apache=../apache
--with-apxs=/usr/local/apache/bin/apxs
make static
make install_static
cd apache
./configure   --activate-module=src/modules/python/libpython.a
make
make install

I don't use the --with-python
I make sure the python without-threads is in the path (/usr/bin/python)
I have not had good luck with the --with-python
Also if you want to use python with threads just mv your old python and use
ln -s to the one that mod_python needs. After you compile apache mv or ln -s
the old python back.


-----Original Message-----
From: rodrigo [mailto:rodrigo@dgf.uchile.cl]
Sent: Thursday, December 27, 2001 4:15 PM
To: mod_python@modpython.org; rodrigo@dgf.uchile.cl
Subject: [mod_python] Python 2.1.1 and apache 1.3.22


Dear experts
  I have compiled  Python-2.1.1 with  "--without-threads" option....
  (then make and make install)

 I have compiled  mod_python_2.7.6 with options :
 --with-apache=../apache_1.3.22  --with-python
 (then make and make install)

I have compiled  apache_1.3.22 with the following options:
  ./configure   --activate-module=src/modules/python/libpython.a
and then, when I do "make" ... I get the following compiling errors:

From e_v_s1234 at email.ru  Sat Dec 29 16:35:25 2001
From: e_v_s1234 at email.ru (VISA SUPPORT)
Date: Fri Jan  9 22:03:01 2004
Subject: [mod_python] ПАСПОРТНО-ВИЗОВЫЕ УСЛУГИ / VISA SUPPORT
Message-ID: <200112291443.fBTEhhi19579@card.co.ru>

ОФОРМЛЕНИЕ ЗАГРАНПАСПОРТОВ

(Цены указаны для жителей Москвы и Моск. области)

35 раб.дней - $70
21-23 раб.дней - $140
15-17 раб.дней - $180
10-12 раб.дней - $260
8-9 раб. дней - $330
6-7 раб. дней - $390

По Вашему запросу вышлем комплект необходимых
документов для оформления загранпаспорта.

В И З О В Ы Е    У С Л У Г И

Оформление приглашений для ИНОСТРАНЦЕВ в Россию.
Однократное на 1 месяц - $ 25
Многократное на 1 год- $ 150

*Правовые вопросы относительно пребывания иностранных граждан на территории РФ,
 проблемные случаи.
*Вопросы выезда РОССИЯН за рубеж, оформление надлежащих документов
 (ВИЗЫ).

БЕСПЛАТНЫЙ ВЫЕЗД КУРЬЕРА К ВАМ В ОФИС В ПРЕДЕЛАХ г. МОСКВЫ

ТЕЛ./ФАКС: (095) 797-04-82,  797-04-08,  107-78-58


V I S A   S E R V I C E S

L e g a l i z a t i o n   o f   t h e   R u s s i a n   v i s a - i n v i t a t i o n s
f o r   f o r e i g n c i t i z e n s.

Single for 1 month-only $25
Multiple for 1 year-only $150

*S o l u t i o n   o f   l e g a l   m a t t e r s   c o n c e r n i n g   f o r e i g n   c i t i z e n s   s t a y
o n   t h e   t e r r i t o r y   o f   R u s s i a n   F e d e r a t i o n,   q u e s t i o n a b l e   i s s u e s.

*A s s i s t a n c e   i n   v i s a s   r e g i s t r a t i o n   f o r   t h e
f o r e i g n   c i t i z e n s   i n   R u s s i a.

*S o l u t i o n   o f   t h e   p r o b l e m s   c o n c e r n i n g   R U S S I A N
c i t i z e n s   d e p a r t u r e   a b r o a d,   r e g i s t r a t i o n
o f   t h e   p r o p e r   d o c u m e n t s:   f o r e i g n   p a s s p o r t s   a n d   v i s a s.

TEL./FAX: +7(095) 797-04-82,  797-04-08,  107-78-58

From clarence at netlojix.com  Mon Dec 31 13:51:38 2001
From: clarence at netlojix.com (Clarence Gardner)
Date: Fri Jan  9 22:03:01 2004
Subject: [mod_python] HTTP response codes
Message-ID: <20011231135138.D3328@liberty.sba2.netlojix.net>

I'm not seeing a way to do much with the response code. In particular,
I want to do a redirection, which requires a 3xx response and a Location
header.

If I just return HTTP_MOVED_PERMANENTLY, the server sends an HTML
document containing an empty link, with a status of 301. If I set
the header, call send_http_header, and then return that status, I
get the same HTML, but with a 200 status (and my Location header
isn't included anyway).

Have I missed something?
Thanks.

-- 
Clarence Gardner
Software Engineer
NetLojix Communications
clarence@netlojix.com

From clarence at netlojix.com  Mon Dec 31 14:24:17 2001
From: clarence at netlojix.com (Clarence Gardner)
Date: Fri Jan  9 22:03:01 2004
Subject: [mod_python] Mea culpa
Message-ID: <20011231142417.F3328@liberty.sba2.netlojix.net>

I see that this is addressed in the FAQ that I was pointed
to. [but I *did* RTFM :)]

Sorry.

I also see that the FAQ mentions req.status which is not mentioned in
the manual.

-- 
Clarence Gardner
Software Engineer
NetLojix Communications
clarence@netlojix.com

From grisha at modpython.org  Mon Dec 31 17:37:01 2001
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 22:03:01 2004
Subject: [mod_python] HTTP response codes
In-Reply-To: <20011231135138.D3328@liberty.sba2.netlojix.net>
Message-ID: <Pine.BSF.4.32.0112311731590.43002-100000@localhost>

By returning an error code, you're asking Apache to deal with your error.
Apache will then display a stock error page, and will send error headers
(req.err_headers_out instead of req.headers_out), which is why you didn't
see your header amongst them.

What you want to do instead is handle everything yourself, and then let
Apache know it's done by returning apache.OK.

Something like this should work (this is from the FAQ, btw):

 def handler(req):
     req.headers_out['location'] = 'http://www.modpython.org/'
     req.status = apache.HTTP_MOVED_TEMPORARILY
     req.send_http_header()
     return apache.OK

Grisha


On Mon, 31 Dec 2001, Clarence Gardner wrote:

>
> I'm not seeing a way to do much with the response code. In particular,
> I want to do a redirection, which requires a 3xx response and a Location
> header.
>
> If I just return HTTP_MOVED_PERMANENTLY, the server sends an HTML
> document containing an empty link, with a status of 301. If I set
> the header, call send_http_header, and then return that status, I
> get the same HTML, but with a 200 status (and my Location header
> isn't included anyway).
>
> Have I missed something?
> Thanks.
>
> --
> Clarence Gardner
> Software Engineer
> NetLojix Communications
> clarence@netlojix.com
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


