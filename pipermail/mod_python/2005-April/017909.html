<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Re: vampire.importModule from module import
	function/class? 
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20vampire.importModule%20from%20module%20import%0A%09function/class%3F%20&In-Reply-To=4266FA2D.9090900%40phoenux.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017908.html">
   <LINK REL="Next"  HREF="017911.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Re: vampire.importModule from module import
	function/class? </H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20vampire.importModule%20from%20module%20import%0A%09function/class%3F%20&In-Reply-To=4266FA2D.9090900%40phoenux.org"
       TITLE="[mod_python] Re: vampire.importModule from module import
	function/class? ">grahamd at dscpl.com.au
       </A><BR>
    <I>Wed Apr 20 21:14:42 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="017908.html">[mod_python] vampire.importModule from module import
	function/class? 
</A></li>
        <LI>Next message: <A HREF="017911.html">[mod_python] Attempting to use mod_python on a site which uses
	digest autentication
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17909">[ date ]</a>
              <a href="thread.html#17909">[ thread ]</a>
              <a href="subject.html#17909">[ subject ]</a>
              <a href="author.html#17909">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 21/04/2005, at 10:56 AM, Bram wrote:

&gt;<i> Are there any special options that can be given to 
</I>&gt;<i> vampire.importModule() that duplicates &quot;from module import 
</I>&gt;<i> function/class&quot; style imports or should I just stick to the long 
</I>&gt;<i> dotted notations for calling these functions/classes? It sure would be 
</I>&gt;<i> nice to only have to load the code for the functions/classes I needed.
</I>
I think you misunderstand what &quot;from module import function/class&quot; does.
It still loads the whole contents of the module into the process. It
doesn't selectively load just the bits you indicate. It is in effect a
short cut for saying:

   import mymodule
   myfunction = mymodule.myfunction
   myclass = mymodule.myclass

As an example, try the following:

   from base64 import decode
   print globals()
   import sys
   print dir(sys.modules[&quot;base64&quot;])

So, &quot;decode&quot; may be the only thing in your namespace, but the whole 
module
still exists in sys.modules.

To avoid dotted notation, you can setup references in your local 
namespace
using:

   mymodule = vampire.importModule(&quot;mymodule&quot;,directory)
   myfunction = mymodule.myfunction
   myclass = mymodule.myclass

Note that the autoreloading mechanism of the Vampire import system 
actually
relies on the module being in the globals namespace if imported at that
level, as it uses that as a means of determining parent/child import
dependencies and thus when it needs to reimport a parent because of a
change in a child.

Thus, although you could say:

   mymodule = vampire.importModule(&quot;mymodule&quot;,directory)
   myfunction = mymodule.myfunction
   myclass = mymodule.myclass
   del mymodule  ### BAD

you would then cause the full abilities of the autoreloading mechanism
to not work properly.

BTW, Vampire doesn't put its loaded modules in sys.modules so if you go
looking there for them, you will not find them.

Graham



</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017908.html">[mod_python] vampire.importModule from module import
	function/class? 
</A></li>
	<LI>Next message: <A HREF="017911.html">[mod_python] Attempting to use mod_python on a site which uses
	digest autentication
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17909">[ date ]</a>
              <a href="thread.html#17909">[ thread ]</a>
              <a href="subject.html#17909">[ subject ]</a>
              <a href="author.html#17909">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
