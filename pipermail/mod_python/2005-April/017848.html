<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Sessions performance and some numbers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Sessions%20performance%20and%20some%20numbers&In-Reply-To=ed967b85878c01daa58b54c10ab82588%40dscpl.com.au">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017849.html">
   <LINK REL="Next"  HREF="017852.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Sessions performance and some numbers</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Nicolas Lehuen</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Sessions%20performance%20and%20some%20numbers&In-Reply-To=ed967b85878c01daa58b54c10ab82588%40dscpl.com.au"
       TITLE="[mod_python] Sessions performance and some numbers">nicolas.lehuen at gmail.com
       </A><BR>
    <I>Thu Apr  7 18:23:46 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="017849.html">[mod_python] Sessions performance and some numbers
</A></li>
        <LI>Next message: <A HREF="017852.html">[mod_python] Sessions performance and some numbers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17848">[ date ]</a>
              <a href="thread.html#17848">[ thread ]</a>
              <a href="subject.html#17848">[ subject ]</a>
              <a href="author.html#17848">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Apr 7, 2005 11:42 PM, Graham Dumpleton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">grahamd at dscpl.com.au</A>&gt; wrote:
&gt;<i> I am going to show my ignorance of how sessions are internally
</I>&gt;<i> implemented
</I>&gt;<i> here, but what happens if you happened to have two distinct instances of
</I>&gt;<i> Apache running on the same machine? Ie., not one instance of Apache
</I>&gt;<i> listening
</I>&gt;<i> on two ports, but two instances each listening on their own ports.
</I>&gt;<i> 
</I>&gt;<i> What I am getting at here is that will both instances of Apache if using
</I>&gt;<i> mod_python, use the same &quot;mp_sess.dbm&quot; file in &quot;/tmp&quot;. Is the way that
</I>&gt;<i> information is stored in the database about sessions mean that each
</I>&gt;<i> instance
</I>&gt;<i> of Apache sees a different set of session information, or because it is
</I>&gt;<i> the
</I>&gt;<i> same database, the session information is effectively shared between the
</I>&gt;<i> two and thus a user could login to a session through one instance of
</I>&gt;<i> Apache and pick up that session automatically through the other.
</I>&gt;<i> 
</I>&gt;<i> Note I am not talking here about prefork and multiple Apache sub
</I>&gt;<i> processes,
</I>&gt;<i> I am talking about multiple instances of Apache as a whole.
</I>&gt;<i> 
</I>&gt;<i> I haven't looked at the FileSession code yet, but what would it do in
</I>&gt;<i> this
</I>&gt;<i> case.
</I>&gt;<i> 
</I>&gt;<i> Anyway, I know that in practice this may be rarely done, but just
</I>&gt;<i> curious.
</I>&gt;<i> 
</I>&gt;<i> Graham
</I>
Currently, DBMSessions are stored in a directory return by tempdir().
Under Windows, this always returns the same temporary directory
(e:\windows\temp on my machine). So both instances will work on the
same DBM file. Now, if the dbm implementation is bsddb, it should pose
no problem. If it is another implementation, you can expect big
problems.

With this implementation of FileSession, a collision is also possible,
but it will happen only of the two Apache instance build the same
session id. As long as no two session have the same session id,
everything will be allright. If a collision occurs, only the two
sessions will suffer, the other ones will still be OK. So I guess
FileSession would handle this situation more gracefully.

Anyway, I think the directory where session data is stored should be
defined by a PythonOption directive, it would be cleaner.

Regards,
Nicolas
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017849.html">[mod_python] Sessions performance and some numbers
</A></li>
	<LI>Next message: <A HREF="017852.html">[mod_python] Sessions performance and some numbers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17848">[ date ]</a>
              <a href="thread.html#17848">[ thread ]</a>
              <a href="subject.html#17848">[ subject ]</a>
              <a href="author.html#17848">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
