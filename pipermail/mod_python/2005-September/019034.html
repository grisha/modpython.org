<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Dupe: Undefined symbol &quot;PyEval_AcquireLock&quot;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Dupe%3A%20Undefined%20symbol%20%22PyEval_AcquireLock%22&In-Reply-To=s3216222.033%40hermes.cwu.edu">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019027.html">
   <LINK REL="Next"  HREF="019035.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Dupe: Undefined symbol &quot;PyEval_AcquireLock&quot;</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Dupe%3A%20Undefined%20symbol%20%22PyEval_AcquireLock%22&In-Reply-To=s3216222.033%40hermes.cwu.edu"
       TITLE="[mod_python] Dupe: Undefined symbol &quot;PyEval_AcquireLock&quot;">grahamd at dscpl.com.au
       </A><BR>
    <I>Wed Sep 14 12:29:52 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="019027.html">[mod_python] Does mod_python support multi-thread?
</A></li>
        <LI>Next message: <A HREF="019035.html">[mod_python] mod_python + MySQLdb + Apache strange behavoir
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19034">[ date ]</a>
              <a href="thread.html#19034">[ thread ]</a>
              <a href="subject.html#19034">[ subject ]</a>
              <a href="author.html#19034">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 10/09/2005, at 3:20 AM, Andrew Musselman wrote:

&gt;<i> Thanks for the hints; it is strange that Makefile for python 2.4 has
</I>&gt;<i> these lines:
</I>&gt;<i>
</I>&gt;<i> .if !defined(WITHOUT_THREADS)
</I>&gt;<i> CONFIGURE_ARGS+=        --with-threads
</I>&gt;<i>
</I>&gt;<i> This seems to indicate that threads should be built in to the version I
</I>&gt;<i> have running.
</I>
Which makefile is this? I can't find anything like this in standard
Python source code distribution, not even a reference to the symbol
called &quot;WITHOUT_THREADS&quot;.

&gt;<i> I do not understand how to use &quot;LIBS=-lc_r ./configure
</I>&gt;<i> --with-threads&quot;..  Is it possible to enter the &quot;LIBS=-lc_r&quot; somewhere 
</I>&gt;<i> in
</I>&gt;<i> the Makefile?
</I>
If you don't understand about running &quot;configure&quot;, I would suggest
you are going to have more problems if you start trying to modify
makefiles to get it to work.

By rights, running &quot;configure&quot; initially to build Python should
correctly find threads on a BSD type system which puts them in the
libc_r library instead of the libc library. Ie., &quot;configure&quot; contains:

     echo &quot;$as_me:$LINENO: checking for pthread_create in -lc_r&quot; &gt;&amp;5
echo $ECHO_N &quot;checking for pthread_create in -lc_r... $ECHO_C&quot; &gt;&amp;6
if test &quot;${ac_cv_lib_c_r_pthread_create+set}&quot; = set; then
   echo $ECHO_N &quot;(cached) $ECHO_C&quot; &gt;&amp;6
else
   ac_check_lib_save_LIBS=$LIBS
LIBS=&quot;-lc_r  $LIBS&quot;

The question is, who installed your Python in the first place. Was it
a prebuilt package which you simply loaded on your box or which was
put there by someone else? BSD packages for Python I have seen in the
past have for some reason deliberately left out threading support.
These were older versions of Python and I believe it was done because
of some funny limit in BSD. Newer versions of Python have been patched
to avoid whatever the problem was, but perhaps packagers haven't learnt
and still build it without threads.

If it was done by you, you should know enough about &quot;configure&quot;. If
not, you perhaps want to start finding out about what it is. Start
by trying to install Python from source code yourself by following
its instructions.

Graham

</PRE>




































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019027.html">[mod_python] Does mod_python support multi-thread?
</A></li>
	<LI>Next message: <A HREF="019035.html">[mod_python] mod_python + MySQLdb + Apache strange behavoir
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19034">[ date ]</a>
              <a href="thread.html#19034">[ thread ]</a>
              <a href="subject.html#19034">[ subject ]</a>
              <a href="author.html#19034">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
