<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] glibc failure with mod_python 3.1.4 &amp; Apache 2
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20glibc%20failure%20with%20mod_python%203.1.4%20%26%20Apache%202&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019139.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] glibc failure with mod_python 3.1.4 &amp; Apache 2</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Earle Ady</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20glibc%20failure%20with%20mod_python%203.1.4%20%26%20Apache%202&In-Reply-To="
       TITLE="[mod_python] glibc failure with mod_python 3.1.4 &amp; Apache 2">earle.ady at gmail.com
       </A><BR>
    <I>Thu Sep 29 16:58:57 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="019139.html">[mod_python] Strange HTTP Response
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19140">[ date ]</a>
              <a href="thread.html#19140">[ thread ]</a>
              <a href="subject.html#19140">[ subject ]</a>
              <a href="author.html#19140">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
After some continued use of mod_python with Apache, in a pure PSP
environment, I have stumbled on an occasional error, which appears
to happen at inconsistent times in inconsistent places.  I am unable
to produce this when trying.

When the problem occurs, some of the Apache threads fail to respond,
while others still work when accessing the same page which was the
last to be accessed before the crash happens.

 From the log it appears the content of the PSP it's attempting to  
use is
becoming corrupted or lost in memory.

Has anyone else experienced this type of behavoir?

I am running mod_python 3.1.4 &amp; Apache 2-current under Linux.

Apache Logs as follows:

*** glibc detected *** double free or corruption (!prev): 0x09292190 ***
[Thu Sep 29 16:42:20 2005] [notice] child pid 13745 exit signal  
Aborted (6)
*** glibc detected *** double free or corruption (!prev): 0x092a7e70 ***
*** glibc detected *** double free or corruption (!prev): 0x091ef918 ***
*** glibc detected *** double free or corruption (!prev): 0x09253568 ***
[Thu Sep 29 16:42:20 2005] [error] [client 68.34.232.186]  
PythonHandler mod_python.psp: Traceback (most recent call last):,  
referer: <A HREF="http://www.bountynetwork.com/login.psp">http://www.bountynetwork.com/login.psp</A>
[Thu Sep 29 16:42:20 2005] [error] [client 68.34.232.186]  
PythonHandler mod_python.psp:   File &quot;/usr/lib/python2.3/site- 
packages/mod_python/apache.py&quot;, line 299, in HandlerDispatch\n     
result = object(req), referer: <A HREF="http://www.bountynetwork.com/login.psp">http://www.bountynetwork.com/login.psp</A>
[Thu Sep 29 16:42:20 2005] [error] [client 68.34.232.186]  
PythonHandler mod_python.psp:   File &quot;/usr/lib/python2.3/site- 
packages/mod_python/psp.py&quot;, line 296, in handler\n    p = PSP(req),  
referer: <A HREF="http://www.bountynetwork.com/login.psp">http://www.bountynetwork.com/login.psp</A>
[Thu Sep 29 16:42:20 2005] [error] [client 68.34.232.186]  
PythonHandler mod_python.psp:   File &quot;/usr/lib/python2.3/site- 
packages/mod_python/psp.py&quot;, line 111, in __init__\n     
self.load_from_file(), referer: <A HREF="http://www.bountynetwork.com/login.psp">http://www.bountynetwork.com/login.psp</A>
[Thu Sep 29 16:42:20 2005] [error] [client 68.34.232.186]  
PythonHandler mod_python.psp:   File &quot;/usr/lib/python2.3/site- 
packages/mod_python/psp.py&quot;, line 177, in load_from_file\n    code =  
compile(source, filename, &quot;exec&quot;), referer: http:// 
www.bountynetwork.com/login.psp
[Thu Sep 29 16:42:20 2005] [error] [client 68.34.232.186]  
PythonHandler mod_python.psp: TypeError: compile() expected string  
without null bytes, referer: <A HREF="http://www.bountynetwork.com/login.psp">http://www.bountynetwork.com/login.psp</A>
[Thu Sep 29 16:42:21 2005] [notice] child pid 10826 exit signal  
Aborted (6)
[Thu Sep 29 16:42:21 2005] [notice] child pid 10829 exit signal  
Aborted (6)
[Thu Sep 29 16:42:21 2005] [notice] child pid 11939 exit signal  
Aborted (6)
*** glibc detected *** free(): invalid next size (normal): 0x0925d1e0  
***
*** glibc detected *** double free or corruption (!prev): 0x091fbcd0 ***
[Thu Sep 29 16:42:25 2005] [notice] child pid 10888 exit signal  
Aborted (6)
[Thu Sep 29 16:42:25 2005] [notice] child pid 11094 exit signal  
Aborted (6)
*** glibc detected *** double free or corruption (!prev): 0x091dead0 ***
[Thu Sep 29 16:42:27 2005] [notice] child pid 14413 exit signal  
Aborted (6)
*** glibc detected *** double free or corruption (!prev): 0x091ceb38 ***
[Thu Sep 29 16:42:30 2005] [notice] child pid 14723 exit signal  
Aborted (6)

etc.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019139.html">[mod_python] Strange HTTP Response
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19140">[ date ]</a>
              <a href="thread.html#19140">[ thread ]</a>
              <a href="subject.html#19140">[ subject ]</a>
              <a href="author.html#19140">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
