<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Using session management?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Using%20session%20management%3F&In-Reply-To=432A1E46.3080809%40work-at.co.jp">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019086.html">
   <LINK REL="Next"  HREF="019088.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Using session management?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Jim Gallacher</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Using%20session%20management%3F&In-Reply-To=432A1E46.3080809%40work-at.co.jp"
       TITLE="[mod_python] Using session management?">jg.lists at sympatico.ca
       </A><BR>
    <I>Thu Sep 15 21:45:30 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="019086.html">[mod_python] Using session management?
</A></li>
        <LI>Next message: <A HREF="019088.html">[mod_python] Problems Compiling
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19087">[ date ]</a>
              <a href="thread.html#19087">[ thread ]</a>
              <a href="subject.html#19087">[ subject ]</a>
              <a href="author.html#19087">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Note that when you correct your code you'll likely still raise an 
exception since you have not correctly saved the data in the dictionary. 
  A valid session object will exist but it will not have the 'myVar2' 
key. Either clear the pysid cookie in your browser or modify your code 
to catch the exception.

Also, calling sess.load() is redundant. It is called automatically by 
the Session.Session constructor if there is valid session data in the 
persistent store.

Jim

Jason Stubbs wrote:
&gt;<i> Steve Bergman wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> In my previous message I cut and pasted the wrong snippet.  This is 
</I>&gt;&gt;<i> what I meant:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> from mod_python import Session
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> def main(req):
</I>&gt;&gt;<i>       sess = Session.Session(req)
</I>&gt;&gt;<i>       if sess.is_new():
</I>&gt;&gt;<i>       s = '&lt;html&gt;This is a new session.&lt;/html&gt;'
</I>&gt;&gt;<i>       sess.myVar2 = &quot;I am a session variable.&quot;
</I>&gt;&gt;<i>       sess.save()
</I>&gt;&gt;<i>       return s
</I>&gt;&gt;<i>   else:
</I>&gt;&gt;<i>       sess.load()
</I>&gt;&gt;<i>       s='&lt;html&gt;This is an old session.  myVar2 = ' + sess.myVar2 + 
</I>&gt;&gt;<i> '&lt;/html&gt;'
</I>&gt;&gt;<i>       sess.save()
</I>&gt;&gt;<i>       return s
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &quot;BaseSession is a subclass of dict. Data can be stored and retrieved 
</I>&gt;<i> from the session by using it as a dictionary.&quot; -- docs
</I>&gt;<i> 
</I>&gt;<i> It looks like what you want is:
</I>&gt;<i> 
</I>&gt;<i> -       sess.myVar2 = &quot;I am a session variable.&quot;
</I>&gt;<i> +       sess[&quot;myVar2&quot;] = &quot;I am a session variable.&quot;
</I>&gt;<i> 
</I>&gt;<i> -- 
</I></PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019086.html">[mod_python] Using session management?
</A></li>
	<LI>Next message: <A HREF="019088.html">[mod_python] Problems Compiling
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19087">[ date ]</a>
              <a href="thread.html#19087">[ thread ]</a>
              <a href="subject.html#19087">[ subject ]</a>
              <a href="author.html#19087">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
