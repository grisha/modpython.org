<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] PythonImport: Can someone please draw a diagram for
	this idiot?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20PythonImport%3A%20Can%20someone%20please%20draw%20a%20diagram%20for%0A%09this%20idiot%3F&In-Reply-To=4328D332.7060809%40sympatico.ca">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019065.html">
   <LINK REL="Next"  HREF="019064.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] PythonImport: Can someone please draw a diagram for
	this idiot?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>jamestmcneill-python at yahoo.co.uk</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20PythonImport%3A%20Can%20someone%20please%20draw%20a%20diagram%20for%0A%09this%20idiot%3F&In-Reply-To=4328D332.7060809%40sympatico.ca"
       TITLE="[mod_python] PythonImport: Can someone please draw a diagram for
	this idiot?">jamestmcneill-python at yahoo.co.uk
       </A><BR>
    <I>Thu Sep 15 08:28:14 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="019065.html">[mod_python] PythonImport: Can someone please draw a
	diagramfor	this idiot?
</A></li>
        <LI>Next message: <A HREF="019064.html">[mod_python] PythonImport: Can someone please draw a
	diagramfor	this idiot?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19072">[ date ]</a>
              <a href="thread.html#19072">[ thread ]</a>
              <a href="subject.html#19072">[ subject ]</a>
              <a href="author.html#19072">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Jim,

Thank you, I'm not sure exactly what is different about your example but
I've just tested it and it works fine. Just so the next idiot that comes
along has a little easier time of it than me, here's a diagram of how to
prove PythonImport works under XP:

1) add the location of your import code to the PythonPath, by placing a
file called &lt;something&gt;.pth in your python folder, e.g. 
c:\python23\mpg.pth. Contents for instance:
C:\mod_python

2) put your import code into the folder you have specified above, by
creating a file c:\mod_python\mpg.py:
# mpg.py
import time
f = open(r'C:\mod_python\mpgtest.txt', 'w')
f.write(str(time.time()))
f.close()
foo = 'testing'

3) put a similar section to this in the main part of your Apache config
file (not within any directory or other section, it has to be in the main
part):
PythonInterpreter mpginterpreter
PythonImport mpg mpginterpreter
&lt;Directory &quot;C:\Program Files\Apache Group\Apache2\htdocs\moddy&quot;&gt;
    AddHandler mod_python .py
    PythonHandler mpgtest
    PythonDebug On
&lt;/Directory&gt;

4) finally, in the directory specified in your Apache config file add the
request handler code:
&quot;&quot;&quot; mpgtest.py&quot;&quot;&quot;
from mod_python import apache
import sys
mpglobal = sys.modules['mpg']
def handler(req):
    req.write('Hello world\n')
    req.write(mpglobal.foo)
    return apache.OK


Browse to <A HREF="http://localhost/moddy/mince.py.">http://localhost/moddy/mince.py.</A> You should now find the
compiled mpg.pyc in your c:\mod_python folder, also the test file
mpgtest.txt written at import time.

Apologies to those of you for whom this kid's stuff must be like watching
paint dry. Any mistakes are mine.

Regards,
Jim McNeill

--- Jim Gallacher  wrote:

&gt;<i> Jorey Bump wrote:
</I>&gt;<i> &gt; Jim Gallacher wrote:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;&gt; In answer to my own in question, PythonImport does work and there is 
</I>&gt;<i> &gt;&gt; no bug. Re-reading the docs reveals this small detail which I and 
</I>&gt;<i> &gt;&gt; others may have overlooked - the context for the directive. 
</I>&gt;<i> &gt;&gt; PythonImport only works in the server config context. 
</I>

++++++++++++++++++++++++++++++++++++++++++++++++++
+   If you've got a good excuse - don't use it   +
++++++++++++++++++++++++++++++++++++++++++++++++++)

</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019065.html">[mod_python] PythonImport: Can someone please draw a
	diagramfor	this idiot?
</A></li>
	<LI>Next message: <A HREF="019064.html">[mod_python] PythonImport: Can someone please draw a
	diagramfor	this idiot?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19072">[ date ]</a>
              <a href="thread.html#19072">[ thread ]</a>
              <a href="subject.html#19072">[ subject ]</a>
              <a href="author.html#19072">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
