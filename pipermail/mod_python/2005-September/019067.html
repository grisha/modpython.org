<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] mod_python + MySQLdb + Apache strange behavoir
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python%20%2B%20MySQLdb%20%2B%20Apache%20strange%20behavoir&In-Reply-To=169437ced9788333f95b147fe7e5b984%40dscpl.com.au">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018989.html">
   <LINK REL="Next"  HREF="019070.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] mod_python + MySQLdb + Apache strange behavoir</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Earle Ady</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python%20%2B%20MySQLdb%20%2B%20Apache%20strange%20behavoir&In-Reply-To=169437ced9788333f95b147fe7e5b984%40dscpl.com.au"
       TITLE="[mod_python] mod_python + MySQLdb + Apache strange behavoir">earle.ady at gmail.com
       </A><BR>
    <I>Thu Sep 15 01:06:51 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="018989.html">[mod_python] mod_python + MySQLdb + Apache strange behavoir
</A></li>
        <LI>Next message: <A HREF="019070.html">[mod_python] mod_python + MySQLdb + Apache strange behavoir
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19067">[ date ]</a>
              <a href="thread.html#19067">[ thread ]</a>
              <a href="subject.html#19067">[ subject ]</a>
              <a href="author.html#19067">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Graham,

I managed to self-diagnose and repair this problem.  However, I  
turned up another one, although unrelated.

As for the MySQLdb inconsistencies, varying error messages, etc.  The  
problem was actually quite simple!  I was using  
MySQLdb.cursors.DictCursor as a cursor type and only importing MySQLdb.

I added a simple import for MySQLdb.cursors, and all of my problems  
went away.   This is something I never would have guessed from the  
behavioir and errors of mod_python and MySQLdb linkage, but a lot of  
persistence and a truckload of tenacity managed to dig it up.

It's bizarre that it would work at all, given the fix.   If anyone  
else is having these problems, double check to see what type of  
cursor they are using in MySQLdb, and if they are doing the import  
specifically.  It should have been more clear as using the standard  
cursor never had a problem but I obviously overlooked this for awhile.

On a side note, my exact same setup on a Linux machine, when moved to  
an OSX machine (same versions of everything...), craps out when  
trying to use Sessions when acquiring a mutex lock.  Is this a known  
problem?

Best,
earle.

On Sep 9, 2005, at 4:38 AM, Graham Dumpleton wrote:

&gt;<i>
</I>&gt;<i> On 09/09/2005, at 3:26 PM, Earle Ady wrote:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I seem to be having some strange behavior between mod_python and  
</I>&gt;&gt;<i> MySQLdb under Apache.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I have relatively simple .PSP's that will work one second, and  
</I>&gt;&gt;<i> then fail on a reload.  Sometimes they work, sometimes they  
</I>&gt;&gt;<i> don't.  To make things even more bizarre, if I utilize the same  
</I>&gt;&gt;<i> logic in another .PSP it may work!  I can't seem to narrow down  
</I>&gt;&gt;<i> what this problem is.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I read an article from two years ago about conflicts between PHP  
</I>&gt;&gt;<i> running parallel to mod_python.  I have deactivated the PHP module  
</I>&gt;&gt;<i> loading within Apache, and the
</I>&gt;&gt;<i> problem still persists.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Error messages vary, nothing seems to fix things properly.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Has anyone else had these sorts of problems?
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> There are known problems, but without the error messages from the  
</I>&gt;<i> Apache
</I>&gt;<i> error log file, we would be guessing.
</I>&gt;<i>
</I>&gt;<i> Does the problem occur in PSP code independent of use of MySQLDB?  
</I>&gt;<i> Are you
</I>&gt;<i> mixing use of mod_python.psp and mod_python.publisher and thus are  
</I>&gt;<i> using
</I>&gt;<i> &quot;from mod_python import psp&quot; or &quot;import mod_python.psp&quot; explicitly?
</I>&gt;<i>
</I>&gt;<i> You might try latest beta of mod_python 3.2 as some issues related to
</I>&gt;<i> module importing when using mod_python.publisher and mod_python.psp
</I>&gt;<i> together are addressed.
</I>&gt;<i>
</I>&gt;<i> Graham
</I>&gt;<i>
</I>&gt;<i>
</I>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018989.html">[mod_python] mod_python + MySQLdb + Apache strange behavoir
</A></li>
	<LI>Next message: <A HREF="019070.html">[mod_python] mod_python + MySQLdb + Apache strange behavoir
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19067">[ date ]</a>
              <a href="thread.html#19067">[ thread ]</a>
              <a href="subject.html#19067">[ subject ]</a>
              <a href="author.html#19067">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
