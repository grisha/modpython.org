<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Persistent web-service
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Persistent%20web-service&In-Reply-To=5671A82225F9%40underdog">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019014.html">
   <LINK REL="Next"  HREF="019081.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Persistent web-service</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Persistent%20web-service&In-Reply-To=5671A82225F9%40underdog"
       TITLE="[mod_python] Persistent web-service">grahamd at dscpl.com.au
       </A><BR>
    <I>Wed Sep 14 23:22:11 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="019014.html">[mod_python] Persistent web-service
</A></li>
        <LI>Next message: <A HREF="019081.html">[mod_python] Persistent web-service
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19060">[ date ]</a>
              <a href="thread.html#19060">[ thread ]</a>
              <a href="subject.html#19060">[ subject ]</a>
              <a href="author.html#19060">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Although PythonImport can be used to trigger startup code, the bigger
issue may be which which mode you run Apache in, ie., &quot;prefork&quot;,
&quot;worker&quot; with single process, &quot;worker&quot; with multiple processes etc.

If you use Apache in a mode whereby there are multiple child
subprocesses, you will not have all your preserved state of the service
in the same process. You would therefore still have to have an external
data store holding data which needs to be shared, use shared memory, or
tunnel all requests using some sort of messaging abstraction to a
distinct single process which holds all the state.

This is all made more complicated due to the fact that Apache can
decide to shutdown child subprocess under certain circumstances such
as when a certain number of requests has been handled.

Still using a separate backend service process or framework is still
probably preferable, with the handlers using XML-RPC or some other
messaging system mechanism to communicate with it. You still have the
issue of having to ensure the backend service is started, but then it
also means your backend service isn't really dependent on Apache and
you could use other means to communicate with it. Ie., Apache just
becomes one type of interface.

Graham


On 13/09/2005, at 10:37 AM, Lee Brown wrote:

&gt;<i> Greetings!
</I>&gt;<i>
</I>&gt;<i> The default behavior of mod_python is to create a new python 
</I>&gt;<i> interpreter for
</I>&gt;<i> each Apache vhost.  This interpreter is initialized on server startup 
</I>&gt;<i> and
</I>&gt;<i> persists until server shutdown/restart.  By using mod_python's 
</I>&gt;<i> PythonImport
</I>&gt;<i> statement in your Apache config file, you can have a python module 
</I>&gt;<i> execute
</I>&gt;<i> when the interpreter starts.  Put your startup initialization routines 
</I>&gt;<i> and
</I>&gt;<i> your per-request function calls in this module.
</I>&gt;<i>
</I>&gt;<i> Best Regards,
</I>&gt;<i> Lee E. Brown
</I>&gt;<i> (<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">administrator at leebrown.org</A>)
</I>&gt;<i>
</I>&gt;<i> -----Original Message-----
</I>&gt;<i> From: <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python-bounces at modpython.org</A>
</I>&gt;<i> [mailto:<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python-bounces at modpython.org</A>] On Behalf Of Doru-Catalin 
</I>&gt;<i> Togea
</I>&gt;<i> Sent: Monday, September 12, 2005 10:31 AM
</I>&gt;<i> To: <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython.org</A>
</I>&gt;<i> Subject: [mod_python] Persistent web-service
</I>&gt;<i>
</I>&gt;<i> Hi!
</I>&gt;<i>
</I>&gt;<i> I am not sure wheather I should use the word service or server (or 
</I>&gt;<i> something
</I>&gt;<i> else) in the following, so I will stick to &quot;service&quot;.
</I>&gt;<i>
</I>&gt;<i> I have some C code which I need to call from mod_python in a 
</I>&gt;<i> web-service
</I>&gt;<i> implementation. I need a persistent web-service, meaning either that my
</I>&gt;<i> service is started up when Apache starts, or at the first call made 
</I>&gt;<i> for my
</I>&gt;<i> service. What I need is to have some C-structs initialized and which 
</I>&gt;<i> survive
</I>&gt;<i> calls to my service, until Apache shuts down. If it wasn't for this 
</I>&gt;<i> need of
</I>&gt;<i> persistency I could use some simpler mechanisms like CGI.
</I>&gt;<i>
</I>&gt;<i> To put it another way, I need a CORBA-like server, only based on 
</I>&gt;<i> Apache.
</I>&gt;<i> In a CORBA implementation, the server keeps running and serves 
</I>&gt;<i> requests from
</I>&gt;<i> clients as they arrive, without losing state between calls.
</I>&gt;<i>
</I>&gt;<i> Any suggestions on how to go about this task using Apache and 
</I>&gt;<i> mod_python?
</I>&gt;<i>
</I>&gt;<i> Thanks for helping,
</I>&gt;<i> Catalin
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> -- 
</I>&gt;<i>
</I>&gt;<i>          &lt;&lt;&lt;&lt; ================================== &gt;&gt;&gt;&gt;
</I>&gt;<i>          &lt;&lt;     We are what we repeatedly do.      &gt;&gt;
</I>&gt;<i>          &lt;&lt;  Excellence, therefore, is not an act  &gt;&gt;
</I>&gt;<i>          &lt;&lt;             but a habit.               &gt;&gt;
</I>&gt;<i>          &lt;&lt;&lt;&lt; ================================== &gt;&gt;&gt;&gt;
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019014.html">[mod_python] Persistent web-service
</A></li>
	<LI>Next message: <A HREF="019081.html">[mod_python] Persistent web-service
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19060">[ date ]</a>
              <a href="thread.html#19060">[ thread ]</a>
              <a href="subject.html#19060">[ subject ]</a>
              <a href="author.html#19060">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
