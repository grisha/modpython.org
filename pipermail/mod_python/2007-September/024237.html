<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Profiling mod_python with callables?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Profiling%20mod_python%20with%20callables%3F&In-Reply-To=b11ea23c0709231919s148e0eb8o7fa28340ad0fe916%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024236.html">
   <LINK REL="Next"  HREF="024238.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Profiling mod_python with callables?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Profiling%20mod_python%20with%20callables%3F&In-Reply-To=b11ea23c0709231919s148e0eb8o7fa28340ad0fe916%40mail.gmail.com"
       TITLE="[mod_python] Profiling mod_python with callables?">graham.dumpleton at gmail.com
       </A><BR>
    <I>Sun Sep 23 22:32:21 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="024236.html">[mod_python] Profiling mod_python with callables?
</A></li>
        <LI>Next message: <A HREF="024238.html">[mod_python] Profiling mod_python with callables?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24237">[ date ]</a>
              <a href="thread.html#24237">[ thread ]</a>
              <a href="subject.html#24237">[ subject ]</a>
              <a href="author.html#24237">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Presuming you are actually using mod_python.publisher as the URL
dispatcher, then  instead of using:

  PythonHandler mod_python.publisher

use:

  PythonHandler mymodule

In your 'mymodule.py' then add:

  from mod_python import publisher

  def handler(req):
    return publisher.handler(req)

Once you have that working, then you can wrap the call to
publisher.handler() with what ever you want, including profiling
tools.

Yes, this will also profile publisher's URL dispatch, but it is the
easiest place to insert it without having to do a bit of magic.

Graham

On 24/09/2007, Webb Sprague &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">webb.sprague at gmail.com</A>&gt; wrote:
&gt;<i> Could anyone help me think about the following problem?
</I>&gt;<i>
</I>&gt;<i> I have a handler, call it handler.py, in which I assign callable
</I>&gt;<i> objects to variables, creating pages through the magic of URL mapping.
</I>&gt;<i>  For example:
</I>&gt;<i>
</I>&gt;<i> class Foo(object):
</I>&gt;<i>     def __init__(self, title):
</I>&gt;<i>         self.title = title
</I>&gt;<i>
</I>&gt;<i>     def __call__(self, whatever):
</I>&gt;<i>         print &quot;&lt;title&gt;&quot; + title + &quot;&lt;/title&gt;&quot;
</I>&gt;<i>
</I>&gt;<i> page1 = Foo('Title 1')
</I>&gt;<i> page2 = Foo('Title 2')
</I>&gt;<i>
</I>&gt;<i> You can thus browse <A HREF="http://blah.com/handler/page1">http://blah.com/handler/page1</A> and
</I>&gt;<i> <A HREF="http://blah.com/handler/page2">http://blah.com/handler/page2</A>
</I>&gt;<i>
</I>&gt;<i> I would like to profile everything from this handler page down,
</I>&gt;<i> preferably with a single command like hotshot.profile_everything(...)
</I>&gt;<i> near the top of handler.py.
</I>&gt;<i>
</I>&gt;<i> Can anyone describe how?
</I>&gt;<i>
</I>&gt;<i> Thanks, and let me know if I can submit more information.  I haven't
</I>&gt;<i> included the code because there is just so much of it...
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I></PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024236.html">[mod_python] Profiling mod_python with callables?
</A></li>
	<LI>Next message: <A HREF="024238.html">[mod_python] Profiling mod_python with callables?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24237">[ date ]</a>
              <a href="thread.html#24237">[ thread ]</a>
              <a href="subject.html#24237">[ subject ]</a>
              <a href="author.html#24237">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
