<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] importing egg format libs installed on a custom path
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20importing%20egg%20format%20libs%20installed%20on%20a%20custom%20path&In-Reply-To=1189769667.6041.37.camel%40charon">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024215.html">
   <LINK REL="Next"  HREF="024217.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] importing egg format libs installed on a custom path</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20importing%20egg%20format%20libs%20installed%20on%20a%20custom%20path&In-Reply-To=1189769667.6041.37.camel%40charon"
       TITLE="[mod_python] importing egg format libs installed on a custom path">graham.dumpleton at gmail.com
       </A><BR>
    <I>Fri Sep 14 07:46:36 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="024215.html">[mod_python] importing egg format libs installed on a custom path
</A></li>
        <LI>Next message: <A HREF="024217.html">[mod_python] importing egg format libs installed on a custom path
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24216">[ date ]</a>
              <a href="thread.html#24216">[ thread ]</a>
              <a href="subject.html#24216">[ subject ]</a>
              <a href="author.html#24216">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 14/09/2007, Graham Carlyle &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.carlyle at maplecroft.net</A>&gt; wrote:
&gt;<i> On Fri, 2007-09-14 at 21:23 +1000, Graham Dumpleton wrote:
</I>&gt;<i> &gt; &gt; The only problem is with eggs installed on a path outside site-packages
</I>&gt;<i> &gt; &gt; that I'm pointing to with PythonPath. Seems I need to reference these
</I>&gt;<i> &gt; &gt; sort of eggs explicitly on PythonPath to make them importable from the
</I>&gt;<i> &gt; &gt; modpython handler. If the egg is installed in site-packages then it can
</I>&gt;<i> &gt; &gt; be imported with no problem and no need to add the egg to the
</I>&gt;<i> &gt; &gt; PythonPath.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Set PYTHONPATH in the envvars file as well. That way it will be
</I>&gt;<i> &gt; present when Python first starts up and eggs will be activated
</I>&gt;<i> &gt; properly (I think).
</I>&gt;<i>
</I>&gt;<i> But then won't the eggs be available to all the modpython handlers? I
</I>&gt;<i> wanted to have independence between the libraries used by different
</I>&gt;<i> modpython handlers. So say I have an application that relies on version
</I>&gt;<i> X of a library and another app that uses version Y of the same library.
</I>&gt;<i> So each handler has a different PythonPath pointing to a different,
</I>&gt;<i> potentially conflicting set of python modules, with some of these served
</I>&gt;<i> by python eggs.
</I>
Then you need to use 'workingenv' or similar and trigger activation yourself.

Ie., do something like as described at the end of:

  <A HREF="http://docs.pythonweb.org/pages/viewpage.action?pageId=5439610">http://docs.pythonweb.org/pages/viewpage.action?pageId=5439610</A>

but adapt it to mod_python by putting it in a distinct Python code
file for each interpreter instance and using PythonImport to trigger
respective code files for each interpreter instance.

For example, if using mod_python 3.3.1, use:

  PythonImport /some/path/interp1.py interp1
  PythonImport /some/path/interp2.py interp2

At start of each .py file, set sys.path appropriately and then
activate working env.

Note though that using different versions of Python eggs, or any
module/package, can be dangerous if they contain a C extension module,
as an extension module is loaded only once per process and first to
load will win. This can result in Python wrappers for latter versions
not matching the inner C extension module resulting in errors or
crashes. Only choice to avoid that would be to use mod_wsgi daemon
mode or mod_fastcgi, presuming your application is a WSGI application
and you aren't using mod_python specific APIs.

Graham
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024215.html">[mod_python] importing egg format libs installed on a custom path
</A></li>
	<LI>Next message: <A HREF="024217.html">[mod_python] importing egg format libs installed on a custom path
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24216">[ date ]</a>
              <a href="thread.html#24216">[ thread ]</a>
              <a href="subject.html#24216">[ subject ]</a>
              <a href="author.html#24216">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
