<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Session-related hang
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Session-related%20hang&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024163.html">
   <LINK REL="Next"  HREF="024161.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Session-related hang</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Boris Du&#353;ek</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Session-related%20hang&In-Reply-To="
       TITLE="[mod_python] Session-related hang">boris.dusek at gmail.com
       </A><BR>
    <I>Tue Aug 28 22:26:18 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="024163.html">[mod_python] Headers not being sent when input/output is over a
	certain size
</A></li>
        <LI>Next message: <A HREF="024161.html">[mod_python] Session-related hang
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24159">[ date ]</a>
              <a href="thread.html#24159">[ thread ]</a>
              <a href="subject.html#24159">[ subject ]</a>
              <a href="author.html#24159">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I am using Apache 2.2.3, mod_python 2.3.8. I experience a hang that is
related to Session.
I have such a class:

file nanosession.py:
class NanoSession(Session.DbmSession):
    def __init__(self, req):
        logging.debug(&quot;In NanoSession.__init__&quot;)
        logging.debug(&quot;Calling DbmSession.__init__&quot;)
        Session.DbmSession.__init__(self, req)

    def ...

in the index.py file, that gets displayed by mod_python.publisher,
there is following code:

def index(req, **vars):
    logging.debug(&quot;Entered index.py/index&quot;)

    logging.debug(&quot;Reloading module 1&quot;)
    reload(module1)

    logging.debug(&quot;Reloading module nanosession&quot;)
    reload(nanosession)

    logging.debug(&quot;Reloading module 2&quot;)
    reload(module2)

    logging.debug(&quot;Generating page content&quot;)
    content = generate_content(...)


When I hit for the index.py page, it was working for the first time. I
am not really sure what I have been doing then, probably just surfing
the other pages on the same site. And then suddenly, from then on,
when I wanted to display some page, it took forever (I mean not long,
I mean it did not display, Firefox displaying &quot;Waiting for ...&quot;,
netcat displaying no output available). Then I asked a friend at a
different computer (with a different IP) to try to access the same
webpage - he could access it, and it displayed immediately. However,
then he hit the reload button in his browser, and he was immediately
from then on experiencing the same &quot;never loads&quot; behavior for any
webpage that uses sessions.

The logging output from the above code shows that it hangs on
DbmSession.__init__:

DEBUG:root:Entered index.py/index
DEBUG:root:Reloading module webpage
DEBUG:root:Reloading module webpage
DEBUG:root:Reloading module webpage
DEBUG:root:Creating session
DEBUG:root:nanosession.py/NanoSession.__init__
DEBUG:root:calling DbnSession.__init__
DEBUG:root:Entered index.py/index
DEBUG:root:Reloading module webpage
DEBUG:root:Reloading module webpage
DEBUG:root:Reloading module webpage
DEBUG:root:Creating session
DEBUG:root:nanosession.py/NanoSession.__init__
DEBUG:root:calling DbmSession.__init__
...
and so on...

Do you please have any suggestions about possible cause and workarounds?

Thanks,
Boris Du&#353;ek

</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024163.html">[mod_python] Headers not being sent when input/output is over a
	certain size
</A></li>
	<LI>Next message: <A HREF="024161.html">[mod_python] Session-related hang
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24159">[ date ]</a>
              <a href="thread.html#24159">[ thread ]</a>
              <a href="subject.html#24159">[ subject ]</a>
              <a href="author.html#24159">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
