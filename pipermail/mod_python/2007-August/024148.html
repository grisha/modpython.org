<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] How to do file uploads
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20How%20to%20do%20file%20uploads&In-Reply-To=111c9e510708221045xeaf24dcnc65501774841fd38%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024147.html">
   <LINK REL="Next"  HREF="024149.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] How to do file uploads</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20How%20to%20do%20file%20uploads&In-Reply-To=111c9e510708221045xeaf24dcnc65501774841fd38%40mail.gmail.com"
       TITLE="[mod_python] How to do file uploads">graham.dumpleton at gmail.com
       </A><BR>
    <I>Wed Aug 22 18:24:54 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="024147.html">[mod_python] How to do file uploads
</A></li>
        <LI>Next message: <A HREF="024149.html">[mod_python] Re: Curious error with Session Variables
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24148">[ date ]</a>
              <a href="thread.html#24148">[ thread ]</a>
              <a href="subject.html#24148">[ subject ]</a>
              <a href="author.html#24148">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 23/08/07, Jonathan Frankel &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">wikiterra at gmail.com</A>&gt; wrote:
&gt;<i> Ahh, okay. Am I correct in thinking, then, that calling &quot;req.form&quot;
</I>&gt;<i> instantiates a FieldStorage object? Namely, making &quot;form,&quot; the
</I>&gt;<i> FieldStorage object, a new attribute of req? Or does &quot;req.form&quot;
</I>&gt;<i> already exist as soon as mod_python hands req off to one of my own
</I>&gt;<i> functions?
</I>
As I said previously, req.form is only automatically created when
using publisher. Ie., when you have PythonHandler set to
mod_python.publisher. It is a feature of that high level handler that
it does this. If you are implementing your own low level handler it
will not be done, nor will you have the feature of form fields being
able to be passed as distinct arguments to your handler.

Research the mod_python documentation to satisfy yourself what the
distinction is between basic low level handler and high level
publisher handler. Then you may not be so confused.

&gt;<i> Also, what is the preferred, or better way, to access form data? Is it
</I>&gt;<i> always more &quot;efficient&quot; or &quot;secure&quot; to use the FieldStorage object, or
</I>&gt;<i> is it just as good to use something like--
</I>&gt;<i>
</I>&gt;<i> def getData(req, field1, field2):
</I>&gt;<i>
</I>&gt;<i> The documentation uses the latter in its examples of reading form
</I>&gt;<i> data, and then goes on to say that FieldStorage can be used to access
</I>&gt;<i> form data...but doesn't actually show any examples of this. And this
</I>&gt;<i> link you sent me--which is very helpful, thank you--doesn't mention
</I>&gt;<i> passing form data to functions as arguments. So...I find this kind of
</I>&gt;<i> confusing.
</I>
Since those pages are part of a complete set of tutorial pages someone
has written for using mod_python, maybe you should go back to the
start and read them all. Note that I found these pages by doing a
Google search. I haven't actually looked at them in a very long time
and am not familiar with them, but the contents on the right side of
the page suggests it covers what you want, although the examples may
be specific to publisher in many cases.

&gt;<i> Finally, about the file upload. The &quot;Big File Upload&quot; link you sent
</I>&gt;<i> says at the top that it buffers the input so that it doesn't &quot;memory
</I>&gt;<i> starve the server if the file is a bit bigger.&quot; Does this mean when
</I>&gt;<i> the buffer function is called, it only gets the specified amount of
</I>&gt;<i> data in each chunk from the client in discrete steps? I ask this
</I>&gt;<i> because I was under the impression that when you make the statement,
</I>&gt;<i> &quot;req.form['file'].file&quot; you've already gotten all of the data from the
</I>&gt;<i> client onto the server.
</I>
I'm not familiar with the example. As I said I pointed it out as it
was one of the first pages that appear in Google search. Other may
have the time to help you understand it, I am a bit busy at the
moment. Sorry.

Graham

&gt;<i> Thanks again,
</I>&gt;<i> Jonathan
</I>&gt;<i>
</I>&gt;<i> On 8/21/07, Graham Dumpleton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt; See:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;   <A HREF="http://webpython.codepoint.net/mod_python_publisher_file_upload">http://webpython.codepoint.net/mod_python_publisher_file_upload</A>
</I>&gt;<i> &gt;   <A HREF="http://webpython.codepoint.net/mod_python_publisher_big_file_upload">http://webpython.codepoint.net/mod_python_publisher_big_file_upload</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; req.form only exists if you are using publisher. If not using
</I>&gt;<i> &gt; publisher, add to start of handler the code:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;   req.form = util.FieldStorage(req)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; to create it.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Graham
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On 22/08/07, Jonathan Frankel &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">wikiterra at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; Hello, I'm just using mod_python for the first time, and I'm trying to
</I>&gt;<i> &gt; &gt; figure out how to do file uploads. However, I'm completely confused
</I>&gt;<i> &gt; &gt; with this. From the documentation it seems to indicate that the best
</I>&gt;<i> &gt; &gt; way to do it is to use the FieldStorage class...except I can't see how
</I>&gt;<i> &gt; &gt; the examples provided have anything to do with file uploads.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; When I search around I find very little, though the popular method
</I>&gt;<i> &gt; &gt; seems to be to use req.form['file'].file to return a file object.
</I>&gt;<i> &gt; &gt; Except I can't find where the documentation says anything about a
</I>&gt;<i> &gt; &gt; &quot;form&quot; attribute in req. Furthermore, I see people saying that it's
</I>&gt;<i> &gt; &gt; best to pass the data from the client through an input filter, which
</I>&gt;<i> &gt; &gt; sounds good and I kind of sort of get it, but don't know how to
</I>&gt;<i> &gt; &gt; implement it and can't find any examples.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Can anyone provide me with an example that allows a client to upload a
</I>&gt;<i> &gt; &gt; file, and limits it to a certain size? I really think that this sort
</I>&gt;<i> &gt; &gt; of thing should be provided as an example. If I get this working, I'll
</I>&gt;<i> &gt; &gt; gladly donate my code to put up on the examples page.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Thanks in advance,
</I>&gt;<i> &gt; &gt; Jonathan
</I>&gt;<i> &gt; &gt; _______________________________________________
</I>&gt;<i> &gt; &gt; Mod_python mailing list
</I>&gt;<i> &gt; &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> &gt; &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt;
</I>&gt;<i>
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024147.html">[mod_python] How to do file uploads
</A></li>
	<LI>Next message: <A HREF="024149.html">[mod_python] Re: Curious error with Session Variables
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24148">[ date ]</a>
              <a href="thread.html#24148">[ thread ]</a>
              <a href="subject.html#24148">[ subject ]</a>
              <a href="author.html#24148">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
