<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Re: Access-Handler based on a Variable
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20Access-Handler%20based%20on%20a%20Variable&In-Reply-To=f96qv6%24kh4%242%40sea.gmane.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024107.html">
   <LINK REL="Next"  HREF="024109.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Re: Access-Handler based on a Variable</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20Access-Handler%20based%20on%20a%20Variable&In-Reply-To=f96qv6%24kh4%242%40sea.gmane.org"
       TITLE="[mod_python] Re: Access-Handler based on a Variable">graham.dumpleton at gmail.com
       </A><BR>
    <I>Mon Aug  6 07:08:31 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="024107.html">[mod_python] Re: Access-Handler based on a Variable
</A></li>
        <LI>Next message: <A HREF="024109.html">[mod_python] unsubscribe
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24108">[ date ]</a>
              <a href="thread.html#24108">[ thread ]</a>
              <a href="subject.html#24108">[ subject ]</a>
              <a href="author.html#24108">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 06/08/07, Christian Klinger &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">cklinger at novareto.de</A>&gt; wrote:
&gt;<i> i try to use an apache as a proxy for the real web-server.
</I>&gt;<i> I want only allow users with a valid key to access the service.
</I>&gt;<i>
</I>&gt;<i> Maybe i can use an Authenhandler or Authzhandler?
</I>
You can't go reading the data of the request in these either. Reading
the content in any of these handlers will consume it and it will not
be passed onto the content handler. In this case the content handler
is the proxy and so the proxy will never see the data and will not be
able to pass it on to the down stream web site.

Reasons why you might be getting a 500 error are that your handler
simply has an error in it and a 500 error page is getting passed back
to the XML-RPC client, but it doesn't display it. Another reason may
be because you have consumed the content and so when the proxy tries
to transfer the data to the downstream server, it finds that the
Content-Length doesn't match what data is available because actual
content length is now zero.

The only way one can interrogate request content and preserve it is to
use an input filter, but this also will be useless to you, as there is
no way in an input filter to return an error response back to the
client if you intend rejecting the request.

The only this I can think of that you could do is implement a content
handler which accepts the request as an XML-RPC request, rejects or
accept it, and then makes a separate XML-RPC call using xmlrpclib
module to the downstream web server and return and response you get.
Ie., you effectively do the proxy rather than having mod_proxy do it.

Graham
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024107.html">[mod_python] Re: Access-Handler based on a Variable
</A></li>
	<LI>Next message: <A HREF="024109.html">[mod_python] unsubscribe
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24108">[ date ]</a>
              <a href="thread.html#24108">[ thread ]</a>
              <a href="subject.html#24108">[ subject ]</a>
              <a href="author.html#24108">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
