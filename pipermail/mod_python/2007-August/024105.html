<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Access-Handler based on a Variable
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Access-Handler%20based%20on%20a%20Variable&In-Reply-To=f96msn%24kh4%241%40sea.gmane.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024104.html">
   <LINK REL="Next"  HREF="024107.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Access-Handler based on a Variable</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Access-Handler%20based%20on%20a%20Variable&In-Reply-To=f96msn%24kh4%241%40sea.gmane.org"
       TITLE="[mod_python] Access-Handler based on a Variable">graham.dumpleton at gmail.com
       </A><BR>
    <I>Mon Aug  6 05:20:14 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="024104.html">[mod_python] Access-Handler based on a Variable
</A></li>
        <LI>Next message: <A HREF="024107.html">[mod_python] Re: Access-Handler based on a Variable
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24105">[ date ]</a>
              <a href="thread.html#24105">[ thread ]</a>
              <a href="subject.html#24105">[ subject ]</a>
              <a href="author.html#24105">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 06/08/07, Christian Klinger &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">cklinger at novareto.de</A>&gt; wrote:
&gt;<i> Hi mod_python Users,
</I>&gt;<i>
</I>&gt;<i> i am new to mod_python so sorry for stupid questions.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I try to write an access handler for an xml-rpc connection.
</I>&gt;<i> The access handler should check if a key in the xml-rpc
</I>&gt;<i> data is correct.
</I>&gt;<i>
</I>&gt;<i> Here my questions:
</I>&gt;<i> Is this possible with mod_python?
</I>&gt;<i> Has anyone an example?
</I>&gt;<i> How can i access the (12) of getResults in the accesshandler.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Christian
</I>&gt;<i>
</I>&gt;<i> Here is my code:
</I>&gt;<i> --------------------------------------------------------
</I>&gt;<i> &lt;VirtualHost *:80&gt;
</I>&gt;<i>      ServerName dummy-host.example.com
</I>&gt;<i>      ServerAlias www.dummy-host.example.com
</I>&gt;<i>
</I>&gt;<i>     &lt;Proxy *&gt;
</I>&gt;<i>        AuthBasicAuthoritative Off
</I>&gt;<i>         AddHandler mod_python .py
</I>&gt;<i>         PythonHandler myscript.py
</I>&gt;<i>         PythonAccessHandler myscript
</I>&gt;<i>         PythonDebug On
</I>&gt;<i>         PythonEnablePdb On
</I>&gt;<i>       &lt;/Proxy&gt;
</I>&gt;<i>
</I>&gt;<i>          RewriteEngine On
</I>&gt;<i>          RewriteRule ^/(.*)
</I>&gt;<i> <A HREF="http://localhost:8080/VirtualHostBase/http/%{SERVER_NAME}:80/extraNet/VirtualHostRoot/$1">http://localhost:8080/VirtualHostBase/http/%{SERVER_NAME}:80/extraNet/VirtualHostRoot/$1</A>
</I>&gt;<i> [L,P]
</I>&gt;<i>
</I>&gt;<i> &lt;/VirtualHost&gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> myscript.py
</I>&gt;<i> def accesshandler(req):
</I>&gt;<i>      apache.log_error(&quot;accesshandler -%s&quot; %req)
</I>&gt;<i>      if key == &quot;OK&quot;
</I>&gt;<i>          return apache.OK
</I>&gt;<i>      return
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> the client:
</I>&gt;<i> portal = xmlrpclib.Server('<A HREF="http://192.168.2.23/extraNet'">http://192.168.2.23/extraNet'</A>)
</I>&gt;<i> print portal
</I>&gt;<i> print portal.getResult(12)
</I>
An access handler or other handler phase prior to the actual content
handler should not as a rule be consuming the request content. If this
is done, it can cause problems when certain features of Apache are
being used.

All I can suggest is not to use an access handler, but instead use a
stacked content handler.

         PythonHandler myscript::prehandler myscript::handler

The prehandler could decode the actual XML-RPC request and check for
any required parameters it may pass. If the required parameter is
missing it should return the appropriate error status, otherwise it
would store the decoded request content as req.data and return
apache.DECLINED as the result. Provide apache.DECLINED is returned as
the result, the real handler would then still be called and it can
access the decode request from the prehandler as req.data.

Graham
</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024104.html">[mod_python] Access-Handler based on a Variable
</A></li>
	<LI>Next message: <A HREF="024107.html">[mod_python] Re: Access-Handler based on a Variable
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24105">[ date ]</a>
              <a href="thread.html#24105">[ thread ]</a>
              <a href="subject.html#24105">[ subject ]</a>
              <a href="author.html#24105">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
