<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] How to do file uploads
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20How%20to%20do%20file%20uploads&In-Reply-To=88e286470708211857k1c256951tb2552f6aaa6edaa1%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024146.html">
   <LINK REL="Next"  HREF="024148.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] How to do file uploads</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Jonathan Frankel</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20How%20to%20do%20file%20uploads&In-Reply-To=88e286470708211857k1c256951tb2552f6aaa6edaa1%40mail.gmail.com"
       TITLE="[mod_python] How to do file uploads">wikiterra at gmail.com
       </A><BR>
    <I>Wed Aug 22 13:45:01 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="024146.html">[mod_python] How to do file uploads
</A></li>
        <LI>Next message: <A HREF="024148.html">[mod_python] How to do file uploads
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24147">[ date ]</a>
              <a href="thread.html#24147">[ thread ]</a>
              <a href="subject.html#24147">[ subject ]</a>
              <a href="author.html#24147">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ahh, okay. Am I correct in thinking, then, that calling &quot;req.form&quot;
instantiates a FieldStorage object? Namely, making &quot;form,&quot; the
FieldStorage object, a new attribute of req? Or does &quot;req.form&quot;
already exist as soon as mod_python hands req off to one of my own
functions?

Also, what is the preferred, or better way, to access form data? Is it
always more &quot;efficient&quot; or &quot;secure&quot; to use the FieldStorage object, or
is it just as good to use something like--

def getData(req, field1, field2):

The documentation uses the latter in its examples of reading form
data, and then goes on to say that FieldStorage can be used to access
form data...but doesn't actually show any examples of this. And this
link you sent me--which is very helpful, thank you--doesn't mention
passing form data to functions as arguments. So...I find this kind of
confusing.

Finally, about the file upload. The &quot;Big File Upload&quot; link you sent
says at the top that it buffers the input so that it doesn't &quot;memory
starve the server if the file is a bit bigger.&quot; Does this mean when
the buffer function is called, it only gets the specified amount of
data in each chunk from the client in discrete steps? I ask this
because I was under the impression that when you make the statement,
&quot;req.form['file'].file&quot; you've already gotten all of the data from the
client onto the server.

Thanks again,
Jonathan

On 8/21/07, Graham Dumpleton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>&gt; wrote:
&gt;<i> See:
</I>&gt;<i>
</I>&gt;<i>   <A HREF="http://webpython.codepoint.net/mod_python_publisher_file_upload">http://webpython.codepoint.net/mod_python_publisher_file_upload</A>
</I>&gt;<i>   <A HREF="http://webpython.codepoint.net/mod_python_publisher_big_file_upload">http://webpython.codepoint.net/mod_python_publisher_big_file_upload</A>
</I>&gt;<i>
</I>&gt;<i> req.form only exists if you are using publisher. If not using
</I>&gt;<i> publisher, add to start of handler the code:
</I>&gt;<i>
</I>&gt;<i>   req.form = util.FieldStorage(req)
</I>&gt;<i>
</I>&gt;<i> to create it.
</I>&gt;<i>
</I>&gt;<i> Graham
</I>&gt;<i>
</I>&gt;<i> On 22/08/07, Jonathan Frankel &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">wikiterra at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt; Hello, I'm just using mod_python for the first time, and I'm trying to
</I>&gt;<i> &gt; figure out how to do file uploads. However, I'm completely confused
</I>&gt;<i> &gt; with this. From the documentation it seems to indicate that the best
</I>&gt;<i> &gt; way to do it is to use the FieldStorage class...except I can't see how
</I>&gt;<i> &gt; the examples provided have anything to do with file uploads.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; When I search around I find very little, though the popular method
</I>&gt;<i> &gt; seems to be to use req.form['file'].file to return a file object.
</I>&gt;<i> &gt; Except I can't find where the documentation says anything about a
</I>&gt;<i> &gt; &quot;form&quot; attribute in req. Furthermore, I see people saying that it's
</I>&gt;<i> &gt; best to pass the data from the client through an input filter, which
</I>&gt;<i> &gt; sounds good and I kind of sort of get it, but don't know how to
</I>&gt;<i> &gt; implement it and can't find any examples.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Can anyone provide me with an example that allows a client to upload a
</I>&gt;<i> &gt; file, and limits it to a certain size? I really think that this sort
</I>&gt;<i> &gt; of thing should be provided as an example. If I get this working, I'll
</I>&gt;<i> &gt; gladly donate my code to put up on the examples page.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Thanks in advance,
</I>&gt;<i> &gt; Jonathan
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Mod_python mailing list
</I>&gt;<i> &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i> &gt;
</I>&gt;<i>
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024146.html">[mod_python] How to do file uploads
</A></li>
	<LI>Next message: <A HREF="024148.html">[mod_python] How to do file uploads
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24147">[ date ]</a>
              <a href="thread.html#24147">[ thread ]</a>
              <a href="subject.html#24147">[ subject ]</a>
              <a href="author.html#24147">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
