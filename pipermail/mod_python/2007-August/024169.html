<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] ImportError: reload(): module ... not in sys.modules
	?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20ImportError%3A%20reload%28%29%3A%20module%20...%20not%20in%20sys.modules%0A%09%3F&In-Reply-To=Pine.LNX.4.64.0708290956360.10932%40whisper.web.itd.umich.edu">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024168.html">
   <LINK REL="Next"  HREF="024172.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] ImportError: reload(): module ... not in sys.modules
	?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20ImportError%3A%20reload%28%29%3A%20module%20...%20not%20in%20sys.modules%0A%09%3F&In-Reply-To=Pine.LNX.4.64.0708290956360.10932%40whisper.web.itd.umich.edu"
       TITLE="[mod_python] ImportError: reload(): module ... not in sys.modules
	?">graham.dumpleton at gmail.com
       </A><BR>
    <I>Wed Aug 29 18:22:20 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="024168.html">[mod_python] ImportError: reload(): module ... not in sys.modules ?
</A></li>
        <LI>Next message: <A HREF="024172.html">[mod_python] ImportError: reload(): module ... not in
	sys.modules ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24169">[ date ]</a>
              <a href="thread.html#24169">[ thread ]</a>
              <a href="subject.html#24169">[ subject ]</a>
              <a href="author.html#24169">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Quick fix is to comment out the line with 'reload()' on it.

Beyond that you have two options:

1. Downgrade from mod_python 3.3.1 to 3.2.10.

2. Have the author of the application upgrade to 3.3.1 and have them
fix their code to eliminate use of reload() which will not work with
modules in 3.3.1 managed by mod_python and was never a reliable way in
older versions of mod_python of reloading modules anyway. To assist
them in fixing their code when they move to 3.3.1, point them to the
function 'import_module()' in the documentation:

  <A HREF="http://www.modpython.org/live/current/doc-html/pyapi-apmeth.html">http://www.modpython.org/live/current/doc-html/pyapi-apmeth.html</A>

That function is the correct way in mod_python of managing reloading
of mod_python managed modules.

Graham

On 30/08/2007, Liam Hoekenga &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">liamr at umich.edu</A>&gt; wrote:
&gt;<i> I'm a sysadmin who's part of a group that provides campus-wide web hosting
</I>&gt;<i> at our university.  We're working with a faculty member who would like us
</I>&gt;<i> to host an application he wrote in his departmental web environment and
</I>&gt;<i> we're having issues.  Of course the application &quot;just works&quot; on his
</I>&gt;<i> departmental machine, but when we try it on our box, the most current
</I>&gt;<i> error we're getting is...
</I>&gt;<i>
</I>&gt;<i>         ImportError: reload(): module _mp_a52d922604fbb12687f4374d3c536a1b
</I>&gt;<i>                 not in sys.modules
</I>&gt;<i>
</I>&gt;<i> Their departmental server is  using Apache 2.0.52, Python 2.3.4 and
</I>&gt;<i> mod_python 3.1.3.
</I>&gt;<i>
</I>&gt;<i> We're using Apache 2.2.3, Python 2.5, and mod_python 3.3.1.
</I>&gt;<i>
</I>&gt;<i> I'm not a python programmer and this is my first forray in to mod_python.
</I>&gt;<i> It kind of looks like from the rest of the debugging output that
</I>&gt;<i> _mp_a52d922604fbb12687f4374d3c536a1b is the name of a &quot;file&quot; that
</I>&gt;<i> mod_python has already processed an inserted into a cache.. and that
</I>&gt;<i> perhaps that cache isn't in the python path?  I don't know.  Kinda
</I>&gt;<i> grasping at straws here.
</I>&gt;<i>
</I>&gt;<i> Here's our current mod_python configuration for the directory in question..
</I>&gt;<i>
</I>&gt;<i>      Alias /pharmacy/ /home/pharmacy/Private/html/
</I>&gt;<i>     &lt;IfModule mod_python.c&gt;
</I>&gt;<i>         &lt;Directory /home/pharmacy/Private/html/&gt;
</I>&gt;<i>         AddHandler mod_python .py
</I>&gt;<i>         AllowOverride AuthConfig FileInfo Indexes Limit
</I>&gt;<i>         PythonAutoReload On
</I>&gt;<i>         PythonHandler /home/pharmacy/Private/html/python-program.py
</I>&gt;<i>         PythonDebug On
</I>&gt;<i>         &lt;/Directory&gt;
</I>&gt;<i>      &lt;/IfModule&gt;
</I>&gt;<i>
</I>&gt;<i> If it does look like problems due to differences between the environments
</I>&gt;<i> in which the application was developed and the where we're trying to
</I>&gt;<i> deploy it, I'd be very appreciative for hints at what needs to be changed
</I>&gt;<i> to make it work.  I'm very open to suggestions.
</I>&gt;<i>
</I>&gt;<i> What follows are the excerpts from the apache error logs, and the output
</I>&gt;<i> we see when we access the page with PythonDebug enabled.
</I>&gt;<i>
</I>&gt;<i> Liam
</I>&gt;<i>
</I>&gt;<i> --------------------------------------
</I>&gt;<i>
</I>&gt;<i> Here's the appropriate output from the apache error log...
</I>&gt;<i>
</I>&gt;<i> [Wed Aug 29 10:08:41 2007] [notice] mod_python (pid=6977, interpreter='example.umich.edu'): Importing module '/home/pharmacy/Private/html/python-program.py'
</I>&gt;<i> [Wed Aug 29 10:08:41 2007] [notice] mod_python (pid=6977, interpreter='example.umich.edu'): Importing module '/home/pharmacy/Private/html/tutor.py'
</I>&gt;<i> [Wed Aug 29 10:08:41 2007] [notice] mod_python (pid=6977, interpreter='example.umich.edu'): Importing module '/home/pharmacy/Private/html/lesson.py'
</I>&gt;<i> [Wed Aug 29 10:08:41 2007] [notice] mod_python (pid=6977, interpreter='example.umich.edu'): Importing module '/home/pharmacy/Private/html/tex.py'
</I>&gt;<i> [Wed Aug 29 10:08:45 2007] [error] [client xxx.xxx.xxx.xxx] mod_python (pid=6977, interpreter='example.umich.edu', phase='PythonHandler', handler='/home/pharmacy/Private/html/python-program.py'): Application error, referer: <A HREF="https://example.umich.edu/pharmacy/python-program.py">https://example.umich.edu/pharmacy/python-program.py</A>
</I>&gt;<i> [Wed Aug 29 10:08:45 2007] [error] [client xxx.xxx.xxx.xxx] ServerName: 'example.umich.edu', referer: <A HREF="https://example.umich.edu/pharmacy/python-program.py">https://example.umich.edu/pharmacy/python-program.py</A>
</I>&gt;<i> [Wed Aug 29 10:08:45 2007] [error] [client xxx.xxx.xxx.xxx] DocumentRoot: '/usr/share/apache2/htdocs/default/', referer: <A HREF="https://example.umich.edu/pharmacy/python-program.py">https://example.umich.edu/pharmacy/python-program.py</A>
</I>&gt;<i> [Wed Aug 29 10:08:45 2007] [error] [client xxx.xxx.xxx.xxx] URI: '/pharmacy/python-program.py', referer: <A HREF="https://example.umich.edu/pharmacy/python-program.py">https://example.umich.edu/pharmacy/python-program.py</A>
</I>&gt;<i> [Wed Aug 29 10:08:45 2007] [error] [client xxx.xxx.xxx.xxx] Location: None, referer: <A HREF="https://example.umich.edu/pharmacy/python-program.py">https://example.umich.edu/pharmacy/python-program.py</A>
</I>&gt;<i> [Wed Aug 29 10:08:45 2007] [error] [client xxx.xxx.xxx.xxx] Directory: '/home/pharmacy/Private/html/', referer: <A HREF="https://example.umich.edu/pharmacy/python-program.py">https://example.umich.edu/pharmacy/python-program.py</A>
</I>&gt;<i> [Wed Aug 29 10:08:45 2007] [error] [client xxx.xxx.xxx.xxx] Filename: '/home/pharmacy/Private/html/python-program.py', referer: <A HREF="https://example.umich.edu/pharmacy/python-program.py">https://example.umich.edu/pharmacy/python-program.py</A>
</I>&gt;<i> [Wed Aug 29 10:08:45 2007] [error] [client xxx.xxx.xxx.xxx] PathInfo: '', referer: <A HREF="https://example.umich.edu/pharmacy/python-program.py">https://example.umich.edu/pharmacy/python-program.py</A>
</I>&gt;<i> [Wed Aug 29 10:08:45 2007] [error] [client xxx.xxx.xxx.xxx] Traceback (most recent call last):, referer: <A HREF="https://example.umich.edu/pharmacy/python-program.py">https://example.umich.edu/pharmacy/python-program.py</A>
</I>&gt;<i> [Wed Aug 29 10:08:45 2007] [error] [client xxx.xxx.xxx.xxx]   File &quot;/usr/lib/python2.5/site-packages/mod_python/importer.py&quot;, line 1537, in HandlerDispatch\n    default=default_handler, arg=req, silent=hlist.silent), referer: <A HREF="https://example.umich.edu/pharmacy/python-program.py">https://example.umich.edu/pharmacy/python-program.py</A>
</I>&gt;<i> [Wed Aug 29 10:08:45 2007] [error] [client xxx.xxx.xxx.xxx]   File &quot;/usr/lib/python2.5/site-packages/mod_python/importer.py&quot;, line 1229, in _process_target\n    result = _execute_target(config, req, object, arg), referer: <A HREF="https://example.umich.edu/pharmacy/python-program.py">https://example.umich.edu/pharmacy/python-program.py</A>
</I>&gt;<i> [Wed Aug 29 10:08:45 2007] [error] [client xxx.xxx.xxx.xxx]   File &quot;/usr/lib/python2.5/site-packages/mod_python/importer.py&quot;, line 1128, in _execute_target\n    result = object(arg), referer: <A HREF="https://example.umich.edu/pharmacy/python-program.py">https://example.umich.edu/pharmacy/python-program.py</A>
</I>&gt;<i> [Wed Aug 29 10:08:45 2007] [error] [client xxx.xxx.xxx.xxx]   File &quot;/home/pharmacy/Private/html/python-program.py&quot;, line 224, in handler\n    s = coord.initHistory(session, formd), referer: <A HREF="https://example.umich.edu/pharmacy/python-program.py">https://example.umich.edu/pharmacy/python-program.py</A>
</I>&gt;<i> [Wed Aug 29 10:08:45 2007] [error] [client xxx.xxx.xxx.xxx]   File &quot;/home/pharmacy/Private/html/python-program.py&quot;, line 132, in initHistory\n    reload(tutor)\t# Force the current version of tutor module to be used., referer: <A HREF="https://example.umich.edu/pharmacy/python-program.py">https://example.umich.edu/pharmacy/python-program.py</A>
</I>&gt;<i> [Wed Aug 29 10:08:45 2007] [error] [client xxx.xxx.xxx.xxx] ImportError: reload(): module _mp_a52d922604fbb12687f4374d3c536a1b not in sys.modules, referer: <A HREF="https://example.umich.edu/pharmacy/python-program.py">https://example.umich.edu/pharmacy/python-program.py</A>
</I>&gt;<i>
</I>&gt;<i> --------------------------------------
</I>&gt;<i>
</I>&gt;<i> Here's what we get when we access the page with PythonDebug turned on...
</I>&gt;<i>
</I>&gt;<i> ...continuing old session
</I>&gt;<i>
</I>&gt;<i> ...POST reading: uniqname=bjensen&amp;lessonchoice=Minimal&amp;startup=Start
</I>&gt;<i> ...cwd='/'
</I>&gt;<i> ...ls=['lost+found', 'var', '.bash_history', '.authorize', 'afs',  'bin', 'boot', 'dev',
</I>&gt;<i> 'etc', 'home', 'lib', 'mnt', 'proc', 'root',  'sys', 'sbin', 'ticket', 'tmp', 'usr',
</I>&gt;<i> 'opt', 'man']
</I>&gt;<i> MOD_PYTHON ERROR
</I>&gt;<i>
</I>&gt;<i> ProcessId:      22409
</I>&gt;<i> Interpreter:    'example.umich.edu'
</I>&gt;<i>
</I>&gt;<i> ServerName:     'example.umich.edu'
</I>&gt;<i> DocumentRoot:   '/usr/share/apache2/htdocs/default/'
</I>&gt;<i>
</I>&gt;<i> URI:            '/pharmacy/python-program.py'
</I>&gt;<i> Location:       None
</I>&gt;<i> Directory:      '/home/pharmacy/Private/html/'
</I>&gt;<i> Filename:       '/home/pharmacy/Private/html/
</I>&gt;<i> crippen/python-program.py'
</I>&gt;<i> PathInfo:       ''
</I>&gt;<i>
</I>&gt;<i> Phase:          'PythonHandler'
</I>&gt;<i> Handler:        '/home/pharmacy/Private/html/
</I>&gt;<i> crippen/python-program.py'
</I>&gt;<i>
</I>&gt;<i> Traceback (most recent call last):
</I>&gt;<i>
</I>&gt;<i>    File &quot;/usr/lib/python2.5/site-packages/mod_python/importer.py&quot;,  line 1537, in
</I>&gt;<i> HandlerDispatch
</I>&gt;<i>      default=default_handler, arg=req, silent=hlist.silent)
</I>&gt;<i>
</I>&gt;<i>    File &quot;/usr/lib/python2.5/site-packages/mod_python/importer.py&quot;,  line 1229, in
</I>&gt;<i> _process_target
</I>&gt;<i>      result = _execute_target(config, req, object, arg)
</I>&gt;<i>
</I>&gt;<i>    File &quot;/usr/lib/python2.5/site-packages/mod_python/importer.py&quot;,  line 1128, in
</I>&gt;<i> _execute_target
</I>&gt;<i>      result = object(arg)
</I>&gt;<i>
</I>&gt;<i>    File &quot;/home/pharmacy/Private/html python-program.py&quot;,
</I>&gt;<i> line 224, in handler
</I>&gt;<i>      s = coord.initHistory(session, formd)
</I>&gt;<i>
</I>&gt;<i>    File &quot;/home/pharmacy/Private/html python-program.py&quot;,
</I>&gt;<i> line 132, in initHistory
</I>&gt;<i>      reload(tutor)        # Force the current version of tutor module to be  used.
</I>&gt;<i>
</I>&gt;<i> ImportError: reload(): module _mp_a52d922604fbb12687f4374d3c536a1b  not in sys.modules
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> MODULE CACHE DETAILS
</I>&gt;<i>
</I>&gt;<i> Accessed:       Tue Aug 28 17:47:07 2007
</I>&gt;<i> Generation:     4
</I>&gt;<i>
</I>&gt;<i> _mp_036881b8bfdae0dbd53cd31522b8613c {
</I>&gt;<i>    FileName:     '/home/pharmacy/Private/html/ crippen/lesson.py'
</I>&gt;<i>    Instance:     1
</I>&gt;<i>    Generation:   1
</I>&gt;<i>    Modified:     Wed Mar  7 13:53:05 2007
</I>&gt;<i>    Imported:     Tue Aug 28 17:26:23 2007
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> _mp_6e0a86c977aa7b4821de3f2e456eeb4d {
</I>&gt;<i>    FileName:     '/home/pharmacy/Private/html/
</I>&gt;<i> crippen/python-program.py'
</I>&gt;<i>    Instance:     1
</I>&gt;<i>    Generation:   4
</I>&gt;<i>    Modified:     Tue Aug 28 17:26:02 2007
</I>&gt;<i>    Imported:     Tue Aug 28 17:26:23 2007
</I>&gt;<i>    ModulePath:   '/home/pharmacy/Private/html/'
</I>&gt;<i>    Children:     '/home/pharmacy/Private/html/ crippen/tutor.py'
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> _mp_251123f760a2485b75c77026f93acd83 {
</I>&gt;<i>    FileName:     '/home/pharmacy/Private/html/ crippen/tex.py'
</I>&gt;<i>    Instance:     1
</I>&gt;<i>    Generation:   2
</I>&gt;<i>    Modified:     Fri Mar 30 09:39:23 2007
</I>&gt;<i>    Imported:     Tue Aug 28 17:26:23 2007
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> _mp_a52d922604fbb12687f4374d3c536a1b {
</I>&gt;<i>    FileName:     '/home/pharmacy/Private/html/ crippen/tutor.py'
</I>&gt;<i>    Instance:     1
</I>&gt;<i>    Generation:   3
</I>&gt;<i>    Modified:     Tue Aug 21 15:16:35 2007
</I>&gt;<i>    Imported:     Tue Aug 28 17:26:23 2007
</I>&gt;<i>    Children:     '/home/pharmacy/Private/html/ crippen/lesson.py',
</I>&gt;<i>                  '/home/pharmacy/Private/html/ crippen/tex.py'
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I></PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024168.html">[mod_python] ImportError: reload(): module ... not in sys.modules ?
</A></li>
	<LI>Next message: <A HREF="024172.html">[mod_python] ImportError: reload(): module ... not in
	sys.modules ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24169">[ date ]</a>
              <a href="thread.html#24169">[ thread ]</a>
              <a href="subject.html#24169">[ subject ]</a>
              <a href="author.html#24169">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
