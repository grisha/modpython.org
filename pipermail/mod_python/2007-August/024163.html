<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Headers not being sent when input/output is over a
	certain size
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Headers%20not%20being%20sent%20when%20input/output%20is%20over%20a%0A%09certain%20size&In-Reply-To=fb2kr0%24f63%241%40sea.gmane.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024158.html">
   <LINK REL="Next"  HREF="024159.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Headers not being sent when input/output is over a
	certain size</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Headers%20not%20being%20sent%20when%20input/output%20is%20over%20a%0A%09certain%20size&In-Reply-To=fb2kr0%24f63%241%40sea.gmane.org"
       TITLE="[mod_python] Headers not being sent when input/output is over a
	certain size">graham.dumpleton at gmail.com
       </A><BR>
    <I>Tue Aug 28 23:32:20 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="024158.html">[mod_python] Headers not being sent when input/output is over a
	certain size
</A></li>
        <LI>Next message: <A HREF="024159.html">[mod_python] Session-related hang
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24163">[ date ]</a>
              <a href="thread.html#24163">[ thread ]</a>
              <a href="subject.html#24163">[ subject ]</a>
              <a href="author.html#24163">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 29/08/2007, Sidnei da Silva &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">sidnei at enfoldsystems.com</A>&gt; wrote:
&gt;<i> Hi there,
</I>&gt;<i>
</I>&gt;<i> I'm writing an Output Filter using mod_python and facing an intriguing
</I>&gt;<i> issue.
</I>&gt;<i>
</I>&gt;<i> When my input/output is over a certain size, the Content-Type/Content-Length
</I>&gt;<i> headers are not set. Anything below that size works fine.
</I>&gt;<i>
</I>&gt;<i> I'm using mod_python 3.3.1 with Apache 2.2.4 on both Windows and Linux with
</I>&gt;<i> the same behaviour.
</I>&gt;<i>
</I>&gt;<i> The input size is roughly 7.5Kb and the generated output is roughly 13.5Kb.
</I>&gt;<i> The only difference between a working request and a non-working request is
</I>&gt;<i> the
</I>&gt;<i> size. It smells to me like there's some buffer flushing going on before I
</I>&gt;<i> set
</I>&gt;<i> Content-Length/Content-Type.
</I>&gt;<i>
</I>&gt;<i> Is this a known-issue? If not, how can I help diagnose it?
</I>
If you expect to be able to set headers in an output filter based on
the complete content being output, you need to buffer up all your data
and write it in one go after you have updated the headers. You cannot
write the data and then update the headers.

Without seeing the code for your output filter, can't comment further
as to what the problem may be.

Graham
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024158.html">[mod_python] Headers not being sent when input/output is over a
	certain size
</A></li>
	<LI>Next message: <A HREF="024159.html">[mod_python] Session-related hang
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24163">[ date ]</a>
              <a href="thread.html#24163">[ thread ]</a>
              <a href="subject.html#24163">[ subject ]</a>
              <a href="author.html#24163">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
