<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] MySQL Session implementation?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20MySQL%20Session%20implementation%3F&In-Reply-To=c298f2d70606201237o5fd83bd5l96616b03411c4cb0%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021534.html">
   <LINK REL="Next"  HREF="021536.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] MySQL Session implementation?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Mike Looijmans</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20MySQL%20Session%20implementation%3F&In-Reply-To=c298f2d70606201237o5fd83bd5l96616b03411c4cb0%40mail.gmail.com"
       TITLE="[mod_python] MySQL Session implementation?">nlv11281 at natlab.research.philips.com
       </A><BR>
    <I>Mon Jul  3 06:53:47 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021534.html">[mod_python] apache.DECLINED not working as expected
</A></li>
        <LI>Next message: <A HREF="021536.html">[mod_python] mod_python + dbus ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21535">[ date ]</a>
              <a href="thread.html#21535">[ thread ]</a>
              <a href="subject.html#21535">[ subject ]</a>
              <a href="author.html#21535">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> One important thing not to overlook if you are going to implement a
</I>&gt;<i> MySQLSession class is database connection pooling.
</I>
In the particalur case of MySQL, the need may not be that high.

I did some benchmarking around 2002 with the MySQL versions of that time 
(somewhere around 4.0), and could not prove the pooled version to be any 
faster than the non-pooled. Most of the time was spent in other parts of 
the request handling, setting up the database connection to MySQL 
appeared to be neglegible.

Note that this behaviour is specific to MySQL using a UNIX socket on the 
local host. Oracle for example often took a few seconds to set up a 
connection. On a TCP socket, the delay is a bit more. You might consider 
using MySQL replication to allow the DB to run on all the web servers 
locally while still sharing all data between them.

Having said all that, a thread safe DB pool takes only about ten lines 
of Python code to create, so it's a piece of cake.

When you ARE pooling connections, be aware of the following:

- The database will not like thousands of open (but idle) connections. 
Close them if you have too many spare ones.

- Connections may stay open for days. Be sure to do some kind of &quot;ping&quot; 
on a connection when you retrieve it from the pool, or be prepared to 
handle connection-lost errors later on.

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021534.html">[mod_python] apache.DECLINED not working as expected
</A></li>
	<LI>Next message: <A HREF="021536.html">[mod_python] mod_python + dbus ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21535">[ date ]</a>
              <a href="thread.html#21535">[ thread ]</a>
              <a href="subject.html#21535">[ subject ]</a>
              <a href="author.html#21535">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
