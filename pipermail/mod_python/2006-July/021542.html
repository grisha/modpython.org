<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] FieldStorage and POST?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20FieldStorage%20and%20POST%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021541.html">
   <LINK REL="Next"  HREF="021543.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] FieldStorage and POST?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20FieldStorage%20and%20POST%3F&In-Reply-To="
       TITLE="[mod_python] FieldStorage and POST?">grahamd at dscpl.com.au
       </A><BR>
    <I>Tue Jul  4 18:48:24 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021541.html">[mod_python] FieldStorage and POST?
</A></li>
        <LI>Next message: <A HREF="021543.html">[mod_python] 'foo.psp is not a file' 404
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21542">[ date ]</a>
              <a href="thread.html#21542">[ thread ]</a>
              <a href="subject.html#21542">[ subject ]</a>
              <a href="author.html#21542">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please keep followups on the mailing list.

<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">smilelover at centrum.cz</A> wrote ..
&gt;<i> Dne Wed, 05 Jul 2006 00:10:20 +0200 napsal(a) Graham Dumpleton  
</I>&gt;<i> &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">grahamd at dscpl.com.au</A>&gt; n&#195;&#161;sleduj&#195;&#173;c&#195;&#173; zpr&#195;&#161;vu:
</I>&gt;<i> 
</I>&gt;<i> &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">smilelover at centrum.cz</A> wrote ..
</I>&gt;<i> &gt;&gt; Hi,
</I>&gt;<i> &gt;&gt; I can't make FieldStorage instance give me my POST arguments.
</I>&gt;<i> &gt;&gt; When I send my form data through GET, FieldStorage contains them. But
</I>&gt;<i> &gt;&gt; when
</I>&gt;<i> &gt;&gt; I use POST and then do:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; req.write(util.FieldStorage(req).list[0].value)
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Python tells me &quot;list index out of range&quot;
</I>&gt;<i> &gt;&gt; I have googled quite a lot and found bits of information about problems
</I>&gt;<i> &gt;&gt; with POST and FieldStorage, but nothing that could help me figure out
</I>&gt;<i> &gt;&gt; WHERE the POST data are.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Thanks in advance for every hint.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Are you doing this from inside a function published using
</I>&gt;<i> &gt; mod_python.publisher, as opposed to a basic handler? If
</I>&gt;<i> &gt; you are doing this from inside a function published using
</I>&gt;<i> &gt; mod_python.publisher then it will already have consumed
</I>&gt;<i> &gt; the POST content of the request.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Thus, show more complete code for the function this is being
</I>&gt;<i> &gt; done in and show the Apache configuration you are using to
</I>&gt;<i> &gt; trigger that function. Also show what URL you are using and
</I>&gt;<i> &gt; how that relates to the names of your handler files or whether
</I>&gt;<i> &gt; the URL matches to the directory itself.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; If you are using mod_python.publisher, the form parameters
</I>&gt;<i> &gt; are supplied to argument to function of same name. The raw
</I>&gt;<i> &gt; FieldStorage object can also be accessed as req.form, you do not
</I>&gt;<i> &gt; need to create it yourself.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Graham
</I>&gt;<i> 
</I>&gt;<i> Yes, I'm working with publisher. I have a module &quot;admin.py&quot; that contains
</I>&gt;<i> several funcs - it's a small CMS. On one page I choose articles I want
</I>&gt;<i> to  
</I>&gt;<i> delete and submit the form to the following function:
</I>&gt;<i> 
</I>&gt;<i> def delete(req):
</I>&gt;<i> 	sess = Session.Session(req)
</I>&gt;<i> 	if not sess.has_key('login_name'):
</I>&gt;<i> 		util.redirect(req, 'index?unauth=1')
</I>&gt;<i> 	
</I>&gt;<i> 	req.content_type = 'text/html'
</I>&gt;<i> 	req.write(util.FieldStorage(req).list[0].value) # this is a line just
</I>&gt;<i> to  
</I>&gt;<i> find out what's happening
</I>&gt;<i> 	return
</I>&gt;<i> 
</I>&gt;<i> My .htaccess is pretty simple:
</I>&gt;<i> SetHandler mod_python
</I>&gt;<i> PythonHandler mod_python.publisher
</I>&gt;<i> PythonDebug On
</I>&gt;<i> 
</I>&gt;<i> Yes I know arguments are passed thru function argumens, but the count of
</I>&gt;<i> my args is dynamic...should I just use **params?
</I>
If the number of form arguments can vary and not sensible to have default
values of None if a function argument is used, the using '**params' is
generally an acceptable way of doing it.

&gt;<i> Or is it better to do it all through req.form? (I don't see it in the 
</I>&gt;<i> Request object docs thou)
</I>
It is put there by mod_python.publisher handler.

Read:

  <A HREF="http://www.modpython.org/live/current/doc-html/node94.html">http://www.modpython.org/live/current/doc-html/node94.html</A>

  Since a FieldStorage can only be instantiated once per request, one must
  not attempt to instantiate FieldStorage when using the Publisher handler
  and should use Request.form instead.

Graham
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021541.html">[mod_python] FieldStorage and POST?
</A></li>
	<LI>Next message: <A HREF="021543.html">[mod_python] 'foo.psp is not a file' 404
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21542">[ date ]</a>
              <a href="thread.html#21542">[ thread ]</a>
              <a href="subject.html#21542">[ subject ]</a>
              <a href="author.html#21542">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
