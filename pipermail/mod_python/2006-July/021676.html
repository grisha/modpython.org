<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] PSP
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20PSP&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021675.html">
   <LINK REL="Next"  HREF="021677.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] PSP</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20PSP&In-Reply-To="
       TITLE="[mod_python] PSP">grahamd at dscpl.com.au
       </A><BR>
    <I>Thu Jul 27 18:12:49 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021675.html">[mod_python] PSP
</A></li>
        <LI>Next message: <A HREF="021677.html">[mod_python] Background threads in mod_python
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21676">[ date ]</a>
              <a href="thread.html#21676">[ thread ]</a>
              <a href="subject.html#21676">[ subject ]</a>
              <a href="author.html#21676">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Julien Cigar wrote ..
&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i> I'm using PSP as a template engine (with SQLAlchemy and a home-made 
</I>&gt;<i> handler).
</I>&gt;<i> 
</I>&gt;<i> One thing which is _VERY_ annoying in PSP is that if a variable doesn't
</I>&gt;<i> exist in the current global namespace, the script fails with a stack 
</I>&gt;<i> trace ... rather than output a blank for example.
</I>&gt;<i> 
</I>&gt;<i> I had resolved this problem partially with a custom function (a sort of
</I>&gt;<i> templatetag) : <A HREF="http://rafb.net/paste/results/0BqTEk48.html">http://rafb.net/paste/results/0BqTEk48.html</A>
</I>&gt;<i> With this function I could do things like &lt;%= 
</I>&gt;<i> access('invasive.scientific_name.name', globals()) %&gt;, however this 
</I>&gt;<i> doesn't work with SQLAlchemy because the variable doesn't exists in the
</I>&gt;<i> current namespace until it has been accessed (to avoid useless database
</I>&gt;<i> accesses) ...
</I>&gt;<i> 
</I>&gt;<i> I think it will be a good idea to have a sort of access() function in 
</I>&gt;<i> the next mod_python release which output a blank (or ...) if the 
</I>&gt;<i> variable doesn't exist ..
</I>&gt;<i> 
</I>&gt;<i> Does anyone has an elegant solution to resolve this problem (other than
</I>&gt;<i> a &lt;% try: %&gt; .... &lt;% except: %&gt; ... ?
</I>
You could use:

  'y' in globals() and y or ''

or in your case:

  'name' in invasive.scientific_name and invasive.scientific_name.name or ''

Either way it is going to be messy.

In respect of changing PSP, don't think it could be changed to automatically
translate non existent variable references to an empty string as it is being
executed as Python code and not by some higher level translation layer that
could meaningfully generate such an alternate form.

Graham
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021675.html">[mod_python] PSP
</A></li>
	<LI>Next message: <A HREF="021677.html">[mod_python] Background threads in mod_python
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21676">[ date ]</a>
              <a href="thread.html#21676">[ thread ]</a>
              <a href="subject.html#21676">[ subject ]</a>
              <a href="author.html#21676">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
