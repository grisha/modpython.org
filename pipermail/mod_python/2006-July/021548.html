<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] odd behaviour of the md5-module in modpy
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20odd%20behaviour%20of%20the%20md5-module%20in%20modpy&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021547.html">
   <LINK REL="Next"  HREF="021549.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] odd behaviour of the md5-module in modpy</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20odd%20behaviour%20of%20the%20md5-module%20in%20modpy&In-Reply-To="
       TITLE="[mod_python] odd behaviour of the md5-module in modpy">grahamd at dscpl.com.au
       </A><BR>
    <I>Wed Jul  5 18:36:53 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021547.html">[mod_python] 'foo.psp is not a file' 404
</A></li>
        <LI>Next message: <A HREF="021549.html">[mod_python] odd behaviour of the md5-module in modpy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21548">[ date ]</a>
              <a href="thread.html#21548">[ thread ]</a>
              <a href="subject.html#21548">[ subject ]</a>
              <a href="author.html#21548">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Deron Meranda wrote ..
&gt;<i> &gt; Am Mittwoch, 5. Juli 2006 16:19 schrieb Alain Tesio:
</I>&gt;<i> &gt; &gt; I had exactly the same problem with values returned by md5 changing
</I>&gt;<i> &gt; &gt; only from modpython.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; On my debian machine it was caused by the installation of the package
</I>&gt;<i> &gt; &gt; libmhash2:
</I>&gt;<i> 
</I>&gt;<i> It sounds like the culprit may have been found, &lt;<A HREF="http://mhash.sourceforge.net/">http://mhash.sourceforge.net/</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> There is also apparently a Python binding to libmhash,
</I>&gt;<i> &lt;<A HREF="http://labix.org/python-mhash">http://labix.org/python-mhash</A>&gt;.
</I>&gt;<i> Do you know if that might have been installed as well an your affected
</I>&gt;<i> machines?
</I>&gt;<i> Perhaps it actually replaces the Python built-in hashes some way, although
</I>&gt;<i> I still don't know how the mod_python environment would be different.
</I>&gt;<i> 
</I>&gt;<i> It is probably worth reporting this potential &quot;incompatibility&quot; upstream
</I>&gt;<i> to the
</I>&gt;<i> libmhash/python-mhash folks too to see what they may know.
</I>&gt;<i> It's not a good thing when cryptographic functions silently fail.
</I>
There is probably a shared library involved somewhere and they have
chosen names for functions which are the same as some functions
in some other library required by Python for md5 stuff. The libmhash
is probably getting loaded first and because they already exist, the
other libraries functions aren't being used but the wrong ones from
libmhash.

This would be similar to the libexpat version problem where it picks
up the wrong version of expat library loaded by Apache instead of
one compiled into pyexpat. See:

  <A HREF="http://www.dscpl.com.au/articles/modpython-006.html">http://www.dscpl.com.au/articles/modpython-006.html</A>

for that plays out and how it might be similar.

Hope we can sort this out conclusively. For various reasons the new
module importer is currently using md5 hexdigest to construct a
fake but unique (hopefully) module name for loaded modules. This
is used in __name__ attribute of modules. This may be able to be
changed as this carried over from when my module importer was
still storing stuff in sys.modules where using a file pathname with
slashes for module name would cause big problems. In short, the
libmhash problem would cause the new module importer to not work
at all and screw up mod_python big time.

Graham

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021547.html">[mod_python] 'foo.psp is not a file' 404
</A></li>
	<LI>Next message: <A HREF="021549.html">[mod_python] odd behaviour of the md5-module in modpy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21548">[ date ]</a>
              <a href="thread.html#21548">[ thread ]</a>
              <a href="subject.html#21548">[ subject ]</a>
              <a href="author.html#21548">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
