<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] mod_python + dbus ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python%20%2B%20dbus%20%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021538.html">
   <LINK REL="Next"  HREF="021540.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] mod_python + dbus ?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python%20%2B%20dbus%20%3F&In-Reply-To="
       TITLE="[mod_python] mod_python + dbus ?">grahamd at dscpl.com.au
       </A><BR>
    <I>Mon Jul  3 20:20:49 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021538.html">[mod_python] mod_python + dbus ?
</A></li>
        <LI>Next message: <A HREF="021540.html">[mod_python] FieldStorage and POST?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21539">[ date ]</a>
              <a href="thread.html#21539">[ thread ]</a>
              <a href="subject.html#21539">[ subject ]</a>
              <a href="author.html#21539">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Panard wrote ..
&gt;<i> Le mardi 04 juillet 2006 00:33, Graham Dumpleton a &#195;&#169;crit&#194;&#160;:
</I>&gt;<i> &gt; Panard wrote ..
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; Hi,
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; I'm tring to use a running dbus service with mod_python. The service
</I>&gt;<i> runs
</I>&gt;<i> &gt; &gt; fine, a python cgi script uses it fine, but a mod_python script doesn't
</I>&gt;<i> &gt; &gt; respond...
</I>&gt;<i> &gt; &gt; .....
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; What version of Apache are you using and what MPM is compiled into it,
</I>&gt;<i> &gt; ie., prefork or worker? What version of mod_python are you using?
</I>&gt;<i> 
</I>&gt;<i> I'm using apache 2.0.58, with worker mpm, and mod_python 3.1.4.
</I>
Using &quot;worker&quot; with mod_python 3.1.4 is a bad idea as there are some
multithreading bugs in that version of mod_python. You should at least
upgrade to mod_python 3.2.8 which fixes them. Better still, wait a few days
and hopefully 3.2.9 will be out, which has other changes related to the
threading and simplified GIL API which might allow dbus to work (but also
may not).

&gt;<i> Thanks for all your comments. I'll try to look at this probably threading
</I>&gt;<i> problem... (but I'm practically sure that dbus python wrappers are thread
</I>&gt;<i> aware, there is a dbus.glib.threads_init() method...)
</I>
As I said, it is a bit more complicated than that ... :-)

&gt;<i> &gt; That said, are you wanting to use dbus because you specifically want
</I>&gt;<i> to
</I>&gt;<i> &gt; talk to an existing application which is already implemented with support
</I>&gt;<i> &gt; for dbus, or were you after a general messaging framework that could
</I>&gt;<i> &gt; be used from Apache/mod_python and you were going to be implementing
</I>&gt;<i> &gt; everything from scratch?
</I>&gt;<i> Well, I'm implementing everything from scratch. But I would like to have
</I>&gt;<i> a 
</I>&gt;<i> message framework quite &quot;standard&quot;.
</I>
Hmmm, I wouldn't have thought that dbus is any more standard than any
other solution. It also still isn't at version 1.0 and they say in documentation
that until 1.0 that the API may vary. That it is targeted at desktop applications
also may not make it as useful as other solutions for general programming
of applications having requirements for distributed processing or remote
monitoring and control.

&gt;<i> The main goal is to be able to manage a running python application on the
</I>&gt;<i> server hosting a mod_python web-page (ask for stopping the application,
</I>&gt;<i> get 
</I>&gt;<i> the list active tasks, ask for doing some new tasks, etc...).
</I>
Have you ever considered simply embedding an XML-RPC server in your
application and making XML-RPC requests from inside of mod_python.
The description of your application doesn't suggest there is going to be
much requests going to the application, so the per connection cost of
using XML-RPC isn't going to make any difference. In other words, doesn't
seem like a connected messaging system solution is going to give you
any additional benefit for the possible extra complexity.

&gt;<i> &gt; If you are starting from scratch, I can perhaps suggest another system
</I>&gt;<i> &gt; which is known to work from Apache/mod_python and does cope with
</I>&gt;<i> &gt; all the problems of multiple interpreters and multithreading that it
</I>&gt;<i> &gt; presents and which makes things complicated.
</I>&gt;<i>
</I>&gt;<i> Yes! I'm waiting for your suggestions :)
</I>
Yes it is self promotion, but as I said, I know it is a solution which will
work. The package I was going to suggest was OSE.

  <A HREF="http://ose.sourceforge.net">http://ose.sourceforge.net</A>

Python wrappers documentation at:

  <A HREF="http://ose.sourceforge.net/browse.php?group=python-manual&amp;entry=manual.htm">http://ose.sourceforge.net/browse.php?group=python-manual&amp;entry=manual.htm</A>

Python cookbook recipes.

  <A HREF="http://aspn.activestate.com/ASPN/Cookbook/Python/Recipe/81615">http://aspn.activestate.com/ASPN/Cookbook/Python/Recipe/81615</A>
  <A HREF="http://aspn.activestate.com/ASPN/Cookbook/Python/Recipe/81614">http://aspn.activestate.com/ASPN/Cookbook/Python/Recipe/81614</A>
  <A HREF="http://aspn.activestate.com/ASPN/Cookbook/Python/Recipe/81612">http://aspn.activestate.com/ASPN/Cookbook/Python/Recipe/81612</A>

Example of integration with mod_python:

  <A HREF="http://svn.dscpl.com.au/vampire/trunk/examples/netsvc/">http://svn.dscpl.com.au/vampire/trunk/examples/netsvc/</A>

&gt;<i>From what you describe though, both OSE and dbus are probably overkill,
</I>although OSE would make it relatively simple to do. Use of a simple a
XML-RPC server in your application would possibly be a much simpler
solution.

If you have considered XML-RPC, would be interested to hear why you
think it isn't an adequate solution.

Graham

&gt;<i> Thanks a lot.
</I>&gt;<i> 
</I>&gt;<i> Panard
</I>&gt;<i> -- 
</I>&gt;<i> HomePage: <A HREF="http://dev.inzenet.org/~panard/">http://dev.inzenet.org/~panard/</A>
</I>&gt;<i> Yzis : <A HREF="http://www.yzis.org">http://www.yzis.org</A>
</I>&gt;<i> Qomics : <A HREF="http://dev.inzenet.org/~panard/qomics">http://dev.inzenet.org/~panard/qomics</A>
</I>&gt;<i> Smileys : <A HREF="http://smileys.inzenet.org">http://smileys.inzenet.org</A>
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021538.html">[mod_python] mod_python + dbus ?
</A></li>
	<LI>Next message: <A HREF="021540.html">[mod_python] FieldStorage and POST?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21539">[ date ]</a>
              <a href="thread.html#21539">[ thread ]</a>
              <a href="subject.html#21539">[ subject ]</a>
              <a href="author.html#21539">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
