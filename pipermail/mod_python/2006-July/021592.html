<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] How to use Classes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20How%20to%20use%20Classes&In-Reply-To=a98e5dcd0607150655o5ba02fc2n9db006f6bb45ed86%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021591.html">
   <LINK REL="Next"  HREF="021593.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] How to use Classes</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20How%20to%20use%20Classes&In-Reply-To=a98e5dcd0607150655o5ba02fc2n9db006f6bb45ed86%40mail.gmail.com"
       TITLE="[mod_python] How to use Classes">grahamd at dscpl.com.au
       </A><BR>
    <I>Sat Jul 15 18:13:00 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021591.html">[mod_python] How to use Classes
</A></li>
        <LI>Next message: <A HREF="021593.html">[mod_python] How to use Classes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21592">[ date ]</a>
              <a href="thread.html#21592">[ thread ]</a>
              <a href="subject.html#21592">[ subject ]</a>
              <a href="author.html#21592">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 15/07/2006, at 11:55 PM, Sanjeev Divekar wrote:

&gt;<i> Hi guys
</I>&gt;<i>
</I>&gt;<i> How can i use Classes in mod_python.
</I>&gt;<i> ********************************************************************** 
</I>&gt;<i> ***
</I>&gt;<i> class myclass:
</I>&gt;<i>    def __init__():
</I>&gt;<i>        return &quot;Hello&quot;
</I>&gt;<i>
</I>&gt;<i>    def index(req,para=''):
</I>&gt;<i>        tmpl = psp.PSP(req, filename='a.html')
</I>&gt;<i>        tmpl.run(vars={'para':para})
</I>&gt;<i>        return
</I>&gt;<i>
</I>&gt;<i>    def show_data(req, para):
</I>&gt;<i>        msg = &quot;Your first name is &quot; + para[0]
</I>&gt;<i>        index(req, para=msg)
</I>&gt;<i>        return
</I>&gt;<i> ********************************************************************** 
</I>&gt;<i> ***
</I>&gt;<i> Any good documentation/ebook/sample app on mod_pythong
</I>
Ensuring you are using mod_python 3.2.8 or later, you can rewrite the
above sort of like the following.

class myclass:

    def _index(req,para=''):
        tmpl = psp.PSP(req, filename='a.html')
        tmpl.run(vars={'para':para})

    def __call_(req,para=&quot;&quot;):
        self._index(req,para)

    def show_data(req, para):
        msg = &quot;Your first name is &quot; + para[0]
        self._index(req, para=msg)

   index = myclass()

Now, it is a bit unclear from your code what you actually expected  
to  be called
so to explain briefly.

1. Your code seemed to be tailored to using mod_python.publisher, so you
must be using that in example I present.

2. You must use mod_python 3.2.8 or later as earlier versions can  
complain
if None is returned from function.

3. You must actually create an instance of your class. Here I have  
named the
instance of the class &quot;index&quot; so that that is where the default URL  
will match.

Thus if this was in file &quot;example.py&quot;, the URL 'example.py' would  
invoke the
__call__() method. In other words, the class instance must be a  
callable object.

If the URL is 'example.py/show_data', then the 'show_data()' method  
is called
instead.

4. I couldn't map your originally constructor to anything as not  
clear when
you expected it to be called.

In short, you need to create an instance of the class and once you  
have done
that URLs will magically map to member variables and member functions of
the class instance. If you want something to be hidden, you should  
prefix the
name of it with an underscore. Exception is '__call__()' method which  
is special
and applied when URL is mapped to object instance itself.

Go back and review the mod_python.publisher documentation on the
mod_python web site and see if it makes more sense now.

Graham





</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021591.html">[mod_python] How to use Classes
</A></li>
	<LI>Next message: <A HREF="021593.html">[mod_python] How to use Classes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21592">[ date ]</a>
              <a href="thread.html#21592">[ thread ]</a>
              <a href="subject.html#21592">[ subject ]</a>
              <a href="author.html#21592">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
