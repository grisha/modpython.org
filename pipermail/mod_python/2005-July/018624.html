<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Vampire for module reloading
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Vampire%20for%20module%20reloading&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018623.html">
   <LINK REL="Next"  HREF="018635.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Vampire for module reloading</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Vampire%20for%20module%20reloading&In-Reply-To="
       TITLE="[mod_python] Vampire for module reloading">grahamd at dscpl.com.au
       </A><BR>
    <I>Thu Jul  7 18:50:49 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="018623.html">[mod_python] Articles on module importing.
</A></li>
        <LI>Next message: <A HREF="018635.html">[mod_python] Vampire for module reloading
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18624">[ date ]</a>
              <a href="thread.html#18624">[ thread ]</a>
              <a href="subject.html#18624">[ subject ]</a>
              <a href="author.html#18624">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Gonzalo =?ISO-8859-1?Q?Sainz-Tr=E1paga?= wrote ..

&gt;<i> On Thu, 2005-07-07 at 02:47 -0400, Graham Dumpleton wrote:
</I>&gt;<i> &gt; As someone pointed out already, any local imports of modules which
</I>&gt;<i> &gt; are a part of your web application should not use the &quot;import&quot; statement
</I>&gt;<i> &gt; but should instead explicitly use apache.import_module(). Although
</I>&gt;<i> &gt; they said to replace all uses of &quot;import&quot;, you should only do so for
</I>&gt;<i> your
</I>&gt;<i> &gt; own code. Do not use apache.import_module() for modules which are
</I>&gt;<i> &gt; a part of the standard Python distribution. The apache.import_module()
</I>&gt;<i> &gt; function also doesn't work very well with packages, so avoid using
</I>&gt;<i> &gt; packages for your own code.
</I>&gt;<i> 
</I>&gt;<i> What do you mean by &quot;packages&quot;?
</I>
When I say package, what I am referring to is where Python modules are
structured in a directory where the top level directory has __init__.py in it
denoting to Python that it is actually a directory based package rather
than a file based module.

Ie., module would be a single file of form:

  module.py

and package is where a directory is used and there could be multiple
parts to it:

  package/__init__.py
  package/submodule.py
  package/subpackage/__init__.py

&gt;<i> I am using sqlobject and a few others
</I>&gt;<i> which are installed in my shared hosting directory, inside a &quot;packages&quot;
</I>&gt;<i> file.
</I>
The sqlobject system is structured as a package.

&gt;<i> What I am doing is altering sys.path in a config.py file that is
</I>&gt;<i> imported by all the other files in my application.
</I>
Setting sys.path explicitly from inside Python code files executing under
mod_python is generally not a good idea. At least it could be a problem
in a multithread MPM.

&gt;<i> I will drop this and replace is with import_module() and the
</I>&gt;<i> corresponding path for the files like you recommended, but what do you
</I>&gt;<i> mean by &quot;doesn't work very well&quot;?
</I>
Doesn't work very well, as in don't expect automatic module reloading to
work as you think it should when you use &quot;import_module()&quot; on a package.
Also, if you access submodules or subpackages from a package, you will
end up with redundant imports occuring even though nothing has changed.
There are also various other issues when you get complicated packages.
See just posted article on problems with module importing system:

  <A HREF="http://www.dscpl.com.au/articles.html">http://www.dscpl.com.au/articles.html</A>

Because &quot;sqlobject&quot; is a package, therefore don't use &quot;import_module()&quot;
with it. In this case, sqlobject isn't one of your own and would normally be
in Python site-packages directory. For any externally sourced code like this
stick it in a special directory separate to your own code. This may actually
be what your &quot;packages&quot; directory is already for.

For these externally sourced packages you don't have much choice but to
explicitly set PythonPath directive to define their location and continue to
use the &quot;import&quot; statement.

As for your own code, it is better not to organise it as packages if you want
to be able to use &quot;import_module()&quot; with it.

Anyway, I am sure others will disagree with me on all this. :-)

Graham
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018623.html">[mod_python] Articles on module importing.
</A></li>
	<LI>Next message: <A HREF="018635.html">[mod_python] Vampire for module reloading
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18624">[ date ]</a>
              <a href="thread.html#18624">[ thread ]</a>
              <a href="subject.html#18624">[ subject ]</a>
              <a href="author.html#18624">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
