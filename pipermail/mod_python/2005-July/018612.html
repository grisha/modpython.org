<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Vampire for module reloading
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Vampire%20for%20module%20reloading&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018620.html">
   <LINK REL="Next"  HREF="018621.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Vampire for module reloading</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Vampire%20for%20module%20reloading&In-Reply-To="
       TITLE="[mod_python] Vampire for module reloading">grahamd at dscpl.com.au
       </A><BR>
    <I>Thu Jul  7 02:47:05 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="018620.html">[mod_python] mod python uses
</A></li>
        <LI>Next message: <A HREF="018621.html">[mod_python] Vampire for module reloading
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18612">[ date ]</a>
              <a href="thread.html#18612">[ thread ]</a>
              <a href="subject.html#18612">[ subject ]</a>
              <a href="author.html#18612">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Gonzalo =?ISO-8859-1?Q?Sainz-Tr=E1paga?= wrote ..
&gt;<i>
</I>&gt;<i> I would like to know if I can install Vampire on a shared hosting
</I>&gt;<i> computer to which I don't have root access (and probably just FTP
</I>&gt;<i> access),
</I>
This is generally possible. You would need to set PythonPath explicitly
within your .htaccess files to reference the parent directory of where
Vampire is installed. You should ensure though that your code runs
in its own interpreter namespace just in case someone else were also
to try and use Vampire. Although, using a distinct interpreter is good
practice when using shared hosting regardless of whether you are
using shared hosting.

&gt;<i> and if it's possible to drop-in Vampire's module reloading
</I>&gt;<i> system instead of mod_python's without major rewrites of my code.
</I>
First you need to ask whether it is worth it. Although the standard
module importing system doesn't work as well as it should, unless
your code and the relationship between explicitly imported modules
is complicated, you can probably get away with using what is already
provided with mod_python.

The simplest hack to avoid a restart yet force your files to be reloaded
is simply to touch all your files so that there modification times change.
You just need to ensure that automatic reloading is always enabled.

As someone pointed out already, any local imports of modules which
are a part of your web application should not use the &quot;import&quot; statement
but should instead explicitly use apache.import_module(). Although
they said to replace all uses of &quot;import&quot;, you should only do so for your
own code. Do not use apache.import_module() for modules which are
a part of the standard Python distribution. The apache.import_module()
function also doesn't work very well with packages, so avoid using
packages for your own code.

Note that you should also avoid having the same named Python module
file in multiple locations as apache.import_module() doesn't cope with
that very well. Ie., don't have multiple index.py files for example if using
mod_python.publisher.

You should also avoid setting PythonPath and supply an explicit directory
location to apache.import_module() all the time. ie.,

  module = apache.import_module(name,path=[directory])

This will help to avoid issues in picking up the wrong module if you use
a name which mirrors a standard module name.

There are lots of other issues to contend with, but really depends on
how complicated your code is. Most people don't have that complicated
a system and so the provided mechanism and its problems can be
lived with.

&gt;<i> If this is possible, I would really appreciate some quick pointers and
</I>&gt;<i> directions on how to accomplish this. Basically, some comments on the
</I>&gt;<i> code snippet that appears under &quot;Module Importing System&quot; on Vampire's
</I>&gt;<i> website would be great.
</I>
You are better of using what mod_python provides. When you understand
how module loading works in that and come to understand the problems
in the provided system and how it is affecting you, then you might look at
Vampire again. Even before that, you are probably still better to post here
on the mailing list as to the exact problem you are seeing in case there is
a workaround for it.

Graham
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018620.html">[mod_python] mod python uses
</A></li>
	<LI>Next message: <A HREF="018621.html">[mod_python] Vampire for module reloading
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18612">[ date ]</a>
              <a href="thread.html#18612">[ thread ]</a>
              <a href="subject.html#18612">[ subject ]</a>
              <a href="author.html#18612">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
