<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Sessions in 2.7 [solved]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Sessions%20in%202.7%20%5Bsolved%5D&In-Reply-To=1121128876.2170.77.camel%40localhost">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018656.html">
   <LINK REL="Next"  HREF="018669.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Sessions in 2.7 [solved]</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Gonzalo Sainz-Tr&#225;paga</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Sessions%20in%202.7%20%5Bsolved%5D&In-Reply-To=1121128876.2170.77.camel%40localhost"
       TITLE="[mod_python] Sessions in 2.7 [solved]">gomo at datafull.com
       </A><BR>
    <I>Tue Jul 12 21:17:30 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="018656.html">[mod_python] Sessions in 2.7 [trouble]
</A></li>
        <LI>Next message: <A HREF="018669.html">[mod_python] Templating Systems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18668">[ date ]</a>
              <a href="thread.html#18668">[ thread ]</a>
              <a href="subject.html#18668">[ subject ]</a>
              <a href="author.html#18668">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On Mon, 2005-07-11 at 21:41 -0300, Gonzalo Sainz-Tr&#225;paga wrote:
&gt;<i> Hi, I just realized mod_python 3.x is only available for Apache 2.0.
</I>&gt;<i> Sadly, I realized it by reading:
</I>&gt;<i> ImportError: No module named Session
</I>&gt;<i> In my browser after having uploaded everything.
</I>&gt;<i> 
</I>&gt;<i> So I have quite a problem here. I have to find a (sort of) drop-in
</I>&gt;<i> replacement for 3.x sessions, and i have to do it *fast*. I checked the
</I>&gt;<i> links in the FAQ, and the only one that looks like it could work is PSO.
</I>
Ok, here's how I worked this out (for the record).
First, I googled quite a bit and finally bumped into Myghty, a Python
port of HTML::Mason. Myghty has it's own Session implementation which is
100% syntax compatible with mod_python's. So, I changed my import
statement and everything ran fine in Apache 2.0 (my local server).

Strangely, the remote server (Apache 1.3) didn't allow me to log in. It
turned out it wasn't sending any cookies. After a *lot* of head smashing
I finally realized (with help from Myghty's author) that mod_python 2.7
requires you to explicitely request.send_http_header() on your handlers,
while 3.1 does not. This is not really mentioned in the documentation,
it is just silently removed from the corresponding page in 3.1's docs.
Adding this single line made everything work fine.

So, what did we learn?
-&gt; When in need for compatibility with Apache 1.3 and 2.0, use Myghty's
sessions instead of mod_python's ones, and use
request.send_http_header() in your handlers to avoid strange, seemingly
unexplainable behaviours.

I also modified the mod_python FAQ and added these 2 things.

Thanks to Graham for the quick reply,

-- 
Gonzalo Sainz-Tr&#225;paga (GomoX)
GnuPG Fingerprint: A0AF 3BBF EB93 7EFE 6628  C5A5 F073 9442 6DE4 A497
Public Key: <A HREF="http://pgp.mit.edu:11371/pks/lookup?op=get&amp;search=0x6DE4A497">http://pgp.mit.edu:11371/pks/lookup?op=get&amp;search=0x6DE4A497</A>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
Url : <A HREF="http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20050712/dc589ece/attachment.bin">http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20050712/dc589ece/attachment.bin</A>
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018656.html">[mod_python] Sessions in 2.7 [trouble]
</A></li>
	<LI>Next message: <A HREF="018669.html">[mod_python] Templating Systems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18668">[ date ]</a>
              <a href="thread.html#18668">[ thread ]</a>
              <a href="subject.html#18668">[ subject ]</a>
              <a href="author.html#18668">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
