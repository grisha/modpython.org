<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] mod_python startup error
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python%20startup%20error&In-Reply-To=1121530009.9595.24.camel%40cm61-18-245-172.hkcable.com.hk">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018709.html">
   <LINK REL="Next"  HREF="018712.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] mod_python startup error</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python%20startup%20error&In-Reply-To=1121530009.9595.24.camel%40cm61-18-245-172.hkcable.com.hk"
       TITLE="[mod_python] mod_python startup error">grahamd at dscpl.com.au
       </A><BR>
    <I>Sat Jul 16 20:35:33 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="018709.html">[mod_python] mod_python startup error
</A></li>
        <LI>Next message: <A HREF="018712.html">[mod_python] mod_python startup error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18710">[ date ]</a>
              <a href="thread.html#18710">[ thread ]</a>
              <a href="subject.html#18710">[ subject ]</a>
              <a href="author.html#18710">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>You might then be getting hit by this problem then:

   <A HREF="http://issues.apache.org/jira/browse/MODPYTHON-24">http://issues.apache.org/jira/browse/MODPYTHON-24</A>

Your main.py might have an import error of some form and as a result
the publisher is instead trying to load index.py to find a function
in it called main(). The bug means you see any error in not being
able to find index.py rather than why main.py perhaps failed to load
in the first place.

Suggest that in main.py you do something like the following:

   import sys, traceback
   from mod_python import apache

   try:
     # all your existing code in the module indented

   except:
     
apache.log_error(&quot;exception=%r&quot;%traceback.format_tb(sys.exc_info()[2]))
     raise

If the problem is that main.py is experiencing an import error, you
would now be able to see it.

Alternatively, you might be able to rename main.py to index.py and
access it through appropriate URL. Because it is the index.py file,
it might not try and fall through to the index file and you might see
any import error then.

Graham

On 17/07/2005, at 2:06 AM, Wouter van Marle wrote:

&gt;<i> Graham,
</I>&gt;<i>
</I>&gt;<i> Thanks for the quick replies.
</I>&gt;<i> Your suggestion with a complete path indeed didn't change anything.
</I>&gt;<i> Where/what is that module 'index' by the way? I can not find it.
</I>&gt;<i>
</I>&gt;<i> Directory structure:
</I>&gt;<i> /var/www/html is the server root
</I>&gt;<i> /var/www/html/python contains all the python files
</I>&gt;<i> accessing the file:
</I>&gt;<i> <A HREF="http://localhost/">http://localhost/</A>
</I>&gt;<i> which should call index.html, which contains a redirect
</I>&gt;<i> to /python/main.py/index
</I>&gt;<i>
</I>&gt;<i> Regarding MultiViews: that seems to be enabled (I don't know what it 
</I>&gt;<i> is,
</I>&gt;<i> I just leave it to the default installation values). In 
</I>&gt;<i> commonhttpd.conf
</I>&gt;<i> I have the following:
</I>&gt;<i>
</I>&gt;<i> &lt;Directory /&gt;
</I>&gt;<i>   Options -All -Multiviews
</I>&gt;<i>
</I>&gt;<i> &lt;Directory /var/www/html&gt;
</I>&gt;<i>     Options -Indexes FollowSymLinks MultiViews
</I>&gt;<i>
</I>&gt;<i> Wouter.
</I>&gt;<i>
</I>&gt;<i> On Sat, 2005-07-16 at 22:27 +1000, Graham Dumpleton wrote:
</I>&gt;&gt;<i> Presuming that the location '/python' maps to a physical directory
</I>&gt;&gt;<i> called '/var/www/html/python', try instead using:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    &lt;Directory /var/www/html/python&gt;
</I>&gt;&gt;<i>    SetHandler python-program
</I>&gt;&gt;<i>    PythonHandler mod_python.publisher
</I>&gt;&gt;<i>    &lt;/Directory&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> When &lt;Location&gt; is used, there is no associated physical directory
</I>&gt;&gt;<i> and therefore mod_python can't know what directory to add to the
</I>&gt;&gt;<i> PythonPath (sys.path) for you.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Only problem with this theory as I just realised though is that
</I>&gt;&gt;<i> mod_python.publisher shouldn't be relying on sys.path to load the
</I>&gt;&gt;<i> actual modules. It will instead explicitly provide the directory
</I>&gt;&gt;<i> to apache.import_module(). In other words, it should work okay
</I>&gt;&gt;<i> how you had it.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> What was the URL you were using to access the page? Do you know
</I>&gt;&gt;<i> if &quot;MultiViews&quot; Apache option is enabled or disabled for that
</I>&gt;&gt;<i> directory?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Graham
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On 16/07/2005, at 10:09 PM, Wouter van Marle wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Graham,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Here the relevant details:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> in httpd2.conf one line:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> LoadModule python_module        extramodules/mod_python.so
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> In 16_mod_python.conf:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> &lt;Location /python&gt;
</I>&gt;&gt;&gt;<i>     SetHandler python-program
</I>&gt;&gt;&gt;<i>     PythonHandler mod_python.publisher
</I>&gt;&gt;&gt;<i> &lt;/Location&gt;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> After dinner I'm going to look into this more! This is the current
</I>&gt;&gt;&gt;<i> setup.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Wouter.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> On Sat, 2005-07-16 at 21:41 +1000, Graham Dumpleton wrote:
</I>&gt;&gt;&gt;&gt;<i> Have you specified:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>    PythonHandler mod_python.publisher
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> within a &lt;Directory&gt; directive or in a .htaccess file?
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> If you haven't and you instead put it at global scope or within a
</I>&gt;&gt;&gt;&gt;<i> &lt;Location&gt; directive, you can have such problems because PythonPath
</I>&gt;&gt;&gt;&gt;<i> will not be automatically extended with the name of the directory
</I>&gt;&gt;&gt;&gt;<i> for which PythonHandler is specified.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Alternatively, are you setting PythonPath explicitly in any way?
</I>&gt;&gt;&gt;&gt;<i> Setting PythonPath explicitly can also override the automatic 
</I>&gt;&gt;&gt;&gt;<i> addition
</I>&gt;&gt;&gt;&gt;<i> of the PythonHandler directive to PythonPath and again module will
</I>&gt;&gt;&gt;&gt;<i> not be able to be found.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> You might want to post the snippet of Apache configuration where you
</I>&gt;&gt;&gt;&gt;<i> setup use of mod_python. There is no need to send the whole Apache
</I>&gt;&gt;&gt;&gt;<i> configuration, just the relevant bit, ensuring though you show any
</I>&gt;&gt;&gt;&gt;<i> context it is set within, such as &lt;Location&gt;, &lt;Directory&gt; when it
</I>&gt;&gt;&gt;&gt;<i> is appropriate.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Graham
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> On 16/07/2005, at 9:27 PM, Wouter van Marle wrote:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>  Hi all,
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>  After an upgrade to Mandrake 10.2, mod_python shows the following
</I>&gt;&gt;&gt;&gt;&gt;<i> error:
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>  Mod_python error: &quot;PythonHandler mod_python.publisher&quot;
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Traceback (most recent call last):
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>   File &quot;/usr/lib/python2.4/site-packages/mod_python/apache.py&quot;, 
</I>&gt;&gt;&gt;&gt;&gt;<i> line
</I>&gt;&gt;&gt;&gt;&gt;<i> 299, in HandlerDispatch
</I>&gt;&gt;&gt;&gt;&gt;<i>     result = object(req)
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>   File &quot;/usr/lib/python2.4/site-packages/mod_python/publisher.py&quot;,
</I>&gt;&gt;&gt;&gt;&gt;<i> line 98, in handler
</I>&gt;&gt;&gt;&gt;&gt;<i>     path=[path])
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>   File &quot;/usr/lib/python2.4/site-packages/mod_python/apache.py&quot;, 
</I>&gt;&gt;&gt;&gt;&gt;<i> line
</I>&gt;&gt;&gt;&gt;&gt;<i> 454, in import_module
</I>&gt;&gt;&gt;&gt;&gt;<i>     f, p, d = imp.find_module(parts[i], path)
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> ImportError: No module named index
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> From my address bar I can see that this is before the very first
</I>&gt;&gt;&gt;&gt;&gt;<i> page (an html page that redirects to the python based content and
</I>&gt;&gt;&gt;&gt;&gt;<i> thereby changes the url in the address bar). Any idea what's going
</I>&gt;&gt;&gt;&gt;&gt;<i> wrong here?
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>  The software, from rpm packages:
</I>&gt;&gt;&gt;&gt;&gt;<i>  apache2-2.0.53-9mdk
</I>&gt;&gt;&gt;&gt;&gt;<i>  apache2-mod_python-2.0.53_3.1.4-4mdk
</I>&gt;&gt;&gt;&gt;&gt;<i>  python-base-2.4.1-2mdk
</I>&gt;&gt;&gt;&gt;&gt;<i>  python-2.4.1-2mdk
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>  Wouter. _______________________________________________
</I>&gt;&gt;&gt;&gt;&gt;<i> Mod_python mailing list
</I>&gt;&gt;&gt;&gt;&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;&gt;&gt;&gt;&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018709.html">[mod_python] mod_python startup error
</A></li>
	<LI>Next message: <A HREF="018712.html">[mod_python] mod_python startup error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18710">[ date ]</a>
              <a href="thread.html#18710">[ thread ]</a>
              <a href="subject.html#18710">[ subject ]</a>
              <a href="author.html#18710">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
