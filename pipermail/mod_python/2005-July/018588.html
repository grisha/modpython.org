<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] mod_python claims it cannot find a module
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python%20claims%20it%20cannot%20find%20a%20module&In-Reply-To=42C9B50F.1090603%40ribosome.natur.cuni.cz">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018587.html">
   <LINK REL="Next"  HREF="018590.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] mod_python claims it cannot find a module</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python%20claims%20it%20cannot%20find%20a%20module&In-Reply-To=42C9B50F.1090603%40ribosome.natur.cuni.cz"
       TITLE="[mod_python] mod_python claims it cannot find a module">grahamd at dscpl.com.au
       </A><BR>
    <I>Mon Jul  4 18:43:03 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="018587.html">[mod_python] mod_python claims it cannot find a module
</A></li>
        <LI>Next message: <A HREF="018590.html">[mod_python] mod_python claims it cannot find a module
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18588">[ date ]</a>
              <a href="thread.html#18588">[ thread ]</a>
              <a href="subject.html#18588">[ subject ]</a>
              <a href="author.html#18588">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 05/07/2005, at 8:15 AM, Martin MOKREJ&#352; wrote:

&gt;<i> Graham Dumpleton wrote:
</I>&gt;&gt;<i> Enable mod_python handler inside the context of a &quot;Directory&quot; 
</I>&gt;&gt;<i> directive
</I>&gt;&gt;<i> and not at global scope within Apache configuration file.
</I>&gt;&gt;<i> &lt;Directory /home/mmokrejs/public_html/IRES2&gt;
</I>&gt;&gt;<i> AddHandler mod_python .py
</I>&gt;&gt;<i> PythonHandler mod_python.publisher
</I>&gt;&gt;<i> PythonDebug On
</I>&gt;&gt;<i> &lt;/Directory&gt;
</I>&gt;&gt;<i> If web_settings is in that actual directory, it should then be found.
</I>&gt;<i>
</I>&gt;<i> Well, you are right I have it at the moment in the &quot;global scope&quot;.
</I>&gt;<i> I used to have it under the &quot;Directory&quot; directive. why doesn't that
</I>&gt;<i> approach work?
</I>
If the PythonHandler directive appears at global scope or within the
context of a Location directory, there is no relationship to a physical
directory. When there is a relationship to a physical directory, then
mod_python will add the root directory where PythonHandler is specified
for automatically into the Python module search path.

Having done this, if any publisher module uses the &quot;import&quot; statement
explicitly to import a module where the module is in that root directory
where PythonHandler was specified for, the module will be found okay.

Note that this only applies for child modules in the root directory 
where
PythonHandler directive was specified. If you had publisher modules in
a subdirectory and it used &quot;import&quot; to get to a child module in the sub
directory, it will not work as the subdirectory isn't added to the
Python module search path.

Because of problems with mixing &quot;import&quot; with the mod_python module
loader, you are actually better of using:

   from mod_python import apache
   import os

   directory = os.path.dirname(__file__)

   web_settings = apache.import_module(&quot;web_settings&quot;,path=[directory])

Here you are explicitly telling it which directory to get the module
from and avoid all problems with things not being found in the Python
module search path. You should only use this for loading in your own
modules though, not standard Python modules.

&gt;<i> Could mod_python &quot;overload&quot; the standard error message of import
</I>&gt;<i> and spit something like a reference to a proper description
</I>&gt;<i> with URL? ;-) I mean if it is possible to detect this situation
</I>&gt;<i> at least somehow ...
</I>&gt;<i>
</I>&gt;<i> This is the &quot;DirectoryIndex IRESite_web.py&quot; requirement case:
</I>&gt;<i> IOError: [Errno 2] No such file or directory:  
</I>&gt;<i> '/home/mmokrejs/public_html/IRES2/index.py'
</I>&gt;<i> This is the python PYTHON_PATH problem:
</I>&gt;<i> ImportError: No module named web_settings
</I>&gt;<i>
</I>&gt;<i> The URL was always:
</I>&gt;<i> <A HREF="http://aquarius/~mmokrejs/IRES2/IRESite_web.py?page=all">http://aquarius/~mmokrejs/IRES2/IRESite_web.py?page=all</A>
</I>
I haven't confirmed it, but because of the import error in IRESite_web,
mod_python.publisher would have tried instead to import &quot;index.py&quot; and
find a function in it called IRESite_web(). The bug in mod_python
was that if that then failed, the original import error message wasn't
being raised and instead that for index.py was. Thus, you couldn't see
what the original error was. Thus, you just hit a strange bug which is
giving wrong indication of the problem.

Setting DirectoryIndex will not help in this case as 
mod_python.publisher
ignores it at that point and will look for index.py regardless. The
DirectoryIndex directive is only used by Apache at the point that a
URL maps to the actual directory name.

Graham



</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018587.html">[mod_python] mod_python claims it cannot find a module
</A></li>
	<LI>Next message: <A HREF="018590.html">[mod_python] mod_python claims it cannot find a module
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18588">[ date ]</a>
              <a href="thread.html#18588">[ thread ]</a>
              <a href="subject.html#18588">[ subject ]</a>
              <a href="author.html#18588">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
