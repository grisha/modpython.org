<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Fwd: mod python configuration problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Fwd%3A%20mod%20python%20configuration%20problem&In-Reply-To=22259.1121278313%40www28.gmx.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018684.html">
   <LINK REL="Next"  HREF="018708.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Fwd: mod python configuration problem</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Fwd%3A%20mod%20python%20configuration%20problem&In-Reply-To=22259.1121278313%40www28.gmx.net"
       TITLE="[mod_python] Fwd: mod python configuration problem">grahamd at dscpl.com.au
       </A><BR>
    <I>Wed Jul 13 18:55:34 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="018684.html">[mod_python] Fwd: mod python configuration problem
</A></li>
        <LI>Next message: <A HREF="018708.html">[mod_python] Re: [mod python] Fwd: mod python configuration problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18689">[ date ]</a>
              <a href="thread.html#18689">[ thread ]</a>
              <a href="subject.html#18689">[ subject ]</a>
              <a href="author.html#18689">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 14/07/2005, at 4:11 AM, Alexandre F. Santos wrote:
&gt;<i> Mod_python shows up in the apache configuration (as seen by 
</I>&gt;<i> phpinfo()). I
</I>&gt;<i> asked the admin to do the test recommended in the tutorial to identify
</I>&gt;<i> mod_python and send me the output:
</I>&gt;<i> -------------------
</I>&gt;<i> # python
</I>&gt;<i> Python 2.3.5 (#2, May  4 2005, 08:51:39)
</I>&gt;<i> [GCC 3.3.5 (Debian 1:3.3.5-12)] on linux2
</I>&gt;<i> Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
</I>&gt;&gt;&gt;&gt;<i> import mod_python.psp
</I>&gt;<i> Traceback (most recent call last):
</I>&gt;<i>   File &quot;&lt;stdin&gt;&quot;, line 1, in ?
</I>&gt;<i>   File &quot;/usr/lib/python2.3/site-packages/mod_python/psp.py&quot;, line 20, 
</I>&gt;<i> in ?
</I>&gt;<i>     import apache, Session, util, _psp
</I>&gt;<i>   File &quot;/usr/lib/python2.3/site-packages/mod_python/apache.py&quot;, line 
</I>&gt;<i> 28, in
</I>&gt;<i> ?
</I>&gt;<i>     import _apache
</I>&gt;<i> ImportError: No module named _apache
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;<i> -------------------
</I>&gt;<i>
</I>&gt;<i> So mod_python 3.1.3 seems indeed to be installed and working.
</I>
That only shows that the part of mod_python which lives outside of 
Apache
has been installed. To know for sure that the Apache DSO module for
mod_python has been installed, you need to sight the startup line in
Apache log file for it. Ie., something like:

   [Tue Feb 01 16:08:21 2005] [notice] Apache/2.0.51 (Unix)
     mod_python/3.1.3 Python/2.3 configured -- resuming normal operations

&gt;<i> I created a home/xp/ folder where I put a hello.txt file and verifyed 
</I>&gt;<i> that I
</I>&gt;<i> could access it via the web.
</I>&gt;<i>
</I>&gt;<i> I then created there an .htaccess file:
</I>&gt;<i> AddHandler python-program .py
</I>&gt;<i> PythonHandler mptest
</I>&gt;<i> PythonDebug On
</I>&gt;<i>
</I>&gt;<i> and a mptest.py file:
</I>&gt;&gt;<i> from mod_python import apache
</I>&gt;<i>
</I>&gt;<i> def handler(req):
</I>&gt;<i>     req.content_type = 'text/plain'
</I>&gt;<i>     req.send_http_header()
</I>&gt;<i>     req.write('mptest.py\n')
</I>&gt;<i>     return apache.OK
</I>&gt;<i>
</I>&gt;<i> Going for the /xp/mptest.py file with my browser yielded the following:
</I>&gt;<i> -------------------------
</I>&gt;<i> Internal Server Error
</I>
After having added in the .htaccess file, could you still access the 
&quot;hello.txt&quot;
file or did attempting to access it also yield an internal server error.

If accessing &quot;hello.txt&quot; also yielded an internal server error, it 
could be
options in the .htaccess file. I know the article says:

   If instead of the string &quot;mptest.py&quot; you see the actual source code 
contained
   in the file, or your browser asks you to save the response to a file 
and that
   file contains the source code, the main Apache configuration may not 
be enabled
   so as to allow you to specify Apache handlers in a &quot;.htaccess&quot; file. 
To enable
   this facility, edit your main Apache configuration file and add in an
   appropriate location:

     &lt;Directory /some/directory&gt;
     AllowOverride FileInfo
     &lt;/Directory&gt;

but it may be possible that the lack of the AllowOverride for FileInfo 
could
also perhaps result in an internal server error response. If this is 
the case,
accessing &quot;hello.txt&quot; should yield the error as well and you'll need to 
get
the AllowOverride option enabled for your directory.

&gt;<i> Now of course I don't have access to the server error log, but before I
</I>&gt;<i> contact the admin, could you give me some indications about what could 
</I>&gt;<i> be
</I>&gt;<i> wrong and what would be the best approach to address this issue?
</I>
Since you have PythonDebug set to On, if mod_python was working and it 
was a
problem in your handler, or ability to find the handler, you would have 
got
a stack trace back in the browser instead of the generic 500 error, so 
not
likely a problem there.

Unfortunately this leaves a horrid set of possibilities where even what 
is in
the Apache error log may not help. This is because for certain 500 
errors
internal to mod_python when trying to initially process your request, it
either doesn't log anything at all, or logs it to stderr but doesn't 
flush
it properly meaning that it doesn't appear in the Apache logs until 
Apache is
next shutdown/restarted. Both these cases have been dealt with for the 
next
version of mod_python, but you are going to have to contend with them.

   <A HREF="http://issues.apache.org/jira/browse/MODPYTHON-41">http://issues.apache.org/jira/browse/MODPYTHON-41</A>
   <A HREF="http://issues.apache.org/jira/browse/MODPYTHON-35">http://issues.apache.org/jira/browse/MODPYTHON-35</A>

The cause of these problems tends to be where for some reason the 
version of
the mod_python module loaded into Apache is looking in the wrong place 
for
the Python code files installed into the site-packages directory of the
Python installation, ie., those which the command line test at start was
trying to determine existed. It could simply not be finding the Python 
code
files or finding the wrong version if there are multiple versions of 
Python
installed on the system.

All I can suggest is getting proof from the logs that mod_python is 
loaded.
Ie., that the line above exists in some form. Get any errors messages 
that
look like that they may be from mod_python in the log from the time when
the request was made, or any other strange errors that might have 
appeared
in the log when Apache was next shutdown/restarted.

Graham

</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018684.html">[mod_python] Fwd: mod python configuration problem
</A></li>
	<LI>Next message: <A HREF="018708.html">[mod_python] Re: [mod python] Fwd: mod python configuration problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18689">[ date ]</a>
              <a href="thread.html#18689">[ thread ]</a>
              <a href="subject.html#18689">[ subject ]</a>
              <a href="author.html#18689">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
