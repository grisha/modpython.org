<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Performance Problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Performance%20Problem&In-Reply-To=cd329af805082002431a82181f%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018874.html">
   <LINK REL="Next"  HREF="018876.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Performance Problem</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Sebastjan Trepca</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Performance%20Problem&In-Reply-To=cd329af805082002431a82181f%40mail.gmail.com"
       TITLE="[mod_python] Performance Problem">trepca at gmail.com
       </A><BR>
    <I>Sat Aug 20 06:02:28 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="018874.html">[mod_python] Performance Problem
</A></li>
        <LI>Next message: <A HREF="018876.html">[mod_python] Performance Problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18875">[ date ]</a>
              <a href="thread.html#18875">[ thread ]</a>
              <a href="subject.html#18875">[ subject ]</a>
              <a href="author.html#18875">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ah, sorry about that question. As I understand it means that you
basicaly can set the intepreter that gets copied to all processes that
are spawned, else blank interpreter is used. If your globals doesn't
change this would be quite useful then, da? But not quite for caching.
I'll probably use the combination of mod_python with
MemCache(<A HREF="http://www.danga.com/memcached/">http://www.danga.com/memcached/</A>). Anyone tried that?

Thanks, Sebastjan

On 20/08/05, Sebastjan Trepca &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">trepca at gmail.com</A>&gt; wrote:
&gt;<i> Thanks for reply, I read the docs again and got this on the
</I>&gt;<i> PythonInterpreter directive:
</I>&gt;<i> 
</I>&gt;<i> &quot;This directive can be used to force execution that would normally
</I>&gt;<i> occur in different subinterpreters to run in the same one. When
</I>&gt;<i> specified in the DocumentRoot, it forces the whole server to run in
</I>&gt;<i> one subinterpreter.&quot;
</I>&gt;<i> 
</I>&gt;<i> What does &quot;forces whole server to run in one subinterpreter&quot; then mean?
</I>&gt;<i> 
</I>&gt;<i> Sebastjan
</I>&gt;<i> 
</I>&gt;<i> On 20/08/05, Graham Dumpleton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">grahamd at dscpl.com.au</A>&gt; wrote:
</I>&gt;<i> &gt; Sebastjan Trepca wrote ..
</I>&gt;<i> &gt; &gt; &gt; From: &quot;Graham Dumpleton&quot; &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">grahamd at dscpl.com.au</A>&gt;
</I>&gt;<i> &gt; &gt; &gt; To: Julien &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">jcigar at ulb.ac.be</A>&gt;
</I>&gt;<i> &gt; &gt; &gt; Date: Thu, 18 Aug 2005 18:18:44 -0400
</I>&gt;<i> &gt; &gt; &gt; Subject: Re: [mod_python] Performance Problem
</I>&gt;<i> &gt; &gt; &gt; Julien wrote ..
</I>&gt;<i> &gt; &gt; &gt; &gt; I don't think it's possible (not sure) because mod_python starts many
</I>&gt;<i> &gt; &gt; &gt; &gt; python instances, so mod_python cannot keep python objects ...
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; This is not strictly true.
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; For any particular Python interpreter, that is generally 1 per process,
</I>&gt;<i> &gt; &gt; &gt; the modules once loaded into the interpreter will remain loaded. The
</I>&gt;<i> &gt; &gt; &gt; value of any global data within a specific module is thus retained
</I>&gt;<i> &gt; &gt; &gt; between requests which hit that specific interpreter.
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; Obviously, different interpreters will have their own copy of the data
</I>&gt;<i> &gt; &gt; &gt; value, but at least for the one interpreter, successive requests can
</I>&gt;<i> &gt; &gt; &gt; make use of any cached data. As mentioned by Mike, this cached
</I>&gt;<i> &gt; &gt; &gt; data could be a database connection pool.
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; Graham
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; I use only one interpreter using PythonInterprete option so different
</I>&gt;<i> &gt; &gt; processes have same globals. Are there any performance issues with
</I>&gt;<i> &gt; &gt; this?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; It doesn't matter if you name the interpreter using PythonInterpreter,
</I>&gt;<i> &gt; each process will still has a unique instance of the interpreter with
</I>&gt;<i> &gt; that name, each with its own unique copies of the globals. Different
</I>&gt;<i> &gt; processes can never reference the same globals. Changing a global in
</I>&gt;<i> &gt; one process will not cause a global of the same name in a module to
</I>&gt;<i> &gt; be changed in other processes.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The only time a request handler will see a change made to a global by
</I>&gt;<i> &gt; a different request hander is when the two requests were against the
</I>&gt;<i> &gt; same interpreter within the same process.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Thus a global data value accessed in a module is exactly the same as if
</I>&gt;<i> &gt; you were running a Python script from the command line, there is no
</I>&gt;<i> &gt; additional overhead and no performance issues to worry about.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; If you want to have some special data value which can be accessed by
</I>&gt;<i> &gt; multiple Apache child processes, with each being able to change the
</I>&gt;<i> &gt; data and the change being reflected in all, then you would need to use
</I>&gt;<i> &gt; something like shared memory. This would involve some extra overhead,
</I>&gt;<i> &gt; but it requires you to explicitly code your system to use shared memory
</I>&gt;<i> &gt; and dea with all the locking and contention issues, it isn't how
</I>&gt;<i> &gt; mod_python works normally.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Use of shared memory is an advanced topic and I wouldn't recommend
</I>&gt;<i> &gt; you contemplate it until you understood quiet well how mod_python
</I>&gt;<i> &gt; works.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Graham
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018874.html">[mod_python] Performance Problem
</A></li>
	<LI>Next message: <A HREF="018876.html">[mod_python] Performance Problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18875">[ date ]</a>
              <a href="thread.html#18875">[ thread ]</a>
              <a href="subject.html#18875">[ subject ]</a>
              <a href="author.html#18875">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
