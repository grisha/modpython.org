<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Issues in apache MPM mode
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Issues%20in%20apache%20MPM%20mode&In-Reply-To=c298f2d70508221317673604f2%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018884.html">
   <LINK REL="Next"  HREF="018889.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Issues in apache MPM mode</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>S&#233;bastien Arnaud</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Issues%20in%20apache%20MPM%20mode&In-Reply-To=c298f2d70508221317673604f2%40mail.gmail.com"
       TITLE="[mod_python] Issues in apache MPM mode">arnaudsj at mac.com
       </A><BR>
    <I>Tue Aug 23 08:23:09 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="018884.html">[mod_python] Issues in apache MPM mode
</A></li>
        <LI>Next message: <A HREF="018889.html">[mod_python] Issues in apache MPM mode
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18888">[ date ]</a>
              <a href="thread.html#18888">[ thread ]</a>
              <a href="subject.html#18888">[ subject ]</a>
              <a href="author.html#18888">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Nicolas,

Thank you for the heads up! Can't wait to test 3.2 !

I doubled checked and the production server I was testing on was  
running 3.1.3, so I went ahead and recompiled apache (2.0.54) and  
upgraded to 3.1.4. I will see if this makes a difference. If it does  
not then I will give a shot to compiling it from SVN.

Thanks Graham for the clarifications on the MPM. I will see if I can  
manage to get the proper behavior on the patched version of mod_python.

Thanks!

S&#233;bastien



On Aug 22, 2005, at 4:17 PM, Nicolas Lehuen wrote:

&gt;<i> Hi S&#233;bastien,
</I>&gt;<i>
</I>&gt;<i> What version of mod_python are you using ? I suppose you're using the
</I>&gt;<i> 3.1.4and so, yes, there are a few bugs related to multi-threading and
</I>&gt;<i> module
</I>&gt;<i> reloadings. A lot of work has been done on mod_python since the
</I>&gt;<i> 3.1.4release, but until now we haven't managed to make any release, so
</I>&gt;<i> the
</I>&gt;<i> bugfixes were only available to those who were adventurous enough  
</I>&gt;<i> to use the
</I>&gt;<i> latest Subversion version. Anyway, a new 3.2.0-BETA version is  
</I>&gt;<i> currently
</I>&gt;<i> being prepared and will be available soon (we are making sure that no
</I>&gt;<i> show-stopping bugs are present in the beta version), so hopefully,  
</I>&gt;<i> you'll be
</I>&gt;<i> able to use a better version in a few days.
</I>&gt;<i>
</I>&gt;<i> FYI, you can access the bug tracking system here :
</I>&gt;<i> <A HREF="http://issues.apache.org/jira/browse/MODPYTHON">http://issues.apache.org/jira/browse/MODPYTHON</A>
</I>&gt;<i>
</I>&gt;<i> Here is the list of bug fixes / improvement that are currently  
</I>&gt;<i> included in
</I>&gt;<i> the upcoming 3.2.0-BETA version :
</I>&gt;<i> <A HREF="http://issues.apache.org/jira/secure/ReleaseNote.jspa?">http://issues.apache.org/jira/secure/ReleaseNote.jspa?</A> 
</I>&gt;<i> version=11060&amp;styleName=Html&amp;projectId=10640&amp;Create=Create
</I>&gt;<i>
</I>&gt;<i> If you want to get the latest development version of mod_python,  
</I>&gt;<i> give your
</I>&gt;<i> Subversion client this URL :
</I>&gt;<i> <A HREF="https://svn.apache.org/repos/asf/httpd/mod_python/trunk">https://svn.apache.org/repos/asf/httpd/mod_python/trunk</A>
</I>&gt;<i>
</I>&gt;<i> AFAIK the CVS repository mentioned in the homepage is no longer  
</I>&gt;<i> used. It may
</I>&gt;<i> be synchronized with the Subversion repository, but the reference  
</I>&gt;<i> repository
</I>&gt;<i> is now under Subversion.
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i> Nicolas
</I>&gt;<i>
</I>&gt;<i> 2005/8/22, S&#233;bastien Arnaud &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">arnaudsj at mac.com</A>&gt;:
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Hi,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I have developed over time a small web application framework over
</I>&gt;&gt;<i> mod_python, in order to help me write applications quickly and
</I>&gt;&gt;<i> cleanly. I do intend to release it open source once I clean it up a
</I>&gt;&gt;<i> little bit.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I wrote it with in mind targeting apache MPM (worker threaded), which
</I>&gt;&gt;<i> seemed to me the best mode in apache to lead to high performance.
</I>&gt;&gt;<i> Unfortunately, I am discovering that modules are getting reimported
</I>&gt;&gt;<i> over and over in this mode, and this is causing apache processes/
</I>&gt;&gt;<i> threads to eventually exit with a segmentation fault :(
</I>&gt;&gt;<i> FYI the web application framework is Web Object Oriented (meaning
</I>&gt;&gt;<i> that you map a python class to a url and view), and each page class
</I>&gt;&gt;<i> is registered has a child of main site class, which is then assigned
</I>&gt;&gt;<i> into a site pool. This leads to quite some memory utilization, but is
</I>&gt;&gt;<i> VERY fast in terms of execution.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I saw that Graham had wrote a few patches to avoid those problems. Is
</I>&gt;&gt;<i> there any hope to see those checked in mod_python source code any
</I>&gt;&gt;<i> time soon? For the long term, can we expect to have a flawless
</I>&gt;&gt;<i> mod_python behavior in threaded mode? or do we have to be like the
</I>&gt;&gt;<i> mod_php folks and target only apache PREFORK mode?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I just need to know so that I can rewrite/adapt my framework if MPM
</I>&gt;&gt;<i> is not going to be fixed for a while.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks!
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> S&#233;bastien
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Mod_python mailing list
</I>&gt;&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018884.html">[mod_python] Issues in apache MPM mode
</A></li>
	<LI>Next message: <A HREF="018889.html">[mod_python] Issues in apache MPM mode
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18888">[ date ]</a>
              <a href="thread.html#18888">[ thread ]</a>
              <a href="subject.html#18888">[ subject ]</a>
              <a href="author.html#18888">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
