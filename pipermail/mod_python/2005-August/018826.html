<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] combine psp with publisher woes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20combine%20psp%20with%20publisher%20woes&In-Reply-To=20050811132926.GA8596%40mrna.tn.nic.in">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018823.html">
   <LINK REL="Next"  HREF="018827.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] combine psp with publisher woes</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20combine%20psp%20with%20publisher%20woes&In-Reply-To=20050811132926.GA8596%40mrna.tn.nic.in"
       TITLE="[mod_python] combine psp with publisher woes">grahamd at dscpl.com.au
       </A><BR>
    <I>Thu Aug 11 17:39:09 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="018823.html">[mod_python] combine psp with publisher woes
</A></li>
        <LI>Next message: <A HREF="018827.html">[mod_python] combine psp with publisher woes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18826">[ date ]</a>
              <a href="thread.html#18826">[ thread ]</a>
              <a href="subject.html#18826">[ subject ]</a>
              <a href="author.html#18826">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 11/08/2005, at 11:29 PM, km wrote:

&gt;<i>
</I>&gt;<i> Hi all,
</I>&gt;<i> i have tried  the classic example which separates template from logic.
</I>&gt;<i> i am using mod_python 3.14 with apache 2.0.54
</I>&gt;<i>
</I>&gt;<i> # template -&gt;  hello.template
</I>&gt;<i> &lt;html&gt;
</I>&gt;<i> &lt;h1&gt;&lt;%= greet %&gt;&lt;/h2&gt;
</I>&gt;<i> &lt;/html&gt;
</I>&gt;<i>
</I>&gt;<i> # script hello2.py
</I>&gt;<i> from mod_python import apache, psp
</I>&gt;<i> def handler(req):
</I>&gt;<i>     tmpl = psp.PSP(req, filename='./hello.template')
</I>&gt;<i>     tmpl.run(vars = {'greet': 'world'})
</I>&gt;<i>     return  apache.OK
</I>&gt;<i> i have placed both hello2.py and hello.template in  
</I>&gt;<i> /usr/local/apache2/htdocs/test1 dir.
</I>
The above is not quite written in style required by publisher.
A publisher function to be able to automatically determine
content type needs content to be the return value of the function.
Here the PSP object writes directly to the req object. Thus use:

from mod_python import apache, psp
def handler(req):
     req.content_type = 'text/html'
     tmpl = psp.PSP(req, filename='./hello.template')
     tmpl.run(vars = {'greet': 'world'})
     return &quot; &quot;

and the URL:

   <A HREF="http://myhost/test1/hello2.py/handler">http://myhost/test1/hello2.py/handler</A>

And yes I do mean to return a string containing one space. This is to
stop publisher return a 500 error if None is returned. Don't think this
problem is in latest 3.2 code though. Returning None is okay provided
there has been content previously written to req object in 3.2.

Graham

</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018823.html">[mod_python] combine psp with publisher woes
</A></li>
	<LI>Next message: <A HREF="018827.html">[mod_python] combine psp with publisher woes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18826">[ date ]</a>
              <a href="thread.html#18826">[ thread ]</a>
              <a href="subject.html#18826">[ subject ]</a>
              <a href="author.html#18826">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
