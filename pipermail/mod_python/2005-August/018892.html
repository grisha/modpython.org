<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Performance Problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Performance%20Problem&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018896.html">
   <LINK REL="Next"  HREF="018899.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Performance Problem</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Orr, Steve</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Performance%20Problem&In-Reply-To="
       TITLE="[mod_python] Performance Problem">sorr at rightnow.com
       </A><BR>
    <I>Tue Aug 23 14:40:28 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="018896.html">[mod_python] large file upload using mod_python
</A></li>
        <LI>Next message: <A HREF="018899.html">[mod_python] Performance Problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18892">[ date ]</a>
              <a href="thread.html#18892">[ thread ]</a>
              <a href="subject.html#18892">[ subject ]</a>
              <a href="author.html#18892">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Well obviously mod_python is performing well and I doubt anything
connected with Linux versions would account for that much difference so
the thing to focus on would be tuning dbxml or the code associated with
it. Don't you have a way to run/test chunks of code outside of a web
environment?

-----Original Message-----
From: M Chaudhary [mailto:<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">igp-dev at infogridpacific.com</A>] 
Sent: Tuesday, August 23, 2005 12:13 AM
To: <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython.org</A>
Cc: Orr, Steve; IGP; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">and at doxdesk.com</A>; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">xml at sleepycat.com</A>
Subject: Re: [mod_python] Performance Problem

Hello Orr, Steve ,
        As you told i tested my application using &quot;ab&quot; tool for three 
cases (each for single request and 5 concurrent requests ):-
and the results were as follows (the following log was generated from my

mod-python handler itself using time.time() method ) ----
Attached is the test module . Please check it and view the following 
results.
#-----------------------------------------------------------------------
----------------------------
# Test 1 -- dbxml :- get a document and write it to browser
#-----------------------------------------------------------------------
----------------------------
0.00605797767639 # single request
0.0058479309082
0.00573110580444
0.148849010468
0.00549292564392
0.00417685508728 # 5 concurrent requests
0.00559282302856
0.00551891326904
0.00600981712341
0.00549983978271
#-----------------------------------------------------------------------
----------------------------
# Test 2 -- pxtl :- pxtl process a File and write it to browser
#-----------------------------------------------------------------------
----------------------------
1.65334200859 # single request
0.25177192688
0.261835098267
0.294239997864
0.000832080841064
0.428733825684 # 5 concurrent requests
0.440675020218
0.269226074219
0.237013816833
0.13219499588
#-----------------------------------------------------------------------
----------------------------
# Test 3 -- pxtl  and dbxml :- get a document from dbxml container ,pxtl

process it and write it to browser
#-----------------------------------------------------------------------
----------------------------
3.01918792725 # single request
13.4880371094
14.6321718693
15.9680738449   # 5 concurrent requests
16.1954669952
0.010479927063
17.400357008
12.5239679813
11.8724710941
10.8379950523
#-----------------------------------------------------------------------
----------------------------

As you can see the first problem is that when i test it for 5 concurrent

request i get 9 entries in my log file
each in each case.
And the second but most annoying problem is for Test 3 ( for both pxtl 
and dbxml ) it takes more than 10 seconds
to satisfy each request .
Even i tested my application on Upgraded Kernel (2.6.9-11.EL).
Should i use any other Linux distribution.
Can you tell me what the problem may be ? And what should i do ?

Regards,
Ajinkya N


Orr, Steve wrote:

&gt;<i>I can't see that mod_python would be the problem. For a given request,
</I>&gt;<i>what percentage of the overall response time is involved with database
</I>&gt;<i>access versus code execution? You need to know that. I'd first try
</I>&gt;<i>tuning the code before doing any web stuff. Especially tune the
</I>database
&gt;<i>queries and the network access to the database before going through the
</I>&gt;<i>web server. Then setup database connection pooling so each page request
</I>&gt;<i>reuses a connection instead of establishing a new connection with each
</I>&gt;<i>page turn. Can you do some kind of session management to avoid
</I>repop'ing
&gt;<i>&quot;the container&quot; with each page turn?
</I>&gt;<i>
</I>&gt;<i>Using ab I did some bench marking a year ago and with an old, cheap
</I>Dell
&gt;<i>2GHz PC with 512M RAM as the web server I was able to get 750 page
</I>turns
&gt;<i>per second. The database was Oracle and I used the connection pooling
</I>&gt;<i>feature that comes with cx_Oracle on the OCI. (A persistent connection
</I>&gt;<i>can be established for each Apache process so this isn't really
</I>&gt;<i>necessary.) I also reused cursors to avoid the parsing overhead.
</I>&gt;<i>(Besides doing web development I'm a DBA dweeb.) Without mod_python and
</I>&gt;<i>connection pooling it got as slow as 11 requests per second. Of course
</I>&gt;<i>my benchmarking was doing simple stuff but I was satisfied that
</I>&gt;<i>Apache/mod_python would perform well and I wouldn't have to go down a
</I>&gt;<i>&quot;Twisted&quot; path. Don't know anything about dbxml but you should address
</I>&gt;<i>the architecture/code first. If performance is really a big issue then
</I>&gt;<i>consider load balanced web servers and a good disk array setup on the
</I>db
&gt;<i>server. 
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>Steve Orr
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>-----Original Message-----
</I>&gt;<i>From: <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python-bounces at modpython.org</A>
</I>&gt;<i>[mailto:<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python-bounces at modpython.org</A>] On Behalf Of IGP
</I>&gt;<i>Sent: Wednesday, August 17, 2005 11:01 PM
</I>&gt;<i>To: <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">xml at sleepycat.com</A>; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython.org</A>
</I>&gt;<i>Subject: [mod_python] Performance Problem
</I>&gt;<i>
</I>&gt;<i>I am accessing dbxml via my mod-python handler.
</I>&gt;<i>The dbxml manager instance is created  , the container is opened and
</I>the
&gt;<i>
</I>&gt;<i>required operation
</I>&gt;<i>is performed(querying , geting a document ) for each client request . 
</I>&gt;<i>This is affecting the
</I>&gt;<i>performance . Is there any way to enhance the performance ? I mean that
</I>
&gt;<i>the XmlManager instance
</I>&gt;<i>will be created only once , the container will be opened and the stored
</I>
&gt;<i>in memory , so that the
</I>&gt;<i>response time will decrease .
</I>&gt;<i>I am using following versions of software
</I>&gt;<i>1) dbxml -  2.1.8
</I>&gt;<i>2) python - 2.3.4
</I>&gt;<i>3) mod-python - 1.3.4
</I>&gt;<i>4) apache 2.0.52
</I>&gt;<i>5) Kernel version-2.6.9-5.0.5-EL
</I>&gt;<i>
</I>&gt;<i>Please do reply if you know the solution .
</I>&gt;<i>Thanks in Advance,
</I>&gt;<i>Regards,
</I>&gt;<i>Ajinkya
</I>&gt;<i>
</I>&gt;<i>_______________________________________________
</I>&gt;<i>Mod_python mailing list
</I>&gt;<i><A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i><A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>_______________________________________________
</I>&gt;<i>Mod_python mailing list
</I>&gt;<i><A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i><A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  
</I>&gt;<i>
</I>
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018896.html">[mod_python] large file upload using mod_python
</A></li>
	<LI>Next message: <A HREF="018899.html">[mod_python] Performance Problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18892">[ date ]</a>
              <a href="thread.html#18892">[ thread ]</a>
              <a href="subject.html#18892">[ subject ]</a>
              <a href="author.html#18892">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
