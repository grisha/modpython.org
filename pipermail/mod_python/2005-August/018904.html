<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] mod_python.publisher - path traversal fails
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python.publisher%20-%20path%20traversal%20fails&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018898.html">
   <LINK REL="Next"  HREF="018905.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] mod_python.publisher - path traversal fails</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>John Black</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python.publisher%20-%20path%20traversal%20fails&In-Reply-To="
       TITLE="[mod_python] mod_python.publisher - path traversal fails">JohnBlack at kashori.com
       </A><BR>
    <I>Thu Aug 25 14:57:34 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="018898.html">[mod_python] mod_python.publisher - path traversal fails
</A></li>
        <LI>Next message: <A HREF="018905.html">[mod_python] mod_python.publisher - path traversal fails
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18904">[ date ]</a>
              <a href="thread.html#18904">[ thread ]</a>
              <a href="subject.html#18904">[ subject ]</a>
              <a href="author.html#18904">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>After much testing, I have determined that it has nothing to do 
with the path traversal of mod_python.publisher. That is working 
fine, as are paramter passing, etc.

I have nailed the problem down to a SQL statement. The strange 
thing is this. The table has 4 columns. If I select any 1 or 2 of 
those 4 columns, everything is fine. If, however, I select 3 or more, 
then I receive a 404 error. There is no exception, no error message. 
I surrounded it with a try: except: block and get nothing. 

When I run the same select statements directly from the python 
interpreter everything is fine. Also, on two other systems the entire
program works fine. However, they are using MySQLdb 1.20.

All of which leads me to wonder: is there an incompatibility between
MySQLdb 1.0.1 and mod_python 3.1.4? 

I had to use MySQLdb 1.0.1 because I am stuck with Python 2.2.3 
for now and MySQLdb 1.20 requires Python 2.3.4

cheers,
John
  ----- Original Message ----- 
  From: John Black 
  To: John Black ; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython.org</A> 
  Sent: Wednesday, August 24, 2005 10:23 PM
  Subject: Re: [mod_python] mod_python.publisher - path traversal fails


  Ok. Actually I was just trying to keep it simple. I 
  realize that mod_python.publisher has a different 
  way of handling calls than is used with def handler(req)
  By the way, I have this code working on two other systems at 
  home. The whole thing works perfectly. On my home system, 
  when I use mod_python.publisher it is with a call like 

      <A HREF="http://domain.com/mytest.py/paramsTest">http://domain.com/mytest.py/paramsTest</A>

  However, on the production server mentioned below, this 
  does not work either. I still get the 404 error.

  Cheers,
  John
    Sent: Wednesday, August 24, 2005 10:08 PM


    I am working on a python application on a Red Hat Linux server running
    Apache 2.0.48 with Python 2.2.3 and mod_python 3.1.4

    I must not have something configured correctly and it seems to me that 
    causes mod_python.publisher fails. If I do this:

    <A HREF="http://domain.com/mytest.py">http://domain.com/mytest.py</A>

    when I have configured:

    &lt;Directory /home/webadmin/domain.com/html&gt;
        AddHandler mod_python .py
        PythonHandler mytest
        PythonDebug On
    &lt;/Directory&gt;

    Then the default 'def handler(req):' works and prints &quot;Hello World&quot;.


    But if I try to do this:

    <A HREF="http://domain.com/mytest.py">http://domain.com/mytest.py</A>

    when I have configured:

    &lt;Directory /home/webadmin/domain.com/html&gt;
        AddHandler mod_python .py
        PythonHandler mod_python.publisher
        PythonDebug On
    &lt;/Directory&gt;

    Then I get a 404 error from Apache or a zero-byte return.


    However, if I call this <A HREF="http://domain.com/mytes.py">http://domain.com/mytes.py</A> (deforming mytest to mytes) 
    then I get this:
Mod_python error: &quot;PythonHandler mod_python.publisher&quot;

Traceback (most recent call last):

  File &quot;/usr/lib/python2.2/site-packages/mod_python/apache.py&quot;, line 299, in HandlerDispatch
    result = object(req)

  File &quot;/usr/lib/python2.2/site-packages/mod_python/publisher.py&quot;, line 98, in handler
    path=[path])

  File &quot;/usr/lib/python2.2/site-packages/mod_python/apache.py&quot;, line 454, in import_module
    f, p, d = imp.find_module(parts[i], path)

ImportError: No module named mytesCheers,
    John Black



----------------------------------------------------------------------------


    _______________________________________________
    Mod_python mailing list
    <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
    <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20050825/63f03461/attachment.html">http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20050825/63f03461/attachment.html</A>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018898.html">[mod_python] mod_python.publisher - path traversal fails
</A></li>
	<LI>Next message: <A HREF="018905.html">[mod_python] mod_python.publisher - path traversal fails
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18904">[ date ]</a>
              <a href="thread.html#18904">[ thread ]</a>
              <a href="subject.html#18904">[ subject ]</a>
              <a href="author.html#18904">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
