<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] PIL not working in mod_python on macosx 10.5
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20PIL%20not%20working%20in%20mod_python%20on%20macosx%2010.5&In-Reply-To=AFFA0D5D-114E-4F26-ADE6-A11F6875895C%40blueyonder.co.uk">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024421.html">
   <LINK REL="Next"  HREF="024433.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] PIL not working in mod_python on macosx 10.5</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20PIL%20not%20working%20in%20mod_python%20on%20macosx%2010.5&In-Reply-To=AFFA0D5D-114E-4F26-ADE6-A11F6875895C%40blueyonder.co.uk"
       TITLE="[mod_python] PIL not working in mod_python on macosx 10.5">graham.dumpleton at gmail.com
       </A><BR>
    <I>Tue Nov  6 19:59:15 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="024421.html">[mod_python] PIL not working in mod_python on macosx 10.5
</A></li>
        <LI>Next message: <A HREF="024433.html">[mod_python] PIL not working in mod_python on macosx 10.5
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24425">[ date ]</a>
              <a href="thread.html#24425">[ thread ]</a>
              <a href="subject.html#24425">[ subject ]</a>
              <a href="author.html#24425">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 07/11/2007, Arnaud Delobelle &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">delobelle at blueyonder.co.uk</A>&gt; wrote:
&gt;<i> Hi
</I>&gt;<i>
</I>&gt;<i> First thanks to Graham for pointing me in the right direction so that
</I>&gt;<i> I was able to install mod_python on macosx 10.5.  Unfortunately I have
</I>&gt;<i> run into another hitch:  the PIL (Python Imaging Library) is not
</I>&gt;<i> working from within mod_python, even though it is working from command-
</I>&gt;<i> line python:
</I>&gt;<i>
</I>&gt;<i> If I create a new image from mod_python, I get the error &quot;The _imaging
</I>&gt;<i> C module is not installed&quot;.
</I>&gt;<i> The module _imaging.so is in /Library/Python/2.5/site-packages/PIL/
</I>&gt;<i> _imaging.so and I have checked that /Library/Python/2.5/site-packages/
</I>&gt;<i> PIL/ is present in sys.path from within mod_python.
</I>&gt;<i>
</I>&gt;<i> I am now unable to progress any further... When I first unsuccessfully
</I>&gt;<i> installed mod_python, the problem was that it compiled as an i386
</I>&gt;<i> module whereas httpd is x86_64 on macosx 10.5 (on Intel Core 2 Duo).
</I>&gt;<i> My first reaction was that _imaging.so was for the wrong architecture
</I>&gt;<i> as well:
</I>&gt;<i>
</I>&gt;<i> marigold:~ arno$ file /Library/Python/2.5/site-packages/PIL/_imaging.so
</I>&gt;<i> /Library/Python/2.5/site-packages/PIL/_imaging.so: Mach-O universal
</I>&gt;<i> binary with 2 architectures
</I>&gt;<i> /Library/Python/2.5/site-packages/PIL/_imaging.so (for architecture
</I>&gt;<i> i386):  Mach-O bundle i386
</I>&gt;<i> /Library/Python/2.5/site-packages/PIL/_imaging.so (for architecture
</I>&gt;<i> ppc7400):       Mach-O bundle ppc
</I>&gt;<i>
</I>&gt;<i> But on the other hand, the same goes for python:
</I>&gt;<i>
</I>&gt;<i> marigold:~ arno$ file `which python`
</I>&gt;<i> /usr/bin/python: Mach-O universal binary with 2 architectures
</I>&gt;<i> /usr/bin/python (for architecture ppc7400):     Mach-O executable ppc
</I>&gt;<i> /usr/bin/python (for architecture i386):        Mach-O executable i386
</I>&gt;<i>
</I>&gt;<i> Having no understanding of how mod_python works, I can't decide if
</I>&gt;<i> this is the problem or not (forcing httpd to run as an i386 process
</I>&gt;<i> would probably tell me the answer, but I don't know how to).  But if
</I>&gt;<i> it is not, what prevents _imaging.so from loading?
</I>
There is most likely an error message getting output as to why from
mod_python internals or the OS, but unfortunately mod_python is
deficient in not promptly flushing any output to sys.stderr. Such
messages may only get flushed when Apache is shut down, so shutdown
Apache and look near end of log files for any strange messages.

Also suggest you construct a simple hello world test handler that
doesn't use any third party packages. Once that is working, add:

  import sys

  try:
    print &gt;&gt; sys.stderr, '#1&quot;
    sys.stderr.flush()
    import _imaging
    print &gt;&gt; sys.stderr, '#2&quot;
    sys.stderr.flush()
  except:
    print &gt;&gt; sys.stderr, '#3&quot;
    sys.stderr.flush()
    raise

Post here what is output to the Apache error log file.

Graham
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024421.html">[mod_python] PIL not working in mod_python on macosx 10.5
</A></li>
	<LI>Next message: <A HREF="024433.html">[mod_python] PIL not working in mod_python on macosx 10.5
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24425">[ date ]</a>
              <a href="thread.html#24425">[ thread ]</a>
              <a href="subject.html#24425">[ subject ]</a>
              <a href="author.html#24425">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
