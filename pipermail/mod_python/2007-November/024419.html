<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Problems with logging.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Problems%20with%20logging.&In-Reply-To=08ED5B72-BBA8-40D5-8C2D-9425AF18C8C4%40acm.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024414.html">
   <LINK REL="Next"  HREF="024420.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Problems with logging.</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Problems%20with%20logging.&In-Reply-To=08ED5B72-BBA8-40D5-8C2D-9425AF18C8C4%40acm.org"
       TITLE="[mod_python] Problems with logging.">graham.dumpleton at gmail.com
       </A><BR>
    <I>Tue Nov  6 15:41:13 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="024414.html">[mod_python] Problems with logging.
</A></li>
        <LI>Next message: <A HREF="024420.html">[mod_python] Problems with logging.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24419">[ date ]</a>
              <a href="thread.html#24419">[ thread ]</a>
              <a href="subject.html#24419">[ subject ]</a>
              <a href="author.html#24419">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 07/11/2007, Kathryn Van Stone &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">kvs at acm.org</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> I am currently using mod_python version 3.3.1 with Apache 2.2.4 (and
</I>&gt;<i> Python 2.5.1).  I've notice a difference between using
</I>&gt;<i> apache.log_error and req.log_error. I modified mptest.py to the
</I>&gt;<i> following:
</I>&gt;<i>
</I>&gt;<i> from mod_python import apache
</I>&gt;<i>
</I>&gt;<i> def handler(req):
</I>&gt;<i>      apache.log_error('Test log from apache', apache.APLOG_DEBUG)
</I>&gt;<i>      req.log_error('Test log from request', apache.APLOG_DEBUG)
</I>&gt;<i>      req.content_type = 'text/plain'
</I>&gt;<i>      req.write('Hello World')
</I>&gt;<i>      return apache.OK
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I modified the apache configuration to set the log level to debug.  I
</I>&gt;<i> get the request log message, but not the apache log message. When the
</I>&gt;<i> log level is raised to APLOG_NOTICE, I get both messages.
</I>
Known issue, or at least I knew about it. I can't see that I created
an issue for it in the bug tracker though. I also can't remember the
full details at the moment. I know I made sure I didn't make the same
mistake in mod_wsgi though. :-)

&gt;<i> Any thoughts on why there is a difference?  We have areas where
</I>&gt;<i> getting the request object is a hassle and would like to use
</I>&gt;<i> apache.log_error. (Also there are members of my team who don't like
</I>&gt;<i> the 'requestobject.c(823)' showing up in the log as it adds almost no
</I>&gt;<i> information)
</I>
That requestobject.c always show for DEBUG level statements is a
result of how Apache works, in that it in embeds the C code file/line
number of where ap_log_rerror() is called. It is non trivial and
perhaps not entirely reliable, to try and dynamically work out where
in the Python code the call to the Python wrapper for the function was
called. It may be possible to fudge things at the level of the call to
ap_log_rerror() and not pass APLOG_MARK as argument and split it out
into two separate zero arguments. Presume that ap_log_rerror() will
not crash if line information not supplied.

Graham
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024414.html">[mod_python] Problems with logging.
</A></li>
	<LI>Next message: <A HREF="024420.html">[mod_python] Problems with logging.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24419">[ date ]</a>
              <a href="thread.html#24419">[ thread ]</a>
              <a href="subject.html#24419">[ subject ]</a>
              <a href="author.html#24419">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
