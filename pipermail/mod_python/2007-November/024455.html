<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Thread stopping and asynchronous calls
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Thread%20stopping%20and%20asynchronous%20calls&In-Reply-To=7.0.0.16.2.20071116133618.024ebed0%40bbn.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024454.html">
   <LINK REL="Next"  HREF="024456.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Thread stopping and asynchronous calls</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Thread%20stopping%20and%20asynchronous%20calls&In-Reply-To=7.0.0.16.2.20071116133618.024ebed0%40bbn.com"
       TITLE="[mod_python] Thread stopping and asynchronous calls">graham.dumpleton at gmail.com
       </A><BR>
    <I>Fri Nov 16 16:51:01 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="024454.html">[mod_python] Thread stopping and asynchronous calls
</A></li>
        <LI>Next message: <A HREF="024456.html">[mod_python] Thread stopping and asynchronous calls
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24455">[ date ]</a>
              <a href="thread.html#24455">[ thread ]</a>
              <a href="subject.html#24455">[ subject ]</a>
              <a href="author.html#24455">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Huh, are you saying that you are creating a listener socket in the
Apache child process from mod_python. You can't really do this as
Apache is a multi processor web server and you cant have multiple
processes creating a listener socket on the same port. Thus all but
the first Apache child process would fail. When that process gets
recycled by Apache, none of the other Apache child processes would
take over and thus no listener anymore.

Graham

On 17/11/2007, Chris Guin &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">cguin at bbn.com</A>&gt; wrote:
&gt;<i> I've been working on a custom chat server for Django (using
</I>&gt;<i> mod_python), but have been hugely frustrated with the behavior of my
</I>&gt;<i> &quot;listening thread.&quot;  The thread stops at either the time.sleep() or
</I>&gt;<i> select.select() call and never returns - usually when a lot of
</I>&gt;<i> asynchronous requests are being answered by the server, although not
</I>&gt;<i> always (even with one or two browsers left running over night, the
</I>&gt;<i> thread will eventually stop).  Increasing the frequency of the async
</I>&gt;<i> requests or increasing the number of browsers raises the chance of
</I>&gt;<i> stoppage to near certain levels - but there's still a high random factor to it.
</I>&gt;<i>
</I>&gt;<i> I have guaranteed that there is only one &quot;listening thread&quot; running
</I>&gt;<i> at any time, and have commented out all database and network accesses
</I>&gt;<i> (so my listening thread is just printing out debug statements and
</I>&gt;<i> calling time.sleep() and my AJAX calls only retrieve random
</I>&gt;<i> numbers).  The problem still occurs, and in the same manner.  Nor is
</I>&gt;<i> it a gradual slowdown - time.sleep() takes the correct number of
</I>&gt;<i> seconds to return right up until the time it fails to return at all.
</I>&gt;<i>
</I>&gt;<i> When Apache starts up it says: &quot;mod_python: Creating 8 session
</I>&gt;<i> mutexes based on 256 max processes and 0 max threads.&quot;  This looks a
</I>&gt;<i> little suspicious - is there a mod_python setting that I have
</I>&gt;<i> incorrect?  My understanding of the workings of mod_python is fairly
</I>&gt;<i> weak, so this may not even the right group to be posting to.
</I>&gt;<i>
</I>&gt;<i> Thanks for any help you could give,
</I>&gt;<i> Chris Guin
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024454.html">[mod_python] Thread stopping and asynchronous calls
</A></li>
	<LI>Next message: <A HREF="024456.html">[mod_python] Thread stopping and asynchronous calls
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24455">[ date ]</a>
              <a href="thread.html#24455">[ thread ]</a>
              <a href="subject.html#24455">[ subject ]</a>
              <a href="author.html#24455">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
