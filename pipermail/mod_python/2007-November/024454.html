<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Thread stopping and asynchronous calls
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Thread%20stopping%20and%20asynchronous%20calls&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024453.html">
   <LINK REL="Next"  HREF="024455.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Thread stopping and asynchronous calls</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Chris Guin</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Thread%20stopping%20and%20asynchronous%20calls&In-Reply-To="
       TITLE="[mod_python] Thread stopping and asynchronous calls">cguin at bbn.com
       </A><BR>
    <I>Fri Nov 16 13:44:31 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="024453.html">[mod_python] Help with multiple repeat error from apache server
</A></li>
        <LI>Next message: <A HREF="024455.html">[mod_python] Thread stopping and asynchronous calls
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24454">[ date ]</a>
              <a href="thread.html#24454">[ thread ]</a>
              <a href="subject.html#24454">[ subject ]</a>
              <a href="author.html#24454">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I've been working on a custom chat server for Django (using 
mod_python), but have been hugely frustrated with the behavior of my 
&quot;listening thread.&quot;  The thread stops at either the time.sleep() or 
select.select() call and never returns - usually when a lot of 
asynchronous requests are being answered by the server, although not 
always (even with one or two browsers left running over night, the 
thread will eventually stop).  Increasing the frequency of the async 
requests or increasing the number of browsers raises the chance of 
stoppage to near certain levels - but there's still a high random factor to it.

I have guaranteed that there is only one &quot;listening thread&quot; running 
at any time, and have commented out all database and network accesses 
(so my listening thread is just printing out debug statements and 
calling time.sleep() and my AJAX calls only retrieve random 
numbers).  The problem still occurs, and in the same manner.  Nor is 
it a gradual slowdown - time.sleep() takes the correct number of 
seconds to return right up until the time it fails to return at all.

When Apache starts up it says: &quot;mod_python: Creating 8 session 
mutexes based on 256 max processes and 0 max threads.&quot;  This looks a 
little suspicious - is there a mod_python setting that I have 
incorrect?  My understanding of the workings of mod_python is fairly 
weak, so this may not even the right group to be posting to.

Thanks for any help you could give,
Chris Guin


</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024453.html">[mod_python] Help with multiple repeat error from apache server
</A></li>
	<LI>Next message: <A HREF="024455.html">[mod_python] Thread stopping and asynchronous calls
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24454">[ date ]</a>
              <a href="thread.html#24454">[ thread ]</a>
              <a href="subject.html#24454">[ subject ]</a>
              <a href="author.html#24454">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
