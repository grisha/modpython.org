<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Mac OS X Leopard upset my mod_python test bed.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Mac%20OS%20X%20Leopard%20upset%20my%20mod_python%20test%20bed.&In-Reply-To=BFFC4290-0C4B-43D8-9F38-1B140A35B767%40skri.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024503.html">
   <LINK REL="Next"  HREF="024505.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Mac OS X Leopard upset my mod_python test bed.</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Mac%20OS%20X%20Leopard%20upset%20my%20mod_python%20test%20bed.&In-Reply-To=BFFC4290-0C4B-43D8-9F38-1B140A35B767%40skri.org"
       TITLE="[mod_python] Mac OS X Leopard upset my mod_python test bed.">graham.dumpleton at gmail.com
       </A><BR>
    <I>Sun Nov 25 17:17:10 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="024503.html">[mod_python] Mac OS X Leopard upset my mod_python test bed.
</A></li>
        <LI>Next message: <A HREF="024505.html">[mod_python] Mac OS X Leopard upset my mod_python test bed.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24504">[ date ]</a>
              <a href="thread.html#24504">[ thread ]</a>
              <a href="subject.html#24504">[ subject ]</a>
              <a href="author.html#24504">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>In 'envvars' file in the same directory as the real httpd you want to run, add:

  PYTHONHOME=/usr/local
  export PYTHONHOME

Alternatively, you must ensure that the PATH of the user that Apache
is started as has /usr/local/bin in its path before /usr/bin, else it
will find the wrong 'python' executable and thus end up looking in the
wrong location for the corresponding lib directory.

Search the mod_python mailing lists for past discussions on this issue.

BTW, why do you want to install your own version of Python 2.5, what
is wrong with the Python 2.5 that the operating system ships?

Graham

On 26/11/2007, Simon Kesenci &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">god at skri.org</A>&gt; wrote:
&gt;<i> I recently upgraded my PowerBook (PPC) to Leopard.  Piece by piece I
</I>&gt;<i> started reassembling my web server test bed (httpd 2.2.6, Python
</I>&gt;<i> 2.5.1, mod_python 3.3.1), which worked perfectly on Tiger.  I built
</I>&gt;<i> everything from their sources.
</I>&gt;<i>
</I>&gt;<i> This time around I got everything to work except for mod_python.  My
</I>&gt;<i> procedure had the following non-standard edits:
</I>&gt;<i>
</I>&gt;<i> httpd 2.2.6:
</I>&gt;<i>      Changed APR_HAS_SENDFILE to 0 in srclib/apr/include/apr.h
</I>&gt;<i>      After installation I backed up /usr/sbin/httpd and entered
</I>&gt;<i>        ln -s /usr/local/apache2/bin/httpd /usr/sbin/httpd.
</I>&gt;<i>      (This allows you to activate the compiled httpd from the Sharing
</I>&gt;<i> Preferences, which will also have the built-in firewall open and close
</I>&gt;<i> port 80 in sync with the server.)
</I>&gt;<i>
</I>&gt;<i> Python 2.5.1:
</I>&gt;<i>      After ./configure --enable-framework I added -DSETPGRP_HAVE_ARG
</I>&gt;<i> to the top-level Makefile (make exits with an error otherwise due to a
</I>&gt;<i> lack of arguments to setpgrp()).
</I>&gt;<i>
</I>&gt;<i> Both of the above work as expected, but when I threw mod_python into
</I>&gt;<i> the mix I kept getting the following error:
</I>&gt;<i>
</I>&gt;<i> [Sun Nov 25 09:43:22 2007] [error] make_obcallback: could not import
</I>&gt;<i> mod_python.apache.\n
</I>&gt;<i> ImportError: No module named mod_python.apache
</I>&gt;<i> [Sun Nov 25 09:43:22 2007] [error] make_obcallback: Python path being
</I>&gt;<i> used &quot;['/usr/lib/python25.zip', '/usr/lib/python2.5', '/usr/lib/
</I>&gt;<i> python2.5/plat-darwin', '/usr/lib/python2.5/plat-mac', '/usr/lib/
</I>&gt;<i> python2.5/plat-mac/lib-scriptpackages', '/usr/lib/python2.5/lib-tk', '/
</I>&gt;<i> usr/lib/python2.5/lib-dynload', '/Library/Python/2.5/site-packages']&quot;.
</I>&gt;<i> [Sun Nov 25 09:43:22 2007] [error] get_interpreter: no interpreter
</I>&gt;<i> callback found.
</I>&gt;<i> [Sun Nov 25 09:43:22 2007] [error] [client 10.0.1.2] python_handler:
</I>&gt;<i> Can't get/create interpreter., referer: <A HREF="http://10.0.1.2/~simon/test/">http://10.0.1.2/~simon/test/</A>
</I>&gt;<i>
</I>&gt;<i> I used a number of scripts to test the installation, including
</I>&gt;<i> mptest.py from the mod_python doc.  The last script I used to test did
</I>&gt;<i> not import mod_python.apache explicitly:
</I>&gt;<i>
</I>&gt;<i> from mod_python import util
</I>&gt;<i>
</I>&gt;<i> def index(req):
</I>&gt;<i>    util.redirect(req, 'www.example.com')
</I>&gt;<i>
</I>&gt;<i> While installing mod_python the output made clear that it took up the
</I>&gt;<i> interpreter in /usr/local/bin rather than the one provided by Apple
</I>&gt;<i> in /usr/bin and installed under /Library/Frameworks/Python.framework/
</I>&gt;<i> Versions/2.5/lib/python2.5/site-packages/ rather than /Library/Python/
</I>&gt;<i> 2.5/site-packages.
</I>&gt;<i>
</I>&gt;<i> I don't know from where it pulled that path.  The interpreter I
</I>&gt;<i> compiled uses the path:
</I>&gt;<i>
</I>&gt;<i> ['', '/Library/Frameworks/Python.framework/Versions/2.5/lib/
</I>&gt;<i> python25.zip', '/Library/Frameworks/Python.framework/Versions/2.5/lib/
</I>&gt;<i> python2.5', '/Library/Frameworks/Python.framework/Versions/2.5/lib/
</I>&gt;<i> python2.5/plat-darwin', '/Library/Frameworks/Python.framework/Versions/
</I>&gt;<i> 2.5/lib/python2.5/plat-mac', '/Library/Frameworks/Python.framework/
</I>&gt;<i> Versions/2.5/lib/python2.5/plat-mac/lib-scriptpackages', '/Library/
</I>&gt;<i> Frameworks/Python.framework/Versions/2.5/lib/python2.5/lib-tk', '/
</I>&gt;<i> Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/lib-
</I>&gt;<i> dynload', '/Library/Frameworks/Python.framework/Versions/2.5/lib/
</I>&gt;<i> python2.5/site-packages']
</I>&gt;<i>
</I>&gt;<i> The interpreter provided by Apple uses:
</I>&gt;<i>
</I>&gt;<i> ['', '/System/Library/Frameworks/Python.framework/Versions/2.5/lib/
</I>&gt;<i> python25.zip', '/System/Library/Frameworks/Python.framework/Versions/
</I>&gt;<i> 2.5/lib/python2.5', '/System/Library/Frameworks/Python.framework/
</I>&gt;<i> Versions/2.5/lib/python2.5/plat-darwin', '/System/Library/Frameworks/
</I>&gt;<i> Python.framework/Versions/2.5/lib/python2.5/plat-mac', '/System/
</I>&gt;<i> Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/plat-
</I>&gt;<i> mac/lib-scriptpackages', '/System/Library/Frameworks/Python.framework/
</I>&gt;<i> Versions/2.5/Extras/lib/python', '/System/Library/Frameworks/
</I>&gt;<i> Python.framework/Versions/2.5/lib/python2.5/lib-tk', '/System/Library/
</I>&gt;<i> Frameworks/Python.framework/Versions/2.5/lib/python2.5/lib-dynload', '/
</I>&gt;<i> Library/Python/2.5/site-packages', '/System/Library/Frameworks/
</I>&gt;<i> Python.framework/Versions/2.5/Extras/lib/python/PyObjC']
</I>&gt;<i>
</I>&gt;<i> This morning I logged on to my Linux web server and installed all
</I>&gt;<i> these packages from source without any problems.
</I>&gt;<i>
</I>&gt;<i> --S.
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024503.html">[mod_python] Mac OS X Leopard upset my mod_python test bed.
</A></li>
	<LI>Next message: <A HREF="024505.html">[mod_python] Mac OS X Leopard upset my mod_python test bed.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24504">[ date ]</a>
              <a href="thread.html#24504">[ thread ]</a>
              <a href="subject.html#24504">[ subject ]</a>
              <a href="author.html#24504">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
