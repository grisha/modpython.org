<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] OS X / Apache 2 / mod_python bug
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20OS%20X%20/%20Apache%202%20/%20mod_python%20bug&In-Reply-To=09d4422daff3dde7eb027d0c34bd5fc4%40dscpl.com.au">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017681.html">
   <LINK REL="Next"  HREF="017678.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] OS X / Apache 2 / mod_python bug</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Jamie Kirkpatrick</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20OS%20X%20/%20Apache%202%20/%20mod_python%20bug&In-Reply-To=09d4422daff3dde7eb027d0c34bd5fc4%40dscpl.com.au"
       TITLE="[mod_python] OS X / Apache 2 / mod_python bug">jkp at kirkconsulting.co.uk
       </A><BR>
    <I>Wed Mar 16 16:36:45 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="017681.html">[mod_python] OS X / Apache 2 / mod_python bug
</A></li>
        <LI>Next message: <A HREF="017678.html">[mod_python] OS X / Apache 2 / mod_python bug
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17677">[ date ]</a>
              <a href="thread.html#17677">[ thread ]</a>
              <a href="subject.html#17677">[ subject ]</a>
              <a href="author.html#17677">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;&gt;<i>
</I>&gt;&gt;<i> So, after a normal start error log shows:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> [Wed Mar 16 11:03:43 2005] [notice] mod_python: Creating 32 session  
</I>&gt;&gt;<i> mutexes based on 150 max processes and 0 max threads.
</I>&gt;&gt;<i> [Wed Mar 16 11:03:43 2005] [error] Performing Initialisation.
</I>&gt;&gt;<i> [Wed Mar 16 11:03:43 2005] [notice] Digest: generating secret for  
</I>&gt;&gt;<i> digest authentication ...
</I>&gt;&gt;<i> [Wed Mar 16 11:03:43 2005] [notice] Digest: done
</I>&gt;&gt;<i> [Wed Mar 16 11:03:44 2005] [notice] Apache/2.0.53 (Unix) DAV/2  
</I>&gt;&gt;<i> mod_python/3.1.3 Python/2.4 configured -- resuming normal operations
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Then I call the test script:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> [Wed Mar 16 11:04:52 2005] [error] The name passed was:
</I>&gt;&gt;<i> [Wed Mar 16 11:04:52 2005] [error] thegrove.homeip.net
</I>&gt;&gt;<i> [Wed Mar 16 11:04:53 2005] [notice] mod_python: (Re)importing module  
</I>&gt;&gt;<i> 'test'
</I>&gt;&gt;<i> [Wed Mar 16 11:04:53 2005] [error] start import
</I>&gt;&gt;<i> [Wed Mar 16 11:04:53 2005] [error] end import
</I>&gt;&gt;<i> [Wed Mar 16 11:04:53 2005] [error] start handler
</I>&gt;&gt;<i> [Wed Mar 16 11:04:53 2005] [error] end handler
</I>&gt;&gt;<i> [Wed Mar 16 11:04:53 2005] [error] Name was NULL.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Cool - fixed that crash (my fault!), but it still puzzles me why the  
</I>&gt;&gt;<i> handler gets called again here.
</I>&gt;<i>
</I>&gt;<i> Am not sure which part of the logs you are referring to, I only see
</I>&gt;<i> the handler itself being called once.
</I>
I dont mean the handler, i mean the initialiser (sorry).  The first  
time name is set to thegrove.homeip.net and the second time to NULL.

&gt;<i>
</I>&gt;&gt;<i> Now a restart - the following is added to the logs:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> [Wed Mar 16 11:06:01 2005] [error] Name was NULL.
</I>&gt;&gt;<i> [Wed Mar 16 11:06:01 2005] [error] Name was NULL.
</I>&gt;&gt;<i> [Wed Mar 16 11:06:01 2005] [error] Name was NULL.
</I>&gt;&gt;<i> [Wed Mar 16 11:06:01 2005] [error] Name was NULL.
</I>&gt;&gt;<i> [Wed Mar 16 11:06:01 2005] [error] Name was NULL.
</I>&gt;&gt;<i> [Wed Mar 16 11:06:01 2005] [error] Name was NULL.
</I>&gt;&gt;<i> [Wed Mar 16 11:06:07 2005] [notice] SIGHUP received.  Attempting to  
</I>&gt;&gt;<i> restart
</I>&gt;&gt;<i> [Wed Mar 16 11:06:07 2005] [notice] mod_python: Creating 32 session  
</I>&gt;&gt;<i> mutexes based on 150 max processes and 0 max threads.
</I>&gt;&gt;<i> [Wed Mar 16 11:06:07 2005] [notice] Digest: generating secret for  
</I>&gt;&gt;<i> digest authentication ...
</I>&gt;&gt;<i> [Wed Mar 16 11:06:07 2005] [notice] Digest: done
</I>&gt;&gt;<i> [Wed Mar 16 11:06:08 2005] [notice] Apache/2.0.53 (Unix) DAV/2  
</I>&gt;&gt;<i> mod_python/3.1.3 Python/2.4 configured -- resuming normal operations
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Again I have multiple instances of httpd running now ... is this  
</I>&gt;&gt;<i> normal?
</I>&gt;<i>
</I>&gt;<i> The lookup of interpreters by NULL is something to do with the
</I>&gt;<i> cleanup handlers for the interpreter. Not sure why NULL though.
</I>&gt;<i> Can't tell here whether they are in separate processes or not.
</I>&gt;<i> Are you using &quot;ps&quot; to note there are multiple processes running.
</I>&gt;<i> Because your Apache is running in prefork mode, it is normal for
</I>&gt;<i> it to create multiple processes even if not all may be used in
</I>&gt;<i> your simple test.
</I>
I am using ps and there are multiple instances running.  I didnt start  
them so ill assume this is normal apache behaviour.  Is prefork the  
default then?  What is the alternative to this mode?

&lt;snip&gt;

&gt;<i>
</I>&gt;<i> I understand the patch is in the subversion repository for the  
</I>&gt;<i> mod_python
</I>&gt;<i> source code:
</I>&gt;<i>
</I>&gt;<i>    
</I>&gt;<i> <A HREF="https://svn.apache.org/repos/asf/httpd/mod_python/trunk/src/">https://svn.apache.org/repos/asf/httpd/mod_python/trunk/src/</A> 
</I>&gt;<i> mod_python.c
</I>&gt;<i>
</I>
Good!

&gt;<i> The original person who developed mod_python doesn't really look  
</I>&gt;<i> after it
</I>&gt;<i> anymore and maintenance has been taken over by someone else. He has  
</I>&gt;<i> been
</I>&gt;<i> slowly working through fixing some of the known problems and simply  
</I>&gt;<i> hasn't
</I>&gt;<i> made an updated release yet. The security fix release done recently  
</I>&gt;<i> was a
</I>&gt;<i> rush job based on source of previous version. Because there is this
</I>&gt;<i> transition to a new maintainer, updating of the web site is also in a  
</I>&gt;<i> state
</I>&gt;<i> of flux to a degree.
</I>&gt;<i>
</I>
Noted.

&gt;<i> I possibly should point out that although I try and provide help to  
</I>&gt;<i> people
</I>&gt;<i> on the mailing list, I am not involved in the maintenance of  
</I>&gt;<i> mod_python
</I>&gt;<i> itself except as far as I have posted up a lot of bug reports for  
</I>&gt;<i> stuff I've
</I>&gt;<i> found and possible fixes. I have only been using mod_python for about  
</I>&gt;<i> six
</I>&gt;<i> months and wasn't intending to get so involved in it nor develop  
</I>&gt;<i> Vampire.
</I>&gt;<i> I was only after an easier way to construct web pages for my site. I  
</I>&gt;<i> really
</I>&gt;<i> need to be getting back to my main projects which have been  
</I>&gt;<i> stagnating while
</I>&gt;<i> on this diversion. :-(
</I>&gt;<i>
</I>&gt;<i> Anyway, outcome from your problem is that I now know that the Mac OS  
</I>&gt;<i> X fix
</I>&gt;<i> is relevant to the platform generally and not just Apples Python 2.3
</I>&gt;<i> installation. Another bit of useful information to help people out.
</I>&gt;<i>
</I>&gt;<i> Graham
</I>&gt;<i>
</I>
So, just to say a big thank you.  Your tips were an interesting insight  
into how this stuff works, but I really ought to read the API for  
Apache to understand this stuff better - as with you though too much to  
do!

But yes, you are right, this has been useful as I can say with  
certainty that this is a general OS X issue - it appears on the stock  
2.3, a custom 2.3 and 2.4.  I have informed dports of the issue and we  
have included a patch in the port now so people installing that way  
should get something that works correctly.  Well done on the patch tho,  
and thanks for all your effort...

Jamie

..../me unsubscribes ;)

</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017681.html">[mod_python] OS X / Apache 2 / mod_python bug
</A></li>
	<LI>Next message: <A HREF="017678.html">[mod_python] OS X / Apache 2 / mod_python bug
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17677">[ date ]</a>
              <a href="thread.html#17677">[ thread ]</a>
              <a href="subject.html#17677">[ subject ]</a>
              <a href="author.html#17677">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
