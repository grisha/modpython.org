<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] mod_python interpreter creation issue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python%20interpreter%20creation%20issue&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017662.html">
   <LINK REL="Next"  HREF="017664.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] mod_python interpreter creation issue</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>John Belmonte</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python%20interpreter%20creation%20issue&In-Reply-To="
       TITLE="[mod_python] mod_python interpreter creation issue">john at neggie.net
       </A><BR>
    <I>Tue Mar 15 22:25:20 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="017662.html">[mod_python] Mod_python &amp; global persistence
</A></li>
        <LI>Next message: <A HREF="017664.html">[mod_python] mod_python interpreter creation issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17663">[ date ]</a>
              <a href="thread.html#17663">[ thread ]</a>
              <a href="subject.html#17663">[ subject ]</a>
              <a href="author.html#17663">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Several months ago an installation of my application which uses 
mod_python/Quixote/ZODB/ZEO suddenly stopped working.  It appears to 
have been caused by a mod_python upgrade.  I'm on Debian and now using 
3.1.3, although I don't know what version I was using previously.

I traced the error to a &quot;ImportError: No module named copy_reg&quot; 
resulting from a cPickle.Pickler() call.  This is caused by Python 
thinking that it's in restricted execution mode.  The error is happening 
within ZEO's client thread code.

The following mod_python list message &quot;Threads running in restricted 
mode?&quot; seems to detail similar problems, but no one responded to the issue.

   <A HREF="http://www.modpython.org/pipermail/mod_python/2005-January/017129.html">http://www.modpython.org/pipermail/mod_python/2005-January/017129.html</A>

Tim Peters speculates that mod_python might be starting a new 
interpreter from time to time using the Python C API.  The new 
interpreter will have distinct copies of the sys module, the sys.modules 
dict, and the sys.path list, triggering Python's restricted execution mode.

Anyone have some insight to this problem?  Or at least, would someone 
explain how and when mod_python creates new interpreters?

--John Belmonte
</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017662.html">[mod_python] Mod_python &amp; global persistence
</A></li>
	<LI>Next message: <A HREF="017664.html">[mod_python] mod_python interpreter creation issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17663">[ date ]</a>
              <a href="thread.html#17663">[ thread ]</a>
              <a href="subject.html#17663">[ subject ]</a>
              <a href="author.html#17663">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
