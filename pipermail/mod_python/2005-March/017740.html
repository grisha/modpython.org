<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] apache2 won't load mod_python
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20apache2%20won%27t%20load%20mod_python&In-Reply-To=051d01c52ee8%244279dc20%24080aa8c0%40DAVE">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017739.html">
   <LINK REL="Next"  HREF="017757.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] apache2 won't load mod_python</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20apache2%20won%27t%20load%20mod_python&In-Reply-To=051d01c52ee8%244279dc20%24080aa8c0%40DAVE"
       TITLE="[mod_python] apache2 won't load mod_python">grahamd at dscpl.com.au
       </A><BR>
    <I>Tue Mar 22 16:13:34 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="017739.html">[mod_python] apache2 won't load mod_python
</A></li>
        <LI>Next message: <A HREF="017757.html">[mod_python] apache2 won't load mod_python
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17740">[ date ]</a>
              <a href="thread.html#17740">[ thread ]</a>
              <a href="subject.html#17740">[ subject ]</a>
              <a href="author.html#17740">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>How many versions of Python are installed on your system? You appear to
be trying to use the one in /usr/local, is that the one you actually
want? When you configured Apache, did you tell it to use a particular
version or simply use whatever it could find? Have you got PYTHONPATH
set manually in your environment or that of Apache?

Anyway, this particular sort of problem is generally the result of 
issues
with there being multiple versions of Python on a system, or a missing
or incomplete install of the Python side of the mod_python system. Go
through each of the site-packages directories for each version of Python
you have and see which have a mod_python directory, when the files were
copied into the directory and try and work out which version of 
mod_python
the files may be for. If a mod_python installation is 3.X, it will have
psp.py in the Python mod_python package directory. Doing this may help
clarify for you what went where and what version Apache might be trying
to load.

I wander whether the mod_python module when it is being loaded from
Apache should dump out to the Apache error log the contents of sys.path.
This may aid in debugging these sort of problems as right now it isn't
easily detectable where Apache may be looking. The startup message may
say which version of Python the Apache module was compiled against, but
this is not necessarily a true indication of where it is looking for
modules.

BTW, also read:

   <A HREF="http://www.modpython.org/FAQ/faqw.py?req=show&amp;file=faq02.001.htp">http://www.modpython.org/FAQ/faqw.py?req=show&amp;file=faq02.001.htp</A>

Also tell us what operating system you are using.

Graham

On 23/03/2005, at 1:05 AM, Dave Britton wrote:

&gt;<i> When I am logged in under su as root I can start python and import 
</I>&gt;<i> mod_python. (import * fails of course on _apache):
</I>&gt;<i> ========
</I>&gt;<i> [Tue Mar 22 14:00:38 2005] [info] Server built: Mar 16 2005 19:13:58
</I>&gt;<i> [Tue Mar 22 14:00:38 2005] [debug] prefork.c(956): AcceptMutex: 
</I>&gt;<i> sysvsem (default: sysvsem)
</I>&gt;<i> [Tue Mar 22 14:01:52 2005] [error] make_obcallback: could not import 
</I>&gt;<i> mod_python.apache.\n
</I>&gt;<i> [<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">root at ap1</A> apache2]# python
</I>&gt;<i> Python 2.3.3 (#1, May 18 2004, 02:14:01)
</I>&gt;<i> [GCC 3.2.2 20030222 (Red Hat Linux 3.2.2-5)] on linux2
</I>&gt;<i> Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
</I>&gt;&gt;&gt;&gt;<i> import mod_python
</I>&gt;&gt;&gt;&gt;<i> from mod_python import *
</I>&gt;<i> Traceback (most recent call last):
</I>&gt;<i>  File &quot;&lt;stdin&gt;&quot;, line 1, in ?
</I>&gt;<i>  File &quot;/usr/local/lib/python2.3/site-packages/mod_python/apache.py&quot;, 
</I>&gt;<i> line 28, in ?
</I>&gt;<i>    import _apache
</I>&gt;<i> ImportError: No module named _apache
</I>&gt;<i> ==========
</I>&gt;<i> I have tried many different configurations for mod_python and none of 
</I>&gt;<i> them have worked so far. The one I currently have which fails is the 
</I>&gt;<i> very simple:
</I>&gt;<i> &lt;Directory /usr/local/apache2/htdocs&gt;
</I>&gt;<i> AddHandler mod_python .py
</I>&gt;<i> PythonHandler mptest
</I>&gt;<i> PythonDebug On
</I>&gt;<i> &lt;/Directory&gt;
</I>&gt;<i>
</I>&gt;<i> Is there some special flag for mod_python's configure?
</I>&gt;<i> Thanks for helping!
</I>&gt;<i> -Dave
</I>&gt;<i>
</I>&gt;<i> ----- Original Message ----- From: &quot;Nicolas Lehuen&quot; 
</I>&gt;<i> &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">nicolas.lehuen at gmail.com</A>&gt;
</I>&gt;<i> To: &quot;Dave Britton&quot; &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">dave at davebritton.com</A>&gt;
</I>&gt;<i> Cc: &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython.org</A>&gt;
</I>&gt;<i> Sent: Tuesday, March 22, 2005 8:23 AM
</I>&gt;<i> Subject: Re: [mod_python] apache2 won't load mod_python
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> Hi,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> mod_python is loaded all right, but it cannot find the mod_python
</I>&gt;&gt;<i> module. If you login under the same account Apache is running under,
</I>&gt;&gt;<i> can you also import mod_python ? Could you give us your httpd.conf
</I>&gt;&gt;<i> lines related to the mod_python configuration ?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Regards,
</I>&gt;&gt;<i> Nicolas
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Tue, 22 Mar 2005 08:05:49 -0500, Dave Britton 
</I>&gt;&gt;<i> &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">dave at davebritton.com</A>&gt; wrote:
</I>&gt;&gt;&gt;<i> I have built apache 2.053 and mod_python 3.1.4 and apache serves 
</I>&gt;&gt;&gt;<i> pages ok,
</I>&gt;&gt;&gt;<i> and python will import mod_python, so both exist in the right 
</I>&gt;&gt;&gt;<i> places, but I
</I>&gt;&gt;&gt;<i> get this error message, on attempting to access the simple mptest.py
</I>&gt;&gt;&gt;<i> example:
</I>&gt;&gt;&gt;<i> ========
</I>&gt;&gt;&gt;<i> [Tue Mar 22 13:38:42 2005] [notice] SIGHUP received.  Attempting to 
</I>&gt;&gt;&gt;<i> restart
</I>&gt;&gt;&gt;<i> [Tue Mar 22 13:38:42 2005] [notice] mod_python: Creating 25 session 
</I>&gt;&gt;&gt;<i> mutexes
</I>&gt;&gt;&gt;<i> based on 25 max processes and 0 max threads.
</I>&gt;&gt;&gt;<i> [Tue Mar 22 13:38:42 2005] [notice] Apache/2.0.53 (Unix) 
</I>&gt;&gt;&gt;<i> mod_python/3.1.4
</I>&gt;&gt;&gt;<i> Python/2.3.3 configured -- resuming normal operations
</I>&gt;&gt;&gt;<i> [Tue Mar 22 13:38:42 2005] [info] Server built: Mar 16 2005 19:13:58
</I>&gt;&gt;&gt;<i> [Tue Mar 22 13:38:42 2005] [debug] prefork.c(956): AcceptMutex: 
</I>&gt;&gt;&gt;<i> sysvsem
</I>&gt;&gt;&gt;<i> (default: sysvsem)
</I>&gt;&gt;&gt;<i> [Tue Mar 22 13:39:17 2005] [error] make_obcallback: could not import
</I>&gt;&gt;&gt;<i> mod_python.apache.\n
</I>&gt;&gt;&gt;<i> [<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">root at ap1</A> apache2]#
</I>&gt;&gt;&gt;<i> ========
</I>&gt;&gt;&gt;<i> apache was built with the configure --enable-so option, to allow DSO
</I>&gt;&gt;&gt;<i> imports.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I've been struggling with this for a couple of days, and I am 
</I>&gt;&gt;&gt;<i> clueless. I'd
</I>&gt;&gt;&gt;<i> appreciate any help!
</I>&gt;&gt;&gt;<i> Thanks!
</I>&gt;&gt;&gt;<i> -Dave
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;<i> Mod_python mailing list
</I>&gt;&gt;&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;&gt;&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017739.html">[mod_python] apache2 won't load mod_python
</A></li>
	<LI>Next message: <A HREF="017757.html">[mod_python] apache2 won't load mod_python
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17740">[ date ]</a>
              <a href="thread.html#17740">[ thread ]</a>
              <a href="subject.html#17740">[ subject ]</a>
              <a href="author.html#17740">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
