<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Re: mod_python.publisher and Cheetah
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20mod_python.publisher%20and%20Cheetah&In-Reply-To=20050315112853.GB14336%40sources.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017652.html">
   <LINK REL="Next"  HREF="017753.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Re: mod_python.publisher and Cheetah</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20mod_python.publisher%20and%20Cheetah&In-Reply-To=20050315112853.GB14336%40sources.org"
       TITLE="[mod_python] Re: mod_python.publisher and Cheetah">grahamd at dscpl.com.au
       </A><BR>
    <I>Tue Mar 15 16:03:29 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="017652.html">[mod_python] Re: mod_python.publisher and Cheetah
</A></li>
        <LI>Next message: <A HREF="017753.html">[mod_python] Re: mod_python.publisher and Cheetah
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17659">[ date ]</a>
              <a href="thread.html#17659">[ thread ]</a>
              <a href="subject.html#17659">[ subject ]</a>
              <a href="author.html#17659">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 15/03/2005, at 10:28 PM, Stephane Bortzmeyer wrote:

&gt;<i> On Mon, Mar 14, 2005 at 06:25:50PM -0500,
</I>&gt;<i>  Graham Dumpleton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">grahamd at dscpl.com.au</A>&gt; wrote
</I>&gt;&gt;<i>   target = req.filename + &quot;.py&quot;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>   if not os.path.exists(target):
</I>&gt;&gt;<i>     return apache.DECLINED
</I>&gt;<i>
</I>&gt;<i> I changed it (personal preference and I have only Python content) to:
</I>&gt;<i>
</I>&gt;<i>   if req.filename[:-3] != &quot;.py&quot;:
</I>&gt;<i>      target = req.filename + &quot;.py&quot;
</I>&gt;<i>   else:
</I>&gt;<i>      target = req.filename
</I>&gt;<i>
</I>&gt;<i>   if not os.path.exists(target):
</I>&gt;<i>     raise apache.SERVER_RETURN, apache.HTTP_NOT_FOUND
</I>
I would strongly recommend against changing apache.DECLINED to
apache.HTTP_NOT_FOUND, it is there for a very specific reason.

By using apache.DECLINED, it is possible to put other types of
files such as images, plain text etc into the same directory
and Apache will serve them up without you having to go to
contortions in the Apache configuration to have it only use
mod_python for &quot;.py&quot; or some other extension. It is also not
really good practice to use &quot;.py&quot; extension in a URL anyway as
that is then exposing to a user of your web site what you are
using to implement the web site. This can open up security
issues in as much as they have a better idea of what potential
security holes to probe. Using &quot;.py&quot; extension also makes it
harder to change internally how pages are implemented to some
other Python based toolkit as you are more likely to have to
change the URL, thus invalidating bookmarks, search engine
databases etc. Thus, you are better off using REST style of no
extension, or use &quot;.html&quot; if it truly is HTML content.

For example, to use &quot;.html&quot; extension you might to the extent
of having:

   # Only interpret &quot;.html&quot; requests.

   target,extn = os.path.splitext(req.filename)

   if extn != &quot;.html&quot;:
     return apache.DECLINED

   # We only want to treat request as being a possible
   # request for a Cheetah generated template file if
   # there exists both a &quot;.tmpl&quot; and &quot;.py&quot; file.

   target_tmpl = target + &quot;.tmpl&quot;
   target_py = target + &quot;.py&quot;

   if not os.path.exists(target_tmpl) and not os.path.exists(target_py):
     return apache.DECLINED

This will allow &quot;.html&quot; requests for virtual pages generated from
Cheetah templates, presuming &quot;.tmpl&quot; is in same directory, or a
static &quot;.html&quot; constructed by hand residing in the same directory.
The latter will work because DECLINED is returned, which gives Apache
a second chance at it, instead of HTTP_NOT_FOUND, which gives it no
chance.

Graham

</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017652.html">[mod_python] Re: mod_python.publisher and Cheetah
</A></li>
	<LI>Next message: <A HREF="017753.html">[mod_python] Re: mod_python.publisher and Cheetah
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17659">[ date ]</a>
              <a href="thread.html#17659">[ thread ]</a>
              <a href="subject.html#17659">[ subject ]</a>
              <a href="author.html#17659">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
