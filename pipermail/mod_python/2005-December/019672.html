<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] How check permissions to GET JPG image
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20How%20check%20permissions%20to%20GET%20JPG%20image&In-Reply-To=1603761136.20051206151515%40tut.by">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019671.html">
   <LINK REL="Next"  HREF="019673.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] How check permissions to GET JPG image</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Mike Looijmans</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20How%20check%20permissions%20to%20GET%20JPG%20image&In-Reply-To=1603761136.20051206151515%40tut.by"
       TITLE="[mod_python] How check permissions to GET JPG image">nlv11281 at natlab.research.philips.com
       </A><BR>
    <I>Tue Dec  6 08:34:13 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="019671.html">[mod_python] How check permissions to GET JPG image
</A></li>
        <LI>Next message: <A HREF="019673.html">[mod_python] How check permissions to GET JPG image
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19672">[ date ]</a>
              <a href="thread.html#19672">[ thread ]</a>
              <a href="subject.html#19672">[ subject ]</a>
              <a href="author.html#19672">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;&gt;&gt;<i>When I use req.sendfile() all works exept for download resume. After
</I>&gt;&gt;&gt;<i>download stops at middle, resume is impossibe. Error in download
</I>&gt;&gt;&gt;<i>manager when trying resume.
</I>&gt;<i> 
</I>&gt;<i> ML&gt; You will probably have to implement the HTTP/1.1 &quot;Range&quot; header. Is not
</I>&gt;<i> ML&gt; hard to program, but will take a little finger typing. Find the HTTP RFC
</I>&gt;<i> ML&gt; 2616, and look for &quot;Range&quot;.
</I>&gt;<i> 
</I>&gt;<i> How i can access HTTP/1.1 &quot;Range&quot; header from mod_python? I found
</I>&gt;<i> nothing about &quot;Range&quot; header. &quot;req.range&quot; always &quot;None&quot;,
</I>&gt;<i> &quot;req.headers_out&quot; do nothing at least when using with
</I>&gt;<i> &quot;req.sendfile()&quot;.
</I>&gt;<i> As i understand, Apache or rewrite header when using &quot;req.sendfile()&quot;.
</I>&gt;<i> And this is main problem.
</I>
The Range header is sent by the client, so it will be in headers_in (not 
in headers-out, which is what the client will receive from you).

You must read the RFC2616 documentation and implement what is described 
there. I'm sorry, there's no free lunch.

But before doing so, verify that your &quot;download manager&quot; is actually 
using that header. One way to do so is to abort a download, attempt a 
resume and see what gets sent to the server (have your python script 
dump the headers_in to a text file or so). If there's no &quot;Range&quot; in the 
headers, implementing it will not help you solve your problem.

The range header normally specifies what the client wants, so you can 
set up a correct response (read the RFC!) open the file, seek to the 
requested position (using file.seek(..)) and start sending from there.

</PRE>



























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019671.html">[mod_python] How check permissions to GET JPG image
</A></li>
	<LI>Next message: <A HREF="019673.html">[mod_python] How check permissions to GET JPG image
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19672">[ date ]</a>
              <a href="thread.html#19672">[ thread ]</a>
              <a href="subject.html#19672">[ subject ]</a>
              <a href="author.html#19672">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
