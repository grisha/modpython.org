<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Configuring mod_python via reverse proxy
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Configuring%20mod_python%20via%20reverse%20proxy&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019794.html">
   <LINK REL="Next"  HREF="019792.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Configuring mod_python via reverse proxy</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Configuring%20mod_python%20via%20reverse%20proxy&In-Reply-To="
       TITLE="[mod_python] Configuring mod_python via reverse proxy">grahamd at dscpl.com.au
       </A><BR>
    <I>Thu Dec 15 23:02:49 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="019794.html">[mod_python] Configuring mod_python via reverse proxy
</A></li>
        <LI>Next message: <A HREF="019792.html">[mod_python] Configuring mod_python via reverse proxy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19791">[ date ]</a>
              <a href="thread.html#19791">[ thread ]</a>
              <a href="subject.html#19791">[ subject ]</a>
              <a href="author.html#19791">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Roberto Sanchez wrote ..
&gt;<i> Graham Dumpleton wrote:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; So we know exactly where you are coming from, what do you understand
</I>&gt;<i> &gt; as being the &quot;problems encountered by using mod_python on a shared
</I>&gt;<i> &gt; machine&quot;?
</I>&gt;<i> &gt; 
</I>&gt;<i> I was under the impression that there was the possibility of 
</I>&gt;<i> &quot;cross-polution&quot; by having different users' python scripts running under
</I>&gt;<i> a single apache instance.
</I>&gt;<i> 
</I>&gt;<i> For example, from the Apache security tips:
</I>&gt;<i> 
</I>&gt;<i> &quot;Embedded scripting options which run as part of the server itself, such
</I>&gt;<i> as mod_php, mod_perl, mod_tcl, and mod_python, run under the identity of
</I>&gt;<i> the server itself (see the User directive), and therefore scripts 
</I>&gt;<i> executed by these engines potentially can access anything the server 
</I>&gt;<i> user can. Some scripting engines may provide restrictions, but it is 
</I>&gt;<i> better to be safe and assume not.&quot;
</I>
Yes, except that there are really two issues here. The first as you
highlight is that all scripts run as the same user.

The bigger immediate problem is the potential cross pollution of Python
modules and the visibility of another users Python modules within the
executing process. This will occur where requests for each user are
handled within the context of one Python interpreter instance, which is
the default if both users requests are handled within the context of the
same virtual host.

With a bit of work, one could specify in the main Apache configuration
file that each user has a distinct interpreter using PythonInterpreter
directive, but there is no way of stopping the user changing it to
something else in .htaccess file, bar preventing the use of .htaccess
file altogether.

The consequence of this is that I could use PythonInterpreter to name
some other users interpreter and create special handlers that allowed
me to then browse all his loaded modules looking for senstive data
such as login details, or cached data out of a database etc.

What is really required in mod_python is a way for an administrator to
set PythonInterpreter in the main Apache configuration differently for
differently parts of the URL namespace and then set some other option
to say that it cannot be overridden in a .htaccess file at all.

This way the administrator has better control and can ensure some
seperation. I'm not sure though whether there is a means by which it
could be added to mod_python such that this could be done. Would need
some digging into the Apache internals.

This wouldn't solve the problem completely though, as the fact that
all users code runs as the same actual user, means that you could just
read the source code in direct as text and steal it that way. This means
someone is doing it deliberately, but at present with how mod_python
works, the cross pollution of in memory modules can lead to unexpected
behaviour without even trying. Hopefully mod_python 3.3 will solve this
with the module importing system being reimplemented.

So yes, your concerns are quite valid and no there aren't any simple
answers. :-(

Graham
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019794.html">[mod_python] Configuring mod_python via reverse proxy
</A></li>
	<LI>Next message: <A HREF="019792.html">[mod_python] Configuring mod_python via reverse proxy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19791">[ date ]</a>
              <a href="thread.html#19791">[ thread ]</a>
              <a href="subject.html#19791">[ subject ]</a>
              <a href="author.html#19791">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
