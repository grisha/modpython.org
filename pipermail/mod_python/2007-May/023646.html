<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [SPAM] Re: [mod_python] mod_python+Apache2+OpenSSL
	missconfiguration?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5BSPAM%5D%20Re%3A%20%5Bmod_python%5D%20mod_python%2BApache2%2BOpenSSL%0A%09missconfiguration%3F&In-Reply-To=1916f5340705171151s4f26b25ai4b4f4f7537acebcb%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023645.html">
   <LINK REL="Next"  HREF="023697.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[SPAM] Re: [mod_python] mod_python+Apache2+OpenSSL
	missconfiguration?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5BSPAM%5D%20Re%3A%20%5Bmod_python%5D%20mod_python%2BApache2%2BOpenSSL%0A%09missconfiguration%3F&In-Reply-To=1916f5340705171151s4f26b25ai4b4f4f7537acebcb%40mail.gmail.com"
       TITLE="[SPAM] Re: [mod_python] mod_python+Apache2+OpenSSL
	missconfiguration?">graham.dumpleton at gmail.com
       </A><BR>
    <I>Thu May 17 17:53:57 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023645.html">[SPAM] Re: [mod_python] mod_python+Apache2+OpenSSL missconfiguration?
</A></li>
        <LI>Next message: <A HREF="023697.html">[SPAM] Re: [mod_python] mod_python+Apache2+OpenSSL
	missconfiguration?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23646">[ date ]</a>
              <a href="thread.html#23646">[ thread ]</a>
              <a href="subject.html#23646">[ subject ]</a>
              <a href="author.html#23646">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hmmm, looking at code, the SSL code in Apache is probably embedded
within the actual httpd rather than being linked in. Running:

  nm /usr/local/apache2/bin/httpd | grep ssl

would probably show that to be the case. If it is and the problems are
the result of a clash between the embedded version of SSL and the
external libraries, then solution would be to tell Apache to use
external SSL libraries using the Apache configure script option:

  --with-ssl=DIR          OpenSSL SSL/TLS toolkit

Thus rebuilding Apache to use same external SSL library may be one thing to try.

The next thing I was going to suggest you do was to take a standalone
test program that shows that what you are trying to do works outside
of Apache and make sure it still works when you run it as the same
user that Apache runs as and from the root directory of your
filesystem.

Doing this would check two things. The first is whether it is user
related and second whether it could be the result of things being run
in a directory where no write access is available.

Graham

On 18/05/07, Johans Taboada &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">jmt4b04d4v at gmail.com</A>&gt; wrote:
&gt;<i> 2007/5/15, Graham Dumpleton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>&gt;:
</I>&gt;<i> &gt; If you are relying on SSL client abilities of Python modules, you are
</I>&gt;<i> &gt; probably having a clash of some sort between version of SSL libraries
</I>&gt;<i> &gt; Apache is compiled with and those that Apache module is using.
</I>&gt;<i> &gt; Determine what version of SSL libraries your Apache is using and that
</I>&gt;<i> &gt; which your Python module is using. If they are different then problems
</I>&gt;<i> &gt; may occur as the Apache version will be used in preference to that
</I>&gt;<i> &gt; which the Python module may be linked against.
</I>&gt;<i>
</I>&gt;<i> Sorry for late response, and thanks for the advice Graham.
</I>&gt;<i>
</I>&gt;<i> I've checked the libraries with ldd, but seems to me that they're fine, I
</I>&gt;<i> recognize although that I'm not a linux expert . I post ldd results, maybe
</I>&gt;<i> there's something wrong I don't recognize:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">root at PCDCOM</A>:/usr/src/trac/pyPgSQL-2.5.1# ldd /usr/bin/python2.4
</I>&gt;<i>         linux-gate.so.1 =&gt;  (0xffffe000)
</I>&gt;<i>         libpthread.so.0 =&gt;
</I>&gt;<i> /lib/tls/i686/cmov/libpthread.so.0 (0xb7f72000)
</I>&gt;<i>         libdl.so.2 =&gt; /lib/tls/i686/cmov/libdl.so.2 (0xb7f6e000)
</I>&gt;<i>         libutil.so.1 =&gt; /lib/tls/i686/cmov/libutil.so.1 (0xb7f6a000)
</I>&gt;<i>         libm.so.6 =&gt; /lib/tls/i686/cmov/libm.so.6 (0xb7f44000)
</I>&gt;<i>         libc.so.6 =&gt; /lib/tls/i686/cmov/libc.so.6 (0xb7e10000)
</I>&gt;<i>         /lib/ld-linux.so.2 (0xb7f8f000)
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">root at PCDCOM</A>:/usr/src/trac/pyPgSQL-2.5.1# ldd
</I>&gt;<i> /usr/local/lib/python2.4/site-packages/psycopg2/_psycopg.so
</I>&gt;<i>         linux-gate.so.1 =&gt;  (0xffffe000)
</I>&gt;<i>         libpq.so.4 =&gt; /usr/lib/libpq.so.4 (0xb7f45000)
</I>&gt;<i>         libpthread.so.0 =&gt;
</I>&gt;<i> /lib/tls/i686/cmov/libpthread.so.0 (0xb7f32000)
</I>&gt;<i>         libc.so.6 =&gt; /lib/tls/i686/cmov/libc.so.6 (0xb7dfe000)
</I>&gt;<i>         libssl.so.0.9.8 =&gt;
</I>&gt;<i> /usr/lib/i686/cmov/libssl.so.0.9.8 (0xb7dbf000)
</I>&gt;<i>         libcrypto.so.0.9.8 =&gt;
</I>&gt;<i> /usr/lib/i686/cmov/libcrypto.so.0.9.8 (0xb7c85000)
</I>&gt;<i>         libkrb5.so.3 =&gt; /usr/lib/libkrb5.so.3 (0xb7c09000)
</I>&gt;<i>         libcom_err.so.2 =&gt; /lib/libcom_err.so.2 (0xb7c05000)
</I>&gt;<i>         libcrypt.so.1 =&gt; /lib/tls/i686/cmov/libcrypt.so.1
</I>&gt;<i> (0xb7bd7000)
</I>&gt;<i>         /lib/ld-linux.so.2 (0x80000000)
</I>&gt;<i>         libdl.so.2 =&gt; /lib/tls/i686/cmov/libdl.so.2 (0xb7bd3000)
</I>&gt;<i>         libz.so.1 =&gt; /usr/lib/libz.so.1 (0xb7bbf000)
</I>&gt;<i>         libk5crypto.so.3 =&gt; /usr/lib/libk5crypto.so.3 (0xb7b9a000)
</I>&gt;<i>         libresolv.so.2 =&gt; /lib/tls/i686/cmov/libresolv.so.2
</I>&gt;<i> (0xb7b86000)
</I>&gt;<i>         libkrb5support.so.0 =&gt; /usr/lib/libkrb5support.so.0 (0xb7b81000)
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">root at PCDCOM</A>:/usr/src/trac/pyPgSQL-2.5.1# ldd
</I>&gt;<i> /usr/local/lib/python2.4/site-packages/pyPgSQL/libpq/libpqmodule.so
</I>&gt;<i>         linux-gate.so.1 =&gt;  (0xffffe000)
</I>&gt;<i>         libpq.so.4 =&gt; /usr/lib/libpq.so.4 (0xb7fb4000)
</I>&gt;<i>         libpthread.so.0 =&gt;
</I>&gt;<i> /lib/tls/i686/cmov/libpthread.so.0 (0xb7fa1000)
</I>&gt;<i>         libc.so.6 =&gt; /lib/tls/i686/cmov/libc.so.6 (0xb7e6d000)
</I>&gt;<i>         libssl.so.0.9.8 =&gt;
</I>&gt;<i> /usr/lib/i686/cmov/libssl.so.0.9.8 (0xb7e2e000)
</I>&gt;<i>         libcrypto.so.0.9.8 =&gt;
</I>&gt;<i> /usr/lib/i686/cmov/libcrypto.so.0.9.8 (0xb7cf4000)
</I>&gt;<i>         libkrb5.so.3 =&gt; /usr/lib/libkrb5.so.3 (0xb7c78000)
</I>&gt;<i>         libcom_err.so.2 =&gt; /lib/libcom_err.so.2 (0xb7c74000)
</I>&gt;<i>         libcrypt.so.1 =&gt; /lib/tls/i686/cmov/libcrypt.so.1
</I>&gt;<i> (0xb7c46000)
</I>&gt;<i>         /lib/ld-linux.so.2 (0x80000000)
</I>&gt;<i>         libdl.so.2 =&gt; /lib/tls/i686/cmov/libdl.so.2 (0xb7c42000)
</I>&gt;<i>         libz.so.1 =&gt; /usr/lib/libz.so.1 (0xb7c2e000)
</I>&gt;<i>         libk5crypto.so.3 =&gt; /usr/lib/libk5crypto.so.3 (0xb7c09000)
</I>&gt;<i>         libresolv.so.2 =&gt; /lib/tls/i686/cmov/libresolv.so.2
</I>&gt;<i> (0xb7bf5000)
</I>&gt;<i>         libkrb5support.so.0 =&gt; /usr/lib/libkrb5support.so.0 (0xb7bf0000)
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">root at PCDCOM</A>:/usr/src/trac/pyPgSQL-2.5.1# ldd /usr/local/apache2/bin/httpd
</I>&gt;<i>         linux-gate.so.1 =&gt;  (0xffffe000)
</I>&gt;<i>         libaprutil-0.so.0 =&gt;
</I>&gt;<i> /usr/local/apache2/lib/libaprutil-0.so.0 (0xb7f1b000)
</I>&gt;<i>         libdb-4.4.so =&gt; /usr/lib/libdb-4.4.so (0xb7e17000)
</I>&gt;<i>         libexpat.so.0 =&gt;
</I>&gt;<i> /usr/local/apache2/lib/libexpat.so.0 (0xb7df9000)
</I>&gt;<i>         libapr-0.so.0 =&gt; /usr/local/apache2/lib/libapr-0.so.0 (0xb7dd8000)
</I>&gt;<i>         librt.so.1 =&gt; /lib/tls/i686/cmov/librt.so.1 (0xb7dcf000)
</I>&gt;<i>         libm.so.6 =&gt; /lib/tls/i686/cmov/libm.so.6 (0xb7da9000)
</I>&gt;<i>         libcrypt.so.1 =&gt; /lib/tls/i686/cmov/libcrypt.so.1
</I>&gt;<i> (0xb7d7a000)
</I>&gt;<i>         libnsl.so.1 =&gt; /lib/tls/i686/cmov/libnsl.so.1 (0xb7d64000)
</I>&gt;<i>          libpthread.so.0 =&gt;
</I>&gt;<i> /lib/tls/i686/cmov/libpthread.so.0 (0xb7d51000)
</I>&gt;<i>         libdl.so.2 =&gt; /lib/tls/i686/cmov/libdl.so.2 (0xb7d4d000)
</I>&gt;<i>         libc.so.6 =&gt; /lib/tls/i686/cmov/libc.so.6 (0xb7c19000)
</I>&gt;<i>          /lib/ld-linux.so.2 (0xb7f32000)
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">root at PCDCOM</A>:/usr/src/trac/pyPgSQL-2.5.1# ldd /usr/lib/libpq.so.4
</I>&gt;<i>         linux-gate.so.1 =&gt;  (0xffffe000)
</I>&gt;<i>         libssl.so.0.9.8 =&gt;
</I>&gt;<i> /usr/lib/i686/cmov/libssl.so.0.9.8 (0xb7ea5000)
</I>&gt;<i>         libcrypto.so.0.9.8 =&gt;
</I>&gt;<i> /usr/lib/i686/cmov/libcrypto.so.0.9.8 (0xb7d6b000)
</I>&gt;<i>         libkrb5.so.3 =&gt; /usr/lib/libkrb5.so.3 (0xb7cef000)
</I>&gt;<i>         libcom_err.so.2 =&gt; /lib/libcom_err.so.2 (0xb7cec000)
</I>&gt;<i>         libcrypt.so.1 =&gt; /lib/tls/i686/cmov/libcrypt.so.1
</I>&gt;<i> (0xb7cbe000)
</I>&gt;<i>         libpthread.so.0 =&gt;
</I>&gt;<i> /lib/tls/i686/cmov/libpthread.so.0 (0xb7cab000)
</I>&gt;<i>         libc.so.6 =&gt; /lib/tls/i686/cmov/libc.so.6 (0xb7b76000)
</I>&gt;<i>         libdl.so.2 =&gt; /lib/tls/i686/cmov/libdl.so.2 (0xb7b72000)
</I>&gt;<i>         libz.so.1 =&gt; /usr/lib/libz.so.1 (0xb7b5e000)
</I>&gt;<i>         libk5crypto.so.3 =&gt; /usr/lib/libk5crypto.so.3 (0xb7b39000)
</I>&gt;<i>         libresolv.so.2 =&gt; /lib/tls/i686/cmov/libresolv.so.2
</I>&gt;<i> (0xb7b26000)
</I>&gt;<i>         /lib/ld-linux.so.2 (0x80000000)
</I>&gt;<i>         libkrb5support.so.0 =&gt; /usr/lib/libkrb5support.so.0 (0xb7b20000)
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">root at PCDCOM</A> :/usr/src/trac/pyPgSQL-2.5.1# ldd
</I>&gt;<i> /usr/local/apache2/modules/mod_python.so
</I>&gt;<i>         linux-gate.so.1 =&gt;  (0xffffe000)
</I>&gt;<i>         libpthread.so.0 =&gt;
</I>&gt;<i> /lib/tls/i686/cmov/libpthread.so.0 (0xb7dca000)
</I>&gt;<i>         libdl.so.2 =&gt; /lib/tls/i686/cmov/libdl.so.2 (0xb7dc6000)
</I>&gt;<i>         libutil.so.1 =&gt; /lib/tls/i686/cmov/libutil.so.1 (0xb7dc2000)
</I>&gt;<i>         libm.so.6 =&gt; /lib/tls/i686/cmov/libm.so.6 (0xb7d9c000)
</I>&gt;<i>         libc.so.6 =&gt; /lib/tls/i686/cmov/libc.so.6 (0xb7c68000)
</I>&gt;<i>         /lib/ld-linux.so.2 (0x80000000)
</I>&gt;<i>
</I>&gt;<i> I've taken a look at python modules (psycopg2 and pyPgSQL) and I guess I've
</I>&gt;<i> identified where exceptions generate. It's in '''PQstatus(pgconnection)'''
</I>&gt;<i> call (using libpq postgresql client library from '''python-module libpq
</I>&gt;<i> wrapper''').
</I>&gt;<i>
</I>&gt;<i> psycopg2-2.0.5.1/psycopg/connection_int.c#L82
</I>&gt;<i>     else if (PQstatus(pgconn) == CONNECTION_BAD)
</I>&gt;<i>     {
</I>&gt;<i>         Dprintf(&quot;conn_connect: PQconnectdb(%s) returned BAD&quot;, self-&gt;dsn);
</I>&gt;<i>         PyErr_SetString(OperationalError,
</I>&gt;<i> PQerrorMessage(pgconn));
</I>&gt;<i>         PQfinish(pgconn);
</I>&gt;<i>         return -1;
</I>&gt;<i>     }
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> pyPgSQL-2.5.1/pgconnection.c#L698
</I>&gt;<i>     if (PQstatus(PgConnection_Get(self)) != CONNECTION_OK)
</I>&gt;<i>     {
</I>&gt;<i>         PyErr_SetString(PqErr_DatabaseError,
</I>&gt;<i>
</I>&gt;<i> PQerrorMessage(PgConnection_Get(self)));
</I>&gt;<i>         PQfinish(PgConnection_Get(self));
</I>&gt;<i>         PgConnection_Get(self) = (PGconn *)NULL;
</I>&gt;<i>         return NULL;
</I>&gt;<i>     }
</I>&gt;<i>
</I>&gt;<i> It may help demystify my issue.
</I>&gt;<i>
</I>&gt;<i> Greetings,
</I>&gt;<i>
</I>&gt;<i> --------------------------------------------------------
</I>&gt;<i> Johans Marvin Taboada Villca    -`^_^&#180;- .o0O( 2007-04-24, Bienvenida
</I>&gt;<i> Bebecita )
</I>&gt;<i> --------------------------------------------------------
</I>&gt;<i> Adm. Laboratorio de Desarrollo de Software
</I>&gt;<i> Carreras de Inform&#225;tica y Sistemas
</I>&gt;<i> UMSS, Cochabamba
</I>&gt;<i> Bolivia
</I>&gt;<i> --------------------------------------------------------
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I>&gt;<i>
</I>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023645.html">[SPAM] Re: [mod_python] mod_python+Apache2+OpenSSL missconfiguration?
</A></li>
	<LI>Next message: <A HREF="023697.html">[SPAM] Re: [mod_python] mod_python+Apache2+OpenSSL
	missconfiguration?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23646">[ date ]</a>
              <a href="thread.html#23646">[ thread ]</a>
              <a href="subject.html#23646">[ subject ]</a>
              <a href="author.html#23646">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
