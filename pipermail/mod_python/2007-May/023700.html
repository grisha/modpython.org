<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] os.system-not working
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20os.system-not%20working&In-Reply-To=604080.44340.qm%40web7808.mail.in.yahoo.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023699.html">
   <LINK REL="Next"  HREF="023701.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] os.system-not working</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20os.system-not%20working&In-Reply-To=604080.44340.qm%40web7808.mail.in.yahoo.com"
       TITLE="[mod_python] os.system-not working">graham.dumpleton at gmail.com
       </A><BR>
    <I>Sun May 27 16:52:50 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023699.html">[mod_python] os.system-not working
</A></li>
        <LI>Next message: <A HREF="023701.html">[mod_python] Inspect request body before handing it over to
	mod_proxy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23700">[ date ]</a>
              <a href="thread.html#23700">[ thread ]</a>
              <a href="subject.html#23700">[ subject ]</a>
              <a href="author.html#23700">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 27/05/07, deepak battu &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">deepak.battu at yahoo.co.in</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> hello graham,
</I>&gt;<i> i have tried it by using the absolute path like this :
</I>&gt;<i>     cmd = &quot;/usr/bin/nmap -O &quot; + myip + &quot;&gt; /tmp/tmp.txt&quot;
</I>&gt;<i>     os.system(cmd)
</I>&gt;<i> but no change.
</I>
Change your command to:

     cmd = &quot;/usr/bin/nmap -O &quot; + myip + &quot;&gt; /tmp/tmp.txt 2&gt;&amp;1&quot;
     os.system(cmd)

This will ensure that standard error is also capture into output file
and you can then maybe see what is going wrong with your command line.

Another option is to have:

  import sys
  sys.stderr.flush()

immediately after os.system call to ensure that any standard error
messages are properly flushed through to Apache log.

Also suggest you log then actual command being run to the Apache error
log before you do it. Ie.,

     cmd = &quot;/usr/bin/nmap -O &quot; + myip + &quot;&gt; /tmp/tmp.txt 2&gt;&amp;1&quot;
     apache.log_error('RUNNING: ' + cmd)
     os.system(cmd)

Then you can see what what is being run is what you expect.

Note, please use reply-all so discussion stays on the mailing list as
others may have ideas.

Graham

&gt;<i>  i have votice that this thing worked for another command:
</I>&gt;<i>    cmd = &quot;/usr/bin/nmap -sP &quot; + myip + &quot;&gt; /tmp/tmp.txt&quot;
</I>&gt;<i>      os.system(cmd)
</I>&gt;<i>
</I>&gt;<i> and coming to the myip variable it is giving the correct ip .
</I>&gt;<i> plz help me.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ----- Original Message ----
</I>&gt;<i> From: Graham Dumpleton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>&gt;
</I>&gt;<i> To: deepak battu &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">deepak.battu at yahoo.co.in</A>&gt;
</I>&gt;<i> Cc: <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython.org</A>
</I>&gt;<i> Sent: Sunday, 27 May, 2007 4:54:28 PM
</I>&gt;<i> Subject: Re: [mod_python] os.system-not working
</I>&gt;<i>
</I>&gt;<i> On 27/05/07, deepak battu &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">deepak.battu at yahoo.co.in</A>&gt; wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; cmd = &quot;nmap -O &quot; + myip + &quot;&gt;
</I>&gt;<i> &gt; /usr/local/apache2/htdocs/test/temp/tmp.txt&quot;
</I>&gt;<i> &gt;  os.system(cmd)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;  Iran this code in python it is working but when i run this in mod_python
</I>&gt;<i> &gt; through apache it is not showing any errors but not giving the correct
</I>&gt;<i> &gt; result. plz help me.
</I>&gt;<i>
</I>&gt;<i> Specify an absolute path for the location of 'nmap' because Apache
</I>&gt;<i> runs with a quite restrictive PATH and thus the program may not be
</I>&gt;<i> able to be found.
</I>&gt;<i>
</I>&gt;<i> Also, Apache runs as a special user which may not have write access to
</I>&gt;<i> where you are trying to write the output. Try writing the output file
</I>&gt;<i> to /tmp instead.
</I>&gt;<i>
</I>&gt;<i> Finally, I hope your 'myip' value isn't being supplied through a user
</I>&gt;<i> editable field in a form because if it has you have just exposed your
</I>&gt;<i> box in a way that a remote user could execute arbitrary commands on
</I>&gt;<i> your box.
</I>&gt;<i>
</I>&gt;<i> Graham
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  ________________________________
</I>&gt;<i>  Download prohibited? No problem! CHAT from any browser, without download.
</I></PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023699.html">[mod_python] os.system-not working
</A></li>
	<LI>Next message: <A HREF="023701.html">[mod_python] Inspect request body before handing it over to
	mod_proxy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23700">[ date ]</a>
              <a href="thread.html#23700">[ thread ]</a>
              <a href="subject.html#23700">[ subject ]</a>
              <a href="author.html#23700">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
