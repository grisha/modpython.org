<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] import_module is case sensitive even if the OS isn't
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20import_module%20is%20case%20sensitive%20even%20if%20the%20OS%20isn%27t&In-Reply-To=88e286470705140349m65aa11d6n42454c6d0608acb5%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023615.html">
   <LINK REL="Next"  HREF="023617.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] import_module is case sensitive even if the OS isn't</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Mike Looijmans</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20import_module%20is%20case%20sensitive%20even%20if%20the%20OS%20isn%27t&In-Reply-To=88e286470705140349m65aa11d6n42454c6d0608acb5%40mail.gmail.com"
       TITLE="[mod_python] import_module is case sensitive even if the OS isn't">nlv11281 at natlab.research.philips.com
       </A><BR>
    <I>Mon May 14 09:20:24 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023615.html">[mod_python] import_module is case sensitive even if the OS isn't
</A></li>
        <LI>Next message: <A HREF="023617.html">[mod_python] import_module is case sensitive even if the OS isn't
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23616">[ date ]</a>
              <a href="thread.html#23616">[ thread ]</a>
              <a href="subject.html#23616">[ subject ]</a>
              <a href="author.html#23616">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>There is a system call that discloses whether a file system is case sensitive or not. However, the 
problem is not trivial, as there may be links to other devices in the path. For example, 
C:\mnt\somedir might point to another drive with a case sensitive filesystem, which would make the 
&quot;mnt&quot; word case insensitive and the &quot;somedir&quot; word case sensitive. I doubt that the normcase() 
function can cope with that, but i did not even know of its existance up until now.

I'm using an ext2 filesystem under Windows 2000 on a harddisk, and that's local and case sensitive 
indeed.

Probably the safest thing is to open the file and ask whether it's the same file.

The same question then would apply to unix/linux systems, would you want the module loaded as 
&quot;/real/path.py&quot; to be considered the same module as &quot;/softlink/path.py&quot; ?

With all of that - i think it's reasonable to require the same module to be spelled the same way. 
The cure seems more harmful than the disease, since it allows the module importer to &quot;see&quot; through 
links and unexpectedly share globals in those modules.

--
Mike Looijmans
Philips Natlab / Topic Automation


Graham Dumpleton wrote:
&gt;<i> Anyone else got any comments on whether normcase() should be applied?
</I>&gt;<i> I'm don't use Windows so don't really know what is best.
</I>&gt;<i> 
</I>&gt;<i> ---------- Forwarded message ----------
</I>&gt;<i> From: Simon Holness &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">simon.holness at gmail.com</A>&gt;
</I>&gt;<i> Date: 14-May-2007 20:24
</I>&gt;<i> Subject: Re: [mod_python] import_module is case sensitive even if the OS 
</I>&gt;<i> isn't
</I>&gt;<i> To: Graham Dumpleton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On 5/12/07, Graham Dumpleton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> The _check_directory() method will also need to be changed in some way
</I>&gt;&gt;<i> to ensure the integrity checks work also. Ie.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     if directory in sys.path:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> need to change to:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     if directory in map(os.path.normcase, sys.path):
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> What happens though if Windows is being asked to mount a remote file
</I>&gt;&gt;<i> system which is case sensitive and files were being loaded from there.
</I>&gt;&gt;<i> Are files on such a file system seen as case sensitive. If they are
</I>&gt;&gt;<i> then the changes can't be made. Can anyone comment on the remote file
</I>&gt;&gt;<i> system example and how case is handled for files from that?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Windows copes really badly, is the short answer.
</I>&gt;<i> If you smb mount a case-sensitive filesystem and have a clash of paths
</I>&gt;<i> based on differeing case alone, windows will only (afaict) allow you
</I>&gt;<i> to navigate into the lowercase version.
</I>&gt;<i> 
</I>&gt;<i> E.g. if I mount
</I>&gt;<i> /work/test/file1
</I>&gt;<i> /work/Test/file2
</I>&gt;<i> 
</I>&gt;<i> I can never get windows to find file2 ... listing /work/Test gives file1.
</I>&gt;<i> 
</I>&gt;&gt;<i> Also, are there any native file systems on Windows that are case
</I>&gt;&gt;<i> sensitive. On Mac OS X the default file system is case insensitive,
</I>&gt;&gt;<i> but one can use case sensitive local file systems as well.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> How does normcase work in this situation?
</I>&gt;<i> I assume its behaviour is based on the sensitivity of the OS not the
</I>&gt;<i> filesystem in question? So for OS X I presume normcase leaves paths
</I>&gt;<i> unchanged?
</I>&gt;<i> 
</I>&gt;&gt;<i> Finally, with such a change log messages and error pages are going to
</I>&gt;&gt;<i> now show lower case paths which may confuse people if the original
</I>&gt;&gt;<i> path used mixed case.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> True. Only on case-insensitive OS's of course, where it shouldn't be a
</I>&gt;<i> real problem.
</I>&gt;<i> 
</I>&gt;&gt;<i> It is because of these issues that I may have originally not applied
</I>&gt;&gt;<i> os.path.normcase() to paths and basically taken the viewpoint that
</I>&gt;&gt;<i> users should just get their paths consistent in the first place as too
</I>&gt;&gt;<i> hard otherwise.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Fair point, but unfortunately paths aren't always constructed in
</I>&gt;<i> simple ways. For example, while windows is case-insensitive for path
</I>&gt;<i> navigation it is case sensitive for path generation and reporting. So
</I>&gt;<i> it's not a matter of the user being consistent with themselves, but
</I>&gt;<i> with the OS (and potentially any other libraries) they're using. In
</I>&gt;<i> the case I ran into, for example, I'd used lowercase for the drive
</I>&gt;<i> letter in one place and this differed from the upper case which
</I>&gt;<i> windows uses (from an auto-generated path I was using in a different
</I>&gt;<i> location). Luckily I was looking into the subject of module loading
</I>&gt;<i> and so noticed the path difference in the apache log notices, but I'd
</I>&gt;<i> guess most people wouldn't spot this easily.
</I>&gt;<i> 
</I>&gt;<i> I can certainly see your point. Maybe, if you're not keen on the code
</I>&gt;<i> change being made, just a documentation change to note that you must
</I>&gt;<i> be consistent with the OS with respect to case or it may load the same
</I>&gt;<i> file as multiple modules?
</I>&gt;<i> 
</I>&gt;<i> Cheers
</I>&gt;<i> Simon
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>

</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023615.html">[mod_python] import_module is case sensitive even if the OS isn't
</A></li>
	<LI>Next message: <A HREF="023617.html">[mod_python] import_module is case sensitive even if the OS isn't
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23616">[ date ]</a>
              <a href="thread.html#23616">[ thread ]</a>
              <a href="subject.html#23616">[ subject ]</a>
              <a href="author.html#23616">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
