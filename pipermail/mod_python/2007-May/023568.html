<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Setting HTTP response status line
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Setting%20HTTP%20response%20status%20line&In-Reply-To=463E4123.2030701%40rogerbinns.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023567.html">
   <LINK REL="Next"  HREF="023569.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Setting HTTP response status line</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Setting%20HTTP%20response%20status%20line&In-Reply-To=463E4123.2030701%40rogerbinns.com"
       TITLE="[mod_python] Setting HTTP response status line">graham.dumpleton at gmail.com
       </A><BR>
    <I>Sun May  6 17:53:38 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023567.html">[mod_python] Setting HTTP response status line
</A></li>
        <LI>Next message: <A HREF="023569.html">[mod_python] Setting HTTP response status line
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23568">[ date ]</a>
              <a href="thread.html#23568">[ thread ]</a>
              <a href="subject.html#23568">[ subject ]</a>
              <a href="author.html#23568">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 07/05/07, Roger Binns &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">rogerb at rogerbinns.com</A>&gt; wrote:
&gt;<i> -----BEGIN PGP SIGNED MESSAGE-----
</I>&gt;<i> Hash: SHA1
</I>&gt;<i>
</I>&gt;<i> I'm trying to set the response status line, and failing.
</I>&gt;<i>
</I>&gt;<i> def handler(req):
</I>&gt;<i>    raise apache.SERVER_RETURN, (400, &quot;You must supply a foo&quot;)
</I>&gt;<i>
</I>&gt;<i> This is with the mod_python on Ubuntu feisty (3.2.10).  From the code in
</I>&gt;<i> apache.py, it sets req.status with the text message although the doc
</I>&gt;<i> says that is an integer field.
</I>&gt;<i>
</I>&gt;<i> However the http client always receives standard text (eg 'Bad Request'
</I>&gt;<i> for code 400).
</I>
Where did you get the idea you could do that in the first place?

Where one argument is used with SERVER_RETURN it should be the handler
result code. Eg. apache.OK, apache.DONE or a specific error status
value such as apache.HTTP_BAD_REQUEST (400).

Where one argument is supplied and you return apache.OK or
apache.DONE, it is assumed you have overridden req.status yourself, if
not req.status is set to apache.HTTP_OK (200).

Where two argument are supplied, the first argument should be
apache.OK or apache.DONE. The second argument will be used to set the
value of req.status for you.

At no time can you supply an alternate status line message. Apache
will always use its own internal versions of the strings.

&gt;<i> The PythonDebug option is also confusing.  If I turn it on, then
</I>&gt;<i> responses go back as 200 OK with the body of tracebacks etc, whereas
</I>&gt;<i> with it off then you get 500 Internal Server Error with no traceback
</I>&gt;<i> type information.
</I>
What is more confusing is why people keep using old versions of
mod_python where there is a newer, better, less buggy and more stable
version available. Upgrade to mod_python 3.3. See:

  <A HREF="http://issues.apache.org/jira/browse/MODPYTHON-167">http://issues.apache.org/jira/browse/MODPYTHON-167</A>

&gt;<i> It seems to me that if you want to return anything other than success
</I>&gt;<i> that Apache goes to great lengths to obliterate whatever it is that you
</I>&gt;<i> were trying to send back and replaces it with its own canned
</I>&gt;<i> information, hence the behaviour of PythonDebug.  Is there any way
</I>&gt;<i> around this?
</I>
For the status line message the answer is no. Why would you want to
change the message from the normal one anyway?

If your complaint is because you are getting the mod_python traceback
error page when you use the above SERVER_RETURN, I'm not surprised as
your code is wrong and mod_python would be complaining that you are
giving it a string when it is expecting an integer.

Graham
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023567.html">[mod_python] Setting HTTP response status line
</A></li>
	<LI>Next message: <A HREF="023569.html">[mod_python] Setting HTTP response status line
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23568">[ date ]</a>
              <a href="thread.html#23568">[ thread ]</a>
              <a href="subject.html#23568">[ subject ]</a>
              <a href="author.html#23568">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
