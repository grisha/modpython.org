<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] dot dot in the url
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20dot%20dot%20in%20the%20url&In-Reply-To=88e286470705111813t61a0baddg426a9a02727f07d9%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023606.html">
   <LINK REL="Next"  HREF="023610.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] dot dot in the url</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Roger Binns</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20dot%20dot%20in%20the%20url&In-Reply-To=88e286470705111813t61a0baddg426a9a02727f07d9%40mail.gmail.com"
       TITLE="[mod_python] dot dot in the url">rogerb at rogerbinns.com
       </A><BR>
    <I>Sat May 12 01:46:31 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023606.html">[mod_python] dot dot in the url
</A></li>
        <LI>Next message: <A HREF="023610.html">[mod_python] dot dot in the url
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23608">[ date ]</a>
              <a href="thread.html#23608">[ thread ]</a>
              <a href="subject.html#23608">[ subject ]</a>
              <a href="author.html#23608">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Graham Dumpleton wrote:
&gt;<i> If your web browser doesn't normalise it 
</I>
I am sending requests from my test harness which does not do
normalization.  In my case normalization effectively &quot;corrupts&quot; the data.

&gt;<i> then Apache will. Such
</I>&gt;<i> normalisation will be done before it even gets to mod_python.
</I>
req.uri is normalized but req.unparsed_uri is as originally sent by the
client, so I use that.  The only remaining problem is that if the
normalized uri doesn't reference my handler then it isn't called.

&lt;Location /api/v1/&gt;
 SetHandler python-program
 PythonHandler restapiv1::RestAPIV1.RequestHandler
&lt;/Location&gt;

So I get called for /api/v1/widget/a/b/c/d/../../e but not for
/api/v1/widget/../../e/a/b/c/d

&gt;<i> You state want you want to happen, but why exactly do you want to do
</I>&gt;<i> this in the first place? What is the underlying reason?
</I>
Exactly as I said.  It is a rest service and the names of items appear
as part of the URL.  eg You use PUT /api/v1/widget/foo to create a
widget named foo, GET to query it, DELETE to delete it etc.

But because of this normalization done by Apache before deciding which
handler to call, that imposes an arbitrary constraint on names such that
they can't have ../ sequences that get up before the /api/v1/.  The
arbitrary constraint then has to be documented, tested, have friendly
information in user interfaces etc.  It is an ugly wart and I was hoping
it was unnecessary.

Roger
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)

iD8DBQFGRVS3mOOfHg372QQRAulYAJ90JYiXJ+FSkQzJPNpdlTCFJFSYvgCfbzw4
1FKXPA+JqBzWAufEfSe13CA=
=ZdiB
-----END PGP SIGNATURE-----
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023606.html">[mod_python] dot dot in the url
</A></li>
	<LI>Next message: <A HREF="023610.html">[mod_python] dot dot in the url
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23608">[ date ]</a>
              <a href="thread.html#23608">[ thread ]</a>
              <a href="subject.html#23608">[ subject ]</a>
              <a href="author.html#23608">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
