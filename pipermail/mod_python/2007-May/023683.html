<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] StringField not pickable anymore with modpython 3.3.10
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20StringField%20not%20pickable%20anymore%20with%20modpython%203.3.10&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023681.html">
   <LINK REL="Next"  HREF="023684.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] StringField not pickable anymore with modpython 3.3.10</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Luca Montecchiani</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20StringField%20not%20pickable%20anymore%20with%20modpython%203.3.10&In-Reply-To="
       TITLE="[mod_python] StringField not pickable anymore with modpython 3.3.10">l.montecchiani at teamsystem.com
       </A><BR>
    <I>Thu May 24 10:31:44 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023681.html">[mod_python] Error
</A></li>
        <LI>Next message: <A HREF="023684.html">[mod_python] StringField eval() problem with modpython 3.3.10
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23683">[ date ]</a>
              <a href="thread.html#23683">[ thread ]</a>
              <a href="subject.html#23683">[ subject ]</a>
              <a href="author.html#23683">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

in the process to convert our application from 3.2.10 to the
latest version 3.3.10 I've found a problem and an easy workaround.

In some places we need to pickle some form input data but with
the new version we can't do it anymore, the cPickle module
raise an error complain about a cStringIO object unpickability.

This was our workaround :

:<i>
</I>if type(v) == util.StringField:
     v = str(v)
tmp = cPickle.dumps(v,protocol=-1)
:<i>
</I>
The same problem there is saving session objects that contain
a StringField, see the traceback:

   File &quot;/projects/portale/20070102/ambiente/portale/core/python/lib/python2.5/site-packages/mod_python/Session.py&quot;, line 269, in save
     self.do_save(dict)

   File &quot;/projects/portale/20070102/ambiente/portale/core/python/lib/python2.5/site-packages/mod_python/Session.py&quot;, line 407, in do_save
     dbm[self._sid] = cPickle.dumps(dict)

   File &quot;/projects/portale/20070102/ambiente/portale/core/python/lib/python2.5/copy_reg.py&quot;, line 69, in _reduce_ex
     raise TypeError, &quot;can't pickle %s objects&quot; % base.__name__

   TypeError: can't pickle StringO objects

This mean that I need to convert to str() every StringField that I want
to put in a Session object :-((

Hope this help,
luca

-- 
Luca Montecchiani
Software Di Base
TeamSystem S.p.a.
------------------------------------------------------------------------------------------
Informativa ai sensi del D. Lgs. 196-30/06/2003.
Il contenuto di questa e.mail e degli eventuali allegati, deve essere nella disponibilit&#224;
del solo destinatario.  Se ricevete per errore questa e-mail siete pregati di informarci
(rispedendola al mittente) e di provvedere alla sua rimozione.
Possono essere presenti informazioni riservate e non corrette (parzialmente o totalmente).
Le e-mail in partenza e in arrivo possono essere oggetto di monitoraggio
da parte di Teamsystem spa.  Del contenuto &#232; responsabile il mittente della presente.
Chiunque venga in possesso non autorizzato di questa e-mail &#232; vincolato
dalla Legge a non leggerne il contenuto, a non copiarla, a non diffonderla e a non usarla.
Informiamo che per l' esercizio dei diritti di cui all'art. 7 del d.lgs.196/2003 ci si pu&#242;
rivolgere al Titolare del trattamento Teamsystem S.r.l. via Gagarin 205 61100 PESARO
per posta o fax, indicando sulla busta o sul foglio la dicitura &quot;Inerente alla Privacy&quot;,
o inviando una e-mail all' indirizzo <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">privacy at teamsystem.com</A> .
------------------------------------------------------------------------------------------
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023681.html">[mod_python] Error
</A></li>
	<LI>Next message: <A HREF="023684.html">[mod_python] StringField eval() problem with modpython 3.3.10
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23683">[ date ]</a>
              <a href="thread.html#23683">[ thread ]</a>
              <a href="subject.html#23683">[ subject ]</a>
              <a href="author.html#23683">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
