<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Setting HTTP response status line
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Setting%20HTTP%20response%20status%20line&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023566.html">
   <LINK REL="Next"  HREF="023568.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Setting HTTP response status line</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Roger Binns</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Setting%20HTTP%20response%20status%20line&In-Reply-To="
       TITLE="[mod_python] Setting HTTP response status line">rogerb at rogerbinns.com
       </A><BR>
    <I>Sun May  6 16:57:07 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023566.html">[mod_python] Help with session.save and register_cleanup
</A></li>
        <LI>Next message: <A HREF="023568.html">[mod_python] Setting HTTP response status line
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23567">[ date ]</a>
              <a href="thread.html#23567">[ thread ]</a>
              <a href="subject.html#23567">[ subject ]</a>
              <a href="author.html#23567">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

I'm trying to set the response status line, and failing.

def handler(req):
   raise apache.SERVER_RETURN, (400, &quot;You must supply a foo&quot;)

This is with the mod_python on Ubuntu feisty (3.2.10).  From the code in
apache.py, it sets req.status with the text message although the doc
says that is an integer field.

However the http client always receives standard text (eg 'Bad Request'
for code 400).

The PythonDebug option is also confusing.  If I turn it on, then
responses go back as 200 OK with the body of tracebacks etc, whereas
with it off then you get 500 Internal Server Error with no traceback
type information.

It seems to me that if you want to return anything other than success
that Apache goes to great lengths to obliterate whatever it is that you
were trying to send back and replaces it with its own canned
information, hence the behaviour of PythonDebug.  Is there any way
around this?

Roger
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)

iD8DBQFGPkEjmOOfHg372QQRAtuxAKDLsTPlKUZEbhGBS7DBAo0lgFd+8ACfRY5B
Kr0KeQjYPQEAc90GEY5dnbM=
=Rm72
-----END PGP SIGNATURE-----
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023566.html">[mod_python] Help with session.save and register_cleanup
</A></li>
	<LI>Next message: <A HREF="023568.html">[mod_python] Setting HTTP response status line
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23567">[ date ]</a>
              <a href="thread.html#23567">[ thread ]</a>
              <a href="subject.html#23567">[ subject ]</a>
              <a href="author.html#23567">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
