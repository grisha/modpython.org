<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] RE: mod_python several magnitudes slower than PHP on
	my installation?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20RE%3A%20mod_python%20several%20magnitudes%20slower%20than%20PHP%20on%0A%09my%20installation%3F&In-Reply-To=88e286470705191839l36341255q11cce8fcea214523%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023655.html">
   <LINK REL="Next"  HREF="023657.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] RE: mod_python several magnitudes slower than PHP on
	my installation?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Martin _</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20RE%3A%20mod_python%20several%20magnitudes%20slower%20than%20PHP%20on%0A%09my%20installation%3F&In-Reply-To=88e286470705191839l36341255q11cce8fcea214523%40mail.gmail.com"
       TITLE="[mod_python] RE: mod_python several magnitudes slower than PHP on
	my installation?">gzlist at googlemail.com
       </A><BR>
    <I>Sat May 19 21:53:36 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023655.html">[mod_python] RE: mod_python several magnitudes slower than PHP on
	my installation?
</A></li>
        <LI>Next message: <A HREF="023657.html">[mod_python] Test page displayed as plain text file
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23656">[ date ]</a>
              <a href="thread.html#23656">[ thread ]</a>
              <a href="subject.html#23656">[ subject ]</a>
              <a href="author.html#23656">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> On 5/20/07, Graham Dumpleton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt; On 20/05/07, Martin _ &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">gzlist at googlemail.com</A>&gt; wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; def handler(req):
</I>&gt;<i> &gt; &gt;         buf = []
</I>&gt;<i> &gt; &gt;         for i in xrange(1000):
</I>&gt;<i> &gt; &gt;                 buf.append(&quot;Yeah\n&quot;)
</I>&gt;<i> &gt; &gt;         req.write(&quot;&quot;.join(buf), 0)
</I>&gt;<i> &gt; &gt;         return apache.OK
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Or to avoid buffering in Python code and letting Apache buffering do
</I>&gt;<i> &gt; its thing instead use:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;   def handler(req):
</I>&gt;<i> &gt;     for i in xrange(1000):
</I>&gt;<i> &gt;       req.write('Yeah\n, 0)
</I>&gt;<i> &gt;     return apache.OK
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; By default req.write() flushes data on each call, which using 'print'
</I>&gt;<i> &gt; with it would result in happening. Thus call req.write() directly and
</I>&gt;<i> &gt; supply second argument of 0 to avoid flushing.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Graham
</I>
For this exact test, calling req.write a thousand times is actually
slower (though only by a factor of two or so). If we were being really
minimal:
req.write(&quot;Yeah\n&quot;*1000, 0)
comes in at about a quarter again as fast as the buf version. But
clearly 'benchmarks' on this kind of level aren't really useful, just
needed to point out the difference between sending response to client
in lots of teeny bits vs. one finished chunk.
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023655.html">[mod_python] RE: mod_python several magnitudes slower than PHP on
	my installation?
</A></li>
	<LI>Next message: <A HREF="023657.html">[mod_python] Test page displayed as plain text file
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23656">[ date ]</a>
              <a href="thread.html#23656">[ thread ]</a>
              <a href="subject.html#23656">[ subject ]</a>
              <a href="author.html#23656">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
