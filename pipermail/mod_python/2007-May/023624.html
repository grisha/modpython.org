<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Python Debugger doesn't start in Mod_Python
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Python%20Debugger%20doesn%27t%20start%20in%20Mod_Python&In-Reply-To=88e286470705101504y7d5c7538p82f3a1c19543cf53%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023595.html">
   <LINK REL="Next"  HREF="023629.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Python Debugger doesn't start in Mod_Python</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Ren&#233; Grob</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Python%20Debugger%20doesn%27t%20start%20in%20Mod_Python&In-Reply-To=88e286470705101504y7d5c7538p82f3a1c19543cf53%40mail.gmail.com"
       TITLE="[mod_python] Python Debugger doesn't start in Mod_Python">rpgrob at hispeed.ch
       </A><BR>
    <I>Mon May 14 18:07:51 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023595.html">[mod_python] Python Debugger doesn't start in Mod_Python
</A></li>
        <LI>Next message: <A HREF="023629.html">[mod_python] Python Debugger doesn't start in Mod_Python
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23624">[ date ]</a>
              <a href="thread.html#23624">[ thread ]</a>
              <a href="subject.html#23624">[ subject ]</a>
              <a href="author.html#23624">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Graham Dumpleton schrieb:
&gt;<i> BTW, a couple of things to try.
</I>&gt;<i>
</I>&gt;<i> 1. See if running httpd with options '-X -DONE_PROCESS' makes a 
</I>&gt;<i> difference.
</I>&gt;<i>
</I>&gt;<i> 2. See if you can arrange for environment variable called
</I>&gt;<i> 'AP_PARENT_PID' to be set to '0' in the environment that the httpd
</I>&gt;<i> process is running so as to stop mod_python avoiding its
</I>&gt;<i> initialisation step. Am not sure what magic is required on Windows to
</I>&gt;<i> set environment variables.
</I>&gt;<i>
</I>&gt;<i> Graham
</I>&gt;<i>
</I>&gt;<i> On 11/05/07, Graham Dumpleton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i> I suspect it is because of this change being made:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>   <A HREF="http://issues.apache.org/jira/browse/MODPYTHON-195">http://issues.apache.org/jira/browse/MODPYTHON-195</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I had been recently wondering whether the change would upset single
</I>&gt;&gt;<i> process debugging.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> As it is, the issue has had to be reopened because it causes another
</I>&gt;&gt;<i> minor nuisance issue with version information for Python/mod_python
</I>&gt;&gt;<i> not being displayed.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Do you have the ability to compile mod_python from source code
</I>&gt;&gt;<i> yourself and thereby remove the change described in that issue and see
</I>&gt;&gt;<i> if it then works?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It still may be the case however that single process debugging has
</I>&gt;&gt;<i> never worked on Windows for one reason or another since people so
</I>&gt;&gt;<i> rarely use it.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Graham
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On 11/05/07, Ren&#233; Grob &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">rpgrob at hispeed.ch</A>&gt; wrote:
</I>&gt;&gt;<i> &gt; Since my small intranet application keeps getting more complex I tried
</I>&gt;&gt;<i> &gt; to fix some bugs using the Python Debugger. According to the 
</I>&gt;&gt;<i> Mod_python
</I>&gt;&gt;<i> &gt; manual I added the &quot;PythonEnablePdb On&quot; directive into the directory
</I>&gt;&gt;<i> &gt; context of my Python application and started httpd from the command 
</I>&gt;&gt;<i> line
</I>&gt;&gt;<i> &gt; with the option -DONE_PROCESS (after stopping httpd first, of course).
</I>&gt;&gt;<i> &gt; But Apache didn't start and an error window occurred instead 
</I>&gt;&gt;<i> showing the
</I>&gt;&gt;<i> &gt; following message:
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; &quot;Runtime Error! Program: &lt;Apache path&gt;\httpd.exe. This application has
</I>&gt;&gt;<i> &gt; requested the Runtime to terminate it in an unusual way. Please 
</I>&gt;&gt;<i> contact
</I>&gt;&gt;<i> &gt; the applications's support team for more information&quot;.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; I'm using the following prebuilt binaries on Win2k SP4:
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; mod_python-3.3.1.win32-py2.5-Apache2.2.exe
</I>&gt;&gt;<i> &gt; python-2.5.msi
</I>&gt;&gt;<i> &gt; apache_2.2.4-win32-x86-no_ssl.msi
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; When Apache is started with the option -DONE_PROCESS but without
</I>&gt;&gt;<i> &gt; Mod_python there is no error and no Mod_python either (of course). 
</I>&gt;&gt;<i> On a
</I>&gt;&gt;<i> &gt; different machine with WinXP SP2, Apache 2.2.3, Python 2.4.3 and
</I>&gt;&gt;<i> &gt; Mod_python 2.7.10 the debugger works as expected.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Does anyone have an idea how to fix this?
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Thanks
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Ren&#233;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; _______________________________________________
</I>&gt;&gt;<i> &gt; Mod_python mailing list
</I>&gt;&gt;<i> &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;&gt;<i> &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>Dear Graham

Thanks for your immediate answer. Your first suggestion, to recompile 
Modpython with the indicated corrections will probably

be the best. But unfortunately I do not have a Microsoft compiler in my 
box. Does anybody know wether I can use the freely

downloadable C++ 'express' version for this?

So I tried out your second suggestions: Starting httpd with the '-X 
-DONE_PROCESS' option results in the same runtime error.

The same happens when I add the '-X' option alone. After setting the 
environment variable AP_PARENT_PID to 0 (which is really

no magic: simply type 'set AP_PARENT_PID=0' &lt;enter&gt; at the command line 
[without the quotes]) strange things happen. Apache

aborts with the following error:

'httpd: Could not open configuration file /apache/conf/httpd.conf: The 
system cannot find the indicated path'

This is independent of wether I add the '-DONE_PROCESS' and/or the '-X' 
option or none at all.
 
After adding the option '-f &lt;path to httpd.conf&gt;/httpd.conf' Apache 
seems to start but the shell returns to the prompt after a

second without any error message. Looking up the process list doesn't 
show any httpd running. So I had a look at the error.log

where I found the following messages:

[Mon May 14 23:20:31 2007] [notice] mod_python: Creating 8 session 
mutexes based on 0 max processes and 250 max threads.
[Mon May 14 23:20:31 2007] [notice] Child 2176: Child process is running
[Mon May 14 23:20:31 2007] [crit] (OS 6)Invalid Handle.  : Child 2176: 
Unable to retrieve the ready event from the parent

With the '-DONE_PROCESS'and/or '-X' option it looks a bit different but 
essentially with the same result:

[Mon May 14 23:28:05 2007] [notice] mod_python: Creating 8 session 
mutexes based on 0 max processes and 250 max threads.
[Mon May 14 23:28:06 2007] [notice] Child 1084: Child process is running
[Mon May 14 23:28:06 2007] [notice] Child 1084: Acquired the start mutex.
[Mon May 14 23:28:06 2007] [notice] Child 1084: Starting 250 worker threads.
[Mon May 14 23:28:06 2007] [crit] (OS 6)Invalid Handle.  : Child 1084: 
WAIT_FAILED -- shutting down server
[Mon May 14 23:28:06 2007] [notice] Child 1084: Starting thread to 
listen on port 80.
[Mon May 14 23:28:07 2007] [notice] Child 1084: Released the start mutex
[Mon May 14 23:28:08 2007] [notice] Child 1084: Waiting for 250 worker 
threads to exit.
[Mon May 14 23:28:08 2007] [notice] Child 1084: All worker threads have 
exited.
[Mon May 14 23:28:08 2007] [notice] Child 1084: Child process is exiting


By the way I tried to start the debugger on a different installation 
with Apache 2.2.3, Modpython 3.2.10 and Python 2.43 on

WinXPSP2. It worked just as expected. The same was true for an older 
installation using Apache 2.0.52, Modpython 3.1.3 and

Python 2.3.4 on WinXPSP1. So the 'problem' must have been introduced 
very recently...(I'm sorry I mixed up the version number

of Modpython in the first post: I didn't test Modpython 2.7.10).

This additional information probably supports your hypothesis that the 
problem is related to

<A HREF="http://issues.apache.org/jira/browse/MODPYTHON-195">http://issues.apache.org/jira/browse/MODPYTHON-195</A> doesn't it?

Ren&#233;
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023595.html">[mod_python] Python Debugger doesn't start in Mod_Python
</A></li>
	<LI>Next message: <A HREF="023629.html">[mod_python] Python Debugger doesn't start in Mod_Python
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23624">[ date ]</a>
              <a href="thread.html#23624">[ thread ]</a>
              <a href="subject.html#23624">[ subject ]</a>
              <a href="author.html#23624">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
