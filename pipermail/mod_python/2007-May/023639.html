<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] mod_python handlers seem to start in the wrong
	directory
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python%20handlers%20seem%20to%20start%20in%20the%20wrong%0A%09directory&In-Reply-To=2473b43f0705151419of7f98fblb5074782e1fd87cf%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023636.html">
   <LINK REL="Next"  HREF="023637.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] mod_python handlers seem to start in the wrong
	directory</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python%20handlers%20seem%20to%20start%20in%20the%20wrong%0A%09directory&In-Reply-To=2473b43f0705151419of7f98fblb5074782e1fd87cf%40mail.gmail.com"
       TITLE="[mod_python] mod_python handlers seem to start in the wrong
	directory">graham.dumpleton at gmail.com
       </A><BR>
    <I>Tue May 15 19:34:14 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023636.html">[mod_python] mod_python handlers seem to start in the wrong
	directory
</A></li>
        <LI>Next message: <A HREF="023637.html">[mod_python] compile on 64-bit windows server 2003
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23639">[ date ]</a>
              <a href="thread.html#23639">[ thread ]</a>
              <a href="subject.html#23639">[ subject ]</a>
              <a href="author.html#23639">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>When accessing files from a handler you should always be using
absolute paths and not relative paths. You cannot rely on the current
working directory being a specific value as any other handler or
module running under Apache might change the working directory. If
using a multithreaded MPM for Apache, ie., Windows or worker MPM on
Unix, the current working directory could change between the time you
set it and when you are relying on it being that value, thus making it
unreliable.

How exactly are you accessing the files in the same directory? What
does your code look like?

Note to determine what directory a Python code file is in, you can use:

  directory = os.path.dirname(__file__)

You can then use that as base directory to calculate absolute path for
other files in the same directory.

  file = os.path.join(directory, 'file.txt')

Graham

On 16/05/07, Adam Olsen &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">arolsen at gmail.com</A>&gt; wrote:
&gt;<i> Does anything look wrong with the following in my exaile.org virtualhost
</I>&gt;<i> configuration?  Every once in a while, it seems as though the handler
</I>&gt;<i> scripts are running in the wrong directory.  They can't find files that are
</I>&gt;<i> in the same directory, even if I specifically use os.chdir() right before I
</I>&gt;<i> try to access the file.
</I>&gt;<i>
</I>&gt;<i> &lt;Directory /var/www/exaile.org/htdocs/plugins/&gt;
</I>&gt;<i>     AddHandler mod_python .py
</I>&gt;<i>     PythonHandler plugins
</I>&gt;<i>     PythonPath &quot;sys.path +
</I>&gt;<i> ['/var/www/exaile.org/htdocs/plugins']&quot;
</I>&gt;<i>     PythonDebug On
</I>&gt;<i> &lt;/Directory&gt;
</I>&gt;<i> &lt;Directory /var/www/exaile.org/htdocs/&gt;
</I>&gt;<i>     AddHandler mod_python .py
</I>&gt;<i>     PythonHandler index
</I>&gt;<i>     PythonDebug On
</I>&gt;<i>     PythonPath &quot;sys.path + ['/var/www/exaile.org/htdocs']&quot;
</I>&gt;<i> &lt;/Directory&gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Adam Olsen
</I>&gt;<i> <A HREF="http://www.vimtips.org">http://www.vimtips.org</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I>&gt;<i>
</I></PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023636.html">[mod_python] mod_python handlers seem to start in the wrong
	directory
</A></li>
	<LI>Next message: <A HREF="023637.html">[mod_python] compile on 64-bit windows server 2003
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23639">[ date ]</a>
              <a href="thread.html#23639">[ thread ]</a>
              <a href="subject.html#23639">[ subject ]</a>
              <a href="author.html#23639">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
