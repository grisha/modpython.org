<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Beginner documentation -- suggestion
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Beginner%20documentation%20--%20suggestion&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009516.html">
   <LINK REL="Next"  HREF="009518.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
<table border=0 width="100%"><tr><td valign="top">
   <H1>[mod_python] Beginner documentation -- suggestion</H1>
    <B>NLH AS</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Beginner%20documentation%20--%20suggestion&In-Reply-To="
       TITLE="[mod_python] Beginner documentation -- suggestion">post at nlhas.no
       </A><BR>
    <I>Sat Nov 23 12:54:36 EST 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="009516.html">[mod_python] Apache segfault when using PythonImport
</A></li>
        <LI>Next message: <A HREF="009518.html">[mod_python] beginners question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9517">[ date ]</a>
              <a href="thread.html#9517">[ thread ]</a>
              <a href="subject.html#9517">[ subject ]</a>
              <a href="author.html#9517">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I've just installed mod_python and converted a cgi application. During this
process I've spent most of my time finding out what happens where -- the
actual conversion fell into place quickly when I understood the main
framework. Everything is in the documentation, but I'd have appreciated a
simple explanation along the lines of the following (which may well be
wrong!) somewhere in the tutorial. Perhaps something like this can be
worked into the next edition of the documentation?

pm


++++++ What happens where in a &quot;out-of-the-box&quot; Apache/mod_python setup:

At startup or at the first call to a mod_python handler Apache loads the
Python interpreter and the import modules at the top of the handler's
module file.

Each call to the handler is executed in an Apache child process with a
separate Python subinterpreter instance. It is not possible to share global
variables between Apache's child processes (so sharing a global database
connection is not possible for example), and there is no means of
predicting whether Apache will start a new process or re-use an existing
process for any given call to the handler. [&gt;&gt; pointer to information about
how Apache does this, how many child processes can be started, etc.?].

Global variables within the handler's module will be available to all calls
to the handler that are routed to the same Apache process. This could be
used to maintain and re-use a database connection per child process. 

Local variables within the handler are local to each call to the handler
[and are eventually garbage-collected in the normal way?].

Mod_python will check whether the top level python module (containing the
handler) has been changed and re-load if necessary. Imported modules are
not checked, and the only 100% certain way of ensuring that updated modules
are reloaded in all child processes is to stop and re-start Apache.

It is possible to tweak various aspects of this behaviour -- for example
Apache can be compiled to only ever start one child process (which would
enable global variables), but this would entail significantly poorer
performance.
+++++
   

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009516.html">[mod_python] Apache segfault when using PythonImport
</A></li>
	<LI>Next message: <A HREF="009518.html">[mod_python] beginners question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9517">[ date ]</a>
              <a href="thread.html#9517">[ thread ]</a>
              <a href="subject.html#9517">[ subject ]</a>
              <a href="author.html#9517">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
