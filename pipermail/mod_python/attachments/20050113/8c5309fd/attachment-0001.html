<tt>
&lt;!DOCTYPE&nbsp;html&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.01&nbsp;Transitional//EN&quot;&gt;<br>
&lt;html&gt;<br>
&lt;head&gt;<br>
&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;charset=ISO-8859-1&quot;&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&nbsp;&nbsp;&lt;title&gt;&lt;/title&gt;<br>
&lt;/head&gt;<br>
&lt;body&nbsp;bgcolor=&quot;#ffffff&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
I&nbsp;found&nbsp;an&nbsp;error&nbsp;while&nbsp;with&nbsp;Cookie&nbsp;module.&amp;nbsp;&nbsp;When&nbsp;the&nbsp;cookie&nbsp;module<br>
parses&nbsp;a&nbsp;cookie,&nbsp;if&nbsp;that&nbsp;cooke&nbsp;has&nbsp;$Version&nbsp;or&nbsp;$Path&nbsp;in&nbsp;it&nbsp;you&nbsp;get&nbsp;an<br>
error.&nbsp;My&nbsp;cookie&nbsp;is&nbsp;coming&nbsp;from&nbsp;a&nbsp;java&nbsp;libaray,&nbsp;that&nbsp;puts&nbsp;$Version&nbsp;and<br>
$Path&nbsp;in&nbsp;it.&lt;br&gt;<br>
example&nbsp;=&quot;Cookie:&nbsp;$Version=0;&nbsp;pysid=34a9b38c34;$Path=/&quot;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
RFC&nbsp;2109&nbsp;mentions&nbsp;$Version&nbsp;and&nbsp;$Path&nbsp;in&nbsp;Section&nbsp;4.4&lt;br&gt;<br>
&lt;pre&gt;&lt;a&nbsp;href=&quot;http://www.faqs.org/rfcs/rfc2109.html&quot;&gt;http://www.faqs.org/rfcs/rfc2109.html&lt;/a&gt;<br>
<br>
4.4&nbsp;&nbsp;How&nbsp;an&nbsp;Origin&nbsp;Server&nbsp;Interprets&nbsp;the&nbsp;Cookie&nbsp;Header<br>
<br>
&nbsp;&nbsp;&nbsp;A&nbsp;user&nbsp;agent&nbsp;returns&nbsp;much&nbsp;of&nbsp;the&nbsp;information&nbsp;in&nbsp;the&nbsp;Set-Cookie&nbsp;header<br>
&nbsp;&nbsp;&nbsp;to&nbsp;the&nbsp;origin&nbsp;server&nbsp;when&nbsp;the&nbsp;Path&nbsp;attribute&nbsp;matches&nbsp;that&nbsp;of&nbsp;a&nbsp;new<br>
&nbsp;&nbsp;&nbsp;request.&nbsp;&nbsp;When&nbsp;it&nbsp;receives&nbsp;a&nbsp;Cookie&nbsp;header,&nbsp;the&nbsp;origin&nbsp;server&nbsp;should<br>
&nbsp;&nbsp;&nbsp;treat&nbsp;cookies&nbsp;with&nbsp;NAMEs&nbsp;whose&nbsp;prefix&nbsp;is&nbsp;$&nbsp;specially,&nbsp;as&nbsp;an&nbsp;attribute<br>
&nbsp;&nbsp;&nbsp;for&nbsp;the&nbsp;adjacent&nbsp;cookie.&nbsp;&nbsp;The&nbsp;value&nbsp;for&nbsp;such&nbsp;a&nbsp;NAME&nbsp;is&nbsp;to&nbsp;be<br>
&nbsp;&nbsp;&nbsp;interpreted&nbsp;as&nbsp;applying&nbsp;to&nbsp;the&nbsp;lexically&nbsp;(left-to-right)&nbsp;most&nbsp;recent<br>
&nbsp;&nbsp;&nbsp;cookie&nbsp;whose&nbsp;name&nbsp;does&nbsp;not&nbsp;have&nbsp;the&nbsp;$&nbsp;prefix.&nbsp;&nbsp;If&nbsp;there&nbsp;is&nbsp;no<br>
&nbsp;&nbsp;&nbsp;previous&nbsp;cookie,&nbsp;the&nbsp;value&nbsp;applies&nbsp;to&nbsp;the&nbsp;cookie&nbsp;mechanism&nbsp;as&nbsp;a<br>
&nbsp;&nbsp;&nbsp;whole.&nbsp;&nbsp;For&nbsp;example,&nbsp;consider&nbsp;the&nbsp;cookie<br>
<br>
&nbsp;&nbsp;&nbsp;Cookie:&nbsp;$Version=&quot;1&quot;;&nbsp;Customer=&quot;WILE_E_COYOTE&quot;;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$Path=&quot;/acme&quot;<br>
<br>
&nbsp;&nbsp;&nbsp;$Version&nbsp;applies&nbsp;to&nbsp;the&nbsp;cookie&nbsp;mechanism&nbsp;as&nbsp;a&nbsp;whole&nbsp;(and&nbsp;gives&nbsp;the<br>
&nbsp;&nbsp;&nbsp;version&nbsp;number&nbsp;for&nbsp;the&nbsp;cookie&nbsp;mechanism).&nbsp;&nbsp;$Path&nbsp;is&nbsp;an&nbsp;attribute<br>
&nbsp;&nbsp;&nbsp;whose&nbsp;value&nbsp;(/acme)&nbsp;defines&nbsp;the&nbsp;Path&nbsp;attribute&nbsp;that&nbsp;was&nbsp;used&nbsp;when&nbsp;the<br>
&nbsp;&nbsp;&nbsp;Customer&nbsp;cookie&nbsp;was&nbsp;defined&nbsp;in&nbsp;a&nbsp;Set-Cookie&nbsp;response&nbsp;header.<br>
<br>
&lt;/pre&gt;<br>
In&nbsp;Cookie.py&nbsp;it&nbsp;looks&nbsp;like&nbsp;the&nbsp;code&nbsp;was&nbsp;in&nbsp;place&nbsp;to&nbsp;deal&nbsp;with&nbsp;$Version<br>
and&nbsp;$Path,&nbsp;but&nbsp;not&nbsp;finished&lt;br&gt;<br>
&lt;br&gt;<br>
from&amp;nbsp;&nbsp;_parse_cookie()&lt;br&gt;<br>
line&nbsp;~321&lt;br&gt;<br>
&amp;nbsp;&lt;i&gt;&lt;b&gt;l_key&nbsp;=&nbsp;key.lower()&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;(l_key&nbsp;in&nbsp;valid&nbsp;or&nbsp;key[0]&nbsp;==&nbsp;'$'):&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#&nbsp;&quot;internal&quot;&nbsp;attribute,&nbsp;add&nbsp;to&nbsp;cookie&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;l_key&nbsp;==&nbsp;&quot;max-age&quot;:&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;l_key&nbsp;=&nbsp;&quot;max_age&quot;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;setattr(c,&nbsp;l_key,&nbsp;val)&lt;br&gt;<br>
&lt;/b&gt;&lt;/i&gt;&lt;br&gt;<br>
&amp;nbsp;The&nbsp;above&nbsp;code&nbsp;checks&nbsp;for&nbsp;the&nbsp;$,&nbsp;but&nbsp;doesn't&nbsp;do&nbsp;anything&nbsp;with&nbsp;it&nbsp;and<br>
in&nbsp;fact&nbsp;when&nbsp;it&nbsp;tries&nbsp;to&nbsp;do&nbsp;a&nbsp;setattr&nbsp;with&nbsp;$Version&nbsp;or&nbsp;$Path,&nbsp;you&nbsp;get<br>
an&nbsp;error.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;modified&nbsp;the&nbsp;function&nbsp;to&nbsp;be&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;i&gt;&lt;b&gt;l_key&nbsp;=&nbsp;key.lower()&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;(l_key&nbsp;in&nbsp;valid&nbsp;or&nbsp;key[0]&nbsp;==&nbsp;'$'):&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#&nbsp;&quot;internal&quot;&nbsp;attribute,&nbsp;add&nbsp;to&nbsp;cookie&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;l_key&nbsp;==&nbsp;&quot;max-age&quot;:&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;l_key&nbsp;=&nbsp;&quot;max_age&quot;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/b&gt;&lt;b&gt;&lt;font&nbsp;color=&quot;#009900&quot;&gt;&nbsp;&lt;/font&gt;&lt;font&nbsp;color=&quot;#009900&quot;&gt;if<br>
key[0]&nbsp;==&nbsp;'$':&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;l_key&nbsp;=&nbsp;l_key[1:]&lt;/font&gt;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;setattr(c,&nbsp;l_key,&nbsp;val)&lt;/b&gt;&lt;br&gt;<br>
&lt;/i&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
Don't&nbsp;know&nbsp;if&nbsp;this&nbsp;is&nbsp;exactly&nbsp;the&nbsp;correct&nbsp;fix,&nbsp;but&nbsp;it&nbsp;works&nbsp;for&nbsp;me&nbsp;and<br>
I&nbsp;thought&nbsp;that&nbsp;I&nbsp;would&nbsp;email&nbsp;the&nbsp;list.&amp;nbsp;&nbsp;I&nbsp;tried&nbsp;to&nbsp;subscribe&nbsp;to<br>
&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:python-dev@httpd.apache.org&quot;&gt;python-dev@httpd.apache.org&lt;/a&gt;,&nbsp;but&nbsp;haven't&nbsp;gotten&nbsp;a&nbsp;response&nbsp;back&nbsp;yet,&nbsp;I<br>
CC&nbsp;this&nbsp;message&nbsp;to&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:python-dev@httpd.apache.org&quot;&gt;python-dev@httpd.apache.org&lt;/a&gt;&nbsp;also.&lt;br&gt;<br>
&lt;br&gt;<br>
Craig&nbsp;Warren&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
