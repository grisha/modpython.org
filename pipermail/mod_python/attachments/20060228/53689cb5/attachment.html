<tt>
Hi&nbsp;Graham&lt;br&gt;&lt;br&gt;It&nbsp;would&nbsp;be&nbsp;nice&nbsp;if&nbsp;there&nbsp;was&nbsp;a&nbsp;mod_python&nbsp;recipe&nbsp;for&nbsp;doing&nbsp;a&nbsp;logon.&lt;br&gt;&lt;br&gt;Marinus&lt;br&gt;&lt;br&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;2/27/06,&nbsp;&lt;b&nbsp;class=&quot;gmail_sendername&quot;&gt;Graham&nbsp;Dumpleton&lt;/b&gt;&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:grahamd@dscpl.com.au&quot;&gt;<br>
grahamd@dscpl.com.au&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;/span&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;marinus&nbsp;van&nbsp;aswegen&nbsp;wrote&nbsp;..&lt;br&gt;&amp;gt;&nbsp;Hi&nbsp;Graham&lt;br&gt;<br>
&amp;gt;&lt;br&gt;&amp;gt;&nbsp;I&nbsp;thought&nbsp;that&nbsp;my&nbsp;session&nbsp;line&nbsp;will&nbsp;not&nbsp;just&nbsp;create&nbsp;the&nbsp;session&nbsp;but&nbsp;will&lt;br&gt;&amp;gt;&nbsp;access&nbsp;the&nbsp;session&nbsp;for&nbsp;that&nbsp;request?&lt;br&gt;&lt;br&gt;No&nbsp;it&nbsp;doesn't.&lt;br&gt;&lt;br&gt;What&nbsp;you&nbsp;will&nbsp;need&nbsp;to&nbsp;do&nbsp;is&nbsp;to&nbsp;use&nbsp;a&nbsp;scheme&nbsp;whereby&nbsp;you&nbsp;cache&nbsp;the<br>
&lt;br&gt;first&nbsp;created&nbsp;session&nbsp;object&nbsp;for&nbsp;later&nbsp;access.&nbsp;The&nbsp;common&nbsp;convention&lt;br&gt;for&nbsp;this&nbsp;is&nbsp;to&nbsp;save&nbsp;it&nbsp;as&nbsp;&amp;quot;req.session&amp;quot;.&lt;br&gt;&lt;br&gt;def&nbsp;_get_session(req):&lt;br&gt;&amp;nbsp;&amp;nbsp;if&nbsp;not&nbsp;hasattr(req,&amp;quot;session&amp;quot;):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;req.session<br>
&nbsp;=&nbsp;Session.Session(req,&nbsp;secret&nbsp;=&nbsp;config.cookie_passwd)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;...&nbsp;perform&nbsp;any&nbsp;first&nbsp;time&nbsp;initialisation&nbsp;etc.&lt;br&gt;&amp;nbsp;&amp;nbsp;return&nbsp;req.session&lt;br&gt;&lt;br&gt;def&nbsp;_validate_session(req):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;session&nbsp;=&nbsp;_get_session(req)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;....&lt;br&gt;&lt;br&gt;<br>
def&nbsp;test(req):&lt;br&gt;&amp;nbsp;&amp;nbsp;_validate_session(req)&lt;br&gt;&amp;nbsp;&amp;nbsp;session&nbsp;=&nbsp;req.session&lt;br&gt;&amp;nbsp;&amp;nbsp;...&lt;br&gt;&lt;br&gt;BTW,&nbsp;ensure&nbsp;you&nbsp;put&nbsp;an&nbsp;underscore&nbsp;before&nbsp;these&nbsp;utility&nbsp;functions&lt;br&gt;else&nbsp;they&nbsp;will&nbsp;be&nbsp;directly&nbsp;accessible&nbsp;to&nbsp;remote&nbsp;users&nbsp;with&nbsp;the&nbsp;right<br>
&lt;br&gt;URL.&nbsp;The&nbsp;underscore&nbsp;will&nbsp;hide&nbsp;them.&lt;br&gt;&lt;br&gt;PS,&nbsp;please&nbsp;try&nbsp;and&nbsp;keep&nbsp;replies&nbsp;on&nbsp;the&nbsp;mailing&nbsp;list&nbsp;by&nbsp;using&nbsp;&amp;quot;Reply&nbsp;All&amp;quot;&lt;br&gt;and&nbsp;not&nbsp;just&nbsp;&amp;quot;Reply&amp;quot;.&lt;br&gt;&lt;br&gt;Graham&lt;br&gt;&lt;br&gt;&amp;gt;&nbsp;On&nbsp;2/27/06,&nbsp;Graham&nbsp;Dumpleton&nbsp;&amp;lt;<br>
&lt;a&nbsp;href=&quot;mailto:grahamd@dscpl.com.au&quot;&gt;grahamd@dscpl.com.au&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;&amp;gt;&nbsp;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;&amp;gt;&nbsp;On&nbsp;27/02/2006,&nbsp;at&nbsp;7:36&nbsp;PM,&nbsp;marinus&nbsp;van&nbsp;aswegen&nbsp;wrote:&lt;br&gt;&amp;gt;&nbsp;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;&amp;gt;&nbsp;&amp;gt;&nbsp;def&nbsp;validate_session(req):<br>
&lt;br&gt;&amp;gt;&nbsp;&amp;gt;&nbsp;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;quot;&amp;quot;&amp;quot;&lt;br&gt;&amp;gt;&nbsp;&amp;gt;&nbsp;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;this&nbsp;function&nbsp;must&nbsp;be&nbsp;called&nbsp;prior&nbsp;to&nbsp;all&nbsp;function&nbsp;to&lt;br&gt;&amp;gt;&nbsp;&amp;gt;&nbsp;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;ensure&nbsp;that&nbsp;the&nbsp;user&nbsp;is&nbsp;autenticated&lt;br&gt;&amp;gt;&nbsp;&amp;gt;&nbsp;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;quot;&amp;quot;&amp;quot;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;&amp;gt;&nbsp;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#&nbsp;get&nbsp;the&nbsp;session&nbsp;for&nbsp;this&nbsp;request&lt;br&gt;&amp;gt;&nbsp;&amp;gt;&nbsp;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;session&nbsp;=&nbsp;Session.Session(req,&nbsp;secret&nbsp;=&nbsp;config.cookie_passwd)&lt;br&gt;&amp;gt;&nbsp;&amp;gt;&nbsp;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.....&lt;br&gt;&amp;gt;&nbsp;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;&amp;gt;&nbsp;&amp;gt;&nbsp;def&nbsp;test(req):<br>
&lt;br&gt;&amp;gt;&nbsp;&amp;gt;&nbsp;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;&amp;gt;&nbsp;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;validate_session(req)&lt;br&gt;&amp;gt;&nbsp;&amp;gt;&nbsp;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;&amp;gt;&nbsp;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;session&nbsp;=&nbsp;Session.Session(req,&nbsp;secret&nbsp;=&nbsp;config.cookie_passwd)&lt;br&gt;&amp;gt;&nbsp;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;&amp;gt;&nbsp;Here&nbsp;is&nbsp;your&nbsp;first&nbsp;problem.&nbsp;The&nbsp;validate_session()&nbsp;function&nbsp;has&nbsp;already<br>
&lt;br&gt;&amp;gt;&nbsp;&amp;gt;&nbsp;created&nbsp;a&nbsp;session&nbsp;object.&nbsp;Creating&nbsp;the&nbsp;second&nbsp;here&nbsp;for&nbsp;the&nbsp;same&nbsp;request&lt;br&gt;&amp;gt;&nbsp;&amp;gt;&nbsp;will&nbsp;cause&nbsp;a&nbsp;deadlock.&lt;br&gt;&amp;gt;&nbsp;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;&amp;gt;&nbsp;There&nbsp;are&nbsp;various&nbsp;other&nbsp;things&nbsp;which&nbsp;could&nbsp;be&nbsp;done&nbsp;better,&nbsp;but&nbsp;will&nbsp;just&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;point&nbsp;out&nbsp;this&nbsp;obvious&nbsp;thing&nbsp;for&nbsp;now.&lt;br&gt;&amp;gt;&nbsp;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;&amp;gt;&nbsp;Graham&lt;br&gt;&amp;gt;&nbsp;&amp;gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
