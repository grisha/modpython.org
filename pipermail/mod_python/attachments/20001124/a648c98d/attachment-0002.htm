<tt>
&lt;!doctype&nbsp;html&nbsp;public&nbsp;&quot;-//w3c//dtd&nbsp;html&nbsp;4.0&nbsp;transitional//en&quot;&gt;<br>
&lt;html&gt;<br>
Hi&nbsp;folks,<br>
&lt;br&gt;I&nbsp;got&nbsp;the&nbsp;script&nbsp;which&nbsp;runs&nbsp;perfect&nbsp;on&nbsp;my&nbsp;linuxbox&nbsp;as&nbsp;long&nbsp;as&nbsp;it&amp;acute;s<br>
not&nbsp;running&nbsp;inside&nbsp;mod_python.&nbsp;Below&nbsp;I&nbsp;show&nbsp;you&nbsp;the&nbsp;mod_python&nbsp;version<br>
that&nbsp;is&nbsp;producing&nbsp;the&nbsp;error&nbsp;code&nbsp;you&nbsp;can&nbsp;see&nbsp;on&nbsp;the&nbsp;bottom&nbsp;of&nbsp;this&nbsp;mail.<br>
As&nbsp;I&nbsp;am&nbsp;new&nbsp;to&nbsp;mod_python&nbsp;but&nbsp;can&nbsp;still&nbsp;remember&nbsp;such&nbsp;strange&nbsp;effects&nbsp;when<br>
playing&nbsp;with&nbsp;mod_perl&nbsp;for&nbsp;the&nbsp;first&nbsp;time&nbsp;some&nbsp;years&nbsp;ago&nbsp;I&nbsp;think&nbsp;it&amp;acute;s<br>
time&nbsp;for&nbsp;some&nbsp;guru&amp;acute;s&nbsp;advice<br>
&lt;br&gt;Maybe&nbsp;I&nbsp;didn&amp;acute;t&nbsp;get&nbsp;any&nbsp;global&nbsp;restrictions&nbsp;(like&nbsp;always&nbsp;using<br>
the&nbsp;strict&nbsp;pragma&nbsp;under&nbsp;mod_perl)&nbsp;so&nbsp;far.&nbsp;Please&nbsp;give&nbsp;some&nbsp;hint&nbsp;where&nbsp;to<br>
look&nbsp;further<br>
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;thanks&nbsp;a&nbsp;lot<br>
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;Sebastian<br>
&lt;p&gt;------the&nbsp;script------<br>
&lt;p&gt;from&nbsp;mod_python&nbsp;import&nbsp;apache<br>
&lt;br&gt;import&nbsp;string,&nbsp;os,&nbsp;re<br>
&lt;br&gt;import&nbsp;xml.dom.ext<br>
&lt;br&gt;from&nbsp;xml.xslt&nbsp;import&nbsp;XsltException<br>
&lt;br&gt;from&nbsp;xml.xslt.Processor&nbsp;import&nbsp;Processor<br>
&lt;br&gt;&amp;nbsp;<br>
&lt;p&gt;sheet&nbsp;=&nbsp;&quot;&quot;&quot;<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;xsl:stylesheet&nbsp;version=&quot;1.0&quot;<br>
xmlns:xsl=&quot;&lt;A&nbsp;HREF=&quot;http://www.w3.org/1999/XSL/Transform&quot;&gt;http://www.w3.org/1999/XSL/Transform&lt;/A&gt;&quot;&nbsp;xmlns=&quot;&lt;A&nbsp;HREF=&quot;http://www.w3.org/TR/xhtml1/strict&quot;&gt;http://www.w3.org/TR/xhtml1/strict&lt;/A&gt;&quot;&gt;<br>
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;xsl:template<br>
match=&quot;main&quot;&gt;<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
&amp;lt;html&gt;&amp;lt;head&gt;ein&nbsp;test&amp;lt;/head&gt;&amp;lt;body&gt;<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
&amp;lt;hr/&gt;<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
&amp;lt;b&gt;&amp;lt;xsl:value-of&nbsp;select=&quot;/main/test&quot;/&gt;&amp;lt;/b&gt;<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
&amp;lt;em&gt;&amp;lt;xsl:value-of&nbsp;select=&quot;/main/testBody&quot;/&gt;&amp;lt;/em&gt;<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
&amp;lt;/body&gt;&amp;lt;/html&gt;<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;/xsl:template&gt;<br>
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;xsl:apply-templates/&gt;<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;/xsl:stylesheet&gt;<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&quot;&quot;&quot;<br>
&lt;p&gt;def&nbsp;handler(req):<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;req.content_type&nbsp;=&nbsp;&quot;text/plain&quot;<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;req.send_http_header()<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;the_req_file&nbsp;=&nbsp;req.the_request<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;a&nbsp;=&nbsp;string.split(the_req_file,&nbsp;&quot;&nbsp;&quot;)<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;tmp_file&nbsp;=&nbsp;string.split(a[1],&nbsp;&quot;?&quot;)<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;file_name&nbsp;=&nbsp;tmp_file[1]<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;path_prefix&nbsp;=&nbsp;&quot;/var/www&quot;<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;path&nbsp;=&nbsp;path_prefix+file_name<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;raw_data&nbsp;=&nbsp;open(path).read()<br>
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;processor&nbsp;=&nbsp;xml.xslt.Processor.Processor()<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;processor.appendStylesheetString(sheet)<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;result&nbsp;=&nbsp;processor.runString(raw_data,&nbsp;ignorePis=1)<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;req.write(result)<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&nbsp;apache.OK<br>
&lt;br&gt;&amp;nbsp;<br>
&lt;p&gt;-------&nbsp;the&nbsp;error&nbsp;---------<br>
&lt;br&gt;&amp;nbsp;<br>
&lt;blockquote&nbsp;TYPE=CITE&gt;<br>
&lt;pre&gt;Mod_python&nbsp;error:&nbsp;&quot;PythonHandler&nbsp;xmlhandler&quot;<br>
<br>
Traceback&nbsp;(innermost&nbsp;last):<br>
<br>
&amp;nbsp;&nbsp;File&nbsp;&quot;/usr/lib/python1.5/site-packages/mod_python/apache.py&quot;,&nbsp;line&nbsp;175,&nbsp;in&nbsp;Dispatch<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;module&nbsp;=&nbsp;import_module(module_name,&nbsp;_req)<br>
<br>
&amp;nbsp;&nbsp;File&nbsp;&quot;/usr/lib/python1.5/site-packages/mod_python/apache.py&quot;,&nbsp;line&nbsp;316,&nbsp;in&nbsp;import_module<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;module&nbsp;=&nbsp;__import__(module_name)<br>
<br>
&amp;nbsp;&nbsp;File&nbsp;&quot;/var/www/xml/xmlhandler.py&quot;,&nbsp;line&nbsp;3,&nbsp;in&nbsp;?<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;import&nbsp;xml.dom.ext<br>
<br>
&amp;nbsp;&nbsp;File&nbsp;&quot;/usr/lib/python1.5/site-packages/xml/dom/__init__.py&quot;,&nbsp;line&nbsp;41,&nbsp;in&nbsp;?<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;from&nbsp;xml.dom.html&nbsp;import&nbsp;HTMLDOMImplementation<br>
<br>
&amp;nbsp;&nbsp;File&nbsp;&quot;/usr/lib/python1.5/site-packages/xml/dom/html/__init__.py&quot;,&nbsp;line&nbsp;281,&nbsp;in&nbsp;?<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;g_numCharEntityPattern&nbsp;=&nbsp;re.compile('?(\d+);')<br>
<br>
&amp;nbsp;&nbsp;File&nbsp;&quot;/usr/lib/python1.5/re.py&quot;,&nbsp;line&nbsp;79,&nbsp;in&nbsp;compile<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;code=pcre_compile(pattern,&nbsp;flags,&nbsp;groupindex)<br>
<br>
pcre.error:&nbsp;('unmatched&nbsp;parentheses',&nbsp;208)&lt;/pre&gt;<br>
&lt;/blockquote&gt;<br>
<br>
&lt;br&gt;&amp;nbsp;<br>
&lt;br&gt;&amp;nbsp;<br>
&lt;br&gt;&amp;nbsp;<br>
&lt;br&gt;&amp;nbsp;&lt;/html&gt;<br>

</tt>
