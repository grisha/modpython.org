<tt>
I&nbsp;have&nbsp;unearthed&nbsp;a&nbsp;strange&nbsp;problem.&amp;nbsp;&nbsp;I&nbsp;have&nbsp;a&nbsp;simple&nbsp;httpd.conf&nbsp;that&nbsp;should&nbsp;map&nbsp;urls&nbsp;like&nbsp;this:&lt;br&gt;&lt;br&gt;/download&nbsp;-&amp;gt;&nbsp;static&nbsp;content,&nbsp;matching&nbsp;client&nbsp;SSL&nbsp;cert&nbsp;required&lt;br&gt;*&nbsp;-&amp;gt;&nbsp;mod_python&nbsp;handler,&nbsp;SSL&nbsp;based,&nbsp;but&nbsp;no&nbsp;client&nbsp;cert&nbsp;required<br>
&lt;br&gt;&lt;br&gt;What&nbsp;I&nbsp;get&nbsp;instead&nbsp;is&nbsp;&lt;br&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;https://foobar.com/download/stuff.txt&quot;&gt;https://foobar.com/download/stuff.txt&lt;/a&gt;&nbsp;--&nbsp;static&nbsp;content,&nbsp;client&nbsp;cert&nbsp;required&lt;br&gt;&lt;a&nbsp;href=&quot;https://foobar.com/setup/things&quot;&gt;https://foobar.com/setup/things<br>
&lt;/a&gt;&nbsp;--&nbsp;python&nbsp;handler,&nbsp;no&nbsp;client&nbsp;cert&lt;br&gt;&lt;a&nbsp;href=&quot;https://foobar.com/setup/download/stuff&quot;&gt;https://foobar.com/setup/download/stuff&lt;/a&gt;&nbsp;--&nbsp;python&nbsp;handler,&nbsp;client&nbsp;cert&nbsp;required&lt;br&gt;&lt;br&gt;The&nbsp;last&nbsp;thing&nbsp;should&nbsp;never&nbsp;happen&nbsp;by&nbsp;the&nbsp;configuration:<br>
&lt;br&gt;&lt;br&gt;----&nbsp;httpd.conf&nbsp;----&lt;br&gt;ServerName&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1&quot;&gt;127.0.0.1&lt;/a&gt;&lt;br&gt;ServerRoot&nbsp;&amp;quot;/usr/local&amp;quot;&lt;br&gt;DocumentRoot&nbsp;&amp;quot;/usr/local/htdocs&amp;quot;&lt;br&gt;Listen&nbsp;443&lt;br&gt;User&nbsp;www&lt;br&gt;Group&nbsp;www&lt;br&gt;LoadModule&nbsp;python_module&nbsp;modules/mod_python.so<br>
&lt;br&gt;&lt;br&gt;&amp;lt;Location&nbsp;&amp;quot;/&amp;quot;&amp;gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;SetHandler&nbsp;mod_python&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;PythonHandler&nbsp;dummy::handler&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;PythonDebug&nbsp;On&lt;br&gt;&amp;lt;/Location&amp;gt;&lt;br&gt;&lt;br&gt;&amp;lt;Location&nbsp;&amp;quot;/download&amp;quot;&amp;gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;SSLVerifyClient&nbsp;require<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;SSLVerifyDepth&nbsp;1&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;SetHandler&nbsp;None&lt;br&gt;&amp;lt;/Location&amp;gt;&lt;br&gt;&lt;br&gt;SSLEngine&nbsp;on&lt;br&gt;SSLCertificateFile&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;certs/dummy.crt&lt;br&gt;SSLCertificateKeyFile&nbsp;certs/dummy.crt&lt;br&gt;SSLCACertificateFile&amp;nbsp;&nbsp;certs/dummy-ca.crt<br>
&lt;br&gt;--------&lt;br&gt;&lt;br&gt;This&nbsp;is&nbsp;running&nbsp;against&nbsp;apache&nbsp;2.2.0,&nbsp;python&nbsp;2.4.1&nbsp;and&nbsp;mod_python&nbsp;3.2.8&nbsp;(+&nbsp;the&nbsp;four&nbsp;patches&nbsp;found&nbsp;here&nbsp;--&nbsp;needed&nbsp;for&nbsp;proper&nbsp;2.2.0&nbsp;operation&nbsp;--&nbsp;&lt;a&nbsp;href=&quot;http://svn.apache.org/viewcvs.cgi?rev=376544&amp;amp;view=rev&quot;&gt;<br>
http://svn.apache.org/viewcvs.cgi?rev=376544&amp;amp;view=rev&lt;/a&gt;&nbsp;)&lt;br&gt;&lt;br&gt;Basically,&nbsp;any&nbsp;url&nbsp;that&nbsp;contains,&nbsp;but&nbsp;does&nbsp;not&nbsp;begin&nbsp;with&nbsp;'/download/',&nbsp;falsely&nbsp;requires&nbsp;an&nbsp;SSL&nbsp;client&nbsp;cert,&nbsp;and&nbsp;produces&nbsp;an&nbsp;IOError&nbsp;in&nbsp;the&nbsp;python&nbsp;during&nbsp;the&nbsp;write()&nbsp;call.<br>
&lt;br&gt;&lt;br&gt;Simple&nbsp;test&nbsp;python&nbsp;code&nbsp;is&nbsp;here:&lt;br&gt;&lt;br&gt;----&nbsp;dummy.py&nbsp;----&lt;br&gt;from&nbsp;mod_python&nbsp;import&nbsp;apache&lt;br&gt;&lt;br&gt;def&nbsp;handler(req):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;req.content_type&nbsp;=&nbsp;'text/plain'&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;try:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;req.write(str(req.the_request))&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;except&nbsp;IOError,&nbsp;e:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;apache.log_error('IOError:&nbsp;'&nbsp;+&nbsp;str(e))&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;apache.log_error('IOError:&nbsp;'&nbsp;+&nbsp;req.the_request)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&nbsp;apache.OK&lt;br&gt;--------&lt;br&gt;&lt;br&gt;Below&nbsp;are&nbsp;the&nbsp;errors&nbsp;produced&nbsp;in&nbsp;apache's&nbsp;error&nbsp;log&nbsp;for&nbsp;each&nbsp;url,&nbsp;using&nbsp;a&nbsp;client&nbsp;that&nbsp;does&nbsp;not&nbsp;have&nbsp;the&nbsp;client&nbsp;cert&nbsp;configured.<br>
&lt;br&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;https://foobar.com/download/stuff.txt&quot;&gt;https://foobar.com/download/stuff.txt&lt;/a&gt;&lt;br&gt;[www_error]&nbsp;Re-negotiation&nbsp;handshake&nbsp;failed:&nbsp;Not&nbsp;accepted&nbsp;by&nbsp;client!?&lt;br&gt;[curl&nbsp;error]&nbsp;SSL&nbsp;read:&nbsp;error:14094410:SSL&nbsp;routines:SSL3_READ_BYTES:sslv3&nbsp;alert&nbsp;handshake&nbsp;failure,&nbsp;errno&nbsp;0<br>
&lt;br&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://foobar.com/setup/things&quot;&gt;https://foobar.com/setup/things&lt;/a&gt;&lt;br&gt;[no&nbsp;errors]&lt;br&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://foobar.com/setup/download/stuff&quot;&gt;https://foobar.com/setup/download/stuff&lt;/a&gt;&lt;br&gt;[www_error]&nbsp;IOError:&nbsp;Write&nbsp;failed,&nbsp;client&nbsp;closed&nbsp;connection.&lt;br&gt;[www_error]&nbsp;IOError:&nbsp;GET&nbsp;/foo/download&nbsp;HTTP/1.1&lt;br&gt;[curl&nbsp;error]&nbsp;SSL&nbsp;read:&nbsp;error:14094410:SSL&nbsp;routines:SSL3_READ_BYTES:sslv3&nbsp;alert&nbsp;handshake&nbsp;failure,&nbsp;errno&nbsp;0<br>
&lt;br&gt;&lt;br&gt;Has&nbsp;anybody&nbsp;seen&nbsp;any&nbsp;problem&nbsp;like&nbsp;this?&amp;nbsp;&nbsp;I&nbsp;tried&nbsp;setting&nbsp;this&nbsp;up&nbsp;to&nbsp;fail&nbsp;w/&nbsp;static&nbsp;content,&nbsp;but&nbsp;so&nbsp;far&nbsp;it&nbsp;only&nbsp;fails&nbsp;w/&nbsp;mod_python&nbsp;+&nbsp;ssl.&lt;br&gt;The&nbsp;apache&nbsp;lists&nbsp;show&nbsp;a&nbsp;few&nbsp;other&nbsp;problems&nbsp;w/&nbsp;the&nbsp;SSLVerifyClient&nbsp;directive,&nbsp;so&nbsp;it&nbsp;may&nbsp;not&nbsp;be&nbsp;only&nbsp;mod_python&nbsp;that&nbsp;triggers&nbsp;this...<br>
&lt;br&gt;&lt;br&gt;&amp;nbsp;&nbsp;&lt;a&nbsp;href=&quot;http://marc.theaimsgroup.com/?l=apache-modssl&amp;amp;w=2&amp;amp;r=1&amp;amp;s=SSLVerifyClient&amp;amp;q=b&quot;&gt;http://marc.theaimsgroup.com/?l=apache-modssl&amp;amp;w=2&amp;amp;r=1&amp;amp;s=SSLVerifyClient&amp;amp;q=b&lt;/a&gt;&lt;br&gt;&lt;br&gt;Any&nbsp;suggestions&nbsp;on&nbsp;how&nbsp;to&nbsp;fix&nbsp;this,&nbsp;or&nbsp;what&nbsp;I&nbsp;ought&nbsp;to&nbsp;do&nbsp;to&nbsp;bring&nbsp;this&nbsp;to&nbsp;apache/modssl&nbsp;developer&nbsp;attention?&amp;nbsp;&nbsp;Thanks.<br>
&lt;br&gt;&lt;br&gt;ben&lt;br&gt;<br>

</tt>
