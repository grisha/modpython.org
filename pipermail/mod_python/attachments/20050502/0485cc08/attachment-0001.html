<tt>
&lt;!DOCTYPE&nbsp;html&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.01&nbsp;Transitional//EN&quot;&gt;<br>
&lt;html&gt;<br>
&lt;head&gt;<br>
&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;charset=ISO-8859-1&quot;&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&lt;/head&gt;<br>
&lt;body&nbsp;bgcolor=&quot;#ffffff&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
Hello&nbsp;Nicolas,&lt;br&gt;<br>
&lt;br&gt;<br>
What&nbsp;I&nbsp;am&nbsp;really&nbsp;worried&nbsp;about&nbsp;is&nbsp;that&nbsp;in&nbsp;a&nbsp;multi-threaded&nbsp;environment,<br>
accessing&nbsp;a&nbsp;modular&nbsp;level&nbsp;method,&nbsp;multiple&nbsp;threads&nbsp;might&nbsp;be&nbsp;accessing<br>
the&nbsp;same&nbsp;method&nbsp;at&nbsp;the&nbsp;same&nbsp;time&nbsp;and&nbsp;overwriting&nbsp;the&nbsp;other&nbsp;threads&nbsp;path<br>
list&nbsp;as&nbsp;a&nbsp;result.&amp;nbsp;&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
As&nbsp;per&nbsp;your&nbsp;question,&nbsp;I&nbsp;create&nbsp;a&nbsp;_lock&nbsp;object&nbsp;on&nbsp;top&nbsp;of&nbsp;the&nbsp;module.&amp;nbsp;<br>
Pretty&nbsp;much&nbsp;this&nbsp;method&nbsp;was&nbsp;created&nbsp;in&nbsp;a&nbsp;&quot;SharedResources&quot;&nbsp;module&nbsp;as&nbsp;a<br>
modular&nbsp;level&nbsp;method.&amp;nbsp;&nbsp;My&nbsp;framework&nbsp;then&nbsp;imports&nbsp;the&nbsp;method&nbsp;and&nbsp;uses&nbsp;it<br>
within&nbsp;to&nbsp;fix&nbsp;the&nbsp;paths.&lt;br&gt;<br>
&lt;br&gt;<br>
What&nbsp;do&nbsp;you&nbsp;think?&lt;br&gt;<br>
&lt;br&gt;<br>
Hozi&lt;br&gt;<br>
&lt;br&gt;<br>
Nicolas&nbsp;Lehuen&nbsp;wrote:<br>
&lt;blockquote&nbsp;cite=&quot;midc298f2d7050429220333ec2b6b@mail.gmail.com&quot;<br>
&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;Hi&nbsp;Huzaifa,<br>
<br>
Well,&nbsp;that's&nbsp;really&nbsp;up&nbsp;to&nbsp;you,&nbsp;especially&nbsp;since&nbsp;I&nbsp;don't&nbsp;understand<br>
where&nbsp;the&nbsp;_lock&nbsp;variable&nbsp;comes&nbsp;from.<br>
<br>
If&nbsp;it's&nbsp;not&nbsp;possible&nbsp;to&nbsp;change&nbsp;the&nbsp;path&nbsp;list&nbsp;which&nbsp;is&nbsp;passed&nbsp;as&nbsp;a<br>
parameter&nbsp;without&nbsp;acquiring&nbsp;the&nbsp;lock,&nbsp;then&nbsp;why&nbsp;not,&nbsp;but&nbsp;I'd&nbsp;put&nbsp;the<br>
locking&nbsp;mechanism&nbsp;in&nbsp;the&nbsp;calling&nbsp;code&nbsp;rather&nbsp;than&nbsp;in&nbsp;this&nbsp;function.<br>
Note&nbsp;that&nbsp;you&nbsp;are&nbsp;not&nbsp;modifying&nbsp;the&nbsp;path&nbsp;list&nbsp;in-place&nbsp;:&nbsp;you&nbsp;just<br>
return&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;path&nbsp;list&nbsp;with&nbsp;some&nbsp;fixes&nbsp;in&nbsp;it.&nbsp;So&nbsp;there&nbsp;is&nbsp;no<br>
need&nbsp;to&nbsp;lock&nbsp;anything&nbsp;here,&nbsp;except&nbsp;if&nbsp;you&nbsp;fear&nbsp;that&nbsp;the&nbsp;path&nbsp;list&nbsp;will<br>
be&nbsp;changed&nbsp;during&nbsp;the&nbsp;iteration,&nbsp;but&nbsp;for&nbsp;that,&nbsp;you&nbsp;have&nbsp;to&nbsp;put&nbsp;a<br>
locking&nbsp;mechanism&nbsp;somewhere&nbsp;else&nbsp;for&nbsp;any&nbsp;modification&nbsp;of&nbsp;the&nbsp;path<br>
list.&nbsp;So&nbsp;my&nbsp;first&nbsp;advice&nbsp;is&nbsp;:&nbsp;keep&nbsp;all&nbsp;locking&nbsp;code&nbsp;in&nbsp;the&nbsp;same&nbsp;place<br>
and&nbsp;you'll&nbsp;save&nbsp;time&nbsp;and&nbsp;mental&nbsp;health&nbsp;:).<br>
<br>
My&nbsp;second&nbsp;advice&nbsp;is&nbsp;:&nbsp;don't&nbsp;be&nbsp;over-protective&nbsp;at&nbsp;the&nbsp;cost&nbsp;of<br>
performance.&nbsp;Trust&nbsp;the&nbsp;users&nbsp;of&nbsp;your&nbsp;code.&nbsp;Provided&nbsp;that&nbsp;they&nbsp;have&nbsp;a<br>
proper&nbsp;documentation,&nbsp;it's&nbsp;not&nbsp;necessary&nbsp;to&nbsp;lock&nbsp;anything,&nbsp;because<br>
your&nbsp;users&nbsp;will&nbsp;know&nbsp;that&nbsp;bad&nbsp;things&nbsp;will&nbsp;happen&nbsp;if&nbsp;they&nbsp;change&nbsp;the<br>
path&nbsp;list&nbsp;during&nbsp;iteration,&nbsp;so&nbsp;they'll&nbsp;do&nbsp;the&nbsp;right&nbsp;stuff&nbsp;accordingly.<br>
Likewise,&nbsp;it's&nbsp;not&nbsp;necessary&nbsp;to&nbsp;check&nbsp;whether&nbsp;path&nbsp;is&nbsp;a&nbsp;list,&nbsp;or<br>
whether&nbsp;some&nbsp;path&nbsp;entries&nbsp;are&nbsp;None&nbsp;or&nbsp;&quot;&quot;.&nbsp;If&nbsp;your&nbsp;users&nbsp;want&nbsp;to&nbsp;give<br>
silly&nbsp;data&nbsp;to&nbsp;your&nbsp;function,&nbsp;let&nbsp;them&nbsp;do&nbsp;it,&nbsp;and&nbsp;let&nbsp;Python&nbsp;throw<br>
exceptions&nbsp;at&nbsp;them.<br>
<br>
Regards,<br>
<br>
Nicolas<br>
<br>
On&nbsp;4/29/05,&nbsp;Huzaifa&nbsp;Tapal&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-rfc2396E&quot;&nbsp;href=&quot;mailto:huzaifa@hostway.com&quot;&gt;&amp;lt;huzaifa@hostway.com&amp;gt;&lt;/a&gt;&nbsp;wrote:<br>
&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;&nbsp;I&nbsp;wanted&nbsp;to&nbsp;ask&nbsp;for&nbsp;a&nbsp;piece&nbsp;of&nbsp;advise.&nbsp;&nbsp;So&nbsp;the&nbsp;fix&nbsp;that&nbsp;I&nbsp;have&nbsp;mentioned,&nbsp;I<br>
moved&nbsp;that&nbsp;fix&nbsp;(the&nbsp;method&nbsp;I&nbsp;replaced&nbsp;with&nbsp;the&nbsp;map(lambda)&nbsp;solution&nbsp;you&nbsp;had<br>
with&nbsp;a&nbsp;minor&nbsp;fix)&nbsp;to&nbsp;another&nbsp;&quot;SharedResources&quot;&nbsp;module&nbsp;that&nbsp;I&nbsp;import&nbsp;in&nbsp;my<br>
framework's&nbsp;handler.&nbsp;&nbsp;From&nbsp;within&nbsp;the&nbsp;handler&nbsp;and&nbsp;my&nbsp;app,&nbsp;I&nbsp;am&nbsp;call&nbsp;that<br>
method&nbsp;passing&nbsp;in&nbsp;a&nbsp;path&nbsp;argument&nbsp;that&nbsp;it&nbsp;*fixes*&nbsp;and&nbsp;returns&nbsp;back&nbsp;the<br>
results.&nbsp;&nbsp;Here&nbsp;is&nbsp;what&nbsp;the&nbsp;new&nbsp;method&nbsp;looks&nbsp;like:<br>
&nbsp;<br>
&nbsp;def&nbsp;fix_paths(&nbsp;path&nbsp;):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;&nbsp;Convenience&nbsp;method&nbsp;for&nbsp;checking&nbsp;and&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;adding&nbsp;'/'&nbsp;to&nbsp;the&nbsp;end&nbsp;of&nbsp;paths&nbsp;for&nbsp;compatibility<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;mod_python's&nbsp;import_module.&nbsp;&quot;&quot;&quot;<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_lock.acquire()<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;path&nbsp;and&nbsp;type(path)&nbsp;==&nbsp;type([]):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;path&nbsp;=&nbsp;map(lambda&nbsp;entry&nbsp;:&nbsp;(entry!=''&nbsp;and&nbsp;entry[-1]!='/'&nbsp;and<br>
entry+'/')&nbsp;or&nbsp;entry,path)<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;path<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;finally:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_lock.release()<br>
&nbsp;<br>
&nbsp;Should&nbsp;I&nbsp;have&nbsp;the&nbsp;thread-locking&nbsp;in&nbsp;place&nbsp;or&nbsp;can&nbsp;I&nbsp;get&nbsp;by&nbsp;without&nbsp;having&nbsp;it<br>
in&nbsp;place?&nbsp;&nbsp;The&nbsp;reason&nbsp;I&nbsp;did&nbsp;add&nbsp;that&nbsp;was&nbsp;because&nbsp;the&nbsp;path&nbsp;value&nbsp;may&nbsp;get<br>
changed,&nbsp;in&nbsp;the&nbsp;process,&nbsp;I&nbsp;thought&nbsp;of&nbsp;making&nbsp;this&nbsp;method&nbsp;thread-safe.<br>
&nbsp;<br>
&nbsp;Also&nbsp;Nicolas,&nbsp;if&nbsp;you&nbsp;notice&nbsp;I&nbsp;added&nbsp;another&nbsp;check&nbsp;in&nbsp;your&nbsp;lambda&nbsp;function<br>
to&nbsp;check&nbsp;if&nbsp;the&nbsp;entry&nbsp;is&nbsp;an&nbsp;empty&nbsp;string.&nbsp;&nbsp;If&nbsp;that&nbsp;wasn't&nbsp;there&nbsp;then&nbsp;if&nbsp;an<br>
empty&nbsp;string&nbsp;path&nbsp;was&nbsp;passed&nbsp;in&nbsp;the&nbsp;list&nbsp;paths,&nbsp;the&nbsp;function&nbsp;would&nbsp;break.&nbsp;<br>
Thought,&nbsp;i'd&nbsp;let&nbsp;you&nbsp;know&nbsp;if&nbsp;you&nbsp;were&nbsp;gonna&nbsp;add&nbsp;this&nbsp;functionality&nbsp;into&nbsp;the<br>
import_module&nbsp;method&nbsp;for&nbsp;apache.py<br>
&nbsp;<br>
&nbsp;Thanks<br>
&nbsp;<br>
&nbsp;Hozi<br>
<br>
&nbsp;<br>
&nbsp;Nicolas&nbsp;Lehuen&nbsp;wrote:&nbsp;<br>
&nbsp;Sorry,&nbsp;reposting&nbsp;to&nbsp;the&nbsp;whole&nbsp;list&nbsp;:<br>
<br>
Hi,<br>
<br>
The&nbsp;change&nbsp;I've&nbsp;made&nbsp;for&nbsp;MODPYTHON-9&nbsp;affects&nbsp;only&nbsp;the&nbsp;publisher<br>
module.&nbsp;It&nbsp;solves&nbsp;the&nbsp;problem&nbsp;encountered&nbsp;when&nbsp;you&nbsp;had&nbsp;two&nbsp;pages,&nbsp;one<br>
at&nbsp;/index.py,&nbsp;and&nbsp;the&nbsp;other&nbsp;at&nbsp;/foobar/index.py.<br>
<br>
Huzaifa,&nbsp;what&nbsp;I&nbsp;don't&nbsp;understand&nbsp;here&nbsp;is&nbsp;whether&nbsp;moduleA&nbsp;has&nbsp;the&nbsp;same<br>
name&nbsp;as&nbsp;moduleB,&nbsp;and&nbsp;whether&nbsp;you&nbsp;are&nbsp;using&nbsp;mod_python.publisher&nbsp;or<br>
not.<br>
<br>
If&nbsp;you&nbsp;use&nbsp;the&nbsp;publisher,&nbsp;your&nbsp;problem&nbsp;has&nbsp;been&nbsp;solved&nbsp;in&nbsp;the&nbsp;latest<br>
development&nbsp;version,&nbsp;and&nbsp;the&nbsp;fix&nbsp;will&nbsp;be&nbsp;in&nbsp;the&nbsp;next&nbsp;release.<br>
<br>
Anyway,&nbsp;if&nbsp;we&nbsp;put&nbsp;aside&nbsp;the&nbsp;fix&nbsp;specific&nbsp;to&nbsp;the&nbsp;publisher,&nbsp;the&nbsp;problem<br>
you&nbsp;describe&nbsp;is&nbsp;real,&nbsp;and&nbsp;the&nbsp;workaround&nbsp;you&nbsp;provide&nbsp;is&nbsp;correct.<br>
<br>
It&nbsp;is&nbsp;so&nbsp;correct&nbsp;that&nbsp;the&nbsp;only&nbsp;way&nbsp;I&nbsp;see&nbsp;of&nbsp;fixing&nbsp;that&nbsp;is&nbsp;to<br>
integrate&nbsp;the&nbsp;workaround&nbsp;in&nbsp;the&nbsp;import_module&nbsp;function,&nbsp;that&nbsp;is&nbsp;to&nbsp;say<br>
to&nbsp;check&nbsp;whether&nbsp;each&nbsp;path&nbsp;component&nbsp;passed&nbsp;in&nbsp;the&nbsp;path&nbsp;list&nbsp;argument<br>
ends&nbsp;with&nbsp;a&nbsp;'/'&nbsp;(or&nbsp;'\'),&nbsp;and&nbsp;if&nbsp;not,&nbsp;add&nbsp;a&nbsp;'/'&nbsp;(or&nbsp;'\\').&nbsp;This&nbsp;is<br>
done&nbsp;easily&nbsp;in&nbsp;the&nbsp;first&nbsp;line&nbsp;of&nbsp;the&nbsp;function&nbsp;:<br>
<br>
if&nbsp;path:<br>
&nbsp;path&nbsp;=&nbsp;map(lambda&nbsp;entry&nbsp;:&nbsp;(entry[-1]!='/'&nbsp;and&nbsp;entry+'/')&nbsp;or&nbsp;entry,path)<br>
<br>
However,&nbsp;there&nbsp;is&nbsp;no&nbsp;easy&nbsp;way&nbsp;of&nbsp;telling&nbsp;what&nbsp;directory&nbsp;separator<br>
should&nbsp;be&nbsp;used&nbsp;;&nbsp;theoretically,&nbsp;os.sep&nbsp;gives&nbsp;us&nbsp;the&nbsp;correct&nbsp;directory<br>
separator,&nbsp;but&nbsp;even&nbsp;under&nbsp;Win32&nbsp;Apache&nbsp;admins&nbsp;are&nbsp;advised&nbsp;to&nbsp;use&nbsp;&quot;/&quot;<br>
which&nbsp;is&nbsp;compatible&nbsp;(at&nbsp;the&nbsp;OS&nbsp;level).&nbsp;So,&nbsp;we&nbsp;might&nbsp;as&nbsp;well&nbsp;always&nbsp;use<br>
&quot;/&quot;.<br>
<br>
What&nbsp;I&nbsp;fear&nbsp;is&nbsp;that&nbsp;adding&nbsp;all&nbsp;these&nbsp;checks&nbsp;to&nbsp;import_module&nbsp;will&nbsp;make<br>
it&nbsp;a&nbsp;little&nbsp;bit&nbsp;too&nbsp;slow,&nbsp;so&nbsp;what&nbsp;about&nbsp;adding&nbsp;a&nbsp;line&nbsp;or&nbsp;two&nbsp;in&nbsp;the<br>
documentation&nbsp;about&nbsp;the&nbsp;fact&nbsp;that&nbsp;all&nbsp;directories&nbsp;mentioned&nbsp;in&nbsp;the<br>
path&nbsp;argument&nbsp;should&nbsp;end&nbsp;with&nbsp;a&nbsp;'/'&nbsp;?<br>
<br>
Regards,<br>
<br>
Nicolas<br>
<br>
On&nbsp;4/29/05,&nbsp;Graham&nbsp;Dumpleton&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-rfc2396E&quot;&nbsp;href=&quot;mailto:grahamd@dscpl.com.au&quot;&gt;&amp;lt;grahamd@dscpl.com.au&amp;gt;&lt;/a&gt;&nbsp;wrote:<br>
&nbsp;<br>
&nbsp;<br>
&nbsp;Nicolas,&nbsp;does&nbsp;the&nbsp;change&nbsp;you&nbsp;have&nbsp;already&nbsp;made&nbsp;for&nbsp;MODPYTHON-9<br>
also&nbsp;address&nbsp;this&nbsp;slightly&nbsp;different&nbsp;variation&nbsp;on&nbsp;the&nbsp;problem?<br>
<br>
Original&nbsp;report&nbsp;was&nbsp;based&nbsp;on&nbsp;same&nbsp;name&nbsp;module&nbsp;in&nbsp;parent&nbsp;and&nbsp;child<br>
subdirectories,&nbsp;not&nbsp;sibling&nbsp;directories&nbsp;which&nbsp;share&nbsp;a&nbsp;common&nbsp;prefix<br>
to&nbsp;the&nbsp;subdirectory&nbsp;name.<br>
<br>
Graham<br>
<br>
Huzaifa&nbsp;Tapal&nbsp;wrote&nbsp;..<br>
&nbsp;<br>
&nbsp;<br>
&nbsp;For&nbsp;my&nbsp;fix,&nbsp;I&nbsp;patched&nbsp;this&nbsp;issue&nbsp;by&nbsp;passing&nbsp;the&nbsp;import_module&nbsp;function<br>
the&nbsp;path&nbsp;with&nbsp;&quot;/&quot;&nbsp;in&nbsp;the&nbsp;end.&nbsp;That&nbsp;way&nbsp;it&nbsp;distinguishes&nbsp;from<br>
/home/user/dir1&nbsp;and&nbsp;/home/user/dir123<br>
<br>
hozi<br>
<br>
Graham&nbsp;Dumpleton&nbsp;wrote:<br>
<br>
&nbsp;<br>
&nbsp;<br>
&nbsp;See:<br>
<br>
&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://issues.apache.org/jira/browse/MODPYTHON-9&quot;&gt;http://issues.apache.org/jira/browse/MODPYTHON-9&lt;/a&gt;<br>
&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://issues.apache.org/jira/browse/MODPYTHON-10&quot;&gt;http://issues.apache.org/jira/browse/MODPYTHON-10&lt;/a&gt;<br>
&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://issues.apache.org/jira/browse/MODPYTHON-11&quot;&gt;http://issues.apache.org/jira/browse/MODPYTHON-11&lt;/a&gt;<br>
<br>
There&nbsp;are&nbsp;various&nbsp;known&nbsp;issues&nbsp;with&nbsp;using&nbsp;same&nbsp;name&nbsp;module&nbsp;in&nbsp;different<br>
directories.<br>
<br>
The&nbsp;first&nbsp;one&nbsp;has&nbsp;been&nbsp;addressed&nbsp;for&nbsp;next&nbsp;version&nbsp;of&nbsp;mod_python.<br>
<br>
Graham<br>
<br>
On&nbsp;29/04/2005,&nbsp;at&nbsp;8:22&nbsp;AM,&nbsp;Huzaifa&nbsp;Tapal&nbsp;wrote:<br>
<br>
&nbsp;<br>
&nbsp;<br>
&nbsp;I&nbsp;think&nbsp;there&nbsp;is&nbsp;a&nbsp;bug&nbsp;in&nbsp;apache.import_module.&nbsp;I&nbsp;am&nbsp;using<br>
apache.import_module&nbsp;passing&nbsp;in&nbsp;the&nbsp;path&nbsp;where&nbsp;I&nbsp;want&nbsp;the&nbsp;module<br>
imported&nbsp;from.&nbsp;I&nbsp;am&nbsp;seeing&nbsp;a&nbsp;very&nbsp;odd&nbsp;result&nbsp;as&nbsp;to&nbsp;sometimes,&nbsp;the<br>
module&nbsp;that&nbsp;is&nbsp;loaded&nbsp;is&nbsp;not&nbsp;the&nbsp;right&nbsp;one.&nbsp;Instead&nbsp;it&nbsp;loads&nbsp;a<br>
module&nbsp;that&nbsp;is&nbsp;of&nbsp;the&nbsp;same&nbsp;name&nbsp;but&nbsp;in&nbsp;a&nbsp;different&nbsp;directory.&nbsp;Here<br>
is&nbsp;what&nbsp;is&nbsp;happening:<br>
<br>
I&nbsp;have&nbsp;two&nbsp;modules&nbsp;of&nbsp;same&nbsp;name&nbsp;in&nbsp;2&nbsp;different&nbsp;directories&nbsp;as&nbsp;follows;<br>
<br>
/home/user/dir1/moduleA<br>
/home/user/dir123/moduleB<br>
<br>
Lets&nbsp;say&nbsp;I&nbsp;restart&nbsp;apache&nbsp;and&nbsp;load&nbsp;up&nbsp;moduleA.&nbsp;At&nbsp;that&nbsp;point&nbsp;there<br>
is&nbsp;an&nbsp;entry&nbsp;in&nbsp;sys.modules&nbsp;for&nbsp;moduleA.&nbsp;Lets&nbsp;say&nbsp;then,&nbsp;I&nbsp;load&nbsp;up<br>
moduleB,&nbsp;now&nbsp;the&nbsp;original&nbsp;entry&nbsp;for&nbsp;moduleA&nbsp;is&nbsp;overwritten&nbsp;by&nbsp;this<br>
new&nbsp;entry.&nbsp;Now&nbsp;when&nbsp;I&nbsp;go&nbsp;back&nbsp;to&nbsp;load&nbsp;moduleA,&nbsp;I&nbsp;get&nbsp;back&nbsp;moduleB<br>
results.&nbsp;Here&nbsp;is&nbsp;why:<br>
<br>
In&nbsp;apache.import_module&nbsp;if&nbsp;I&nbsp;pass&nbsp;in&nbsp;the&nbsp;path&nbsp;to&nbsp;load&nbsp;moduleA&nbsp;from<br>
'/home/user/dir1'&nbsp;and&nbsp;the&nbsp;last&nbsp;module&nbsp;was&nbsp;in&nbsp;'/home/user/dir123'&nbsp;then<br>
the&nbsp;check&nbsp;in&nbsp;import_module&nbsp;to&nbsp;make&nbsp;sure&nbsp;both&nbsp;modules&nbsp;aren't&nbsp;the&nbsp;same<br>
fails&nbsp;since&nbsp;it&nbsp;does&nbsp;a&nbsp;&quot;file.startswith()&quot;&nbsp;check&nbsp;on&nbsp;the&nbsp;path.&nbsp;Since<br>
the&nbsp;path&nbsp;moduleA&nbsp;is&nbsp;in&nbsp;the&nbsp;path&nbsp;to&nbsp;moduleB,&nbsp;it&nbsp;loads&nbsp;the&nbsp;wrong&nbsp;module.<br>
<br>
I&nbsp;see&nbsp;that&nbsp;somebody&nbsp;else&nbsp;had&nbsp;complained&nbsp;about&nbsp;this&nbsp;problem&nbsp;in<br>
mod_python&nbsp;1.3.1&nbsp;but&nbsp;it&nbsp;still&nbsp;has&nbsp;not&nbsp;been&nbsp;patched.<br>
<br>
Any&nbsp;ideas?<br>
<br>
Hozi<br>
<br>
<br>
_______________________________________________<br>
Mod_python&nbsp;mailing&nbsp;list<br>
&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:Mod_python@modpython.org&quot;&gt;Mod_python@modpython.org&lt;/a&gt;<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://mailman.modpython.org/mailman/listinfo/mod_python&quot;&gt;http://mailman.modpython.org/mailman/listinfo/mod_python&lt;/a&gt;<br>
&nbsp;<br>
&nbsp;<br>
&nbsp;<br>
&nbsp;_______________________________________________<br>
Mod_python&nbsp;mailing&nbsp;list<br>
&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:Mod_python@modpython.org&quot;&gt;Mod_python@modpython.org&lt;/a&gt;<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://mailman.modpython.org/mailman/listinfo/mod_python&quot;&gt;http://mailman.modpython.org/mailman/listinfo/mod_python&lt;/a&gt;<br>
<br>
&nbsp;<br>
&nbsp;_______________________________________________<br>
Mod_python&nbsp;mailing&nbsp;list<br>
&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:Mod_python@modpython.org&quot;&gt;Mod_python@modpython.org&lt;/a&gt;<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://mailman.modpython.org/mailman/listinfo/mod_python&quot;&gt;http://mailman.modpython.org/mailman/listinfo/mod_python&lt;/a&gt;<br>
<br>
<br>
&nbsp;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;&lt;!----&gt;<br>
<br>
&nbsp;&nbsp;&lt;/pre&gt;<br>
&lt;/blockquote&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
