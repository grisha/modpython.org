<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;3.2//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;charset=iso-8859-1&quot;&gt;<br>
&lt;META&nbsp;NAME=&quot;Generator&quot;&nbsp;CONTENT=&quot;MS&nbsp;Exchange&nbsp;Server&nbsp;version&nbsp;5.5.2650.12&quot;&gt;<br>
&lt;TITLE&gt;Re:&nbsp;Another&nbsp;threading&nbsp;issue:&nbsp;chdir&nbsp;(fwd)&lt;/TITLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;Having&nbsp;the&nbsp;url&nbsp;directory&nbsp;as&nbsp;your&nbsp;current&nbsp;directory&nbsp;is&nbsp;just&nbsp;an&nbsp;intuitive&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;thing&nbsp;and&nbsp;makes&nbsp;it&nbsp;easier&nbsp;for&nbsp;the&nbsp;developer....&nbsp;E.g.&nbsp;if&nbsp;you're&nbsp;trying&nbsp;to&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;open&nbsp;files,&nbsp;etc.&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Agreed.&nbsp;OTOH,&nbsp;it&nbsp;is&nbsp;quite&nbsp;easy&nbsp;to&nbsp;obtain&nbsp;the&nbsp;module&nbsp;directory&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;with&nbsp;something&nbsp;like&nbsp;os.path.dirname(__file__).&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;One&nbsp;thing&nbsp;that&nbsp;we&nbsp;could&nbsp;do&nbsp;is&nbsp;restore&nbsp;the&nbsp;original&nbsp;directory&nbsp;and&nbsp;make&nbsp;sure&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;that&nbsp;the&nbsp;lock&nbsp;is&nbsp;aqcuired&nbsp;before&nbsp;first&nbsp;chdir()&nbsp;and&nbsp;after&nbsp;the&nbsp;last&nbsp;chdir()?&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;It&nbsp;would&nbsp;require&nbsp;another&nbsp;lock&nbsp;than&nbsp;the&nbsp;global&nbsp;interpreter&nbsp;lock&nbsp;because&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;that&nbsp;one&nbsp;can&nbsp;be&nbsp;released&nbsp;during&nbsp;execution.&nbsp;If&nbsp;another&nbsp;thread&nbsp;steps&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;in&nbsp;a&nbsp;that&nbsp;moment,&nbsp;the&nbsp;current&nbsp;directory&nbsp;could&nbsp;change&nbsp;in&nbsp;the&nbsp;middle&nbsp;of&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;a&nbsp;script...&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;But&nbsp;then&nbsp;it&nbsp;would&nbsp;degrade&nbsp;even&nbsp;native&nbsp;handlers&nbsp;to&nbsp;single-threading.&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;Or&nbsp;chdir&nbsp;could&nbsp;be&nbsp;made&nbsp;optional&nbsp;via&nbsp;a&nbsp;directive&nbsp;of&nbsp;some&nbsp;sort....&nbsp;I&nbsp;need&nbsp;to&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&amp;gt;&nbsp;think&nbsp;about&nbsp;this&nbsp;too...&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;This&nbsp;option&nbsp;looks&nbsp;reasonable&nbsp;to&nbsp;me;&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;the&nbsp;associated&nbsp;threading&nbsp;caveats&nbsp;could&nbsp;be&nbsp;documented&nbsp;easily.&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Cheers&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;-sbi&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;sbi@acse.be&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;
</tt>
