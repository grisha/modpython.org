<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.0&nbsp;TRANSITIONAL//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&nbsp;&nbsp;&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;CHARSET=UTF-8&quot;&gt;<br>
&nbsp;&nbsp;&lt;META&nbsp;NAME=&quot;GENERATOR&quot;&nbsp;CONTENT=&quot;GtkHTML/3.2.4&quot;&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
On&nbsp;Wed,&nbsp;2005-05-18&nbsp;at&nbsp;21:12&nbsp;-0400,&nbsp;Graham&nbsp;Dumpleton&nbsp;wrote:<br>
&lt;BLOCKQUOTE&nbsp;TYPE=CITE&gt;<br>
&lt;PRE&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#000000&quot;&gt;Wouter&nbsp;van&nbsp;Marle&nbsp;wrote&nbsp;..&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#000000&quot;&gt;&amp;gt;&nbsp;Hi&nbsp;all,&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#000000&quot;&gt;&amp;gt;&nbsp;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#000000&quot;&gt;&amp;gt;&nbsp;Is&nbsp;there&nbsp;a&nbsp;way&nbsp;to&nbsp;catch&nbsp;the&nbsp;html&nbsp;code&nbsp;as&nbsp;produced&nbsp;by&nbsp;the&nbsp;psp&nbsp;module?&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#000000&quot;&gt;&amp;gt;&nbsp;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#000000&quot;&gt;&amp;gt;&nbsp;I&nbsp;mean:&nbsp;normally&nbsp;one&nbsp;does&nbsp;something&nbsp;like:&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#000000&quot;&gt;&amp;gt;&nbsp;page&nbsp;=&nbsp;psp.PSP(req,&nbsp;&nbsp;&amp;quot;template.psp&amp;quot;)&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#000000&quot;&gt;&amp;gt;&nbsp;page.run({&amp;quot;spam&amp;quot;:&nbsp;1,&nbsp;&amp;quot;eggs&amp;quot;:&nbsp;5})&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#000000&quot;&gt;&amp;gt;&nbsp;and&nbsp;the&nbsp;page&nbsp;is&nbsp;converted&nbsp;to&nbsp;html,&nbsp;and&nbsp;displayed&nbsp;in&nbsp;the&nbsp;browser.&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#000000&quot;&gt;&amp;gt;&nbsp;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#000000&quot;&gt;&amp;gt;&nbsp;Now&nbsp;is&nbsp;it&nbsp;possible&nbsp;to&nbsp;catch&nbsp;this&nbsp;html&nbsp;code&nbsp;in&nbsp;a&nbsp;string,&nbsp;instead&nbsp;of&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#000000&quot;&gt;&amp;gt;&nbsp;sending&nbsp;it&nbsp;to&nbsp;the&nbsp;browser?&nbsp;This&nbsp;as&nbsp;I'd&nbsp;like&nbsp;to&nbsp;use&nbsp;the&nbsp;psp&nbsp;templating&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#000000&quot;&gt;&amp;gt;&nbsp;for&nbsp;creating&nbsp;an&nbsp;e-mail&nbsp;body.&lt;/FONT&gt;<br>
<br>
&lt;FONT&nbsp;COLOR=&quot;#000000&quot;&gt;At&nbsp;first&nbsp;glance&nbsp;there&nbsp;seems&nbsp;to&nbsp;be&nbsp;no&nbsp;feature&nbsp;to&nbsp;do&nbsp;it.&nbsp;What&nbsp;you&nbsp;might&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#000000&quot;&gt;try&nbsp;(I&nbsp;haven't),&nbsp;is&nbsp;that&nbsp;presuming&nbsp;that&nbsp;all&nbsp;output&nbsp;is&nbsp;generated&nbsp;through&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#000000&quot;&gt;calls&nbsp;to&nbsp;req.write(),&nbsp;is&nbsp;to&nbsp;substitute&nbsp;the&nbsp;&amp;quot;req&amp;quot;&nbsp;object&nbsp;with&nbsp;a&nbsp;wrapper&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#000000&quot;&gt;class&nbsp;that&nbsp;provides&nbsp;its&nbsp;own&nbsp;req.write()&nbsp;which&nbsp;is&nbsp;actually&nbsp;the&nbsp;write()&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#000000&quot;&gt;method&nbsp;on&nbsp;a&nbsp;StringIO&nbsp;object.&lt;/FONT&gt;<br>
&lt;/PRE&gt;<br>
&lt;/BLOCKQUOTE&gt;<br>
&lt;PRE&gt;<br>
<br>
&lt;/PRE&gt;<br>
Mmm...&nbsp;yeah&nbsp;should&nbsp;be&nbsp;something&nbsp;like&nbsp;that...&nbsp;well&nbsp;as&nbsp;I&nbsp;mainly&nbsp;use&nbsp;it&nbsp;for&nbsp;actually&nbsp;building&nbsp;web&nbsp;pages&nbsp;in&nbsp;the&nbsp;same&nbsp;script,&nbsp;I'll&nbsp;just&nbsp;stick&nbsp;to&nbsp;normal&nbsp;mails,&nbsp;or&nbsp;use&nbsp;some&nbsp;other&nbsp;method.&lt;BR&gt;<br>
&lt;BR&gt;<br>
Do&nbsp;the&nbsp;developers&nbsp;accept&nbsp;feature&nbsp;requests?&nbsp;I&nbsp;have&nbsp;one.&lt;BR&gt;<br>
&lt;BR&gt;<br>
Wouter.&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;BLOCKQUOTE&nbsp;TYPE=CITE&gt;<br>
&lt;PRE&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#000000&quot;&gt;class&nbsp;Wrapper:&lt;/FONT&gt;<br>
<br>
&lt;FONT&nbsp;COLOR=&quot;#000000&quot;&gt;&nbsp;&nbsp;def&nbsp;__init__(self,req,write):&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#000000&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;self.__req&nbsp;=&nbsp;req&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#000000&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;self.write&nbsp;=&nbsp;write&lt;/FONT&gt;<br>
<br>
&lt;FONT&nbsp;COLOR=&quot;#000000&quot;&gt;&nbsp;&nbsp;def&nbsp;__getattr__(self,name):&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#000000&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;getattr(self,__req,name)&lt;/FONT&gt;<br>
<br>
&lt;FONT&nbsp;COLOR=&quot;#000000&quot;&gt;s&nbsp;=&nbsp;StringIO.StringIO()&lt;/FONT&gt;<br>
<br>
&lt;FONT&nbsp;COLOR=&quot;#000000&quot;&gt;page&nbsp;=&nbsp;psp.PSP(Wrapper(req,s.write),&nbsp;&nbsp;&amp;quot;template.psp&amp;quot;)&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#000000&quot;&gt;page.run({&amp;quot;spam&amp;quot;:&nbsp;1,&nbsp;&amp;quot;eggs&amp;quot;:&nbsp;5})&lt;/FONT&gt;<br>
<br>
&lt;FONT&nbsp;COLOR=&quot;#000000&quot;&gt;req.log_error(s.getvalue())&lt;/FONT&gt;<br>
<br>
&lt;FONT&nbsp;COLOR=&quot;#000000&quot;&gt;If&nbsp;you&nbsp;were&nbsp;also&nbsp;stashing&nbsp;stuff&nbsp;in&nbsp;&amp;quot;req&amp;quot;&nbsp;from&nbsp;the&nbsp;PSP&nbsp;page,&nbsp;would&nbsp;also&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#000000&quot;&gt;need&nbsp;a&nbsp;__setattr__()&nbsp;method&nbsp;in&nbsp;the&nbsp;wrapper.&lt;/FONT&gt;<br>
<br>
&lt;FONT&nbsp;COLOR=&quot;#000000&quot;&gt;Graham&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#000000&quot;&gt;&nbsp;&nbsp;&lt;/FONT&gt;<br>
<br>
<br>
&lt;/PRE&gt;<br>
&lt;/BLOCKQUOTE&gt;<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;<br>

</tt>
