<tt>
I&amp;#39;m&nbsp;getting&nbsp;random&nbsp;hangs&nbsp;on&nbsp;a&nbsp;mod_python&nbsp;based&nbsp;system&nbsp;under&nbsp;moderately&nbsp;load.&nbsp;I&nbsp;haven&amp;#39;t&nbsp;tracked&nbsp;down&nbsp;the&nbsp;problem&nbsp;yet,&nbsp;but&nbsp;based&nbsp;on&nbsp;some&nbsp;error&nbsp;logging&nbsp;I&amp;#39;ve&nbsp;been&nbsp;doing&nbsp;code&nbsp;inspection&nbsp;and&nbsp;have&nbsp;a&nbsp;few&nbsp;comments/questions.<br>
&lt;br&gt;&lt;br&gt;(1)&lt;br&gt;In&nbsp;Session.py,&nbsp;function&nbsp;filesession_cleanup,&nbsp;lines&nbsp;624-638&nbsp;there&amp;#39;s&nbsp;a&nbsp;try/except&nbsp;block&nbsp;that&nbsp;returns&nbsp;on&nbsp;an&nbsp;exception.&nbsp;However,&nbsp;to&nbsp;get&nbsp;to&nbsp;this&nbsp;block,&nbsp;&amp;#39;lockfp&amp;#39;&nbsp;has&nbsp;to&nbsp;be&nbsp;open&nbsp;--&nbsp;and&nbsp;there&nbsp;is&nbsp;no&nbsp;close&nbsp;in&nbsp;the&nbsp;exception&nbsp;block.<br>
&lt;br&gt;&lt;br&gt;Should&nbsp;not&nbsp;this&nbsp;code&nbsp;block&nbsp;be&nbsp;moved&nbsp;inside&nbsp;the&nbsp;next&nbsp;try/finally&nbsp;block&nbsp;which&nbsp;ensures&nbsp;the&nbsp;file&nbsp;object&nbsp;is&nbsp;closed?&lt;br&gt;&lt;br&gt;(2)&lt;br&nbsp;clear=&quot;all&quot;&gt;In&nbsp;my&nbsp;logs&nbsp;I&nbsp;am&nbsp;getting&nbsp;the&nbsp;error&nbsp;message&lt;br&gt;&lt;br&gt;python_cleanup:&nbsp;Error&nbsp;calling&nbsp;cleanup&nbsp;object&nbsp;&amp;lt;function&nbsp;filesession_cleanup&nbsp;at&nbsp;0xb7b22924&amp;gt;<br>
&lt;br&gt;exceptions.TypeError:&nbsp;not&nbsp;enough&nbsp;arguments&nbsp;for&nbsp;format&nbsp;string&lt;br&gt;&lt;br&gt;The&nbsp;likely&nbsp;culprit&nbsp;for&nbsp;this&nbsp;error&nbsp;is&nbsp;line&nbsp;705&nbsp;(-707):&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;req.log_error(&amp;quot;FileSession&nbsp;cleanup&nbsp;incomplete:&nbsp;next&nbsp;cleanup&nbsp;will&nbsp;start&nbsp;at&nbsp;index&nbsp;%d&nbsp;(%02x)&amp;quot;<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;%&nbsp;(next_i,),&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;apache.APLOG_NOTICE)&lt;br&gt;&lt;br&gt;Does&nbsp;this&nbsp;make&nbsp;sense?&lt;br&gt;&lt;br&gt;Regards,&nbsp;etc...&lt;br&gt;David&lt;br&gt;&lt;br&gt;--&nbsp;&lt;br&gt;David&nbsp;Janes&lt;br&gt;Founder,&nbsp;BlogMatrix&lt;br&gt;&lt;a&nbsp;href=&quot;http://www.blogmatrix.com&quot;&gt;<br>
http://www.blogmatrix.com&lt;/a&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;http://blogmatrix.blogmatrix.com&quot;&gt;http://blogmatrix.blogmatrix.com&lt;/a&gt;<br>

</tt>
