<tt>
&lt;br&gt;&lt;br&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;5/1/07,&nbsp;&lt;b&nbsp;class=&quot;gmail_sendername&quot;&gt;Will&nbsp;Gray&lt;/b&gt;&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:graywh@gmail.com&quot;&gt;graywh@gmail.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;/span&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;e&quot;&nbsp;id=&quot;q_1124930f62a53392_0&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;5/1/07,&nbsp;&lt;b&nbsp;class=&quot;gmail_sendername&quot;&gt;Jim&nbsp;Gallacher&lt;/b&gt;&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:jpg@jgassociates.ca&quot;&nbsp;target=&quot;_self&quot;&nbsp;onclick=&quot;return&nbsp;top.js.OpenExtLink(window,event,this)&quot;&gt;<br>
jpg@jgassociates.ca&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;/span&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
Will&nbsp;Gray&nbsp;wrote:&lt;br&gt;&amp;gt;&nbsp;I&amp;#39;m&nbsp;running&nbsp;Apache&nbsp;2.2.3&nbsp;and&nbsp;Mod_Python&nbsp;3.2.10.&amp;nbsp;&amp;nbsp;I&amp;#39;m&nbsp;using&lt;br&gt;&amp;gt;&nbsp;Mod_Python.Publisher&nbsp;to&nbsp;handle&nbsp;requests.&amp;nbsp;&amp;nbsp;When&nbsp;I&nbsp;upgraded&nbsp;Apache&nbsp;from&lt;br&gt;&amp;gt;&nbsp;2.0&nbsp;to&lt;br&gt;&amp;gt;&nbsp;2.2&nbsp;(and&nbsp;Mod_Python,&nbsp;accordingly),&nbsp;I&nbsp;was&nbsp;no&nbsp;longer&nbsp;able&nbsp;to&nbsp;get&nbsp;the&nbsp;saved<br>
&lt;br&gt;&amp;gt;&nbsp;session&nbsp;when&nbsp;a&nbsp;visitor&nbsp;changes&nbsp;pages.&amp;nbsp;&amp;nbsp;Instead,&nbsp;it&nbsp;creates&nbsp;and&nbsp;returns&nbsp;a&lt;br&gt;&amp;gt;&nbsp;new&lt;br&gt;&amp;gt;&nbsp;session.&amp;nbsp;&amp;nbsp;I&nbsp;was&nbsp;able&nbsp;to&nbsp;verify&nbsp;that&nbsp;the&nbsp;session&nbsp;was&nbsp;still&nbsp;available&nbsp;and&lt;br&gt;&amp;gt;&nbsp;being&nbsp;saved&nbsp;correctly&nbsp;with&nbsp;the&nbsp;data&nbsp;inside.&amp;nbsp;&amp;nbsp;Here&nbsp;is&nbsp;a&nbsp;sample&nbsp;of&nbsp;what&nbsp;my<br>
&lt;br&gt;&amp;gt;&nbsp;views&nbsp;are&nbsp;doing:&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;def&nbsp;login(req):&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;sess&nbsp;=&nbsp;Session.Session(req)&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;userid&nbsp;=&nbsp;sess.get(&amp;#39;uid&amp;#39;,&nbsp;None)&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if&nbsp;userid:&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;util.redirect(req,&nbsp;&amp;#39;view&amp;#39;)&lt;br&gt;<br>
<br>
&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;##get&nbsp;username&nbsp;and&nbsp;password&nbsp;from&nbsp;req.form&nbsp;and&nbsp;authenticate&nbsp;against&nbsp;db##&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if&nbsp;uid:&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;sess[&amp;#39;uid&amp;#39;]&nbsp;=&nbsp;uid&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;sess.save()&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;util.redirect(req,&nbsp;&amp;#39;view&amp;#39;)&lt;br&gt;<br>
&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;else:<br>
&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;##display&nbsp;the&nbsp;login&nbsp;form##&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;def&nbsp;view(req):&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;sess&nbsp;=&nbsp;Session.Session(req)&nbsp;#&nbsp;creates&nbsp;a&nbsp;new&nbsp;session&nbsp;instead&nbsp;of&nbsp;finding&lt;br&gt;&amp;gt;&nbsp;the&nbsp;old&nbsp;one&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;userid&nbsp;=&nbsp;sess.get(&amp;#39;uid&amp;#39;,&nbsp;None)<br>
&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if&nbsp;not&nbsp;userid:&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;util.redirect(req,&nbsp;&amp;#39;login&amp;#39;)&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;##do&nbsp;some&nbsp;db&nbsp;queries&nbsp;and&nbsp;display&nbsp;the&nbsp;page##&lt;br&gt;&lt;br&gt;I&nbsp;don&amp;#39;t&nbsp;see&nbsp;an&nbsp;immediate&nbsp;problem&nbsp;with&nbsp;the&nbsp;code&nbsp;snippet,&nbsp;but&nbsp;given&nbsp;the&lt;br&gt;redirecting&nbsp;back&nbsp;and&nbsp;forth&nbsp;I&nbsp;think&nbsp;the&nbsp;potential&nbsp;is&nbsp;there&nbsp;for&nbsp;things&nbsp;to<br>
&lt;br&gt;get&nbsp;out&nbsp;of&nbsp;order.&lt;br&gt;&lt;br&gt;Try&nbsp;tracing&nbsp;through&nbsp;your&nbsp;execution&nbsp;path&nbsp;again&nbsp;and&nbsp;make&nbsp;sure&nbsp;the&nbsp;session&lt;br&gt;is&nbsp;indeed&nbsp;being&nbsp;saved&nbsp;at&nbsp;the&nbsp;appropriate&nbsp;time.&lt;br&gt;&lt;br&gt;Also&nbsp;remember&nbsp;that&nbsp;your&nbsp;session&nbsp;instance&nbsp;must&nbsp;be&nbsp;created&nbsp;*before*<br>
&lt;br&gt;returning&nbsp;any&nbsp;output&nbsp;to&nbsp;the&nbsp;client.&nbsp;The&nbsp;first&nbsp;call&nbsp;to&nbsp;req.write()&lt;br&gt;flushes&nbsp;the&nbsp;response&nbsp;headers.&nbsp;Once&nbsp;that&nbsp;happens&nbsp;it&amp;#39;s&nbsp;too&nbsp;late&nbsp;to&nbsp;create&lt;br&gt;the&nbsp;session&nbsp;object&nbsp;-&nbsp;you&nbsp;can&nbsp;still&nbsp;create&nbsp;it&nbsp;and&nbsp;save&nbsp;it,&nbsp;but&nbsp;the&lt;br&gt;<br>
<br>
session&nbsp;cookie&nbsp;will&nbsp;not&nbsp;be&nbsp;sent&nbsp;to&nbsp;the&nbsp;client,&nbsp;so&nbsp;you&amp;#39;ll&nbsp;end&nbsp;up&nbsp;with&nbsp;at&lt;br&gt;new&nbsp;session&nbsp;for&nbsp;every&nbsp;request.&nbsp;Typically&nbsp;this&nbsp;results&nbsp;in&nbsp;the&nbsp;behaviour&lt;br&gt;you&nbsp;are&nbsp;seeing&nbsp;-&nbsp;the&nbsp;session&nbsp;data&nbsp;gets&nbsp;saved,&nbsp;but&nbsp;you&nbsp;always&nbsp;end&nbsp;up&nbsp;with<br>
&lt;br&gt;a&nbsp;new&nbsp;session.&lt;br&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;I&amp;#39;ve&nbsp;read&nbsp;everything&nbsp;about&nbsp;making&nbsp;sure&nbsp;sessions&nbsp;are&nbsp;created&nbsp;before&nbsp;req.write()&nbsp;and&nbsp;know&nbsp;that&nbsp;is&nbsp;not&nbsp;the&nbsp;problem.&amp;nbsp;&nbsp;The&nbsp;cookie&nbsp;is&nbsp;there&nbsp;in&nbsp;the&nbsp;client&nbsp;web&nbsp;browser&nbsp;with&nbsp;the&nbsp;correct&nbsp;&amp;quot;pysid&amp;quot;&nbsp;value&nbsp;for&nbsp;the&nbsp;session&nbsp;id.<br>
&lt;br&gt;&lt;br&gt;Since&nbsp;everything&nbsp;worked&nbsp;fine&nbsp;before&nbsp;upgrading&nbsp;Apache&nbsp;from&nbsp;2.0&nbsp;to&nbsp;2.2&nbsp;it&nbsp;makes&nbsp;me&nbsp;think&nbsp;there&nbsp;is&nbsp;something&nbsp;wrong&nbsp;with&nbsp;that&nbsp;or&nbsp;mod_python.&lt;span&nbsp;class=&quot;sg&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;I&nbsp;rearranged&nbsp;my&nbsp;code&nbsp;to&nbsp;more&nbsp;closely&nbsp;match&nbsp;my&nbsp;example&nbsp;above&nbsp;and&nbsp;everything&nbsp;is&nbsp;fine&nbsp;now.&amp;nbsp;&nbsp;I&nbsp;did&nbsp;have&nbsp;the&nbsp;redirect&nbsp;in&nbsp;a&nbsp;different&nbsp;place,&nbsp;so&nbsp;that&nbsp;must&nbsp;have&nbsp;made&nbsp;a&nbsp;big&nbsp;difference.<br>
&lt;br&gt;&lt;br&gt;--&nbsp;&lt;br&gt;Will&nbsp;Gray&lt;br&gt;Nashville,&nbsp;TN<br>

</tt>
