<tt>
Hmm&nbsp;that&nbsp;sounds&nbsp;like&nbsp;it&nbsp;fits&nbsp;the&nbsp;bill.&nbsp;It&nbsp;looks&nbsp;like&nbsp;an&nbsp;evil&nbsp;issue<br>
though,&nbsp;perhaps&nbsp;the&nbsp;way&nbsp;to&nbsp;fix&nbsp;it&nbsp;is&nbsp;not&nbsp;just&nbsp;through&nbsp;mod_python,&nbsp;but<br>
also&nbsp;by&nbsp;improving&nbsp;how&nbsp;apache&nbsp;handles&nbsp;the&nbsp;situation?&nbsp;I&nbsp;don't&nbsp;understand<br>
things&nbsp;at&nbsp;that&nbsp;level&nbsp;enough&nbsp;to&nbsp;be&nbsp;of&nbsp;any&nbsp;help,&nbsp;I'm&nbsp;sure&nbsp;you&nbsp;guys&nbsp;will<br>
do&nbsp;the&nbsp;right&nbsp;thing&nbsp;though&nbsp;with&nbsp;Graham&nbsp;on&nbsp;the&nbsp;case.<br>
&lt;br&gt;&lt;span&nbsp;class=&quot;sg&quot;&gt;&lt;br&gt;-Dan&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;2/11/06,&nbsp;&lt;b&nbsp;class=&quot;gmail_sendername&quot;&gt;Graham&nbsp;Dumpleton&lt;/b&gt;&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:grahamd@dscpl.com.au&quot;&gt;grahamd@dscpl.com.au&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;/span&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;&lt;br&gt;On&nbsp;12/02/2006,&nbsp;at&nbsp;9:05&nbsp;AM,&nbsp;Dan&nbsp;Eloff&nbsp;wrote:&lt;br&gt;&lt;br&gt;&amp;gt;&nbsp;I've&nbsp;been&nbsp;using&nbsp;mod_python&nbsp;(3.2.2b<br>
&nbsp;the&nbsp;last&nbsp;version&nbsp;released&nbsp;for&lt;br&gt;&amp;gt;&nbsp;win)&nbsp;for&nbsp;a&nbsp;while&nbsp;now,&nbsp;and&nbsp;I'm&nbsp;really&nbsp;fond&nbsp;of&nbsp;the&nbsp;flexibility&nbsp;it&lt;br&gt;&amp;gt;&nbsp;gives&nbsp;me,&nbsp;but&nbsp;I've&nbsp;run&nbsp;across&nbsp;a&nbsp;problem&nbsp;as&nbsp;of&nbsp;late.&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;Apache&nbsp;crashes&nbsp;when&nbsp;shut&nbsp;down&nbsp;with&nbsp;this&nbsp;error,&nbsp;apparently&nbsp;while<br>
&lt;br&gt;&amp;gt;&nbsp;waiting&nbsp;for&nbsp;worker&nbsp;threads&nbsp;to&nbsp;shut&nbsp;down.&nbsp;The&nbsp;CPU&nbsp;pins&nbsp;up&nbsp;at&nbsp;100%&lt;br&gt;&amp;gt;&nbsp;and&nbsp;then&nbsp;after&nbsp;a&nbsp;few&nbsp;seconds&nbsp;apache&nbsp;crashes.&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;[Sat&nbsp;Feb&nbsp;11&nbsp;13:33:56&nbsp;2006]&nbsp;[crit]&nbsp;[Sat&nbsp;Feb&nbsp;11&nbsp;13:33:56&nbsp;2006]&nbsp;file&nbsp;C:&lt;br&gt;&amp;gt;&nbsp;\\asf-build\\build-<br>
2.0.55\\server\\mpm\\winnt\\child.c,&nbsp;line&nbsp;1078,&lt;br&gt;&amp;gt;&nbsp;assertion&nbsp;&amp;quot;(rv&nbsp;&amp;gt;=&nbsp;0)&nbsp;&amp;amp;&amp;amp;&nbsp;(rv&nbsp;&amp;lt;&nbsp;threads_created)&amp;quot;&nbsp;failed&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;Has&nbsp;anybody&nbsp;had&nbsp;trouble&nbsp;with&nbsp;this?&lt;br&gt;&lt;br&gt;It&nbsp;may&nbsp;be&nbsp;related&nbsp;to:&lt;br&gt;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;&lt;a&nbsp;href=&quot;http://issues.apache.org/jira/browse/MODPYTHON-109&quot;&gt;http://issues.apache.org/jira/browse/MODPYTHON-109&lt;/a&gt;&lt;br&gt;&lt;br&gt;Problem&nbsp;is&nbsp;that&nbsp;mod_python&nbsp;tries&nbsp;to&nbsp;call&nbsp;Py_Finalize()&nbsp;when&nbsp;child&lt;br&gt;process&lt;br&gt;being&nbsp;killed&nbsp;off,&nbsp;but&nbsp;it&nbsp;is&nbsp;being&nbsp;done&nbsp;from&nbsp;inside&nbsp;signal&nbsp;handler<br>
&lt;br&gt;context&nbsp;which&lt;br&gt;is&nbsp;quite&nbsp;bad.&nbsp;Similar&nbsp;problem&nbsp;if&nbsp;you&nbsp;use&nbsp;req.server.register_cleanup&lt;br&gt;()&nbsp;or&lt;br&gt;apache.register_cleanup().&nbsp;The&nbsp;latter&nbsp;functions&nbsp;may&nbsp;have&nbsp;to&nbsp;be&nbsp;removed&lt;br&gt;if&nbsp;no&nbsp;equivalent&nbsp;can&nbsp;be&nbsp;found&nbsp;that&nbsp;is&nbsp;safe.&lt;br&gt;<br>
&lt;br&gt;Graham&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
