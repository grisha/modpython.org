<tt>
Hi&nbsp;list,&lt;br&gt;&lt;br&gt;I&amp;#39;m&nbsp;trying&nbsp;to&nbsp;get&nbsp;the&nbsp;headers_in&nbsp;from&nbsp;the&nbsp;client,&nbsp;and&nbsp;after&nbsp;changing/adding&nbsp;some&nbsp;headers&nbsp;i&nbsp;would&nbsp;like&nbsp;to&nbsp;pass&nbsp;them&nbsp;to&nbsp;the&nbsp;backend&nbsp;server.&lt;br&gt;I&amp;#39;m&nbsp;using&nbsp;Apache/2.0.55&nbsp;(Win32)&nbsp;mod_python/3.1.3&nbsp;Python/2.3.5<br>
&lt;br&gt;The&nbsp;problem&nbsp;is&nbsp;that&nbsp;the&nbsp;headers&nbsp;are&nbsp;sent&nbsp;to&nbsp;the&nbsp;backend&nbsp;unchanged&nbsp;when&nbsp;using&nbsp;this&nbsp;simple&nbsp;input&nbsp;filter:&lt;br&gt;&lt;br&gt;def&nbsp;inputfilter(filter):&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;filter.req.headers_in[&amp;#39;X-MyHeader&amp;#39;]&nbsp;=&nbsp;&amp;#39;Test&amp;#39;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;<br>
filter.req.main&nbsp;is&nbsp;not&nbsp;None:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;filter.pass_on()&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;filter.req.log_error(&amp;#39;Start&nbsp;%s&amp;#39;&nbsp;%&nbsp;filter.req.uri)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;s&nbsp;=&nbsp;filter.read()&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;while&nbsp;s:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;filter.write(s)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;s&nbsp;=&nbsp;<br>
filter.read()&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;s&nbsp;is&nbsp;None:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;filter.close()&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;filter.req.log_error(&amp;#39;End&nbsp;%s&amp;#39;&nbsp;%&nbsp;filter.req.uri)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;filter.req.log_error(&amp;#39;%s&amp;#39;&nbsp;%&nbsp;filter.req.headers_in)&lt;br&gt;&lt;br&gt;and&nbsp;Apache&nbsp;logs:<br>
&lt;br&gt;&lt;br&gt;[Thu&nbsp;Apr&nbsp;19&nbsp;18:17:28&nbsp;2007]&nbsp;[error]&nbsp;[client&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1&quot;&gt;127.0.0.1&lt;/a&gt;]&nbsp;Start&nbsp;/,&nbsp;referer:&nbsp;&lt;a&nbsp;href=&quot;http://localhost/&quot;&gt;http://localhost/&lt;/a&gt;&lt;br&gt;[Thu&nbsp;Apr&nbsp;19&nbsp;18:17:28&nbsp;2007]&nbsp;[error]&nbsp;[client&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1&quot;&gt;<br>
127.0.0.1&lt;/a&gt;]&nbsp;End&nbsp;/,&nbsp;referer:&nbsp;&lt;a&nbsp;href=&quot;http://localhost/&quot;&gt;http://localhost/&lt;/a&gt;&lt;br&gt;[Thu&nbsp;Apr&nbsp;19&nbsp;18:17:28&nbsp;2007]&nbsp;[error]&nbsp;[client&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1&quot;&gt;127.0.0.1&lt;/a&gt;]&nbsp;{&amp;#39;X-MyHeader&amp;#39;:&nbsp;&amp;#39;Test&amp;#39;,&nbsp;&amp;#39;X-Forwarded-Server&amp;#39;:&nbsp;&amp;#39;luna&amp;#39;,&nbsp;&amp;#39;X-Forwarded-Host&amp;#39;:&nbsp;&amp;#39;localhost&amp;#39;,&nbsp;&amp;#39;X-Forwarded-For&amp;#39;:&nbsp;&amp;#39;<br>
&lt;a&nbsp;href=&quot;http://127.0.0.1&quot;&gt;127.0.0.1&lt;/a&gt;&amp;#39;,&nbsp;&amp;#39;Max-Forwards&amp;#39;:&nbsp;&amp;#39;10&amp;#39;,&nbsp;&amp;#39;Cookie&amp;#39;:&nbsp;&amp;#39;wstyle=;&nbsp;__ac=&amp;quot;YWRtaW46bWF0cml4&amp;quot;;&nbsp;tree-s=&amp;quot;eJzT0MgpMOQKVneEAKcAN19bda4CI67EkgJjLj0AegYHmA&amp;quot;&amp;#39;,&nbsp;&amp;#39;Referer&amp;#39;:&nbsp;&amp;#39;<br>
&lt;a&nbsp;href=&quot;http://localhost/&quot;&gt;http://localhost/&lt;/a&gt;&amp;#39;,&nbsp;&amp;#39;Accept-Charset&amp;#39;:&nbsp;&amp;#39;ISO-8859-7,utf-8;q=0.7,*;q=0.7&amp;#39;,&nbsp;&amp;#39;Accept-Encoding&amp;#39;:&nbsp;&amp;#39;gzip,deflate&amp;#39;,&nbsp;&amp;#39;Accept-Language&amp;#39;:&nbsp;&amp;#39;el,en-us;q=0.7<br>
,en;q=0.3&amp;#39;,&nbsp;&amp;#39;Accept&amp;#39;:&nbsp;&amp;#39;text/xml,application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5&amp;#39;,&nbsp;&amp;#39;User-Agent&amp;#39;:&nbsp;&amp;#39;Mozilla/5.0&nbsp;(Windows;&nbsp;U;&nbsp;Windows&nbsp;NT&nbsp;5.1;&nbsp;en-US;&nbsp;rv:<br>
&lt;a&nbsp;href=&quot;http://1.8.0.8&quot;&gt;1.8.0.8&lt;/a&gt;)&nbsp;Gecko/20061030&nbsp;SeaMonkey/1.0.6&amp;#39;,&nbsp;&amp;#39;Host&amp;#39;:&nbsp;&amp;#39;localhost&amp;#39;},&nbsp;referer:&nbsp;&lt;a&nbsp;href=&quot;http://localhost/&quot;&gt;http://localhost/&lt;/a&gt;&lt;br&gt;...(multiple&nbsp;times)...&lt;br&gt;&lt;br&gt;Which&nbsp;is&nbsp;right&nbsp;i&nbsp;think...&nbsp;But&nbsp;my&nbsp;backend&nbsp;server&nbsp;gets&nbsp;this&nbsp;request:<br>
&lt;br&gt;&lt;br&gt;GET&nbsp;/VirtualHostBase/http/localhost:80/Editorial/VirtualHostRoot/&nbsp;HTTP/1.1&lt;br&gt;Host:&nbsp;localhost:8081&lt;br&gt;User-Agent:&nbsp;Mozilla/5.0&nbsp;(Windows;&nbsp;U;&nbsp;Windows&nbsp;NT&nbsp;5.1;&nbsp;en-US;&nbsp;rv:&lt;a&nbsp;href=&quot;http://1.8.0.8&quot;&gt;1.8.0.8&lt;/a&gt;)&nbsp;Gecko/20061030&nbsp;SeaMonkey/1.0.6<br>
&lt;br&gt;Accept:&nbsp;text/xml,application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5&lt;br&gt;Accept-Language:&nbsp;el,en-us;q=0.7,en;q=0.3&lt;br&gt;Accept-Encoding:&nbsp;gzip,deflate&lt;br&gt;Accept-Charset:&nbsp;ISO-8859-7,utf-8;q=<br>
0.7,*;q=0.7&lt;br&gt;Referer:&nbsp;&lt;a&nbsp;href=&quot;http://localhost/&quot;&gt;http://localhost/&lt;/a&gt;&lt;br&gt;Cookie:&nbsp;wstyle=;&nbsp;__ac=&amp;quot;YWRtaW46bWF0cml4&amp;quot;;&nbsp;tree-s=&amp;quot;eJzT0MgpMOQKVneEAKcAN19bda4CI67EkgJjLj0AegYHmA&amp;quot;&lt;br&gt;Max-Forwards:&nbsp;10&lt;br&gt;X-Forwarded-For:&nbsp;<br>
&lt;a&nbsp;href=&quot;http://127.0.0.1&quot;&gt;127.0.0.1&lt;/a&gt;&lt;br&gt;X-Forwarded-Host:&nbsp;localhost&lt;br&gt;X-Forwarded-Server:&nbsp;luna&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;Thank&nbsp;you&nbsp;in&nbsp;advance,&lt;br&gt;&lt;br&gt;Ioannis&nbsp;Stavrinos&lt;br&gt;<br>

</tt>
