<tt>
&lt;DIV&gt;I&nbsp;think&nbsp;it's&nbsp;my&nbsp;code&nbsp;error,but&nbsp;I&nbsp;am&nbsp;not&nbsp;sure.&lt;/DIV&gt;<br>
&lt;DIV&gt;My&nbsp;apapche&nbsp;conf&nbsp;is&nbsp;like&nbsp;this&nbsp;:&lt;/DIV&gt;<br>
&lt;DIV&gt;SetHandler&nbsp;mod_python&lt;BR&gt;PythonHandler&nbsp;mod_python.publisher&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;I&nbsp;use&nbsp;psp&nbsp;as&nbsp;my&nbsp;template.I&nbsp;confuse&nbsp;that&nbsp;the&nbsp;variable&nbsp;seems&nbsp;to&nbsp;share&nbsp;the&nbsp;values&nbsp;among&nbsp;the&nbsp;pages.&lt;/DIV&gt;<br>
&lt;DIV&gt;e.g.&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;a&nbsp;page&nbsp;named&nbsp;index.py&nbsp;contain&nbsp;functions&nbsp;as&nbsp;below:&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;test=0&lt;/DIV&gt;<br>
&lt;DIV&gt;def&nbsp;a(req):&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;global&nbsp;test&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;req.write(str(test))&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;test=test+1&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;def&nbsp;b(req):&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;global&nbsp;test&lt;/DIV&gt;<br>
&lt;DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;req.write(str(test))&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;test=test+1&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;when&nbsp;you&nbsp;visit&nbsp;the&nbsp;page&nbsp;&lt;A&nbsp;href=&quot;http://localhost/index/a&quot;&gt;http://localhost/index/a&lt;/A&gt;&nbsp;it&nbsp;print&nbsp;0,then&nbsp;visit&nbsp;page&nbsp;&lt;A&nbsp;href=&quot;http://localhost/index/b&quot;&gt;http://localhost/index/b&lt;/A&gt;&lt;/DIV&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;it&nbsp;print&nbsp;1&nbsp;as&nbsp;if&nbsp;the&nbsp;variable&nbsp;'test'&nbsp;is&nbsp;pass&nbsp;vis&nbsp;get&nbsp;or&nbsp;post&nbsp;method.why?&lt;/DIV&gt;<br>
&lt;DIV&gt;is&nbsp;it&nbsp;the&nbsp;cache&nbsp;trick?&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;&lt;SPAN&nbsp;&gt;&lt;/SPAN&gt;<br>
&lt;BLOCKQUOTE&nbsp;style=&quot;PADDING-LEFT:&nbsp;5px;&nbsp;MARGIN-LEFT:&nbsp;5px;&nbsp;BORDER-LEFT:&nbsp;#a0c6e5&nbsp;2px&nbsp;solid;&nbsp;MARGIN-RIGHT:&nbsp;0px&quot;&gt;<br>
&lt;HR&nbsp;style=&quot;COLOR:&nbsp;#a0c6e5&quot;&nbsp;SIZE=1&gt;<br>
&lt;BR&gt;-----原始邮件-----&lt;BR&gt;发件人:&quot;Graham&nbsp;Dumpleton&quot;&nbsp;&lt;BR&gt;发送时间:2006-04-24&nbsp;12:10:38&lt;BR&gt;收件人:&quot;yjfuk&quot;&nbsp;&lt;BR&gt;抄送:&quot;mod_python@modpython...&quot;&nbsp;&lt;BR&gt;主题:Re:&amp;nbsp;Re:&amp;nbsp;[mod_python]&amp;nbsp;session&amp;nbsp;lock&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;PRE&nbsp;style=&quot;WIDTH:&nbsp;100%;&nbsp;WHITE-SPACE:&nbsp;normal;&nbsp;WORD-WRAP:&nbsp;break-word&quot;&gt;yjfuk&nbsp;wrote&nbsp;..<br>
&amp;gt;&nbsp;the&nbsp;mod_python&nbsp;startup&nbsp;message&nbsp;in&nbsp;the&nbsp;Apache&nbsp;error&nbsp;log&nbsp;file&nbsp;is&nbsp;:<br>
&amp;gt;&nbsp;&nbsp;<br>
&amp;gt;&nbsp;[Sat&nbsp;Jan&nbsp;28&nbsp;18:40:19&nbsp;2006]&nbsp;[notice]&nbsp;mod_python:&nbsp;Creating&nbsp;8&nbsp;session&nbsp;mutexes<br>
&amp;gt;&nbsp;based&nbsp;on&nbsp;25&nbsp;max&nbsp;processes&nbsp;and&nbsp;30&nbsp;max&nbsp;threads<br>
&amp;gt;&nbsp;&nbsp;<br>
&amp;gt;&nbsp;the&nbsp;Apache&nbsp;is&nbsp;configured&nbsp;for&nbsp;worker&nbsp;MPM<br>
<br>
You&nbsp;didn't&nbsp;say&nbsp;what&nbsp;operating&nbsp;system&nbsp;you&nbsp;were&nbsp;using.<br>
<br>
From&nbsp;what&nbsp;I&nbsp;gather&nbsp;from&nbsp;mailing&nbsp;list&nbsp;archives,&nbsp;the&nbsp;cause&nbsp;of&nbsp;the&nbsp;problem<br>
for&nbsp;why&nbsp;global&nbsp;mutex&nbsp;locks&nbsp;cannot&nbsp;be&nbsp;acquired&nbsp;is&nbsp;sometimes&nbsp;elusive.<br>
<br>
The&nbsp;usual&nbsp;problem&nbsp;is&nbsp;that&nbsp;the&nbsp;operating&nbsp;system&nbsp;only&nbsp;has&nbsp;a&nbsp;limited&nbsp;number&nbsp;of<br>
the&nbsp;types&nbsp;of&nbsp;locks&nbsp;used.&nbsp;In&nbsp;the&nbsp;case&nbsp;of&nbsp;Linux&nbsp;it&nbsp;may&nbsp;be&nbsp;necessary&nbsp;to&nbsp;increase<br>
the&nbsp;number&nbsp;kernel&nbsp;locks&nbsp;available&nbsp;for&nbsp;use.&nbsp;Mod_python&nbsp;will&nbsp;output<br>
error&nbsp;messages&nbsp;warning&nbsp;of&nbsp;an&nbsp;ability&nbsp;to&nbsp;acquire&nbsp;the&nbsp;locks&nbsp;initially,&nbsp;but<br>
not&nbsp;sure&nbsp;if&nbsp;this&nbsp;happens&nbsp;in&nbsp;3.2.2b&nbsp;that&nbsp;you&nbsp;are&nbsp;using.<br>
<br>
Thus,&nbsp;upgrade&nbsp;to&nbsp;mod_python&nbsp;3.2.8&nbsp;to&nbsp;begin&nbsp;with,&nbsp;then&nbsp;look&nbsp;carefully<br>
in&nbsp;the&nbsp;log&nbsp;files&nbsp;for&nbsp;messages&nbsp;something&nbsp;like:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mod_python:&nbsp;We&nbsp;can&nbsp;probably&nbsp;continue,&nbsp;but&nbsp;with&nbsp;diminished&nbsp;ability&nbsp;to&nbsp;process&nbsp;session&nbsp;locks.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mod_python:&nbsp;Hint:&nbsp;On&nbsp;Linux,&nbsp;the&nbsp;problem&nbsp;may&nbsp;be&nbsp;the&nbsp;number&nbsp;of&nbsp;available&nbsp;semaphores,&nbsp;check&nbsp;'sysctl&nbsp;kernel.sem'<br>
<br>
This&nbsp;would&nbsp;be&nbsp;immediately&nbsp;after&nbsp;that&nbsp;startup&nbsp;message.<br>
<br>
So,&nbsp;upgrade&nbsp;mod_python&nbsp;first&nbsp;and&nbsp;if&nbsp;it&nbsp;still&nbsp;persists,&nbsp;look&nbsp;into&nbsp;'sysctl&nbsp;kernel.sem'<br>
command&nbsp;if&nbsp;your&nbsp;on&nbsp;Linux&nbsp;and&nbsp;increasing&nbsp;number&nbsp;of&nbsp;locks.&nbsp;Else,&nbsp;get&nbsp;back&nbsp;to<br>
us&nbsp;and&nbsp;we&nbsp;can&nbsp;see&nbsp;what&nbsp;else&nbsp;we&nbsp;can&nbsp;come&nbsp;up&nbsp;with.<br>
<br>
Graham<br>
&lt;/PRE&gt;&lt;!--&nbsp;CoreMail&nbsp;Version&nbsp;2.5&nbsp;Copyright&nbsp;(c)&nbsp;2002-2006&nbsp;www.mailtech.cn&nbsp;--&gt;&lt;/BLOCKQUOTE&gt;&lt;br&gt;&lt;!--&nbsp;footer&nbsp;--&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;style=&quot;border-bottom:1px&nbsp;solid&nbsp;#999&quot;&gt;&lt;/div&gt;&lt;br&gt;<br>
<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;font&nbsp;color=&quot;black&quot;&nbsp;style=&quot;font-size:14.8px&quot;&gt;你&nbsp;不&nbsp;想&nbsp;试&nbsp;试&nbsp;今&nbsp;夏&nbsp;最&nbsp;“酷”&nbsp;的&nbsp;邮&nbsp;箱&nbsp;吗&nbsp;？&lt;/font&gt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;br&gt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&lt;a&nbsp;href=&quot;http://www.126.com/&quot;&nbsp;target=&quot;_blank&quot;&nbsp;style=&quot;font-size:13px;line-height:160%;color:blue&quot;&gt;蕴&nbsp;涵&nbsp;中&nbsp;华&nbsp;传&nbsp;统&nbsp;文&nbsp;化&nbsp;于&nbsp;世&nbsp;界&nbsp;一&nbsp;流&nbsp;科&nbsp;技&nbsp;之&nbsp;中，创&nbsp;新&nbsp;Ajax&nbsp;技&nbsp;术，126&nbsp;“D&nbsp;计&nbsp;划”火&nbsp;热&nbsp;体&nbsp;验&nbsp;中&nbsp;！<br>
&lt;/a&gt;<br>
<br>

</tt>
