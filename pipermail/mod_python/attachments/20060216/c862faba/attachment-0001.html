<tt>
&amp;quot;I&nbsp;know&nbsp;they&nbsp;are&nbsp;limited&nbsp;on&nbsp;purpose,&nbsp;but&nbsp;I&nbsp;can't&nbsp;bear&nbsp;to&nbsp;be&lt;br&gt;forced&nbsp;to&nbsp;jump&nbsp;through&nbsp;hoops&nbsp;to&nbsp;please&nbsp;a&nbsp;development&nbsp;philosophy&nbsp;that&lt;br&gt;mostly&nbsp;gets&nbsp;in&nbsp;the&nbsp;way&nbsp;IMHO.&amp;quot;&lt;br&gt;&lt;br&gt;Exactly.&nbsp;Leave&nbsp;purism&nbsp;to&nbsp;the&nbsp;pursits.&nbsp;For&nbsp;the&nbsp;rest&nbsp;of&nbsp;us&nbsp;there's&nbsp;work&nbsp;to&nbsp;be&nbsp;done.&nbsp;There's&nbsp;no&nbsp;one&nbsp;way&nbsp;to&nbsp;do&nbsp;everthing&nbsp;that&nbsp;will&nbsp;work&nbsp;for&nbsp;everybody,&nbsp;go&nbsp;with&nbsp;what&nbsp;works.<br>
&lt;br&gt;&lt;br&gt;I&nbsp;keep&nbsp;code&nbsp;specific&nbsp;to&nbsp;display,&nbsp;formatting,&nbsp;or&nbsp;html&nbsp;in&nbsp;the&nbsp;psp&nbsp;templates.&nbsp;I&nbsp;leave&nbsp;back-end&nbsp;logic&nbsp;in&nbsp;the&nbsp;backend,&nbsp;I&nbsp;find&nbsp;it's&nbsp;easier&nbsp;to&nbsp;maintain&nbsp;that&nbsp;way.&nbsp;But&nbsp;I&nbsp;expect&nbsp;the&nbsp;full&nbsp;power&nbsp;of&nbsp;python&nbsp;for&nbsp;both&nbsp;tasks,&nbsp;and&nbsp;I'm&nbsp;loathe&nbsp;to&nbsp;use&nbsp;some&nbsp;seperate&nbsp;third-party&nbsp;template&nbsp;language&nbsp;that&nbsp;holds&nbsp;me&nbsp;back.&nbsp;PSP&nbsp;was&nbsp;convienient&nbsp;because&nbsp;it&nbsp;allowed&nbsp;pure&nbsp;python&nbsp;statements&nbsp;in&nbsp;my&nbsp;templates,&nbsp;but&nbsp;now&nbsp;I'm&nbsp;thinking&nbsp;it's&nbsp;holding&nbsp;me&nbsp;back,&nbsp;I&nbsp;want&nbsp;to&nbsp;personalize&nbsp;it&nbsp;a&nbsp;little,&nbsp;like&nbsp;add&nbsp;some&nbsp;shortcut&nbsp;tags&nbsp;to&nbsp;simplify&nbsp;common&nbsp;tasks&nbsp;where&nbsp;python&nbsp;is&nbsp;too&nbsp;verbose.<br>
&lt;br&gt;&lt;br&gt;for&nbsp;example&nbsp;two&nbsp;things&nbsp;I&nbsp;use&nbsp;a&nbsp;lot&nbsp;are:&lt;br&gt;&lt;br&gt;&amp;lt;%=vars['varname']%&amp;gt;&nbsp;and&nbsp;&amp;lt;%=lang['category']['phrase']%&amp;gt;&lt;br&gt;&lt;br&gt;why&nbsp;not&nbsp;&amp;lt;$varname$&amp;gt;&nbsp;or&nbsp;&amp;lt;@category&nbsp;phrase@&amp;gt;&lt;br&gt;&lt;br&gt;Asside&nbsp;from&nbsp;being&nbsp;shorter&nbsp;and&nbsp;easier&nbsp;to&nbsp;read,&nbsp;this&nbsp;would&nbsp;give&nbsp;a&nbsp;second&nbsp;benefit,&nbsp;I&nbsp;could&nbsp;pre-compile&nbsp;(cache)&nbsp;the&nbsp;templates&nbsp;in&nbsp;each&nbsp;language&nbsp;instead&nbsp;of&nbsp;doing&nbsp;it&nbsp;at&nbsp;execution&nbsp;time.&nbsp;Just&nbsp;thinking&nbsp;out&nbsp;loud.<br>
&lt;br&gt;&lt;br&gt;I'm&nbsp;of&nbsp;the&nbsp;opinion&nbsp;that&nbsp;psp&nbsp;is&nbsp;not&nbsp;tied&nbsp;to&nbsp;mod_python,&nbsp;nor&nbsp;does&nbsp;it&nbsp;have&nbsp;anything&nbsp;to&nbsp;do&nbsp;with&nbsp;mod_python.&nbsp;It&nbsp;should&nbsp;be&nbsp;a&nbsp;seperate&nbsp;entity&nbsp;and&nbsp;maintained&nbsp;by&nbsp;those&nbsp;who&nbsp;use&nbsp;it.&nbsp;Just&nbsp;like&nbsp;there's&nbsp;no&nbsp;reason&nbsp;for&nbsp;mod_python&nbsp;developers&nbsp;to&nbsp;have&nbsp;a&nbsp;cheetah&nbsp;module&nbsp;and&nbsp;have&nbsp;to&nbsp;maintain&nbsp;that.<br>
&lt;br&gt;&lt;br&gt;-Dan&lt;br&gt;&lt;br&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;2/16/06,&nbsp;&lt;b&nbsp;class=&quot;gmail_sendername&quot;&gt;Nicolas&nbsp;Lehuen&lt;/b&gt;&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:nicolas@lehuen.com&quot;&gt;nicolas@lehuen.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;/span&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
Well,&nbsp;in&nbsp;fact,&nbsp;I'm&nbsp;not&nbsp;using&nbsp;PSP,&nbsp;but&nbsp;my&nbsp;own&nbsp;templating&nbsp;system.&nbsp;The&lt;br&gt;whole&nbsp;code&nbsp;is&nbsp;around&nbsp;500&nbsp;lines&nbsp;of&nbsp;pure&nbsp;Python.&nbsp;It&nbsp;uses&nbsp;a&nbsp;regular&lt;br&gt;expression&nbsp;based&nbsp;tokenizer,&nbsp;a&nbsp;recursive&nbsp;hand-written&nbsp;parser&nbsp;(the&lt;br&gt;grammar&nbsp;is&nbsp;simple&nbsp;enough),&nbsp;and&nbsp;the&nbsp;result&nbsp;of&nbsp;a&nbsp;template&nbsp;compilation&nbsp;is<br>
&lt;br&gt;an&nbsp;optimized&nbsp;(simplified)&nbsp;AST&nbsp;that&nbsp;is&nbsp;visited&nbsp;each&nbsp;time&nbsp;the&nbsp;template&lt;br&gt;needs&nbsp;to&nbsp;be&nbsp;evaluated&nbsp;(it&nbsp;is&nbsp;not&nbsp;Python&nbsp;code&nbsp;that&nbsp;gets&nbsp;compiled&lt;br&gt;afterwards,&nbsp;I&nbsp;don't&nbsp;feel&nbsp;the&nbsp;need&nbsp;to&nbsp;do&nbsp;so).&lt;br&gt;&lt;br&gt;The&nbsp;template&nbsp;markup&nbsp;are&nbsp;close&nbsp;to&nbsp;those&nbsp;used&nbsp;in&nbsp;the&nbsp;Velocity&nbsp;Java<br>
&lt;br&gt;template&nbsp;engine,&nbsp;that&nbsp;is&nbsp;to&nbsp;say&nbsp;you&nbsp;cannot&nbsp;insert&nbsp;any&nbsp;Python&nbsp;code&nbsp;in&lt;br&gt;the&nbsp;template,&nbsp;you&nbsp;have&nbsp;to&nbsp;play&nbsp;by&nbsp;some&nbsp;rules&nbsp;as&nbsp;far&nbsp;as&nbsp;flow&nbsp;control&nbsp;is&lt;br&gt;concerned.&lt;br&gt;&lt;br&gt;However,&nbsp;the&nbsp;evaluation&nbsp;tags&nbsp;can&nbsp;contain&nbsp;full&nbsp;Python&nbsp;evaluation,&nbsp;so<br>
&lt;br&gt;they&nbsp;are&nbsp;not&nbsp;as&nbsp;limited&nbsp;as&nbsp;the&nbsp;one&nbsp;you&nbsp;can&nbsp;find&nbsp;in&nbsp;Zope's&nbsp;TAL,&nbsp;Kid&nbsp;or&lt;br&gt;Django.&nbsp;I&nbsp;know&nbsp;they&nbsp;are&nbsp;limited&nbsp;on&nbsp;purpose,&nbsp;but&nbsp;I&nbsp;can't&nbsp;bear&nbsp;to&nbsp;be&lt;br&gt;forced&nbsp;to&nbsp;jump&nbsp;through&nbsp;hoops&nbsp;to&nbsp;please&nbsp;a&nbsp;development&nbsp;philosophy&nbsp;that&lt;br&gt;mostly&nbsp;gets&nbsp;in&nbsp;the&nbsp;way&nbsp;IMHO.&nbsp;There&nbsp;is&nbsp;no&nbsp;need&nbsp;to&nbsp;prevent&nbsp;your<br>
&lt;br&gt;developers&nbsp;to&nbsp;write&nbsp;full&nbsp;blown&nbsp;Python&nbsp;expression&nbsp;in&nbsp;their&nbsp;templates&nbsp;;&lt;br&gt;if&nbsp;they&nbsp;have&nbsp;a&nbsp;little&nbsp;discipline,&nbsp;it&nbsp;is&nbsp;a&nbsp;real&nbsp;time&nbsp;saver.&lt;br&gt;&lt;br&gt;The&nbsp;template&nbsp;are&nbsp;used&nbsp;by&nbsp;modules&nbsp;published&nbsp;by&nbsp;the&lt;br&gt;mod_python.publisher.&nbsp;Like&nbsp;it&nbsp;was&nbsp;mentioned&nbsp;in&nbsp;a&nbsp;thread&nbsp;a&nbsp;few&nbsp;weeks<br>
&lt;br&gt;ago,&nbsp;I&nbsp;use&nbsp;a&nbsp;Python&nbsp;decorator&nbsp;to&nbsp;specify&nbsp;that&nbsp;the&nbsp;dictionary&nbsp;returned&lt;br&gt;by&nbsp;a&nbsp;published&nbsp;function&nbsp;or&nbsp;method&nbsp;must&nbsp;be&nbsp;used&nbsp;with&nbsp;a&nbsp;given&nbsp;template&nbsp;-&lt;br&gt;the&nbsp;decorator&nbsp;handle&nbsp;all&nbsp;the&nbsp;fuss&nbsp;about&nbsp;computing&nbsp;the&nbsp;relative&nbsp;path&nbsp;of<br>
&lt;br&gt;the&nbsp;template,&nbsp;and&nbsp;calling&nbsp;the&nbsp;template&nbsp;cache.&lt;br&gt;&lt;br&gt;All&nbsp;this&nbsp;is&nbsp;not&nbsp;perfect&nbsp;yet&nbsp;but&nbsp;I've&nbsp;been&nbsp;happily&nbsp;using&nbsp;it&nbsp;for&nbsp;nearly&lt;br&gt;a&nbsp;year&nbsp;now&nbsp;on&nbsp;various&nbsp;projects&nbsp;which&nbsp;are&nbsp;currently&nbsp;in&nbsp;production&lt;br&gt;(though&nbsp;under&nbsp;a&nbsp;quite&nbsp;moderate&nbsp;load&nbsp;so&nbsp;I&nbsp;cannot&nbsp;boast&nbsp;about&nbsp;its<br>
&lt;br&gt;performance&nbsp;apart&nbsp;that&nbsp;saying&nbsp;it&nbsp;is&nbsp;not&nbsp;a&nbsp;problem&nbsp;at&nbsp;all).&lt;br&gt;&lt;br&gt;All&nbsp;this&nbsp;to&nbsp;say&nbsp;that&nbsp;yes,&nbsp;writing&nbsp;an&nbsp;efficient&nbsp;pure&nbsp;Python&nbsp;template&nbsp;is&lt;br&gt;possible,&nbsp;there&nbsp;already&nbsp;exists&nbsp;a&nbsp;zillion&nbsp;and&nbsp;if&nbsp;none&nbsp;please&nbsp;you,&nbsp;then&lt;br&gt;with&nbsp;about&nbsp;500&nbsp;lines&nbsp;of&nbsp;code&nbsp;you&nbsp;have&nbsp;something&nbsp;good&nbsp;enough.&nbsp;Now,&nbsp;why<br>
&lt;br&gt;should&nbsp;we&nbsp;have&nbsp;to&nbsp;maintain&nbsp;some&nbsp;fairly&nbsp;obscure&nbsp;C&nbsp;code&nbsp;for&nbsp;the&nbsp;PSP&lt;br&gt;module,&nbsp;that&nbsp;eludes&nbsp;me&amp;nbsp;&amp;nbsp;:).&lt;br&gt;&lt;br&gt;Regards,&lt;br&gt;Nicolas&lt;br&gt;&lt;br&gt;2006/2/16,&nbsp;Nick&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:nick@dd.revealed.net&quot;&gt;nick@dd.revealed.net&lt;/a&gt;&amp;gt;:<br>
&lt;br&gt;&amp;gt;&nbsp;Nicolas&nbsp;Lehuen&nbsp;wrote:&lt;br&gt;&amp;gt;&nbsp;&amp;gt;&nbsp;If&nbsp;it&nbsp;were&nbsp;up&nbsp;to&nbsp;me,&nbsp;I&nbsp;would&nbsp;reimplement&nbsp;it&nbsp;in&nbsp;pure&nbsp;Python,&nbsp;and&nbsp;I&lt;br&gt;&amp;gt;&nbsp;&amp;gt;&nbsp;don't&nbsp;think&nbsp;the&nbsp;performance&nbsp;loss&nbsp;would&nbsp;be&nbsp;so&nbsp;big.&nbsp;Granted,&nbsp;compilation&lt;br&gt;&amp;gt;&nbsp;&amp;gt;&nbsp;would&nbsp;be&nbsp;a&nbsp;little&nbsp;slower,&nbsp;but&nbsp;once&nbsp;the&nbsp;PSP&nbsp;is&nbsp;compiled,&nbsp;performance<br>
&lt;br&gt;&amp;gt;&nbsp;&amp;gt;&nbsp;should&nbsp;be&nbsp;exactly&nbsp;the&nbsp;same&nbsp;-&nbsp;and&nbsp;implementing&nbsp;a&nbsp;compiler&nbsp;cache&nbsp;is&lt;br&gt;&amp;gt;&nbsp;&amp;gt;&nbsp;extremely&nbsp;easy.&nbsp;Plus,&nbsp;the&nbsp;code&nbsp;being&nbsp;more&nbsp;easy&nbsp;to&nbsp;maintain,&nbsp;we&nbsp;could&lt;br&gt;&amp;gt;&nbsp;&amp;gt;&nbsp;easily&nbsp;optimize&nbsp;it.&nbsp;Call&nbsp;it&nbsp;&amp;quot;doing&nbsp;it&nbsp;the&nbsp;PyPy&nbsp;way&amp;quot;&nbsp;if&nbsp;you&nbsp;like&nbsp;;).<br>
&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;The&nbsp;original&nbsp;PSE&nbsp;parser&nbsp;I&nbsp;did&nbsp;worked&nbsp;very&nbsp;similar&nbsp;to&nbsp;PSP.&amp;nbsp;&amp;nbsp;I&nbsp;used&nbsp;HTMLParser&lt;br&gt;&amp;gt;&nbsp;in&nbsp;the&nbsp;standard&nbsp;lib&nbsp;to&nbsp;do&nbsp;it.&amp;nbsp;&amp;nbsp;However,&nbsp;it&nbsp;was&nbsp;different&nbsp;in&nbsp;that&nbsp;it&nbsp;was&nbsp;not&lt;br&gt;&amp;gt;&nbsp;PHP/ASP-ish&nbsp;where&nbsp;code&nbsp;could&nbsp;just&nbsp;be&nbsp;stuck&nbsp;anywhere;&nbsp;it&nbsp;had&nbsp;to&nbsp;be&nbsp;parsable<br>
&lt;br&gt;&amp;gt;&nbsp;HTML.&amp;nbsp;&amp;nbsp;But&nbsp;I&nbsp;suspect&nbsp;you&nbsp;could&nbsp;just&nbsp;use&nbsp;a&nbsp;regular&nbsp;expression&nbsp;to&nbsp;do&nbsp;what&nbsp;the&lt;br&gt;&amp;gt;&nbsp;PSP&nbsp;parser&nbsp;does.&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;Nick&lt;br&gt;&amp;gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
