If you are running a forked apache, the module has to be imported once
per process.  If threaded, should only be imported once.  Also make
sure that PythonReload is off.


Scott


On Nov 23, 2004, at 3:57 PM, Huzaifa Tapal wrote:


<excerpt><fontfamily><param>Arial</param><x-tad-bigger>I am running
into a problem with mod_python in that, I am importing a module in the
handler which creates a singleton in memory.  I am using the module to
hold cache information for any other modules that import the same
module.</x-tad-bigger></fontfamily>


<fontfamily><param>Arial</param><x-tad-bigger> </x-tad-bigger></fontfamily>


<fontfamily><param>Arial</param><x-tad-bigger>I started testing the
cache mechanism when I noticed that the module was being imported
multiple times and not just once after the first request after apache
had started.  To test this, I put a few lines of code in the module to
write to a file the time it was last imported.  I noticed that after
restarting apache, the first time it writes to the file.  If I hit
refresh on my page immediately, multiple times, it doesn’t write.  If
I wait like 10 seconds or more and then hit refresh again, it
reimports that module that should have been cached.</x-tad-bigger></fontfamily>


<fontfamily><param>Arial</param><x-tad-bigger> </x-tad-bigger></fontfamily>


<fontfamily><param>Arial</param><x-tad-bigger>Also, If I make a
request for a page from two different clients, it reimports the module
from each client.  Am I mistaken in thinking that any module imported
in the handler then is cached in mod_python’s module cache and
subsequent imports of that module then are simply served up from the
cache.  Under what conditions then would the same module get
reimported if no modifications were made to that module?</x-tad-bigger></fontfamily>


<fontfamily><param>Arial</param><x-tad-bigger> </x-tad-bigger></fontfamily>


<fontfamily><param>Arial</param><x-tad-bigger>Any help would be
appreciated.</x-tad-bigger></fontfamily>


<fontfamily><param>Arial</param><x-tad-bigger> </x-tad-bigger></fontfamily>


<fontfamily><param>Arial</param><x-tad-bigger>Hozi</x-tad-bigger></fontfamily>

_______________________________________________

Mod_python mailing list

Mod_python@modpython.org

http://mailman.modpython.org/mailman/listinfo/mod_python

</excerpt>