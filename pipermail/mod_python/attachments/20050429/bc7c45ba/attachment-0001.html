<tt>
&lt;!DOCTYPE&nbsp;html&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.01&nbsp;Transitional//EN&quot;&gt;<br>
&lt;html&gt;<br>
&lt;head&gt;<br>
&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;charset=ISO-8859-1&quot;&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&lt;/head&gt;<br>
&lt;body&nbsp;bgcolor=&quot;#ffffff&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
Hello&nbsp;Nicolas,&lt;br&gt;<br>
&lt;br&gt;<br>
Sorry&nbsp;for&nbsp;not&nbsp;clearing&nbsp;it&nbsp;up&nbsp;about&nbsp;my&nbsp;problem.&amp;nbsp;&nbsp;Actually,&nbsp;I&nbsp;have&nbsp;my&nbsp;own<br>
handler&nbsp;that&nbsp;I&nbsp;integrated&nbsp;into&nbsp;a&nbsp;web&nbsp;application&nbsp;framework&nbsp;we&nbsp;built<br>
in-house.&amp;nbsp;&nbsp;And&nbsp;yes&nbsp;both&nbsp;moduleA&nbsp;and&nbsp;moduleB&nbsp;are&nbsp;of&nbsp;the&nbsp;same&nbsp;name.&amp;nbsp;&nbsp;So<br>
really,&nbsp;the&nbsp;scenario&nbsp;is&nbsp;as&nbsp;follows:&lt;br&gt;<br>
&lt;br&gt;<br>
/home/user/dir1/moduleA&lt;br&gt;<br>
/home/userdir123/moduleA&lt;br&gt;<br>
&lt;br&gt;<br>
Since,&nbsp;this&nbsp;only&nbsp;happens&nbsp;in&nbsp;cases&nbsp;where&nbsp;there&nbsp;are&nbsp;two&nbsp;modules&nbsp;with&nbsp;the<br>
same&nbsp;name&nbsp;and&nbsp;the&nbsp;path&nbsp;to&nbsp;the&nbsp;first&nbsp;module&nbsp;happens&nbsp;to&nbsp;be&nbsp;in&nbsp;the&nbsp;path&nbsp;to<br>
the&nbsp;second&nbsp;module&nbsp;because&nbsp;of&nbsp;the&nbsp;similarities&nbsp;in&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;two<br>
directories,&nbsp;I&nbsp;think&nbsp;it&nbsp;would&nbsp;be&nbsp;safe&nbsp;to&nbsp;add&nbsp;this&nbsp;to&nbsp;the&nbsp;documentation<br>
instead&nbsp;of&nbsp;slowing&nbsp;import_module.&amp;nbsp;&amp;nbsp;&nbsp;It&nbsp;would&nbsp;also&nbsp;make&nbsp;sense&nbsp;to&nbsp;mention<br>
it&nbsp;in&nbsp;the&nbsp;comments&nbsp;for&nbsp;import_module&nbsp;as&nbsp;well.&lt;br&gt;<br>
&lt;br&gt;<br>
Thanks&nbsp;for&nbsp;your&nbsp;help&lt;br&gt;<br>
&lt;br&gt;<br>
Hozi&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Nicolas&nbsp;Lehuen&nbsp;wrote:<br>
&lt;blockquote&nbsp;cite=&quot;midc298f2d705042901333282aa30@mail.gmail.com&quot;<br>
&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;Sorry,&nbsp;reposting&nbsp;to&nbsp;the&nbsp;whole&nbsp;list&nbsp;:<br>
<br>
Hi,<br>
<br>
The&nbsp;change&nbsp;I've&nbsp;made&nbsp;for&nbsp;MODPYTHON-9&nbsp;affects&nbsp;only&nbsp;the&nbsp;publisher<br>
module.&nbsp;It&nbsp;solves&nbsp;the&nbsp;problem&nbsp;encountered&nbsp;when&nbsp;you&nbsp;had&nbsp;two&nbsp;pages,&nbsp;one<br>
at&nbsp;/index.py,&nbsp;and&nbsp;the&nbsp;other&nbsp;at&nbsp;/foobar/index.py.<br>
<br>
Huzaifa,&nbsp;what&nbsp;I&nbsp;don't&nbsp;understand&nbsp;here&nbsp;is&nbsp;whether&nbsp;moduleA&nbsp;has&nbsp;the&nbsp;same<br>
name&nbsp;as&nbsp;moduleB,&nbsp;and&nbsp;whether&nbsp;you&nbsp;are&nbsp;using&nbsp;mod_python.publisher&nbsp;or<br>
not.<br>
<br>
If&nbsp;you&nbsp;use&nbsp;the&nbsp;publisher,&nbsp;your&nbsp;problem&nbsp;has&nbsp;been&nbsp;solved&nbsp;in&nbsp;the&nbsp;latest<br>
development&nbsp;version,&nbsp;and&nbsp;the&nbsp;fix&nbsp;will&nbsp;be&nbsp;in&nbsp;the&nbsp;next&nbsp;release.<br>
<br>
Anyway,&nbsp;if&nbsp;we&nbsp;put&nbsp;aside&nbsp;the&nbsp;fix&nbsp;specific&nbsp;to&nbsp;the&nbsp;publisher,&nbsp;the&nbsp;problem<br>
you&nbsp;describe&nbsp;is&nbsp;real,&nbsp;and&nbsp;the&nbsp;workaround&nbsp;you&nbsp;provide&nbsp;is&nbsp;correct.<br>
<br>
It&nbsp;is&nbsp;so&nbsp;correct&nbsp;that&nbsp;the&nbsp;only&nbsp;way&nbsp;I&nbsp;see&nbsp;of&nbsp;fixing&nbsp;that&nbsp;is&nbsp;to<br>
integrate&nbsp;the&nbsp;workaround&nbsp;in&nbsp;the&nbsp;import_module&nbsp;function,&nbsp;that&nbsp;is&nbsp;to&nbsp;say<br>
to&nbsp;check&nbsp;whether&nbsp;each&nbsp;path&nbsp;component&nbsp;passed&nbsp;in&nbsp;the&nbsp;path&nbsp;list&nbsp;argument<br>
ends&nbsp;with&nbsp;a&nbsp;'/'&nbsp;(or&nbsp;'\'),&nbsp;and&nbsp;if&nbsp;not,&nbsp;add&nbsp;a&nbsp;'/'&nbsp;(or&nbsp;'\\').&nbsp;This&nbsp;is<br>
done&nbsp;easily&nbsp;in&nbsp;the&nbsp;first&nbsp;line&nbsp;of&nbsp;the&nbsp;function&nbsp;:<br>
<br>
if&nbsp;path:<br>
&nbsp;&nbsp;&nbsp;path&nbsp;=&nbsp;map(lambda&nbsp;entry&nbsp;:&nbsp;(entry[-1]!='/'&nbsp;and&nbsp;entry+'/')&nbsp;or&nbsp;entry,path)<br>
<br>
However,&nbsp;there&nbsp;is&nbsp;no&nbsp;easy&nbsp;way&nbsp;of&nbsp;telling&nbsp;what&nbsp;directory&nbsp;separator<br>
should&nbsp;be&nbsp;used&nbsp;;&nbsp;theoretically,&nbsp;os.sep&nbsp;gives&nbsp;us&nbsp;the&nbsp;correct&nbsp;directory<br>
separator,&nbsp;but&nbsp;even&nbsp;under&nbsp;Win32&nbsp;Apache&nbsp;admins&nbsp;are&nbsp;advised&nbsp;to&nbsp;use&nbsp;&quot;/&quot;<br>
which&nbsp;is&nbsp;compatible&nbsp;(at&nbsp;the&nbsp;OS&nbsp;level).&nbsp;So,&nbsp;we&nbsp;might&nbsp;as&nbsp;well&nbsp;always&nbsp;use<br>
&quot;/&quot;.<br>
<br>
What&nbsp;I&nbsp;fear&nbsp;is&nbsp;that&nbsp;adding&nbsp;all&nbsp;these&nbsp;checks&nbsp;to&nbsp;import_module&nbsp;will&nbsp;make<br>
it&nbsp;a&nbsp;little&nbsp;bit&nbsp;too&nbsp;slow,&nbsp;so&nbsp;what&nbsp;about&nbsp;adding&nbsp;a&nbsp;line&nbsp;or&nbsp;two&nbsp;in&nbsp;the<br>
documentation&nbsp;about&nbsp;the&nbsp;fact&nbsp;that&nbsp;all&nbsp;directories&nbsp;mentioned&nbsp;in&nbsp;the<br>
path&nbsp;argument&nbsp;should&nbsp;end&nbsp;with&nbsp;a&nbsp;'/'&nbsp;?<br>
<br>
Regards,<br>
<br>
Nicolas<br>
<br>
On&nbsp;4/29/05,&nbsp;Graham&nbsp;Dumpleton&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-rfc2396E&quot;&nbsp;href=&quot;mailto:grahamd@dscpl.com.au&quot;&gt;&amp;lt;grahamd@dscpl.com.au&amp;gt;&lt;/a&gt;&nbsp;wrote:<br>
&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;Nicolas,&nbsp;does&nbsp;the&nbsp;change&nbsp;you&nbsp;have&nbsp;already&nbsp;made&nbsp;for&nbsp;MODPYTHON-9<br>
also&nbsp;address&nbsp;this&nbsp;slightly&nbsp;different&nbsp;variation&nbsp;on&nbsp;the&nbsp;problem?<br>
<br>
Original&nbsp;report&nbsp;was&nbsp;based&nbsp;on&nbsp;same&nbsp;name&nbsp;module&nbsp;in&nbsp;parent&nbsp;and&nbsp;child<br>
subdirectories,&nbsp;not&nbsp;sibling&nbsp;directories&nbsp;which&nbsp;share&nbsp;a&nbsp;common&nbsp;prefix<br>
to&nbsp;the&nbsp;subdirectory&nbsp;name.<br>
<br>
Graham<br>
<br>
Huzaifa&nbsp;Tapal&nbsp;wrote&nbsp;..<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;For&nbsp;my&nbsp;fix,&nbsp;I&nbsp;patched&nbsp;this&nbsp;issue&nbsp;by&nbsp;passing&nbsp;the&nbsp;import_module&nbsp;function<br>
the&nbsp;path&nbsp;with&nbsp;&quot;/&quot;&nbsp;in&nbsp;the&nbsp;end.&nbsp;&nbsp;That&nbsp;way&nbsp;it&nbsp;distinguishes&nbsp;from<br>
/home/user/dir1&nbsp;and&nbsp;/home/user/dir123<br>
<br>
hozi<br>
<br>
Graham&nbsp;Dumpleton&nbsp;wrote:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;See:<br>
<br>
&nbsp;&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://issues.apache.org/jira/browse/MODPYTHON-9&quot;&gt;http://issues.apache.org/jira/browse/MODPYTHON-9&lt;/a&gt;<br>
&nbsp;&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://issues.apache.org/jira/browse/MODPYTHON-10&quot;&gt;http://issues.apache.org/jira/browse/MODPYTHON-10&lt;/a&gt;<br>
&nbsp;&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://issues.apache.org/jira/browse/MODPYTHON-11&quot;&gt;http://issues.apache.org/jira/browse/MODPYTHON-11&lt;/a&gt;<br>
<br>
There&nbsp;are&nbsp;various&nbsp;known&nbsp;issues&nbsp;with&nbsp;using&nbsp;same&nbsp;name&nbsp;module&nbsp;in&nbsp;different<br>
directories.<br>
<br>
The&nbsp;first&nbsp;one&nbsp;has&nbsp;been&nbsp;addressed&nbsp;for&nbsp;next&nbsp;version&nbsp;of&nbsp;mod_python.<br>
<br>
Graham<br>
<br>
On&nbsp;29/04/2005,&nbsp;at&nbsp;8:22&nbsp;AM,&nbsp;Huzaifa&nbsp;Tapal&nbsp;wrote:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;I&nbsp;think&nbsp;there&nbsp;is&nbsp;a&nbsp;bug&nbsp;in&nbsp;apache.import_module.&nbsp;&nbsp;I&nbsp;am&nbsp;using<br>
apache.import_module&nbsp;passing&nbsp;in&nbsp;the&nbsp;path&nbsp;where&nbsp;I&nbsp;want&nbsp;the&nbsp;module<br>
imported&nbsp;from.&nbsp;&nbsp;I&nbsp;am&nbsp;seeing&nbsp;a&nbsp;very&nbsp;odd&nbsp;result&nbsp;as&nbsp;to&nbsp;sometimes,&nbsp;the<br>
module&nbsp;that&nbsp;is&nbsp;loaded&nbsp;is&nbsp;not&nbsp;the&nbsp;right&nbsp;one.&nbsp;&nbsp;Instead&nbsp;it&nbsp;loads&nbsp;a<br>
module&nbsp;that&nbsp;is&nbsp;of&nbsp;the&nbsp;same&nbsp;name&nbsp;but&nbsp;in&nbsp;a&nbsp;different&nbsp;directory.&nbsp;&nbsp;Here<br>
is&nbsp;what&nbsp;is&nbsp;happening:<br>
<br>
I&nbsp;have&nbsp;two&nbsp;modules&nbsp;of&nbsp;same&nbsp;name&nbsp;in&nbsp;2&nbsp;different&nbsp;directories&nbsp;as&nbsp;follows;<br>
<br>
/home/user/dir1/moduleA<br>
/home/user/dir123/moduleB<br>
<br>
Lets&nbsp;say&nbsp;I&nbsp;restart&nbsp;apache&nbsp;and&nbsp;load&nbsp;up&nbsp;moduleA.&nbsp;&nbsp;At&nbsp;that&nbsp;point&nbsp;there<br>
is&nbsp;an&nbsp;entry&nbsp;in&nbsp;sys.modules&nbsp;for&nbsp;moduleA.&nbsp;&nbsp;Lets&nbsp;say&nbsp;then,&nbsp;I&nbsp;load&nbsp;up<br>
moduleB,&nbsp;now&nbsp;the&nbsp;original&nbsp;entry&nbsp;for&nbsp;moduleA&nbsp;is&nbsp;overwritten&nbsp;by&nbsp;this<br>
new&nbsp;entry.&nbsp;&nbsp;Now&nbsp;when&nbsp;I&nbsp;go&nbsp;back&nbsp;to&nbsp;load&nbsp;moduleA,&nbsp;I&nbsp;get&nbsp;back&nbsp;moduleB<br>
results.&nbsp;Here&nbsp;is&nbsp;why:<br>
<br>
In&nbsp;apache.import_module&nbsp;if&nbsp;I&nbsp;pass&nbsp;in&nbsp;the&nbsp;path&nbsp;to&nbsp;load&nbsp;moduleA&nbsp;from<br>
'/home/user/dir1'&nbsp;and&nbsp;the&nbsp;last&nbsp;module&nbsp;was&nbsp;in&nbsp;'/home/user/dir123'&nbsp;then<br>
the&nbsp;check&nbsp;in&nbsp;import_module&nbsp;to&nbsp;make&nbsp;sure&nbsp;both&nbsp;modules&nbsp;aren't&nbsp;the&nbsp;same<br>
fails&nbsp;since&nbsp;it&nbsp;does&nbsp;a&nbsp;&quot;file.startswith()&quot;&nbsp;check&nbsp;on&nbsp;the&nbsp;path.&nbsp;&nbsp;Since<br>
the&nbsp;path&nbsp;moduleA&nbsp;is&nbsp;in&nbsp;the&nbsp;path&nbsp;to&nbsp;moduleB,&nbsp;it&nbsp;loads&nbsp;the&nbsp;wrong&nbsp;module.<br>
<br>
I&nbsp;see&nbsp;that&nbsp;somebody&nbsp;else&nbsp;had&nbsp;complained&nbsp;about&nbsp;this&nbsp;problem&nbsp;in<br>
mod_python&nbsp;1.3.1&nbsp;but&nbsp;it&nbsp;still&nbsp;has&nbsp;not&nbsp;been&nbsp;patched.<br>
<br>
Any&nbsp;ideas?<br>
<br>
Hozi<br>
<br>
<br>
_______________________________________________<br>
Mod_python&nbsp;mailing&nbsp;list<br>
&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:Mod_python@modpython.org&quot;&gt;Mod_python@modpython.org&lt;/a&gt;<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://mailman.modpython.org/mailman/listinfo/mod_python&quot;&gt;http://mailman.modpython.org/mailman/listinfo/mod_python&lt;/a&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;_______________________________________________<br>
Mod_python&nbsp;mailing&nbsp;list<br>
&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:Mod_python@modpython.org&quot;&gt;Mod_python@modpython.org&lt;/a&gt;<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://mailman.modpython.org/mailman/listinfo/mod_python&quot;&gt;http://mailman.modpython.org/mailman/listinfo/mod_python&lt;/a&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;&lt;!----&gt;<br>
_______________________________________________<br>
Mod_python&nbsp;mailing&nbsp;list<br>
&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:Mod_python@modpython.org&quot;&gt;Mod_python@modpython.org&lt;/a&gt;<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://mailman.modpython.org/mailman/listinfo/mod_python&quot;&gt;http://mailman.modpython.org/mailman/listinfo/mod_python&lt;/a&gt;<br>
<br>
<br>
&nbsp;&nbsp;&lt;/pre&gt;<br>
&lt;/blockquote&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
