<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;saw&nbsp;you&nbsp;were&nbsp;looking&nbsp;for&nbsp;help&nbsp;to&nbsp;test&nbsp;compiling&nbsp;the&nbsp;new&nbsp;mod_python&nbsp;on&nbsp;Windows.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;good&nbsp;news:&nbsp;I&nbsp;got&nbsp;it&nbsp;compiled&nbsp;on&nbsp;Windows&nbsp;under&nbsp;Visual&nbsp;Studio&nbsp;2010&nbsp;-&nbsp;I&nbsp;haven&amp;#39;t&nbsp;tested&nbsp;it&nbsp;but&nbsp;it&nbsp;does&nbsp;spit&nbsp;out&nbsp;a&nbsp;so&nbsp;file&nbsp;(albeit&nbsp;it&nbsp;is&nbsp;not&nbsp;happy&nbsp;with&nbsp;all&nbsp;the&nbsp;warnings&nbsp;but&nbsp;I&nbsp;got&nbsp;no&nbsp;errors).&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;bad&nbsp;news: &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;*)&nbsp;Visual&nbsp;Studio&nbsp;2010&nbsp;doesn&amp;#39;t&nbsp;support&nbsp;C99&nbsp;(seriously&nbsp;Microsoft?)&nbsp;-&nbsp;so&nbsp;variable&nbsp;declaration&nbsp;must&nbsp;be&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;scope&nbsp;(or&nbsp;before&nbsp;any&nbsp;other&nbsp;statement&nbsp;besides&nbsp;a&nbsp;variable&nbsp;declaration).&nbsp;It&nbsp;does&nbsp;appear&nbsp;that&nbsp;they&nbsp;did&nbsp;add&nbsp;C99&nbsp;support&nbsp;in&nbsp;2013&nbsp;( &lt;a&nbsp;href=&quot;http://blogs.msdn.com/b/vcblog/archive/2013/07/19/c99-library-support-in-visual-studio-2013.aspx&quot;&gt;http://blogs.msdn.com/b/vcblog/archive/2013/07/19/c99-library-support-in-visual-studio-2013.aspx&lt;/a&gt; )&nbsp;so&nbsp;if&nbsp;you&nbsp;want&nbsp;to&nbsp;support&nbsp;anything&nbsp;below&nbsp;2013&nbsp;is&nbsp;up&nbsp;to&nbsp;you.&nbsp;My&nbsp;patch&nbsp;fixes&nbsp;it&nbsp;for&nbsp;2010.&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;*)&nbsp;There&nbsp;appears&nbsp;to&nbsp;be&nbsp;an&nbsp;issue&nbsp;with PyVarObject_HEAD_INIT&nbsp;on&nbsp;Windows&nbsp;(gcc&nbsp;and&nbsp;VC++).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;following&nbsp;causes&nbsp;a&nbsp;&amp;quot;&lt;span&nbsp;style=&quot;font-family:Arial,Helvetica,sans-serif;font-size:13px&quot;&gt;error:&nbsp;initializer&nbsp;element&nbsp;is&nbsp;not&nbsp;constant&amp;quot;&lt;/span&gt;&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:Arial,Helvetica,sans-serif;font-size:13px&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;Arial,&nbsp;Helvetica,&nbsp;sans-serif&quot;&gt;PyVarObject_HEAD_INIT(&amp;amp;PyType_Type,&nbsp;0)&lt;/font&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;Arial,&nbsp;Helvetica,&nbsp;sans-serif&quot;&gt;&lt;br&gt;<br>
<br>
&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;Arial,&nbsp;Helvetica,&nbsp;sans-serif&quot;&gt;interestingly enough&nbsp;it&nbsp;compiles&nbsp;just&nbsp;fine&nbsp;under&nbsp;Linux/gcc.&nbsp;I&nbsp;even&nbsp;tried&nbsp;using&nbsp;a&nbsp;newer&nbsp;version&nbsp;of&nbsp;gcc&nbsp;(on&nbsp;Windows)&nbsp;and&nbsp;still&nbsp;complains&nbsp;about&nbsp;it.&nbsp;That&nbsp;macro&nbsp;expands&nbsp;to&nbsp;(at&nbsp;least&nbsp;according&nbsp;to&nbsp;gcc&nbsp;-E):&lt;/font&gt;&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;Arial,&nbsp;Helvetica,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;Arial,&nbsp;Helvetica,&nbsp;sans-serif&quot;&gt;1,&nbsp;&amp;amp;PyType_Type,&nbsp;0,&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;Arial,&nbsp;Helvetica,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;<br>
&lt;font&nbsp;face=&quot;Arial,&nbsp;Helvetica,&nbsp;sans-serif&quot;&gt;on&nbsp;both&nbsp;Linux&nbsp;and&nbsp;Windows.&nbsp;While,&nbsp;I&amp;#39;m&nbsp;not&nbsp;a&nbsp;C&nbsp;expert&nbsp;I&nbsp;wasn&amp;#39;t&nbsp;able&nbsp;to&nbsp;figure&nbsp;out&nbsp;what&nbsp;is&nbsp;so&nbsp;different&nbsp;that&nbsp;it&nbsp;compiles&nbsp;fine&nbsp;on&nbsp;Linux&nbsp;and&nbsp;not&nbsp;Windows.&nbsp;In&nbsp;any&nbsp;case&nbsp;there&nbsp;is&nbsp;some&nbsp;talk&nbsp;about&nbsp;it&nbsp;here: &lt;/font&gt;&lt;a&nbsp;href=&quot;https://groups.google.com/forum/#!msg/modwsgi/4OLhmA1AbBs/CX0Y8cV0lyUJ&quot;&gt;https://groups.google.com/forum/#!msg/modwsgi/4OLhmA1AbBs/CX0Y8cV0lyUJ&lt;/a&gt;&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;In&nbsp;order&nbsp;to&nbsp;fix&nbsp;that&nbsp;I&nbsp;used&nbsp;this&nbsp;advice: &lt;a&nbsp;href=&quot;http://bugs.python.org/issue10773&quot;&gt;http://bugs.python.org/issue10773&lt;/a&gt; and&nbsp;replaced&nbsp;those&nbsp;lines&nbsp;with:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;PyVarObject_HEAD_INIT(NULL,&nbsp;0)&lt;br&gt;<br>
<br>
&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;And&nbsp;initialized&nbsp;that&nbsp;field&nbsp;elsewhere.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;To&nbsp;compile&nbsp;I&nbsp;downloaded&nbsp;the&nbsp;Apache&nbsp;source&nbsp;(including&nbsp;apr,&nbsp;apr-iconv,&nbsp;apt-util,&nbsp;and&nbsp;httpd&nbsp;as&nbsp;well&nbsp;as&nbsp;compiled&nbsp;libraries&nbsp;from&nbsp;here: &lt;a&nbsp;href=&quot;http://www.apachelounge.com/download/win32/&quot;&gt;http://www.apachelounge.com/download/win32/&lt;/a&gt; ).&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;also&nbsp;had&nbsp;to&nbsp;include&nbsp;finfooobject.c&nbsp;into&nbsp;the&nbsp;project&nbsp;file.&nbsp;I&nbsp;also&nbsp;may&nbsp;have&nbsp;hacked&nbsp;some&nbsp;unresolved&nbsp;external&nbsp;symbols&nbsp;in&nbsp;there&nbsp;that&nbsp;it&nbsp;was&nbsp;complaining&nbsp;about.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;However,&nbsp;I&nbsp;was&nbsp;NOT&nbsp;able&nbsp;to&nbsp;compile&nbsp;it&nbsp;using&nbsp;MinGW/gcc&nbsp;-&nbsp;kept&nbsp;getting&nbsp;unresolved&nbsp;externals&nbsp;so&nbsp;I&amp;#39;m&nbsp;no&nbsp;doubt&nbsp;missing&nbsp;a&nbsp;library&nbsp;somewhere....&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;diff&nbsp;is&nbsp;against&nbsp;the&nbsp;latest&nbsp;in&nbsp;your&nbsp;git&nbsp;repo.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Let&nbsp;me&nbsp;know&nbsp;what&nbsp;you&nbsp;think.&lt;/div&gt;&lt;/div&gt;<br>

</tt>
