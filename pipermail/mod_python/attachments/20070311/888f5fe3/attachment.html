<tt>
&lt;div&gt;Graham,&lt;/div&gt;&nbsp;&nbsp;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&nbsp;&nbsp;&lt;div&gt;I&nbsp;appreciate&nbsp;the&nbsp;reply.&nbsp;My&nbsp;method&nbsp;fits&nbsp;in&nbsp;the&nbsp;corner&nbsp;case&nbsp;you&nbsp;mention.&nbsp;The&nbsp;stripped&nbsp;down&amp;nbsp;example&nbsp;is&nbsp;from&nbsp;a&nbsp;project&nbsp;where&nbsp;a&nbsp;protected&nbsp;area&nbsp;of&nbsp;the&nbsp;website&nbsp;is&nbsp;entered.&nbsp;The&nbsp;previous&nbsp;presence&nbsp;of&nbsp;the&nbsp;session&nbsp;means&nbsp;they're&nbsp;already&amp;nbsp;logged&nbsp;in,&nbsp;and&nbsp;the&nbsp;absence&nbsp;means&nbsp;they&nbsp;are&nbsp;required&nbsp;to&nbsp;login.&nbsp;This&nbsp;logic&nbsp;is&nbsp;based&nbsp;upon&nbsp;the&nbsp;description&nbsp;of&nbsp;the&nbsp;is_new()&nbsp;method&nbsp;at&nbsp;&lt;A&nbsp;href=&quot;http://www.modpython.org/live/current/doc-html/pyapi-sess-classes.html&quot;&gt;http://www.modpython.org/live/current/doc-html/pyapi-sess-classes.html&lt;/A&gt;&amp;nbsp;where&nbsp;it&nbsp;suggests&nbsp;you&nbsp;could&nbsp;use:&lt;/div&gt;&nbsp;&nbsp;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&nbsp;&nbsp;&lt;div&gt;sess&nbsp;=&nbsp;Session(req)&lt;BR&gt;if&nbsp;sess.is_new():&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#&nbsp;redirect&nbsp;to&nbsp;login&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;util.redirect(req,&nbsp;'http://www.mysite.com/login')&lt;/div&gt;&nbsp;&nbsp;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&nbsp;&nbsp;&lt;div&gt;Of&nbsp;course,&nbsp;I'm&nbsp;doing&nbsp;something&nbsp;slightly&nbsp;different&nbsp;and&nbsp;composing&nbsp;a&nbsp;page&nbsp;from&nbsp;PSP&nbsp;templates.&nbsp;It's&nbsp;a&nbsp;shame&nbsp;this&nbsp;templating&nbsp;method&nbsp;which&nbsp;doesn't&nbsp;logically&nbsp;have&nbsp;anything&nbsp;to&nbsp;do<br>
&nbsp;with&nbsp;sessions&nbsp;(when&nbsp;viewed&nbsp;purely&nbsp;from&nbsp;a&nbsp;templating&nbsp;perspective)&nbsp;disables&nbsp;the&nbsp;ability&nbsp;to&nbsp;use&nbsp;is_new()&nbsp;in&nbsp;this&nbsp;way.&lt;/div&gt;&nbsp;&nbsp;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&nbsp;&nbsp;&lt;div&gt;I&nbsp;was&nbsp;going&nbsp;to&nbsp;store&nbsp;additional&nbsp;session&nbsp;information&nbsp;in&nbsp;a&nbsp;relational&nbsp;database&nbsp;anyway,&nbsp;so&nbsp;for&nbsp;me&nbsp;I&nbsp;guess&nbsp;the&nbsp;fix&nbsp;is&nbsp;to&nbsp;check&nbsp;for&nbsp;existence&nbsp;of&nbsp;corresponding&nbsp;record&nbsp;in&nbsp;the&nbsp;database&nbsp;as&nbsp;I'm&nbsp;definitely&nbsp;in&nbsp;control&nbsp;of&nbsp;that&nbsp;persistence!&nbsp;I'm&nbsp;going&nbsp;to&nbsp;have&nbsp;to&nbsp;store&nbsp;the&nbsp;last&nbsp;access&nbsp;time&nbsp;in&nbsp;the&nbsp;database&nbsp;too&nbsp;so&nbsp;I&nbsp;can&nbsp;implement&nbsp;the&nbsp;timing&nbsp;out&nbsp;of&nbsp;a&nbsp;session.&lt;/div&gt;&nbsp;&nbsp;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&nbsp;&nbsp;&lt;div&gt;Regards,&lt;/div&gt;&nbsp;&nbsp;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&nbsp;&nbsp;&lt;div&gt;Pete&lt;BR&gt;&lt;BR&gt;&lt;B&gt;&lt;I&gt;Graham&nbsp;Dumpleton&nbsp;&amp;lt;graham.dumpleton@gmail.com&amp;gt;&lt;/I&gt;&lt;/B&gt;&nbsp;wrote:&lt;/div&gt;&nbsp;&nbsp;&lt;BLOCKQUOTE&nbsp;class=replbq&nbsp;style=&quot;PADDING-LEFT:&nbsp;5px;&nbsp;MARGIN-LEFT:&nbsp;5px;&nbsp;BORDER-LEFT:&nbsp;#1010ff&nbsp;2px&nbsp;solid&quot;&gt;On&nbsp;11/03/07,&nbsp;PETER&nbsp;BARKER&nbsp;&lt;NEWBARKER@BTINTERNET.COM&gt;wrote:&lt;BR&gt;&amp;gt;&nbsp;Hello,&lt;BR&gt;&amp;gt;&lt;BR&gt;&amp;gt;&nbsp;See&nbsp;below&nbsp;for&nbsp;the&nbsp;stripped-down&nbsp;code&nbsp;to&nbsp;my&nbsp;problem/query.&nbsp;Note&nbsp;that&nbsp;I&nbsp;do&nbsp;not&lt;BR&gt;&amp;gt;&nbsp;save&nbsp;the&nbsp;session&nbsp;anywhere.&lt;BR&gt;&amp;gt;&lt;BR&gt;&amp;gt;&nbsp;With&nbsp;the&nbsp;two&nbsp;PSP<br>
&nbsp;template&nbsp;lines&nbsp;commented,&nbsp;the&nbsp;session&nbsp;is&nbsp;always&nbsp;new&lt;BR&gt;&amp;gt;&nbsp;(because&nbsp;I'm&nbsp;not&nbsp;saving&nbsp;it).&nbsp;When&nbsp;the&nbsp;templating&nbsp;code&nbsp;is&nbsp;uncommented,&nbsp;the&lt;BR&gt;&amp;gt;&nbsp;session&nbsp;is&nbsp;remembered&nbsp;across&nbsp;requests.&nbsp;Why&nbsp;is&nbsp;this?&lt;BR&gt;&amp;gt;&lt;BR&gt;&amp;gt;&nbsp;APACHE&nbsp;CONFIG:&lt;BR&gt;&amp;gt;&nbsp;&lt;DIRECTORY&nbsp;Software&lt;br&nbsp;Apache&nbsp;Files&nbsp;Program&nbsp;?C:&gt;&lt;BR&gt;&amp;gt;&nbsp;SetHandler&nbsp;mod_python&lt;BR&gt;&amp;gt;&nbsp;PythonDebug&nbsp;On&lt;BR&gt;&amp;gt;&nbsp;PythonHandler&nbsp;mod_python.publisher&lt;BR&gt;&amp;gt;&nbsp;&lt;/DIRECTORY&gt;&lt;BR&gt;&amp;gt;&lt;BR&gt;&amp;gt;&nbsp;INDEX.HTML:&lt;BR&gt;&amp;gt;&nbsp;&lt;BR&gt;&amp;gt;&nbsp;&lt;BR&gt;&amp;gt;&nbsp;&lt;BR&gt;&amp;gt;&nbsp;&lt;BR&gt;&amp;gt;&nbsp;&lt;BR&gt;&amp;gt;&lt;BR&gt;&amp;gt;&nbsp;THETEST.PY:&lt;BR&gt;&amp;gt;&nbsp;from&nbsp;mod_python&nbsp;import&nbsp;Session,&nbsp;psp&lt;BR&gt;&amp;gt;&nbsp;import&nbsp;os&lt;BR&gt;&amp;gt;&nbsp;def&nbsp;entry(req):&lt;BR&gt;&amp;gt;&nbsp;req.session&nbsp;=&nbsp;Session.Session(req)&lt;BR&gt;&amp;gt;&nbsp;if&nbsp;req.session.is_new():&lt;BR&gt;&amp;gt;&nbsp;returnedDoc&nbsp;=&nbsp;&quot;Newly&nbsp;created&nbsp;session:&nbsp;&quot;&nbsp;+&nbsp;req.session.id()&lt;BR&gt;&amp;gt;&nbsp;else:&lt;BR&gt;&amp;gt;&nbsp;returnedDoc&nbsp;=&nbsp;'Existing&nbsp;session:'&nbsp;+&nbsp;req.session.id()&lt;BR&gt;&amp;gt;&nbsp;#pathname&nbsp;=&nbsp;os.path.join(os.path.dirname(req.filename),'index.html')&lt;BR&gt;&amp;gt;&nbsp;#psp.PSP(req,filename=pathname).run()&lt;BR&gt;&amp;gt;&nbsp;req.content_type&nbsp;=&nbsp;'text/html'&lt;BR&gt;&amp;gt;&nbsp;return<br>
&nbsp;returnedDoc&lt;BR&gt;&lt;BR&gt;Do&nbsp;you&nbsp;use&nbsp;the&nbsp;session&nbsp;object&nbsp;in&nbsp;the&nbsp;PSP&nbsp;page?&nbsp;If&nbsp;you&nbsp;do,&nbsp;then&nbsp;what&lt;BR&gt;you&nbsp;are&nbsp;seeing&nbsp;is&nbsp;consistent&nbsp;with&nbsp;how&nbsp;PSP&nbsp;has&nbsp;perhaps&nbsp;always&nbsp;worked.&lt;BR&gt;&lt;BR&gt;As&nbsp;the&nbsp;code&nbsp;stands,&nbsp;if&nbsp;a&nbsp;session&nbsp;object&nbsp;is&nbsp;created,&nbsp;whether&nbsp;it&nbsp;be&lt;BR&gt;prior&nbsp;to&nbsp;PSP&nbsp;being&nbsp;invoked&nbsp;or&nbsp;as&nbsp;a&nbsp;result&nbsp;of&nbsp;a&nbsp;reference&nbsp;to&nbsp;the&lt;BR&gt;session&nbsp;object&nbsp;in&nbsp;a&nbsp;PSP&nbsp;page,&nbsp;the&nbsp;PSP&nbsp;code&nbsp;is&nbsp;always&nbsp;saving&nbsp;the&lt;BR&gt;session&nbsp;object&nbsp;to&nbsp;ensure&nbsp;that&nbsp;the&nbsp;last&nbsp;accessed&nbsp;time&nbsp;is&nbsp;updated.&lt;BR&gt;&lt;BR&gt;If&nbsp;the&nbsp;session&nbsp;object&nbsp;wasn't&nbsp;actually&nbsp;referenced&nbsp;from&nbsp;within&nbsp;the&nbsp;PSP&lt;BR&gt;page&nbsp;this&nbsp;raises&nbsp;an&nbsp;interesting&nbsp;corner&nbsp;case&nbsp;which&nbsp;wasn't&nbsp;perhaps&lt;BR&gt;thought&nbsp;of&nbsp;when&nbsp;PSP&nbsp;was&nbsp;changed&nbsp;to&nbsp;use&nbsp;a&nbsp;session&nbsp;object&nbsp;present&nbsp;as&lt;BR&gt;req.session.&nbsp;The&nbsp;issue&nbsp;is&nbsp;if&nbsp;req.session&nbsp;exists&nbsp;but&nbsp;the&nbsp;session&nbsp;object&lt;BR&gt;is&nbsp;not&nbsp;used&nbsp;in&nbsp;the&nbsp;PSP&nbsp;page,&nbsp;should&nbsp;the&nbsp;PSP&nbsp;code&nbsp;be&nbsp;saving&nbsp;the&nbsp;session&lt;BR&gt;to&nbsp;have&nbsp;the&nbsp;last&nbsp;accessed&nbsp;time&nbsp;updated.&lt;BR&gt;&lt;BR&gt;Thus,&nbsp;the&nbsp;code&nbsp;in&nbsp;PSP&nbsp;code&nbsp;should&nbsp;perhaps&nbsp;instead&nbsp;of&nbsp;saying:&lt;BR&gt;&lt;BR&gt;#&nbsp;the&nbsp;mere&nbsp;instantiation&nbsp;of&nbsp;a&nbsp;session&nbsp;changes&nbsp;it&lt;BR&gt;#&nbsp;(access&nbsp;time),&nbsp;so<br>
&nbsp;it&nbsp;*always*&nbsp;has&nbsp;to&nbsp;be&nbsp;saved&lt;BR&gt;if&nbsp;hasattr(req,&nbsp;'session'):&lt;BR&gt;req.session.save()&lt;BR&gt;&lt;BR&gt;perhaps&nbsp;say:&lt;BR&gt;&lt;BR&gt;#&nbsp;the&nbsp;mere&nbsp;instantiation&nbsp;of&nbsp;a&nbsp;session&nbsp;changes&nbsp;it&lt;BR&gt;#&nbsp;(access&nbsp;time),&nbsp;so&nbsp;it&nbsp;*always*&nbsp;has&nbsp;to&nbsp;be&nbsp;saved&lt;BR&gt;if&nbsp;&quot;session&quot;&nbsp;in&nbsp;code.co_names&nbsp;and&nbsp;hasattr(req,&nbsp;'session'):&lt;BR&gt;req.session.save()&lt;BR&gt;&lt;BR&gt;In&nbsp;summary,&nbsp;it&nbsp;is&nbsp;a&nbsp;feature&nbsp;of&nbsp;PSP&nbsp;that&nbsp;if&nbsp;a&nbsp;session&nbsp;object&nbsp;is&nbsp;used&nbsp;in&lt;BR&gt;a&nbsp;PSP&nbsp;page&nbsp;that&nbsp;the&nbsp;session&nbsp;is&nbsp;always&nbsp;saved&nbsp;automatically.&nbsp;The&lt;BR&gt;question&nbsp;is&nbsp;whether&nbsp;it&nbsp;should&nbsp;be&nbsp;saving&nbsp;it&nbsp;when&nbsp;the&nbsp;session&nbsp;was&lt;BR&gt;created&nbsp;before&nbsp;PSP&nbsp;was&nbsp;invoked&nbsp;and&nbsp;the&nbsp;session&nbsp;isn't&nbsp;used&nbsp;in&nbsp;the&nbsp;PSP&lt;BR&gt;page.&nbsp;Problem&nbsp;is&nbsp;that&nbsp;changing&nbsp;the&nbsp;behaviour&nbsp;may&nbsp;be&nbsp;too&nbsp;late&nbsp;now&nbsp;that&lt;BR&gt;it&nbsp;is&nbsp;working&nbsp;this&nbsp;way.&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;Graham&lt;BR&gt;&lt;/BLOCKQUOTE&gt;&lt;BR&gt;
</tt>
