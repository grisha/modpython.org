<tt>
Hi&lt;br&gt;&lt;br&gt;I&amp;#39;ve&nbsp;been&nbsp;struggling&nbsp;to&nbsp;implement&nbsp;form&nbsp;based&nbsp;user&nbsp;authentication&nbsp;for&nbsp;some&nbsp;time&nbsp;now&nbsp;so&nbsp;I&amp;#39;m&nbsp;posting&nbsp;my&nbsp;progress&nbsp;in&nbsp;the&nbsp;hope&nbsp;that&nbsp;&lt;br&gt;more&nbsp;experienced&nbsp;members&nbsp;will&nbsp;comment&nbsp;and&nbsp;any&nbsp;new&nbsp;starters&nbsp;will&nbsp;save&nbsp;themselves&nbsp;some&nbsp;time.&lt;br&gt;<br>
&lt;br&gt;A&nbsp;big&nbsp;thanks&nbsp;to&nbsp;John&nbsp;Calixto&nbsp;for&nbsp;getting&nbsp;back&nbsp;to&nbsp;me&nbsp;and&nbsp;suggesting&nbsp;&amp;quot;AuthType&nbsp;wgtiauth&amp;quot;&nbsp;and&nbsp;&amp;quot;Require&nbsp;wgti-user&amp;quot;&nbsp;&lt;br&gt;&lt;br&gt;&lt;br&gt;The&nbsp;example&nbsp;works&nbsp;as&nbsp;follows:&lt;br&gt;-&nbsp;Attempt&nbsp;to&nbsp;access&nbsp;the&nbsp;protected&nbsp;area&nbsp;gets&nbsp;intercepted&nbsp;by&nbsp;authenhandler,&nbsp;if&nbsp;not&nbsp;authorized&nbsp;redirect&nbsp;to&nbsp;login,&nbsp;if&nbsp;login&nbsp;successful,&nbsp;continue&nbsp;to&nbsp;original&nbsp;url.&lt;br&gt;<br>
-&nbsp;Uses&nbsp;DbmSessions&nbsp;(nice&nbsp;when&nbsp;used&nbsp;with&nbsp;a&nbsp;load&nbsp;balancer&nbsp;and&nbsp;RedHat&nbsp;GFS)&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;Cheers&lt;br&gt;Bruce&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;My&nbsp;setup:&lt;br&gt;&lt;br&gt;             &nbsp;OS:&nbsp;Linux&nbsp;Fedora&nbsp;Core&nbsp;8&lt;br&gt;      &nbsp;Apache:&nbsp;Apache/2.2.6&nbsp;(Fedora)&lt;br&gt;<br>
&lt;span&nbsp;class=&quot;il&quot;&gt;mod_python&lt;/span&gt;:&nbsp;3.3.1&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;b&gt;**&nbsp;add&nbsp;an&nbsp;entry&nbsp;in&nbsp;your&nbsp;hosts&nbsp;file:&lt;/b&gt;&lt;br&gt;127.0.0.1&nbsp;     &nbsp;&lt;a&nbsp;href=&quot;http://www.mysite.com/&quot;&nbsp;target=&quot;_blank&quot;&gt;www.mysite.com&lt;/a&gt; &nbsp;&lt;a&nbsp;href=&quot;http://mysite.com/&quot;&nbsp;target=&quot;_blank&quot;&gt;mysite.com&lt;/a&gt;&nbsp;mysite&lt;br&gt;<br>
&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;b&gt;/etc/httpd/conf/httpd.conf&nbsp;setup&nbsp;(virtual&nbsp;host):&lt;br&gt;&lt;/b&gt;NameVirtualHost&nbsp;*:80&lt;br&gt;&amp;lt;VirtualHost&nbsp;*:80&amp;gt;&lt;br&gt;       &nbsp;ServerName&nbsp;&lt;a&nbsp;href=&quot;http://www.mysite.com&quot;&gt;www.mysite.com&lt;/a&gt;&lt;br&gt;       &nbsp;ServerAlias&nbsp;mysite&lt;br&gt;<br>
       &nbsp;ServerAdmin&nbsp;webmaster@mysite&lt;br&gt;       &nbsp;DocumentRoot&nbsp;/var/www/html/mysite&lt;br&gt;&lt;br&gt;       &nbsp;&amp;lt;Directory&nbsp;/&amp;gt;&lt;br&gt;               &nbsp;SetHandler&nbsp;mod_python&lt;br&gt;               &nbsp;AddHandler&nbsp;mod_python.publisher&nbsp;.py&lt;br&gt;               &nbsp;PythonHandler&nbsp;mod_python.publisher&lt;br&gt;<br>
               &nbsp;PythonOption&nbsp;mod_python.dbm_session.database_filename&nbsp;&amp;quot;/var/www/html/mysite/dbm/mp_sess.dbm&amp;quot;&lt;br&gt;               &nbsp;PythonOption&nbsp;ApplicationPath&nbsp;&amp;quot;/&amp;quot;&lt;br&gt;               &nbsp;PythonPath&nbsp;&amp;quot;sys.path+[&amp;#39;/var/www/html/mysite/modules&amp;#39;]&amp;quot;&lt;br&gt;<br>
               &nbsp;PythonDebug&nbsp;On&lt;br&gt;       &nbsp;&amp;lt;/Directory&amp;gt;&lt;br&gt;&lt;br&gt;       &nbsp;&amp;lt;Directory&nbsp;/var/www/html/mysite/members&amp;gt;&lt;br&gt;               &nbsp;AuthType&nbsp;wgtiauth&lt;br&gt;               &nbsp;AuthName&nbsp;&amp;quot;members&amp;quot;&lt;br&gt;               &nbsp;Require&nbsp;wgti-user&lt;br&gt;<br>
               &nbsp;PythonAuthenHandler&nbsp;authsession&lt;br&gt;               &nbsp;PythonAuthzHandler&nbsp;authsession&lt;br&gt;       &nbsp;&amp;lt;/Directory&amp;gt;&lt;br&gt;&lt;br&gt;       &nbsp;ErrorLog&nbsp;/var/log/httpd/error.log&lt;br&gt;       &nbsp;CustomLog&nbsp;/var/log/httpd/access.log&nbsp;combined&lt;br&gt;<br>
&lt;br&gt;       &nbsp;LogLevel&nbsp;debug&lt;br&gt;       &nbsp;ServerSignature&nbsp;On&lt;br&gt;       &nbsp;&lt;br&gt;&amp;lt;/VirtualHost&amp;gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;[root@core&nbsp;mysite]#&nbsp;pwd&lt;br&gt;/var/www/html/mysite&lt;br&gt;[root@core&nbsp;mysite]#&nbsp;find&nbsp;.&nbsp;-ls&lt;br&gt;6069239   &nbsp;4&nbsp;drwxr-x---  &nbsp;6&nbsp;apache  &nbsp;apache      &nbsp;4096&nbsp;Mar&nbsp;29&nbsp;00:37&nbsp;.&lt;br&gt;<br>
6069464   &nbsp;4&nbsp;drwxr-x---  &nbsp;2&nbsp;apache  &nbsp;apache      &nbsp;4096&nbsp;Mar&nbsp;29&nbsp;11:43&nbsp;./html&lt;br&gt;6069466   &nbsp;4&nbsp;-rwxr-x---  &nbsp;1&nbsp;apache  &nbsp;apache       &nbsp;236&nbsp;Mar&nbsp;26&nbsp;22:35&nbsp;./html/login.html&lt;br&gt;6069467   &nbsp;4&nbsp;-rwxr-x---  &nbsp;1&nbsp;apache  &nbsp;apache       &nbsp;213&nbsp;Mar&nbsp;28&nbsp;10:40&nbsp;./html/indexWelcome.html&lt;br&gt;<br>
6069478   &nbsp;4&nbsp;-rwxr-x---  &nbsp;1&nbsp;apache  &nbsp;apache       &nbsp;448&nbsp;Mar&nbsp;29&nbsp;00:37&nbsp;./index.py&lt;br&gt;6069469   &nbsp;4&nbsp;drwxr-x---  &nbsp;2&nbsp;apache  &nbsp;apache      &nbsp;4096&nbsp;Mar&nbsp;29&nbsp;11:43&nbsp;./dbm&lt;br&gt;6069195  &nbsp;12&nbsp;-rw-r-----  &nbsp;1&nbsp;apache  &nbsp;apache     &nbsp;12288&nbsp;Mar&nbsp;29&nbsp;11:44&nbsp;./dbm/mp_sess.dbm&lt;br&gt;<br>
6069471   &nbsp;4&nbsp;drwxr-x---  &nbsp;3&nbsp;apache  &nbsp;apache      &nbsp;4096&nbsp;Mar&nbsp;28&nbsp;10:57&nbsp;./members&lt;br&gt;6069472   &nbsp;4&nbsp;drwxr-x---  &nbsp;2&nbsp;apache  &nbsp;apache      &nbsp;4096&nbsp;Mar&nbsp;28&nbsp;10:56&nbsp;./members/html&lt;br&gt;6069473   &nbsp;4&nbsp;-rwxr-x---  &nbsp;1&nbsp;apache  &nbsp;apache       &nbsp;159&nbsp;Mar&nbsp;28&nbsp;10:17&nbsp;./members/html/membersWelcome.html&lt;br&gt;<br>
6069474   &nbsp;4&nbsp;-rwxr-x---  &nbsp;1&nbsp;apache  &nbsp;apache       &nbsp;158&nbsp;Mar&nbsp;28&nbsp;10:56&nbsp;./members/html/membersForum.html&lt;br&gt;6069475   &nbsp;4&nbsp;-rwxr-x---  &nbsp;1&nbsp;apache  &nbsp;apache       &nbsp;569&nbsp;Mar&nbsp;28&nbsp;10:57&nbsp;./members/index.py&lt;br&gt;6069476   &nbsp;4&nbsp;drwxr-x---  &nbsp;2&nbsp;apache  &nbsp;apache      &nbsp;4096&nbsp;Mar&nbsp;29&nbsp;11:40&nbsp;./modules&lt;br&gt;<br>
6069194   &nbsp;4&nbsp;-rwxr-x---  &nbsp;1&nbsp;apache  &nbsp;apache      &nbsp;1173&nbsp;Mar&nbsp;29&nbsp;03:10&nbsp;./modules/funcs.pyc&lt;br&gt;6069196   &nbsp;4&nbsp;-rwxr-x---  &nbsp;1&nbsp;apache  &nbsp;apache      &nbsp;1019&nbsp;Mar&nbsp;29&nbsp;03:10&nbsp;./modules/authsession.pyc&lt;br&gt;6069497   &nbsp;4&nbsp;-rwxr-x---  &nbsp;1&nbsp;apache  &nbsp;apache       &nbsp;588&nbsp;Mar&nbsp;29&nbsp;03:09&nbsp;./modules/authsession.py&lt;br&gt;<br>
6069498   &nbsp;4&nbsp;-rwxr-x---  &nbsp;1&nbsp;apache  &nbsp;apache       &nbsp;804&nbsp;Mar&nbsp;29&nbsp;03:09&nbsp;./modules/funcs.py&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;-------------------------------------&lt;br&gt;./html/login.html&lt;br&gt;-------------------------------------&lt;br&gt;&amp;lt;html&amp;gt;&lt;br&gt;<br>
&amp;lt;body&amp;gt;&lt;br&gt;       &nbsp;Login&nbsp;&amp;lt;br&amp;gt;&lt;br&gt;       &nbsp;&amp;lt;form&nbsp;action=authenticate&nbsp;method=post&amp;gt;&lt;br&gt;       &nbsp;&amp;lt;input&nbsp;name=user&nbsp;type=text&amp;gt;&amp;lt;br&amp;gt;&lt;br&gt;       &nbsp;&amp;lt;input&nbsp;name=password&nbsp;type=password&amp;gt;&amp;lt;br&amp;gt;&lt;br&gt;       &nbsp;&amp;lt;input&nbsp;name=submit&nbsp;type=submit&nbsp;value=Login&amp;gt;&lt;br&gt;<br>
&amp;lt;/body&amp;gt;&lt;br&gt;&amp;lt;/html&amp;gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;-------------------------------------&lt;br&gt;./html/indexWelcome.html&lt;br&gt;-------------------------------------&lt;br&gt;&amp;lt;html&amp;gt;&lt;br&gt;&amp;lt;body&amp;gt;&lt;br&gt;       &nbsp;index&lt;br&gt;               &nbsp;&amp;lt;br&amp;gt;&lt;br&gt;<br>
       &nbsp;source&nbsp;address:&nbsp;%s&nbsp;&lt;br&gt;               &nbsp;&amp;lt;br&amp;gt;&lt;br&gt;               &nbsp;&amp;lt;br&amp;gt;&lt;br&gt;               &nbsp;&amp;lt;a&nbsp;href=&lt;a&nbsp;href=&quot;http://mysite/members&quot;&gt;http://mysite/members&lt;/a&gt;&amp;gt;members&amp;lt;/a&amp;gt;&lt;br&gt;               &nbsp;&amp;lt;br&amp;gt;&lt;br&gt;<br>
               &nbsp;&amp;lt;br&amp;gt;&lt;br&gt;               &nbsp;&amp;lt;a&nbsp;href=/login&amp;gt;login&amp;lt;/a&amp;gt;&lt;br&gt;               &nbsp;&amp;lt;br&amp;gt;&lt;br&gt;               &nbsp;&amp;lt;a&nbsp;href=logout&amp;gt;logout&amp;lt;/a&amp;gt;&lt;br&gt;&amp;lt;/body&amp;gt;&lt;br&gt;&amp;lt;/html&amp;gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;-------------------------------------&lt;br&gt;<br>
./index.py&lt;br&gt;-------------------------------------&lt;br&gt;from&nbsp;funcs&nbsp;import&nbsp;*&lt;br&gt;from&nbsp;mod_python&nbsp;import&nbsp;util&lt;br&gt;from&nbsp;mod_python&nbsp;import&nbsp;Cookie&lt;br&gt;from&nbsp;mod_python&nbsp;import&nbsp;apache&lt;br&gt;from&nbsp;mod_python&nbsp;import&nbsp;Session&lt;br&gt;&lt;br&gt;def&nbsp;index(req):&lt;br&gt;<br>
       &nbsp;util.redirect(req,&amp;quot;&lt;a&nbsp;href=&quot;http://mysite/welcome&quot;&gt;http://mysite/welcome&lt;/a&gt;&amp;quot;)&lt;br&gt;&lt;br&gt;def&nbsp;welcome(req):&lt;br&gt;       &nbsp;f&nbsp;=&nbsp;open(&amp;quot;/var/www/html/mysite/html/indexWelcome.html&amp;quot;)&lt;br&gt;       &nbsp;indexWelcome&nbsp;=&nbsp;f.read()&lt;br&gt;<br>
       &nbsp;return&nbsp;indexWelcome&nbsp;%&nbsp;req.connection.remote_ip&lt;br&gt;&lt;br&gt;def&nbsp;login(req):&lt;br&gt;       &nbsp;f&nbsp;=&nbsp;open(&amp;quot;/var/www/html/mysite/html/login.html&amp;quot;)&lt;br&gt;       &nbsp;login&nbsp;=&nbsp;f.read()&lt;br&gt;       &nbsp;return&nbsp;login&lt;br&gt;&lt;br&gt;&lt;br&gt;-------------------------------------&lt;br&gt;<br>
./members/html/membersWelcome.html&lt;br&gt;-------------------------------------&lt;br&gt;&amp;lt;html&amp;gt;&lt;br&gt;&amp;lt;body&amp;gt;&lt;br&gt;       &nbsp;members&lt;br&gt;               &nbsp;&amp;lt;br&amp;gt;&lt;br&gt;       &nbsp;source&nbsp;address:&nbsp;%s&nbsp;&lt;br&gt;               &nbsp;&amp;lt;br&amp;gt;&lt;br&gt;<br>
               &nbsp;&amp;lt;br&amp;gt;&lt;br&gt;               &nbsp;&amp;lt;a&nbsp;href=/welcome&amp;gt;Home&amp;lt;/a&amp;gt;&lt;br&gt;               &nbsp;&amp;lt;br&amp;gt;&lt;br&gt;               &nbsp;&amp;lt;a&nbsp;href=/logout&amp;gt;Logout&amp;lt;/a&amp;gt;&lt;br&gt;&amp;lt;/body&amp;gt;&lt;br&gt;&amp;lt;/html&amp;gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;-------------------------------------&lt;br&gt;<br>
./members/html/membersForum.html&lt;br&gt;-------------------------------------&lt;br&gt;&amp;lt;html&amp;gt;&lt;br&gt;&amp;lt;body&amp;gt;&lt;br&gt;       &nbsp;forum:&lt;br&gt;               &nbsp;&amp;lt;br&amp;gt;&lt;br&gt;       &nbsp;source&nbsp;address:&nbsp;%s&nbsp;&lt;br&gt;               &nbsp;&amp;lt;br&amp;gt;&lt;br&gt;               &nbsp;&amp;lt;br&amp;gt;&lt;br&gt;<br>
               &nbsp;&amp;lt;a&nbsp;href=/welcome&amp;gt;Home&amp;lt;/a&amp;gt;&lt;br&gt;               &nbsp;&amp;lt;br&amp;gt;&lt;br&gt;               &nbsp;&amp;lt;a&nbsp;href=/logout&amp;gt;Logout&amp;lt;/a&amp;gt;&lt;br&gt;&amp;lt;/body&amp;gt;&lt;br&gt;&amp;lt;/html&amp;gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;-------------------------------------&lt;br&gt;<br>
./members/index.py&lt;br&gt;-------------------------------------&lt;br&gt;from&nbsp;funcs&nbsp;import&nbsp;*&lt;br&gt;from&nbsp;mod_python&nbsp;import&nbsp;util&lt;br&gt;from&nbsp;mod_python&nbsp;import&nbsp;apache&lt;br&gt;from&nbsp;mod_python&nbsp;import&nbsp;Cookie&lt;br&gt;from&nbsp;mod_python&nbsp;import&nbsp;Session&lt;br&gt;&lt;br&gt;<br>
def&nbsp;index(req):&lt;br&gt;       &nbsp;util.redirect(req,&amp;quot;&lt;a&nbsp;href=&quot;http://mysite/members/welcome&quot;&gt;http://mysite/members/welcome&lt;/a&gt;&amp;quot;)&lt;br&gt;&lt;br&gt;&lt;br&gt;def&nbsp;welcome(req):&lt;br&gt;       &nbsp;f&nbsp;=&nbsp;open(&amp;quot;/var/www/html/mysite/members/html/membersWelcome.html&amp;quot;)&lt;br&gt;<br>
       &nbsp;membersWelcome&nbsp;=&nbsp;f.read()&lt;br&gt;       &nbsp;return&nbsp;membersWelcome&nbsp;%&nbsp;req.connection.remote_ip&lt;br&gt;&lt;br&gt;def&nbsp;forum(req):&lt;br&gt;       &nbsp;f&nbsp;=&nbsp;open(&amp;quot;/var/www/html/mysite/members/html/membersForum.html&amp;quot;)&lt;br&gt;       &nbsp;membersForum&nbsp;=&nbsp;f.read()&lt;br&gt;<br>
       &nbsp;return&nbsp;membersForum&nbsp;%&nbsp;req.connection.remote_ip&lt;br&gt;&lt;br&gt;&lt;br&gt;-------------------------------------&lt;br&gt;./modules/authsession.py&lt;br&gt;-------------------------------------&lt;br&gt;from&nbsp;mod_python&nbsp;import&nbsp;util&lt;br&gt;from&nbsp;mod_python&nbsp;import&nbsp;apache&lt;br&gt;<br>
from&nbsp;mod_python&nbsp;import&nbsp;Session&lt;br&gt;&lt;br&gt;&lt;br&gt;def&nbsp;authenhandler(req):&lt;br&gt;       &nbsp;req.user&nbsp;=&nbsp;&amp;quot;nobody&amp;quot;&lt;br&gt;       &nbsp;req.session&nbsp;=&nbsp;Session.DbmSession(req)&lt;br&gt;&lt;br&gt;       &nbsp;if&nbsp;req.session.is_new():&lt;br&gt;               &nbsp;req.session[&amp;#39;referer&amp;#39;]&nbsp;=&nbsp;&amp;quot;&lt;a&nbsp;href=&quot;http://mysite&quot;&gt;http://mysite&lt;/a&gt;&amp;quot;&nbsp;+&nbsp;req.unparsed_uri&lt;br&gt;<br>
               &nbsp;req.session.save()&lt;br&gt;               &nbsp;util.redirect(req,&amp;quot;&lt;a&nbsp;href=&quot;http://mysite/login&quot;&gt;http://mysite/login&lt;/a&gt;&amp;quot;)&lt;br&gt;&lt;br&gt;       &nbsp;if&nbsp;req.session.has_key(&amp;#39;authstatus&amp;#39;)&nbsp;and&nbsp;req.session[&amp;#39;authstatus&amp;#39;]&nbsp;==&nbsp;&amp;quot;authenticated&amp;quot;:&lt;br&gt;<br>
               &nbsp;return&nbsp;apache.OK&nbsp;&lt;br&gt;&lt;br&gt;       &nbsp;return&nbsp;apache.HTTP_UNAUTHORIZED&lt;br&gt;&lt;br&gt;&lt;br&gt;def&nbsp;authzhandler(req):&lt;br&gt;       &nbsp;if&nbsp;req.user:&lt;br&gt;               &nbsp;return&nbsp;apache.OK&lt;br&gt;&lt;br&gt;       &nbsp;return&nbsp;apache.HTTP_UNAUTHORIZED&lt;br&gt;<br>
&lt;br&gt;&lt;br&gt;-------------------------------------&lt;br&gt;./modules/funcs.py&lt;br&gt;-------------------------------------&lt;br&gt;from&nbsp;mod_python&nbsp;import&nbsp;util&lt;br&gt;from&nbsp;mod_python&nbsp;import&nbsp;apache&lt;br&gt;from&nbsp;mod_python&nbsp;import&nbsp;Session&lt;br&gt;&lt;br&gt;def&nbsp;authenticate(req):&lt;br&gt;<br>
&lt;br&gt;       &nbsp;req.session&nbsp;=&nbsp;Session.DbmSession(req)&lt;br&gt;       &nbsp;if&nbsp;req.session.is_new():&lt;br&gt;               &nbsp;req.session[&amp;#39;referer&amp;#39;]&nbsp;=&nbsp;&amp;quot;&lt;a&nbsp;href=&quot;http://mysite/welcome&quot;&gt;http://mysite/welcome&lt;/a&gt;&amp;quot;&nbsp;&lt;br&gt;&lt;br&gt;       &nbsp;referer&nbsp;=&nbsp;req.session[&amp;#39;referer&amp;#39;]&lt;br&gt;<br>
&lt;br&gt;       &nbsp;user&nbsp;=&nbsp;req.form[&amp;#39;user&amp;#39;]&lt;br&gt;       &nbsp;password&nbsp;=&nbsp;req.form[&amp;#39;password&amp;#39;]&lt;br&gt;&lt;br&gt;       &nbsp;if&nbsp;user&nbsp;==&nbsp;&amp;quot;demo&amp;quot;&nbsp;and&nbsp;password&nbsp;==&nbsp;&amp;quot;demo&amp;quot;:&lt;br&gt;               &nbsp;req.user&nbsp;=&nbsp;user&lt;br&gt;               &nbsp;req.session[&amp;#39;user&amp;#39;]&nbsp;=&nbsp;user&lt;br&gt;<br>
               &nbsp;req.session[&amp;#39;authstatus&amp;#39;]&nbsp;=&nbsp;&amp;#39;authenticated&amp;#39;&lt;br&gt;               &nbsp;req.session.save()&lt;br&gt;               &nbsp;util.redirect(req,referer)&lt;br&gt;       &nbsp;else:&lt;br&gt;               &nbsp;req.session.delete()&lt;br&gt;               &nbsp;req.session&nbsp;=&nbsp;Session.DbmSession(req)&lt;br&gt;<br>
               &nbsp;referer&nbsp;=&nbsp;req.session[&amp;#39;referer&amp;#39;]&lt;br&gt;               &nbsp;req.session.save()&lt;br&gt;               &nbsp;util.redirect(req,&amp;quot;&lt;a&nbsp;href=&quot;http://mysite/login&quot;&gt;http://mysite/login&lt;/a&gt;&amp;quot;)&lt;br&gt;&lt;br&gt;def&nbsp;logout(req):&lt;br&gt;<br>
       &nbsp;req.session&nbsp;=&nbsp;Session.DbmSession(req)&lt;br&gt;       &nbsp;req.session.delete()&lt;br&gt;       &nbsp;util.redirect(req,&amp;quot;&lt;a&nbsp;href=&quot;http://mysite/welcome&quot;&gt;http://mysite/welcome&lt;/a&gt;&amp;quot;)&lt;br&gt;&lt;br&gt;&lt;br&gt;<br>

</tt>
