<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.0&nbsp;Transitional//EN&quot;&gt;<br>
&lt;HTML&gt;&lt;HEAD&gt;<br>
&lt;META&nbsp;http-equiv=Content-Type&nbsp;content=&quot;text/html;&nbsp;charset=iso-8859-1&quot;&gt;<br>
&lt;META&nbsp;content=&quot;MSHTML&nbsp;6.00.2800.1561&quot;&nbsp;name=GENERATOR&gt;<br>
&lt;STYLE&gt;&lt;/STYLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&nbsp;bgColor=#ffffff&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;What&nbsp;is&nbsp;the&nbsp;way&nbsp;to&nbsp;use&nbsp;mod_python.utils&nbsp;to&amp;nbsp;get&nbsp;<br>
a&nbsp;file&nbsp;object&nbsp;create&nbsp;and&nbsp;uploaded&nbsp;from&nbsp;an&nbsp;html&nbsp;form?&nbsp;I&nbsp;can't&nbsp;quite&nbsp;get&nbsp;my&nbsp;head&nbsp;<br>
around&nbsp;it&nbsp;and&nbsp;I&nbsp;can't&nbsp;find&nbsp;any&nbsp;useful&nbsp;snippets&nbsp;of&nbsp;code&nbsp;to&nbsp;copy.&nbsp;I'd&nbsp;appreciate&nbsp;<br>
any&nbsp;help,&nbsp;especially&nbsp;an&nbsp;example.&nbsp;Thanks!&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;Say&nbsp;I&nbsp;have&nbsp;an&nbsp;html&nbsp;form&nbsp;like&nbsp;this:&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&amp;nbsp;&quot;&quot;&quot;&amp;lt;form&nbsp;action=&quot;upload&quot;&nbsp;method=&quot;POST&quot;&nbsp;<br>
enctype=&quot;multipart/form-data&quot;&amp;gt;&lt;BR&gt;&amp;nbsp;File&nbsp;name:&nbsp;&amp;lt;input&nbsp;name=&quot;file&quot;&nbsp;<br>
type=&quot;file&quot;&amp;gt;&amp;lt;br&amp;gt;&lt;BR&gt;&amp;nbsp;&amp;lt;input&nbsp;name=&quot;submit&quot;&nbsp;type=&quot;submit&quot;&nbsp;value&nbsp;=&nbsp;<br>
&quot;Send&nbsp;this&nbsp;file&nbsp;to&nbsp;the&nbsp;web&nbsp;<br>
server&quot;&amp;gt;&lt;BR&gt;&amp;nbsp;&amp;lt;/form&amp;gt;&quot;&quot;&quot;&lt;BR&gt;&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;What&nbsp;does&nbsp;upload.py&nbsp;have&nbsp;to&nbsp;do&nbsp;to&nbsp;process&nbsp;the&nbsp;file&nbsp;<br>
whose&nbsp;name&nbsp;is&nbsp;submitted?&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;the&nbsp;only&amp;nbsp;cookbook&nbsp;version&nbsp;I&nbsp;have&nbsp;found&nbsp;is&nbsp;<br>
for&amp;nbsp;&nbsp;regular&nbsp;python&nbsp;in&nbsp;cgi&nbsp;mode:&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;==================&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&amp;nbsp;form&nbsp;=&nbsp;<br>
cgi.FieldStorage()&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;not&nbsp;<br>
form.has_key(form_field):&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;print&nbsp;<br>
HTML_TEMPLATE2%&nbsp;<br>
{'SCRIPT_NAME':os.environ['SCRIPT_NAME']}&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
return&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;fileitem&nbsp;=&nbsp;form[form_field]&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
if&nbsp;not&nbsp;fileitem.file:&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
return&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
fname=os.path.basename(fileitem.filename)&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;print&nbsp;<br>
&quot;fileitem.filename=%s,&amp;lt;br&amp;gt;&nbsp;uploadddir=%s,&amp;lt;br&amp;gt;&nbsp;fout=%s&quot;&nbsp;<br>
\&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;%(fileitem.filename,&nbsp;upload_dir,&nbsp;<br>
os.path.join(upload_dir,&nbsp;fname)&nbsp;)&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
fout&nbsp;=&nbsp;file&nbsp;(os.path.join(upload_dir,&nbsp;fname),&nbsp;'wb')&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;while&nbsp;<br>
1:&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;chunk&nbsp;=&nbsp;<br>
fileitem.file.read(100000)&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;not&nbsp;<br>
chunk:&nbsp;break&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;fout.write&nbsp;<br>
(chunk)&lt;BR&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;fout.close()&lt;BR&gt;===============&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;How&nbsp;do&nbsp;I&nbsp;adapt&nbsp;this&nbsp;to&nbsp;use&nbsp;mod_python&nbsp;FieldStorage&nbsp;<br>
?&nbsp;Especially&nbsp;for&nbsp;early&nbsp;mod_python&nbsp;as&nbsp;the&nbsp;installation&nbsp;I&nbsp;need&nbsp;this&nbsp;for&nbsp;has&nbsp;<br>
version&amp;nbsp;2.7&nbsp;on&nbsp;Apache&nbsp;1.3,&nbsp;debian&nbsp;linux&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&lt;/FONT&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;Dave&nbsp;<br>
Britton&lt;/FONT&gt;&lt;/DIV&gt;&lt;/FONT&gt;&lt;/DIV&gt;&lt;/BODY&gt;&lt;/HTML&gt;<br>

</tt>
