<tt>
&lt;!DOCTYPE&nbsp;html&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.01&nbsp;Transitional//EN&quot;&gt;<br>
&lt;html&gt;<br>
&lt;head&gt;<br>
&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;charset=ISO-8859-1&quot;&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&nbsp;&nbsp;&lt;title&gt;&lt;/title&gt;<br>
&lt;/head&gt;<br>
&lt;body&nbsp;bgcolor=&quot;#ffffff&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
Josh&nbsp;Goldsmith&nbsp;wrote:<br>
&lt;blockquote&nbsp;cite=&quot;middd11696704111719227a335bd@mail.gmail.com&quot;<br>
&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;Hi&nbsp;all,<br>
<br>
&nbsp;&nbsp;I'm&nbsp;sure&nbsp;that&nbsp;this&nbsp;is&nbsp;a&nbsp;very&nbsp;common&nbsp;question&nbsp;(though&nbsp;after&nbsp;looking<br>
thru&nbsp;a&nbsp;few&nbsp;months&nbsp;of&nbsp;the&nbsp;archives&nbsp;maybe&nbsp;not)&nbsp;but&nbsp;is&nbsp;there&nbsp;an&nbsp;easy&nbsp;way<br>
to&nbsp;convert&nbsp;a&nbsp;cgi&nbsp;written&nbsp;around&nbsp;the&nbsp;cgi&nbsp;module&nbsp;to&nbsp;work&nbsp;in&nbsp;&nbsp;mod_python?<br>
<br>
&nbsp;I've&nbsp;spent&nbsp;the&nbsp;last&nbsp;couple&nbsp;of&nbsp;weeks&nbsp;teaching&nbsp;myself&nbsp;python&nbsp;(and<br>
MySQL)&nbsp;while&nbsp;writing&nbsp;a&nbsp;cgi&nbsp;and&nbsp;it&nbsp;is&nbsp;running&nbsp;slower&nbsp;than&nbsp;I'd&nbsp;like&nbsp;(15<br>
tps&nbsp;on&nbsp;a&nbsp;1ghz&nbsp;Athlon).&nbsp;&nbsp;In&nbsp;looking&nbsp;to&nbsp;speed&nbsp;it&nbsp;up,&nbsp;I&nbsp;observed&nbsp;that<br>
starting&nbsp;Python&nbsp;was&nbsp;where&nbsp;most&nbsp;of&nbsp;the&nbsp;delay&nbsp;came&nbsp;from.&nbsp;&nbsp;With&nbsp;further<br>
poking,&nbsp;I&nbsp;found&nbsp;mod_python&nbsp;and&nbsp;have&nbsp;been&nbsp;poking&nbsp;at&nbsp;it&nbsp;to&nbsp;get&nbsp;a&nbsp;feel<br>
for&nbsp;it.&nbsp;&nbsp;Unfortunately&nbsp;I&nbsp;have&nbsp;not&nbsp;found&nbsp;nearly&nbsp;enough&nbsp;examples&nbsp;to<br>
fully&nbsp;get&nbsp;it.<br>
<br>
&nbsp;&nbsp;Any&nbsp;pointers,&nbsp;links,&nbsp;or&nbsp;other&nbsp;help&nbsp;would&nbsp;be&nbsp;appreciated!<br>
<br>
-Josh<br>
<br>
PS.&nbsp;&nbsp;Using&nbsp;Python&nbsp;2.3,&nbsp;Apache&nbsp;2.0.52,&nbsp;and&nbsp;mod_python&nbsp;3.1.3<br>
_______________________________________________<br>
Mod_python&nbsp;mailing&nbsp;list<br>
&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:Mod_python@modpython.org&quot;&gt;Mod_python@modpython.org&lt;/a&gt;<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://mailman.modpython.org/mailman/listinfo/mod_python&quot;&gt;http://mailman.modpython.org/mailman/listinfo/mod_python&lt;/a&gt;<br>
<br>
&nbsp;&nbsp;&lt;/pre&gt;<br>
&lt;/blockquote&gt;<br>
It's&nbsp;isn't&nbsp;much&nbsp;trouble&nbsp;converting&nbsp;a&nbsp;CGI&nbsp;to&nbsp;a&nbsp;mod_python&nbsp;handler,&nbsp;the<br>
ten&nbsp;points&nbsp;you&nbsp;need&nbsp;to&nbsp;know:&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;1.&nbsp;At&nbsp;the&nbsp;top:&nbsp;from&nbsp;mod_python&nbsp;import&nbsp;apache,&nbsp;util&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;2.&nbsp;Encapsulate&nbsp;all&nbsp;your&nbsp;processing&nbsp;in&nbsp;functions,&nbsp;no&nbsp;inline-script<br>
stuff&nbsp;should&nbsp;do&nbsp;request&nbsp;processing.&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;3.&nbsp;Your&nbsp;program's&nbsp;entry&nbsp;point&nbsp;is&nbsp;a&nbsp;function&nbsp;called&nbsp;&quot;handler&quot;&nbsp;which<br>
takes&nbsp;a&nbsp;single&nbsp;parameter&nbsp;(the&nbsp;request&nbsp;object).&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;4.&nbsp;Some&nbsp;equivalencies:&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&nbsp;environ[&quot;QUERY_STRING&quot;]&amp;nbsp;&amp;nbsp;&nbsp;--&amp;gt;&nbsp;request.args&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&nbsp;environ[&quot;PATH_INFO&quot;]&amp;nbsp;&amp;nbsp;&nbsp;--&amp;gt;&nbsp;request.path_info&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&nbsp;environ[&quot;HTTP_METHOD&quot;]&nbsp;--&amp;gt;&nbsp;request.method&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&nbsp;environ[&quot;CONTENT_LENGTH&quot;]&nbsp;--&amp;gt;&nbsp;request.content_length&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;5.&nbsp;For&nbsp;posted&nbsp;data,&nbsp;instead&nbsp;of&nbsp;stdin.read()&nbsp;do&nbsp;request.read()&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;6.&nbsp;To&nbsp;return&nbsp;data,&nbsp;instead&nbsp;of&nbsp;print&nbsp;or&nbsp;stdout.write(),&nbsp;do<br>
request.write()&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;7.&nbsp;Instead&nbsp;of&nbsp;cgi.FieldStorage(stdin)&nbsp;use&nbsp;util.FieldStorage(request)&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;8.&nbsp;Use&nbsp;request.content_type&nbsp;=&nbsp;&quot;content/type&quot;&nbsp;instead&nbsp;of&nbsp;printing&nbsp;it<br>
before&nbsp;the&nbsp;content.&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;9.&nbsp;Instead&nbsp;of&nbsp;printing&nbsp;out&nbsp;headers,&nbsp;use&nbsp;request.headers_out[&quot;name&quot;]<br>
=&nbsp;&quot;value&quot;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;10.&nbsp;Instead&nbsp;of&nbsp;looking&nbsp;for&nbsp;environ[&quot;HTTP_&amp;lt;header-name&amp;gt;&quot;],&nbsp;use<br>
request.headers_in[&quot;header-name&quot;]&lt;br&gt;<br>
&lt;br&gt;<br>
Or,&nbsp;you&nbsp;could&nbsp;also&nbsp;use&nbsp;mod_python's&nbsp;cgi&nbsp;emulator&nbsp;and&nbsp;not&nbsp;have&nbsp;to&nbsp;do&nbsp;all<br>
this,&nbsp;but&nbsp;since&nbsp;you&nbsp;talk&nbsp;about&nbsp;maximizing&nbsp;performance,&nbsp;using&nbsp;a&nbsp;handler<br>
function&nbsp;is&nbsp;about&nbsp;5&nbsp;to&nbsp;10&nbsp;times&nbsp;quicker&nbsp;than&nbsp;using&nbsp;mod_python's&nbsp;builtin<br>
cgi&nbsp;emulator.&lt;br&gt;<br>
&lt;br&gt;<br>
Good&nbsp;luck,&nbsp;hope&nbsp;this&nbsp;helps...&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;moz-signature&quot;&gt;--&nbsp;&lt;br&gt;<br>
&lt;span&nbsp;style=&quot;font-size:&nbsp;9pt;&nbsp;text-align:&nbsp;center;&nbsp;color:&nbsp;black;&quot;&gt;&lt;span<br>
&nbsp;style=&quot;font-weight:&nbsp;bold;&nbsp;font-size:&nbsp;10pt;&quot;&gt;&nbsp;Gustavo&nbsp;C&amp;oacute;rdova&nbsp;Avila&nbsp;&lt;a<br>
&nbsp;href=&quot;mailto:gustavo.cordova@q-voz.com&quot;<br>
&nbsp;style=&quot;text-decoration:&nbsp;none;&nbsp;color:&nbsp;black;&quot;&gt;<br>
&amp;lt;gustavo.cordova@q-voz.com&amp;gt;&nbsp;&lt;/a&gt;<br>
&lt;/span&gt;&lt;br&gt;<br>
&lt;b&gt;Tel:&lt;/b&gt;&nbsp;+52&nbsp;(81)&nbsp;8130-1919&nbsp;ext.&nbsp;127&lt;br&gt;<br>
Integraciones&nbsp;del&nbsp;Norte,&nbsp;S.A.&nbsp;de&nbsp;C.V.&lt;br&gt;<br>
Padua&nbsp;#6047,&nbsp;Colonia&nbsp;Sat&amp;eacute;lite&nbsp;Acueducto&lt;br&gt;<br>
Monterrey,&nbsp;Nuevo&nbsp;Le&amp;oacute;n,&nbsp;M&amp;eacute;xico.&lt;br&gt;<br>
&lt;/span&gt;<br>
&lt;/div&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
