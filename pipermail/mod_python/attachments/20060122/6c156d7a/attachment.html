<tt>
&lt;span&nbsp;class=&quot;gmail_quote&quot;&gt;(I&nbsp;sent&nbsp;this&nbsp;to&nbsp;the&nbsp;pysqlite&nbsp;mail&nbsp;list&nbsp;as&nbsp;well)&lt;/span&gt;&lt;br&gt;&lt;br&gt;I&nbsp;have&nbsp;a&nbsp;problem&nbsp;with&nbsp;using&nbsp;pysqlite2&nbsp;with&nbsp;mod_python&nbsp;(publisher&nbsp;handler).&nbsp;Whenever&nbsp;I&nbsp;use&nbsp;a&nbsp;method&nbsp;from&nbsp;pysqlite2&nbsp;apache&nbsp;segfaults.&nbsp;However,&nbsp;mod_python&nbsp;in&nbsp;itself&nbsp;works&nbsp;perfectly&nbsp;well&nbsp;and&nbsp;executes&nbsp;any&nbsp;python&nbsp;code&nbsp;as&nbsp;it&nbsp;should&nbsp;(except&nbsp;for&nbsp;pysqlite2&nbsp;code)&nbsp;and&nbsp;pysqlite2&nbsp;in&nbsp;itself&nbsp;works&nbsp;also&nbsp;perfectly&nbsp;well&nbsp;unless&nbsp;I&nbsp;use&nbsp;it&nbsp;in&nbsp;combination&nbsp;with&nbsp;mod_python.&nbsp;That&nbsp;is,&nbsp;if&nbsp;<br>
sqlite-code.py&nbsp;contains&nbsp;any&nbsp;pysqlite2&nbsp;code,&nbsp;then&nbsp;running&nbsp;it&nbsp;from&nbsp;the&nbsp;command&nbsp;line&nbsp;by&nbsp;'python&nbsp;sqlite-code.py'&nbsp;produces&nbsp;no&nbsp;errors&nbsp;and&nbsp;does&nbsp;what&nbsp;it&nbsp;supposed&nbsp;to&nbsp;do.&lt;br&gt;&lt;br&gt;The&nbsp;only&nbsp;problem&nbsp;is&nbsp;when&nbsp;sqlite-code.py&nbsp;is&nbsp;accessed&nbsp;through&nbsp;a&nbsp;browser,&nbsp;in&nbsp;this&nbsp;case&nbsp;apache&nbsp;segfaults&nbsp;and&nbsp;the&nbsp;error_log&nbsp;says:<br>
&lt;br&gt;&lt;br&gt;[Sun&nbsp;Jan&nbsp;22&nbsp;15:17:29&nbsp;2006]&nbsp;[notice]&nbsp;child&nbsp;pid&nbsp;3012&nbsp;exit&nbsp;signal&nbsp;Segmentation&nbsp;fault&nbsp;(11)&lt;br&gt;&lt;br&gt;Merely&nbsp;importing&nbsp;the&nbsp;pysqlite2&nbsp;module&nbsp;makes&nbsp;no&nbsp;harm,&nbsp;if&nbsp;sqlite-code.py&nbsp;contains&nbsp;only:&lt;br&gt;&lt;br&gt;from&nbsp;pysqlite2&nbsp;import&nbsp;dbapi2&nbsp;as&nbsp;sqlite<br>
&lt;br&gt;def&nbsp;test(&nbsp;req&nbsp;):&lt;br&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;return&nbsp;&amp;quot;hello&amp;quot;&lt;br&gt;&lt;br&gt;then&nbsp;there&nbsp;will&nbsp;be&nbsp;no&nbsp;segfault&nbsp;and&nbsp;the&nbsp;URL&nbsp;&lt;a&nbsp;href=&quot;http://server/python/sqlite-code/test&quot;&nbsp;target=&quot;_blank&quot;&nbsp;onclick=&quot;return&nbsp;top.js.OpenExtLink(window,event,this)&quot;&gt;<br>
http://server/python/sqlite-code/test&lt;/a&gt;&nbsp;will&nbsp;nicely&nbsp;output&nbsp;&amp;quot;hello&amp;quot;.&nbsp;But&nbsp;if&nbsp;it&nbsp;contains&nbsp;the&nbsp;following:<br>
&lt;br&gt;&lt;br&gt;from&nbsp;pysqlite2&nbsp;import&nbsp;dbapi2&nbsp;as&nbsp;sqlite&lt;br&gt;def&nbsp;test(&nbsp;req&nbsp;):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;con&nbsp;=&nbsp;sqlite.connect(&nbsp;&amp;quot;some.db&amp;quot;&nbsp;)&lt;br&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;con.close()&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&nbsp;&amp;quot;hello&amp;quot;&lt;br&gt;&lt;br&gt;then&nbsp;the&nbsp;segfault&nbsp;occurs.&nbsp;Writing&nbsp;permissions&nbsp;for&nbsp;'<br>
some.db'&nbsp;can&nbsp;not&nbsp;be&nbsp;a&nbsp;problem,&nbsp;every&nbsp;path&nbsp;was&nbsp;chmoded&nbsp;to&nbsp;777&nbsp;and&nbsp;I&nbsp;also&nbsp;tried&nbsp;to&nbsp;connect&nbsp;to&nbsp;:memory:&nbsp;with&nbsp;the&nbsp;same&nbsp;result.&lt;br&gt;&lt;br&gt;Some&nbsp;info&nbsp;on&nbsp;my&nbsp;settings:&lt;br&gt;&lt;br&gt;apache&nbsp;directives:&lt;br&gt;&lt;br&gt;&amp;lt;Directory&nbsp;/var/www/html/python&amp;gt;<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;SetHandler&nbsp;python-program&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;PythonHandler&nbsp;mod_python.publisher&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;PythonDebug&nbsp;On&lt;br&gt;&amp;lt;/Directory&amp;gt;&lt;br&gt;&lt;br&gt;versions:&lt;br&gt;&lt;br&gt;python&nbsp;2.3.4-11&nbsp;(Fedora&nbsp;Core&nbsp;3&nbsp;binary&nbsp;rpm&nbsp;package)&lt;br&gt;mod_python&nbsp;3.1.3-5&nbsp;(Fedora&nbsp;Core&nbsp;3&nbsp;binary&nbsp;rpm&nbsp;package)<br>
&lt;br&gt;httpd&nbsp;2.0.52-3&nbsp;(Fedora&nbsp;Core&nbsp;3&nbsp;binary&nbsp;rpm&nbsp;package)&lt;br&gt;sqlite&nbsp;3.2.8&nbsp;(compiled&nbsp;from&nbsp;source)&lt;br&gt;pysqlite&nbsp;2.1.0&nbsp;(compiled&nbsp;from&nbsp;source)&lt;br&gt;&lt;br&gt;And&nbsp;SELinux&nbsp;is&nbsp;disabled.&lt;br&gt;&lt;br&gt;Anyone&nbsp;has&nbsp;experienced&nbsp;this&nbsp;before?&nbsp;Also&nbsp;if&nbsp;you&nbsp;run&nbsp;apache&nbsp;+&nbsp;mod_python&nbsp;+&nbsp;pysqlite2&nbsp;and&nbsp;everything&nbsp;works,&nbsp;please&nbsp;let&nbsp;me&nbsp;know&nbsp;your&nbsp;version&nbsp;numbers,&nbsp;I&nbsp;would&nbsp;then&nbsp;try&nbsp;to&nbsp;up/downgrade&nbsp;to&nbsp;that.<br>
&lt;br&gt;&lt;br&gt;<br>
<br>

</tt>
