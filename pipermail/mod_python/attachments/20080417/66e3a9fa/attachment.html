<tt>
Hello&lt;br&gt;&lt;br&gt;I&nbsp;was&nbsp;trying&nbsp;to&nbsp;find&nbsp;out&nbsp;solution&nbsp;for&nbsp;my&nbsp;problem&nbsp;but&nbsp;there&nbsp;were&nbsp;no&nbsp;answers,&nbsp;so&nbsp;I&nbsp;decided&nbsp;to&nbsp;write&nbsp;here.&lt;br&gt;&lt;br&gt;We&nbsp;are&nbsp;using&nbsp;mod_python&nbsp;filters&nbsp;for&nbsp;our&nbsp;system&lt;br&gt;&lt;br&gt;Infrastructure&nbsp;description:&lt;br&gt;&lt;br&gt;INTERNET&nbsp;&amp;lt;---&amp;gt;&nbsp;APACHE&nbsp;2.8.3&nbsp;with&nbsp;mod_python&nbsp;3.3.1&nbsp;+&nbsp;output&nbsp;filters&nbsp;&amp;lt;--&amp;gt;&nbsp;Apache&nbsp;proxy&nbsp;module&nbsp;&amp;lt;--&amp;gt;&nbsp;TOMCAT&nbsp;5.5.2x&lt;br&gt;<br>
&lt;br&gt;our&nbsp;filters&nbsp;concat&nbsp;chunked&nbsp;content&nbsp;from&nbsp;tomcat&nbsp;and&nbsp;write&nbsp;to&nbsp;client&nbsp;whole&nbsp;changed&nbsp;content.&nbsp;It&amp;#39;s&nbsp;important&nbsp;for&nbsp;us&nbsp;to&nbsp;get&nbsp;whole&nbsp;response&nbsp;from&nbsp;tomcat&nbsp;and&nbsp;after&nbsp;it&nbsp;process.&nbsp;&nbsp;&lt;br&gt;&lt;br&gt;problem&nbsp;is&nbsp;when&nbsp;filter.read()&nbsp;reach&nbsp;last&nbsp;byte&nbsp;(filter.read()&nbsp;==&nbsp;None)&nbsp;then&nbsp;there&nbsp;is&nbsp;no&nbsp;possibility&nbsp;to&nbsp;overwrite&nbsp;request&nbsp;headers.&lt;br&gt;<br>
&lt;br&gt;There&nbsp;is&nbsp;no&nbsp;such&nbsp;problem&nbsp;during&nbsp;reading&nbsp;content&nbsp;and&nbsp;when&nbsp;we&nbsp;serve&nbsp;static&nbsp;pages&nbsp;from&nbsp;apache&nbsp;www&nbsp;server.&lt;br&gt;&lt;br&gt;mod_python&nbsp;receive&nbsp;such&nbsp;headers&nbsp;&lt;br&gt;&lt;br&gt;1&nbsp;chunk&lt;br&gt;&lt;br&gt;[Wed&nbsp;Apr&nbsp;16&nbsp;05:52:15&nbsp;2008]&nbsp;[error]&nbsp;{&amp;#39;Via&amp;#39;:&nbsp;&amp;#39;1.1&nbsp;domain&amp;#39;,&nbsp;&amp;#39;Set-Cookie&amp;#39;:&nbsp;&amp;#39;JSESSIONID=sessionXXX;&nbsp;Path=/path&amp;#39;,&nbsp;&amp;#39;Date&amp;#39;:&nbsp;&amp;#39;Fri,&nbsp;18&nbsp;Apr&nbsp;2008&nbsp;19:47:06&nbsp;GMT&amp;#39;,&nbsp;&amp;#39;Cache-Control&amp;#39;:&nbsp;&amp;#39;no-store&amp;#39;,&nbsp;&amp;#39;Cache-Control&amp;#39;:&nbsp;&amp;#39;no-cache&amp;#39;,&nbsp;&amp;#39;Expires&amp;#39;:&nbsp;&amp;#39;Thu,&nbsp;01&nbsp;Jan&nbsp;1970&nbsp;00:00:00&nbsp;GMT&amp;#39;,&nbsp;&amp;#39;Pragma&amp;#39;:&nbsp;&amp;#39;No-cache&amp;#39;,&nbsp;&amp;#39;Server&amp;#39;:&nbsp;&amp;#39;Apache-Coyote&amp;#39;}&lt;br&gt;<br>
&lt;br&gt;2&nbsp;chunk&lt;br&gt;&lt;br&gt;[Wed&nbsp;Apr&nbsp;16&nbsp;05:52:15&nbsp;2008]&nbsp;[error]&nbsp;{&amp;#39;Content-Type&amp;#39;:&nbsp;&amp;#39;text/plain&amp;#39;,&nbsp;&amp;#39;Transfer-Encoding&amp;#39;:&nbsp;&amp;#39;chunked&amp;#39;,&nbsp;&amp;#39;Connection&amp;#39;:&nbsp;&amp;#39;Keep-Alive&amp;#39;,&nbsp;&amp;#39;Keep-Alive&amp;#39;:&nbsp;&amp;#39;timeout=15,&nbsp;max=100&amp;#39;,&nbsp;&amp;#39;Via&amp;#39;:&nbsp;&amp;#39;1.1&nbsp;domain&amp;#39;,&nbsp;&amp;#39;Set-Cookie&amp;#39;:&nbsp;&amp;#39;JSESSIONID=sessionXXX;&nbsp;Path=/path&amp;#39;,&nbsp;&amp;#39;Cache-Control&amp;#39;:&nbsp;&amp;#39;No-cache&amp;#39;,&nbsp;&amp;#39;Expires&amp;#39;:&nbsp;&amp;#39;0&amp;#39;,&nbsp;&amp;#39;Pragma&amp;#39;:&nbsp;&amp;#39;No-cache&amp;#39;}&lt;br&gt;<br>
&lt;br&gt;3&nbsp;chunk&lt;br&gt;<br>
&lt;br&gt;<br>
[Wed&nbsp;Apr&nbsp;16&nbsp;05:52:15&nbsp;2008]&nbsp;[error]&nbsp;{&amp;#39;Content-Type&amp;#39;:&nbsp;&amp;#39;text/plain&amp;#39;,<br>
&amp;#39;Transfer-Encoding&amp;#39;:&nbsp;&amp;#39;chunked&amp;#39;,&nbsp;&amp;#39;Connection&amp;#39;:&nbsp;&amp;#39;Keep-Alive&amp;#39;,<br>
&amp;#39;Keep-Alive&amp;#39;:&nbsp;&amp;#39;timeout=15,&nbsp;max=100&amp;#39;,&nbsp;&amp;#39;Via&amp;#39;:&nbsp;&amp;#39;1.1&nbsp;domain&amp;#39;,&nbsp;&amp;#39;Set-Cookie&amp;#39;:<br>
&amp;#39;JSESSIONID=sessionXXX;&nbsp;Path=/path&amp;#39;,&nbsp;&amp;#39;Cache-Control&amp;#39;:&nbsp;&amp;#39;No-cache&amp;#39;,<br>
&amp;#39;Expires&amp;#39;:&nbsp;&amp;#39;0&amp;#39;,&nbsp;&amp;#39;Pragma&amp;#39;:&nbsp;&amp;#39;No-cache&amp;#39;}&lt;br&gt;&lt;br&gt;when&nbsp;I&nbsp;finish&nbsp;process&nbsp;on&nbsp;first&nbsp;or&nbsp;second&nbsp;chunk&nbsp;I&nbsp;can&nbsp;modify&nbsp;headers&nbsp;without&nbsp;any&nbsp;problems.&nbsp;after&nbsp;third&nbsp;one&nbsp;there&nbsp;is&nbsp;no&nbsp;such&nbsp;possibility&lt;br&gt;&lt;br&gt;Do&nbsp;You&nbsp;know&nbsp;what&nbsp;could&nbsp;be&nbsp;wrong&nbsp;?&lt;br&nbsp;clear=&quot;all&quot;&gt;<br>
&lt;br&gt;--&nbsp;&lt;br&gt;Rados≈Çaw&nbsp;Rymaszewski&lt;br&gt;&lt;br&gt;
</tt>
