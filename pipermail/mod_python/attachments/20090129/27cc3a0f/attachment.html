<tt>
&lt;!DOCTYPE&nbsp;html&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.01&nbsp;Transitional//EN&quot;&gt;<br>
&lt;html&gt;<br>
&lt;head&gt;<br>
&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;charset=ISO-8859-1&quot;&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&lt;/head&gt;<br>
&lt;body&nbsp;bgcolor=&quot;#ffffff&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
Graham&nbsp;Dumpleton&nbsp;wrote:<br>
&lt;blockquote<br>
&nbsp;cite=&quot;mid:88e286470901281804wb1e7955h7fd0ca30894fd289@mail.gmail.com&quot;<br>
&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;2009/1/29&nbsp;Monsyne&nbsp;Dragon&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-rfc2396E&quot;&nbsp;href=&quot;mailto:mdragon@rackspace.com&quot;&gt;&amp;lt;mdragon@rackspace.com&amp;gt;&lt;/a&gt;:<br>
&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;Ok,&nbsp;this&nbsp;is&nbsp;an&nbsp;odd&nbsp;one,&nbsp;any&nbsp;clues&nbsp;we&nbsp;can&nbsp;get&nbsp;would&nbsp;help.<br>
<br>
Environment&nbsp;mod_python&nbsp;3.1.4&nbsp;w/&nbsp;&nbsp;python&nbsp;2.4&nbsp;on&nbsp;Ubuntu&nbsp;dapper<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;&lt;!----&gt;<br>
Upgrade&nbsp;to&nbsp;mod_python&nbsp;3.3.1.&nbsp;That&nbsp;version&nbsp;is&nbsp;old&nbsp;and&nbsp;buggy.&nbsp;See:<br>
<br>
&nbsp;&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://www.dscpl.com.au/wiki/ModPython/Articles/ModuleImportingIsBroken&quot;&gt;http://www.dscpl.com.au/wiki/ModPython/Articles/ModuleImportingIsBroken&lt;/a&gt;<br>
<br>
for&nbsp;one&nbsp;possible&nbsp;source&nbsp;of&nbsp;your&nbsp;problems.<br>
<br>
&nbsp;&nbsp;&lt;/pre&gt;<br>
&lt;/blockquote&gt;<br>
Ah.&amp;nbsp;&nbsp;Well,&nbsp;we'll&nbsp;check&nbsp;that&nbsp;out.&amp;nbsp;&nbsp;Would&nbsp;you&nbsp;happen&nbsp;to&nbsp;know&nbsp;of&nbsp;a&nbsp;3.3.1<br>
backported&nbsp;package&nbsp;for&nbsp;Ubuntu&nbsp;Dapper&nbsp;(6.06)&nbsp;?&amp;nbsp;&nbsp;It&nbsp;would&nbsp;be&nbsp;rather<br>
helpful.&nbsp;&lt;br&gt;<br>
If&nbsp;not&nbsp;we'll&nbsp;have&nbsp;to&nbsp;roll&nbsp;one&nbsp;ourselves.&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
(This&nbsp;is&nbsp;probably&nbsp;Yet&nbsp;Another&nbsp;reason&nbsp;we&nbsp;should&nbsp;be&nbsp;moving&nbsp;to&nbsp;Hardy<br>
(which&nbsp;has&nbsp;3.3.1),&amp;nbsp;&nbsp;but&nbsp;this&nbsp;is&nbsp;a&nbsp;mission-critical&nbsp;app&nbsp;that&nbsp;basically<br>
runs&nbsp;a&nbsp;half-billion&nbsp;dollar&nbsp;a&nbsp;year&nbsp;company,&nbsp;and&nbsp;arranging&amp;nbsp;&nbsp;an&nbsp;OS&nbsp;upgrade<br>
on&nbsp;a&nbsp;system&nbsp;with&nbsp;two&nbsp;dozen&nbsp;servers&nbsp;between&nbsp;production,&nbsp;cert&nbsp;and&nbsp;dev<br>
environments&nbsp;in&nbsp;that&nbsp;kind&nbsp;of&nbsp;corporate&nbsp;environment&nbsp;is&nbsp;kindof&nbsp;like<br>
conducting&nbsp;a&nbsp;herd&nbsp;of&nbsp;wild&nbsp;African&nbsp;elephants&nbsp;in&nbsp;a&nbsp;tap-dance&nbsp;routine.<br>
It's&nbsp;pretty&nbsp;impressive&nbsp;when&nbsp;you&nbsp;pull&nbsp;it&nbsp;off,&nbsp;but&nbsp;there's&nbsp;alot&nbsp;of&nbsp;time<br>
and&nbsp;broken&nbsp;furniture&nbsp;involved&nbsp;in&nbsp;getting&nbsp;there.&nbsp;)&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote<br>
&nbsp;cite=&quot;mid:88e286470901281804wb1e7955h7fd0ca30894fd289@mail.gmail.com&quot;<br>
&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;Secondly,&nbsp;remember&nbsp;that&nbsp;Apache&nbsp;is&nbsp;a&nbsp;multi&nbsp;process&nbsp;web&nbsp;server.&nbsp;Don't<br>
expect&nbsp;globals&nbsp;you&nbsp;set&nbsp;in&nbsp;one&nbsp;process&nbsp;to&nbsp;be&nbsp;visible&nbsp;in&nbsp;another.&nbsp;See:<br>
<br>
&nbsp;&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://www.dscpl.com.au/wiki/ModPython/Articles/TheProcessInterpreterModel&quot;&gt;http://www.dscpl.com.au/wiki/ModPython/Articles/TheProcessInterpreterModel&lt;/a&gt;<br>
<br>
&nbsp;&nbsp;&lt;/pre&gt;<br>
&lt;/blockquote&gt;<br>
Yah,&nbsp;I'm&nbsp;aware&nbsp;of&nbsp;that.&amp;nbsp;&nbsp;This&nbsp;isn't&nbsp;doing&nbsp;anything&nbsp;funky&nbsp;with&nbsp;global<br>
variables,&nbsp;it's&nbsp;just&nbsp;doing&nbsp;an&nbsp;import&nbsp;at&nbsp;the&nbsp;top&nbsp;of&nbsp;a&nbsp;module&nbsp;and&nbsp;then<br>
trying&nbsp;to&nbsp;access&nbsp;the&nbsp;module&nbsp;it&nbsp;imported&nbsp;in&nbsp;a&nbsp;classes&nbsp;__init__&amp;nbsp;&nbsp;method&nbsp;a<br>
few&nbsp;lines&nbsp;down,&nbsp;and&nbsp;getting&nbsp;None&nbsp;instead&nbsp;of&nbsp;the&nbsp;module&nbsp;object&nbsp;(some&nbsp;of<br>
the&nbsp;time).&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
I'll&nbsp;see&nbsp;if&nbsp;upgrading&nbsp;mod_python&nbsp;helps&nbsp;here.&nbsp;&lt;br&gt;<br>
&lt;blockquote<br>
&nbsp;cite=&quot;mid:88e286470901281804wb1e7955h7fd0ca30894fd289@mail.gmail.com&quot;<br>
&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;Graham<br>
<br>
&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;We&nbsp;have&nbsp;a&nbsp;web&nbsp;app&nbsp;running&nbsp;under&nbsp;mod_python&nbsp;(it&nbsp;uses&nbsp;an&nbsp;obscure&nbsp;templating<br>
language/framework&nbsp;called&nbsp;PSE&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://nick.borko.org/pse/&quot;&gt;http://nick.borko.org/pse/&lt;/a&gt;)<br>
<br>
We&nbsp;are&nbsp;having&nbsp;an&nbsp;intermittent&nbsp;glitch&nbsp;which&nbsp;is&nbsp;truely&nbsp;bizarre.<br>
Periodically,&nbsp;one&nbsp;module&nbsp;deep&nbsp;in&nbsp;this&nbsp;large&nbsp;webapp&nbsp;is&nbsp;losing&nbsp;it's&nbsp;global<br>
namespace.&nbsp;On&nbsp;our&nbsp;production&nbsp;servers,&nbsp;this&nbsp;happens&nbsp;on&nbsp;random&nbsp;occasional<br>
basis,&nbsp;but&nbsp;we&nbsp;have&nbsp;replicated&nbsp;it&nbsp;on&nbsp;another&nbsp;machine.&nbsp;On&nbsp;that&nbsp;machine&nbsp;it&nbsp;was<br>
happening&nbsp;every&nbsp;other&nbsp;pagehit,<br>
and&nbsp;is&nbsp;now&nbsp;happening&nbsp;every&nbsp;pagehit&nbsp;except&nbsp;the&nbsp;first&nbsp;one&nbsp;after&nbsp;restarting<br>
apache&nbsp;(we&nbsp;don't&nbsp;know&nbsp;why&nbsp;this&nbsp;changed).<br>
This&nbsp;manifests&nbsp;in&nbsp;mindbenders&nbsp;like:&nbsp;we&nbsp;will&nbsp;import&nbsp;a&nbsp;module,&nbsp;(like&nbsp;'sys')<br>
like&nbsp;so:<br>
<br>
import&nbsp;sys<br>
<br>
class&nbsp;SomeClass()<br>
&nbsp;&nbsp;def&nbsp;__init__(self,&nbsp;args,&nbsp;go,&nbsp;here):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sys.stderr.write('Some&nbsp;message')<br>
<br>
This&nbsp;will&nbsp;run&nbsp;fine&nbsp;on&nbsp;the&nbsp;first&nbsp;hit,&nbsp;then&nbsp;subsequently&nbsp;will&nbsp;produce&nbsp;an<br>
exception&nbsp;saying&nbsp;that&nbsp;&quot;'NoneType'&nbsp;object&nbsp;has&nbsp;no&nbsp;attribute&nbsp;'stderr'&quot;&nbsp;!!<br>
And&nbsp;it's&nbsp;not&nbsp;just&nbsp;'sys'&nbsp;that&nbsp;that&nbsp;happens&nbsp;to.&nbsp;if&nbsp;we&nbsp;catch&nbsp;the&nbsp;exception&nbsp;and<br>
print&nbsp;the&nbsp;contents&nbsp;of&nbsp;globals()&nbsp;at&nbsp;that&nbsp;point,&nbsp;ALL&nbsp;of&nbsp;the&nbsp;modules&nbsp;imported,<br>
and&nbsp;any&nbsp;global&nbsp;variables&nbsp;&nbsp;have&nbsp;their&nbsp;values&nbsp;&nbsp;set&nbsp;to&nbsp;None!<br>
<br>
As&nbsp;far&nbsp;as&nbsp;we&nbsp;can&nbsp;tell,&nbsp;it&nbsp;is&nbsp;only&nbsp;happening&nbsp;to&nbsp;this&nbsp;one&nbsp;module&nbsp;in&nbsp;our<br>
(large,&nbsp;&nbsp;hundreds&nbsp;of&nbsp;modules)&nbsp;codebase.&nbsp;&nbsp;The&nbsp;module&nbsp;itself&nbsp;&nbsp;is&nbsp;actually<br>
generated&nbsp;code,&nbsp;generated&nbsp;by&nbsp;the&nbsp;ZSI-2.0&nbsp;SOAP&nbsp;library,&nbsp;and&nbsp;we've&nbsp;exercised<br>
this&nbsp;code&nbsp;from&nbsp;the&nbsp;command&nbsp;line&nbsp;hundreds&nbsp;of&nbsp;times&nbsp;without&nbsp;fail,&nbsp;running&nbsp;it<br>
in&nbsp;a&nbsp;loop.&nbsp;&nbsp;It&nbsp;only&nbsp;fails&nbsp;like&nbsp;this&nbsp;in&nbsp;the&nbsp;mod_python&nbsp;environment,&nbsp;and&nbsp;then,<br>
not&nbsp;every&nbsp;time.<br>
<br>
Does&nbsp;anyone&nbsp;have&nbsp;an&nbsp;idea&nbsp;of&nbsp;where&nbsp;to&nbsp;even&nbsp;begin&nbsp;to&nbsp;figure&nbsp;this&nbsp;out?<br>
<br>
<br>
<br>
--<br>
--M.&nbsp;Dragon<br>
<br>
<br>
<br>
Confidentiality&nbsp;Notice:&nbsp;This&nbsp;e-mail&nbsp;message&nbsp;(including&nbsp;any&nbsp;attached&nbsp;or<br>
embedded&nbsp;documents)&nbsp;is&nbsp;intended&nbsp;for&nbsp;the&nbsp;exclusive&nbsp;and&nbsp;confidential&nbsp;use&nbsp;of<br>
the<br>
individual&nbsp;or&nbsp;entity&nbsp;to&nbsp;which&nbsp;this&nbsp;message&nbsp;is&nbsp;addressed,&nbsp;and&nbsp;unless<br>
otherwise<br>
expressly&nbsp;indicated,&nbsp;is&nbsp;confidential&nbsp;and&nbsp;privileged&nbsp;information&nbsp;of<br>
Rackspace.<br>
Any&nbsp;dissemination,&nbsp;distribution&nbsp;or&nbsp;copying&nbsp;of&nbsp;the&nbsp;enclosed&nbsp;material&nbsp;is<br>
prohibited.<br>
If&nbsp;you&nbsp;receive&nbsp;this&nbsp;transmission&nbsp;in&nbsp;error,&nbsp;please&nbsp;notify&nbsp;us&nbsp;immediately&nbsp;by<br>
e-mail<br>
at&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:abuse@rackspace.com&quot;&gt;abuse@rackspace.com&lt;/a&gt;,&nbsp;and&nbsp;delete&nbsp;the&nbsp;original&nbsp;message.<br>
Your&nbsp;cooperation&nbsp;is&nbsp;appreciated.<br>
<br>
_______________________________________________<br>
Mod_python&nbsp;mailing&nbsp;list<br>
&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:Mod_python@modpython.org&quot;&gt;Mod_python@modpython.org&lt;/a&gt;<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://mailman.modpython.org/mailman/listinfo/mod_python&quot;&gt;http://mailman.modpython.org/mailman/listinfo/mod_python&lt;/a&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;pre&nbsp;class=&quot;moz-signature&quot;&nbsp;cols=&quot;72&quot;&gt;--&nbsp;<br>
--M.&nbsp;Dragon<br>
&lt;/pre&gt;<br>
&lt;PRE&gt;<br>
Confidentiality&nbsp;Notice:&nbsp;This&nbsp;e-mail&nbsp;message&nbsp;(including&nbsp;any&nbsp;attached&nbsp;or<br>
embedded&nbsp;documents)&nbsp;is&nbsp;intended&nbsp;for&nbsp;the&nbsp;exclusive&nbsp;and&nbsp;confidential&nbsp;use&nbsp;of&nbsp;the<br>
individual&nbsp;or&nbsp;entity&nbsp;to&nbsp;which&nbsp;this&nbsp;message&nbsp;is&nbsp;addressed,&nbsp;and&nbsp;unless&nbsp;otherwise<br>
expressly&nbsp;indicated,&nbsp;is&nbsp;confidential&nbsp;and&nbsp;privileged&nbsp;information&nbsp;of&nbsp;Rackspace.<br>
Any&nbsp;dissemination,&nbsp;distribution&nbsp;or&nbsp;copying&nbsp;of&nbsp;the&nbsp;enclosed&nbsp;material&nbsp;is&nbsp;prohibited.<br>
If&nbsp;you&nbsp;receive&nbsp;this&nbsp;transmission&nbsp;in&nbsp;error,&nbsp;please&nbsp;notify&nbsp;us&nbsp;immediately&nbsp;by&nbsp;e-mail<br>
at&nbsp;abuse@rackspace.com,&nbsp;and&nbsp;delete&nbsp;the&nbsp;original&nbsp;message.<br>
Your&nbsp;cooperation&nbsp;is&nbsp;appreciated.<br>
&lt;/PRE&gt;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
