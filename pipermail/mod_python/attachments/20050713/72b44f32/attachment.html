<tt>
I&nbsp;should&nbsp;have&nbsp;mentioned&nbsp;that&nbsp;this&nbsp;is&nbsp;done&nbsp;and&nbsp;it&nbsp;is&nbsp;done&nbsp;before&nbsp;any<br>
HTML&nbsp;is&nbsp;written&nbsp;to&nbsp;the&nbsp;browser.&amp;nbsp;&nbsp;So,&nbsp;there&nbsp;should&nbsp;not&nbsp;be&nbsp;the<br>
problem&nbsp;of&nbsp;having&nbsp;saved&nbsp;the&nbsp;session&nbsp;after&nbsp;some&nbsp;HTML&nbsp;has&nbsp;been&nbsp;written&nbsp;to<br>
the&nbsp;browser,&nbsp;which&nbsp;would&nbsp;prevent&nbsp;the&nbsp;cookie&nbsp;from&nbsp;being&nbsp;set.&lt;br&gt;<br>
&lt;br&gt;<br>
Jeremy&lt;br&gt;&lt;br&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;7/13/05,&nbsp;&lt;b&nbsp;class=&quot;gmail_sendername&quot;&gt;Jim&nbsp;Gallacher&lt;/b&gt;&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:jg.lists@sympatico.ca&quot;&gt;jg.lists@sympatico.ca&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;/span&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
Jeremy&nbsp;Kohansimeh&nbsp;wrote:&lt;br&gt;&amp;gt;&nbsp;Hello,&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;I&nbsp;have&nbsp;a&nbsp;problem&nbsp;where&nbsp;I&nbsp;am&nbsp;not&nbsp;able&nbsp;to&nbsp;reinstate&nbsp;an&nbsp;old&nbsp;Session.&amp;nbsp;&amp;nbsp;On&lt;br&gt;&amp;gt;&nbsp;initial&nbsp;login&nbsp;I&nbsp;record&nbsp;the&nbsp;session&nbsp;id&nbsp;and&nbsp;then&nbsp;check&nbsp;that&nbsp;the&nbsp;pysid&lt;br&gt;&amp;gt;&nbsp;cookie&nbsp;has&nbsp;been&nbsp;set&nbsp;appropriately&nbsp;in&nbsp;my&nbsp;browser,&nbsp;which&nbsp;it&nbsp;has.&amp;nbsp;&amp;nbsp;But,&nbsp;on<br>
&lt;br&gt;&amp;gt;&nbsp;a&nbsp;subsequent&nbsp;call&nbsp;when&nbsp;I&nbsp;try&nbsp;to&nbsp;reinstate&nbsp;the&nbsp;same&nbsp;session,&nbsp;I&nbsp;get&nbsp;a&nbsp;new&lt;br&gt;&amp;gt;&nbsp;one&nbsp;back&nbsp;that&nbsp;no&nbsp;longer&nbsp;has&nbsp;any&nbsp;of&nbsp;the&nbsp;items&nbsp;I&nbsp;have&nbsp;saved.&amp;nbsp;&amp;nbsp;I&nbsp;have&nbsp;been&lt;br&gt;&amp;gt;&nbsp;using&nbsp;the&nbsp;following&nbsp;code&nbsp;for&nbsp;diagnostics:&lt;br&gt;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;def&nbsp;handler(req,&nbsp;**kw):&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;quot;&amp;quot;&amp;quot;handles&nbsp;initial&nbsp;requests&amp;quot;&amp;quot;&amp;quot;&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#&nbsp;used&nbsp;for&nbsp;debugging&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;f&nbsp;=&nbsp;open(&nbsp;'/home/jeremyk/public_html/data/foo.log',&nbsp;'a+')&lt;br&gt;&amp;gt;&lt;br&gt;<br>
&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;cookies&nbsp;=&nbsp;Cookie.get_cookies(&nbsp;req)&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;cookies.has_key(&nbsp;'pysid'):&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;pysid&nbsp;=&nbsp;cookies[&nbsp;'pysid'].value&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;f.write(&nbsp;'pysid&nbsp;is&nbsp;'&nbsp;+&nbsp;pysid&nbsp;+&nbsp;'\n')&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;req.sess&nbsp;=&nbsp;<br>
Session.Session(&nbsp;req,&nbsp;sid=pysid)&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;else:&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;req.sess&nbsp;=&nbsp;Session.Session(&nbsp;req)&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#req.sess&nbsp;=&nbsp;Session.Session(&nbsp;req)&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;req.sess.set_timeout(&nbsp;20&nbsp;*&nbsp;60)&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;id&nbsp;=&nbsp;req.sess.id<br>
()&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;not&nbsp;req.sess.is_new():&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;f.write(&nbsp;'old&nbsp;session:&nbsp;'&nbsp;+&nbsp;id&nbsp;+&nbsp;'\n')&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;else:&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;f.write(&nbsp;'new&nbsp;session:&nbsp;'&nbsp;+&nbsp;id&nbsp;+&nbsp;'\n')&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;f.close()&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&nbsp;<br>
segment.dispatchToHandler(&nbsp;req)&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;I&nbsp;know&nbsp;that&nbsp;I&nbsp;do&nbsp;not&nbsp;need&nbsp;to&nbsp;specify&nbsp;the&nbsp;sid&nbsp;attribute&nbsp;of&nbsp;Session&nbsp;for&nbsp;an&lt;br&gt;&amp;gt;&nbsp;old&nbsp;session&nbsp;to&nbsp;be&nbsp;reinstated&nbsp;(this&nbsp;can&nbsp;be&nbsp;determined&nbsp;from&nbsp;the&nbsp;request&lt;br&gt;&amp;gt;&nbsp;object),&nbsp;but&nbsp;it&nbsp;wasn't&nbsp;working&nbsp;when&nbsp;I&nbsp;did&nbsp;it&nbsp;that&nbsp;way&nbsp;either.&amp;nbsp;&amp;nbsp;Something<br>
&lt;br&gt;&amp;gt;&nbsp;that&nbsp;seems&nbsp;very&nbsp;strange&nbsp;to&nbsp;me&nbsp;is&nbsp;that&nbsp;the&nbsp;pysid&nbsp;value&nbsp;I&nbsp;get&nbsp;back&nbsp;from&lt;br&gt;&amp;gt;&nbsp;here&nbsp;does&nbsp;not&nbsp;match&nbsp;the&nbsp;cookie&nbsp;that&nbsp;has&nbsp;been&nbsp;set&nbsp;in&nbsp;my&nbsp;browser.&amp;nbsp;&amp;nbsp;As&nbsp;you&lt;br&gt;&amp;gt;&nbsp;can&nbsp;see,&nbsp;I&nbsp;set&nbsp;the&nbsp;timeout&nbsp;to&nbsp;20&nbsp;minutes,&nbsp;which&nbsp;is&nbsp;much&nbsp;longer&nbsp;than&nbsp;the<br>
&lt;br&gt;&amp;gt;&nbsp;time&nbsp;inbetween&nbsp;the&nbsp;2&nbsp;calls.&amp;nbsp;&amp;nbsp;Is&nbsp;there&nbsp;anything&nbsp;else&nbsp;I&nbsp;should&nbsp;try?&lt;br&gt;&amp;gt;&lt;br&gt;&lt;br&gt;In&nbsp;your&nbsp;example&nbsp;code&nbsp;you&nbsp;never&nbsp;save&nbsp;the&nbsp;session&nbsp;data.&nbsp;When&nbsp;you&nbsp;create&nbsp;a&lt;br&gt;session&nbsp;instance&nbsp;with&nbsp;an&nbsp;explicit&nbsp;sid,&nbsp;Session&nbsp;tries&nbsp;to&nbsp;load&nbsp;the<br>
&lt;br&gt;corresponding&nbsp;session.&nbsp;If&nbsp;that&nbsp;session&nbsp;does&nbsp;not&nbsp;exist&nbsp;a&nbsp;new&nbsp;session&nbsp;id&lt;br&gt;is&nbsp;created,&nbsp;and&nbsp;thus&nbsp;you&nbsp;see&nbsp;a&nbsp;new&nbsp;pysid&nbsp;on&nbsp;each&nbsp;request.&lt;br&gt;&lt;br&gt;You&nbsp;need&nbsp;req.sess.save()&nbsp;somewhere&nbsp;in&nbsp;your&nbsp;code.&lt;br&gt;&lt;br&gt;Regards,&lt;br&gt;Jim&lt;br&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
