--- Session.py~	2005-01-29 13:25:29.000000000 -0800
+++ Session.py	2005-07-12 23:59:15.000000000 -0700
@@ -154,17 +154,21 @@
         if config.has_key("ApplicationPath"):
             c.path = config["ApplicationPath"]
         else:
-            docroot = self._req.document_root()
-            # the path where *Handler directive was specified
             dirpath = self._req.hlist.directory 
-            c.path = dirpath[len(docroot):]
 
-            # XXX Not sure why, but on Win32 hlist.directory
-            # may contain a trailing \ - need to investigate,
-            # this value is given to us directly by httpd
-            if os.name == 'nt' and c.path[-1] == '\\':
-                c.path = c.path[:-1]
-        
+            if(dirpath):
+                docroot = self._req.document_root()
+                # the path where *Handler directive was specified
+                c.path = dirpath[len(docroot):]
+                
+                # XXX Not sure why, but on Win32 hlist.directory
+                # may contain a trailing \ - need to investigate,
+                # this value is given to us directly by httpd
+                if os.name == 'nt' and c.path[-1] == '\\':
+                    c.path = c.path[:-1]
+            else:
+                c.path = None
+
             # Sometimes there is no path, e.g. when Location
             # is used. When Alias or UserDir are used, then
             # the path wouldn't match the URI. In those cases
