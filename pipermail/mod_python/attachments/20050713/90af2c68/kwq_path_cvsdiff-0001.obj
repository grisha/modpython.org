? kwq_path_cvsdiff.diff
? new_apache.py
Index: apache.py
===================================================================
RCS file: /home/cvspublic/httpd-python/lib/python/mod_python/apache.py,v
retrieving revision 1.83
diff -r1.83 apache.py
33a34,40
> def add_handler_path(hpath):
>     import glob
>     if hpath:
>         for D in glob.glob(hpath):
>             if os.path.isdir(D) and D not in sys.path:
>                 sys.path.insert(0, D)
> 
170,171c177
<                 if filter.dir and (filter.dir not in sys.path):
<                     sys.path[:0] = [filter.dir]
---
>                 add_handler_path(filter.dir)
280,282c286
<                     dir = hlist.directory
<                     if dir and (dir not in sys.path):
<                         sys.path[:0] = [dir]
---
>                     add_handler_path(hlist.directory)
454c458,462
<             f, p, d = imp.find_module(parts[i], path)
---
>             try:
>                 f, p, d = imp.find_module(parts[i], path)
>             except:
>                 _apache.log_error("mod_python: import error for module %s with path: %s and sys.path: %s"%(parts[i],path,sys.path))
>                 raise
