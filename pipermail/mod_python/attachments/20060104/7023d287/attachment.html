<tt>
&lt;!DOCTYPE&nbsp;html&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.01&nbsp;Transitional//EN&quot;&gt;<br>
&lt;html&gt;<br>
&lt;head&gt;<br>
&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;charset=ISO-8859-1&quot;&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&lt;/head&gt;<br>
&lt;body&nbsp;bgcolor=&quot;#ffffff&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
Jim:&lt;br&gt;<br>
&lt;br&gt;<br>
Thanks&nbsp;for&nbsp;the&nbsp;info.&amp;nbsp;&nbsp;However,&nbsp;I'm&nbsp;still&nbsp;having&nbsp;trouble.&amp;nbsp;&nbsp;I&nbsp;don't&nbsp;know<br>
if&nbsp;this&nbsp;is&nbsp;the&nbsp;problem,&nbsp;but&nbsp;this&nbsp;code&nbsp;does&nbsp;NOT&nbsp;exist&nbsp;in&nbsp;a&nbsp;handler&nbsp;that<br>
I&nbsp;wrote.&amp;nbsp;&nbsp;I&nbsp;didn't&nbsp;write&nbsp;a&nbsp;handler,&nbsp;I'm&nbsp;just&nbsp;using&nbsp;the&nbsp;publisher<br>
handler.&amp;nbsp;&nbsp;I&nbsp;have&nbsp;written&nbsp;an&nbsp;authentication&nbsp;handler&nbsp;and&nbsp;that&nbsp;is&nbsp;working<br>
correctly&nbsp;but&nbsp;I&nbsp;don't&nbsp;know&nbsp;what&nbsp;I&nbsp;need&nbsp;to&nbsp;do&nbsp;to&nbsp;make&nbsp;my&nbsp;own&nbsp;handler&nbsp;and<br>
have&nbsp;it&nbsp;work&nbsp;like&nbsp;the&nbsp;publisher&nbsp;handler.&amp;nbsp;&nbsp;Again,&nbsp;I'm&nbsp;probably&nbsp;trying<br>
too&nbsp;hard&nbsp;and&nbsp;not&nbsp;seeing&nbsp;the&nbsp;obvious.&amp;nbsp;&nbsp;I&nbsp;have&nbsp;been&nbsp;looking&nbsp;all&nbsp;over&nbsp;the<br>
web&nbsp;and&nbsp;can't&nbsp;seem&nbsp;to&nbsp;find&nbsp;a&nbsp;good&nbsp;custom&nbsp;handler&nbsp;example.&lt;br&gt;<br>
&lt;br&gt;<br>
Thanks&nbsp;again,&nbsp;I'll&nbsp;keep&nbsp;plugging&nbsp;away&nbsp;to&nbsp;try&nbsp;to&nbsp;understand&nbsp;what's&nbsp;going<br>
on.&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;-Jim&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;moz-signature&quot;&gt;&lt;font&nbsp;size=&quot;normal&quot;&gt;Jim&nbsp;Steil&lt;/font&gt;&lt;br&gt;<br>
&lt;font&nbsp;size=&quot;smaller&quot;&gt;IT&nbsp;Manager&lt;br&gt;<br>
Quality&nbsp;Liquid&nbsp;Feeds&lt;br&gt;<br>
(608)&nbsp;935-2345&lt;/font&gt;&lt;/div&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Jim&nbsp;Gallacher&nbsp;wrote:<br>
&lt;blockquote&nbsp;cite=&quot;mid43BC04E9.3090205@jgassociates.ca&quot;&nbsp;type=&quot;cite&quot;&gt;Jim<br>
Steil&nbsp;wrote:<br>
&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;Hi,&nbsp;I'm&nbsp;new&nbsp;to&nbsp;mod_python&nbsp;and&nbsp;apache&nbsp;in<br>
general,&nbsp;and&nbsp;am&nbsp;confused&nbsp;about&nbsp;how&nbsp;to&nbsp;implement&nbsp;session&nbsp;management.&amp;nbsp;<br>
I'm&nbsp;using&nbsp;the&nbsp;Publisher&nbsp;handler&nbsp;and&nbsp;PSP&nbsp;templates.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
Here&nbsp;is&nbsp;the&nbsp;relevant&nbsp;portion&nbsp;of&nbsp;my&nbsp;http.conf&nbsp;file:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&amp;lt;Directory&nbsp;&quot;c:/program&nbsp;files/apache&nbsp;group/apache2/htdocs/motion&quot;&amp;gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;AddHandler&nbsp;mod_python&nbsp;.py<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;PythonHandler&nbsp;mod_python.publisher<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;PythonAuthenHandler&nbsp;myAuthScript<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;PythonDebug&nbsp;On<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;AuthType&nbsp;Basic<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;AuthName&nbsp;&quot;Restricted&nbsp;Area&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;require&nbsp;valid-user<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&amp;lt;/Directory&amp;gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
...and&nbsp;here&nbsp;is&nbsp;my&nbsp;python&nbsp;module:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
from&nbsp;mod_python&nbsp;import&nbsp;psp<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
import&nbsp;time<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
import&nbsp;mx.ODBC<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
import&nbsp;mx.ODBC.Windows<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
def&nbsp;secUserList(req,&nbsp;page='',&nbsp;sortSeq=''):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;page:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;startPage&nbsp;=&nbsp;int(page)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;else:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;startPage&nbsp;=&nbsp;1<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;pageLength&nbsp;=&nbsp;20<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;sql&nbsp;=&nbsp;'call&nbsp;secUser_list(\''&nbsp;+&nbsp;sortSeq&nbsp;+&nbsp;'\',&nbsp;'&nbsp;+&nbsp;repr(startPage)<br>
+&nbsp;',&nbsp;'&nbsp;+&nbsp;repr(pageLength)&nbsp;+&nbsp;')'<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;db&nbsp;=<br>
mx.ODBC.Windows.DriverConnect('DSN=motion;UID=userid;PWD=password')<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;c&nbsp;=&nbsp;db.cursor()<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;c.execute(sql)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;htmlText&nbsp;=&nbsp;''<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;for&nbsp;secUserId,&nbsp;firstName,&nbsp;lastName,&nbsp;logonName,&nbsp;email&nbsp;in<br>
c.fetchall():<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;htmlText&nbsp;=&nbsp;htmlText&nbsp;+&nbsp;'&amp;lt;tr<br>
onmouseover=&quot;style.backgroundColor=\'#FFF0AF\';&nbsp;style.cursor=\'hand\';&quot;<br>
onclick=&quot;location.href=\'secUserProfile?secUserId='&nbsp;+&nbsp;&quot;%i&quot;&nbsp;%&nbsp;secUserId<br>
+&nbsp;'\'&quot;&nbsp;onmouseout=&quot;style.backgroundColor=\'#ffffff\';&quot;&amp;gt;&amp;lt;td&amp;gt;'&nbsp;+<br>
firstName&nbsp;+&nbsp;'&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;'&nbsp;+&nbsp;lastName&nbsp;+<br>
'&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;'&nbsp;+&nbsp;logonName&nbsp;+&nbsp;'&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;'&nbsp;+&nbsp;email&nbsp;+<br>
'&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;\n'<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;previousPage&nbsp;=&nbsp;1<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;startPage&nbsp;&amp;gt;&nbsp;1:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;previousPage&nbsp;=&nbsp;startPage&nbsp;-&nbsp;1<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;nextPage&nbsp;=&nbsp;startPage&nbsp;+&nbsp;1<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;c.close()<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;db.close()<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;parmDict&nbsp;=&nbsp;{'title':'User&nbsp;List',&nbsp;'rowHtml':htmlText,<br>
'previousPage':previousPage,&nbsp;'nextPage':nextPage,<br>
'startPage':startPage}<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;template&nbsp;=&nbsp;psp.PSP(req,&nbsp;filename='secUserList.html')<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;template.run(vars&nbsp;=&nbsp;parmDict)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
My&nbsp;question&nbsp;is;&amp;nbsp;&nbsp;How&nbsp;do&nbsp;I&nbsp;implement&nbsp;the&nbsp;session?<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&lt;br&gt;<br>
from&nbsp;mod_python&nbsp;import&nbsp;Session<br>
&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&nbsp;Where&nbsp;do&nbsp;I&nbsp;put&nbsp;the<br>
&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;code?&amp;nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&lt;br&gt;<br>
Most&nbsp;likely&nbsp;in&nbsp;your&nbsp;handler,&nbsp;(secUserList?)&nbsp;but&nbsp;it&nbsp;can&nbsp;go&nbsp;where&nbsp;ever<br>
you&nbsp;&amp;nbsp;want&nbsp;to&nbsp;access&nbsp;the&nbsp;session&nbsp;data.&nbsp;Make&nbsp;sure&nbsp;you&nbsp;only&nbsp;create&nbsp;one<br>
session&nbsp;object&nbsp;per&nbsp;request&nbsp;though.&nbsp;If&nbsp;you&nbsp;need&nbsp;to&nbsp;pass&nbsp;it&nbsp;around&nbsp;to<br>
other&nbsp;functions&nbsp;in&nbsp;a&nbsp;single&nbsp;request&nbsp;then&nbsp;stuff&nbsp;it&nbsp;into&nbsp;your&nbsp;request<br>
object.<br>
&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;br&gt;<br>
def&nbsp;secUserList(req):<br>
&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#&nbsp;creating&nbsp;the&nbsp;session&nbsp;instance&nbsp;will&nbsp;either&nbsp;load&nbsp;an&nbsp;existing<br>
session<br>
&nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#&nbsp;or&nbsp;create&nbsp;a&nbsp;new&nbsp;one<br>
&nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;req.sess&nbsp;=&nbsp;Session.Session()<br>
&nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;req.sess.is_new():<br>
&nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;req.sess['visits']&nbsp;=&nbsp;0<br>
&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;req.write('you&nbsp;have&nbsp;visited&nbsp;this&nbsp;page&nbsp;%d&nbsp;times'&nbsp;%<br>
&nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;req.sess['visits'])<br>
&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;doSomeOtherStuff(req)<br>
&nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;req.sess['visits']&nbsp;+=&nbsp;1<br>
&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#&nbsp;You&nbsp;must&nbsp;save&nbsp;the&nbsp;session&nbsp;to&nbsp;make&nbsp;it&nbsp;persistent<br>
&nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;req.sess.save()<br>
&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;br&gt;<br>
def&nbsp;doSomeOtherStuff(req):<br>
&nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;req.sess['stuff']&nbsp;=&nbsp;'wonderful'<br>
&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;I&nbsp;want&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;store&nbsp;my&nbsp;database&nbsp;login<br>
credentials&nbsp;in&nbsp;the&nbsp;session&nbsp;object.&amp;nbsp;&nbsp;I'm&nbsp;guessing&nbsp;I'm&nbsp;missing&nbsp;something<br>
really&nbsp;obvious,&nbsp;but&nbsp;can't&nbsp;seem&nbsp;to&nbsp;get&nbsp;my&nbsp;head&nbsp;around&nbsp;it.&amp;nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&lt;br&gt;<br>
Don't&nbsp;think&nbsp;so&nbsp;hard.&nbsp;;)&nbsp;It&nbsp;really&nbsp;is&nbsp;as&nbsp;simple&nbsp;as&nbsp;it&nbsp;looks.<br>
&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;Any&nbsp;help&nbsp;or&nbsp;pointers&nbsp;to&nbsp;good&nbsp;examples&nbsp;would<br>
really&nbsp;be&nbsp;appreciated.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&lt;br&gt;<br>
Just&nbsp;think&nbsp;of&nbsp;the&nbsp;session&nbsp;object&nbsp;as&nbsp;a&nbsp;persistent&nbsp;dictionary.&nbsp;The<br>
correct&nbsp;dictionary&nbsp;to&nbsp;load&nbsp;for&nbsp;a&nbsp;request&nbsp;is&nbsp;determined&nbsp;by&nbsp;a&nbsp;cookie<br>
which&nbsp;is&nbsp;automatically&nbsp;set&nbsp;for&nbsp;you&nbsp;when&nbsp;you&nbsp;create&nbsp;the&nbsp;session.<br>
&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;br&gt;<br>
Jim<br>
&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
