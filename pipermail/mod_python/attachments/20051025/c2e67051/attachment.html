<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;3.2//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;charset=us-ascii&quot;&gt;<br>
&lt;META&nbsp;NAME=&quot;Generator&quot;&nbsp;CONTENT=&quot;MS&nbsp;Exchange&nbsp;Server&nbsp;version&nbsp;6.5.7036.0&quot;&gt;<br>
&lt;TITLE&gt;Mod&nbsp;Python&nbsp;Output&nbsp;Filter&nbsp;Behavior&lt;/TITLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
&lt;!--&nbsp;Converted&nbsp;from&nbsp;text/rtf&nbsp;format&nbsp;--&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;Greetings!&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;I've&nbsp;been&nbsp;dorking&nbsp;around&nbsp;with&nbsp;writing&nbsp;a&nbsp;mod_python&nbsp;output&nbsp;filter&nbsp;and&nbsp;I&nbsp;have&nbsp;a&nbsp;question:&amp;nbsp;&nbsp;In&nbsp;the&nbsp;documentation&nbsp;under&nbsp;Section&nbsp;4.3,&nbsp;it&nbsp;says:&lt;/FONT&gt;&lt;/P&gt;<br>
&lt;UL&gt;<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;&amp;quot;&lt;/FONT&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Times&nbsp;New&nbsp;Roman&quot;&gt;When&nbsp;writing&nbsp;filters,&nbsp;keep&nbsp;in&nbsp;mind&nbsp;that&nbsp;a&nbsp;filter&nbsp;will&nbsp;be&nbsp;called&nbsp;any&nbsp;time&nbsp;anything&nbsp;upstream&nbsp;requests&nbsp;an&nbsp;IO&nbsp;operation,&nbsp;and&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Times&nbsp;New&nbsp;Roman&quot;&gt;the&nbsp;filter&nbsp;has&nbsp;no&nbsp;control&nbsp;over&nbsp;the&nbsp;amount&nbsp;of&nbsp;data&nbsp;passed&nbsp;through&nbsp;it&nbsp;and&nbsp;no&nbsp;notion&nbsp;of&nbsp;where&nbsp;in&nbsp;the&nbsp;request&nbsp;processing&nbsp;it&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Times&nbsp;New&nbsp;Roman&quot;&gt;is&nbsp;called.&nbsp;For&nbsp;example,&nbsp;within&nbsp;a&nbsp;single&nbsp;request,&nbsp;a&nbsp;filter&nbsp;may&nbsp;be&nbsp;called&nbsp;once&nbsp;or&nbsp;five&nbsp;times,&nbsp;and&nbsp;there&nbsp;is&nbsp;no&nbsp;way&nbsp;for&nbsp;the&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Times&nbsp;New&nbsp;Roman&quot;&gt;filter&nbsp;to&nbsp;know&nbsp;beforehand&nbsp;that&nbsp;the&nbsp;request&nbsp;is&nbsp;over&nbsp;and&nbsp;which&nbsp;of&nbsp;calls&nbsp;is&nbsp;last&nbsp;or&nbsp;first&nbsp;for&nbsp;this&nbsp;request,&nbsp;thought&nbsp;encounter&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Times&nbsp;New&nbsp;Roman&quot;&gt;of&nbsp;an&nbsp;EOS&nbsp;(None&nbsp;returned&nbsp;from&nbsp;a&nbsp;read&nbsp;operation)&nbsp;is&nbsp;a&nbsp;fairly&nbsp;strong&nbsp;indication&nbsp;of&nbsp;an&nbsp;end&nbsp;of&nbsp;a&nbsp;request.&amp;quot;&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
&lt;/UL&gt;<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;The&nbsp;filter&nbsp;I'm&nbsp;working&nbsp;on&nbsp;performs&nbsp;xslt&nbsp;transformations,&nbsp;so&nbsp;it&nbsp;is&nbsp;important&nbsp;that&nbsp;each&nbsp;entrance&nbsp;into&nbsp;the&nbsp;filter&nbsp;handler&nbsp;gets&nbsp;either&nbsp;the&nbsp;whole&nbsp;xml&nbsp;document&nbsp;or&nbsp;a&nbsp;well-formed&nbsp;xml&nbsp;fragment.&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;As&nbsp;a&nbsp;test,&nbsp;I&nbsp;wrote&nbsp;the&nbsp;following&nbsp;filter:&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
&lt;UL&gt;<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Courier&nbsp;New&quot;&gt;def&nbsp;outputfilter&nbsp;(filter):&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Courier&nbsp;New&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;filter.write('&amp;lt;p&amp;gt;entering&nbsp;filter&amp;lt;/p&amp;gt;')&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Courier&nbsp;New&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;data&nbsp;=&nbsp;filter.read()&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Courier&nbsp;New&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;while&nbsp;data:&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Courier&nbsp;New&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;filter.write(data)&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Courier&nbsp;New&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;data&nbsp;=&nbsp;filter.read()&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Courier&nbsp;New&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;filter.write('&amp;lt;p&amp;gt;leaving&nbsp;filter&amp;lt;/p&amp;gt;')&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Courier&nbsp;New&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;data&nbsp;is&nbsp;None:&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Courier&nbsp;New&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;filter.write('&amp;lt;p&amp;gt;closing&nbsp;filter&amp;lt;/p&amp;gt;')&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Courier&nbsp;New&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;filter.close()&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
&lt;/UL&gt;<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;Every&nbsp;page&nbsp;I've&nbsp;thrown&nbsp;at&nbsp;this&nbsp;begins&nbsp;with&nbsp;&amp;quot;entering&nbsp;filter&amp;quot;&nbsp;and&nbsp;ends&nbsp;with&nbsp;&amp;quot;leaving&nbsp;filter&amp;quot;&nbsp;followed&nbsp;by&nbsp;&amp;quot;closing&nbsp;filter.&amp;quot;&amp;nbsp;&nbsp;In&nbsp;other&nbsp;words,&nbsp;the&nbsp;entire&nbsp;request&nbsp;was&nbsp;pushed&nbsp;through&nbsp;one&nbsp;call&nbsp;to&nbsp;the&nbsp;filter.&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;Under&nbsp;what&nbsp;circumstances&nbsp;would&nbsp;the&nbsp;comments&nbsp;in&nbsp;Section&nbsp;4.3&nbsp;about&nbsp;multiple&nbsp;calls&nbsp;to&nbsp;the&nbsp;filter&nbsp;actually&nbsp;occur?&amp;nbsp;&nbsp;So&nbsp;far,&nbsp;I&nbsp;haven't&nbsp;been&nbsp;able&nbsp;to&nbsp;stimulate&nbsp;that&nbsp;behavior.&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;Best&nbsp;Regards,&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;Lee&nbsp;E.&nbsp;Brown&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;(leebrown@leebrown.org)&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;
</tt>
