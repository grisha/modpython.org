<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Please help me  :)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Please%20help%20me%20%20%3A%29&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013629.html">
   <LINK REL="Next"  HREF="013637.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Please help me  :)</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Michael Gibbs</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Please%20help%20me%20%20%3A%29&In-Reply-To="
       TITLE="[mod_python] Please help me  :)">mike at mapvision.com
       </A><BR>
    <I>Fri May 16 14:43:17 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="013629.html">[mod_python] mod_python for python 2.3
</A></li>
        <LI>Next message: <A HREF="013637.html">[mod_python] Please help me  :)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13634">[ date ]</a>
              <a href="thread.html#13634">[ thread ]</a>
              <a href="subject.html#13634">[ subject ]</a>
              <a href="author.html#13634">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks in advance for any guidance you can provide.

Our problem is that we are trying to maintain a counter using a global 
variable. However the script returns different values when multiple browser 
form requests are being submitted. The counter seems to get changed by 
different requests but not as expected. Are we doing something wrong?

Thanks,
Mike. 


This is the HTML form we use to make the mod_python request. 

&lt;HTML&gt;
        &lt;form action=&quot;<A HREF="http://localhost/form2&quot;">http://localhost/form2&quot;</A> method=&quot;POST&quot;&gt;
                &lt;input type=&quot;submit&quot;&gt;
        &lt;/form&gt;
&lt;/HTML&gt;


This is the python script (form2.py)

#Why does this script return different values for _count?
#This happens when two browsers are opened and multiple
#forms are submitted. Going back and forth between browsers
#seems to mess up/reset the count on different requests.

from mod_python import apache
_count = 0
def handler(req):
        global _count
        _count += 1
        req.content_type = &quot;text/html&quot;
        req.send_http_header()
        req.write('_count = %d' %_count)
        return apache.OK
</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013629.html">[mod_python] mod_python for python 2.3
</A></li>
	<LI>Next message: <A HREF="013637.html">[mod_python] Please help me  :)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13634">[ date ]</a>
              <a href="thread.html#13634">[ thread ]</a>
              <a href="subject.html#13634">[ subject ]</a>
              <a href="author.html#13634">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
