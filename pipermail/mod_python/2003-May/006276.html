<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Tutorials, FieldStorage and sys.py. A
	depressingsaga.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Tutorials%2C%20FieldStorage%20and%20sys.py.%20A%0A%09depressingsaga.&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006275.html">
   <LINK REL="Next"  HREF="006277.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Tutorials, FieldStorage and sys.py. A
	depressingsaga.</H1>
    <B>Mike Looijmans</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Tutorials%2C%20FieldStorage%20and%20sys.py.%20A%0A%09depressingsaga.&In-Reply-To="
       TITLE="[mod_python] Tutorials, FieldStorage and sys.py. A
	depressingsaga.">mike.looijmans at asml.com
       </A><BR>
    <I>Fri May 23 09:47:33 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="006275.html">[mod_python] Tutorials, FieldStorage and sys.py. A depressing
	saga.
</A></li>
        <LI>Next message: <A HREF="006277.html">[mod_python] 
	Strange behaviour using PythonHandler module::ClassName.method
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6276">[ date ]</a>
              <a href="thread.html#6276">[ thread ]</a>
              <a href="subject.html#6276">[ subject ]</a>
              <a href="author.html#6276">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<table border=0 width="100%"><tr><td>
<!--beginarticle-->
<PRE>&gt;<i>You can easily force print statement to work in mod_python. Request
</I>&gt;<i>object has method 'write' and it is only method that print statement
</I>&gt;<i>calls on destination object. So you can replace sys.stdout with req.
</I>

Drawback is that there is only ONE sys.stdout per interpreter. So make very
sure that only ONE thread can write to sys.stdout...
cgihandler does this, and the result is that only one thread can be active.
With the worker mpm on apache, the python/cgi system will effectively become
single-threaded.

The other way around is much better: let all your handlers receive a file like
&quot;output&quot; object, and write to that object. When using CGI, you assign
sys.stdout, and in mod_python, you can use the request object. This allows
multithreading in mod_python, a must-have if you use any thread-based apache
MPM.

In fact, I let the CGI version of the handler create a Request-like object
(mimic) based on environ strings, which I pass to the mod_python based
scripts. This yields max performance on mod_python, and an unnoticable drop on
CGI based Python scripting (the overhead of starting a new interpreter process
is much, much bigger than the creation of the reqeust object).

Mike.


</PRE>
<!--endarticle-->
</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006275.html">[mod_python] Tutorials, FieldStorage and sys.py. A depressing
	saga.
</A></li>
	<LI>Next message: <A HREF="006277.html">[mod_python] 
	Strange behaviour using PythonHandler module::ClassName.method
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6276">[ date ]</a>
              <a href="thread.html#6276">[ thread ]</a>
              <a href="subject.html#6276">[ subject ]</a>
              <a href="author.html#6276">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
