<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] [help]please give an input filter example ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20%5Bhelp%5Dplease%20give%20an%20input%20filter%20example%20%3F&In-Reply-To=002c01c37e5b%2471210920%24db64a8c0%40camgelo">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006812.html">
   <LINK REL="Next"  HREF="006820.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] [help]please give an input filter example ?</H1>
    <B>Gregory (Grisha) Trubetskoy</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20%5Bhelp%5Dplease%20give%20an%20input%20filter%20example%20%3F&In-Reply-To=002c01c37e5b%2471210920%24db64a8c0%40camgelo"
       TITLE="[mod_python] [help]please give an input filter example ?">grisha at modpython.org
       </A><BR>
    <I>Tue Sep 23 10:35:19 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="006812.html">[mod_python] [help]please give an input filter example ?
</A></li>
        <LI>Next message: <A HREF="006820.html">[mod_python] [help]please give an input filter example ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6819">[ date ]</a>
              <a href="thread.html#6819">[ thread ]</a>
              <a href="subject.html#6819">[ subject ]</a>
              <a href="author.html#6819">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<table border=0 width="100%"><tr><td>
<!--beginarticle-->
<PRE>
I've looked at the input filter code, and I think that what's in 3.0.3 is
broken. If you get the latest CVS version, your input filter code would
look somethng like:

def inputfilter(filter):

	s = filter.read()

	if s:
		## do something with s here

		filter.write(s)
	else:
		filter.close()

	return apache.OK

Note that the filter will only see the body of the POST request, it will
not see the headers, in fact it won't even be called for GET requests.

Grisha

On Fri, 19 Sep 2003, camge wrote:

&gt;<i> &gt; &gt;I need input filter to convert character set of form data submitted by
</I>&gt;<i> cell
</I>&gt;<i> &gt; &gt;phone browser.
</I>&gt;<i> &gt; &gt;For example, convert utf-8 to big5 or gb.
</I>&gt;<i> &gt; &gt;If I can do it in input filter, then I dont need to modify all of my
</I>&gt;<i> pages.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; Aha. What I would do is just put a function in a module that changes the
</I>&gt;<i> &gt; encoding.
</I>&gt;<i> &gt; Get the arguments like you normally would, then just do a decode/encode.
</I>&gt;<i> &gt; Since that module can be accessed from anywhere, it will work just as
</I>&gt;<i> well.
</I>&gt;<i> &gt; Also, it's less likely to cause bugs, and will probably be faster
</I>&gt;<i> &gt; (you'll only making one jump into the Python interpreter and back)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Cheers
</I>&gt;<i> &gt; David
</I>&gt;<i> &gt;
</I>&gt;<i> Thanks for your suggestion!
</I>&gt;<i> But my web server serve not only wap browser but also Pocket IE and IE,
</I>&gt;<i> and they all use same module(for easy maintenance).
</I>&gt;<i> Adding this function in these modules will be a terrible thing,
</I>&gt;<i> because I dont need to convert character encoding for Pocket IE and IE.
</I>&gt;<i>
</I>&gt;<i> If I can do it in input filter, I don't need to modify any things in
</I>&gt;<i> original module.
</I>&gt;<i>
</I>&gt;<i> regards,
</I>&gt;<i> camge
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I></PRE>
<!--endarticle-->
</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006812.html">[mod_python] [help]please give an input filter example ?
</A></li>
	<LI>Next message: <A HREF="006820.html">[mod_python] [help]please give an input filter example ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6819">[ date ]</a>
              <a href="thread.html#6819">[ thread ]</a>
              <a href="subject.html#6819">[ subject ]</a>
              <a href="author.html#6819">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
