<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Handler publisher with multiple directories on
	thesame tree
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Handler%20publisher%20with%20multiple%20directories%20on%0A%09thesame%20tree&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006789.html">
   <LINK REL="Next"  HREF="006775.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Handler publisher with multiple directories on
	thesame tree</H1>
    <B>Mike Looijmans</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Handler%20publisher%20with%20multiple%20directories%20on%0A%09thesame%20tree&In-Reply-To="
       TITLE="[mod_python] Handler publisher with multiple directories on
	thesame tree">mike.looijmans at asml.com
       </A><BR>
    <I>Mon Sep  8 15:40:26 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="006789.html">[mod_python] 
	Re: Handler publisher with multiple directories on the same tree
</A></li>
        <LI>Next message: <A HREF="006775.html">[mod_python] Handler publisher with multiple directories on
	thesame tree
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6769">[ date ]</a>
              <a href="thread.html#6769">[ thread ]</a>
              <a href="subject.html#6769">[ subject ]</a>
              <a href="author.html#6769">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<table border=0 width="100%"><tr><td>
<!--beginarticle-->
<PRE>&gt;<i> When I'm developing I usually have a common problem that is when I
</I>&gt;<i> change a class or some file, sometimes the interpreter remains in memory
</I>&gt;<i> the old version and doesn't load the new one. Is there a way to solve
</I>&gt;<i> this out ? Normally I use an non elegant way, I restart apache!
</I>
I use the &quot;reload&quot; built-in function. This loads an internal module from
disk.
My main handler checks if the path_info of the URL is &quot;/request&quot; and if so,
runs the following (you could use publisher to publish this interface as
well).
All &quot;my&quot; modules are named &quot;ops_&quot; something. You could also use the __file__
location as a filter.

def reloadmodules(req):
    '''Try to reload all ops_ modules. This is typically done after updating
    imported scripts, such as ops_cgisql.py. The main scripts will be
    reloaded automatically on demand, so that there is no need to send
    a reload after changing ops_webrellist.py or so.
    This also throws away old DB connections. If there are currently
    active connections, these are preserved.'''
    req.content_type='text/plain'
    # Reload python modules
    modules = sys.modules.keys()
    modules.sort()
    for module in modules:
        if module[:4] == 'ops_':
            try:
                req.write('Reloading: %s\n' % module)
                reload(sys.modules[module])
            except:
                req.write('%s: %s\n' % sys.exc_info()[:2])
    # throw away DB connection objects
    req.write('Destroy DB cached connections\n')
    _lock.acquire()
    try:
        dblist.clear()
    finally:
        _lock.release()
    req.write('Done\n')





-- 
The information contained in this communication and any attachments is confidential and may be privileged, and is for the sole use of the intended recipient(s). Any unauthorized review, use, disclosure or distribution is prohibited. If you are not the intended recipient, please notify the sender immediately by replying to this message and destroy all copies of this message and any attachments. ASML is neither liable for the proper and complete transmission of the information contained in this communication, nor for any delay in its receipt.


</PRE>
<!--endarticle-->
</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006789.html">[mod_python] 
	Re: Handler publisher with multiple directories on the same tree
</A></li>
	<LI>Next message: <A HREF="006775.html">[mod_python] Handler publisher with multiple directories on
	thesame tree
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6769">[ date ]</a>
              <a href="thread.html#6769">[ thread ]</a>
              <a href="subject.html#6769">[ subject ]</a>
              <a href="author.html#6769">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
