<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] relocation error with Apache 1.3 on solaris 8
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20relocation%20error%20with%20Apache%201.3%20on%20solaris%208&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014144.html">
   <LINK REL="Next"  HREF="014148.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] relocation error with Apache 1.3 on solaris 8</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Marco Vezzoli</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20relocation%20error%20with%20Apache%201.3%20on%20solaris%208&In-Reply-To="
       TITLE="[mod_python] relocation error with Apache 1.3 on solaris 8">marco.vezzoli at st.com
       </A><BR>
    <I>Thu Sep  4 08:58:57 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="014144.html">[mod_python] relocation error with Apache 1.3 on solaris 8
</A></li>
        <LI>Next message: <A HREF="014148.html">[mod_python] relocation error with Apache 1.3 on solaris 8
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14147">[ date ]</a>
              <a href="thread.html#14147">[ thread ]</a>
              <a href="subject.html#14147">[ subject ]</a>
              <a href="author.html#14147">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">synec at viscous.org</A> wrote:
&gt;<i> 
</I>&gt;<i> On Wed, Sep 03, 2003 at 08:17:18AM +0200, Marco Vezzoli wrote:
</I>&gt;<i> &gt; Hi all,
</I>&gt;<i> &gt; I'm evaluating mod_python for our intranet site; we are using
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; solaris 8
</I>&gt;<i> &gt; gcc 3.0.1
</I>&gt;<i> &gt; apache 1.3.19
</I>&gt;<i> &gt; python 2.1.1
</I>&gt;<i> &gt; mod_python 2.7.8 compiled with DSO
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Compilation and basic tests run good.
</I>&gt;<i> &gt; I use the mod_python.publisher module for deploy but some modules can't
</I>&gt;<i> &gt; be imported because there is some name resolution error (messages
</I>&gt;<i> &gt; follows).
</I>&gt;<i> &gt; I googled whitout success for this problem (many ask nobody answer).
</I>&gt;<i> &gt; Thanks in advance for any help.
</I>&gt;<i> &gt;               Marco
</I>&gt;<i> 
</I>&gt;<i> Marco,
</I>&gt;<i> 
</I>&gt;<i> this isn't a mod_python problem; it's a psycopg/postgresql problem. in
</I>&gt;<i> case you're not familiar, psycopg is a python module used to access a
</I>&gt;<i> postgresql database.
</I>&gt;<i> 
</I>&gt;<i> it looks to me like psycopg was linked against a different version of
</I>&gt;<i> libpq than the one that the runtime linker is using, but that's just a
</I>&gt;<i> guess.
</I>&gt;<i> 
</I>&gt;<i> you can find more information on psycopg on its website:
</I>&gt;<i> <A HREF="http://initd.org/software/psycopg">http://initd.org/software/psycopg</A>
</I>&gt;<i> 
</I>&gt;<i> good luck,
</I>&gt;<i> john spurling
</I>&gt;<i> 
</I>
Thank you for the answer; I did some other test and I verified that

-some other modules importing .so are working correctly e.g.
mx.DateTime, gadfly
-some don't e.g. cgi (fails to load libssl, messages below)
-another postgres driver fails with a similar error (messages below)
-pure python imports psycopg correctly (so I imagine it could be some
apache/mod_python linking problem)
-no other libpq nor libssl are in the LD_LIBRARY_PATH

I'm using gnu ld: does this cause some problem?
I've tried hacking my path so that it finds Sun's ld but errors are the
same.
Is it an apache config problem?
TIA for any help

	Marco

----error importing cgi----------------------------------
Mod_python error: &quot;PythonHandler mod_python.publisher&quot;

Traceback (most recent call last):

  File &quot;/usr/local/lib/python2.1/site-packages/mod_python/apache.py&quot;,
line 193, in Dispatch
    result = object(req)

  File &quot;/usr/local/lib/python2.1/site-packages/mod_python/publisher.py&quot;,
line 128, in handler
    module = apache.import_module(module_name, _req, [path])

  File &quot;/usr/local/lib/python2.1/site-packages/mod_python/apache.py&quot;,
line 335, in import_module
    module = imp.load_module(mname, f, p, d)

  File &quot;/hype/cgi-bin/PyDataAnalysis/test.py&quot;, line 2, in ?
    import cgi

  File &quot;/usr/local/lib/python2.1/cgi.py&quot;, line 39, in ?
    import urllib

  File &quot;/usr/local/lib/python2.1/urllib.py&quot;, line 26, in ?
    import socket

  File &quot;/usr/local/lib/python2.1/socket.py&quot;, line 41, in ?
    from _socket import *

ImportError: ld.so.1: /HTTP-Server/build/apache/bin/httpd: fatal:
relocation error: file /usr/local/lib/libssl.so.0.9.6: symbol main:
referenced symbol not found
--------------------------------------
----error importing pg----------------------------------------
Mod_python error: &quot;PythonHandler mod_python.publisher&quot;

Traceback (most recent call last):

  File &quot;/usr/local/lib/python2.1/site-packages/mod_python/apache.py&quot;,
line 193, in Dispatch
    result = object(req)

  File &quot;/usr/local/lib/python2.1/site-packages/mod_python/publisher.py&quot;,
line 128, in handler
    module = apache.import_module(module_name, _req, [path])

  File &quot;/usr/local/lib/python2.1/site-packages/mod_python/apache.py&quot;,
line 335, in import_module
    module = imp.load_module(mname, f, p, d)

  File &quot;/hype/cgi-bin/PyDataAnalysis/test.py&quot;, line 3, in ?
    import pg

  File &quot;/usr/local/lib/python2.1/pg.py&quot;, line 7, in ?
    from _pg import *

ImportError: ld.so.1: /HTTP-Server/build/apache/bin/httpd: fatal:
relocation error: file /usr/local/lib/libpq.so.2: symbol main:
referenced symbol not found

-- 
Marco Vezzoli	   tel. +39 039 603 6852
STMicroelectronics fax. +39 039 603 5055
</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014144.html">[mod_python] relocation error with Apache 1.3 on solaris 8
</A></li>
	<LI>Next message: <A HREF="014148.html">[mod_python] relocation error with Apache 1.3 on solaris 8
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14147">[ date ]</a>
              <a href="thread.html#14147">[ thread ]</a>
              <a href="subject.html#14147">[ subject ]</a>
              <a href="author.html#14147">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
