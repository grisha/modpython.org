<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Problem writing to file from handler
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Problem%20writing%20to%20file%20from%20handler&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007951.html">
   <LINK REL="Next"  HREF="007953.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
<table border=0 width="100%"><tr><td valign="top">
   <H1>[mod_python] Problem writing to file from handler</H1>
    <B>oddmund.mogedal at accenture.com</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Problem%20writing%20to%20file%20from%20handler&In-Reply-To="
       TITLE="[mod_python] Problem writing to file from handler">oddmund.mogedal at accenture.com
       </A><BR>
    <I>Tue Jan 30 20:36:08 EST 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="007951.html">[mod_python] Example sites
</A></li>
        <LI>Next message: <A HREF="007953.html">[mod_python] Problem writing to file from handler
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7952">[ date ]</a>
              <a href="thread.html#7952">[ thread ]</a>
              <a href="subject.html#7952">[ subject ]</a>
              <a href="author.html#7952">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I need to write to a file from within a script (called using publisher.py).
For some reason, I am not allowed to write to the file, even though it
exists and has write permission for everyone.
(Yes, it is a security risk, but not in the environment where I will use
it.)

I have tried the same thing using the cgi module, and then I am allowed to
write to the file.
Is there a difference in access rights to the file system between a script
called from mod_python and a script called using CGI?

Does anybody know what is causing this problem?

Using mod_python: DOES NOT WORK
    import getpass

    def omtest(req, username, file):
        myfile = open(&quot;testom&quot;, 'wb')
        myfile.write(file)
        myfile.close()
        return &quot;%s\n%d\n%s\n&quot; % (username, len(file), getpass.getuser())

Using cgi: WORKS OK
    #!/usr/local/bin/python2.0

    import getpass
    import sys
    import cgi

    myfile = open(&quot;testom&quot;, 'wb')
    form = cgi.FieldStorage()
    name = form[&quot;name&quot;].value
    file = form[&quot;file&quot;].value
    myfile.write(file)

    print &quot;Content-Type: text/html&quot;
    print
    print name
    print getpass.getuser()




Oddmund



This message is for the designated recipient only and may contain
privileged or confidential information.  If you have received it in error,
please notify the sender immediately and delete the original.  Any other
use of the email by you is prohibited.



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007951.html">[mod_python] Example sites
</A></li>
	<LI>Next message: <A HREF="007953.html">[mod_python] Problem writing to file from handler
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7952">[ date ]</a>
              <a href="thread.html#7952">[ thread ]</a>
              <a href="subject.html#7952">[ subject ]</a>
              <a href="author.html#7952">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
