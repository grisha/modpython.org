<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Win32 platform - test installers available
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Win32%20platform%20-%20test%20installers%20available&In-Reply-To=40475D04.2090807%40sjsoft.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015110.html">
   <LINK REL="Next"  HREF="015113.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Win32 platform - test installers available</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Gregory (Grisha) Trubetskoy</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Win32%20platform%20-%20test%20installers%20available&In-Reply-To=40475D04.2090807%40sjsoft.com"
       TITLE="[mod_python] Win32 platform - test installers available">grisha at modpython.org
       </A><BR>
    <I>Thu Mar  4 12:19:12 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="015110.html">[mod_python] Win32 platform - test installers available
</A></li>
        <LI>Next message: <A HREF="015113.html">[mod_python] Win32 platform - test installers available
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15111">[ date ]</a>
              <a href="thread.html#15111">[ thread ]</a>
              <a href="subject.html#15111">[ subject ]</a>
              <a href="author.html#15111">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

On Thu, 4 Mar 2004, David Fraser wrote:

&gt;<i> Is there a reason there hasn't been a binary made for win32 yet?
</I>
mainly because making one is a PITA... i'll get to it some time. if anyone
wants to volunteer, you are more than welcome

&gt;<i> I'll try and look at it myself now, but using VC++ 6 so may be difficult...
</I>&gt;<i> I am using Apache 2.0.48 win32 sources and Python 2.3.3 standard
</I>&gt;<i> distribution...
</I>
you shouldn't need apache sources. just install the binary apache
distribution, but remember to click on the &quot;custom&quot; install and include
the header files.

&gt;<i> Compiling Apache for windows is described here:
</I>&gt;<i> <A HREF="http://httpd.apache.org/docs-2.0/platform/win_compiling.html">http://httpd.apache.org/docs-2.0/platform/win_compiling.html</A>
</I>&gt;<i> That seems to work fine with VC++ 6
</I>
see above; no need to compile apache

&gt;<i> Compiling mod_python for windows seems to require compiling in src based
</I>&gt;<i> on the project file for VC++7
</I>
i actually use the .net version (is that same as 7?) - sorry, it's the
only thing i have access to.

&gt;<i> I took the vc7to6_prjconverter tool from
</I>&gt;<i> <A HREF="http://www.codeproject.com/tools/prjconverter.asp">http://www.codeproject.com/tools/prjconverter.asp</A> and converted the file
</I>&gt;<i> for VC++6
</I>&gt;<i> Then I had to manually change paths to point to my Apache include and
</I>&gt;<i> Release (lib) directories and my Python include and libs directories
</I>
&gt;<i> (note that I didn't have to compile Python from source as the include
</I>&gt;<i> and libs are included with the standard distribution...)
</I>
correct, no need to compile your own Python either

&gt;<i> These originally are set as $(PYTHONSRC) and $(APACHESRC) in the include
</I>&gt;<i> and libs paths.
</I>
yes. these are the only things you should set (in system preferences |
environment)

&gt;<i> I also had to manually add the srclib/apr/include and
</I>&gt;<i> srclib/apr-util/include directories from Apache to the include path, and
</I>&gt;<i> the srclib/apr/Release and srclib/apr-util/Release directories to the
</I>&gt;<i> library path.
</I>
this is because you compiled your own apache

&gt;<i> Then mod_python linked successfully!
</I>
cool

&gt;<i>
</I>&gt;<i> To build the win32 installer it needs to be done in the dist directory
</I>&gt;<i> (apparently under Unix)
</I>&gt;<i> I had troubles trying to run configure on MinGW as it needs an apxs to
</I>&gt;<i> find...
</I>&gt;<i> but the APXS is not actually needed for the setup script (the code that
</I>&gt;<i> used it is commented out)
</I>&gt;<i> So I ran configure on Linux, and built the installer there...
</I>&gt;<i> This is done by copying src/Release/mod_python.so to the dist directory.
</I>
not anymore, it now can be done under windows. In fact it *has* to because
this step also compiles _psp.

you DO need to manually create a setup.py from setup.py.in since
./configure, as you noted, won't work on windows

&gt;<i> In fact I found that by simply copying the setup.py generated on Linux I
</I>&gt;<i> could run this on Windows
</I>&gt;<i> The instruction is:
</I>&gt;<i>   setup.py bdist_wininst --install-script=win32_postinstall.py
</I>
perhaps distutils take care of it automtically, but I've always
done it separately, building the mod_python package for the standard lib,
which would be a step just before the bdist_wininst.

I had to copy src and mod_python (in lib/python) to under dist (on unix
the makefiles creates symlinks, but they don't work under windows, so you
have to copy), then run

(This has to be run from the VC++ msdos shell, since it will invoke the
compiler to build _psp.so (or _psp.dll, don't remember))

 python setup.py build

&gt;<i>
</I>&gt;<i> I hope the above instructions are useful to anyone else trying the same
</I>&gt;<i> thing.
</I>
me too. And if someone would care to clean up the Windows build process
and make it seamless enough and contribute it as a patch, we would all
very much appreciate it. I personally dislike Windows so much, I don't
know that will ever bring myself to doing this - just building the Windows
installer is already such a horrifying experience that I usually don't
touch Windows for months thereafeter ;-)

&gt;<i> I have not yet fully tested this binary or installer but it seemed to
</I>&gt;<i> run our applications fine.
</I>&gt;<i> mod_python.so and mod_python-3.1.3.win32.exe can be downloaded from:
</I>&gt;<i> <A HREF="http://davidf.sjsoft.com/files/mod_python.so">http://davidf.sjsoft.com/files/mod_python.so</A>
</I>&gt;<i> <A HREF="http://davidf.sjsoft.com/files/mod_python-3.1.3.win32.exe">http://davidf.sjsoft.com/files/mod_python-3.1.3.win32.exe</A>
</I>
See if you can run the tests. You will have to manually rig a testconf.py
(NOTE - it will not like blanks in path names, e.g. &quot;Program Files&quot;, the
only work around I found was using the DOS path name, which you can
determine by firing up command.exe (as opposed to cmd.exe) i believe). But
once you get past the testconf.py, usually all tests run OK.

&gt;<i>
</I>&gt;<i> I would appreciate feedback (on this list) so that hopefully these can
</I>&gt;<i> be included in the official release ...
</I>
Thanks for trying!

Grisha

&gt;<i>
</I>&gt;<i> David
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I></PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015110.html">[mod_python] Win32 platform - test installers available
</A></li>
	<LI>Next message: <A HREF="015113.html">[mod_python] Win32 platform - test installers available
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15111">[ date ]</a>
              <a href="thread.html#15111">[ thread ]</a>
              <a href="subject.html#15111">[ subject ]</a>
              <a href="author.html#15111">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
