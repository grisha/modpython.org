<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Re: persistent, reliable globals
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20persistent%2C%20reliable%20globals&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015158.html">
   <LINK REL="Next"  HREF="015159.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Re: persistent, reliable globals</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Ben</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20persistent%2C%20reliable%20globals&In-Reply-To="
       TITLE="[mod_python] Re: persistent, reliable globals">ben at medianstrip.net
       </A><BR>
    <I>Mon Mar  8 12:33:30 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="015158.html">[mod_python] Nested For Loops
</A></li>
        <LI>Next message: <A HREF="015159.html">[mod_python] Storing functions in session ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15157">[ date ]</a>
              <a href="thread.html#15157">[ thread ]</a>
              <a href="subject.html#15157">[ subject ]</a>
              <a href="author.html#15157">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

it seems like this is a question that is asked enough to be worth

a) putting into the FAQ (for now), and
b) eventually trying to solve.

i used to do some apache API coding so i'd be willing to look into
trying to support per-child (and possibly per-thread) initialization
code.  i remember this used to be possible, and looking at mod_perl i
see it has a PerlChildExitHandler.

<A HREF="http://perl.apache.org/docs/2.0/user/handlers/server.html">http://perl.apache.org/docs/2.0/user/handlers/server.html</A>

i'll start code-diving today, and let people know what i find.  (oh
woe to the python programmer who has to read C!)

take care, B

ps i happen to want this for my project, which is an object / aspect
oriented servlet framework, that supports mixin-style functionality
for session-based authentication, caching, etc.  i plan on releasing
that too, after some bugfixes and documentation.

&gt;<i>
</I>&gt;<i> Message: 2
</I>&gt;<i> Date: Mon, 8 Mar 2004 00:13:03 -0600
</I>&gt;<i> From: &quot;Bert Hughes&quot; &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">bert at tela.com</A>&gt;
</I>&gt;<i> Subject: Re: [mod_python] persistent, reliable globals
</I>&gt;<i> To: &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython.org</A>&gt;
</I>&gt;<i> Message-ID: &lt;001701c404d4$6a73fa60$<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">0301a8c0 at janine</A>&gt;
</I>&gt;<i> Content-Type: text/plain;	charset=&quot;iso-8859-1&quot;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ----- Original Message -----
</I>&gt;<i> From: &quot;David Geller&quot; &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">dg at sponsera.com</A>&gt;
</I>&gt;<i> To: &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython.org</A>&gt;
</I>&gt;<i> Sent: Sunday, March 07, 2004 11:21 PM
</I>&gt;<i> Subject: [mod_python] persistent, reliable globals
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; Hi,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I would like to set a global variable (in memory) from a module. I would
</I>&gt;<i> &gt; then like to access this same global variable susequently by other
</I>&gt;<i> &gt; modules at any other time, and have the value that was set there to be
</I>&gt;<i> &gt; there (until, of course, Apache is restarted).
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I have tried several ways of doing this, and it doesn't seem to be
</I>&gt;<i> &gt; reliable - i.e., sometimes the global variable is set when I look at it,
</I>&gt;<i> &gt; and sometimes it is still at its original state.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; What am I doing wrong (or right)?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Thanks!
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Mod_python mailing list
</I>&gt;<i> &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ------------------------------
</I>&gt;<i>
</I>&gt;<i> Message: 3
</I>&gt;<i> Date: Mon, 8 Mar 2004 00:45:47 -0600
</I>&gt;<i> From: &quot;Bert Hughes&quot; &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">bert at tela.com</A>&gt;
</I>&gt;<i> Subject: Re: [mod_python] persistent, reliable globals
</I>&gt;<i> To: &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython.org</A>&gt;
</I>&gt;<i> Message-ID: &lt;004f01c404d8$fd69c170$<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">0301a8c0 at janine</A>&gt;
</I>&gt;<i> Content-Type: text/plain;	charset=&quot;iso-8859-1&quot;
</I>&gt;<i>
</I>&gt;<i> Apache starts number of child process - any given web connection could be
</I>&gt;<i> served by any of these, or apache root may start a new child to answer http
</I>&gt;<i> request.  Refreshing same page from same client could result in service from
</I>&gt;<i> different apache child processes.  Mod_python and your modules live in each
</I>&gt;<i> child independently - setting global only sets in it one apache process, not
</I>&gt;<i> other or future processes.
</I>&gt;<i>
</I>&gt;<i> At least that's my understanding.
</I>&gt;<i>
</I>&gt;<i> Bert Hughes
</I>&gt;<i>
</I>&gt;<i> ----- Original Message -----
</I>&gt;<i> From: &quot;David Geller&quot; &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">dg at sponsera.com</A>&gt;
</I>&gt;<i> To: &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython.org</A>&gt;
</I>&gt;<i> Sent: Sunday, March 07, 2004 11:21 PM
</I>&gt;<i> Subject: [mod_python] persistent, reliable globals
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; Hi,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I would like to set a global variable (in memory) from a module. I would
</I>&gt;<i> &gt; then like to access this same global variable susequently by other
</I>&gt;<i> &gt; modules at any other time, and have the value that was set there to be
</I>&gt;<i> &gt; there (until, of course, Apache is restarted).
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I have tried several ways of doing this, and it doesn't seem to be
</I>&gt;<i> &gt; reliable - i.e., sometimes the global variable is set when I look at it,
</I>&gt;<i> &gt; and sometimes it is still at its original state.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; What am I doing wrong (or right)?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Thanks!
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Mod_python mailing list
</I>&gt;<i> &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ------------------------------
</I>&gt;<i>
</I>&gt;<i> Message: 4
</I>&gt;<i> Date: Mon, 8 Mar 2004 01:10:54 -0700 (MST)
</I>&gt;<i> From: Erik &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at 24ksoftware.com</A>&gt;
</I>&gt;<i> Subject: Re: [mod_python] persistent, reliable globals
</I>&gt;<i> To: <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython.org</A>
</I>&gt;<i> Message-ID:
</I>&gt;<i> 	&lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Pine.LNX.4.58.0403080108300.14807 at ramuh.int.24ksoftware.com</A>&gt;
</I>&gt;<i> Content-Type: TEXT/PLAIN; charset=US-ASCII
</I>&gt;<i>
</I>&gt;<i> On Mon, 8 Mar 2004, David Geller wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; I would like to set a global variable (in memory) from a module. I would
</I>&gt;<i> &gt; then like to access this same global variable susequently by other
</I>&gt;<i> &gt; modules at any other time, and have the value that was set there to be
</I>&gt;<i> &gt; there (until, of course, Apache is restarted).
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I have tried several ways of doing this, and it doesn't seem to be
</I>&gt;<i> &gt; reliable - i.e., sometimes the global variable is set when I look at it,
</I>&gt;<i> &gt; and sometimes it is still at its original state.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; What am I doing wrong (or right)?
</I>&gt;<i>
</I>&gt;<i> Greetings,
</I>&gt;<i>
</I>&gt;<i> New to the list and mod_python in general, but it sounds like you will
</I>&gt;<i> only be able to pull this off if you are using a threaded Apache.
</I>&gt;<i> Again, I'm new so I could be wrong.
</I>&gt;<i>
</I>&gt;<i> If you're stuck with a forked Apache, then you could try using
</I>&gt;<i> something from the IPC toolbox: shared files, shared memory, messages,
</I>&gt;<i> etc.  I would pickle whatever you wanted shared to some temp file and
</I>&gt;<i> have your code check for that file and define it if does not exist.
</I>&gt;<i> That approach has some dangerous aspects to it.  The threaded Apache
</I>&gt;<i> approach sounds much better.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Best regards,
</I>&gt;<i> Erik
</I>&gt;<i>
</I>&gt;<i> ------------------------------
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> End of Mod_python Digest, Vol 12, Issue 10
</I>&gt;<i> ******************************************
</I>&gt;<i>
</I>

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015158.html">[mod_python] Nested For Loops
</A></li>
	<LI>Next message: <A HREF="015159.html">[mod_python] Storing functions in session ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15157">[ date ]</a>
              <a href="thread.html#15157">[ thread ]</a>
              <a href="subject.html#15157">[ subject ]</a>
              <a href="author.html#15157">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
