<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] apache.import_module picks wrong module
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20apache.import_module%20picks%20wrong%20module&In-Reply-To=4062F33B.2090707%40tietoenator.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015284.html">
   <LINK REL="Next"  HREF="015295.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] apache.import_module picks wrong module</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Kamil Niechajewicz</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20apache.import_module%20picks%20wrong%20module&In-Reply-To=4062F33B.2090707%40tietoenator.com"
       TITLE="[mod_python] apache.import_module picks wrong module">kamil at nvstudio.pl
       </A><BR>
    <I>Thu Mar 25 17:30:11 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="015284.html">[mod_python] apache.import_module picks wrong module
</A></li>
        <LI>Next message: <A HREF="015295.html">[mod_python] apache.import_module picks wrong module
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15285">[ date ]</a>
              <a href="thread.html#15285">[ thread ]</a>
              <a href="subject.html#15285">[ subject ]</a>
              <a href="author.html#15285">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, 25 Mar 2004 16:56:59 +0200
Toms Baugis &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">toms.baugis at tietoenator.com</A>&gt; wrote:
&lt;cut&gt;

I've had somehow similar problem. It made me crazy one day.
I'll try to explain it in detail now.

I had one VirtualHost declaration, and under it I had two
&lt;Location&gt; statements:

&lt;Location /app1&gt;
    SetHandler python-program
    PythonHandler myhandler 
    PythonDebug on
    PythonPath &quot;sys.path + ['/path/to/app1/']&quot;
&lt;/Location&gt;

and

&lt;Location /app2&gt;
    SetHandler python-program
    PythonHandler myhandler
    PythonDebug on
    PythonPath &quot;sys.path + ['/path/to/app2/']&quot;
&lt;/Location&gt;

now the directory structure:

upper_dir/

    app1/
           templates/
                  template1.xsl
                  index.xsl
 
           myhandler.py
           BaseForm.py
           BaseField.py
           something.py
    app2/
           templates/
                   template2.xsl
                   index.xsl
           myhandler.py
           BaseForm.py
           BaseField.py
           something_different.py

when I had only one application running under this VHost 
everything was fine. but when I added the second app, 
which was in totally different directory, but had few
files that had the same name like files from first
application, something started to go wrong.

usualy application worked fine, but sometimes strange
errors happened, like reporting runtime error that
SHOULD NOT happen. suddenly I noticed that applications
are somehow messing their paths? or something - there
was a random chance that app1 will mistake myhandler.py
from app1/myhandler.py and instead of using it, it will
load app2/myhandler.py, because it had the same name.
but path declarations are different for every app, so
how such mistakes were possible? the same problem happened
with templates, sometimes wrong template was loaded.

is that a matter of mod_python? my wrong apache conf
directives, or apache itself?

actually i've renamed all files that had the same names
in both applications to some, so that they all differ 
now and are not messed, but it cost me alot of work
that shouldn't be necessary. 

how could i solve this problem in the future, so that
i woulnd't have to rename all files? for me its quite
logical that some files can have the same names in
different apps-directories, and apache/modpython/whatever
shouldn't mistake them when it has directives that tell
'use this path for /app1 and this path for /app2'. i
guess that the randomness of those errors was a result
of apache-children, sometimes i ran into thread that 
had this bad configuration and everything was messed,
and sometimes i could see the page properly.

with regards,
K.
</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015284.html">[mod_python] apache.import_module picks wrong module
</A></li>
	<LI>Next message: <A HREF="015295.html">[mod_python] apache.import_module picks wrong module
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15285">[ date ]</a>
              <a href="thread.html#15285">[ thread ]</a>
              <a href="subject.html#15285">[ subject ]</a>
              <a href="author.html#15285">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
