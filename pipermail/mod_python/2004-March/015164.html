<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] zero terminated strings and req.write
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20zero%20terminated%20strings%20and%20req.write&In-Reply-To=20040308193259.GA13285%40golgatha.local">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015162.html">
   <LINK REL="Next"  HREF="015173.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] zero terminated strings and req.write</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Erik Stephens</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20zero%20terminated%20strings%20and%20req.write&In-Reply-To=20040308193259.GA13285%40golgatha.local"
       TITLE="[mod_python] zero terminated strings and req.write">mod_python at 24ksoftware.com
       </A><BR>
    <I>Mon Mar  8 14:35:04 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="015162.html">[mod_python] zero terminated strings and req.write
</A></li>
        <LI>Next message: <A HREF="015173.html">[mod_python] zero terminated strings and req.write
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15164">[ date ]</a>
              <a href="thread.html#15164">[ thread ]</a>
              <a href="subject.html#15164">[ subject ]</a>
              <a href="author.html#15164">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, 8 Mar 2004, Frederick Grim wrote:

&gt;<i> def gen_xml():
</I>&gt;<i> 	return &quot;&quot;&quot;&lt;?xml ... Tons of xhtml stuff here
</I>&gt;<i>
</I>&gt;<i> &lt;/html&gt;&quot;&quot;&quot;
</I>&gt;<i>
</I>&gt;<i> def main(req, ERR='0'):
</I>&gt;<i> 	re.content_type = 'text/xml'
</I>&gt;<i> 	req.write(gen_xml())
</I>&gt;<i> 	return apache.OK
</I>&gt;<i>
</I>&gt;<i> The problem here is that python puts null bytes at the end of a
</I>&gt;<i> string and req.write fails with the error that there is a 0 after
</I>&gt;<i> &lt;/html&gt;.
</I>
How does it fail?  Raises an exception?  What is the actual exception
type and value?  It sounds strange to me cuz I've never had to worry
about null bytes in strings in my Python travels.


&gt;<i> How do I get this failure to not happen.  Even if i set content_type
</I>&gt;<i> to 'text/html' there appears a little zero at the end of my
</I>&gt;<i> script. It seems like a bug? maybe.  I am using mod_python 3.1.3
</I>&gt;<i> apache 2.0.47, and python 2.3
</I>
Dumb questions maybe, but what handler are you using?  If you're using
the publisher handler, then maybe that zero at the end is what
apache.OK equals?


Best regards,
Erik

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015162.html">[mod_python] zero terminated strings and req.write
</A></li>
	<LI>Next message: <A HREF="015173.html">[mod_python] zero terminated strings and req.write
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15164">[ date ]</a>
              <a href="thread.html#15164">[ thread ]</a>
              <a href="subject.html#15164">[ subject ]</a>
              <a href="author.html#15164">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
