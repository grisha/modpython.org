<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] About retrieving cookies...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20About%20retrieving%20cookies...&In-Reply-To=db308f471003040749i234c8396y96ab009377a1a05e%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026522.html">
   <LINK REL="Next"  HREF="026530.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] About retrieving cookies...</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Martijn Moeling</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20About%20retrieving%20cookies...&In-Reply-To=db308f471003040749i234c8396y96ab009377a1a05e%40mail.gmail.com"
       TITLE="[mod_python] About retrieving cookies...">martijn at xs4us.nu
       </A><BR>
    <I>Thu Mar  4 11:39:36 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="026522.html">[mod_python] About retrieving cookies...
</A></li>
        <LI>Next message: <A HREF="026530.html">[mod_python] ModPython + Virtual Hosting Apache2 instance = poor
	performance.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26524">[ date ]</a>
              <a href="thread.html#26524">[ thread ]</a>
              <a href="subject.html#26524">[ subject ]</a>
              <a href="author.html#26524">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Victor,

Cookies are send to the browser in the HTTP header, so yes set them before any write operation as the headers are send at the first write.

Next, Why are you trying to get the contents from a cookie which is stored on the &quot;client&quot; via a call to the server, it is not logical, 
I suggest you read about cookies and how they work. I can give you a very long description about how cookies work but this is not mod_python related.

If you really want to do this (I do not see any reason though). Google on &quot;access cookies from javascript&quot; or do a search on &quot;document.cookie&quot;. Like Firefox (I think FF uses javascript for this too).
you CAN access it locally. Use Firebug (javascript debug plugin) to investigate stuff.

I hope this helps

Martijn



On Mar 4, 2010, at 4:49 PM, V&#237;ctor wrote:

&gt;<i> Dear all,
</I>&gt;<i> 
</I>&gt;<i> I've got a bunch of problems using cookies. First, it seems that if
</I>&gt;<i> you want to store a cookie, you MUST do it before any req.write()
</I>&gt;<i> sentence, isn't it?
</I>&gt;<i> 
</I>&gt;<i> Next... I've managed to store a simple cookie named &quot;login_cookie&quot;
</I>&gt;<i> with value 100. I can see it in the cookies manager in firefox, and it
</I>&gt;<i> has the right value. The cookie has an expiration time of 30 days from
</I>&gt;<i> now.
</I>&gt;<i> 
</I>&gt;<i> The problem is that... it's absolutely impossible to retrieve it from
</I>&gt;<i> the browser.
</I>&gt;<i> 
</I>&gt;<i> I have a small test page with this javascript function (it uses prototype):
</I>&gt;<i> 
</I>&gt;<i> function accessPage(){
</I>&gt;<i> 				new Ajax.Request(access_base_dir+'access', {
</I>&gt;<i> 			
</I>&gt;<i> 					method: 'post',
</I>&gt;<i> 					
</I>&gt;<i> 					onSuccess: function(response) {
</I>&gt;<i> 						$(&quot;resultados&quot;).innerHTML =response.responseText;
</I>&gt;<i> 					},
</I>&gt;<i> 					
</I>&gt;<i> 					onFailure:function(response) {
</I>&gt;<i> 						$(&quot;resultados&quot;).innerHTML= &quot;Failed to access.&quot;+response.responseText;
</I>&gt;<i> 
</I>&gt;<i> 					}
</I>&gt;<i> 				});
</I>&gt;<i> 				
</I>&gt;<i> 			}
</I>&gt;<i> 
</I>&gt;<i> This function just asks 'access' to return the content. 'access' looks
</I>&gt;<i> like this:
</I>&gt;<i> 
</I>&gt;<i> @_session_getter
</I>&gt;<i> def access(req):
</I>&gt;<i> 	
</I>&gt;<i> 	(logged,user_id) = getSessionData(req)
</I>&gt;<i> 	
</I>&gt;<i> 	all_cookies = Cookie.get_cookies(req)
</I>&gt;<i> 	
</I>&gt;<i> 	req.write(&quot;Access: &quot; +str(all_cookies))
</I>&gt;<i> 
</I>&gt;<i> And guess what, it only writes Access: {'pysid': } , the session
</I>&gt;<i> cookie, but &quot;login_cookie&quot; is not anywhere.
</I>&gt;<i> 
</I>&gt;<i> My apache config for this folder is:
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &lt;Directory &quot;htdocs/python/test&quot;&gt;
</I>&gt;<i> 	AddHandler mod_python .py
</I>&gt;<i> 	PythonHandler mod_python.publisher
</I>&gt;<i> 	PythonDebug On
</I>&gt;<i> &lt;/Directory&gt;
</I>&gt;<i> 
</I>&gt;<i> Do you know If I'm missing anything obvious that prevents the cookie
</I>&gt;<i> retrieval to work?
</I>&gt;<i> 
</I>&gt;<i> Thanks!,
</I>&gt;<i> -- 
</I>&gt;<i> 
</I>&gt;<i> V&#237;ctor Gil Sep&#250;lveda
</I>&gt;<i> E. Informatica - FIB - UPC
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>

</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026522.html">[mod_python] About retrieving cookies...
</A></li>
	<LI>Next message: <A HREF="026530.html">[mod_python] ModPython + Virtual Hosting Apache2 instance = poor
	performance.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26524">[ date ]</a>
              <a href="thread.html#26524">[ thread ]</a>
              <a href="subject.html#26524">[ subject ]</a>
              <a href="author.html#26524">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
