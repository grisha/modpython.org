<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] passing parameters from index() to POST method
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20passing%20parameters%20from%20index%28%29%20to%20POST%20method&In-Reply-To=4B8F0338.40107%40mianos.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026516.html">
   <LINK REL="Next"  HREF="026517.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] passing parameters from index() to POST method</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Martijn Moeling</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20passing%20parameters%20from%20index%28%29%20to%20POST%20method&In-Reply-To=4B8F0338.40107%40mianos.com"
       TITLE="[mod_python] passing parameters from index() to POST method">martijn at xs4us.nu
       </A><BR>
    <I>Thu Mar  4 04:58:12 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="026516.html">[mod_python] passing parameters from index() to POST method
</A></li>
        <LI>Next message: <A HREF="026517.html">[mod_python] passing parameters from index() to POST method
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26518">[ date ]</a>
              <a href="thread.html#26518">[ thread ]</a>
              <a href="subject.html#26518">[ subject ]</a>
              <a href="author.html#26518">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I agree with both David and Graham,

Favicon.ico confuses a lot of people and setting HIDDEN PARAMETERS to the form might be a good solution. Indeed global variables are not the way to go since it will go horribly wrong when multiple users are using it, and with a reload (depending on your apache config/multiple processes/maxrequests etc. globals are not set correctly if the post is handled by a different process than the process serving the get of the form)

another small tip is to look at your apache access_log and error_log.

I have never ever seen requests come in twice, and I do a lot of low level HTTP stuff in my work (like building webdav, caldav servers etc.) . Dump your code and the Apache config together with  your access_log and error_log (clear them, and make one request and post)
so we can see what is really going on.

Martijn

On Mar 4, 2010, at 1:47 AM, Rob Fowler wrote:

&gt;<i> From my earlier example, it was not called twice. I made it called twice as suggested here.
</I>&gt;<i> Maybe this is more clear: Ideally I simply want to have an index function to set the stuff up and show the form and another function that gets called when the client does the post (the easy bit) but I want some variables that are set up in the index to be present in the function called on post. Is there a standard way to post variable between the handler and the post functions?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On 4/03/2010 11:41 AM, Graham Dumpleton wrote:
</I>&gt;&gt;<i> On 4 March 2010 11:27, Rob Fowler&lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">legal at mianos.com</A>&gt;  wrote:
</I>&gt;&gt;<i>   
</I>&gt;&gt;&gt;<i> Although that works fine and will call my post function, the apache server
</I>&gt;&gt;&gt;<i> calls the handler a second time so all the local variables are new.
</I>&gt;&gt;&gt;<i>     
</I>&gt;&gt;<i> You better explain that a bit better. The handler function should not
</I>&gt;&gt;<i> be called multiple times for the same request.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Dump out req.uri to see what URL is being accessed on each call. They
</I>&gt;&gt;<i> may actually be two separate requests. This can occur where a web
</I>&gt;&gt;<i> browser keeps requesting a favicon.ico and it doesn't exist.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Graham
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i>   
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026516.html">[mod_python] passing parameters from index() to POST method
</A></li>
	<LI>Next message: <A HREF="026517.html">[mod_python] passing parameters from index() to POST method
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26518">[ date ]</a>
              <a href="thread.html#26518">[ thread ]</a>
              <a href="subject.html#26518">[ subject ]</a>
              <a href="author.html#26518">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
