<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Paramiko connection to SFTP web-based client
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Paramiko%20connection%20to%20SFTP%20web-based%20client&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026555.html">
   <LINK REL="Next"  HREF="026548.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Paramiko connection to SFTP web-based client</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Mark Brown</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Paramiko%20connection%20to%20SFTP%20web-based%20client&In-Reply-To="
       TITLE="[mod_python] Paramiko connection to SFTP web-based client">Mark.Brown at greenskycredit.com
       </A><BR>
    <I>Thu Mar 11 17:09:05 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="026555.html">[mod_python] Session management implementation in mod_python
</A></li>
        <LI>Next message: <A HREF="026548.html">[mod_python] Paramiko connection to SFTP web-based client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26547">[ date ]</a>
              <a href="thread.html#26547">[ thread ]</a>
              <a href="subject.html#26547">[ subject ]</a>
              <a href="author.html#26547">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Sorry that I am really, really new to Python but I have run into a wall and need some help:

Basically, I am trying to create a web-client for a sftp server.

You enter your user name and password and you authenticate against the sftp server, see a list of all the files on the server, can browse the server, and if you click on a link download the file.

I have tried several different methods to keep the network-resource in the session, but nothing thus far has worked. My research seems to indicate that in order to achieve this I would need to write a daemon that handles the connection, and pass the session id to the daemon to match connection to web request.

I have found some articles on how to turn a python script into a daemon, but I need some help understanding what is really going.
Anyways, the script  I have tested thus far using mod_python is below:


from mod_python import apache
from mod_python import Session
import paramiko


def handler(req):
      session=Session.Session(req)
      req.content_type=&quot;text/html&quot;

      try:
            session['hits'] +=1
            #dirlist=session['sftp'].listdir('.')
            req.write('From Session')
      except:
            t=paramiko.Transport(('[SERVER NAME],22))
            t.connect(username='[USER NAME]',password='[PASSWORD]')
            sftp=paramiko.SFTPClient.from_transport(t)
            dirlist = sftp.listdir('.')
            session['hits']=1
            session['sftp']=sftp
            req.write('New Session')

      session.save()
      req.write('Hits %d\n' % session['hits'])
      req.write(dirlist)

      return apache.OK


Mark Brown
Credit &amp; Operations Manager
GreenSky
<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mark.brown at greenskycredit.com</A>&lt;mailto:<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">esmith at greenskycredit.com</A>&gt;
Office: 404.832.4147
Fax: 404.832.4111


________________________________
This electronic message transmission contains information from GreenSky Trade Credit, LLC which may be confidential &amp; privileged. Recipients should not file copies of this e-mail with publicly accessed records. The information is intended to be for the use of the individual(s) named above. If you are not the intended recipient, please be aware that any disclosure, copying, distribution or use of this message is prohibited. If you have received this electronic transmission in error, please notify us by e-mail immediately.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20100311/9da14353/attachment.html">http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20100311/9da14353/attachment.html</A>
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026555.html">[mod_python] Session management implementation in mod_python
</A></li>
	<LI>Next message: <A HREF="026548.html">[mod_python] Paramiko connection to SFTP web-based client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26547">[ date ]</a>
              <a href="thread.html#26547">[ thread ]</a>
              <a href="subject.html#26547">[ subject ]</a>
              <a href="author.html#26547">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
