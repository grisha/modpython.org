<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> Solved: [mod_python] ModPython + Virtual Hosting Apache2 instance
	= poor performance.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=Solved%3A%20%5Bmod_python%5D%20ModPython%20%2B%20Virtual%20Hosting%20Apache2%20instance%0A%09%3D%20poor%20performance.&In-Reply-To=DC09D1ED-01EC-4418-B00E-10DB2CC47FE5%40vindaloo.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026538.html">
   <LINK REL="Next"  HREF="026539.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Solved: [mod_python] ModPython + Virtual Hosting Apache2 instance
	= poor performance.</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=Solved%3A%20%5Bmod_python%5D%20ModPython%20%2B%20Virtual%20Hosting%20Apache2%20instance%0A%09%3D%20poor%20performance.&In-Reply-To=DC09D1ED-01EC-4418-B00E-10DB2CC47FE5%40vindaloo.com"
       TITLE="Solved: [mod_python] ModPython + Virtual Hosting Apache2 instance
	= poor performance.">graham.dumpleton at gmail.com
       </A><BR>
    <I>Mon Mar  8 17:50:31 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="026538.html">Solved: [mod_python] ModPython + Virtual Hosting Apache2 instance =
	poor performance.
</A></li>
        <LI>Next message: <A HREF="026539.html">[mod_python] Upgrading expat for apache question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26541">[ date ]</a>
              <a href="thread.html#26541">[ thread ]</a>
              <a href="subject.html#26541">[ subject ]</a>
              <a href="author.html#26541">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 9 March 2010 04:58, Christopher Sean Hilton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">chris at vindaloo.com</A>&gt; wrote:
&gt;<i> To call it solved would mean that I actually know what going on. This is more of a work around. Here's what I found:
</I>&gt;<i>
</I>&gt;<i> Apache 2.0.63 + mod_python 3.3.1 + python 2.x (threaded)
</I>&gt;<i>
</I>&gt;<i> &#160; yields poor performance under freebsd for static content and dynamic content using php5.
</I>&gt;<i>
</I>&gt;<i> Changing from threaded python to non-threaded python fixes the performance issues.
</I>&gt;<i>
</I>&gt;<i> Django requires threaded python.
</I>
It should perhaps be qualified that Django doesn't require threads to
work and the conservative would run it in single threaded prefork MPM.
Whether it expects the threading module to still be importable is a
different matter though.

&gt;<i> Apache 2.2.21 + the threaded APR from devel/apr + mod_python 3.3.1 + python 2.6 with threads works!
</I>&gt;<i>
</I>&gt;<i> There isn't much difference configuring Apache 2.2 compared to Apache 2.0 but the mod_python port isn't as helpful. It doesn't put the line:
</I>&gt;<i>
</I>&gt;<i> &#160; &#160; LoadModule python_module libexec/apache22/mod_python.so
</I>&gt;<i>
</I>&gt;<i> Into the configuration.
</I>&gt;<i>
</I>&gt;<i> Given that it should also include:
</I>&gt;<i>
</I>&gt;<i> &#160; &#160; &lt;IfModule python_module&gt;
</I>&gt;<i> &#160; &#160; PythonOptimize Off
</I>
That is not a valid option to PythonOptimize and with that value
results would be unpredictable. It is off by default anyway.

&gt;<i> &#160; &#160; PythonDebug Off
</I>
This is also off by default.

&gt;<i> &#160; &#160; &lt;/IfModule&gt;
</I>
In other words, you didn't need either of those definitions.

Graham

&gt;<i> lines in also, that's okay.
</I>&gt;<i>
</I>&gt;<i> Here's the output from Apache:
</I>&gt;<i>
</I>&gt;<i> tatooine apache22 # httpd -V
</I>&gt;<i> httpd -V
</I>&gt;<i> Server version: Apache/2.2.14 (FreeBSD)
</I>&gt;<i> Server built: &#160; Mar &#160;8 2010 12:21:44
</I>&gt;<i> Server's Module Magic Number: 20051115:23
</I>&gt;<i> Server loaded: &#160;APR 1.3.9, APR-Util 1.3.9
</I>&gt;<i> Compiled using: APR 1.3.9, APR-Util 1.3.9
</I>&gt;<i> Architecture: &#160; 32-bit
</I>&gt;<i> Server MPM: &#160; &#160; Prefork
</I>&gt;<i> &#160;threaded: &#160; &#160; no
</I>&gt;<i> &#160; &#160;forked: &#160; &#160; yes (variable process count)
</I>&gt;<i> Server compiled with....
</I>&gt;<i> &#160;-D APACHE_MPM_DIR=&quot;server/mpm/prefork&quot;
</I>&gt;<i> &#160;-D APR_HAS_SENDFILE
</I>&gt;<i> &#160;-D APR_HAS_MMAP
</I>&gt;<i> &#160;-D APR_HAVE_IPV6 (IPv4-mapped addresses enabled)
</I>&gt;<i> &#160;-D APR_USE_FLOCK_SERIALIZE
</I>&gt;<i> &#160;-D APR_USE_PTHREAD_SERIALIZE
</I>&gt;<i> &#160;-D SINGLE_LISTEN_UNSERIALIZED_ACCEPT
</I>&gt;<i> &#160;-D APR_HAS_OTHER_CHILD
</I>&gt;<i> &#160;-D AP_HAVE_RELIABLE_PIPED_LOGS
</I>&gt;<i> &#160;-D DYNAMIC_MODULE_LIMIT=128
</I>&gt;<i> &#160;-D HTTPD_ROOT=&quot;/usr/local&quot;
</I>&gt;<i> &#160;-D SUEXEC_BIN=&quot;/usr/local/bin/suexec&quot;
</I>&gt;<i> &#160;-D DEFAULT_PIDLOG=&quot;/var/run/httpd.pid&quot;
</I>&gt;<i> &#160;-D DEFAULT_SCOREBOARD=&quot;/var/run/apache_runtime_status&quot;
</I>&gt;<i> &#160;-D DEFAULT_LOCKFILE=&quot;/var/run/accept.lock&quot;
</I>&gt;<i> &#160;-D DEFAULT_ERRORLOG=&quot;/var/log/httpd-error.log&quot;
</I>&gt;<i> &#160;-D AP_TYPES_CONFIG_FILE=&quot;etc/apache22/mime.types&quot;
</I>&gt;<i> &#160;-D SERVER_CONFIG_FILE=&quot;etc/apache22/httpd.conf&quot;
</I>&gt;<i>
</I>&gt;<i> -- Chris
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ----------------------------------------------------------------------------
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &quot;There will be an answer, Let it be.&quot;
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">chris at vindaloo.com</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026538.html">Solved: [mod_python] ModPython + Virtual Hosting Apache2 instance =
	poor performance.
</A></li>
	<LI>Next message: <A HREF="026539.html">[mod_python] Upgrading expat for apache question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26541">[ date ]</a>
              <a href="thread.html#26541">[ thread ]</a>
              <a href="subject.html#26541">[ subject ]</a>
              <a href="author.html#26541">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
