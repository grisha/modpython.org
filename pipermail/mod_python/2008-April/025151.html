<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] wrong version?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20wrong%20version%3F&In-Reply-To=5fdbf8630804081943m8b5e3c3y454e600efddaec7d%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025150.html">
   <LINK REL="Next"  HREF="025137.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] wrong version?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20wrong%20version%3F&In-Reply-To=5fdbf8630804081943m8b5e3c3y454e600efddaec7d%40mail.gmail.com"
       TITLE="[mod_python] wrong version?">graham.dumpleton at gmail.com
       </A><BR>
    <I>Wed Apr  9 00:36:35 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="025150.html">[mod_python] wrong version?
</A></li>
        <LI>Next message: <A HREF="025137.html">[mod_python] Importing modules in a new process.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25151">[ date ]</a>
              <a href="thread.html#25151">[ thread ]</a>
              <a href="subject.html#25151">[ subject ]</a>
              <a href="author.html#25151">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>2008/4/9 Kyle Simpson &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">kyle.simpson at gmail.com</A>&gt;:
&gt;<i> Hi Graham
</I>&gt;<i>
</I>&gt;<i> Thanks for all your help on this.
</I>&gt;<i>
</I>&gt;<i> I started over from the tgz and did configure and make.
</I>&gt;<i>
</I>&gt;<i> Turns out that everytime I did make and make install, it wasn't recompiling,
</I>&gt;<i> even though I had different options with ./configure (specifying which
</I>&gt;<i> apache)
</I>
I was wandering if that might be the problem and if you still weren't
having joy was going to make sure you did a:

  make distclean

so as to return it back to how it would have been when you downloaded
it, and for you then to start over. Going back to freshly unpacked tar
file would achieve same thing.

You could also use:

  make clean

This will remove compiled output, but leave result of having running
configure in place so as to avoid running it again.

Graham

&gt;<i> DUH!
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Tue, Apr 8, 2008 at 10:35 PM, Graham Dumpleton
</I>&gt;<i> &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 2008/4/9 Kyle Simpson &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">kyle.simpson at gmail.com</A>&gt;:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; Yes there are header files in /usr/local/apache28/include
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Value is: #define MODULE_MAGIC_COOKIE 0x41503232UL /* &quot;AP22&quot; */
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; In older version, it is:
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; #define MODULE_MAGIC_COOKIE 0x41503232UL /* &quot;AP22&quot; */
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; But that is the same, so how can it be an older version, unless it
</I>&gt;<i> &gt; differs only by patch level. The magic string it complains about is
</I>&gt;<i> &gt; for Apache 2.0 so you must have that installed somewhere.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; How do you determine the -l flags when the compiler is run?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I gave an example:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; /usr/local/apache-2.2.4/bin/apxs
</I>&gt;<i> &gt; -I/Users/grahamd/Projects/mod_python-trunk/src/include
</I>&gt;<i> &gt;
</I>&gt;<i> -I/System/Library/Frameworks/Python.framework/Versions/2.3/include/python2.3
</I>&gt;<i> &gt; -DNDEBUG -Wc,'-arch ppc' -c mod_python.c _apachemodule.c
</I>&gt;<i> &gt; requestobject.c tableobject.c util.c serverobject.c connobject.c
</I>&gt;<i> &gt; filterobject.c hlist.c hlistobject.c finfoobject.c -arch ppc
</I>&gt;<i> &gt; -Wl,-F/System/Library/Frameworks -framework Python -u __dummy -u
</I>&gt;<i> &gt; _PyMac_Error -framework System  -framework CoreServices -framework
</I>&gt;<i> &gt; Foundation -ldl
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; See the -I flags in there.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; You will see this when you run 'make' to build mod_python. Find the
</I>&gt;<i> &gt; equivalent invocation of apxs to compile mod_python when you build it
</I>&gt;<i> &gt; and post that small subset of lines which shows the -I flags.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Graham
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; Thanks.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; On Tue, Apr 8, 2008 at 8:28 PM, Graham Dumpleton
</I>&gt;<i> &gt; &gt; &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; 2008/4/9 Kyle Simpson &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">kyle.simpson at gmail.com</A>&gt;:
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; Any other ideas on this topic?
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; As I said before, the problem is that you are managing to either
</I>&gt;<i> &gt; &gt; &gt; install mod_python.so into the wrong installation or you have compiled
</I>&gt;<i> &gt; &gt; &gt; it against the header files for the wrong version of Apache.
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; The proof of this is that the magic number your mod_python.so has
</I>&gt;<i> equates
</I>&gt;<i> &gt; &gt; to:
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;  #define MODULE_MAGIC_COOKIE 0x41503230UL /* &quot;AP20&quot; */
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; whereas Apache is expecting:
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;  #define MODULE_MAGIC_COOKIE 0x41503232UL /* &quot;AP22&quot; */
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; Do you have header files installed in the following directory?
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;  /usr/local/apache28/include
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; Are those header files readable to the user that you are compiling
</I>&gt;<i> &gt; &gt; mod_python?
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; Look in the header file 'ap_mmn.h' in that directory, what is the
</I>&gt;<i> &gt; &gt; &gt; value of MODULE_MAGIC_COOKIE?
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; Now go find where the header files for your other Apache installation
</I>&gt;<i> &gt; &gt; &gt; are located and find what its value of MODULE_MAGIC_COOKIE is? What
</I>&gt;<i> &gt; &gt; &gt; directory are those header files in?
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; To work out why it is picking up wrong header files, as I suggested
</I>&gt;<i> &gt; &gt; &gt; before, look at the -I flags used when compiler is run on mod_python
</I>&gt;<i> &gt; &gt; &gt; source code. For example on my system I get:
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; /usr/local/apache-2.2.4/bin/apxs
</I>&gt;<i> &gt; &gt; &gt; -I/Users/grahamd/Projects/mod_python-trunk/src/include
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> -I/System/Library/Frameworks/Python.framework/Versions/2.3/include/python2.3
</I>&gt;<i> &gt; &gt; &gt; -DNDEBUG -Wc,'-arch ppc' -c mod_python.c _apachemodule.c
</I>&gt;<i> &gt; &gt; &gt; requestobject.c tableobject.c util.c serverobject.c connobject.c
</I>&gt;<i> &gt; &gt; &gt; filterobject.c hlist.c hlistobject.c finfoobject.c -arch ppc
</I>&gt;<i> &gt; &gt; &gt; -Wl,-F/System/Library/Frameworks -framework Python -u __dummy -u
</I>&gt;<i> &gt; &gt; &gt; _PyMac_Error -framework System  -framework CoreServices -framework
</I>&gt;<i> &gt; &gt; &gt; Foundation -ldl
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; What do you get?
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; Graham
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; httpd: Syntax error on line 55 of
</I>&gt;<i> /usr/local/apache28/conf/httpd.conf:
</I>&gt;<i> &gt; &gt; API
</I>&gt;<i> &gt; &gt; &gt; &gt; module structure 'python_module' in file
</I>&gt;<i> &gt; &gt; &gt; &gt; /usr/local/apache28/modules/mod_python.so is garbled - expected
</I>&gt;<i> &gt; &gt; signature
</I>&gt;<i> &gt; &gt; &gt; &gt; 41503232 but saw 41503230 - perhaps this is not an Apache module
</I>&gt;<i> DSO, or
</I>&gt;<i> &gt; &gt; was
</I>&gt;<i> &gt; &gt; &gt; &gt; compiled for a different Apache version?
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; running on 2.6.9-023stab044.11-smp
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; apache 2.2.8 (second install, which was in /usr/local/apache28
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; python 2.5.2
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; Thanks,
</I>&gt;<i> &gt; &gt; &gt; &gt; Kyle
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; On Tue, Apr 8, 2008 at 7:19 AM, Kyle Simpson
</I>&gt;<i> &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">kyle.simpson at gmail.com</A>&gt;
</I>&gt;<i> &gt; &gt; wrote:
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; 2 versions of apache
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; just ./configure --with-apxs=/usr/local/apache28/bin/apxs
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; I did make install
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; And no, I don't understand the shared library issue.
</I>&gt;<i> Unfortunately
</I>&gt;<i> &gt; &gt; I'm
</I>&gt;<i> &gt; &gt; &gt; &gt; pretty much a noob, since any previous apache haven't required any
</I>&gt;<i> &gt; &gt; modules.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; Thanks for all the help.  Let me know if you have any other ideas.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; On Tue, Apr 8, 2008 at 1:49 AM, Graham Dumpleton
</I>&gt;<i> &gt; &gt; &gt; &gt; &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; What about my other questions:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; How many different versions of Apache do you have installed?
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; What options did you use to 'configure' when building
</I>&gt;<i> mod_python?
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; Did you use the 'install' target to 'make' or copy it by hand?
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; Do you also understand what I am talking about with the shared
</I>&gt;<i> &gt; &gt; library
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; issue, not that it in itself should cause this problem.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; Graham
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; 2008/4/8 Kyle Simpson &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">kyle.simpson at gmail.com</A>&gt;:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; After doing that, new error:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; httpd: Syntax error on line 55 of
</I>&gt;<i> &gt; &gt; /usr/local/apache28/conf/httpd.conf:
</I>&gt;<i> &gt; &gt; &gt; &gt; API
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; module structure 'python_module' in file /usr/loc?
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; line 55 is:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; 55 LoadModule python_module modules/mod_python.so
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; I did reconfigure/compile to see if that helped, but here's
</I>&gt;<i> the ls
</I>&gt;<i> &gt; &gt; -la
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; 2857 -rwxr-xr-x    1 root     root      2911798 Apr  8 01:35
</I>&gt;<i> &gt; &gt; &gt; &gt; mod_python.so
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; file
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; /usr/local/apache28/modules/mod_python.so: ELF 32-bit LSB
</I>&gt;<i> shared
</I>&gt;<i> &gt; &gt; &gt; &gt; object,
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; Intel 80386, version 1 (SYSV), not stripped
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; ldd
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; libpthread.so.0 =&gt; /lib/libpthread.so.0 (0x00111000)
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;         libdl.so.2 =&gt; /lib/libdl.so.2 (0x00826000)
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;         libutil.so.1 =&gt; /lib/libutil.so.1 (0x00162000)
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;         libm.so.6 =&gt; /lib/libm.so.6 (0x00ee8000)
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;          libc.so.6 =&gt; /lib/libc.so.6 (0x00832000)
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;         /lib/ld-linux.so.2 =&gt; /lib/ld-linux.so.2 (0x00411000)
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; On Tue, Apr 8, 2008 at 12:52 AM, Graham Dumpleton
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Did you do a full stop and start of Apache, not just a
</I>&gt;<i> &gt; &gt; &gt; &gt; restart/reload?
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; 2008/4/8 Kyle Simpson &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">kyle.simpson at gmail.com</A>&gt;:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; 2857 -rwxr-xr-x    1 root     root      2911798 Apr  7
</I>&gt;<i> 23:14
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; /usr/local/apache28/modules/mod_python.so
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; /usr/local/apache28/modules/mod_python.so: ELF 32-bit LSB
</I>&gt;<i> &gt; &gt; shared
</I>&gt;<i> &gt; &gt; &gt; &gt; object,
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Intel 80386, version 1 (SYSV), not stripped
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;  libpthread.so.0 =&gt; /lib/libpthread.so.0 (0xb7e54000)
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;         libdl.so.2 =&gt; /lib/libdl.so.2 (0xb7e50000)
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;         libutil.so.1 =&gt; /lib/libutil.so.1 (0xb7e4d000)
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;         libm.so.6 =&gt; /lib/libm.so.6 (0xb7e2c000)
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;          libc.so.6 =&gt; /lib/libc.so.6 (0xb7d09000)
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;         /lib/ld-linux.so.2 =&gt; /lib/ld-linux.so.2
</I>&gt;<i> (0xb7fee000)
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; This all indicates that your Python has not been installed
</I>&gt;<i> with
</I>&gt;<i> &gt; &gt; a
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; shared library and that Python is being linked statically
</I>&gt;<i> into
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; mod_python.so. This is generally not a good as it bloats
</I>&gt;<i> your
</I>&gt;<i> &gt; &gt; Apache
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; processes by a couple of MB in size. It can also cause
</I>&gt;<i> issues,
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; especially when upgrading from older to newer mod_python
</I>&gt;<i> and/or
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; different version of Python. Thus why it is important to do
</I>&gt;<i> a
</I>&gt;<i> &gt; &gt; full
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; stop of Apache when replacing mod_python.so in this case.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; For details of Python shared library issues, see:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;  <A HREF="http://code.google.com/p/modwsgi/wiki/InstallationIssues">http://code.google.com/p/modwsgi/wiki/InstallationIssues</A>
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; This is from mod_wsgi documentation, but same issues apply.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; BTW, one more possibility is if you have multiple versions
</I>&gt;<i> of
</I>&gt;<i> &gt; &gt; Apache
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; installed when mod_python was compiled it used the wrong
</I>&gt;<i> header
</I>&gt;<i> &gt; &gt; &gt; &gt; files.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; How did you install mod_python.so.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; How many different versions of Apache do you have installed?
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; What options did you use to 'configure' when building
</I>&gt;<i> &gt; &gt; mod_python?
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Did you use the 'install' target to 'make' or copy it by
</I>&gt;<i> hand?
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; If copied by hand, maybe it was compiled against wrong
</I>&gt;<i> version
</I>&gt;<i> &gt; &gt; of
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Apache for which you copied it into. You may want tp pay
</I>&gt;<i> very
</I>&gt;<i> &gt; &gt; &gt; &gt; careful
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; attention to the -I flags to compiler when mod_python was
</I>&gt;<i> &gt; &gt; compiled.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Graham
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; On Tue, Apr 8, 2008 at 12:30 AM, Graham Dumpleton
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; What do you get when you run:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;  ls -las /usr/local/apache28/modules/mod_python.so
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; and:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;  file /usr/local/apache28/modules/mod_python.so
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; and:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;  ldd /usr/local/apache28/modules/mod_python.so
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Graham
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; 2008/4/8 Kyle Simpson &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">kyle.simpson at gmail.com</A>&gt;:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Hi Graham,
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Thanks for the quick reply.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; I compiled all 3: python,apache,mod python.  Did not
</I>&gt;<i> use
</I>&gt;<i> &gt; &gt; &gt; &gt; binaries
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; for
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; any of
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; them.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; On Tue, Apr 8, 2008 at 12:22 AM, Graham Dumpleton
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; 2008/4/8 Kyle Simpson &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">kyle.simpson at gmail.com</A>&gt;:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Not sure what to make of this error.  I have
</I>&gt;<i> apache
</I>&gt;<i> &gt; &gt; 2.2.8,
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; python
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; 2.5.2
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; and
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; mod python 3.3.1.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Any ideas?
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; httpd: Syntax error on line 54 of
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; /usr/local/apache28/conf/httpd.conf:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; API
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; module structure 'python_module' in file
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; /usr/local/apache28/modules/mod_python.so is
</I>&gt;<i> garbled -
</I>&gt;<i> &gt; &gt; &gt; &gt; expected
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; signature
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; 41503232 but saw 41503230 - perhaps this is not an
</I>&gt;<i> &gt; &gt; Apache
</I>&gt;<i> &gt; &gt; &gt; &gt; module
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; DSO, or
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; was
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; compiled for a different Apache version?
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Exactly what it means.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Did you compile mod_python yourself for that version
</I>&gt;<i> of
</I>&gt;<i> &gt; &gt; &gt; &gt; Apache or
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; did
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; you just install a binary package from somewhere for
</I>&gt;<i> &gt; &gt; both?
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; I am assuming Apache has a concept of an internal
</I>&gt;<i> ABI
</I>&gt;<i> &gt; &gt; &gt; &gt; number. This
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; is
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; changed whenever the ABI is changed. You may not be
</I>&gt;<i> able
</I>&gt;<i> &gt; &gt; to
</I>&gt;<i> &gt; &gt; &gt; &gt; use a
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; precompiled module from an older version of Apache
</I>&gt;<i> even
</I>&gt;<i> &gt; &gt; if
</I>&gt;<i> &gt; &gt; &gt; &gt; same
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; major/minor version, if this ABI has changed.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Graham
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i>
</I></PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025150.html">[mod_python] wrong version?
</A></li>
	<LI>Next message: <A HREF="025137.html">[mod_python] Importing modules in a new process.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25151">[ date ]</a>
              <a href="thread.html#25151">[ thread ]</a>
              <a href="subject.html#25151">[ subject ]</a>
              <a href="author.html#25151">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
