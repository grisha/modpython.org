<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Setting the python executable
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Setting%20the%20python%20executable&In-Reply-To=88e286470804101537l47e1a848y8603db6de340abb0%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025177.html">
   <LINK REL="Next"  HREF="025184.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Setting the python executable</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Evert Rol</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Setting%20the%20python%20executable&In-Reply-To=88e286470804101537l47e1a848y8603db6de340abb0%40mail.gmail.com"
       TITLE="[mod_python] Setting the python executable">evert.rol at gmail.com
       </A><BR>
    <I>Fri Apr 11 04:14:42 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="025177.html">[mod_python] Setting the python executable
</A></li>
        <LI>Next message: <A HREF="025184.html">[mod_python] Setting the python executable
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25183">[ date ]</a>
              <a href="thread.html#25183">[ thread ]</a>
              <a href="subject.html#25183">[ subject ]</a>
              <a href="author.html#25183">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;&gt;<i> I'm having a hard time telling Apache (or mod_python) to tell which  
</I>&gt;&gt;<i> python
</I>&gt;&gt;<i> executable to use.
</I>&gt;&gt;<i> The thing is, I don't have a root access, so I'm running the Apache  
</I>&gt;&gt;<i> server
</I>&gt;&gt;<i> and python 2.5 under my user account. Both have also been installed  
</I>&gt;&gt;<i> this
</I>&gt;&gt;<i> way, ie, they are in my in the directory tree of my user account.
</I>&gt;&gt;<i> To avoid interference with the older system python (2.3), I just call
</I>&gt;&gt;<i> python with the full path (I try to avoid changing my path, since  
</I>&gt;&gt;<i> some of
</I>&gt;&gt;<i> these scripts run as cron jobs, bypassing a lot of setup files).
</I>&gt;&gt;<i> Bit of debugging (eg, print sys.executable in a mod_python script)  
</I>&gt;&gt;<i> showed,
</I>&gt;&gt;<i> however, that mod_python is still happily using the system python,  
</I>&gt;&gt;<i> not my
</I>&gt;&gt;<i> locally installed. That goes fine up to a certain point, but it  
</I>&gt;&gt;<i> does of
</I>&gt;&gt;<i> course crash in the end. I had compiled mod_python with the --with- 
</I>&gt;&gt;<i> python
</I>&gt;&gt;<i> and --with-apxs options, but looks like that doesn't help here.
</I>&gt;&gt;<i> After some further searching around, I came across the Action  
</I>&gt;&gt;<i> directive for
</I>&gt;&gt;<i> Apache; still didn't work, although that may be simply because I  
</I>&gt;&gt;<i> did that
</I>&gt;&gt;<i> incorrectly.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> For the record, I'm using mod_python for Django, maing things  
</I>&gt;&gt;<i> potentially
</I>&gt;&gt;<i> more convoluted.
</I>&gt;&gt;<i> Here's what my latest attempt at getting this to work (still  
</I>&gt;&gt;<i> failing after
</I>&gt;&gt;<i> plenty of Apache restarts):
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Action thepython-program /home/evert/sw/bin/python2.5
</I>&gt;&gt;<i> # Django directory
</I>&gt;&gt;<i> &lt;Location &quot;/testing/&quot;&gt;
</I>&gt;&gt;<i>    SetHandler thepython-program
</I>&gt;&gt;<i>    PythonHandler django.core.handlers.modpython
</I>&gt;&gt;<i>    SetEnv DJANGO_SETTINGS_MODULE mysite.settings
</I>&gt;&gt;<i>    PythonDebug On
</I>&gt;&gt;<i> &lt;/Location&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I'm beginning to run out of ideas (&amp; Google search terms). Does  
</I>&gt;&gt;<i> anyone have
</I>&gt;&gt;<i> any pointers?
</I>&gt;<i>
</I>&gt;<i> The mod_python module embeds the Python interpreter and so it can only
</I>&gt;<i> use the version you compiled it against, Your attempts therefore to
</I>&gt;<i> use Action are fruitless in that respect, but also because that isn't
</I>&gt;<i> what the Action directive is for.
</I>&gt;<i>
</I>&gt;<i> Please clarify which version of mod_python you are using and which
</I>&gt;<i> version of Python it was actually compiled against. If using
</I>&gt;<i> mod_python 3.3.1 you should see warning/error messages in Apache error
</I>&gt;<i> log on startup when the version of Python that it was compiled against
</I>&gt;<i> was in a non standard location on path of Apache user and thus
</I>&gt;<i> couldn't be found. This though would generally result in complete
</I>&gt;<i> failure, yet you suggest it works for a bit and fails which suggests
</I>&gt;<i> that mod_python isn't compiled against version of Python you want and
</I>&gt;<i> it is your Python code which is incompatible with the version of
</I>&gt;<i> Python that mod_python was compiled for.
</I>
It is 3.3.1, with Python 2.5; the system python at /usr/bin/python is  
2.3. I cannot recall having seen any warning messages in the logs on  
finding the incorrect Python version. And I have absolutely no idea  
why parts of it seemed to work, and then it decided to crash. Looks  
like that had to do with sqlite from within Python, so it could be  
running into sqlite library incompatibilities (I don't know if 2.5 &amp;  
2.3 handle those differently; does 2.3 using the system library, while  
2.5 has it built-in and therefore uses a different version?).
I did manage to solve it with setting the PATH, which, as said, isn't  
my preferred option.

&gt;<i>  <A HREF="https://issues.apache.org/jira/browse/MODPYTHON-225">https://issues.apache.org/jira/browse/MODPYTHON-225</A>
</I>
Yep, that pretty much sums it up. Both the problem I'm having and the  
solution I wanted to achieve (set Apache directive to pick up the  
correct Python, instead of setting PATH). Looks like I just hadn't put  
the right search terms into Google.
I guess I have to make do with it for now.

   Evert

</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025177.html">[mod_python] Setting the python executable
</A></li>
	<LI>Next message: <A HREF="025184.html">[mod_python] Setting the python executable
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25183">[ date ]</a>
              <a href="thread.html#25183">[ thread ]</a>
              <a href="subject.html#25183">[ subject ]</a>
              <a href="author.html#25183">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
