<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] need help solving some performance issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20need%20help%20solving%20some%20performance%20issues&In-Reply-To=20080410185312.GF21749%40pcbsd">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025172.html">
   <LINK REL="Next"  HREF="025166.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] need help solving some performance issues</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Sean Allen</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20need%20help%20solving%20some%20performance%20issues&In-Reply-To=20080410185312.GF21749%40pcbsd"
       TITLE="[mod_python] need help solving some performance issues">sean at monkeysnatchbanana.com
       </A><BR>
    <I>Fri Apr 11 09:00:24 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="025172.html">[mod_python] need help solving some performance issues
</A></li>
        <LI>Next message: <A HREF="025166.html">[mod_python] Setting the python executable
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25188">[ date ]</a>
              <a href="thread.html#25188">[ thread ]</a>
              <a href="subject.html#25188">[ subject ]</a>
              <a href="author.html#25188">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Apr 10, 2008, at 2:53 PM, Culley Harrelson wrote:
&gt;&gt;<i>
</I>&gt;&gt;<i> You might also want to look at caching solutions, especially if you
</I>&gt;&gt;<i> have plenty of RAM :)  You could probably roll your own with  
</I>&gt;&gt;<i> Memcached
</I>&gt;&gt;<i> without too much trouble, and this could potentially ease the load on
</I>&gt;&gt;<i> the CPU quite a bit.
</I>&gt;<i>
</I>&gt;<i> The database load doesn't seem to be really a big problem.  There  
</I>&gt;<i> are hundred
</I>&gt;<i> of thousands of pages, each translated into 6 languages.  I tinkered  
</I>&gt;<i> around
</I>&gt;<i> with mod_cache a bit but it couldn't handle it.
</I>&gt;<i>
</I>
As a better way to tackle that.

We have a mod_perl based application ( that is being transfered to  
mod_python )
and during high load period we found with profiling that there was no  
area
that we could improve it was just the entire process was taking too  
long and
to many reuqests were backing up and eventually either two many apache
processes were launched and swapping and thrashing started or we had  
timeouts.

this on code that took far less than 1 second from start to end. the  
code in question
was mostly dynamically generating html, we spend about 60 minutes  
rewriting the code
to store the final output for each different dynamic request in  
memcache and configuring
out front end nginx server to do the following:

check for file
check in memcache
check with application

the 2nd step was the new part and we havent had a peep since then.  
server load ( debian linux )
hasnt crossed much beyond .5 since then and is usually below .3

as a bonus, our client side response time went down because the front  
end static server is competing
less with the dynamic server for cpu time.

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025172.html">[mod_python] need help solving some performance issues
</A></li>
	<LI>Next message: <A HREF="025166.html">[mod_python] Setting the python executable
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25188">[ date ]</a>
              <a href="thread.html#25188">[ thread ]</a>
              <a href="subject.html#25188">[ subject ]</a>
              <a href="author.html#25188">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
