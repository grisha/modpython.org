<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] need help solving some performance issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20need%20help%20solving%20some%20performance%20issues&In-Reply-To=009701c89b78%2444ecce90%24cec66bb0%24%40com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025179.html">
   <LINK REL="Next"  HREF="025167.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] need help solving some performance issues</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20need%20help%20solving%20some%20performance%20issues&In-Reply-To=009701c89b78%2444ecce90%24cec66bb0%24%40com"
       TITLE="[mod_python] need help solving some performance issues">graham.dumpleton at gmail.com
       </A><BR>
    <I>Thu Apr 10 22:28:57 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="025179.html">[mod_python] need help solving some performance issues
</A></li>
        <LI>Next message: <A HREF="025167.html">[mod_python] need help solving some performance issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25180">[ date ]</a>
              <a href="thread.html#25180">[ thread ]</a>
              <a href="subject.html#25180">[ subject ]</a>
              <a href="author.html#25180">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Larger CPU caches will always help, even with prefork. It is more to
do with how much stuff can be kept in near memory vs having to go to
standard memory. Unfortunately a high level language like Python cant
really utilise CPU caches as well as they could be as C/C++ where
direct control of layout of data in memory is possible.

Graham

2008/4/11 Alec Matusis &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">matusis at yahoo.com</A>&gt;:
&gt;<i> From my experience, with worker MPM not only multiple cores helps, but I
</I>&gt;<i>  think larger L2 cache helps a lot.
</I>&gt;<i>  I suspect it has to do with context switching- perhaps data from several
</I>&gt;<i>  threads can be kept in L2.
</I>&gt;<i>
</I>&gt;<i>  I have two almost identical servers serving same requests (load balancing),
</I>&gt;<i>  first with 2x 2.66GHz Xeons with 512KB L2 , and second with 2x 3.0GHz Xeons
</I>&gt;<i>  with 1MB L2. The performance of the second server is much better than what I
</I>&gt;<i>  would expect from 2.66/3.0 GHz ratio.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  &gt; -----Original Message-----
</I>&gt;<i>  &gt; From: <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python-bounces at modpython.org</A> [mailto:mod_python-
</I>&gt;<i>  &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">bounces at modpython.org</A>] On Behalf Of Graham Dumpleton
</I>&gt;<i>  &gt; Sent: Thursday, April 10, 2008 3:48 PM
</I>&gt;<i>  &gt; To: Culley Harrelson
</I>&gt;<i>  &gt; Cc: <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython.org</A>
</I>&gt;<i>  &gt; Subject: Re: [mod_python] need help solving some performance issues
</I>&gt;<i>  &gt;
</I>&gt;<i>  &gt; 2008/4/11 Culley Harrelson &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">harrelson at gmail.com</A>&gt;:
</I>&gt;<i>  &gt; &gt;
</I>&gt;<i>  &gt; &gt;  I have no experience with dual cpu machines though-- this is part of
</I>&gt;<i>  &gt; my
</I>&gt;<i>  &gt; &gt;  concern.  I manage 6 production FreeBSD servers but they are all
</I>&gt;<i>  &gt; single cpu
</I>&gt;<i>  &gt; &gt;  systems.  If apache is in prefork mode 2 cpus is just extra
</I>&gt;<i>  &gt; processing power
</I>&gt;<i>  &gt; &gt;  right?!?
</I>&gt;<i>  &gt;
</I>&gt;<i>  &gt; Even if you were using worker MPM and multithreaded applications,
</I>&gt;<i>  &gt; multiple CPUs or cores will help with Apache, because it would still
</I>&gt;<i>  &gt; be running as a multiprocess application and a lot of stuff happens in
</I>&gt;<i>  &gt; C code also which is capable of being spread across multiple CPUs or
</I>&gt;<i>  &gt; cores.
</I>&gt;<i>  &gt;
</I>&gt;<i>  &gt; For Apache on UNIX boxes at least, the Python GIL is not the big
</I>&gt;<i>  &gt; problem that the many people make it out to be. See:
</I>&gt;<i>  &gt;
</I>&gt;<i>  &gt;   <A HREF="http://blog.dscpl.com.au/2007/09/parallel-python-discussion-and-">http://blog.dscpl.com.au/2007/09/parallel-python-discussion-and-</A>
</I>&gt;<i>  &gt; modwsgi.html
</I>&gt;<i>  &gt;   <A HREF="http://blog.dscpl.com.au/2007/07/web-hosting-landscape-and-">http://blog.dscpl.com.au/2007/07/web-hosting-landscape-and-</A>
</I>&gt;<i>  &gt; modwsgi.html
</I>&gt;<i>  &gt;
</I>&gt;<i>  &gt; Graham
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i>  &gt; Mod_python mailing list
</I>&gt;<i>  &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i>  &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025179.html">[mod_python] need help solving some performance issues
</A></li>
	<LI>Next message: <A HREF="025167.html">[mod_python] need help solving some performance issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25180">[ date ]</a>
              <a href="thread.html#25180">[ thread ]</a>
              <a href="subject.html#25180">[ subject ]</a>
              <a href="author.html#25180">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
