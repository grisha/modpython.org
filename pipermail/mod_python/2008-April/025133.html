<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] wrong version?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20wrong%20version%3F&In-Reply-To=5fdbf8630804072142lb33ed89s35ef6fbafa1cee24%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025132.html">
   <LINK REL="Next"  HREF="025134.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] wrong version?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20wrong%20version%3F&In-Reply-To=5fdbf8630804072142lb33ed89s35ef6fbafa1cee24%40mail.gmail.com"
       TITLE="[mod_python] wrong version?">graham.dumpleton at gmail.com
       </A><BR>
    <I>Tue Apr  8 00:52:05 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="025132.html">[mod_python] wrong version?
</A></li>
        <LI>Next message: <A HREF="025134.html">[mod_python] wrong version?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25133">[ date ]</a>
              <a href="thread.html#25133">[ thread ]</a>
              <a href="subject.html#25133">[ subject ]</a>
              <a href="author.html#25133">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Did you do a full stop and start of Apache, not just a restart/reload?

2008/4/8 Kyle Simpson &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">kyle.simpson at gmail.com</A>&gt;:
&gt;<i> 2857 -rwxr-xr-x    1 root     root      2911798 Apr  7 23:14
</I>&gt;<i> /usr/local/apache28/modules/mod_python.so
</I>&gt;<i>
</I>&gt;<i> /usr/local/apache28/modules/mod_python.so: ELF 32-bit LSB shared object,
</I>&gt;<i> Intel 80386, version 1 (SYSV), not stripped
</I>&gt;<i>
</I>&gt;<i>  libpthread.so.0 =&gt; /lib/libpthread.so.0 (0xb7e54000)
</I>&gt;<i>         libdl.so.2 =&gt; /lib/libdl.so.2 (0xb7e50000)
</I>&gt;<i>         libutil.so.1 =&gt; /lib/libutil.so.1 (0xb7e4d000)
</I>&gt;<i>         libm.so.6 =&gt; /lib/libm.so.6 (0xb7e2c000)
</I>&gt;<i>          libc.so.6 =&gt; /lib/libc.so.6 (0xb7d09000)
</I>&gt;<i>         /lib/ld-linux.so.2 =&gt; /lib/ld-linux.so.2 (0xb7fee000)
</I>
This all indicates that your Python has not been installed with a
shared library and that Python is being linked statically into
mod_python.so. This is generally not a good as it bloats your Apache
processes by a couple of MB in size. It can also cause issues,
especially when upgrading from older to newer mod_python and/or
different version of Python. Thus why it is important to do a full
stop of Apache when replacing mod_python.so in this case.

For details of Python shared library issues, see:

  <A HREF="http://code.google.com/p/modwsgi/wiki/InstallationIssues">http://code.google.com/p/modwsgi/wiki/InstallationIssues</A>

This is from mod_wsgi documentation, but same issues apply.

BTW, one more possibility is if you have multiple versions of Apache
installed when mod_python was compiled it used the wrong header files.
How did you install mod_python.so.

How many different versions of Apache do you have installed?

What options did you use to 'configure' when building mod_python?

Did you use the 'install' target to 'make' or copy it by hand?

If copied by hand, maybe it was compiled against wrong version of
Apache for which you copied it into. You may want tp pay very careful
attention to the -I flags to compiler when mod_python was compiled.

Graham

&gt;<i> On Tue, Apr 8, 2008 at 12:30 AM, Graham Dumpleton
</I>&gt;<i> &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; What do you get when you run:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;  ls -las /usr/local/apache28/modules/mod_python.so
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; and:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;  file /usr/local/apache28/modules/mod_python.so
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; and:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;  ldd /usr/local/apache28/modules/mod_python.so
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Graham
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 2008/4/8 Kyle Simpson &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">kyle.simpson at gmail.com</A>&gt;:
</I>&gt;<i> &gt; &gt; Hi Graham,
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Thanks for the quick reply.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; I compiled all 3: python,apache,mod python.  Did not use binaries for
</I>&gt;<i> any of
</I>&gt;<i> &gt; &gt; them.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; On Tue, Apr 8, 2008 at 12:22 AM, Graham Dumpleton
</I>&gt;<i> &gt; &gt; &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; 2008/4/8 Kyle Simpson &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">kyle.simpson at gmail.com</A>&gt;:
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; Not sure what to make of this error.  I have apache 2.2.8, python
</I>&gt;<i> 2.5.2
</I>&gt;<i> &gt; &gt; and
</I>&gt;<i> &gt; &gt; &gt; &gt; mod python 3.3.1.
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; Any ideas?
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; httpd: Syntax error on line 54 of
</I>&gt;<i> /usr/local/apache28/conf/httpd.conf:
</I>&gt;<i> &gt; &gt; API
</I>&gt;<i> &gt; &gt; &gt; &gt; module structure 'python_module' in file
</I>&gt;<i> &gt; &gt; &gt; &gt; /usr/local/apache28/modules/mod_python.so is garbled - expected
</I>&gt;<i> &gt; &gt; signature
</I>&gt;<i> &gt; &gt; &gt; &gt; 41503232 but saw 41503230 - perhaps this is not an Apache module
</I>&gt;<i> DSO, or
</I>&gt;<i> &gt; &gt; was
</I>&gt;<i> &gt; &gt; &gt; &gt; compiled for a different Apache version?
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; Exactly what it means.
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; Did you compile mod_python yourself for that version of Apache or did
</I>&gt;<i> &gt; &gt; &gt; you just install a binary package from somewhere for both?
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; I am assuming Apache has a concept of an internal ABI number. This is
</I>&gt;<i> &gt; &gt; &gt; changed whenever the ABI is changed. You may not be able to use a
</I>&gt;<i> &gt; &gt; &gt; precompiled module from an older version of Apache even if same
</I>&gt;<i> &gt; &gt; &gt; major/minor version, if this ABI has changed.
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; Graham
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i>
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025132.html">[mod_python] wrong version?
</A></li>
	<LI>Next message: <A HREF="025134.html">[mod_python] wrong version?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25133">[ date ]</a>
              <a href="thread.html#25133">[ thread ]</a>
              <a href="subject.html#25133">[ subject ]</a>
              <a href="author.html#25133">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
