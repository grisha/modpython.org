<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] importing from package under mod_python.publisher
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20importing%20from%20package%20under%20mod_python.publisher&In-Reply-To=e34a76360804131854m337a76aamf0f424f1ff1056cf%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025191.html">
   <LINK REL="Next"  HREF="025193.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] importing from package under mod_python.publisher</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20importing%20from%20package%20under%20mod_python.publisher&In-Reply-To=e34a76360804131854m337a76aamf0f424f1ff1056cf%40mail.gmail.com"
       TITLE="[mod_python] importing from package under mod_python.publisher">graham.dumpleton at gmail.com
       </A><BR>
    <I>Sun Apr 13 22:12:42 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="025191.html">[mod_python] importing from package under mod_python.publisher
</A></li>
        <LI>Next message: <A HREF="025193.html">[mod_python] importing from package under mod_python.publisher
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25192">[ date ]</a>
              <a href="thread.html#25192">[ thread ]</a>
              <a href="subject.html#25192">[ subject ]</a>
              <a href="author.html#25192">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>2008/4/14 Sergiy Kuzmenko &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">s.kuzmenko at gmail.com</A>&gt;:
&gt;<i> Hi everybody,
</I>&gt;<i>
</I>&gt;<i>  Question about importing from package under mod_python.publisher.
</I>&gt;<i>
</I>&gt;<i>  Consider the following directory structure:
</I>&gt;<i>
</I>&gt;<i>  py
</I>&gt;<i>     foo
</I>&gt;<i>         __init__.py
</I>&gt;<i>         bar.py
</I>&gt;<i>     boo.py
</I>&gt;<i>     test.py
</I>&gt;<i>
</I>&gt;<i>  Let's say we have the following in test.py:
</I>&gt;<i>
</I>&gt;<i>   import boo
</I>&gt;<i>   import foo.bar
</I>&gt;<i>
</I>&gt;<i>  When running test.py from command line this works fine. However, under
</I>&gt;<i>  mod_python only &quot;import boo&quot; works and importing from a subdirectory
</I>&gt;<i>  via &quot;import foo.bar&quot; produces ImportError: No module named foo.
</I>&gt;<i>
</I>&gt;<i>  This seems to be a deviation form the standard python's behaviour.
</I>&gt;<i>
</I>&gt;<i>  What is even more confusing that mod_python manual
</I>&gt;<i>  (<A HREF="http://modpython.org/live/current/doc-html/tut-what-it-do.html">http://modpython.org/live/current/doc-html/tut-what-it-do.html</A>)
</I>&gt;<i>  states the following when describing the PythonHandler directive: &quot;If
</I>&gt;<i>  not already done, prepend the directory in which the PythonHandler
</I>&gt;<i>  directive was found to sys.path&quot;.
</I>
The documentation is no longer accurate then. It would be helpful if
you can create an issue at:

  <A HREF="https://issues.apache.org/jira/browse/MODPYTHON">https://issues.apache.org/jira/browse/MODPYTHON</A>

pointing out this part of documentation and that it may be wrong.

&gt;<i>  When inspecting sys.path from a publisher defined like this:
</I>&gt;<i>
</I>&gt;<i>  &lt;Directory /path/to/the/webroot/py&gt;
</I>&gt;<i>   AddHandler mod_python .py
</I>&gt;<i>   PythonHandler publisher
</I>&gt;<i>   PythonDebug On
</I>&gt;<i>  &lt;/Directory&gt;
</I>&gt;<i>
</I>&gt;<i>  /path/to/the/webroot/py is actually not the system path!
</I>
Read documentation for import_module() in:

  <A HREF="http://www.modpython.org/live/current/doc-html/pyapi-apmeth.html">http://www.modpython.org/live/current/doc-html/pyapi-apmeth.html</A>

This is what is used my mod_python module importer. It was rewritten
for mod_python 3.3.1 and one way in which it is different is that
directories are not added to sys.path for handler directory now. As a
consequence of this and how module importer path and sys.path are kept
separate, you can't/shouldn't go installing Python packages in the
document tree for your application.

The simple answer therefore is to place your Python package outside of
the document tree and extend sys.path directly or by using PythonPath
to refer to that other directory location.

Graham
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025191.html">[mod_python] importing from package under mod_python.publisher
</A></li>
	<LI>Next message: <A HREF="025193.html">[mod_python] importing from package under mod_python.publisher
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25192">[ date ]</a>
              <a href="thread.html#25192">[ thread ]</a>
              <a href="subject.html#25192">[ subject ]</a>
              <a href="author.html#25192">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
