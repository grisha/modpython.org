<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] mod_wsgi (pid=88536): Unable to change working 
	directory
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_wsgi%20%28pid%3D88536%29%3A%20Unable%20to%20change%20working%20%0A%09directory&In-Reply-To=4B4CFB42.1040208%40elasticmind.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026447.html">
   <LINK REL="Next"  HREF="026450.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] mod_wsgi (pid=88536): Unable to change working 
	directory</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_wsgi%20%28pid%3D88536%29%3A%20Unable%20to%20change%20working%20%0A%09directory&In-Reply-To=4B4CFB42.1040208%40elasticmind.net"
       TITLE="[mod_python] mod_wsgi (pid=88536): Unable to change working 
	directory">graham.dumpleton at gmail.com
       </A><BR>
    <I>Tue Jan 12 17:55:08 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="026447.html">[mod_python] mod_wsgi (pid=88536): Unable to change working
	directory
</A></li>
        <LI>Next message: <A HREF="026450.html">[mod_python] mod_wsgi (pid=88536): Unable to change working 
	directory
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26449">[ date ]</a>
              <a href="thread.html#26449">[ thread ]</a>
              <a href="subject.html#26449">[ subject ]</a>
              <a href="author.html#26449">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>2010/1/13 mog &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">lists at elasticmind.net</A>&gt;:
&gt;<i> On 12/01/2010 21:24, mog wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Hi,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I'm seeing this error in my main Apache log when I switched to using
</I>&gt;&gt;<i> daemon mode:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> [Tue Jan 12 21:13:47 2010] [alert] (2)No such file or directory: mod_wsgi
</I>&gt;&gt;<i> (pid=88536): Unable to change working directory to '/nonexistent'.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Not sure why it would be happening though, why mod_wsgi would need to
</I>&gt;&gt;<i> change directories, or what the &quot;correct&quot; solution is? If someone could
</I>&gt;&gt;<i> please point me in the right direction, it would be greatly appreciated.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks,
</I>&gt;&gt;<i> mog
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I read that mod_wsgi's daemon mode is the way forward, so let's &quot;make it
</I>&gt;<i> so&quot;. It doesn't seem to want to play nicely though.
</I>&gt;<i>
</I>&gt;<i> The 'unable to change working directory' problems sort of go away if I
</I>&gt;<i> specify 'WSGIDaemonProcess home=/root', but that just doesn't feel right to
</I>&gt;<i> me. Is there something more appropriate I should be using for that?
</I>
By rights it perhaps shouldn't be an alert but a warning. You can ignore it.

It occurs because in daemon mode mod_wsgi will change working
directory to the home directory of the user that the daemon process
runs as. On your system, the default Apache user doesn't have a home
directory and so the message. It will not stop anything from working.

If you really want to get rid of it, then override home as you have
done, setting it to '/tmp' even. Alternatively, create a dedicated
user, or use another existing user account that does have a home
directory, specifying the user/group options to WSGIDaemonProcess so
that the daemon process runs as that user and not the default Apache
user.

&gt;<i> My Apache vhost config is pretty normal with these WSGI specifics in:
</I>&gt;<i>
</I>&gt;<i> &#160; &#160;WSGIDaemonProcess meow.elasticmind.net processes=1 threads=5 home=/root
</I>&gt;<i> display-name=%{GROUP}
</I>&gt;<i> &#160; &#160;WSGIProcessGroup meow.elasticmind.net
</I>&gt;<i> &#160; &#160;WSGIApplicationGroup %{GLOBAL}
</I>&gt;<i> &#160; &#160;WSGIScriptAlias / /home/test/trunk/test/test.wsgi
</I>&gt;<i>
</I>&gt;<i> These are all present inside the VirtualHost directive but not contained
</I>&gt;<i> within any Directory directives etc.
</I>&gt;<i>
</I>&gt;<i> Unfortunately though, it doesn't seem happy with these things. The only
</I>&gt;<i> error messages I'm seeing are these:
</I>&gt;<i>
</I>&gt;<i> &#160; &#160;[error] Script timed out before returning headers: test.wsgi
</I>&gt;<i>
</I>&gt;<i> The content of test.wsgi is:
</I>&gt;<i>
</I>&gt;<i> def application(environ, start_response):
</I>&gt;<i> &#160; &#160;status = '200 OK'
</I>&gt;<i> &#160; &#160;output = 'Hello World!'
</I>&gt;<i> &#160; &#160;response_headers = [('Content-type', 'text/plain'),
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;('Content-Length', str(len(output)))]
</I>&gt;<i> &#160; &#160;start_response(status, response_headers)
</I>&gt;<i> &#160; &#160;return [output]
</I>&gt;<i>
</I>&gt;<i> So without the DaemonProcess process stuff, this works absolutely fine. With
</I>&gt;<i> the daemon mode process stuff, it breaks :(
</I>
Are you still loading mod_python into same Apache?

You likely have a conflicting version of mod_python loaded which is
causing problems. Disable mod_python and try again.

Please use mod_wsgi list in future as I already pointed out.

Graham

</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026447.html">[mod_python] mod_wsgi (pid=88536): Unable to change working
	directory
</A></li>
	<LI>Next message: <A HREF="026450.html">[mod_python] mod_wsgi (pid=88536): Unable to change working 
	directory
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26449">[ date ]</a>
              <a href="thread.html#26449">[ thread ]</a>
              <a href="subject.html#26449">[ subject ]</a>
              <a href="author.html#26449">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
