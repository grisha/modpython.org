<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] mod_python.Session freezes with apache 2
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python.Session%20freezes%20with%20apache%202&In-Reply-To=478da2591001201808x5499f166q857bea963118bf93%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026460.html">
   <LINK REL="Next"  HREF="026462.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] mod_python.Session freezes with apache 2</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python.Session%20freezes%20with%20apache%202&In-Reply-To=478da2591001201808x5499f166q857bea963118bf93%40mail.gmail.com"
       TITLE="[mod_python] mod_python.Session freezes with apache 2">graham.dumpleton at gmail.com
       </A><BR>
    <I>Wed Jan 20 23:42:21 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="026460.html">[mod_python] mod_python.Session freezes with apache 2
</A></li>
        <LI>Next message: <A HREF="026462.html">[mod_python] mod_python.Session freezes with apache 2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26461">[ date ]</a>
              <a href="thread.html#26461">[ thread ]</a>
              <a href="subject.html#26461">[ subject ]</a>
              <a href="author.html#26461">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>2010/1/21 Rapha&#235;l B. &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">nashii at gmail.com</A>&gt;:
&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i> I'm attempting to create some web application with mod_python, but as soon
</I>&gt;<i> as I call one attribute/method that is linked to the session module, the
</I>&gt;<i> navigator is &quot;freezing&quot; (not exactly, in fact, it is searching the webpage,
</I>&gt;<i> and searching, and searching ...)
</I>&gt;<i>
</I>&gt;<i> I'm working with mod_python.psp in apache, but I have tried with
</I>&gt;<i> mod_python.publisher too, and neither is working ...
</I>&gt;<i>
</I>&gt;<i> psp: there is just that in the page:
</I>&gt;<i>
</I>&gt;<i> &lt;%
</I>&gt;<i> if not hasattr(req,'session'):
</I>&gt;<i> &#160;&#160;&#160; req.session = Session.Session(req)
</I>
The session object is already created for you by PSP so these lines
should not be needed.

&gt;<i> if req.session.is_new():
</I>&gt;<i> &#160;&#160;&#160; req.write(&quot;Hello !&quot;)
</I>&gt;<i> %&gt;
</I>
You should though from memory only be accessing session object as
'session' and not 'req.session'. This is because PSP will look for the
fact that 'session' is used and use that as a basis of creating it for
you.

It is possible that the way you are doing this is deadlocking the
request on itself as you can't have one request create two session
objects.

Once it is deadlocked like that, even if you close the browser it says
deadlocked and so further requests will also be locked out.

Thus, fix the code, restart Apache to get rid of deadlock and start over.

&gt;<i> and publisher:
</I>&gt;<i>
</I>&gt;<i> #!/usr/bin/python
</I>
You don't need the above line.

&gt;<i> # -*- coding: iso-8859-1 -*-
</I>&gt;<i>
</I>&gt;<i> import sys
</I>&gt;<i> from mod_python import apache, util, Session
</I>&gt;<i>
</I>&gt;<i> def index(req):
</I>&gt;<i> &#160;&#160;&#160; req.content_type = &quot;text/plain; charset=iso-8859-1&quot;
</I>&gt;<i> &#160;&#160;&#160; req.send_http_header()
</I>&gt;<i> &#160;&#160;&#160; req.write(&quot;Hello world!\n&quot;)
</I>&gt;<i> &#160;&#160;&#160; sess = Session.Session(req)
</I>
As a guideline, always save session as 'req.session'. Further, if
needing to create/access sessions in sub functions, always a good idea
to use the pattern:

  def function(req):
    if not hasattr(req, 'session'):
      req.session = Session.Session(req)

If you don't do this, you risk deadlocking on yourself again.

Graham

&gt;<i> &#160;&#160;&#160; return &quot;Bye bye!&quot;
</I>&gt;<i>
</I>&gt;<i> Both are freezing.
</I>&gt;<i>
</I>&gt;<i> I think my head will explode if it continue &gt;&lt;
</I>&gt;<i>
</I>&gt;<i> Could you please help me ? Perhaps apache is misconfigured for mod_python ?
</I>&gt;<i> Could you give me some way to correct the problem ?
</I>&gt;<i>
</I>&gt;<i> Thank you very much,
</I>&gt;<i> Rapha&#235;l
</I>&gt;<i>
</I>&gt;<i> PS: Excuse me for my english, i'm French.
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I>&gt;<i>
</I>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026460.html">[mod_python] mod_python.Session freezes with apache 2
</A></li>
	<LI>Next message: <A HREF="026462.html">[mod_python] mod_python.Session freezes with apache 2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26461">[ date ]</a>
              <a href="thread.html#26461">[ thread ]</a>
              <a href="subject.html#26461">[ subject ]</a>
              <a href="author.html#26461">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
