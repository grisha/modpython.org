<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Problem with PSP and unicode
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Problem%20with%20PSP%20and%20unicode&In-Reply-To=43F48269.3050409%40q-voz.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020299.html">
   <LINK REL="Next"  HREF="020307.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Problem with PSP and unicode</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Dan Eloff</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Problem%20with%20PSP%20and%20unicode&In-Reply-To=43F48269.3050409%40q-voz.com"
       TITLE="[mod_python] Problem with PSP and unicode">dan.eloff at gmail.com
       </A><BR>
    <I>Thu Feb 16 12:10:09 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020299.html">[mod_python] Problem with PSP and unicode
</A></li>
        <LI>Next message: <A HREF="020307.html">[mod_python] Problem with PSP and unicode
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20305">[ date ]</a>
              <a href="thread.html#20305">[ thread ]</a>
              <a href="subject.html#20305">[ subject ]</a>
              <a href="author.html#20305">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Gustavo, here's an example. Suppose some code enforces a maximum length on a
string. If it's counting on a default encoding of 1 byte per char, and does
something like len(s) &lt;= 15. For ascii or iso-8859-1 this would work. Or the
code might use indices or slices (and a lot of code does!) If suddenly you
have utf-8 encoded chinese, your string is going to triple in length, and
those functions will have unpredictable behaviour. You could think of any
number of scenarios, even in the python library. I just wouldn't feel
confortable about changing the default encoding, you never know where it
will come back to haunt you. What's so hard about using unicode strings in
your program and then encoding when you send output somewhere?

Of course, like we've noticed in this thread, there is third party code that
just isn't unicode safe like psp in mod_python that will break if you don't
mess with the default encoding. It all boils down to seeing what will work
best in your situation. For myself I would rather do it the right way up
front in the hopes of saving hassles down the road.

-Dan

On 2/16/06, Gustavo C&#243;rdova Avila &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">gustavo.cordova at q-voz.com</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> Dan Eloff wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; Gustavo
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &quot;So, if you can configure your default encoding&quot;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; That would be a bad idea. You don't want to force the interpreter to
</I>&gt;<i> &gt; use a different encoding, it could cause you all manner of grief with
</I>&gt;<i> &gt; code that wasn't written for that, and if it's third party code you
</I>&gt;<i> &gt; can't do much about anything that does break.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Hi Dan, thanks for replying.
</I>&gt;<i>
</I>&gt;<i> Do you have any examples of the above?  I haven't had any troubles
</I>&gt;<i> whatsoever using a default encoding, even when the script source is
</I>&gt;<i> different from the default encoding (I always use the &quot;-*- coding: xxx
</I>&gt;<i> -*-&quot; bit at the top of the source file), so while I don't doubt at all
</I>&gt;<i> what you're saying, having a practical case where fiddling with the
</I>&gt;<i> default encoding breaks things is good.
</I>&gt;<i>
</I>&gt;<i> Good morning, y'all.
</I>&gt;<i>
</I>&gt;<i> -gus
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20060216/04cef624/attachment.html">http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20060216/04cef624/attachment.html</A>
</PRE>


















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020299.html">[mod_python] Problem with PSP and unicode
</A></li>
	<LI>Next message: <A HREF="020307.html">[mod_python] Problem with PSP and unicode
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20305">[ date ]</a>
              <a href="thread.html#20305">[ thread ]</a>
              <a href="subject.html#20305">[ subject ]</a>
              <a href="author.html#20305">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
