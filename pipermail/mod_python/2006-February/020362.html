<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] High Traffic Round 2
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20High%20Traffic%20Round%202&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020361.html">
   <LINK REL="Next"  HREF="020367.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] High Traffic Round 2</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Marc D. Murray</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20High%20Traffic%20Round%202&In-Reply-To="
       TITLE="[mod_python] High Traffic Round 2">marcdm at phronein.com
       </A><BR>
    <I>Mon Feb 20 00:37:18 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020361.html">[mod_python] Apache crashing
</A></li>
        <LI>Next message: <A HREF="020367.html">[mod_python] High Traffic Round 2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20362">[ date ]</a>
              <a href="thread.html#20362">[ thread ]</a>
              <a href="subject.html#20362">[ subject ]</a>
              <a href="author.html#20362">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Here we go again with me and my high traffic site that I'm attempting to
deploy using mod_python.

After a VERY stressful week, with a site that goes down every 2 - 5 hrs,
I decided to move away from mod_python.publisher and Sessions totally.

I wrote my own handler that decides which module/page to load based on
the 1st part of the URL. 

After deciding, it loads the module using __import__(module_name)
and executes a function named _dispatch which all of my modules have.

However, it is VERY VERY SLOW. It works fine on my local server but goes
at snail's pace on the production server. 

My home server is an Athlon 1Ghz w/256MB RAM and the production box has
a celeron 2.6 with 512MB RAM.

I'm using memcached to store generated pages, and the cache is managed
by the handler. The memcached client I'm using is the same one python
one linked from the memcached homepage. This means that if a page has
been cached, the module won't even be imported before the output is
grabbed from cache.

So basically, I've designed this thing the best way I know how. I can't
think of any way to make it any more efficient but it still doesn't work
as expected.

I'm really f**king tired right now. and my head hurts.

Marc DM.

PS. Where's the mod_python irc channel? 


</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020361.html">[mod_python] Apache crashing
</A></li>
	<LI>Next message: <A HREF="020367.html">[mod_python] High Traffic Round 2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20362">[ date ]</a>
              <a href="thread.html#20362">[ thread ]</a>
              <a href="subject.html#20362">[ subject ]</a>
              <a href="author.html#20362">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
