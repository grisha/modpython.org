<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Problem with PSP and unicode
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Problem%20with%20PSP%20and%20unicode&In-Reply-To=4817b6fc0602160910u262a4c7el61041f5a662780e5%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020314.html">
   <LINK REL="Next"  HREF="020300.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Problem with PSP and unicode</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Gustavo C&#243;rdova Avila</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Problem%20with%20PSP%20and%20unicode&In-Reply-To=4817b6fc0602160910u262a4c7el61041f5a662780e5%40mail.gmail.com"
       TITLE="[mod_python] Problem with PSP and unicode">gustavo.cordova at q-voz.com
       </A><BR>
    <I>Thu Feb 16 12:40:29 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020314.html">[mod_python] Problem with PSP and unicode
</A></li>
        <LI>Next message: <A HREF="020300.html">[mod_python] Documentation error: request.user not read-only
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20310">[ date ]</a>
              <a href="thread.html#20310">[ thread ]</a>
              <a href="subject.html#20310">[ subject ]</a>
              <a href="author.html#20310">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> Dan Eloff wrote: Gustavo, here's an example. Suppose some code 
</I>&gt;<i> enforces a maximum length on a string. If it's counting on a default 
</I>&gt;<i> encoding of 1 byte per char, and does something like len(s) &lt;= 15. For 
</I>&gt;<i> ascii or iso-8859-1 this would work. Or the code might use indices or 
</I>&gt;<i> slices (and a lot of code does!) If suddenly you have utf-8 encoded 
</I>&gt;<i> chinese, your string is going to triple in length, and those functions 
</I>&gt;<i> will have unpredictable behaviour. You could think of any number of 
</I>&gt;<i> scenarios, even in the python library. I just wouldn't feel 
</I>&gt;<i> confortable about changing the default encoding, you never know where 
</I>&gt;<i> it will come back to haunt you. What's so hard about using unicode 
</I>&gt;<i> strings in your program and then encoding when you send output somewhere?
</I>
Yes, it seems like a valid problem case, but it can be sidestepped very 
easily by simple working with unicode objects until you're ready to 
output your data.  PSP (and 'str') are going to render your unicodes 
only when it's absolutely necesary, and not before (at least that's what 
my template classes do), so if you use:

    &lt;%= myname[:32] %&gt;

the unicode object being sliced --myname-- is going to return another 
unicode object representing the slice, which in turn is going to be 
converted to 'str' using the default encoding.

There's a lot of ways to plan your apps to not have the trouble you 
mention, and my motto has always been &quot;Don't think 'why not', think 'how 
to'.&quot;

Good luck :-)

-gus




</PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020314.html">[mod_python] Problem with PSP and unicode
</A></li>
	<LI>Next message: <A HREF="020300.html">[mod_python] Documentation error: request.user not read-only
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20310">[ date ]</a>
              <a href="thread.html#20310">[ thread ]</a>
              <a href="subject.html#20310">[ subject ]</a>
              <a href="author.html#20310">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
