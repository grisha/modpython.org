<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Why Apache does not execute cgi scripts
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Why%20Apache%20does%20not%20execute%20cgi%20scripts&In-Reply-To=004201c62a03%24ac9915a0%240500a8c0%40brittonfamily.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020199.html">
   <LINK REL="Next"  HREF="020433.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Why Apache does not execute cgi scripts</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Tomasz Wlodek</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Why%20Apache%20does%20not%20execute%20cgi%20scripts&In-Reply-To=004201c62a03%24ac9915a0%240500a8c0%40brittonfamily.org"
       TITLE="[mod_python] Why Apache does not execute cgi scripts">tomw at bnl.gov
       </A><BR>
    <I>Fri Feb 24 16:32:28 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020199.html">[mod_python] example of mod_python publisher handling html forms
	and cgi variables
</A></li>
        <LI>Next message: <A HREF="020433.html">[mod_python] Why Apache does not execute cgi scripts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20432">[ date ]</a>
              <a href="thread.html#20432">[ thread ]</a>
              <a href="subject.html#20432">[ subject ]</a>
              <a href="author.html#20432">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello experts,

I am not sure whether this issue belongs to Apache proper or mod python or
both.

here is the problem: I use mod_python authentication handler to
authenticate users who come to some directory. This part of the code works
fine.

After the user is authenticated mod_python returns apache.OK and then
Apache is supposed to execute cgi script which is located in this
directory. For the time being the cgi script is a simple &quot;Hello world&quot; in
python.

Now comes the problem: users are authenticated, then Apache takes the cgi
script but instead of executing it it displays its content as text file.

The funny thing is that the same cgi script when I move it to another cgi
directory (where I do not use mod_python for authentication) works fine.
It executes as cgi script.

Apparently when I protect a directory by mod_python authentication handler
then Apache does not want to execute underlying cgi scripts from this
directory!

Here comes the configuration file for this directory:

Alias /GridHyperNews &quot;/var/www/cgi-bin/GridHyperNews&quot;
    &lt;Directory /var/www/cgi-bin/GridHyperNews&gt;
	AllowOverride None
	#I want the directory to contain cgi scripts
        Options +ExecCGI
	SetHandler cgi-script
	# users who come to this directory must be authenticated by
	# myhandler2
	PythonAuthenHandler myhandler2
	PythonDebug on
	PythonPath &quot;sys.path + ['/root/mod_python_handlers']&quot;
	require valid-user
    &lt;/Directory&gt;


The myhandler2.py code is very simple

from mod_python import apache
from mod_python import util

import _mp_mod_ssl
import os,string

def authenhandler(req):
    req.add_common_vars()
    req.user=&quot;unknown_user&quot;

    return apache.OK

Now, no matter what I do scripts under the directory
/var/www/cgi-bin/GridHyperNews are not treated by Apache as cgi but as
text files.

Tomasz Wlodek                        | tel 631-344-7448
Brookhaven Laboratory, Building 510M | fax 631-344-7616
Upton NY 11973-5000                  |

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020199.html">[mod_python] example of mod_python publisher handling html forms
	and cgi variables
</A></li>
	<LI>Next message: <A HREF="020433.html">[mod_python] Why Apache does not execute cgi scripts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20432">[ date ]</a>
              <a href="thread.html#20432">[ thread ]</a>
              <a href="subject.html#20432">[ subject ]</a>
              <a href="author.html#20432">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
