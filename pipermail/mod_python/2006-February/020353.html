<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] how to make fallback authentication
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20how%20to%20make%20fallback%20authentication&In-Reply-To=Pine.GSO.4.58.0602171223260.24404%40rcf2.rhic.bnl.gov">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020345.html">
   <LINK REL="Next"  HREF="020330.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] how to make fallback authentication</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20how%20to%20make%20fallback%20authentication&In-Reply-To=Pine.GSO.4.58.0602171223260.24404%40rcf2.rhic.bnl.gov"
       TITLE="[mod_python] how to make fallback authentication">grahamd at dscpl.com.au
       </A><BR>
    <I>Sun Feb 19 00:00:58 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020345.html">[mod_python] how to make fallback authentication
</A></li>
        <LI>Next message: <A HREF="020330.html">[mod_python] High traffic recommendations
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20353">[ date ]</a>
              <a href="thread.html#20353">[ thread ]</a>
              <a href="subject.html#20353">[ subject ]</a>
              <a href="author.html#20353">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 18/02/2006, at 4:27 AM, Tomasz Wlodek wrote:

&gt;<i> On Thu, 16 Feb 2006, Graham Dumpleton wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Unfortunately, to my mind, what would be the proper way of doing this
</I>&gt;&gt;<i> can't current be done in mod_python because it has some stuff missing
</I>&gt;&gt;<i> and doesn't process handlers for the authentication phase  
</I>&gt;&gt;<i> correctly. See:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>   <A HREF="http://issues.apache.org/jira/browse/MODPYTHON-124">http://issues.apache.org/jira/browse/MODPYTHON-124</A>
</I>&gt;&gt;<i>   <A HREF="http://issues.apache.org/jira/browse/MODPYTHON-129">http://issues.apache.org/jira/browse/MODPYTHON-129</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> One question while I think of a good suggestion, how are you setting
</I>&gt;&gt;<i> AuthType, AuthName and Requires directives to ensure that the  
</I>&gt;&gt;<i> mod_python
</I>&gt;&gt;<i> authenhandler is being run in the first place?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Graham
</I>&gt;<i>
</I>&gt;<i> in mod python configuration I put:
</I>&gt;<i>
</I>&gt;<i> &lt;Directory /var/www/my_directory/cgi&gt;
</I>&gt;<i>     AddHandler mod_python .py
</I>&gt;<i>     PythonHandler myhandler
</I>&gt;<i>     PythonAuthenHandler myhandler
</I>&gt;<i>     PythonDebug on
</I>&gt;<i>     PythonPath &quot;sys.path + ['/root/my_mod_python_handlers']&quot;
</I>&gt;<i>     require valid-user
</I>&gt;<i> &lt;/Directory&gt;
</I>&gt;<i>
</I>&gt;<i> This forces the authentication handler to run.
</I>&gt;<i>
</I>&gt;<i> If I add
</I>&gt;<i>
</I>&gt;<i> AuthType Basic
</I>&gt;<i> AuthName &quot;Restricted Area&quot;
</I>&gt;<i>
</I>&gt;<i> lines, if always triggers apache to ask for user id and pwd, which  
</I>&gt;<i> is not
</I>&gt;<i> what I want. I want apache to ask for user id and pwd only if user  
</I>&gt;<i> has no
</I>&gt;<i> valid certificate.
</I>
Yes, that is what one would expect. I don't recollect saying that  
AuthType should
be set to &quot;Basic&quot;. Use of &quot;Basic&quot; for AuthType in the JIRA issue is  
there to illustrate
something else. You also though don't have to use a redirect to pass  
the request
through a basic authentication handler as your original code  
suggested you
want to do though. You will though as suggested by someone else need to
implement the handshake for basic authentication yourself, as you  
don't have
access to the internal Apache API functions for dealing with basic  
authentication
and even if you did, they in part expect AuthType to be set to  
&quot;Basic&quot; which will
not be the case. The code I posted was an implementation of the  
handshake
for basic authentication to get around that. All you need to do is  
integrate that
in the place where you were intending to do the redirect,

Graham
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020345.html">[mod_python] how to make fallback authentication
</A></li>
	<LI>Next message: <A HREF="020330.html">[mod_python] High traffic recommendations
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20353">[ date ]</a>
              <a href="thread.html#20353">[ thread ]</a>
              <a href="subject.html#20353">[ subject ]</a>
              <a href="author.html#20353">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
