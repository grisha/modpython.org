<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] High traffic recommendations
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20High%20traffic%20recommendations&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020288.html">
   <LINK REL="Next"  HREF="020274.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] High traffic recommendations</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Marc D. Murray</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20High%20traffic%20recommendations&In-Reply-To="
       TITLE="[mod_python] High traffic recommendations">marcdm at phronein.com
       </A><BR>
    <I>Wed Feb 15 09:06:47 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020288.html">[mod_python] Apache Status-Code and headers
</A></li>
        <LI>Next message: <A HREF="020274.html">[mod_python] High traffic recommendations
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20272">[ date ]</a>
              <a href="thread.html#20272">[ thread ]</a>
              <a href="subject.html#20272">[ subject ]</a>
              <a href="author.html#20272">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I just 'completed' an application (website) using mod_python. 
- I'm using the mod_python.publisher handler 
- Each page is a function in a module. 
- Apache config has MultiViews enabled
- Apache/2.0.54 (Debian GNU/Linux) mod_python/3.1.3 Python/2.3.5
PHP/4.3.10-16 mod_ssl/2.0.54 OpenSSL/0r

However, I'm having a problem where the server (Apache) goes down every
3 - 4 hours. 

At first, I was getting a DBNoMemory error every half hour. Then I
started caching database look-ups using memcached. 

Site was still going down. Now, every hour or two, instead of 40 min.

So now, I'm caching entire pages but it still going down. Every few
hours. 

This is how I'm outputting pages : 
--&gt; request comes in 
--&gt; mod_python.publisher decides which module.function to execute 
--&gt; function checks session variables and loads config from cache or
*.conf file.
--&gt; generate cache_key as sitename:req.unparsed_uri:lang  
--&gt; If item in cache, return cached paged
--&gt; generate page, insert into cache for 4 hrs --&gt; return output.

But I'm still being told by Apache that it has reached MaxClients every
few hours.

in /etc/apache2/apache.conf I have the following :

	KeepAlive Off
	Timeout 10
	&lt;IfModule prefork.c&gt;
	StartServers         5
	MinSpareServers      5
	MaxSpareServers     10
	MaxClients          80
	MaxRequestsPerChild  500
	&lt;/IfModule&gt;
	
Anyone see anything wrong with what's going on here? It's driving me
crazy with this crashing, and I can't seem to find a solution.

Thanks.

Marc DM.

PS. The server is the same one that used to run the same site in
mod_mono. Except with mod_mono the server would climb to 32%cpu and stay
there or climb higher. With mod_python, it never passes 4% Apache Dies.
Why?


</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020288.html">[mod_python] Apache Status-Code and headers
</A></li>
	<LI>Next message: <A HREF="020274.html">[mod_python] High traffic recommendations
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20272">[ date ]</a>
              <a href="thread.html#20272">[ thread ]</a>
              <a href="subject.html#20272">[ subject ]</a>
              <a href="author.html#20272">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
