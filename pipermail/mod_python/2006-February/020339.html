<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] req.user and SSL?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20req.user%20and%20SSL%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020344.html">
   <LINK REL="Next"  HREF="020352.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] req.user and SSL?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Bud P. Bruegger</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20req.user%20and%20SSL%3F&In-Reply-To="
       TITLE="[mod_python] req.user and SSL?">bud at comune.grosseto.it
       </A><BR>
    <I>Fri Feb 17 09:05:56 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020344.html">[mod_python] Questions about PSP vs other solutions
</A></li>
        <LI>Next message: <A HREF="020352.html">[mod_python] req.user and SSL?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20339">[ date ]</a>
              <a href="thread.html#20339">[ thread ]</a>
              <a href="subject.html#20339">[ subject ]</a>
              <a href="author.html#20339">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello everyone,

I have a problem reading req.user when using mod-SSL with the 
+FakeBasicAuth option and setting SSLUser:  req.user always seems to be 
undefined.  Also, neither Authen nor Authz handers run.   Any help would be 
highly appreciated!

Here some details of what I try:

#-- Apache 2 conf ------------------------------
NameVirtualHost *:443
&lt;VirtualHost *:443&gt;
         LogLevel debug
         SSLEngine on
         SSLCertificateFile /etc/apache2/ssl/apache.pem
         SSLCACertificateFile /etc/apache2/ssl/caCerts.pem
         SSLVerifyDepth 3
         SSLVerifyClient require
         #SSLUserName SSL_CLIENT_S_DN_X509
         DocumentRoot /var/www/

         &lt;Directory /var/www/sc&gt;
             SSLRequireSSL
             SSLOptions +StdEnvVars +FakeBasicAuth
             AuthType Basic
             SetHandler mod_python
             PythonHandler test
             PythonAccessHandler test
             PythonAuthenHandler test
             PythonAuthzHandler test
             PythonFixupHandler test
             PythonDebug On
         &lt;/Directory&gt;
&lt;/VirtualHost&gt;

#--- test.py ----------------------------------------------------
from mod_python import apache

def genHandler(req, handlerName):
     req.add_common_vars()
     req.get_basic_auth_pw()
     user = req.user
     dn = req.subprocess_env.get('SSL_CLIENT_S_DN', req.subprocess_env.keys())
     userLabel = 'XXX-%s-user' % handlerName
     dnLabel = 'XXX-%s-dn' % handlerName
     req.subprocess_env[userLabel]=str(user)
     req.subprocess_env[dnLabel]=str(dn)
     return apache.OK


def accesshandler(req):
     return genHandler(req, 'access')

def authenhandler(req):
     return genHandler(req, 'authen')

def authzhandler(req):
     return genHandler(req, 'authz')

def fixuphandler(req):
     return genHandler(req, 'fixup')
#------------------------------------------------------

many thanks in advance

-b



-------------------------------------------------------------------------------------------------
Ing. Bud P. Bruegger, Ph.D.                 +39-0564-488577 
(voice),  -21139 (fax)
Servizio Elaborazione Dati                    e-mail:  <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">bud at comune.grosseto.it</A>
Comune di Grosseto                            jabber:  <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">bud at jabber.no</A>
Via Ginori, 
43                                      <A HREF="http://www.comune.grosseto.it/cie/">http://www.comune.grosseto.it/cie/</A>
58100 Grosseto (Tuscany, 
Italy)           <A HREF="http://www.comune.grosseto.it/interopEID/">http://www.comune.grosseto.it/interopEID/</A> 

</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020344.html">[mod_python] Questions about PSP vs other solutions
</A></li>
	<LI>Next message: <A HREF="020352.html">[mod_python] req.user and SSL?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20339">[ date ]</a>
              <a href="thread.html#20339">[ thread ]</a>
              <a href="subject.html#20339">[ subject ]</a>
              <a href="author.html#20339">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
