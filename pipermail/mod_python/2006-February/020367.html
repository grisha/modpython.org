<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] High Traffic Round 2
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20High%20Traffic%20Round%202&In-Reply-To=1140413838.12776.18.camel%40localhost.localdomain">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020362.html">
   <LINK REL="Next"  HREF="020398.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] High Traffic Round 2</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Mike Looijmans</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20High%20Traffic%20Round%202&In-Reply-To=1140413838.12776.18.camel%40localhost.localdomain"
       TITLE="[mod_python] High Traffic Round 2">nlv11281 at natlab.research.philips.com
       </A><BR>
    <I>Mon Feb 20 10:03:55 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020362.html">[mod_python] High Traffic Round 2
</A></li>
        <LI>Next message: <A HREF="020398.html">[mod_python] High Traffic Round 2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20367">[ date ]</a>
              <a href="thread.html#20367">[ thread ]</a>
              <a href="subject.html#20367">[ subject ]</a>
              <a href="author.html#20367">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Could it be that some external lock is blocking your output (e.g. DB lock, file lock, printf to stdout)?

One way to check is to make a simple &quot;hello world&quot; handler and see if that behaves similar.

Also, check out the differences in the apache configs. If one is set to prefork and the other to 
mpm, that might explain some things too.

Mike Looijmans
Philips Natlab / Topic Automation


Marc D. Murray wrote:
&gt;<i> Here we go again with me and my high traffic site that I'm attempting to
</I>&gt;<i> deploy using mod_python.
</I>&gt;<i> 
</I>&gt;<i> After a VERY stressful week, with a site that goes down every 2 - 5 hrs,
</I>&gt;<i> I decided to move away from mod_python.publisher and Sessions totally.
</I>&gt;<i> 
</I>&gt;<i> I wrote my own handler that decides which module/page to load based on
</I>&gt;<i> the 1st part of the URL. 
</I>&gt;<i> 
</I>&gt;<i> After deciding, it loads the module using __import__(module_name)
</I>&gt;<i> and executes a function named _dispatch which all of my modules have.
</I>&gt;<i> 
</I>&gt;<i> However, it is VERY VERY SLOW. It works fine on my local server but goes
</I>&gt;<i> at snail's pace on the production server. 
</I>&gt;<i> 
</I>&gt;<i> My home server is an Athlon 1Ghz w/256MB RAM and the production box has
</I>&gt;<i> a celeron 2.6 with 512MB RAM.
</I>&gt;<i> 
</I>&gt;<i> I'm using memcached to store generated pages, and the cache is managed
</I>&gt;<i> by the handler. The memcached client I'm using is the same one python
</I>&gt;<i> one linked from the memcached homepage. This means that if a page has
</I>&gt;<i> been cached, the module won't even be imported before the output is
</I>&gt;<i> grabbed from cache.
</I>&gt;<i> 
</I>&gt;<i> So basically, I've designed this thing the best way I know how. I can't
</I>&gt;<i> think of any way to make it any more efficient but it still doesn't work
</I>&gt;<i> as expected.
</I>&gt;<i> 
</I>&gt;<i> I'm really f**king tired right now. and my head hurts.
</I>&gt;<i> 
</I>&gt;<i> Marc DM.
</I>&gt;<i> 
</I>&gt;<i> PS. Where's the mod_python irc channel? 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>
</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020362.html">[mod_python] High Traffic Round 2
</A></li>
	<LI>Next message: <A HREF="020398.html">[mod_python] High Traffic Round 2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20367">[ date ]</a>
              <a href="thread.html#20367">[ thread ]</a>
              <a href="subject.html#20367">[ subject ]</a>
              <a href="author.html#20367">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
