<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] High traffic recommendations
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20High%20traffic%20recommendations&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020330.html">
   <LINK REL="Next"  HREF="020334.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] High traffic recommendations</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20High%20traffic%20recommendations&In-Reply-To="
       TITLE="[mod_python] High traffic recommendations">grahamd at dscpl.com.au
       </A><BR>
    <I>Thu Feb 16 23:56:39 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020330.html">[mod_python] High traffic recommendations
</A></li>
        <LI>Next message: <A HREF="020334.html">[mod_python] how to make fallback authentication
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20333">[ date ]</a>
              <a href="thread.html#20333">[ thread ]</a>
              <a href="subject.html#20333">[ subject ]</a>
              <a href="author.html#20333">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Could be caused by this:

  <A HREF="https://issues.apache.org/jira/browse/MODPYTHON-109">https://issues.apache.org/jira/browse/MODPYTHON-109</A>

But could also simply be that you have a handler which is dealing
with a request that takes a long time for it to generate the response.
If it takes too long, Apache will not wait for it to finish the response
and will kill off child process forcibly.

Graham

Marc D. Murray wrote ..
&gt;<i> After changing and tweaking, I now have a strange situation. Apache2
</I>&gt;<i> processes will not die voluntarily. After Apache crashed with a
</I>&gt;<i> MaxClients error, I checked the logs again, to find a few 404 errors
</I>&gt;<i> from a strange directory. 
</I>&gt;<i> 
</I>&gt;<i> What I mean is 
</I>&gt;<i> 
</I>&gt;<i> File does not
</I>&gt;<i> exist: /home/tomcat/tomcat/webapps/lenya/lenya/pubs/pcsdelta/work/cache/live/
</I>&gt;<i> 
</I>&gt;<i> When this site isn't even being served by apache, never mind not being
</I>&gt;<i> on port 80 at all. How did this get in there? Add to that, mod_jk has
</I>&gt;<i> been disabled since Tuesday.
</I>&gt;<i> 
</I>&gt;<i> Ignoring the lenya errors for a second, when I issue the command to stop
</I>&gt;<i> apache (/etc/init.d/apache2 stop). It takes a little while, and I see
</I>&gt;<i> (in the apache error log) a bunch of warnings and then errors looking
</I>&gt;<i> like what I've pasted below.
</I>&gt;<i> 
</I>&gt;<i> [Thu Feb 16 22:49:33 2006] [error] child process 15860 still did not
</I>&gt;<i> exit, sending a SIGKILL
</I>&gt;<i> [Thu Feb 16 22:49:33 2006] [error] child process 15102 still did not
</I>&gt;<i> exit, sending a SIGKILL
</I>&gt;<i> [Thu Feb 16 22:49:33 2006] [error] child process 16086 still did not
</I>&gt;<i> exit, sending a SIGKILL
</I>&gt;<i> [Thu Feb 16 22:49:33 2006] [error] child process 16087 still did not
</I>&gt;<i> exit, sending a SIGKILL
</I>&gt;<i> [Thu Feb 16 22:49:33 2006] [error] child process 16091 still did not
</I>&gt;<i> exit, sending a SIGKILL
</I>&gt;<i> [Thu Feb 16 22:49:34 2006] [notice] caught SIGTERM, shutting down
</I>&gt;<i> [Thu Feb 16 22:49:41 2006] [notice] suEXEC mechanism enabled
</I>&gt;<i> (wrapper: /usr/lib/apache2/suexec2)
</I>&gt;<i> [Thu Feb 16 22:49:41 2006] [notice] mod_python: Creating 48 session
</I>&gt;<i> mutexes based on 160 max processes and 0 max threads.
</I>&gt;<i> [Thu Feb 16 22:49:42 2006] [notice] Apache/2.0.54 (Debian GNU/Linux)
</I>&gt;<i> mod_python/3.2.7 Python/2.4.1 PHP/4.3.10-16 configured -- resuming
</I>&gt;<i> normal operations
</I>&gt;<i> 
</I>&gt;<i> It's like apache2 is having a problem stopping the child processes the
</I>&gt;<i> normal way. Am I right? If this is my fault somehow, what (in
</I>&gt;<i> mod_python) could possibly cause apache processes to not want to die?
</I>&gt;<i> Un-closed database connections maybe? 
</I>&gt;<i> 
</I>&gt;<i> My databases are bsddb3 to cache the results of xml--&gt;dictionary and
</I>&gt;<i> openldap for the users. The bsddb files are opened and closed each time
</I>&gt;<i> they're needed. .....
</I>&gt;<i> 
</I>&gt;<i> but then, when does the DBEnv get closed .??... hmmmm
</I>&gt;<i> 
</I>&gt;<i> gone to check the code
</I>&gt;<i> 
</I>&gt;<i> /marcdm
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I></PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020330.html">[mod_python] High traffic recommendations
</A></li>
	<LI>Next message: <A HREF="020334.html">[mod_python] how to make fallback authentication
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20333">[ date ]</a>
              <a href="thread.html#20333">[ thread ]</a>
              <a href="subject.html#20333">[ subject ]</a>
              <a href="author.html#20333">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
