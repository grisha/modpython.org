<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] High traffic recommendations
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20High%20traffic%20recommendations&In-Reply-To=1140012407.8217.29.camel%40localhost.localdomain">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020327.html">
   <LINK REL="Next"  HREF="020273.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] High traffic recommendations</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Marc D. Murray</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20High%20traffic%20recommendations&In-Reply-To=1140012407.8217.29.camel%40localhost.localdomain"
       TITLE="[mod_python] High traffic recommendations">marcdm at phronein.com
       </A><BR>
    <I>Thu Feb 16 23:42:56 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020327.html">[mod_python] High traffic recommendations
</A></li>
        <LI>Next message: <A HREF="020273.html">[mod_python] mod_python 3.2.7 working on Mac OS X 10.4.5
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20332">[ date ]</a>
              <a href="thread.html#20332">[ thread ]</a>
              <a href="subject.html#20332">[ subject ]</a>
              <a href="author.html#20332">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>After changing and tweaking, I now have a strange situation. Apache2
processes will not die voluntarily. After Apache crashed with a
MaxClients error, I checked the logs again, to find a few 404 errors
from a strange directory. 

What I mean is 

File does not
exist: /home/tomcat/tomcat/webapps/lenya/lenya/pubs/pcsdelta/work/cache/live/ 

When this site isn't even being served by apache, never mind not being
on port 80 at all. How did this get in there? Add to that, mod_jk has
been disabled since Tuesday.

Ignoring the lenya errors for a second, when I issue the command to stop
apache (/etc/init.d/apache2 stop). It takes a little while, and I see
(in the apache error log) a bunch of warnings and then errors looking
like what I've pasted below.

[Thu Feb 16 22:49:33 2006] [error] child process 15860 still did not
exit, sending a SIGKILL
[Thu Feb 16 22:49:33 2006] [error] child process 15102 still did not
exit, sending a SIGKILL
[Thu Feb 16 22:49:33 2006] [error] child process 16086 still did not
exit, sending a SIGKILL
[Thu Feb 16 22:49:33 2006] [error] child process 16087 still did not
exit, sending a SIGKILL
[Thu Feb 16 22:49:33 2006] [error] child process 16091 still did not
exit, sending a SIGKILL
[Thu Feb 16 22:49:34 2006] [notice] caught SIGTERM, shutting down
[Thu Feb 16 22:49:41 2006] [notice] suEXEC mechanism enabled
(wrapper: /usr/lib/apache2/suexec2)
[Thu Feb 16 22:49:41 2006] [notice] mod_python: Creating 48 session
mutexes based on 160 max processes and 0 max threads.
[Thu Feb 16 22:49:42 2006] [notice] Apache/2.0.54 (Debian GNU/Linux)
mod_python/3.2.7 Python/2.4.1 PHP/4.3.10-16 configured -- resuming
normal operations

It's like apache2 is having a problem stopping the child processes the
normal way. Am I right? If this is my fault somehow, what (in
mod_python) could possibly cause apache processes to not want to die?
Un-closed database connections maybe? 

My databases are bsddb3 to cache the results of xml--&gt;dictionary and
openldap for the users. The bsddb files are opened and closed each time
they're needed. .....

but then, when does the DBEnv get closed .??... hmmmm

gone to check the code

/marcdm

</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020327.html">[mod_python] High traffic recommendations
</A></li>
	<LI>Next message: <A HREF="020273.html">[mod_python] mod_python 3.2.7 working on Mac OS X 10.4.5
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20332">[ date ]</a>
              <a href="thread.html#20332">[ thread ]</a>
              <a href="subject.html#20332">[ subject ]</a>
              <a href="author.html#20332">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
