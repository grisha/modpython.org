<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Problem with PSP and unicode
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Problem%20with%20PSP%20and%20unicode&In-Reply-To=20060214101420.K47576%40grisha.dyndns.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020260.html">
   <LINK REL="Next"  HREF="020265.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Problem with PSP and unicode</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Dan Eloff</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Problem%20with%20PSP%20and%20unicode&In-Reply-To=20060214101420.K47576%40grisha.dyndns.org"
       TITLE="[mod_python] Problem with PSP and unicode">dan.eloff at gmail.com
       </A><BR>
    <I>Tue Feb 14 13:46:37 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020260.html">[mod_python] Problem with PSP and unicode
</A></li>
        <LI>Next message: <A HREF="020265.html">[mod_python] Problem with PSP and unicode
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20263">[ date ]</a>
              <a href="thread.html#20263">[ thread ]</a>
              <a href="subject.html#20263">[ subject ]</a>
              <a href="author.html#20263">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>That's the sticky part, currently this doesn't work in python. Quoting one
of the PEPs:

    One notable difficulty arises when code requires a string
representation of an
    object; an operation traditionally accomplished by using the str()
    built-in function.

    Using the current str() function makes the code not Unicode-safe.
    Replacing a str() call with a unicode() call makes the code not
    str-stable.  Changing str() so that it could return unicode
    instances would solve this problem.

That's all well and good, but until/if that is ever adopted, we'll have to
find a way around it. Probably your best bet for backwards compatibility and
unicode support is to have two kinds of psp pages, one for plain ascii, one
for unicode. The unicode one uses unicode() and the ascii one stays as is.
You would then have to decide when you parse the psp page what the encoding
is and produce the appropriate psp object.

-Dan


On 2/14/06, Gregory (Grisha) Trubetskoy &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">grisha at modpython.org</A>&gt; wrote:
&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I'm a bit unicode-ignorant - what should PSP do? The idea was that a
</I>&gt;<i> variable referred to in a PSP page would be an object that could stringify
</I>&gt;<i> itself by implementing a __str__(), but obviously this doesn't work with
</I>&gt;<i> unicode at all. But I'm not sure how self-representation works in the
</I>&gt;<i> unicode world...
</I>&gt;<i>
</I>&gt;<i> Grisha
</I>&gt;<i>
</I>&gt;<i> On Mon, 13 Feb 2006, Dan Eloff wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; Actually I was just about to post a question about this. The psp
</I>&gt;<i> generated
</I>&gt;<i> code surrounds everything with str() before writing it, so it doesn't work
</I>&gt;<i> with unicode at all.
</I>&gt;<i>
</I>&gt;<i> -Dan
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20060214/9c9cca9b/attachment.html">http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20060214/9c9cca9b/attachment.html</A>
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020260.html">[mod_python] Problem with PSP and unicode
</A></li>
	<LI>Next message: <A HREF="020265.html">[mod_python] Problem with PSP and unicode
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20263">[ date ]</a>
              <a href="thread.html#20263">[ thread ]</a>
              <a href="subject.html#20263">[ subject ]</a>
              <a href="author.html#20263">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
