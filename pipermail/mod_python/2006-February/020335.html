<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] PSP TypeError: cannot concatenate 'str' and 'instance'
	objects
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20PSP%20TypeError%3A%20cannot%20concatenate%20%27str%27%20and%20%27instance%27%0A%09objects&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020334.html">
   <LINK REL="Next"  HREF="020336.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] PSP TypeError: cannot concatenate 'str' and 'instance'
	objects</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Corey McGuire</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20PSP%20TypeError%3A%20cannot%20concatenate%20%27str%27%20and%20%27instance%27%0A%09objects&In-Reply-To="
       TITLE="[mod_python] PSP TypeError: cannot concatenate 'str' and 'instance'
	objects">coreyfro at coreyfro.com
       </A><BR>
    <I>Fri Feb 17 04:39:23 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020334.html">[mod_python] how to make fallback authentication
</A></li>
        <LI>Next message: <A HREF="020336.html">[mod_python] PSP TypeError: cannot concatenate 'str' and 
	'instance' objects
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20335">[ date ]</a>
              <a href="thread.html#20335">[ thread ]</a>
              <a href="subject.html#20335">[ subject ]</a>
              <a href="author.html#20335">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello all,

I am learning python and PSP at the same time, which may be a bit of a
mistake, but I think I am doing well.

I am working on moving my PHP image gallery:
<A HREF="http://www.coreyfro.com/~coreyfro/gallery.php?gallery=b-man-2003">http://www.coreyfro.com/~coreyfro/gallery.php?gallery=b-man-2003</A>

To python:
<A HREF="http://127.0.0.1/~coreyfro/gallery/gallery">http://127.0.0.1/~coreyfro/gallery/gallery</A>

This is really just an exercise, but it's kinda my own version of &quot;Hello
World&quot;

I am getting hung up ok this block of code:

cell_tmpl = psp.PSP(req, filename='cell.tmpl', vars = {'gallery': gallery,
'i': i, 'path': path, 'file': dirList[i], 'caption': caption})
body = body + cell_tmpl

Now, the kicker is &quot;body = body + cell_tmpl&quot;... If I leave it like that, I
get the following
<A HREF="http://127.0.0.1/~coreyfro/frozen/gallery1/gallery/?gallery=b-man-2003">http://127.0.0.1/~coreyfro/frozen/gallery1/gallery/?gallery=b-man-2003</A>

If I try converting it to a string (like &quot;body = body + str(cell_tmpl)&quot;)
something TOTALY wacky happens
<A HREF="http://127.0.0.1/~coreyfro/frozen/gallery2/gallery/?gallery=b-man-2003">http://127.0.0.1/~coreyfro/frozen/gallery2/gallery/?gallery=b-man-2003</A>

It's outputting the HTML I am trying to append to body and NOT
concatinating it with body.

How do I put two and two together?

Here's the code in full

from mod_python import psp
import os

def report(req, title, caption, body):
    req.content_type            = 'text/html'
    gallery_tmpl                = psp.PSP(req, filename='gallery.tmpl')
    gallery_tmpl.run(vars       = { 'title': title, 'caption': caption,
'body': body  })

def index(req):
    title                       = &quot;Coreyfro's Handy, Dandy, Super-duper,
Gallery Engine!&quot;
    caption                     = &quot;It's free, it's fast, it's incomplete!&quot;
    body                        = &quot;You are probably here by mistake&lt;br&gt;\
                                   Please feel free to be confused&lt;br&gt;\
                                   I know I am&quot;
    report(req, title, caption, body)

def gallery(req, gallery='', columns=''):
    if columns:
        columns                 = int(columns)
    else:
        columns                 = 5

    if gallery:
        i                       = 0
        column                  = 1
        title                   = gallery
        caption                 = &quot;Click on an image below to see it's
full sized version&quot;
        path                    = &quot;/home/coreyfro/public_html/gallery&quot;
        dirList                 = os.listdir(path+&quot;/&quot;+gallery+&quot;/ds&quot;)
        body                    = &quot; &quot; * 6 + &quot;&lt;table&gt;\n&quot; + &quot; &quot; * 8 + &quot;&lt;tr&gt;\n&quot;


        while i &lt; len(dirList):
            if column &lt; columns:
                column          = column + 1
            else:
                column          = 1
                body            = body + &quot; &quot; * 8 + &quot;&lt;/tr&gt;\n&quot; + &quot; &quot; * 8 +
&quot;&lt;tr&gt;\n&quot;

            cell_tmpl           = psp.PSP(req, filename='cell.tmpl', vars
= {'gallery': gallery, 'i': i, 'path': path, 'file':
dirList[i], 'caption': caption})
            body                = body + cell_tmpl
            i                   = i + 1


        body                    = body + &quot; &quot; * 8 + &quot;&lt;/tr&gt;\n&quot; + &quot; &quot; * 6 +
&quot;&lt;/table&gt;&quot;
        report(req, title, caption, body)

    else:
        index(req)

def view(req, gallery, index):
    pass

</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020334.html">[mod_python] how to make fallback authentication
</A></li>
	<LI>Next message: <A HREF="020336.html">[mod_python] PSP TypeError: cannot concatenate 'str' and 
	'instance' objects
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20335">[ date ]</a>
              <a href="thread.html#20335">[ thread ]</a>
              <a href="subject.html#20335">[ subject ]</a>
              <a href="author.html#20335">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
