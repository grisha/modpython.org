<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] example of mod_python publisher handling html forms
	and cgi variables
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20example%20of%20mod_python%20publisher%20handling%20html%20forms%0A%09and%20cgi%20variables&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020197.html">
   <LINK REL="Next"  HREF="020199.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] example of mod_python publisher handling html forms
	and cgi variables</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Dave Britton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20example%20of%20mod_python%20publisher%20handling%20html%20forms%0A%09and%20cgi%20variables&In-Reply-To="
       TITLE="[mod_python] example of mod_python publisher handling html forms
	and cgi variables">dave at davebritton.com
       </A><BR>
    <I>Sat Feb  4 22:24:28 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020197.html">[mod_python] mod_ssl variables are not passed to mod_python auth
	handler
</A></li>
        <LI>Next message: <A HREF="020199.html">[mod_python] example of mod_python publisher handling html forms
	and cgi variables
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20198">[ date ]</a>
              <a href="thread.html#20198">[ thread ]</a>
              <a href="subject.html#20198">[ subject ]</a>
              <a href="author.html#20198">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks. I'll forward this to the list so that others can find it in the
archives if it's helpful.
-Dave
----- Original Message ----- 
From: &quot;Glenn Hammonds&quot; &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">rghammonds at gmail.com</A>&gt;
To: &quot;Dave Britton&quot; &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">dave at davebritton.com</A>&gt;
Sent: Saturday, February 04, 2006 8:55 PM
Subject: Re: I like how you use mod_python


Dave,

Thanks so much.  I did take a look, and that bit of code is just
extraordinarily helpful for someone just getting going.  I really
appreciate it! I wish that or something like it was in the FAQ or even
in the documentation as an example.

Best,

Glenn

On 2/4/06, Dave Britton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">dave at davebritton.com</A>&gt; wrote:
&gt;<i> Sure -
</I>&gt;<i> 1. be sure you have mod_python publisher installed - something like this
</I>&gt;<i> should be in httpd.conf:
</I>&gt;<i>   &lt;Directory /var/www/dave/python/&gt;
</I>&gt;<i>      AddHandler python-program .py
</I>&gt;<i>      PythonHandler mod_python.publisher
</I>&gt;<i>      PythonDebug On
</I>&gt;<i>    &lt;/Directory&gt;
</I>&gt;<i>
</I>&gt;<i> 2. Then write a python module that has a function named index() in it, and
</I>&gt;<i> put it into the directory specified in the conf file. when you browse to
</I>the
&gt;<i> module name (not including the .py extension) publisher will run the index
</I>&gt;<i> function as if it were the index.html default file in a regular html
</I>&gt;<i> directory.
</I>&gt;<i>
</I>&gt;<i> 3. I put an example program at <A HREF="http://www.davebritton.com/python/myexample">http://www.davebritton.com/python/myexample</A>
</I>&gt;<i> for you to see.
</I>&gt;<i>
</I>&gt;<i> Let me know if you have any questions.
</I>&gt;<i>
</I>&gt;<i> -Dave
</I>==================== source code for myexample.py ==========
# myexample.py
# this produces and processes a simple cgi form
#
def index(req, var1='', var2='off', var3='', hiddenvar='0'):
    # note - req is the Request object that holds the cgi interface data
    # the var1-3s are the variables that my form will be passing in to be
processed
    # hiddenvar is an example of using an html form hidden variable, useful
for pseudo-session data
    # start the string to paint the form with html
    # first we want to know if var2 is checked or not (it is a checkbox -
see below)
    if var2=='on':
        checked='CHECKED'
    else:
    	checked=''
    htmlout=&quot;&quot;&quot;
&lt;h3&gt;Hello there!&lt;/h3&gt;
Var 1 is %s, var2 is %s and var3 is %s
&lt;p&gt;If you'd like to change those values, enter new ones into this form:&lt;br&gt;
&lt;form action = &quot;myexample&quot; method=&quot;post&quot;&gt;
Enter var1: &lt;input type=&quot;text&quot; name = &quot;var1&quot; value =&quot; %s&quot;&gt;&lt;br&gt;
Enter var2: &lt;input type=&quot;checkbox&quot; name = &quot;var2&quot; %s&gt;&lt;br&gt;
Enter var3: &lt;textarea name = &quot;var3&quot;&gt;%s&lt;/textarea&gt;&lt;br&gt;
    &quot;&quot;&quot; %(var1,var2,var3,var1,checked,var3)
    # now let's increment our hidden value counter and tell the user what it
is:
    # cgi vars are always strings, so you have to convert them to numbers
and back
    hiddenvar = str(int(hiddenvar)+1)
    # add some more html to the output string to finish the form
    htmlout += &quot;&quot;&quot;
&lt;input type = &quot;hidden&quot; name = &quot;hiddenvar&quot; value = &quot;%s&quot;&gt;
&lt;input type = &quot;submit&quot; value = &quot;Click here to set the values&quot;&gt;
&lt;/form&gt;
This is the count of how many times you have been shown this form: %s
&lt;p&gt;&lt;a href=&quot;myexample.py-source&quot;&gt;Click to view or right-click and save-as to
download the source code&lt;/a&gt;
    &quot;&quot;&quot;%(hiddenvar, hiddenvar)
    # that's all we need to do, so just return the string:
    return htmlout

&gt;<i> ============================================
</I>&gt;<i>
</I>&gt;<i> ----- Original Message -----
</I>&gt;<i> From: &quot;Glenn Hammonds&quot; &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">rghammonds at gmail.com</A>&gt;
</I>&gt;<i> To: &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">dave at davebritton.com</A>&gt;
</I>&gt;<i> Sent: Saturday, February 04, 2006 3:09 PM
</I>&gt;<i> Subject: I like how you use mod_python
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Dave,
</I>&gt;<i>
</I>&gt;<i> I read with interest your post on the mod_python list replying to &quot;how
</I>&gt;<i> you use python&quot;.
</I>&gt;<i>
</I>&gt;<i> I'm just starting up with mod_python, moving existing too slow code
</I>&gt;<i> from cgi, and your 1-8 explanation of how you use it made the most
</I>&gt;<i> sense to me of any I've seen anywhere.
</I>&gt;<i>
</I>&gt;<i> I am currently conceptually stuck on points (2), collecting incoming
</I>&gt;<i> cgi variables and (8) waiting for the user click.  I can't seem to get
</I>&gt;<i> how to do that in mod_python.
</I>&gt;<i>
</I>&gt;<i> Would you be willing to share a skeleton version that explains this?
</I>&gt;<i> I know it must be dead simple, but then ... so am I from time to time.
</I>&gt;<i>
</I>&gt;<i> Thanks in advance,
</I>&gt;<i>
</I>&gt;<i> Glenn
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020197.html">[mod_python] mod_ssl variables are not passed to mod_python auth
	handler
</A></li>
	<LI>Next message: <A HREF="020199.html">[mod_python] example of mod_python publisher handling html forms
	and cgi variables
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20198">[ date ]</a>
              <a href="thread.html#20198">[ thread ]</a>
              <a href="subject.html#20198">[ subject ]</a>
              <a href="author.html#20198">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
