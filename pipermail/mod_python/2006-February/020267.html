<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Sessions in a load balanced arena
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Sessions%20in%20a%20load%20balanced%20arena&In-Reply-To=0DDCE3BF-B481-4A73-8153-68DE2B044D2A%40packet-addiction.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020266.html">
   <LINK REL="Next"  HREF="020268.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Sessions in a load balanced arena</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Nicolas Lehuen</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Sessions%20in%20a%20load%20balanced%20arena&In-Reply-To=0DDCE3BF-B481-4A73-8153-68DE2B044D2A%40packet-addiction.org"
       TITLE="[mod_python] Sessions in a load balanced arena">nicolas at lehuen.com
       </A><BR>
    <I>Tue Feb 14 15:22:34 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020266.html">[mod_python] Sessions in a load balanced arena
</A></li>
        <LI>Next message: <A HREF="020268.html">[mod_python] Sessions in a load balanced arena
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20267">[ date ]</a>
              <a href="thread.html#20267">[ thread ]</a>
              <a href="subject.html#20267">[ subject ]</a>
              <a href="author.html#20267">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>One very simple solution is to use sticky sessions. You simply
configure your load balancer to select one host when a new IP makes a
request, then stick to this host for an arbitrary period. This has
some drawbacks, especially when considering large ISP with proxies,
but it is definitely simple to implement (hardware load balancers can
manage this).

Then there are differents persistence strategies. You could store your
session in a DBMS, for instance, though it slows down things a little
bit. Writing a session storage using a SQL database is quite simple, I
have written a proof of concept implementation using SQLite (which of
course is not really usable in a multiple host context, but not much
of the code would need to be changed with another DBMS).

If that doesn't do the trick, then there's a whole bunch of tricks
available, see for example what the people building Resin, a J2EE
application server, have done :

<A HREF="http://www.caucho.com/resin-3.0/config/sessions.xtp#Distributed-Sessions">http://www.caucho.com/resin-3.0/config/sessions.xtp#Distributed-Sessions</A>

Unfortunately every distribution solution slows things done compared
with single hosts solutions, so my advice would be to use sticky
sessions and consider a DBMS-backed session system (switching between
the two should only need changing your mod_python configuration) if
you notice that your client's usage pattern result in unbalanced host
usage.

Regards,
Nicolas

2006/2/14, Peter Sanchez &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">pjs at packet-addiction.org</A>&gt;:
&gt;<i> Hey all.. Quick question:
</I>&gt;<i>
</I>&gt;<i> How can sessions be managed in a load balanced scenario. Say, between
</I>&gt;<i> 3 hosts all having traffic directed to it. From what I understand,
</I>&gt;<i> the session data is stored locally on each host. When a new visitor
</I>&gt;<i> reaches hostA and gets a session, hostB won't know about it.
</I>&gt;<i>
</I>&gt;<i> Sounds like Cookies are the way to go for a load balanced solution.
</I>&gt;<i> Using the cookie to save an identifier and keeping track in a
</I>&gt;<i> database of some sort. Is my thinking wrong?
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i>
</I>&gt;<i> Peter
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I>
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020266.html">[mod_python] Sessions in a load balanced arena
</A></li>
	<LI>Next message: <A HREF="020268.html">[mod_python] Sessions in a load balanced arena
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20267">[ date ]</a>
              <a href="thread.html#20267">[ thread ]</a>
              <a href="subject.html#20267">[ subject ]</a>
              <a href="author.html#20267">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
