From john.d.perkins at gmail.com  Tue Aug  4 18:27:55 2009
From: john.d.perkins at gmail.com (Mr. John Perkins)
Date: Tue Aug  4 18:28:05 2009
Subject: [mod_python] Compiling issue: connobject.c kills make
Message-ID: <4e5933c40908041527l1b8751ecpa620b0003f0f527f@mail.gmail.com>

Hello World,

I'm running into a wall trying to compile mod_python on my development
environment. Any help would be greatly appreciated.

Configure exits clean and everything looks good. Make fails with:

> make
Compiling for DSO.
 == SNIP ==
"tableobject.c", line 1092: warning: initialization type mismatch
/usr/apr/1.3/build/libtool --silent --mode=compile cc -m32 -prefer-pic -xO3
-m32 -xchip=pentium -xspace -Xa -xildoff -xc99=all -DSSL_EXPERIMENTAL
-DSSL_ENGINE -xO4  -DSOLARIS2=11 -D_POSIX_PTHREAD_SEMANTICS -D_REENTRANT -mt
-D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64  -I/usr/apache2/2.2/include
-I/usr/apr/1.3/include   -I/usr/apr-util/1.3/include -I/usr/include
-I/export/home/john/Downloads/mod_python_extracted/mod_python-3.3.1/src/include
-I/usr/apache2/2.2/include -I/usr/include/python2.4  -c -o util.lo util.c &&
touch util.slo
/usr/apr/1.3/build/libtool --silent --mode=compile cc -m32 -prefer-pic -xO3
-m32 -xchip=pentium -xspace -Xa -xildoff -xc99=all -DSSL_EXPERIMENTAL
-DSSL_ENGINE -xO4  -DSOLARIS2=11 -D_POSIX_PTHREAD_SEMANTICS -D_REENTRANT -mt
-D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64  -I/usr/apache2/2.2/include
-I/usr/apr/1.3/include   -I/usr/apr-util/1.3/include -I/usr/include
-I/export/home/john/Downloads/mod_python_extracted/mod_python-3.3.1/src/include
-I/usr/apache2/2.2/include -I/usr/include/python2.4  -c -o serverobject.lo
serverobject.c && touch serverobject.slo
"serverobject.c", line 387: warning: initialization type mismatch
/usr/apr/1.3/build/libtool --silent --mode=compile cc -m32 -prefer-pic -xO3
-m32 -xchip=pentium -xspace -Xa -xildoff -xc99=all -DSSL_EXPERIMENTAL
-DSSL_ENGINE -xO4  -DSOLARIS2=11 -D_POSIX_PTHREAD_SEMANTICS -D_REENTRANT -mt
-D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64  -I/usr/apache2/2.2/include
-I/usr/apr/1.3/include   -I/usr/apr-util/1.3/include -I/usr/include
-I/export/home/john/Downloads/mod_python_extracted/mod_python-3.3.1/src/include
-I/usr/apache2/2.2/include -I/usr/include/python2.4  -c -o connobject.lo
connobject.c && touch connobject.slo
"connobject.c", line 142: non-unique member requires struct/union pointer:
next
"connobject.c", line 142: warning: left operand of "->" must be pointer to
struct/union
cc: acomp failed for connobject.c
apxs:Error: Command failed with rc=65536
.
*** Error code 1
make: Fatal error: Command failed for target `mod_python.so'
Current working directory
/export/home/john/Downloads/mod_python_extracted/mod_python-3.3.1/src
*** Error code 1
The following command caused the error:
cd src && make
make: Fatal error: Command failed for target `do_dso'
== SNIP ==


Anyone see whats wrong here?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20090804/8a6060e3/attachment.html
From graham.dumpleton at gmail.com  Tue Aug  4 18:45:21 2009
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Tue Aug  4 18:45:30 2009
Subject: [mod_python] Compiling issue: connobject.c kills make
In-Reply-To: <4e5933c40908041527l1b8751ecpa620b0003f0f527f@mail.gmail.com>
References: <4e5933c40908041527l1b8751ecpa620b0003f0f527f@mail.gmail.com>
Message-ID: <88e286470908041545y74d4893r57a62c19f1857858@mail.gmail.com>

Use source code from subversion repository trunk.

  svn co https://svn.apache.org/repos/asf/quetzalcoatl/mod_python/trunk
mod_python-trunk

Details at:

  https://issues.apache.org/jira/browse/MODPYTHON-249

Graham

2009/8/5 Mr. John Perkins <john.d.perkins@gmail.com>:
> Hello World,
>
> I'm running into a wall trying to compile mod_python on my development
> environment. Any help would be greatly appreciated.
>
> Configure exits clean and everything looks good. Make fails with:
>
>> make
> Compiling for DSO.
> ?== SNIP ==
> "tableobject.c", line 1092: warning: initialization type mismatch
> /usr/apr/1.3/build/libtool --silent --mode=compile cc -m32 -prefer-pic -xO3
> -m32 -xchip=pentium -xspace -Xa -xildoff -xc99=all -DSSL_EXPERIMENTAL
> -DSSL_ENGINE -xO4? -DSOLARIS2=11 -D_POSIX_PTHREAD_SEMANTICS -D_REENTRANT -mt
> -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64? -I/usr/apache2/2.2/include
> -I/usr/apr/1.3/include?? -I/usr/apr-util/1.3/include -I/usr/include
> -I/export/home/john/Downloads/mod_python_extracted/mod_python-3.3.1/src/include
> -I/usr/apache2/2.2/include -I/usr/include/python2.4? -c -o util.lo util.c &&
> touch util.slo
> /usr/apr/1.3/build/libtool --silent --mode=compile cc -m32 -prefer-pic -xO3
> -m32 -xchip=pentium -xspace -Xa -xildoff -xc99=all -DSSL_EXPERIMENTAL
> -DSSL_ENGINE -xO4? -DSOLARIS2=11 -D_POSIX_PTHREAD_SEMANTICS -D_REENTRANT -mt
> -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64? -I/usr/apache2/2.2/include
> -I/usr/apr/1.3/include?? -I/usr/apr-util/1.3/include -I/usr/include
> -I/export/home/john/Downloads/mod_python_extracted/mod_python-3.3.1/src/include
> -I/usr/apache2/2.2/include -I/usr/include/python2.4? -c -o serverobject.lo
> serverobject.c && touch serverobject.slo
> "serverobject.c", line 387: warning: initialization type mismatch
> /usr/apr/1.3/build/libtool --silent --mode=compile cc -m32 -prefer-pic -xO3
> -m32 -xchip=pentium -xspace -Xa -xildoff -xc99=all -DSSL_EXPERIMENTAL
> -DSSL_ENGINE -xO4? -DSOLARIS2=11 -D_POSIX_PTHREAD_SEMANTICS -D_REENTRANT -mt
> -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64? -I/usr/apache2/2.2/include
> -I/usr/apr/1.3/include?? -I/usr/apr-util/1.3/include -I/usr/include
> -I/export/home/john/Downloads/mod_python_extracted/mod_python-3.3.1/src/include
> -I/usr/apache2/2.2/include -I/usr/include/python2.4? -c -o connobject.lo
> connobject.c && touch connobject.slo
> "connobject.c", line 142: non-unique member requires struct/union pointer:
> next
> "connobject.c", line 142: warning: left operand of "->" must be pointer to
> struct/union
> cc: acomp failed for connobject.c
> apxs:Error: Command failed with rc=65536
> .
> *** Error code 1
> make: Fatal error: Command failed for target `mod_python.so'
> Current working directory
> /export/home/john/Downloads/mod_python_extracted/mod_python-3.3.1/src
> *** Error code 1
> The following command caused the error:
> cd src && make
> make: Fatal error: Command failed for target `do_dso'
> == SNIP ==
>
>
> Anyone see whats wrong here?
>
>
>
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>
>

From paux at paukner.cc  Thu Aug  6 11:01:01 2009
From: paux at paukner.cc (Stephan Paukner)
Date: Thu Aug  6 11:01:05 2009
Subject: [mod_python] mod_python modifies time zone of Apache child
Message-ID: <1249570861.2988.65.camel@pc520-4.centersystems.at>

Hi,

I use Apache2 in MPM prefork mode. I noticed that if a specific Apache
child process handles a request to a roundup(.sf.net) tracker instance
via mod_python, the child's time zone is set to UTC, permanently. If any
other HTTP client gets to reuse that specific Apache child, the request
is still handled in UTC. This leads to times jumping between UTC and the
local timezone e.g. in a PHP-based calendar on the same site, depending
on the involved Apache child processes, what is quite annoying.

If I request the following URL sequence after an Apache restart:
    https://ourhostname/server-status
    https://ourhostname/tracker/
    https://ourhostname/server-status
then the "Current Time" indicated in the server-status shows e.g.
"03:13:37 CEST" (our local timezone) before and "01:13:37 UTC"
afterwards, because all three requests are obviously served by the same
Apache child. These jumping times also show up in the Apache logs.

This doesn't happen if I directly access the tracker via
    http://ourhostname:8080/tracker/

I tried adding
    SetEnv TZ Europe/Vienna
at various places in our virtual host, but AFAIK these settings are only
read at the creation of a child process, not repeatedly. I don't know
how to set the timezone globally for all python instances on that host;
I set TZ in /etc/environment. I've set up the mod_python.testhandler
like suggested in the Troubleshooting section, and /mpinfo indeed shows
"TZ" with value "Europe/Vienna", but I can't see any time information in
that output.


All packages are from Debian amd64 Lenny. mod_python bindings for
roundup are just as suggested
in /usr/share/doc/roundup/examples/roundup_apache.


Any suggestions on how to explore this further? Do you need more config
info?
Thanks!

Regards
-- 
Stephan Paukner <paux@paukner.cc>

From graham.dumpleton at gmail.com  Thu Aug  6 19:33:08 2009
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Thu Aug  6 19:33:15 2009
Subject: [mod_python] mod_python modifies time zone of Apache child
In-Reply-To: <1249570861.2988.65.camel@pc520-4.centersystems.at>
References: <1249570861.2988.65.camel@pc520-4.centersystems.at>
Message-ID: <88e286470908061633p7aba6667pac475ae696714102@mail.gmail.com>

2009/8/7 Stephan Paukner <paux@paukner.cc>:
> Hi,
>
> I use Apache2 in MPM prefork mode. I noticed that if a specific Apache
> child process handles a request to a roundup(.sf.net) tracker instance
> via mod_python, the child's time zone is set to UTC, permanently. If any
> other HTTP client gets to reuse that specific Apache child, the request
> is still handled in UTC. This leads to times jumping between UTC and the
> local timezone e.g. in a PHP-based calendar on the same site, depending
> on the involved Apache child processes, what is quite annoying.
>
> If I request the following URL sequence after an Apache restart:
> ? ?https://ourhostname/server-status
> ? ?https://ourhostname/tracker/
> ? ?https://ourhostname/server-status
> then the "Current Time" indicated in the server-status shows e.g.
> "03:13:37 CEST" (our local timezone) before and "01:13:37 UTC"
> afterwards, because all three requests are obviously served by the same
> Apache child. These jumping times also show up in the Apache logs.
>
> This doesn't happen if I directly access the tracker via
> ? ?http://ourhostname:8080/tracker/
>
> I tried adding
> ? ?SetEnv TZ Europe/Vienna
> at various places in our virtual host, but AFAIK these settings are only
> read at the creation of a child process, not repeatedly. I don't know
> how to set the timezone globally for all python instances on that host;
> I set TZ in /etc/environment. I've set up the mod_python.testhandler
> like suggested in the Troubleshooting section, and /mpinfo indeed shows
> "TZ" with value "Europe/Vienna", but I can't see any time information in
> that output.
>
>
> All packages are from Debian amd64 Lenny. mod_python bindings for
> roundup are just as suggested
> in /usr/share/doc/roundup/examples/roundup_apache.
>
>
> Any suggestions on how to explore this further? Do you need more config
> info?

The PHP and Python applications run in the same process and TZ is a
process global setting so it is obvious that this will occur. Similar
issues will occur with locale and language settings.

The only answer is you can't run them in the same process which for
mod_php/mod_python means you cannot run them on the same Apache
instance.

Your only options are to bump PHP out to separate fastcgi process, or
use mod_wsgi instead of mod_python and use mod_wsgi daemon mode to
delegate the Python web application out to a separate process.

Graham

From Wayne.Collier at noaa.gov  Fri Aug  7 16:05:33 2009
From: Wayne.Collier at noaa.gov (wayne collier)
Date: Fri Aug  7 16:05:45 2009
Subject: [mod_python] Problem compiling mod_python
Message-ID: <4A7C890D.5010402@noaa.gov>

Hello all. I am having problems compiling mod_python3.3.1 with apache 
2.2.11.  Also we are using python 2.6.2. When I run  the make command I 
get the following errors (see below). Can someone help me with this?!?

    # *make gives the following:*

    *make[1]: *** [mod_python.so] Error 1
    make[1]: Leaving directory `/opt/sources/mod_python-3.3.1/src'
    make: *** [do_dso] Error 2

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20090807/3646eb2b/attachment.html
From graham at gkgk.org  Fri Aug  7 18:45:38 2009
From: graham at gkgk.org (Graham King)
Date: Fri Aug  7 18:45:44 2009
Subject: [mod_python] mod_python re-writing custom HTTP response codes to 500
Message-ID: <587638c00908071545s513fd549o992e27f945f098c3@mail.gmail.com>

 Hi,

When sending an unofficial HTTP response code (I tried 278, 209 and
600) from a Django view, mod_python seems to be re-writing it to 500.
Django with mod_wsgi on the same server doesn't change the response
code.

In mod_python.c (for mod_python 3.3.1) line 1730 there is this comment:
  'If the req->status or return code is a weird number that the server
doesn't know, it will default to 500 Internal Server Error.'

Is this expected behavior? Is there any way around it?
I am trying to get a custom HTTP response code to Javascript (XMLHttpRequest).

Thanks in advance,
Graham King
From graham.dumpleton at gmail.com  Fri Aug  7 21:35:06 2009
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Fri Aug  7 21:35:15 2009
Subject: [mod_python] Re: Problem compiling mod_python
In-Reply-To: <4A7C890D.5010402@noaa.gov>
References: <4A7C890D.5010402@noaa.gov>
Message-ID: <88e286470908071835r2e718e6ctc1ac4f398456b8d5@mail.gmail.com>

2009/8/8 wayne collier <Wayne.Collier@noaa.gov>:
> Hello all. I am having problems compiling mod_python3.3.1 with apache
> 2.2.11.? Also we are using python 2.6.2. When I run? the make command I get
> the following errors (see below). Can someone help me with this?!?

No, because you haven't even posted what the compiler error or actual
cause was. All you have posted is that the make program failed, but
not what it executed that failed. You will need to supply more of the
output from make program.

That said, there are a few suspects as to what cause could be, but
would be just guessing. So, post the more complete error output, or if
just wanting to host a WSGI capable application, perhaps use mod_wsgi
instead, which you may have better chance of getting to work given
that mod_python tar ball will not build out of the box on some current
Apache/Python installations.

Graham

> ??? # make gives the following:
>
> ??? *make[1]: *** [mod_python.so] Error 1
> ??? make[1]: Leaving directory `/opt/sources/mod_python-3.3.1/src'
> ??? make: *** [do_dso] Error 2
>
>

From graham.dumpleton at gmail.com  Fri Aug  7 21:38:05 2009
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Fri Aug  7 21:38:13 2009
Subject: [mod_python] mod_python re-writing custom HTTP response codes to 
	500
In-Reply-To: <587638c00908071545s513fd549o992e27f945f098c3@mail.gmail.com>
References: <587638c00908071545s513fd549o992e27f945f098c3@mail.gmail.com>
Message-ID: <88e286470908071838x35f59c4t31ecb298223e708f@mail.gmail.com>

This is better asked on a Django list as unlikely that it would have
anything to do with mod_python but how you are raising the errors in
Django and whether Django allows you to override those errors. I would
suggest that when you post to Django list, that you provide them code
snippet to show how you are setting up that response status.

Graham

2009/8/8 Graham King <graham@gkgk.org>:
> ?Hi,
>
> When sending an unofficial HTTP response code (I tried 278, 209 and
> 600) from a Django view, mod_python seems to be re-writing it to 500.
> Django with mod_wsgi on the same server doesn't change the response
> code.
>
> In mod_python.c (for mod_python 3.3.1) line 1730 there is this comment:
> ?'If the req->status or return code is a weird number that the server
> doesn't know, it will default to 500 Internal Server Error.'
>
> Is this expected behavior? Is there any way around it?
> I am trying to get a custom HTTP response code to Javascript (XMLHttpRequest).
>
> Thanks in advance,
> Graham King
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>

From graham at gkgk.org  Sat Aug  8 00:09:42 2009
From: graham at gkgk.org (Graham King)
Date: Sat Aug  8 00:09:51 2009
Subject: [mod_python] mod_python re-writing custom HTTP response codes to 
	500
In-Reply-To: <88e286470908071838x35f59c4t31ecb298223e708f@mail.gmail.com>
References: <587638c00908071545s513fd549o992e27f945f098c3@mail.gmail.com>
	<88e286470908071838x35f59c4t31ecb298223e708f@mail.gmail.com>
Message-ID: <587638c00908072109y5fcc36f8h5ef78f8e5d70373@mail.gmail.com>

 It looks like it's mod_python, as I can reproduce it without Django.
Here's what I'm doing

In my apache conf I have:

<Location "/">
    SetHandler mod_python
    PythonHandler test_mp
    PythonDebug on
</Location>

And test_mp.py is:

def handler(req):
    req.content_type = 'text/plain'
    req.status = 278
    req.write('Hello World!\n')
    return 0

The access log has the HTTP status code 278:
127.0.0.1 - - [07/Aug/2009:20:54:36 -0700] "GET / HTTP/1.1" 278 39 "-"
"Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.13) Gecko/2009080315
Ubuntu/9.04 (jaunty) Firefox/3.0.13"

but a 500 is actually returned:
----
21:06:13 graham@rufus:~$ telnet localhost 80
Connected to localhost.
Escape character is '^]'.
GET / HTTP/1.1
Host: localhost

HTTP/1.1 500 Internal Server Error
Date: Sat, 08 Aug 2009 04:06:20 GMT
Server: Apache/2.2.11 (Ubuntu) PHP/5.2.6-3ubuntu4.1 with Suhosin-Patch
mod_python/3.3.1 Python/2.6.2
Vary: Accept-Encoding
Transfer-Encoding: chunked
Content-Type: text/plain

d
Hello World!

0
----

If I change the response code to any official one, 201 for example, it
works fine.

PHP on the same Apache returns the 278, and mod_wsgi seems to work fine as well.

Thanks,
Graham

2009/8/7 Graham Dumpleton <graham.dumpleton@gmail.com>:
> This is better asked on a Django list as unlikely that it would have
> anything to do with mod_python but how you are raising the errors in
> Django and whether Django allows you to override those errors. I would
> suggest that when you post to Django list, that you provide them code
> snippet to show how you are setting up that response status.
>
> Graham
>
> 2009/8/8 Graham King <graham@gkgk.org>:
>> ?Hi,
>>
>> When sending an unofficial HTTP response code (I tried 278, 209 and
>> 600) from a Django view, mod_python seems to be re-writing it to 500.
>> Django with mod_wsgi on the same server doesn't change the response
>> code.
>>
>> In mod_python.c (for mod_python 3.3.1) line 1730 there is this comment:
>> ?'If the req->status or return code is a weird number that the server
>> doesn't know, it will default to 500 Internal Server Error.'
>>
>> Is this expected behavior? Is there any way around it?
>> I am trying to get a custom HTTP response code to Javascript (XMLHttpRequest).
>>
>> Thanks in advance,
>> Graham King
>> _______________________________________________
>> Mod_python mailing list
>> Mod_python@modpython.org
>> http://mailman.modpython.org/mailman/listinfo/mod_python
>>
>

From graham.dumpleton at gmail.com  Sat Aug  8 00:51:41 2009
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Sat Aug  8 00:51:49 2009
Subject: [mod_python] mod_python re-writing custom HTTP response codes to 
	500
In-Reply-To: <587638c00908072109y5fcc36f8h5ef78f8e5d70373@mail.gmail.com>
References: <587638c00908071545s513fd549o992e27f945f098c3@mail.gmail.com>
	<88e286470908071838x35f59c4t31ecb298223e708f@mail.gmail.com>
	<587638c00908072109y5fcc36f8h5ef78f8e5d70373@mail.gmail.com>
Message-ID: <88e286470908072151g2f9b3443ybc9cc00073b3a6d1@mail.gmail.com>

2009/8/8 Graham King <graham@gkgk.org>:
> ?It looks like it's mod_python, as I can reproduce it without Django.
> Here's what I'm doing
>
> In my apache conf I have:
>
> <Location "/">
> ? ?SetHandler mod_python
> ? ?PythonHandler test_mp
> ? ?PythonDebug on
> </Location>
>
> And test_mp.py is:
>
> def handler(req):
> ? ?req.content_type = 'text/plain'
> ? ?req.status = 278

You need to use mod_python form subversion repository trunk:

  https://issues.apache.org/jira/browse/MODPYTHON-226

and also set:

  req.status_line = '278 My Custom Error Description'

If there is no status line associated with a non standard HTTP status,
Apache will return a 500 error response instead.

Since Django with its mod_python interface isn't going to be doing
this, and can't anyway as it can't rely on people having non official
release of mod_python, then you cant return custom status with Django.

It will work with Django on mod_wsgi, but the description of the
status used will be ''UNKNOWN STATUS CODE'', unless you fudge
django.core.handlers.wsgi.STATUS_CODE_TEXT to also contain description
for your custom status value.

> ? ?req.write('Hello World!\n')
> ? ?return 0

Should be:

  return apache.OK

Graham

> The access log has the HTTP status code 278:
> 127.0.0.1 - - [07/Aug/2009:20:54:36 -0700] "GET / HTTP/1.1" 278 39 "-"
> "Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.13) Gecko/2009080315
> Ubuntu/9.04 (jaunty) Firefox/3.0.13"
>
> but a 500 is actually returned:
> ----
> 21:06:13 graham@rufus:~$ telnet localhost 80
> Connected to localhost.
> Escape character is '^]'.
> GET / HTTP/1.1
> Host: localhost
>
> HTTP/1.1 500 Internal Server Error
> Date: Sat, 08 Aug 2009 04:06:20 GMT
> Server: Apache/2.2.11 (Ubuntu) PHP/5.2.6-3ubuntu4.1 with Suhosin-Patch
> mod_python/3.3.1 Python/2.6.2
> Vary: Accept-Encoding
> Transfer-Encoding: chunked
> Content-Type: text/plain
>
> d
> Hello World!
>
> 0
> ----
>
> If I change the response code to any official one, 201 for example, it
> works fine.
>
> PHP on the same Apache returns the 278, and mod_wsgi seems to work fine as well.
>
> Thanks,
> Graham
>
> 2009/8/7 Graham Dumpleton <graham.dumpleton@gmail.com>:
>> This is better asked on a Django list as unlikely that it would have
>> anything to do with mod_python but how you are raising the errors in
>> Django and whether Django allows you to override those errors. I would
>> suggest that when you post to Django list, that you provide them code
>> snippet to show how you are setting up that response status.
>>
>> Graham
>>
>> 2009/8/8 Graham King <graham@gkgk.org>:
>>> ?Hi,
>>>
>>> When sending an unofficial HTTP response code (I tried 278, 209 and
>>> 600) from a Django view, mod_python seems to be re-writing it to 500.
>>> Django with mod_wsgi on the same server doesn't change the response
>>> code.
>>>
>>> In mod_python.c (for mod_python 3.3.1) line 1730 there is this comment:
>>> ?'If the req->status or return code is a weird number that the server
>>> doesn't know, it will default to 500 Internal Server Error.'
>>>
>>> Is this expected behavior? Is there any way around it?
>>> I am trying to get a custom HTTP response code to Javascript (XMLHttpRequest).
>>>
>>> Thanks in advance,
>>> Graham King
>>> _______________________________________________
>>> Mod_python mailing list
>>> Mod_python@modpython.org
>>> http://mailman.modpython.org/mailman/listinfo/mod_python
>>>
>>
>

From jome at eraction.org  Mon Aug 10 03:34:41 2009
From: jome at eraction.org (Jome Akpoduado)
Date: Mon Aug 10 03:34:59 2009
Subject: [mod_python] My WMS server is running.... what next?
Message-ID: <000001ca198d$0a1a4f60$1e4eee20$@org>

Hello,

Please let me establish a baseline before I proceed. I got excited about
Mapnik when I saw what it could achieve via the Drupal WMS client, Nice Map.
I decided to build my own WMS server for my Drupal websites and I think I've
gotten way over my head on this. I've no experience in python (but that has
been fast changing in the last few days) but I managed to get Mapnik
installed on my server (running Ubuntu 8.10) and followed the available
tutorials on creating first maps and I think I passed that hurdle so far.

However, where I get stumped is when I make an http request for a map (much
like what the Nice map Drupal module would do) and nothing just happens.

I've searched and scoured through sites looking for any good tutorials that
could help an enthusiastic newbie like me get off the ground with even the
simplest of external map requests. Can anyone help out or point me to good
enough documentation that us mere mortals can follow?

Many thanks.

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20090810/0dabe481/attachment.html
From graham.dumpleton at gmail.com  Mon Aug 10 03:49:56 2009
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Mon Aug 10 03:50:04 2009
Subject: [mod_python] My WMS server is running.... what next?
In-Reply-To: <000001ca198d$0a1a4f60$1e4eee20$@org>
References: <000001ca198d$0a1a4f60$1e4eee20$@org>
Message-ID: <88e286470908100049x361ae371o9ff10091fc8cc621@mail.gmail.com>

This list is for mod_python only. It is not a generic list for
discussion of everything Python.

If you have a specific mod_python problem, then explain properly what
that is and supply all relevant error logs, configuration details and
code. For non mod_python stuff, you may be better off asking on:

  http://groups.google.com/group/comp.lang.python/topics?lnk

or:

  http://stackoverflow.com/

Graham

2009/8/10 Jome Akpoduado <jome@eraction.org>:
> Hello,
>
> Please let me establish a baseline before I proceed. I got excited about
> Mapnik when I saw what it could achieve via the Drupal WMS client, Nice Map.
> I decided to build my own WMS server for my Drupal websites and I think I?ve
> gotten way over my head on this. I?ve no experience in python (but that has
> been fast changing in the last few days) but I managed to get Mapnik
> installed on my server (running Ubuntu 8.10) and followed the available
> tutorials on creating first maps and I think I passed that hurdle so far.
>
> However, where I get stumped is when I make an http request for a map (much
> like what the Nice map Drupal module would do) and nothing just happens.
>
> I?ve searched and scoured through sites looking for any good tutorials that
> could help an enthusiastic newbie like me get off the ground with even the
> simplest of external map requests. Can anyone help out or point me to good
> enough documentation that us mere mortals can follow?
>
> Many thanks.
>
>
>
>
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>
>

From jonrascal at gmail.com  Wed Aug 12 20:43:52 2009
From: jonrascal at gmail.com (Jon Rascal)
Date: Wed Aug 12 20:44:00 2009
Subject: [mod_python] Best way to persist a DB or LDAP connection
Message-ID: <b331d0640908121743o5d607d35v769fdda7e8a29629@mail.gmail.com>

Hi,

I'm using mod python in the fixuphandler phase before the content (generic)
handler takes charge and wondering what's the best way to open a persistent
connection to the database or LDAP  server?

Thanks,
Rascal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20090812/2ce3a321/attachment.html
From graham.dumpleton at gmail.com  Wed Aug 12 21:05:12 2009
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Wed Aug 12 21:05:21 2009
Subject: [mod_python] Best way to persist a DB or LDAP connection
In-Reply-To: <b331d0640908121743o5d607d35v769fdda7e8a29629@mail.gmail.com>
References: <b331d0640908121743o5d607d35v769fdda7e8a29629@mail.gmail.com>
Message-ID: <88e286470908121805m1a88a976v45e5cc89a9da6724@mail.gmail.com>

2009/8/13 Jon Rascal <jonrascal@gmail.com>:
> Hi,
>
> I'm using mod python in the fixuphandler phase before the content (generic)
> handler takes charge and wondering what's the best way to open a persistent
> connection to the database or LDAP? server?

How you open it is up to the Python module you are going to use to
connect to them. As to retaining the connection, you would want to
store it in a Python module which is NOT subject to reloading by
mod_python. Thus, should be outside of document directories and not be
in the handler code file. Thus, in a module that only appears on
Python sys.path. Read:

  http://www.dscpl.com.au/wiki/ModPython/Articles/TheProcessInterpreterModel
  http://www.modpython.org/live/current/doc-html/pyapi-apmeth.html

The latter to read about mod_python import_module() function and
'import' overlay. You do not want to store it in a code file managed
by this mod_python module importer.

Graham

From koalay at gmail.com  Thu Aug 20 04:22:25 2009
From: koalay at gmail.com (Shu Hung (Koala))
Date: Thu Aug 20 04:22:34 2009
Subject: [mod_python] mod_python compilation error
Message-ID: <7609c6380908200122wc5d8ee8i7a21d1ecb1b33c41@mail.gmail.com>

Hello,

I tried to compile mod_python 3.3.1 for Apache 2.2.13
An error "Command failed with rc=65536" occured.
I searched Google and it should be solved on 2008 with Apache
updated<http://www.modpython.org/pipermail/mod_python/2008-November/025776.html>
.




Compiling for DSO.
>
> /usr/local/apache-2.2.13/bin/apxs
> -I/usr/share/src/mod_python-3.3.1/src/include
> -I/usr/local/apache-2.2.13/include -I/usr/local/include/python2.5 -c
> mod_python.c _apachemodule.c requestobject.c tableobject.c util.c
> serverobject.c connobject.c filterobject.c hlist.c hlistobject.c
> finfoobject.c -L/usr/local/lib/python2.5/config  -Xlinker
> -export-dynamic      -lm  -lpython2.5 -lpthread -ldl -lutil -lm
> /usr/local/apache-2.2.13/build/libtool --silent --mode=compile gcc
> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -g
> -O2 -pthread -I/usr/local/apache-2.2.13/include
> -I/usr/local/apache-2.2.13/include   -I/usr/local/apache-2.2.13/include
> -I/usr/share/src/mod_python-3.3.1/src/include
> -I/usr/local/apache-2.2.13/include -I/usr/local/include/python2.5  -c -o
> mod_python.lo mod_python.c && touch mod_python.slo
> In file included from /usr/local/include/python2.5/Python.h:8,
>                  from
> /usr/share/src/mod_python-3.3.1/src/include/mod_python.h:80,
>                  from mod_python.c:28:
> /usr/local/include/python2.5/pyconfig.h:932:1: warning: "_POSIX_C_SOURCE"
> redefined
> In file included from /usr/include/sys/types.h:27,
>                  from /usr/local/apache-2.2.13/include/apr.h:127,
>                  from /usr/local/apache-2.2.13/include/ap_config.h:25,
>                  from /usr/local/apache-2.2.13/include/httpd.h:43,
>                  from
> /usr/share/src/mod_python-3.3.1/src/include/mod_python.h:42,
>                  from mod_python.c:28:
> /usr/include/features.h:150:1: warning: this is the location of the
> previous definition
> mod_python.c: In function `python_init':
> mod_python.c:826: warning: initialization from incompatible pointer type
> /usr/local/apache-2.2.13/build/libtool --silent --mode=compile gcc
> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -g
> -O2 -pthread -I/usr/local/apache-2.2.13/include
> -I/usr/local/apache-2.2.13/include   -I/usr/local/apache-2.2.13/include
> -I/usr/share/src/mod_python-3.3.1/src/include
> -I/usr/local/apache-2.2.13/include -I/usr/local/include/python2.5  -c -o
> _apachemodule.lo _apachemodule.c && touch _apachemodule.slo
> In file included from /usr/local/include/python2.5/Python.h:8,
>                  from
> /usr/share/src/mod_python-3.3.1/src/include/mod_python.h:80,
>                  from _apachemodule.c:25:
> /usr/local/include/python2.5/pyconfig.h:932:1: warning: "_POSIX_C_SOURCE"
> redefined
> In file included from /usr/include/sys/types.h:27,
>                  from /usr/local/apache-2.2.13/include/apr.h:127,
>                  from /usr/local/apache-2.2.13/include/ap_config.h:25,
>                  from /usr/local/apache-2.2.13/include/httpd.h:43,
>                  from
> /usr/share/src/mod_python-3.3.1/src/include/mod_python.h:42,
>                  from _apachemodule.c:25:
> /usr/include/features.h:150:1: warning: this is the location of the
> previous definition
> /usr/local/apache-2.2.13/build/libtool --silent --mode=compile gcc
> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -g
> -O2 -pthread -I/usr/local/apache-2.2.13/include
> -I/usr/local/apache-2.2.13/include   -I/usr/local/apache-2.2.13/include
> -I/usr/share/src/mod_python-3.3.1/src/include
> -I/usr/local/apache-2.2.13/include -I/usr/local/include/python2.5  -c -o
> requestobject.lo requestobject.c && touch requestobject.slo
> In file included from /usr/local/include/python2.5/Python.h:8,
>                  from
> /usr/share/src/mod_python-3.3.1/src/include/mod_python.h:80,
>                  from requestobject.c:25:
> /usr/local/include/python2.5/pyconfig.h:932:1: warning: "_POSIX_C_SOURCE"
> redefined
> In file included from /usr/include/sys/types.h:27,
>                  from /usr/local/apache-2.2.13/include/apr.h:127,
>                  from /usr/local/apache-2.2.13/include/ap_config.h:25,
>                  from /usr/local/apache-2.2.13/include/httpd.h:43,
>                  from
> /usr/share/src/mod_python-3.3.1/src/include/mod_python.h:42,
>                  from requestobject.c:25:
> /usr/include/features.h:150:1: warning: this is the location of the
> previous definition
> /usr/local/apache-2.2.13/build/libtool --silent --mode=compile gcc
> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -g
> -O2 -pthread -I/usr/local/apache-2.2.13/include
> -I/usr/local/apache-2.2.13/include   -I/usr/local/apache-2.2.13/include
> -I/usr/share/src/mod_python-3.3.1/src/include
> -I/usr/local/apache-2.2.13/include -I/usr/local/include/python2.5  -c -o
> tableobject.lo tableobject.c && touch tableobject.slo
> In file included from /usr/local/include/python2.5/Python.h:8,
>                  from
> /usr/share/src/mod_python-3.3.1/src/include/mod_python.h:80,
>                  from tableobject.c:25:
> /usr/local/include/python2.5/pyconfig.h:932:1: warning: "_POSIX_C_SOURCE"
> redefined
> In file included from /usr/include/sys/types.h:27,
>                  from /usr/local/apache-2.2.13/include/apr.h:127,
>                  from /usr/local/apache-2.2.13/include/ap_config.h:25,
>                  from /usr/local/apache-2.2.13/include/httpd.h:43,
>                  from
> /usr/share/src/mod_python-3.3.1/src/include/mod_python.h:42,
>                  from tableobject.c:25:
> /usr/include/features.h:150:1: warning: this is the location of the
> previous definition
> tableobject.c:1092: warning: initialization from incompatible pointer type
> /usr/local/apache-2.2.13/build/libtool --silent --mode=compile gcc
> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -g
> -O2 -pthread -I/usr/local/apache-2.2.13/include
> -I/usr/local/apache-2.2.13/include   -I/usr/local/apache-2.2.13/include
> -I/usr/share/src/mod_python-3.3.1/src/include
> -I/usr/local/apache-2.2.13/include -I/usr/local/include/python2.5  -c -o
> util.lo util.c && touch util.slo
> In file included from /usr/local/include/python2.5/Python.h:8,
>                  from
> /usr/share/src/mod_python-3.3.1/src/include/mod_python.h:80,
>                  from util.c:28:
> /usr/local/include/python2.5/pyconfig.h:932:1: warning: "_POSIX_C_SOURCE"
> redefined
> In file included from /usr/include/sys/types.h:27,
>                  from /usr/local/apache-2.2.13/include/apr.h:127,
>                  from /usr/local/apache-2.2.13/include/ap_config.h:25,
>                  from /usr/local/apache-2.2.13/include/httpd.h:43,
>                  from
> /usr/share/src/mod_python-3.3.1/src/include/mod_python.h:42,
>                  from util.c:28:
> /usr/include/features.h:150:1: warning: this is the location of the
> previous definition
> /usr/local/apache-2.2.13/build/libtool --silent --mode=compile gcc
> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -g
> -O2 -pthread -I/usr/local/apache-2.2.13/include
> -I/usr/local/apache-2.2.13/include   -I/usr/local/apache-2.2.13/include
> -I/usr/share/src/mod_python-3.3.1/src/include
> -I/usr/local/apache-2.2.13/include -I/usr/local/include/python2.5  -c -o
> serverobject.lo serverobject.c && touch serverobject.slo
> In file included from /usr/local/include/python2.5/Python.h:8,
>                  from
> /usr/share/src/mod_python-3.3.1/src/include/mod_python.h:80,
>                  from serverobject.c:25:
> /usr/local/include/python2.5/pyconfig.h:932:1: warning: "_POSIX_C_SOURCE"
> redefined
> In file included from /usr/include/sys/types.h:27,
>                  from /usr/local/apache-2.2.13/include/apr.h:127,
>                  from /usr/local/apache-2.2.13/include/ap_config.h:25,
>                  from /usr/local/apache-2.2.13/include/httpd.h:43,
>                  from
> /usr/share/src/mod_python-3.3.1/src/include/mod_python.h:42,
>                  from serverobject.c:25:
> /usr/include/features.h:150:1: warning: this is the location of the
> previous definition
> serverobject.c:387: warning: initialization from incompatible pointer type
> /usr/local/apache-2.2.13/build/libtool --silent --mode=compile gcc
> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -g
> -O2 -pthread -I/usr/local/apache-2.2.13/include
> -I/usr/local/apache-2.2.13/include   -I/usr/local/apache-2.2.13/include
> -I/usr/share/src/mod_python-3.3.1/src/include
> -I/usr/local/apache-2.2.13/include -I/usr/local/include/python2.5  -c -o
> connobject.lo connobject.c && touch connobject.slo
> In file included from /usr/local/include/python2.5/Python.h:8,
>                  from
> /usr/share/src/mod_python-3.3.1/src/include/mod_python.h:80,
>                  from connobject.c:30:
> /usr/local/include/python2.5/pyconfig.h:932:1: warning: "_POSIX_C_SOURCE"
> redefined
> In file included from /usr/include/sys/types.h:27,
>                  from /usr/local/apache-2.2.13/include/apr.h:127,
>                  from /usr/local/apache-2.2.13/include/ap_config.h:25,
>                  from /usr/local/apache-2.2.13/include/httpd.h:43,
>                  from
> /usr/share/src/mod_python-3.3.1/src/include/mod_python.h:42,
>                  from connobject.c:30:
> /usr/include/features.h:150:1: warning: this is the location of the
> previous definition
> connobject.c: In function `_conn_read':
> connobject.c:142: error: request for member `next' in something not a
> structure or union
> apxs:Error: Command failed with rc=65536
> .
> make[1]: *** [mod_python.so] Error 1
> make[1]: Leaving directory `/usr/share/src/mod_python-3.3.1/src'
> make: *** [do_dso] Error 2
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20090820/db7b9070/attachment-0001.html
From graham.dumpleton at gmail.com  Thu Aug 20 04:56:56 2009
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Thu Aug 20 04:57:06 2009
Subject: [mod_python] mod_python compilation error
In-Reply-To: <7609c6380908200122wc5d8ee8i7a21d1ecb1b33c41@mail.gmail.com>
References: <7609c6380908200122wc5d8ee8i7a21d1ecb1b33c41@mail.gmail.com>
Message-ID: <88e286470908200156s3c0622e6x4942b9df2ce279cc@mail.gmail.com>

2009/8/20 Shu Hung (Koala) <koalay@gmail.com>:
> Hello,
>
> I tried to compile mod_python 3.3.1 for Apache 2.2.13
> An error "Command failed with rc=65536" occured.
> I searched Google and it should be solved on 2008 with Apache updated.

That is not what the ticket says. The mod_python package is not
connected with Apache releases. The only way you can get fix is to
check mod_python out from mod_python subversion repository or make the
change yourself that is mentioned in that ticket. There has never been
any mod_python release including the fix.

Graham

>> Compiling for DSO.
>>
>> /usr/local/apache-2.2.13/bin/apxs
>> -I/usr/share/src/mod_python-3.3.1/src/include
>> -I/usr/local/apache-2.2.13/include -I/usr/local/include/python2.5 -c
>> mod_python.c _apachemodule.c requestobject.c tableobject.c util.c
>> serverobject.c connobject.c filterobject.c hlist.c hlistobject.c
>> finfoobject.c -L/usr/local/lib/python2.5/config? -Xlinker
>> -export-dynamic????? -lm? -lpython2.5 -lpthread -ldl -lutil -lm
>> /usr/local/apache-2.2.13/build/libtool --silent --mode=compile gcc
>> -prefer-pic?? -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -g
>> -O2 -pthread -I/usr/local/apache-2.2.13/include
>> -I/usr/local/apache-2.2.13/include?? -I/usr/local/apache-2.2.13/include
>> -I/usr/share/src/mod_python-3.3.1/src/include
>> -I/usr/local/apache-2.2.13/include -I/usr/local/include/python2.5? -c -o
>> mod_python.lo mod_python.c && touch mod_python.slo
>> In file included from /usr/local/include/python2.5/Python.h:8,
>> ???????????????? from
>> /usr/share/src/mod_python-3.3.1/src/include/mod_python.h:80,
>> ???????????????? from mod_python.c:28:
>> /usr/local/include/python2.5/pyconfig.h:932:1: warning: "_POSIX_C_SOURCE"
>> redefined
>> In file included from /usr/include/sys/types.h:27,
>> ???????????????? from /usr/local/apache-2.2.13/include/apr.h:127,
>> ???????????????? from /usr/local/apache-2.2.13/include/ap_config.h:25,
>> ???????????????? from /usr/local/apache-2.2.13/include/httpd.h:43,
>> ???????????????? from
>> /usr/share/src/mod_python-3.3.1/src/include/mod_python.h:42,
>> ???????????????? from mod_python.c:28:
>> /usr/include/features.h:150:1: warning: this is the location of the
>> previous definition
>> mod_python.c: In function `python_init':
>> mod_python.c:826: warning: initialization from incompatible pointer type
>> /usr/local/apache-2.2.13/build/libtool --silent --mode=compile gcc
>> -prefer-pic?? -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -g
>> -O2 -pthread -I/usr/local/apache-2.2.13/include
>> -I/usr/local/apache-2.2.13/include?? -I/usr/local/apache-2.2.13/include
>> -I/usr/share/src/mod_python-3.3.1/src/include
>> -I/usr/local/apache-2.2.13/include -I/usr/local/include/python2.5? -c -o
>> _apachemodule.lo _apachemodule.c && touch _apachemodule.slo
>> In file included from /usr/local/include/python2.5/Python.h:8,
>> ???????????????? from
>> /usr/share/src/mod_python-3.3.1/src/include/mod_python.h:80,
>> ???????????????? from _apachemodule.c:25:
>> /usr/local/include/python2.5/pyconfig.h:932:1: warning: "_POSIX_C_SOURCE"
>> redefined
>> In file included from /usr/include/sys/types.h:27,
>> ???????????????? from /usr/local/apache-2.2.13/include/apr.h:127,
>> ???????????????? from /usr/local/apache-2.2.13/include/ap_config.h:25,
>> ???????????????? from /usr/local/apache-2.2.13/include/httpd.h:43,
>> ???????????????? from
>> /usr/share/src/mod_python-3.3.1/src/include/mod_python.h:42,
>> ???????????????? from _apachemodule.c:25:
>> /usr/include/features.h:150:1: warning: this is the location of the
>> previous definition
>> /usr/local/apache-2.2.13/build/libtool --silent --mode=compile gcc
>> -prefer-pic?? -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -g
>> -O2 -pthread -I/usr/local/apache-2.2.13/include
>> -I/usr/local/apache-2.2.13/include?? -I/usr/local/apache-2.2.13/include
>> -I/usr/share/src/mod_python-3.3.1/src/include
>> -I/usr/local/apache-2.2.13/include -I/usr/local/include/python2.5? -c -o
>> requestobject.lo requestobject.c && touch requestobject.slo
>> In file included from /usr/local/include/python2.5/Python.h:8,
>> ???????????????? from
>> /usr/share/src/mod_python-3.3.1/src/include/mod_python.h:80,
>> ???????????????? from requestobject.c:25:
>> /usr/local/include/python2.5/pyconfig.h:932:1: warning: "_POSIX_C_SOURCE"
>> redefined
>> In file included from /usr/include/sys/types.h:27,
>> ???????????????? from /usr/local/apache-2.2.13/include/apr.h:127,
>> ???????????????? from /usr/local/apache-2.2.13/include/ap_config.h:25,
>> ???????????????? from /usr/local/apache-2.2.13/include/httpd.h:43,
>> ???????????????? from
>> /usr/share/src/mod_python-3.3.1/src/include/mod_python.h:42,
>> ???????????????? from requestobject.c:25:
>> /usr/include/features.h:150:1: warning: this is the location of the
>> previous definition
>> /usr/local/apache-2.2.13/build/libtool --silent --mode=compile gcc
>> -prefer-pic?? -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -g
>> -O2 -pthread -I/usr/local/apache-2.2.13/include
>> -I/usr/local/apache-2.2.13/include?? -I/usr/local/apache-2.2.13/include
>> -I/usr/share/src/mod_python-3.3.1/src/include
>> -I/usr/local/apache-2.2.13/include -I/usr/local/include/python2.5? -c -o
>> tableobject.lo tableobject.c && touch tableobject.slo
>> In file included from /usr/local/include/python2.5/Python.h:8,
>> ???????????????? from
>> /usr/share/src/mod_python-3.3.1/src/include/mod_python.h:80,
>> ???????????????? from tableobject.c:25:
>> /usr/local/include/python2.5/pyconfig.h:932:1: warning: "_POSIX_C_SOURCE"
>> redefined
>> In file included from /usr/include/sys/types.h:27,
>> ???????????????? from /usr/local/apache-2.2.13/include/apr.h:127,
>> ???????????????? from /usr/local/apache-2.2.13/include/ap_config.h:25,
>> ???????????????? from /usr/local/apache-2.2.13/include/httpd.h:43,
>> ???????????????? from
>> /usr/share/src/mod_python-3.3.1/src/include/mod_python.h:42,
>> ???????????????? from tableobject.c:25:
>> /usr/include/features.h:150:1: warning: this is the location of the
>> previous definition
>> tableobject.c:1092: warning: initialization from incompatible pointer type
>> /usr/local/apache-2.2.13/build/libtool --silent --mode=compile gcc
>> -prefer-pic?? -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -g
>> -O2 -pthread -I/usr/local/apache-2.2.13/include
>> -I/usr/local/apache-2.2.13/include?? -I/usr/local/apache-2.2.13/include
>> -I/usr/share/src/mod_python-3.3.1/src/include
>> -I/usr/local/apache-2.2.13/include -I/usr/local/include/python2.5? -c -o
>> util.lo util.c && touch util.slo
>> In file included from /usr/local/include/python2.5/Python.h:8,
>> ???????????????? from
>> /usr/share/src/mod_python-3.3.1/src/include/mod_python.h:80,
>> ???????????????? from util.c:28:
>> /usr/local/include/python2.5/pyconfig.h:932:1: warning: "_POSIX_C_SOURCE"
>> redefined
>> In file included from /usr/include/sys/types.h:27,
>> ???????????????? from /usr/local/apache-2.2.13/include/apr.h:127,
>> ???????????????? from /usr/local/apache-2.2.13/include/ap_config.h:25,
>> ???????????????? from /usr/local/apache-2.2.13/include/httpd.h:43,
>> ???????????????? from
>> /usr/share/src/mod_python-3.3.1/src/include/mod_python.h:42,
>> ???????????????? from util.c:28:
>> /usr/include/features.h:150:1: warning: this is the location of the
>> previous definition
>> /usr/local/apache-2.2.13/build/libtool --silent --mode=compile gcc
>> -prefer-pic?? -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -g
>> -O2 -pthread -I/usr/local/apache-2.2.13/include
>> -I/usr/local/apache-2.2.13/include?? -I/usr/local/apache-2.2.13/include
>> -I/usr/share/src/mod_python-3.3.1/src/include
>> -I/usr/local/apache-2.2.13/include -I/usr/local/include/python2.5? -c -o
>> serverobject.lo serverobject.c && touch serverobject.slo
>> In file included from /usr/local/include/python2.5/Python.h:8,
>> ???????????????? from
>> /usr/share/src/mod_python-3.3.1/src/include/mod_python.h:80,
>> ???????????????? from serverobject.c:25:
>> /usr/local/include/python2.5/pyconfig.h:932:1: warning: "_POSIX_C_SOURCE"
>> redefined
>> In file included from /usr/include/sys/types.h:27,
>> ???????????????? from /usr/local/apache-2.2.13/include/apr.h:127,
>> ???????????????? from /usr/local/apache-2.2.13/include/ap_config.h:25,
>> ???????????????? from /usr/local/apache-2.2.13/include/httpd.h:43,
>> ???????????????? from
>> /usr/share/src/mod_python-3.3.1/src/include/mod_python.h:42,
>> ???????????????? from serverobject.c:25:
>> /usr/include/features.h:150:1: warning: this is the location of the
>> previous definition
>> serverobject.c:387: warning: initialization from incompatible pointer type
>> /usr/local/apache-2.2.13/build/libtool --silent --mode=compile gcc
>> -prefer-pic?? -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -g
>> -O2 -pthread -I/usr/local/apache-2.2.13/include
>> -I/usr/local/apache-2.2.13/include?? -I/usr/local/apache-2.2.13/include
>> -I/usr/share/src/mod_python-3.3.1/src/include
>> -I/usr/local/apache-2.2.13/include -I/usr/local/include/python2.5? -c -o
>> connobject.lo connobject.c && touch connobject.slo
>> In file included from /usr/local/include/python2.5/Python.h:8,
>> ???????????????? from
>> /usr/share/src/mod_python-3.3.1/src/include/mod_python.h:80,
>> ???????????????? from connobject.c:30:
>> /usr/local/include/python2.5/pyconfig.h:932:1: warning: "_POSIX_C_SOURCE"
>> redefined
>> In file included from /usr/include/sys/types.h:27,
>> ???????????????? from /usr/local/apache-2.2.13/include/apr.h:127,
>> ???????????????? from /usr/local/apache-2.2.13/include/ap_config.h:25,
>> ???????????????? from /usr/local/apache-2.2.13/include/httpd.h:43,
>> ???????????????? from
>> /usr/share/src/mod_python-3.3.1/src/include/mod_python.h:42,
>> ???????????????? from connobject.c:30:
>> /usr/include/features.h:150:1: warning: this is the location of the
>> previous definition
>> connobject.c: In function `_conn_read':
>> connobject.c:142: error: request for member `next' in something not a
>> structure or union
>> apxs:Error: Command failed with rc=65536
>> .
>> make[1]: *** [mod_python.so] Error 1
>> make[1]: Leaving directory `/usr/share/src/mod_python-3.3.1/src'
>> make: *** [do_dso] Error 2
>
>
>
>
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>
>

From koalay at gmail.com  Thu Aug 20 08:48:38 2009
From: koalay at gmail.com (Shu Hung (Koala))
Date: Thu Aug 20 08:48:50 2009
Subject: [mod_python] mod_python compilation error
In-Reply-To: <88e286470908200156s3c0622e6x4942b9df2ce279cc@mail.gmail.com>
References: <7609c6380908200122wc5d8ee8i7a21d1ecb1b33c41@mail.gmail.com>
	<88e286470908200156s3c0622e6x4942b9df2ce279cc@mail.gmail.com>
Message-ID: <7609c6380908200548uc36ed24ye61cc10b29fe06b0@mail.gmail.com>

Oh, I got it.
Sorry for the stupid question.



On Thu, Aug 20, 2009 at 4:56 PM, Graham Dumpleton <
graham.dumpleton@gmail.com> wrote:

> 2009/8/20 Shu Hung (Koala) <koalay@gmail.com>:
> > Hello,
> >
> > I tried to compile mod_python 3.3.1 for Apache 2.2.13
> > An error "Command failed with rc=65536" occured.
> > I searched Google and it should be solved on 2008 with Apache updated.
>
> That is not what the ticket says. The mod_python package is not
> connected with Apache releases. The only way you can get fix is to
> check mod_python out from mod_python subversion repository or make the
> change yourself that is mentioned in that ticket. There has never been
> any mod_python release including the fix.
>
> Graham
>
> >> Compiling for DSO.
> >>
> >> /usr/local/apache-2.2.13/bin/apxs
> >> -I/usr/share/src/mod_python-3.3.1/src/include
> >> -I/usr/local/apache-2.2.13/include -I/usr/local/include/python2.5 -c
> >> mod_python.c _apachemodule.c requestobject.c tableobject.c util.c
> >> serverobject.c connobject.c filterobject.c hlist.c hlistobject.c
> >> finfoobject.c -L/usr/local/lib/python2.5/config  -Xlinker
> >> -export-dynamic      -lm  -lpython2.5 -lpthread -ldl -lutil -lm
> >> /usr/local/apache-2.2.13/build/libtool --silent --mode=compile gcc
> >> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE
> -g
> >> -O2 -pthread -I/usr/local/apache-2.2.13/include
> >> -I/usr/local/apache-2.2.13/include   -I/usr/local/apache-2.2.13/include
> >> -I/usr/share/src/mod_python-3.3.1/src/include
> >> -I/usr/local/apache-2.2.13/include -I/usr/local/include/python2.5  -c -o
> >> mod_python.lo mod_python.c && touch mod_python.slo
> >> In file included from /usr/local/include/python2.5/Python.h:8,
> >>                  from
> >> /usr/share/src/mod_python-3.3.1/src/include/mod_python.h:80,
> >>                  from mod_python.c:28:
> >> /usr/local/include/python2.5/pyconfig.h:932:1: warning:
> "_POSIX_C_SOURCE"
> >> redefined
> >> In file included from /usr/include/sys/types.h:27,
> >>                  from /usr/local/apache-2.2.13/include/apr.h:127,
> >>                  from /usr/local/apache-2.2.13/include/ap_config.h:25,
> >>                  from /usr/local/apache-2.2.13/include/httpd.h:43,
> >>                  from
> >> /usr/share/src/mod_python-3.3.1/src/include/mod_python.h:42,
> >>                  from mod_python.c:28:
> >> /usr/include/features.h:150:1: warning: this is the location of the
> >> previous definition
> >> mod_python.c: In function `python_init':
> >> mod_python.c:826: warning: initialization from incompatible pointer type
> >> /usr/local/apache-2.2.13/build/libtool --silent --mode=compile gcc
> >> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE
> -g
> >> -O2 -pthread -I/usr/local/apache-2.2.13/include
> >> -I/usr/local/apache-2.2.13/include   -I/usr/local/apache-2.2.13/include
> >> -I/usr/share/src/mod_python-3.3.1/src/include
> >> -I/usr/local/apache-2.2.13/include -I/usr/local/include/python2.5  -c -o
> >> _apachemodule.lo _apachemodule.c && touch _apachemodule.slo
> >> In file included from /usr/local/include/python2.5/Python.h:8,
> >>                  from
> >> /usr/share/src/mod_python-3.3.1/src/include/mod_python.h:80,
> >>                  from _apachemodule.c:25:
> >> /usr/local/include/python2.5/pyconfig.h:932:1: warning:
> "_POSIX_C_SOURCE"
> >> redefined
> >> In file included from /usr/include/sys/types.h:27,
> >>                  from /usr/local/apache-2.2.13/include/apr.h:127,
> >>                  from /usr/local/apache-2.2.13/include/ap_config.h:25,
> >>                  from /usr/local/apache-2.2.13/include/httpd.h:43,
> >>                  from
> >> /usr/share/src/mod_python-3.3.1/src/include/mod_python.h:42,
> >>                  from _apachemodule.c:25:
> >> /usr/include/features.h:150:1: warning: this is the location of the
> >> previous definition
> >> /usr/local/apache-2.2.13/build/libtool --silent --mode=compile gcc
> >> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE
> -g
> >> -O2 -pthread -I/usr/local/apache-2.2.13/include
> >> -I/usr/local/apache-2.2.13/include   -I/usr/local/apache-2.2.13/include
> >> -I/usr/share/src/mod_python-3.3.1/src/include
> >> -I/usr/local/apache-2.2.13/include -I/usr/local/include/python2.5  -c -o
> >> requestobject.lo requestobject.c && touch requestobject.slo
> >> In file included from /usr/local/include/python2.5/Python.h:8,
> >>                  from
> >> /usr/share/src/mod_python-3.3.1/src/include/mod_python.h:80,
> >>                  from requestobject.c:25:
> >> /usr/local/include/python2.5/pyconfig.h:932:1: warning:
> "_POSIX_C_SOURCE"
> >> redefined
> >> In file included from /usr/include/sys/types.h:27,
> >>                  from /usr/local/apache-2.2.13/include/apr.h:127,
> >>                  from /usr/local/apache-2.2.13/include/ap_config.h:25,
> >>                  from /usr/local/apache-2.2.13/include/httpd.h:43,
> >>                  from
> >> /usr/share/src/mod_python-3.3.1/src/include/mod_python.h:42,
> >>                  from requestobject.c:25:
> >> /usr/include/features.h:150:1: warning: this is the location of the
> >> previous definition
> >> /usr/local/apache-2.2.13/build/libtool --silent --mode=compile gcc
> >> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE
> -g
> >> -O2 -pthread -I/usr/local/apache-2.2.13/include
> >> -I/usr/local/apache-2.2.13/include   -I/usr/local/apache-2.2.13/include
> >> -I/usr/share/src/mod_python-3.3.1/src/include
> >> -I/usr/local/apache-2.2.13/include -I/usr/local/include/python2.5  -c -o
> >> tableobject.lo tableobject.c && touch tableobject.slo
> >> In file included from /usr/local/include/python2.5/Python.h:8,
> >>                  from
> >> /usr/share/src/mod_python-3.3.1/src/include/mod_python.h:80,
> >>                  from tableobject.c:25:
> >> /usr/local/include/python2.5/pyconfig.h:932:1: warning:
> "_POSIX_C_SOURCE"
> >> redefined
> >> In file included from /usr/include/sys/types.h:27,
> >>                  from /usr/local/apache-2.2.13/include/apr.h:127,
> >>                  from /usr/local/apache-2.2.13/include/ap_config.h:25,
> >>                  from /usr/local/apache-2.2.13/include/httpd.h:43,
> >>                  from
> >> /usr/share/src/mod_python-3.3.1/src/include/mod_python.h:42,
> >>                  from tableobject.c:25:
> >> /usr/include/features.h:150:1: warning: this is the location of the
> >> previous definition
> >> tableobject.c:1092: warning: initialization from incompatible pointer
> type
> >> /usr/local/apache-2.2.13/build/libtool --silent --mode=compile gcc
> >> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE
> -g
> >> -O2 -pthread -I/usr/local/apache-2.2.13/include
> >> -I/usr/local/apache-2.2.13/include   -I/usr/local/apache-2.2.13/include
> >> -I/usr/share/src/mod_python-3.3.1/src/include
> >> -I/usr/local/apache-2.2.13/include -I/usr/local/include/python2.5  -c -o
> >> util.lo util.c && touch util.slo
> >> In file included from /usr/local/include/python2.5/Python.h:8,
> >>                  from
> >> /usr/share/src/mod_python-3.3.1/src/include/mod_python.h:80,
> >>                  from util.c:28:
> >> /usr/local/include/python2.5/pyconfig.h:932:1: warning:
> "_POSIX_C_SOURCE"
> >> redefined
> >> In file included from /usr/include/sys/types.h:27,
> >>                  from /usr/local/apache-2.2.13/include/apr.h:127,
> >>                  from /usr/local/apache-2.2.13/include/ap_config.h:25,
> >>                  from /usr/local/apache-2.2.13/include/httpd.h:43,
> >>                  from
> >> /usr/share/src/mod_python-3.3.1/src/include/mod_python.h:42,
> >>                  from util.c:28:
> >> /usr/include/features.h:150:1: warning: this is the location of the
> >> previous definition
> >> /usr/local/apache-2.2.13/build/libtool --silent --mode=compile gcc
> >> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE
> -g
> >> -O2 -pthread -I/usr/local/apache-2.2.13/include
> >> -I/usr/local/apache-2.2.13/include   -I/usr/local/apache-2.2.13/include
> >> -I/usr/share/src/mod_python-3.3.1/src/include
> >> -I/usr/local/apache-2.2.13/include -I/usr/local/include/python2.5  -c -o
> >> serverobject.lo serverobject.c && touch serverobject.slo
> >> In file included from /usr/local/include/python2.5/Python.h:8,
> >>                  from
> >> /usr/share/src/mod_python-3.3.1/src/include/mod_python.h:80,
> >>                  from serverobject.c:25:
> >> /usr/local/include/python2.5/pyconfig.h:932:1: warning:
> "_POSIX_C_SOURCE"
> >> redefined
> >> In file included from /usr/include/sys/types.h:27,
> >>                  from /usr/local/apache-2.2.13/include/apr.h:127,
> >>                  from /usr/local/apache-2.2.13/include/ap_config.h:25,
> >>                  from /usr/local/apache-2.2.13/include/httpd.h:43,
> >>                  from
> >> /usr/share/src/mod_python-3.3.1/src/include/mod_python.h:42,
> >>                  from serverobject.c:25:
> >> /usr/include/features.h:150:1: warning: this is the location of the
> >> previous definition
> >> serverobject.c:387: warning: initialization from incompatible pointer
> type
> >> /usr/local/apache-2.2.13/build/libtool --silent --mode=compile gcc
> >> -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE
> -g
> >> -O2 -pthread -I/usr/local/apache-2.2.13/include
> >> -I/usr/local/apache-2.2.13/include   -I/usr/local/apache-2.2.13/include
> >> -I/usr/share/src/mod_python-3.3.1/src/include
> >> -I/usr/local/apache-2.2.13/include -I/usr/local/include/python2.5  -c -o
> >> connobject.lo connobject.c && touch connobject.slo
> >> In file included from /usr/local/include/python2.5/Python.h:8,
> >>                  from
> >> /usr/share/src/mod_python-3.3.1/src/include/mod_python.h:80,
> >>                  from connobject.c:30:
> >> /usr/local/include/python2.5/pyconfig.h:932:1: warning:
> "_POSIX_C_SOURCE"
> >> redefined
> >> In file included from /usr/include/sys/types.h:27,
> >>                  from /usr/local/apache-2.2.13/include/apr.h:127,
> >>                  from /usr/local/apache-2.2.13/include/ap_config.h:25,
> >>                  from /usr/local/apache-2.2.13/include/httpd.h:43,
> >>                  from
> >> /usr/share/src/mod_python-3.3.1/src/include/mod_python.h:42,
> >>                  from connobject.c:30:
> >> /usr/include/features.h:150:1: warning: this is the location of the
> >> previous definition
> >> connobject.c: In function `_conn_read':
> >> connobject.c:142: error: request for member `next' in something not a
> >> structure or union
> >> apxs:Error: Command failed with rc=65536
> >> .
> >> make[1]: *** [mod_python.so] Error 1
> >> make[1]: Leaving directory `/usr/share/src/mod_python-3.3.1/src'
> >> make: *** [do_dso] Error 2
> >
> >
> >
> >
> >
> > _______________________________________________
> > Mod_python mailing list
> > Mod_python@modpython.org
> > http://mailman.modpython.org/mailman/listinfo/mod_python
> >
> >
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20090820/93a46432/attachment-0001.html
From pantoniotti at gmail.com  Thu Aug 27 11:16:30 2009
From: pantoniotti at gmail.com (Philippe Antoniotti)
Date: Thu Aug 27 11:16:48 2009
Subject: [mod_python] LoadModule python_module libexec/mod_python.so causes
	apache failure to launch
Message-ID: <c3ed92de0908270816y7efe9abeta4d414e2f387594d@mail.gmail.com>

Hi there,

I am installing mod_python on my Macbook OS X.
./configure and make install went well, but when I add "LoadModule
python_module libexec/mod_python.so" in the Apache conf file, Apache refuses
to start.
I can't see any info in the log
Also, it seems when reading the install log that mod_python.so was installed
in usr/libexec/apache2/mod_python.so.
I tried putting that line instead of the previous one but it still refuses
to start.

I tried the troubleshooting section but the  line "PythonHandler
mod_python.testhandler" also makes apache fail to start

Am I missing something ?
Thanks
Philippe
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20090827/b93db2cb/attachment.html
From selva4210 at gmail.com  Thu Aug 27 12:04:00 2009
From: selva4210 at gmail.com (Azhaguselvan)
Date: Thu Aug 27 12:04:16 2009
Subject: [mod_python] Doubt regarding form handling in mod_python
In-Reply-To: <mailman.0.1251387932.5687.mod_python@modpython.org>
References: <mailman.0.1251387932.5687.mod_python@modpython.org>
Message-ID: <4A96AE70.9030008@gmail.com>

Hi,

       We have mod_python+cheetah setup for our web application. I have 
a form in cheetah template which on submit calls a python method. I want 
to do form validation in that method. The doubt i have is if I use

|"myform=req.form" |

what will my myform be? A dictionary of all form parameters as keys and 
values as values? or something else?

If its going to be dictionary, and assume if i have radio button group 
named as radio. How do i access the different members of that radio 
button group? As myform['radio'][0]? Or am i missing something?

Regards,
tamizhgeek


From graham.dumpleton at gmail.com  Thu Aug 27 19:00:17 2009
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Thu Aug 27 19:00:26 2009
Subject: [mod_python] LoadModule python_module libexec/mod_python.so 
	causes apache failure to launch
In-Reply-To: <c3ed92de0908270816y7efe9abeta4d414e2f387594d@mail.gmail.com>
References: <c3ed92de0908270816y7efe9abeta4d414e2f387594d@mail.gmail.com>
Message-ID: <88e286470908271600w6495ce2el83dd23d6300a853d@mail.gmail.com>

2009/8/28 Philippe Antoniotti <pantoniotti@gmail.com>:
> Hi there,
>
> I am installing mod_python on my Macbook OS X.
> ./configure and make install went well, but when I add "LoadModule
> python_module libexec/mod_python.so" in the Apache conf file, Apache refuses
> to start.
> I can't see any info in the log
> Also, it seems when reading the install log that mod_python.so was installed
> in usr/libexec/apache2/mod_python.so.
> I tried putting that line instead of the previous one but it still refuses
> to start.
>
> I tried the troubleshooting section but the? line "PythonHandler
> mod_python.testhandler" also makes apache fail to start
>
> Am I missing something ?

You don't say where you got mod_python source code from. The official
3.3.1 tar balls will not work on Leopard.

You don't say what the actual error messages you get in Apache error
log or on startup are. Also use the -t option to apachectl to see if
of configuration test it generates any error message.

Graham

From graham.dumpleton at gmail.com  Thu Aug 27 19:01:53 2009
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Thu Aug 27 19:02:00 2009
Subject: [mod_python] Doubt regarding form handling in mod_python
In-Reply-To: <4A96AE70.9030008@gmail.com>
References: <mailman.0.1251387932.5687.mod_python@modpython.org>
	<4A96AE70.9030008@gmail.com>
Message-ID: <88e286470908271601k79bbe9arc96a512eb02495a@mail.gmail.com>

If this is mod_python form object, then it is a FieldStorage instance.
See the documentation:

  http://www.modpython.org/live/current/doc-html/pyapi-util.html

Graham

2009/8/28 Azhaguselvan <selva4210@gmail.com>:
> Hi,
>
> ? ? ?We have mod_python+cheetah setup for our web application. I have a form
> in cheetah template which on submit calls a python method. I want to do form
> validation in that method. The doubt i have is if I use
>
> |"myform=req.form" |
>
> what will my myform be? A dictionary of all form parameters as keys and
> values as values? or something else?
>
> If its going to be dictionary, and assume if i have radio button group named
> as radio. How do i access the different members of that radio button group?
> As myform['radio'][0]? Or am i missing something?
>
> Regards,
> tamizhgeek
>
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://mailman.modpython.org/mailman/listinfo/mod_python
>

From dave at davebritton.com  Sat Aug 29 11:52:35 2009
From: dave at davebritton.com (Dave Britton)
Date: Sat Aug 29 11:51:46 2009
Subject: [mod_python] mod_python not supported,
	switching from  mod_python to wsgi
References: <mailman.0.1251387932.5687.mod_python@modpython.org>
	<4A96AE70.9030008@gmail.com> <01ce01ca2742$37c4f560$821ee548@yoda>
	<4A98C7AA.70104@gmail.com>
Message-ID: <034401ca28c0$ba48de50$821ee548@yoda>

Azhaguselvan,SP wrote:
> Why is mod_python not supported? I thought this mailing list is for such
> a cause?

According to Graham Dumpleton, who is the expert on this and the last
technically knowledgeable person answering questions on this list, there are
no developers willing to work on mod_python any more. Apparently there is
too much work involved to bring mod_python up to speed on the newest
versions of apache and python. So, mod_python installations that need to
stay on older versions of apache legacy installations will continue to work,
but no one can expect continuing technical development or support. Graham is
recommending that people who want to use python as their back-end web
scripting language shift to mod_wsgi, as this has now got pretty widespread
support in a number of templating and framework systems. You might want to
investigate what would be involved in porting your mod_python system to
wsgi, as it could be easier than you think. Here's an example I got from the
web:
=====================================
http://stackoverflow.com/questions/596729/how-do-i-use-python-for-web-develo
pment-without-relying-on-a-ramework/596988

The way to go is wsgi.

WSGI is the Web Server Gateway Interface. It is a specification for web
servers and application servers to communicate with web applications (though
it can also be used for more than that). It is a Python standard, described
in detail in PEP 333.
All current frameworks support wsgi. A lot of webservers support it also
(apache included, through mod_wsgi). It is the way to go if you want to
write your own framework.
Here is hello world, written to wsgi directly:
def application(environ, start_response):    status = '200 OK'
response_headers = [('Content-type','text/plain')]    start_response(status,
response_headers)    return ['Hello world!\n']
Put this in a file.py, point your mod_wsgi apache configuration to it, and
it will run. Pure python. No imports. Just a python function.
If you are really writing your own framework, you could check werkzeug. It
is not a framework, but a simple collection of various utilities for WSGI
applications and has become one of the most advanced WSGI utility modules.
It includes a powerful debugger, full featured request and response objects,
HTTP utilities to handle entity tags, cache control headers, HTTP dates,
cookie handling, file uploads, a powerful URL routing system and a bunch of
community contributed addon modules. Takes the boring part out of your
hands.
==============================
I have a lot of code written for the mod_python publisher system, and I
found mod_wsgi wasn't very hard to set up. I have started a django
application with mod_wsgi, and I expect to set up werkzeug with mod_wsgi for
converting my older code.
Googling around shows a lot of people using cheetah under cherrypy and
mod-wsgi. Set up a server with this and see if your cheetah template code
just works. It should.
-Dave

----- Original Message -----
From: "Azhaguselvan" <selva4210@gmail.com>
To: "Dave Britton" <dave@davebritton.com>
Sent: Saturday, August 29, 2009 2:16 AM
Subject: Re: [mod_python] Doubt regarding form handling in mod_python


> Hi,
> > BTW:  since you are using cheetah, you should consider switching from
> > mod_python to mod_wsgi as mod_python is no longer being actively
developed
> > or supported, and cheetah has support for wsgi.
> > -Dave
> >
> >
> Thanks for the reply. We have hefty ERP portal running in the
> mod_python+cheetah combo. It is not that easy to change to mod_wsgi I
> think??
>
> Why is mod_python not supported? I thought this mailing list is for such
> a cause?
>
> Regards,
> Azhaguselvan,SP
>

From graham.dumpleton at gmail.com  Sat Aug 29 23:55:28 2009
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Sat Aug 29 23:55:35 2009
Subject: [mod_python] LoadModule python_module libexec/mod_python.so 
	causes apache failure to launch
In-Reply-To: <c3ed92de0908290603y30afbec1o7c6e42ee3c665d81@mail.gmail.com>
References: <c3ed92de0908270816y7efe9abeta4d414e2f387594d@mail.gmail.com>
	<88e286470908271600w6495ce2el83dd23d6300a853d@mail.gmail.com>
	<c3ed92de0908290603y30afbec1o7c6e42ee3c665d81@mail.gmail.com>
Message-ID: <88e286470908292055k39a3bd45rfeaad2c77b8ffcd1@mail.gmail.com>

2009/8/29 Philippe Antoniotti <pantoniotti@gmail.com>:
> Hi Graham,
>
> Thanks for the answer.
>
> I got mod_python source from modpython.org and I am on Leopard so the
> problem could be right there ;-)

If you mean tar ball, as I said that will not work, including not even
normally compiling and installing.

You need to check out source code from subversion repository and use it.

  svn co https://svn.apache.org/repos/asf/quetzalcoatl/mod_python/trunk
mod_python-trunk

> I am using apache on MAMP and the "apache_error_log" in the MAMP/logs folder
> does not show any errors when the apache server refuses to start (I lauch it
> from the MAMP interface and it just does not start).

Did you run:

  /usr/sbin/apachectl -t

like I suggested?

This will cause any problems to show on stdout rather than being lost
in error logs or go missing altogether.

> FYI
> 1- mod_python.so was not installed and I had to copy it manually as well as
> change permissions to -rw-rw-r-- (but I was not able the generate the @ all
> the other files have at the end : -rw-rw-r--@, how do you do that ? could
> not find it in the chmod definition)
> 2- Apache starts fine when I remove the line "LoadModule python_module
> modules/mod_python.so"

What do you need mod_python for? Have you consider using mod_wsgi if
only wanting to host a WSGI application?

Graham

> Thanks again
> Philippe
>
> On Thu, Aug 27, 2009 at 7:00 PM, Graham Dumpleton
> <graham.dumpleton@gmail.com> wrote:
>>
>> 2009/8/28 Philippe Antoniotti <pantoniotti@gmail.com>:
>> > Hi there,
>> >
>> > I am installing mod_python on my Macbook OS X.
>> > ./configure and make install went well, but when I add "LoadModule
>> > python_module libexec/mod_python.so" in the Apache conf file, Apache
>> > refuses
>> > to start.
>> > I can't see any info in the log
>> > Also, it seems when reading the install log that mod_python.so was
>> > installed
>> > in usr/libexec/apache2/mod_python.so.
>> > I tried putting that line instead of the previous one but it still
>> > refuses
>> > to start.
>> >
>> > I tried the troubleshooting section but the? line "PythonHandler
>> > mod_python.testhandler" also makes apache fail to start
>> >
>> > Am I missing something ?
>>
>> You don't say where you got mod_python source code from. The official
>> 3.3.1 tar balls will not work on Leopard.
>>
>> You don't say what the actual error messages you get in Apache error
>> log or on startup are. Also use the -t option to apachectl to see if
>> of configuration test it generates any error message.
>>
>> Graham
>
>

From denzel.zhang at facilitatedigital.com  Sun Aug 30 21:25:21 2009
From: denzel.zhang at facilitatedigital.com (Denzel Zhang)
Date: Sun Aug 30 21:25:35 2009
Subject: [mod_python] How to cache memcache client connection/thread-safe
Message-ID: <92B584AC96EB6B4494D6EBA673E23DB60107E5D5@sydney1.adsfac.net>

Hi there,

 

I am currently working on a project to work out an Ads delivery web page
which needs to get the cache data from backend Memcached Server. The web
server is Apache + mod_python, the performance I tested after I put
memcached client lib (_pylibmc) inside the page was not quiet good, the
main problem I think is that every time network sockets create/destroy
will be very costly, so I changed the way of data retrieving like
following:

 

from mod_python import apache, util

import _pylibmc as memcache

 

global mc = None

global bConnectionOpen = False

 

def handler(req):

         

         global mc, bConnectionOpen

 

         if bConnectionOpen == False:

                   mc = memcache.client(["127.0.0.1:11211"])

                   bConnectionOpen = True

 

ClientID = mc.get("ClientID")

....

 

The performance got much better (700 requests/sec, was just no more than
300 requests/sec) after I changed to above but I still worry about the
data thread safe issue. Can I say that all data would be safe under the
threads of mod_python as its thread-safe? And is there a proper way to
cache or share the sock connection between multiple mod_python
interpreters?

 

Best Regards,

 

Denzel Zhang

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20090831/4f534580/attachment.html
From graham.dumpleton at gmail.com  Mon Aug 31 03:23:38 2009
From: graham.dumpleton at gmail.com (Graham Dumpleton)
Date: Mon Aug 31 03:23:48 2009
Subject: [mod_python] How to cache memcache client connection/thread-safe
In-Reply-To: <92B584AC96EB6B4494D6EBA673E23DB60107E5D5@sydney1.adsfac.net>
References: <92B584AC96EB6B4494D6EBA673E23DB60107E5D5@sydney1.adsfac.net>
Message-ID: <88e286470908310023j3fea8198sddae9e926e752635@mail.gmail.com>

2009/8/31 Denzel Zhang <denzel.zhang@facilitatedigital.com>:
> Hi there,
>
>
>
> I am currently working on a project to work out an Ads delivery web page
> which needs to get the cache data from backend Memcached Server. The web
> server is Apache + mod_python, the performance I tested after I put
> memcached client lib (_pylibmc) inside the page was not quiet good, the main
> problem I think is that every time network sockets create/destroy will be
> very costly, so I changed the way of data retrieving like following:
>
>
>
> from mod_python import apache, util
>
> import _pylibmc as memcache
>
>
>
> global mc = None
>
> global bConnectionOpen = False
>
>
>
> def handler(req):
>
>
>
> ???????? global mc, bConnectionOpen
>
>
>
> ???????? if bConnectionOpen == False:
>
> ?????????????????? mc = memcache.client(["127.0.0.1:11211"])
>
> ?????????????????? bConnectionOpen = True
>
>
>
> ClientID = mc.get("ClientID")
>
> ?.
>
>
>
> The performance got much better (700 requests/sec, was just no more than 300
> requests/sec) after I changed to above but I still worry about the data
> thread safe issue. Can I say that all data would be safe under the threads
> of mod_python as its thread-safe? And is there a proper way to cache or
> share the sock connection between multiple mod_python interpreters?

If handle returned by memcache.client() is not thread safe, then this
will fail in a multithread MPM such as worker MPM on UNIX and winnt
MPM on Windows.

If a single handle is multithread safe, then you are better off
initialising the connection at global scope in module as current way
you initialise it isn't thread safe.

In other words, move initialise from inside handler to outside of handler.

Graham

