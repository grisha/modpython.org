<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] [SPAM] PythonAuthenHandler troubles!!!
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20%5BSPAM%5D%20PythonAuthenHandler%20troubles%21%21%21&In-Reply-To=BAY113-W49E11F7DF08956166C14DF9580%40phx.gbl">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025616.html">
   <LINK REL="Next"  HREF="025618.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] [SPAM] PythonAuthenHandler troubles!!!</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20%5BSPAM%5D%20PythonAuthenHandler%20troubles%21%21%21&In-Reply-To=BAY113-W49E11F7DF08956166C14DF9580%40phx.gbl"
       TITLE="[mod_python] [SPAM] PythonAuthenHandler troubles!!!">graham.dumpleton at gmail.com
       </A><BR>
    <I>Fri Sep  5 05:48:18 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="025616.html">[mod_python] [SPAM] PythonAuthenHandler troubles!!!
</A></li>
        <LI>Next message: <A HREF="025618.html">[mod_python] Cookieless sessions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25617">[ date ]</a>
              <a href="thread.html#25617">[ thread ]</a>
              <a href="subject.html#25617">[ subject ]</a>
              <a href="author.html#25617">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please keep the discussion on the mailing list.

If Apache doesn't understand AuthAuthoritative then you aren't using
Apache 2.0, but most likely Apache 2.2.

For Apache 2.2 it is AuthBasicAuthoritative.

This suggests your configuration may be wrong in other ways as Apache
2.2 auth configuration is a bit different due to the addition of auth
provider mechanism in 2.2

BTW, the authenhandler() is technically wrong for a lot of reasons and
yes I know that means the mod_python documentation is broken. It may
work, but only because mod_python does some hacks it shouldn't to
catch lazy programmers. :-)

I'd really suggest you use auth mechanism in mod_wsgi instead as doing
it right in mod_python is a PITA and more work than it needs to be.

Graham

2008/9/5 steve boutabi &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">sideh101 at hotmail.fr</A>&gt;:
&gt;<i> Thank's Graham
</I>&gt;<i>
</I>&gt;<i> When i remove, ''AddHandler mod_python .odt'' it still don't pass the
</I>&gt;<i> authentification to the PythonAuthenHandler
</I>&gt;<i> and it simply open the document, without asking for login and password.
</I>&gt;<i> And if i add a Require valid-user, it asks for login and password, and then
</I>&gt;<i> Show a 500 error Internal error, complaining that there's no AuthUserFile
</I>&gt;<i> which means that the authentification is still done by apache through the
</I>&gt;<i> user files system.
</I>&gt;<i> A solution maybe A AuthAuthoritative Off directive but appache says he
</I>&gt;<i> doesn't understand it
</I>&gt;<i>
</I>&gt;<i> For information the authentification function contains only :
</I>&gt;<i>
</I>&gt;<i> def authenhandler(req):
</I>&gt;<i>     pw = req.get_basic_auth_pw()
</I>&gt;<i>     user = req.user
</I>&gt;<i>
</I>&gt;<i>     if user == &quot;spam&quot; and pw == &quot;eggs&quot;:
</I>&gt;<i>        return apache.OK
</I>&gt;<i>     else:
</I>&gt;<i>        return apache.HTTP_UNAUTHORIZED
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>                                                Steven. Paris
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> Date: Fri, 5 Sep 2008 08:49:24 +1000
</I>&gt;&gt;<i> From: <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>
</I>&gt;&gt;<i> To: <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">sideh101 at hotmail.fr</A>
</I>&gt;&gt;<i> Subject: Re: [mod_python] [SPAM] PythonAuthenHandler troubles!!!
</I>&gt;&gt;<i> CC: <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython.org</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 2008/9/5 steve boutabi &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">sideh101 at hotmail.fr</A>&gt;:
</I>&gt;&gt;<i> &gt; Hi, i'm working on a project in Python in which i have enable reading
</I>&gt;&gt;<i> &gt; and
</I>&gt;&gt;<i> &gt; modifying documents with OpenOffice through WebDav.
</I>&gt;&gt;<i> &gt; The trouble comes when i try to give the authentification phase to
</I>&gt;&gt;<i> &gt; mod-python, it simply doesn't work
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; here is my site.conf:
</I>&gt;&gt;<i> &gt; &lt;Directory &quot;/opt/monsite&quot;&gt;
</I>&gt;&gt;<i> &gt; Dav On
</I>&gt;&gt;<i> &gt; AddHandler mod_python .odt
</I>&gt;&gt;<i> &gt; PythonAuthenHandler myscript
</I>&gt;&gt;<i> &gt; PythonDebug On
</I>&gt;&gt;<i> &gt; AuthType Basic
</I>&gt;&gt;<i> &gt; AuthName &quot;Mosaic&quot;
</I>&gt;&gt;<i> &gt; &lt;Limit PUT POST DELETE PROPFIND PROPPATCH MKCOL COPY MOVE LOCK UNLOCK&gt;
</I>&gt;&gt;<i> &gt; Require valid-user
</I>&gt;&gt;<i> &gt; &lt;/Limit&gt;
</I>&gt;&gt;<i> &gt; &lt;/Directory&gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; if i try to add an AuthAuthoritative Off directive, Apache don't start
</I>&gt;&gt;<i> &gt; telling me that this command is misspelled or that some module is
</I>&gt;&gt;<i> &gt; missing.
</I>&gt;&gt;<i> &gt; if i try to add a PythonHandler, i must handle everything, thus i loose
</I>&gt;&gt;<i> &gt; WebDav functionality.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; I want only authentification to be handeled by PythonAuthenHandler the
</I>&gt;&gt;<i> &gt; rest
</I>&gt;&gt;<i> &gt; by Apache-WebDAV
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If you only want authentication to be handled by mod_python, why do you
</I>&gt;&gt;<i> have:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> AddHandler mod_python .odt
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> That only applies to content handler phase and may confused DAV.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Other than that, don't really understand what you are trying to say in
</I>&gt;&gt;<i> 'don't start telling me that this command is misspelled or that some
</I>&gt;&gt;<i> module is missing'. Also doesn't help that you don't supply what is in
</I>&gt;&gt;<i> your authenhandler.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> FWIW, if all you are using mod_python for is a custom basic auth
</I>&gt;&gt;<i> provider, you may be better off using mod_wsgi instead as its support
</I>&gt;&gt;<i> for auth providers is simpler to use than doing a full authentication
</I>&gt;&gt;<i> handler for mod_python.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> See:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="http://code.google.com/p/modwsgi/wiki/AccessControlMechanisms">http://code.google.com/p/modwsgi/wiki/AccessControlMechanisms</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Graham
</I>&gt;<i>
</I>&gt;<i> ________________________________
</I>&gt;<i> Discutez sur Messenger o&#249; que vous soyez ! Mettez Messenger sur votre mobile
</I>&gt;<i> !
</I>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025616.html">[mod_python] [SPAM] PythonAuthenHandler troubles!!!
</A></li>
	<LI>Next message: <A HREF="025618.html">[mod_python] Cookieless sessions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25617">[ date ]</a>
              <a href="thread.html#25617">[ thread ]</a>
              <a href="subject.html#25617">[ subject ]</a>
              <a href="author.html#25617">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
