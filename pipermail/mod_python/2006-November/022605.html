<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Accesshandler and normal handler... how they working
	?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Accesshandler%20and%20normal%20handler...%20how%20they%20working%0A%09%3F&In-Reply-To=4559B2A6.9060409%40gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022600.html">
   <LINK REL="Next"  HREF="022647.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Accesshandler and normal handler... how they working
	?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Jim Gallacher</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Accesshandler%20and%20normal%20handler...%20how%20they%20working%0A%09%3F&In-Reply-To=4559B2A6.9060409%40gmail.com"
       TITLE="[mod_python] Accesshandler and normal handler... how they working
	?">jpg at jgassociates.ca
       </A><BR>
    <I>Tue Nov 14 10:45:00 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="022600.html">[mod_python] Accesshandler and normal handler... how they working ?
</A></li>
        <LI>Next message: <A HREF="022647.html">[mod_python] Accesshandler and normal handler... how they working
	?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22605">[ date ]</a>
              <a href="thread.html#22605">[ thread ]</a>
              <a href="subject.html#22605">[ subject ]</a>
              <a href="author.html#22605">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>durumdara wrote:
&gt;<i> Hi !
</I>&gt;<i> 
</I>&gt;<i> I have an access handler, and a normal python handler in my site.
</I>&gt;<i> I use directories, and some of them are need protection. I use my login
</I>&gt;<i> method to enable user access.
</I>&gt;<i> 
</I>&gt;<i> The access handler is check the needed rights to any object. It get user
</I>&gt;<i> data from Session.
</I>&gt;<i> When access granted, it finished it's working.
</I>&gt;<i> When access denied, it send http403 error, and I catch this with custom
</I>&gt;<i> error documents (ssi).
</I>&gt;<i> 
</I>&gt;<i> But I want to know something - the background of access handler.
</I>&gt;<i> 
</I>&gt;<i> 1.)
</I>&gt;<i> The access handler is existing in same Thread as Handler ?
</I>
Yes.

&gt;<i> So I want to know. Is modpy do this:
</I>&gt;<i> get url, server info, etc.
</I>&gt;<i> build request + other objects
</I>&gt;<i> get thread
</I>&gt;<i> result = thread.startaccesshandler(req)
</I>&gt;<i> if not result:
</I>&gt;<i>  gotoerrorhandler
</I>&gt;<i> else:
</I>&gt;<i>  result = thread.handler(req)
</I>&gt;<i> ....
</I>&gt;<i> or it use another technology ?
</I>
Unless I'm misunderstanding your question, you don't need to mess with 
threads. You are always dealing with the same request object, regardless 
of which phase, and there is one process or thread per request.

Take a look at the mod_python documentation for PythonAuthenHandler, as 
well as my reply to Richard Lewis today on a similar question.

&gt;<i> 2.)
</I>&gt;<i> Can I exchange some data across them ?
</I>
Yes.

def authenhandler(req):
     req.foo = 'something for later'
     ...


def handler(req):
     req.write(req.foo)
     ...


&gt;<i> In this time I use file based right table(s).
</I>&gt;<i> Every file in this table has right property.
</I>&gt;<i> I need to load this table in the accesshandler to check grants.
</I>&gt;<i> And later, in the menu building I also need to load this table to check
</I>&gt;<i> grants (the menus are not accessable by user are hided).
</I>&gt;<i> Can I share these infos ? Can I write to the request object, and this
</I>&gt;<i> object is hold these infos to get them in normal handler ?
</I>
Yes.

&gt;<i> 3.)
</I>&gt;<i> Can I force the access handler to redirect request ?
</I>
Yes.

&gt;<i> Example: the user click on menu that preserved for special users. I
</I>&gt;<i> don't want to redirect to error pages. Can I redirect to my special
</I>&gt;<i> page, 
</I>
Yes.

Jim
</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022600.html">[mod_python] Accesshandler and normal handler... how they working ?
</A></li>
	<LI>Next message: <A HREF="022647.html">[mod_python] Accesshandler and normal handler... how they working
	?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22605">[ date ]</a>
              <a href="thread.html#22605">[ thread ]</a>
              <a href="subject.html#22605">[ subject ]</a>
              <a href="author.html#22605">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
