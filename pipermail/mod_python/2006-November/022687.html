<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] can't compile on linux?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20can%27t%20compile%20on%20linux%3F&In-Reply-To=456A5247.8060300%40pixar.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022686.html">
   <LINK REL="Next"  HREF="022688.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] can't compile on linux?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Anastasios Hatzis</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20can%27t%20compile%20on%20linux%3F&In-Reply-To=456A5247.8060300%40pixar.com"
       TITLE="[mod_python] can't compile on linux?">ah at hatzis.de
       </A><BR>
    <I>Mon Nov 27 03:32:09 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="022686.html">[mod_python] can't compile on linux?
</A></li>
        <LI>Next message: <A HREF="022688.html">[mod_python] Session Storage : memory, file, dbm....Mysql?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22687">[ date ]</a>
              <a href="thread.html#22687">[ thread ]</a>
              <a href="subject.html#22687">[ subject ]</a>
              <a href="author.html#22687">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Mark Harrison wrote:
&gt;<i> So I had no problem building apache, python, and mod_python
</I>&gt;<i> on my OS X box, but I'm having problems on my Linux box
</I>&gt;<i> (surprising, because that is usually the most trouble-free
</I>&gt;<i> compilation environment).
</I>&gt;<i> 
</I>&gt;<i> ohm ~/mp2/src/mod_python-3.2.10$ uname -a
</I>&gt;<i> Linux ohm 2.6.12-1.1372_FC3p2smp #1 SMP Wed Jul 27 18:07:20 PDT 2005 
</I>&gt;<i> x86_64 x86_64 x86_64 GNU/Linux
</I>&gt;<i> 
</I>&gt;<i> httpd-2.2.3
</I>&gt;<i> Python-2.4.3
</I>&gt;<i> 
</I>&gt;<i> (both configured with ./configure --prefix=/u0/mh/mp)
</I>&gt;<i> 
</I>&gt;<i> mod_python-3.2.10
</I>&gt;<i> 
</I>&gt;<i> (configured with
</I>&gt;<i> ./configure --with-apxs=/u0/mh/mp/bin/apxs 
</I>&gt;<i> --with-python=/u0/mh/mp/bin/python)
</I>&gt;<i> 
</I>&gt;<i> The httpd and python both seem good, but I get this
</I>&gt;<i> error when compiling mod_python.
</I>&gt;<i> 
</I>&gt;<i> Any clues appreciated!
</I>&gt;<i> Mark
</I>&gt;<i> 
</I>
I really can only clue, since I'm not used to compile software myself on 
Linux.  I had the same problems and I think the solution is as following 
(don't ask me for the technically accurate evidence, at least it worked 
on my OpenSUSE 10.0 64bit machine -- tribute goes also to Christopher 
Taylor who expierenced the same error message on his RHEL 64bit 
independent of me and put my nose to the right direction):

As I see on the citings you use a 64bit machine, right? When building 
Python I added the option &quot;enable-shared&quot; at the configuration. 
According to Christopher the 32bit linking/loading to a static library 
is not a problem but on 64bit it can be.

(1) tested with Python 2.5:
./configure --enable-shared

But this ain't enough. I also build Apache with 64bit support 
&quot;-enable-lib64&quot;, but concrete configure options may be different on your 
machine.

(2) tested with Apache 2.2.3:
./configure --enable-mods-shared='headers dav dav-fs dav-lock ssl 
rewrite vhost-alias' -enable-lib64 --with-expat=builtin

Before you continue make sure that both libraries are there and to be 
found. As I see you explicitely defined apxs path. I did do this after 
my early attempts failed and pointed me to an apxs:error. I think you 
can leave that away.

(3) tested with mod_python 3.2.10:
./configure

I hope this works on your machine. But really make sure that the 
libraries can be found. I tried multiple times to compile and install 
these three apps from source and I always failed at mod_python and 
started again from the scratch (means: I installed Linux from image 
again). Even as I followed instruction as described here, it didn't work 
always. If you again get the problem just stubbornly retry &quot;./configure&quot; 
another time after first fail --this worked on my machine. Don't ask me 
why...! Also rebooting the machine worked after installing Python and 
HTTPD but before mod_python did work. I assume rebooting  was not the 
reason for success, but that I started a new shell which then set the 
library path variables to Python and Apache HTTPD which I have put into 
the .bashrc file after their successful installations.

Well, I hope I didn't confuse you too much and this will work for your 
machine. If not, hum,... hopefully there is someone else who can provide 
a better answer. ;-)

Good luck!

Anastasios



&gt;<i> 
</I>&gt;<i> /u0/mh/mp2/build/libtool --silent --mode=link gcc -o mod_python.la  
</I>&gt;<i> -rpath /u0/m
</I>&gt;<i> h/mp2/modules -module -avoid-version    hlistobject.lo hlist.lo 
</I>&gt;<i> filterobject.lo
</I>&gt;<i> connobject.lo serverobject.lo util.lo tableobject.lo requestobject.lo 
</I>&gt;<i> _apachemod
</I>&gt;<i> ule.lo mod_python.lo -L/u0/mh/mp2/lib/python2.4/config -Xlinker 
</I>&gt;<i> -export-dynamic
</I>&gt;<i> -lm -lpython2.4 -lpthread -ldl -lutil -lm
</I>&gt;<i> /usr/bin/ld: /u0/mh/mp2/lib/python2.4/config/libpython2.4.a(abstract.o): 
</I>&gt;<i> relocat
</I>&gt;<i> ion R_X86_64_32 can not be used when making a shared object; recompile 
</I>&gt;<i> with -fPI
</I>&gt;<i> C
</I>&gt;<i> /u0/mh/mp2/lib/python2.4/config/libpython2.4.a: could not read symbols: 
</I>&gt;<i> Bad valu
</I>&gt;<i> e
</I>&gt;<i> collect2: ld returned 1 exit status
</I>&gt;<i> apxs:Error: Command failed with rc=65536
</I>&gt;<i> 
</I>

-- 


Mit freundlichen Gr&#252;&#223;en

i. A.
Anastasios Hatzis

Hatzis Edelstahlbearbeitung GmbH
Hojen 2
87490 Haldenwang (Allg&#228;u)
Deutschland

Tel: 0 83 74 / 9 30 8-13
Fax: 0 83 74 / 9 30 8-10

Mobil: 0 15 20 / 8 59 28 78     ++NEU+++NEU+++NEU+

Handelsregister Kempten (Allg&#228;u): HRB 4204
Umsatzsteuer-Identit&#228;tsnummer: DE 128791802
Gesch&#228;ftsf&#252;hrer: Paulos Hatzis, Charalampos Hatzis

<A HREF="http://www.hatzis.de/">http://www.hatzis.de/</A>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022686.html">[mod_python] can't compile on linux?
</A></li>
	<LI>Next message: <A HREF="022688.html">[mod_python] Session Storage : memory, file, dbm....Mysql?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22687">[ date ]</a>
              <a href="thread.html#22687">[ thread ]</a>
              <a href="subject.html#22687">[ subject ]</a>
              <a href="author.html#22687">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
