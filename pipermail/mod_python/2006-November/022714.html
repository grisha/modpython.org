<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Re: MySQLSession, wiki, development and other stuff
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20MySQLSession%2C%20wiki%2C%20development%20and%20other%20stuff&In-Reply-To=5746FD9D-67A5-4E44-B789-EAFF2CBDED29%40dscpl.com.au">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022707.html">
   <LINK REL="Next"  HREF="022709.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Re: MySQLSession, wiki, development and other stuff</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Jim Gallacher</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20MySQLSession%2C%20wiki%2C%20development%20and%20other%20stuff&In-Reply-To=5746FD9D-67A5-4E44-B789-EAFF2CBDED29%40dscpl.com.au"
       TITLE="[mod_python] Re: MySQLSession, wiki, development and other stuff">jpg at jgassociates.ca
       </A><BR>
    <I>Tue Nov 28 12:20:34 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="022707.html">[mod_python] Re: MySQLSession, wiki, development and other stuff
</A></li>
        <LI>Next message: <A HREF="022709.html">[mod_python] register cleanup works fine,
	the call to the cleanup function fails...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22714">[ date ]</a>
              <a href="thread.html#22714">[ thread ]</a>
              <a href="subject.html#22714">[ subject ]</a>
              <a href="author.html#22714">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Graham Dumpleton wrote:
&gt;<i> 
</I>&gt;<i> On 28/11/2006, at 10:04 AM, Martijn Moeling wrote:
</I>&gt;&gt;<i> I emailed you guy's personally since you are the driving forces behind
</I>&gt;&gt;<i> mod_python (i think) and this is not a real subject for that mailing
</I>&gt;&gt;<i> list.
</I>&gt;<i> 
</I>&gt;<i> I see no reason why anything you talk about needs to be handled off
</I>&gt;<i> the mailing list, so have sent my response back there.
</I>&gt;<i> 
</I>&gt;&gt;<i> I just send in a proposed new Session.py as a RFC backed with some
</I>&gt;&gt;<i> documentation.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I also found an today's article on the mailing list with subject:
</I>&gt;&gt;<i> [mod_python] Wiki for mod_python. Contributors welcome.
</I>&gt;&gt;<i> Which is about this subject, keeping the MySQLdb out as much as possible
</I>&gt;&gt;<i> was one of my goals, but I do not see another option.
</I>&gt;<i> 
</I>&gt;<i> There should be no reason for a MySQL session class to be within the
</I>&gt;<i> mod_python session code file for it to work. The only thing you don't 
</I>&gt;<i> get from
</I>&gt;<i> having it separate is the ability for it to be created underneath the 
</I>&gt;<i> Session.Session()
</I>&gt;<i> call based on the value of PythonOption for setting the session type.
</I>&gt;<i> Instead you would use:
</I>&gt;<i> 
</I>&gt;<i>   req.session = MySqlSession(req)
</I>&gt;<i> 
</I>&gt;<i> The only place where having to do this would be a problem is if you are
</I>&gt;<i> using mod_python.psp as it internally uses Session.Session(). It only
</I>&gt;<i> does this though if req.session doesn't exist as an attribute. Thus, if 
</I>&gt;<i> you are
</I>&gt;<i> using mod_python.psp you need to create your own handler which does:
</I>&gt;<i> 
</I>&gt;<i>   from mod_python import psp
</I>&gt;<i> 
</I>&gt;<i>   def handler(req):
</I>&gt;<i>     req.session = MySqlSession(req)
</I>&gt;<i>     return psp.handler(req)
</I>&gt;<i> 
</I>&gt;<i> By assigning session instance to req.session, mod_python.psp will use it.
</I>&gt;<i> 
</I>&gt;<i> You will need to have a recent version of mod_python for this to work
</I>&gt;<i> though.
</I>&gt;<i> 
</I>&gt;<i> In mod_python 3.3, the ability to use the Apache authentication handler
</I>&gt;<i> phase properly means that creating sessions in the main content handler
</I>&gt;<i> phase is probably not as a good an option as writing a proper 
</I>&gt;<i> authentication
</I>&gt;<i> handler for the job. In that scenario, you wouldn't even need to wrap
</I>&gt;<i> mod_python.psp as session creation would be in a separate handler
</I>&gt;<i> anyway.
</I>&gt;<i> 
</I>&gt;&gt;<i> (yes I do: copy
</I>&gt;&gt;<i> Session.py to my app dir and not include it from mod_python right?)
</I>&gt;<i> 
</I>&gt;<i> Making a copy of Session.py and modifying it is a bad idea as it is already
</I>&gt;<i> out of date if you are using mod_python 3.2.10 or older as various changes
</I>&gt;<i> have been made in code in mod_python 3.3. You will loose the benefit of
</I>&gt;<i> these changes/fixes if you have your own copy based on an older version.
</I>&gt;<i> 
</I>&gt;&gt;<i> Storing the Sessions in an SQL database can be a huge advantage and I
</I>&gt;&gt;<i> think it should be in Session.py since it expands possibilities. (think
</I>&gt;&gt;<i> of the multiple front end severs in my situation, and there are File,
</I>&gt;&gt;<i> DBM memory possibilities, so why not add MySQL (which is used by most
</I>&gt;&gt;<i> mod_python users anyway). With my current project I am preparing for
</I>&gt;&gt;<i> 1.000.000 pageviews per hour!! One apache server with mod_python can not
</I>&gt;&gt;<i> handle that amount of users. (not all use sessions)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Personally I think mod_python and MySQLdb should team up, I am an
</I>&gt;&gt;<i> experienced programmer, but all those newbie guys run into trouble
</I>&gt;&gt;<i> configuring the lot
</I>&gt;<i> 
</I>&gt;<i> The topic of having SQL database backed sessions included as a standard
</I>&gt;<i> part of mod_python has been discussed before and rejected. Even the
</I>&gt;<i> sqlite version which I referred you to was rejected. The issue was that 
</I>&gt;<i> having
</I>&gt;<i> dependencies on external packages was not desirable as it makes the
</I>&gt;<i> development and testing more burdensome. This was even though sqlite itself
</I>&gt;<i> doesn't require a big database system but can work direct out of the
</I>&gt;<i> filesystem.
</I>
Now that sqlite is included with python 2.5 I can see the possibility of 
adding that to Session.py at some point. Such an implementation could 
then be used as a reference for creating other database backends.


&gt;<i> If there is every to be database backed sessions included in mod_python as
</I>&gt;<i> a standard feature, I'd suggest it is more likely to be code which uses the
</I>&gt;<i> Apache 2.2 mod_dbd module in some way so that that stuff in Apache can
</I>&gt;<i> be leveraged for the task of database connection management etc.
</I>
+1

This is something I think we should pursue. If we don't make any 
progress on it in the near term I think it might make a nice Google 
Summer of Code project for 2007.

&gt;<i> Keep in
</I>&gt;<i> mind that mod_python is all about trying to use what Apache provides as
</I>&gt;<i> much as possible, rather than creating a separate universe and just using
</I>&gt;<i> Apache as a hopping off point.
</I>&gt;<i> 
</I>&gt;&gt;<i> I would love to contribute to the wiki, I'll see into it over the next
</I>&gt;&gt;<i> few days. I have been a programmer devoted to Open Source since Linux
</I>&gt;&gt;<i> was half a kernel (I implemented large parts of the V4 TCP/IP stack).
</I>&gt;<i> 
</I>&gt;<i> If you want to get involved in the wiki great. Adding the MySQLSession
</I>&gt;<i> class as an example would be a good thing to add to the wiki and for the
</I>&gt;<i> time being at least is probably the most appropriate place for it to go.
</I>&gt;<i> 
</I>&gt;&gt;<i> Can you help me getting into mod_python development? I am interested in
</I>&gt;&gt;<i> adding useful features (like MySQLSession haha)
</I>&gt;<i> 
</I>&gt;<i> The way the Apache software foundation works is that new developers on
</I>&gt;<i> projects get commit access on the repository by way of invitation. They 
</I>&gt;<i> will
</I>&gt;<i> get an invitation by demonstrating good knowledge of the package by
</I>&gt;<i> helping out on the mailing lists by giving useful assistance to others. 
</I>&gt;<i> Finding
</I>&gt;<i> bugs in the package and investigating it to the level of being able to 
</I>&gt;<i> provide
</I>&gt;<i> a fix also helps. With the wiki now in place, contributing there would also
</I>&gt;<i> show your abilities and knowledge and in conjunction with other things
</I>&gt;<i> give confidence that providing you commit access to the source code would
</I>&gt;<i> be the right thing to do.
</I>&gt;<i> 
</I>&gt;<i> As a first step though, I would suggest you get yourself subscribed to the
</I>&gt;<i> mod_python developers mailing list in addition to the standard user mailing
</I>&gt;<i> list. I have never seen you post on the developers list so am assuming you
</I>&gt;<i> aren't subscribed there at present. Use the mailing list to learn, and 
</I>&gt;<i> contribute
</I>&gt;<i> as you can. If over time you give the core developers a good impression and
</I>&gt;<i> when we are looking for extra developers, then you would be considered.
</I>
Getting on the developers list is definitely  the first step. Subscribe 
by sending a message to <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">python-dev-subscribe at httpd.apache.org.</A>

Jim

</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022707.html">[mod_python] Re: MySQLSession, wiki, development and other stuff
</A></li>
	<LI>Next message: <A HREF="022709.html">[mod_python] register cleanup works fine,
	the call to the cleanup function fails...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22714">[ date ]</a>
              <a href="thread.html#22714">[ thread ]</a>
              <a href="subject.html#22714">[ subject ]</a>
              <a href="author.html#22714">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
