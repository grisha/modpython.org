<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Re: mod_python, the ITK MPM and sessions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20mod_python%2C%20the%20ITK%20MPM%20and%20sessions&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022543.html">
   <LINK REL="Next"  HREF="022545.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Re: mod_python, the ITK MPM and sessions</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20mod_python%2C%20the%20ITK%20MPM%20and%20sessions&In-Reply-To="
       TITLE="[mod_python] Re: mod_python, the ITK MPM and sessions">grahamd at dscpl.com.au
       </A><BR>
    <I>Wed Nov  8 16:20:39 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="022543.html">[mod_python] Restricted Mode 
</A></li>
        <LI>Next message: <A HREF="022545.html">[mod_python] Trouble with multiple class objects in publisher model
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22544">[ date ]</a>
              <a href="thread.html#22544">[ thread ]</a>
              <a href="subject.html#22544">[ subject ]</a>
              <a href="author.html#22544">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Sam Morris wrote ..
&gt;<i> On Tue, 07 Nov 2006 18:46:44 -0500, Graham Dumpleton wrote:
</I>&gt;<i> &gt; Looking at:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;   <A HREF="http://apr.apache.org/docs/apr/apr__global__mutex_8h-source.html">http://apr.apache.org/docs/apr/apr__global__mutex_8h-source.html</A>
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; you might consider changing mod_python code such that instead of
</I>&gt;<i> &gt; passing APR_LOCK_DEFAULT to the call of apr_global_mutex_create() in
</I>&gt;<i> &gt; src/mod_python.c, change it some some other specific locking
</I>&gt;<i> &gt; mechanism rather than relying on APR to choose one for you.
</I>&gt;<i> 
</I>&gt;<i> Thanks very much for the pointers! My results:
</I>&gt;<i> 
</I>&gt;<i> APR_LOCK_FCNTL: works!
</I>&gt;<i> APR_LOCK_FLOCK: works!
</I>&gt;<i> APR_LOCK_SYSVSEM: fail (permission denied when acquiring semaphore)
</I>&gt;<i> APR_LOCK_POSIXSEM: fail (not implemented on my platform)
</I>&gt;<i> APR_LOCK_PROC_PTHREAD: works!
</I>&gt;<i> 
</I>&gt;<i> (On my platform, Debian GNU/Linux, APR_LOCK_DEFAULT causes SysV Semaphores
</I>&gt;<i> to be used).
</I>&gt;<i> 
</I>&gt;<i> Out of these, I guess pthread semaphores are the fastest.
</I>&gt;<i> 
</I>&gt;<i> Would you consider adding an option to mod_python's Apache configuration
</I>&gt;<i> to
</I>&gt;<i> control which semaphore implementation is chosen? I can try to come up
</I>&gt;<i> with a patch for this.
</I>
Good to hear it works.

At this stage the best course of action is probably to create an issue on the
mod_python bug tracker with the suggested new feature of an option to configure
which allows the locking scheme used for the global locks to be overridden at
compile time. As well as the changes to configure, obviously need to make code
changes in src/mod_python.c and elsewhere.

Note that because of where we are at with releases this would not be looked at
until some future release after 3.3. Thus, for the time being at least, just go with
the manual change.

I'll create an issue in the bug tracking system later when I get a chance and after
I have done some research on what this experimental MPM is all about.

Graham
</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022543.html">[mod_python] Restricted Mode 
</A></li>
	<LI>Next message: <A HREF="022545.html">[mod_python] Trouble with multiple class objects in publisher model
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22544">[ date ]</a>
              <a href="thread.html#22544">[ thread ]</a>
              <a href="subject.html#22544">[ subject ]</a>
              <a href="author.html#22544">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
