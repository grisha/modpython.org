<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Newbie Questions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Newbie%20Questions&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022594.html">
   <LINK REL="Next"  HREF="022597.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Newbie Questions</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Newbie%20Questions&In-Reply-To="
       TITLE="[mod_python] Newbie Questions">grahamd at dscpl.com.au
       </A><BR>
    <I>Mon Nov 13 16:01:59 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="022594.html">[mod_python] XP 3.2.8 install problem.
</A></li>
        <LI>Next message: <A HREF="022597.html">[mod_python] Newbie Questions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22595">[ date ]</a>
              <a href="thread.html#22595">[ thread ]</a>
              <a href="subject.html#22595">[ subject ]</a>
              <a href="author.html#22595">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please keep the discussion on the mod_python mailing list.

<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">g.farina at pharaondev.com</A> wrote ..
&gt;<i> Thanks
</I>&gt;<i> your answers really helped me a lot. I think I'll pass the request object
</I>&gt;<i> (or better a wrapper over it) to the controllers. then I have only to be
</I>&gt;<i> sure that the controllers does not retain references (but week) to this
</I>&gt;<i> object to be sure it is free automatically by mod_python.
</I>
The need to not hold references to the request object beyond the
life of the request is actually quite important. This is because the
internal Apache structures which it wraps will be destroyed regardless
at the end of the request. If you keep around the request object
and after the request has completed try to access it, you can
potentially crash the Apache child process.

&gt;<i> Another shourt question: how can I get the content-type of a request ?
</I>&gt;<i> Using req.content_type or this property is used only for writing the
</I>&gt;<i> response content-type ?
</I>
The req.content_type attribute will be populated by Apache for
a request based on what it can determine about the type of
resource being requested. For example, if you are using PSP
and have added to your Apache configuration:

  AddType text/html .psp

so that Apache knows that a request of a .psp file will result in
return of 'text/html' content, then req.content_type will already
be set for you before your response handler is run. I can't
remember what it sets it to if it can't work it out. It may even set
it to the value of the DefaultType directive already at that point.

The only tricky case is if the request mapped to a directory and
you are using SetHandler directive. In that case the value of
req.content_type will be 'httpd/unix-directory' regardless of
whether UNIX of Windows is used.

&gt;<i> &gt; It depends on to what level you expect to be able to free memory. Python
</I>&gt;<i> &gt; will obviously free up some stuff for you automatically, but if you
</I>&gt;<i> &gt; expect
</I>&gt;<i> &gt; to be able to unload a module then no. You will need to be more specific
</I>&gt;<i> &gt; about your expectations. See my above comment about using the request
</I>&gt;<i> &gt; object as the means to provide access to stuff that any code used to
</I>&gt;<i> &gt; service a request needs.
</I>&gt;<i> 
</I>&gt;<i> I need to unload the controller (module) and be sure that all the
</I>&gt;<i> submodules used are unloaded the same way.
</I>&gt;<i> Any suggestions ?
</I>
Using apache.import_module() at least there is no way to unload a module
and in general it would be a very hard thing to achieve and potentially
dangerous to attempt depending on what your application does.

My question to you would be why you think you need to unload it? Having
to unload it every time would impact the performance and makes the idea
that the interpreter is persistent between requests allowing caching, to be
a pointless feature. If you want to unload stuff, you may as well just use CGI.

Note that if you want to unload it because you want any changes to code
to be picked up automatically, mod_python does have automatic module
reloading. It is a bit broken in current mod_python and you need to be
careful how you use it, but fixed in mod_python 3.3.

Graham
</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022594.html">[mod_python] XP 3.2.8 install problem.
</A></li>
	<LI>Next message: <A HREF="022597.html">[mod_python] Newbie Questions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22595">[ date ]</a>
              <a href="thread.html#22595">[ thread ]</a>
              <a href="subject.html#22595">[ subject ]</a>
              <a href="author.html#22595">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
