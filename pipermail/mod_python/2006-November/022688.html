<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Session Storage : memory, file, dbm....Mysql?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Session%20Storage%20%3A%20memory%2C%20file%2C%20dbm....Mysql%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022687.html">
   <LINK REL="Next"  HREF="022689.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Session Storage : memory, file, dbm....Mysql?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Martijn Moeling</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Session%20Storage%20%3A%20memory%2C%20file%2C%20dbm....Mysql%3F&In-Reply-To="
       TITLE="[mod_python] Session Storage : memory, file, dbm....Mysql?">martijn at xs4us.nu
       </A><BR>
    <I>Mon Nov 27 06:08:15 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="022687.html">[mod_python] can't compile on linux?
</A></li>
        <LI>Next message: <A HREF="022689.html">[mod_python] Session Hell...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22688">[ date ]</a>
              <a href="thread.html#22688">[ thread ]</a>
              <a href="subject.html#22688">[ subject ]</a>
              <a href="author.html#22688">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I am building an application framework (yes!) with very specific needs.
One of the main problems I run into is session management, I'll explain:

My application (Running on Fedora) Is prepared for multiple front-end
servers communicating on an Internal backbone to a database server.
Think of it as some sort of web based Citrix able to run on all browsers
without the need of client-side software installation. Fully
programmable in python (even the front-end) and if the time gets there
even Visual. So build a browser based application within an application
with central storage and management. Mod Python is used to implement a
part of an OS if you wish to call it that way.

The front ends will be Apache servers with mod_python connected to the
Internet using round-robin DNS (Multiple ip addresses for one Host), In
theory a PC will do a DNS lookup and get the address of one of the
front-end, this PC will keep this address until the TTL makes it expire
in the DNS caches along the way, there is no problem since each session
will be served by the same front end.

But I need to find a way to get the session information into the MySQL
database in the backend server to enable central monitoring and inter
user communications etc. (think of a Messenger online userlist as an
example)

I can of course write stuff to maintain this sort of data in the MySQL
database but what if the session ends other than a user logging out
nicely (broken connection, browser close etc.)

It would be nice to have a MySQLsession object, an extra parameter could
be added like a MySQLdb cursor object, or am I wrong and are sessions
maintained by Apache (since modpython does not seem to keep track of
Session closing), or is there any way to &quot;list&quot; active sessions from
within modpython, so I can let the backend server send an http request
to the front-end and doing something like:
<A HREF="http://frontend1/getsessionlist">http://frontend1/getsessionlist</A> which returns a comma separated list of
active session id's, so the stale session records in the database can be
removed.

I have been researching Session.py
Where I interestingly found:
(from def dbm_cleanup(data):)

If (time.time() - dict[_accessed]) &gt; dict[&quot;_timeout]:
	old.append(key)
..
..
..
For key in old:
	Del db[key]

If I understand this right, this means that this is done to see if the
session is ended right? So It I alter Session.py I could make my own
MySQL Session right?

Would there be anyone else Interested in a MySQLSession object and what
do I need to take into account when modifying it?


Please feel free to comment on any of this,

Martijn Moeling

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022687.html">[mod_python] can't compile on linux?
</A></li>
	<LI>Next message: <A HREF="022689.html">[mod_python] Session Hell...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22688">[ date ]</a>
              <a href="thread.html#22688">[ thread ]</a>
              <a href="subject.html#22688">[ subject ]</a>
              <a href="author.html#22688">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
