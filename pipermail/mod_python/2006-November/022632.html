<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] getting cookies from the response
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20getting%20cookies%20from%20the%20response&In-Reply-To=1163785561.11885.1.camel%40localhost">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022634.html">
   <LINK REL="Next"  HREF="022640.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] getting cookies from the response</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20getting%20cookies%20from%20the%20response&In-Reply-To=1163785561.11885.1.camel%40localhost"
       TITLE="[mod_python] getting cookies from the response">grahamd at dscpl.com.au
       </A><BR>
    <I>Sat Nov 18 01:43:08 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="022634.html">[mod_python] Approach to mod_python &quot;secure&quot; code
</A></li>
        <LI>Next message: <A HREF="022640.html">[mod_python] getting cookies from the response
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22632">[ date ]</a>
              <a href="thread.html#22632">[ thread ]</a>
              <a href="subject.html#22632">[ subject ]</a>
              <a href="author.html#22632">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 18/11/2006, at 4:46 AM, Istvan De wrote:

&gt;<i> Hi Graham,
</I>&gt;<i>
</I>&gt;<i> On Fri, 2006-11-17 at 20:21 +1100, Graham Dumpleton wrote:
</I>&gt;&gt;<i> On 17/11/2006, at 8:09 PM, Istvan De wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Hi!
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> In my code, if I detect that a cookie is not set, I set it using
</I>&gt;&gt;&gt;<i> Cookie.add_cookie().
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> That is all well. However, if I read this cookie from the same  
</I>&gt;&gt;&gt;<i> request
</I>&gt;&gt;&gt;<i> at which it was added, it is not available. I guess this is because
</I>&gt;&gt;&gt;<i> the
</I>&gt;&gt;&gt;<i> &quot;cookie add&quot; function puts the cookie into the reponse of the page,
</I>&gt;&gt;&gt;<i> and
</I>&gt;&gt;&gt;<i> the &quot;cookie get&quot; function only looks at the request to see what
</I>&gt;&gt;&gt;<i> cookies
</I>&gt;&gt;&gt;<i> are set.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> What is the solution to my problem?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Cookie.get_cookies() reads from req.headers_in. Cookie.add_cookie()
</I>&gt;&gt;<i> writes to req.headers_out. Thus, you can't read back what you only  
</I>&gt;&gt;<i> just
</I>&gt;&gt;<i> wrote.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Suggest you log using apache.log_error() the values of the input and
</I>&gt;&gt;<i> output headers to see what they are set to.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Note that Cookie.add_cookie() must be called prior to the first time
</I>&gt;&gt;<i> that
</I>&gt;&gt;<i> any actual content is written back as the response.
</I>&gt;<i>
</I>&gt;<i> Yes, these are all clear to me. But what do you advise as the solution
</I>&gt;<i> to the problem? I need to read some cookies just created. Or maybe
</I>&gt;<i> re-load the page with a meta tag after creating the cookies? But this
</I>&gt;<i> would be sort of a hack.
</I>
Please keep discussion on the mailing list.

It is unclear why you would want to do it in the first place which  
possibly
suggests that whatever you are doing you are going about it all in the
wrong way. Can you explain what problem it is you are really trying to
solve.

Anyway, req.headers_in should be writable and so you could always
create the 'cookie' header and resave it. That can be a bit tricky  
though
if you are getting sent multiple cookies as you potentially have to  
merge
it back in with those other cookies.

Graham
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022634.html">[mod_python] Approach to mod_python &quot;secure&quot; code
</A></li>
	<LI>Next message: <A HREF="022640.html">[mod_python] getting cookies from the response
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22632">[ date ]</a>
              <a href="thread.html#22632">[ thread ]</a>
              <a href="subject.html#22632">[ subject ]</a>
              <a href="author.html#22632">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
