<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] meets_conditions does not seem to work
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20meets_conditions%20does%20not%20seem%20to%20work&In-Reply-To=1164177461.25087%40dscpl.user.openhosting.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022664.html">
   <LINK REL="Next"  HREF="022661.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] meets_conditions does not seem to work</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>sliderw hotmail</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20meets_conditions%20does%20not%20seem%20to%20work&In-Reply-To=1164177461.25087%40dscpl.user.openhosting.com"
       TITLE="[mod_python] meets_conditions does not seem to work">sliderw at hotmail.com
       </A><BR>
    <I>Wed Nov 22 19:27:29 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="022664.html">[mod_python] meets_conditions does not seem to work
</A></li>
        <LI>Next message: <A HREF="022661.html">[mod_python] Session timeout
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22671">[ date ]</a>
              <a href="thread.html#22671">[ thread ]</a>
              <a href="subject.html#22671">[ subject ]</a>
              <a href="author.html#22671">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i>You can do:
</I>&gt;<i>
</I>&gt;<i>   req.update_mtime(mtime)
</I>&gt;<i>   req.set_last_modified()
</I>&gt;<i>
</I>&gt;<i>This will achieve the same effect. Unless there is a good reason, where we
</I>&gt;<i>do expose underlying Apache functions, we tend to have them behave in the
</I>&gt;<i>same way, rather than adding additional functionality. That way people can
</I>&gt;<i>to a degree refer to Apache documentation and expect that it will work
</I>&gt;<i>the same way.
</I>&gt;<i>
</I>&gt;<i>If you feel strongly about it, best thing to do is to log an 'improvement'
</I>&gt;<i>suggestion against issue tracking system so it can be considered in the
</I>&gt;<i>future at some point. Address is:
</I>&gt;<i>
</I>&gt;<i>   <A HREF="http://issues.apache.org/jira/browse/MODPYTHON">http://issues.apache.org/jira/browse/MODPYTHON</A>
</I>&gt;<i>  &gt; Either way, the documentation of meets_conditions needs to be fixed in
</I>&gt;<i> &gt; 3.3.
</I>&gt;<i>
</I>&gt;<i>If you want to provide a better example that is more complete and works, 
</I>&gt;<i>just
</I>&gt;<i>post it here and I will update the documentation. I haven't really fiddled 
</I>&gt;<i>with
</I>&gt;<i>this sort of stuff and so would only be assuming any example I put together
</I>&gt;<i>worked. If you have any suggestions for text changes to explain it better, 
</I>&gt;<i>by
</I>&gt;<i>all means send them along as well.
</I>&gt;<i>
</I>&gt;<i>Graham
</I>
The set_last_modified suggestion is a good one. The meets_conditions 
documentation may be changed to:

Calls the Apache ap_meets_conditions() function which returns a status code. 
If status is apache.OK, generate the content of the response normally. If 
not, simply return status. Note that mtime (and possibly ETag) should be set 
prior to calling this function. The same goes for req.status if the status 
differs from apache.OK.

Example:

...
r.headers_out['Expires'] = 'Mon, 18 Apr 2005 17:30:00 GMT'
r.headers_out['ETag'] = '&quot;1130794f-3774-4584-a4ea-0ab19e684268&quot;'
r.update_mtime(1000000000)
r.set_last_modified()

status = r.meets_conditions()
if status != apache.OK:
  return status

... do expensive generation of the response content ...

_________________________________________________________________
All-in-one security and maintenance for your PC.&#160; Get a free 90-day trial! 
<A HREF="http://clk.atdmt.com/MSN/go/msnnkwlo0050000002msn/direct/01/?href=http://clk.atdmt.com/MSN/go/msnnkwlo0050000001msn/direct/01/?href=http://www.windowsonecare.com/?sc_cid=msn_hotmail">http://clk.atdmt.com/MSN/go/msnnkwlo0050000002msn/direct/01/?href=http://clk.atdmt.com/MSN/go/msnnkwlo0050000001msn/direct/01/?href=http://www.windowsonecare.com/?sc_cid=msn_hotmail</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022664.html">[mod_python] meets_conditions does not seem to work
</A></li>
	<LI>Next message: <A HREF="022661.html">[mod_python] Session timeout
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22671">[ date ]</a>
              <a href="thread.html#22671">[ thread ]</a>
              <a href="subject.html#22671">[ subject ]</a>
              <a href="author.html#22671">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
