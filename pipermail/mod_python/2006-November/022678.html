<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Changing server signature
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Changing%20server%20signature&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022675.html">
   <LINK REL="Next"  HREF="022681.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Changing server signature</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Changing%20server%20signature&In-Reply-To="
       TITLE="[mod_python] Changing server signature">grahamd at dscpl.com.au
       </A><BR>
    <I>Thu Nov 23 15:52:37 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="022675.html">[mod_python] Changing server signature
</A></li>
        <LI>Next message: <A HREF="022681.html">[mod_python] Changing server signature
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22678">[ date ]</a>
              <a href="thread.html#22678">[ thread ]</a>
              <a href="subject.html#22678">[ subject ]</a>
              <a href="author.html#22678">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Lars Eriksen wrote ..
&gt;<i> When I return apache.NOT_FOUND,
</I>
You mean apache.HTTP_NOT_FOUND. :-)

&gt;<i> for example, it automatically appends 
</I>&gt;<i> the following signature: &quot;Apache/2.0.59 (Win32) mod_python/3.2.8 
</I>&gt;<i> Python/2.4.4 Server at localhost Port 80&quot;
</I>&gt;<i> 
</I>&gt;<i> Is there a way to change this programatically with mod_python or only in
</I>&gt;<i> httpd.conf?
</I>
This server string comes from the default error pages which are generated by
Apache automatically when you return an error status. There are two ways that
you can change what is shown, but in both cases it means you will have to
construct a new error page to be used.

The first approach is to use the Apache ErrorDocument directive to specify an
alternate error page. See:

  <A HREF="http://httpd.apache.org/docs/2.0/mod/core.html#errordocument">http://httpd.apache.org/docs/2.0/mod/core.html#errordocument</A>

By default Apache uses a set of pages which are processed using server side
include mechanism of Apache to incorporate error details and stuff such as the
server string.

Using ErrorDocument directive, it will apply to all URLs falling under the
point where you specify the ErrorDocument directive.

The second approach is to have your handler return the actual body of the error
response that you want. To do this, the handler would construct a response like
it was doing so for a normal page with the exception that it needs to set
req.status to indicate the error type. Also, if the handler is not the content
handler phase but an earlier phase, the handler must return apache.DONE as the
result rather than apache.OK. Even if the content handler phase, still
preferable to return apache.DONE if the complete response is being returned.

  from mod_python import apache

  def handler(req):
    req.status = apache.HTTP_NOT_FOUND
    req.content_type = 'text/html'
    req.write(...)
    return apache.DONE

Graham
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022675.html">[mod_python] Changing server signature
</A></li>
	<LI>Next message: <A HREF="022681.html">[mod_python] Changing server signature
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22678">[ date ]</a>
              <a href="thread.html#22678">[ thread ]</a>
              <a href="subject.html#22678">[ subject ]</a>
              <a href="author.html#22678">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
