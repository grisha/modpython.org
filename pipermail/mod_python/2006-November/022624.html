<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] high memory consumption with multiple Python
	interpreters ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20high%20memory%20consumption%20with%20multiple%20Python%0A%09interpreters%20%3F&In-Reply-To=200611161305.15332.richardlewis%40fastmail.co.uk">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022622.html">
   <LINK REL="Next"  HREF="022626.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] high memory consumption with multiple Python
	interpreters ?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Deron Meranda</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20high%20memory%20consumption%20with%20multiple%20Python%0A%09interpreters%20%3F&In-Reply-To=200611161305.15332.richardlewis%40fastmail.co.uk"
       TITLE="[mod_python] high memory consumption with multiple Python
	interpreters ?">deron.meranda at gmail.com
       </A><BR>
    <I>Thu Nov 16 11:10:42 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="022622.html">[mod_python] high memory consumption with multiple Python
	interpreters ?
</A></li>
        <LI>Next message: <A HREF="022626.html">[mod_python] getting cookies from the response
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22624">[ date ]</a>
              <a href="thread.html#22624">[ thread ]</a>
              <a href="subject.html#22624">[ subject ]</a>
              <a href="author.html#22624">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 11/16/06, Richard Lewis &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">richardlewis at fastmail.co.uk</A>&gt; wrote:
&gt;<i> On Thursday 16 November 2006 12:47, Julien Cigar wrote:
</I>&gt;<i> &gt; (how &quot;heavy&quot; is a Python interpreter ?) ?
</I>&gt;<i> &gt;
</I>&gt;<i> Assuming you're on Unix, I would suggest that you try it out. Try loading some
</I>&gt;<i> python processing and importing the modules that you use. Then drop back into
</I>&gt;<i> the shell and go:
</I>&gt;<i>
</I>&gt;<i> repeat:
</I>&gt;<i> $ python -ic &quot;import my_module&quot; &amp;
</I>&gt;<i> several times
</I>&gt;<i>
</I>&gt;<i> $ ps aux | head -1
</I>&gt;<i> USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
</I>&gt;<i> $ ps aux | grep python
</I>&gt;<i> r  7884  0.5  1.6  11964  8576 pts/4    T    13:00   0:00 python -ic import m
</I>&gt;<i> r  7885  0.4  1.6  11972  8576 pts/4    T    13:00   0:00 python -ic import m
</I>&gt;<i> r  7886  0.7  1.6  11964  8576 pts/4    T    13:00   0:00 python -ic import m
</I>&gt;<i> r  7887  0.5  1.6  11972  8580 pts/4    T    13:00   0:00 python -ic import m
</I>&gt;<i> r  7888  0.6  1.6  11964  8576 pts/4    T    13:00   0:00 python -ic import m
</I>&gt;<i> r  7889  0.5  1.6  11964  8576 pts/4    T    13:00   0:00 python -ic import m
</I>&gt;<i> r  7892  1.5  1.6  11964  8576 pts/4    T    13:00   0:00 python -ic import m
</I>&gt;<i> r  7894  0.0  0.1   1952   632 pts/4    S+   13:00   0:00 grep python
</I>&gt;<i>
</I>&gt;<i> As you can see, my python processes are each using 1.6% of my computer's 512MB
</I>&gt;<i> of RAM. Its not the most accurate test, but its quite fun ;-)
</I>
You also need to realize that having one process run multiple instances
of a Python interpreter (as with mod_python) is different than running
multiple processes entirely.  There are a lot of resources that will be
shared in the former case (such as all the C-based code that makes up
the Python core as well as any C-based python modules that are loaded).

The real memory usage is also highly dependent upon what your
mod_python handlers are doing.  If they are creating lots of objects,
store internal caches, load entire files into memory, do select * from
large database tables, etc.

Of course the only real way to tell what happens is to just try it out under
an actual Apache environment.  But aside from any mod_python memory
leaks (which tend to get fixed rather quickly when found), I think you'll
find that using multiple interpreters under mod_python is actually less
memory intensive (or no worse) than a multiple-process approach like
CGI.
-- 
Deron Meranda
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022622.html">[mod_python] high memory consumption with multiple Python
	interpreters ?
</A></li>
	<LI>Next message: <A HREF="022626.html">[mod_python] getting cookies from the response
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22624">[ date ]</a>
              <a href="thread.html#22624">[ thread ]</a>
              <a href="subject.html#22624">[ subject ]</a>
              <a href="author.html#22624">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
