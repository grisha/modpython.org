<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] set the content-type
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20set%20the%20content-type&In-Reply-To=1163165788.4554805c99577%40imp4-g19.free.fr">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022576.html">
   <LINK REL="Next"  HREF="022578.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] set the content-type</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20set%20the%20content-type&In-Reply-To=1163165788.4554805c99577%40imp4-g19.free.fr"
       TITLE="[mod_python] set the content-type">grahamd at dscpl.com.au
       </A><BR>
    <I>Sat Nov 11 20:37:02 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="022576.html">[mod_python] set the content-type
</A></li>
        <LI>Next message: <A HREF="022578.html">[mod_python] Working example for custom errordocuments...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22587">[ date ]</a>
              <a href="thread.html#22587">[ thread ]</a>
              <a href="subject.html#22587">[ subject ]</a>
              <a href="author.html#22587">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 11/11/2006, at 12:36 AM, <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">julien.coron at free.fr</A> wrote:

&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> Someone can explain me why the following line works well:
</I>&gt;<i>
</I>&gt;<i> request.content_type = 'text/html'
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> But this not:
</I>&gt;<i>
</I>&gt;<i> request.headers_out.add(&quot;Content-Type&quot;,&quot;text/html&quot;)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> and seems to be &quot;httpd/unix-directory&quot;...
</I>
Because that is how Apache works. Specifically, the default header  
output
filter for the HTTP protocol in Apache takes the value of  
req.content_type
and saves it in the header as 'Content-Type' header.

Thus, if you set the header yourself, it will be overridden by  
whatever the
value of req.content_type is. In the above example, the request URL
matched to a directory and therefore the inbound content type as  
determined
by Apache was 'httpd/unix-directory'. Note that it even produces this  
on Win32
because of the heritage of Apache being written for UNIX first.

In summary, if you need to set the outbound content type use  
req.content_type.

Graham
</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022576.html">[mod_python] set the content-type
</A></li>
	<LI>Next message: <A HREF="022578.html">[mod_python] Working example for custom errordocuments...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22587">[ date ]</a>
              <a href="thread.html#22587">[ thread ]</a>
              <a href="subject.html#22587">[ subject ]</a>
              <a href="author.html#22587">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
