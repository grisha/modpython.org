<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] MySQL invalid pointer error
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20MySQL%20invalid%20pointer%20error&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022458.html">
   <LINK REL="Next"  HREF="022448.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] MySQL invalid pointer error</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Richard Lewis</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20MySQL%20invalid%20pointer%20error&In-Reply-To="
       TITLE="[mod_python] MySQL invalid pointer error">richardlewis at fastmail.co.uk
       </A><BR>
    <I>Thu Nov  2 05:06:15 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="022458.html">[mod_python] Can i have both Marshal and Signed
	CookieswithPublisher?
</A></li>
        <LI>Next message: <A HREF="022448.html">[mod_python] MySQL invalid pointer error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22447">[ date ]</a>
              <a href="thread.html#22447">[ thread ]</a>
              <a href="subject.html#22447">[ subject ]</a>
              <a href="author.html#22447">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi there,

Apache: 2.2.3
mod_python: 3.2.10
MySQL: 5.0.26
MySQLdb: 1.2.1

I'm doing some stuff with MySQL and mod_python and have been noticing some 
concerning entries in my Apache error log:

*** glibc detected *** free(): invalid pointer: 0x0834241d ***
[Wed Nov 01 18:43:20 2006] [notice] child pid 7637 exit signal Aborted (6)

I /think/ they are coming from MySQL. Can anyone confirm this?

I've tried a couple of different strategies for connecting to the database. 
First I tried using a global connection object in the handler module. This 
seemed to work OK except for the error messages shown above. Next I tried 
making every function that needed the database create and close its own 
connection. This didn't give any errors but was /really/ slow. Now I have a 
connection object created at the start of the handler function (effectively), 
passed around between all the functions and objects of my application and 
then closed when the handler finishes. This seems to work at a good speed but 
still gives me these error messages.

One thing I often find is that the connection cannot be closed properly at the 
end of the handler function; it seems as though its already been closed by 
the time execution gets there.

Would using a database connection pooling tool like sqlrelay be of any help?

Cheers,
Richard 
-- 
-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
Richard Lewis
Sonic Arts Research Archive
<A HREF="http://www.sara.uea.ac.uk/">http://www.sara.uea.ac.uk/</A>
JID: <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">ironchicken at jabber.earth.li</A>
-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022458.html">[mod_python] Can i have both Marshal and Signed
	CookieswithPublisher?
</A></li>
	<LI>Next message: <A HREF="022448.html">[mod_python] MySQL invalid pointer error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22447">[ date ]</a>
              <a href="thread.html#22447">[ thread ]</a>
              <a href="subject.html#22447">[ subject ]</a>
              <a href="author.html#22447">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
