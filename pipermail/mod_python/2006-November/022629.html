<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Approach to mod_python &quot;secure&quot; code
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Approach%20to%20mod_python%20%22secure%22%20code&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022627.html">
   <LINK REL="Next"  HREF="022630.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Approach to mod_python &quot;secure&quot; code</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>fizban</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Approach%20to%20mod_python%20%22secure%22%20code&In-Reply-To="
       TITLE="[mod_python] Approach to mod_python &quot;secure&quot; code">fizban at paranoici.org
       </A><BR>
    <I>Fri Nov 17 05:36:16 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="022627.html">[mod_python] getting cookies from the response
</A></li>
        <LI>Next message: <A HREF="022630.html">[mod_python] Approach to mod_python &quot;secure&quot; code
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22629">[ date ]</a>
              <a href="thread.html#22629">[ thread ]</a>
              <a href="subject.html#22629">[ subject ]</a>
              <a href="author.html#22629">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

I'm new to python and mod_python, I've just started moving away from PHP
so I apology if my questions will look dumb :)
I'm finding it easy to learn python for now, there's plenty of docs
around, and mailing lists like this one (I've been lurking for a few
days) are pretty usefull. However there are things that I'm not sure I'm
approaching in the right way, so I'd need an hand by someone more
experienced than me.

I'm in the process of converting a website to mod_python, and after some
reading I decided to opt for the &quot;my own handler&quot; approach. I'll have an
&quot;index.py&quot; (the name isn't important) using SetHandler. So my handler
will deal with all the requests for that directory.

My approach to this is the following:

1* take req.uri, str() it (just in case?) and split('/') it.
[stuff = str(req.uri).split('/')
2* take stuff[1], see if isalpha(), if so see if stuff[1] is in a tuple
(contains all the valid &quot;sections&quot;). if it is, we assume stuff[1] is
safe to deal with. if not, we return a custom 404.
3* if stuff[1] is valid, and it is in a tuple containing a list of
special sections with a matching function, we run that function
[eval(&quot;%s(%s)&quot; % (section, &quot;req&quot;))]. some of these functions take other
arguments, like a (pre validated with similar approach) stuff[2], or
req.args (same here). otherwise we run some other routine, by parsing
and req.writing a template.
[stuff[2] or req.args are this time matched against regular expressions,
to see if they fit the arguments taken by the section functions]

Do you guys think it's a decent approach in terms of &quot;security&quot;? Would
you take any other validation steps? As I said I'm really new to python
and mod_python, so since the website has some huge userbase, I'm really
worried about security.. We are not using (for various reasons) sql db,
only templates and local xml basically, so sql inj. is not an issue.

Since the site re-design will force us to change all the URI, I have
setup some other function to see if str(req.uri) matches moved or
deleted pages, if so we return 410 or 301 messages. 404 give the
impression of a messed up site. Is str(req.uri) safe enough to be passed
as argument to the notfound() or moved() functions I've made?

Thanks in advance for any hint or comment you may give me!
I'm also looking for any &quot;guide&quot; or paper about writing &quot;secure&quot; code
with mod_python, I haven't been able to find any on my own, for now :)

Ciao,

Andreas
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022627.html">[mod_python] getting cookies from the response
</A></li>
	<LI>Next message: <A HREF="022630.html">[mod_python] Approach to mod_python &quot;secure&quot; code
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22629">[ date ]</a>
              <a href="thread.html#22629">[ thread ]</a>
              <a href="subject.html#22629">[ subject ]</a>
              <a href="author.html#22629">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
