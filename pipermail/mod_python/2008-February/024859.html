<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Re: mod_python and C extensions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20mod_python%20and%20C%20extensions&In-Reply-To=47BC6207.5020809%40ncsu.edu">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024857.html">
   <LINK REL="Next"  HREF="024860.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Re: mod_python and C extensions</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20mod_python%20and%20C%20extensions&In-Reply-To=47BC6207.5020809%40ncsu.edu"
       TITLE="[mod_python] Re: mod_python and C extensions">graham.dumpleton at gmail.com
       </A><BR>
    <I>Wed Feb 20 15:35:32 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="024857.html">[mod_python] Re: mod_python and C extensions
</A></li>
        <LI>Next message: <A HREF="024860.html">[mod_python] sys.path problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24859">[ date ]</a>
              <a href="thread.html#24859">[ thread ]</a>
              <a href="subject.html#24859">[ subject ]</a>
              <a href="author.html#24859">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>In mod_python 3.3.1, Python packages, nor C extension modules will be
found if they reside in the document directory which is the target of
the URL and thus PythonHandler directive. Only .py files are used.
Python packages and C extension modules must be in a physical
directory specified in PythonPath or otherwise on sys.path. It isn't
recommended to be putting the document tree directory in PythonPath
because it causes an overlap between mod_python module importer path
and standard module search path. Thus, put your .so file outside of
the document tree somewhere with that directory in PythonPath, and use
handler .py wrapper in document tree to import it from that location
and relay the call. The two will obviously need to have a different
basename now.

For more details about module importer see import_module() documentation in:

  <A HREF="http://www.modpython.org/live/current/doc-html/pyapi-apmeth.html">http://www.modpython.org/live/current/doc-html/pyapi-apmeth.html</A>

Other than that suggestion, need to see the mod_python configuration
from Apache and for you to also say what directory path your files are
in so can relate that to the configuration.

Graham

On 21/02/2008, argriffi &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">argriffi at ncsu.edu</A>&gt; wrote:
&gt;<i> Hi guys,
</I>&gt;<i>
</I>&gt;<i> I'm having a problem getting Apache and mod_python to use my C extension
</I>&gt;<i> module mymodule.so instead of my raw python module mymodule.py.  Both
</I>&gt;<i> modules have been tested outside of Apache/mod_python.
</I>&gt;<i>
</I>&gt;<i> There is no error when I have mymodule.py in the directory, but when I
</I>&gt;<i> replace it with mymodule.so (in the same directory), I get an error.
</I>&gt;<i> This seems to rule out problems with the python path.
</I>&gt;<i>
</I>&gt;<i> The .py and .so modules that I have tried both have the same owner and
</I>&gt;<i> group, and have the same permissions except that the .so file has
</I>&gt;<i> execute permissions.  This seems to rule out problems with Apache user
</I>&gt;<i> permissions.
</I>&gt;<i>
</I>&gt;<i> I tried some stuff from googling and from BasicsOfModuleImporting and
</I>&gt;<i> ModuleImportingIsBroken, but I've had no luck and I'm about to start
</I>&gt;<i> using CherryPy or something.
</I>&gt;<i>
</I>&gt;<i> Alex
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Graham Dumpleton wrote:
</I>&gt;<i> &gt; Can you please use the mod_python mailing list to ask questions.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;   <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Your problem though sounds like you need to either set PythonPath, or
</I>&gt;<i> &gt; the file, or directories it is in are not readable to the user that
</I>&gt;<i> &gt; Apache runs as.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Graham
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; Hi,
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; I'm using mod_python to provide some web apps, and I recently rewrote
</I>&gt;<i> &gt;&gt; mymodule.py as the C extension mymodule.so.  I was glad to see that it
</I>&gt;<i> &gt;&gt; runs about 100x as fast, but I was unhappy to see that it apparently
</I>&gt;<i> &gt;&gt; cannot be imported when I am using mod_python.  I get the ImportError
</I>&gt;<i> &gt;&gt; &quot;No module named mymodule&quot;.  Since I seem to fail at googling, do you
</I>&gt;<i> &gt;&gt; have any tips to help me solve this?
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I></PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024857.html">[mod_python] Re: mod_python and C extensions
</A></li>
	<LI>Next message: <A HREF="024860.html">[mod_python] sys.path problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24859">[ date ]</a>
              <a href="thread.html#24859">[ thread ]</a>
              <a href="subject.html#24859">[ subject ]</a>
              <a href="author.html#24859">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
