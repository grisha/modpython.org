<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] sys.path problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20sys.path%20problem&In-Reply-To=7a360be50802201823w27a95099t9f72c9c33b1bc3b0%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024862.html">
   <LINK REL="Next"  HREF="024864.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] sys.path problem</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20sys.path%20problem&In-Reply-To=7a360be50802201823w27a95099t9f72c9c33b1bc3b0%40mail.gmail.com"
       TITLE="[mod_python] sys.path problem">graham.dumpleton at gmail.com
       </A><BR>
    <I>Wed Feb 20 21:41:03 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="024862.html">[mod_python] sys.path problem
</A></li>
        <LI>Next message: <A HREF="024864.html">[mod_python] sys.path problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24863">[ date ]</a>
              <a href="thread.html#24863">[ thread ]</a>
              <a href="subject.html#24863">[ subject ]</a>
              <a href="author.html#24863">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 21/02/2008, AJ Coon &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">ajcoon at gmail.com</A>&gt; wrote:
&gt;<i> Hi Graham,
</I>&gt;<i>
</I>&gt;<i> I'm not using PythonPath anywhere, though my handlers both make
</I>&gt;<i> sys.path.append() calls to add various library paths needed by each.
</I>&gt;<i> Inconveniently, each of these handlers use different versions of some of the
</I>&gt;<i> same libraries.  It's a bit of a mess, but this all worked fine on 3.1.3.
</I>&gt;<i> Now that I upgraded to 3.3.1 (and changed nothing else), it's broken.
</I>&gt;<i> Rolling back seems the obvious choice, but I think what I'm trying to do
</I>&gt;<i> *is* do-able, no?
</I>
As per the documentation I pointed out, try setting:

  PythonOption mod_python.legacy.importer name

this will restore the old module importer functionality. If it still
doesn't work, possibly something in Apache configuration causing
issues instead.

In principle I can't see a problem with what you are trying to do,
although see comments below.

&gt;<i> As you requested, I have included my configuration below.  I'm just
</I>&gt;<i> developing on a workstation and DNS is managed by /etc/hosts, hence the
</I>&gt;<i> .localdomain host names.  Without further adieu:
</I>
Do those names map to distinct IP addresses or the same?

In Apache documentation it doesn't recommend that you use FQDN in
VirtualHost argument, but an IP address. Ie., in:

  <A HREF="http://httpd.apache.org/docs/2.2/mod/core.html#virtualhost">http://httpd.apache.org/docs/2.2/mod/core.html#virtualhost</A>

It says:

  &quot;&quot;&quot;A fully qualified domain name for the IP address of the virtual
host (not recommended)&quot;&quot;&quot;

The ServerName within the VirtualHost is what actually distinguishes
them if using name based lookup against the same IP address.

If using IPs or names rather than just *:80 then NameVirtualHost isn't
required, but there have been cases where lack of NameVirtualHost in
Apache configuration has caused mod_python to somehow merge sites when
it shouldn't have been. Not know whether this is a bug in mod_python
or not as when people got it working by adding NameVirtualHost, they
were then interested in helping to debug the underlying problem.

&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">aj at aj-5150</A>:~$ cat /var/handlerA/www/.htaccess
</I>&gt;<i> PythonInterpreter InterpA
</I>&gt;<i> Options -Indexes
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">aj at aj-5150</A>:~$ cat /var/handlerB/www/.htaccess
</I>&gt;<i>  PythonInterpreter InterpB
</I>&gt;<i> Options -Indexes
</I>
Have you confirmed that the .htaccess files are in fact being
consulted. You can do this by introducing a syntax error in them. Ie.,
add a line consisting of 'CRAP'. If when making request you then get a
500 error they are being consulted. The lack of an AllowOverride for
the directories suggests they may not even be getting consulted and so
the PythonInterpreter directives may not be getting applied. This may
be combining with NameVirtualHost issues to end up with stuff running
in same interpreter.

You can work out which interpreter code is running in by printing out
'apache.interpreter' from mod_python module.

Graham
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024862.html">[mod_python] sys.path problem
</A></li>
	<LI>Next message: <A HREF="024864.html">[mod_python] sys.path problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24863">[ date ]</a>
              <a href="thread.html#24863">[ thread ]</a>
              <a href="subject.html#24863">[ subject ]</a>
              <a href="author.html#24863">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
