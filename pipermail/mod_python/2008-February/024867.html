<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] sys.path problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20sys.path%20problem&In-Reply-To=7a360be50802202113s75db126eibf90f6010955a10a%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024865.html">
   <LINK REL="Next"  HREF="024868.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] sys.path problem</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20sys.path%20problem&In-Reply-To=7a360be50802202113s75db126eibf90f6010955a10a%40mail.gmail.com"
       TITLE="[mod_python] sys.path problem">graham.dumpleton at gmail.com
       </A><BR>
    <I>Thu Feb 21 00:25:44 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="024865.html">[mod_python] sys.path problem
</A></li>
        <LI>Next message: <A HREF="024868.html">[mod_python] sys.path problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24867">[ date ]</a>
              <a href="thread.html#24867">[ thread ]</a>
              <a href="subject.html#24867">[ subject ]</a>
              <a href="author.html#24867">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 21/02/2008, AJ Coon &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">ajcoon at gmail.com</A>&gt; wrote:
&gt;<i> Hi Graham,
</I>&gt;<i>
</I>&gt;<i> I wonder if this is a useful piece of information.  I just noticed this in
</I>&gt;<i> my logs:
</I>&gt;<i>
</I>&gt;<i> [Wed Feb 20 23:02:46 2008] [warn] mod_python (pid=29597,
</I>&gt;<i> interpreter='InterpB'): Module directory listed in &quot;sys.path&quot;. This may
</I>&gt;<i> cause problems. Please check code. File being imported is
</I>&gt;<i> &quot;/var/handlerB/www/handlerB_root/ProjectModule.py&quot;.
</I>&gt;<i>
</I>&gt;<i> I'm not sure I understand what it's complaining about?
</I>
The new module importer underlaying import_module() and as also used
by Python*Handler tries to keep mod_python module importer path
separate from sys.path. This is because an overlap can cause problems
with modules load duplicate times. You must be explicitly adding the
document directory to sys.path in your script, which you shouldn't do.

Can you show first part of script where you set sys.path.

Graham

&gt;<i>
</I>&gt;<i> -aj
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Wed, Feb 20, 2008 at 9:41 PM, Graham Dumpleton
</I>&gt;<i> &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On 21/02/2008, AJ Coon &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">ajcoon at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; Hi Graham,
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; I'm not using PythonPath anywhere, though my handlers both make
</I>&gt;<i> &gt; &gt; sys.path.append() calls to add various library paths needed by each.
</I>&gt;<i> &gt; &gt; Inconveniently, each of these handlers use different versions of some of
</I>&gt;<i> the
</I>&gt;<i> &gt; &gt; same libraries.  It's a bit of a mess, but this all worked fine on
</I>&gt;<i> 3.1.3.
</I>&gt;<i> &gt; &gt; Now that I upgraded to 3.3.1 (and changed nothing else), it's broken.
</I>&gt;<i> &gt; &gt; Rolling back seems the obvious choice, but I think what I'm trying to do
</I>&gt;<i> &gt; &gt; *is* do-able, no?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; As per the documentation I pointed out, try setting:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;  PythonOption mod_python.legacy.importer name
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; this will restore the old module importer functionality. If it still
</I>&gt;<i> &gt; doesn't work, possibly something in Apache configuration causing
</I>&gt;<i> &gt; issues instead.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; In principle I can't see a problem with what you are trying to do,
</I>&gt;<i> &gt; although see comments below.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; As you requested, I have included my configuration below.  I'm just
</I>&gt;<i> &gt; &gt; developing on a workstation and DNS is managed by /etc/hosts, hence the
</I>&gt;<i> &gt; &gt; .localdomain host names.  Without further adieu:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Do those names map to distinct IP addresses or the same?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; In Apache documentation it doesn't recommend that you use FQDN in
</I>&gt;<i> &gt; VirtualHost argument, but an IP address. Ie., in:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> <A HREF="http://httpd.apache.org/docs/2.2/mod/core.html#virtualhost">http://httpd.apache.org/docs/2.2/mod/core.html#virtualhost</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; It says:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;  &quot;&quot;&quot;A fully qualified domain name for the IP address of the virtual
</I>&gt;<i> &gt; host (not recommended)&quot;&quot;&quot;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The ServerName within the VirtualHost is what actually distinguishes
</I>&gt;<i> &gt; them if using name based lookup against the same IP address.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; If using IPs or names rather than just *:80 then NameVirtualHost isn't
</I>&gt;<i> &gt; required, but there have been cases where lack of NameVirtualHost in
</I>&gt;<i> &gt; Apache configuration has caused mod_python to somehow merge sites when
</I>&gt;<i> &gt; it shouldn't have been. Not know whether this is a bug in mod_python
</I>&gt;<i> &gt; or not as when people got it working by adding NameVirtualHost, they
</I>&gt;<i> &gt; were then interested in helping to debug the underlying problem.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">aj at aj-5150</A>:~$ cat /var/handlerA/www/.htaccess
</I>&gt;<i> &gt; &gt; PythonInterpreter InterpA
</I>&gt;<i> &gt; &gt; Options -Indexes
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">aj at aj-5150</A>:~$ cat /var/handlerB/www/.htaccess
</I>&gt;<i> &gt; &gt;  PythonInterpreter InterpB
</I>&gt;<i> &gt; &gt; Options -Indexes
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Have you confirmed that the .htaccess files are in fact being
</I>&gt;<i> &gt; consulted. You can do this by introducing a syntax error in them. Ie.,
</I>&gt;<i> &gt; add a line consisting of 'CRAP'. If when making request you then get a
</I>&gt;<i> &gt; 500 error they are being consulted. The lack of an AllowOverride for
</I>&gt;<i> &gt; the directories suggests they may not even be getting consulted and so
</I>&gt;<i> &gt; the PythonInterpreter directives may not be getting applied. This may
</I>&gt;<i> &gt; be combining with NameVirtualHost issues to end up with stuff running
</I>&gt;<i> &gt; in same interpreter.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; You can work out which interpreter code is running in by printing out
</I>&gt;<i> &gt; 'apache.interpreter' from mod_python module.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Graham
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i>
</I></PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024865.html">[mod_python] sys.path problem
</A></li>
	<LI>Next message: <A HREF="024868.html">[mod_python] sys.path problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24867">[ date ]</a>
              <a href="thread.html#24867">[ thread ]</a>
              <a href="subject.html#24867">[ subject ]</a>
              <a href="author.html#24867">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
