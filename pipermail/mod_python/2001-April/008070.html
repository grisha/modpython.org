<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] PythonImport failure
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20PythonImport%20failure&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008075.html">
   <LINK REL="Next"  HREF="008071.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
<table border=0 width="100%"><tr><td valign="top">
   <H1>[mod_python] PythonImport failure</H1>
    <B>Chris Hagner</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20PythonImport%20failure&In-Reply-To="
       TITLE="[mod_python] PythonImport failure">CHagner at fool.com
       </A><BR>
    <I>Mon Apr  9 17:26:57 EST 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="008075.html">[mod_python] CGI to mod_python -- what's the best way?
</A></li>
        <LI>Next message: <A HREF="008071.html">[mod_python] subintrepreters
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8070">[ date ]</a>
              <a href="thread.html#8070">[ thread ]</a>
              <a href="subject.html#8070">[ subject ]</a>
              <a href="author.html#8070">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi there,

This message is a continuation of a previous thread I started regarding my
difficulties in getting PythonImport to work.  (thread text is attached).

Moved my dev environment to Linux.  Still having failure of PythonImport
(see snippet below for error).  Simply put ChrisTest.py in the site-packages
directory.

[Mon Apr  9 17:10:38 2001] [notice] Apache/1.3.19 (Unix) mod_python/2.7.2
Python/2.0.42-S1.2.4 configured -- resuming normal operations
TypeError: must assign list (not &quot;string&quot;) to slice
[Mon Apr  9 17:10:38 2001] [error] directive_PythonImport: error importing
ChrisTest
TypeError: must assign list (not &quot;string&quot;) to slice
[Mon Apr  9 17:10:38 2001] [error] directive_PythonImport: error importing
ChrisTest
TypeError: must assign list (not &quot;string&quot;) to slice
[Mon Apr  9 17:10:38 2001] [error] directive_PythonImport: error importing
ChrisTest
TypeError: must assign list (not &quot;string&quot;) to slice
[Mon Apr  9 17:10:38 2001] [error] directive_PythonImport: error importing
ChrisTest
TypeError: must assign list (not &quot;string&quot;) to slice
[Mon Apr  9 17:10:38 2001] [error] directive_PythonImport: error importing
ChrisTest

Using the following directive

    PythonImport ChrisTest

Looking through mod_python.c, it's apparently failing on trying to import
the module (duh), but I haven't jumped in deeper.  Any help/ideas would be
greatly appreciated...  Thanks.

Chris
chagner
at
fool
dot
com

-----Original Message-----
From: Gregory (Grisha) Trubetskoy [mailto:<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">grisha at verio.net</A>]
Sent: Tuesday, March 27, 2001 4:01 PM
To: Chris Hagner
Cc: '<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython.org</A>'
Subject: RE: [mod_python] PythonImport failure



Try the mod_python 2.7.2 DLL and see if the problems persist

Grisha

On Tue, 27 Mar 2001, Chris Hagner wrote:

&gt;<i> A specific question about why PythonImport works for some modules and not
</I>&gt;<i> for others.
</I>&gt;<i>
</I>&gt;<i> 1.  The following statement works.  It compiles/imports apache.py at
</I>server
&gt;<i> startup.
</I>&gt;<i>
</I>&gt;<i> PythonImport mod_python.apache
</I>&gt;<i>
</I>&gt;<i> 2.  Now, when I create a dummy module in mod_python/MyObject.py
</I>&gt;<i>
</I>&gt;<i> def myFunction():
</I>&gt;<i>     return &quot;MyObject.myFunction()&quot;
</I>&gt;<i>
</I>&gt;<i> class MyObject:
</I>&gt;<i>
</I>&gt;<i>     def __init__(self):
</I>&gt;<i>         pass
</I>&gt;<i>
</I>&gt;<i> The following statement does not work.
</I>&gt;<i>
</I>&gt;<i> PythonImport mod_pytnon.MyObject
</I>&gt;<i>
</I>&gt;<i> Here's the error in error.log
</I>&gt;<i> [Tue Mar 27 13:07:56 2001] [error] directive_PythonImport: error import
</I>&gt;<i> mod_python.MyObject
</I>&gt;<i> TypeError: must assign list (not &quot;string&quot;) to slice
</I>&gt;<i>
</I>&gt;<i> Any help on this error msg?
</I>&gt;<i>
</I>&gt;<i> BTW, the first error line appears at start up... second appears upon
</I>&gt;<i> immediate shutdown... probably just a buffer thing, but I thought I'd
</I>share.
&gt;<i>
</I>&gt;<i> 3.  I also tried import a base module which worked fine.
</I>&gt;<i>
</I>&gt;<i> PythonImport string
</I>&gt;<i>
</I>&gt;<i> 4.  But when I created a copy of string.py and simply renamed it, it
</I>didn't
&gt;<i> work.
</I>&gt;<i>
</I>&gt;<i> PythonImport copyofstring
</I>&gt;<i>
</I>&gt;<i> Any thoughts on why mod_python appears to like some modules and not
</I>others?
&gt;<i>
</I>&gt;<i> Thanks in advance.
</I>&gt;<i>
</I>&gt;<i> Chris
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> -----Original Message-----
</I>&gt;<i> From: Chris Hagner [mailto:<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">CHagner at fool.com</A>]
</I>&gt;<i> Sent: Thursday, March 15, 2001 12:07 PM
</I>&gt;<i> To: 'Gregory (Grisha) Trubetskoy'
</I>&gt;<i> Cc: '<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython.org</A>'
</I>&gt;<i> Subject: RE: [mod_python] PythonImport failure
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thanks for the response.  For my tests, mypackage is a package named
</I>&gt;<i> 'toolkit' and the mymodule is a module named 'brandconfig'.
</I>&gt;<i>
</I>&gt;<i> Oh yeah, I'm doing this on Apache/1.3.19 (Win32) mod_python/2.7.1
</I>&gt;<i> Python/2.0.  I'm on Win2K (for development, sigh).
</I>&gt;<i>
</I>&gt;<i> INTERACTIVE SESSION TEST:
</I>&gt;<i> ******************************
</I>&gt;<i>
</I>&gt;<i> Here's my python interactive session... the module only contains a single
</I>&gt;<i> variable x.
</I>&gt;<i>
</I>&gt;<i> &gt;&gt;&gt; import toolkit.brandconfig
</I>&gt;<i> &gt;&gt;&gt; dir(toolkit.brandconfig)
</I>&gt;<i> ['__builtins__', '__doc__', '__file__', '__name__', 'x']
</I>&gt;<i> &gt;&gt;&gt; toolkit.brandconfig.x
</I>&gt;<i> 123
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i>
</I>&gt;<i> So, the module is importable in my python environment.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> APACHE PYTHONIMPORT TEST:
</I>&gt;<i> ******************************
</I>&gt;<i>
</I>&gt;<i> Just to be sure, I ran the apache test again.  Here's the httpd.conf
</I>entry.
&gt;<i> Nothing shocking.
</I>&gt;<i>
</I>&gt;<i> &lt;Directory &quot;D:/site/brand1/htdocs&quot;&gt;
</I>&gt;<i>    AddHandler python-program .py
</I>&gt;<i>    PythonHandler toolkit.publisher
</I>&gt;<i>    PythonDebug on
</I>&gt;<i>    PythonImport toolkit.brandconfig
</I>&gt;<i> &lt;/Directory&gt;
</I>&gt;<i>
</I>&gt;<i> Here's the response in the log upon starting apache.
</I>&gt;<i>
</I>&gt;<i>    [Thu Mar 15 11:39:10 2001] [error] directive_PythonImport: error
</I>&gt;<i> importing toolkit.brandconfig
</I>&gt;<i>
</I>&gt;<i> Same as before.  Now, just to be sure, I blew away the brandconfig.py file
</I>&gt;<i> (and the .pyc) so that it shouldn't even find it (just to see if I could
</I>get
&gt;<i> a different error if it didn't even exist).  Result: No change.  Same
</I>error
&gt;<i> in error.log.  Apparently, it's not even finding it.
</I>&gt;<i>
</I>&gt;<i> APACHE PYTHON SCRIPT TEST:
</I>&gt;<i> ******************************
</I>&gt;<i>
</I>&gt;<i> So, it wasn't importing it on start up.  How about a python script in
</I>&gt;<i> mod_python?
</I>&gt;<i>
</I>&gt;<i> Here's the code blurb...
</I>&gt;<i>
</I>&gt;<i> 	import foolkit.brandconfig
</I>&gt;<i>        out_string = &quot;foolkit.brandconfig.x: %s \n&quot;% foolkit.brandconfig.x
</I>&gt;<i>
</I>&gt;<i> Did it work?  yup, the page displayed
</I>&gt;<i>
</I>&gt;<i> 	foolkit.brandconfig.x: 123
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Yes, I have read through the documentation and my need is to initialize a
</I>&gt;<i> number of objects (i.e. dbconn pool) for use throughout my applications.
</I>&gt;<i> Now, I am using a custom handler, so I could simply have the handler do
</I>this
&gt;<i> initialization the first time it runs, but the PythonImport appeared to be
</I>a
&gt;<i> code-free way to achieve this goal.  Do you all think this is a case where
</I>I
&gt;<i> *really* need it?  If not, could someone share an example of when it
</I>really
&gt;<i> deserves to be used?
</I>&gt;<i>
</I>&gt;<i> Thanks again for the help.
</I>&gt;<i>
</I>&gt;<i> Chris
</I>&gt;<i>
</I>&gt;<i> -----Original Message-----
</I>&gt;<i> From: Gregory (Grisha) Trubetskoy [mailto:<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">grisha at verio.net</A>]
</I>&gt;<i> Sent: Thursday, March 15, 2001 11:26 AM
</I>&gt;<i> To: Chris Hagner
</I>&gt;<i> Cc: '<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython.org</A>'
</I>&gt;<i> Subject: Re: [mod_python] PythonImport failure
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Chris -
</I>&gt;<i>
</I>&gt;<i> Have you tried
</I>&gt;<i>
</I>&gt;<i> &gt;&gt;&gt; import mypackage.mymodule
</I>&gt;<i>
</I>&gt;<i> from an interactive Python session?
</I>&gt;<i>
</I>&gt;<i> Also, regarding PythonPath - if you read documentation carefully, you'll
</I>&gt;<i> notice that it says that no other directives have any effect at the time
</I>&gt;<i> PythonImport is executed.
</I>&gt;<i>
</I>&gt;<i> Generally, you should not use PythonImport unless you *really* need it,
</I>&gt;<i> which is almost never the case.
</I>&gt;<i>
</I>&gt;<i> Grisha
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Thu, 15 Mar 2001, Chris Hagner wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; Greetings,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I'm trying to get the PythonImport command to work.  Been through the
</I>&gt;<i> &gt; documentation, but it appears to want more than simply inserting
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;    PythonImport mypackage.mymodule
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; within my Directory tags in httd.conf.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; While mypackage.mymodule is under the standard python lib directory
</I>&gt;<i> &gt; (therefore should be found through the sys.path), the system spat out
</I>the
&gt;<i> &gt; following...
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     ...[error] directive_PythonImport: error importing
</I>mypackage.mymodule
&gt;<i> &gt;
</I>&gt;<i> &gt; I then moved the module to a different directory and appended that
</I>&gt;<i> directory
</I>&gt;<i> &gt; to the sys.path using the PythonPath command (just to see if that
</I>allowed
&gt;<i> it
</I>&gt;<i> &gt; to find the module).  No luck.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I've found a handful of posts from June and August of last year, but no
</I>&gt;<i> &gt; posted solutions to getting the PythonImport command to work correctly.
</I>&gt;<i> Of
</I>&gt;<i> &gt; course, there's a CVS commit with the comment &quot;PythonImport works now&quot;
</I>so
&gt;<i> &gt; I'm pretty sure it's me...
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; As a random test, I tried a standard module...
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;    PythonImport sys
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; which appeared to work (no error msg), but I'm not really confident that
</I>&gt;<i> &gt; this was a meaningful test.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Thanks in advance.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Chris
</I>&gt;<i> &gt; chagner _at_ fool _dot_ com
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Mod_python mailing list
</I>&gt;<i> &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> &gt; <A HREF="http://www.modpython.org/mailman/listinfo/mod_python">http://www.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i> &gt;
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://www.modpython.org/mailman/listinfo/mod_python">http://www.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://www.modpython.org/mailman/listinfo/mod_python">http://www.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I>
_______________________________________________
Mod_python mailing list
<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
<A HREF="http://www.modpython.org/mailman/listinfo/mod_python">http://www.modpython.org/mailman/listinfo/mod_python</A>

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008075.html">[mod_python] CGI to mod_python -- what's the best way?
</A></li>
	<LI>Next message: <A HREF="008071.html">[mod_python] subintrepreters
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8070">[ date ]</a>
              <a href="thread.html#8070">[ thread ]</a>
              <a href="subject.html#8070">[ subject ]</a>
              <a href="author.html#8070">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
