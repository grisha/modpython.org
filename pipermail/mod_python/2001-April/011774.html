<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Persistent variable again...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Persistent%20variable%20again...&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011776.html">
   <LINK REL="Next"  HREF="011777.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Persistent variable again...</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>nineclue at bigfoot.com</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Persistent%20variable%20again...&In-Reply-To="
       TITLE="[mod_python] Persistent variable again...">nineclue at bigfoot.com
       </A><BR>
    <I>Tue Apr 17 16:32:06 EST 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="011776.html">[mod_python] Persistent variable again...
</A></li>
        <LI>Next message: <A HREF="011777.html">[mod_python] Persistent variable again...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11774">[ date ]</a>
              <a href="thread.html#11774">[ thread ]</a>
              <a href="subject.html#11774">[ subject ]</a>
              <a href="author.html#11774">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Greetings...

I've posted somewhat long python program during development, which
may need pg module, postgres running with pyweb db created etc...

Here's short version, which don't work as I expected.

from mod_python import apache

session_data = {}
session_counter = 0

def handler(req):
        global session_data, session_counter

        if session_data.has_key('counter'):
                session_data['count'] = session_data['count'] + 1
        else:
                session_data['count'] = 0

        session_counter += 1
        req.write('&lt;HTML&gt;')
        req.write('Session data has %d items&lt;BR&gt;' % len(session_data))
        req.write('Counter : %02d&lt;BR&gt;' % session_data['count'])
        req.write('Alternative Counter : %02d&lt;BR&gt;' % session_counter)
        req.write('&lt;/HTML&gt;')
        return apache.OK

When I loaded the page and tried several reloads, session_data dictionary
variable is never increased and session_counter variable is increased
after several tries. What I expected was both variable increase at each
reload.

In my thoughts, dictionary variable is not supported and main interpreter
is created in each Apache processes, which is shared by subinterpreters.

Sorry for posting again, long message and my poor English.

Thanks in advance.


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011776.html">[mod_python] Persistent variable again...
</A></li>
	<LI>Next message: <A HREF="011777.html">[mod_python] Persistent variable again...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11774">[ date ]</a>
              <a href="thread.html#11774">[ thread ]</a>
              <a href="subject.html#11774">[ subject ]</a>
              <a href="author.html#11774">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
