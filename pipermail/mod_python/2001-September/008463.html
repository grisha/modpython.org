<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] threading issue on win2k
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20threading%20issue%20on%20win2k&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008460.html">
   <LINK REL="Next"  HREF="008470.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
<table border=0 width="100%"><tr><td valign="top">
   <H1>[mod_python] threading issue on win2k</H1>
    <B>Fran&#231;ois Lepoutre</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20threading%20issue%20on%20win2k&In-Reply-To="
       TITLE="[mod_python] threading issue on win2k">francoislepoutre at compuserve.com
       </A><BR>
    <I>Tue Sep 18 11:52:02 EST 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="008460.html">[mod_python] inithandler?
</A></li>
        <LI>Next message: <A HREF="008470.html">[mod_python] threading issue on win2k
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8463">[ date ]</a>
              <a href="thread.html#8463">[ thread ]</a>
              <a href="subject.html#8463">[ subject ]</a>
              <a href="author.html#8463">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

Just a few words to say that i discovered python and mod_python a few months ago.

Developping with these tools has been one of my greatest programming 
pleasure (the previous was smalltalk a century ago...).

However I have a nasty pb to solve which seems to be windows-specific and 
related to windows threading.

The configuration:
- W2000 server,
- python 2.1 + mxodbc,
- apache 1.3.20
- mod_python 2.7.4 for 2.1

Under heavy loads, the the code sequence that load odbc information
from the db engine (ASA by sybase) seems to break because of
thread concurrency.

The apache just breaks with log message:
&quot;c:\python21\lib\mod_python\apache.py&quot;, line 193, in Dispatch
 result=object(req)
IOError: Write failed, client closed connexion

When putting apache &quot;ThreadPerChild&quot; to 1 instead of 2 to 50,
the pb vanishes... and performance as well. (:

I'd like to know whether the pb is:
- apache related (is apache 2/win a potential cure?)
- python-related (can we improve our scripts with thread-caring code?)
- modpython-related (should we try to tweak apache.py?)

I know next to nothing to low-level os issues threads except that they
tend to get in the way of interperters like python...

Thanks in advance for any piece of advice.

Fran&#231;ois



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://mailman.modpython.org/pipermail/mod_python/attachments/20010918/5ec094da/attachment-0002.htm">http://mailman.modpython.org/pipermail/mod_python/attachments/20010918/5ec094da/attachment-0002.htm</A>
</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008460.html">[mod_python] inithandler?
</A></li>
	<LI>Next message: <A HREF="008470.html">[mod_python] threading issue on win2k
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8463">[ date ]</a>
              <a href="thread.html#8463">[ thread ]</a>
              <a href="subject.html#8463">[ subject ]</a>
              <a href="author.html#8463">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
