<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python]  Newbie question: Fieldstorage is empty in
  the second handler
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20%20Newbie%20question%3A%20Fieldstorage%20is%20empty%20in%0A%20%20the%20second%20handler&In-Reply-To=3FFEA8BF.2060408%40quirxi.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014772.html">
   <LINK REL="Next"  HREF="014782.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python]  Newbie question: Fieldstorage is empty in
  the second handler</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Daniel West</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20%20Newbie%20question%3A%20Fieldstorage%20is%20empty%20in%0A%20%20the%20second%20handler&In-Reply-To=3FFEA8BF.2060408%40quirxi.com"
       TITLE="[mod_python]  Newbie question: Fieldstorage is empty in
  the second handler">dwmp at opti.cgi.net
       </A><BR>
    <I>Fri Jan  9 10:08:28 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="014772.html">[mod_python] 
	Newbie question: Fieldstorage is empty in the second handler
</A></li>
        <LI>Next message: <A HREF="014782.html">[mod_python] Error using Session
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14774">[ date ]</a>
              <a href="thread.html#14774">[ thread ]</a>
              <a href="subject.html#14774">[ subject ]</a>
              <a href="author.html#14774">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
You're probably creating a FieldStorage in authenhandler() and then 
recreating the FieldStorage in your handler().  You're using a POST request 
so the when FieldStorage is created it reads the fields from the body of 
the request (GET requests put the variables in the header) via the 
req.read() method. Once you've read the body of the of a request, it cannot 
be read again.  So when your second FieldStorage is created, there is no 
body request data left to be read.

As it turns out, the req object you get in authenhandler() and handler() is 
the same object.  So when you create your first FieldStorage in 
authenhandler(), assign it to the req object and it will be available in 
your handler() function without having to recreate it again.

-Dan




At 02:12 PM 1/9/2004 +0100, you wrote:
&gt;<i>Hello,
</I>&gt;<i>
</I>&gt;<i>I have just started using mod_pyhon and have come to a problem I cannot 
</I>&gt;<i>find an solution for:
</I>&gt;<i>
</I>&gt;<i>In my html file there is a hidden input named PATH:
</I>&gt;<i>
</I>&gt;<i>&lt;FORM method=&quot;post&quot; action=&quot;/qwer/eval.py&quot;&gt;
</I>&gt;<i>&lt;INPUT type=&quot;hidden&quot; name=&quot;PATH&quot; value=&quot;/mhanel/physik/1b/2002-11-24&quot;/&gt;
</I>&gt;<i>...
</I>&gt;<i>&lt;/FORM&gt;
</I>&gt;<i>
</I>&gt;<i>When the form is submitted the PATH variable reaches the 
</I>&gt;<i>authenhandler(req) which I can give out to a file:
</I>&gt;<i>
</I>&gt;<i>PATH=/schools/HTL-Imst/innenausbau/teachers/mhanel/physik/1b/2002-11-24
</I>&gt;<i>
</I>&gt;<i>but after that it does not reach the following handler(req) function. It 
</I>&gt;<i>always raises an KeyError since the PATH variable does not exist in this 
</I>&gt;<i>function anymore !
</I>&gt;<i>Can anyone point me to the right direction ?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>cheers,
</I>&gt;<i>
</I>&gt;<i>Arno
</I>
</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014772.html">[mod_python] 
	Newbie question: Fieldstorage is empty in the second handler
</A></li>
	<LI>Next message: <A HREF="014782.html">[mod_python] Error using Session
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14774">[ date ]</a>
              <a href="thread.html#14774">[ thread ]</a>
              <a href="subject.html#14774">[ subject ]</a>
              <a href="author.html#14774">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
