<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] OutputFilter example
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20OutputFilter%20example&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011026.html">
   <LINK REL="Next"  HREF="011045.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
<table border=0 width="100%"><tr><td valign="top">
   <H1>[mod_python] OutputFilter example</H1>
    <B>Dan W.</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20OutputFilter%20example&In-Reply-To="
       TITLE="[mod_python] OutputFilter example">dwmp at opti.cgi.net
       </A><BR>
    <I>Mon Jan  5 01:41:02 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="011026.html">[mod_python] Newbie: how do I parse query strings and such?
</A></li>
        <LI>Next message: <A HREF="011045.html">[mod_python] OutputFilter example
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11028">[ date ]</a>
              <a href="thread.html#11028">[ thread ]</a>
              <a href="subject.html#11028">[ subject ]</a>
              <a href="author.html#11028">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
In the example of the output filter in the 3.1.2b documentation the last 
lines seem to indicate that filter.close() should only be called if 
filter.read() returns None.  I paired up an output filter this evening with 
the mod_python.psp handler and I was getting an empty string on the last 
filter.read() for every request.  The example code only calls 
filter.close() if the last read result is None.  Not calling filter.close() 
on the first call caused the output filter handler to be called a second 
time.  The second time around, it tried to read from filter.read() and got 
None, therefore calling filter.close() and ending the cycle.  Should this 
be normal behavior or should I be calling filter.close() when filter.read() 
returns empty string as well?

My server config:

     AddHandler mod_python .psp
     PythonHandler mod_python.psp | .psp
     PythonOutputFilter mypackage.mymodule TESTFILTER
     AddOutputFilter TESTFILTER .psp


-Dan

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011026.html">[mod_python] Newbie: how do I parse query strings and such?
</A></li>
	<LI>Next message: <A HREF="011045.html">[mod_python] OutputFilter example
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11028">[ date ]</a>
              <a href="thread.html#11028">[ thread ]</a>
              <a href="subject.html#11028">[ subject ]</a>
              <a href="author.html#11028">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
