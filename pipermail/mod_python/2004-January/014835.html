<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Startup Options
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Startup%20Options&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014832.html">
   <LINK REL="Next"  HREF="014836.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Startup Options</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Daniel West</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Startup%20Options&In-Reply-To="
       TITLE="[mod_python] Startup Options">dwmp at opti.cgi.net
       </A><BR>
    <I>Wed Jan 14 21:31:04 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="014832.html">[mod_python] mod_python/mod_include integration
</A></li>
        <LI>Next message: <A HREF="014836.html">[mod_python] Startup Options
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14835">[ date ]</a>
              <a href="thread.html#14835">[ thread ]</a>
              <a href="subject.html#14835">[ subject ]</a>
              <a href="author.html#14835">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
mod_python's PythonImport is a neat feature; it allows you to run a script 
when an Apache process fires up.  However, it doesn't work under 
VirtualHosts, only the main server config (mod_python 3.0 and up).  I need 
to support multiple users all who have their own VirtualHosts and all whom 
need PythonImport to setup database connections under their VirtualHost's 
interpreter.  The startup scripts and handler code are naturally located 
under each users' home directory for privacy.

My first attempt was simply to use PythonPath and PythonImport under each 
VirtualHost.  This is straight forward and simple.  Append to the path so 
that the Import can find the startup code in the home directory of each 
user and then issue the PythonImport for their startup script.  This 
doesn't work because PythonImport only works in the main server config.

My second attempt was to use a generic loader with PythonImport (located in 
site-packages) and then use PythonOption to pass it the path and actual 
startup script for each interpreter (VirtualHost).  This doesn't work 
because you can't access PythonOption variables until a request is made.

My third thought was to setup individual scripts for each VirtualHost in 
the site-packages directory with the startup information for each 
user.  The problem here is that the startup scripts have to be owned by the 
user and not world readable (their database passwords are in there).  This 
causes a read problem for server processes run as the user nobody.

I'm not sure how else to make this happen and it's very frustrating.  I 
have all the elements I need, I just can't find a way to put them together 
to accomplish a seemingly simple task.

It sure would be nice if PyhtonImport could be made to run under 
VirtualHosts.  Failing that, a way to get to a VirtualHost's PythonOptions 
would do.  Grisha?

-Dan

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014832.html">[mod_python] mod_python/mod_include integration
</A></li>
	<LI>Next message: <A HREF="014836.html">[mod_python] Startup Options
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14835">[ date ]</a>
              <a href="thread.html#14835">[ thread ]</a>
              <a href="subject.html#14835">[ subject ]</a>
              <a href="author.html#14835">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
