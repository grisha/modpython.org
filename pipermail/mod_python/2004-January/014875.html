<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Dies on Database connection?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Dies%20on%20Database%20connection%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014877.html">
   <LINK REL="Next"  HREF="014878.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Dies on Database connection?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Michael C. Neel</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Dies%20on%20Database%20connection%3F&In-Reply-To="
       TITLE="[mod_python] Dies on Database connection?">neel at mediapulse.com
       </A><BR>
    <I>Thu Jan 22 13:13:00 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="014877.html">[mod_python] Dies on Database connection?
</A></li>
        <LI>Next message: <A HREF="014878.html">[mod_python] Dies on Database connection?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14875">[ date ]</a>
              <a href="thread.html#14875">[ thread ]</a>
              <a href="subject.html#14875">[ subject ]</a>
              <a href="author.html#14875">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I don't see where you are fetching the data from the cursor, did you
snip that part?

Also, data is sent though req.write, you should return apache.OK or
other status as needed.

Are you new to mod_python and/or python?  IIRC there are some tutorials
on mp in the docs you may want to check out.

Mike


&gt;<i> -----Original Message-----
</I>&gt;<i> From: Ross M Karchner [mailto:<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">ross at karchner.com</A>] 
</I>&gt;<i> Sent: Thursday, January 22, 2004 9:38 AM
</I>&gt;<i> To: mod_python
</I>&gt;<i> Subject: [mod_python] Dies on Database connection?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i> I am working on porting some scripts over to mod_python, but 
</I>&gt;<i> my scripts 
</I>&gt;<i> die when I attempt to execute a MySQL query.
</I>&gt;<i> 
</I>&gt;<i> Here is a demonstration of the problem: 
</I>&gt;<i> <A HREF="http://localfeeds.com/near/display-rss.app">http://localfeeds.com/near/display-rss.app</A>
</I>&gt;<i> 
</I>&gt;<i> In mozilla, it loads a blank page, on Safari, I get a &quot;page 
</I>&gt;<i> returned no 
</I>&gt;<i> data&quot; error.
</I>&gt;<i> 
</I>&gt;<i> The code in display-rss.py is:
</I>&gt;<i> -------------------------------
</I>&gt;<i> DB = &quot;db&quot;
</I>&gt;<i> USER = &quot;user&quot;
</I>&gt;<i> PASS = &quot;password&quot;
</I>&gt;<i> 
</I>&gt;<i> import MySQLdb
</I>&gt;<i> 
</I>&gt;<i> def index(req):
</I>&gt;<i>    
</I>&gt;<i>     DB_CONN = MySQLdb.connect(db=DB, user=USER, passwd=PASS)
</I>&gt;<i>     C=DB_CONN.cursor()
</I>&gt;<i>     C.execute('select * from cities where id=17;')
</I>&gt;<i>     return &quot;Something&quot;
</I>&gt;<i> -------------------------------
</I>&gt;<i> 
</I>&gt;<i> I have also tried using the code from : 
</I>&gt;<i> <A HREF="http://www.modpython.org/FAQ/faqw.py?req=all#3.3">http://www.modpython.org/FAQ/faqw.py?req=all#3.3</A>
</I>&gt;<i> 
</I>&gt;<i> If I comment out the 'execute' statement, it works fine, the 
</I>&gt;<i> page that 
</I>&gt;<i> comes back displays the word &quot;Something:&quot;, as expected.
</I>&gt;<i> 
</I>&gt;<i> I am using  Apache/2.0.48
</I>&gt;<i> Python 2.3.3
</I>&gt;<i> mod_python 3.0.4
</I>&gt;<i> on FreeBSD 4.9
</I>&gt;<i> 
</I>&gt;<i> My Apache configuration is:
</I>&gt;<i> AddHandler python-program .app
</I>&gt;<i> PythonHandler mod_python.publisher
</I>&gt;<i> PythonAutoReload On
</I>&gt;<i> PythonDebug On
</I>&gt;<i> 
</I>&gt;<i> I suspect this will be related to the Apache/FreeBSD threading can of 
</I>&gt;<i> worms... but I'm hoping there is another answer. If anyone 
</I>&gt;<i> has a spare 
</I>&gt;<i> clue to offer, I'd really appreciate it.
</I>&gt;<i> 
</I>&gt;<i> Thanks!,
</I>&gt;<i> 
</I>&gt;<i> -Ross
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i> 
</I>
</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014877.html">[mod_python] Dies on Database connection?
</A></li>
	<LI>Next message: <A HREF="014878.html">[mod_python] Dies on Database connection?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14875">[ date ]</a>
              <a href="thread.html#14875">[ thread ]</a>
              <a href="subject.html#14875">[ subject ]</a>
              <a href="author.html#14875">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
