<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Dies on Database connection?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Dies%20on%20Database%20connection%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014875.html">
   <LINK REL="Next"  HREF="014880.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Dies on Database connection?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Petros Keshishian</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Dies%20on%20Database%20connection%3F&In-Reply-To="
       TITLE="[mod_python] Dies on Database connection?">pkeshishian at yahoo.com
       </A><BR>
    <I>Thu Jan 22 14:46:54 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="014875.html">[mod_python] Dies on Database connection?
</A></li>
        <LI>Next message: <A HREF="014880.html">[mod_python] Dies on Database connection?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14878">[ date ]</a>
              <a href="thread.html#14878">[ thread ]</a>
              <a href="subject.html#14878">[ subject ]</a>
              <a href="author.html#14878">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ross:

I had the same problem in mod_python with MySQL:
Namely the script was working from python shell, but
not in mod_python. I discovered that when I query only
one column  , e.g. 
C.execute('select id from cities where id=17;')
than it worked in mod_python as well, but when I try
for more that one column it dies. Unfortunatly I could
not find a solution and since my database is very
small I wrote a script that queries the database for
each column separately and then combines and returns
the result. This is not really a solution because it
does not address the problem and can slow down your
program significantly if your database is large.

Try to see whether your script works when you query
only one column. I am very intersted in the solution
of this problem.

-Petros


= = = Original message = = =

Hello,

I am working on porting some scripts over to
mod_python, but my scripts 
die when I attempt to execute a MySQL query.

Here is a demonstration of the problem: 
<A HREF="http://localfeeds.com/near/display-rss.app">http://localfeeds.com/near/display-rss.app</A>

In mozilla, it loads a blank page, on Safari, I get a
&quot;page returned no 
data&quot; error.

The code in display-rss.py is:
-------------------------------
DB = &quot;db&quot;
USER = &quot;user&quot;
PASS = &quot;password&quot;

import MySQLdb

def index(req):
   
    DB_CONN = MySQLdb.connect(db=DB, user=USER,
passwd=PASS)
    C=DB_CONN.cursor()
    C.execute('select * from cities where id=17;')
    return &quot;Something&quot;
-------------------------------

I have also tried using the code from : 
<A HREF="http://www.modpython.org/FAQ/faqw.py?req=all#3.3">http://www.modpython.org/FAQ/faqw.py?req=all#3.3</A>

If I comment out the 'execute' statement, it works
fine, the page that 
comes back displays the word &quot;Something:&quot;, as
expected.

I am using  Apache/2.0.48
Python 2.3.3
mod_python 3.0.4
on FreeBSD 4.9

My Apache configuration is:
AddHandler python-program .app
PythonHandler mod_python.publisher
PythonAutoReload On
PythonDebug On

I suspect this will be related to the Apache/FreeBSD
threading can of 
worms... but I'm hoping there is another answer. If
anyone has a spare 
clue to offer, I'd really appreciate it.

Thanks!,

-Ross
_______________________________________________
Mod_python mailing list
<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>

___________________________________________________________
Sent by ePrompter, the premier email notification
software.
Free download at <A HREF="http://www.ePrompter.com.">http://www.ePrompter.com.</A>

__________________________________
Do you Yahoo!?
Yahoo! SiteBuilder - Free web site building tool. Try it!
<A HREF="http://webhosting.yahoo.com/ps/sb/">http://webhosting.yahoo.com/ps/sb/</A>
</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014875.html">[mod_python] Dies on Database connection?
</A></li>
	<LI>Next message: <A HREF="014880.html">[mod_python] Dies on Database connection?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14878">[ date ]</a>
              <a href="thread.html#14878">[ thread ]</a>
              <a href="subject.html#14878">[ subject ]</a>
              <a href="author.html#14878">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
