<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Using Templates
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Using%20Templates&In-Reply-To=88e286470707112022s2b34cf6qded56f8eca38c523%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024002.html">
   <LINK REL="Next"  HREF="024004.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Using Templates</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>ron banks</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Using%20Templates&In-Reply-To=88e286470707112022s2b34cf6qded56f8eca38c523%40mail.gmail.com"
       TITLE="[mod_python] Using Templates">rebcoair at cfl.rr.com
       </A><BR>
    <I>Thu Jul 12 07:52:07 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="024002.html">[mod_python] Using Templates
</A></li>
        <LI>Next message: <A HREF="024004.html">[mod_python] Using Templates
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24003">[ date ]</a>
              <a href="thread.html#24003">[ thread ]</a>
              <a href="subject.html#24003">[ subject ]</a>
              <a href="author.html#24003">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Graham,

Thanks for the reply. I do realize that the '=' is wrong. When removed
the browser just hangs without reporting errors. What I am not getting
is how to properly set the 'strDate' variable in:

----------------Month.tmpl------------------
&lt;%=loadMonth(req, strDate)%&gt;
                  ^^^^^^^

with this function:
---------------setStrDate-------------------
def setStrDate(req):
	session = Session.Session(req)
	if session.is_new():
		strDate = &quot;&quot;
	else:
		strDate = getSessionVariable(session, 'currDate')
	req.content_type = 'text/html'
	tmpl = psp.PSP(req, filename='Month.tmpl')
	tmpl.run(vars = {'strDate': strDate})
	return &quot;&quot;

called from:
----------------Month.psp------------------
&lt;%
from mod_python import apache, psp
from loadCalendar import setStrDate
%&gt;
&lt;%=setStrDate(req)%&gt;

How should this be done? This is a first experiment for me utilizing
templates. What I am trying to do is to set a session variable
'currDate' with a new date through ajax methods and load a page with the
same loadMonth function which builds a calendar populated with records
from a database backend. I have worked out almost everything else and
have only a couple of problems before I can move forward.

I either need to figure out how to utilize a template system as
described which I think might be preferable in this situation or
possibly reload the same page letting the loadMonth function pick up the
changed session variable and building the page based on the new date.
I'm not sure how to reload the page. Should I use some type of redirect
from the server side or javascript from the client side? I have only
started to experiment with these methods. I can't seem to get the
redirect to do anything yet.  With the javascript reload the session
variable seems to go away. Is this because of the new request or
something? Maybe a better method is to control session information in
the database and just use javascript. I don't know what differences in
speed would be. What do you think?

On Thu, 2007-07-12 at 13:22 +1000, Graham Dumpleton wrote:
&gt;<i> On 11/07/07, ron banks &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">rebcoair at cfl.rr.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt;   File &quot;/var/www/html/TaskMaster/Month.tmpl&quot;, line 22
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     req.write(&quot;&quot;&quot;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &quot;&quot;&quot;,0); req.write(str(loadPan()),0); req.write(&quot;&quot;&quot;
</I>&gt;<i> &gt; &quot;&quot;&quot;,0); req.write(str(loadMonth(req, =strDate)),0); req.write(&quot;&quot;&quot;
</I>&gt;<i> 
</I>&gt;<i> Bad syntax caused by '=' before 'strDate' when used as argument to
</I>&gt;<i> function. Everything between the '&lt;%=' and '%&gt;' must be valid Python
</I>&gt;<i> code. You should not be sticking additional '=' in front of variable
</I>&gt;<i> references.
</I>&gt;<i> 
</I>&gt;<i> Graham
</I>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024002.html">[mod_python] Using Templates
</A></li>
	<LI>Next message: <A HREF="024004.html">[mod_python] Using Templates
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24003">[ date ]</a>
              <a href="thread.html#24003">[ thread ]</a>
              <a href="subject.html#24003">[ subject ]</a>
              <a href="author.html#24003">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
