<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] mod_python 3.3.1 memory leak?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python%203.3.1%20memory%20leak%3F&In-Reply-To=729753ee0707030537s79ffd477ve5b03ed155a8eda4%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023979.html">
   <LINK REL="Next"  HREF="023982.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] mod_python 3.3.1 memory leak?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python%203.3.1%20memory%20leak%3F&In-Reply-To=729753ee0707030537s79ffd477ve5b03ed155a8eda4%40mail.gmail.com"
       TITLE="[mod_python] mod_python 3.3.1 memory leak?">graham.dumpleton at gmail.com
       </A><BR>
    <I>Tue Jul  3 19:04:14 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023979.html">[mod_python] mod_python 3.3.1 memory leak?
</A></li>
        <LI>Next message: <A HREF="023982.html">[mod_python] mod_python 3.3.1 memory leak?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23981">[ date ]</a>
              <a href="thread.html#23981">[ thread ]</a>
              <a href="subject.html#23981">[ subject ]</a>
              <a href="author.html#23981">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 03/07/07, yubing &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">trueice at gmail.com</A>&gt; wrote:
&gt;<i> Anyhow, it's clear that ap_rflush is the root cause of this memory leak,
</I>&gt;<i> maybe we should find a new API for this (maybe we should also add a new
</I>&gt;<i> method to the request_object ).
</I>
It is not just ap_rflush() but also ap_rwrite(), as it is also using
the request pool.

To avoid the problem would mean creating a separate pool just for the
one operation and for the buckets to be allocated from that, with the
pool destroyed at the end of the call.

Unfortunately it isn't perhaps quite as simple as that though. This is
because one can only use a separate pool if you know the buckets would
be used up and no longer required after the call. When doing a flush
this may be the case, but need to check. Definitely not the case if
not doing a flush though.

Graham
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023979.html">[mod_python] mod_python 3.3.1 memory leak?
</A></li>
	<LI>Next message: <A HREF="023982.html">[mod_python] mod_python 3.3.1 memory leak?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23981">[ date ]</a>
              <a href="thread.html#23981">[ thread ]</a>
              <a href="subject.html#23981">[ subject ]</a>
              <a href="author.html#23981">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
