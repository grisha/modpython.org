<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] mod_python on FreeBSD 6.1 gives Syntax error -
	mod_python.so: unsupported file layout
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python%20on%20FreeBSD%206.1%20gives%20Syntax%20error%20-%0A%09mod_python.so%3A%20unsupported%20file%20layout&In-Reply-To=5aaed53f0707020517i555ef210gc016626de6ebe2b%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023954.html">
   <LINK REL="Next"  HREF="023957.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] mod_python on FreeBSD 6.1 gives Syntax error -
	mod_python.so: unsupported file layout</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Anthony Raj</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20mod_python%20on%20FreeBSD%206.1%20gives%20Syntax%20error%20-%0A%09mod_python.so%3A%20unsupported%20file%20layout&In-Reply-To=5aaed53f0707020517i555ef210gc016626de6ebe2b%40mail.gmail.com"
       TITLE="[mod_python] mod_python on FreeBSD 6.1 gives Syntax error -
	mod_python.so: unsupported file layout">anthony_raj at persistent.co.in
       </A><BR>
    <I>Mon Jul  2 08:31:22 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023954.html">[mod_python] mod_python on FreeBSD 6.1 gives Syntax error -
	mod_python.so: unsupported file layout
</A></li>
        <LI>Next message: <A HREF="023957.html">[mod_python] Translation toolkit.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23956">[ date ]</a>
              <a href="thread.html#23956">[ thread ]</a>
              <a href="subject.html#23956">[ subject ]</a>
              <a href="author.html#23956">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Jeff,

Your mail could not have come at a better timing.

Have been using the link that you mentioned in your mail since morning.


The constraint that we are working with is 
1. Not to use the default install locations.
2. Specify a install prefix for apache and mod_python

Have tried to use DESTDIR=/usr/local/apache-new

(<A HREF="http://www.freebsd.org/doc/en_US.ISO8859-1/books/porters-handbook/porting-p">http://www.freebsd.org/doc/en_US.ISO8859-1/books/porters-handbook/porting-p</A>
refix.html)

prompt&gt; cd /usr/ports/www/apache22
prompt&gt; make

Basically since we are working on the production machine directly,
Its getting a bit difficult to know if its going to overwrite the
Existing installations (which is thru ports).

Question: How do I set a new installation directory for apache22 ?

Thanks in Advance ,
Cheers,
Anthony

-----Original Message-----
From: Jeff Hinrichs - DM&amp;T [mailto:<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">dundeemt at gmail.com</A>] 
Sent: Monday, July 02, 2007 5:48 PM
To: Anthony Raj
Cc: Graham Dumpleton; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython.org</A>;
<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">rajeev.nair at gridstoneresearch.com</A>
Subject: Re: [mod_python] mod_python on FreeBSD 6.1 gives Syntax error -
mod_python.so: unsupported file layout

Anthony,

Ports are better than RPMs.  All of your questions are answered by the
FreeBSD handbook,
<A HREF="http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/ports-using.html">http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/ports-using.html</A>
(hint: use portsnap)

Specific questions about FreeBSD would be best asked on that groups
list, but to get you started, it takes no special configuration or
flags to build everything you need from ports.  My other hint would be
portupgrade/portinstall  <A HREF="http://wiki.freebsd.org/portupgrade.">http://wiki.freebsd.org/portupgrade.</A>

-Jeff

On 7/2/07, Anthony Raj &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">anthony_raj at persistent.co.in</A>&gt; wrote:
&gt;<i> Hi Graham / Jeff,
</I>&gt;<i>
</I>&gt;<i> Yes have got the required Free BSD ports now -
</I>&gt;<i>
</I>&gt;<i> Apache 2.2.4
</I>&gt;<i> <A HREF="http://cvsweb.freebsd.org/ports/www/apache22/apache22.tar.gz?tarball=1">http://cvsweb.freebsd.org/ports/www/apache22/apache22.tar.gz?tarball=1</A>
</I>&gt;<i>
</I>&gt;<i> Python 2.4.2 / 2.4.4
</I>&gt;<i> <A HREF="http://cvsweb.freebsd.org/ports/lang/python24/python24.tar.gz?tarball=1">http://cvsweb.freebsd.org/ports/lang/python24/python24.tar.gz?tarball=1</A>
</I>&gt;<i>
</I>&gt;<i> mod_python 3.3.1
</I>&gt;<i>
</I><A HREF="http://cvsweb.freebsd.org/ports/www/mod_python3/mod_python3.tar.gz?tarball=1">http://cvsweb.freebsd.org/ports/www/mod_python3/mod_python3.tar.gz?tarball=1</A>
&gt;<i>
</I>&gt;<i> apr 1.2.8
</I>&gt;<i> <A HREF="http://cvsweb.freebsd.org/ports/devel/apr/apr.tar.gz?tarball=1">http://cvsweb.freebsd.org/ports/devel/apr/apr.tar.gz?tarball=1</A>
</I>&gt;<i>
</I>&gt;<i> ----
</I>&gt;<i>
</I>&gt;<i> I think we should be done after installation from ports.
</I>&gt;<i> Need to figure out the correct installation steps.
</I>&gt;<i>
</I>&gt;<i> Thanks for your inputs so far !
</I>&gt;<i>
</I>&gt;<i> Cheers,
</I>&gt;<i> Anthony
</I>&gt;<i>
</I>&gt;<i> -----Original Message-----
</I>&gt;<i> From: Graham Dumpleton [mailto:<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>]
</I>&gt;<i> Sent: Monday, July 02, 2007 10:52 AM
</I>&gt;<i> To: Anthony Raj
</I>&gt;<i> Cc: <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython.org</A>; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">rajeev.nair at gridstoneresearch.com</A>
</I>&gt;<i> Subject: Re: [mod_python] mod_python on FreeBSD 6.1 gives Syntax error -
</I>&gt;<i> mod_python.so: unsupported file layout
</I>&gt;<i>
</I>&gt;<i> Have you tried what Jeff suggested, which was to use the BSD ports
</I>&gt;<i> versions rather than build directly from your own source code?
</I>&gt;<i>
</I>&gt;<i> Graham
</I>&gt;<i>
</I>&gt;<i> On 02/07/07, Anthony Raj &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">anthony_raj at persistent.co.in</A>&gt; wrote:
</I>&gt;<i> &gt; Hi Graham,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; It ran correctly with the following configuration -
</I>&gt;<i> &gt; No errors were detected while the linking any lib.
</I>&gt;<i> &gt; Need to look carefully at the error generated.
</I>&gt;<i> &gt; AFAIK , it got installed without lib related errors.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; -------
</I>&gt;<i> &gt; 1.      Install apr 1.2.8
</I>&gt;<i> &gt; Install Steps :
</I>&gt;<i> &gt; ./configure --prefix=/local/apr-util-httpd --with-apr=/local/apr-httpd
</I>&gt;<i> &gt; make
</I>&gt;<i> &gt; make install
</I>&gt;<i> &gt; ----
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 2. Install apr-util 1.2.8
</I>&gt;<i> &gt;         - apr-util has bug for 64 bit Arch. Need to patch it first.
</I>&gt;<i> &gt; <A HREF="http://www.weblogs.uhi.ac.uk/sm00ay/?p=196">http://www.weblogs.uhi.ac.uk/sm00ay/?p=196</A>
</I>&gt;<i> &gt; <A HREF="http://issues.apache.org/bugzilla/show_bug.cgi?id=28205">http://issues.apache.org/bugzilla/show_bug.cgi?id=28205</A>
</I>&gt;<i> &gt; Install Steps :
</I>&gt;<i> &gt; ./configure --prefix=/local/apr-httpd
</I>&gt;<i> &gt; make
</I>&gt;<i> &gt; make install
</I>&gt;<i> &gt; ----
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 3.      Install httpd 2.2.4
</I>&gt;<i> &gt; Install Steps :
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;         ./configure --prefix=/local/apache-ast
</I>&gt;<i> --with-apr=/local/apr-httpd/
</I>&gt;<i> &gt; --with-apr-util=/local/apr-util-httpd/
</I>&gt;<i> &gt; make
</I>&gt;<i> &gt; make install
</I>&gt;<i> &gt; ----
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 4. Install mod_python 3.3.1
</I>&gt;<i> &gt;         Install Steps:
</I>&gt;<i> &gt;         ./configure --with-apxs=/local/apache-ast/bin/apxs
</I>&gt;<i> &gt; make
</I>&gt;<i> &gt; make install
</I>&gt;<i> &gt; ----
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Cheers,
</I>&gt;<i> &gt; Anthony
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; -----Original Message-----
</I>&gt;<i> &gt; From: Graham Dumpleton [mailto:<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">graham.dumpleton at gmail.com</A>]
</I>&gt;<i> &gt; Sent: Sunday, July 01, 2007 7:04 AM
</I>&gt;<i> &gt; To: <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">anthony_raj at persistent.co.in</A>
</I>&gt;<i> &gt; Cc: <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython.org</A>; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">rajeev.nair at gridstoneresearch.com</A>
</I>&gt;<i> &gt; Subject: Re: [mod_python] mod_python on FreeBSD 6.1 gives Syntax error -
</I>&gt;<i> &gt; mod_python.so: unsupported file layout
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Usually these problems are caused through using the mod_python.so with
</I>&gt;<i> &gt; a version of Apache which is different to the version of Apache that
</I>&gt;<i> &gt; mod_python was compiled against. This can especially occur where you
</I>&gt;<i> &gt; have a standard OS installation of Apache but you try and use an
</I>&gt;<i> &gt; alternate version under /usr/local/ or elsewhere.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; What options did you use with 'configure' when you ran it? Did the
</I>&gt;<i> &gt; compile line correctly pick up includes and libraries from the version
</I>&gt;<i> &gt; under /usr/local?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Graham
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On 01/07/07, Anthony Raj &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">anthony_raj at persistent.co.in</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; Hi Folks,
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Have come to the community with a new issue with regard to installing
</I>&gt;<i> &gt; mod_python on FreeBSD.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Eariler had installed apache/mod_python on
</I>&gt;<i> &gt; &gt; Suse 10 / 64 Arch.
</I>&gt;<i> &gt; &gt; - Apache 2.2.4
</I>&gt;<i> &gt; &gt; - mod_python 3.3.1
</I>&gt;<i> &gt; &gt; - apr 1.2.8
</I>&gt;<i> &gt; &gt; - apr-util 1.2.8
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; problems -
</I>&gt;<i> &gt; &gt; The issue with mod_python being installed in to locations.
</I>&gt;<i> &gt; &gt; Managed to get it working on this setup sucessfully.
</I>&gt;<i> &gt; &gt; ---
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Now I've installed the same configuration on
</I>&gt;<i> &gt; &gt; Free BSD 6.1 32 Arch.
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt; &gt; FreeBSD perputo3.inetu.net 6.1-RELEASE-p3 FreeBSD 6.1-RELEASE-p3 #107:
</I>&gt;<i> Mon
</I>&gt;<i> &gt; Nov  6 20:31:10 EST 2006
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">root at turnip.inetu.org</A>:/usr/obj/usr/src/sys/INU6
</I>&gt;<i> &gt; i386
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Installation was completed successfully for all the above modules.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; But after adding the required configuration line -
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;
</I>&gt;<i> &gt; &gt; LoadModule python_module modules/mod_python.so
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; And restarting apache , it throws the following error
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt; &gt; /usr/local/apache-ast&gt;./bin/apachectl start
</I>&gt;<i> &gt; &gt; httpd: Syntax error on line 54 of
</I>/usr/local/apache-ast/conf/httpd.conf:
&gt;<i> &gt; Cannot load /usr/local/apache-ast/modules/mod_python.so into server:
</I>&gt;<i> &gt; /usr/local/apache-ast/modules/mod_python.so: unsupported file layout
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; The required mod_python.so appears to be installed in
</I>&gt;<i> &gt; &gt; /usr/local/apache-ast/modules directory.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt; &gt; /usr/local/apache-ast&gt;ls -l modules/
</I>&gt;<i> &gt; &gt; total 1738
</I>&gt;<i> &gt; &gt; -rw-r--r--  1 root  wheel     8951 Jun 29 10:19 httpd.exp
</I>&gt;<i> &gt; &gt; -rwxr-xr-x  1 root  wheel  1739997 Jun 29 10:50 mod_python.so
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Have also added the following lines in the config file -
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt; &gt; &lt;Directory &quot;/usr/local/apache-ast/htdocs&quot;&gt;
</I>&gt;<i> &gt; &gt;       AddHandler mod_python .py
</I>&gt;<i> &gt; &gt;       PythonHandler mod_python.publisher
</I>&gt;<i> &gt; &gt;       PythonDebug On
</I>&gt;<i> &gt; &gt; &lt;/Directory&gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Any one knows if there is any bug with mod_python installation on
</I>&gt;<i> FreeBSD
</I>&gt;<i> &gt; 6.1. Please let me know in case you there is anything that is missing in
</I>&gt;<i> the
</I>&gt;<i> &gt; install steps.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Or is there any port of mod_python for Free BSD that needs to be used
</I>&gt;<i> &gt; here.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Please let me know your advice on the same.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; cheers,
</I>&gt;<i> &gt; &gt; Anthony
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; DISCLAIMER
</I>&gt;<i> &gt; &gt; ==========
</I>&gt;<i> &gt; &gt; This e-mail may contain privileged and confidential information which
</I>is
&gt;<i> &gt; the property of Persistent Systems Pvt. Ltd. It is intended only for the
</I>&gt;<i> use
</I>&gt;<i> &gt; of the individual or entity to which it is addressed. If you are not the
</I>&gt;<i> &gt; intended recipient, you are not authorized to read, retain, copy, print,
</I>&gt;<i> &gt; distribute or use this message. If you have received this communication
</I>in
&gt;<i> &gt; error, please notify the sender and delete all copies of this message.
</I>&gt;<i> &gt; Persistent Systems Pvt. Ltd. does not accept any liability for virus
</I>&gt;<i> &gt; infected mails.
</I>&gt;<i> &gt; &gt; _______________________________________________
</I>&gt;<i> &gt; &gt; Mod_python mailing list
</I>&gt;<i> &gt; &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> &gt; &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; DISCLAIMER
</I>&gt;<i> &gt; ==========
</I>&gt;<i> &gt; This e-mail may contain privileged and confidential information which is
</I>&gt;<i> the property of Persistent Systems Pvt. Ltd. It is intended only for the
</I>use
&gt;<i> of the individual or entity to which it is addressed. If you are not the
</I>&gt;<i> intended recipient, you are not authorized to read, retain, copy, print,
</I>&gt;<i> distribute or use this message. If you have received this communication in
</I>&gt;<i> error, please notify the sender and delete all copies of this message.
</I>&gt;<i> Persistent Systems Pvt. Ltd. does not accept any liability for virus
</I>&gt;<i> infected mails.
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> DISCLAIMER
</I>&gt;<i> ==========
</I>&gt;<i> This e-mail may contain privileged and confidential information which is
</I>the property of Persistent Systems Pvt. Ltd. It is intended only for the use
of the individual or entity to which it is addressed. If you are not the
intended recipient, you are not authorized to read, retain, copy, print,
distribute or use this message. If you have received this communication in
error, please notify the sender and delete all copies of this message.
Persistent Systems Pvt. Ltd. does not accept any liability for virus
infected mails.
&gt;<i>
</I>

DISCLAIMER
==========
This e-mail may contain privileged and confidential information which is the property of Persistent Systems Pvt. Ltd. It is intended only for the use of the individual or entity to which it is addressed. If you are not the intended recipient, you are not authorized to read, retain, copy, print, distribute or use this message. If you have received this communication in error, please notify the sender and delete all copies of this message. Persistent Systems Pvt. Ltd. does not accept any liability for virus infected mails.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023954.html">[mod_python] mod_python on FreeBSD 6.1 gives Syntax error -
	mod_python.so: unsupported file layout
</A></li>
	<LI>Next message: <A HREF="023957.html">[mod_python] Translation toolkit.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23956">[ date ]</a>
              <a href="thread.html#23956">[ thread ]</a>
              <a href="subject.html#23956">[ subject ]</a>
              <a href="author.html#23956">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
