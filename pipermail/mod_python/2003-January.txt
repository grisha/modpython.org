From vmanera at manord.com  Thu Jan  2 11:09:59 2003
From: vmanera at manord.com (Manera, Villiam)
Date: Fri Jan  9 21:47:11 2004
Subject: I: [mod_python] problem with file download in mod-python 3.0.1
Message-ID: <52DC70C1C1575C418CB033523A29CF140E05AF@exchange2000.manord.com>

Da: Manera, Villiam 
Inviato: gioved? 2 gennaio 2003 11.08
A: 'Gregory (Grisha) Trubetskoy'
Oggetto: R: [mod_python] problem with file download in mod-python 3.0.1


The problem is in python 2.2, Christopher Sean Hilton [chris@vindaloo.com]
wrote:

His problem is that python 2.2 does not include the __methods__ attribute 
for classes but the publisher.py code which actually handles the file inload

depends on it. If he downgrades from python 2.2 to python 2.1 he'll have the

__methods__ attribute of the file class. Someone needs to address this in 
the mod_python code however:

        for m in field.file.__methods__:
            self.__dict__[m] = getattr(field.file, m)

        self.headers = field.headers
        self.filename = field.filename

doesn't work in python 2.2 because __methods__ doesn't exist. The code 
appears to be trying to make local copies of all of the methods in the 
object that gets passed to the user. I had this problem in Unix (FreeBSD) 
two weeks ago and downgrading my python from 2.2 to 2.1 solved it. A google 
search on python, __methods__, 2.1 and 2.2 will yield more information.

Chris

after this John D. Garberson [john.garberson@nexos.com] wrote:
Having to downgrade seems a bit extreme [;-)

I don't know much about the publisher.py module, never having used it.
But if you do this import:

------------------------------------------------------------------------

from types import BuiltinMethodType

------------------------------------------------------------------------

then this function:

------------------------------------------------------------------------

def sim_methods(obj):
    return filter(lambda s, t=obj:
           type(getattr(t, s)) == BuiltinMethodType,
                                             dir(obj))

--------------------------------------------------------------------------

works under both 2.0 and 2.2.1 (I don't have a 2.1 any more) and delivers
the list of methods that it seems you want, looking at the publisher.py
source.  If you're not a fan of the functional programming approach, then
a list comprehension:

-----------------------------------------------------------------------

def sim_methods(obj):
    return [m for m in dir(obj)
                   if type(getattr(obj, m)) == BuiltinMethodType]

-----------------------------------------------------------------------

works just as well.

You could just replace the 'for m in field.file.__methods__:'

with

'for m in sim_methods(field.file):'

Hope this helps.

John
==============================================================
This work fine and I don't investigate any more from more elegant solution
I'm not so good in python!!

Villiam M.
-----Messaggio originale-----
Da: Gregory (Grisha) Trubetskoy [mailto:grisha@modpython.org]
Inviato: venerd? 20 dicembre 2002 22.35
A: Manera, Villiam
Cc: Mod_python@modpython.org
Oggetto: Re: [mod_python] problem with file download in mod-python 3.0.1



I must be missing something obvious, but without testing it and just by
looking at the code, I'm not sure I understand what the benefit is of
filtering out BuiltinMethodType, as opposed to just using straight
dir(obj).

The above might be a moot point since just as Brian Hawthorne suggested
I'm not sure why we don't need the File class at all and am in the process
of trying to fish out any memories from my tired brain about how it came
about in the fist place....

Grisha

On Thu, 12 Dec 2002, Manera, Villiam wrote:

> I'm testing mod-python 3.0.1 with apache 2.0.43 and python 2.2.2
>
> I've founded a older problem in file download (from python 2.1 to 2.2)
>
> the workaround is still the same:
>
> in publisher.py:
>
>  class File:
>      """ Like a file, but also has headers and filename
>      """
>      def __init__(self, field):
>          # steal all the file-like methods
>          for m in dir(field.file):
> 		 self.__dict__[m] = getattr(field.file, m)
>
>          self.headers = field.headers
>          self.filename = field.filename
> ======================workaround
> ==============================================
>  class File:
>      """ Like a file, but also has headers and filename
>      """
>      def __init__(self, field):
>          # steal all the file-like methods
>          #for m in dir(field.file):    #dont' work
>          for m in self.sim_methods(field.file):
>              self.__dict__[m] = getattr(field.file, m)
>
>          self.headers = field.headers
>          self.filename = field.filename
>
> 	#new--------
>      def sim_methods(self,obj):
>          from types import BuiltinMethodType
>          return filter(lambda s, t=obj:
>             type(getattr(t, s)) == BuiltinMethodType, dir(obj))
>
>
> I hope it will be put in place
>
> regards
>
> Villiam Manera
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>



_______________________________________________
Mod_python mailing list
Mod_python@modpython.org
http://www.modpython.org/mailman/listinfo/mod_python


From Markus.Burrer at embedit.de  Thu Jan  2 17:24:02 2003
From: Markus.Burrer at embedit.de (Markus Burrer)
Date: Fri Jan  9 21:47:11 2004
Subject: [mod_python] Installing Python for Apache
Message-ID: <3E1467A2.2020603@embedit.de>

Hi,
i try to install mod_python, but when i add LoadModule to the http.conf 
i get the error message, that Apache could not found the module, but the 
path and the filename are ok and the file is in the modules dir.
I'm using Apache 2.0.43, Python 2.2.2 and python2.2.2-apache2.0.43.zip

Any idea?

Thx for any help and a happy new year

Markus


From wweng at kencast.com  Thu Jan  2 12:10:08 2003
From: wweng at kencast.com (Wei Weng)
Date: Fri Jan  9 21:47:11 2004
Subject: [mod_python] How to build mod_python on Windows NT?
Message-ID: <3E147270.6010409@kencast.com>

I am using Windows NT, Apache2, VC++ 5.0.

Couldn't find any documentation on the procedures in the source zip file 
and googling didn't help much either.

Thanks



From dylanvaughn at yahoo.com  Thu Jan  2 09:54:55 2003
From: dylanvaughn at yahoo.com (Dylan Vaughn)
Date: Fri Jan  9 21:47:11 2004
Subject: [mod_python] linking installation problem
Message-ID: <20030102175455.64670.qmail@web40708.mail.yahoo.com>

Hello all, 

I'm trying to install mod_python and am running into
some errors - I'm running Red Hat Linux 7.3 and I've
already installed:

python 2.2.2 (from source, installed in
/usr/local/bin)
apache 2.0.43 (from source, installed in
/usr/local/apache2)

This is what I'm telling configure:

./configure \
--with-apxs=/usr/local/apache2/bin/apxs \
--with-python=/usr/local/bin/python2.2

which works fine, but when I do make I get at the end:

...lots of other stuff...:
/usr/local/apache2/build/libtool --silent --mode=link
gcc -o mod_python.la
-I/usr/local/src/mod_python-3.0.1/src/include
-I/usr/local/apache2/include
-I/usr/local/include/python2.2  -rpath
/usr/local/apache2/modules -module -avoid-version 
hlistobject.lo hlist.lo filterobject.lo connobject.lo
serverobject.lo util.lo tableobject.lo
requestobject.lo _apachemodule.lo mod_python.lo
-L/usr/local/lib/python2.2/config -Xlinker
-export-dynamic -lm -lpython2.2 -ldl -lpthread -lutil
-lm

*** Warning: This library needs some functionality
provided by -lpython2.2.
*** I have the capability to make that library
automatically link in when
*** you link to this library.  But I can only do this
if you have a
*** shared version of the library, which you do not
appear to have.

*** Warning: libtool could not satisfy all declared
inter-library
*** dependencies of module mod_python.  Therefore,
libtool will create
*** a static module, that should work as long as the
dlopening
*** application is linked with the -dlopen flag.

Now su and make install
  (or, if you only want to perform a partial install,
   you can use make install_dso and make
install_py_lib)

make[1]: Leaving directory
`/usr/local/src/mod_python-3.0.1/src'

and when I try make install I get:

...lots of other stuff...:
/usr/local/apache2/build/libtool --silent
--mode=compile gcc   -DAP_HAVE_DESIGNATED_INITIALIZER
-DLINUX=2 -D_REENTRANT -D_XOPEN_SOURCE=500
-D_BSD_SOURCE -D_SVID_SOURCE -D_GNU_SOURCE -g -O2
-pthread -I/usr/local/apache2/include
-I/usr/local/src/mod_python-3.0.1/src/include
-I/usr/local/apache2/include
-I/usr/local/include/python2.2  -c -o hlistobject.lo
hlistobject.c && touch hlistobject.slo
/usr/local/apache2/build/libtool --silent --mode=link
gcc -o mod_python.la
-I/usr/local/src/mod_python-3.0.1/src/include
-I/usr/local/apache2/include
-I/usr/local/include/python2.2  -rpath
/usr/local/apache2/modules -module -avoid-version 
hlistobject.lo hlist.lo filterobject.lo connobject.lo
serverobject.lo util.lo tableobject.lo
requestobject.lo _apachemodule.lo mod_python.lo
-L/usr/local/lib/python2.2/config -Xlinker
-export-dynamic -lm -lpython2.2 -ldl -lpthread -lutil
-lm

*** Warning: This library needs some functionality
provided by -lpython2.2.
*** I have the capability to make that library
automatically link in when
*** you link to this library.  But I can only do this
if you have a
*** shared version of the library, which you do not
appear to have.

*** Warning: libtool could not satisfy all declared
inter-library
*** dependencies of module mod_python.  Therefore,
libtool will create
*** a static module, that should work as long as the
dlopening
*** application is linked with the -dlopen flag.

Now su and make install
  (or, if you only want to perform a partial install,
   you can use make install_dso and make
install_py_lib)

make[2]: Leaving directory
`/usr/local/src/mod_python-3.0.1/src'

Performing DSO installation.

/usr/bin/install -c src/mod_python.so
/usr/local/apache2/modules
/usr/bin/install: cannot stat `src/mod_python.so': No
such file or directory
make[1]: *** [install_dso] Error 1
make[1]: Leaving directory
`/usr/local/src/mod_python-3.0.1'
make: *** [install] Error 2
[root@dana mod_python-3.0.1]# 

I googled the errors and didn't get anywhere. 

Any ideas?

Thanks in advance,

Dylan


__________________________________________________
Do you Yahoo!?
Yahoo! Mail Plus - Powerful. Affordable. Sign up now.
http://mailplus.yahoo.com

From grisha at modpython.org  Thu Jan  2 14:02:54 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:47:11 2004
Subject: [mod_python] linking installation problem
In-Reply-To: <20030102175455.64670.qmail@web40708.mail.yahoo.com>
Message-ID: <20030102140142.N57575-100000@eden.ispol.com>

I think this is the same libtool problem that was reported earlier on this
list. Try rebuilding your apache, but run ./buildconf before running
./configure.

Grisha

On Thu, 2 Jan 2003, Dylan Vaughn wrote:

>
> Hello all,
>
> I'm trying to install mod_python and am running into
> some errors - I'm running Red Hat Linux 7.3 and I've
> already installed:
>
> python 2.2.2 (from source, installed in
> /usr/local/bin)
> apache 2.0.43 (from source, installed in
> /usr/local/apache2)
>
> This is what I'm telling configure:
>
> ./configure \
> --with-apxs=/usr/local/apache2/bin/apxs \
> --with-python=/usr/local/bin/python2.2
>
> which works fine, but when I do make I get at the end:
>
> ...lots of other stuff...:
> /usr/local/apache2/build/libtool --silent --mode=link
> gcc -o mod_python.la
> -I/usr/local/src/mod_python-3.0.1/src/include
> -I/usr/local/apache2/include
> -I/usr/local/include/python2.2  -rpath
> /usr/local/apache2/modules -module -avoid-version
> hlistobject.lo hlist.lo filterobject.lo connobject.lo
> serverobject.lo util.lo tableobject.lo
> requestobject.lo _apachemodule.lo mod_python.lo
> -L/usr/local/lib/python2.2/config -Xlinker
> -export-dynamic -lm -lpython2.2 -ldl -lpthread -lutil
> -lm
>
> *** Warning: This library needs some functionality
> provided by -lpython2.2.
> *** I have the capability to make that library
> automatically link in when
> *** you link to this library.  But I can only do this
> if you have a
> *** shared version of the library, which you do not
> appear to have.
>
> *** Warning: libtool could not satisfy all declared
> inter-library
> *** dependencies of module mod_python.  Therefore,
> libtool will create
> *** a static module, that should work as long as the
> dlopening
> *** application is linked with the -dlopen flag.
>
> Now su and make install
>   (or, if you only want to perform a partial install,
>    you can use make install_dso and make
> install_py_lib)
>
> make[1]: Leaving directory
> `/usr/local/src/mod_python-3.0.1/src'
>
> and when I try make install I get:
>
> ...lots of other stuff...:
> /usr/local/apache2/build/libtool --silent
> --mode=compile gcc   -DAP_HAVE_DESIGNATED_INITIALIZER
> -DLINUX=2 -D_REENTRANT -D_XOPEN_SOURCE=500
> -D_BSD_SOURCE -D_SVID_SOURCE -D_GNU_SOURCE -g -O2
> -pthread -I/usr/local/apache2/include
> -I/usr/local/src/mod_python-3.0.1/src/include
> -I/usr/local/apache2/include
> -I/usr/local/include/python2.2  -c -o hlistobject.lo
> hlistobject.c && touch hlistobject.slo
> /usr/local/apache2/build/libtool --silent --mode=link
> gcc -o mod_python.la
> -I/usr/local/src/mod_python-3.0.1/src/include
> -I/usr/local/apache2/include
> -I/usr/local/include/python2.2  -rpath
> /usr/local/apache2/modules -module -avoid-version
> hlistobject.lo hlist.lo filterobject.lo connobject.lo
> serverobject.lo util.lo tableobject.lo
> requestobject.lo _apachemodule.lo mod_python.lo
> -L/usr/local/lib/python2.2/config -Xlinker
> -export-dynamic -lm -lpython2.2 -ldl -lpthread -lutil
> -lm
>
> *** Warning: This library needs some functionality
> provided by -lpython2.2.
> *** I have the capability to make that library
> automatically link in when
> *** you link to this library.  But I can only do this
> if you have a
> *** shared version of the library, which you do not
> appear to have.
>
> *** Warning: libtool could not satisfy all declared
> inter-library
> *** dependencies of module mod_python.  Therefore,
> libtool will create
> *** a static module, that should work as long as the
> dlopening
> *** application is linked with the -dlopen flag.
>
> Now su and make install
>   (or, if you only want to perform a partial install,
>    you can use make install_dso and make
> install_py_lib)
>
> make[2]: Leaving directory
> `/usr/local/src/mod_python-3.0.1/src'
>
> Performing DSO installation.
>
> /usr/bin/install -c src/mod_python.so
> /usr/local/apache2/modules
> /usr/bin/install: cannot stat `src/mod_python.so': No
> such file or directory
> make[1]: *** [install_dso] Error 1
> make[1]: Leaving directory
> `/usr/local/src/mod_python-3.0.1'
> make: *** [install] Error 2
> [root@dana mod_python-3.0.1]#
>
> I googled the errors and didn't get anywhere.
>
> Any ideas?
>
> Thanks in advance,
>
> Dylan
>
>
> __________________________________________________
> Do you Yahoo!?
> Yahoo! Mail Plus - Powerful. Affordable. Sign up now.
> http://mailplus.yahoo.com
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From dylanvaughn at yahoo.com  Thu Jan  2 12:02:16 2003
From: dylanvaughn at yahoo.com (Dylan Vaughn)
Date: Fri Jan  9 21:47:11 2004
Subject: [mod_python] linking installation problem
In-Reply-To: <20030102140142.N57575-100000@eden.ispol.com>
Message-ID: <20030102200216.76213.qmail@web40702.mail.yahoo.com>

hey there, 

thanks for pointing out the earlier traffic - 

doing ./buildconf before ./configure gave me a
different linking error when rebuilding apache, but
copying over httpd-2.0.43/srclib/apr/libtool with
/usr/local/bin/libtool (suggested in the earlier
thread) and then rebuilding apache and mod_python did
fix the problem. 

thanks for your help! 

dylan



--- "Gregory (Grisha) Trubetskoy"
<grisha@modpython.org> wrote:
> 
> I think this is the same libtool problem that was
> reported earlier on this
> list. Try rebuilding your apache, but run
> ./buildconf before running
> ./configure.
> 
> Grisha
> 
> On Thu, 2 Jan 2003, Dylan Vaughn wrote:
> 
> >
> > Hello all,
> >
> > I'm trying to install mod_python and am running
> into
> > some errors - I'm running Red Hat Linux 7.3 and
> I've
> > already installed:
> >
> > python 2.2.2 (from source, installed in
> > /usr/local/bin)
> > apache 2.0.43 (from source, installed in
> > /usr/local/apache2)
> >
> > This is what I'm telling configure:
> >
> > ./configure \
> > --with-apxs=/usr/local/apache2/bin/apxs \
> > --with-python=/usr/local/bin/python2.2
> >
> > which works fine, but when I do make I get at the
> end:
> >
> > ...lots of other stuff...:
> > /usr/local/apache2/build/libtool --silent
> --mode=link
> > gcc -o mod_python.la
> > -I/usr/local/src/mod_python-3.0.1/src/include
> > -I/usr/local/apache2/include
> > -I/usr/local/include/python2.2  -rpath
> > /usr/local/apache2/modules -module -avoid-version
> > hlistobject.lo hlist.lo filterobject.lo
> connobject.lo
> > serverobject.lo util.lo tableobject.lo
> > requestobject.lo _apachemodule.lo mod_python.lo
> > -L/usr/local/lib/python2.2/config -Xlinker
> > -export-dynamic -lm -lpython2.2 -ldl -lpthread
> -lutil
> > -lm
> >
> > *** Warning: This library needs some functionality
> > provided by -lpython2.2.
> > *** I have the capability to make that library
> > automatically link in when
> > *** you link to this library.  But I can only do
> this
> > if you have a
> > *** shared version of the library, which you do
> not
> > appear to have.
> >
> > *** Warning: libtool could not satisfy all
> declared
> > inter-library
> > *** dependencies of module mod_python.  Therefore,
> > libtool will create
> > *** a static module, that should work as long as
> the
> > dlopening
> > *** application is linked with the -dlopen flag.
> >
> > Now su and make install
> >   (or, if you only want to perform a partial
> install,
> >    you can use make install_dso and make
> > install_py_lib)
> >
> > make[1]: Leaving directory
> > `/usr/local/src/mod_python-3.0.1/src'
> >
> > and when I try make install I get:
> >
> > ...lots of other stuff...:
> > /usr/local/apache2/build/libtool --silent
> > --mode=compile gcc  
> -DAP_HAVE_DESIGNATED_INITIALIZER
> > -DLINUX=2 -D_REENTRANT -D_XOPEN_SOURCE=500
> > -D_BSD_SOURCE -D_SVID_SOURCE -D_GNU_SOURCE -g -O2
> > -pthread -I/usr/local/apache2/include
> > -I/usr/local/src/mod_python-3.0.1/src/include
> > -I/usr/local/apache2/include
> > -I/usr/local/include/python2.2  -c -o
> hlistobject.lo
> > hlistobject.c && touch hlistobject.slo
> > /usr/local/apache2/build/libtool --silent
> --mode=link
> > gcc -o mod_python.la
> > -I/usr/local/src/mod_python-3.0.1/src/include
> > -I/usr/local/apache2/include
> > -I/usr/local/include/python2.2  -rpath
> > /usr/local/apache2/modules -module -avoid-version
> > hlistobject.lo hlist.lo filterobject.lo
> connobject.lo
> > serverobject.lo util.lo tableobject.lo
> > requestobject.lo _apachemodule.lo mod_python.lo
> > -L/usr/local/lib/python2.2/config -Xlinker
> > -export-dynamic -lm -lpython2.2 -ldl -lpthread
> -lutil
> > -lm
> >
> > *** Warning: This library needs some functionality
> > provided by -lpython2.2.
> > *** I have the capability to make that library
> > automatically link in when
> > *** you link to this library.  But I can only do
> this
> > if you have a
> > *** shared version of the library, which you do
> not
> > appear to have.
> >
> > *** Warning: libtool could not satisfy all
> declared
> > inter-library
> > *** dependencies of module mod_python.  Therefore,
> > libtool will create
> > *** a static module, that should work as long as
> the
> > dlopening
> > *** application is linked with the -dlopen flag.
> >
> > Now su and make install
> >   (or, if you only want to perform a partial
> install,
> >    you can use make install_dso and make
> > install_py_lib)
> >
> > make[2]: Leaving directory
> > `/usr/local/src/mod_python-3.0.1/src'
> >
> > Performing DSO installation.
> >
> > /usr/bin/install -c src/mod_python.so
> > /usr/local/apache2/modules
> > /usr/bin/install: cannot stat `src/mod_python.so':
> No
> > such file or directory
> > make[1]: *** [install_dso] Error 1
> > make[1]: Leaving directory
> > `/usr/local/src/mod_python-3.0.1'
> > make: *** [install] Error 2
> > [root@dana mod_python-3.0.1]#
> >
> > I googled the errors and didn't get anywhere.
> >
> > Any ideas?
> >
> > Thanks in advance,
> >
> > Dylan
> >
> >
> > __________________________________________________
> > Do you Yahoo!?
> > Yahoo! Mail Plus - Powerful. Affordable. Sign up
> now.
> > http://mailplus.yahoo.com
> > _______________________________________________
> > Mod_python mailing list
> > Mod_python@modpython.org
> >
> http://www.modpython.org/mailman/listinfo/mod_python
> >
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python


__________________________________________________
Do you Yahoo!?
Yahoo! Mail Plus - Powerful. Affordable. Sign up now.
http://mailplus.yahoo.com

From listmail at xs4all.nl  Sun Jan  5 01:47:26 2003
From: listmail at xs4all.nl (baz)
Date: Fri Jan  9 21:47:11 2004
Subject: [mod_python] linking installation problem [Fwd: Re: [mod_python]
 installation problems]
In-Reply-To: <20030102175455.64670.qmail@web40708.mail.yahoo.com>
References: <20030102175455.64670.qmail@web40708.mail.yahoo.com>
Message-ID: <3E17809E.7090206@xs4all.nl>


-------- Original Message --------
Subject: Re: [mod_python] installation problems
Date: Sun, 22 Dec 2002 14:22:24 +0100
From: baz <listmail@xs4all.nl>
To: Lex Berezhny <LBerezhny@DevIS.com>
References: <1040522021.12314.421.camel@hortus>


Hey, I don't think your problem is libtool related!!

I had the exact same thing, it's a Python thing, not apache..

My solution:

try
# locate libpython2.2.so

if nothing comes up you don't have the python shared library, which is
needed by mod python.

i used the following commands to build it from source and install it:

cd Python-2.2.2/
make distclean
./configure
make OPT="-fpic -O2"
mkdir .extract
(cd .extract; ar xv ../libpython2.2.a)
gcc -shared -o libpython2.2.so .extract/*.o
rm -rf .extract
make install


then proceed to build mod_python as usual..

have fun!

baz.



Lex Berezhny wrote:
 > hi all,
 >
 >   I'm having trouble installing mod_python.
 >
 > My environment:
 > Red Hat Linux release 7.3
 > gcc 2.96
 >
 >
 > My install process:
 >
 > wget http://www.apache.org/dist/httpd/httpd-2.0.43.tar.gz
 > tar xzvf httpd-2.0.43.tar.gz
 > wget http://apache.webmeta.com/dist/httpd/modpython/mod_python-3.0.1.tgz
 > tar xzvf mod_python-3.0.1.tgz
 > wget http://www.python.org/ftp/python/2.2.2/Python-2.2.2.tgz
 > tar xzvf Python-2.2.2.tgz
 >
 > cd httpd-2.0.43
 > ./configure --prefix=/usr/local/apache2
 > make
 > make install
 >
 > cd ../Python-2.2.2/
 > ./configure
 > make
 > make install
 >
 > cd ../mod_python-3.0.1/
 > ./configure --with-apxs=/usr/local/apache2/bin/apxs
 > --with-python=/usr/local/bin/python2.2
 > make
 > make install
 >
 >
 > Warning messages I get (during make):
 >
 > *** Warning: This library needs some functionality provided by
 > -lpython2.2.
 > *** I have the capability to make that library automatically link in
 > when
 > *** you link to this library.  But I can only do this if you have a
 > *** shared version of the library, which you do not appear to have.
 >
 > *** Warning: libtool could not satisfy all declared inter-library
 > *** dependencies of module mod_python.  Therefore, libtool will create
 > *** a static module, that should work as long as the dlopening
 > *** application is linked with the -dlopen flag.
 >
 >
 > The final, fatal, error (during make install):
 >
 > make[2]: Leaving directory
 > `/usr/local/apache2install/mod_python-3.0.1/src'
 >
 > Performing DSO installation.
 >
 > /usr/bin/install -c src/mod_python.so /usr/local/apache2/modules
 > /usr/bin/install: cannot stat `src/mod_python.so': No such file or
 > directory
 > make[1]: *** [install_dso] Error 1
 > make[1]: Leaving directory `/usr/local/apache2install/mod_python-3.0.1'
 > make: *** [install] Error 2
 >
 >
 >
 >
 > any help or pointers would be greatly appreciated,
 >
 >  - lex


From vmedina98 at unitec.edu.ve  Sat Jan  4 21:48:47 2003
From: vmedina98 at unitec.edu.ve (Victor Medina)
Date: Fri Jan  9 21:47:12 2004
Subject: [mod_python] Hello, this is my first post - Compiling mod_python on Windows
Message-ID: <5.2.0.9.0.20030104213024.0264bd50@200.35.82.226>

Hi everybody, have a happy new year!

My name is Victor Medina, I am from Venezuela. I am a c++, java, php and 
python developer (I just like OOP =) ) and also a web developer and I also 
have a open source project on SourceForge, it is named Ikirux.
Ikirux is an effort to build an easy to install completely integrated web 
development environment based around the Apache 2 webserver and other open 
source technology.
http://sourceforge.net/projects/ikirux
Ikirux severs currently support:

Apache, webdav, php4, the latest openssl, zlib and mod deflate, tomcat, 
mysql4, and i want perl and python support out of the box for the next 
release, every thing under a nice, configurable and fast installer built 
with the Inno Setup Compiler.

I am currently working on the next release of the Ikirux server. I want to 
integrate the mod_python module into the next release, but i am having 
problems getting it compiled on  my test machine. I am currently using 
Visual Studio 6 SP5 and Cygwin tools on a Windows 2000 Server SP3. Checking 
out the mod_python source I found a VC project for the Visual Studio .NET, 
which I don't own right now. Anyway, I read the project file (it is a xml 
file!) and try to build a VC++ 6 project out of the information on that 
file. Compiling fails awfully. I also have a complete install of Python 
2.2.2 that i built and the apache 2.0.43, complete; that is binary, 
libraries and source tree.

Is it possible to built mod_python with VC++ 6?

How can I built it?


Thanx for the help

Victor Medina
UNITEC - Venezuela
vmedina98@unitec.edu.ve
msn: victor_medina@hotmail.com   



From grisha at modpython.org  Sat Jan  4 21:55:32 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:47:12 2004
Subject: [mod_python] linking installation problem [Fwd: Re: [mod_python]
 installation problems]
In-Reply-To: <3E17809E.7090206@xs4all.nl>
Message-ID: <20030104215200.O3336-100000@eden.ispol.com>

Just to clarify it -

I have no shared library on my Red Hat machine (RH 8.0), and it compiles
fine, the shared library is not required to compile mod_python. If there
is one, mp will use it, but it is not required.

However, old versions of libtool *require* that you have a shared library
if you're making one, the latest versions of libtool do not require it,
but will issue a warning.

Grisha

On Sun, 5 Jan 2003, baz wrote:

>
>
> -------- Original Message --------
> Subject: Re: [mod_python] installation problems
> Date: Sun, 22 Dec 2002 14:22:24 +0100
> From: baz <listmail@xs4all.nl>
> To: Lex Berezhny <LBerezhny@DevIS.com>
> References: <1040522021.12314.421.camel@hortus>
>
>
> Hey, I don't think your problem is libtool related!!
>
> I had the exact same thing, it's a Python thing, not apache..
>
> My solution:
>
> try
> # locate libpython2.2.so
>
> if nothing comes up you don't have the python shared library, which is
> needed by mod python.
>
> i used the following commands to build it from source and install it:
>
> cd Python-2.2.2/
> make distclean
> ./configure
> make OPT="-fpic -O2"
> mkdir .extract
> (cd .extract; ar xv ../libpython2.2.a)
> gcc -shared -o libpython2.2.so .extract/*.o
> rm -rf .extract
> make install
>
>
> then proceed to build mod_python as usual..
>
> have fun!
>
> baz.
>
>
>
> Lex Berezhny wrote:
>  > hi all,
>  >
>  >   I'm having trouble installing mod_python.
>  >
>  > My environment:
>  > Red Hat Linux release 7.3
>  > gcc 2.96
>  >
>  >
>  > My install process:
>  >
>  > wget http://www.apache.org/dist/httpd/httpd-2.0.43.tar.gz
>  > tar xzvf httpd-2.0.43.tar.gz
>  > wget http://apache.webmeta.com/dist/httpd/modpython/mod_python-3.0.1.tgz
>  > tar xzvf mod_python-3.0.1.tgz
>  > wget http://www.python.org/ftp/python/2.2.2/Python-2.2.2.tgz
>  > tar xzvf Python-2.2.2.tgz
>  >
>  > cd httpd-2.0.43
>  > ./configure --prefix=/usr/local/apache2
>  > make
>  > make install
>  >
>  > cd ../Python-2.2.2/
>  > ./configure
>  > make
>  > make install
>  >
>  > cd ../mod_python-3.0.1/
>  > ./configure --with-apxs=/usr/local/apache2/bin/apxs
>  > --with-python=/usr/local/bin/python2.2
>  > make
>  > make install
>  >
>  >
>  > Warning messages I get (during make):
>  >
>  > *** Warning: This library needs some functionality provided by
>  > -lpython2.2.
>  > *** I have the capability to make that library automatically link in
>  > when
>  > *** you link to this library.  But I can only do this if you have a
>  > *** shared version of the library, which you do not appear to have.
>  >
>  > *** Warning: libtool could not satisfy all declared inter-library
>  > *** dependencies of module mod_python.  Therefore, libtool will create
>  > *** a static module, that should work as long as the dlopening
>  > *** application is linked with the -dlopen flag.
>  >
>  >
>  > The final, fatal, error (during make install):
>  >
>  > make[2]: Leaving directory
>  > `/usr/local/apache2install/mod_python-3.0.1/src'
>  >
>  > Performing DSO installation.
>  >
>  > /usr/bin/install -c src/mod_python.so /usr/local/apache2/modules
>  > /usr/bin/install: cannot stat `src/mod_python.so': No such file or
>  > directory
>  > make[1]: *** [install_dso] Error 1
>  > make[1]: Leaving directory `/usr/local/apache2install/mod_python-3.0.1'
>  > make: *** [install] Error 2
>  >
>  >
>  >
>  >
>  > any help or pointers would be greatly appreciated,
>  >
>  >  - lex
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From gnb at itga.com.au  Mon Jan  6 17:16:03 2003
From: gnb at itga.com.au (Gregory Bond)
Date: Fri Jan  9 21:47:12 2004
Subject: [mod_python] http 1.1 persistent connections 
In-Reply-To: Your message of Fri, 27 Dec 2002 00:16:36 -0800.
Message-ID: <200301060616.RAA02997@lightning.itga.com.au>

> I'm new to Python and mod_python - and I'm having trouble finding out if mod_
> python supports  http1.1's persistent connections.  

It seems to for me, at least for shorter-term connections (only 10s of seconds
in my case).  Just call req.write() to send stuff and it seems to come through 
with no delays or buffering or what-have-you.

But you'd have to think carefully about the possible implications of multiple, 
long-running mod_python apps on your server resources.....




From vmedina98 at unitec.edu.ve  Mon Jan  6 18:29:51 2003
From: vmedina98 at unitec.edu.ve (Victor Medina)
Date: Fri Jan  9 21:47:12 2004
Subject: [mod_python] Compiling mod_python on Win32
Message-ID: <5.2.0.9.0.20030106181338.00ba3798@200.35.82.226>

Hi guys!

I am still having problems with mod_python in windows. Hope not be 
bothering too much, but I really want to have mod_python for Apache 2. 
Please understand that compiling it myself is a must.

Ok, so this is what is happening, I am receiving to kinds of problems

PROBLEM #1
F:\IkiruxNXT-Source\mod_python-3.0.1\src\requestobject.c(1017) : error 
C2632: 'long' followed by 'long' is illegal
F:\IkiruxNXT-Source\mod_python-3.0.1\src\requestobject.c(1018) : error 
C2632: 'long' followed by 'long' is illegal
F:\IkiruxNXT-Source\mod_python-3.0.1\src\requestobject.c(1018) : error 
C2632: 'long' followed by 'long' is illegal

The problem seems pretty obvious there is an illegal long long declaration, 
but as far as I know I can use long long's in Win32, at least with the 
Borland Builder compiler, this is the code fragment:

static PyObject *getreq_recmbr_off(requestobject *self, void *name)
{
     PyMemberDef *md = find_memberdef(request_rec_mbrs, name);
     char *addr = (char *)self->request_rec + md->offset;
     if (sizeof(apr_off_t) == sizeof(long long)) { <---- HERE!!!
	long long l = *(long long*)addr; <---- HERE!!!
	return PyLong_FromLongLong(l);
     }
     else {
	/* assume it's long */
	long l = *(long*)addr;
	return PyLong_FromLong(l);
     }
}

PROBLEM #2

I am receiving several link errors(well ok, not errors, just plain 
warnings, I am concerned about the quantity of items), about inconsistent 
linkage: inconsistent dll linkage.  dllexport assumed.

I am attaching the complete output log, hope not be abusing or breaking any 
rules inside the list.

I am using Windows 2000 SP3, Visual Studio 6 SP5,  Python 2.2.2 (custom 
built, not Python.org release, not Activestate's release) and Apache 2.0.43 
(same here,  custom built). The include, lib, libs directory are in the 
VC++ Path, thou not includes as part of the project.

Thanxs for your time an cooperation, I would really a appreciate any 
comments or hints

Victor Medina
UNITEC
vmedina98@unitec.edu.ve
msn: victor_medina@hotmail.com
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mod_python OUTPUT Log.zip
Type: application/zip
Size: 1193 bytes
Desc: not available
Url : http://mailman.modpython.org/pipermail/mod_python/attachments/20030106/ee1bf528/mod_pythonOUTPUTLog.zip
From grisha at modpython.org  Tue Jan  7 00:21:15 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:47:12 2004
Subject: [mod_python] Compiling mod_python on Win32
In-Reply-To: <5.2.0.9.0.20030106181338.00ba3798@200.35.82.226>
Message-ID: <20030106234207.V30614-100000@eden.ispol.com>

Microsoft C compiler doesn't support "long long", this has been fixed in
the latest CVS code. Make the functin look like this, and it will work
OK:

static PyObject *getreq_recmbr_off(requestobject *self, void *name)
{
    PyMemberDef *md = find_memberdef(request_rec_mbrs, name);
    char *addr = (char *)self->request_rec + md->offset;
    if (sizeof(apr_off_t) == sizeof(LONG_LONG)) {
	LONG_LONG l = *(LONG_LONG*)addr;
	return PyLong_FromLongLong(l);
    }
    else {
	/* assume it's long */
	long l = *(long*)addr;
	return PyLong_FromLong(l);
    }
}


On Mon, 6 Jan 2003, Victor Medina wrote:

> Hi guys!
>
> I am still having problems with mod_python in windows. Hope not be
> bothering too much, but I really want to have mod_python for Apache 2.
> Please understand that compiling it myself is a must.
>
> Ok, so this is what is happening, I am receiving to kinds of problems
>
> PROBLEM #1
> F:\IkiruxNXT-Source\mod_python-3.0.1\src\requestobject.c(1017) : error
> C2632: 'long' followed by 'long' is illegal
> F:\IkiruxNXT-Source\mod_python-3.0.1\src\requestobject.c(1018) : error
> C2632: 'long' followed by 'long' is illegal
> F:\IkiruxNXT-Source\mod_python-3.0.1\src\requestobject.c(1018) : error
> C2632: 'long' followed by 'long' is illegal
>
> The problem seems pretty obvious there is an illegal long long declaration,
> but as far as I know I can use long long's in Win32, at least with the
> Borland Builder compiler, this is the code fragment:
>
> static PyObject *getreq_recmbr_off(requestobject *self, void *name)
> {
>      PyMemberDef *md = find_memberdef(request_rec_mbrs, name);
>      char *addr = (char *)self->request_rec + md->offset;
>      if (sizeof(apr_off_t) == sizeof(long long)) { <---- HERE!!!
> 	long long l = *(long long*)addr; <---- HERE!!!
> 	return PyLong_FromLongLong(l);
>      }
>      else {
> 	/* assume it's long */
> 	long l = *(long*)addr;
> 	return PyLong_FromLong(l);
>      }
> }
>
> PROBLEM #2
>
> I am receiving several link errors(well ok, not errors, just plain
> warnings, I am concerned about the quantity of items), about inconsistent
> linkage: inconsistent dll linkage.  dllexport assumed.
>
> I am attaching the complete output log, hope not be abusing or breaking any
> rules inside the list.
>
> I am using Windows 2000 SP3, Visual Studio 6 SP5,  Python 2.2.2 (custom
> built, not Python.org release, not Activestate's release) and Apache 2.0.43
> (same here,  custom built). The include, lib, libs directory are in the
> VC++ Path, thou not includes as part of the project.
>
> Thanxs for your time an cooperation, I would really a appreciate any
> comments or hints
>
> Victor Medina
> UNITEC
> vmedina98@unitec.edu.ve
> msn: victor_medina@hotmail.com


From vmedina98 at unitec.edu.ve  Tue Jan  7 12:02:30 2003
From: vmedina98 at unitec.edu.ve (Victor Medina)
Date: Fri Jan  9 21:47:12 2004
Subject: [mod_python] Compiling mod_python on Win32
In-Reply-To: <5.2.0.9.0.20030106181338.00ba3798@200.35.82.226>
Message-ID: <5.2.0.9.0.20030107115502.00bf72d8@200.35.82.226>

Hi Guys!!!

Using LONG_LONG seems to have fixed that problem, although I still can't 
compile mod_python, things are getting better. =)

DOUBT#1: LONG_LONG is a macro for safe type conversion?

PROBLEM#1: I am attaching my output, I am concerned about several thing 
here, there is a lot of warnings about link problems, are they normal, 
expected stuff? Second; there are unresolved external symbols that the 
compiler can't map out here:

connobject.obj : error LNK2001: unresolved external symbol __imp__ntohs@4
connobject.obj : error LNK2001: unresolved external symbol __imp__ntohl@4

I included must of the libs inside the projects, the remaining libs are in 
the path, what is missing?

Thanxs for the help and the patience

Victor Medina
UNITEC
vmedina98@unitec.edu.ve
msn:victor_medina@hotmail.com



From vmedina98 at unitec.edu.ve  Tue Jan  7 12:04:22 2003
From: vmedina98 at unitec.edu.ve (Victor Medina)
Date: Fri Jan  9 21:47:12 2004
Subject: [mod_python] Compiling mod_python on Win32
Message-ID: <5.2.0.9.0.20030107120355.00c0c7b0@200.35.82.226>

Hi Guys!!!

Using LONG_LONG seems to have fixed that problem, although I still can't 
compile mod_python, things are getting better. =)

DOUBT#1: LONG_LONG is a macro for safe type conversion?

PROBLEM#1: I am attaching my output, I am concerned about several thing 
here, there is a lot of warnings about link problems, are they normal, 
expected stuff? Second; there are unresolved external symbols that the 
compiler can't map out here:

connobject.obj : error LNK2001: unresolved external symbol __imp__ntohs@4
connobject.obj : error LNK2001: unresolved external symbol __imp__ntohl@4

I included must of the libs inside the projects, the remaining libs are in 
the path, what is missing?

Thanxs for the help and the patience

Victor Medina
UNITEC
vmedina98@unitec.edu.ve
msn:victor_medina@hotmail.com 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mod_python.zip
Type: application/zip
Size: 10180 bytes
Desc: not available
Url : http://mailman.modpython.org/pipermail/mod_python/attachments/20030107/c4a6b014/mod_python.zip
From jwyant at sfbcic.com  Tue Jan  7 10:14:12 2003
From: jwyant at sfbcic.com (Wyant, Jaime)
Date: Fri Jan  9 21:47:12 2004
Subject: [mod_python] Compiling mod_python on Win32
Message-ID: <654DAEACA633D511B5F500902784B0521890D2@MS-EXCHANGE>

>>>-----Original Message-----
>>>From: Victor Medina [mailto:vmedina98@unitec.edu.ve]
>>>Sent: Tuesday, January 07, 2003 10:04 AM
>>>To: mod_python@modpython.org
>>>Subject: Re: [mod_python] Compiling mod_python on Win32
>>>
>>>
>>>Hi Guys!!!
>>>
>>>Using LONG_LONG seems to have fixed that problem, although I 
>>>still can't 
>>>compile mod_python, things are getting better. =)
>>>
>>>DOUBT#1: LONG_LONG is a macro for safe type conversion?
>>>

Don't know about Doubt #1...

>>>PROBLEM#1: I am attaching my output, I am concerned about 
>>>several thing 
>>>here, there is a lot of warnings about link problems, are 
>>>they normal, 
>>>expected stuff? Second; there are unresolved external 
>>>symbols that the 
>>>compiler can't map out here:
>>>
>>>connobject.obj : error LNK2001: unresolved external symbol 
>>>__imp__ntohs@4
>>>connobject.obj : error LNK2001: unresolved external symbol 
>>>__imp__ntohl@4

Info about ntohl according to MSDN (see the last line):

QuickInfo
  Windows NT: Yes
  Windows: Yes
  Windows CE: Use version 1.0 and later.
  Header: Declared in winsock2.h.
  Import Library: Link with ws2_32.lib.

Good luck!
jaime

From m.syeda at public-health.ucl.ac.uk  Wed Jan  8 09:59:42 2003
From: m.syeda at public-health.ucl.ac.uk (Maheeba Syeda)
Date: Fri Jan  9 21:47:12 2004
Subject: [mod_python] installing apache,mod_python and python
Message-ID: <3E1BF68D.13048.30A809@localhost>

hi every1,


need some help with setting up the following.

I have Python 2.2.2, Apache 2.0.42 and mod_Python 3.0.1 on a 
Windows 2000 system, and want to
enable python files on an Apache hosted site.
How can I set it up?
I get the error:
Syntax error on line 491 of c:/program files/apache
group/apache2/conf/httpd.conf
:
Invalid command 'PythonHandler', perhaps mis-spelled or defined 
by a
module not
included in the server configuration

That section in the httpd.conf file contains:
<Directory "C:/Program Files/Apache 
Group/Apache/htdocs/python">
   AddHandler python-program .py
   PythonHandler mptest
   PythonDebug on
</Directory>


is there anythng i am missing? i have been trying to get it working 
for the last 2 days. is there anyone who will be able to help me with 
this? a step-by-step direction of what to do will be appreciated very 
much.

thanx in advance.
heeba




From hobb at mail.portland.co.uk  Wed Jan  8 23:39:44 2003
From: hobb at mail.portland.co.uk (hobb)
Date: Fri Jan  9 21:47:12 2004
Subject: [mod_python] Error during 'make install'
Message-ID: <002b01c2b76f$39496780$0201a8c0@mindcircus>

Hi, it looks like I'm doing something wrong and can't seem to properly
compile mod_python
This is how I'm compiling it and the error message at the end:

$ cd ~
$ wget http://apache.webmeta.com/dist/httpd/modpython/mod_python-3.0.1.tgz
$ tar -xzf mod_python-3.0.1.tgz
$ cd mod_python-3.0.1
$ ./configure --with-apxs=/usr/local/apache2/bin/apxs
$ make
$ su
# make install
[snip]
Performing DSO installation.

/usr/bin/install -c src/mod_python.so /usr/local/apache2/modules
/usr/bin/install: cannot stat `src/mod_python.so': No such file or directory
make[1]: *** [install_dso] Error 1
make[1]: Leaving directory `/home/hobb/mod_python-3.0.1'
make: *** [install] Error 2
#

What's going wrong?

This is more information of the box im trying to build mod_python on which
might help in troubleshooting:

$ uname -a
Linux Dagger 2.4.20 #2 Sat Jan 4 22:31:49 GMT 2003 i686 unknown
$ /usr/local/apache2/bin/apachectl -v
Server version: Apache/2.0.43
Server built:   Jan  5 2003 00:55:46
$ python -V
Python 2.2.2
$ gcc -v
Reading specs from /usr/lib/gcc-lib/i686-pc-linux-gnu/3.2.1/specs
Configured with:
../gcc-3.2.1/configure --prefix=/usr --enable-languages=c,c++,objc --enable-
threads=posix --enable-__cxa_atexit --disable-nls
Thread model: posix
gcc version 3.2.1 (CRUX)

TIA


From mike_verdone at shaw.ca  Wed Jan  8 18:04:11 2003
From: mike_verdone at shaw.ca (Mike Verdone)
Date: Fri Jan  9 21:47:12 2004
Subject: [mod_python] Persistent Database and Publisher problem
Message-ID: <200301081804.11560.mike_verdone@shaw.ca>

Hi,

I'm having some trouble using the persistent database example code from the 
FAQ and the publisher handler. The problem is that the persistent connection 
is not actually persistent. Instead, it connects on every request, and does 
not disconnect.

I put the database code in a file _database.py, and then I put all the 
database functions into a file _dbcommands.py. The problem is, how do I 
import _database in _dbcomands?

If I use:

import _database

then it make a new connection on every request. I figure that the correct way 
to do it is using the PythonImport apache directive, but the problem now is 
that I can't see the imported module when running through the publisher 
handler. i.e. this doesn't resolve without import _database:

_database.run_sql(...)

I ensured that that _database is being imported by the interpreter (8 
connections are made before any requests), and the module is imported in the 
correctly named interpreter. I suspect the module is "blocked" by 
publisher-handler. Is that the problem?

Any recommendations on how to get around this?

Mike.


From Mongryong at sympatico.ca  Wed Jan  8 20:05:49 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 21:47:12 2004
Subject: [mod_python] 4XSLT/XML (4Suite) is not functioning correctly
Message-ID: <1042074350.5118.15.camel@refugeeMedia>

Hi,

I'm having problems with 4Suite's XSLT processor working properly within
mod_python.  It appears to be an mod_python issue because my code works
fine as a cgi and stand-alone script.  I can't seem to figure out why
it's not working under mod_python and mod_python is not indicating that
any errors/exceptions are occuring.  It seems as if during XSLT
processing, the source XML document is being ignored.

Has anyone been successful in using 4Suite's XSLT tools with
mod_python?  If so, what is your configuration. Thanks.




From gnb at itga.com.au  Thu Jan  9 12:15:48 2003
From: gnb at itga.com.au (Gregory Bond)
Date: Fri Jan  9 21:47:12 2004
Subject: [mod_python] 4XSLT/XML (4Suite) is not functioning correctly 
In-Reply-To: Your message of 08 Jan 2003 20:05:49 -0500.
Message-ID: <200301090115.MAA28427@lightning.itga.com.au>

> any errors/exceptions are occuring.  It seems as if during XSLT
> processing, the source XML document is being ignored.

See FAQ 3.5 (http://www.modpython.org/FAQ/faqw.py?req=show&file=faq03.005.htp) 
for some hints about what changes between CGI and mod_python. My money is on 
environment variables or PWD.



From grisha at modpython.org  Wed Jan  8 21:22:35 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:47:12 2004
Subject: [mod_python] Persistent Database and Publisher problem
In-Reply-To: <200301081804.11560.mike_verdone@shaw.ca>
Message-ID: <20030108212029.A58150-100000@eden.ispol.com>


On Wed, 8 Jan 2003, Mike Verdone wrote:

> If I use:
>
> import _database
>
> then it make a new connection on every request.

Are you sure that it isn't making a connection for every Apache process
that's running? If you have 10 processes running, then the first 10
requests will make 10 connections, but the 11th should be reused.

Grisha


From connie at core3d.com  Thu Jan  9 08:24:55 2003
From: connie at core3d.com (Connie Baggs)
Date: Fri Jan  9 21:47:12 2004
Subject: [mod_python] parse error before '*'
Message-ID: <20030109.8245536@mis.configured.host>

Hi
Ive just compiled and installed apache 2.0.43 (apache2) and have 
previously installed python 2.1.1 I am now trying to install the 
mod_python module. The ./configure goes fine with the command 
#./configure ?with-apxs=/usr/local/apache2/bin/apxs 
-with-python=/usr/freeware/bin/python2 

However when I issue the make command it fails with the following error


/usr/local/apache2/build/libtool --silent --mode=compile gcc 
-DAP_HAVE_DESIGNATED_INITIALIZER -D_POSIX_THREAD_SAFE_FUNCTIONS -g -O2 
-I/usr/local/apache2/include 
-I/install/httpd-2.0.43/modules/mod_python-3.0.1/src/include 
-I/usr/local/apache2/include -I/usr/freeware/include/python2.1  -c -o 
mod_python.lo mod_python.c && touch mod_python.slo
In file included from 
/install/httpd-2.0.43/modules/mod_python-3.0.1/src/include/mod_python.h:
115,
 from mod_python.c:67:
/install/httpd-2.0.43/modules/mod_python-3.0.1/src/include/util.h:76: 
parse error before '*' token
/install/httpd-2.0.43/modules/mod_python-3.0.1/src/include/util.h:76: 
parse error before '*' token
/install/httpd-2.0.43/modules/mod_python-3.0.1/src/include/util.h:76: 
warning: data definition has no type or storage class
apxs:Error: Command failed with rc=65536
.
*** Error code 1 (bu21)
*** Error code 1 (bu21)



Any ideas on what is wrong?


From grisha at modpython.org  Thu Jan  9 09:43:09 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:47:12 2004
Subject: [mod_python] parse error before '*'
In-Reply-To: <20030109.8245536@mis.configured.host>
Message-ID: <20030109094228.E65000-100000@eden.ispol.com>

I think this is because your Python is too old. According to this:

http://www.modpython.org/live/mod_python-3.0.1/doc-html/inst-prerequisites.html

it has to be 2.2.1 or later.

Grisha

On Thu, 9 Jan 2003, Connie Baggs wrote:

> Hi
> Ive just compiled and installed apache 2.0.43 (apache2) and have
> previously installed python 2.1.1 I am now trying to install the
> mod_python module. The ./configure goes fine with the command
> #./configure ?with-apxs=/usr/local/apache2/bin/apxs
> -with-python=/usr/freeware/bin/python2
>
> However when I issue the make command it fails with the following error
>
>
> /usr/local/apache2/build/libtool --silent --mode=compile gcc
> -DAP_HAVE_DESIGNATED_INITIALIZER -D_POSIX_THREAD_SAFE_FUNCTIONS -g -O2
> -I/usr/local/apache2/include
> -I/install/httpd-2.0.43/modules/mod_python-3.0.1/src/include
> -I/usr/local/apache2/include -I/usr/freeware/include/python2.1  -c -o
> mod_python.lo mod_python.c && touch mod_python.slo
> In file included from
> /install/httpd-2.0.43/modules/mod_python-3.0.1/src/include/mod_python.h:
> 115,
>  from mod_python.c:67:
> /install/httpd-2.0.43/modules/mod_python-3.0.1/src/include/util.h:76:
> parse error before '*' token
> /install/httpd-2.0.43/modules/mod_python-3.0.1/src/include/util.h:76:
> parse error before '*' token
> /install/httpd-2.0.43/modules/mod_python-3.0.1/src/include/util.h:76:
> warning: data definition has no type or storage class
> apxs:Error: Command failed with rc=65536
> .
> *** Error code 1 (bu21)
> *** Error code 1 (bu21)
>
>
>
> Any ideas on what is wrong?
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From connie at core3d.com  Fri Jan 10 02:06:34 2003
From: connie at core3d.com (Connie Baggs)
Date: Fri Jan  9 21:47:12 2004
Subject: [mod_python] error making mod_python
Message-ID: <20030110.2063470@mis.configured.host>

Hi
Ive just compiled and installed apache 2.0.43 (apache2) and python 2.2.1 
I am now trying to install the 
mod_python module. The ./configure goes fine with the command 
#./configure ?with-apxs=/usr/local/apache2/bin/apxs 
-with-python=/usr/local/bin/python2.2

However when I issue the make command it fails with the following error


/usr/local/apache2/build/libtool --silent --mode=link gcc -o 
mod_python.la 
-I/install/httpd-2.0.43/modules/mod_python-3.0.1/src/include 
-I/usr/local/apache2/include -I/usr/local/include/python2.2  -rpath 
/usr/local/apache2/modules -module -avoid-version  hlistobject.lo 
hlist.lo filterobject.lo connobject.lo serverobject.lo util.lo 
tableobject.lo requestobject.lo _apachemodule.lo mod_python.lo 
-L/usr/local/lib/python2.2/config -lm -lpython2.2 -ldl -lpthread -lm
ld32: WARNING 84: /usr/lib32/libm.so is not used for resolving any 
symbol.
ld32: WARNING 84: /usr/lib32/libdl.so is not used for resolving any 
symbol.
Insufficient arguments
Usage: ln [-fis] file1 file2 
       ln [-fis] file1 ... file2 dir 
*** Error code 2 (bu21)
*** Error code 1 (bu21)
)



Any ideas on what is wrong?

_____________________________



From grisha at modpython.org  Thu Jan  9 23:30:09 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:47:12 2004
Subject: [mod_python] error making mod_python
In-Reply-To: <20030110.2063470@mis.configured.host>
Message-ID: <20030109232436.X73409-100000@eden.ispol.com>


On Fri, 10 Jan 2003, Connie Baggs wrote:

> Insufficient arguments
> Usage: ln [-fis] file1 file2
>        ln [-fis] file1 ... file2 dir
> *** Error code 2 (bu21)
> *** Error code 1 (bu21)
>
> Any ideas on what is wrong?

Interesting.... Is this IRIX by any chance? I have no access to an SGI
machine to test this, but it looks like ln needs two arguments and so the
args in src/Makefile are wrong. Try finding a line in src/Makefile that
looks like:

        @ln -s .libs/mod_python.so

and change it to

	@ln -s .libs/mod_python.so mod_python.so

then rerun make.

Grisha



From Mongryong at sympatico.ca  Fri Jan 10 00:57:05 2003
From: Mongryong at sympatico.ca (Kia Vang)
Date: Fri Jan  9 21:47:12 2004
Subject: [mod_python] 4XSLT/XML (4Suite) is not functioning correctly
In-Reply-To: <200301090115.MAA28427@lightning.itga.com.au>
References: <200301090115.MAA28427@lightning.itga.com.au>
Message-ID: <1042178225.27744.29.camel@refugeeMedia>

Okay, I'm really frustrated.  My code seems very simple, yet I can't get
mod_python to output it correctly.    

Here's the mod_python code:

from Ft.Xml import InputSource
from Ft.Xml.Xsl import Processor

from mod_python import apache

def handler(req):
	p = Processor.Processor()
	trans = InputSource.DefaultFactory.fromUri("request.xsl")
	src = InputSource.DefaultFactory.fromUri("request.xml")
	p.appendStylesheet(trans)
	res = p.run(src, topLevelParams={'error':0} )
	
	req.content_type="text/html"
	req.write(res)

	return apache.OK

Here's a cgi version:

from Ft.Xml import InputSource
from Ft.Xml.Xsl import Processor
import sys

if __name__ == "__main__":
	p = Processor.Processor()
	trans = InputSource.DefaultFactory.fromUri("request.xsl")
	src = InputSource.DefaultFactory.fromUri("request.xml")
	p.appendStylesheet(trans)
	
	sys.write("Content-type: text/html")
	p.run(src, topLevelParams={'error':0}, outputStream=sys.stdout )
	
Now, I've also done some tests with libxml2 and libxslt.  I get the same
result with mod_python outputting missing information.

Am I missing something?  I'm using the latest versions of apache,
python, and mod_python.	

On Wed, 2003-01-08 at 20:15, Gregory Bond wrote:
> > any errors/exceptions are occuring.  It seems as if during XSLT
> > processing, the source XML document is being ignored.
> 
> See FAQ 3.5 (http://www.modpython.org/FAQ/faqw.py?req=show&file=faq03.005.htp) 
> for some hints about what changes between CGI and mod_python. My money is on 
> environment variables or PWD.
> 
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20030110/55fe2ec7/request.htm
-------------- next part --------------
<?xml version="1.0"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:template name="createObjectiveFormItems">
    <ol>
      <xsl:for-each select="/resume/objectiveList/objective">
        <xsl:variable name="objName">objective<xsl:value-of select="@id"/></xsl:variable>
        <li>
          <xsl:value-of select="@category"/>
          <input type="checkbox">
            <xsl:attribute name="value">
              <xsl:value-of select="$objName"/>
            </xsl:attribute>
          </input>
        </li>
      </xsl:for-each>
    </ol>
  </xsl:template>
  <xsl:template name="createCategoryFormItems">
    <ul>
      <xsl:for-each select="/resume/categoryList/category">
        <div>
          <input type="checkbox">
            <xsl:attribute name="value">
              <xsl:value-of select="@name"/>
            </xsl:attribute>
            <span>
              <xsl:value-of select="@name"/>
            </span>
          </input>
        </div>
      </xsl:for-each>
    </ul>
  </xsl:template>
  <xsl:template name="createCategoryStyle">
    <style type="text/css">
      <xsl:for-each select="/resume/categoryList/category">
        <xsl:text> .</xsl:text>
        <xsl:value-of select="@name"/>
        <xsl:text>{}</xsl:text>
      </xsl:for-each>
    </style>
  </xsl:template>
  <xsl:template name="createOccupationFormItems">
    <ul>
      <xsl:for-each select="/resume/occupationList/occupation">
        <div>
          <input type="checkbox">
            <xsl:attribute name="value">
              <xsl:value-of select="occupationType/@name"/>
            </xsl:attribute>
            <span>
              <xsl:value-of select="occupationType/@name"/>
            </span>
          </input>
        </div>
      </xsl:for-each>
    </ul> 
  </xsl:template>
  <xsl:template match="/">
    <html>
      <head>
        <title>RezQuest</title>
        <link rel="stylesheet" href="/rezquest/css/professional.css" type="text/css" title="professional" media="all"/>
        <link rel="stylesheet" href="/rezquest/css/elegant.css" type="text/css" title="elegant" media="all"/>
        <link rel="stylesheet" href="/rezquest/css/contemporary.css" type="text/css" title="contemporary" media="all"/>
        <script type="text/javascript" src="/rezquest/scripts/common.js"/>
        <script type="text/javascript" src="/rezquest/scripts/main.js"/>
        <xsl:call-template name="createCategoryStyle"/>
      </head>
      <body>
        <div id="menu">
          <div id="appTitle">
            <h3>RezQuest 0.1</h3>
          </div>
          <div id="styleForm" class="menuItem">
            <form name="styleForm">
              <h3>Select Style</h3>
              <div><input type="radio" name="style" value="professional"/>professional</div>
              <div><input type="radio" name="style" value="elegant"/>elegant</div>
              <div><input type="radio" name="style" value="contemporary"/>contemporary</div>
              <div><input id="refreshButton" type="button" name="refresh" value="Refresh"/></div>         
            </form>
          </div>
          <div id="fontForm" class="menuItem">
            <form name="fontForm" onSubmit="window.focus(); return false;">
              <h3>Adjust Base Font-Size</h3>
              <div><input type="radio" name="fontSizeType" value="%" checked="true"/>percent(%)</div>
              <div><input type="radio" name="fontSizeType" value="em"/>M-height(em)</div>
              <div><input type="radio" name="fontSizeType" value="ex"/>x-height(ex)</div>              
              <div>
                <input id="fontSizeVal" type="text" name="fontSizeVal" value="100" size="4" maxLength="3" onkeypress="return resume_fontSizeOnKeyDown(event);"/>
                <input id="fontSizeApply" type="button" name="fontSizeApply" value="Apply"/>
              </div>
            </form>
          </div>
          <div id="sectionForm" class="menuItem">
            <form name="sectionForm">
              <h3>Select Sections</h3>
              <div><input type="checkbox" value="personHeader"/>top header</div>
              <div><input type="checkbox" value="objective"/>objective</div>
              <div><input type="checkbox" value="skills"/>summary of skills</div>
              <div><input type="checkbox" value="education"/>education</div>
              <div><input type="checkbox" value="work"/>work experience</div>
              <div><input type="checkbox" value="projects"/>projects</div>
              <div><input type="checkbox" value="interests"/>interest</div>
              <div><input type="checkbox" value="references"/>references</div>
            </form>            
          </div>
          <div id="objectiveForm" class="menuItem">
            <form name="objectiveForm">
              <h3>Select Objective</h3>
              <xsl:call-template name="createObjectiveFormItems"/>
            </form>
          </div>
          <div id="categoryForm" class="menuItem">
            <form name="categoryForm">
              <h3>Select Categories</h3>
              <xsl:call-template name="createCategoryFormItems"/>
            </form>
          </div>
          <div id="occupationForm" class="menuItem">
            <form name="occupationForm">
              <h3>Select Occupations</h3>
              <xsl:call-template name="createOccupationFormItems"/>
            </form>
          </div>
          <div id="printForm" class="menuItem">
            <form name="printForm">
              <input style="width: 100%" id="previewButton" type="button" name="preview" value="Preview"/>
              <input style="width: 100%" id="printButton" type="button" name="print" value="Print"/>	      
            </form>
          </div>
          <div id="fileOptions" class="menuItem">
            <h3>File Options</h3>
            <div><a id="openResume" href="/cgi-bin/rezquest/main.py?request=login" title="Get another resume">Open New</a></div>
            <div><a id="exitresume" href="/rezquest/exit.html" title="Exit RezQuest">Exit</a></div>
          </div>
          <div id="copyRight">
            <span><xsl:text disable-output-escaping="yes">&#169;</xsl:text> 2002 by Refugee Media Networks.</span>
          </div>
        </div>
        <div id="main">
          <div id="personHeader" class="section">
            <div id="personInfo">
              <div id="residence" class="contactInfo">
                <xsl:apply-templates select="resume/residenceList"/>
              </div>
              <div id="phone" class="contactInfo">
                <xsl:apply-templates select="resume/phoneList"/>
              </div>
              <div id="email" class="contactInfo">
                <xsl:apply-templates select="resume/emailList"/>
              </div>
              <div id="filler1"/>
            </div>
            <xsl:apply-templates select="resume/person"/>
          </div>
          <div id="objective" class="section">
            <h2 class="title">Objective</h2>
            <div class="content">
              <xsl:apply-templates select="resume/objectiveList"/>
            </div>
            <div class="contentFiller">&#160;</div>
          </div>
          <div id="skills" class="section">
            <h2 class="title">Summary of Skills</h2>
            <div class="content">
              <xsl:apply-templates select="resume/skillList"/>
            </div>
            <div class="contentFiller">&#160;</div>
          </div>
          <div id="education" class="section">
            <h2 class="title">Education</h2>
            <div class="content">
              <xsl:apply-templates select="resume/educationList"/>
            </div>
            <div class="contentFiller">&#160;</div>
          </div>
          <div id="work" class="section">
            <h2 class="title">Work Experience</h2>
            <div class="content">
              <xsl:apply-templates select="resume/occupationList"/>
            </div>
            <div class="contentFiller">&#160;</div>
          </div>
          <div id="projects" class="section">
            <h2 class="title">Personal Projects</h2>
            <div class="content">
              <xsl:apply-templates select="resume/projectList"/>
              <div class="contentFiller">&#160;</div>
            </div>
            <div class="contentFiller">&#160;</div>
          </div>
          <div id="interests" class="section">
            <h2 class="title">Interests</h2>
            <div class="content">
              <xsl:apply-templates select="resume/interestList"/>
            </div>
            <div class="contentFiller">&#160;</div>
          </div>
          <div id="references" class="section">
            <h2 class="title">References</h2>
            <div class="content">
              <xsl:apply-templates select="resume/referenceList"/>
            </div>
            <div class="contentFiller">&#160;</div>
          </div>
        </div>
      </body>
    </html>
  </xsl:template>
  <xsl:template match="skillList">
    <ul>
      <xsl:for-each select="skill">
        <li>
          <xsl:attribute name="class">
            <xsl:value-of select="@category"/>
          </xsl:attribute>
          <xsl:value-of select="description"/>
        </li>
      </xsl:for-each>
    </ul>
  </xsl:template>
  <xsl:template match="objectiveList">
    <ul>
      <xsl:for-each select="objective">
        <li>          
          <xsl:attribute name="id">objective<xsl:value-of select="@id"/></xsl:attribute>
          <xsl:value-of select="description"/>
        </li>
      </xsl:for-each>
    </ul>
  </xsl:template>
  <xsl:template match="residenceList">
    <xsl:for-each select="residence">
      <xsl:if test="@type='home'">
        <div class="key">Residence</div>
        <div class="value">
          <div class="region">
            <xsl:value-of select="address"/>
          </div>
          <div class="region">
            <xsl:value-of select="city"/>
          </div>
          <div class="region">
            <xsl:value-of select="state/@code"/>
          </div>
          <div class="region">
            <xsl:value-of select="state/country/@code"/>
          </div>
          <div class="region">
            <xsl:value-of select="zip"/>
          </div>
        </div>
      </xsl:if>
    </xsl:for-each>
  </xsl:template>
  <xsl:template match="educationList">
    <xsl:for-each select="education">
      <xsl:if test="@degree='basc'">
        <h2>
          <xsl:value-of select="@major"/>
        </h2>
        <h3 class="subHead">
          <xsl:value-of select="institution/name"/>
        </h3>
        <h3 class="subHead">
          <span class="region">
            <xsl:value-of select="institution/location/city"/>
          </span>
          <span class="region">
            <xsl:value-of select="institution/location/state/@code"/>
          </span>
        </h3>
        <h3 class="subHead"><xsl:value-of select="substring(startDate,1,7)"/> to <xsl:value-of select="substring(endDate,1,7)"/></h3>
        <div class="contentFiller"/>
        <div>
          <ul>
            <li>Bachelor of Applied Science</li>
          </ul>
        </div>
      </xsl:if>
    </xsl:for-each>
  </xsl:template>
  <xsl:template match="occupationList">
    <xsl:for-each select="occupation">
<!--xsl:if test="occupationType/@name='dsp software' or occupationType/@name='windows'"-->
      <div class="subSection">
        <xsl:attribute name="name"><xsl:value-of select="occupationType/@name"/></xsl:attribute>
        <h2>
          <xsl:value-of select="occupationType/title"/>
        </h2>
        <h3 class="subHead">
          <xsl:value-of select="company/name"/>
        </h3>
        <h3 class="subHead">
          <span class="region">
            <xsl:value-of select="company/location/city"/>
          </span>
          <span class="region">
            <xsl:value-of select="company/location/state/@code"/>
          </span>
        </h3>
        <h3 class="subHead"><xsl:value-of select="substring(startDate,1,7)"/> to <xsl:value-of select="substring(endDate,1,7)"/></h3>
        <div class="contentFiller"/>
        <xsl:apply-templates select="summaryList"/>
      </div>
<!--/xsl:if-->
    </xsl:for-each>
  </xsl:template>
  <xsl:template match="referenceList">
    <xsl:for-each select="reference">
<!--xsl:if test="@degree='basc'"-->
      <div class="subSection">
        <h2>
          <xsl:value-of select="name"/>
        </h2>
        <h3 class="subHead">
          <xsl:value-of select="@position"/>
        </h3>
        <h3 class="subHead">
          <xsl:value-of select="company/name"/>
        </h3>
        <div class="contentFiller"/>
        <div class="subHead"><xsl:value-of select="phone/@area"/>.<xsl:value-of select="phone/number"/><xsl:if test="phone/ext &gt; 0"> ext.<xsl:value-of select="phone/ext"/></xsl:if></div>
        <div class="subHead">
          <xsl:value-of select="email"/>
        </div>
        <div id="filler2"/>
      </div>
<!--/xsl:if-->
    </xsl:for-each>
  </xsl:template>
  <xsl:template match="projectList">
    <ul>
      <xsl:for-each select="project">
        <li>
          <xsl:attribute name="class">
            <xsl:value-of select="@category"/>
          </xsl:attribute>
          <xsl:value-of select="description"/>
        </li>
      </xsl:for-each>
    </ul>
  </xsl:template>
  <xsl:template match="interestList">
    <ul>
      <xsl:for-each select="interest">
        <xsl:choose>
          <xsl:when test="position()!=last()">
            <li>
              <xsl:value-of select="@name"/>
            </li>
          </xsl:when>
          <xsl:otherwise>
            <li>
              <xsl:attribute name="id">lastInterest</xsl:attribute>
              <xsl:value-of select="@name"/>
            </li>
          </xsl:otherwise>
        </xsl:choose>
      </xsl:for-each>
    </ul>
  </xsl:template>
  <xsl:template match="summaryList">
    <ul>
      <xsl:for-each select="summary">
        <li>
          <xsl:attribute name="class">
            <xsl:value-of select="@category"/>
          </xsl:attribute>
          <xsl:value-of select="description"/>
        </li>
      </xsl:for-each>
    </ul>
  </xsl:template>
  <xsl:template match="phoneList">
    <xsl:for-each select="phone">
      <div class="keyValue">
        <div class="key">
          <xsl:value-of select="@type"/>
        </div>
        <div class="value"><xsl:value-of select="@area"/>.<xsl:value-of select="number"/></div>
      </div>
    </xsl:for-each>
  </xsl:template>
  <xsl:template match="emailList">
    <xsl:for-each select="email">
      <xsl:if test="@type='school'">
        <div class="keyValue">
          <div class="key">email</div>
          <div class="value">
            <xsl:value-of select="address"/>
          </div>
        </div>
      </xsl:if>
    </xsl:for-each>
  </xsl:template>
  <xsl:template match="person">
    <div id="personName">
      <div>
        <span id="firstName">
          <xsl:value-of select="firstName"/>
        </span>
        <span id="lastName">
          <xsl:value-of select="lastName"/>
        </span>
      </div>
    </div>
  </xsl:template>
</xsl:stylesheet>
From grisha at modpython.org  Fri Jan 10 11:05:25 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:47:12 2004
Subject: [mod_python] 4XSLT/XML (4Suite) is not functioning correctly
In-Reply-To: <1042178225.27744.29.camel@refugeeMedia>
Message-ID: <20030110110412.V80550-100000@eden.ispol.com>

On 10 Jan 2003, Kia Vang wrote:

> Okay, I'm really frustrated.  My code seems very simple, yet I can't get
> mod_python to output it correctly.
>
> Here's the mod_python code:
>
> from Ft.Xml import InputSource
> from Ft.Xml.Xsl import Processor
>
> from mod_python import apache
>
> def handler(req):
> 	p = Processor.Processor()
> 	trans = InputSource.DefaultFactory.fromUri("request.xsl")
> 	src = InputSource.DefaultFactory.fromUri("request.xml")
> 	p.appendStylesheet(trans)
> 	res = p.run(src, topLevelParams={'error':0} )
>
> 	req.content_type="text/html"
> 	req.write(res)
>
> 	return apache.OK

So what specifically is wrong with the above code's behaviour? What it is
supposed to do and what does it really do?

Grisha


From nick.fearn at openmethods.com  Fri Jan 10 16:42:19 2003
From: nick.fearn at openmethods.com (Nick Fearn)
Date: Fri Jan  9 21:47:12 2004
Subject: [mod_python] Mod_python compilation and install
Message-ID: <IDEBKIECLBLNHJABHGBHCEIJCLAA.nick.fearn@openmethods.com>

Hi

I am having trouble compiling and installing Mod_python 2.7.8 (DSO) with
apache-1.3.22-3b, python 1.5.2 on YDL 2.2.

I have recompile python with no threads. The mod_python compile completes OK
but Make ends with the following errors.

Thanks for any help. Nick


[root@linux2t mod_python-2.7.8]# ./configure --with-apxs=/usr/sbin/apxs
creating cache ./config.cache
checking for gcc... gcc
checking whether the C compiler (gcc  ) works... yes
checking whether the C compiler (gcc  ) is a cross-compiler... no
checking whether we are using GNU C... yes
checking whether gcc accepts -g... yes
checking for ranlib... ranlib
checking for ar... ar
checking for a BSD compatible install... /usr/bin/install -c
checking whether make sets ${MAKE}... yes
checking for main in -lm... yes
checking for working const... yes
checking your blood pressure... a bit high, but we can proceed
checking whether apxs is available
checking for --with-apxs... /usr/sbin/apxs executable, good
checking for Apache libexec directory... /usr/lib/apache
checking for Apache include directory... -I/usr/include/apache
checking for --with-apache... no
configure: warning: **** No apache sources specified, static compilation
will not be available.
configure: warning: **** You can use --with-apache to specify where your
Apache sources are.
checking for --with-python... no
checking for python... /usr/local/bin/python
checking Python version... 1.5
checking whether Python is compiled with thread support... no threads, good
checking Python install prefix... /usr/local
checking what libraries Python was linked with...
/usr/local/lib/python1.5/config/libpython1.5.a   -lieee -ldl    -lm
checking linker flags used to link Python...
checking where Python include files are... -I/usr/local/include/python1.5
checking for mkdep... no
checking for makedepend... no
updating cache ./config.cache
creating ./config.status
creating Makefile
creating src/Makefile
creating src/libpython.module
creating Doc/Makefile
[root@linux2t mod_python-2.7.8]# make
make[1]: Entering directory `/home/nick/mod_python-2.7.8/src'
gcc  -I/home/nick/mod_python-2.7.8/src/include -I/usr/include/apache -I/usr/
local/include/python1.5    -c -o mod_python.o mod_python.c
gcc  -I/home/nick/mod_python-2.7.8/src/include -I/usr/include/apache -I/usr/
local/include/python1.5    -c -o _apachemodule.o _apachemodule.c
gcc  -I/home/nick/mod_python-2.7.8/src/include -I/usr/include/apache -I/usr/
local/include/python1.5    -c -o requestobject.o requestobject.c
gcc  -I/home/nick/mod_python-2.7.8/src/include -I/usr/include/apache -I/usr/
local/include/python1.5    -c -o tableobject.o tableobject.c
gcc  -I/home/nick/mod_python-2.7.8/src/include -I/usr/include/apache -I/usr/
local/include/python1.5    -c -o util.o util.c
gcc  -I/home/nick/mod_python-2.7.8/src/include -I/usr/include/apache -I/usr/
local/include/python1.5    -c -o serverobject.o serverobject.c
gcc  -I/home/nick/mod_python-2.7.8/src/include -I/usr/include/apache -I/usr/
local/include/python1.5    -c -o connobject.o connobject.c

Compiling for DSO. For static, do "make static"

/usr/sbin/apxs -I/home/nick/mod_python-2.7.8/src/include -I/usr/include/apac
he -I/usr/local/include/python1.5 -c mod_python.o _apachemodule.o
requestobject.o tableobject.o util.o serverobject.o connobject.o  -lm
/usr/local/lib/python1.5/config/libpython1.5.a   -lieee -ldl    -lm
gcc -shared -o mod_python.so mod_python.o _apachemodule.o requestobject.o
tableobject.o util.o serverobject.o connobject.o -lm
/usr/local/lib/python1.5/config/libpython1.5.a -lieee -ldl -lm
/usr/bin/ld: mod_python.so: undefined versioned symbol name
_LIB_VERSION@@GLIBC_2.0
/usr/bin/ld: failed to set dynamic section sizes: Bad value
collect2: ld returned 1 exit status
apxs:Break: Command failed with rc=1
make[1]: *** [mod_python.so] Error 1
make[1]: Leaving directory `/home/nick/mod_python-2.7.8/src'
make: *** [do_dso] Error 2
[root@linux2t mod_python-2.7.8]#


From Mongryong at sympatico.ca  Fri Jan 10 12:31:37 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 21:47:12 2004
Subject: [mod_python] 4XSLT/XML (4Suite) is not functioning correctly
In-Reply-To: <20030110110412.V80550-100000@eden.ispol.com>
References: <20030110110412.V80550-100000@eden.ispol.com>
Message-ID: <1042219898.1298.13.camel@refugeeMedia>

I've attached two files:

cgi_result.html: the correct result as outputted by cgi/standalone
version of my script

modpython_result.html: the result as outputted by a mod_python version
of my script

From grisha at modpython.org  Fri Jan 10 12:39:06 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:47:12 2004
Subject: [mod_python] 4XSLT/XML (4Suite) is not functioning correctly
In-Reply-To: <1042219898.1298.13.camel@refugeeMedia>
Message-ID: <20030110123723.R80550-100000@eden.ispol.com>

My first guess would be something relating to current directory. In true
CGI, the current directory is set to that of where the script is located.
Mod_python doesn't do this because changing directory is not a thread-safe
thing to do. I'd try it with absolute paths to the files.

Grisha

On 10 Jan 2003, Mongryong wrote:

> I've attached two files:
>
> cgi_result.html: the correct result as outputted by cgi/standalone
> version of my script
>
> modpython_result.html: the result as outputted by a mod_python version
> of my script
>
> >From the result, you should see that the html body is empty in modpython
> version.  I've done some tests with the mod_python version of my script
> and everything seems correct up to this point:
>
> res = p.run(src, topLevelParams={'error':0} )
>
> 'res' is the result of the transformation as a string.  The
> 'request.xsl' provides instructions to the XSLT engine on how to
> transform 'request.xml' to a HTML document.  No errors or exceptions are
> thrown.  It just seems as if the 'values' in 'request.xml' are NULL
> (empty) - hence, the body of the HTML is empty.
>
> Like I said previously, I've tried switching to a different XML/XSLT
> library (libxml2/libxslt from GNOME project) and I get the same result.
>
> On Fri, 2003-01-10 at 11:05, Gregory (Grisha) Trubetskoy wrote:
> >
> > On 10 Jan 2003, Kia Vang wrote:
> >
> > > Okay, I'm really frustrated.  My code seems very simple, yet I can't get
> > > mod_python to output it correctly.
> > >
> > > Here's the mod_python code:
> > >
> > > from Ft.Xml import InputSource
> > > from Ft.Xml.Xsl import Processor
> > >
> > > from mod_python import apache
> > >
> > > def handler(req):
> > > 	p = Processor.Processor()
> > > 	trans = InputSource.DefaultFactory.fromUri("request.xsl")
> > > 	src = InputSource.DefaultFactory.fromUri("request.xml")
> > > 	p.appendStylesheet(trans)
> > > 	res = p.run(src, topLevelParams={'error':0} )
> > >
> > > 	req.content_type="text/html"
> > > 	req.write(res)
> > >
> > > 	return apache.OK
> >
> > So what specifically is wrong with the above code's behaviour? What it is
> > supposed to do and what does it really do?
> >
> > Grisha
> >
> > _______________________________________________
> > Mod_python mailing list
> > Mod_python@modpython.org
> > http://www.modpython.org/mailman/listinfo/mod_python
>
>


From Mongryong at sympatico.ca  Fri Jan 10 12:54:27 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 21:47:12 2004
Subject: [mod_python] 4XSLT/XML (4Suite) is not functioning correctly
In-Reply-To: <20030110123723.R80550-100000@eden.ispol.com>
References: <20030110123723.R80550-100000@eden.ispol.com>
Message-ID: <1042221267.1299.32.camel@refugeeMedia>

In my original script, I did include absolute paths.  I did not include
the absolute paths in the email version of the script.  But even with
the absolute path, I get the same 'empty' result.

On Fri, 2003-01-10 at 12:39, Gregory (Grisha) Trubetskoy wrote:
> 
> My first guess would be something relating to current directory. In true
> CGI, the current directory is set to that of where the script is located.
> Mod_python doesn't do this because changing directory is not a thread-safe
> thing to do. I'd try it with absolute paths to the files.
> 
> Grisha
> 
> On 10 Jan 2003, Mongryong wrote:
> 
> > I've attached two files:
> >
> > cgi_result.html: the correct result as outputted by cgi/standalone
> > version of my script
> >
> > modpython_result.html: the result as outputted by a mod_python version
> > of my script
> >
> > >From the result, you should see that the html body is empty in modpython
> > version.  I've done some tests with the mod_python version of my script
> > and everything seems correct up to this point:
> >
> > res = p.run(src, topLevelParams={'error':0} )
> >
> > 'res' is the result of the transformation as a string.  The
> > 'request.xsl' provides instructions to the XSLT engine on how to
> > transform 'request.xml' to a HTML document.  No errors or exceptions are
> > thrown.  It just seems as if the 'values' in 'request.xml' are NULL
> > (empty) - hence, the body of the HTML is empty.
> >
> > Like I said previously, I've tried switching to a different XML/XSLT
> > library (libxml2/libxslt from GNOME project) and I get the same result.
> >
> > On Fri, 2003-01-10 at 11:05, Gregory (Grisha) Trubetskoy wrote:
> > >
> > > On 10 Jan 2003, Kia Vang wrote:
> > >
> > > > Okay, I'm really frustrated.  My code seems very simple, yet I can't get
> > > > mod_python to output it correctly.
> > > >
> > > > Here's the mod_python code:
> > > >
> > > > from Ft.Xml import InputSource
> > > > from Ft.Xml.Xsl import Processor
> > > >
> > > > from mod_python import apache
> > > >
> > > > def handler(req):
> > > > 	p = Processor.Processor()
> > > > 	trans = InputSource.DefaultFactory.fromUri("request.xsl")
> > > > 	src = InputSource.DefaultFactory.fromUri("request.xml")
> > > > 	p.appendStylesheet(trans)
> > > > 	res = p.run(src, topLevelParams={'error':0} )
> > > >
> > > > 	req.content_type="text/html"
> > > > 	req.write(res)
> > > >
> > > > 	return apache.OK
> > >
> > > So what specifically is wrong with the above code's behaviour? What it is
> > > supposed to do and what does it really do?
> > >
> > > Grisha
> > >
> > > _______________________________________________
> > > Mod_python mailing list
> > > Mod_python@modpython.org
> > > http://www.modpython.org/mailman/listinfo/mod_python
> >
> >
> 



From thm at duke.edu  Sat Jan 11 21:56:00 2003
From: thm at duke.edu (Hunter Matthews)
Date: Fri Jan  9 21:47:13 2004
Subject: [mod_python] Upgrade to mod_python 3.0.0 causes some handlers not to run.
Message-ID: <1042340165.1840.16.camel@jade.biology.duke.edu>

I have program (current) that successfully uses the following
confirguration under apache 1.3.24 and mod_python 2.7.8 (redhat 7.2 or
7.3, basically) to have a TypeHandler, AccessHandler, and PythonHander
run on some get requests.

If I take this same configuration to httpd 2.0.40 and mod_python 3.0.0
(redhat 8.0) the python handler runs for the /XMLRPC requests, but
neither the TypeHandler or the AccessHandler is running for the
/XMLRPC/$RHN requests.

I'm assuming this a mod_python config issue, but some other 1.3-> 2.0
upgrade issue may have me here - my ignorance with apache 2.0 is nearly
complete.

Note that its the first block that works perfectly - all the  "/XMLRPC$"
are dealt with by the simple "handler()" function, and they seem to work
fine.

The "/XMLRPC/$RHN" hits _don't_ use the "handler()" function, but do
need to be run through the accesshandler() and the typehandler() (both,
for each request) but neither is running. 

Suggestions?
-----------------------------------------------------------------------------
Alias /XMLRPC/$RHN /local/linux/current/www

<Directory /local/linux/current/www>
    # Make certain this is set - current won't work without it
    Options FollowSymLinks
</Directory>

<Location ~ "/XMLRPC$">
    PythonPath "sys.path + ['/usr/share/current']"
    SetHandler python-program
    PythonHandler current_apache
</Location>

<Location /XMLRPC/$RHN>
    PythonPath "sys.path + ['/usr/share/current']"
    PythonHandlerModule current_apache
</Location>

-- 
Hunter Matthews                          Unix / Network Administrator
Office: BioScience 145/244               Duke Univ. Biology Department
Key: F0F88438 / FFB5 34C0 B350 99A4 BB02  9779 A5DB 8B09 F0F8 8438
Never take candy from strangers. Especially on the internet.


From LBerezhny at DevIS.com  Sun Jan 12 20:35:11 2003
From: LBerezhny at DevIS.com (Lex Berezhny)
Date: Fri Jan  9 21:47:13 2004
Subject: [mod_python] session data and shared memory
Message-ID: <1042421711.5857.17.camel@buddha>

hello,

I know the issue of session management has been brought up before, but I
have a more specific question on the topic. Is there a way to keep
session state across threads/forked apache processes?

Storing the session state in a database carries a lot of overhead since
every request requires at least one query.

Another solution I had in mind was to use the ZODB with ZEO, so that
when a user logs in for example a session object will be created in the
ZODB. But this seems like a great deal of hoops just to store a few
attributes of session.

I have also thought about implementing a very basic LDAP like session
registry service. Each mod_python process would open a connection to
this registry and be able to share session data with other processes.

Has anyone else faced such a problem? Are there any other ways to
synchronize data between mod_python instances?

thanks in advance,

 - lex

-- 
Lex Berezhny <LBerezhny@DevIS.com>


From gnb at itga.com.au  Mon Jan 13 13:40:51 2003
From: gnb at itga.com.au (Gregory Bond)
Date: Fri Jan  9 21:47:13 2004
Subject: [mod_python] session data and shared memory 
In-Reply-To: Your message of 12 Jan 2003 20:35:11 -0500.
Message-ID: <200301130240.NAA18281@lightning.itga.com.au>

LBerezhny@DevIS.com said:
> Has anyone else faced such a problem? Are there any other ways to
> synchronize data between mod_python instances? 

I'm using Albatross (http://www.object-craft.com.au/projects/albatross/) with 
great success for maintaining lots and lots of state in mod_python 
applications.  But it's a framework that might be hard to bolt on to existing 
mod_python code.



From jeffstearns at attbi.com  Sun Jan 12 18:53:37 2003
From: jeffstearns at attbi.com (Jeff Stearns)
Date: Fri Jan  9 21:47:13 2004
Subject: [mod_python] session data and shared memory
In-Reply-To: <1042421711.5857.17.camel@buddha>
Message-ID: <36FDCD68-26A2-11D7-8974-0030653DCC28@attbi.com>

I've had good success with a dedicated "session server".  It's a small 
python server which stores key/value pairs in memory using a Python 
dictionary.

Each apache child maintains a persistent TCP connection to the server. 
It uses a simple RPC protocol to store and fetch key/value pairs. The 
protocol allows for arbitrary binary data of unlimited size.

The server ages out stale data after it hasn't been used for a while.

I also wrote a tiny client-side connection manager in C which handles 
all the details of making and re-establishing connections.

I've used this in commercial web sites. Performance is excellent 
because overhead is so small. (It was originally developed on an 
ancient SPARC.) I might be able to dig up the source if you're 
interested, but it's not hard to write your own.

-jeff stearns

On Sunday, January 12, 2003, at 05:35 PM, Lex Berezhny wrote:

> hello,
>
> I know the issue of session management has been brought up before, but 
> I
> have a more specific question on the topic. Is there a way to keep
> session state across threads/forked apache processes?
>
> Storing the session state in a database carries a lot of overhead since
> every request requires at least one query.
>
> Another solution I had in mind was to use the ZODB with ZEO, so that
> when a user logs in for example a session object will be created in the
> ZODB. But this seems like a great deal of hoops just to store a few
> attributes of session.
>
> I have also thought about implementing a very basic LDAP like session
> registry service. Each mod_python process would open a connection to
> this registry and be able to share session data with other processes.
>
> Has anyone else faced such a problem? Are there any other ways to
> synchronize data between mod_python instances?
>
> thanks in advance,
>
>  - lex
>
> -- 
> Lex Berezhny <LBerezhny@DevIS.com>


From LBerezhny at DevIS.com  Sun Jan 12 22:41:12 2003
From: LBerezhny at DevIS.com (Lex Berezhny)
Date: Fri Jan  9 21:47:13 2004
Subject: [mod_python] session data and shared memory
In-Reply-To: <36FDCD68-26A2-11D7-8974-0030653DCC28@attbi.com>
References: <36FDCD68-26A2-11D7-8974-0030653DCC28@attbi.com>
Message-ID: <1042429272.6951.5.camel@buddha>

I would be most interested in this server, if you could find the code
that would be great.

I also took a look at Albatross (from Gregs post) and it contains a
rather simple but elegant session server, similar to what you have
described. If all else fails I will go with that, but I would like to
see your solution first :-)

thanks,

 - lex

On Sun, 2003-01-12 at 21:53, Jeff Stearns wrote:
> I've had good success with a dedicated "session server".  It's a small 
> python server which stores key/value pairs in memory using a Python 
> dictionary.
> 
> Each apache child maintains a persistent TCP connection to the server. 
> It uses a simple RPC protocol to store and fetch key/value pairs. The 
> protocol allows for arbitrary binary data of unlimited size.
> 
> The server ages out stale data after it hasn't been used for a while.
> 
> I also wrote a tiny client-side connection manager in C which handles 
> all the details of making and re-establishing connections.
> 
> I've used this in commercial web sites. Performance is excellent 
> because overhead is so small. (It was originally developed on an 
> ancient SPARC.) I might be able to dig up the source if you're 
> interested, but it's not hard to write your own.
> 
> -jeff stearns
> 
> On Sunday, January 12, 2003, at 05:35 PM, Lex Berezhny wrote:
> 
> > hello,
> >
> > I know the issue of session management has been brought up before, but 
> > I
> > have a more specific question on the topic. Is there a way to keep
> > session state across threads/forked apache processes?
> >
> > Storing the session state in a database carries a lot of overhead since
> > every request requires at least one query.
> >
> > Another solution I had in mind was to use the ZODB with ZEO, so that
> > when a user logs in for example a session object will be created in the
> > ZODB. But this seems like a great deal of hoops just to store a few
> > attributes of session.
> >
> > I have also thought about implementing a very basic LDAP like session
> > registry service. Each mod_python process would open a connection to
> > this registry and be able to share session data with other processes.
> >
> > Has anyone else faced such a problem? Are there any other ways to
> > synchronize data between mod_python instances?
> >
> > thanks in advance,
> >
> >  - lex
> >
> > -- 
> > Lex Berezhny <LBerezhny@DevIS.com>
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
-- 
Lex Berezhny <LBerezhny@DevIS.com>


From conrad at hep.caltech.edu  Sun Jan 12 20:07:29 2003
From: conrad at hep.caltech.edu (Conrad Steenberg)
Date: Fri Jan  9 21:47:13 2004
Subject: [mod_python] session data and shared memory
In-Reply-To: <1042421711.5857.17.camel@buddha>
References: <1042421711.5857.17.camel@buddha>
Message-ID: <1042430849.11468.94.camel@192.168.1.103>

Hi Lex

You can also take a look at using Berkeley DB, which carries a lot less
overhead than traditional DBs, and stores key value pairs (it looks like
a dictionary). It is very fast, persistent, and scales to TBs in size.
Which you hopefully don't need ;-)

The Python binding is at pybsddb.sf.net. I use it for an XML-RPC app
server at clarens.sf.net.

Cheers

Conrad

On Sun, 2003-01-12 at 17:35, Lex Berezhny wrote:
> hello,
> 
> I know the issue of session management has been brought up before, but I
> have a more specific question on the topic. Is there a way to keep
> session state across threads/forked apache processes?
> 
> Storing the session state in a database carries a lot of overhead since
> every request requires at least one query.
> 
> Another solution I had in mind was to use the ZODB with ZEO, so that
> when a user logs in for example a session object will be created in the
> ZODB. But this seems like a great deal of hoops just to store a few
> attributes of session.
> 
> I have also thought about implementing a very basic LDAP like session
> registry service. Each mod_python process would open a connection to
> this registry and be able to share session data with other processes.
> 
> Has anyone else faced such a problem? Are there any other ways to
> synchronize data between mod_python instances?
> 
> thanks in advance,
> 
>  - lex
-- 
Conrad Steenberg <conrad@hep.caltech.edu>


From Mongryong at sympatico.ca  Mon Jan 13 02:14:39 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 21:47:13 2004
Subject: [mod_python] 4XSLT/XML (4Suite) is not functioning correctly
In-Reply-To: <1042221267.1299.32.camel@refugeeMedia>
References: <20030110123723.R80550-100000@eden.ispol.com> 
	<1042221267.1299.32.camel@refugeeMedia>
Message-ID: <1042442079.1292.122.camel@refugeeMedia>

I forgot to mention this, but the same problem also occurs when the
source XML document is a string (or a cString.StringIO).

For example:

p = Processor.Processor()
trans = InputSource.DefaultFactory.fromUri("someXSLTdoc.xsl")
src = cString.StringIO ()
someModule.makeXMLdoc(src)
p.appendStylesheet(trans)
res = p.run(src)

req.content_type="text/html"
req.write(res)

return apache.OK  

On Fri, 2003-01-10 at 12:54, Mongryong wrote:
> In my original script, I did include absolute paths.  I did not include
> the absolute paths in the email version of the script.  But even with
> the absolute path, I get the same 'empty' result.
> 
> On Fri, 2003-01-10 at 12:39, Gregory (Grisha) Trubetskoy wrote:
> > 
> > My first guess would be something relating to current directory. In true
> > CGI, the current directory is set to that of where the script is located.
> > Mod_python doesn't do this because changing directory is not a thread-safe
> > thing to do. I'd try it with absolute paths to the files.
> > 
> > Grisha
> > 
> > On 10 Jan 2003, Mongryong wrote:
> > 
> > > I've attached two files:
> > >
> > > cgi_result.html: the correct result as outputted by cgi/standalone
> > > version of my script
> > >
> > > modpython_result.html: the result as outputted by a mod_python version
> > > of my script
> > >
> > > >From the result, you should see that the html body is empty in modpython
> > > version.  I've done some tests with the mod_python version of my script
> > > and everything seems correct up to this point:
> > >
> > > res = p.run(src, topLevelParams={'error':0} )
> > >
> > > 'res' is the result of the transformation as a string.  The
> > > 'request.xsl' provides instructions to the XSLT engine on how to
> > > transform 'request.xml' to a HTML document.  No errors or exceptions are
> > > thrown.  It just seems as if the 'values' in 'request.xml' are NULL
> > > (empty) - hence, the body of the HTML is empty.
> > >
> > > Like I said previously, I've tried switching to a different XML/XSLT
> > > library (libxml2/libxslt from GNOME project) and I get the same result.
> > >
> > > On Fri, 2003-01-10 at 11:05, Gregory (Grisha) Trubetskoy wrote:
> > > >
> > > > On 10 Jan 2003, Kia Vang wrote:
> > > >
> > > > > Okay, I'm really frustrated.  My code seems very simple, yet I can't get
> > > > > mod_python to output it correctly.
> > > > >
> > > > > Here's the mod_python code:
> > > > >
> > > > > from Ft.Xml import InputSource
> > > > > from Ft.Xml.Xsl import Processor
> > > > >
> > > > > from mod_python import apache
> > > > >
> > > > > def handler(req):
> > > > > 	p = Processor.Processor()
> > > > > 	trans = InputSource.DefaultFactory.fromUri("request.xsl")
> > > > > 	src = InputSource.DefaultFactory.fromUri("request.xml")
> > > > > 	p.appendStylesheet(trans)
> > > > > 	res = p.run(src, topLevelParams={'error':0} )
> > > > >
> > > > > 	req.content_type="text/html"
> > > > > 	req.write(res)
> > > > >
> > > > > 	return apache.OK
> > > >
> > > > So what specifically is wrong with the above code's behaviour? What it is
> > > > supposed to do and what does it really do?
> > > >
> > > > Grisha
> > > >
> > > > _______________________________________________
> > > > Mod_python mailing list
> > > > Mod_python@modpython.org
> > > > http://www.modpython.org/mailman/listinfo/mod_python
> > >
> > >
> > 
> 
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python



From thanos at 0x01.com  Mon Jan 13 20:06:38 2003
From: thanos at 0x01.com (thanos vassilakis)
Date: Fri Jan  9 21:47:13 2004
Subject: [mod_python] session data and shared memory
In-Reply-To: <1042430849.11468.94.camel@192.168.1.103>
Message-ID: <6F1E0EE9-275C-11D7-BC6F-00306559D868@0x01.com>

You should check out:
How-To: Easy mod_python Session Handling with pso.session
http://sourceforge.net/docman/display_doc.php?docid=10174&group_id=49265

We are using pso at the NYSE with success.

thanos


On Sunday, January 12, 2003, at 11:07  PM, Conrad Steenberg wrote:

> Hi Lex
>
> You can also take a look at using Berkeley DB, which carries a lot less
> overhead than traditional DBs, and stores key value pairs (it looks 
> like
> a dictionary). It is very fast, persistent, and scales to TBs in size.
> Which you hopefully don't need ;-)
>
> The Python binding is at pybsddb.sf.net. I use it for an XML-RPC app
> server at clarens.sf.net.
>
> Cheers
>
> Conrad
>
> On Sun, 2003-01-12 at 17:35, Lex Berezhny wrote:
>> hello,
>>
>> I know the issue of session management has been brought up before, 
>> but I
>> have a more specific question on the topic. Is there a way to keep
>> session state across threads/forked apache processes?
>>
>> Storing the session state in a database carries a lot of overhead 
>> since
>> every request requires at least one query.
>>
>> Another solution I had in mind was to use the ZODB with ZEO, so that
>> when a user logs in for example a session object will be created in 
>> the
>> ZODB. But this seems like a great deal of hoops just to store a few
>> attributes of session.
>>
>> I have also thought about implementing a very basic LDAP like session
>> registry service. Each mod_python process would open a connection to
>> this registry and be able to share session data with other processes.
>>
>> Has anyone else faced such a problem? Are there any other ways to
>> synchronize data between mod_python instances?
>>
>> thanks in advance,
>>
>>  - lex
> -- 
> Conrad Steenberg <conrad@hep.caltech.edu>
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python


From sa at sfsu.edu  Mon Jan 13 18:11:27 2003
From: sa at sfsu.edu (Sean Abrahams)
Date: Fri Jan  9 21:47:13 2004
Subject: [mod_python] Database Help
Message-ID: <17983005796.20030113181127@sfsu.edu>

I'm implementing mod_python and everything is working fine, until I
try to pass an UPDATE sql statement to a database.

I'm grabbing info from one database, and inserting/updating into
another database.

When grabbing, I call upon my dbSelect(db, keys, sql, rows) function,
which connects to a specified database (db) and selects the info.
Works great.

To update/insert I call upon my dbDo(db, sql) function. This function
connects to the specified database (db) and runs the sql. Python wise
everything seems to work fine. I call the dbDo and nothing appears to
go wrong. Except when I look at the data in the db, it wasn't updated.

All of this works fine from the interpreter, so I'm thinking it may
deal with the way mod_python handles processes and dbconnections, of
which I know very little of.

Thus, does connecting to two different databases, right after one
another, cause a problem in mod_python? I'm supposing I must change my
dbConnect() function to take this into consideration due to the way
mod_python/apache function.

Some ideas? I want to learn!

Thanks,
--Sean

Running:
Apache/2.0.43 (Debian GNU/Linux) DAV/2 mod_python/3.0.1 Python/2.2.1
cx_Oracle


From tim.parker at intec-telecom-systems.com  Tue Jan 14 14:49:53 2003
From: tim.parker at intec-telecom-systems.com (Tim Parker)
Date: Fri Jan  9 21:47:13 2004
Subject: [mod_python] Query about FieldStorage
Message-ID: <1042555792.16629.16.camel@isukws0321>

Hi,

I have recently installed Python 2.2.2 and Apache 2.0.43, and have
configured a directory to execute mod_python.  The problem I have is I
do not seem to be able to access any of the environment variables in the
Request Object form object.  Below is the part of my httpd.conf file and
also the python script that I am using.

# Adding directory for python
Alias /python/ "/usr/local/apache2/mod_python/"

<Directory "/usr/local/apache2/mod_python">
    AddHandler python-program .py
    SetHandler python-program
    PythonPath "sys.path+['/usr/local/apache2/mod_python']"
    PythonHandler mod_python.publisher
    Options +ExecCGI
    PythonDebug On
</Directory>

And the python function is as follows:

def my_test(req):
  dict = req.form

  list = req.form.list

  keys = dict.keys()
  str = dict_to_str(dict)

  str = "<H1>Test Page for FieldStorage</H1>\n"+ str + "\nlen(list) %d"
% len(list)

  return str


If anyone had any ideas or somewhere I can look at some examples for
using CGI Environment variables that would be really helpful.

Thanks in advance
regards
Tim.



This e-mail and any attachments are confidential and may also be privileged and/or copyright 
material of Intec Telecom Systems PLC (or its affiliated companies).  If you are not an 
intended or authorised recipient of this e-mail or have received it in error, please delete 
it immediately and notify the sender by e-mail.  In such a case, reading, reproducing, 
printing or further dissemination of this e-mail is strictly prohibited and may be unlawful. 
Intec Telecom Systems PLC. does not represent or warrant that an attachment hereto is free 
from computer viruses or other defects. The opinions expressed in this e-mail and any 
attachments may be those of the author and are not necessarily those of Intec Telecom 
Systems PLC. 

This footnote also confirms that this email message has been swept by
MIMEsweeper for the presence of computer viruses.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20030114/51d59bd9/attachment.htm
From grisha at modpython.org  Tue Jan 14 11:23:31 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:47:13 2004
Subject: [mod_python] Query about FieldStorage
In-Reply-To: <1042555792.16629.16.camel@isukws0321>
Message-ID: <20030114112118.W76303-100000@eden.ispol.com>

Tim - look for "subprocess_env" here:

http://www.modpython.org/live/mod_python-3.0.1/doc-html/pyapi-mprequest-mem.html

Grisha

On 14 Jan 2003, Tim Parker wrote:

> Hi,
>
> I have recently installed Python 2.2.2 and Apache 2.0.43, and have
> configured a directory to execute mod_python.  The problem I have is I
> do not seem to be able to access any of the environment variables in the
> Request Object form object.  Below is the part of my httpd.conf file and
> also the python script that I am using.
>
> # Adding directory for python
> Alias /python/ "/usr/local/apache2/mod_python/"
>
> <Directory "/usr/local/apache2/mod_python">
>     AddHandler python-program .py
>     SetHandler python-program
>     PythonPath "sys.path+['/usr/local/apache2/mod_python']"
>     PythonHandler mod_python.publisher
>     Options +ExecCGI
>     PythonDebug On
> </Directory>
>
> And the python function is as follows:
>
> def my_test(req):
>   dict = req.form
>
>   list = req.form.list
>
>   keys = dict.keys()
>   str = dict_to_str(dict)
>
>   str = "<H1>Test Page for FieldStorage</H1>\n"+ str + "\nlen(list) %d"
> % len(list)
>
>   return str
>
>
> If anyone had any ideas or somewhere I can look at some examples for
> using CGI Environment variables that would be really helpful.
>
> Thanks in advance
> regards
> Tim.
>
>
>
> This e-mail and any attachments are confidential and may also be privileged and/or copyright
> material of Intec Telecom Systems PLC (or its affiliated companies).  If you are not an
> intended or authorised recipient of this e-mail or have received it in error, please delete
> it immediately and notify the sender by e-mail.  In such a case, reading, reproducing,
> printing or further dissemination of this e-mail is strictly prohibited and may be unlawful.
> Intec Telecom Systems PLC. does not represent or warrant that an attachment hereto is free
> from computer viruses or other defects. The opinions expressed in this e-mail and any
> attachments may be those of the author and are not necessarily those of Intec Telecom
> Systems PLC.
>
> This footnote also confirms that this email message has been swept by
> MIMEsweeper for the presence of computer viruses.
>
>


From sa at sfsu.edu  Tue Jan 14 10:43:49 2003
From: sa at sfsu.edu (Sean Abrahams)
Date: Fri Jan  9 21:47:13 2004
Subject: [mod_python] Database Help
In-Reply-To: <D31B04F24EDE7644BB169BB4F080778A06C236A9@s30342g004005>
References: <D31B04F24EDE7644BB169BB4F080778A06C236A9@s30342g004005>
Message-ID: <41042547859.20030114104349@sfsu.edu>

Thanks for all the replies, but I am indeed committing my statement.
Remember I said it worked when not using mod_python =).

Here's my dbDo function:

def dbDo(db, sql):
    dbCon = dbConnect(db)
    dbCursor = dbCon.cursor()

    dbCursor.execute(sql)
    dbCon.commit()

None of this really makes sense because the code seems to run fine,
giving back no errors. It doesn't even work when I tell it to
explicitly run commit via a sql statement.

I'm using cx_Oracle module to connect to an Oracle 8.1.6 database.

In mod_python must you first disconnect from a database, before
connecting to another one, within the same script?

Thanks for the help.

--Sean
    
Tuesday, January 14, 2003, 6:07:32 AM, you wrote:

YH> I am going to make a simple guess here. I might be wrong but I have been
YH> caught off guard when I forget to issue a commit statement. Maybe the
YH> database connections on the updates/inserts are not automatically
YH> committing.

YH> -----Original Message-----
YH> From: Sean Abrahams [mailto:sa@sfsu.edu]
YH> Sent: Monday, January 13, 2003 9:11 PM
YH> To: mod_python@modpython.org
YH> Subject: [mod_python] Database Help


YH> I'm implementing mod_python and everything is working fine, until I
YH> try to pass an UPDATE sql statement to a database.

YH> I'm grabbing info from one database, and inserting/updating into
YH> another database.

YH> When grabbing, I call upon my dbSelect(db, keys, sql, rows) function,
YH> which connects to a specified database (db) and selects the info.
YH> Works great.

YH> To update/insert I call upon my dbDo(db, sql) function. This function
YH> connects to the specified database (db) and runs the sql. Python wise
YH> everything seems to work fine. I call the dbDo and nothing appears to
YH> go wrong. Except when I look at the data in the db, it wasn't updated.

YH> All of this works fine from the interpreter, so I'm thinking it may
YH> deal with the way mod_python handles processes and dbconnections, of
YH> which I know very little of.

YH> Thus, does connecting to two different databases, right after one
YH> another, cause a problem in mod_python? I'm supposing I must change my
YH> dbConnect() function to take this into consideration due to the way
YH> mod_python/apache function.

YH> Some ideas? I want to learn!

YH> Thanks,
YH> --Sean

YH> Running:
YH> Apache/2.0.43 (Debian GNU/Linux) DAV/2 mod_python/3.0.1 Python/2.2.1
YH> cx_Oracle

YH> _______________________________________________
YH> Mod_python mailing list
YH> Mod_python@modpython.org
YH> http://www.modpython.org/mailman/listinfo/mod_python


From sa at sfsu.edu  Tue Jan 14 10:49:15 2003
From: sa at sfsu.edu (Sean Abrahams)
Date: Fri Jan  9 21:47:13 2004
Subject: [mod_python] Database Help
In-Reply-To: <D31B04F24EDE7644BB169BB4F080778A06C236A9@s30342g004005>
References: <D31B04F24EDE7644BB169BB4F080778A06C236A9@s30342g004005>
Message-ID: <481042874359.20030114104915@sfsu.edu>

Please ignore my last message. I solved the problem, and it wasn't
mod_python related. It had to do with a global variable mixup.

Ahh, the little things.

I apologize for the inconvenience and thanks again for everyones help.

--Sean


Tuesday, January 14, 2003, 6:07:32 AM, you wrote:

YH> I am going to make a simple guess here. I might be wrong but I have been
YH> caught off guard when I forget to issue a commit statement. Maybe the
YH> database connections on the updates/inserts are not automatically
YH> committing.

YH> -----Original Message-----
YH> From: Sean Abrahams [mailto:sa@sfsu.edu]
YH> Sent: Monday, January 13, 2003 9:11 PM
YH> To: mod_python@modpython.org
YH> Subject: [mod_python] Database Help


YH> I'm implementing mod_python and everything is working fine, until I
YH> try to pass an UPDATE sql statement to a database.

YH> I'm grabbing info from one database, and inserting/updating into
YH> another database.

YH> When grabbing, I call upon my dbSelect(db, keys, sql, rows) function,
YH> which connects to a specified database (db) and selects the info.
YH> Works great.

YH> To update/insert I call upon my dbDo(db, sql) function. This function
YH> connects to the specified database (db) and runs the sql. Python wise
YH> everything seems to work fine. I call the dbDo and nothing appears to
YH> go wrong. Except when I look at the data in the db, it wasn't updated.

YH> All of this works fine from the interpreter, so I'm thinking it may
YH> deal with the way mod_python handles processes and dbconnections, of
YH> which I know very little of.

YH> Thus, does connecting to two different databases, right after one
YH> another, cause a problem in mod_python? I'm supposing I must change my
YH> dbConnect() function to take this into consideration due to the way
YH> mod_python/apache function.

YH> Some ideas? I want to learn!

YH> Thanks,
YH> --Sean

YH> Running:
YH> Apache/2.0.43 (Debian GNU/Linux) DAV/2 mod_python/3.0.1 Python/2.2.1
YH> cx_Oracle

YH> _______________________________________________
YH> Mod_python mailing list
YH> Mod_python@modpython.org
YH> http://www.modpython.org/mailman/listinfo/mod_python


From Hans.Yandle at cingular.com  Tue Jan 14 13:57:00 2003
From: Hans.Yandle at cingular.com (Yandle, Hans)
Date: Fri Jan  9 21:47:13 2004
Subject: [mod_python] Database Help
Message-ID: <D31B04F24EDE7644BB169BB4F080778A06C236B1@s30342g004005>

Well, I do not have any experience with Oracle db connections. With MS ODBC
connections using the win32 extensions, I have had to issue commit() then
close() for information to take affect. I have used MySQL dbi and PySQLite
with no problems with just commits only. When you run your database update
script, test and see if it is actually committed the data before the
termination of the python script. To my knowledge when a python script
finishes the variables are cleaned up and connections closed. Perhaps the
termination of the python script is causing the buffers or information to be
committed. Maybe a question to the Oracle python dbi maintainer/group might
help.

-----Original Message-----
From: Sean Abrahams [mailto:sa@sfsu.edu]
Sent: Tuesday, January 14, 2003 1:44 PM
To: Yandle, Hans; mod_python@modpython.org
Subject: Re[2]: [mod_python] Database Help


Thanks for all the replies, but I am indeed committing my statement.
Remember I said it worked when not using mod_python =).

Here's my dbDo function:

def dbDo(db, sql):
    dbCon = dbConnect(db)
    dbCursor = dbCon.cursor()

    dbCursor.execute(sql)
    dbCon.commit()

None of this really makes sense because the code seems to run fine,
giving back no errors. It doesn't even work when I tell it to
explicitly run commit via a sql statement.

I'm using cx_Oracle module to connect to an Oracle 8.1.6 database.

In mod_python must you first disconnect from a database, before
connecting to another one, within the same script?

Thanks for the help.

--Sean
    
Tuesday, January 14, 2003, 6:07:32 AM, you wrote:

YH> I am going to make a simple guess here. I might be wrong but I have been
YH> caught off guard when I forget to issue a commit statement. Maybe the
YH> database connections on the updates/inserts are not automatically
YH> committing.

YH> -----Original Message-----
YH> From: Sean Abrahams [mailto:sa@sfsu.edu]
YH> Sent: Monday, January 13, 2003 9:11 PM
YH> To: mod_python@modpython.org
YH> Subject: [mod_python] Database Help


YH> I'm implementing mod_python and everything is working fine, until I
YH> try to pass an UPDATE sql statement to a database.

YH> I'm grabbing info from one database, and inserting/updating into
YH> another database.

YH> When grabbing, I call upon my dbSelect(db, keys, sql, rows) function,
YH> which connects to a specified database (db) and selects the info.
YH> Works great.

YH> To update/insert I call upon my dbDo(db, sql) function. This function
YH> connects to the specified database (db) and runs the sql. Python wise
YH> everything seems to work fine. I call the dbDo and nothing appears to
YH> go wrong. Except when I look at the data in the db, it wasn't updated.

YH> All of this works fine from the interpreter, so I'm thinking it may
YH> deal with the way mod_python handles processes and dbconnections, of
YH> which I know very little of.

YH> Thus, does connecting to two different databases, right after one
YH> another, cause a problem in mod_python? I'm supposing I must change my
YH> dbConnect() function to take this into consideration due to the way
YH> mod_python/apache function.

YH> Some ideas? I want to learn!

YH> Thanks,
YH> --Sean

YH> Running:
YH> Apache/2.0.43 (Debian GNU/Linux) DAV/2 mod_python/3.0.1 Python/2.2.1
YH> cx_Oracle

YH> _______________________________________________
YH> Mod_python mailing list
YH> Mod_python@modpython.org
YH> http://www.modpython.org/mailman/listinfo/mod_python
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20030114/a35ad92e/attachment.htm
From thm at duke.edu  Tue Jan 14 18:37:34 2003
From: thm at duke.edu (Hunter Matthews)
Date: Fri Jan  9 21:47:13 2004
Subject: [mod_python] Upgrade to mod_python 3.0.0 causes some handlers
	not to run.
In-Reply-To: <1042340165.1840.16.camel@jade.biology.duke.edu>
References: <1042340165.1840.16.camel@jade.biology.duke.edu>
Message-ID: <1042587454.1423.25.camel@jade.biology.duke.edu>

Sorry to reply to my own email, but if anyone wants a simple working
test case, let me know I'll post that to this list - this has both the
developers of current completely stumped.



On Sat, 2003-01-11 at 21:56, Hunter Matthews wrote:
> I have program (current) that successfully uses the following
> confirguration under apache 1.3.24 and mod_python 2.7.8 (redhat 7.2 or
> 7.3, basically) to have a TypeHandler, AccessHandler, and PythonHander
> run on some get requests.
> 
> If I take this same configuration to httpd 2.0.40 and mod_python 3.0.0
> (redhat 8.0) the python handler runs for the /XMLRPC requests, but
> neither the TypeHandler or the AccessHandler is running for the
> /XMLRPC/$RHN requests.
> 
> I'm assuming this a mod_python config issue, but some other 1.3-> 2.0
> upgrade issue may have me here - my ignorance with apache 2.0 is nearly
> complete.
> 
> Note that its the first block that works perfectly - all the  "/XMLRPC$"
> are dealt with by the simple "handler()" function, and they seem to work
> fine.
> 
> The "/XMLRPC/$RHN" hits _don't_ use the "handler()" function, but do
> need to be run through the accesshandler() and the typehandler() (both,
> for each request) but neither is running. 
> 
> Suggestions?
> -----------------------------------------------------------------------------
> Alias /XMLRPC/$RHN /local/linux/current/www
> 
> <Directory /local/linux/current/www>
>     # Make certain this is set - current won't work without it
>     Options FollowSymLinks
> </Directory>
> 
> <Location ~ "/XMLRPC$">
>     PythonPath "sys.path + ['/usr/share/current']"
>     SetHandler python-program
>     PythonHandler current_apache
> </Location>
> 
> <Location /XMLRPC/$RHN>
>     PythonPath "sys.path + ['/usr/share/current']"
>     PythonHandlerModule current_apache
> </Location>
> 
> -- 
> Hunter Matthews                          Unix / Network Administrator
> Office: BioScience 145/244               Duke Univ. Biology Department
> Key: F0F88438 / FFB5 34C0 B350 99A4 BB02  9779 A5DB 8B09 F0F8 8438
> Never take candy from strangers. Especially on the internet.
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 
> 
-- 
Hunter Matthews                          Unix / Network Administrator
Office: BioScience 145/244               Duke Univ. Biology Department
Key: F0F88438 / FFB5 34C0 B350 99A4 BB02  9779 A5DB 8B09 F0F8 8438
Never take candy from strangers. Especially on the internet.


From neo at https.ru  Wed Jan 15 03:17:12 2003
From: neo at https.ru (Neo Eureka)
Date: Fri Jan  9 21:47:13 2004
Subject: [mod_python] ?
Message-ID: <18341556445.20030115031712@https.ru>

  Hi, folks !

  Some questions for Grisha.
  I use Python and mod_python in commercial projects, where the
stability is very important. So I want to ask when do you plan to
issue the next stable version of mod_python (or at least the
alpha-beta stuff) with all the fixes and features which has been
reported and discussed on the mail lists and in the documentation, and
those which you, as the author, might want to include ?

--- 
Neo Eureka / mailto:neo@https.ru


From mark at camazotz.com  Wed Jan 15 14:48:22 2003
From: mark at camazotz.com (Mark Smith)
Date: Fri Jan  9 21:47:13 2004
Subject: [mod_python] mod_python and MultiViews
Message-ID: <4DFF2CEE-28C2-11D7-ADE3-00039364CE50@camazotz.com>

I have mod_python 3.0 running with Apache 2.0.43.  Using the publisher 
handler, a request for "/foo.py/bar" resolves correctly.  If I turn on 
MultiViews in httpd.conf and use the URL "/foo/bar", it fails.  In the 
error log, I get:

   Negotiation: discovered file(s) matching request: /apache2/htdocs/foo
   (None could be negotiated).

This is on an OpenBSD system, but the same thing works fine on Mac OS 
X.  Anyone know what I'm missing to convince Apache that it should 
accept foo.py?

thx


From jwm-modpython at sentinelchicken.net  Wed Jan 15 16:17:08 2003
From: jwm-modpython at sentinelchicken.net (Jason Morgan)
Date: Fri Jan  9 21:47:13 2004
Subject: [mod_python] IE not using cached images
Message-ID: <20030115211708.GA47149@sentinelchicken.net>

Please excuse me if this question is elementary. I am having trouble
with IE and its refusal to use images it caches. What happens is the
first time I hit my site, everything works as it should - all images are
downloaded, etc. If I then hit another page on my site with the same
images, IE refuses to use the images in its cache and instead requests
all of them again. Not only that, but the rollover images are requested
each and every time I put the mouse over the images. Now, if I hit
reload, then everything works fine again. If I hit another page, again,
the same problem, over and over and over again.

Now I've played with IE's settings and have discovered that setting
"Check for newer version of stored pages" to "Never" makes IE act as it
should. And I have checked if the images are actually getting cached,
they are. I have also tested other browsers (Opera, Netscape, etc.) and
none of these have the same problem.

Now to the question, should I be sending the client something (304?) to
tell it to use its cache unless the user specifically presses reload?

OS: FreeBSD 4.7
Apache: 1.3.27
Mod_python: 2.7.8
Python: 2.2.2

Thanks,

Jason


From geertj at boskant.nl  Wed Jan 15 22:55:57 2003
From: geertj at boskant.nl (Geert Jansen)
Date: Fri Jan  9 21:47:13 2004
Subject: [mod_python] IE not using cached images
In-Reply-To: <20030115211708.GA47149@sentinelchicken.net>
References: <20030115211708.GA47149@sentinelchicken.net>
Message-ID: <20030115215557.GA28196@vader.boskant.nl>

On Wed, Jan 15, 2003 at 04:17:08PM -0500, Jason Morgan wrote:

> Please excuse me if this question is elementary. I am having trouble
> with IE and its refusal to use images it caches. What happens is the
> first time I hit my site, everything works as it should - all images are
> downloaded, etc. If I then hit another page on my site with the same
> images, IE refuses to use the images in its cache and instead requests
> all of them again. Not only that, but the rollover images are requested
> each and every time I put the mouse over the images. Now, if I hit
> reload, then everything works fine again. If I hit another page, again,
> the same problem, over and over and over again.

I have seen this problem too. I did the following things:

* Make sure an appropriate "Last-Modified" http header is sent.
* If the image is dynamically generated, make sure that there is
  no query part in the URL, i.e. the part after '?'. I think MSIE
  reloads these URLs every time. You can still pass parameters by
  using path_info.

For me this worked.

Greetings,
Geert Jansen

From jwm-modpython at sentinelchicken.net  Wed Jan 15 19:45:27 2003
From: jwm-modpython at sentinelchicken.net (Jason Morgan)
Date: Fri Jan  9 21:47:13 2004
Subject: [mod_python] IE not using cached images
In-Reply-To: <20030115215557.GA28196@vader.boskant.nl>
References: <20030115211708.GA47149@sentinelchicken.net> <20030115215557.GA28196@vader.boskant.nl>
Message-ID: <20030116004527.GB47580@sentinelchicken.net>

On Wed, Jan 15, 2003 at 10:55:57PM +0100, Geert Jansen wrote:
>
> I have seen this problem too. I did the following things:
>
> * Make sure an appropriate "Last-Modified" http header is sent.

I'm sorry for my ignorance but how do I do this? Is this in addition to
send_http_header() or do I modify the http header to be sent?

> * If the image is dynamically generated, make sure that there is
>   no query part in the URL, i.e. the part after '?'. I think MSIE
>   reloads these URLs every time. You can still pass parameters by
>   using path_info.

This isn't an issue as all images are static.

Thanks,

Jason


From thanos at 0x01.com  Thu Jan 16 00:19:10 2003
From: thanos at 0x01.com (thanos vassilakis)
Date: Fri Jan  9 21:47:13 2004
Subject: [mod_python] Query about FieldStorage
In-Reply-To: <1042555792.16629.16.camel@isukws0321>
Message-ID: <0B1B5939-2912-11D7-8A98-00306559D868@0x01.com>

If you use pso you will have env available in a neat and easy manner:

http://sourceforge.net/docman/display_doc.php?docid=11314&group_id=49265

Or you can always see how in pso we get all the enviromental variables 
;)


good luck,

thanos


On Tuesday, January 14, 2003, at 09:49  AM, Tim Parker wrote:

> Hi,
>
> I have recently installed Python 2.2.2 and Apache 2.0.43, and have 
> configured a directory to execute mod_python.? The problem I have is I 
> do not seem to be able to access any of the environment variables in 
> the Request Object form object.? Below is the part of my httpd.conf 
> file and also the python script that I am using.
>
> # Adding directory for python
> Alias /python/ "/usr/local/apache2/mod_python/"
>
> <Directory "/usr/local/apache2/mod_python">
> ??? AddHandler python-program .py
> ??? SetHandler python-program
> ??? PythonPath "sys.path+['/usr/local/apache2/mod_python']"
> ??? PythonHandler mod_python.publisher
> ??? Options +ExecCGI
> ??? PythonDebug On
> </Directory>
>
> And the python function is as follows:
>
> def my_test(req):
> ? dict = req.form
>
> ? list = req.form.list
>
> ? keys = dict.keys()
> ? str = dict_to_str(dict)
>
> ? str = "<H1>Test Page for FieldStorage</H1>\n"+ str + "\nlen(list) 
> %d" % len(list)
>
> ? return str
>
>
> If anyone had any ideas or somewhere I can look at some examples for 
> using CGI Environment variables that would be really helpful.
>
> Thanks in advance
> regards
> Tim.
>
>
>
> This e-mail and any attachments are confidential and may also be 
> privileged and/or copyright
> material of Intec Telecom Systems PLC (or its affiliated companies). 
> If you are not an
> intended or authorised recipient of this e-mail or have received it in 
> error, please delete
> it immediately and notify the sender by e-mail. In such a case, 
> reading, reproducing,
> printing or further dissemination of this e-mail is strictly 
> prohibited and may be unlawful.
> Intec Telecom Systems PLC. does not represent or warrant that an 
> attachment hereto is free
> from computer viruses or other defects. The opinions expressed in this 
> e-mail and any
> attachments may be those of the author and are not necessarily those 
> of Intec Telecom
> Systems PLC.
>
> This footnote also confirms that this email message has been swept by
> MIMEsweeper for the presence of computer viruses.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: text/enriched
Size: 2398 bytes
Desc: not available
Url : http://mailman.modpython.org/pipermail/mod_python/attachments/20030116/bf4edf39/attachment.bin
From jwm-modpython at sentinelchicken.net  Thu Jan 16 11:43:25 2003
From: jwm-modpython at sentinelchicken.net (Jason Morgan)
Date: Fri Jan  9 21:47:13 2004
Subject: [mod_python] IE not using cached images
In-Reply-To: <000901c2bd32$cc927540$bd6e4351@mixio7jpsmlatx>
References: <20030115211708.GA47149@sentinelchicken.net> <000901c2bd32$cc927540$bd6e4351@mixio7jpsmlatx>
Message-ID: <20030116164325.GD47580@sentinelchicken.net>

> This won't hurt:
> 
> req.headers_out.add("Cache-Control:","no-cache")
> req.headers_out.add("Pragma:","no-cache")

Won't this make the browser request the contents again? What I want is
for IE not to request what it already has cached.

> 
> as welll as adding this to your HTML header:
> 
> """<meta http-equiv="expires" content="Tue, 20 Aug 1996 01:00:00 GMT">\
> <meta http-equiv="Pragma" content="no-cache"><title>%s</title>%s</head>"""

Maybe the content expiration will work.

Thanks,

Jason

From jwm-modpython at sentinelchicken.net  Thu Jan 16 13:09:27 2003
From: jwm-modpython at sentinelchicken.net (Jason Morgan)
Date: Fri Jan  9 21:47:13 2004
Subject: [mod_python] IE not using cached images
In-Reply-To: <20030116164325.GD47580@sentinelchicken.net>
References: <20030115211708.GA47149@sentinelchicken.net> <000901c2bd32$cc927540$bd6e4351@mixio7jpsmlatx> <20030116164325.GD47580@sentinelchicken.net>
Message-ID: <20030116180927.GC49849@sentinelchicken.net>

As usual, the error was caused by my own ignorance. I fixed the problem
by sending adding an expiration date to the header.

req.headers_out.add('Expires',expire_date)

Thanks for everyone's help.

-Jason

On Thu, Jan 16, 2003 at 11:43:25AM -0500, Jason Morgan wrote:
> > This won't hurt:
> > 
> > req.headers_out.add("Cache-Control:","no-cache")
> > req.headers_out.add("Pragma:","no-cache")
> 
> Won't this make the browser request the contents again? What I want is
> for IE not to request what it already has cached.
> 
> > 
> > as welll as adding this to your HTML header:
> > 
> > """<meta http-equiv="expires" content="Tue, 20 Aug 1996 01:00:00 GMT">\
> > <meta http-equiv="Pragma" content="no-cache"><title>%s</title>%s</head>"""
> 
> Maybe the content expiration will work.
> 
> Thanks,
> 
> Jason
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python

From geertj at boskant.nl  Thu Jan 16 19:18:19 2003
From: geertj at boskant.nl (Geert Jansen)
Date: Fri Jan  9 21:47:13 2004
Subject: [mod_python] IE not using cached images
In-Reply-To: <20030116004527.GB47580@sentinelchicken.net>
References: <20030115211708.GA47149@sentinelchicken.net> <20030115215557.GA28196@vader.boskant.nl> <20030116004527.GB47580@sentinelchicken.net>
Message-ID: <20030116181819.GA9238@vader.boskant.nl>

On Wed, Jan 15, 2003 at 07:45:27PM -0500, Jason Morgan wrote:

Hello Jason,

> On Wed, Jan 15, 2003 at 10:55:57PM +0100, Geert Jansen wrote:
> >
> > I have seen this problem too. I did the following things:
> >
> > * Make sure an appropriate "Last-Modified" http header is sent.
> 
> I'm sorry for my ignorance but how do I do this? Is this in addition to
> send_http_header() or do I modify the http header to be sent?

You can use request.headers_out to add http headers.

But ... are you serving images with mod_python or are you using Apache for
that? Only if you are using mod_python, you can change the something about
the http response. But it would not make much sense IMHO to use mod_python
for this because Apache does a good job at serving static content.

When I wrote my response I was under the impression that you were using
mod_python for serving images.

> > * If the image is dynamically generated, make sure that there is
> >   no query part in the URL, i.e. the part after '?'. I think MSIE
> >   reloads these URLs every time. You can still pass parameters by
> >   using path_info.
> 
> This isn't an issue as all images are static.

Greetings,
Geert Jansen

From kriedel at syntricity.com  Thu Jan 16 16:13:46 2003
From: kriedel at syntricity.com (Klaus Riedel)
Date: Fri Jan  9 21:47:13 2004
Subject: [mod_python] mod_python installation on winnt
Message-ID: <NFBBIPNKHKMOHBPGHEIAIEPJCKAA.kriedel@syntricity.com>

Hello All,

I am learning Python and am trying to run/implement the code in "Leaning
Python" book chapter 10.  This is just an html form that calls some python
code feedback.py.

Before we get into whether or not I installed the mod_python.dll correctly
let me know if this behaviour is normal.  In my IE url address I point to
the html code that is a form, that when filled and submitted will call the
script feedback.py.  When I fill the form and hit submit, I get the text for
feedback.py to come up on my browser.  I would expect this if mod_python is
not installed.  If however, I place my curser in the url address ( it is
till pointing to
(E:\syntricity\home\armstrong\webserver\cgi-bin\feedback.py) and hit return
the script (feedback.py) which outputs html is actually run??? i.e. the cmd
window comes up and tells me that none of the form fields where filled out
and then quickly closes.  The reason I ask if this is normal is because if I
point to a perl script and run it from the browser I get the page not found
screen on the browser.

What is wierd is that I get the same response whether or not I am pointing
to my original working conf file or not which leads me to believe that I
have not installed correctly.  (I am just stopping and restarting my apache
services between conf edits).

I am running apache 1.3 and python 2.2 and I have downloaded the
mod_python-2.78 dll and placed it in my E:\Apache\modules directory, I have
placed my python scripts in
E:/syntricity/home/armstrong/webserver/cgi-bin/python and have the following
items in my conf file:

Could my options in my conf be wrong?
.
.

#
# Dynamic Shared Object (DSO) Support
#
LoadModule anon_auth_module modules/ApacheModuleAuthAnon.dll
LoadModule cern_meta_module modules/ApacheModuleCERNMeta.dll
LoadModule digest_module modules/ApacheModuleDigest.dll
LoadModule expires_module modules/ApacheModuleExpires.dll
LoadModule headers_module modules/ApacheModuleHeaders.dll
LoadModule proxy_module modules/ApacheModuleProxy.dll
LoadModule rewrite_module modules/ApacheModuleRewrite.dll
LoadModule speling_module modules/ApacheModuleSpeling.dll
LoadModule status_module modules/ApacheModuleStatus.dll
LoadModule usertrack_module modules/ApacheModuleUserTrack.dll
LoadModule python_module modules/mod_python.dll

ExtendedStatus On

.
.
.
ServerName armstrong
ServerAdmin webmaster@syntricity.com
DocumentRoot E:/syntricity/home/armstrong/webserver/htdocs
UserDir "E:/Apache/users/"
Alias /cgi-bin/ "E:/syntricity/home/armstrong/webserver/cgi-bin/"
Alias /python/  "E:/syntricity/home/armstrong/webserver/htdocs/python/"

ScriptAlias /cgi-bin/ "E:/syntricity/home/armstrong/webserver/cgi-bin/"
ScriptAlias /python/
"E:/syntricity/home/armstrong/webserver/htdocs/python/"

Alias /icons/ "E:/syntricity/home/armstrong/webserver/icons/"
<Directory />
    Options FollowSymLinks
    AllowOverride None
</Directory>
<Directory "E:/syntricity/home/armstrong/webserver/htdocs">
    Options  FollowSymLinks
    AllowOverride None
    Order allow,deny
    Allow from all
</Directory>
<Directory "E:/syntricity/home/armstrong/webserver/cgi-bin">
    AllowOverride None
    Options None
</Directory>

<Directory "E:/syntricity/home/armstrong/webserver/cgi-bin/python">
    AddHandler python-program .py
    PythonHandler mptest
    PythonDebug on
    Options +ExecCGI
</Directory>


From tim.parker at intec-telecom-systems.com  Fri Jan 17 11:26:15 2003
From: tim.parker at intec-telecom-systems.com (Tim Parker (UK))
Date: Fri Jan  9 21:47:13 2004
Subject: [mod_python] Query about client server interaction
Message-ID: <7F124BC48D56D411812500D0B747251403B7B433@FILESERVER002>

Hi,
 
This is both a bit of understanding mod_python and also how CGI scripts in
general work, basically I have a long running query which can take up to a
minute or so to process, I want to return a page to the User immediately
saying what it is doing, ideally I would like this page to get updated
during the processing of the other operation.  And then when it has finished
the process it loads the resulting page on the Client.
 
I believe some of this is possible with server-push but this only works in
Netscape as far as I can tell.  Also I can load a temporary page and have a
refresh every few seconds which will check to see if the other process has
finished, but I was wondering if anyone knows of a clever way to achieve
this, ideally to have a dynamically updating page which checks the status of
the process and when it has finished loads the final page.
 
Thanks in advance for anyone who has any ideas on this.
Cheers
Tim.


This e-mail and any attachments are confidential and may also be privileged and/or copyright 
material of Intec Telecom Systems PLC (or its affiliated companies).  If you are not an 
intended or authorised recipient of this e-mail or have received it in error, please delete 
it immediately and notify the sender by e-mail.  In such a case, reading, reproducing, 
printing or further dissemination of this e-mail is strictly prohibited and may be unlawful. 
Intec Telecom Systems PLC. does not represent or warrant that an attachment hereto is free 
from computer viruses or other defects. The opinions expressed in this e-mail and any 
attachments may be those of the author and are not necessarily those of Intec Telecom 
Systems PLC. 

This footnote also confirms that this email message has been swept by
MIMEsweeper for the presence of computer viruses.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20030117/5cfa159a/attachment.htm
From vfranceschetti at virgilio.it  Fri Jan 17 13:30:19 2003
From: vfranceschetti at virgilio.it (vfranceschetti@virgilio.it)
Date: Fri Jan  9 21:47:13 2004
Subject: [mod_python] Proble starting Apache
Message-ID: <3E24FD9E00005F4A@ims1a.cp.tin.it>

Hi,
i've installed Python 2.2.1 and Apache 2.0 in a win2000 Professional.

i have put this line in httpd.conf 

LoadModule python_module modules/mod_python.so

and file mod_python.so under the /modules dir.

When i try to start Apache i get this error:

Syntax error on line 173 of C:/Programmi/Apache Group/Apache2/conf/httpd.conf:
Cannot load C:/Programmi/Apache Group/Apache2/modules/mod_python.so into
server: impossible to find the specified module.

Some suggestion?

Thanks
Valentino



From gdamjan at mail.net.mk  Fri Jan 17 14:32:31 2003
From: gdamjan at mail.net.mk (Damjan)
Date: Fri Jan  9 21:47:14 2004
Subject: [mod_python] ModPython modules and applications
Message-ID: <20030117133231.GA26276@legolas.on.net.mk>

It would be nice if there's a central place were all of the
mod_python modules, helpers and opensource applications are documented.

Please reply here if you have any info on this topic, and later
we can put all of this on some wiki page.


-- 
Damjan Georgievski

From thanos at 0x01.com  Fri Jan 17 09:58:09 2003
From: thanos at 0x01.com (thanos@0x01.com)
Date: Fri Jan  9 21:47:14 2004
Subject: [mod_python] Re: Query about client server interaction
In-Reply-To: <7F124BC48D56D411812500D0B747251403B7B433@FILESERVER002>
References: <7F124BC48D56D411812500D0B747251403B7B433@FILESERVER002>
Message-ID: <20030117145809.7867.qmail@0x01.com>

Use a meta-refresh in the html header of you status page. 

So your status page keeps loading itself until the work is ready. 


thanos 

ps: using pso would make your life easier.
http://sourceforge.net/projects/pso/
http://sourceforge.net/docman/?group_id=49265 

Tim Parker (UK) writes: 

> Hi,
>  
> This is both a bit of understanding mod_python and also how CGI scripts in
> general work, basically I have a long running query which can take up to a
> minute or so to process, I want to return a page to the User immediately
> saying what it is doing, ideally I would like this page to get updated
> during the processing of the other operation.  And then when it has finished
> the process it loads the resulting page on the Client.
>  
> I believe some of this is possible with server-push but this only works in
> Netscape as far as I can tell.  Also I can load a temporary page and have a
> refresh every few seconds which will check to see if the other process has
> finished, but I was wondering if anyone knows of a clever way to achieve
> this, ideally to have a dynamically updating page which checks the status of
> the process and when it has finished loads the final page.
>  
> Thanks in advance for anyone who has any ideas on this.
> Cheers
> Tim. 
> 
> 
> This e-mail and any attachments are confidential and may also be privileged and/or copyright 
> material of Intec Telecom Systems PLC (or its affiliated companies).  If you are not an 
> intended or authorised recipient of this e-mail or have received it in error, please delete 
> it immediately and notify the sender by e-mail.  In such a case, reading, reproducing, 
> printing or further dissemination of this e-mail is strictly prohibited and may be unlawful. 
> Intec Telecom Systems P

LC. does not represent or warrant that an attachment hereto is free
> from computer viruses or other defects. The opinions expressed in this e-mail and any 
> attachments may be those of the author and are not necessarily those of Intec Telecom 
> Systems PLC.  
> 
> This footnote also confirms that this email message has been swept by
> MIMEsweeper for the presence of computer viruses. 
> 
 


thanos vassilakis
127 greene street
New York
NY 10012-5401
w. 212 383 2777 


From listmail at xs4all.nl  Fri Jan 17 22:23:36 2003
From: listmail at xs4all.nl (baz)
Date: Fri Jan  9 21:47:14 2004
Subject: [mod_python] Query about client server interaction
In-Reply-To: <7F124BC48D56D411812500D0B747251403B7B433@FILESERVER002>
References: <7F124BC48D56D411812500D0B747251403B7B433@FILESERVER002>
Message-ID: <3E287458.1090500@xs4all.nl>


You can achieve this by sending pieces of javacript whenever you want to 
update something (like a progress bar or whatever).

You also need to be able to flush the output buffer to apache, (my setup 
seems to do this implicitly ?) otherwise i would've tried req.flush().

Works on major browsers, just make sure you send <script> tags everytime 
for this is needed by NN4 (or later?).

baz.

Tim Parker (UK) wrote:
> 
> 
> Hi,
> 
>  
> 
> This is both a bit of understanding mod_python and also how CGI scripts 
> in general work, basically I have a long running query which can take up 
> to a minute or so to process, I want to return a page to the User 
> immediately saying what it is doing, ideally I would like this page to 
> get updated during the processing of the other operation.  And then when 
> it has finished the process it loads the resulting page on the Client.
> 
>  
> 
> I believe some of this is possible with server-push but this only works 
> in Netscape as far as I can tell.  Also I can load a temporary page and 
> have a refresh every few seconds which will check to see if the other 
> process has finished, but I was wondering if anyone knows of a clever 
> way to achieve this, ideally to have a dynamically updating page which 
> checks the status of the process and when it has finished loads the 
> final page.
> 
>  
> 
> Thanks in advance for anyone who has any ideas on this.


From josh at janrain.com  Fri Jan 17 15:44:09 2003
From: josh at janrain.com (Josh Hoyt)
Date: Fri Jan  9 21:47:14 2004
Subject: [mod_python] mod_python and Python 2.3
Message-ID: <1042847049.2550.63.camel@rye>

Hello,

I'm trying to get mod_python working with python 2.3, and I've run into
some problems related to module importing. For some reason, it fails to
import the site module. The same setup works with Python 2.2, so I'm
pretty sure that it has something to do with the Python version and not
the configuration. Running with Python in verbose mode, the following
shows up in the apache error log file:

[...]
# trying /home/josh/scratch/python/lib/python2.3/site.py
# /home/josh/scratch/python/lib/python2.3/site.pyc matches /home/josh/scratch/python/lib/python2.3/site.py
import site # precompiled from /home/josh/scratch/python/lib/python2.3/site.pyc
[...]
'import site' failed; traceback:
ImportError: No module named site
[...]

I've attached the full error log in case there are any details there 
that I failed to make clear in the excerpts above.

This problem appears with:
Python 2.3a1, Apache 1.3.20, mod_python 2.7.6 or 2.7.8
Python 2.3a1, Apache 2.0.43, mod_python 3.0.1

It goes away with Python 2.2.2.

Any ideas about where to go from here?

Thanks,
Josh Hoyt
<josh@janrain.com>
-------------- next part --------------
# installing zipimport hook
import zipimport # builtin
# installed zipimport hook
# trying /home/josh/prj/top/josh/site.so
# trying /home/josh/prj/top/josh/sitemodule.so
# trying /home/josh/prj/top/josh/site.py
# trying /home/josh/prj/top/josh/site.pyc
# trying /home/josh/prj/top/site.so
# trying /home/josh/prj/top/sitemodule.so
# trying /home/josh/prj/top/site.py
# trying /home/josh/prj/top/site.pyc
# trying /home/josh/scratch/python/lib/python23.zip/site.so
# trying /home/josh/scratch/python/lib/python23.zip/sitemodule.so
# trying /home/josh/scratch/python/lib/python23.zip/site.py
# trying /home/josh/scratch/python/lib/python23.zip/site.pyc
# trying /home/josh/scratch/python/lib/python2.3/site.so
# trying /home/josh/scratch/python/lib/python2.3/sitemodule.so
# trying /home/josh/scratch/python/lib/python2.3/site.py
# /home/josh/scratch/python/lib/python2.3/site.pyc matches /home/josh/scratch/python/lib/python2.3/site.py
import site # precompiled from /home/josh/scratch/python/lib/python2.3/site.pyc
# trying /home/josh/prj/top/josh/os.so
# trying /home/josh/prj/top/josh/osmodule.so
# trying /home/josh/prj/top/josh/os.py
# trying /home/josh/prj/top/josh/os.pyc
# trying /home/josh/prj/top/os.so
# trying /home/josh/prj/top/osmodule.so
# trying /home/josh/prj/top/os.py
# trying /home/josh/prj/top/os.pyc
# trying /home/josh/scratch/python/lib/python23.zip/os.so
# trying /home/josh/scratch/python/lib/python23.zip/osmodule.so
# trying /home/josh/scratch/python/lib/python23.zip/os.py
# trying /home/josh/scratch/python/lib/python23.zip/os.pyc
# trying /home/josh/scratch/python/lib/python2.3/os.so
# trying /home/josh/scratch/python/lib/python2.3/osmodule.so
# trying /home/josh/scratch/python/lib/python2.3/os.py
# /home/josh/scratch/python/lib/python2.3/os.pyc matches /home/josh/scratch/python/lib/python2.3/os.py
import os # precompiled from /home/josh/scratch/python/lib/python2.3/os.pyc
import posix # builtin
# trying /home/josh/prj/top/josh/posixpath.so
# trying /home/josh/prj/top/josh/posixpathmodule.so
# trying /home/josh/prj/top/josh/posixpath.py
# trying /home/josh/prj/top/josh/posixpath.pyc
# trying /home/josh/prj/top/posixpath.so
# trying /home/josh/prj/top/posixpathmodule.so
# trying /home/josh/prj/top/posixpath.py
# trying /home/josh/prj/top/posixpath.pyc
# trying /home/josh/scratch/python/lib/python23.zip/posixpath.so
# trying /home/josh/scratch/python/lib/python23.zip/posixpathmodule.so
# trying /home/josh/scratch/python/lib/python23.zip/posixpath.py
# trying /home/josh/scratch/python/lib/python23.zip/posixpath.pyc
# trying /home/josh/scratch/python/lib/python2.3/posixpath.so
# trying /home/josh/scratch/python/lib/python2.3/posixpathmodule.so
# trying /home/josh/scratch/python/lib/python2.3/posixpath.py
# /home/josh/scratch/python/lib/python2.3/posixpath.pyc matches /home/josh/scratch/python/lib/python2.3/posixpath.py
import posixpath # precompiled from /home/josh/scratch/python/lib/python2.3/posixpath.pyc
# trying /home/josh/prj/top/josh/stat.so
# trying /home/josh/prj/top/josh/statmodule.so
# trying /home/josh/prj/top/josh/stat.py
# trying /home/josh/prj/top/josh/stat.pyc
# trying /home/josh/prj/top/stat.so
# trying /home/josh/prj/top/statmodule.so
# trying /home/josh/prj/top/stat.py
# trying /home/josh/prj/top/stat.pyc
# trying /home/josh/scratch/python/lib/python23.zip/stat.so
# trying /home/josh/scratch/python/lib/python23.zip/statmodule.so
# trying /home/josh/scratch/python/lib/python23.zip/stat.py
# trying /home/josh/scratch/python/lib/python23.zip/stat.pyc
# trying /home/josh/scratch/python/lib/python2.3/stat.so
# trying /home/josh/scratch/python/lib/python2.3/statmodule.so
# trying /home/josh/scratch/python/lib/python2.3/stat.py
# /home/josh/scratch/python/lib/python2.3/stat.pyc matches /home/josh/scratch/python/lib/python2.3/stat.py
import stat # precompiled from /home/josh/scratch/python/lib/python2.3/stat.pyc
# trying /home/josh/prj/top/josh/UserDict.so
# trying /home/josh/prj/top/josh/UserDictmodule.so
# trying /home/josh/prj/top/josh/UserDict.py
# trying /home/josh/prj/top/josh/UserDict.pyc
# trying /home/josh/prj/top/UserDict.so
# trying /home/josh/prj/top/UserDictmodule.so
# trying /home/josh/prj/top/UserDict.py
# trying /home/josh/prj/top/UserDict.pyc
# trying /home/josh/scratch/python/lib/python23.zip/UserDict.so
# trying /home/josh/scratch/python/lib/python23.zip/UserDictmodule.so
# trying /home/josh/scratch/python/lib/python23.zip/UserDict.py
# trying /home/josh/scratch/python/lib/python23.zip/UserDict.pyc
# trying /home/josh/scratch/python/lib/python2.3/UserDict.so
# trying /home/josh/scratch/python/lib/python2.3/UserDictmodule.so
# trying /home/josh/scratch/python/lib/python2.3/UserDict.py
# /home/josh/scratch/python/lib/python2.3/UserDict.pyc matches /home/josh/scratch/python/lib/python2.3/UserDict.py
import UserDict # precompiled from /home/josh/scratch/python/lib/python2.3/UserDict.pyc
# trying /home/josh/prj/top/josh/copy_reg.so
# trying /home/josh/prj/top/josh/copy_regmodule.so
# trying /home/josh/prj/top/josh/copy_reg.py
# trying /home/josh/prj/top/josh/copy_reg.pyc
# trying /home/josh/prj/top/copy_reg.so
# trying /home/josh/prj/top/copy_regmodule.so
# trying /home/josh/prj/top/copy_reg.py
# trying /home/josh/prj/top/copy_reg.pyc
# trying /home/josh/scratch/python/lib/python23.zip/copy_reg.so
# trying /home/josh/scratch/python/lib/python23.zip/copy_regmodule.so
# trying /home/josh/scratch/python/lib/python23.zip/copy_reg.py
# trying /home/josh/scratch/python/lib/python23.zip/copy_reg.pyc
# trying /home/josh/scratch/python/lib/python2.3/copy_reg.so
# trying /home/josh/scratch/python/lib/python2.3/copy_regmodule.so
# trying /home/josh/scratch/python/lib/python2.3/copy_reg.py
# /home/josh/scratch/python/lib/python2.3/copy_reg.pyc matches /home/josh/scratch/python/lib/python2.3/copy_reg.py
import copy_reg # precompiled from /home/josh/scratch/python/lib/python2.3/copy_reg.pyc
# trying /home/josh/prj/top/josh/types.so
# trying /home/josh/prj/top/josh/typesmodule.so
# trying /home/josh/prj/top/josh/types.py
# trying /home/josh/prj/top/josh/types.pyc
# trying /home/josh/prj/top/types.so
# trying /home/josh/prj/top/typesmodule.so
# trying /home/josh/prj/top/types.py
# trying /home/josh/prj/top/types.pyc
# trying /home/josh/scratch/python/lib/python23.zip/types.so
# trying /home/josh/scratch/python/lib/python23.zip/typesmodule.so
# trying /home/josh/scratch/python/lib/python23.zip/types.py
# trying /home/josh/scratch/python/lib/python23.zip/types.pyc
# trying /home/josh/scratch/python/lib/python2.3/types.so
# trying /home/josh/scratch/python/lib/python2.3/typesmodule.so
# trying /home/josh/scratch/python/lib/python2.3/types.py
# /home/josh/scratch/python/lib/python2.3/types.pyc matches /home/josh/scratch/python/lib/python2.3/types.py
import types # precompiled from /home/josh/scratch/python/lib/python2.3/types.pyc
# trying /home/josh/prj/top/josh/sitecustomize.so
# trying /home/josh/prj/top/josh/sitecustomizemodule.so
# trying /home/josh/prj/top/josh/sitecustomize.py
# trying /home/josh/prj/top/josh/sitecustomize.pyc
# trying /home/josh/prj/top/sitecustomize.so
# trying /home/josh/prj/top/sitecustomizemodule.so
# trying /home/josh/prj/top/sitecustomize.py
# trying /home/josh/prj/top/sitecustomize.pyc
# trying /home/josh/scratch/python/lib/python23.zip/sitecustomize.so
# trying /home/josh/scratch/python/lib/python23.zip/sitecustomizemodule.so
# trying /home/josh/scratch/python/lib/python23.zip/sitecustomize.py
# trying /home/josh/scratch/python/lib/python23.zip/sitecustomize.pyc
# trying /home/josh/scratch/python/lib/python2.3/sitecustomize.so
# trying /home/josh/scratch/python/lib/python2.3/sitecustomizemodule.so
# trying /home/josh/scratch/python/lib/python2.3/sitecustomize.py
# trying /home/josh/scratch/python/lib/python2.3/sitecustomize.pyc
# trying /home/josh/scratch/python/lib/python2.3/plat-linux2/sitecustomize.so
# trying /home/josh/scratch/python/lib/python2.3/plat-linux2/sitecustomizemodule.so
# trying /home/josh/scratch/python/lib/python2.3/plat-linux2/sitecustomize.py
# trying /home/josh/scratch/python/lib/python2.3/plat-linux2/sitecustomize.pyc
# trying /home/josh/scratch/python/lib/python2.3/lib-tk/sitecustomize.so
# trying /home/josh/scratch/python/lib/python2.3/lib-tk/sitecustomizemodule.so
# trying /home/josh/scratch/python/lib/python2.3/lib-tk/sitecustomize.py
# trying /home/josh/scratch/python/lib/python2.3/lib-tk/sitecustomize.pyc
# trying /home/josh/scratch/python/lib/python2.3/lib-dynload/sitecustomize.so
# trying /home/josh/scratch/python/lib/python2.3/lib-dynload/sitecustomizemodule.so
# trying /home/josh/scratch/python/lib/python2.3/lib-dynload/sitecustomize.py
# trying /home/josh/scratch/python/lib/python2.3/lib-dynload/sitecustomize.pyc
# trying /home/josh/scratch/python/lib/python2.3/site-packages/sitecustomize.so
# trying /home/josh/scratch/python/lib/python2.3/site-packages/sitecustomizemodule.so
# trying /home/josh/scratch/python/lib/python2.3/site-packages/sitecustomize.py
# trying /home/josh/scratch/python/lib/python2.3/site-packages/sitecustomize.pyc
[Fri Jan 17 15:04:46 2003] [warn] pid file /home/josh/scratch/apache2/logs/httpd.pid overwritten -- Unclean shutdown of previous Apache run?
import __builtin__ # previously loaded (__builtin__)
import sys # previously loaded (sys)
'import site' failed; traceback:
ImportError: No module named site
From dustin at ywlcs.org  Fri Jan 17 20:20:55 2003
From: dustin at ywlcs.org (Dustin Mitchell)
Date: Fri Jan  9 21:47:14 2004
Subject: [mod_python] Re: Query about client server interaction
In-Reply-To: <20030117145809.7867.qmail@0x01.com>
References: <7F124BC48D56D411812500D0B747251403B7B433@FILESERVER002> <20030117145809.7867.qmail@0x01.com>
Message-ID: <20030118022054.GN15058@eleanor.internal.ywlcs.org>

On Fri, Jan 17, 2003 at 09:58:09AM -0500, thanos@0x01.com wrote:
> Use a meta-refresh in the html header of you status page. 

I believe the Refresh HTTP header (with the same format) works as well.  I
think the use of meta-refresh grew out of people using it to make their
static HTML documents act dynamic.

(It works for me with Mozilla)

Dustin

-- 

  Dustin Mitchell
  dustin@ywlcs.org/djmitche@alumni.uchicago.edu
  http://people.cs.uchicago.edu/~dustin/

From geertj at boskant.nl  Sat Jan 18 12:53:36 2003
From: geertj at boskant.nl (Geert Jansen)
Date: Fri Jan  9 21:47:14 2004
Subject: [mod_python] mod_python and Python 2.3
In-Reply-To: <1042847049.2550.63.camel@rye>
References: <1042847049.2550.63.camel@rye>
Message-ID: <20030118115336.GA4522@vader.boskant.nl>

On Fri, Jan 17, 2003 at 03:44:09PM -0800, Josh Hoyt wrote:
> Hello,
> 
> I'm trying to get mod_python working with python 2.3, and I've run into
> some problems related to module importing. For some reason, it fails to
> import the site module. The same setup works with Python 2.2, so I'm
> pretty sure that it has something to do with the Python version and not
> the configuration. Running with Python in verbose mode, the following
> shows up in the apache error log file:

This is a Python bug in Py_NewInterpreter() (or in some other place that
makes Py_NewInterpreter() fail). I sumbitted it to the Python developers
but I got no reply yet. The bug is described here:

http://sourceforge.net/tracker/index.php?func=detail&aid=668708&group_id=5470&atid=105470

Greetings,
Geert

From tim.parker at intec-telecom-systems.com  Mon Jan 20 09:43:34 2003
From: tim.parker at intec-telecom-systems.com (Tim Parker (UK))
Date: Fri Jan  9 21:47:14 2004
Subject: [mod_python] Query about client server interaction
Message-ID: <7F124BC48D56D411812500D0B747251403B7B43B@FILESERVER002>

Thanks Baz,

Just to clarify this a bit as I am quite new to all this, I can output my
Initial Page, including some Java Script and then later on output some more
Java Script which will then update the page on the Client.

I don't suppose you know of somewhere where I can see an example of this, as
that would be really useful.

Thanks
Tim.

-----Original Message-----
From: baz [mailto:listmail@xs4all.nl]
Sent: 17 January 2003 21:24
To: Tim Parker (UK); mod_python@modpython.org
Subject: Re: [mod_python] Query about client server interaction


You can achieve this by sending pieces of javacript whenever you want to
update something (like a progress bar or whatever).

You also need to be able to flush the output buffer to apache, (my setup
seems to do this implicitly ?) otherwise i would've tried req.flush().

Works on major browsers, just make sure you send <script> tags everytime
for this is needed by NN4 (or later?).

baz.

Tim Parker (UK) wrote:
>
>
> Hi,
>
> 
>
> This is both a bit of understanding mod_python and also how CGI scripts
> in general work, basically I have a long running query which can take up
> to a minute or so to process, I want to return a page to the User
> immediately saying what it is doing, ideally I would like this page to
> get updated during the processing of the other operation.  And then when
> it has finished the process it loads the resulting page on the Client.
>
> 
>
> I believe some of this is possible with server-push but this only works
> in Netscape as far as I can tell.  Also I can load a temporary page and
> have a refresh every few seconds which will check to see if the other
> process has finished, but I was wondering if anyone knows of a clever
> way to achieve this, ideally to have a dynamically updating page which
> checks the status of the process and when it has finished loads the
> final page.
>
> 
>
> Thanks in advance for anyone who has any ideas on this.


This e-mail and any attachments are confidential and may also be privileged and/or copyright 
material of Intec Telecom Systems PLC (or its affiliated companies).  If you are not an 
intended or authorised recipient of this e-mail or have received it in error, please delete 
it immediately and notify the sender by e-mail.  In such a case, reading, reproducing, 
printing or further dissemination of this e-mail is strictly prohibited and may be unlawful. 
Intec Telecom Systems PLC. does not represent or warrant that an attachment hereto is free 
from computer viruses or other defects. The opinions expressed in this e-mail and any 
attachments may be those of the author and are not necessarily those of Intec Telecom 
Systems PLC. 

This footnote also confirms that this email message has been swept by
MIMEsweeper for the presence of computer viruses.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20030120/3b5ac633/attachment.htm
From tim.parker at intec-telecom-systems.com  Mon Jan 20 16:25:28 2003
From: tim.parker at intec-telecom-systems.com (Tim Parker (UK))
Date: Fri Jan  9 21:47:14 2004
Subject: [mod_python] Wierd problem with API version mismatch
Message-ID: <7F124BC48D56D411812500D0B747251403B7B445@FILESERVER002>

I managed to install the mod_python module and it was working with no
problems at all with my Apache server running on Port 8080, I have now
migrated this server to be the main server and shutdown the original server
which was running on Port 80.  But whenever I try to access a python script
it gives me the following message in the error_log file:
 
[Mon Jan 20 16:17:25 2003] [notice] Digest: generating secret for digest
authentication ...
[Mon Jan 20 16:17:25 2003] [notice] Digest: done
[Mon Jan 20 16:17:25 2003] [notice] Apache/2.0.43 (Unix) mod_perl/1.99_08
Perl/v5.6.1 DAV/2 mod_python/3.0.1 Python/2.2.1 PHP/4.3.0s
warning: Python C API version mismatch for module strop: This Python has API
version 1011, module strop has version 1007.
Fatal Python error: can't initialize module strop
[Mon Jan 20 16:17:38 2003] [notice] child pid 6213 exit signal Aborted (6)
 
The Linux version the Apache 2 server is running on is : Linux thunder
2.4.18-17.7.x #1 Tue Oct 8 13:33:14 EDT 2002 i686 unknown
 
What I don't understand is this sometimes seems to work and then other times
it gives me this error message - does anyone know what could cause this as
it is very confusing as it used to work under the different port, but I
can't see how that would affect it, or what else could have caused the
problem to occur when it was working ok before.
 
Thanks for any help on this weird problem!!!!
Tim.


This e-mail and any attachments are confidential and may also be privileged and/or copyright 
material of Intec Telecom Systems PLC (or its affiliated companies).  If you are not an 
intended or authorised recipient of this e-mail or have received it in error, please delete 
it immediately and notify the sender by e-mail.  In such a case, reading, reproducing, 
printing or further dissemination of this e-mail is strictly prohibited and may be unlawful. 
Intec Telecom Systems PLC. does not represent or warrant that an attachment hereto is free 
from computer viruses or other defects. The opinions expressed in this e-mail and any 
attachments may be those of the author and are not necessarily those of Intec Telecom 
Systems PLC. 

This footnote also confirms that this email message has been swept by
MIMEsweeper for the presence of computer viruses.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20030120/1787c015/attachment.htm
From josh at janrain.com  Mon Jan 20 15:31:14 2003
From: josh at janrain.com (Josh Hoyt)
Date: Fri Jan  9 21:47:14 2004
Subject: [mod_python] mod_python and Python 2.3
In-Reply-To: <20030118115336.GA4522@vader.boskant.nl>
References: <1042847049.2550.63.camel@rye> 
	<20030118115336.GA4522@vader.boskant.nl>
Message-ID: <1043105474.2669.7.camel@rye>

> This is a Python bug in Py_NewInterpreter() (or in some other place that
> makes Py_NewInterpreter() fail). I sumbitted it to the Python developers
> but I got no reply yet. The bug is described here:
> 
> http://sourceforge.net/tracker/index.php?func=detail&aid=668708&group_id=5470&atid=105470

The problem appears to be that meta_path is not being
initialized in the new interpreter. Adding
_PyImportHooks_Init to Py_NewInterpreter seems to fix the
problem, initializing the new import hooks before trying to
import modules into the new interpreter.

Patch 671459 contains this fix.

Yeah for mod_python in Python 2.3!

Josh

From gnb at itga.com.au  Tue Jan 21 11:28:27 2003
From: gnb at itga.com.au (Gregory Bond)
Date: Fri Jan  9 21:47:14 2004
Subject: [mod_python] Query about client server interaction 
In-Reply-To: Your message of Fri, 17 Jan 2003 11:26:15 -0000.
Message-ID: <200301210028.LAA29527@lightning.itga.com.au>

> This is both a bit of understanding mod_python and also how CGI scripts in
> general work, basically I have a long running query which can take up to a
> minute or so to process, I want to return a page to the User immediately
> saying what it is doing, ideally I would like this page to get updated
> during the processing of the other operation. 

Along with the other responses, I'd like to offer an alternative solution 
(that may or may not work, depending on how the job is structured).

Anything you send to the client gets sent straight away, so you can use this 
fact to write on-going status messages.  Something like this:

import time
from mod_python import apache

def handler(req):
    req.content_type = "text/html"
    req.write('''<html>
    <head><title>Example Delay Code</title></head>
    <body>
    Please wait.  This could take a long time!!!!
    <ul>
    ''')
    for i in range(20):
        time.sleep(2)
        req.write("<li> Still waiting.... %d\n" % i)
    req.write('</ul>\nAll Done!\n</body></html>')
    
    return apache.OK

(I've added this as FAQ 3.7.   Someone with more experience in redirects or 
refresh tags can add some alternatives.).



From tim.parker at intec-telecom-systems.com  Tue Jan 21 09:08:16 2003
From: tim.parker at intec-telecom-systems.com (Tim Parker (UK))
Date: Fri Jan  9 21:47:14 2004
Subject: [mod_python] Query about client server interaction 
Message-ID: <7F124BC48D56D411812500D0B747251403B7B449@FILESERVER002>

Thanks Gregory,

I am just wondering if it is possible to do this with the publisher handler
- as that is what I am using at present as I have several python modules and
functions that I need to use?

Thanks again for all your help on this
Tim.

-----Original Message-----
From: Gregory Bond [mailto:gnb@itga.com.au]
Sent: 21 January 2003 00:28
To: Tim Parker (UK)
Cc: 'mod_python@modpython.org'
Subject: Re: [mod_python] Query about client server interaction 

> This is both a bit of understanding mod_python and also how CGI scripts in
> general work, basically I have a long running query which can take up to a
> minute or so to process, I want to return a page to the User immediately
> saying what it is doing, ideally I would like this page to get updated
> during the processing of the other operation.

Along with the other responses, I'd like to offer an alternative solution
(that may or may not work, depending on how the job is structured).

Anything you send to the client gets sent straight away, so you can use this
fact to write on-going status messages.  Something like this:

import time
from mod_python import apache

def handler(req):
    req.content_type = "text/html"
    req.write('''<html>
    <head><title>Example Delay Code</title></head>
    <body>
    Please wait.  This could take a long time!!!!
    <ul>
    ''')
    for i in range(20):
        time.sleep(2)
        req.write("<li> Still waiting.... %d\n" % i)
    req.write('</ul>\nAll Done!\n</body></html>')
   
    return apache.OK

(I've added this as FAQ 3.7.   Someone with more experience in redirects or
refresh tags can add some alternatives.).


This e-mail and any attachments are confidential and may also be privileged and/or copyright 
material of Intec Telecom Systems PLC (or its affiliated companies).  If you are not an 
intended or authorised recipient of this e-mail or have received it in error, please delete 
it immediately and notify the sender by e-mail.  In such a case, reading, reproducing, 
printing or further dissemination of this e-mail is strictly prohibited and may be unlawful. 
Intec Telecom Systems PLC. does not represent or warrant that an attachment hereto is free 
from computer viruses or other defects. The opinions expressed in this e-mail and any 
attachments may be those of the author and are not necessarily those of Intec Telecom 
Systems PLC. 

This footnote also confirms that this email message has been swept by
MIMEsweeper for the presence of computer viruses.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20030121/8dc051ba/attachment.htm
From tim.parker at intec-telecom-systems.com  Tue Jan 21 09:38:29 2003
From: tim.parker at intec-telecom-systems.com (Tim Parker (UK))
Date: Fri Jan  9 21:47:14 2004
Subject: [mod_python] Wierd problem with API version mismatch 
Message-ID: <7F124BC48D56D411812500D0B747251403B7B44A@FILESERVER002>

Thanks for that,

I have managed to sort out the problem now; it is to do with the Path
Environment Variable that Apache was running under, which has python (1.5)
as the first python executable on it, so this was causing the version
mismatch.  The only thing I am unsure about is where Apache is
getting/setting this environment variable as for all users the python
version that is on their path is version 2.2.1 (the one I want to use).  As
a work around I have linked python 2.2.1 to /bin/python and it now seems to
work without any problems.

Thanks again
Tim.

-----Original Message-----
From: Gregory Bond [mailto:gnb@itga.com.au]
Sent: 20 January 2003 22:17
To: Tim Parker (UK)
Subject: Re: [mod_python] Wierd problem with API version mismatch 

> warning: Python C API version mismatch for module strop: This Python has
API
> version 1011, module strop has version 1007.

My guess is that you have multiple versions of python installed, and apache
is
picking up a different python version based on a different PATH environment
or some such.


This e-mail and any attachments are confidential and may also be privileged and/or copyright 
material of Intec Telecom Systems PLC (or its affiliated companies).  If you are not an 
intended or authorised recipient of this e-mail or have received it in error, please delete 
it immediately and notify the sender by e-mail.  In such a case, reading, reproducing, 
printing or further dissemination of this e-mail is strictly prohibited and may be unlawful. 
Intec Telecom Systems PLC. does not represent or warrant that an attachment hereto is free 
from computer viruses or other defects. The opinions expressed in this e-mail and any 
attachments may be those of the author and are not necessarily those of Intec Telecom 
Systems PLC. 

This footnote also confirms that this email message has been swept by
MIMEsweeper for the presence of computer viruses.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20030121/96466f65/attachment.htm
From sandor.kopanyi at mailbox.hu  Tue Jan 21 11:41:49 2003
From: sandor.kopanyi at mailbox.hu (sandor.kopanyi@mailbox.hu)
Date: Fri Jan  9 21:47:14 2004
Subject: [mod_python] calla function from form and via link
Message-ID: <20030121104149.15286.qmail@web2.mailbox.hu>

Hi,

I have a function which fetches some things from a database; it has
2 parameters: req and an id. The req is used to extract username and
password for the database connection, the second is info needed for
fetch.

I call it from a FORM, which has an INPUT field, called id, req is
passed "by default". Everything goes fine.

My problem: I would like to use the same function, with the same
purpose, but in this not from a FORM. but from a dynamically generated
web-page
(http://...module.py/function?id=somethingdynamicallygenerated).
But in this case I - obviously - miss the req, which is "given" to me
only
when calling a function from a FORM.

Is there any nice trick to solve this problem?

I use publisher handler, on RedHat 7.3, apache 1.3.23, mod_python 2.76,
python 1.5.2 (yes, it's old stuff, but is OK by me for the time being :)

/Sandor

________________________________________________
http://mailbox.hu - M?r SMS ?rtes?t?ssel is!



From grisha at modpython.org  Tue Jan 21 13:15:03 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:47:14 2004
Subject: [mod_python] calla function from form and via link
In-Reply-To: <20030121104149.15286.qmail@web2.mailbox.hu>
Message-ID: <20030121131254.I66432-100000@eden.ispol.com>


On Tue, 21 Jan 2003 sandor.kopanyi@mailbox.hu wrote:

> (http://...module.py/function?id=somethingdynamicallygenerated).
> But in this case I - obviously - miss the req, which is "given" to me
> only
> when calling a function from a FORM.

The req is *always* passed for as long as your function has it as one of
the arguments, regardless of method (form or not). If you define function
as:

def function(req, id):

then req will passed to you by the Publisher.

Grisha


From Mongryong at sympatico.ca  Tue Jan 21 20:48:59 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 21:47:14 2004
Subject: [mod_python] Re: [4suite] 4Suite Reliance on ENVIRONMENT & global variables
In-Reply-To: <1043129964.1419.305.camel@refugeeMedia>
References: <704B83C4-2D00-11D7-8B43-000393CFDA9C@fourthought.com> 
	<1043129964.1419.305.camel@refugeeMedia>
Message-ID: <1043200140.14051.86.camel@refugeeMedia>

Ok, here's an update.  I've tested things out with a variety of
environment scenarios:

Computer - RedHat 8, PIII, 256mb, > 60Gb

Scenario#1 - Works fine
Apache httpd Server 1.3.27
Python 2.2.2
mod_python 2.7.8
4Suite 0.11.1
PyXML 0.6.6

Scenario#2 - Works fine
Apache httpd Server 2.0.44
Python 2.2.2
mod_python 3.0.2 (CVS)
4Suite 0.11.1
PyXML 0.6.6

Scenario#3 - Fails (encoding problem??)
Apache httpd Server 1.3.27
Python 2.2.2
mod_python 2.7.8
4Suite 0.12a CVS latest
PyXML 0.8.x

Scenario#4 - Fails (encoding problem??)
Apache httpd Server 2.0.44
Python 2.2.2
mod_python 3.0.2 (CVS)
4Suite 0.12a CVS latest
PyXML 0.8.x

Scenario#5 - Fails (encoding problem??)
Apache httpd Server 2.1.0 CVS latest
Python 2.2.2
mod_python 3.0.2 CVS latest
4Suite 0.12a CVS latest
PyXML 0.8.x

Scenario#5 - Fails (encoding problem??)
Apache httpd Server 2.1.0 CVS latest
Python 2.3a CVS latest
mod_python 3.0.2 (CVS)
4Suite 0.12a CVS latest
PyXML 0.8.x

Summary of combinations that produced no 'encoding' problem:
Apache 1.3.27 to 2.1 CVS latest
mod_python 3.0.2 CVS latest
Python 2.2.2  
4Suite 0.11.1 
PyXML 0.6.6

To me, the encoding problem appears to have something to do with 4Suite
0.12.x or PyXML 0.8.x or a combination of the two.  

It would be nice to be able to test if the encoding problem appears in
another 'embedded python' app or module.  This would help strengthen the
case against 4Suite/PyXml.  My guess is that the encoding problem is not
unique to mod_python.

On Tue, 2003-01-21 at 01:19, Mongryong wrote:
> Ok, I've modified my simple test script so that it can be easily started
> from a shell (python main.py) as well as working with mod_python.
> 
> Again, here's the url to my server where you can view the mod_python
> result: http://rezquest.cjb.net/bin/main
> 
> So, now the test outputs the XML source as just a string and as dom node
> from NonvalidatingReader.
> 
> You should clearly see the difference between the standalone and
> mod_python results.
> 
> On Tue, 2003-01-21 at 00:23, Michael Olson wrote:
> > 
> > > The strange thing is that if I directly output the XML source without
> > > doing any XSLT processing, the XML source appears correctly.  Somewhere
> > > along the line where the strings are being passed from the python
> > > libraries to the 4Suite libraries (by Py_ParseArgs..???), the strings
> > > are being 'miscommunicated'.
> > >
> > 
> > By "output the XML source" do you mean just print it out (or fetch it 
> > from the file system) ro do you mean parse it into DOM, and print it 
> > out?
> > 
> > If not the later, can you try that instead of XSLT to see if this works.
> > 
> > Thanks
> > Mike
> > 
> > > Now, it might be a Python2.2.2 issue since libxml2/libxslt from the
> > > gnome project are having similar problems as well.
> > >
> > > In 4Suite, do the apps embedd the python interpretor or do the apps
> > > start purely from a python environment?
> > >
> > > It might be good to check to see whether this problem still occurs 
> > > other
> > > 'python embedded' application (ie. uses Py_NewInterpretor from C). I
> > > forget, does the command-line version of python dynamically link to the
> > > python libraries?  If so, I wonder if the command-line version of 
> > > python
> > > is doing anything special or different when it links up and initializes
> > > the python libraries.
> > >
> > > I'm reposting this message on to the Python mailing list to see if
> > > anybody there can help give us a clue.
> > >
> > > P.S Has there been any changes in Python2.2.3+ that might possibly fix
> > > this problem?
> > >
> > > On Mon, 2003-01-20 at 22:28, Uche Ogbuji wrote:
> > >> On Mon, 2003-01-20 at 14:52, Mongryong wrote:
> > >>> Hi,
> > >>>
> > >>> I'm having trouble getting the latest 4Suite XML/XSLT tools to work 
> > >>> the
> > >>> way I want in mod_python and I know I'm not the first one to 
> > >>> experience
> > >>> "out-of-the-box" success.
> > >>>
> > >>> I've determined that it's an encoding issue.   Now, with a 
> > >>> stand-alone
> > >>> script or CGI script under Apache, 4XSLT works fine.  But under
> > >>> mod_python (which doesn't have access to ENVIRONMENT variables), 
> > >>> 4XSLT
> > >>> library decodes the XML source file in a total different encoding.  
> > >>> XSL
> > >>> templates (ie. <xsl:template name="blah">) are never executed because
> > >>> the XML tag is never recognized by the XSL processor.  Hence, you 
> > >>> get an
> > >>> empty output.
> > >>>
> > >>> I've check the default system encoding codec and it returns 'ascii' 
> > >>> (ie.
> > >>> sys.getdefaultencoding).  Now, it could be that the python library
> > >>> relies on some ENVIRONMENT variable for its configuration.
> > >>>
> > >>> Anybody have any ideas what 'parameters' might not be initialized
> > >>> properly under a non-CGI or non-shell environment such as mod_python?
> > >>> Or, is there a parameter that one can set to change the XML input
> > >>> decoding?
> > >>
> > >> I don't think there is any environment variable that could affect 
> > >> this.
> > >>
> > >> However, there have been a lot of fixes recently, including to some
> > >> endianness bugs.  Do you mind trying again with latest 4Suite CVS and
> > >> telling us if it helps?  Either wait till tomorrow's snapshot, or 
> > >> check
> > >> out current CVS HEAD directly
> > >>
> > >> http://4suite.org/docs/4SuiteCVS.xml
> > >>
> > >> If it doesn't help, I hope you'll be able to help us work with you to
> > >> find a solution for mod_python users.
> > >>
> > >> -- 
> > >> Uche Ogbuji                                    Fourthought, Inc.
> > >> http://uche.ogbuji.net    http://4Suite.org    http://fourthought.com
> > >> Python Generators + DOM - 
> > >> http://www.xml.com/pub/a/2003/01/08/py-xml.html
> > >> 4Suite Repository Features - 
> > >> https://www6.software.ibm.com/reg/devworks/dw-x4suite5-i/
> > >> XML class warfare - http://www.adtmag.com/article.asp?id=6965
> > >> MusicBrainz  metadata - 
> > >> http://www-106.ibm.com/developerworks/xml/library/x-think14.html
> > >>
> > >
> > > <main.py>
> > Mike Olson                                Principal Consultant
> > mike.olson@fourthought.com                +1 303 583 9900 x 102
> > Fourthought, Inc.                         http://Fourthought.com
> > PO Box 270590,                            http://4Suite.org
> > Louisville, CO 80027-5009, USA
> > XML strategy, XML tools, knowledge management
> > 
> > _______________________________________________
> > 4suite mailing list
> > 4suite@lists.fourthought.com
> > http://lists.fourthought.com/mailman/listinfo/4suite
> 
> ----
> 

> #!/usr/local/bin/python
> 
> import sys
> import locale
> 
> #The identity transform: duplicates the input to output
> TRANSFORM = """<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
> <xsl:template match="@*|node()">
>   <xsl:copy>
>     <xsl:apply-templates select="@*|node()"/>
>   </xsl:copy>
> </xsl:template>
> 
> </xsl:stylesheet>
> """
> 
> SOURCE = """<spam id="eggs">I don't like spam</spam>"""
> 
> #The processor class is the core of the XSLT API
> import Ft
> from Ft.Xml.Xslt import Processor
> from Ft.Xml import InputSource
> 
> from xml.dom import Node
> from Ft.Xml.Domlette import Print, PrettyPrint
> from Ft.Xml.Domlette import NonvalidatingReader
> 
> #from mod_python import apache
> 
> from StringIO import StringIO
> 
> def test(req):
>     # TEST 1
>     req.write ( "Here's the result of just printing the string SOURCE\n" )
>     req.write ( SOURCE )
>     req.write ( "\n\n" )
> 
>     # TEST 2
>     buf = StringIO()
>     transform = InputSource.DefaultFactory.fromString(TRANSFORM, "http://spam.com/identity.xslt")
>     source = InputSource.DefaultFactory.fromString(SOURCE, "http://spam.com/doc.xml")
>     dom = NonvalidatingReader.parse ( source )   
> 
>     PrettyPrint (dom, buf)
>     
>     req.write ( "Here's the result of printing from the SOURCE dom tree (Domlette)\n" )
>     req.write ( buf.getvalue() )
>     req.write ( "\n\n" )
> 
>     buf.close ()
> 
>     # TEST 3
>     req.write("Here's the result of the XSLT processing\n")
>     processor = Processor.Processor()
>     processor.appendStylesheet(transform)
>     result = processor.runNode(dom, "http://spam.com/doc.xml")
>     
>     req.write( result + "\n\n" )
> 
>     # LOCALE STUFF
>     req.write("Ft.DEFAULT_ENCODING = " + Ft.DEFAULT_ENCODING + "\n")
>     req.write("sys.getdefaultencoding = " + sys.getdefaultencoding() + "\n")
>     req.write("local.getdefaultlocale()[1] = " + locale.getdefaultlocale()[1] + "\n\n")
> 
> def handler(req):    
> 
>     req.content_type = "text/plain"   
>     test(req)
>     
>     return 0
> 
> 
> if __name__ == "__main__":
>     test(sys.stdout)



From connie at core3d.com  Wed Jan 22 02:24:56 2003
From: connie at core3d.com (Connie Baggs)
Date: Fri Jan  9 21:47:14 2004
Subject: [mod_python] [error] make_obcallback: could not import mod_python.apache
Message-ID: <20030122.2245669@mis.configured.host>

Hi Im trying to use pyWM (version 0.9984b)webmail in conjunction with 
apache (2.0.43) and mod_python (3.0.1). Ive installed everything fine and 
Apache works however when I try and get the mail the following error is 
logged in the apache error_log file:

[Wed Jan 22 08:24:19 2003] [notice] Apache/2.0.43 (Unix) mod_python/3.0.1 
Python/2.2.1 configured -- resuming normal operations
[Wed Jan 22 08:24:45 2003] [error] make_obcallback: could not import 
mod_python.apache.


The 2nd entry appeared when I tried to connect to open the index.html of 
pyWM.

Any ideas??


From gnb at itga.com.au  Wed Jan 22 14:38:14 2003
From: gnb at itga.com.au (Gregory Bond)
Date: Fri Jan  9 21:47:14 2004
Subject: [mod_python] Query about client server interaction 
In-Reply-To: Your message of Tue, 21 Jan 2003 09:08:16 -0000.
Message-ID: <200301220338.OAA04954@lightning.itga.com.au>

> I am just wondering if it is possible to do this with the publisher handler
> - as that is what I am using at present as I have several python modules and
> functions that I need to use?

This seems to work:

File ltest.py:

	import time
	from mod_python import apache

	def longtime(req):
	    req.content_type = "text/html"
	    req.write('''<html>
	    <head><title>Example Delay Code</title></head>
	    <body>
	    Please wait.  This could take a long time!!!!
	    <ul>
	    ''')
	    for i in range(20):
	        time.sleep(2)
	        req.write("<li> Still waiting.... %d\n" % i)
	    return '</ul>\nAll Done!\n</body></html>'

with a URL like .../ltest.py/longtime and a config like
	<Files ltest.py>
	        PythonHandler   mod_python.publisher
	</Files>

Again, this won't work if your long-running job (here represented by
time.sleep() calls) is not able to stop and do a 'req.write()' every so often!



From mike_verdone at shaw.ca  Tue Jan 21 20:56:29 2003
From: mike_verdone at shaw.ca (Mike Verdone)
Date: Fri Jan  9 21:47:14 2004
Subject: [mod_python] calla function from form and via link
In-Reply-To: <20030121104149.15286.qmail@web2.mailbox.hu>
References: <20030121104149.15286.qmail@web2.mailbox.hu>
Message-ID: <200301212056.29386.mike_verdone@shaw.ca>

On January 21, 2003 03:41 am, sandor.kopanyi@mailbox.hu wrote:
> I have a function which fetches some things from a database; it has
> 2 parameters: req and an id. The req is used to extract username and
> password for the database connection, the second is info needed for
> fetch.
>
> My problem: I would like to use the same function, with the same
> purpose, but in this not from a FORM. but from a dynamically generated
> web-page
> (http://...module.py/function?id=somethingdynamicallygenerated).
> But in this case I - obviously - miss the req, which is "given" to me
> only
> when calling a function from a FORM.

I'm not sure if I know what you mean., but req should always be given to you, 
even when you are accessing a page with a plain old GET request. So:

http://.../function?id=blah

should give you the request object, and same with

http://.../function

Basically, just put the whole link to the function in an <A> tag, and it will 
work same as a form submission.

I'm not sure how the database password got into the req in the first place. Is 
it supplied by the user at some point, or is it the same for every user? If 
the user supplies it on some other page, you'll have to use some session 
handling (google for "python service objects" for some info). If it's always 
the same, hard code it into a module somewhere.

Do I understand correctly?

Mike.


From sandor.kopanyi at mailbox.hu  Wed Jan 22 08:59:21 2003
From: sandor.kopanyi at mailbox.hu (sandor.kopanyi@mailbox.hu)
Date: Fri Jan  9 21:47:14 2004
Subject: [mod_python] calla function from form and via link
In-Reply-To: <200301212056.29386.mike_verdone@shaw.ca>
Message-ID: <20030122075921.22872.qmail@web2.mailbox.hu>

Hi Mike,

> http://.../function?id=blah
> 
> should give you the request object, and same with

Yes, it does. I had a typo in my code (param name).
Thanks for the hint.

> I'm not sure how the database password got into the req in the first
> place. Is 
> it supplied by the user at some point, or is it the same for every
user?

I extract the password from req, as explained in section 3.3 of
mod_python
2.7 docs
(http://www.modpython.org/live/mod_python-2.7.8/doc-html/tut-more-complicated.html):

pw = req.get_basic_auth_pw()
user = req.connection.user

If I return an apache.UNAUTHORIZED the browser will ask for username/pw.

/Sandor

________________________________________________
http://mailbox.hu - M?r SMS ?rtes?t?ssel is!



From io219 at attbi.com  Sun Jan 26 06:50:27 2003
From: io219 at attbi.com (io219@attbi.com)
Date: Fri Jan  9 21:47:14 2004
Subject: [mod_python] Apache 2.0.43 & Windows 2000
Message-ID: <5211277896.20030126065027@attbi.com>

Seems to be all sorts of problems installing in Win2k.
For me, Apache starts, but when I try the mptest.py test,
I get an "Internal Server Error" when running the test.

If I comment the following lines in the .htaccess the error
goes away and Apache outputs the source of mptest.py

#PythonHandler mptest
#PythonDebug On

Any ideas?


From thm at duke.edu  Sun Jan 26 17:22:49 2003
From: thm at duke.edu (Hunter Matthews)
Date: Fri Jan  9 21:47:14 2004
Subject: [mod_python] Upgrade to mod_python 3.0.0 causes some handlers
	not to run.
In-Reply-To: <1042340165.1840.16.camel@jade.biology.duke.edu>
References: <1042340165.1840.16.camel@jade.biology.duke.edu>
Message-ID: <1043619770.1597.57.camel@jade.biology.duke.edu>

On Sat, 2003-01-11 at 21:56, Hunter Matthews wrote:
> I have program (current) that successfully uses the following
> confirguration under apache 1.3.24 and mod_python 2.7.8 (redhat 7.2 or
> 7.3, basically) to have a TypeHandler, AccessHandler, and PythonHander
> run on some get requests.

This has been fixed. I'm mailing the list to let other mod_python users
know what we found.

> 
> If I take this same configuration to httpd 2.0.40 and mod_python 3.0.0
> (redhat 8.0) the python handler runs for the /XMLRPC requests, but
> neither the TypeHandler or the AccessHandler is running for the
> /XMLRPC/$RHN requests.

The problem turned out to be that if you did NOT specify the
"SetHandler" and used PythonModuleHandler in a configuration, mod_python
would not run the handlers you implemented.

The fix is, apparently, to both upgrade to mod_python 3.0.1, and to not
use PythonModuleHandler if you're not using SetHandler.

It looks like 3.0.1 will do the right thing with no SetHandler, IF you
specify all the handlers out that you want to use. PythonHandlerModule
is apparently still broken.

Here's the relevant part of our old configuration.

> <Location ~ "/XMLRPC$">
>     PythonPath "sys.path + ['/usr/share/current']"
>     SetHandler python-program
>     PythonHandler current_apache
> </Location>
> 
> <Location /XMLRPC/$RHN>
>     PythonPath "sys.path + ['/usr/share/current']"
>     PythonHandlerModule current_apache
> </Location>

And here's the one that a user reported success with when using
mod_python 3.0.1:

<Location ~ "/XMLRPC$">
    PythonPath "sys.path + ['/usr/share/current']"
    SetHandler python-program
    PythonHandler current_apache
</Location>

<Location /XMLRPC/$RHN>
    PythonPath "sys.path + ['/usr/share/current']"
    PythonTypeHandler current_apache
    PythonAccessHandler current_apache
</Location>

-- 
Hunter Matthews                          Unix / Network Administrator
Office: BioScience 145/244               Duke Univ. Biology Department
Key: F0F88438 / FFB5 34C0 B350 99A4 BB02  9779 A5DB 8B09 F0F8 8438
Never take candy from strangers. Especially on the internet.


From vfranceschetti at virgilio.it  Mon Jan 27 11:08:28 2003
From: vfranceschetti at virgilio.it (vfranceschetti@virgilio.it)
Date: Fri Jan  9 21:47:14 2004
Subject: [mod_python] (no subject)
Message-ID: <3E316B5B0000351A@ims1a.cp.tin.it>

Hi,
i have these line in my module:
     lun = int(req.headers_in["content-length"])
     testo = req.read(lun)
     dummy=string.find(testo,'A')
     f=open("C:/Programmi/Apache Group/Apache2/py/post.txt","w+")
     f.write("Test :"+str(lun)+"> "+str(dummy)+"--------------"+str(len(testo)))
     f.close()

and this is the result:

Test :41009> -1--------------0

variable length is 0 instead of 41009, and the value is null (string.find
always return -1 but the character A is in the Post body.

Some suggestions?

Thanks

Valentino 

 

 





From tim.parker at intec-telecom-systems.com  Wed Jan 22 09:54:10 2003
From: tim.parker at intec-telecom-systems.com (Tim Parker (UK))
Date: Fri Jan  9 21:47:14 2004
Subject: [mod_python] Query about client server interaction 
Message-ID: <7F124BC48D56D411812500D0B747251403B7B455@FILESERVER002>

Thanks for this - it seems to work except it takes a few seconds to display
the page - and when it does it draws it with several of the "Still waiting"
lines.  After this it then continues as I would expect it to but it seems to
wait a few seconds - well 5 times round the for loop before output the HTML
page to the Client.

Why is this, I would expect it to draw the web page almost immediately with
the Please wait This could take a long time!!!! Line and then draw in the
remaining lines as the script processes.  But it seems to want to cache the
first few lines before drawing them on the client.

Is this some server/client setting or something that needs to be specified
in the Headers so that there is no caching?

Thanks again
Tim.

-----Original Message-----
From: Gregory Bond [mailto:gnb@itga.com.au]
Sent: 22 January 2003 03:38
To: Tim Parker (UK)
Cc: 'mod_python@modpython.org'
Subject: Re: [mod_python] Query about client server interaction 

> I am just wondering if it is possible to do this with the publisher
handler
> - as that is what I am using at present as I have several python modules
and
> functions that I need to use?

This seems to work:

File ltest.py:

        import time
        from mod_python import apache

        def longtime(req):
            req.content_type = "text/html"
            req.write('''<html>
            <head><title>Example Delay Code</title></head>
            <body>
            Please wait.  This could take a long time!!!!
            <ul>
            ''')
            for i in range(20):
                time.sleep(2)
                req.write("<li> Still waiting.... %d\n" % i)
            return '</ul>\nAll Done!\n</body></html>'

with a URL like .../ltest.py/longtime and a config like
        <Files ltest.py>
                PythonHandler   mod_python.publisher
        </Files>

Again, this won't work if your long-running job (here represented by
time.sleep() calls) is not able to stop and do a 'req.write()' every so
often!


This e-mail and any attachments are confidential and may also be privileged and/or copyright 
material of Intec Telecom Systems PLC (or its affiliated companies).  If you are not an 
intended or authorised recipient of this e-mail or have received it in error, please delete 
it immediately and notify the sender by e-mail.  In such a case, reading, reproducing, 
printing or further dissemination of this e-mail is strictly prohibited and may be unlawful. 
Intec Telecom Systems PLC. does not represent or warrant that an attachment hereto is free 
from computer viruses or other defects. The opinions expressed in this e-mail and any 
attachments may be those of the author and are not necessarily those of Intec Telecom 
Systems PLC. 

This footnote also confirms that this email message has been swept by
MIMEsweeper for the presence of computer viruses.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20030122/3ee38cd6/attachment.htm
From gnb at itga.com.au  Thu Jan 23 09:07:22 2003
From: gnb at itga.com.au (Gregory Bond)
Date: Fri Jan  9 21:47:14 2004
Subject: [mod_python] Query about client server interaction 
In-Reply-To: Your message of Wed, 22 Jan 2003 09:54:10 -0000.
Message-ID: <200301222207.JAA14877@lightning.itga.com.au>

> Is this some server/client setting or something that needs to be specified
> in the Headers so that there is no caching?

As far as I can see (and I have done a fair bit of tcp packet tracing on a 
similar problem) this is basically just the way the client works.  The server 
sends stuff as you expect, but the client delays rendering (or displaying the 
results of the render) for some internal reason.

These initial delays will be much longer if the initial bit of the page
contains any other resources (such as style sheets or images) or if the layout
is complex (especially tables).  And if the time between updates is too short
(under 1 second?) then the client seems to batch up the info and only render it
in chunks every 5-10 seconds.

The examples I sent earlier work 100% as you would expect for me for both IE5
and Mozilla 1.1, both on quite slow (P2-class) machines, but a similar example
I had with stylesheets and 1-second status updates was much less successful.



From Mongryong at sympatico.ca  Wed Jan 22 20:51:40 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 21:47:14 2004
Subject: [mod_python] Re: [4suite] 4Suite Reliance on ENVIRONMENT & global variables
In-Reply-To: <200301222107.h0ML7ss1095885@chilled.skew.org>
References: <200301222107.h0ML7ss1095885@chilled.skew.org>
Message-ID: <1043286700.1420.80.camel@refugeeMedia>

Hey Mike, you're a GENIUS!!!  

Below are the results from two tests I did.  The first test set 
USE_MINIDOM=0.  The second test set USE_MINIDOM=1 Here's an output from
my simple little test:

Using 4Suite 0.12a CVS latest

Test#1: set USE_MINIDOM=0

Here's the result of just printing the string SOURCE:
<spam id="eggs">I don't like spam</spam>

Here's the result of printing from the SOURCE dom tree created via the
NonvalidatingReader:
<?xml version="1.0" encoding="UTF-8"?>
<?????? ???="?????????????????????????????????????
????????????????">???????????????????? ????????????????????</??????>

Here's the result of printing from the SOURCE dom tree created via
PyExpat (from PyXML 0.8.2):
<?xml version="1.0" encoding="UTF-8"?>
<spam id="eggs">I don't like spam</spam>

Here's the result of the XSLT processing (simple copy of source XML):
<?xml version="1.0" encoding="UTF-8"?>
<?????? ???="?????????????????????????????????????
????????????????">???????????????????? ????????????????????</??????>

Ft.DEFAULT_ENCODING = utf 
Ft.Xml.Domlette.MINIDOM = 0 
sys.getdefaultencoding = ascii 
local.getdefaultlocale()[1] = utf 
*******************************************
Test#2: set USE_MINIDOM=1

Here's the result of just printing the string SOURCE:
<spam id="eggs">I don't like spam</spam>

Here's the result of printing from the SOURCE dom tree created via the
NonvalidatingReader:
<?xml version="1.0" encoding="UTF-8"?>
<spam id="eggs">I don't like spam</spam>

Here's the result of printing from the SOURCE dom tree create via
PyExpat (from PyXML 0.8.2)
<?xml version="1.0" encoding="UTF-8"?>
<spam id="eggs">I don't like spam</spam>

Here's the result of the XSLT processing (simple copy of source XML): 
<?xml version="1.0" encoding="UTF-8"?>
<spam id="eggs">I don't like spam</spam>

Ft.DEFAULT_ENCODING = utf 
Ft.Xml.Domlette.MINIDOM = 1 
sys.getdefaultencoding = ascii 
local.getdefaultlocale()[1] = utf 

It appears that the encoding problem has nothing to do with PyXML
libraries.

Again, the encoding problem only occurs in an embedded application like
mod_python.  

Does 4Suite set any other ENVIRONMENT variables during its execution?

According to the mod_python documentation, any changes to the OS
environment variables after mod_python has started will not be seen by
any scripts or libraries.  That is, if I change an environment variable
from my shell console or a script changes an environment variable during
Apache's life-time, the changes will not be seen.

If the 4Suite developers could hypothesis what's going, it'd be great. 

On Wed, 2003-01-22 at 16:07, Mike Brown wrote:
> Mongryong wrote:
> > Summary of combinations that produced no 'encoding' problem:
> > Apache 1.3.27 to 2.1 CVS latest
> > mod_python 3.0.2 CVS latest
> > Python 2.2.2  
> > 4Suite 0.11.1 
> > PyXML 0.6.6
> > 
> > To me, the encoding problem appears to have something to do with 4Suite
> > 0.12.x or PyXML 0.8.x or a combination of the two.  
> 
> Unfortunately this doesn't tell us much.
> 
> 0.12.0 is almost a complete rewrite of 4Suite from 0.11.1. 0.11.1 did not use
> cDomlette by default, so my guess is that if you were using 0.11.1 and set
> BETA_DOMLETTE to 1 (I think that's how it was done... could be wrong), you
> might see the same misbehavior.
> 
> In 0.12.0, see what happens if you set USE_MINIDOM to 1 first. It'll probably 
> work (but will be slow).
> 
> Another shot int he dark -
> 
> If PyXML isn't required for mod_python, can you see what happens if you don't
> have it installed? 0.12.0 should be OK without PyXML as long as you don't need
> validation.
> 
> Mike
> 
> -- 
>   Mike J. Brown   |  http://skew.org/~mike/resume/
>   Denver, CO, USA |  http://skew.org/xml/
> _______________________________________________
> 4suite mailing list
> 4suite@lists.fourthought.com
> http://lists.fourthought.com/mailman/listinfo/4suite




From Mongryong at sympatico.ca  Thu Jan 23 00:09:48 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 21:47:15 2004
Subject: [mod_python] Re: [4suite] 4Suite Reliance on ENVIRONMENT & global variables
In-Reply-To: <200301230214.h0N2E16R096773@chilled.skew.org>
References: <200301230214.h0N2E16R096773@chilled.skew.org>
Message-ID: <1043298588.1514.106.camel@refugeeMedia>

> How does mod_python collect 4xslt's output?

I've used string and streams (stringio) for both input and output.  
ie input -> InputSource.DefaultFactory.fromString & fromStream
ie output -> res = p.run(iSrc..), res = runNode(domNode...), and
runX(...outputStream=buf)

The resultant string or stringio.getvalue() is then fed back to
mod_python which then feeds it back to Apache to output.

There's no issues with printing raw strings and streams that haven't been processed by the 4Suite libraries.  

PyXML's PyExpat has no encoding issue. 

The encoding problem isn't a random thing as well - it occurs everytime
mod_python executes the script (with USE_MINIDOM=0).

> 
> -- 
>   Mike J. Brown   |  http://skew.org/~mike/resume/
>   Denver, CO, USA |  http://skew.org/xml/
> _______________________________________________
> 4suite mailing list
> 4suite@lists.fourthought.com
> http://lists.fourthought.com/mailman/listinfo/4suite



From Mongryong at sympatico.ca  Thu Jan 23 00:16:34 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 21:47:15 2004
Subject: [mod_python] Re: [4suite] 4Suite Reliance on ENVIRONMENT & global variables
In-Reply-To: <1043289525.12442.30.camel@hades>
References: <200301230214.h0N2E16R096773@chilled.skew.org> 
	<1043289525.12442.30.camel@hades>
Message-ID: <1043298995.1416.118.camel@refugeeMedia>

> 
> When a sub-interpreter is created, a new module dictionary is created
> which no longer includes a pointer to the 'encodings' module although
> internally Python may say it exists (via a global variable).  This is
> really a bug in Python.
> 
Good plausible theory.  Any idea on how to prove this or test this?

> Try adding an "import encodings" and/or "import codecs" to the
> mod_python module that uses 4Suite.  I kind of remember having to do
> something like that when we had a mod_snake handler for Apache.
> 
Nope, did not work.  I believe 4Suite imports these modules too.  Is
there another place where you imported these modules (ie. at mod_snake
startup?)






From Mongryong at sympatico.ca  Thu Jan 23 16:16:32 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 21:47:15 2004
Subject: [mod_python] Re: [4suite] 4Suite Reliance on ENVIRONMENT & global variables
In-Reply-To: <200301230640.h0N6el2U097430@chilled.skew.org>
References: <200301230640.h0N6el2U097430@chilled.skew.org>
Message-ID: <1043356593.902.10.camel@refugeeMedia>

> Jeremy's answers on this thread may be a couple steps ahead of me, here, but
> take a look at Ft/Xml/src/StreamWriter.c. It is supposed to be the equivalent
> of Ft/Xml/Lib/StreamWriter.py.
> 
> Is there an obvious endianness bug in the C version somewhere?
> Is the test around lines 279-294 producing unexpected results?
> 
The c and py code look similar.  If there was an endianness bug,
wouldn't it just swap characters around?  Well, I can't see any
endianness problems.

I just find it strange that a shell or cgi script doesn't have this
problem.  And why are there no problems with PyExpat or when minidom is
used?  What is different?  If there are answers to these questions, I
think it would help.


From Mongryong at sympatico.ca  Thu Jan 23 19:02:22 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 21:47:15 2004
Subject: [mod_python] Re: [4suite] 4Suite Reliance on ENVIRONMENT & global variables
In-Reply-To: <1043358331.1488.8566.camel@localhost.localdomain>
References: <200301230640.h0N6el2U097430@chilled.skew.org>
	<1043356593.902.10.camel@refugeeMedia> 
	<1043358331.1488.8566.camel@localhost.localdomain>
Message-ID: <1043366543.583.26.camel@refugeeMedia>

Trying mod_python myself is
> still on my to-do.
> 
> Anyway, next wild guess...  ;-)
> 
> Could it be a dynamic library clash between cDomlette's expat, pyexpat
> and Apache's expat?
Okay, I'm just throwing something at you guys:

Is the expat library loaded dynamically or compiled statically in
4Suite?

Now, I've only managed to find libexpat in my /usr/lib directory.  There
it exists as 'libexpat.so.0.3.0' (Aug 19 2002) - I believe this is what
comes with the RedHat Distribution.  I'm suspicious of the 0.3.0.  Is
there a nice way to find out which libexpat is being used?

Here are the expat versions required:
4Suite -> expat 1.95.5
Apache -> expat 1.95.1
PyXML 0.8.2 -> expat 1.95.5
I believe the above is correct.  

Here's my /etc/ld.so.conf file:
/usr/kerberos/lib
/usr/X11R6/lib
/usr/lib/qt-3.0.5/lib
/usr/lib/sane/
/usr/local/lib
/usr/local/lib/mysql

Was this helpful?


> 
> 
> > -- 
> > Uche Ogbuji                                    Fourthought, Inc.
> > http://uche.ogbuji.net    http://4Suite.org    http://fourthought.com
> > The open office file format  - http://www-106.ibm.com/developerworks/xml/library/x-think15/
> > Python Generators + DOM - http://www.xml.com/pub/a/2003/01/08/py-xml.html
> > 4Suite Repository Features - https://www6.software.ibm.com/reg/devworks/dw-x4suite5-i/
> > XML class warfare - http://www.adtmag.com/article.asp?id=6965
> 
> _______________________________________________
> 4suite mailing list
> 4suite@lists.fourthought.com
> http://lists.fourthought.com/mailman/listinfo/4suite



From Mongryong at sympatico.ca  Thu Jan 23 19:36:48 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 21:47:15 2004
Subject: [mod_python] Re: [4suite] 4Suite Reliance on ENVIRONMENT & global variables
In-Reply-To: <1043366543.583.26.camel@refugeeMedia>
References: <200301230640.h0N6el2U097430@chilled.skew.org>
	<1043356593.902.10.camel@refugeeMedia> 
	<1043358331.1488.8566.camel@localhost.localdomain> 
	<1043366543.583.26.camel@refugeeMedia>
Message-ID: <1043368609.2147.68.camel@refugeeMedia>

The libexpat version in my /usr/lib directory is 1.95.4.

Thanks Mike.

On Thu, 2003-01-23 at 19:02, Mongryong wrote:
> Trying mod_python myself is
> > still on my to-do.
> > 
> > Anyway, next wild guess...  ;-)
> > 
> > Could it be a dynamic library clash between cDomlette's expat, pyexpat
> > and Apache's expat?
> Okay, I'm just throwing something at you guys:
> 
> Is the expat library loaded dynamically or compiled statically in
> 4Suite?
> 
> Now, I've only managed to find libexpat in my /usr/lib directory.  There
> it exists as 'libexpat.so.0.3.0' (Aug 19 2002) - I believe this is what
> comes with the RedHat Distribution.  I'm suspicious of the 0.3.0.  Is
> there a nice way to find out which libexpat is being used?
> 
> Here are the expat versions required:
> 4Suite -> expat 1.95.5
> Apache -> expat 1.95.1
> PyXML 0.8.2 -> expat 1.95.5
> I believe the above is correct.  
> 
> Here's my /etc/ld.so.conf file:
> /usr/kerberos/lib
> /usr/X11R6/lib
> /usr/lib/qt-3.0.5/lib
> /usr/lib/sane/
> /usr/local/lib
> /usr/local/lib/mysql
> 
> Was this helpful?
> 
> 
> > 
> > 
> > > -- 
> > > Uche Ogbuji                                    Fourthought, Inc.
> > > http://uche.ogbuji.net    http://4Suite.org    http://fourthought.com
> > > The open office file format  - http://www-106.ibm.com/developerworks/xml/library/x-think15/
> > > Python Generators + DOM - http://www.xml.com/pub/a/2003/01/08/py-xml.html
> > > 4Suite Repository Features - https://www6.software.ibm.com/reg/devworks/dw-x4suite5-i/
> > > XML class warfare - http://www.adtmag.com/article.asp?id=6965
> > 
> > _______________________________________________
> > 4suite mailing list
> > 4suite@lists.fourthought.com
> > http://lists.fourthought.com/mailman/listinfo/4suite
> 
> 
> _______________________________________________
> 4suite mailing list
> 4suite@lists.fourthought.com
> http://lists.fourthought.com/mailman/listinfo/4suite



From Mongryong at sympatico.ca  Thu Jan 23 19:56:15 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 21:47:15 2004
Subject: [mod_python] Re: [4suite] 4Suite Reliance on ENVIRONMENT & global variables
In-Reply-To: <200301232240.h0NMeapw001171@chilled.skew.org>
References: <200301232240.h0NMeapw001171@chilled.skew.org>
Message-ID: <1043369775.578.83.camel@refugeeMedia>

> Your email client mangled the data a bit, so I can't diagnose it correctly, 
> but basically what is happening is that the Unicode string u'spam', or, for 
> clarity, u'\u0073\u0070\u0061\u006d', is being interpreted as 
> u'\u7300\u7000\u6000\u6d00'. When UTF-8 encoded, this becomes bytes:
>    e7 8c 80 e7 80 80 e6 80 80 e6 b4 80
> 
> ...which is not going to look very pleasant in an iso-8859-1 environment.
You're welcome to view the output from my server at:

http://refugeemedia.cjb.net/test/main?ver=0.12



From vfranceschetti at virgilio.it  Mon Jan 27 15:39:11 2003
From: vfranceschetti at virgilio.it (vfranceschetti@virgilio.it)
Date: Fri Jan  9 21:47:15 2004
Subject: [mod_python] request.read problem
Message-ID: <3E316B5B00004378@ims1a.cp.tin.it>

This is a repost, i've forgotten the subject!!!

Hi,
i have these line in my module:
     lun = int(req.headers_in["content-length"])
     testo = req.read(lun)
     dummy=string.find(testo,'A')
     f=open("C:/Programmi/Apache Group/Apache2/py/post.txt","w+")
     f.write("Test :"+str(lun)+"> "+str(dummy)+"--------------"+str(len(testo)))
     f.close()

and this is the result:

Test :41009> -1--------------0

variable length is 0 instead of 41009, and the value is null (string.find
always return -1 but the character A is in the Post body.

Some suggestions?

Thanks

Valentino 





From terrall at oclc.org  Wed Jan 29 14:21:39 2003
From: terrall at oclc.org (Terrall,Tom)
Date: Fri Jan  9 21:47:15 2004
Subject: [mod_python] Apache with mod_python won't start!
Message-ID: <E5431CF93E29F9478878F623E5B9CE9843053E@OA3-SERVER.oa.oclc.org>

I have modified httpd.conf for an attempt to run a test of
apache+mod_python. When httpd needs to read htttpd.conf this error results.

======>
[root@deimos init.d]# ./httpd start
Syntax error on line 234 of /usr/local/apache/conf/httpd.conf:
Cannot load /usr/lib/apache/mod_python.so into server:
/usr/lib/apache/mod_python.so: undefined symbol: ap_null_cleanup
=====>

Line 234 is : LoadModule python_module /usr/lib/apache/mod_python.so

 We are running python 2.2 and apache 2.0.40 and python 2.7.8-1 .

Additions to a working httpd.conf which cause the failure.

========>
"
"
Listen 8400
"
"
LoadModule python_module /usr/lib/apache/mod_python.so
"
"
        <Directory /usr/local/apache/htdocs/test>
            AddHandler python-program .py
            PythonHandler mptest
            AllowOverride FileInfo
            PythonDebug on
        </Directory>
"
"
NameVirtualHost xxx.xxx.xxx.xxx:8400
"
"
<VirtualHost xxx.xxx.xxx.xxx:8400>
   ServerName anaximenter.out.oclc.org
  DocumentRoot /usr/local/apache/htdocs/test
</VirtualHost>
"
"
========>

Thanks in advance.

Tom Terrall


From grisha at modpython.org  Wed Jan 29 14:50:28 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:47:15 2004
Subject: [mod_python] Apache with mod_python won't start!
In-Reply-To: <E5431CF93E29F9478878F623E5B9CE9843053E@OA3-SERVER.oa.oclc.org>
Message-ID: <20030129144928.W94180-100000@eden.ispol.com>

Mod_python 2.7.8 does not work with Apache 2.0. I suggest you bring all of
Python, mod_python and Apache to the latest released versions.

Grisha

On Wed, 29 Jan 2003, Terrall,Tom wrote:

> I have modified httpd.conf for an attempt to run a test of
> apache+mod_python. When httpd needs to read htttpd.conf this error results.
>
> ======>
> [root@deimos init.d]# ./httpd start
> Syntax error on line 234 of /usr/local/apache/conf/httpd.conf:
> Cannot load /usr/lib/apache/mod_python.so into server:
> /usr/lib/apache/mod_python.so: undefined symbol: ap_null_cleanup
> =====>
>
> Line 234 is : LoadModule python_module /usr/lib/apache/mod_python.so
>
>  We are running python 2.2 and apache 2.0.40 and python 2.7.8-1 .
>
> Additions to a working httpd.conf which cause the failure.
>
> ========>
> "
> "
> Listen 8400
> "
> "
> LoadModule python_module /usr/lib/apache/mod_python.so
> "
> "
>         <Directory /usr/local/apache/htdocs/test>
>             AddHandler python-program .py
>             PythonHandler mptest
>             AllowOverride FileInfo
>             PythonDebug on
>         </Directory>
> "
> "
> NameVirtualHost xxx.xxx.xxx.xxx:8400
> "
> "
> <VirtualHost xxx.xxx.xxx.xxx:8400>
>    ServerName anaximenter.out.oclc.org
>   DocumentRoot /usr/local/apache/htdocs/test
> </VirtualHost>
> "
> "
> ========>
>
> Thanks in advance.
>
> Tom Terrall
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From terrall at oclc.org  Fri Jan 31 13:41:29 2003
From: terrall at oclc.org (Terrall,Tom)
Date: Fri Jan  9 21:47:15 2004
Subject: [mod_python] Need GLIBC_2.3 for RH7.3
Message-ID: <E5431CF93E29F9478878F623E5B9CE98430546@OA3-SERVER.oa.oclc.org>

Our configuration is apache 2.0.40, python 2.2, mod_python 3.0.1 on RH7.3.

Any suggestions on where might locate libc.so.6 (GLIBC_2.3) in rpm form for
RH7.3? Cannot start apache configured with mod_python because our GLIBC is
2.2.45.  Extensive searching has not found it.

Is it possible to tell mod_python were to find libc.so.6 so that we can
maintain two different versions?

Thanks - Tom Terrall

From gmurali at cs.uchicago.edu  Fri Jan 31 14:20:54 2003
From: gmurali at cs.uchicago.edu (ganapathy murali krishnan)
Date: Fri Jan  9 21:47:15 2004
Subject: [mod_python] cannot import mod_python.apache error
Message-ID: <3E3ADAA6.2010707@cs.uchicago.edu>

I just installed Python-2.3a1 + apache 2.0.44 + mod_python 3.0.1.
I have one vhost (say vhost) in addition to the main one (say mainhost).
The vhost has a python program as the main handler (using SetHandler).
This setup works correctly without any problems on another machine
(Python 1.5+ apache 1.3 + mod_python something), so the problem is not 
in the handler code itself.

When I run the httpd binary, all is fine. The mainhost serves up html 
files without any problems. The vhost is supposed to serve up .py files.
When I go to "http://vhost" I get the following error.

----
[Fri Jan 31 13:53:00 2003] [error] make_obcallback: could not import 
mod_python.apache.

'import site' failed; use -v for traceback
ImportError: No module named mod_python.apache
----

The apache.py is in 
/opt/python/default/lib/python2.3/site-packages/mod_python/apache.py.

I tried many of the suggested workarounds, I couldn't get any of them
to work. The content of my httpd.conf inside the <VirtualHost> and 
</VirtualHost> is enclosed below.

------------
   SetHandler python-program
   PythonDebug on
   # All handlers are stored in a different directory, for security
   PythonPath "sys.path+['/stage/w3serv/vhost.cs.uchicago.edu']"

   # This module handles reloading modules on demand
   PythonInitHandler handlers.init

   # Fire up the first Python handler
   PythonTransHandler handlers.translate

   # Logging configuration
   # PythonOption Log off
   PythonOption Log /stage/w3serv/vhost/logs/debug.log
   # Tell the Python site to ignore these paths, 

   PythonOption DontHandle /icons:/images:/~:/i/:/files/:/pipermail 

   # Tell the Python handler to ignore these extensions 

   PythonOption DontHandleExt html:htm:php:php3:phps:php4:cgi 

 

   # Then tell Apache how to handle them. 

   Alias /icons /stage/w3serv/common/docs/icons 

   Alias /images /stage/w3serv/common/docs/images 

   UserDir disable 

-----

Any help would be appreciated.

- Murali


From thm at duke.edu  Fri Jan 31 15:29:29 2003
From: thm at duke.edu (Hunter Matthews)
Date: Fri Jan  9 21:47:15 2004
Subject: [mod_python] Need GLIBC_2.3 for RH7.3
In-Reply-To: <E5431CF93E29F9478878F623E5B9CE98430546@OA3-SERVER.oa.oclc.org>
References: <E5431CF93E29F9478878F623E5B9CE98430546@OA3-SERVER.oa.oclc.org>
Message-ID: <1044044970.1873.43.camel@jade.biology.duke.edu>

The easiest way would be to download apache-devel, python2-devel (or
whatever you used to get python 2.2 on rh 7.3) and then simply rebuild
the mod_python source rpm. It should be clean.

On Fri, 2003-01-31 at 13:41, Terrall,Tom wrote:
> 
> Our configuration is apache 2.0.40, python 2.2, mod_python 3.0.1 on RH7.3.
> 
> Any suggestions on where might locate libc.so.6 (GLIBC_2.3) in rpm form for
> RH7.3? Cannot start apache configured with mod_python because our GLIBC is
> 2.2.45.  Extensive searching has not found it.
> 
> Is it possible to tell mod_python were to find libc.so.6 so that we can
> maintain two different versions?
> 
> Thanks - Tom Terrall

-- 
Hunter Matthews                          Unix / Network Administrator
Office: BioScience 145/244               Duke Univ. Biology Department
Key: F0F88438 / FFB5 34C0 B350 99A4 BB02  9779 A5DB 8B09 F0F8 8438
Never take candy from strangers. Especially on the internet.


From gmurali at cs.uchicago.edu  Fri Jan 31 16:37:40 2003
From: gmurali at cs.uchicago.edu (ganapathy murali krishnan)
Date: Fri Jan  9 21:47:15 2004
Subject: [mod_python] cannot import mod_python.apache error
References: <3E3ADAA6.2010707@cs.uchicago.edu> <1044049878.13789.42.camel@refugeeMedia>
Message-ID: <3E3AFAB4.8070205@cs.uchicago.edu>

The python library directories are readable and executable by "all".
More curiously, I created a mptest.py as suggested by the mod_python 
test, and it gave me the same error.

I then proceeded to remove the "from mod_python import apache" statement 
from mptest.py, figuring that in that sample code, all it wanted was the 
value "apache.OK". Removing the import statement and replacing 
"apache.OK" with 0 (its value as read from the actual apache.py file),
did not help! It still gave me the same error. So it looks as if 
mod_python.so is trying to import mod_python.apache, and it is triggered
every time I try to serve up a .py file.

I also confirmed that sys.path has the lib/python-2.3/site-packages 
(running python from command line).

I will try to see if strace can give me some information.

- Murali

Mongryong wrote:
> Have you checked out the FAQ section?
> Every newbie runs into this problem.  It's most likely because Apache
> does not  have permission to access python's lib directory.
> 
> Try starting Apache with root access if you can.  Check, the "user"
> paremeter in httpd.conf.  Make sure the "user" is somebody who can
> access python's lib directory.


From gmurali at cs.uchicago.edu  Fri Jan 31 17:15:50 2003
From: gmurali at cs.uchicago.edu (ganapathy murali krishnan)
Date: Fri Jan  9 21:47:15 2004
Subject: [mod_python] cannot import mod_python.apache error
References: <3E3ADAA6.2010707@cs.uchicago.edu>	<1044049878.13789.42.camel@refugeeMedia>  <3E3AFAB4.8070205@cs.uchicago.edu> <1044053589.1599.59.camel@refugeeMedia>
Message-ID: <3E3B03A6.60009@cs.uchicago.edu>

I tried an

strace HTTPDBINARY -d SERVERROOT -f conf/httpd.conf -X 2>/tmp/errlog

and then when I grep the output for site-packages, I dont see any 
site-packages/mod_python at all. All I see, is

-----grep 'site-packages' /tmp/errlog --------
stat64("/opt/python/default/lib/python2.3/site-packages", 
{st_mode=S_IFDIR|0755, st_size=4096, ...}) = 0
open("/opt/python/default/lib/python2.3/site-packages", 
O_RDONLY|O_NONBLOCK|O_LARGEFILE|O_DIRECTORY) = 9
stat64("/opt/python/default/lib/python2.3/site-packages", 
{st_mode=S_IFDIR|0755, st_size=4096, ...}) = 0
stat64("/opt/python/default/lib/python2.3/site-packages/sitecustomize", 
0xbfffe15c) = -1 ENOENT (No such file or directory)
open("/opt/python/default/lib/python2.3/site-packages/sitecustomize.so", 
O_RDONLY|O_LARGEFILE) = -1 ENOENT (No such file or directory)
open("/opt/python/default/lib/python2.3/site-packages/sitecustomizemodule.so", 
O_RDONLY|O_LARGEFILE) = -1 ENOENT (No such file or directory)
open("/opt/python/default/lib/python2.3/site-packages/sitecustomize.py", 
O_RDONLY|O_LARGEFILE) = -1 ENOENT (No such file or directory)
open("/opt/python/default/lib/python2.3/site-packages/sitecustomize.pyc", 
O_RDONLY|O_LARGEFILE) = -1 ENOENT (No such file or directory)
------------------------------------------------

and greping for mod_python gives
----------------------
open("/opt/apache/default/modules/mod_python.so", O_RDONLY) = 4
open("/opt/apache/default/modules/mod_python.so", O_RDONLY) = 5
write(2, "No module named mod_python.apach"..., 33) = 33
----------------------

finally 'grep "apache[^/-]" /tmp/errlog' gives
--------------
open("./php-apache2filter.ini", O_RDONLY) = -1 ENOENT (No such file or 
directory)
open("/opt/php/php-4.3.0/lib/php-apache2filter.ini", O_RDONLY) = -1 
ENOENT (No such file or directory)
read(8, "GET /apache_pb.gif HTTP/1.1\r\nHos"..., 8000) = 477
stat64("/stage/w3serv/vhost.cs.uchicago.edu/docs/apache_pb.gif", 
0xbffff81c) = -1 ENOENT (No such file or directory)
lstat64("/stage/w3serv/vhost.cs.uchicago.edu/docs/apache_pb.gif", 
0xbffff7ec) = -1 ENOENT (No such file or directory)
----------------

The [^/-] is to remove "apache/" and "apache-2.0.44".

It looks as if mod_python is not even trying to load the module?!

- Murali


From vmanera at manord.com  Thu Jan  2 11:09:59 2003
From: vmanera at manord.com (Manera, Villiam)
Date: Fri Jan  9 21:53:18 2004
Subject: I: [mod_python] problem with file download in mod-python 3.0.1
Message-ID: <52DC70C1C1575C418CB033523A29CF140E05AF@exchange2000.manord.com>

Da: Manera, Villiam 
Inviato: gioved? 2 gennaio 2003 11.08
A: 'Gregory (Grisha) Trubetskoy'
Oggetto: R: [mod_python] problem with file download in mod-python 3.0.1


The problem is in python 2.2, Christopher Sean Hilton [chris@vindaloo.com]
wrote:

His problem is that python 2.2 does not include the __methods__ attribute 
for classes but the publisher.py code which actually handles the file inload

depends on it. If he downgrades from python 2.2 to python 2.1 he'll have the

__methods__ attribute of the file class. Someone needs to address this in 
the mod_python code however:

        for m in field.file.__methods__:
            self.__dict__[m] = getattr(field.file, m)

        self.headers = field.headers
        self.filename = field.filename

doesn't work in python 2.2 because __methods__ doesn't exist. The code 
appears to be trying to make local copies of all of the methods in the 
object that gets passed to the user. I had this problem in Unix (FreeBSD) 
two weeks ago and downgrading my python from 2.2 to 2.1 solved it. A google 
search on python, __methods__, 2.1 and 2.2 will yield more information.

Chris

after this John D. Garberson [john.garberson@nexos.com] wrote:
Having to downgrade seems a bit extreme [;-)

I don't know much about the publisher.py module, never having used it.
But if you do this import:

------------------------------------------------------------------------

from types import BuiltinMethodType

------------------------------------------------------------------------

then this function:

------------------------------------------------------------------------

def sim_methods(obj):
    return filter(lambda s, t=obj:
           type(getattr(t, s)) == BuiltinMethodType,
                                             dir(obj))

--------------------------------------------------------------------------

works under both 2.0 and 2.2.1 (I don't have a 2.1 any more) and delivers
the list of methods that it seems you want, looking at the publisher.py
source.  If you're not a fan of the functional programming approach, then
a list comprehension:

-----------------------------------------------------------------------

def sim_methods(obj):
    return [m for m in dir(obj)
                   if type(getattr(obj, m)) == BuiltinMethodType]

-----------------------------------------------------------------------

works just as well.

You could just replace the 'for m in field.file.__methods__:'

with

'for m in sim_methods(field.file):'

Hope this helps.

John
==============================================================
This work fine and I don't investigate any more from more elegant solution
I'm not so good in python!!

Villiam M.
-----Messaggio originale-----
Da: Gregory (Grisha) Trubetskoy [mailto:grisha@modpython.org]
Inviato: venerd? 20 dicembre 2002 22.35
A: Manera, Villiam
Cc: Mod_python@modpython.org
Oggetto: Re: [mod_python] problem with file download in mod-python 3.0.1



I must be missing something obvious, but without testing it and just by
looking at the code, I'm not sure I understand what the benefit is of
filtering out BuiltinMethodType, as opposed to just using straight
dir(obj).

The above might be a moot point since just as Brian Hawthorne suggested
I'm not sure why we don't need the File class at all and am in the process
of trying to fish out any memories from my tired brain about how it came
about in the fist place....

Grisha

On Thu, 12 Dec 2002, Manera, Villiam wrote:

> I'm testing mod-python 3.0.1 with apache 2.0.43 and python 2.2.2
>
> I've founded a older problem in file download (from python 2.1 to 2.2)
>
> the workaround is still the same:
>
> in publisher.py:
>
>  class File:
>      """ Like a file, but also has headers and filename
>      """
>      def __init__(self, field):
>          # steal all the file-like methods
>          for m in dir(field.file):
> 		 self.__dict__[m] = getattr(field.file, m)
>
>          self.headers = field.headers
>          self.filename = field.filename
> ======================workaround
> ==============================================
>  class File:
>      """ Like a file, but also has headers and filename
>      """
>      def __init__(self, field):
>          # steal all the file-like methods
>          #for m in dir(field.file):    #dont' work
>          for m in self.sim_methods(field.file):
>              self.__dict__[m] = getattr(field.file, m)
>
>          self.headers = field.headers
>          self.filename = field.filename
>
> 	#new--------
>      def sim_methods(self,obj):
>          from types import BuiltinMethodType
>          return filter(lambda s, t=obj:
>             type(getattr(t, s)) == BuiltinMethodType, dir(obj))
>
>
> I hope it will be put in place
>
> regards
>
> Villiam Manera
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>



_______________________________________________
Mod_python mailing list
Mod_python@modpython.org
http://www.modpython.org/mailman/listinfo/mod_python


From Markus.Burrer at embedit.de  Thu Jan  2 17:24:02 2003
From: Markus.Burrer at embedit.de (Markus Burrer)
Date: Fri Jan  9 21:53:18 2004
Subject: [mod_python] Installing Python for Apache
Message-ID: <3E1467A2.2020603@embedit.de>

Hi,
i try to install mod_python, but when i add LoadModule to the http.conf 
i get the error message, that Apache could not found the module, but the 
path and the filename are ok and the file is in the modules dir.
I'm using Apache 2.0.43, Python 2.2.2 and python2.2.2-apache2.0.43.zip

Any idea?

Thx for any help and a happy new year

Markus


From wweng at kencast.com  Thu Jan  2 12:10:08 2003
From: wweng at kencast.com (Wei Weng)
Date: Fri Jan  9 21:53:18 2004
Subject: [mod_python] How to build mod_python on Windows NT?
Message-ID: <3E147270.6010409@kencast.com>

I am using Windows NT, Apache2, VC++ 5.0.

Couldn't find any documentation on the procedures in the source zip file 
and googling didn't help much either.

Thanks



From dylanvaughn at yahoo.com  Thu Jan  2 09:54:55 2003
From: dylanvaughn at yahoo.com (Dylan Vaughn)
Date: Fri Jan  9 21:53:18 2004
Subject: [mod_python] linking installation problem
Message-ID: <20030102175455.64670.qmail@web40708.mail.yahoo.com>

Hello all, 

I'm trying to install mod_python and am running into
some errors - I'm running Red Hat Linux 7.3 and I've
already installed:

python 2.2.2 (from source, installed in
/usr/local/bin)
apache 2.0.43 (from source, installed in
/usr/local/apache2)

This is what I'm telling configure:

./configure \
--with-apxs=/usr/local/apache2/bin/apxs \
--with-python=/usr/local/bin/python2.2

which works fine, but when I do make I get at the end:

...lots of other stuff...:
/usr/local/apache2/build/libtool --silent --mode=link
gcc -o mod_python.la
-I/usr/local/src/mod_python-3.0.1/src/include
-I/usr/local/apache2/include
-I/usr/local/include/python2.2  -rpath
/usr/local/apache2/modules -module -avoid-version 
hlistobject.lo hlist.lo filterobject.lo connobject.lo
serverobject.lo util.lo tableobject.lo
requestobject.lo _apachemodule.lo mod_python.lo
-L/usr/local/lib/python2.2/config -Xlinker
-export-dynamic -lm -lpython2.2 -ldl -lpthread -lutil
-lm

*** Warning: This library needs some functionality
provided by -lpython2.2.
*** I have the capability to make that library
automatically link in when
*** you link to this library.  But I can only do this
if you have a
*** shared version of the library, which you do not
appear to have.

*** Warning: libtool could not satisfy all declared
inter-library
*** dependencies of module mod_python.  Therefore,
libtool will create
*** a static module, that should work as long as the
dlopening
*** application is linked with the -dlopen flag.

Now su and make install
  (or, if you only want to perform a partial install,
   you can use make install_dso and make
install_py_lib)

make[1]: Leaving directory
`/usr/local/src/mod_python-3.0.1/src'

and when I try make install I get:

...lots of other stuff...:
/usr/local/apache2/build/libtool --silent
--mode=compile gcc   -DAP_HAVE_DESIGNATED_INITIALIZER
-DLINUX=2 -D_REENTRANT -D_XOPEN_SOURCE=500
-D_BSD_SOURCE -D_SVID_SOURCE -D_GNU_SOURCE -g -O2
-pthread -I/usr/local/apache2/include
-I/usr/local/src/mod_python-3.0.1/src/include
-I/usr/local/apache2/include
-I/usr/local/include/python2.2  -c -o hlistobject.lo
hlistobject.c && touch hlistobject.slo
/usr/local/apache2/build/libtool --silent --mode=link
gcc -o mod_python.la
-I/usr/local/src/mod_python-3.0.1/src/include
-I/usr/local/apache2/include
-I/usr/local/include/python2.2  -rpath
/usr/local/apache2/modules -module -avoid-version 
hlistobject.lo hlist.lo filterobject.lo connobject.lo
serverobject.lo util.lo tableobject.lo
requestobject.lo _apachemodule.lo mod_python.lo
-L/usr/local/lib/python2.2/config -Xlinker
-export-dynamic -lm -lpython2.2 -ldl -lpthread -lutil
-lm

*** Warning: This library needs some functionality
provided by -lpython2.2.
*** I have the capability to make that library
automatically link in when
*** you link to this library.  But I can only do this
if you have a
*** shared version of the library, which you do not
appear to have.

*** Warning: libtool could not satisfy all declared
inter-library
*** dependencies of module mod_python.  Therefore,
libtool will create
*** a static module, that should work as long as the
dlopening
*** application is linked with the -dlopen flag.

Now su and make install
  (or, if you only want to perform a partial install,
   you can use make install_dso and make
install_py_lib)

make[2]: Leaving directory
`/usr/local/src/mod_python-3.0.1/src'

Performing DSO installation.

/usr/bin/install -c src/mod_python.so
/usr/local/apache2/modules
/usr/bin/install: cannot stat `src/mod_python.so': No
such file or directory
make[1]: *** [install_dso] Error 1
make[1]: Leaving directory
`/usr/local/src/mod_python-3.0.1'
make: *** [install] Error 2
[root@dana mod_python-3.0.1]# 

I googled the errors and didn't get anywhere. 

Any ideas?

Thanks in advance,

Dylan


__________________________________________________
Do you Yahoo!?
Yahoo! Mail Plus - Powerful. Affordable. Sign up now.
http://mailplus.yahoo.com

From grisha at modpython.org  Thu Jan  2 14:02:54 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:53:19 2004
Subject: [mod_python] linking installation problem
In-Reply-To: <20030102175455.64670.qmail@web40708.mail.yahoo.com>
Message-ID: <20030102140142.N57575-100000@eden.ispol.com>

I think this is the same libtool problem that was reported earlier on this
list. Try rebuilding your apache, but run ./buildconf before running
./configure.

Grisha

On Thu, 2 Jan 2003, Dylan Vaughn wrote:

>
> Hello all,
>
> I'm trying to install mod_python and am running into
> some errors - I'm running Red Hat Linux 7.3 and I've
> already installed:
>
> python 2.2.2 (from source, installed in
> /usr/local/bin)
> apache 2.0.43 (from source, installed in
> /usr/local/apache2)
>
> This is what I'm telling configure:
>
> ./configure \
> --with-apxs=/usr/local/apache2/bin/apxs \
> --with-python=/usr/local/bin/python2.2
>
> which works fine, but when I do make I get at the end:
>
> ...lots of other stuff...:
> /usr/local/apache2/build/libtool --silent --mode=link
> gcc -o mod_python.la
> -I/usr/local/src/mod_python-3.0.1/src/include
> -I/usr/local/apache2/include
> -I/usr/local/include/python2.2  -rpath
> /usr/local/apache2/modules -module -avoid-version
> hlistobject.lo hlist.lo filterobject.lo connobject.lo
> serverobject.lo util.lo tableobject.lo
> requestobject.lo _apachemodule.lo mod_python.lo
> -L/usr/local/lib/python2.2/config -Xlinker
> -export-dynamic -lm -lpython2.2 -ldl -lpthread -lutil
> -lm
>
> *** Warning: This library needs some functionality
> provided by -lpython2.2.
> *** I have the capability to make that library
> automatically link in when
> *** you link to this library.  But I can only do this
> if you have a
> *** shared version of the library, which you do not
> appear to have.
>
> *** Warning: libtool could not satisfy all declared
> inter-library
> *** dependencies of module mod_python.  Therefore,
> libtool will create
> *** a static module, that should work as long as the
> dlopening
> *** application is linked with the -dlopen flag.
>
> Now su and make install
>   (or, if you only want to perform a partial install,
>    you can use make install_dso and make
> install_py_lib)
>
> make[1]: Leaving directory
> `/usr/local/src/mod_python-3.0.1/src'
>
> and when I try make install I get:
>
> ...lots of other stuff...:
> /usr/local/apache2/build/libtool --silent
> --mode=compile gcc   -DAP_HAVE_DESIGNATED_INITIALIZER
> -DLINUX=2 -D_REENTRANT -D_XOPEN_SOURCE=500
> -D_BSD_SOURCE -D_SVID_SOURCE -D_GNU_SOURCE -g -O2
> -pthread -I/usr/local/apache2/include
> -I/usr/local/src/mod_python-3.0.1/src/include
> -I/usr/local/apache2/include
> -I/usr/local/include/python2.2  -c -o hlistobject.lo
> hlistobject.c && touch hlistobject.slo
> /usr/local/apache2/build/libtool --silent --mode=link
> gcc -o mod_python.la
> -I/usr/local/src/mod_python-3.0.1/src/include
> -I/usr/local/apache2/include
> -I/usr/local/include/python2.2  -rpath
> /usr/local/apache2/modules -module -avoid-version
> hlistobject.lo hlist.lo filterobject.lo connobject.lo
> serverobject.lo util.lo tableobject.lo
> requestobject.lo _apachemodule.lo mod_python.lo
> -L/usr/local/lib/python2.2/config -Xlinker
> -export-dynamic -lm -lpython2.2 -ldl -lpthread -lutil
> -lm
>
> *** Warning: This library needs some functionality
> provided by -lpython2.2.
> *** I have the capability to make that library
> automatically link in when
> *** you link to this library.  But I can only do this
> if you have a
> *** shared version of the library, which you do not
> appear to have.
>
> *** Warning: libtool could not satisfy all declared
> inter-library
> *** dependencies of module mod_python.  Therefore,
> libtool will create
> *** a static module, that should work as long as the
> dlopening
> *** application is linked with the -dlopen flag.
>
> Now su and make install
>   (or, if you only want to perform a partial install,
>    you can use make install_dso and make
> install_py_lib)
>
> make[2]: Leaving directory
> `/usr/local/src/mod_python-3.0.1/src'
>
> Performing DSO installation.
>
> /usr/bin/install -c src/mod_python.so
> /usr/local/apache2/modules
> /usr/bin/install: cannot stat `src/mod_python.so': No
> such file or directory
> make[1]: *** [install_dso] Error 1
> make[1]: Leaving directory
> `/usr/local/src/mod_python-3.0.1'
> make: *** [install] Error 2
> [root@dana mod_python-3.0.1]#
>
> I googled the errors and didn't get anywhere.
>
> Any ideas?
>
> Thanks in advance,
>
> Dylan
>
>
> __________________________________________________
> Do you Yahoo!?
> Yahoo! Mail Plus - Powerful. Affordable. Sign up now.
> http://mailplus.yahoo.com
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From dylanvaughn at yahoo.com  Thu Jan  2 12:02:16 2003
From: dylanvaughn at yahoo.com (Dylan Vaughn)
Date: Fri Jan  9 21:53:19 2004
Subject: [mod_python] linking installation problem
In-Reply-To: <20030102140142.N57575-100000@eden.ispol.com>
Message-ID: <20030102200216.76213.qmail@web40702.mail.yahoo.com>

hey there, 

thanks for pointing out the earlier traffic - 

doing ./buildconf before ./configure gave me a
different linking error when rebuilding apache, but
copying over httpd-2.0.43/srclib/apr/libtool with
/usr/local/bin/libtool (suggested in the earlier
thread) and then rebuilding apache and mod_python did
fix the problem. 

thanks for your help! 

dylan



--- "Gregory (Grisha) Trubetskoy"
<grisha@modpython.org> wrote:
> 
> I think this is the same libtool problem that was
> reported earlier on this
> list. Try rebuilding your apache, but run
> ./buildconf before running
> ./configure.
> 
> Grisha
> 
> On Thu, 2 Jan 2003, Dylan Vaughn wrote:
> 
> >
> > Hello all,
> >
> > I'm trying to install mod_python and am running
> into
> > some errors - I'm running Red Hat Linux 7.3 and
> I've
> > already installed:
> >
> > python 2.2.2 (from source, installed in
> > /usr/local/bin)
> > apache 2.0.43 (from source, installed in
> > /usr/local/apache2)
> >
> > This is what I'm telling configure:
> >
> > ./configure \
> > --with-apxs=/usr/local/apache2/bin/apxs \
> > --with-python=/usr/local/bin/python2.2
> >
> > which works fine, but when I do make I get at the
> end:
> >
> > ...lots of other stuff...:
> > /usr/local/apache2/build/libtool --silent
> --mode=link
> > gcc -o mod_python.la
> > -I/usr/local/src/mod_python-3.0.1/src/include
> > -I/usr/local/apache2/include
> > -I/usr/local/include/python2.2  -rpath
> > /usr/local/apache2/modules -module -avoid-version
> > hlistobject.lo hlist.lo filterobject.lo
> connobject.lo
> > serverobject.lo util.lo tableobject.lo
> > requestobject.lo _apachemodule.lo mod_python.lo
> > -L/usr/local/lib/python2.2/config -Xlinker
> > -export-dynamic -lm -lpython2.2 -ldl -lpthread
> -lutil
> > -lm
> >
> > *** Warning: This library needs some functionality
> > provided by -lpython2.2.
> > *** I have the capability to make that library
> > automatically link in when
> > *** you link to this library.  But I can only do
> this
> > if you have a
> > *** shared version of the library, which you do
> not
> > appear to have.
> >
> > *** Warning: libtool could not satisfy all
> declared
> > inter-library
> > *** dependencies of module mod_python.  Therefore,
> > libtool will create
> > *** a static module, that should work as long as
> the
> > dlopening
> > *** application is linked with the -dlopen flag.
> >
> > Now su and make install
> >   (or, if you only want to perform a partial
> install,
> >    you can use make install_dso and make
> > install_py_lib)
> >
> > make[1]: Leaving directory
> > `/usr/local/src/mod_python-3.0.1/src'
> >
> > and when I try make install I get:
> >
> > ...lots of other stuff...:
> > /usr/local/apache2/build/libtool --silent
> > --mode=compile gcc  
> -DAP_HAVE_DESIGNATED_INITIALIZER
> > -DLINUX=2 -D_REENTRANT -D_XOPEN_SOURCE=500
> > -D_BSD_SOURCE -D_SVID_SOURCE -D_GNU_SOURCE -g -O2
> > -pthread -I/usr/local/apache2/include
> > -I/usr/local/src/mod_python-3.0.1/src/include
> > -I/usr/local/apache2/include
> > -I/usr/local/include/python2.2  -c -o
> hlistobject.lo
> > hlistobject.c && touch hlistobject.slo
> > /usr/local/apache2/build/libtool --silent
> --mode=link
> > gcc -o mod_python.la
> > -I/usr/local/src/mod_python-3.0.1/src/include
> > -I/usr/local/apache2/include
> > -I/usr/local/include/python2.2  -rpath
> > /usr/local/apache2/modules -module -avoid-version
> > hlistobject.lo hlist.lo filterobject.lo
> connobject.lo
> > serverobject.lo util.lo tableobject.lo
> > requestobject.lo _apachemodule.lo mod_python.lo
> > -L/usr/local/lib/python2.2/config -Xlinker
> > -export-dynamic -lm -lpython2.2 -ldl -lpthread
> -lutil
> > -lm
> >
> > *** Warning: This library needs some functionality
> > provided by -lpython2.2.
> > *** I have the capability to make that library
> > automatically link in when
> > *** you link to this library.  But I can only do
> this
> > if you have a
> > *** shared version of the library, which you do
> not
> > appear to have.
> >
> > *** Warning: libtool could not satisfy all
> declared
> > inter-library
> > *** dependencies of module mod_python.  Therefore,
> > libtool will create
> > *** a static module, that should work as long as
> the
> > dlopening
> > *** application is linked with the -dlopen flag.
> >
> > Now su and make install
> >   (or, if you only want to perform a partial
> install,
> >    you can use make install_dso and make
> > install_py_lib)
> >
> > make[2]: Leaving directory
> > `/usr/local/src/mod_python-3.0.1/src'
> >
> > Performing DSO installation.
> >
> > /usr/bin/install -c src/mod_python.so
> > /usr/local/apache2/modules
> > /usr/bin/install: cannot stat `src/mod_python.so':
> No
> > such file or directory
> > make[1]: *** [install_dso] Error 1
> > make[1]: Leaving directory
> > `/usr/local/src/mod_python-3.0.1'
> > make: *** [install] Error 2
> > [root@dana mod_python-3.0.1]#
> >
> > I googled the errors and didn't get anywhere.
> >
> > Any ideas?
> >
> > Thanks in advance,
> >
> > Dylan
> >
> >
> > __________________________________________________
> > Do you Yahoo!?
> > Yahoo! Mail Plus - Powerful. Affordable. Sign up
> now.
> > http://mailplus.yahoo.com
> > _______________________________________________
> > Mod_python mailing list
> > Mod_python@modpython.org
> >
> http://www.modpython.org/mailman/listinfo/mod_python
> >
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python


__________________________________________________
Do you Yahoo!?
Yahoo! Mail Plus - Powerful. Affordable. Sign up now.
http://mailplus.yahoo.com

From listmail at xs4all.nl  Sun Jan  5 01:47:26 2003
From: listmail at xs4all.nl (baz)
Date: Fri Jan  9 21:53:19 2004
Subject: [mod_python] linking installation problem [Fwd: Re: [mod_python]
 installation problems]
In-Reply-To: <20030102175455.64670.qmail@web40708.mail.yahoo.com>
References: <20030102175455.64670.qmail@web40708.mail.yahoo.com>
Message-ID: <3E17809E.7090206@xs4all.nl>


-------- Original Message --------
Subject: Re: [mod_python] installation problems
Date: Sun, 22 Dec 2002 14:22:24 +0100
From: baz <listmail@xs4all.nl>
To: Lex Berezhny <LBerezhny@DevIS.com>
References: <1040522021.12314.421.camel@hortus>


Hey, I don't think your problem is libtool related!!

I had the exact same thing, it's a Python thing, not apache..

My solution:

try
# locate libpython2.2.so

if nothing comes up you don't have the python shared library, which is
needed by mod python.

i used the following commands to build it from source and install it:

cd Python-2.2.2/
make distclean
./configure
make OPT="-fpic -O2"
mkdir .extract
(cd .extract; ar xv ../libpython2.2.a)
gcc -shared -o libpython2.2.so .extract/*.o
rm -rf .extract
make install


then proceed to build mod_python as usual..

have fun!

baz.



Lex Berezhny wrote:
 > hi all,
 >
 >   I'm having trouble installing mod_python.
 >
 > My environment:
 > Red Hat Linux release 7.3
 > gcc 2.96
 >
 >
 > My install process:
 >
 > wget http://www.apache.org/dist/httpd/httpd-2.0.43.tar.gz
 > tar xzvf httpd-2.0.43.tar.gz
 > wget http://apache.webmeta.com/dist/httpd/modpython/mod_python-3.0.1.tgz
 > tar xzvf mod_python-3.0.1.tgz
 > wget http://www.python.org/ftp/python/2.2.2/Python-2.2.2.tgz
 > tar xzvf Python-2.2.2.tgz
 >
 > cd httpd-2.0.43
 > ./configure --prefix=/usr/local/apache2
 > make
 > make install
 >
 > cd ../Python-2.2.2/
 > ./configure
 > make
 > make install
 >
 > cd ../mod_python-3.0.1/
 > ./configure --with-apxs=/usr/local/apache2/bin/apxs
 > --with-python=/usr/local/bin/python2.2
 > make
 > make install
 >
 >
 > Warning messages I get (during make):
 >
 > *** Warning: This library needs some functionality provided by
 > -lpython2.2.
 > *** I have the capability to make that library automatically link in
 > when
 > *** you link to this library.  But I can only do this if you have a
 > *** shared version of the library, which you do not appear to have.
 >
 > *** Warning: libtool could not satisfy all declared inter-library
 > *** dependencies of module mod_python.  Therefore, libtool will create
 > *** a static module, that should work as long as the dlopening
 > *** application is linked with the -dlopen flag.
 >
 >
 > The final, fatal, error (during make install):
 >
 > make[2]: Leaving directory
 > `/usr/local/apache2install/mod_python-3.0.1/src'
 >
 > Performing DSO installation.
 >
 > /usr/bin/install -c src/mod_python.so /usr/local/apache2/modules
 > /usr/bin/install: cannot stat `src/mod_python.so': No such file or
 > directory
 > make[1]: *** [install_dso] Error 1
 > make[1]: Leaving directory `/usr/local/apache2install/mod_python-3.0.1'
 > make: *** [install] Error 2
 >
 >
 >
 >
 > any help or pointers would be greatly appreciated,
 >
 >  - lex


From vmedina98 at unitec.edu.ve  Sat Jan  4 21:48:47 2003
From: vmedina98 at unitec.edu.ve (Victor Medina)
Date: Fri Jan  9 21:53:19 2004
Subject: [mod_python] Hello, this is my first post - Compiling mod_python on Windows
Message-ID: <5.2.0.9.0.20030104213024.0264bd50@200.35.82.226>

Hi everybody, have a happy new year!

My name is Victor Medina, I am from Venezuela. I am a c++, java, php and 
python developer (I just like OOP =) ) and also a web developer and I also 
have a open source project on SourceForge, it is named Ikirux.
Ikirux is an effort to build an easy to install completely integrated web 
development environment based around the Apache 2 webserver and other open 
source technology.
http://sourceforge.net/projects/ikirux
Ikirux severs currently support:

Apache, webdav, php4, the latest openssl, zlib and mod deflate, tomcat, 
mysql4, and i want perl and python support out of the box for the next 
release, every thing under a nice, configurable and fast installer built 
with the Inno Setup Compiler.

I am currently working on the next release of the Ikirux server. I want to 
integrate the mod_python module into the next release, but i am having 
problems getting it compiled on  my test machine. I am currently using 
Visual Studio 6 SP5 and Cygwin tools on a Windows 2000 Server SP3. Checking 
out the mod_python source I found a VC project for the Visual Studio .NET, 
which I don't own right now. Anyway, I read the project file (it is a xml 
file!) and try to build a VC++ 6 project out of the information on that 
file. Compiling fails awfully. I also have a complete install of Python 
2.2.2 that i built and the apache 2.0.43, complete; that is binary, 
libraries and source tree.

Is it possible to built mod_python with VC++ 6?

How can I built it?


Thanx for the help

Victor Medina
UNITEC - Venezuela
vmedina98@unitec.edu.ve
msn: victor_medina@hotmail.com   



From grisha at modpython.org  Sat Jan  4 21:55:32 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:53:19 2004
Subject: [mod_python] linking installation problem [Fwd: Re: [mod_python]
 installation problems]
In-Reply-To: <3E17809E.7090206@xs4all.nl>
Message-ID: <20030104215200.O3336-100000@eden.ispol.com>

Just to clarify it -

I have no shared library on my Red Hat machine (RH 8.0), and it compiles
fine, the shared library is not required to compile mod_python. If there
is one, mp will use it, but it is not required.

However, old versions of libtool *require* that you have a shared library
if you're making one, the latest versions of libtool do not require it,
but will issue a warning.

Grisha

On Sun, 5 Jan 2003, baz wrote:

>
>
> -------- Original Message --------
> Subject: Re: [mod_python] installation problems
> Date: Sun, 22 Dec 2002 14:22:24 +0100
> From: baz <listmail@xs4all.nl>
> To: Lex Berezhny <LBerezhny@DevIS.com>
> References: <1040522021.12314.421.camel@hortus>
>
>
> Hey, I don't think your problem is libtool related!!
>
> I had the exact same thing, it's a Python thing, not apache..
>
> My solution:
>
> try
> # locate libpython2.2.so
>
> if nothing comes up you don't have the python shared library, which is
> needed by mod python.
>
> i used the following commands to build it from source and install it:
>
> cd Python-2.2.2/
> make distclean
> ./configure
> make OPT="-fpic -O2"
> mkdir .extract
> (cd .extract; ar xv ../libpython2.2.a)
> gcc -shared -o libpython2.2.so .extract/*.o
> rm -rf .extract
> make install
>
>
> then proceed to build mod_python as usual..
>
> have fun!
>
> baz.
>
>
>
> Lex Berezhny wrote:
>  > hi all,
>  >
>  >   I'm having trouble installing mod_python.
>  >
>  > My environment:
>  > Red Hat Linux release 7.3
>  > gcc 2.96
>  >
>  >
>  > My install process:
>  >
>  > wget http://www.apache.org/dist/httpd/httpd-2.0.43.tar.gz
>  > tar xzvf httpd-2.0.43.tar.gz
>  > wget http://apache.webmeta.com/dist/httpd/modpython/mod_python-3.0.1.tgz
>  > tar xzvf mod_python-3.0.1.tgz
>  > wget http://www.python.org/ftp/python/2.2.2/Python-2.2.2.tgz
>  > tar xzvf Python-2.2.2.tgz
>  >
>  > cd httpd-2.0.43
>  > ./configure --prefix=/usr/local/apache2
>  > make
>  > make install
>  >
>  > cd ../Python-2.2.2/
>  > ./configure
>  > make
>  > make install
>  >
>  > cd ../mod_python-3.0.1/
>  > ./configure --with-apxs=/usr/local/apache2/bin/apxs
>  > --with-python=/usr/local/bin/python2.2
>  > make
>  > make install
>  >
>  >
>  > Warning messages I get (during make):
>  >
>  > *** Warning: This library needs some functionality provided by
>  > -lpython2.2.
>  > *** I have the capability to make that library automatically link in
>  > when
>  > *** you link to this library.  But I can only do this if you have a
>  > *** shared version of the library, which you do not appear to have.
>  >
>  > *** Warning: libtool could not satisfy all declared inter-library
>  > *** dependencies of module mod_python.  Therefore, libtool will create
>  > *** a static module, that should work as long as the dlopening
>  > *** application is linked with the -dlopen flag.
>  >
>  >
>  > The final, fatal, error (during make install):
>  >
>  > make[2]: Leaving directory
>  > `/usr/local/apache2install/mod_python-3.0.1/src'
>  >
>  > Performing DSO installation.
>  >
>  > /usr/bin/install -c src/mod_python.so /usr/local/apache2/modules
>  > /usr/bin/install: cannot stat `src/mod_python.so': No such file or
>  > directory
>  > make[1]: *** [install_dso] Error 1
>  > make[1]: Leaving directory `/usr/local/apache2install/mod_python-3.0.1'
>  > make: *** [install] Error 2
>  >
>  >
>  >
>  >
>  > any help or pointers would be greatly appreciated,
>  >
>  >  - lex
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From gnb at itga.com.au  Mon Jan  6 17:16:03 2003
From: gnb at itga.com.au (Gregory Bond)
Date: Fri Jan  9 21:53:19 2004
Subject: [mod_python] http 1.1 persistent connections 
In-Reply-To: Your message of Fri, 27 Dec 2002 00:16:36 -0800.
Message-ID: <200301060616.RAA02997@lightning.itga.com.au>

> I'm new to Python and mod_python - and I'm having trouble finding out if mod_
> python supports  http1.1's persistent connections.  

It seems to for me, at least for shorter-term connections (only 10s of seconds
in my case).  Just call req.write() to send stuff and it seems to come through 
with no delays or buffering or what-have-you.

But you'd have to think carefully about the possible implications of multiple, 
long-running mod_python apps on your server resources.....




From vmedina98 at unitec.edu.ve  Mon Jan  6 18:29:51 2003
From: vmedina98 at unitec.edu.ve (Victor Medina)
Date: Fri Jan  9 21:53:19 2004
Subject: [mod_python] Compiling mod_python on Win32
Message-ID: <5.2.0.9.0.20030106181338.00ba3798@200.35.82.226>

Hi guys!

I am still having problems with mod_python in windows. Hope not be 
bothering too much, but I really want to have mod_python for Apache 2. 
Please understand that compiling it myself is a must.

Ok, so this is what is happening, I am receiving to kinds of problems

PROBLEM #1
F:\IkiruxNXT-Source\mod_python-3.0.1\src\requestobject.c(1017) : error 
C2632: 'long' followed by 'long' is illegal
F:\IkiruxNXT-Source\mod_python-3.0.1\src\requestobject.c(1018) : error 
C2632: 'long' followed by 'long' is illegal
F:\IkiruxNXT-Source\mod_python-3.0.1\src\requestobject.c(1018) : error 
C2632: 'long' followed by 'long' is illegal

The problem seems pretty obvious there is an illegal long long declaration, 
but as far as I know I can use long long's in Win32, at least with the 
Borland Builder compiler, this is the code fragment:

static PyObject *getreq_recmbr_off(requestobject *self, void *name)
{
     PyMemberDef *md = find_memberdef(request_rec_mbrs, name);
     char *addr = (char *)self->request_rec + md->offset;
     if (sizeof(apr_off_t) == sizeof(long long)) { <---- HERE!!!
	long long l = *(long long*)addr; <---- HERE!!!
	return PyLong_FromLongLong(l);
     }
     else {
	/* assume it's long */
	long l = *(long*)addr;
	return PyLong_FromLong(l);
     }
}

PROBLEM #2

I am receiving several link errors(well ok, not errors, just plain 
warnings, I am concerned about the quantity of items), about inconsistent 
linkage: inconsistent dll linkage.  dllexport assumed.

I am attaching the complete output log, hope not be abusing or breaking any 
rules inside the list.

I am using Windows 2000 SP3, Visual Studio 6 SP5,  Python 2.2.2 (custom 
built, not Python.org release, not Activestate's release) and Apache 2.0.43 
(same here,  custom built). The include, lib, libs directory are in the 
VC++ Path, thou not includes as part of the project.

Thanxs for your time an cooperation, I would really a appreciate any 
comments or hints

Victor Medina
UNITEC
vmedina98@unitec.edu.ve
msn: victor_medina@hotmail.com
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mod_python OUTPUT Log.zip
Type: application/zip
Size: 1193 bytes
Desc: not available
Url : http://mailman.modpython.org/pipermail/mod_python/attachments/20030106/ee1bf528/mod_pythonOUTPUTLog-0001.zip
From grisha at modpython.org  Tue Jan  7 00:21:15 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:53:19 2004
Subject: [mod_python] Compiling mod_python on Win32
In-Reply-To: <5.2.0.9.0.20030106181338.00ba3798@200.35.82.226>
Message-ID: <20030106234207.V30614-100000@eden.ispol.com>

Microsoft C compiler doesn't support "long long", this has been fixed in
the latest CVS code. Make the functin look like this, and it will work
OK:

static PyObject *getreq_recmbr_off(requestobject *self, void *name)
{
    PyMemberDef *md = find_memberdef(request_rec_mbrs, name);
    char *addr = (char *)self->request_rec + md->offset;
    if (sizeof(apr_off_t) == sizeof(LONG_LONG)) {
	LONG_LONG l = *(LONG_LONG*)addr;
	return PyLong_FromLongLong(l);
    }
    else {
	/* assume it's long */
	long l = *(long*)addr;
	return PyLong_FromLong(l);
    }
}


On Mon, 6 Jan 2003, Victor Medina wrote:

> Hi guys!
>
> I am still having problems with mod_python in windows. Hope not be
> bothering too much, but I really want to have mod_python for Apache 2.
> Please understand that compiling it myself is a must.
>
> Ok, so this is what is happening, I am receiving to kinds of problems
>
> PROBLEM #1
> F:\IkiruxNXT-Source\mod_python-3.0.1\src\requestobject.c(1017) : error
> C2632: 'long' followed by 'long' is illegal
> F:\IkiruxNXT-Source\mod_python-3.0.1\src\requestobject.c(1018) : error
> C2632: 'long' followed by 'long' is illegal
> F:\IkiruxNXT-Source\mod_python-3.0.1\src\requestobject.c(1018) : error
> C2632: 'long' followed by 'long' is illegal
>
> The problem seems pretty obvious there is an illegal long long declaration,
> but as far as I know I can use long long's in Win32, at least with the
> Borland Builder compiler, this is the code fragment:
>
> static PyObject *getreq_recmbr_off(requestobject *self, void *name)
> {
>      PyMemberDef *md = find_memberdef(request_rec_mbrs, name);
>      char *addr = (char *)self->request_rec + md->offset;
>      if (sizeof(apr_off_t) == sizeof(long long)) { <---- HERE!!!
> 	long long l = *(long long*)addr; <---- HERE!!!
> 	return PyLong_FromLongLong(l);
>      }
>      else {
> 	/* assume it's long */
> 	long l = *(long*)addr;
> 	return PyLong_FromLong(l);
>      }
> }
>
> PROBLEM #2
>
> I am receiving several link errors(well ok, not errors, just plain
> warnings, I am concerned about the quantity of items), about inconsistent
> linkage: inconsistent dll linkage.  dllexport assumed.
>
> I am attaching the complete output log, hope not be abusing or breaking any
> rules inside the list.
>
> I am using Windows 2000 SP3, Visual Studio 6 SP5,  Python 2.2.2 (custom
> built, not Python.org release, not Activestate's release) and Apache 2.0.43
> (same here,  custom built). The include, lib, libs directory are in the
> VC++ Path, thou not includes as part of the project.
>
> Thanxs for your time an cooperation, I would really a appreciate any
> comments or hints
>
> Victor Medina
> UNITEC
> vmedina98@unitec.edu.ve
> msn: victor_medina@hotmail.com


From vmedina98 at unitec.edu.ve  Tue Jan  7 12:02:30 2003
From: vmedina98 at unitec.edu.ve (Victor Medina)
Date: Fri Jan  9 21:53:19 2004
Subject: [mod_python] Compiling mod_python on Win32
In-Reply-To: <5.2.0.9.0.20030106181338.00ba3798@200.35.82.226>
Message-ID: <5.2.0.9.0.20030107115502.00bf72d8@200.35.82.226>

Hi Guys!!!

Using LONG_LONG seems to have fixed that problem, although I still can't 
compile mod_python, things are getting better. =)

DOUBT#1: LONG_LONG is a macro for safe type conversion?

PROBLEM#1: I am attaching my output, I am concerned about several thing 
here, there is a lot of warnings about link problems, are they normal, 
expected stuff? Second; there are unresolved external symbols that the 
compiler can't map out here:

connobject.obj : error LNK2001: unresolved external symbol __imp__ntohs@4
connobject.obj : error LNK2001: unresolved external symbol __imp__ntohl@4

I included must of the libs inside the projects, the remaining libs are in 
the path, what is missing?

Thanxs for the help and the patience

Victor Medina
UNITEC
vmedina98@unitec.edu.ve
msn:victor_medina@hotmail.com



From vmedina98 at unitec.edu.ve  Tue Jan  7 12:04:22 2003
From: vmedina98 at unitec.edu.ve (Victor Medina)
Date: Fri Jan  9 21:53:19 2004
Subject: [mod_python] Compiling mod_python on Win32
Message-ID: <5.2.0.9.0.20030107120355.00c0c7b0@200.35.82.226>

Hi Guys!!!

Using LONG_LONG seems to have fixed that problem, although I still can't 
compile mod_python, things are getting better. =)

DOUBT#1: LONG_LONG is a macro for safe type conversion?

PROBLEM#1: I am attaching my output, I am concerned about several thing 
here, there is a lot of warnings about link problems, are they normal, 
expected stuff? Second; there are unresolved external symbols that the 
compiler can't map out here:

connobject.obj : error LNK2001: unresolved external symbol __imp__ntohs@4
connobject.obj : error LNK2001: unresolved external symbol __imp__ntohl@4

I included must of the libs inside the projects, the remaining libs are in 
the path, what is missing?

Thanxs for the help and the patience

Victor Medina
UNITEC
vmedina98@unitec.edu.ve
msn:victor_medina@hotmail.com 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mod_python.zip
Type: application/zip
Size: 10180 bytes
Desc: not available
Url : http://mailman.modpython.org/pipermail/mod_python/attachments/20030107/c4a6b014/mod_python-0001.zip
From jwyant at sfbcic.com  Tue Jan  7 10:14:12 2003
From: jwyant at sfbcic.com (Wyant, Jaime)
Date: Fri Jan  9 21:53:19 2004
Subject: [mod_python] Compiling mod_python on Win32
Message-ID: <654DAEACA633D511B5F500902784B0521890D2@MS-EXCHANGE>

>>>-----Original Message-----
>>>From: Victor Medina [mailto:vmedina98@unitec.edu.ve]
>>>Sent: Tuesday, January 07, 2003 10:04 AM
>>>To: mod_python@modpython.org
>>>Subject: Re: [mod_python] Compiling mod_python on Win32
>>>
>>>
>>>Hi Guys!!!
>>>
>>>Using LONG_LONG seems to have fixed that problem, although I 
>>>still can't 
>>>compile mod_python, things are getting better. =)
>>>
>>>DOUBT#1: LONG_LONG is a macro for safe type conversion?
>>>

Don't know about Doubt #1...

>>>PROBLEM#1: I am attaching my output, I am concerned about 
>>>several thing 
>>>here, there is a lot of warnings about link problems, are 
>>>they normal, 
>>>expected stuff? Second; there are unresolved external 
>>>symbols that the 
>>>compiler can't map out here:
>>>
>>>connobject.obj : error LNK2001: unresolved external symbol 
>>>__imp__ntohs@4
>>>connobject.obj : error LNK2001: unresolved external symbol 
>>>__imp__ntohl@4

Info about ntohl according to MSDN (see the last line):

QuickInfo
  Windows NT: Yes
  Windows: Yes
  Windows CE: Use version 1.0 and later.
  Header: Declared in winsock2.h.
  Import Library: Link with ws2_32.lib.

Good luck!
jaime

From m.syeda at public-health.ucl.ac.uk  Wed Jan  8 09:59:42 2003
From: m.syeda at public-health.ucl.ac.uk (Maheeba Syeda)
Date: Fri Jan  9 21:53:19 2004
Subject: [mod_python] installing apache,mod_python and python
Message-ID: <3E1BF68D.13048.30A809@localhost>

hi every1,


need some help with setting up the following.

I have Python 2.2.2, Apache 2.0.42 and mod_Python 3.0.1 on a 
Windows 2000 system, and want to
enable python files on an Apache hosted site.
How can I set it up?
I get the error:
Syntax error on line 491 of c:/program files/apache
group/apache2/conf/httpd.conf
:
Invalid command 'PythonHandler', perhaps mis-spelled or defined 
by a
module not
included in the server configuration

That section in the httpd.conf file contains:
<Directory "C:/Program Files/Apache 
Group/Apache/htdocs/python">
   AddHandler python-program .py
   PythonHandler mptest
   PythonDebug on
</Directory>


is there anythng i am missing? i have been trying to get it working 
for the last 2 days. is there anyone who will be able to help me with 
this? a step-by-step direction of what to do will be appreciated very 
much.

thanx in advance.
heeba




From hobb at mail.portland.co.uk  Wed Jan  8 23:39:44 2003
From: hobb at mail.portland.co.uk (hobb)
Date: Fri Jan  9 21:53:19 2004
Subject: [mod_python] Error during 'make install'
Message-ID: <002b01c2b76f$39496780$0201a8c0@mindcircus>

Hi, it looks like I'm doing something wrong and can't seem to properly
compile mod_python
This is how I'm compiling it and the error message at the end:

$ cd ~
$ wget http://apache.webmeta.com/dist/httpd/modpython/mod_python-3.0.1.tgz
$ tar -xzf mod_python-3.0.1.tgz
$ cd mod_python-3.0.1
$ ./configure --with-apxs=/usr/local/apache2/bin/apxs
$ make
$ su
# make install
[snip]
Performing DSO installation.

/usr/bin/install -c src/mod_python.so /usr/local/apache2/modules
/usr/bin/install: cannot stat `src/mod_python.so': No such file or directory
make[1]: *** [install_dso] Error 1
make[1]: Leaving directory `/home/hobb/mod_python-3.0.1'
make: *** [install] Error 2
#

What's going wrong?

This is more information of the box im trying to build mod_python on which
might help in troubleshooting:

$ uname -a
Linux Dagger 2.4.20 #2 Sat Jan 4 22:31:49 GMT 2003 i686 unknown
$ /usr/local/apache2/bin/apachectl -v
Server version: Apache/2.0.43
Server built:   Jan  5 2003 00:55:46
$ python -V
Python 2.2.2
$ gcc -v
Reading specs from /usr/lib/gcc-lib/i686-pc-linux-gnu/3.2.1/specs
Configured with:
../gcc-3.2.1/configure --prefix=/usr --enable-languages=c,c++,objc --enable-
threads=posix --enable-__cxa_atexit --disable-nls
Thread model: posix
gcc version 3.2.1 (CRUX)

TIA


From mike_verdone at shaw.ca  Wed Jan  8 18:04:11 2003
From: mike_verdone at shaw.ca (Mike Verdone)
Date: Fri Jan  9 21:53:19 2004
Subject: [mod_python] Persistent Database and Publisher problem
Message-ID: <200301081804.11560.mike_verdone@shaw.ca>

Hi,

I'm having some trouble using the persistent database example code from the 
FAQ and the publisher handler. The problem is that the persistent connection 
is not actually persistent. Instead, it connects on every request, and does 
not disconnect.

I put the database code in a file _database.py, and then I put all the 
database functions into a file _dbcommands.py. The problem is, how do I 
import _database in _dbcomands?

If I use:

import _database

then it make a new connection on every request. I figure that the correct way 
to do it is using the PythonImport apache directive, but the problem now is 
that I can't see the imported module when running through the publisher 
handler. i.e. this doesn't resolve without import _database:

_database.run_sql(...)

I ensured that that _database is being imported by the interpreter (8 
connections are made before any requests), and the module is imported in the 
correctly named interpreter. I suspect the module is "blocked" by 
publisher-handler. Is that the problem?

Any recommendations on how to get around this?

Mike.


From Mongryong at sympatico.ca  Wed Jan  8 20:05:49 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 21:53:19 2004
Subject: [mod_python] 4XSLT/XML (4Suite) is not functioning correctly
Message-ID: <1042074350.5118.15.camel@refugeeMedia>

Hi,

I'm having problems with 4Suite's XSLT processor working properly within
mod_python.  It appears to be an mod_python issue because my code works
fine as a cgi and stand-alone script.  I can't seem to figure out why
it's not working under mod_python and mod_python is not indicating that
any errors/exceptions are occuring.  It seems as if during XSLT
processing, the source XML document is being ignored.

Has anyone been successful in using 4Suite's XSLT tools with
mod_python?  If so, what is your configuration. Thanks.




From gnb at itga.com.au  Thu Jan  9 12:15:48 2003
From: gnb at itga.com.au (Gregory Bond)
Date: Fri Jan  9 21:53:19 2004
Subject: [mod_python] 4XSLT/XML (4Suite) is not functioning correctly 
In-Reply-To: Your message of 08 Jan 2003 20:05:49 -0500.
Message-ID: <200301090115.MAA28427@lightning.itga.com.au>

> any errors/exceptions are occuring.  It seems as if during XSLT
> processing, the source XML document is being ignored.

See FAQ 3.5 (http://www.modpython.org/FAQ/faqw.py?req=show&file=faq03.005.htp) 
for some hints about what changes between CGI and mod_python. My money is on 
environment variables or PWD.



From grisha at modpython.org  Wed Jan  8 21:22:35 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:53:19 2004
Subject: [mod_python] Persistent Database and Publisher problem
In-Reply-To: <200301081804.11560.mike_verdone@shaw.ca>
Message-ID: <20030108212029.A58150-100000@eden.ispol.com>


On Wed, 8 Jan 2003, Mike Verdone wrote:

> If I use:
>
> import _database
>
> then it make a new connection on every request.

Are you sure that it isn't making a connection for every Apache process
that's running? If you have 10 processes running, then the first 10
requests will make 10 connections, but the 11th should be reused.

Grisha


From connie at core3d.com  Thu Jan  9 08:24:55 2003
From: connie at core3d.com (Connie Baggs)
Date: Fri Jan  9 21:53:19 2004
Subject: [mod_python] parse error before '*'
Message-ID: <20030109.8245536@mis.configured.host>

Hi
Ive just compiled and installed apache 2.0.43 (apache2) and have 
previously installed python 2.1.1 I am now trying to install the 
mod_python module. The ./configure goes fine with the command 
#./configure ?with-apxs=/usr/local/apache2/bin/apxs 
-with-python=/usr/freeware/bin/python2 

However when I issue the make command it fails with the following error


/usr/local/apache2/build/libtool --silent --mode=compile gcc 
-DAP_HAVE_DESIGNATED_INITIALIZER -D_POSIX_THREAD_SAFE_FUNCTIONS -g -O2 
-I/usr/local/apache2/include 
-I/install/httpd-2.0.43/modules/mod_python-3.0.1/src/include 
-I/usr/local/apache2/include -I/usr/freeware/include/python2.1  -c -o 
mod_python.lo mod_python.c && touch mod_python.slo
In file included from 
/install/httpd-2.0.43/modules/mod_python-3.0.1/src/include/mod_python.h:
115,
 from mod_python.c:67:
/install/httpd-2.0.43/modules/mod_python-3.0.1/src/include/util.h:76: 
parse error before '*' token
/install/httpd-2.0.43/modules/mod_python-3.0.1/src/include/util.h:76: 
parse error before '*' token
/install/httpd-2.0.43/modules/mod_python-3.0.1/src/include/util.h:76: 
warning: data definition has no type or storage class
apxs:Error: Command failed with rc=65536
.
*** Error code 1 (bu21)
*** Error code 1 (bu21)



Any ideas on what is wrong?


From grisha at modpython.org  Thu Jan  9 09:43:09 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:53:19 2004
Subject: [mod_python] parse error before '*'
In-Reply-To: <20030109.8245536@mis.configured.host>
Message-ID: <20030109094228.E65000-100000@eden.ispol.com>

I think this is because your Python is too old. According to this:

http://www.modpython.org/live/mod_python-3.0.1/doc-html/inst-prerequisites.html

it has to be 2.2.1 or later.

Grisha

On Thu, 9 Jan 2003, Connie Baggs wrote:

> Hi
> Ive just compiled and installed apache 2.0.43 (apache2) and have
> previously installed python 2.1.1 I am now trying to install the
> mod_python module. The ./configure goes fine with the command
> #./configure ?with-apxs=/usr/local/apache2/bin/apxs
> -with-python=/usr/freeware/bin/python2
>
> However when I issue the make command it fails with the following error
>
>
> /usr/local/apache2/build/libtool --silent --mode=compile gcc
> -DAP_HAVE_DESIGNATED_INITIALIZER -D_POSIX_THREAD_SAFE_FUNCTIONS -g -O2
> -I/usr/local/apache2/include
> -I/install/httpd-2.0.43/modules/mod_python-3.0.1/src/include
> -I/usr/local/apache2/include -I/usr/freeware/include/python2.1  -c -o
> mod_python.lo mod_python.c && touch mod_python.slo
> In file included from
> /install/httpd-2.0.43/modules/mod_python-3.0.1/src/include/mod_python.h:
> 115,
>  from mod_python.c:67:
> /install/httpd-2.0.43/modules/mod_python-3.0.1/src/include/util.h:76:
> parse error before '*' token
> /install/httpd-2.0.43/modules/mod_python-3.0.1/src/include/util.h:76:
> parse error before '*' token
> /install/httpd-2.0.43/modules/mod_python-3.0.1/src/include/util.h:76:
> warning: data definition has no type or storage class
> apxs:Error: Command failed with rc=65536
> .
> *** Error code 1 (bu21)
> *** Error code 1 (bu21)
>
>
>
> Any ideas on what is wrong?
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From connie at core3d.com  Fri Jan 10 02:06:34 2003
From: connie at core3d.com (Connie Baggs)
Date: Fri Jan  9 21:53:19 2004
Subject: [mod_python] error making mod_python
Message-ID: <20030110.2063470@mis.configured.host>

Hi
Ive just compiled and installed apache 2.0.43 (apache2) and python 2.2.1 
I am now trying to install the 
mod_python module. The ./configure goes fine with the command 
#./configure ?with-apxs=/usr/local/apache2/bin/apxs 
-with-python=/usr/local/bin/python2.2

However when I issue the make command it fails with the following error


/usr/local/apache2/build/libtool --silent --mode=link gcc -o 
mod_python.la 
-I/install/httpd-2.0.43/modules/mod_python-3.0.1/src/include 
-I/usr/local/apache2/include -I/usr/local/include/python2.2  -rpath 
/usr/local/apache2/modules -module -avoid-version  hlistobject.lo 
hlist.lo filterobject.lo connobject.lo serverobject.lo util.lo 
tableobject.lo requestobject.lo _apachemodule.lo mod_python.lo 
-L/usr/local/lib/python2.2/config -lm -lpython2.2 -ldl -lpthread -lm
ld32: WARNING 84: /usr/lib32/libm.so is not used for resolving any 
symbol.
ld32: WARNING 84: /usr/lib32/libdl.so is not used for resolving any 
symbol.
Insufficient arguments
Usage: ln [-fis] file1 file2 
       ln [-fis] file1 ... file2 dir 
*** Error code 2 (bu21)
*** Error code 1 (bu21)
)



Any ideas on what is wrong?

_____________________________



From grisha at modpython.org  Thu Jan  9 23:30:09 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:53:19 2004
Subject: [mod_python] error making mod_python
In-Reply-To: <20030110.2063470@mis.configured.host>
Message-ID: <20030109232436.X73409-100000@eden.ispol.com>


On Fri, 10 Jan 2003, Connie Baggs wrote:

> Insufficient arguments
> Usage: ln [-fis] file1 file2
>        ln [-fis] file1 ... file2 dir
> *** Error code 2 (bu21)
> *** Error code 1 (bu21)
>
> Any ideas on what is wrong?

Interesting.... Is this IRIX by any chance? I have no access to an SGI
machine to test this, but it looks like ln needs two arguments and so the
args in src/Makefile are wrong. Try finding a line in src/Makefile that
looks like:

        @ln -s .libs/mod_python.so

and change it to

	@ln -s .libs/mod_python.so mod_python.so

then rerun make.

Grisha



From Mongryong at sympatico.ca  Fri Jan 10 00:57:05 2003
From: Mongryong at sympatico.ca (Kia Vang)
Date: Fri Jan  9 21:53:19 2004
Subject: [mod_python] 4XSLT/XML (4Suite) is not functioning correctly
In-Reply-To: <200301090115.MAA28427@lightning.itga.com.au>
References: <200301090115.MAA28427@lightning.itga.com.au>
Message-ID: <1042178225.27744.29.camel@refugeeMedia>

Okay, I'm really frustrated.  My code seems very simple, yet I can't get
mod_python to output it correctly.    

Here's the mod_python code:

from Ft.Xml import InputSource
from Ft.Xml.Xsl import Processor

from mod_python import apache

def handler(req):
	p = Processor.Processor()
	trans = InputSource.DefaultFactory.fromUri("request.xsl")
	src = InputSource.DefaultFactory.fromUri("request.xml")
	p.appendStylesheet(trans)
	res = p.run(src, topLevelParams={'error':0} )
	
	req.content_type="text/html"
	req.write(res)

	return apache.OK

Here's a cgi version:

from Ft.Xml import InputSource
from Ft.Xml.Xsl import Processor
import sys

if __name__ == "__main__":
	p = Processor.Processor()
	trans = InputSource.DefaultFactory.fromUri("request.xsl")
	src = InputSource.DefaultFactory.fromUri("request.xml")
	p.appendStylesheet(trans)
	
	sys.write("Content-type: text/html")
	p.run(src, topLevelParams={'error':0}, outputStream=sys.stdout )
	
Now, I've also done some tests with libxml2 and libxslt.  I get the same
result with mod_python outputting missing information.

Am I missing something?  I'm using the latest versions of apache,
python, and mod_python.	

On Wed, 2003-01-08 at 20:15, Gregory Bond wrote:
> > any errors/exceptions are occuring.  It seems as if during XSLT
> > processing, the source XML document is being ignored.
> 
> See FAQ 3.5 (http://www.modpython.org/FAQ/faqw.py?req=show&file=faq03.005.htp) 
> for some hints about what changes between CGI and mod_python. My money is on 
> environment variables or PWD.
> 
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20030110/55fe2ec7/request-0001.htm
-------------- next part --------------
<?xml version="1.0"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:template name="createObjectiveFormItems">
    <ol>
      <xsl:for-each select="/resume/objectiveList/objective">
        <xsl:variable name="objName">objective<xsl:value-of select="@id"/></xsl:variable>
        <li>
          <xsl:value-of select="@category"/>
          <input type="checkbox">
            <xsl:attribute name="value">
              <xsl:value-of select="$objName"/>
            </xsl:attribute>
          </input>
        </li>
      </xsl:for-each>
    </ol>
  </xsl:template>
  <xsl:template name="createCategoryFormItems">
    <ul>
      <xsl:for-each select="/resume/categoryList/category">
        <div>
          <input type="checkbox">
            <xsl:attribute name="value">
              <xsl:value-of select="@name"/>
            </xsl:attribute>
            <span>
              <xsl:value-of select="@name"/>
            </span>
          </input>
        </div>
      </xsl:for-each>
    </ul>
  </xsl:template>
  <xsl:template name="createCategoryStyle">
    <style type="text/css">
      <xsl:for-each select="/resume/categoryList/category">
        <xsl:text> .</xsl:text>
        <xsl:value-of select="@name"/>
        <xsl:text>{}</xsl:text>
      </xsl:for-each>
    </style>
  </xsl:template>
  <xsl:template name="createOccupationFormItems">
    <ul>
      <xsl:for-each select="/resume/occupationList/occupation">
        <div>
          <input type="checkbox">
            <xsl:attribute name="value">
              <xsl:value-of select="occupationType/@name"/>
            </xsl:attribute>
            <span>
              <xsl:value-of select="occupationType/@name"/>
            </span>
          </input>
        </div>
      </xsl:for-each>
    </ul> 
  </xsl:template>
  <xsl:template match="/">
    <html>
      <head>
        <title>RezQuest</title>
        <link rel="stylesheet" href="/rezquest/css/professional.css" type="text/css" title="professional" media="all"/>
        <link rel="stylesheet" href="/rezquest/css/elegant.css" type="text/css" title="elegant" media="all"/>
        <link rel="stylesheet" href="/rezquest/css/contemporary.css" type="text/css" title="contemporary" media="all"/>
        <script type="text/javascript" src="/rezquest/scripts/common.js"/>
        <script type="text/javascript" src="/rezquest/scripts/main.js"/>
        <xsl:call-template name="createCategoryStyle"/>
      </head>
      <body>
        <div id="menu">
          <div id="appTitle">
            <h3>RezQuest 0.1</h3>
          </div>
          <div id="styleForm" class="menuItem">
            <form name="styleForm">
              <h3>Select Style</h3>
              <div><input type="radio" name="style" value="professional"/>professional</div>
              <div><input type="radio" name="style" value="elegant"/>elegant</div>
              <div><input type="radio" name="style" value="contemporary"/>contemporary</div>
              <div><input id="refreshButton" type="button" name="refresh" value="Refresh"/></div>         
            </form>
          </div>
          <div id="fontForm" class="menuItem">
            <form name="fontForm" onSubmit="window.focus(); return false;">
              <h3>Adjust Base Font-Size</h3>
              <div><input type="radio" name="fontSizeType" value="%" checked="true"/>percent(%)</div>
              <div><input type="radio" name="fontSizeType" value="em"/>M-height(em)</div>
              <div><input type="radio" name="fontSizeType" value="ex"/>x-height(ex)</div>              
              <div>
                <input id="fontSizeVal" type="text" name="fontSizeVal" value="100" size="4" maxLength="3" onkeypress="return resume_fontSizeOnKeyDown(event);"/>
                <input id="fontSizeApply" type="button" name="fontSizeApply" value="Apply"/>
              </div>
            </form>
          </div>
          <div id="sectionForm" class="menuItem">
            <form name="sectionForm">
              <h3>Select Sections</h3>
              <div><input type="checkbox" value="personHeader"/>top header</div>
              <div><input type="checkbox" value="objective"/>objective</div>
              <div><input type="checkbox" value="skills"/>summary of skills</div>
              <div><input type="checkbox" value="education"/>education</div>
              <div><input type="checkbox" value="work"/>work experience</div>
              <div><input type="checkbox" value="projects"/>projects</div>
              <div><input type="checkbox" value="interests"/>interest</div>
              <div><input type="checkbox" value="references"/>references</div>
            </form>            
          </div>
          <div id="objectiveForm" class="menuItem">
            <form name="objectiveForm">
              <h3>Select Objective</h3>
              <xsl:call-template name="createObjectiveFormItems"/>
            </form>
          </div>
          <div id="categoryForm" class="menuItem">
            <form name="categoryForm">
              <h3>Select Categories</h3>
              <xsl:call-template name="createCategoryFormItems"/>
            </form>
          </div>
          <div id="occupationForm" class="menuItem">
            <form name="occupationForm">
              <h3>Select Occupations</h3>
              <xsl:call-template name="createOccupationFormItems"/>
            </form>
          </div>
          <div id="printForm" class="menuItem">
            <form name="printForm">
              <input style="width: 100%" id="previewButton" type="button" name="preview" value="Preview"/>
              <input style="width: 100%" id="printButton" type="button" name="print" value="Print"/>	      
            </form>
          </div>
          <div id="fileOptions" class="menuItem">
            <h3>File Options</h3>
            <div><a id="openResume" href="/cgi-bin/rezquest/main.py?request=login" title="Get another resume">Open New</a></div>
            <div><a id="exitresume" href="/rezquest/exit.html" title="Exit RezQuest">Exit</a></div>
          </div>
          <div id="copyRight">
            <span><xsl:text disable-output-escaping="yes">&#169;</xsl:text> 2002 by Refugee Media Networks.</span>
          </div>
        </div>
        <div id="main">
          <div id="personHeader" class="section">
            <div id="personInfo">
              <div id="residence" class="contactInfo">
                <xsl:apply-templates select="resume/residenceList"/>
              </div>
              <div id="phone" class="contactInfo">
                <xsl:apply-templates select="resume/phoneList"/>
              </div>
              <div id="email" class="contactInfo">
                <xsl:apply-templates select="resume/emailList"/>
              </div>
              <div id="filler1"/>
            </div>
            <xsl:apply-templates select="resume/person"/>
          </div>
          <div id="objective" class="section">
            <h2 class="title">Objective</h2>
            <div class="content">
              <xsl:apply-templates select="resume/objectiveList"/>
            </div>
            <div class="contentFiller">&#160;</div>
          </div>
          <div id="skills" class="section">
            <h2 class="title">Summary of Skills</h2>
            <div class="content">
              <xsl:apply-templates select="resume/skillList"/>
            </div>
            <div class="contentFiller">&#160;</div>
          </div>
          <div id="education" class="section">
            <h2 class="title">Education</h2>
            <div class="content">
              <xsl:apply-templates select="resume/educationList"/>
            </div>
            <div class="contentFiller">&#160;</div>
          </div>
          <div id="work" class="section">
            <h2 class="title">Work Experience</h2>
            <div class="content">
              <xsl:apply-templates select="resume/occupationList"/>
            </div>
            <div class="contentFiller">&#160;</div>
          </div>
          <div id="projects" class="section">
            <h2 class="title">Personal Projects</h2>
            <div class="content">
              <xsl:apply-templates select="resume/projectList"/>
              <div class="contentFiller">&#160;</div>
            </div>
            <div class="contentFiller">&#160;</div>
          </div>
          <div id="interests" class="section">
            <h2 class="title">Interests</h2>
            <div class="content">
              <xsl:apply-templates select="resume/interestList"/>
            </div>
            <div class="contentFiller">&#160;</div>
          </div>
          <div id="references" class="section">
            <h2 class="title">References</h2>
            <div class="content">
              <xsl:apply-templates select="resume/referenceList"/>
            </div>
            <div class="contentFiller">&#160;</div>
          </div>
        </div>
      </body>
    </html>
  </xsl:template>
  <xsl:template match="skillList">
    <ul>
      <xsl:for-each select="skill">
        <li>
          <xsl:attribute name="class">
            <xsl:value-of select="@category"/>
          </xsl:attribute>
          <xsl:value-of select="description"/>
        </li>
      </xsl:for-each>
    </ul>
  </xsl:template>
  <xsl:template match="objectiveList">
    <ul>
      <xsl:for-each select="objective">
        <li>          
          <xsl:attribute name="id">objective<xsl:value-of select="@id"/></xsl:attribute>
          <xsl:value-of select="description"/>
        </li>
      </xsl:for-each>
    </ul>
  </xsl:template>
  <xsl:template match="residenceList">
    <xsl:for-each select="residence">
      <xsl:if test="@type='home'">
        <div class="key">Residence</div>
        <div class="value">
          <div class="region">
            <xsl:value-of select="address"/>
          </div>
          <div class="region">
            <xsl:value-of select="city"/>
          </div>
          <div class="region">
            <xsl:value-of select="state/@code"/>
          </div>
          <div class="region">
            <xsl:value-of select="state/country/@code"/>
          </div>
          <div class="region">
            <xsl:value-of select="zip"/>
          </div>
        </div>
      </xsl:if>
    </xsl:for-each>
  </xsl:template>
  <xsl:template match="educationList">
    <xsl:for-each select="education">
      <xsl:if test="@degree='basc'">
        <h2>
          <xsl:value-of select="@major"/>
        </h2>
        <h3 class="subHead">
          <xsl:value-of select="institution/name"/>
        </h3>
        <h3 class="subHead">
          <span class="region">
            <xsl:value-of select="institution/location/city"/>
          </span>
          <span class="region">
            <xsl:value-of select="institution/location/state/@code"/>
          </span>
        </h3>
        <h3 class="subHead"><xsl:value-of select="substring(startDate,1,7)"/> to <xsl:value-of select="substring(endDate,1,7)"/></h3>
        <div class="contentFiller"/>
        <div>
          <ul>
            <li>Bachelor of Applied Science</li>
          </ul>
        </div>
      </xsl:if>
    </xsl:for-each>
  </xsl:template>
  <xsl:template match="occupationList">
    <xsl:for-each select="occupation">
<!--xsl:if test="occupationType/@name='dsp software' or occupationType/@name='windows'"-->
      <div class="subSection">
        <xsl:attribute name="name"><xsl:value-of select="occupationType/@name"/></xsl:attribute>
        <h2>
          <xsl:value-of select="occupationType/title"/>
        </h2>
        <h3 class="subHead">
          <xsl:value-of select="company/name"/>
        </h3>
        <h3 class="subHead">
          <span class="region">
            <xsl:value-of select="company/location/city"/>
          </span>
          <span class="region">
            <xsl:value-of select="company/location/state/@code"/>
          </span>
        </h3>
        <h3 class="subHead"><xsl:value-of select="substring(startDate,1,7)"/> to <xsl:value-of select="substring(endDate,1,7)"/></h3>
        <div class="contentFiller"/>
        <xsl:apply-templates select="summaryList"/>
      </div>
<!--/xsl:if-->
    </xsl:for-each>
  </xsl:template>
  <xsl:template match="referenceList">
    <xsl:for-each select="reference">
<!--xsl:if test="@degree='basc'"-->
      <div class="subSection">
        <h2>
          <xsl:value-of select="name"/>
        </h2>
        <h3 class="subHead">
          <xsl:value-of select="@position"/>
        </h3>
        <h3 class="subHead">
          <xsl:value-of select="company/name"/>
        </h3>
        <div class="contentFiller"/>
        <div class="subHead"><xsl:value-of select="phone/@area"/>.<xsl:value-of select="phone/number"/><xsl:if test="phone/ext &gt; 0"> ext.<xsl:value-of select="phone/ext"/></xsl:if></div>
        <div class="subHead">
          <xsl:value-of select="email"/>
        </div>
        <div id="filler2"/>
      </div>
<!--/xsl:if-->
    </xsl:for-each>
  </xsl:template>
  <xsl:template match="projectList">
    <ul>
      <xsl:for-each select="project">
        <li>
          <xsl:attribute name="class">
            <xsl:value-of select="@category"/>
          </xsl:attribute>
          <xsl:value-of select="description"/>
        </li>
      </xsl:for-each>
    </ul>
  </xsl:template>
  <xsl:template match="interestList">
    <ul>
      <xsl:for-each select="interest">
        <xsl:choose>
          <xsl:when test="position()!=last()">
            <li>
              <xsl:value-of select="@name"/>
            </li>
          </xsl:when>
          <xsl:otherwise>
            <li>
              <xsl:attribute name="id">lastInterest</xsl:attribute>
              <xsl:value-of select="@name"/>
            </li>
          </xsl:otherwise>
        </xsl:choose>
      </xsl:for-each>
    </ul>
  </xsl:template>
  <xsl:template match="summaryList">
    <ul>
      <xsl:for-each select="summary">
        <li>
          <xsl:attribute name="class">
            <xsl:value-of select="@category"/>
          </xsl:attribute>
          <xsl:value-of select="description"/>
        </li>
      </xsl:for-each>
    </ul>
  </xsl:template>
  <xsl:template match="phoneList">
    <xsl:for-each select="phone">
      <div class="keyValue">
        <div class="key">
          <xsl:value-of select="@type"/>
        </div>
        <div class="value"><xsl:value-of select="@area"/>.<xsl:value-of select="number"/></div>
      </div>
    </xsl:for-each>
  </xsl:template>
  <xsl:template match="emailList">
    <xsl:for-each select="email">
      <xsl:if test="@type='school'">
        <div class="keyValue">
          <div class="key">email</div>
          <div class="value">
            <xsl:value-of select="address"/>
          </div>
        </div>
      </xsl:if>
    </xsl:for-each>
  </xsl:template>
  <xsl:template match="person">
    <div id="personName">
      <div>
        <span id="firstName">
          <xsl:value-of select="firstName"/>
        </span>
        <span id="lastName">
          <xsl:value-of select="lastName"/>
        </span>
      </div>
    </div>
  </xsl:template>
</xsl:stylesheet>
From grisha at modpython.org  Fri Jan 10 11:05:25 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:53:19 2004
Subject: [mod_python] 4XSLT/XML (4Suite) is not functioning correctly
In-Reply-To: <1042178225.27744.29.camel@refugeeMedia>
Message-ID: <20030110110412.V80550-100000@eden.ispol.com>

On 10 Jan 2003, Kia Vang wrote:

> Okay, I'm really frustrated.  My code seems very simple, yet I can't get
> mod_python to output it correctly.
>
> Here's the mod_python code:
>
> from Ft.Xml import InputSource
> from Ft.Xml.Xsl import Processor
>
> from mod_python import apache
>
> def handler(req):
> 	p = Processor.Processor()
> 	trans = InputSource.DefaultFactory.fromUri("request.xsl")
> 	src = InputSource.DefaultFactory.fromUri("request.xml")
> 	p.appendStylesheet(trans)
> 	res = p.run(src, topLevelParams={'error':0} )
>
> 	req.content_type="text/html"
> 	req.write(res)
>
> 	return apache.OK

So what specifically is wrong with the above code's behaviour? What it is
supposed to do and what does it really do?

Grisha


From nick.fearn at openmethods.com  Fri Jan 10 16:42:19 2003
From: nick.fearn at openmethods.com (Nick Fearn)
Date: Fri Jan  9 21:53:20 2004
Subject: [mod_python] Mod_python compilation and install
Message-ID: <IDEBKIECLBLNHJABHGBHCEIJCLAA.nick.fearn@openmethods.com>

Hi

I am having trouble compiling and installing Mod_python 2.7.8 (DSO) with
apache-1.3.22-3b, python 1.5.2 on YDL 2.2.

I have recompile python with no threads. The mod_python compile completes OK
but Make ends with the following errors.

Thanks for any help. Nick


[root@linux2t mod_python-2.7.8]# ./configure --with-apxs=/usr/sbin/apxs
creating cache ./config.cache
checking for gcc... gcc
checking whether the C compiler (gcc  ) works... yes
checking whether the C compiler (gcc  ) is a cross-compiler... no
checking whether we are using GNU C... yes
checking whether gcc accepts -g... yes
checking for ranlib... ranlib
checking for ar... ar
checking for a BSD compatible install... /usr/bin/install -c
checking whether make sets ${MAKE}... yes
checking for main in -lm... yes
checking for working const... yes
checking your blood pressure... a bit high, but we can proceed
checking whether apxs is available
checking for --with-apxs... /usr/sbin/apxs executable, good
checking for Apache libexec directory... /usr/lib/apache
checking for Apache include directory... -I/usr/include/apache
checking for --with-apache... no
configure: warning: **** No apache sources specified, static compilation
will not be available.
configure: warning: **** You can use --with-apache to specify where your
Apache sources are.
checking for --with-python... no
checking for python... /usr/local/bin/python
checking Python version... 1.5
checking whether Python is compiled with thread support... no threads, good
checking Python install prefix... /usr/local
checking what libraries Python was linked with...
/usr/local/lib/python1.5/config/libpython1.5.a   -lieee -ldl    -lm
checking linker flags used to link Python...
checking where Python include files are... -I/usr/local/include/python1.5
checking for mkdep... no
checking for makedepend... no
updating cache ./config.cache
creating ./config.status
creating Makefile
creating src/Makefile
creating src/libpython.module
creating Doc/Makefile
[root@linux2t mod_python-2.7.8]# make
make[1]: Entering directory `/home/nick/mod_python-2.7.8/src'
gcc  -I/home/nick/mod_python-2.7.8/src/include -I/usr/include/apache -I/usr/
local/include/python1.5    -c -o mod_python.o mod_python.c
gcc  -I/home/nick/mod_python-2.7.8/src/include -I/usr/include/apache -I/usr/
local/include/python1.5    -c -o _apachemodule.o _apachemodule.c
gcc  -I/home/nick/mod_python-2.7.8/src/include -I/usr/include/apache -I/usr/
local/include/python1.5    -c -o requestobject.o requestobject.c
gcc  -I/home/nick/mod_python-2.7.8/src/include -I/usr/include/apache -I/usr/
local/include/python1.5    -c -o tableobject.o tableobject.c
gcc  -I/home/nick/mod_python-2.7.8/src/include -I/usr/include/apache -I/usr/
local/include/python1.5    -c -o util.o util.c
gcc  -I/home/nick/mod_python-2.7.8/src/include -I/usr/include/apache -I/usr/
local/include/python1.5    -c -o serverobject.o serverobject.c
gcc  -I/home/nick/mod_python-2.7.8/src/include -I/usr/include/apache -I/usr/
local/include/python1.5    -c -o connobject.o connobject.c

Compiling for DSO. For static, do "make static"

/usr/sbin/apxs -I/home/nick/mod_python-2.7.8/src/include -I/usr/include/apac
he -I/usr/local/include/python1.5 -c mod_python.o _apachemodule.o
requestobject.o tableobject.o util.o serverobject.o connobject.o  -lm
/usr/local/lib/python1.5/config/libpython1.5.a   -lieee -ldl    -lm
gcc -shared -o mod_python.so mod_python.o _apachemodule.o requestobject.o
tableobject.o util.o serverobject.o connobject.o -lm
/usr/local/lib/python1.5/config/libpython1.5.a -lieee -ldl -lm
/usr/bin/ld: mod_python.so: undefined versioned symbol name
_LIB_VERSION@@GLIBC_2.0
/usr/bin/ld: failed to set dynamic section sizes: Bad value
collect2: ld returned 1 exit status
apxs:Break: Command failed with rc=1
make[1]: *** [mod_python.so] Error 1
make[1]: Leaving directory `/home/nick/mod_python-2.7.8/src'
make: *** [do_dso] Error 2
[root@linux2t mod_python-2.7.8]#


From Mongryong at sympatico.ca  Fri Jan 10 12:31:37 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 21:53:20 2004
Subject: [mod_python] 4XSLT/XML (4Suite) is not functioning correctly
In-Reply-To: <20030110110412.V80550-100000@eden.ispol.com>
References: <20030110110412.V80550-100000@eden.ispol.com>
Message-ID: <1042219898.1298.13.camel@refugeeMedia>

I've attached two files:

cgi_result.html: the correct result as outputted by cgi/standalone
version of my script

modpython_result.html: the result as outputted by a mod_python version
of my script

From grisha at modpython.org  Fri Jan 10 12:39:06 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:53:20 2004
Subject: [mod_python] 4XSLT/XML (4Suite) is not functioning correctly
In-Reply-To: <1042219898.1298.13.camel@refugeeMedia>
Message-ID: <20030110123723.R80550-100000@eden.ispol.com>

My first guess would be something relating to current directory. In true
CGI, the current directory is set to that of where the script is located.
Mod_python doesn't do this because changing directory is not a thread-safe
thing to do. I'd try it with absolute paths to the files.

Grisha

On 10 Jan 2003, Mongryong wrote:

> I've attached two files:
>
> cgi_result.html: the correct result as outputted by cgi/standalone
> version of my script
>
> modpython_result.html: the result as outputted by a mod_python version
> of my script
>
> >From the result, you should see that the html body is empty in modpython
> version.  I've done some tests with the mod_python version of my script
> and everything seems correct up to this point:
>
> res = p.run(src, topLevelParams={'error':0} )
>
> 'res' is the result of the transformation as a string.  The
> 'request.xsl' provides instructions to the XSLT engine on how to
> transform 'request.xml' to a HTML document.  No errors or exceptions are
> thrown.  It just seems as if the 'values' in 'request.xml' are NULL
> (empty) - hence, the body of the HTML is empty.
>
> Like I said previously, I've tried switching to a different XML/XSLT
> library (libxml2/libxslt from GNOME project) and I get the same result.
>
> On Fri, 2003-01-10 at 11:05, Gregory (Grisha) Trubetskoy wrote:
> >
> > On 10 Jan 2003, Kia Vang wrote:
> >
> > > Okay, I'm really frustrated.  My code seems very simple, yet I can't get
> > > mod_python to output it correctly.
> > >
> > > Here's the mod_python code:
> > >
> > > from Ft.Xml import InputSource
> > > from Ft.Xml.Xsl import Processor
> > >
> > > from mod_python import apache
> > >
> > > def handler(req):
> > > 	p = Processor.Processor()
> > > 	trans = InputSource.DefaultFactory.fromUri("request.xsl")
> > > 	src = InputSource.DefaultFactory.fromUri("request.xml")
> > > 	p.appendStylesheet(trans)
> > > 	res = p.run(src, topLevelParams={'error':0} )
> > >
> > > 	req.content_type="text/html"
> > > 	req.write(res)
> > >
> > > 	return apache.OK
> >
> > So what specifically is wrong with the above code's behaviour? What it is
> > supposed to do and what does it really do?
> >
> > Grisha
> >
> > _______________________________________________
> > Mod_python mailing list
> > Mod_python@modpython.org
> > http://www.modpython.org/mailman/listinfo/mod_python
>
>


From Mongryong at sympatico.ca  Fri Jan 10 12:54:27 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 21:53:20 2004
Subject: [mod_python] 4XSLT/XML (4Suite) is not functioning correctly
In-Reply-To: <20030110123723.R80550-100000@eden.ispol.com>
References: <20030110123723.R80550-100000@eden.ispol.com>
Message-ID: <1042221267.1299.32.camel@refugeeMedia>

In my original script, I did include absolute paths.  I did not include
the absolute paths in the email version of the script.  But even with
the absolute path, I get the same 'empty' result.

On Fri, 2003-01-10 at 12:39, Gregory (Grisha) Trubetskoy wrote:
> 
> My first guess would be something relating to current directory. In true
> CGI, the current directory is set to that of where the script is located.
> Mod_python doesn't do this because changing directory is not a thread-safe
> thing to do. I'd try it with absolute paths to the files.
> 
> Grisha
> 
> On 10 Jan 2003, Mongryong wrote:
> 
> > I've attached two files:
> >
> > cgi_result.html: the correct result as outputted by cgi/standalone
> > version of my script
> >
> > modpython_result.html: the result as outputted by a mod_python version
> > of my script
> >
> > >From the result, you should see that the html body is empty in modpython
> > version.  I've done some tests with the mod_python version of my script
> > and everything seems correct up to this point:
> >
> > res = p.run(src, topLevelParams={'error':0} )
> >
> > 'res' is the result of the transformation as a string.  The
> > 'request.xsl' provides instructions to the XSLT engine on how to
> > transform 'request.xml' to a HTML document.  No errors or exceptions are
> > thrown.  It just seems as if the 'values' in 'request.xml' are NULL
> > (empty) - hence, the body of the HTML is empty.
> >
> > Like I said previously, I've tried switching to a different XML/XSLT
> > library (libxml2/libxslt from GNOME project) and I get the same result.
> >
> > On Fri, 2003-01-10 at 11:05, Gregory (Grisha) Trubetskoy wrote:
> > >
> > > On 10 Jan 2003, Kia Vang wrote:
> > >
> > > > Okay, I'm really frustrated.  My code seems very simple, yet I can't get
> > > > mod_python to output it correctly.
> > > >
> > > > Here's the mod_python code:
> > > >
> > > > from Ft.Xml import InputSource
> > > > from Ft.Xml.Xsl import Processor
> > > >
> > > > from mod_python import apache
> > > >
> > > > def handler(req):
> > > > 	p = Processor.Processor()
> > > > 	trans = InputSource.DefaultFactory.fromUri("request.xsl")
> > > > 	src = InputSource.DefaultFactory.fromUri("request.xml")
> > > > 	p.appendStylesheet(trans)
> > > > 	res = p.run(src, topLevelParams={'error':0} )
> > > >
> > > > 	req.content_type="text/html"
> > > > 	req.write(res)
> > > >
> > > > 	return apache.OK
> > >
> > > So what specifically is wrong with the above code's behaviour? What it is
> > > supposed to do and what does it really do?
> > >
> > > Grisha
> > >
> > > _______________________________________________
> > > Mod_python mailing list
> > > Mod_python@modpython.org
> > > http://www.modpython.org/mailman/listinfo/mod_python
> >
> >
> 



From thm at duke.edu  Sat Jan 11 21:56:00 2003
From: thm at duke.edu (Hunter Matthews)
Date: Fri Jan  9 21:53:20 2004
Subject: [mod_python] Upgrade to mod_python 3.0.0 causes some handlers not to run.
Message-ID: <1042340165.1840.16.camel@jade.biology.duke.edu>

I have program (current) that successfully uses the following
confirguration under apache 1.3.24 and mod_python 2.7.8 (redhat 7.2 or
7.3, basically) to have a TypeHandler, AccessHandler, and PythonHander
run on some get requests.

If I take this same configuration to httpd 2.0.40 and mod_python 3.0.0
(redhat 8.0) the python handler runs for the /XMLRPC requests, but
neither the TypeHandler or the AccessHandler is running for the
/XMLRPC/$RHN requests.

I'm assuming this a mod_python config issue, but some other 1.3-> 2.0
upgrade issue may have me here - my ignorance with apache 2.0 is nearly
complete.

Note that its the first block that works perfectly - all the  "/XMLRPC$"
are dealt with by the simple "handler()" function, and they seem to work
fine.

The "/XMLRPC/$RHN" hits _don't_ use the "handler()" function, but do
need to be run through the accesshandler() and the typehandler() (both,
for each request) but neither is running. 

Suggestions?
-----------------------------------------------------------------------------
Alias /XMLRPC/$RHN /local/linux/current/www

<Directory /local/linux/current/www>
    # Make certain this is set - current won't work without it
    Options FollowSymLinks
</Directory>

<Location ~ "/XMLRPC$">
    PythonPath "sys.path + ['/usr/share/current']"
    SetHandler python-program
    PythonHandler current_apache
</Location>

<Location /XMLRPC/$RHN>
    PythonPath "sys.path + ['/usr/share/current']"
    PythonHandlerModule current_apache
</Location>

-- 
Hunter Matthews                          Unix / Network Administrator
Office: BioScience 145/244               Duke Univ. Biology Department
Key: F0F88438 / FFB5 34C0 B350 99A4 BB02  9779 A5DB 8B09 F0F8 8438
Never take candy from strangers. Especially on the internet.


From LBerezhny at DevIS.com  Sun Jan 12 20:35:11 2003
From: LBerezhny at DevIS.com (Lex Berezhny)
Date: Fri Jan  9 21:53:20 2004
Subject: [mod_python] session data and shared memory
Message-ID: <1042421711.5857.17.camel@buddha>

hello,

I know the issue of session management has been brought up before, but I
have a more specific question on the topic. Is there a way to keep
session state across threads/forked apache processes?

Storing the session state in a database carries a lot of overhead since
every request requires at least one query.

Another solution I had in mind was to use the ZODB with ZEO, so that
when a user logs in for example a session object will be created in the
ZODB. But this seems like a great deal of hoops just to store a few
attributes of session.

I have also thought about implementing a very basic LDAP like session
registry service. Each mod_python process would open a connection to
this registry and be able to share session data with other processes.

Has anyone else faced such a problem? Are there any other ways to
synchronize data between mod_python instances?

thanks in advance,

 - lex

-- 
Lex Berezhny <LBerezhny@DevIS.com>


From gnb at itga.com.au  Mon Jan 13 13:40:51 2003
From: gnb at itga.com.au (Gregory Bond)
Date: Fri Jan  9 21:53:20 2004
Subject: [mod_python] session data and shared memory 
In-Reply-To: Your message of 12 Jan 2003 20:35:11 -0500.
Message-ID: <200301130240.NAA18281@lightning.itga.com.au>

LBerezhny@DevIS.com said:
> Has anyone else faced such a problem? Are there any other ways to
> synchronize data between mod_python instances? 

I'm using Albatross (http://www.object-craft.com.au/projects/albatross/) with 
great success for maintaining lots and lots of state in mod_python 
applications.  But it's a framework that might be hard to bolt on to existing 
mod_python code.



From jeffstearns at attbi.com  Sun Jan 12 18:53:37 2003
From: jeffstearns at attbi.com (Jeff Stearns)
Date: Fri Jan  9 21:53:20 2004
Subject: [mod_python] session data and shared memory
In-Reply-To: <1042421711.5857.17.camel@buddha>
Message-ID: <36FDCD68-26A2-11D7-8974-0030653DCC28@attbi.com>

I've had good success with a dedicated "session server".  It's a small 
python server which stores key/value pairs in memory using a Python 
dictionary.

Each apache child maintains a persistent TCP connection to the server. 
It uses a simple RPC protocol to store and fetch key/value pairs. The 
protocol allows for arbitrary binary data of unlimited size.

The server ages out stale data after it hasn't been used for a while.

I also wrote a tiny client-side connection manager in C which handles 
all the details of making and re-establishing connections.

I've used this in commercial web sites. Performance is excellent 
because overhead is so small. (It was originally developed on an 
ancient SPARC.) I might be able to dig up the source if you're 
interested, but it's not hard to write your own.

-jeff stearns

On Sunday, January 12, 2003, at 05:35 PM, Lex Berezhny wrote:

> hello,
>
> I know the issue of session management has been brought up before, but 
> I
> have a more specific question on the topic. Is there a way to keep
> session state across threads/forked apache processes?
>
> Storing the session state in a database carries a lot of overhead since
> every request requires at least one query.
>
> Another solution I had in mind was to use the ZODB with ZEO, so that
> when a user logs in for example a session object will be created in the
> ZODB. But this seems like a great deal of hoops just to store a few
> attributes of session.
>
> I have also thought about implementing a very basic LDAP like session
> registry service. Each mod_python process would open a connection to
> this registry and be able to share session data with other processes.
>
> Has anyone else faced such a problem? Are there any other ways to
> synchronize data between mod_python instances?
>
> thanks in advance,
>
>  - lex
>
> -- 
> Lex Berezhny <LBerezhny@DevIS.com>


From LBerezhny at DevIS.com  Sun Jan 12 22:41:12 2003
From: LBerezhny at DevIS.com (Lex Berezhny)
Date: Fri Jan  9 21:53:20 2004
Subject: [mod_python] session data and shared memory
In-Reply-To: <36FDCD68-26A2-11D7-8974-0030653DCC28@attbi.com>
References: <36FDCD68-26A2-11D7-8974-0030653DCC28@attbi.com>
Message-ID: <1042429272.6951.5.camel@buddha>

I would be most interested in this server, if you could find the code
that would be great.

I also took a look at Albatross (from Gregs post) and it contains a
rather simple but elegant session server, similar to what you have
described. If all else fails I will go with that, but I would like to
see your solution first :-)

thanks,

 - lex

On Sun, 2003-01-12 at 21:53, Jeff Stearns wrote:
> I've had good success with a dedicated "session server".  It's a small 
> python server which stores key/value pairs in memory using a Python 
> dictionary.
> 
> Each apache child maintains a persistent TCP connection to the server. 
> It uses a simple RPC protocol to store and fetch key/value pairs. The 
> protocol allows for arbitrary binary data of unlimited size.
> 
> The server ages out stale data after it hasn't been used for a while.
> 
> I also wrote a tiny client-side connection manager in C which handles 
> all the details of making and re-establishing connections.
> 
> I've used this in commercial web sites. Performance is excellent 
> because overhead is so small. (It was originally developed on an 
> ancient SPARC.) I might be able to dig up the source if you're 
> interested, but it's not hard to write your own.
> 
> -jeff stearns
> 
> On Sunday, January 12, 2003, at 05:35 PM, Lex Berezhny wrote:
> 
> > hello,
> >
> > I know the issue of session management has been brought up before, but 
> > I
> > have a more specific question on the topic. Is there a way to keep
> > session state across threads/forked apache processes?
> >
> > Storing the session state in a database carries a lot of overhead since
> > every request requires at least one query.
> >
> > Another solution I had in mind was to use the ZODB with ZEO, so that
> > when a user logs in for example a session object will be created in the
> > ZODB. But this seems like a great deal of hoops just to store a few
> > attributes of session.
> >
> > I have also thought about implementing a very basic LDAP like session
> > registry service. Each mod_python process would open a connection to
> > this registry and be able to share session data with other processes.
> >
> > Has anyone else faced such a problem? Are there any other ways to
> > synchronize data between mod_python instances?
> >
> > thanks in advance,
> >
> >  - lex
> >
> > -- 
> > Lex Berezhny <LBerezhny@DevIS.com>
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
-- 
Lex Berezhny <LBerezhny@DevIS.com>


From conrad at hep.caltech.edu  Sun Jan 12 20:07:29 2003
From: conrad at hep.caltech.edu (Conrad Steenberg)
Date: Fri Jan  9 21:53:20 2004
Subject: [mod_python] session data and shared memory
In-Reply-To: <1042421711.5857.17.camel@buddha>
References: <1042421711.5857.17.camel@buddha>
Message-ID: <1042430849.11468.94.camel@192.168.1.103>

Hi Lex

You can also take a look at using Berkeley DB, which carries a lot less
overhead than traditional DBs, and stores key value pairs (it looks like
a dictionary). It is very fast, persistent, and scales to TBs in size.
Which you hopefully don't need ;-)

The Python binding is at pybsddb.sf.net. I use it for an XML-RPC app
server at clarens.sf.net.

Cheers

Conrad

On Sun, 2003-01-12 at 17:35, Lex Berezhny wrote:
> hello,
> 
> I know the issue of session management has been brought up before, but I
> have a more specific question on the topic. Is there a way to keep
> session state across threads/forked apache processes?
> 
> Storing the session state in a database carries a lot of overhead since
> every request requires at least one query.
> 
> Another solution I had in mind was to use the ZODB with ZEO, so that
> when a user logs in for example a session object will be created in the
> ZODB. But this seems like a great deal of hoops just to store a few
> attributes of session.
> 
> I have also thought about implementing a very basic LDAP like session
> registry service. Each mod_python process would open a connection to
> this registry and be able to share session data with other processes.
> 
> Has anyone else faced such a problem? Are there any other ways to
> synchronize data between mod_python instances?
> 
> thanks in advance,
> 
>  - lex
-- 
Conrad Steenberg <conrad@hep.caltech.edu>


From Mongryong at sympatico.ca  Mon Jan 13 02:14:39 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 21:53:20 2004
Subject: [mod_python] 4XSLT/XML (4Suite) is not functioning correctly
In-Reply-To: <1042221267.1299.32.camel@refugeeMedia>
References: <20030110123723.R80550-100000@eden.ispol.com> 
	<1042221267.1299.32.camel@refugeeMedia>
Message-ID: <1042442079.1292.122.camel@refugeeMedia>

I forgot to mention this, but the same problem also occurs when the
source XML document is a string (or a cString.StringIO).

For example:

p = Processor.Processor()
trans = InputSource.DefaultFactory.fromUri("someXSLTdoc.xsl")
src = cString.StringIO ()
someModule.makeXMLdoc(src)
p.appendStylesheet(trans)
res = p.run(src)

req.content_type="text/html"
req.write(res)

return apache.OK  

On Fri, 2003-01-10 at 12:54, Mongryong wrote:
> In my original script, I did include absolute paths.  I did not include
> the absolute paths in the email version of the script.  But even with
> the absolute path, I get the same 'empty' result.
> 
> On Fri, 2003-01-10 at 12:39, Gregory (Grisha) Trubetskoy wrote:
> > 
> > My first guess would be something relating to current directory. In true
> > CGI, the current directory is set to that of where the script is located.
> > Mod_python doesn't do this because changing directory is not a thread-safe
> > thing to do. I'd try it with absolute paths to the files.
> > 
> > Grisha
> > 
> > On 10 Jan 2003, Mongryong wrote:
> > 
> > > I've attached two files:
> > >
> > > cgi_result.html: the correct result as outputted by cgi/standalone
> > > version of my script
> > >
> > > modpython_result.html: the result as outputted by a mod_python version
> > > of my script
> > >
> > > >From the result, you should see that the html body is empty in modpython
> > > version.  I've done some tests with the mod_python version of my script
> > > and everything seems correct up to this point:
> > >
> > > res = p.run(src, topLevelParams={'error':0} )
> > >
> > > 'res' is the result of the transformation as a string.  The
> > > 'request.xsl' provides instructions to the XSLT engine on how to
> > > transform 'request.xml' to a HTML document.  No errors or exceptions are
> > > thrown.  It just seems as if the 'values' in 'request.xml' are NULL
> > > (empty) - hence, the body of the HTML is empty.
> > >
> > > Like I said previously, I've tried switching to a different XML/XSLT
> > > library (libxml2/libxslt from GNOME project) and I get the same result.
> > >
> > > On Fri, 2003-01-10 at 11:05, Gregory (Grisha) Trubetskoy wrote:
> > > >
> > > > On 10 Jan 2003, Kia Vang wrote:
> > > >
> > > > > Okay, I'm really frustrated.  My code seems very simple, yet I can't get
> > > > > mod_python to output it correctly.
> > > > >
> > > > > Here's the mod_python code:
> > > > >
> > > > > from Ft.Xml import InputSource
> > > > > from Ft.Xml.Xsl import Processor
> > > > >
> > > > > from mod_python import apache
> > > > >
> > > > > def handler(req):
> > > > > 	p = Processor.Processor()
> > > > > 	trans = InputSource.DefaultFactory.fromUri("request.xsl")
> > > > > 	src = InputSource.DefaultFactory.fromUri("request.xml")
> > > > > 	p.appendStylesheet(trans)
> > > > > 	res = p.run(src, topLevelParams={'error':0} )
> > > > >
> > > > > 	req.content_type="text/html"
> > > > > 	req.write(res)
> > > > >
> > > > > 	return apache.OK
> > > >
> > > > So what specifically is wrong with the above code's behaviour? What it is
> > > > supposed to do and what does it really do?
> > > >
> > > > Grisha
> > > >
> > > > _______________________________________________
> > > > Mod_python mailing list
> > > > Mod_python@modpython.org
> > > > http://www.modpython.org/mailman/listinfo/mod_python
> > >
> > >
> > 
> 
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python



From thanos at 0x01.com  Mon Jan 13 20:06:38 2003
From: thanos at 0x01.com (thanos vassilakis)
Date: Fri Jan  9 21:53:20 2004
Subject: [mod_python] session data and shared memory
In-Reply-To: <1042430849.11468.94.camel@192.168.1.103>
Message-ID: <6F1E0EE9-275C-11D7-BC6F-00306559D868@0x01.com>

You should check out:
How-To: Easy mod_python Session Handling with pso.session
http://sourceforge.net/docman/display_doc.php?docid=10174&group_id=49265

We are using pso at the NYSE with success.

thanos


On Sunday, January 12, 2003, at 11:07  PM, Conrad Steenberg wrote:

> Hi Lex
>
> You can also take a look at using Berkeley DB, which carries a lot less
> overhead than traditional DBs, and stores key value pairs (it looks 
> like
> a dictionary). It is very fast, persistent, and scales to TBs in size.
> Which you hopefully don't need ;-)
>
> The Python binding is at pybsddb.sf.net. I use it for an XML-RPC app
> server at clarens.sf.net.
>
> Cheers
>
> Conrad
>
> On Sun, 2003-01-12 at 17:35, Lex Berezhny wrote:
>> hello,
>>
>> I know the issue of session management has been brought up before, 
>> but I
>> have a more specific question on the topic. Is there a way to keep
>> session state across threads/forked apache processes?
>>
>> Storing the session state in a database carries a lot of overhead 
>> since
>> every request requires at least one query.
>>
>> Another solution I had in mind was to use the ZODB with ZEO, so that
>> when a user logs in for example a session object will be created in 
>> the
>> ZODB. But this seems like a great deal of hoops just to store a few
>> attributes of session.
>>
>> I have also thought about implementing a very basic LDAP like session
>> registry service. Each mod_python process would open a connection to
>> this registry and be able to share session data with other processes.
>>
>> Has anyone else faced such a problem? Are there any other ways to
>> synchronize data between mod_python instances?
>>
>> thanks in advance,
>>
>>  - lex
> -- 
> Conrad Steenberg <conrad@hep.caltech.edu>
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python


From sa at sfsu.edu  Mon Jan 13 18:11:27 2003
From: sa at sfsu.edu (Sean Abrahams)
Date: Fri Jan  9 21:53:20 2004
Subject: [mod_python] Database Help
Message-ID: <17983005796.20030113181127@sfsu.edu>

I'm implementing mod_python and everything is working fine, until I
try to pass an UPDATE sql statement to a database.

I'm grabbing info from one database, and inserting/updating into
another database.

When grabbing, I call upon my dbSelect(db, keys, sql, rows) function,
which connects to a specified database (db) and selects the info.
Works great.

To update/insert I call upon my dbDo(db, sql) function. This function
connects to the specified database (db) and runs the sql. Python wise
everything seems to work fine. I call the dbDo and nothing appears to
go wrong. Except when I look at the data in the db, it wasn't updated.

All of this works fine from the interpreter, so I'm thinking it may
deal with the way mod_python handles processes and dbconnections, of
which I know very little of.

Thus, does connecting to two different databases, right after one
another, cause a problem in mod_python? I'm supposing I must change my
dbConnect() function to take this into consideration due to the way
mod_python/apache function.

Some ideas? I want to learn!

Thanks,
--Sean

Running:
Apache/2.0.43 (Debian GNU/Linux) DAV/2 mod_python/3.0.1 Python/2.2.1
cx_Oracle


From tim.parker at intec-telecom-systems.com  Tue Jan 14 14:49:53 2003
From: tim.parker at intec-telecom-systems.com (Tim Parker)
Date: Fri Jan  9 21:53:20 2004
Subject: [mod_python] Query about FieldStorage
Message-ID: <1042555792.16629.16.camel@isukws0321>

Hi,

I have recently installed Python 2.2.2 and Apache 2.0.43, and have
configured a directory to execute mod_python.  The problem I have is I
do not seem to be able to access any of the environment variables in the
Request Object form object.  Below is the part of my httpd.conf file and
also the python script that I am using.

# Adding directory for python
Alias /python/ "/usr/local/apache2/mod_python/"

<Directory "/usr/local/apache2/mod_python">
    AddHandler python-program .py
    SetHandler python-program
    PythonPath "sys.path+['/usr/local/apache2/mod_python']"
    PythonHandler mod_python.publisher
    Options +ExecCGI
    PythonDebug On
</Directory>

And the python function is as follows:

def my_test(req):
  dict = req.form

  list = req.form.list

  keys = dict.keys()
  str = dict_to_str(dict)

  str = "<H1>Test Page for FieldStorage</H1>\n"+ str + "\nlen(list) %d"
% len(list)

  return str


If anyone had any ideas or somewhere I can look at some examples for
using CGI Environment variables that would be really helpful.

Thanks in advance
regards
Tim.



This e-mail and any attachments are confidential and may also be privileged and/or copyright 
material of Intec Telecom Systems PLC (or its affiliated companies).  If you are not an 
intended or authorised recipient of this e-mail or have received it in error, please delete 
it immediately and notify the sender by e-mail.  In such a case, reading, reproducing, 
printing or further dissemination of this e-mail is strictly prohibited and may be unlawful. 
Intec Telecom Systems PLC. does not represent or warrant that an attachment hereto is free 
from computer viruses or other defects. The opinions expressed in this e-mail and any 
attachments may be those of the author and are not necessarily those of Intec Telecom 
Systems PLC. 

This footnote also confirms that this email message has been swept by
MIMEsweeper for the presence of computer viruses.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20030114/51d59bd9/attachment-0001.htm
From grisha at modpython.org  Tue Jan 14 11:23:31 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:53:20 2004
Subject: [mod_python] Query about FieldStorage
In-Reply-To: <1042555792.16629.16.camel@isukws0321>
Message-ID: <20030114112118.W76303-100000@eden.ispol.com>

Tim - look for "subprocess_env" here:

http://www.modpython.org/live/mod_python-3.0.1/doc-html/pyapi-mprequest-mem.html

Grisha

On 14 Jan 2003, Tim Parker wrote:

> Hi,
>
> I have recently installed Python 2.2.2 and Apache 2.0.43, and have
> configured a directory to execute mod_python.  The problem I have is I
> do not seem to be able to access any of the environment variables in the
> Request Object form object.  Below is the part of my httpd.conf file and
> also the python script that I am using.
>
> # Adding directory for python
> Alias /python/ "/usr/local/apache2/mod_python/"
>
> <Directory "/usr/local/apache2/mod_python">
>     AddHandler python-program .py
>     SetHandler python-program
>     PythonPath "sys.path+['/usr/local/apache2/mod_python']"
>     PythonHandler mod_python.publisher
>     Options +ExecCGI
>     PythonDebug On
> </Directory>
>
> And the python function is as follows:
>
> def my_test(req):
>   dict = req.form
>
>   list = req.form.list
>
>   keys = dict.keys()
>   str = dict_to_str(dict)
>
>   str = "<H1>Test Page for FieldStorage</H1>\n"+ str + "\nlen(list) %d"
> % len(list)
>
>   return str
>
>
> If anyone had any ideas or somewhere I can look at some examples for
> using CGI Environment variables that would be really helpful.
>
> Thanks in advance
> regards
> Tim.
>
>
>
> This e-mail and any attachments are confidential and may also be privileged and/or copyright
> material of Intec Telecom Systems PLC (or its affiliated companies).  If you are not an
> intended or authorised recipient of this e-mail or have received it in error, please delete
> it immediately and notify the sender by e-mail.  In such a case, reading, reproducing,
> printing or further dissemination of this e-mail is strictly prohibited and may be unlawful.
> Intec Telecom Systems PLC. does not represent or warrant that an attachment hereto is free
> from computer viruses or other defects. The opinions expressed in this e-mail and any
> attachments may be those of the author and are not necessarily those of Intec Telecom
> Systems PLC.
>
> This footnote also confirms that this email message has been swept by
> MIMEsweeper for the presence of computer viruses.
>
>


From sa at sfsu.edu  Tue Jan 14 10:43:49 2003
From: sa at sfsu.edu (Sean Abrahams)
Date: Fri Jan  9 21:53:20 2004
Subject: [mod_python] Database Help
In-Reply-To: <D31B04F24EDE7644BB169BB4F080778A06C236A9@s30342g004005>
References: <D31B04F24EDE7644BB169BB4F080778A06C236A9@s30342g004005>
Message-ID: <41042547859.20030114104349@sfsu.edu>

Thanks for all the replies, but I am indeed committing my statement.
Remember I said it worked when not using mod_python =).

Here's my dbDo function:

def dbDo(db, sql):
    dbCon = dbConnect(db)
    dbCursor = dbCon.cursor()

    dbCursor.execute(sql)
    dbCon.commit()

None of this really makes sense because the code seems to run fine,
giving back no errors. It doesn't even work when I tell it to
explicitly run commit via a sql statement.

I'm using cx_Oracle module to connect to an Oracle 8.1.6 database.

In mod_python must you first disconnect from a database, before
connecting to another one, within the same script?

Thanks for the help.

--Sean
    
Tuesday, January 14, 2003, 6:07:32 AM, you wrote:

YH> I am going to make a simple guess here. I might be wrong but I have been
YH> caught off guard when I forget to issue a commit statement. Maybe the
YH> database connections on the updates/inserts are not automatically
YH> committing.

YH> -----Original Message-----
YH> From: Sean Abrahams [mailto:sa@sfsu.edu]
YH> Sent: Monday, January 13, 2003 9:11 PM
YH> To: mod_python@modpython.org
YH> Subject: [mod_python] Database Help


YH> I'm implementing mod_python and everything is working fine, until I
YH> try to pass an UPDATE sql statement to a database.

YH> I'm grabbing info from one database, and inserting/updating into
YH> another database.

YH> When grabbing, I call upon my dbSelect(db, keys, sql, rows) function,
YH> which connects to a specified database (db) and selects the info.
YH> Works great.

YH> To update/insert I call upon my dbDo(db, sql) function. This function
YH> connects to the specified database (db) and runs the sql. Python wise
YH> everything seems to work fine. I call the dbDo and nothing appears to
YH> go wrong. Except when I look at the data in the db, it wasn't updated.

YH> All of this works fine from the interpreter, so I'm thinking it may
YH> deal with the way mod_python handles processes and dbconnections, of
YH> which I know very little of.

YH> Thus, does connecting to two different databases, right after one
YH> another, cause a problem in mod_python? I'm supposing I must change my
YH> dbConnect() function to take this into consideration due to the way
YH> mod_python/apache function.

YH> Some ideas? I want to learn!

YH> Thanks,
YH> --Sean

YH> Running:
YH> Apache/2.0.43 (Debian GNU/Linux) DAV/2 mod_python/3.0.1 Python/2.2.1
YH> cx_Oracle

YH> _______________________________________________
YH> Mod_python mailing list
YH> Mod_python@modpython.org
YH> http://www.modpython.org/mailman/listinfo/mod_python


From sa at sfsu.edu  Tue Jan 14 10:49:15 2003
From: sa at sfsu.edu (Sean Abrahams)
Date: Fri Jan  9 21:53:20 2004
Subject: [mod_python] Database Help
In-Reply-To: <D31B04F24EDE7644BB169BB4F080778A06C236A9@s30342g004005>
References: <D31B04F24EDE7644BB169BB4F080778A06C236A9@s30342g004005>
Message-ID: <481042874359.20030114104915@sfsu.edu>

Please ignore my last message. I solved the problem, and it wasn't
mod_python related. It had to do with a global variable mixup.

Ahh, the little things.

I apologize for the inconvenience and thanks again for everyones help.

--Sean


Tuesday, January 14, 2003, 6:07:32 AM, you wrote:

YH> I am going to make a simple guess here. I might be wrong but I have been
YH> caught off guard when I forget to issue a commit statement. Maybe the
YH> database connections on the updates/inserts are not automatically
YH> committing.

YH> -----Original Message-----
YH> From: Sean Abrahams [mailto:sa@sfsu.edu]
YH> Sent: Monday, January 13, 2003 9:11 PM
YH> To: mod_python@modpython.org
YH> Subject: [mod_python] Database Help


YH> I'm implementing mod_python and everything is working fine, until I
YH> try to pass an UPDATE sql statement to a database.

YH> I'm grabbing info from one database, and inserting/updating into
YH> another database.

YH> When grabbing, I call upon my dbSelect(db, keys, sql, rows) function,
YH> which connects to a specified database (db) and selects the info.
YH> Works great.

YH> To update/insert I call upon my dbDo(db, sql) function. This function
YH> connects to the specified database (db) and runs the sql. Python wise
YH> everything seems to work fine. I call the dbDo and nothing appears to
YH> go wrong. Except when I look at the data in the db, it wasn't updated.

YH> All of this works fine from the interpreter, so I'm thinking it may
YH> deal with the way mod_python handles processes and dbconnections, of
YH> which I know very little of.

YH> Thus, does connecting to two different databases, right after one
YH> another, cause a problem in mod_python? I'm supposing I must change my
YH> dbConnect() function to take this into consideration due to the way
YH> mod_python/apache function.

YH> Some ideas? I want to learn!

YH> Thanks,
YH> --Sean

YH> Running:
YH> Apache/2.0.43 (Debian GNU/Linux) DAV/2 mod_python/3.0.1 Python/2.2.1
YH> cx_Oracle

YH> _______________________________________________
YH> Mod_python mailing list
YH> Mod_python@modpython.org
YH> http://www.modpython.org/mailman/listinfo/mod_python


From Hans.Yandle at cingular.com  Tue Jan 14 13:57:00 2003
From: Hans.Yandle at cingular.com (Yandle, Hans)
Date: Fri Jan  9 21:53:20 2004
Subject: [mod_python] Database Help
Message-ID: <D31B04F24EDE7644BB169BB4F080778A06C236B1@s30342g004005>

Well, I do not have any experience with Oracle db connections. With MS ODBC
connections using the win32 extensions, I have had to issue commit() then
close() for information to take affect. I have used MySQL dbi and PySQLite
with no problems with just commits only. When you run your database update
script, test and see if it is actually committed the data before the
termination of the python script. To my knowledge when a python script
finishes the variables are cleaned up and connections closed. Perhaps the
termination of the python script is causing the buffers or information to be
committed. Maybe a question to the Oracle python dbi maintainer/group might
help.

-----Original Message-----
From: Sean Abrahams [mailto:sa@sfsu.edu]
Sent: Tuesday, January 14, 2003 1:44 PM
To: Yandle, Hans; mod_python@modpython.org
Subject: Re[2]: [mod_python] Database Help


Thanks for all the replies, but I am indeed committing my statement.
Remember I said it worked when not using mod_python =).

Here's my dbDo function:

def dbDo(db, sql):
    dbCon = dbConnect(db)
    dbCursor = dbCon.cursor()

    dbCursor.execute(sql)
    dbCon.commit()

None of this really makes sense because the code seems to run fine,
giving back no errors. It doesn't even work when I tell it to
explicitly run commit via a sql statement.

I'm using cx_Oracle module to connect to an Oracle 8.1.6 database.

In mod_python must you first disconnect from a database, before
connecting to another one, within the same script?

Thanks for the help.

--Sean
    
Tuesday, January 14, 2003, 6:07:32 AM, you wrote:

YH> I am going to make a simple guess here. I might be wrong but I have been
YH> caught off guard when I forget to issue a commit statement. Maybe the
YH> database connections on the updates/inserts are not automatically
YH> committing.

YH> -----Original Message-----
YH> From: Sean Abrahams [mailto:sa@sfsu.edu]
YH> Sent: Monday, January 13, 2003 9:11 PM
YH> To: mod_python@modpython.org
YH> Subject: [mod_python] Database Help


YH> I'm implementing mod_python and everything is working fine, until I
YH> try to pass an UPDATE sql statement to a database.

YH> I'm grabbing info from one database, and inserting/updating into
YH> another database.

YH> When grabbing, I call upon my dbSelect(db, keys, sql, rows) function,
YH> which connects to a specified database (db) and selects the info.
YH> Works great.

YH> To update/insert I call upon my dbDo(db, sql) function. This function
YH> connects to the specified database (db) and runs the sql. Python wise
YH> everything seems to work fine. I call the dbDo and nothing appears to
YH> go wrong. Except when I look at the data in the db, it wasn't updated.

YH> All of this works fine from the interpreter, so I'm thinking it may
YH> deal with the way mod_python handles processes and dbconnections, of
YH> which I know very little of.

YH> Thus, does connecting to two different databases, right after one
YH> another, cause a problem in mod_python? I'm supposing I must change my
YH> dbConnect() function to take this into consideration due to the way
YH> mod_python/apache function.

YH> Some ideas? I want to learn!

YH> Thanks,
YH> --Sean

YH> Running:
YH> Apache/2.0.43 (Debian GNU/Linux) DAV/2 mod_python/3.0.1 Python/2.2.1
YH> cx_Oracle

YH> _______________________________________________
YH> Mod_python mailing list
YH> Mod_python@modpython.org
YH> http://www.modpython.org/mailman/listinfo/mod_python
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20030114/a35ad92e/attachment-0001.htm
From thm at duke.edu  Tue Jan 14 18:37:34 2003
From: thm at duke.edu (Hunter Matthews)
Date: Fri Jan  9 21:53:20 2004
Subject: [mod_python] Upgrade to mod_python 3.0.0 causes some handlers
	not to run.
In-Reply-To: <1042340165.1840.16.camel@jade.biology.duke.edu>
References: <1042340165.1840.16.camel@jade.biology.duke.edu>
Message-ID: <1042587454.1423.25.camel@jade.biology.duke.edu>

Sorry to reply to my own email, but if anyone wants a simple working
test case, let me know I'll post that to this list - this has both the
developers of current completely stumped.



On Sat, 2003-01-11 at 21:56, Hunter Matthews wrote:
> I have program (current) that successfully uses the following
> confirguration under apache 1.3.24 and mod_python 2.7.8 (redhat 7.2 or
> 7.3, basically) to have a TypeHandler, AccessHandler, and PythonHander
> run on some get requests.
> 
> If I take this same configuration to httpd 2.0.40 and mod_python 3.0.0
> (redhat 8.0) the python handler runs for the /XMLRPC requests, but
> neither the TypeHandler or the AccessHandler is running for the
> /XMLRPC/$RHN requests.
> 
> I'm assuming this a mod_python config issue, but some other 1.3-> 2.0
> upgrade issue may have me here - my ignorance with apache 2.0 is nearly
> complete.
> 
> Note that its the first block that works perfectly - all the  "/XMLRPC$"
> are dealt with by the simple "handler()" function, and they seem to work
> fine.
> 
> The "/XMLRPC/$RHN" hits _don't_ use the "handler()" function, but do
> need to be run through the accesshandler() and the typehandler() (both,
> for each request) but neither is running. 
> 
> Suggestions?
> -----------------------------------------------------------------------------
> Alias /XMLRPC/$RHN /local/linux/current/www
> 
> <Directory /local/linux/current/www>
>     # Make certain this is set - current won't work without it
>     Options FollowSymLinks
> </Directory>
> 
> <Location ~ "/XMLRPC$">
>     PythonPath "sys.path + ['/usr/share/current']"
>     SetHandler python-program
>     PythonHandler current_apache
> </Location>
> 
> <Location /XMLRPC/$RHN>
>     PythonPath "sys.path + ['/usr/share/current']"
>     PythonHandlerModule current_apache
> </Location>
> 
> -- 
> Hunter Matthews                          Unix / Network Administrator
> Office: BioScience 145/244               Duke Univ. Biology Department
> Key: F0F88438 / FFB5 34C0 B350 99A4 BB02  9779 A5DB 8B09 F0F8 8438
> Never take candy from strangers. Especially on the internet.
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 
> 
-- 
Hunter Matthews                          Unix / Network Administrator
Office: BioScience 145/244               Duke Univ. Biology Department
Key: F0F88438 / FFB5 34C0 B350 99A4 BB02  9779 A5DB 8B09 F0F8 8438
Never take candy from strangers. Especially on the internet.


From neo at https.ru  Wed Jan 15 03:17:12 2003
From: neo at https.ru (Neo Eureka)
Date: Fri Jan  9 21:53:20 2004
Subject: [mod_python] ?
Message-ID: <18341556445.20030115031712@https.ru>

  Hi, folks !

  Some questions for Grisha.
  I use Python and mod_python in commercial projects, where the
stability is very important. So I want to ask when do you plan to
issue the next stable version of mod_python (or at least the
alpha-beta stuff) with all the fixes and features which has been
reported and discussed on the mail lists and in the documentation, and
those which you, as the author, might want to include ?

--- 
Neo Eureka / mailto:neo@https.ru


From mark at camazotz.com  Wed Jan 15 14:48:22 2003
From: mark at camazotz.com (Mark Smith)
Date: Fri Jan  9 21:53:20 2004
Subject: [mod_python] mod_python and MultiViews
Message-ID: <4DFF2CEE-28C2-11D7-ADE3-00039364CE50@camazotz.com>

I have mod_python 3.0 running with Apache 2.0.43.  Using the publisher 
handler, a request for "/foo.py/bar" resolves correctly.  If I turn on 
MultiViews in httpd.conf and use the URL "/foo/bar", it fails.  In the 
error log, I get:

   Negotiation: discovered file(s) matching request: /apache2/htdocs/foo
   (None could be negotiated).

This is on an OpenBSD system, but the same thing works fine on Mac OS 
X.  Anyone know what I'm missing to convince Apache that it should 
accept foo.py?

thx


From jwm-modpython at sentinelchicken.net  Wed Jan 15 16:17:08 2003
From: jwm-modpython at sentinelchicken.net (Jason Morgan)
Date: Fri Jan  9 21:53:20 2004
Subject: [mod_python] IE not using cached images
Message-ID: <20030115211708.GA47149@sentinelchicken.net>

Please excuse me if this question is elementary. I am having trouble
with IE and its refusal to use images it caches. What happens is the
first time I hit my site, everything works as it should - all images are
downloaded, etc. If I then hit another page on my site with the same
images, IE refuses to use the images in its cache and instead requests
all of them again. Not only that, but the rollover images are requested
each and every time I put the mouse over the images. Now, if I hit
reload, then everything works fine again. If I hit another page, again,
the same problem, over and over and over again.

Now I've played with IE's settings and have discovered that setting
"Check for newer version of stored pages" to "Never" makes IE act as it
should. And I have checked if the images are actually getting cached,
they are. I have also tested other browsers (Opera, Netscape, etc.) and
none of these have the same problem.

Now to the question, should I be sending the client something (304?) to
tell it to use its cache unless the user specifically presses reload?

OS: FreeBSD 4.7
Apache: 1.3.27
Mod_python: 2.7.8
Python: 2.2.2

Thanks,

Jason


From geertj at boskant.nl  Wed Jan 15 22:55:57 2003
From: geertj at boskant.nl (Geert Jansen)
Date: Fri Jan  9 21:53:20 2004
Subject: [mod_python] IE not using cached images
In-Reply-To: <20030115211708.GA47149@sentinelchicken.net>
References: <20030115211708.GA47149@sentinelchicken.net>
Message-ID: <20030115215557.GA28196@vader.boskant.nl>

On Wed, Jan 15, 2003 at 04:17:08PM -0500, Jason Morgan wrote:

> Please excuse me if this question is elementary. I am having trouble
> with IE and its refusal to use images it caches. What happens is the
> first time I hit my site, everything works as it should - all images are
> downloaded, etc. If I then hit another page on my site with the same
> images, IE refuses to use the images in its cache and instead requests
> all of them again. Not only that, but the rollover images are requested
> each and every time I put the mouse over the images. Now, if I hit
> reload, then everything works fine again. If I hit another page, again,
> the same problem, over and over and over again.

I have seen this problem too. I did the following things:

* Make sure an appropriate "Last-Modified" http header is sent.
* If the image is dynamically generated, make sure that there is
  no query part in the URL, i.e. the part after '?'. I think MSIE
  reloads these URLs every time. You can still pass parameters by
  using path_info.

For me this worked.

Greetings,
Geert Jansen

From jwm-modpython at sentinelchicken.net  Wed Jan 15 19:45:27 2003
From: jwm-modpython at sentinelchicken.net (Jason Morgan)
Date: Fri Jan  9 21:53:20 2004
Subject: [mod_python] IE not using cached images
In-Reply-To: <20030115215557.GA28196@vader.boskant.nl>
References: <20030115211708.GA47149@sentinelchicken.net> <20030115215557.GA28196@vader.boskant.nl>
Message-ID: <20030116004527.GB47580@sentinelchicken.net>

On Wed, Jan 15, 2003 at 10:55:57PM +0100, Geert Jansen wrote:
>
> I have seen this problem too. I did the following things:
>
> * Make sure an appropriate "Last-Modified" http header is sent.

I'm sorry for my ignorance but how do I do this? Is this in addition to
send_http_header() or do I modify the http header to be sent?

> * If the image is dynamically generated, make sure that there is
>   no query part in the URL, i.e. the part after '?'. I think MSIE
>   reloads these URLs every time. You can still pass parameters by
>   using path_info.

This isn't an issue as all images are static.

Thanks,

Jason


From thanos at 0x01.com  Thu Jan 16 00:19:10 2003
From: thanos at 0x01.com (thanos vassilakis)
Date: Fri Jan  9 21:53:20 2004
Subject: [mod_python] Query about FieldStorage
In-Reply-To: <1042555792.16629.16.camel@isukws0321>
Message-ID: <0B1B5939-2912-11D7-8A98-00306559D868@0x01.com>

If you use pso you will have env available in a neat and easy manner:

http://sourceforge.net/docman/display_doc.php?docid=11314&group_id=49265

Or you can always see how in pso we get all the enviromental variables 
;)


good luck,

thanos


On Tuesday, January 14, 2003, at 09:49  AM, Tim Parker wrote:

> Hi,
>
> I have recently installed Python 2.2.2 and Apache 2.0.43, and have 
> configured a directory to execute mod_python.? The problem I have is I 
> do not seem to be able to access any of the environment variables in 
> the Request Object form object.? Below is the part of my httpd.conf 
> file and also the python script that I am using.
>
> # Adding directory for python
> Alias /python/ "/usr/local/apache2/mod_python/"
>
> <Directory "/usr/local/apache2/mod_python">
> ??? AddHandler python-program .py
> ??? SetHandler python-program
> ??? PythonPath "sys.path+['/usr/local/apache2/mod_python']"
> ??? PythonHandler mod_python.publisher
> ??? Options +ExecCGI
> ??? PythonDebug On
> </Directory>
>
> And the python function is as follows:
>
> def my_test(req):
> ? dict = req.form
>
> ? list = req.form.list
>
> ? keys = dict.keys()
> ? str = dict_to_str(dict)
>
> ? str = "<H1>Test Page for FieldStorage</H1>\n"+ str + "\nlen(list) 
> %d" % len(list)
>
> ? return str
>
>
> If anyone had any ideas or somewhere I can look at some examples for 
> using CGI Environment variables that would be really helpful.
>
> Thanks in advance
> regards
> Tim.
>
>
>
> This e-mail and any attachments are confidential and may also be 
> privileged and/or copyright
> material of Intec Telecom Systems PLC (or its affiliated companies). 
> If you are not an
> intended or authorised recipient of this e-mail or have received it in 
> error, please delete
> it immediately and notify the sender by e-mail. In such a case, 
> reading, reproducing,
> printing or further dissemination of this e-mail is strictly 
> prohibited and may be unlawful.
> Intec Telecom Systems PLC. does not represent or warrant that an 
> attachment hereto is free
> from computer viruses or other defects. The opinions expressed in this 
> e-mail and any
> attachments may be those of the author and are not necessarily those 
> of Intec Telecom
> Systems PLC.
>
> This footnote also confirms that this email message has been swept by
> MIMEsweeper for the presence of computer viruses.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: text/enriched
Size: 2398 bytes
Desc: not available
Url : http://mailman.modpython.org/pipermail/mod_python/attachments/20030116/bf4edf39/attachment-0001.bin
From jwm-modpython at sentinelchicken.net  Thu Jan 16 11:43:25 2003
From: jwm-modpython at sentinelchicken.net (Jason Morgan)
Date: Fri Jan  9 21:53:20 2004
Subject: [mod_python] IE not using cached images
In-Reply-To: <000901c2bd32$cc927540$bd6e4351@mixio7jpsmlatx>
References: <20030115211708.GA47149@sentinelchicken.net> <000901c2bd32$cc927540$bd6e4351@mixio7jpsmlatx>
Message-ID: <20030116164325.GD47580@sentinelchicken.net>

> This won't hurt:
> 
> req.headers_out.add("Cache-Control:","no-cache")
> req.headers_out.add("Pragma:","no-cache")

Won't this make the browser request the contents again? What I want is
for IE not to request what it already has cached.

> 
> as welll as adding this to your HTML header:
> 
> """<meta http-equiv="expires" content="Tue, 20 Aug 1996 01:00:00 GMT">\
> <meta http-equiv="Pragma" content="no-cache"><title>%s</title>%s</head>"""

Maybe the content expiration will work.

Thanks,

Jason

From jwm-modpython at sentinelchicken.net  Thu Jan 16 13:09:27 2003
From: jwm-modpython at sentinelchicken.net (Jason Morgan)
Date: Fri Jan  9 21:53:21 2004
Subject: [mod_python] IE not using cached images
In-Reply-To: <20030116164325.GD47580@sentinelchicken.net>
References: <20030115211708.GA47149@sentinelchicken.net> <000901c2bd32$cc927540$bd6e4351@mixio7jpsmlatx> <20030116164325.GD47580@sentinelchicken.net>
Message-ID: <20030116180927.GC49849@sentinelchicken.net>

As usual, the error was caused by my own ignorance. I fixed the problem
by sending adding an expiration date to the header.

req.headers_out.add('Expires',expire_date)

Thanks for everyone's help.

-Jason

On Thu, Jan 16, 2003 at 11:43:25AM -0500, Jason Morgan wrote:
> > This won't hurt:
> > 
> > req.headers_out.add("Cache-Control:","no-cache")
> > req.headers_out.add("Pragma:","no-cache")
> 
> Won't this make the browser request the contents again? What I want is
> for IE not to request what it already has cached.
> 
> > 
> > as welll as adding this to your HTML header:
> > 
> > """<meta http-equiv="expires" content="Tue, 20 Aug 1996 01:00:00 GMT">\
> > <meta http-equiv="Pragma" content="no-cache"><title>%s</title>%s</head>"""
> 
> Maybe the content expiration will work.
> 
> Thanks,
> 
> Jason
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python

From geertj at boskant.nl  Thu Jan 16 19:18:19 2003
From: geertj at boskant.nl (Geert Jansen)
Date: Fri Jan  9 21:53:21 2004
Subject: [mod_python] IE not using cached images
In-Reply-To: <20030116004527.GB47580@sentinelchicken.net>
References: <20030115211708.GA47149@sentinelchicken.net> <20030115215557.GA28196@vader.boskant.nl> <20030116004527.GB47580@sentinelchicken.net>
Message-ID: <20030116181819.GA9238@vader.boskant.nl>

On Wed, Jan 15, 2003 at 07:45:27PM -0500, Jason Morgan wrote:

Hello Jason,

> On Wed, Jan 15, 2003 at 10:55:57PM +0100, Geert Jansen wrote:
> >
> > I have seen this problem too. I did the following things:
> >
> > * Make sure an appropriate "Last-Modified" http header is sent.
> 
> I'm sorry for my ignorance but how do I do this? Is this in addition to
> send_http_header() or do I modify the http header to be sent?

You can use request.headers_out to add http headers.

But ... are you serving images with mod_python or are you using Apache for
that? Only if you are using mod_python, you can change the something about
the http response. But it would not make much sense IMHO to use mod_python
for this because Apache does a good job at serving static content.

When I wrote my response I was under the impression that you were using
mod_python for serving images.

> > * If the image is dynamically generated, make sure that there is
> >   no query part in the URL, i.e. the part after '?'. I think MSIE
> >   reloads these URLs every time. You can still pass parameters by
> >   using path_info.
> 
> This isn't an issue as all images are static.

Greetings,
Geert Jansen

From kriedel at syntricity.com  Thu Jan 16 16:13:46 2003
From: kriedel at syntricity.com (Klaus Riedel)
Date: Fri Jan  9 21:53:21 2004
Subject: [mod_python] mod_python installation on winnt
Message-ID: <NFBBIPNKHKMOHBPGHEIAIEPJCKAA.kriedel@syntricity.com>

Hello All,

I am learning Python and am trying to run/implement the code in "Leaning
Python" book chapter 10.  This is just an html form that calls some python
code feedback.py.

Before we get into whether or not I installed the mod_python.dll correctly
let me know if this behaviour is normal.  In my IE url address I point to
the html code that is a form, that when filled and submitted will call the
script feedback.py.  When I fill the form and hit submit, I get the text for
feedback.py to come up on my browser.  I would expect this if mod_python is
not installed.  If however, I place my curser in the url address ( it is
till pointing to
(E:\syntricity\home\armstrong\webserver\cgi-bin\feedback.py) and hit return
the script (feedback.py) which outputs html is actually run??? i.e. the cmd
window comes up and tells me that none of the form fields where filled out
and then quickly closes.  The reason I ask if this is normal is because if I
point to a perl script and run it from the browser I get the page not found
screen on the browser.

What is wierd is that I get the same response whether or not I am pointing
to my original working conf file or not which leads me to believe that I
have not installed correctly.  (I am just stopping and restarting my apache
services between conf edits).

I am running apache 1.3 and python 2.2 and I have downloaded the
mod_python-2.78 dll and placed it in my E:\Apache\modules directory, I have
placed my python scripts in
E:/syntricity/home/armstrong/webserver/cgi-bin/python and have the following
items in my conf file:

Could my options in my conf be wrong?
.
.

#
# Dynamic Shared Object (DSO) Support
#
LoadModule anon_auth_module modules/ApacheModuleAuthAnon.dll
LoadModule cern_meta_module modules/ApacheModuleCERNMeta.dll
LoadModule digest_module modules/ApacheModuleDigest.dll
LoadModule expires_module modules/ApacheModuleExpires.dll
LoadModule headers_module modules/ApacheModuleHeaders.dll
LoadModule proxy_module modules/ApacheModuleProxy.dll
LoadModule rewrite_module modules/ApacheModuleRewrite.dll
LoadModule speling_module modules/ApacheModuleSpeling.dll
LoadModule status_module modules/ApacheModuleStatus.dll
LoadModule usertrack_module modules/ApacheModuleUserTrack.dll
LoadModule python_module modules/mod_python.dll

ExtendedStatus On

.
.
.
ServerName armstrong
ServerAdmin webmaster@syntricity.com
DocumentRoot E:/syntricity/home/armstrong/webserver/htdocs
UserDir "E:/Apache/users/"
Alias /cgi-bin/ "E:/syntricity/home/armstrong/webserver/cgi-bin/"
Alias /python/  "E:/syntricity/home/armstrong/webserver/htdocs/python/"

ScriptAlias /cgi-bin/ "E:/syntricity/home/armstrong/webserver/cgi-bin/"
ScriptAlias /python/
"E:/syntricity/home/armstrong/webserver/htdocs/python/"

Alias /icons/ "E:/syntricity/home/armstrong/webserver/icons/"
<Directory />
    Options FollowSymLinks
    AllowOverride None
</Directory>
<Directory "E:/syntricity/home/armstrong/webserver/htdocs">
    Options  FollowSymLinks
    AllowOverride None
    Order allow,deny
    Allow from all
</Directory>
<Directory "E:/syntricity/home/armstrong/webserver/cgi-bin">
    AllowOverride None
    Options None
</Directory>

<Directory "E:/syntricity/home/armstrong/webserver/cgi-bin/python">
    AddHandler python-program .py
    PythonHandler mptest
    PythonDebug on
    Options +ExecCGI
</Directory>


From tim.parker at intec-telecom-systems.com  Fri Jan 17 11:26:15 2003
From: tim.parker at intec-telecom-systems.com (Tim Parker (UK))
Date: Fri Jan  9 21:53:21 2004
Subject: [mod_python] Query about client server interaction
Message-ID: <7F124BC48D56D411812500D0B747251403B7B433@FILESERVER002>

Hi,
 
This is both a bit of understanding mod_python and also how CGI scripts in
general work, basically I have a long running query which can take up to a
minute or so to process, I want to return a page to the User immediately
saying what it is doing, ideally I would like this page to get updated
during the processing of the other operation.  And then when it has finished
the process it loads the resulting page on the Client.
 
I believe some of this is possible with server-push but this only works in
Netscape as far as I can tell.  Also I can load a temporary page and have a
refresh every few seconds which will check to see if the other process has
finished, but I was wondering if anyone knows of a clever way to achieve
this, ideally to have a dynamically updating page which checks the status of
the process and when it has finished loads the final page.
 
Thanks in advance for anyone who has any ideas on this.
Cheers
Tim.


This e-mail and any attachments are confidential and may also be privileged and/or copyright 
material of Intec Telecom Systems PLC (or its affiliated companies).  If you are not an 
intended or authorised recipient of this e-mail or have received it in error, please delete 
it immediately and notify the sender by e-mail.  In such a case, reading, reproducing, 
printing or further dissemination of this e-mail is strictly prohibited and may be unlawful. 
Intec Telecom Systems PLC. does not represent or warrant that an attachment hereto is free 
from computer viruses or other defects. The opinions expressed in this e-mail and any 
attachments may be those of the author and are not necessarily those of Intec Telecom 
Systems PLC. 

This footnote also confirms that this email message has been swept by
MIMEsweeper for the presence of computer viruses.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20030117/5cfa159a/attachment-0001.htm
From vfranceschetti at virgilio.it  Fri Jan 17 13:30:19 2003
From: vfranceschetti at virgilio.it (vfranceschetti@virgilio.it)
Date: Fri Jan  9 21:53:21 2004
Subject: [mod_python] Proble starting Apache
Message-ID: <3E24FD9E00005F4A@ims1a.cp.tin.it>

Hi,
i've installed Python 2.2.1 and Apache 2.0 in a win2000 Professional.

i have put this line in httpd.conf 

LoadModule python_module modules/mod_python.so

and file mod_python.so under the /modules dir.

When i try to start Apache i get this error:

Syntax error on line 173 of C:/Programmi/Apache Group/Apache2/conf/httpd.conf:
Cannot load C:/Programmi/Apache Group/Apache2/modules/mod_python.so into
server: impossible to find the specified module.

Some suggestion?

Thanks
Valentino



From gdamjan at mail.net.mk  Fri Jan 17 14:32:31 2003
From: gdamjan at mail.net.mk (Damjan)
Date: Fri Jan  9 21:53:21 2004
Subject: [mod_python] ModPython modules and applications
Message-ID: <20030117133231.GA26276@legolas.on.net.mk>

It would be nice if there's a central place were all of the
mod_python modules, helpers and opensource applications are documented.

Please reply here if you have any info on this topic, and later
we can put all of this on some wiki page.


-- 
Damjan Georgievski

From thanos at 0x01.com  Fri Jan 17 09:58:09 2003
From: thanos at 0x01.com (thanos@0x01.com)
Date: Fri Jan  9 21:53:21 2004
Subject: [mod_python] Re: Query about client server interaction
In-Reply-To: <7F124BC48D56D411812500D0B747251403B7B433@FILESERVER002>
References: <7F124BC48D56D411812500D0B747251403B7B433@FILESERVER002>
Message-ID: <20030117145809.7867.qmail@0x01.com>

Use a meta-refresh in the html header of you status page. 

So your status page keeps loading itself until the work is ready. 


thanos 

ps: using pso would make your life easier.
http://sourceforge.net/projects/pso/
http://sourceforge.net/docman/?group_id=49265 

Tim Parker (UK) writes: 

> Hi,
>  
> This is both a bit of understanding mod_python and also how CGI scripts in
> general work, basically I have a long running query which can take up to a
> minute or so to process, I want to return a page to the User immediately
> saying what it is doing, ideally I would like this page to get updated
> during the processing of the other operation.  And then when it has finished
> the process it loads the resulting page on the Client.
>  
> I believe some of this is possible with server-push but this only works in
> Netscape as far as I can tell.  Also I can load a temporary page and have a
> refresh every few seconds which will check to see if the other process has
> finished, but I was wondering if anyone knows of a clever way to achieve
> this, ideally to have a dynamically updating page which checks the status of
> the process and when it has finished loads the final page.
>  
> Thanks in advance for anyone who has any ideas on this.
> Cheers
> Tim. 
> 
> 
> This e-mail and any attachments are confidential and may also be privileged and/or copyright 
> material of Intec Telecom Systems PLC (or its affiliated companies).  If you are not an 
> intended or authorised recipient of this e-mail or have received it in error, please delete 
> it immediately and notify the sender by e-mail.  In such a case, reading, reproducing, 
> printing or further dissemination of this e-mail is strictly prohibited and may be unlawful. 
> Intec Telecom Systems P

LC. does not represent or warrant that an attachment hereto is free
> from computer viruses or other defects. The opinions expressed in this e-mail and any 
> attachments may be those of the author and are not necessarily those of Intec Telecom 
> Systems PLC.  
> 
> This footnote also confirms that this email message has been swept by
> MIMEsweeper for the presence of computer viruses. 
> 
 


thanos vassilakis
127 greene street
New York
NY 10012-5401
w. 212 383 2777 


From listmail at xs4all.nl  Fri Jan 17 22:23:36 2003
From: listmail at xs4all.nl (baz)
Date: Fri Jan  9 21:53:21 2004
Subject: [mod_python] Query about client server interaction
In-Reply-To: <7F124BC48D56D411812500D0B747251403B7B433@FILESERVER002>
References: <7F124BC48D56D411812500D0B747251403B7B433@FILESERVER002>
Message-ID: <3E287458.1090500@xs4all.nl>


You can achieve this by sending pieces of javacript whenever you want to 
update something (like a progress bar or whatever).

You also need to be able to flush the output buffer to apache, (my setup 
seems to do this implicitly ?) otherwise i would've tried req.flush().

Works on major browsers, just make sure you send <script> tags everytime 
for this is needed by NN4 (or later?).

baz.

Tim Parker (UK) wrote:
> 
> 
> Hi,
> 
>  
> 
> This is both a bit of understanding mod_python and also how CGI scripts 
> in general work, basically I have a long running query which can take up 
> to a minute or so to process, I want to return a page to the User 
> immediately saying what it is doing, ideally I would like this page to 
> get updated during the processing of the other operation.  And then when 
> it has finished the process it loads the resulting page on the Client.
> 
>  
> 
> I believe some of this is possible with server-push but this only works 
> in Netscape as far as I can tell.  Also I can load a temporary page and 
> have a refresh every few seconds which will check to see if the other 
> process has finished, but I was wondering if anyone knows of a clever 
> way to achieve this, ideally to have a dynamically updating page which 
> checks the status of the process and when it has finished loads the 
> final page.
> 
>  
> 
> Thanks in advance for anyone who has any ideas on this.


From josh at janrain.com  Fri Jan 17 15:44:09 2003
From: josh at janrain.com (Josh Hoyt)
Date: Fri Jan  9 21:53:21 2004
Subject: [mod_python] mod_python and Python 2.3
Message-ID: <1042847049.2550.63.camel@rye>

Hello,

I'm trying to get mod_python working with python 2.3, and I've run into
some problems related to module importing. For some reason, it fails to
import the site module. The same setup works with Python 2.2, so I'm
pretty sure that it has something to do with the Python version and not
the configuration. Running with Python in verbose mode, the following
shows up in the apache error log file:

[...]
# trying /home/josh/scratch/python/lib/python2.3/site.py
# /home/josh/scratch/python/lib/python2.3/site.pyc matches /home/josh/scratch/python/lib/python2.3/site.py
import site # precompiled from /home/josh/scratch/python/lib/python2.3/site.pyc
[...]
'import site' failed; traceback:
ImportError: No module named site
[...]

I've attached the full error log in case there are any details there 
that I failed to make clear in the excerpts above.

This problem appears with:
Python 2.3a1, Apache 1.3.20, mod_python 2.7.6 or 2.7.8
Python 2.3a1, Apache 2.0.43, mod_python 3.0.1

It goes away with Python 2.2.2.

Any ideas about where to go from here?

Thanks,
Josh Hoyt
<josh@janrain.com>
-------------- next part --------------
# installing zipimport hook
import zipimport # builtin
# installed zipimport hook
# trying /home/josh/prj/top/josh/site.so
# trying /home/josh/prj/top/josh/sitemodule.so
# trying /home/josh/prj/top/josh/site.py
# trying /home/josh/prj/top/josh/site.pyc
# trying /home/josh/prj/top/site.so
# trying /home/josh/prj/top/sitemodule.so
# trying /home/josh/prj/top/site.py
# trying /home/josh/prj/top/site.pyc
# trying /home/josh/scratch/python/lib/python23.zip/site.so
# trying /home/josh/scratch/python/lib/python23.zip/sitemodule.so
# trying /home/josh/scratch/python/lib/python23.zip/site.py
# trying /home/josh/scratch/python/lib/python23.zip/site.pyc
# trying /home/josh/scratch/python/lib/python2.3/site.so
# trying /home/josh/scratch/python/lib/python2.3/sitemodule.so
# trying /home/josh/scratch/python/lib/python2.3/site.py
# /home/josh/scratch/python/lib/python2.3/site.pyc matches /home/josh/scratch/python/lib/python2.3/site.py
import site # precompiled from /home/josh/scratch/python/lib/python2.3/site.pyc
# trying /home/josh/prj/top/josh/os.so
# trying /home/josh/prj/top/josh/osmodule.so
# trying /home/josh/prj/top/josh/os.py
# trying /home/josh/prj/top/josh/os.pyc
# trying /home/josh/prj/top/os.so
# trying /home/josh/prj/top/osmodule.so
# trying /home/josh/prj/top/os.py
# trying /home/josh/prj/top/os.pyc
# trying /home/josh/scratch/python/lib/python23.zip/os.so
# trying /home/josh/scratch/python/lib/python23.zip/osmodule.so
# trying /home/josh/scratch/python/lib/python23.zip/os.py
# trying /home/josh/scratch/python/lib/python23.zip/os.pyc
# trying /home/josh/scratch/python/lib/python2.3/os.so
# trying /home/josh/scratch/python/lib/python2.3/osmodule.so
# trying /home/josh/scratch/python/lib/python2.3/os.py
# /home/josh/scratch/python/lib/python2.3/os.pyc matches /home/josh/scratch/python/lib/python2.3/os.py
import os # precompiled from /home/josh/scratch/python/lib/python2.3/os.pyc
import posix # builtin
# trying /home/josh/prj/top/josh/posixpath.so
# trying /home/josh/prj/top/josh/posixpathmodule.so
# trying /home/josh/prj/top/josh/posixpath.py
# trying /home/josh/prj/top/josh/posixpath.pyc
# trying /home/josh/prj/top/posixpath.so
# trying /home/josh/prj/top/posixpathmodule.so
# trying /home/josh/prj/top/posixpath.py
# trying /home/josh/prj/top/posixpath.pyc
# trying /home/josh/scratch/python/lib/python23.zip/posixpath.so
# trying /home/josh/scratch/python/lib/python23.zip/posixpathmodule.so
# trying /home/josh/scratch/python/lib/python23.zip/posixpath.py
# trying /home/josh/scratch/python/lib/python23.zip/posixpath.pyc
# trying /home/josh/scratch/python/lib/python2.3/posixpath.so
# trying /home/josh/scratch/python/lib/python2.3/posixpathmodule.so
# trying /home/josh/scratch/python/lib/python2.3/posixpath.py
# /home/josh/scratch/python/lib/python2.3/posixpath.pyc matches /home/josh/scratch/python/lib/python2.3/posixpath.py
import posixpath # precompiled from /home/josh/scratch/python/lib/python2.3/posixpath.pyc
# trying /home/josh/prj/top/josh/stat.so
# trying /home/josh/prj/top/josh/statmodule.so
# trying /home/josh/prj/top/josh/stat.py
# trying /home/josh/prj/top/josh/stat.pyc
# trying /home/josh/prj/top/stat.so
# trying /home/josh/prj/top/statmodule.so
# trying /home/josh/prj/top/stat.py
# trying /home/josh/prj/top/stat.pyc
# trying /home/josh/scratch/python/lib/python23.zip/stat.so
# trying /home/josh/scratch/python/lib/python23.zip/statmodule.so
# trying /home/josh/scratch/python/lib/python23.zip/stat.py
# trying /home/josh/scratch/python/lib/python23.zip/stat.pyc
# trying /home/josh/scratch/python/lib/python2.3/stat.so
# trying /home/josh/scratch/python/lib/python2.3/statmodule.so
# trying /home/josh/scratch/python/lib/python2.3/stat.py
# /home/josh/scratch/python/lib/python2.3/stat.pyc matches /home/josh/scratch/python/lib/python2.3/stat.py
import stat # precompiled from /home/josh/scratch/python/lib/python2.3/stat.pyc
# trying /home/josh/prj/top/josh/UserDict.so
# trying /home/josh/prj/top/josh/UserDictmodule.so
# trying /home/josh/prj/top/josh/UserDict.py
# trying /home/josh/prj/top/josh/UserDict.pyc
# trying /home/josh/prj/top/UserDict.so
# trying /home/josh/prj/top/UserDictmodule.so
# trying /home/josh/prj/top/UserDict.py
# trying /home/josh/prj/top/UserDict.pyc
# trying /home/josh/scratch/python/lib/python23.zip/UserDict.so
# trying /home/josh/scratch/python/lib/python23.zip/UserDictmodule.so
# trying /home/josh/scratch/python/lib/python23.zip/UserDict.py
# trying /home/josh/scratch/python/lib/python23.zip/UserDict.pyc
# trying /home/josh/scratch/python/lib/python2.3/UserDict.so
# trying /home/josh/scratch/python/lib/python2.3/UserDictmodule.so
# trying /home/josh/scratch/python/lib/python2.3/UserDict.py
# /home/josh/scratch/python/lib/python2.3/UserDict.pyc matches /home/josh/scratch/python/lib/python2.3/UserDict.py
import UserDict # precompiled from /home/josh/scratch/python/lib/python2.3/UserDict.pyc
# trying /home/josh/prj/top/josh/copy_reg.so
# trying /home/josh/prj/top/josh/copy_regmodule.so
# trying /home/josh/prj/top/josh/copy_reg.py
# trying /home/josh/prj/top/josh/copy_reg.pyc
# trying /home/josh/prj/top/copy_reg.so
# trying /home/josh/prj/top/copy_regmodule.so
# trying /home/josh/prj/top/copy_reg.py
# trying /home/josh/prj/top/copy_reg.pyc
# trying /home/josh/scratch/python/lib/python23.zip/copy_reg.so
# trying /home/josh/scratch/python/lib/python23.zip/copy_regmodule.so
# trying /home/josh/scratch/python/lib/python23.zip/copy_reg.py
# trying /home/josh/scratch/python/lib/python23.zip/copy_reg.pyc
# trying /home/josh/scratch/python/lib/python2.3/copy_reg.so
# trying /home/josh/scratch/python/lib/python2.3/copy_regmodule.so
# trying /home/josh/scratch/python/lib/python2.3/copy_reg.py
# /home/josh/scratch/python/lib/python2.3/copy_reg.pyc matches /home/josh/scratch/python/lib/python2.3/copy_reg.py
import copy_reg # precompiled from /home/josh/scratch/python/lib/python2.3/copy_reg.pyc
# trying /home/josh/prj/top/josh/types.so
# trying /home/josh/prj/top/josh/typesmodule.so
# trying /home/josh/prj/top/josh/types.py
# trying /home/josh/prj/top/josh/types.pyc
# trying /home/josh/prj/top/types.so
# trying /home/josh/prj/top/typesmodule.so
# trying /home/josh/prj/top/types.py
# trying /home/josh/prj/top/types.pyc
# trying /home/josh/scratch/python/lib/python23.zip/types.so
# trying /home/josh/scratch/python/lib/python23.zip/typesmodule.so
# trying /home/josh/scratch/python/lib/python23.zip/types.py
# trying /home/josh/scratch/python/lib/python23.zip/types.pyc
# trying /home/josh/scratch/python/lib/python2.3/types.so
# trying /home/josh/scratch/python/lib/python2.3/typesmodule.so
# trying /home/josh/scratch/python/lib/python2.3/types.py
# /home/josh/scratch/python/lib/python2.3/types.pyc matches /home/josh/scratch/python/lib/python2.3/types.py
import types # precompiled from /home/josh/scratch/python/lib/python2.3/types.pyc
# trying /home/josh/prj/top/josh/sitecustomize.so
# trying /home/josh/prj/top/josh/sitecustomizemodule.so
# trying /home/josh/prj/top/josh/sitecustomize.py
# trying /home/josh/prj/top/josh/sitecustomize.pyc
# trying /home/josh/prj/top/sitecustomize.so
# trying /home/josh/prj/top/sitecustomizemodule.so
# trying /home/josh/prj/top/sitecustomize.py
# trying /home/josh/prj/top/sitecustomize.pyc
# trying /home/josh/scratch/python/lib/python23.zip/sitecustomize.so
# trying /home/josh/scratch/python/lib/python23.zip/sitecustomizemodule.so
# trying /home/josh/scratch/python/lib/python23.zip/sitecustomize.py
# trying /home/josh/scratch/python/lib/python23.zip/sitecustomize.pyc
# trying /home/josh/scratch/python/lib/python2.3/sitecustomize.so
# trying /home/josh/scratch/python/lib/python2.3/sitecustomizemodule.so
# trying /home/josh/scratch/python/lib/python2.3/sitecustomize.py
# trying /home/josh/scratch/python/lib/python2.3/sitecustomize.pyc
# trying /home/josh/scratch/python/lib/python2.3/plat-linux2/sitecustomize.so
# trying /home/josh/scratch/python/lib/python2.3/plat-linux2/sitecustomizemodule.so
# trying /home/josh/scratch/python/lib/python2.3/plat-linux2/sitecustomize.py
# trying /home/josh/scratch/python/lib/python2.3/plat-linux2/sitecustomize.pyc
# trying /home/josh/scratch/python/lib/python2.3/lib-tk/sitecustomize.so
# trying /home/josh/scratch/python/lib/python2.3/lib-tk/sitecustomizemodule.so
# trying /home/josh/scratch/python/lib/python2.3/lib-tk/sitecustomize.py
# trying /home/josh/scratch/python/lib/python2.3/lib-tk/sitecustomize.pyc
# trying /home/josh/scratch/python/lib/python2.3/lib-dynload/sitecustomize.so
# trying /home/josh/scratch/python/lib/python2.3/lib-dynload/sitecustomizemodule.so
# trying /home/josh/scratch/python/lib/python2.3/lib-dynload/sitecustomize.py
# trying /home/josh/scratch/python/lib/python2.3/lib-dynload/sitecustomize.pyc
# trying /home/josh/scratch/python/lib/python2.3/site-packages/sitecustomize.so
# trying /home/josh/scratch/python/lib/python2.3/site-packages/sitecustomizemodule.so
# trying /home/josh/scratch/python/lib/python2.3/site-packages/sitecustomize.py
# trying /home/josh/scratch/python/lib/python2.3/site-packages/sitecustomize.pyc
[Fri Jan 17 15:04:46 2003] [warn] pid file /home/josh/scratch/apache2/logs/httpd.pid overwritten -- Unclean shutdown of previous Apache run?
import __builtin__ # previously loaded (__builtin__)
import sys # previously loaded (sys)
'import site' failed; traceback:
ImportError: No module named site
From dustin at ywlcs.org  Fri Jan 17 20:20:55 2003
From: dustin at ywlcs.org (Dustin Mitchell)
Date: Fri Jan  9 21:53:21 2004
Subject: [mod_python] Re: Query about client server interaction
In-Reply-To: <20030117145809.7867.qmail@0x01.com>
References: <7F124BC48D56D411812500D0B747251403B7B433@FILESERVER002> <20030117145809.7867.qmail@0x01.com>
Message-ID: <20030118022054.GN15058@eleanor.internal.ywlcs.org>

On Fri, Jan 17, 2003 at 09:58:09AM -0500, thanos@0x01.com wrote:
> Use a meta-refresh in the html header of you status page. 

I believe the Refresh HTTP header (with the same format) works as well.  I
think the use of meta-refresh grew out of people using it to make their
static HTML documents act dynamic.

(It works for me with Mozilla)

Dustin

-- 

  Dustin Mitchell
  dustin@ywlcs.org/djmitche@alumni.uchicago.edu
  http://people.cs.uchicago.edu/~dustin/

From geertj at boskant.nl  Sat Jan 18 12:53:36 2003
From: geertj at boskant.nl (Geert Jansen)
Date: Fri Jan  9 21:53:21 2004
Subject: [mod_python] mod_python and Python 2.3
In-Reply-To: <1042847049.2550.63.camel@rye>
References: <1042847049.2550.63.camel@rye>
Message-ID: <20030118115336.GA4522@vader.boskant.nl>

On Fri, Jan 17, 2003 at 03:44:09PM -0800, Josh Hoyt wrote:
> Hello,
> 
> I'm trying to get mod_python working with python 2.3, and I've run into
> some problems related to module importing. For some reason, it fails to
> import the site module. The same setup works with Python 2.2, so I'm
> pretty sure that it has something to do with the Python version and not
> the configuration. Running with Python in verbose mode, the following
> shows up in the apache error log file:

This is a Python bug in Py_NewInterpreter() (or in some other place that
makes Py_NewInterpreter() fail). I sumbitted it to the Python developers
but I got no reply yet. The bug is described here:

http://sourceforge.net/tracker/index.php?func=detail&aid=668708&group_id=5470&atid=105470

Greetings,
Geert

From tim.parker at intec-telecom-systems.com  Mon Jan 20 09:43:34 2003
From: tim.parker at intec-telecom-systems.com (Tim Parker (UK))
Date: Fri Jan  9 21:53:21 2004
Subject: [mod_python] Query about client server interaction
Message-ID: <7F124BC48D56D411812500D0B747251403B7B43B@FILESERVER002>

Thanks Baz,

Just to clarify this a bit as I am quite new to all this, I can output my
Initial Page, including some Java Script and then later on output some more
Java Script which will then update the page on the Client.

I don't suppose you know of somewhere where I can see an example of this, as
that would be really useful.

Thanks
Tim.

-----Original Message-----
From: baz [mailto:listmail@xs4all.nl]
Sent: 17 January 2003 21:24
To: Tim Parker (UK); mod_python@modpython.org
Subject: Re: [mod_python] Query about client server interaction


You can achieve this by sending pieces of javacript whenever you want to
update something (like a progress bar or whatever).

You also need to be able to flush the output buffer to apache, (my setup
seems to do this implicitly ?) otherwise i would've tried req.flush().

Works on major browsers, just make sure you send <script> tags everytime
for this is needed by NN4 (or later?).

baz.

Tim Parker (UK) wrote:
>
>
> Hi,
>
> 
>
> This is both a bit of understanding mod_python and also how CGI scripts
> in general work, basically I have a long running query which can take up
> to a minute or so to process, I want to return a page to the User
> immediately saying what it is doing, ideally I would like this page to
> get updated during the processing of the other operation.  And then when
> it has finished the process it loads the resulting page on the Client.
>
> 
>
> I believe some of this is possible with server-push but this only works
> in Netscape as far as I can tell.  Also I can load a temporary page and
> have a refresh every few seconds which will check to see if the other
> process has finished, but I was wondering if anyone knows of a clever
> way to achieve this, ideally to have a dynamically updating page which
> checks the status of the process and when it has finished loads the
> final page.
>
> 
>
> Thanks in advance for anyone who has any ideas on this.


This e-mail and any attachments are confidential and may also be privileged and/or copyright 
material of Intec Telecom Systems PLC (or its affiliated companies).  If you are not an 
intended or authorised recipient of this e-mail or have received it in error, please delete 
it immediately and notify the sender by e-mail.  In such a case, reading, reproducing, 
printing or further dissemination of this e-mail is strictly prohibited and may be unlawful. 
Intec Telecom Systems PLC. does not represent or warrant that an attachment hereto is free 
from computer viruses or other defects. The opinions expressed in this e-mail and any 
attachments may be those of the author and are not necessarily those of Intec Telecom 
Systems PLC. 

This footnote also confirms that this email message has been swept by
MIMEsweeper for the presence of computer viruses.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20030120/3b5ac633/attachment-0001.htm
From tim.parker at intec-telecom-systems.com  Mon Jan 20 16:25:28 2003
From: tim.parker at intec-telecom-systems.com (Tim Parker (UK))
Date: Fri Jan  9 21:53:21 2004
Subject: [mod_python] Wierd problem with API version mismatch
Message-ID: <7F124BC48D56D411812500D0B747251403B7B445@FILESERVER002>

I managed to install the mod_python module and it was working with no
problems at all with my Apache server running on Port 8080, I have now
migrated this server to be the main server and shutdown the original server
which was running on Port 80.  But whenever I try to access a python script
it gives me the following message in the error_log file:
 
[Mon Jan 20 16:17:25 2003] [notice] Digest: generating secret for digest
authentication ...
[Mon Jan 20 16:17:25 2003] [notice] Digest: done
[Mon Jan 20 16:17:25 2003] [notice] Apache/2.0.43 (Unix) mod_perl/1.99_08
Perl/v5.6.1 DAV/2 mod_python/3.0.1 Python/2.2.1 PHP/4.3.0s
warning: Python C API version mismatch for module strop: This Python has API
version 1011, module strop has version 1007.
Fatal Python error: can't initialize module strop
[Mon Jan 20 16:17:38 2003] [notice] child pid 6213 exit signal Aborted (6)
 
The Linux version the Apache 2 server is running on is : Linux thunder
2.4.18-17.7.x #1 Tue Oct 8 13:33:14 EDT 2002 i686 unknown
 
What I don't understand is this sometimes seems to work and then other times
it gives me this error message - does anyone know what could cause this as
it is very confusing as it used to work under the different port, but I
can't see how that would affect it, or what else could have caused the
problem to occur when it was working ok before.
 
Thanks for any help on this weird problem!!!!
Tim.


This e-mail and any attachments are confidential and may also be privileged and/or copyright 
material of Intec Telecom Systems PLC (or its affiliated companies).  If you are not an 
intended or authorised recipient of this e-mail or have received it in error, please delete 
it immediately and notify the sender by e-mail.  In such a case, reading, reproducing, 
printing or further dissemination of this e-mail is strictly prohibited and may be unlawful. 
Intec Telecom Systems PLC. does not represent or warrant that an attachment hereto is free 
from computer viruses or other defects. The opinions expressed in this e-mail and any 
attachments may be those of the author and are not necessarily those of Intec Telecom 
Systems PLC. 

This footnote also confirms that this email message has been swept by
MIMEsweeper for the presence of computer viruses.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20030120/1787c015/attachment-0001.htm
From josh at janrain.com  Mon Jan 20 15:31:14 2003
From: josh at janrain.com (Josh Hoyt)
Date: Fri Jan  9 21:53:21 2004
Subject: [mod_python] mod_python and Python 2.3
In-Reply-To: <20030118115336.GA4522@vader.boskant.nl>
References: <1042847049.2550.63.camel@rye> 
	<20030118115336.GA4522@vader.boskant.nl>
Message-ID: <1043105474.2669.7.camel@rye>

> This is a Python bug in Py_NewInterpreter() (or in some other place that
> makes Py_NewInterpreter() fail). I sumbitted it to the Python developers
> but I got no reply yet. The bug is described here:
> 
> http://sourceforge.net/tracker/index.php?func=detail&aid=668708&group_id=5470&atid=105470

The problem appears to be that meta_path is not being
initialized in the new interpreter. Adding
_PyImportHooks_Init to Py_NewInterpreter seems to fix the
problem, initializing the new import hooks before trying to
import modules into the new interpreter.

Patch 671459 contains this fix.

Yeah for mod_python in Python 2.3!

Josh

From gnb at itga.com.au  Tue Jan 21 11:28:27 2003
From: gnb at itga.com.au (Gregory Bond)
Date: Fri Jan  9 21:53:21 2004
Subject: [mod_python] Query about client server interaction 
In-Reply-To: Your message of Fri, 17 Jan 2003 11:26:15 -0000.
Message-ID: <200301210028.LAA29527@lightning.itga.com.au>

> This is both a bit of understanding mod_python and also how CGI scripts in
> general work, basically I have a long running query which can take up to a
> minute or so to process, I want to return a page to the User immediately
> saying what it is doing, ideally I would like this page to get updated
> during the processing of the other operation. 

Along with the other responses, I'd like to offer an alternative solution 
(that may or may not work, depending on how the job is structured).

Anything you send to the client gets sent straight away, so you can use this 
fact to write on-going status messages.  Something like this:

import time
from mod_python import apache

def handler(req):
    req.content_type = "text/html"
    req.write('''<html>
    <head><title>Example Delay Code</title></head>
    <body>
    Please wait.  This could take a long time!!!!
    <ul>
    ''')
    for i in range(20):
        time.sleep(2)
        req.write("<li> Still waiting.... %d\n" % i)
    req.write('</ul>\nAll Done!\n</body></html>')
    
    return apache.OK

(I've added this as FAQ 3.7.   Someone with more experience in redirects or 
refresh tags can add some alternatives.).



From tim.parker at intec-telecom-systems.com  Tue Jan 21 09:08:16 2003
From: tim.parker at intec-telecom-systems.com (Tim Parker (UK))
Date: Fri Jan  9 21:53:21 2004
Subject: [mod_python] Query about client server interaction 
Message-ID: <7F124BC48D56D411812500D0B747251403B7B449@FILESERVER002>

Thanks Gregory,

I am just wondering if it is possible to do this with the publisher handler
- as that is what I am using at present as I have several python modules and
functions that I need to use?

Thanks again for all your help on this
Tim.

-----Original Message-----
From: Gregory Bond [mailto:gnb@itga.com.au]
Sent: 21 January 2003 00:28
To: Tim Parker (UK)
Cc: 'mod_python@modpython.org'
Subject: Re: [mod_python] Query about client server interaction 

> This is both a bit of understanding mod_python and also how CGI scripts in
> general work, basically I have a long running query which can take up to a
> minute or so to process, I want to return a page to the User immediately
> saying what it is doing, ideally I would like this page to get updated
> during the processing of the other operation.

Along with the other responses, I'd like to offer an alternative solution
(that may or may not work, depending on how the job is structured).

Anything you send to the client gets sent straight away, so you can use this
fact to write on-going status messages.  Something like this:

import time
from mod_python import apache

def handler(req):
    req.content_type = "text/html"
    req.write('''<html>
    <head><title>Example Delay Code</title></head>
    <body>
    Please wait.  This could take a long time!!!!
    <ul>
    ''')
    for i in range(20):
        time.sleep(2)
        req.write("<li> Still waiting.... %d\n" % i)
    req.write('</ul>\nAll Done!\n</body></html>')
   
    return apache.OK

(I've added this as FAQ 3.7.   Someone with more experience in redirects or
refresh tags can add some alternatives.).


This e-mail and any attachments are confidential and may also be privileged and/or copyright 
material of Intec Telecom Systems PLC (or its affiliated companies).  If you are not an 
intended or authorised recipient of this e-mail or have received it in error, please delete 
it immediately and notify the sender by e-mail.  In such a case, reading, reproducing, 
printing or further dissemination of this e-mail is strictly prohibited and may be unlawful. 
Intec Telecom Systems PLC. does not represent or warrant that an attachment hereto is free 
from computer viruses or other defects. The opinions expressed in this e-mail and any 
attachments may be those of the author and are not necessarily those of Intec Telecom 
Systems PLC. 

This footnote also confirms that this email message has been swept by
MIMEsweeper for the presence of computer viruses.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20030121/8dc051ba/attachment-0001.htm
From tim.parker at intec-telecom-systems.com  Tue Jan 21 09:38:29 2003
From: tim.parker at intec-telecom-systems.com (Tim Parker (UK))
Date: Fri Jan  9 21:53:21 2004
Subject: [mod_python] Wierd problem with API version mismatch 
Message-ID: <7F124BC48D56D411812500D0B747251403B7B44A@FILESERVER002>

Thanks for that,

I have managed to sort out the problem now; it is to do with the Path
Environment Variable that Apache was running under, which has python (1.5)
as the first python executable on it, so this was causing the version
mismatch.  The only thing I am unsure about is where Apache is
getting/setting this environment variable as for all users the python
version that is on their path is version 2.2.1 (the one I want to use).  As
a work around I have linked python 2.2.1 to /bin/python and it now seems to
work without any problems.

Thanks again
Tim.

-----Original Message-----
From: Gregory Bond [mailto:gnb@itga.com.au]
Sent: 20 January 2003 22:17
To: Tim Parker (UK)
Subject: Re: [mod_python] Wierd problem with API version mismatch 

> warning: Python C API version mismatch for module strop: This Python has
API
> version 1011, module strop has version 1007.

My guess is that you have multiple versions of python installed, and apache
is
picking up a different python version based on a different PATH environment
or some such.


This e-mail and any attachments are confidential and may also be privileged and/or copyright 
material of Intec Telecom Systems PLC (or its affiliated companies).  If you are not an 
intended or authorised recipient of this e-mail or have received it in error, please delete 
it immediately and notify the sender by e-mail.  In such a case, reading, reproducing, 
printing or further dissemination of this e-mail is strictly prohibited and may be unlawful. 
Intec Telecom Systems PLC. does not represent or warrant that an attachment hereto is free 
from computer viruses or other defects. The opinions expressed in this e-mail and any 
attachments may be those of the author and are not necessarily those of Intec Telecom 
Systems PLC. 

This footnote also confirms that this email message has been swept by
MIMEsweeper for the presence of computer viruses.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20030121/96466f65/attachment-0001.htm
From sandor.kopanyi at mailbox.hu  Tue Jan 21 11:41:49 2003
From: sandor.kopanyi at mailbox.hu (sandor.kopanyi@mailbox.hu)
Date: Fri Jan  9 21:53:21 2004
Subject: [mod_python] calla function from form and via link
Message-ID: <20030121104149.15286.qmail@web2.mailbox.hu>

Hi,

I have a function which fetches some things from a database; it has
2 parameters: req and an id. The req is used to extract username and
password for the database connection, the second is info needed for
fetch.

I call it from a FORM, which has an INPUT field, called id, req is
passed "by default". Everything goes fine.

My problem: I would like to use the same function, with the same
purpose, but in this not from a FORM. but from a dynamically generated
web-page
(http://...module.py/function?id=somethingdynamicallygenerated).
But in this case I - obviously - miss the req, which is "given" to me
only
when calling a function from a FORM.

Is there any nice trick to solve this problem?

I use publisher handler, on RedHat 7.3, apache 1.3.23, mod_python 2.76,
python 1.5.2 (yes, it's old stuff, but is OK by me for the time being :)

/Sandor

________________________________________________
http://mailbox.hu - M?r SMS ?rtes?t?ssel is!



From grisha at modpython.org  Tue Jan 21 13:15:03 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:53:21 2004
Subject: [mod_python] calla function from form and via link
In-Reply-To: <20030121104149.15286.qmail@web2.mailbox.hu>
Message-ID: <20030121131254.I66432-100000@eden.ispol.com>


On Tue, 21 Jan 2003 sandor.kopanyi@mailbox.hu wrote:

> (http://...module.py/function?id=somethingdynamicallygenerated).
> But in this case I - obviously - miss the req, which is "given" to me
> only
> when calling a function from a FORM.

The req is *always* passed for as long as your function has it as one of
the arguments, regardless of method (form or not). If you define function
as:

def function(req, id):

then req will passed to you by the Publisher.

Grisha


From Mongryong at sympatico.ca  Tue Jan 21 20:48:59 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 21:53:21 2004
Subject: [mod_python] Re: [4suite] 4Suite Reliance on ENVIRONMENT & global variables
In-Reply-To: <1043129964.1419.305.camel@refugeeMedia>
References: <704B83C4-2D00-11D7-8B43-000393CFDA9C@fourthought.com> 
	<1043129964.1419.305.camel@refugeeMedia>
Message-ID: <1043200140.14051.86.camel@refugeeMedia>

Ok, here's an update.  I've tested things out with a variety of
environment scenarios:

Computer - RedHat 8, PIII, 256mb, > 60Gb

Scenario#1 - Works fine
Apache httpd Server 1.3.27
Python 2.2.2
mod_python 2.7.8
4Suite 0.11.1
PyXML 0.6.6

Scenario#2 - Works fine
Apache httpd Server 2.0.44
Python 2.2.2
mod_python 3.0.2 (CVS)
4Suite 0.11.1
PyXML 0.6.6

Scenario#3 - Fails (encoding problem??)
Apache httpd Server 1.3.27
Python 2.2.2
mod_python 2.7.8
4Suite 0.12a CVS latest
PyXML 0.8.x

Scenario#4 - Fails (encoding problem??)
Apache httpd Server 2.0.44
Python 2.2.2
mod_python 3.0.2 (CVS)
4Suite 0.12a CVS latest
PyXML 0.8.x

Scenario#5 - Fails (encoding problem??)
Apache httpd Server 2.1.0 CVS latest
Python 2.2.2
mod_python 3.0.2 CVS latest
4Suite 0.12a CVS latest
PyXML 0.8.x

Scenario#5 - Fails (encoding problem??)
Apache httpd Server 2.1.0 CVS latest
Python 2.3a CVS latest
mod_python 3.0.2 (CVS)
4Suite 0.12a CVS latest
PyXML 0.8.x

Summary of combinations that produced no 'encoding' problem:
Apache 1.3.27 to 2.1 CVS latest
mod_python 3.0.2 CVS latest
Python 2.2.2  
4Suite 0.11.1 
PyXML 0.6.6

To me, the encoding problem appears to have something to do with 4Suite
0.12.x or PyXML 0.8.x or a combination of the two.  

It would be nice to be able to test if the encoding problem appears in
another 'embedded python' app or module.  This would help strengthen the
case against 4Suite/PyXml.  My guess is that the encoding problem is not
unique to mod_python.

On Tue, 2003-01-21 at 01:19, Mongryong wrote:
> Ok, I've modified my simple test script so that it can be easily started
> from a shell (python main.py) as well as working with mod_python.
> 
> Again, here's the url to my server where you can view the mod_python
> result: http://rezquest.cjb.net/bin/main
> 
> So, now the test outputs the XML source as just a string and as dom node
> from NonvalidatingReader.
> 
> You should clearly see the difference between the standalone and
> mod_python results.
> 
> On Tue, 2003-01-21 at 00:23, Michael Olson wrote:
> > 
> > > The strange thing is that if I directly output the XML source without
> > > doing any XSLT processing, the XML source appears correctly.  Somewhere
> > > along the line where the strings are being passed from the python
> > > libraries to the 4Suite libraries (by Py_ParseArgs..???), the strings
> > > are being 'miscommunicated'.
> > >
> > 
> > By "output the XML source" do you mean just print it out (or fetch it 
> > from the file system) ro do you mean parse it into DOM, and print it 
> > out?
> > 
> > If not the later, can you try that instead of XSLT to see if this works.
> > 
> > Thanks
> > Mike
> > 
> > > Now, it might be a Python2.2.2 issue since libxml2/libxslt from the
> > > gnome project are having similar problems as well.
> > >
> > > In 4Suite, do the apps embedd the python interpretor or do the apps
> > > start purely from a python environment?
> > >
> > > It might be good to check to see whether this problem still occurs 
> > > other
> > > 'python embedded' application (ie. uses Py_NewInterpretor from C). I
> > > forget, does the command-line version of python dynamically link to the
> > > python libraries?  If so, I wonder if the command-line version of 
> > > python
> > > is doing anything special or different when it links up and initializes
> > > the python libraries.
> > >
> > > I'm reposting this message on to the Python mailing list to see if
> > > anybody there can help give us a clue.
> > >
> > > P.S Has there been any changes in Python2.2.3+ that might possibly fix
> > > this problem?
> > >
> > > On Mon, 2003-01-20 at 22:28, Uche Ogbuji wrote:
> > >> On Mon, 2003-01-20 at 14:52, Mongryong wrote:
> > >>> Hi,
> > >>>
> > >>> I'm having trouble getting the latest 4Suite XML/XSLT tools to work 
> > >>> the
> > >>> way I want in mod_python and I know I'm not the first one to 
> > >>> experience
> > >>> "out-of-the-box" success.
> > >>>
> > >>> I've determined that it's an encoding issue.   Now, with a 
> > >>> stand-alone
> > >>> script or CGI script under Apache, 4XSLT works fine.  But under
> > >>> mod_python (which doesn't have access to ENVIRONMENT variables), 
> > >>> 4XSLT
> > >>> library decodes the XML source file in a total different encoding.  
> > >>> XSL
> > >>> templates (ie. <xsl:template name="blah">) are never executed because
> > >>> the XML tag is never recognized by the XSL processor.  Hence, you 
> > >>> get an
> > >>> empty output.
> > >>>
> > >>> I've check the default system encoding codec and it returns 'ascii' 
> > >>> (ie.
> > >>> sys.getdefaultencoding).  Now, it could be that the python library
> > >>> relies on some ENVIRONMENT variable for its configuration.
> > >>>
> > >>> Anybody have any ideas what 'parameters' might not be initialized
> > >>> properly under a non-CGI or non-shell environment such as mod_python?
> > >>> Or, is there a parameter that one can set to change the XML input
> > >>> decoding?
> > >>
> > >> I don't think there is any environment variable that could affect 
> > >> this.
> > >>
> > >> However, there have been a lot of fixes recently, including to some
> > >> endianness bugs.  Do you mind trying again with latest 4Suite CVS and
> > >> telling us if it helps?  Either wait till tomorrow's snapshot, or 
> > >> check
> > >> out current CVS HEAD directly
> > >>
> > >> http://4suite.org/docs/4SuiteCVS.xml
> > >>
> > >> If it doesn't help, I hope you'll be able to help us work with you to
> > >> find a solution for mod_python users.
> > >>
> > >> -- 
> > >> Uche Ogbuji                                    Fourthought, Inc.
> > >> http://uche.ogbuji.net    http://4Suite.org    http://fourthought.com
> > >> Python Generators + DOM - 
> > >> http://www.xml.com/pub/a/2003/01/08/py-xml.html
> > >> 4Suite Repository Features - 
> > >> https://www6.software.ibm.com/reg/devworks/dw-x4suite5-i/
> > >> XML class warfare - http://www.adtmag.com/article.asp?id=6965
> > >> MusicBrainz  metadata - 
> > >> http://www-106.ibm.com/developerworks/xml/library/x-think14.html
> > >>
> > >
> > > <main.py>
> > Mike Olson                                Principal Consultant
> > mike.olson@fourthought.com                +1 303 583 9900 x 102
> > Fourthought, Inc.                         http://Fourthought.com
> > PO Box 270590,                            http://4Suite.org
> > Louisville, CO 80027-5009, USA
> > XML strategy, XML tools, knowledge management
> > 
> > _______________________________________________
> > 4suite mailing list
> > 4suite@lists.fourthought.com
> > http://lists.fourthought.com/mailman/listinfo/4suite
> 
> ----
> 

> #!/usr/local/bin/python
> 
> import sys
> import locale
> 
> #The identity transform: duplicates the input to output
> TRANSFORM = """<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
> <xsl:template match="@*|node()">
>   <xsl:copy>
>     <xsl:apply-templates select="@*|node()"/>
>   </xsl:copy>
> </xsl:template>
> 
> </xsl:stylesheet>
> """
> 
> SOURCE = """<spam id="eggs">I don't like spam</spam>"""
> 
> #The processor class is the core of the XSLT API
> import Ft
> from Ft.Xml.Xslt import Processor
> from Ft.Xml import InputSource
> 
> from xml.dom import Node
> from Ft.Xml.Domlette import Print, PrettyPrint
> from Ft.Xml.Domlette import NonvalidatingReader
> 
> #from mod_python import apache
> 
> from StringIO import StringIO
> 
> def test(req):
>     # TEST 1
>     req.write ( "Here's the result of just printing the string SOURCE\n" )
>     req.write ( SOURCE )
>     req.write ( "\n\n" )
> 
>     # TEST 2
>     buf = StringIO()
>     transform = InputSource.DefaultFactory.fromString(TRANSFORM, "http://spam.com/identity.xslt")
>     source = InputSource.DefaultFactory.fromString(SOURCE, "http://spam.com/doc.xml")
>     dom = NonvalidatingReader.parse ( source )   
> 
>     PrettyPrint (dom, buf)
>     
>     req.write ( "Here's the result of printing from the SOURCE dom tree (Domlette)\n" )
>     req.write ( buf.getvalue() )
>     req.write ( "\n\n" )
> 
>     buf.close ()
> 
>     # TEST 3
>     req.write("Here's the result of the XSLT processing\n")
>     processor = Processor.Processor()
>     processor.appendStylesheet(transform)
>     result = processor.runNode(dom, "http://spam.com/doc.xml")
>     
>     req.write( result + "\n\n" )
> 
>     # LOCALE STUFF
>     req.write("Ft.DEFAULT_ENCODING = " + Ft.DEFAULT_ENCODING + "\n")
>     req.write("sys.getdefaultencoding = " + sys.getdefaultencoding() + "\n")
>     req.write("local.getdefaultlocale()[1] = " + locale.getdefaultlocale()[1] + "\n\n")
> 
> def handler(req):    
> 
>     req.content_type = "text/plain"   
>     test(req)
>     
>     return 0
> 
> 
> if __name__ == "__main__":
>     test(sys.stdout)



From connie at core3d.com  Wed Jan 22 02:24:56 2003
From: connie at core3d.com (Connie Baggs)
Date: Fri Jan  9 21:53:21 2004
Subject: [mod_python] [error] make_obcallback: could not import mod_python.apache
Message-ID: <20030122.2245669@mis.configured.host>

Hi Im trying to use pyWM (version 0.9984b)webmail in conjunction with 
apache (2.0.43) and mod_python (3.0.1). Ive installed everything fine and 
Apache works however when I try and get the mail the following error is 
logged in the apache error_log file:

[Wed Jan 22 08:24:19 2003] [notice] Apache/2.0.43 (Unix) mod_python/3.0.1 
Python/2.2.1 configured -- resuming normal operations
[Wed Jan 22 08:24:45 2003] [error] make_obcallback: could not import 
mod_python.apache.


The 2nd entry appeared when I tried to connect to open the index.html of 
pyWM.

Any ideas??


From gnb at itga.com.au  Wed Jan 22 14:38:14 2003
From: gnb at itga.com.au (Gregory Bond)
Date: Fri Jan  9 21:53:21 2004
Subject: [mod_python] Query about client server interaction 
In-Reply-To: Your message of Tue, 21 Jan 2003 09:08:16 -0000.
Message-ID: <200301220338.OAA04954@lightning.itga.com.au>

> I am just wondering if it is possible to do this with the publisher handler
> - as that is what I am using at present as I have several python modules and
> functions that I need to use?

This seems to work:

File ltest.py:

	import time
	from mod_python import apache

	def longtime(req):
	    req.content_type = "text/html"
	    req.write('''<html>
	    <head><title>Example Delay Code</title></head>
	    <body>
	    Please wait.  This could take a long time!!!!
	    <ul>
	    ''')
	    for i in range(20):
	        time.sleep(2)
	        req.write("<li> Still waiting.... %d\n" % i)
	    return '</ul>\nAll Done!\n</body></html>'

with a URL like .../ltest.py/longtime and a config like
	<Files ltest.py>
	        PythonHandler   mod_python.publisher
	</Files>

Again, this won't work if your long-running job (here represented by
time.sleep() calls) is not able to stop and do a 'req.write()' every so often!



From mike_verdone at shaw.ca  Tue Jan 21 20:56:29 2003
From: mike_verdone at shaw.ca (Mike Verdone)
Date: Fri Jan  9 21:53:21 2004
Subject: [mod_python] calla function from form and via link
In-Reply-To: <20030121104149.15286.qmail@web2.mailbox.hu>
References: <20030121104149.15286.qmail@web2.mailbox.hu>
Message-ID: <200301212056.29386.mike_verdone@shaw.ca>

On January 21, 2003 03:41 am, sandor.kopanyi@mailbox.hu wrote:
> I have a function which fetches some things from a database; it has
> 2 parameters: req and an id. The req is used to extract username and
> password for the database connection, the second is info needed for
> fetch.
>
> My problem: I would like to use the same function, with the same
> purpose, but in this not from a FORM. but from a dynamically generated
> web-page
> (http://...module.py/function?id=somethingdynamicallygenerated).
> But in this case I - obviously - miss the req, which is "given" to me
> only
> when calling a function from a FORM.

I'm not sure if I know what you mean., but req should always be given to you, 
even when you are accessing a page with a plain old GET request. So:

http://.../function?id=blah

should give you the request object, and same with

http://.../function

Basically, just put the whole link to the function in an <A> tag, and it will 
work same as a form submission.

I'm not sure how the database password got into the req in the first place. Is 
it supplied by the user at some point, or is it the same for every user? If 
the user supplies it on some other page, you'll have to use some session 
handling (google for "python service objects" for some info). If it's always 
the same, hard code it into a module somewhere.

Do I understand correctly?

Mike.


From sandor.kopanyi at mailbox.hu  Wed Jan 22 08:59:21 2003
From: sandor.kopanyi at mailbox.hu (sandor.kopanyi@mailbox.hu)
Date: Fri Jan  9 21:53:21 2004
Subject: [mod_python] calla function from form and via link
In-Reply-To: <200301212056.29386.mike_verdone@shaw.ca>
Message-ID: <20030122075921.22872.qmail@web2.mailbox.hu>

Hi Mike,

> http://.../function?id=blah
> 
> should give you the request object, and same with

Yes, it does. I had a typo in my code (param name).
Thanks for the hint.

> I'm not sure how the database password got into the req in the first
> place. Is 
> it supplied by the user at some point, or is it the same for every
user?

I extract the password from req, as explained in section 3.3 of
mod_python
2.7 docs
(http://www.modpython.org/live/mod_python-2.7.8/doc-html/tut-more-complicated.html):

pw = req.get_basic_auth_pw()
user = req.connection.user

If I return an apache.UNAUTHORIZED the browser will ask for username/pw.

/Sandor

________________________________________________
http://mailbox.hu - M?r SMS ?rtes?t?ssel is!



From io219 at attbi.com  Sun Jan 26 06:50:27 2003
From: io219 at attbi.com (io219@attbi.com)
Date: Fri Jan  9 21:53:22 2004
Subject: [mod_python] Apache 2.0.43 & Windows 2000
Message-ID: <5211277896.20030126065027@attbi.com>

Seems to be all sorts of problems installing in Win2k.
For me, Apache starts, but when I try the mptest.py test,
I get an "Internal Server Error" when running the test.

If I comment the following lines in the .htaccess the error
goes away and Apache outputs the source of mptest.py

#PythonHandler mptest
#PythonDebug On

Any ideas?


From thm at duke.edu  Sun Jan 26 17:22:49 2003
From: thm at duke.edu (Hunter Matthews)
Date: Fri Jan  9 21:53:22 2004
Subject: [mod_python] Upgrade to mod_python 3.0.0 causes some handlers
	not to run.
In-Reply-To: <1042340165.1840.16.camel@jade.biology.duke.edu>
References: <1042340165.1840.16.camel@jade.biology.duke.edu>
Message-ID: <1043619770.1597.57.camel@jade.biology.duke.edu>

On Sat, 2003-01-11 at 21:56, Hunter Matthews wrote:
> I have program (current) that successfully uses the following
> confirguration under apache 1.3.24 and mod_python 2.7.8 (redhat 7.2 or
> 7.3, basically) to have a TypeHandler, AccessHandler, and PythonHander
> run on some get requests.

This has been fixed. I'm mailing the list to let other mod_python users
know what we found.

> 
> If I take this same configuration to httpd 2.0.40 and mod_python 3.0.0
> (redhat 8.0) the python handler runs for the /XMLRPC requests, but
> neither the TypeHandler or the AccessHandler is running for the
> /XMLRPC/$RHN requests.

The problem turned out to be that if you did NOT specify the
"SetHandler" and used PythonModuleHandler in a configuration, mod_python
would not run the handlers you implemented.

The fix is, apparently, to both upgrade to mod_python 3.0.1, and to not
use PythonModuleHandler if you're not using SetHandler.

It looks like 3.0.1 will do the right thing with no SetHandler, IF you
specify all the handlers out that you want to use. PythonHandlerModule
is apparently still broken.

Here's the relevant part of our old configuration.

> <Location ~ "/XMLRPC$">
>     PythonPath "sys.path + ['/usr/share/current']"
>     SetHandler python-program
>     PythonHandler current_apache
> </Location>
> 
> <Location /XMLRPC/$RHN>
>     PythonPath "sys.path + ['/usr/share/current']"
>     PythonHandlerModule current_apache
> </Location>

And here's the one that a user reported success with when using
mod_python 3.0.1:

<Location ~ "/XMLRPC$">
    PythonPath "sys.path + ['/usr/share/current']"
    SetHandler python-program
    PythonHandler current_apache
</Location>

<Location /XMLRPC/$RHN>
    PythonPath "sys.path + ['/usr/share/current']"
    PythonTypeHandler current_apache
    PythonAccessHandler current_apache
</Location>

-- 
Hunter Matthews                          Unix / Network Administrator
Office: BioScience 145/244               Duke Univ. Biology Department
Key: F0F88438 / FFB5 34C0 B350 99A4 BB02  9779 A5DB 8B09 F0F8 8438
Never take candy from strangers. Especially on the internet.


From vfranceschetti at virgilio.it  Mon Jan 27 11:08:28 2003
From: vfranceschetti at virgilio.it (vfranceschetti@virgilio.it)
Date: Fri Jan  9 21:53:22 2004
Subject: [mod_python] (no subject)
Message-ID: <3E316B5B0000351A@ims1a.cp.tin.it>

Hi,
i have these line in my module:
     lun = int(req.headers_in["content-length"])
     testo = req.read(lun)
     dummy=string.find(testo,'A')
     f=open("C:/Programmi/Apache Group/Apache2/py/post.txt","w+")
     f.write("Test :"+str(lun)+"> "+str(dummy)+"--------------"+str(len(testo)))
     f.close()

and this is the result:

Test :41009> -1--------------0

variable length is 0 instead of 41009, and the value is null (string.find
always return -1 but the character A is in the Post body.

Some suggestions?

Thanks

Valentino 

 

 





From tim.parker at intec-telecom-systems.com  Wed Jan 22 09:54:10 2003
From: tim.parker at intec-telecom-systems.com (Tim Parker (UK))
Date: Fri Jan  9 21:53:22 2004
Subject: [mod_python] Query about client server interaction 
Message-ID: <7F124BC48D56D411812500D0B747251403B7B455@FILESERVER002>

Thanks for this - it seems to work except it takes a few seconds to display
the page - and when it does it draws it with several of the "Still waiting"
lines.  After this it then continues as I would expect it to but it seems to
wait a few seconds - well 5 times round the for loop before output the HTML
page to the Client.

Why is this, I would expect it to draw the web page almost immediately with
the Please wait This could take a long time!!!! Line and then draw in the
remaining lines as the script processes.  But it seems to want to cache the
first few lines before drawing them on the client.

Is this some server/client setting or something that needs to be specified
in the Headers so that there is no caching?

Thanks again
Tim.

-----Original Message-----
From: Gregory Bond [mailto:gnb@itga.com.au]
Sent: 22 January 2003 03:38
To: Tim Parker (UK)
Cc: 'mod_python@modpython.org'
Subject: Re: [mod_python] Query about client server interaction 

> I am just wondering if it is possible to do this with the publisher
handler
> - as that is what I am using at present as I have several python modules
and
> functions that I need to use?

This seems to work:

File ltest.py:

        import time
        from mod_python import apache

        def longtime(req):
            req.content_type = "text/html"
            req.write('''<html>
            <head><title>Example Delay Code</title></head>
            <body>
            Please wait.  This could take a long time!!!!
            <ul>
            ''')
            for i in range(20):
                time.sleep(2)
                req.write("<li> Still waiting.... %d\n" % i)
            return '</ul>\nAll Done!\n</body></html>'

with a URL like .../ltest.py/longtime and a config like
        <Files ltest.py>
                PythonHandler   mod_python.publisher
        </Files>

Again, this won't work if your long-running job (here represented by
time.sleep() calls) is not able to stop and do a 'req.write()' every so
often!


This e-mail and any attachments are confidential and may also be privileged and/or copyright 
material of Intec Telecom Systems PLC (or its affiliated companies).  If you are not an 
intended or authorised recipient of this e-mail or have received it in error, please delete 
it immediately and notify the sender by e-mail.  In such a case, reading, reproducing, 
printing or further dissemination of this e-mail is strictly prohibited and may be unlawful. 
Intec Telecom Systems PLC. does not represent or warrant that an attachment hereto is free 
from computer viruses or other defects. The opinions expressed in this e-mail and any 
attachments may be those of the author and are not necessarily those of Intec Telecom 
Systems PLC. 

This footnote also confirms that this email message has been swept by
MIMEsweeper for the presence of computer viruses.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20030122/3ee38cd6/attachment-0001.htm
From gnb at itga.com.au  Thu Jan 23 09:07:22 2003
From: gnb at itga.com.au (Gregory Bond)
Date: Fri Jan  9 21:53:22 2004
Subject: [mod_python] Query about client server interaction 
In-Reply-To: Your message of Wed, 22 Jan 2003 09:54:10 -0000.
Message-ID: <200301222207.JAA14877@lightning.itga.com.au>

> Is this some server/client setting or something that needs to be specified
> in the Headers so that there is no caching?

As far as I can see (and I have done a fair bit of tcp packet tracing on a 
similar problem) this is basically just the way the client works.  The server 
sends stuff as you expect, but the client delays rendering (or displaying the 
results of the render) for some internal reason.

These initial delays will be much longer if the initial bit of the page
contains any other resources (such as style sheets or images) or if the layout
is complex (especially tables).  And if the time between updates is too short
(under 1 second?) then the client seems to batch up the info and only render it
in chunks every 5-10 seconds.

The examples I sent earlier work 100% as you would expect for me for both IE5
and Mozilla 1.1, both on quite slow (P2-class) machines, but a similar example
I had with stylesheets and 1-second status updates was much less successful.



From Mongryong at sympatico.ca  Wed Jan 22 20:51:40 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 21:53:22 2004
Subject: [mod_python] Re: [4suite] 4Suite Reliance on ENVIRONMENT & global variables
In-Reply-To: <200301222107.h0ML7ss1095885@chilled.skew.org>
References: <200301222107.h0ML7ss1095885@chilled.skew.org>
Message-ID: <1043286700.1420.80.camel@refugeeMedia>

Hey Mike, you're a GENIUS!!!  

Below are the results from two tests I did.  The first test set 
USE_MINIDOM=0.  The second test set USE_MINIDOM=1 Here's an output from
my simple little test:

Using 4Suite 0.12a CVS latest

Test#1: set USE_MINIDOM=0

Here's the result of just printing the string SOURCE:
<spam id="eggs">I don't like spam</spam>

Here's the result of printing from the SOURCE dom tree created via the
NonvalidatingReader:
<?xml version="1.0" encoding="UTF-8"?>
<?????? ???="?????????????????????????????????????
????????????????">???????????????????? ????????????????????</??????>

Here's the result of printing from the SOURCE dom tree created via
PyExpat (from PyXML 0.8.2):
<?xml version="1.0" encoding="UTF-8"?>
<spam id="eggs">I don't like spam</spam>

Here's the result of the XSLT processing (simple copy of source XML):
<?xml version="1.0" encoding="UTF-8"?>
<?????? ???="?????????????????????????????????????
????????????????">???????????????????? ????????????????????</??????>

Ft.DEFAULT_ENCODING = utf 
Ft.Xml.Domlette.MINIDOM = 0 
sys.getdefaultencoding = ascii 
local.getdefaultlocale()[1] = utf 
*******************************************
Test#2: set USE_MINIDOM=1

Here's the result of just printing the string SOURCE:
<spam id="eggs">I don't like spam</spam>

Here's the result of printing from the SOURCE dom tree created via the
NonvalidatingReader:
<?xml version="1.0" encoding="UTF-8"?>
<spam id="eggs">I don't like spam</spam>

Here's the result of printing from the SOURCE dom tree create via
PyExpat (from PyXML 0.8.2)
<?xml version="1.0" encoding="UTF-8"?>
<spam id="eggs">I don't like spam</spam>

Here's the result of the XSLT processing (simple copy of source XML): 
<?xml version="1.0" encoding="UTF-8"?>
<spam id="eggs">I don't like spam</spam>

Ft.DEFAULT_ENCODING = utf 
Ft.Xml.Domlette.MINIDOM = 1 
sys.getdefaultencoding = ascii 
local.getdefaultlocale()[1] = utf 

It appears that the encoding problem has nothing to do with PyXML
libraries.

Again, the encoding problem only occurs in an embedded application like
mod_python.  

Does 4Suite set any other ENVIRONMENT variables during its execution?

According to the mod_python documentation, any changes to the OS
environment variables after mod_python has started will not be seen by
any scripts or libraries.  That is, if I change an environment variable
from my shell console or a script changes an environment variable during
Apache's life-time, the changes will not be seen.

If the 4Suite developers could hypothesis what's going, it'd be great. 

On Wed, 2003-01-22 at 16:07, Mike Brown wrote:
> Mongryong wrote:
> > Summary of combinations that produced no 'encoding' problem:
> > Apache 1.3.27 to 2.1 CVS latest
> > mod_python 3.0.2 CVS latest
> > Python 2.2.2  
> > 4Suite 0.11.1 
> > PyXML 0.6.6
> > 
> > To me, the encoding problem appears to have something to do with 4Suite
> > 0.12.x or PyXML 0.8.x or a combination of the two.  
> 
> Unfortunately this doesn't tell us much.
> 
> 0.12.0 is almost a complete rewrite of 4Suite from 0.11.1. 0.11.1 did not use
> cDomlette by default, so my guess is that if you were using 0.11.1 and set
> BETA_DOMLETTE to 1 (I think that's how it was done... could be wrong), you
> might see the same misbehavior.
> 
> In 0.12.0, see what happens if you set USE_MINIDOM to 1 first. It'll probably 
> work (but will be slow).
> 
> Another shot int he dark -
> 
> If PyXML isn't required for mod_python, can you see what happens if you don't
> have it installed? 0.12.0 should be OK without PyXML as long as you don't need
> validation.
> 
> Mike
> 
> -- 
>   Mike J. Brown   |  http://skew.org/~mike/resume/
>   Denver, CO, USA |  http://skew.org/xml/
> _______________________________________________
> 4suite mailing list
> 4suite@lists.fourthought.com
> http://lists.fourthought.com/mailman/listinfo/4suite




From Mongryong at sympatico.ca  Thu Jan 23 00:09:48 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 21:53:22 2004
Subject: [mod_python] Re: [4suite] 4Suite Reliance on ENVIRONMENT & global variables
In-Reply-To: <200301230214.h0N2E16R096773@chilled.skew.org>
References: <200301230214.h0N2E16R096773@chilled.skew.org>
Message-ID: <1043298588.1514.106.camel@refugeeMedia>

> How does mod_python collect 4xslt's output?

I've used string and streams (stringio) for both input and output.  
ie input -> InputSource.DefaultFactory.fromString & fromStream
ie output -> res = p.run(iSrc..), res = runNode(domNode...), and
runX(...outputStream=buf)

The resultant string or stringio.getvalue() is then fed back to
mod_python which then feeds it back to Apache to output.

There's no issues with printing raw strings and streams that haven't been processed by the 4Suite libraries.  

PyXML's PyExpat has no encoding issue. 

The encoding problem isn't a random thing as well - it occurs everytime
mod_python executes the script (with USE_MINIDOM=0).

> 
> -- 
>   Mike J. Brown   |  http://skew.org/~mike/resume/
>   Denver, CO, USA |  http://skew.org/xml/
> _______________________________________________
> 4suite mailing list
> 4suite@lists.fourthought.com
> http://lists.fourthought.com/mailman/listinfo/4suite



From Mongryong at sympatico.ca  Thu Jan 23 00:16:34 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 21:53:22 2004
Subject: [mod_python] Re: [4suite] 4Suite Reliance on ENVIRONMENT & global variables
In-Reply-To: <1043289525.12442.30.camel@hades>
References: <200301230214.h0N2E16R096773@chilled.skew.org> 
	<1043289525.12442.30.camel@hades>
Message-ID: <1043298995.1416.118.camel@refugeeMedia>

> 
> When a sub-interpreter is created, a new module dictionary is created
> which no longer includes a pointer to the 'encodings' module although
> internally Python may say it exists (via a global variable).  This is
> really a bug in Python.
> 
Good plausible theory.  Any idea on how to prove this or test this?

> Try adding an "import encodings" and/or "import codecs" to the
> mod_python module that uses 4Suite.  I kind of remember having to do
> something like that when we had a mod_snake handler for Apache.
> 
Nope, did not work.  I believe 4Suite imports these modules too.  Is
there another place where you imported these modules (ie. at mod_snake
startup?)






From Mongryong at sympatico.ca  Thu Jan 23 16:16:32 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 21:53:22 2004
Subject: [mod_python] Re: [4suite] 4Suite Reliance on ENVIRONMENT & global variables
In-Reply-To: <200301230640.h0N6el2U097430@chilled.skew.org>
References: <200301230640.h0N6el2U097430@chilled.skew.org>
Message-ID: <1043356593.902.10.camel@refugeeMedia>

> Jeremy's answers on this thread may be a couple steps ahead of me, here, but
> take a look at Ft/Xml/src/StreamWriter.c. It is supposed to be the equivalent
> of Ft/Xml/Lib/StreamWriter.py.
> 
> Is there an obvious endianness bug in the C version somewhere?
> Is the test around lines 279-294 producing unexpected results?
> 
The c and py code look similar.  If there was an endianness bug,
wouldn't it just swap characters around?  Well, I can't see any
endianness problems.

I just find it strange that a shell or cgi script doesn't have this
problem.  And why are there no problems with PyExpat or when minidom is
used?  What is different?  If there are answers to these questions, I
think it would help.


From Mongryong at sympatico.ca  Thu Jan 23 19:02:22 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 21:53:22 2004
Subject: [mod_python] Re: [4suite] 4Suite Reliance on ENVIRONMENT & global variables
In-Reply-To: <1043358331.1488.8566.camel@localhost.localdomain>
References: <200301230640.h0N6el2U097430@chilled.skew.org>
	<1043356593.902.10.camel@refugeeMedia> 
	<1043358331.1488.8566.camel@localhost.localdomain>
Message-ID: <1043366543.583.26.camel@refugeeMedia>

Trying mod_python myself is
> still on my to-do.
> 
> Anyway, next wild guess...  ;-)
> 
> Could it be a dynamic library clash between cDomlette's expat, pyexpat
> and Apache's expat?
Okay, I'm just throwing something at you guys:

Is the expat library loaded dynamically or compiled statically in
4Suite?

Now, I've only managed to find libexpat in my /usr/lib directory.  There
it exists as 'libexpat.so.0.3.0' (Aug 19 2002) - I believe this is what
comes with the RedHat Distribution.  I'm suspicious of the 0.3.0.  Is
there a nice way to find out which libexpat is being used?

Here are the expat versions required:
4Suite -> expat 1.95.5
Apache -> expat 1.95.1
PyXML 0.8.2 -> expat 1.95.5
I believe the above is correct.  

Here's my /etc/ld.so.conf file:
/usr/kerberos/lib
/usr/X11R6/lib
/usr/lib/qt-3.0.5/lib
/usr/lib/sane/
/usr/local/lib
/usr/local/lib/mysql

Was this helpful?


> 
> 
> > -- 
> > Uche Ogbuji                                    Fourthought, Inc.
> > http://uche.ogbuji.net    http://4Suite.org    http://fourthought.com
> > The open office file format  - http://www-106.ibm.com/developerworks/xml/library/x-think15/
> > Python Generators + DOM - http://www.xml.com/pub/a/2003/01/08/py-xml.html
> > 4Suite Repository Features - https://www6.software.ibm.com/reg/devworks/dw-x4suite5-i/
> > XML class warfare - http://www.adtmag.com/article.asp?id=6965
> 
> _______________________________________________
> 4suite mailing list
> 4suite@lists.fourthought.com
> http://lists.fourthought.com/mailman/listinfo/4suite



From Mongryong at sympatico.ca  Thu Jan 23 19:36:48 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 21:53:22 2004
Subject: [mod_python] Re: [4suite] 4Suite Reliance on ENVIRONMENT & global variables
In-Reply-To: <1043366543.583.26.camel@refugeeMedia>
References: <200301230640.h0N6el2U097430@chilled.skew.org>
	<1043356593.902.10.camel@refugeeMedia> 
	<1043358331.1488.8566.camel@localhost.localdomain> 
	<1043366543.583.26.camel@refugeeMedia>
Message-ID: <1043368609.2147.68.camel@refugeeMedia>

The libexpat version in my /usr/lib directory is 1.95.4.

Thanks Mike.

On Thu, 2003-01-23 at 19:02, Mongryong wrote:
> Trying mod_python myself is
> > still on my to-do.
> > 
> > Anyway, next wild guess...  ;-)
> > 
> > Could it be a dynamic library clash between cDomlette's expat, pyexpat
> > and Apache's expat?
> Okay, I'm just throwing something at you guys:
> 
> Is the expat library loaded dynamically or compiled statically in
> 4Suite?
> 
> Now, I've only managed to find libexpat in my /usr/lib directory.  There
> it exists as 'libexpat.so.0.3.0' (Aug 19 2002) - I believe this is what
> comes with the RedHat Distribution.  I'm suspicious of the 0.3.0.  Is
> there a nice way to find out which libexpat is being used?
> 
> Here are the expat versions required:
> 4Suite -> expat 1.95.5
> Apache -> expat 1.95.1
> PyXML 0.8.2 -> expat 1.95.5
> I believe the above is correct.  
> 
> Here's my /etc/ld.so.conf file:
> /usr/kerberos/lib
> /usr/X11R6/lib
> /usr/lib/qt-3.0.5/lib
> /usr/lib/sane/
> /usr/local/lib
> /usr/local/lib/mysql
> 
> Was this helpful?
> 
> 
> > 
> > 
> > > -- 
> > > Uche Ogbuji                                    Fourthought, Inc.
> > > http://uche.ogbuji.net    http://4Suite.org    http://fourthought.com
> > > The open office file format  - http://www-106.ibm.com/developerworks/xml/library/x-think15/
> > > Python Generators + DOM - http://www.xml.com/pub/a/2003/01/08/py-xml.html
> > > 4Suite Repository Features - https://www6.software.ibm.com/reg/devworks/dw-x4suite5-i/
> > > XML class warfare - http://www.adtmag.com/article.asp?id=6965
> > 
> > _______________________________________________
> > 4suite mailing list
> > 4suite@lists.fourthought.com
> > http://lists.fourthought.com/mailman/listinfo/4suite
> 
> 
> _______________________________________________
> 4suite mailing list
> 4suite@lists.fourthought.com
> http://lists.fourthought.com/mailman/listinfo/4suite



From Mongryong at sympatico.ca  Thu Jan 23 19:56:15 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 21:53:22 2004
Subject: [mod_python] Re: [4suite] 4Suite Reliance on ENVIRONMENT & global variables
In-Reply-To: <200301232240.h0NMeapw001171@chilled.skew.org>
References: <200301232240.h0NMeapw001171@chilled.skew.org>
Message-ID: <1043369775.578.83.camel@refugeeMedia>

> Your email client mangled the data a bit, so I can't diagnose it correctly, 
> but basically what is happening is that the Unicode string u'spam', or, for 
> clarity, u'\u0073\u0070\u0061\u006d', is being interpreted as 
> u'\u7300\u7000\u6000\u6d00'. When UTF-8 encoded, this becomes bytes:
>    e7 8c 80 e7 80 80 e6 80 80 e6 b4 80
> 
> ...which is not going to look very pleasant in an iso-8859-1 environment.
You're welcome to view the output from my server at:

http://refugeemedia.cjb.net/test/main?ver=0.12



From vfranceschetti at virgilio.it  Mon Jan 27 15:39:11 2003
From: vfranceschetti at virgilio.it (vfranceschetti@virgilio.it)
Date: Fri Jan  9 21:53:22 2004
Subject: [mod_python] request.read problem
Message-ID: <3E316B5B00004378@ims1a.cp.tin.it>

This is a repost, i've forgotten the subject!!!

Hi,
i have these line in my module:
     lun = int(req.headers_in["content-length"])
     testo = req.read(lun)
     dummy=string.find(testo,'A')
     f=open("C:/Programmi/Apache Group/Apache2/py/post.txt","w+")
     f.write("Test :"+str(lun)+"> "+str(dummy)+"--------------"+str(len(testo)))
     f.close()

and this is the result:

Test :41009> -1--------------0

variable length is 0 instead of 41009, and the value is null (string.find
always return -1 but the character A is in the Post body.

Some suggestions?

Thanks

Valentino 





From terrall at oclc.org  Wed Jan 29 14:21:39 2003
From: terrall at oclc.org (Terrall,Tom)
Date: Fri Jan  9 21:53:22 2004
Subject: [mod_python] Apache with mod_python won't start!
Message-ID: <E5431CF93E29F9478878F623E5B9CE9843053E@OA3-SERVER.oa.oclc.org>

I have modified httpd.conf for an attempt to run a test of
apache+mod_python. When httpd needs to read htttpd.conf this error results.

======>
[root@deimos init.d]# ./httpd start
Syntax error on line 234 of /usr/local/apache/conf/httpd.conf:
Cannot load /usr/lib/apache/mod_python.so into server:
/usr/lib/apache/mod_python.so: undefined symbol: ap_null_cleanup
=====>

Line 234 is : LoadModule python_module /usr/lib/apache/mod_python.so

 We are running python 2.2 and apache 2.0.40 and python 2.7.8-1 .

Additions to a working httpd.conf which cause the failure.

========>
"
"
Listen 8400
"
"
LoadModule python_module /usr/lib/apache/mod_python.so
"
"
        <Directory /usr/local/apache/htdocs/test>
            AddHandler python-program .py
            PythonHandler mptest
            AllowOverride FileInfo
            PythonDebug on
        </Directory>
"
"
NameVirtualHost xxx.xxx.xxx.xxx:8400
"
"
<VirtualHost xxx.xxx.xxx.xxx:8400>
   ServerName anaximenter.out.oclc.org
  DocumentRoot /usr/local/apache/htdocs/test
</VirtualHost>
"
"
========>

Thanks in advance.

Tom Terrall


From grisha at modpython.org  Wed Jan 29 14:50:28 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:53:22 2004
Subject: [mod_python] Apache with mod_python won't start!
In-Reply-To: <E5431CF93E29F9478878F623E5B9CE9843053E@OA3-SERVER.oa.oclc.org>
Message-ID: <20030129144928.W94180-100000@eden.ispol.com>

Mod_python 2.7.8 does not work with Apache 2.0. I suggest you bring all of
Python, mod_python and Apache to the latest released versions.

Grisha

On Wed, 29 Jan 2003, Terrall,Tom wrote:

> I have modified httpd.conf for an attempt to run a test of
> apache+mod_python. When httpd needs to read htttpd.conf this error results.
>
> ======>
> [root@deimos init.d]# ./httpd start
> Syntax error on line 234 of /usr/local/apache/conf/httpd.conf:
> Cannot load /usr/lib/apache/mod_python.so into server:
> /usr/lib/apache/mod_python.so: undefined symbol: ap_null_cleanup
> =====>
>
> Line 234 is : LoadModule python_module /usr/lib/apache/mod_python.so
>
>  We are running python 2.2 and apache 2.0.40 and python 2.7.8-1 .
>
> Additions to a working httpd.conf which cause the failure.
>
> ========>
> "
> "
> Listen 8400
> "
> "
> LoadModule python_module /usr/lib/apache/mod_python.so
> "
> "
>         <Directory /usr/local/apache/htdocs/test>
>             AddHandler python-program .py
>             PythonHandler mptest
>             AllowOverride FileInfo
>             PythonDebug on
>         </Directory>
> "
> "
> NameVirtualHost xxx.xxx.xxx.xxx:8400
> "
> "
> <VirtualHost xxx.xxx.xxx.xxx:8400>
>    ServerName anaximenter.out.oclc.org
>   DocumentRoot /usr/local/apache/htdocs/test
> </VirtualHost>
> "
> "
> ========>
>
> Thanks in advance.
>
> Tom Terrall
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From terrall at oclc.org  Fri Jan 31 13:41:29 2003
From: terrall at oclc.org (Terrall,Tom)
Date: Fri Jan  9 21:53:22 2004
Subject: [mod_python] Need GLIBC_2.3 for RH7.3
Message-ID: <E5431CF93E29F9478878F623E5B9CE98430546@OA3-SERVER.oa.oclc.org>

Our configuration is apache 2.0.40, python 2.2, mod_python 3.0.1 on RH7.3.

Any suggestions on where might locate libc.so.6 (GLIBC_2.3) in rpm form for
RH7.3? Cannot start apache configured with mod_python because our GLIBC is
2.2.45.  Extensive searching has not found it.

Is it possible to tell mod_python were to find libc.so.6 so that we can
maintain two different versions?

Thanks - Tom Terrall

From gmurali at cs.uchicago.edu  Fri Jan 31 14:20:54 2003
From: gmurali at cs.uchicago.edu (ganapathy murali krishnan)
Date: Fri Jan  9 21:53:22 2004
Subject: [mod_python] cannot import mod_python.apache error
Message-ID: <3E3ADAA6.2010707@cs.uchicago.edu>

I just installed Python-2.3a1 + apache 2.0.44 + mod_python 3.0.1.
I have one vhost (say vhost) in addition to the main one (say mainhost).
The vhost has a python program as the main handler (using SetHandler).
This setup works correctly without any problems on another machine
(Python 1.5+ apache 1.3 + mod_python something), so the problem is not 
in the handler code itself.

When I run the httpd binary, all is fine. The mainhost serves up html 
files without any problems. The vhost is supposed to serve up .py files.
When I go to "http://vhost" I get the following error.

----
[Fri Jan 31 13:53:00 2003] [error] make_obcallback: could not import 
mod_python.apache.

'import site' failed; use -v for traceback
ImportError: No module named mod_python.apache
----

The apache.py is in 
/opt/python/default/lib/python2.3/site-packages/mod_python/apache.py.

I tried many of the suggested workarounds, I couldn't get any of them
to work. The content of my httpd.conf inside the <VirtualHost> and 
</VirtualHost> is enclosed below.

------------
   SetHandler python-program
   PythonDebug on
   # All handlers are stored in a different directory, for security
   PythonPath "sys.path+['/stage/w3serv/vhost.cs.uchicago.edu']"

   # This module handles reloading modules on demand
   PythonInitHandler handlers.init

   # Fire up the first Python handler
   PythonTransHandler handlers.translate

   # Logging configuration
   # PythonOption Log off
   PythonOption Log /stage/w3serv/vhost/logs/debug.log
   # Tell the Python site to ignore these paths, 

   PythonOption DontHandle /icons:/images:/~:/i/:/files/:/pipermail 

   # Tell the Python handler to ignore these extensions 

   PythonOption DontHandleExt html:htm:php:php3:phps:php4:cgi 

 

   # Then tell Apache how to handle them. 

   Alias /icons /stage/w3serv/common/docs/icons 

   Alias /images /stage/w3serv/common/docs/images 

   UserDir disable 

-----

Any help would be appreciated.

- Murali


From thm at duke.edu  Fri Jan 31 15:29:29 2003
From: thm at duke.edu (Hunter Matthews)
Date: Fri Jan  9 21:53:22 2004
Subject: [mod_python] Need GLIBC_2.3 for RH7.3
In-Reply-To: <E5431CF93E29F9478878F623E5B9CE98430546@OA3-SERVER.oa.oclc.org>
References: <E5431CF93E29F9478878F623E5B9CE98430546@OA3-SERVER.oa.oclc.org>
Message-ID: <1044044970.1873.43.camel@jade.biology.duke.edu>

The easiest way would be to download apache-devel, python2-devel (or
whatever you used to get python 2.2 on rh 7.3) and then simply rebuild
the mod_python source rpm. It should be clean.

On Fri, 2003-01-31 at 13:41, Terrall,Tom wrote:
> 
> Our configuration is apache 2.0.40, python 2.2, mod_python 3.0.1 on RH7.3.
> 
> Any suggestions on where might locate libc.so.6 (GLIBC_2.3) in rpm form for
> RH7.3? Cannot start apache configured with mod_python because our GLIBC is
> 2.2.45.  Extensive searching has not found it.
> 
> Is it possible to tell mod_python were to find libc.so.6 so that we can
> maintain two different versions?
> 
> Thanks - Tom Terrall

-- 
Hunter Matthews                          Unix / Network Administrator
Office: BioScience 145/244               Duke Univ. Biology Department
Key: F0F88438 / FFB5 34C0 B350 99A4 BB02  9779 A5DB 8B09 F0F8 8438
Never take candy from strangers. Especially on the internet.


From gmurali at cs.uchicago.edu  Fri Jan 31 16:37:40 2003
From: gmurali at cs.uchicago.edu (ganapathy murali krishnan)
Date: Fri Jan  9 21:53:22 2004
Subject: [mod_python] cannot import mod_python.apache error
References: <3E3ADAA6.2010707@cs.uchicago.edu> <1044049878.13789.42.camel@refugeeMedia>
Message-ID: <3E3AFAB4.8070205@cs.uchicago.edu>

The python library directories are readable and executable by "all".
More curiously, I created a mptest.py as suggested by the mod_python 
test, and it gave me the same error.

I then proceeded to remove the "from mod_python import apache" statement 
from mptest.py, figuring that in that sample code, all it wanted was the 
value "apache.OK". Removing the import statement and replacing 
"apache.OK" with 0 (its value as read from the actual apache.py file),
did not help! It still gave me the same error. So it looks as if 
mod_python.so is trying to import mod_python.apache, and it is triggered
every time I try to serve up a .py file.

I also confirmed that sys.path has the lib/python-2.3/site-packages 
(running python from command line).

I will try to see if strace can give me some information.

- Murali

Mongryong wrote:
> Have you checked out the FAQ section?
> Every newbie runs into this problem.  It's most likely because Apache
> does not  have permission to access python's lib directory.
> 
> Try starting Apache with root access if you can.  Check, the "user"
> paremeter in httpd.conf.  Make sure the "user" is somebody who can
> access python's lib directory.


From gmurali at cs.uchicago.edu  Fri Jan 31 17:15:50 2003
From: gmurali at cs.uchicago.edu (ganapathy murali krishnan)
Date: Fri Jan  9 21:53:22 2004
Subject: [mod_python] cannot import mod_python.apache error
References: <3E3ADAA6.2010707@cs.uchicago.edu>	<1044049878.13789.42.camel@refugeeMedia>  <3E3AFAB4.8070205@cs.uchicago.edu> <1044053589.1599.59.camel@refugeeMedia>
Message-ID: <3E3B03A6.60009@cs.uchicago.edu>

I tried an

strace HTTPDBINARY -d SERVERROOT -f conf/httpd.conf -X 2>/tmp/errlog

and then when I grep the output for site-packages, I dont see any 
site-packages/mod_python at all. All I see, is

-----grep 'site-packages' /tmp/errlog --------
stat64("/opt/python/default/lib/python2.3/site-packages", 
{st_mode=S_IFDIR|0755, st_size=4096, ...}) = 0
open("/opt/python/default/lib/python2.3/site-packages", 
O_RDONLY|O_NONBLOCK|O_LARGEFILE|O_DIRECTORY) = 9
stat64("/opt/python/default/lib/python2.3/site-packages", 
{st_mode=S_IFDIR|0755, st_size=4096, ...}) = 0
stat64("/opt/python/default/lib/python2.3/site-packages/sitecustomize", 
0xbfffe15c) = -1 ENOENT (No such file or directory)
open("/opt/python/default/lib/python2.3/site-packages/sitecustomize.so", 
O_RDONLY|O_LARGEFILE) = -1 ENOENT (No such file or directory)
open("/opt/python/default/lib/python2.3/site-packages/sitecustomizemodule.so", 
O_RDONLY|O_LARGEFILE) = -1 ENOENT (No such file or directory)
open("/opt/python/default/lib/python2.3/site-packages/sitecustomize.py", 
O_RDONLY|O_LARGEFILE) = -1 ENOENT (No such file or directory)
open("/opt/python/default/lib/python2.3/site-packages/sitecustomize.pyc", 
O_RDONLY|O_LARGEFILE) = -1 ENOENT (No such file or directory)
------------------------------------------------

and greping for mod_python gives
----------------------
open("/opt/apache/default/modules/mod_python.so", O_RDONLY) = 4
open("/opt/apache/default/modules/mod_python.so", O_RDONLY) = 5
write(2, "No module named mod_python.apach"..., 33) = 33
----------------------

finally 'grep "apache[^/-]" /tmp/errlog' gives
--------------
open("./php-apache2filter.ini", O_RDONLY) = -1 ENOENT (No such file or 
directory)
open("/opt/php/php-4.3.0/lib/php-apache2filter.ini", O_RDONLY) = -1 
ENOENT (No such file or directory)
read(8, "GET /apache_pb.gif HTTP/1.1\r\nHos"..., 8000) = 477
stat64("/stage/w3serv/vhost.cs.uchicago.edu/docs/apache_pb.gif", 
0xbffff81c) = -1 ENOENT (No such file or directory)
lstat64("/stage/w3serv/vhost.cs.uchicago.edu/docs/apache_pb.gif", 
0xbffff7ec) = -1 ENOENT (No such file or directory)
----------------

The [^/-] is to remove "apache/" and "apache-2.0.44".

It looks as if mod_python is not even trying to load the module?!

- Murali


From vmanera at manord.com  Thu Jan  2 11:09:59 2003
From: vmanera at manord.com (Manera, Villiam)
Date: Fri Jan  9 21:59:49 2004
Subject: I: [mod_python] problem with file download in mod-python 3.0.1
Message-ID: <52DC70C1C1575C418CB033523A29CF140E05AF@exchange2000.manord.com>

Da: Manera, Villiam 
Inviato: gioved? 2 gennaio 2003 11.08
A: 'Gregory (Grisha) Trubetskoy'
Oggetto: R: [mod_python] problem with file download in mod-python 3.0.1


The problem is in python 2.2, Christopher Sean Hilton [chris@vindaloo.com]
wrote:

His problem is that python 2.2 does not include the __methods__ attribute 
for classes but the publisher.py code which actually handles the file inload

depends on it. If he downgrades from python 2.2 to python 2.1 he'll have the

__methods__ attribute of the file class. Someone needs to address this in 
the mod_python code however:

        for m in field.file.__methods__:
            self.__dict__[m] = getattr(field.file, m)

        self.headers = field.headers
        self.filename = field.filename

doesn't work in python 2.2 because __methods__ doesn't exist. The code 
appears to be trying to make local copies of all of the methods in the 
object that gets passed to the user. I had this problem in Unix (FreeBSD) 
two weeks ago and downgrading my python from 2.2 to 2.1 solved it. A google 
search on python, __methods__, 2.1 and 2.2 will yield more information.

Chris

after this John D. Garberson [john.garberson@nexos.com] wrote:
Having to downgrade seems a bit extreme [;-)

I don't know much about the publisher.py module, never having used it.
But if you do this import:

------------------------------------------------------------------------

from types import BuiltinMethodType

------------------------------------------------------------------------

then this function:

------------------------------------------------------------------------

def sim_methods(obj):
    return filter(lambda s, t=obj:
           type(getattr(t, s)) == BuiltinMethodType,
                                             dir(obj))

--------------------------------------------------------------------------

works under both 2.0 and 2.2.1 (I don't have a 2.1 any more) and delivers
the list of methods that it seems you want, looking at the publisher.py
source.  If you're not a fan of the functional programming approach, then
a list comprehension:

-----------------------------------------------------------------------

def sim_methods(obj):
    return [m for m in dir(obj)
                   if type(getattr(obj, m)) == BuiltinMethodType]

-----------------------------------------------------------------------

works just as well.

You could just replace the 'for m in field.file.__methods__:'

with

'for m in sim_methods(field.file):'

Hope this helps.

John
==============================================================
This work fine and I don't investigate any more from more elegant solution
I'm not so good in python!!

Villiam M.
-----Messaggio originale-----
Da: Gregory (Grisha) Trubetskoy [mailto:grisha@modpython.org]
Inviato: venerd? 20 dicembre 2002 22.35
A: Manera, Villiam
Cc: Mod_python@modpython.org
Oggetto: Re: [mod_python] problem with file download in mod-python 3.0.1



I must be missing something obvious, but without testing it and just by
looking at the code, I'm not sure I understand what the benefit is of
filtering out BuiltinMethodType, as opposed to just using straight
dir(obj).

The above might be a moot point since just as Brian Hawthorne suggested
I'm not sure why we don't need the File class at all and am in the process
of trying to fish out any memories from my tired brain about how it came
about in the fist place....

Grisha

On Thu, 12 Dec 2002, Manera, Villiam wrote:

> I'm testing mod-python 3.0.1 with apache 2.0.43 and python 2.2.2
>
> I've founded a older problem in file download (from python 2.1 to 2.2)
>
> the workaround is still the same:
>
> in publisher.py:
>
>  class File:
>      """ Like a file, but also has headers and filename
>      """
>      def __init__(self, field):
>          # steal all the file-like methods
>          for m in dir(field.file):
> 		 self.__dict__[m] = getattr(field.file, m)
>
>          self.headers = field.headers
>          self.filename = field.filename
> ======================workaround
> ==============================================
>  class File:
>      """ Like a file, but also has headers and filename
>      """
>      def __init__(self, field):
>          # steal all the file-like methods
>          #for m in dir(field.file):    #dont' work
>          for m in self.sim_methods(field.file):
>              self.__dict__[m] = getattr(field.file, m)
>
>          self.headers = field.headers
>          self.filename = field.filename
>
> 	#new--------
>      def sim_methods(self,obj):
>          from types import BuiltinMethodType
>          return filter(lambda s, t=obj:
>             type(getattr(t, s)) == BuiltinMethodType, dir(obj))
>
>
> I hope it will be put in place
>
> regards
>
> Villiam Manera
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>



_______________________________________________
Mod_python mailing list
Mod_python@modpython.org
http://www.modpython.org/mailman/listinfo/mod_python


From Markus.Burrer at embedit.de  Thu Jan  2 17:24:02 2003
From: Markus.Burrer at embedit.de (Markus Burrer)
Date: Fri Jan  9 21:59:49 2004
Subject: [mod_python] Installing Python for Apache
Message-ID: <3E1467A2.2020603@embedit.de>

Hi,
i try to install mod_python, but when i add LoadModule to the http.conf 
i get the error message, that Apache could not found the module, but the 
path and the filename are ok and the file is in the modules dir.
I'm using Apache 2.0.43, Python 2.2.2 and python2.2.2-apache2.0.43.zip

Any idea?

Thx for any help and a happy new year

Markus


From wweng at kencast.com  Thu Jan  2 12:10:08 2003
From: wweng at kencast.com (Wei Weng)
Date: Fri Jan  9 21:59:49 2004
Subject: [mod_python] How to build mod_python on Windows NT?
Message-ID: <3E147270.6010409@kencast.com>

I am using Windows NT, Apache2, VC++ 5.0.

Couldn't find any documentation on the procedures in the source zip file 
and googling didn't help much either.

Thanks



From dylanvaughn at yahoo.com  Thu Jan  2 09:54:55 2003
From: dylanvaughn at yahoo.com (Dylan Vaughn)
Date: Fri Jan  9 21:59:50 2004
Subject: [mod_python] linking installation problem
Message-ID: <20030102175455.64670.qmail@web40708.mail.yahoo.com>

Hello all, 

I'm trying to install mod_python and am running into
some errors - I'm running Red Hat Linux 7.3 and I've
already installed:

python 2.2.2 (from source, installed in
/usr/local/bin)
apache 2.0.43 (from source, installed in
/usr/local/apache2)

This is what I'm telling configure:

./configure \
--with-apxs=/usr/local/apache2/bin/apxs \
--with-python=/usr/local/bin/python2.2

which works fine, but when I do make I get at the end:

...lots of other stuff...:
/usr/local/apache2/build/libtool --silent --mode=link
gcc -o mod_python.la
-I/usr/local/src/mod_python-3.0.1/src/include
-I/usr/local/apache2/include
-I/usr/local/include/python2.2  -rpath
/usr/local/apache2/modules -module -avoid-version 
hlistobject.lo hlist.lo filterobject.lo connobject.lo
serverobject.lo util.lo tableobject.lo
requestobject.lo _apachemodule.lo mod_python.lo
-L/usr/local/lib/python2.2/config -Xlinker
-export-dynamic -lm -lpython2.2 -ldl -lpthread -lutil
-lm

*** Warning: This library needs some functionality
provided by -lpython2.2.
*** I have the capability to make that library
automatically link in when
*** you link to this library.  But I can only do this
if you have a
*** shared version of the library, which you do not
appear to have.

*** Warning: libtool could not satisfy all declared
inter-library
*** dependencies of module mod_python.  Therefore,
libtool will create
*** a static module, that should work as long as the
dlopening
*** application is linked with the -dlopen flag.

Now su and make install
  (or, if you only want to perform a partial install,
   you can use make install_dso and make
install_py_lib)

make[1]: Leaving directory
`/usr/local/src/mod_python-3.0.1/src'

and when I try make install I get:

...lots of other stuff...:
/usr/local/apache2/build/libtool --silent
--mode=compile gcc   -DAP_HAVE_DESIGNATED_INITIALIZER
-DLINUX=2 -D_REENTRANT -D_XOPEN_SOURCE=500
-D_BSD_SOURCE -D_SVID_SOURCE -D_GNU_SOURCE -g -O2
-pthread -I/usr/local/apache2/include
-I/usr/local/src/mod_python-3.0.1/src/include
-I/usr/local/apache2/include
-I/usr/local/include/python2.2  -c -o hlistobject.lo
hlistobject.c && touch hlistobject.slo
/usr/local/apache2/build/libtool --silent --mode=link
gcc -o mod_python.la
-I/usr/local/src/mod_python-3.0.1/src/include
-I/usr/local/apache2/include
-I/usr/local/include/python2.2  -rpath
/usr/local/apache2/modules -module -avoid-version 
hlistobject.lo hlist.lo filterobject.lo connobject.lo
serverobject.lo util.lo tableobject.lo
requestobject.lo _apachemodule.lo mod_python.lo
-L/usr/local/lib/python2.2/config -Xlinker
-export-dynamic -lm -lpython2.2 -ldl -lpthread -lutil
-lm

*** Warning: This library needs some functionality
provided by -lpython2.2.
*** I have the capability to make that library
automatically link in when
*** you link to this library.  But I can only do this
if you have a
*** shared version of the library, which you do not
appear to have.

*** Warning: libtool could not satisfy all declared
inter-library
*** dependencies of module mod_python.  Therefore,
libtool will create
*** a static module, that should work as long as the
dlopening
*** application is linked with the -dlopen flag.

Now su and make install
  (or, if you only want to perform a partial install,
   you can use make install_dso and make
install_py_lib)

make[2]: Leaving directory
`/usr/local/src/mod_python-3.0.1/src'

Performing DSO installation.

/usr/bin/install -c src/mod_python.so
/usr/local/apache2/modules
/usr/bin/install: cannot stat `src/mod_python.so': No
such file or directory
make[1]: *** [install_dso] Error 1
make[1]: Leaving directory
`/usr/local/src/mod_python-3.0.1'
make: *** [install] Error 2
[root@dana mod_python-3.0.1]# 

I googled the errors and didn't get anywhere. 

Any ideas?

Thanks in advance,

Dylan


__________________________________________________
Do you Yahoo!?
Yahoo! Mail Plus - Powerful. Affordable. Sign up now.
http://mailplus.yahoo.com

From grisha at modpython.org  Thu Jan  2 14:02:54 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:59:50 2004
Subject: [mod_python] linking installation problem
In-Reply-To: <20030102175455.64670.qmail@web40708.mail.yahoo.com>
Message-ID: <20030102140142.N57575-100000@eden.ispol.com>

I think this is the same libtool problem that was reported earlier on this
list. Try rebuilding your apache, but run ./buildconf before running
./configure.

Grisha

On Thu, 2 Jan 2003, Dylan Vaughn wrote:

>
> Hello all,
>
> I'm trying to install mod_python and am running into
> some errors - I'm running Red Hat Linux 7.3 and I've
> already installed:
>
> python 2.2.2 (from source, installed in
> /usr/local/bin)
> apache 2.0.43 (from source, installed in
> /usr/local/apache2)
>
> This is what I'm telling configure:
>
> ./configure \
> --with-apxs=/usr/local/apache2/bin/apxs \
> --with-python=/usr/local/bin/python2.2
>
> which works fine, but when I do make I get at the end:
>
> ...lots of other stuff...:
> /usr/local/apache2/build/libtool --silent --mode=link
> gcc -o mod_python.la
> -I/usr/local/src/mod_python-3.0.1/src/include
> -I/usr/local/apache2/include
> -I/usr/local/include/python2.2  -rpath
> /usr/local/apache2/modules -module -avoid-version
> hlistobject.lo hlist.lo filterobject.lo connobject.lo
> serverobject.lo util.lo tableobject.lo
> requestobject.lo _apachemodule.lo mod_python.lo
> -L/usr/local/lib/python2.2/config -Xlinker
> -export-dynamic -lm -lpython2.2 -ldl -lpthread -lutil
> -lm
>
> *** Warning: This library needs some functionality
> provided by -lpython2.2.
> *** I have the capability to make that library
> automatically link in when
> *** you link to this library.  But I can only do this
> if you have a
> *** shared version of the library, which you do not
> appear to have.
>
> *** Warning: libtool could not satisfy all declared
> inter-library
> *** dependencies of module mod_python.  Therefore,
> libtool will create
> *** a static module, that should work as long as the
> dlopening
> *** application is linked with the -dlopen flag.
>
> Now su and make install
>   (or, if you only want to perform a partial install,
>    you can use make install_dso and make
> install_py_lib)
>
> make[1]: Leaving directory
> `/usr/local/src/mod_python-3.0.1/src'
>
> and when I try make install I get:
>
> ...lots of other stuff...:
> /usr/local/apache2/build/libtool --silent
> --mode=compile gcc   -DAP_HAVE_DESIGNATED_INITIALIZER
> -DLINUX=2 -D_REENTRANT -D_XOPEN_SOURCE=500
> -D_BSD_SOURCE -D_SVID_SOURCE -D_GNU_SOURCE -g -O2
> -pthread -I/usr/local/apache2/include
> -I/usr/local/src/mod_python-3.0.1/src/include
> -I/usr/local/apache2/include
> -I/usr/local/include/python2.2  -c -o hlistobject.lo
> hlistobject.c && touch hlistobject.slo
> /usr/local/apache2/build/libtool --silent --mode=link
> gcc -o mod_python.la
> -I/usr/local/src/mod_python-3.0.1/src/include
> -I/usr/local/apache2/include
> -I/usr/local/include/python2.2  -rpath
> /usr/local/apache2/modules -module -avoid-version
> hlistobject.lo hlist.lo filterobject.lo connobject.lo
> serverobject.lo util.lo tableobject.lo
> requestobject.lo _apachemodule.lo mod_python.lo
> -L/usr/local/lib/python2.2/config -Xlinker
> -export-dynamic -lm -lpython2.2 -ldl -lpthread -lutil
> -lm
>
> *** Warning: This library needs some functionality
> provided by -lpython2.2.
> *** I have the capability to make that library
> automatically link in when
> *** you link to this library.  But I can only do this
> if you have a
> *** shared version of the library, which you do not
> appear to have.
>
> *** Warning: libtool could not satisfy all declared
> inter-library
> *** dependencies of module mod_python.  Therefore,
> libtool will create
> *** a static module, that should work as long as the
> dlopening
> *** application is linked with the -dlopen flag.
>
> Now su and make install
>   (or, if you only want to perform a partial install,
>    you can use make install_dso and make
> install_py_lib)
>
> make[2]: Leaving directory
> `/usr/local/src/mod_python-3.0.1/src'
>
> Performing DSO installation.
>
> /usr/bin/install -c src/mod_python.so
> /usr/local/apache2/modules
> /usr/bin/install: cannot stat `src/mod_python.so': No
> such file or directory
> make[1]: *** [install_dso] Error 1
> make[1]: Leaving directory
> `/usr/local/src/mod_python-3.0.1'
> make: *** [install] Error 2
> [root@dana mod_python-3.0.1]#
>
> I googled the errors and didn't get anywhere.
>
> Any ideas?
>
> Thanks in advance,
>
> Dylan
>
>
> __________________________________________________
> Do you Yahoo!?
> Yahoo! Mail Plus - Powerful. Affordable. Sign up now.
> http://mailplus.yahoo.com
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From dylanvaughn at yahoo.com  Thu Jan  2 12:02:16 2003
From: dylanvaughn at yahoo.com (Dylan Vaughn)
Date: Fri Jan  9 21:59:50 2004
Subject: [mod_python] linking installation problem
In-Reply-To: <20030102140142.N57575-100000@eden.ispol.com>
Message-ID: <20030102200216.76213.qmail@web40702.mail.yahoo.com>

hey there, 

thanks for pointing out the earlier traffic - 

doing ./buildconf before ./configure gave me a
different linking error when rebuilding apache, but
copying over httpd-2.0.43/srclib/apr/libtool with
/usr/local/bin/libtool (suggested in the earlier
thread) and then rebuilding apache and mod_python did
fix the problem. 

thanks for your help! 

dylan



--- "Gregory (Grisha) Trubetskoy"
<grisha@modpython.org> wrote:
> 
> I think this is the same libtool problem that was
> reported earlier on this
> list. Try rebuilding your apache, but run
> ./buildconf before running
> ./configure.
> 
> Grisha
> 
> On Thu, 2 Jan 2003, Dylan Vaughn wrote:
> 
> >
> > Hello all,
> >
> > I'm trying to install mod_python and am running
> into
> > some errors - I'm running Red Hat Linux 7.3 and
> I've
> > already installed:
> >
> > python 2.2.2 (from source, installed in
> > /usr/local/bin)
> > apache 2.0.43 (from source, installed in
> > /usr/local/apache2)
> >
> > This is what I'm telling configure:
> >
> > ./configure \
> > --with-apxs=/usr/local/apache2/bin/apxs \
> > --with-python=/usr/local/bin/python2.2
> >
> > which works fine, but when I do make I get at the
> end:
> >
> > ...lots of other stuff...:
> > /usr/local/apache2/build/libtool --silent
> --mode=link
> > gcc -o mod_python.la
> > -I/usr/local/src/mod_python-3.0.1/src/include
> > -I/usr/local/apache2/include
> > -I/usr/local/include/python2.2  -rpath
> > /usr/local/apache2/modules -module -avoid-version
> > hlistobject.lo hlist.lo filterobject.lo
> connobject.lo
> > serverobject.lo util.lo tableobject.lo
> > requestobject.lo _apachemodule.lo mod_python.lo
> > -L/usr/local/lib/python2.2/config -Xlinker
> > -export-dynamic -lm -lpython2.2 -ldl -lpthread
> -lutil
> > -lm
> >
> > *** Warning: This library needs some functionality
> > provided by -lpython2.2.
> > *** I have the capability to make that library
> > automatically link in when
> > *** you link to this library.  But I can only do
> this
> > if you have a
> > *** shared version of the library, which you do
> not
> > appear to have.
> >
> > *** Warning: libtool could not satisfy all
> declared
> > inter-library
> > *** dependencies of module mod_python.  Therefore,
> > libtool will create
> > *** a static module, that should work as long as
> the
> > dlopening
> > *** application is linked with the -dlopen flag.
> >
> > Now su and make install
> >   (or, if you only want to perform a partial
> install,
> >    you can use make install_dso and make
> > install_py_lib)
> >
> > make[1]: Leaving directory
> > `/usr/local/src/mod_python-3.0.1/src'
> >
> > and when I try make install I get:
> >
> > ...lots of other stuff...:
> > /usr/local/apache2/build/libtool --silent
> > --mode=compile gcc  
> -DAP_HAVE_DESIGNATED_INITIALIZER
> > -DLINUX=2 -D_REENTRANT -D_XOPEN_SOURCE=500
> > -D_BSD_SOURCE -D_SVID_SOURCE -D_GNU_SOURCE -g -O2
> > -pthread -I/usr/local/apache2/include
> > -I/usr/local/src/mod_python-3.0.1/src/include
> > -I/usr/local/apache2/include
> > -I/usr/local/include/python2.2  -c -o
> hlistobject.lo
> > hlistobject.c && touch hlistobject.slo
> > /usr/local/apache2/build/libtool --silent
> --mode=link
> > gcc -o mod_python.la
> > -I/usr/local/src/mod_python-3.0.1/src/include
> > -I/usr/local/apache2/include
> > -I/usr/local/include/python2.2  -rpath
> > /usr/local/apache2/modules -module -avoid-version
> > hlistobject.lo hlist.lo filterobject.lo
> connobject.lo
> > serverobject.lo util.lo tableobject.lo
> > requestobject.lo _apachemodule.lo mod_python.lo
> > -L/usr/local/lib/python2.2/config -Xlinker
> > -export-dynamic -lm -lpython2.2 -ldl -lpthread
> -lutil
> > -lm
> >
> > *** Warning: This library needs some functionality
> > provided by -lpython2.2.
> > *** I have the capability to make that library
> > automatically link in when
> > *** you link to this library.  But I can only do
> this
> > if you have a
> > *** shared version of the library, which you do
> not
> > appear to have.
> >
> > *** Warning: libtool could not satisfy all
> declared
> > inter-library
> > *** dependencies of module mod_python.  Therefore,
> > libtool will create
> > *** a static module, that should work as long as
> the
> > dlopening
> > *** application is linked with the -dlopen flag.
> >
> > Now su and make install
> >   (or, if you only want to perform a partial
> install,
> >    you can use make install_dso and make
> > install_py_lib)
> >
> > make[2]: Leaving directory
> > `/usr/local/src/mod_python-3.0.1/src'
> >
> > Performing DSO installation.
> >
> > /usr/bin/install -c src/mod_python.so
> > /usr/local/apache2/modules
> > /usr/bin/install: cannot stat `src/mod_python.so':
> No
> > such file or directory
> > make[1]: *** [install_dso] Error 1
> > make[1]: Leaving directory
> > `/usr/local/src/mod_python-3.0.1'
> > make: *** [install] Error 2
> > [root@dana mod_python-3.0.1]#
> >
> > I googled the errors and didn't get anywhere.
> >
> > Any ideas?
> >
> > Thanks in advance,
> >
> > Dylan
> >
> >
> > __________________________________________________
> > Do you Yahoo!?
> > Yahoo! Mail Plus - Powerful. Affordable. Sign up
> now.
> > http://mailplus.yahoo.com
> > _______________________________________________
> > Mod_python mailing list
> > Mod_python@modpython.org
> >
> http://www.modpython.org/mailman/listinfo/mod_python
> >
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python


__________________________________________________
Do you Yahoo!?
Yahoo! Mail Plus - Powerful. Affordable. Sign up now.
http://mailplus.yahoo.com

From listmail at xs4all.nl  Sun Jan  5 01:47:26 2003
From: listmail at xs4all.nl (baz)
Date: Fri Jan  9 21:59:50 2004
Subject: [mod_python] linking installation problem [Fwd: Re: [mod_python]
 installation problems]
In-Reply-To: <20030102175455.64670.qmail@web40708.mail.yahoo.com>
References: <20030102175455.64670.qmail@web40708.mail.yahoo.com>
Message-ID: <3E17809E.7090206@xs4all.nl>


-------- Original Message --------
Subject: Re: [mod_python] installation problems
Date: Sun, 22 Dec 2002 14:22:24 +0100
From: baz <listmail@xs4all.nl>
To: Lex Berezhny <LBerezhny@DevIS.com>
References: <1040522021.12314.421.camel@hortus>


Hey, I don't think your problem is libtool related!!

I had the exact same thing, it's a Python thing, not apache..

My solution:

try
# locate libpython2.2.so

if nothing comes up you don't have the python shared library, which is
needed by mod python.

i used the following commands to build it from source and install it:

cd Python-2.2.2/
make distclean
./configure
make OPT="-fpic -O2"
mkdir .extract
(cd .extract; ar xv ../libpython2.2.a)
gcc -shared -o libpython2.2.so .extract/*.o
rm -rf .extract
make install


then proceed to build mod_python as usual..

have fun!

baz.



Lex Berezhny wrote:
 > hi all,
 >
 >   I'm having trouble installing mod_python.
 >
 > My environment:
 > Red Hat Linux release 7.3
 > gcc 2.96
 >
 >
 > My install process:
 >
 > wget http://www.apache.org/dist/httpd/httpd-2.0.43.tar.gz
 > tar xzvf httpd-2.0.43.tar.gz
 > wget http://apache.webmeta.com/dist/httpd/modpython/mod_python-3.0.1.tgz
 > tar xzvf mod_python-3.0.1.tgz
 > wget http://www.python.org/ftp/python/2.2.2/Python-2.2.2.tgz
 > tar xzvf Python-2.2.2.tgz
 >
 > cd httpd-2.0.43
 > ./configure --prefix=/usr/local/apache2
 > make
 > make install
 >
 > cd ../Python-2.2.2/
 > ./configure
 > make
 > make install
 >
 > cd ../mod_python-3.0.1/
 > ./configure --with-apxs=/usr/local/apache2/bin/apxs
 > --with-python=/usr/local/bin/python2.2
 > make
 > make install
 >
 >
 > Warning messages I get (during make):
 >
 > *** Warning: This library needs some functionality provided by
 > -lpython2.2.
 > *** I have the capability to make that library automatically link in
 > when
 > *** you link to this library.  But I can only do this if you have a
 > *** shared version of the library, which you do not appear to have.
 >
 > *** Warning: libtool could not satisfy all declared inter-library
 > *** dependencies of module mod_python.  Therefore, libtool will create
 > *** a static module, that should work as long as the dlopening
 > *** application is linked with the -dlopen flag.
 >
 >
 > The final, fatal, error (during make install):
 >
 > make[2]: Leaving directory
 > `/usr/local/apache2install/mod_python-3.0.1/src'
 >
 > Performing DSO installation.
 >
 > /usr/bin/install -c src/mod_python.so /usr/local/apache2/modules
 > /usr/bin/install: cannot stat `src/mod_python.so': No such file or
 > directory
 > make[1]: *** [install_dso] Error 1
 > make[1]: Leaving directory `/usr/local/apache2install/mod_python-3.0.1'
 > make: *** [install] Error 2
 >
 >
 >
 >
 > any help or pointers would be greatly appreciated,
 >
 >  - lex


From vmedina98 at unitec.edu.ve  Sat Jan  4 21:48:47 2003
From: vmedina98 at unitec.edu.ve (Victor Medina)
Date: Fri Jan  9 21:59:50 2004
Subject: [mod_python] Hello, this is my first post - Compiling mod_python on Windows
Message-ID: <5.2.0.9.0.20030104213024.0264bd50@200.35.82.226>

Hi everybody, have a happy new year!

My name is Victor Medina, I am from Venezuela. I am a c++, java, php and 
python developer (I just like OOP =) ) and also a web developer and I also 
have a open source project on SourceForge, it is named Ikirux.
Ikirux is an effort to build an easy to install completely integrated web 
development environment based around the Apache 2 webserver and other open 
source technology.
http://sourceforge.net/projects/ikirux
Ikirux severs currently support:

Apache, webdav, php4, the latest openssl, zlib and mod deflate, tomcat, 
mysql4, and i want perl and python support out of the box for the next 
release, every thing under a nice, configurable and fast installer built 
with the Inno Setup Compiler.

I am currently working on the next release of the Ikirux server. I want to 
integrate the mod_python module into the next release, but i am having 
problems getting it compiled on  my test machine. I am currently using 
Visual Studio 6 SP5 and Cygwin tools on a Windows 2000 Server SP3. Checking 
out the mod_python source I found a VC project for the Visual Studio .NET, 
which I don't own right now. Anyway, I read the project file (it is a xml 
file!) and try to build a VC++ 6 project out of the information on that 
file. Compiling fails awfully. I also have a complete install of Python 
2.2.2 that i built and the apache 2.0.43, complete; that is binary, 
libraries and source tree.

Is it possible to built mod_python with VC++ 6?

How can I built it?


Thanx for the help

Victor Medina
UNITEC - Venezuela
vmedina98@unitec.edu.ve
msn: victor_medina@hotmail.com   



From grisha at modpython.org  Sat Jan  4 21:55:32 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:59:50 2004
Subject: [mod_python] linking installation problem [Fwd: Re: [mod_python]
 installation problems]
In-Reply-To: <3E17809E.7090206@xs4all.nl>
Message-ID: <20030104215200.O3336-100000@eden.ispol.com>

Just to clarify it -

I have no shared library on my Red Hat machine (RH 8.0), and it compiles
fine, the shared library is not required to compile mod_python. If there
is one, mp will use it, but it is not required.

However, old versions of libtool *require* that you have a shared library
if you're making one, the latest versions of libtool do not require it,
but will issue a warning.

Grisha

On Sun, 5 Jan 2003, baz wrote:

>
>
> -------- Original Message --------
> Subject: Re: [mod_python] installation problems
> Date: Sun, 22 Dec 2002 14:22:24 +0100
> From: baz <listmail@xs4all.nl>
> To: Lex Berezhny <LBerezhny@DevIS.com>
> References: <1040522021.12314.421.camel@hortus>
>
>
> Hey, I don't think your problem is libtool related!!
>
> I had the exact same thing, it's a Python thing, not apache..
>
> My solution:
>
> try
> # locate libpython2.2.so
>
> if nothing comes up you don't have the python shared library, which is
> needed by mod python.
>
> i used the following commands to build it from source and install it:
>
> cd Python-2.2.2/
> make distclean
> ./configure
> make OPT="-fpic -O2"
> mkdir .extract
> (cd .extract; ar xv ../libpython2.2.a)
> gcc -shared -o libpython2.2.so .extract/*.o
> rm -rf .extract
> make install
>
>
> then proceed to build mod_python as usual..
>
> have fun!
>
> baz.
>
>
>
> Lex Berezhny wrote:
>  > hi all,
>  >
>  >   I'm having trouble installing mod_python.
>  >
>  > My environment:
>  > Red Hat Linux release 7.3
>  > gcc 2.96
>  >
>  >
>  > My install process:
>  >
>  > wget http://www.apache.org/dist/httpd/httpd-2.0.43.tar.gz
>  > tar xzvf httpd-2.0.43.tar.gz
>  > wget http://apache.webmeta.com/dist/httpd/modpython/mod_python-3.0.1.tgz
>  > tar xzvf mod_python-3.0.1.tgz
>  > wget http://www.python.org/ftp/python/2.2.2/Python-2.2.2.tgz
>  > tar xzvf Python-2.2.2.tgz
>  >
>  > cd httpd-2.0.43
>  > ./configure --prefix=/usr/local/apache2
>  > make
>  > make install
>  >
>  > cd ../Python-2.2.2/
>  > ./configure
>  > make
>  > make install
>  >
>  > cd ../mod_python-3.0.1/
>  > ./configure --with-apxs=/usr/local/apache2/bin/apxs
>  > --with-python=/usr/local/bin/python2.2
>  > make
>  > make install
>  >
>  >
>  > Warning messages I get (during make):
>  >
>  > *** Warning: This library needs some functionality provided by
>  > -lpython2.2.
>  > *** I have the capability to make that library automatically link in
>  > when
>  > *** you link to this library.  But I can only do this if you have a
>  > *** shared version of the library, which you do not appear to have.
>  >
>  > *** Warning: libtool could not satisfy all declared inter-library
>  > *** dependencies of module mod_python.  Therefore, libtool will create
>  > *** a static module, that should work as long as the dlopening
>  > *** application is linked with the -dlopen flag.
>  >
>  >
>  > The final, fatal, error (during make install):
>  >
>  > make[2]: Leaving directory
>  > `/usr/local/apache2install/mod_python-3.0.1/src'
>  >
>  > Performing DSO installation.
>  >
>  > /usr/bin/install -c src/mod_python.so /usr/local/apache2/modules
>  > /usr/bin/install: cannot stat `src/mod_python.so': No such file or
>  > directory
>  > make[1]: *** [install_dso] Error 1
>  > make[1]: Leaving directory `/usr/local/apache2install/mod_python-3.0.1'
>  > make: *** [install] Error 2
>  >
>  >
>  >
>  >
>  > any help or pointers would be greatly appreciated,
>  >
>  >  - lex
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From gnb at itga.com.au  Mon Jan  6 17:16:03 2003
From: gnb at itga.com.au (Gregory Bond)
Date: Fri Jan  9 21:59:50 2004
Subject: [mod_python] http 1.1 persistent connections 
In-Reply-To: Your message of Fri, 27 Dec 2002 00:16:36 -0800.
Message-ID: <200301060616.RAA02997@lightning.itga.com.au>

> I'm new to Python and mod_python - and I'm having trouble finding out if mod_
> python supports  http1.1's persistent connections.  

It seems to for me, at least for shorter-term connections (only 10s of seconds
in my case).  Just call req.write() to send stuff and it seems to come through 
with no delays or buffering or what-have-you.

But you'd have to think carefully about the possible implications of multiple, 
long-running mod_python apps on your server resources.....




From vmedina98 at unitec.edu.ve  Mon Jan  6 18:29:51 2003
From: vmedina98 at unitec.edu.ve (Victor Medina)
Date: Fri Jan  9 21:59:50 2004
Subject: [mod_python] Compiling mod_python on Win32
Message-ID: <5.2.0.9.0.20030106181338.00ba3798@200.35.82.226>

Hi guys!

I am still having problems with mod_python in windows. Hope not be 
bothering too much, but I really want to have mod_python for Apache 2. 
Please understand that compiling it myself is a must.

Ok, so this is what is happening, I am receiving to kinds of problems

PROBLEM #1
F:\IkiruxNXT-Source\mod_python-3.0.1\src\requestobject.c(1017) : error 
C2632: 'long' followed by 'long' is illegal
F:\IkiruxNXT-Source\mod_python-3.0.1\src\requestobject.c(1018) : error 
C2632: 'long' followed by 'long' is illegal
F:\IkiruxNXT-Source\mod_python-3.0.1\src\requestobject.c(1018) : error 
C2632: 'long' followed by 'long' is illegal

The problem seems pretty obvious there is an illegal long long declaration, 
but as far as I know I can use long long's in Win32, at least with the 
Borland Builder compiler, this is the code fragment:

static PyObject *getreq_recmbr_off(requestobject *self, void *name)
{
     PyMemberDef *md = find_memberdef(request_rec_mbrs, name);
     char *addr = (char *)self->request_rec + md->offset;
     if (sizeof(apr_off_t) == sizeof(long long)) { <---- HERE!!!
	long long l = *(long long*)addr; <---- HERE!!!
	return PyLong_FromLongLong(l);
     }
     else {
	/* assume it's long */
	long l = *(long*)addr;
	return PyLong_FromLong(l);
     }
}

PROBLEM #2

I am receiving several link errors(well ok, not errors, just plain 
warnings, I am concerned about the quantity of items), about inconsistent 
linkage: inconsistent dll linkage.  dllexport assumed.

I am attaching the complete output log, hope not be abusing or breaking any 
rules inside the list.

I am using Windows 2000 SP3, Visual Studio 6 SP5,  Python 2.2.2 (custom 
built, not Python.org release, not Activestate's release) and Apache 2.0.43 
(same here,  custom built). The include, lib, libs directory are in the 
VC++ Path, thou not includes as part of the project.

Thanxs for your time an cooperation, I would really a appreciate any 
comments or hints

Victor Medina
UNITEC
vmedina98@unitec.edu.ve
msn: victor_medina@hotmail.com
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mod_python OUTPUT Log.zip
Type: application/zip
Size: 1193 bytes
Desc: not available
Url : http://mailman.modpython.org/pipermail/mod_python/attachments/20030106/ee1bf528/mod_pythonOUTPUTLog-0002.zip
From grisha at modpython.org  Tue Jan  7 00:21:15 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:59:50 2004
Subject: [mod_python] Compiling mod_python on Win32
In-Reply-To: <5.2.0.9.0.20030106181338.00ba3798@200.35.82.226>
Message-ID: <20030106234207.V30614-100000@eden.ispol.com>

Microsoft C compiler doesn't support "long long", this has been fixed in
the latest CVS code. Make the functin look like this, and it will work
OK:

static PyObject *getreq_recmbr_off(requestobject *self, void *name)
{
    PyMemberDef *md = find_memberdef(request_rec_mbrs, name);
    char *addr = (char *)self->request_rec + md->offset;
    if (sizeof(apr_off_t) == sizeof(LONG_LONG)) {
	LONG_LONG l = *(LONG_LONG*)addr;
	return PyLong_FromLongLong(l);
    }
    else {
	/* assume it's long */
	long l = *(long*)addr;
	return PyLong_FromLong(l);
    }
}


On Mon, 6 Jan 2003, Victor Medina wrote:

> Hi guys!
>
> I am still having problems with mod_python in windows. Hope not be
> bothering too much, but I really want to have mod_python for Apache 2.
> Please understand that compiling it myself is a must.
>
> Ok, so this is what is happening, I am receiving to kinds of problems
>
> PROBLEM #1
> F:\IkiruxNXT-Source\mod_python-3.0.1\src\requestobject.c(1017) : error
> C2632: 'long' followed by 'long' is illegal
> F:\IkiruxNXT-Source\mod_python-3.0.1\src\requestobject.c(1018) : error
> C2632: 'long' followed by 'long' is illegal
> F:\IkiruxNXT-Source\mod_python-3.0.1\src\requestobject.c(1018) : error
> C2632: 'long' followed by 'long' is illegal
>
> The problem seems pretty obvious there is an illegal long long declaration,
> but as far as I know I can use long long's in Win32, at least with the
> Borland Builder compiler, this is the code fragment:
>
> static PyObject *getreq_recmbr_off(requestobject *self, void *name)
> {
>      PyMemberDef *md = find_memberdef(request_rec_mbrs, name);
>      char *addr = (char *)self->request_rec + md->offset;
>      if (sizeof(apr_off_t) == sizeof(long long)) { <---- HERE!!!
> 	long long l = *(long long*)addr; <---- HERE!!!
> 	return PyLong_FromLongLong(l);
>      }
>      else {
> 	/* assume it's long */
> 	long l = *(long*)addr;
> 	return PyLong_FromLong(l);
>      }
> }
>
> PROBLEM #2
>
> I am receiving several link errors(well ok, not errors, just plain
> warnings, I am concerned about the quantity of items), about inconsistent
> linkage: inconsistent dll linkage.  dllexport assumed.
>
> I am attaching the complete output log, hope not be abusing or breaking any
> rules inside the list.
>
> I am using Windows 2000 SP3, Visual Studio 6 SP5,  Python 2.2.2 (custom
> built, not Python.org release, not Activestate's release) and Apache 2.0.43
> (same here,  custom built). The include, lib, libs directory are in the
> VC++ Path, thou not includes as part of the project.
>
> Thanxs for your time an cooperation, I would really a appreciate any
> comments or hints
>
> Victor Medina
> UNITEC
> vmedina98@unitec.edu.ve
> msn: victor_medina@hotmail.com


From vmedina98 at unitec.edu.ve  Tue Jan  7 12:02:30 2003
From: vmedina98 at unitec.edu.ve (Victor Medina)
Date: Fri Jan  9 21:59:50 2004
Subject: [mod_python] Compiling mod_python on Win32
In-Reply-To: <5.2.0.9.0.20030106181338.00ba3798@200.35.82.226>
Message-ID: <5.2.0.9.0.20030107115502.00bf72d8@200.35.82.226>

Hi Guys!!!

Using LONG_LONG seems to have fixed that problem, although I still can't 
compile mod_python, things are getting better. =)

DOUBT#1: LONG_LONG is a macro for safe type conversion?

PROBLEM#1: I am attaching my output, I am concerned about several thing 
here, there is a lot of warnings about link problems, are they normal, 
expected stuff? Second; there are unresolved external symbols that the 
compiler can't map out here:

connobject.obj : error LNK2001: unresolved external symbol __imp__ntohs@4
connobject.obj : error LNK2001: unresolved external symbol __imp__ntohl@4

I included must of the libs inside the projects, the remaining libs are in 
the path, what is missing?

Thanxs for the help and the patience

Victor Medina
UNITEC
vmedina98@unitec.edu.ve
msn:victor_medina@hotmail.com



From vmedina98 at unitec.edu.ve  Tue Jan  7 12:04:22 2003
From: vmedina98 at unitec.edu.ve (Victor Medina)
Date: Fri Jan  9 21:59:50 2004
Subject: [mod_python] Compiling mod_python on Win32
Message-ID: <5.2.0.9.0.20030107120355.00c0c7b0@200.35.82.226>

Hi Guys!!!

Using LONG_LONG seems to have fixed that problem, although I still can't 
compile mod_python, things are getting better. =)

DOUBT#1: LONG_LONG is a macro for safe type conversion?

PROBLEM#1: I am attaching my output, I am concerned about several thing 
here, there is a lot of warnings about link problems, are they normal, 
expected stuff? Second; there are unresolved external symbols that the 
compiler can't map out here:

connobject.obj : error LNK2001: unresolved external symbol __imp__ntohs@4
connobject.obj : error LNK2001: unresolved external symbol __imp__ntohl@4

I included must of the libs inside the projects, the remaining libs are in 
the path, what is missing?

Thanxs for the help and the patience

Victor Medina
UNITEC
vmedina98@unitec.edu.ve
msn:victor_medina@hotmail.com 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mod_python.zip
Type: application/zip
Size: 10180 bytes
Desc: not available
Url : http://mailman.modpython.org/pipermail/mod_python/attachments/20030107/c4a6b014/mod_python-0002.zip
From jwyant at sfbcic.com  Tue Jan  7 10:14:12 2003
From: jwyant at sfbcic.com (Wyant, Jaime)
Date: Fri Jan  9 21:59:50 2004
Subject: [mod_python] Compiling mod_python on Win32
Message-ID: <654DAEACA633D511B5F500902784B0521890D2@MS-EXCHANGE>

>>>-----Original Message-----
>>>From: Victor Medina [mailto:vmedina98@unitec.edu.ve]
>>>Sent: Tuesday, January 07, 2003 10:04 AM
>>>To: mod_python@modpython.org
>>>Subject: Re: [mod_python] Compiling mod_python on Win32
>>>
>>>
>>>Hi Guys!!!
>>>
>>>Using LONG_LONG seems to have fixed that problem, although I 
>>>still can't 
>>>compile mod_python, things are getting better. =)
>>>
>>>DOUBT#1: LONG_LONG is a macro for safe type conversion?
>>>

Don't know about Doubt #1...

>>>PROBLEM#1: I am attaching my output, I am concerned about 
>>>several thing 
>>>here, there is a lot of warnings about link problems, are 
>>>they normal, 
>>>expected stuff? Second; there are unresolved external 
>>>symbols that the 
>>>compiler can't map out here:
>>>
>>>connobject.obj : error LNK2001: unresolved external symbol 
>>>__imp__ntohs@4
>>>connobject.obj : error LNK2001: unresolved external symbol 
>>>__imp__ntohl@4

Info about ntohl according to MSDN (see the last line):

QuickInfo
  Windows NT: Yes
  Windows: Yes
  Windows CE: Use version 1.0 and later.
  Header: Declared in winsock2.h.
  Import Library: Link with ws2_32.lib.

Good luck!
jaime

From m.syeda at public-health.ucl.ac.uk  Wed Jan  8 09:59:42 2003
From: m.syeda at public-health.ucl.ac.uk (Maheeba Syeda)
Date: Fri Jan  9 21:59:50 2004
Subject: [mod_python] installing apache,mod_python and python
Message-ID: <3E1BF68D.13048.30A809@localhost>

hi every1,


need some help with setting up the following.

I have Python 2.2.2, Apache 2.0.42 and mod_Python 3.0.1 on a 
Windows 2000 system, and want to
enable python files on an Apache hosted site.
How can I set it up?
I get the error:
Syntax error on line 491 of c:/program files/apache
group/apache2/conf/httpd.conf
:
Invalid command 'PythonHandler', perhaps mis-spelled or defined 
by a
module not
included in the server configuration

That section in the httpd.conf file contains:
<Directory "C:/Program Files/Apache 
Group/Apache/htdocs/python">
   AddHandler python-program .py
   PythonHandler mptest
   PythonDebug on
</Directory>


is there anythng i am missing? i have been trying to get it working 
for the last 2 days. is there anyone who will be able to help me with 
this? a step-by-step direction of what to do will be appreciated very 
much.

thanx in advance.
heeba




From hobb at mail.portland.co.uk  Wed Jan  8 23:39:44 2003
From: hobb at mail.portland.co.uk (hobb)
Date: Fri Jan  9 21:59:50 2004
Subject: [mod_python] Error during 'make install'
Message-ID: <002b01c2b76f$39496780$0201a8c0@mindcircus>

Hi, it looks like I'm doing something wrong and can't seem to properly
compile mod_python
This is how I'm compiling it and the error message at the end:

$ cd ~
$ wget http://apache.webmeta.com/dist/httpd/modpython/mod_python-3.0.1.tgz
$ tar -xzf mod_python-3.0.1.tgz
$ cd mod_python-3.0.1
$ ./configure --with-apxs=/usr/local/apache2/bin/apxs
$ make
$ su
# make install
[snip]
Performing DSO installation.

/usr/bin/install -c src/mod_python.so /usr/local/apache2/modules
/usr/bin/install: cannot stat `src/mod_python.so': No such file or directory
make[1]: *** [install_dso] Error 1
make[1]: Leaving directory `/home/hobb/mod_python-3.0.1'
make: *** [install] Error 2
#

What's going wrong?

This is more information of the box im trying to build mod_python on which
might help in troubleshooting:

$ uname -a
Linux Dagger 2.4.20 #2 Sat Jan 4 22:31:49 GMT 2003 i686 unknown
$ /usr/local/apache2/bin/apachectl -v
Server version: Apache/2.0.43
Server built:   Jan  5 2003 00:55:46
$ python -V
Python 2.2.2
$ gcc -v
Reading specs from /usr/lib/gcc-lib/i686-pc-linux-gnu/3.2.1/specs
Configured with:
../gcc-3.2.1/configure --prefix=/usr --enable-languages=c,c++,objc --enable-
threads=posix --enable-__cxa_atexit --disable-nls
Thread model: posix
gcc version 3.2.1 (CRUX)

TIA


From mike_verdone at shaw.ca  Wed Jan  8 18:04:11 2003
From: mike_verdone at shaw.ca (Mike Verdone)
Date: Fri Jan  9 21:59:50 2004
Subject: [mod_python] Persistent Database and Publisher problem
Message-ID: <200301081804.11560.mike_verdone@shaw.ca>

Hi,

I'm having some trouble using the persistent database example code from the 
FAQ and the publisher handler. The problem is that the persistent connection 
is not actually persistent. Instead, it connects on every request, and does 
not disconnect.

I put the database code in a file _database.py, and then I put all the 
database functions into a file _dbcommands.py. The problem is, how do I 
import _database in _dbcomands?

If I use:

import _database

then it make a new connection on every request. I figure that the correct way 
to do it is using the PythonImport apache directive, but the problem now is 
that I can't see the imported module when running through the publisher 
handler. i.e. this doesn't resolve without import _database:

_database.run_sql(...)

I ensured that that _database is being imported by the interpreter (8 
connections are made before any requests), and the module is imported in the 
correctly named interpreter. I suspect the module is "blocked" by 
publisher-handler. Is that the problem?

Any recommendations on how to get around this?

Mike.


From Mongryong at sympatico.ca  Wed Jan  8 20:05:49 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 21:59:50 2004
Subject: [mod_python] 4XSLT/XML (4Suite) is not functioning correctly
Message-ID: <1042074350.5118.15.camel@refugeeMedia>

Hi,

I'm having problems with 4Suite's XSLT processor working properly within
mod_python.  It appears to be an mod_python issue because my code works
fine as a cgi and stand-alone script.  I can't seem to figure out why
it's not working under mod_python and mod_python is not indicating that
any errors/exceptions are occuring.  It seems as if during XSLT
processing, the source XML document is being ignored.

Has anyone been successful in using 4Suite's XSLT tools with
mod_python?  If so, what is your configuration. Thanks.




From gnb at itga.com.au  Thu Jan  9 12:15:48 2003
From: gnb at itga.com.au (Gregory Bond)
Date: Fri Jan  9 21:59:50 2004
Subject: [mod_python] 4XSLT/XML (4Suite) is not functioning correctly 
In-Reply-To: Your message of 08 Jan 2003 20:05:49 -0500.
Message-ID: <200301090115.MAA28427@lightning.itga.com.au>

> any errors/exceptions are occuring.  It seems as if during XSLT
> processing, the source XML document is being ignored.

See FAQ 3.5 (http://www.modpython.org/FAQ/faqw.py?req=show&file=faq03.005.htp) 
for some hints about what changes between CGI and mod_python. My money is on 
environment variables or PWD.



From grisha at modpython.org  Wed Jan  8 21:22:35 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:59:50 2004
Subject: [mod_python] Persistent Database and Publisher problem
In-Reply-To: <200301081804.11560.mike_verdone@shaw.ca>
Message-ID: <20030108212029.A58150-100000@eden.ispol.com>


On Wed, 8 Jan 2003, Mike Verdone wrote:

> If I use:
>
> import _database
>
> then it make a new connection on every request.

Are you sure that it isn't making a connection for every Apache process
that's running? If you have 10 processes running, then the first 10
requests will make 10 connections, but the 11th should be reused.

Grisha


From connie at core3d.com  Thu Jan  9 08:24:55 2003
From: connie at core3d.com (Connie Baggs)
Date: Fri Jan  9 21:59:50 2004
Subject: [mod_python] parse error before '*'
Message-ID: <20030109.8245536@mis.configured.host>

Hi
Ive just compiled and installed apache 2.0.43 (apache2) and have 
previously installed python 2.1.1 I am now trying to install the 
mod_python module. The ./configure goes fine with the command 
#./configure ?with-apxs=/usr/local/apache2/bin/apxs 
-with-python=/usr/freeware/bin/python2 

However when I issue the make command it fails with the following error


/usr/local/apache2/build/libtool --silent --mode=compile gcc 
-DAP_HAVE_DESIGNATED_INITIALIZER -D_POSIX_THREAD_SAFE_FUNCTIONS -g -O2 
-I/usr/local/apache2/include 
-I/install/httpd-2.0.43/modules/mod_python-3.0.1/src/include 
-I/usr/local/apache2/include -I/usr/freeware/include/python2.1  -c -o 
mod_python.lo mod_python.c && touch mod_python.slo
In file included from 
/install/httpd-2.0.43/modules/mod_python-3.0.1/src/include/mod_python.h:
115,
 from mod_python.c:67:
/install/httpd-2.0.43/modules/mod_python-3.0.1/src/include/util.h:76: 
parse error before '*' token
/install/httpd-2.0.43/modules/mod_python-3.0.1/src/include/util.h:76: 
parse error before '*' token
/install/httpd-2.0.43/modules/mod_python-3.0.1/src/include/util.h:76: 
warning: data definition has no type or storage class
apxs:Error: Command failed with rc=65536
.
*** Error code 1 (bu21)
*** Error code 1 (bu21)



Any ideas on what is wrong?


From grisha at modpython.org  Thu Jan  9 09:43:09 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:59:50 2004
Subject: [mod_python] parse error before '*'
In-Reply-To: <20030109.8245536@mis.configured.host>
Message-ID: <20030109094228.E65000-100000@eden.ispol.com>

I think this is because your Python is too old. According to this:

http://www.modpython.org/live/mod_python-3.0.1/doc-html/inst-prerequisites.html

it has to be 2.2.1 or later.

Grisha

On Thu, 9 Jan 2003, Connie Baggs wrote:

> Hi
> Ive just compiled and installed apache 2.0.43 (apache2) and have
> previously installed python 2.1.1 I am now trying to install the
> mod_python module. The ./configure goes fine with the command
> #./configure ?with-apxs=/usr/local/apache2/bin/apxs
> -with-python=/usr/freeware/bin/python2
>
> However when I issue the make command it fails with the following error
>
>
> /usr/local/apache2/build/libtool --silent --mode=compile gcc
> -DAP_HAVE_DESIGNATED_INITIALIZER -D_POSIX_THREAD_SAFE_FUNCTIONS -g -O2
> -I/usr/local/apache2/include
> -I/install/httpd-2.0.43/modules/mod_python-3.0.1/src/include
> -I/usr/local/apache2/include -I/usr/freeware/include/python2.1  -c -o
> mod_python.lo mod_python.c && touch mod_python.slo
> In file included from
> /install/httpd-2.0.43/modules/mod_python-3.0.1/src/include/mod_python.h:
> 115,
>  from mod_python.c:67:
> /install/httpd-2.0.43/modules/mod_python-3.0.1/src/include/util.h:76:
> parse error before '*' token
> /install/httpd-2.0.43/modules/mod_python-3.0.1/src/include/util.h:76:
> parse error before '*' token
> /install/httpd-2.0.43/modules/mod_python-3.0.1/src/include/util.h:76:
> warning: data definition has no type or storage class
> apxs:Error: Command failed with rc=65536
> .
> *** Error code 1 (bu21)
> *** Error code 1 (bu21)
>
>
>
> Any ideas on what is wrong?
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From connie at core3d.com  Fri Jan 10 02:06:34 2003
From: connie at core3d.com (Connie Baggs)
Date: Fri Jan  9 21:59:50 2004
Subject: [mod_python] error making mod_python
Message-ID: <20030110.2063470@mis.configured.host>

Hi
Ive just compiled and installed apache 2.0.43 (apache2) and python 2.2.1 
I am now trying to install the 
mod_python module. The ./configure goes fine with the command 
#./configure ?with-apxs=/usr/local/apache2/bin/apxs 
-with-python=/usr/local/bin/python2.2

However when I issue the make command it fails with the following error


/usr/local/apache2/build/libtool --silent --mode=link gcc -o 
mod_python.la 
-I/install/httpd-2.0.43/modules/mod_python-3.0.1/src/include 
-I/usr/local/apache2/include -I/usr/local/include/python2.2  -rpath 
/usr/local/apache2/modules -module -avoid-version  hlistobject.lo 
hlist.lo filterobject.lo connobject.lo serverobject.lo util.lo 
tableobject.lo requestobject.lo _apachemodule.lo mod_python.lo 
-L/usr/local/lib/python2.2/config -lm -lpython2.2 -ldl -lpthread -lm
ld32: WARNING 84: /usr/lib32/libm.so is not used for resolving any 
symbol.
ld32: WARNING 84: /usr/lib32/libdl.so is not used for resolving any 
symbol.
Insufficient arguments
Usage: ln [-fis] file1 file2 
       ln [-fis] file1 ... file2 dir 
*** Error code 2 (bu21)
*** Error code 1 (bu21)
)



Any ideas on what is wrong?

_____________________________



From grisha at modpython.org  Thu Jan  9 23:30:09 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:59:50 2004
Subject: [mod_python] error making mod_python
In-Reply-To: <20030110.2063470@mis.configured.host>
Message-ID: <20030109232436.X73409-100000@eden.ispol.com>


On Fri, 10 Jan 2003, Connie Baggs wrote:

> Insufficient arguments
> Usage: ln [-fis] file1 file2
>        ln [-fis] file1 ... file2 dir
> *** Error code 2 (bu21)
> *** Error code 1 (bu21)
>
> Any ideas on what is wrong?

Interesting.... Is this IRIX by any chance? I have no access to an SGI
machine to test this, but it looks like ln needs two arguments and so the
args in src/Makefile are wrong. Try finding a line in src/Makefile that
looks like:

        @ln -s .libs/mod_python.so

and change it to

	@ln -s .libs/mod_python.so mod_python.so

then rerun make.

Grisha



From Mongryong at sympatico.ca  Fri Jan 10 00:57:05 2003
From: Mongryong at sympatico.ca (Kia Vang)
Date: Fri Jan  9 21:59:50 2004
Subject: [mod_python] 4XSLT/XML (4Suite) is not functioning correctly
In-Reply-To: <200301090115.MAA28427@lightning.itga.com.au>
References: <200301090115.MAA28427@lightning.itga.com.au>
Message-ID: <1042178225.27744.29.camel@refugeeMedia>

Okay, I'm really frustrated.  My code seems very simple, yet I can't get
mod_python to output it correctly.    

Here's the mod_python code:

from Ft.Xml import InputSource
from Ft.Xml.Xsl import Processor

from mod_python import apache

def handler(req):
	p = Processor.Processor()
	trans = InputSource.DefaultFactory.fromUri("request.xsl")
	src = InputSource.DefaultFactory.fromUri("request.xml")
	p.appendStylesheet(trans)
	res = p.run(src, topLevelParams={'error':0} )
	
	req.content_type="text/html"
	req.write(res)

	return apache.OK

Here's a cgi version:

from Ft.Xml import InputSource
from Ft.Xml.Xsl import Processor
import sys

if __name__ == "__main__":
	p = Processor.Processor()
	trans = InputSource.DefaultFactory.fromUri("request.xsl")
	src = InputSource.DefaultFactory.fromUri("request.xml")
	p.appendStylesheet(trans)
	
	sys.write("Content-type: text/html")
	p.run(src, topLevelParams={'error':0}, outputStream=sys.stdout )
	
Now, I've also done some tests with libxml2 and libxslt.  I get the same
result with mod_python outputting missing information.

Am I missing something?  I'm using the latest versions of apache,
python, and mod_python.	

On Wed, 2003-01-08 at 20:15, Gregory Bond wrote:
> > any errors/exceptions are occuring.  It seems as if during XSLT
> > processing, the source XML document is being ignored.
> 
> See FAQ 3.5 (http://www.modpython.org/FAQ/faqw.py?req=show&file=faq03.005.htp) 
> for some hints about what changes between CGI and mod_python. My money is on 
> environment variables or PWD.
> 
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20030110/55fe2ec7/request-0002.htm
-------------- next part --------------
<?xml version="1.0"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:template name="createObjectiveFormItems">
    <ol>
      <xsl:for-each select="/resume/objectiveList/objective">
        <xsl:variable name="objName">objective<xsl:value-of select="@id"/></xsl:variable>
        <li>
          <xsl:value-of select="@category"/>
          <input type="checkbox">
            <xsl:attribute name="value">
              <xsl:value-of select="$objName"/>
            </xsl:attribute>
          </input>
        </li>
      </xsl:for-each>
    </ol>
  </xsl:template>
  <xsl:template name="createCategoryFormItems">
    <ul>
      <xsl:for-each select="/resume/categoryList/category">
        <div>
          <input type="checkbox">
            <xsl:attribute name="value">
              <xsl:value-of select="@name"/>
            </xsl:attribute>
            <span>
              <xsl:value-of select="@name"/>
            </span>
          </input>
        </div>
      </xsl:for-each>
    </ul>
  </xsl:template>
  <xsl:template name="createCategoryStyle">
    <style type="text/css">
      <xsl:for-each select="/resume/categoryList/category">
        <xsl:text> .</xsl:text>
        <xsl:value-of select="@name"/>
        <xsl:text>{}</xsl:text>
      </xsl:for-each>
    </style>
  </xsl:template>
  <xsl:template name="createOccupationFormItems">
    <ul>
      <xsl:for-each select="/resume/occupationList/occupation">
        <div>
          <input type="checkbox">
            <xsl:attribute name="value">
              <xsl:value-of select="occupationType/@name"/>
            </xsl:attribute>
            <span>
              <xsl:value-of select="occupationType/@name"/>
            </span>
          </input>
        </div>
      </xsl:for-each>
    </ul> 
  </xsl:template>
  <xsl:template match="/">
    <html>
      <head>
        <title>RezQuest</title>
        <link rel="stylesheet" href="/rezquest/css/professional.css" type="text/css" title="professional" media="all"/>
        <link rel="stylesheet" href="/rezquest/css/elegant.css" type="text/css" title="elegant" media="all"/>
        <link rel="stylesheet" href="/rezquest/css/contemporary.css" type="text/css" title="contemporary" media="all"/>
        <script type="text/javascript" src="/rezquest/scripts/common.js"/>
        <script type="text/javascript" src="/rezquest/scripts/main.js"/>
        <xsl:call-template name="createCategoryStyle"/>
      </head>
      <body>
        <div id="menu">
          <div id="appTitle">
            <h3>RezQuest 0.1</h3>
          </div>
          <div id="styleForm" class="menuItem">
            <form name="styleForm">
              <h3>Select Style</h3>
              <div><input type="radio" name="style" value="professional"/>professional</div>
              <div><input type="radio" name="style" value="elegant"/>elegant</div>
              <div><input type="radio" name="style" value="contemporary"/>contemporary</div>
              <div><input id="refreshButton" type="button" name="refresh" value="Refresh"/></div>         
            </form>
          </div>
          <div id="fontForm" class="menuItem">
            <form name="fontForm" onSubmit="window.focus(); return false;">
              <h3>Adjust Base Font-Size</h3>
              <div><input type="radio" name="fontSizeType" value="%" checked="true"/>percent(%)</div>
              <div><input type="radio" name="fontSizeType" value="em"/>M-height(em)</div>
              <div><input type="radio" name="fontSizeType" value="ex"/>x-height(ex)</div>              
              <div>
                <input id="fontSizeVal" type="text" name="fontSizeVal" value="100" size="4" maxLength="3" onkeypress="return resume_fontSizeOnKeyDown(event);"/>
                <input id="fontSizeApply" type="button" name="fontSizeApply" value="Apply"/>
              </div>
            </form>
          </div>
          <div id="sectionForm" class="menuItem">
            <form name="sectionForm">
              <h3>Select Sections</h3>
              <div><input type="checkbox" value="personHeader"/>top header</div>
              <div><input type="checkbox" value="objective"/>objective</div>
              <div><input type="checkbox" value="skills"/>summary of skills</div>
              <div><input type="checkbox" value="education"/>education</div>
              <div><input type="checkbox" value="work"/>work experience</div>
              <div><input type="checkbox" value="projects"/>projects</div>
              <div><input type="checkbox" value="interests"/>interest</div>
              <div><input type="checkbox" value="references"/>references</div>
            </form>            
          </div>
          <div id="objectiveForm" class="menuItem">
            <form name="objectiveForm">
              <h3>Select Objective</h3>
              <xsl:call-template name="createObjectiveFormItems"/>
            </form>
          </div>
          <div id="categoryForm" class="menuItem">
            <form name="categoryForm">
              <h3>Select Categories</h3>
              <xsl:call-template name="createCategoryFormItems"/>
            </form>
          </div>
          <div id="occupationForm" class="menuItem">
            <form name="occupationForm">
              <h3>Select Occupations</h3>
              <xsl:call-template name="createOccupationFormItems"/>
            </form>
          </div>
          <div id="printForm" class="menuItem">
            <form name="printForm">
              <input style="width: 100%" id="previewButton" type="button" name="preview" value="Preview"/>
              <input style="width: 100%" id="printButton" type="button" name="print" value="Print"/>	      
            </form>
          </div>
          <div id="fileOptions" class="menuItem">
            <h3>File Options</h3>
            <div><a id="openResume" href="/cgi-bin/rezquest/main.py?request=login" title="Get another resume">Open New</a></div>
            <div><a id="exitresume" href="/rezquest/exit.html" title="Exit RezQuest">Exit</a></div>
          </div>
          <div id="copyRight">
            <span><xsl:text disable-output-escaping="yes">&#169;</xsl:text> 2002 by Refugee Media Networks.</span>
          </div>
        </div>
        <div id="main">
          <div id="personHeader" class="section">
            <div id="personInfo">
              <div id="residence" class="contactInfo">
                <xsl:apply-templates select="resume/residenceList"/>
              </div>
              <div id="phone" class="contactInfo">
                <xsl:apply-templates select="resume/phoneList"/>
              </div>
              <div id="email" class="contactInfo">
                <xsl:apply-templates select="resume/emailList"/>
              </div>
              <div id="filler1"/>
            </div>
            <xsl:apply-templates select="resume/person"/>
          </div>
          <div id="objective" class="section">
            <h2 class="title">Objective</h2>
            <div class="content">
              <xsl:apply-templates select="resume/objectiveList"/>
            </div>
            <div class="contentFiller">&#160;</div>
          </div>
          <div id="skills" class="section">
            <h2 class="title">Summary of Skills</h2>
            <div class="content">
              <xsl:apply-templates select="resume/skillList"/>
            </div>
            <div class="contentFiller">&#160;</div>
          </div>
          <div id="education" class="section">
            <h2 class="title">Education</h2>
            <div class="content">
              <xsl:apply-templates select="resume/educationList"/>
            </div>
            <div class="contentFiller">&#160;</div>
          </div>
          <div id="work" class="section">
            <h2 class="title">Work Experience</h2>
            <div class="content">
              <xsl:apply-templates select="resume/occupationList"/>
            </div>
            <div class="contentFiller">&#160;</div>
          </div>
          <div id="projects" class="section">
            <h2 class="title">Personal Projects</h2>
            <div class="content">
              <xsl:apply-templates select="resume/projectList"/>
              <div class="contentFiller">&#160;</div>
            </div>
            <div class="contentFiller">&#160;</div>
          </div>
          <div id="interests" class="section">
            <h2 class="title">Interests</h2>
            <div class="content">
              <xsl:apply-templates select="resume/interestList"/>
            </div>
            <div class="contentFiller">&#160;</div>
          </div>
          <div id="references" class="section">
            <h2 class="title">References</h2>
            <div class="content">
              <xsl:apply-templates select="resume/referenceList"/>
            </div>
            <div class="contentFiller">&#160;</div>
          </div>
        </div>
      </body>
    </html>
  </xsl:template>
  <xsl:template match="skillList">
    <ul>
      <xsl:for-each select="skill">
        <li>
          <xsl:attribute name="class">
            <xsl:value-of select="@category"/>
          </xsl:attribute>
          <xsl:value-of select="description"/>
        </li>
      </xsl:for-each>
    </ul>
  </xsl:template>
  <xsl:template match="objectiveList">
    <ul>
      <xsl:for-each select="objective">
        <li>          
          <xsl:attribute name="id">objective<xsl:value-of select="@id"/></xsl:attribute>
          <xsl:value-of select="description"/>
        </li>
      </xsl:for-each>
    </ul>
  </xsl:template>
  <xsl:template match="residenceList">
    <xsl:for-each select="residence">
      <xsl:if test="@type='home'">
        <div class="key">Residence</div>
        <div class="value">
          <div class="region">
            <xsl:value-of select="address"/>
          </div>
          <div class="region">
            <xsl:value-of select="city"/>
          </div>
          <div class="region">
            <xsl:value-of select="state/@code"/>
          </div>
          <div class="region">
            <xsl:value-of select="state/country/@code"/>
          </div>
          <div class="region">
            <xsl:value-of select="zip"/>
          </div>
        </div>
      </xsl:if>
    </xsl:for-each>
  </xsl:template>
  <xsl:template match="educationList">
    <xsl:for-each select="education">
      <xsl:if test="@degree='basc'">
        <h2>
          <xsl:value-of select="@major"/>
        </h2>
        <h3 class="subHead">
          <xsl:value-of select="institution/name"/>
        </h3>
        <h3 class="subHead">
          <span class="region">
            <xsl:value-of select="institution/location/city"/>
          </span>
          <span class="region">
            <xsl:value-of select="institution/location/state/@code"/>
          </span>
        </h3>
        <h3 class="subHead"><xsl:value-of select="substring(startDate,1,7)"/> to <xsl:value-of select="substring(endDate,1,7)"/></h3>
        <div class="contentFiller"/>
        <div>
          <ul>
            <li>Bachelor of Applied Science</li>
          </ul>
        </div>
      </xsl:if>
    </xsl:for-each>
  </xsl:template>
  <xsl:template match="occupationList">
    <xsl:for-each select="occupation">
<!--xsl:if test="occupationType/@name='dsp software' or occupationType/@name='windows'"-->
      <div class="subSection">
        <xsl:attribute name="name"><xsl:value-of select="occupationType/@name"/></xsl:attribute>
        <h2>
          <xsl:value-of select="occupationType/title"/>
        </h2>
        <h3 class="subHead">
          <xsl:value-of select="company/name"/>
        </h3>
        <h3 class="subHead">
          <span class="region">
            <xsl:value-of select="company/location/city"/>
          </span>
          <span class="region">
            <xsl:value-of select="company/location/state/@code"/>
          </span>
        </h3>
        <h3 class="subHead"><xsl:value-of select="substring(startDate,1,7)"/> to <xsl:value-of select="substring(endDate,1,7)"/></h3>
        <div class="contentFiller"/>
        <xsl:apply-templates select="summaryList"/>
      </div>
<!--/xsl:if-->
    </xsl:for-each>
  </xsl:template>
  <xsl:template match="referenceList">
    <xsl:for-each select="reference">
<!--xsl:if test="@degree='basc'"-->
      <div class="subSection">
        <h2>
          <xsl:value-of select="name"/>
        </h2>
        <h3 class="subHead">
          <xsl:value-of select="@position"/>
        </h3>
        <h3 class="subHead">
          <xsl:value-of select="company/name"/>
        </h3>
        <div class="contentFiller"/>
        <div class="subHead"><xsl:value-of select="phone/@area"/>.<xsl:value-of select="phone/number"/><xsl:if test="phone/ext &gt; 0"> ext.<xsl:value-of select="phone/ext"/></xsl:if></div>
        <div class="subHead">
          <xsl:value-of select="email"/>
        </div>
        <div id="filler2"/>
      </div>
<!--/xsl:if-->
    </xsl:for-each>
  </xsl:template>
  <xsl:template match="projectList">
    <ul>
      <xsl:for-each select="project">
        <li>
          <xsl:attribute name="class">
            <xsl:value-of select="@category"/>
          </xsl:attribute>
          <xsl:value-of select="description"/>
        </li>
      </xsl:for-each>
    </ul>
  </xsl:template>
  <xsl:template match="interestList">
    <ul>
      <xsl:for-each select="interest">
        <xsl:choose>
          <xsl:when test="position()!=last()">
            <li>
              <xsl:value-of select="@name"/>
            </li>
          </xsl:when>
          <xsl:otherwise>
            <li>
              <xsl:attribute name="id">lastInterest</xsl:attribute>
              <xsl:value-of select="@name"/>
            </li>
          </xsl:otherwise>
        </xsl:choose>
      </xsl:for-each>
    </ul>
  </xsl:template>
  <xsl:template match="summaryList">
    <ul>
      <xsl:for-each select="summary">
        <li>
          <xsl:attribute name="class">
            <xsl:value-of select="@category"/>
          </xsl:attribute>
          <xsl:value-of select="description"/>
        </li>
      </xsl:for-each>
    </ul>
  </xsl:template>
  <xsl:template match="phoneList">
    <xsl:for-each select="phone">
      <div class="keyValue">
        <div class="key">
          <xsl:value-of select="@type"/>
        </div>
        <div class="value"><xsl:value-of select="@area"/>.<xsl:value-of select="number"/></div>
      </div>
    </xsl:for-each>
  </xsl:template>
  <xsl:template match="emailList">
    <xsl:for-each select="email">
      <xsl:if test="@type='school'">
        <div class="keyValue">
          <div class="key">email</div>
          <div class="value">
            <xsl:value-of select="address"/>
          </div>
        </div>
      </xsl:if>
    </xsl:for-each>
  </xsl:template>
  <xsl:template match="person">
    <div id="personName">
      <div>
        <span id="firstName">
          <xsl:value-of select="firstName"/>
        </span>
        <span id="lastName">
          <xsl:value-of select="lastName"/>
        </span>
      </div>
    </div>
  </xsl:template>
</xsl:stylesheet>
From grisha at modpython.org  Fri Jan 10 11:05:25 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:59:51 2004
Subject: [mod_python] 4XSLT/XML (4Suite) is not functioning correctly
In-Reply-To: <1042178225.27744.29.camel@refugeeMedia>
Message-ID: <20030110110412.V80550-100000@eden.ispol.com>

On 10 Jan 2003, Kia Vang wrote:

> Okay, I'm really frustrated.  My code seems very simple, yet I can't get
> mod_python to output it correctly.
>
> Here's the mod_python code:
>
> from Ft.Xml import InputSource
> from Ft.Xml.Xsl import Processor
>
> from mod_python import apache
>
> def handler(req):
> 	p = Processor.Processor()
> 	trans = InputSource.DefaultFactory.fromUri("request.xsl")
> 	src = InputSource.DefaultFactory.fromUri("request.xml")
> 	p.appendStylesheet(trans)
> 	res = p.run(src, topLevelParams={'error':0} )
>
> 	req.content_type="text/html"
> 	req.write(res)
>
> 	return apache.OK

So what specifically is wrong with the above code's behaviour? What it is
supposed to do and what does it really do?

Grisha


From nick.fearn at openmethods.com  Fri Jan 10 16:42:19 2003
From: nick.fearn at openmethods.com (Nick Fearn)
Date: Fri Jan  9 21:59:51 2004
Subject: [mod_python] Mod_python compilation and install
Message-ID: <IDEBKIECLBLNHJABHGBHCEIJCLAA.nick.fearn@openmethods.com>

Hi

I am having trouble compiling and installing Mod_python 2.7.8 (DSO) with
apache-1.3.22-3b, python 1.5.2 on YDL 2.2.

I have recompile python with no threads. The mod_python compile completes OK
but Make ends with the following errors.

Thanks for any help. Nick


[root@linux2t mod_python-2.7.8]# ./configure --with-apxs=/usr/sbin/apxs
creating cache ./config.cache
checking for gcc... gcc
checking whether the C compiler (gcc  ) works... yes
checking whether the C compiler (gcc  ) is a cross-compiler... no
checking whether we are using GNU C... yes
checking whether gcc accepts -g... yes
checking for ranlib... ranlib
checking for ar... ar
checking for a BSD compatible install... /usr/bin/install -c
checking whether make sets ${MAKE}... yes
checking for main in -lm... yes
checking for working const... yes
checking your blood pressure... a bit high, but we can proceed
checking whether apxs is available
checking for --with-apxs... /usr/sbin/apxs executable, good
checking for Apache libexec directory... /usr/lib/apache
checking for Apache include directory... -I/usr/include/apache
checking for --with-apache... no
configure: warning: **** No apache sources specified, static compilation
will not be available.
configure: warning: **** You can use --with-apache to specify where your
Apache sources are.
checking for --with-python... no
checking for python... /usr/local/bin/python
checking Python version... 1.5
checking whether Python is compiled with thread support... no threads, good
checking Python install prefix... /usr/local
checking what libraries Python was linked with...
/usr/local/lib/python1.5/config/libpython1.5.a   -lieee -ldl    -lm
checking linker flags used to link Python...
checking where Python include files are... -I/usr/local/include/python1.5
checking for mkdep... no
checking for makedepend... no
updating cache ./config.cache
creating ./config.status
creating Makefile
creating src/Makefile
creating src/libpython.module
creating Doc/Makefile
[root@linux2t mod_python-2.7.8]# make
make[1]: Entering directory `/home/nick/mod_python-2.7.8/src'
gcc  -I/home/nick/mod_python-2.7.8/src/include -I/usr/include/apache -I/usr/
local/include/python1.5    -c -o mod_python.o mod_python.c
gcc  -I/home/nick/mod_python-2.7.8/src/include -I/usr/include/apache -I/usr/
local/include/python1.5    -c -o _apachemodule.o _apachemodule.c
gcc  -I/home/nick/mod_python-2.7.8/src/include -I/usr/include/apache -I/usr/
local/include/python1.5    -c -o requestobject.o requestobject.c
gcc  -I/home/nick/mod_python-2.7.8/src/include -I/usr/include/apache -I/usr/
local/include/python1.5    -c -o tableobject.o tableobject.c
gcc  -I/home/nick/mod_python-2.7.8/src/include -I/usr/include/apache -I/usr/
local/include/python1.5    -c -o util.o util.c
gcc  -I/home/nick/mod_python-2.7.8/src/include -I/usr/include/apache -I/usr/
local/include/python1.5    -c -o serverobject.o serverobject.c
gcc  -I/home/nick/mod_python-2.7.8/src/include -I/usr/include/apache -I/usr/
local/include/python1.5    -c -o connobject.o connobject.c

Compiling for DSO. For static, do "make static"

/usr/sbin/apxs -I/home/nick/mod_python-2.7.8/src/include -I/usr/include/apac
he -I/usr/local/include/python1.5 -c mod_python.o _apachemodule.o
requestobject.o tableobject.o util.o serverobject.o connobject.o  -lm
/usr/local/lib/python1.5/config/libpython1.5.a   -lieee -ldl    -lm
gcc -shared -o mod_python.so mod_python.o _apachemodule.o requestobject.o
tableobject.o util.o serverobject.o connobject.o -lm
/usr/local/lib/python1.5/config/libpython1.5.a -lieee -ldl -lm
/usr/bin/ld: mod_python.so: undefined versioned symbol name
_LIB_VERSION@@GLIBC_2.0
/usr/bin/ld: failed to set dynamic section sizes: Bad value
collect2: ld returned 1 exit status
apxs:Break: Command failed with rc=1
make[1]: *** [mod_python.so] Error 1
make[1]: Leaving directory `/home/nick/mod_python-2.7.8/src'
make: *** [do_dso] Error 2
[root@linux2t mod_python-2.7.8]#


From Mongryong at sympatico.ca  Fri Jan 10 12:31:37 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 21:59:51 2004
Subject: [mod_python] 4XSLT/XML (4Suite) is not functioning correctly
In-Reply-To: <20030110110412.V80550-100000@eden.ispol.com>
References: <20030110110412.V80550-100000@eden.ispol.com>
Message-ID: <1042219898.1298.13.camel@refugeeMedia>

I've attached two files:

cgi_result.html: the correct result as outputted by cgi/standalone
version of my script

modpython_result.html: the result as outputted by a mod_python version
of my script

From grisha at modpython.org  Fri Jan 10 12:39:06 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:59:51 2004
Subject: [mod_python] 4XSLT/XML (4Suite) is not functioning correctly
In-Reply-To: <1042219898.1298.13.camel@refugeeMedia>
Message-ID: <20030110123723.R80550-100000@eden.ispol.com>

My first guess would be something relating to current directory. In true
CGI, the current directory is set to that of where the script is located.
Mod_python doesn't do this because changing directory is not a thread-safe
thing to do. I'd try it with absolute paths to the files.

Grisha

On 10 Jan 2003, Mongryong wrote:

> I've attached two files:
>
> cgi_result.html: the correct result as outputted by cgi/standalone
> version of my script
>
> modpython_result.html: the result as outputted by a mod_python version
> of my script
>
> >From the result, you should see that the html body is empty in modpython
> version.  I've done some tests with the mod_python version of my script
> and everything seems correct up to this point:
>
> res = p.run(src, topLevelParams={'error':0} )
>
> 'res' is the result of the transformation as a string.  The
> 'request.xsl' provides instructions to the XSLT engine on how to
> transform 'request.xml' to a HTML document.  No errors or exceptions are
> thrown.  It just seems as if the 'values' in 'request.xml' are NULL
> (empty) - hence, the body of the HTML is empty.
>
> Like I said previously, I've tried switching to a different XML/XSLT
> library (libxml2/libxslt from GNOME project) and I get the same result.
>
> On Fri, 2003-01-10 at 11:05, Gregory (Grisha) Trubetskoy wrote:
> >
> > On 10 Jan 2003, Kia Vang wrote:
> >
> > > Okay, I'm really frustrated.  My code seems very simple, yet I can't get
> > > mod_python to output it correctly.
> > >
> > > Here's the mod_python code:
> > >
> > > from Ft.Xml import InputSource
> > > from Ft.Xml.Xsl import Processor
> > >
> > > from mod_python import apache
> > >
> > > def handler(req):
> > > 	p = Processor.Processor()
> > > 	trans = InputSource.DefaultFactory.fromUri("request.xsl")
> > > 	src = InputSource.DefaultFactory.fromUri("request.xml")
> > > 	p.appendStylesheet(trans)
> > > 	res = p.run(src, topLevelParams={'error':0} )
> > >
> > > 	req.content_type="text/html"
> > > 	req.write(res)
> > >
> > > 	return apache.OK
> >
> > So what specifically is wrong with the above code's behaviour? What it is
> > supposed to do and what does it really do?
> >
> > Grisha
> >
> > _______________________________________________
> > Mod_python mailing list
> > Mod_python@modpython.org
> > http://www.modpython.org/mailman/listinfo/mod_python
>
>


From Mongryong at sympatico.ca  Fri Jan 10 12:54:27 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 21:59:51 2004
Subject: [mod_python] 4XSLT/XML (4Suite) is not functioning correctly
In-Reply-To: <20030110123723.R80550-100000@eden.ispol.com>
References: <20030110123723.R80550-100000@eden.ispol.com>
Message-ID: <1042221267.1299.32.camel@refugeeMedia>

In my original script, I did include absolute paths.  I did not include
the absolute paths in the email version of the script.  But even with
the absolute path, I get the same 'empty' result.

On Fri, 2003-01-10 at 12:39, Gregory (Grisha) Trubetskoy wrote:
> 
> My first guess would be something relating to current directory. In true
> CGI, the current directory is set to that of where the script is located.
> Mod_python doesn't do this because changing directory is not a thread-safe
> thing to do. I'd try it with absolute paths to the files.
> 
> Grisha
> 
> On 10 Jan 2003, Mongryong wrote:
> 
> > I've attached two files:
> >
> > cgi_result.html: the correct result as outputted by cgi/standalone
> > version of my script
> >
> > modpython_result.html: the result as outputted by a mod_python version
> > of my script
> >
> > >From the result, you should see that the html body is empty in modpython
> > version.  I've done some tests with the mod_python version of my script
> > and everything seems correct up to this point:
> >
> > res = p.run(src, topLevelParams={'error':0} )
> >
> > 'res' is the result of the transformation as a string.  The
> > 'request.xsl' provides instructions to the XSLT engine on how to
> > transform 'request.xml' to a HTML document.  No errors or exceptions are
> > thrown.  It just seems as if the 'values' in 'request.xml' are NULL
> > (empty) - hence, the body of the HTML is empty.
> >
> > Like I said previously, I've tried switching to a different XML/XSLT
> > library (libxml2/libxslt from GNOME project) and I get the same result.
> >
> > On Fri, 2003-01-10 at 11:05, Gregory (Grisha) Trubetskoy wrote:
> > >
> > > On 10 Jan 2003, Kia Vang wrote:
> > >
> > > > Okay, I'm really frustrated.  My code seems very simple, yet I can't get
> > > > mod_python to output it correctly.
> > > >
> > > > Here's the mod_python code:
> > > >
> > > > from Ft.Xml import InputSource
> > > > from Ft.Xml.Xsl import Processor
> > > >
> > > > from mod_python import apache
> > > >
> > > > def handler(req):
> > > > 	p = Processor.Processor()
> > > > 	trans = InputSource.DefaultFactory.fromUri("request.xsl")
> > > > 	src = InputSource.DefaultFactory.fromUri("request.xml")
> > > > 	p.appendStylesheet(trans)
> > > > 	res = p.run(src, topLevelParams={'error':0} )
> > > >
> > > > 	req.content_type="text/html"
> > > > 	req.write(res)
> > > >
> > > > 	return apache.OK
> > >
> > > So what specifically is wrong with the above code's behaviour? What it is
> > > supposed to do and what does it really do?
> > >
> > > Grisha
> > >
> > > _______________________________________________
> > > Mod_python mailing list
> > > Mod_python@modpython.org
> > > http://www.modpython.org/mailman/listinfo/mod_python
> >
> >
> 



From thm at duke.edu  Sat Jan 11 21:56:00 2003
From: thm at duke.edu (Hunter Matthews)
Date: Fri Jan  9 21:59:51 2004
Subject: [mod_python] Upgrade to mod_python 3.0.0 causes some handlers not to run.
Message-ID: <1042340165.1840.16.camel@jade.biology.duke.edu>

I have program (current) that successfully uses the following
confirguration under apache 1.3.24 and mod_python 2.7.8 (redhat 7.2 or
7.3, basically) to have a TypeHandler, AccessHandler, and PythonHander
run on some get requests.

If I take this same configuration to httpd 2.0.40 and mod_python 3.0.0
(redhat 8.0) the python handler runs for the /XMLRPC requests, but
neither the TypeHandler or the AccessHandler is running for the
/XMLRPC/$RHN requests.

I'm assuming this a mod_python config issue, but some other 1.3-> 2.0
upgrade issue may have me here - my ignorance with apache 2.0 is nearly
complete.

Note that its the first block that works perfectly - all the  "/XMLRPC$"
are dealt with by the simple "handler()" function, and they seem to work
fine.

The "/XMLRPC/$RHN" hits _don't_ use the "handler()" function, but do
need to be run through the accesshandler() and the typehandler() (both,
for each request) but neither is running. 

Suggestions?
-----------------------------------------------------------------------------
Alias /XMLRPC/$RHN /local/linux/current/www

<Directory /local/linux/current/www>
    # Make certain this is set - current won't work without it
    Options FollowSymLinks
</Directory>

<Location ~ "/XMLRPC$">
    PythonPath "sys.path + ['/usr/share/current']"
    SetHandler python-program
    PythonHandler current_apache
</Location>

<Location /XMLRPC/$RHN>
    PythonPath "sys.path + ['/usr/share/current']"
    PythonHandlerModule current_apache
</Location>

-- 
Hunter Matthews                          Unix / Network Administrator
Office: BioScience 145/244               Duke Univ. Biology Department
Key: F0F88438 / FFB5 34C0 B350 99A4 BB02  9779 A5DB 8B09 F0F8 8438
Never take candy from strangers. Especially on the internet.


From LBerezhny at DevIS.com  Sun Jan 12 20:35:11 2003
From: LBerezhny at DevIS.com (Lex Berezhny)
Date: Fri Jan  9 21:59:51 2004
Subject: [mod_python] session data and shared memory
Message-ID: <1042421711.5857.17.camel@buddha>

hello,

I know the issue of session management has been brought up before, but I
have a more specific question on the topic. Is there a way to keep
session state across threads/forked apache processes?

Storing the session state in a database carries a lot of overhead since
every request requires at least one query.

Another solution I had in mind was to use the ZODB with ZEO, so that
when a user logs in for example a session object will be created in the
ZODB. But this seems like a great deal of hoops just to store a few
attributes of session.

I have also thought about implementing a very basic LDAP like session
registry service. Each mod_python process would open a connection to
this registry and be able to share session data with other processes.

Has anyone else faced such a problem? Are there any other ways to
synchronize data between mod_python instances?

thanks in advance,

 - lex

-- 
Lex Berezhny <LBerezhny@DevIS.com>


From gnb at itga.com.au  Mon Jan 13 13:40:51 2003
From: gnb at itga.com.au (Gregory Bond)
Date: Fri Jan  9 21:59:51 2004
Subject: [mod_python] session data and shared memory 
In-Reply-To: Your message of 12 Jan 2003 20:35:11 -0500.
Message-ID: <200301130240.NAA18281@lightning.itga.com.au>

LBerezhny@DevIS.com said:
> Has anyone else faced such a problem? Are there any other ways to
> synchronize data between mod_python instances? 

I'm using Albatross (http://www.object-craft.com.au/projects/albatross/) with 
great success for maintaining lots and lots of state in mod_python 
applications.  But it's a framework that might be hard to bolt on to existing 
mod_python code.



From jeffstearns at attbi.com  Sun Jan 12 18:53:37 2003
From: jeffstearns at attbi.com (Jeff Stearns)
Date: Fri Jan  9 21:59:51 2004
Subject: [mod_python] session data and shared memory
In-Reply-To: <1042421711.5857.17.camel@buddha>
Message-ID: <36FDCD68-26A2-11D7-8974-0030653DCC28@attbi.com>

I've had good success with a dedicated "session server".  It's a small 
python server which stores key/value pairs in memory using a Python 
dictionary.

Each apache child maintains a persistent TCP connection to the server. 
It uses a simple RPC protocol to store and fetch key/value pairs. The 
protocol allows for arbitrary binary data of unlimited size.

The server ages out stale data after it hasn't been used for a while.

I also wrote a tiny client-side connection manager in C which handles 
all the details of making and re-establishing connections.

I've used this in commercial web sites. Performance is excellent 
because overhead is so small. (It was originally developed on an 
ancient SPARC.) I might be able to dig up the source if you're 
interested, but it's not hard to write your own.

-jeff stearns

On Sunday, January 12, 2003, at 05:35 PM, Lex Berezhny wrote:

> hello,
>
> I know the issue of session management has been brought up before, but 
> I
> have a more specific question on the topic. Is there a way to keep
> session state across threads/forked apache processes?
>
> Storing the session state in a database carries a lot of overhead since
> every request requires at least one query.
>
> Another solution I had in mind was to use the ZODB with ZEO, so that
> when a user logs in for example a session object will be created in the
> ZODB. But this seems like a great deal of hoops just to store a few
> attributes of session.
>
> I have also thought about implementing a very basic LDAP like session
> registry service. Each mod_python process would open a connection to
> this registry and be able to share session data with other processes.
>
> Has anyone else faced such a problem? Are there any other ways to
> synchronize data between mod_python instances?
>
> thanks in advance,
>
>  - lex
>
> -- 
> Lex Berezhny <LBerezhny@DevIS.com>


From LBerezhny at DevIS.com  Sun Jan 12 22:41:12 2003
From: LBerezhny at DevIS.com (Lex Berezhny)
Date: Fri Jan  9 21:59:51 2004
Subject: [mod_python] session data and shared memory
In-Reply-To: <36FDCD68-26A2-11D7-8974-0030653DCC28@attbi.com>
References: <36FDCD68-26A2-11D7-8974-0030653DCC28@attbi.com>
Message-ID: <1042429272.6951.5.camel@buddha>

I would be most interested in this server, if you could find the code
that would be great.

I also took a look at Albatross (from Gregs post) and it contains a
rather simple but elegant session server, similar to what you have
described. If all else fails I will go with that, but I would like to
see your solution first :-)

thanks,

 - lex

On Sun, 2003-01-12 at 21:53, Jeff Stearns wrote:
> I've had good success with a dedicated "session server".  It's a small 
> python server which stores key/value pairs in memory using a Python 
> dictionary.
> 
> Each apache child maintains a persistent TCP connection to the server. 
> It uses a simple RPC protocol to store and fetch key/value pairs. The 
> protocol allows for arbitrary binary data of unlimited size.
> 
> The server ages out stale data after it hasn't been used for a while.
> 
> I also wrote a tiny client-side connection manager in C which handles 
> all the details of making and re-establishing connections.
> 
> I've used this in commercial web sites. Performance is excellent 
> because overhead is so small. (It was originally developed on an 
> ancient SPARC.) I might be able to dig up the source if you're 
> interested, but it's not hard to write your own.
> 
> -jeff stearns
> 
> On Sunday, January 12, 2003, at 05:35 PM, Lex Berezhny wrote:
> 
> > hello,
> >
> > I know the issue of session management has been brought up before, but 
> > I
> > have a more specific question on the topic. Is there a way to keep
> > session state across threads/forked apache processes?
> >
> > Storing the session state in a database carries a lot of overhead since
> > every request requires at least one query.
> >
> > Another solution I had in mind was to use the ZODB with ZEO, so that
> > when a user logs in for example a session object will be created in the
> > ZODB. But this seems like a great deal of hoops just to store a few
> > attributes of session.
> >
> > I have also thought about implementing a very basic LDAP like session
> > registry service. Each mod_python process would open a connection to
> > this registry and be able to share session data with other processes.
> >
> > Has anyone else faced such a problem? Are there any other ways to
> > synchronize data between mod_python instances?
> >
> > thanks in advance,
> >
> >  - lex
> >
> > -- 
> > Lex Berezhny <LBerezhny@DevIS.com>
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
-- 
Lex Berezhny <LBerezhny@DevIS.com>


From conrad at hep.caltech.edu  Sun Jan 12 20:07:29 2003
From: conrad at hep.caltech.edu (Conrad Steenberg)
Date: Fri Jan  9 21:59:51 2004
Subject: [mod_python] session data and shared memory
In-Reply-To: <1042421711.5857.17.camel@buddha>
References: <1042421711.5857.17.camel@buddha>
Message-ID: <1042430849.11468.94.camel@192.168.1.103>

Hi Lex

You can also take a look at using Berkeley DB, which carries a lot less
overhead than traditional DBs, and stores key value pairs (it looks like
a dictionary). It is very fast, persistent, and scales to TBs in size.
Which you hopefully don't need ;-)

The Python binding is at pybsddb.sf.net. I use it for an XML-RPC app
server at clarens.sf.net.

Cheers

Conrad

On Sun, 2003-01-12 at 17:35, Lex Berezhny wrote:
> hello,
> 
> I know the issue of session management has been brought up before, but I
> have a more specific question on the topic. Is there a way to keep
> session state across threads/forked apache processes?
> 
> Storing the session state in a database carries a lot of overhead since
> every request requires at least one query.
> 
> Another solution I had in mind was to use the ZODB with ZEO, so that
> when a user logs in for example a session object will be created in the
> ZODB. But this seems like a great deal of hoops just to store a few
> attributes of session.
> 
> I have also thought about implementing a very basic LDAP like session
> registry service. Each mod_python process would open a connection to
> this registry and be able to share session data with other processes.
> 
> Has anyone else faced such a problem? Are there any other ways to
> synchronize data between mod_python instances?
> 
> thanks in advance,
> 
>  - lex
-- 
Conrad Steenberg <conrad@hep.caltech.edu>


From Mongryong at sympatico.ca  Mon Jan 13 02:14:39 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 21:59:51 2004
Subject: [mod_python] 4XSLT/XML (4Suite) is not functioning correctly
In-Reply-To: <1042221267.1299.32.camel@refugeeMedia>
References: <20030110123723.R80550-100000@eden.ispol.com> 
	<1042221267.1299.32.camel@refugeeMedia>
Message-ID: <1042442079.1292.122.camel@refugeeMedia>

I forgot to mention this, but the same problem also occurs when the
source XML document is a string (or a cString.StringIO).

For example:

p = Processor.Processor()
trans = InputSource.DefaultFactory.fromUri("someXSLTdoc.xsl")
src = cString.StringIO ()
someModule.makeXMLdoc(src)
p.appendStylesheet(trans)
res = p.run(src)

req.content_type="text/html"
req.write(res)

return apache.OK  

On Fri, 2003-01-10 at 12:54, Mongryong wrote:
> In my original script, I did include absolute paths.  I did not include
> the absolute paths in the email version of the script.  But even with
> the absolute path, I get the same 'empty' result.
> 
> On Fri, 2003-01-10 at 12:39, Gregory (Grisha) Trubetskoy wrote:
> > 
> > My first guess would be something relating to current directory. In true
> > CGI, the current directory is set to that of where the script is located.
> > Mod_python doesn't do this because changing directory is not a thread-safe
> > thing to do. I'd try it with absolute paths to the files.
> > 
> > Grisha
> > 
> > On 10 Jan 2003, Mongryong wrote:
> > 
> > > I've attached two files:
> > >
> > > cgi_result.html: the correct result as outputted by cgi/standalone
> > > version of my script
> > >
> > > modpython_result.html: the result as outputted by a mod_python version
> > > of my script
> > >
> > > >From the result, you should see that the html body is empty in modpython
> > > version.  I've done some tests with the mod_python version of my script
> > > and everything seems correct up to this point:
> > >
> > > res = p.run(src, topLevelParams={'error':0} )
> > >
> > > 'res' is the result of the transformation as a string.  The
> > > 'request.xsl' provides instructions to the XSLT engine on how to
> > > transform 'request.xml' to a HTML document.  No errors or exceptions are
> > > thrown.  It just seems as if the 'values' in 'request.xml' are NULL
> > > (empty) - hence, the body of the HTML is empty.
> > >
> > > Like I said previously, I've tried switching to a different XML/XSLT
> > > library (libxml2/libxslt from GNOME project) and I get the same result.
> > >
> > > On Fri, 2003-01-10 at 11:05, Gregory (Grisha) Trubetskoy wrote:
> > > >
> > > > On 10 Jan 2003, Kia Vang wrote:
> > > >
> > > > > Okay, I'm really frustrated.  My code seems very simple, yet I can't get
> > > > > mod_python to output it correctly.
> > > > >
> > > > > Here's the mod_python code:
> > > > >
> > > > > from Ft.Xml import InputSource
> > > > > from Ft.Xml.Xsl import Processor
> > > > >
> > > > > from mod_python import apache
> > > > >
> > > > > def handler(req):
> > > > > 	p = Processor.Processor()
> > > > > 	trans = InputSource.DefaultFactory.fromUri("request.xsl")
> > > > > 	src = InputSource.DefaultFactory.fromUri("request.xml")
> > > > > 	p.appendStylesheet(trans)
> > > > > 	res = p.run(src, topLevelParams={'error':0} )
> > > > >
> > > > > 	req.content_type="text/html"
> > > > > 	req.write(res)
> > > > >
> > > > > 	return apache.OK
> > > >
> > > > So what specifically is wrong with the above code's behaviour? What it is
> > > > supposed to do and what does it really do?
> > > >
> > > > Grisha
> > > >
> > > > _______________________________________________
> > > > Mod_python mailing list
> > > > Mod_python@modpython.org
> > > > http://www.modpython.org/mailman/listinfo/mod_python
> > >
> > >
> > 
> 
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python



From thanos at 0x01.com  Mon Jan 13 20:06:38 2003
From: thanos at 0x01.com (thanos vassilakis)
Date: Fri Jan  9 21:59:51 2004
Subject: [mod_python] session data and shared memory
In-Reply-To: <1042430849.11468.94.camel@192.168.1.103>
Message-ID: <6F1E0EE9-275C-11D7-BC6F-00306559D868@0x01.com>

You should check out:
How-To: Easy mod_python Session Handling with pso.session
http://sourceforge.net/docman/display_doc.php?docid=10174&group_id=49265

We are using pso at the NYSE with success.

thanos


On Sunday, January 12, 2003, at 11:07  PM, Conrad Steenberg wrote:

> Hi Lex
>
> You can also take a look at using Berkeley DB, which carries a lot less
> overhead than traditional DBs, and stores key value pairs (it looks 
> like
> a dictionary). It is very fast, persistent, and scales to TBs in size.
> Which you hopefully don't need ;-)
>
> The Python binding is at pybsddb.sf.net. I use it for an XML-RPC app
> server at clarens.sf.net.
>
> Cheers
>
> Conrad
>
> On Sun, 2003-01-12 at 17:35, Lex Berezhny wrote:
>> hello,
>>
>> I know the issue of session management has been brought up before, 
>> but I
>> have a more specific question on the topic. Is there a way to keep
>> session state across threads/forked apache processes?
>>
>> Storing the session state in a database carries a lot of overhead 
>> since
>> every request requires at least one query.
>>
>> Another solution I had in mind was to use the ZODB with ZEO, so that
>> when a user logs in for example a session object will be created in 
>> the
>> ZODB. But this seems like a great deal of hoops just to store a few
>> attributes of session.
>>
>> I have also thought about implementing a very basic LDAP like session
>> registry service. Each mod_python process would open a connection to
>> this registry and be able to share session data with other processes.
>>
>> Has anyone else faced such a problem? Are there any other ways to
>> synchronize data between mod_python instances?
>>
>> thanks in advance,
>>
>>  - lex
> -- 
> Conrad Steenberg <conrad@hep.caltech.edu>
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python


From sa at sfsu.edu  Mon Jan 13 18:11:27 2003
From: sa at sfsu.edu (Sean Abrahams)
Date: Fri Jan  9 21:59:51 2004
Subject: [mod_python] Database Help
Message-ID: <17983005796.20030113181127@sfsu.edu>

I'm implementing mod_python and everything is working fine, until I
try to pass an UPDATE sql statement to a database.

I'm grabbing info from one database, and inserting/updating into
another database.

When grabbing, I call upon my dbSelect(db, keys, sql, rows) function,
which connects to a specified database (db) and selects the info.
Works great.

To update/insert I call upon my dbDo(db, sql) function. This function
connects to the specified database (db) and runs the sql. Python wise
everything seems to work fine. I call the dbDo and nothing appears to
go wrong. Except when I look at the data in the db, it wasn't updated.

All of this works fine from the interpreter, so I'm thinking it may
deal with the way mod_python handles processes and dbconnections, of
which I know very little of.

Thus, does connecting to two different databases, right after one
another, cause a problem in mod_python? I'm supposing I must change my
dbConnect() function to take this into consideration due to the way
mod_python/apache function.

Some ideas? I want to learn!

Thanks,
--Sean

Running:
Apache/2.0.43 (Debian GNU/Linux) DAV/2 mod_python/3.0.1 Python/2.2.1
cx_Oracle


From tim.parker at intec-telecom-systems.com  Tue Jan 14 14:49:53 2003
From: tim.parker at intec-telecom-systems.com (Tim Parker)
Date: Fri Jan  9 21:59:51 2004
Subject: [mod_python] Query about FieldStorage
Message-ID: <1042555792.16629.16.camel@isukws0321>

Hi,

I have recently installed Python 2.2.2 and Apache 2.0.43, and have
configured a directory to execute mod_python.  The problem I have is I
do not seem to be able to access any of the environment variables in the
Request Object form object.  Below is the part of my httpd.conf file and
also the python script that I am using.

# Adding directory for python
Alias /python/ "/usr/local/apache2/mod_python/"

<Directory "/usr/local/apache2/mod_python">
    AddHandler python-program .py
    SetHandler python-program
    PythonPath "sys.path+['/usr/local/apache2/mod_python']"
    PythonHandler mod_python.publisher
    Options +ExecCGI
    PythonDebug On
</Directory>

And the python function is as follows:

def my_test(req):
  dict = req.form

  list = req.form.list

  keys = dict.keys()
  str = dict_to_str(dict)

  str = "<H1>Test Page for FieldStorage</H1>\n"+ str + "\nlen(list) %d"
% len(list)

  return str


If anyone had any ideas or somewhere I can look at some examples for
using CGI Environment variables that would be really helpful.

Thanks in advance
regards
Tim.



This e-mail and any attachments are confidential and may also be privileged and/or copyright 
material of Intec Telecom Systems PLC (or its affiliated companies).  If you are not an 
intended or authorised recipient of this e-mail or have received it in error, please delete 
it immediately and notify the sender by e-mail.  In such a case, reading, reproducing, 
printing or further dissemination of this e-mail is strictly prohibited and may be unlawful. 
Intec Telecom Systems PLC. does not represent or warrant that an attachment hereto is free 
from computer viruses or other defects. The opinions expressed in this e-mail and any 
attachments may be those of the author and are not necessarily those of Intec Telecom 
Systems PLC. 

This footnote also confirms that this email message has been swept by
MIMEsweeper for the presence of computer viruses.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20030114/51d59bd9/attachment-0002.htm
From grisha at modpython.org  Tue Jan 14 11:23:31 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:59:51 2004
Subject: [mod_python] Query about FieldStorage
In-Reply-To: <1042555792.16629.16.camel@isukws0321>
Message-ID: <20030114112118.W76303-100000@eden.ispol.com>

Tim - look for "subprocess_env" here:

http://www.modpython.org/live/mod_python-3.0.1/doc-html/pyapi-mprequest-mem.html

Grisha

On 14 Jan 2003, Tim Parker wrote:

> Hi,
>
> I have recently installed Python 2.2.2 and Apache 2.0.43, and have
> configured a directory to execute mod_python.  The problem I have is I
> do not seem to be able to access any of the environment variables in the
> Request Object form object.  Below is the part of my httpd.conf file and
> also the python script that I am using.
>
> # Adding directory for python
> Alias /python/ "/usr/local/apache2/mod_python/"
>
> <Directory "/usr/local/apache2/mod_python">
>     AddHandler python-program .py
>     SetHandler python-program
>     PythonPath "sys.path+['/usr/local/apache2/mod_python']"
>     PythonHandler mod_python.publisher
>     Options +ExecCGI
>     PythonDebug On
> </Directory>
>
> And the python function is as follows:
>
> def my_test(req):
>   dict = req.form
>
>   list = req.form.list
>
>   keys = dict.keys()
>   str = dict_to_str(dict)
>
>   str = "<H1>Test Page for FieldStorage</H1>\n"+ str + "\nlen(list) %d"
> % len(list)
>
>   return str
>
>
> If anyone had any ideas or somewhere I can look at some examples for
> using CGI Environment variables that would be really helpful.
>
> Thanks in advance
> regards
> Tim.
>
>
>
> This e-mail and any attachments are confidential and may also be privileged and/or copyright
> material of Intec Telecom Systems PLC (or its affiliated companies).  If you are not an
> intended or authorised recipient of this e-mail or have received it in error, please delete
> it immediately and notify the sender by e-mail.  In such a case, reading, reproducing,
> printing or further dissemination of this e-mail is strictly prohibited and may be unlawful.
> Intec Telecom Systems PLC. does not represent or warrant that an attachment hereto is free
> from computer viruses or other defects. The opinions expressed in this e-mail and any
> attachments may be those of the author and are not necessarily those of Intec Telecom
> Systems PLC.
>
> This footnote also confirms that this email message has been swept by
> MIMEsweeper for the presence of computer viruses.
>
>


From sa at sfsu.edu  Tue Jan 14 10:43:49 2003
From: sa at sfsu.edu (Sean Abrahams)
Date: Fri Jan  9 21:59:51 2004
Subject: [mod_python] Database Help
In-Reply-To: <D31B04F24EDE7644BB169BB4F080778A06C236A9@s30342g004005>
References: <D31B04F24EDE7644BB169BB4F080778A06C236A9@s30342g004005>
Message-ID: <41042547859.20030114104349@sfsu.edu>

Thanks for all the replies, but I am indeed committing my statement.
Remember I said it worked when not using mod_python =).

Here's my dbDo function:

def dbDo(db, sql):
    dbCon = dbConnect(db)
    dbCursor = dbCon.cursor()

    dbCursor.execute(sql)
    dbCon.commit()

None of this really makes sense because the code seems to run fine,
giving back no errors. It doesn't even work when I tell it to
explicitly run commit via a sql statement.

I'm using cx_Oracle module to connect to an Oracle 8.1.6 database.

In mod_python must you first disconnect from a database, before
connecting to another one, within the same script?

Thanks for the help.

--Sean
    
Tuesday, January 14, 2003, 6:07:32 AM, you wrote:

YH> I am going to make a simple guess here. I might be wrong but I have been
YH> caught off guard when I forget to issue a commit statement. Maybe the
YH> database connections on the updates/inserts are not automatically
YH> committing.

YH> -----Original Message-----
YH> From: Sean Abrahams [mailto:sa@sfsu.edu]
YH> Sent: Monday, January 13, 2003 9:11 PM
YH> To: mod_python@modpython.org
YH> Subject: [mod_python] Database Help


YH> I'm implementing mod_python and everything is working fine, until I
YH> try to pass an UPDATE sql statement to a database.

YH> I'm grabbing info from one database, and inserting/updating into
YH> another database.

YH> When grabbing, I call upon my dbSelect(db, keys, sql, rows) function,
YH> which connects to a specified database (db) and selects the info.
YH> Works great.

YH> To update/insert I call upon my dbDo(db, sql) function. This function
YH> connects to the specified database (db) and runs the sql. Python wise
YH> everything seems to work fine. I call the dbDo and nothing appears to
YH> go wrong. Except when I look at the data in the db, it wasn't updated.

YH> All of this works fine from the interpreter, so I'm thinking it may
YH> deal with the way mod_python handles processes and dbconnections, of
YH> which I know very little of.

YH> Thus, does connecting to two different databases, right after one
YH> another, cause a problem in mod_python? I'm supposing I must change my
YH> dbConnect() function to take this into consideration due to the way
YH> mod_python/apache function.

YH> Some ideas? I want to learn!

YH> Thanks,
YH> --Sean

YH> Running:
YH> Apache/2.0.43 (Debian GNU/Linux) DAV/2 mod_python/3.0.1 Python/2.2.1
YH> cx_Oracle

YH> _______________________________________________
YH> Mod_python mailing list
YH> Mod_python@modpython.org
YH> http://www.modpython.org/mailman/listinfo/mod_python


From sa at sfsu.edu  Tue Jan 14 10:49:15 2003
From: sa at sfsu.edu (Sean Abrahams)
Date: Fri Jan  9 21:59:51 2004
Subject: [mod_python] Database Help
In-Reply-To: <D31B04F24EDE7644BB169BB4F080778A06C236A9@s30342g004005>
References: <D31B04F24EDE7644BB169BB4F080778A06C236A9@s30342g004005>
Message-ID: <481042874359.20030114104915@sfsu.edu>

Please ignore my last message. I solved the problem, and it wasn't
mod_python related. It had to do with a global variable mixup.

Ahh, the little things.

I apologize for the inconvenience and thanks again for everyones help.

--Sean


Tuesday, January 14, 2003, 6:07:32 AM, you wrote:

YH> I am going to make a simple guess here. I might be wrong but I have been
YH> caught off guard when I forget to issue a commit statement. Maybe the
YH> database connections on the updates/inserts are not automatically
YH> committing.

YH> -----Original Message-----
YH> From: Sean Abrahams [mailto:sa@sfsu.edu]
YH> Sent: Monday, January 13, 2003 9:11 PM
YH> To: mod_python@modpython.org
YH> Subject: [mod_python] Database Help


YH> I'm implementing mod_python and everything is working fine, until I
YH> try to pass an UPDATE sql statement to a database.

YH> I'm grabbing info from one database, and inserting/updating into
YH> another database.

YH> When grabbing, I call upon my dbSelect(db, keys, sql, rows) function,
YH> which connects to a specified database (db) and selects the info.
YH> Works great.

YH> To update/insert I call upon my dbDo(db, sql) function. This function
YH> connects to the specified database (db) and runs the sql. Python wise
YH> everything seems to work fine. I call the dbDo and nothing appears to
YH> go wrong. Except when I look at the data in the db, it wasn't updated.

YH> All of this works fine from the interpreter, so I'm thinking it may
YH> deal with the way mod_python handles processes and dbconnections, of
YH> which I know very little of.

YH> Thus, does connecting to two different databases, right after one
YH> another, cause a problem in mod_python? I'm supposing I must change my
YH> dbConnect() function to take this into consideration due to the way
YH> mod_python/apache function.

YH> Some ideas? I want to learn!

YH> Thanks,
YH> --Sean

YH> Running:
YH> Apache/2.0.43 (Debian GNU/Linux) DAV/2 mod_python/3.0.1 Python/2.2.1
YH> cx_Oracle

YH> _______________________________________________
YH> Mod_python mailing list
YH> Mod_python@modpython.org
YH> http://www.modpython.org/mailman/listinfo/mod_python


From Hans.Yandle at cingular.com  Tue Jan 14 13:57:00 2003
From: Hans.Yandle at cingular.com (Yandle, Hans)
Date: Fri Jan  9 21:59:51 2004
Subject: [mod_python] Database Help
Message-ID: <D31B04F24EDE7644BB169BB4F080778A06C236B1@s30342g004005>

Well, I do not have any experience with Oracle db connections. With MS ODBC
connections using the win32 extensions, I have had to issue commit() then
close() for information to take affect. I have used MySQL dbi and PySQLite
with no problems with just commits only. When you run your database update
script, test and see if it is actually committed the data before the
termination of the python script. To my knowledge when a python script
finishes the variables are cleaned up and connections closed. Perhaps the
termination of the python script is causing the buffers or information to be
committed. Maybe a question to the Oracle python dbi maintainer/group might
help.

-----Original Message-----
From: Sean Abrahams [mailto:sa@sfsu.edu]
Sent: Tuesday, January 14, 2003 1:44 PM
To: Yandle, Hans; mod_python@modpython.org
Subject: Re[2]: [mod_python] Database Help


Thanks for all the replies, but I am indeed committing my statement.
Remember I said it worked when not using mod_python =).

Here's my dbDo function:

def dbDo(db, sql):
    dbCon = dbConnect(db)
    dbCursor = dbCon.cursor()

    dbCursor.execute(sql)
    dbCon.commit()

None of this really makes sense because the code seems to run fine,
giving back no errors. It doesn't even work when I tell it to
explicitly run commit via a sql statement.

I'm using cx_Oracle module to connect to an Oracle 8.1.6 database.

In mod_python must you first disconnect from a database, before
connecting to another one, within the same script?

Thanks for the help.

--Sean
    
Tuesday, January 14, 2003, 6:07:32 AM, you wrote:

YH> I am going to make a simple guess here. I might be wrong but I have been
YH> caught off guard when I forget to issue a commit statement. Maybe the
YH> database connections on the updates/inserts are not automatically
YH> committing.

YH> -----Original Message-----
YH> From: Sean Abrahams [mailto:sa@sfsu.edu]
YH> Sent: Monday, January 13, 2003 9:11 PM
YH> To: mod_python@modpython.org
YH> Subject: [mod_python] Database Help


YH> I'm implementing mod_python and everything is working fine, until I
YH> try to pass an UPDATE sql statement to a database.

YH> I'm grabbing info from one database, and inserting/updating into
YH> another database.

YH> When grabbing, I call upon my dbSelect(db, keys, sql, rows) function,
YH> which connects to a specified database (db) and selects the info.
YH> Works great.

YH> To update/insert I call upon my dbDo(db, sql) function. This function
YH> connects to the specified database (db) and runs the sql. Python wise
YH> everything seems to work fine. I call the dbDo and nothing appears to
YH> go wrong. Except when I look at the data in the db, it wasn't updated.

YH> All of this works fine from the interpreter, so I'm thinking it may
YH> deal with the way mod_python handles processes and dbconnections, of
YH> which I know very little of.

YH> Thus, does connecting to two different databases, right after one
YH> another, cause a problem in mod_python? I'm supposing I must change my
YH> dbConnect() function to take this into consideration due to the way
YH> mod_python/apache function.

YH> Some ideas? I want to learn!

YH> Thanks,
YH> --Sean

YH> Running:
YH> Apache/2.0.43 (Debian GNU/Linux) DAV/2 mod_python/3.0.1 Python/2.2.1
YH> cx_Oracle

YH> _______________________________________________
YH> Mod_python mailing list
YH> Mod_python@modpython.org
YH> http://www.modpython.org/mailman/listinfo/mod_python
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20030114/a35ad92e/attachment-0002.htm
From thm at duke.edu  Tue Jan 14 18:37:34 2003
From: thm at duke.edu (Hunter Matthews)
Date: Fri Jan  9 21:59:51 2004
Subject: [mod_python] Upgrade to mod_python 3.0.0 causes some handlers
	not to run.
In-Reply-To: <1042340165.1840.16.camel@jade.biology.duke.edu>
References: <1042340165.1840.16.camel@jade.biology.duke.edu>
Message-ID: <1042587454.1423.25.camel@jade.biology.duke.edu>

Sorry to reply to my own email, but if anyone wants a simple working
test case, let me know I'll post that to this list - this has both the
developers of current completely stumped.



On Sat, 2003-01-11 at 21:56, Hunter Matthews wrote:
> I have program (current) that successfully uses the following
> confirguration under apache 1.3.24 and mod_python 2.7.8 (redhat 7.2 or
> 7.3, basically) to have a TypeHandler, AccessHandler, and PythonHander
> run on some get requests.
> 
> If I take this same configuration to httpd 2.0.40 and mod_python 3.0.0
> (redhat 8.0) the python handler runs for the /XMLRPC requests, but
> neither the TypeHandler or the AccessHandler is running for the
> /XMLRPC/$RHN requests.
> 
> I'm assuming this a mod_python config issue, but some other 1.3-> 2.0
> upgrade issue may have me here - my ignorance with apache 2.0 is nearly
> complete.
> 
> Note that its the first block that works perfectly - all the  "/XMLRPC$"
> are dealt with by the simple "handler()" function, and they seem to work
> fine.
> 
> The "/XMLRPC/$RHN" hits _don't_ use the "handler()" function, but do
> need to be run through the accesshandler() and the typehandler() (both,
> for each request) but neither is running. 
> 
> Suggestions?
> -----------------------------------------------------------------------------
> Alias /XMLRPC/$RHN /local/linux/current/www
> 
> <Directory /local/linux/current/www>
>     # Make certain this is set - current won't work without it
>     Options FollowSymLinks
> </Directory>
> 
> <Location ~ "/XMLRPC$">
>     PythonPath "sys.path + ['/usr/share/current']"
>     SetHandler python-program
>     PythonHandler current_apache
> </Location>
> 
> <Location /XMLRPC/$RHN>
>     PythonPath "sys.path + ['/usr/share/current']"
>     PythonHandlerModule current_apache
> </Location>
> 
> -- 
> Hunter Matthews                          Unix / Network Administrator
> Office: BioScience 145/244               Duke Univ. Biology Department
> Key: F0F88438 / FFB5 34C0 B350 99A4 BB02  9779 A5DB 8B09 F0F8 8438
> Never take candy from strangers. Especially on the internet.
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 
> 
-- 
Hunter Matthews                          Unix / Network Administrator
Office: BioScience 145/244               Duke Univ. Biology Department
Key: F0F88438 / FFB5 34C0 B350 99A4 BB02  9779 A5DB 8B09 F0F8 8438
Never take candy from strangers. Especially on the internet.


From neo at https.ru  Wed Jan 15 03:17:12 2003
From: neo at https.ru (Neo Eureka)
Date: Fri Jan  9 21:59:51 2004
Subject: [mod_python] ?
Message-ID: <18341556445.20030115031712@https.ru>

  Hi, folks !

  Some questions for Grisha.
  I use Python and mod_python in commercial projects, where the
stability is very important. So I want to ask when do you plan to
issue the next stable version of mod_python (or at least the
alpha-beta stuff) with all the fixes and features which has been
reported and discussed on the mail lists and in the documentation, and
those which you, as the author, might want to include ?

--- 
Neo Eureka / mailto:neo@https.ru


From mark at camazotz.com  Wed Jan 15 14:48:22 2003
From: mark at camazotz.com (Mark Smith)
Date: Fri Jan  9 21:59:51 2004
Subject: [mod_python] mod_python and MultiViews
Message-ID: <4DFF2CEE-28C2-11D7-ADE3-00039364CE50@camazotz.com>

I have mod_python 3.0 running with Apache 2.0.43.  Using the publisher 
handler, a request for "/foo.py/bar" resolves correctly.  If I turn on 
MultiViews in httpd.conf and use the URL "/foo/bar", it fails.  In the 
error log, I get:

   Negotiation: discovered file(s) matching request: /apache2/htdocs/foo
   (None could be negotiated).

This is on an OpenBSD system, but the same thing works fine on Mac OS 
X.  Anyone know what I'm missing to convince Apache that it should 
accept foo.py?

thx


From jwm-modpython at sentinelchicken.net  Wed Jan 15 16:17:08 2003
From: jwm-modpython at sentinelchicken.net (Jason Morgan)
Date: Fri Jan  9 21:59:51 2004
Subject: [mod_python] IE not using cached images
Message-ID: <20030115211708.GA47149@sentinelchicken.net>

Please excuse me if this question is elementary. I am having trouble
with IE and its refusal to use images it caches. What happens is the
first time I hit my site, everything works as it should - all images are
downloaded, etc. If I then hit another page on my site with the same
images, IE refuses to use the images in its cache and instead requests
all of them again. Not only that, but the rollover images are requested
each and every time I put the mouse over the images. Now, if I hit
reload, then everything works fine again. If I hit another page, again,
the same problem, over and over and over again.

Now I've played with IE's settings and have discovered that setting
"Check for newer version of stored pages" to "Never" makes IE act as it
should. And I have checked if the images are actually getting cached,
they are. I have also tested other browsers (Opera, Netscape, etc.) and
none of these have the same problem.

Now to the question, should I be sending the client something (304?) to
tell it to use its cache unless the user specifically presses reload?

OS: FreeBSD 4.7
Apache: 1.3.27
Mod_python: 2.7.8
Python: 2.2.2

Thanks,

Jason


From geertj at boskant.nl  Wed Jan 15 22:55:57 2003
From: geertj at boskant.nl (Geert Jansen)
Date: Fri Jan  9 21:59:51 2004
Subject: [mod_python] IE not using cached images
In-Reply-To: <20030115211708.GA47149@sentinelchicken.net>
References: <20030115211708.GA47149@sentinelchicken.net>
Message-ID: <20030115215557.GA28196@vader.boskant.nl>

On Wed, Jan 15, 2003 at 04:17:08PM -0500, Jason Morgan wrote:

> Please excuse me if this question is elementary. I am having trouble
> with IE and its refusal to use images it caches. What happens is the
> first time I hit my site, everything works as it should - all images are
> downloaded, etc. If I then hit another page on my site with the same
> images, IE refuses to use the images in its cache and instead requests
> all of them again. Not only that, but the rollover images are requested
> each and every time I put the mouse over the images. Now, if I hit
> reload, then everything works fine again. If I hit another page, again,
> the same problem, over and over and over again.

I have seen this problem too. I did the following things:

* Make sure an appropriate "Last-Modified" http header is sent.
* If the image is dynamically generated, make sure that there is
  no query part in the URL, i.e. the part after '?'. I think MSIE
  reloads these URLs every time. You can still pass parameters by
  using path_info.

For me this worked.

Greetings,
Geert Jansen

From jwm-modpython at sentinelchicken.net  Wed Jan 15 19:45:27 2003
From: jwm-modpython at sentinelchicken.net (Jason Morgan)
Date: Fri Jan  9 21:59:51 2004
Subject: [mod_python] IE not using cached images
In-Reply-To: <20030115215557.GA28196@vader.boskant.nl>
References: <20030115211708.GA47149@sentinelchicken.net> <20030115215557.GA28196@vader.boskant.nl>
Message-ID: <20030116004527.GB47580@sentinelchicken.net>

On Wed, Jan 15, 2003 at 10:55:57PM +0100, Geert Jansen wrote:
>
> I have seen this problem too. I did the following things:
>
> * Make sure an appropriate "Last-Modified" http header is sent.

I'm sorry for my ignorance but how do I do this? Is this in addition to
send_http_header() or do I modify the http header to be sent?

> * If the image is dynamically generated, make sure that there is
>   no query part in the URL, i.e. the part after '?'. I think MSIE
>   reloads these URLs every time. You can still pass parameters by
>   using path_info.

This isn't an issue as all images are static.

Thanks,

Jason


From thanos at 0x01.com  Thu Jan 16 00:19:10 2003
From: thanos at 0x01.com (thanos vassilakis)
Date: Fri Jan  9 21:59:52 2004
Subject: [mod_python] Query about FieldStorage
In-Reply-To: <1042555792.16629.16.camel@isukws0321>
Message-ID: <0B1B5939-2912-11D7-8A98-00306559D868@0x01.com>

If you use pso you will have env available in a neat and easy manner:

http://sourceforge.net/docman/display_doc.php?docid=11314&group_id=49265

Or you can always see how in pso we get all the enviromental variables 
;)


good luck,

thanos


On Tuesday, January 14, 2003, at 09:49  AM, Tim Parker wrote:

> Hi,
>
> I have recently installed Python 2.2.2 and Apache 2.0.43, and have 
> configured a directory to execute mod_python.? The problem I have is I 
> do not seem to be able to access any of the environment variables in 
> the Request Object form object.? Below is the part of my httpd.conf 
> file and also the python script that I am using.
>
> # Adding directory for python
> Alias /python/ "/usr/local/apache2/mod_python/"
>
> <Directory "/usr/local/apache2/mod_python">
> ??? AddHandler python-program .py
> ??? SetHandler python-program
> ??? PythonPath "sys.path+['/usr/local/apache2/mod_python']"
> ??? PythonHandler mod_python.publisher
> ??? Options +ExecCGI
> ??? PythonDebug On
> </Directory>
>
> And the python function is as follows:
>
> def my_test(req):
> ? dict = req.form
>
> ? list = req.form.list
>
> ? keys = dict.keys()
> ? str = dict_to_str(dict)
>
> ? str = "<H1>Test Page for FieldStorage</H1>\n"+ str + "\nlen(list) 
> %d" % len(list)
>
> ? return str
>
>
> If anyone had any ideas or somewhere I can look at some examples for 
> using CGI Environment variables that would be really helpful.
>
> Thanks in advance
> regards
> Tim.
>
>
>
> This e-mail and any attachments are confidential and may also be 
> privileged and/or copyright
> material of Intec Telecom Systems PLC (or its affiliated companies). 
> If you are not an
> intended or authorised recipient of this e-mail or have received it in 
> error, please delete
> it immediately and notify the sender by e-mail. In such a case, 
> reading, reproducing,
> printing or further dissemination of this e-mail is strictly 
> prohibited and may be unlawful.
> Intec Telecom Systems PLC. does not represent or warrant that an 
> attachment hereto is free
> from computer viruses or other defects. The opinions expressed in this 
> e-mail and any
> attachments may be those of the author and are not necessarily those 
> of Intec Telecom
> Systems PLC.
>
> This footnote also confirms that this email message has been swept by
> MIMEsweeper for the presence of computer viruses.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: text/enriched
Size: 2398 bytes
Desc: not available
Url : http://mailman.modpython.org/pipermail/mod_python/attachments/20030116/bf4edf39/attachment-0002.bin
From jwm-modpython at sentinelchicken.net  Thu Jan 16 11:43:25 2003
From: jwm-modpython at sentinelchicken.net (Jason Morgan)
Date: Fri Jan  9 21:59:52 2004
Subject: [mod_python] IE not using cached images
In-Reply-To: <000901c2bd32$cc927540$bd6e4351@mixio7jpsmlatx>
References: <20030115211708.GA47149@sentinelchicken.net> <000901c2bd32$cc927540$bd6e4351@mixio7jpsmlatx>
Message-ID: <20030116164325.GD47580@sentinelchicken.net>

> This won't hurt:
> 
> req.headers_out.add("Cache-Control:","no-cache")
> req.headers_out.add("Pragma:","no-cache")

Won't this make the browser request the contents again? What I want is
for IE not to request what it already has cached.

> 
> as welll as adding this to your HTML header:
> 
> """<meta http-equiv="expires" content="Tue, 20 Aug 1996 01:00:00 GMT">\
> <meta http-equiv="Pragma" content="no-cache"><title>%s</title>%s</head>"""

Maybe the content expiration will work.

Thanks,

Jason

From jwm-modpython at sentinelchicken.net  Thu Jan 16 13:09:27 2003
From: jwm-modpython at sentinelchicken.net (Jason Morgan)
Date: Fri Jan  9 21:59:52 2004
Subject: [mod_python] IE not using cached images
In-Reply-To: <20030116164325.GD47580@sentinelchicken.net>
References: <20030115211708.GA47149@sentinelchicken.net> <000901c2bd32$cc927540$bd6e4351@mixio7jpsmlatx> <20030116164325.GD47580@sentinelchicken.net>
Message-ID: <20030116180927.GC49849@sentinelchicken.net>

As usual, the error was caused by my own ignorance. I fixed the problem
by sending adding an expiration date to the header.

req.headers_out.add('Expires',expire_date)

Thanks for everyone's help.

-Jason

On Thu, Jan 16, 2003 at 11:43:25AM -0500, Jason Morgan wrote:
> > This won't hurt:
> > 
> > req.headers_out.add("Cache-Control:","no-cache")
> > req.headers_out.add("Pragma:","no-cache")
> 
> Won't this make the browser request the contents again? What I want is
> for IE not to request what it already has cached.
> 
> > 
> > as welll as adding this to your HTML header:
> > 
> > """<meta http-equiv="expires" content="Tue, 20 Aug 1996 01:00:00 GMT">\
> > <meta http-equiv="Pragma" content="no-cache"><title>%s</title>%s</head>"""
> 
> Maybe the content expiration will work.
> 
> Thanks,
> 
> Jason
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python

From geertj at boskant.nl  Thu Jan 16 19:18:19 2003
From: geertj at boskant.nl (Geert Jansen)
Date: Fri Jan  9 21:59:52 2004
Subject: [mod_python] IE not using cached images
In-Reply-To: <20030116004527.GB47580@sentinelchicken.net>
References: <20030115211708.GA47149@sentinelchicken.net> <20030115215557.GA28196@vader.boskant.nl> <20030116004527.GB47580@sentinelchicken.net>
Message-ID: <20030116181819.GA9238@vader.boskant.nl>

On Wed, Jan 15, 2003 at 07:45:27PM -0500, Jason Morgan wrote:

Hello Jason,

> On Wed, Jan 15, 2003 at 10:55:57PM +0100, Geert Jansen wrote:
> >
> > I have seen this problem too. I did the following things:
> >
> > * Make sure an appropriate "Last-Modified" http header is sent.
> 
> I'm sorry for my ignorance but how do I do this? Is this in addition to
> send_http_header() or do I modify the http header to be sent?

You can use request.headers_out to add http headers.

But ... are you serving images with mod_python or are you using Apache for
that? Only if you are using mod_python, you can change the something about
the http response. But it would not make much sense IMHO to use mod_python
for this because Apache does a good job at serving static content.

When I wrote my response I was under the impression that you were using
mod_python for serving images.

> > * If the image is dynamically generated, make sure that there is
> >   no query part in the URL, i.e. the part after '?'. I think MSIE
> >   reloads these URLs every time. You can still pass parameters by
> >   using path_info.
> 
> This isn't an issue as all images are static.

Greetings,
Geert Jansen

From kriedel at syntricity.com  Thu Jan 16 16:13:46 2003
From: kriedel at syntricity.com (Klaus Riedel)
Date: Fri Jan  9 21:59:52 2004
Subject: [mod_python] mod_python installation on winnt
Message-ID: <NFBBIPNKHKMOHBPGHEIAIEPJCKAA.kriedel@syntricity.com>

Hello All,

I am learning Python and am trying to run/implement the code in "Leaning
Python" book chapter 10.  This is just an html form that calls some python
code feedback.py.

Before we get into whether or not I installed the mod_python.dll correctly
let me know if this behaviour is normal.  In my IE url address I point to
the html code that is a form, that when filled and submitted will call the
script feedback.py.  When I fill the form and hit submit, I get the text for
feedback.py to come up on my browser.  I would expect this if mod_python is
not installed.  If however, I place my curser in the url address ( it is
till pointing to
(E:\syntricity\home\armstrong\webserver\cgi-bin\feedback.py) and hit return
the script (feedback.py) which outputs html is actually run??? i.e. the cmd
window comes up and tells me that none of the form fields where filled out
and then quickly closes.  The reason I ask if this is normal is because if I
point to a perl script and run it from the browser I get the page not found
screen on the browser.

What is wierd is that I get the same response whether or not I am pointing
to my original working conf file or not which leads me to believe that I
have not installed correctly.  (I am just stopping and restarting my apache
services between conf edits).

I am running apache 1.3 and python 2.2 and I have downloaded the
mod_python-2.78 dll and placed it in my E:\Apache\modules directory, I have
placed my python scripts in
E:/syntricity/home/armstrong/webserver/cgi-bin/python and have the following
items in my conf file:

Could my options in my conf be wrong?
.
.

#
# Dynamic Shared Object (DSO) Support
#
LoadModule anon_auth_module modules/ApacheModuleAuthAnon.dll
LoadModule cern_meta_module modules/ApacheModuleCERNMeta.dll
LoadModule digest_module modules/ApacheModuleDigest.dll
LoadModule expires_module modules/ApacheModuleExpires.dll
LoadModule headers_module modules/ApacheModuleHeaders.dll
LoadModule proxy_module modules/ApacheModuleProxy.dll
LoadModule rewrite_module modules/ApacheModuleRewrite.dll
LoadModule speling_module modules/ApacheModuleSpeling.dll
LoadModule status_module modules/ApacheModuleStatus.dll
LoadModule usertrack_module modules/ApacheModuleUserTrack.dll
LoadModule python_module modules/mod_python.dll

ExtendedStatus On

.
.
.
ServerName armstrong
ServerAdmin webmaster@syntricity.com
DocumentRoot E:/syntricity/home/armstrong/webserver/htdocs
UserDir "E:/Apache/users/"
Alias /cgi-bin/ "E:/syntricity/home/armstrong/webserver/cgi-bin/"
Alias /python/  "E:/syntricity/home/armstrong/webserver/htdocs/python/"

ScriptAlias /cgi-bin/ "E:/syntricity/home/armstrong/webserver/cgi-bin/"
ScriptAlias /python/
"E:/syntricity/home/armstrong/webserver/htdocs/python/"

Alias /icons/ "E:/syntricity/home/armstrong/webserver/icons/"
<Directory />
    Options FollowSymLinks
    AllowOverride None
</Directory>
<Directory "E:/syntricity/home/armstrong/webserver/htdocs">
    Options  FollowSymLinks
    AllowOverride None
    Order allow,deny
    Allow from all
</Directory>
<Directory "E:/syntricity/home/armstrong/webserver/cgi-bin">
    AllowOverride None
    Options None
</Directory>

<Directory "E:/syntricity/home/armstrong/webserver/cgi-bin/python">
    AddHandler python-program .py
    PythonHandler mptest
    PythonDebug on
    Options +ExecCGI
</Directory>


From tim.parker at intec-telecom-systems.com  Fri Jan 17 11:26:15 2003
From: tim.parker at intec-telecom-systems.com (Tim Parker (UK))
Date: Fri Jan  9 21:59:52 2004
Subject: [mod_python] Query about client server interaction
Message-ID: <7F124BC48D56D411812500D0B747251403B7B433@FILESERVER002>

Hi,
 
This is both a bit of understanding mod_python and also how CGI scripts in
general work, basically I have a long running query which can take up to a
minute or so to process, I want to return a page to the User immediately
saying what it is doing, ideally I would like this page to get updated
during the processing of the other operation.  And then when it has finished
the process it loads the resulting page on the Client.
 
I believe some of this is possible with server-push but this only works in
Netscape as far as I can tell.  Also I can load a temporary page and have a
refresh every few seconds which will check to see if the other process has
finished, but I was wondering if anyone knows of a clever way to achieve
this, ideally to have a dynamically updating page which checks the status of
the process and when it has finished loads the final page.
 
Thanks in advance for anyone who has any ideas on this.
Cheers
Tim.


This e-mail and any attachments are confidential and may also be privileged and/or copyright 
material of Intec Telecom Systems PLC (or its affiliated companies).  If you are not an 
intended or authorised recipient of this e-mail or have received it in error, please delete 
it immediately and notify the sender by e-mail.  In such a case, reading, reproducing, 
printing or further dissemination of this e-mail is strictly prohibited and may be unlawful. 
Intec Telecom Systems PLC. does not represent or warrant that an attachment hereto is free 
from computer viruses or other defects. The opinions expressed in this e-mail and any 
attachments may be those of the author and are not necessarily those of Intec Telecom 
Systems PLC. 

This footnote also confirms that this email message has been swept by
MIMEsweeper for the presence of computer viruses.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20030117/5cfa159a/attachment-0002.htm
From vfranceschetti at virgilio.it  Fri Jan 17 13:30:19 2003
From: vfranceschetti at virgilio.it (vfranceschetti@virgilio.it)
Date: Fri Jan  9 21:59:52 2004
Subject: [mod_python] Proble starting Apache
Message-ID: <3E24FD9E00005F4A@ims1a.cp.tin.it>

Hi,
i've installed Python 2.2.1 and Apache 2.0 in a win2000 Professional.

i have put this line in httpd.conf 

LoadModule python_module modules/mod_python.so

and file mod_python.so under the /modules dir.

When i try to start Apache i get this error:

Syntax error on line 173 of C:/Programmi/Apache Group/Apache2/conf/httpd.conf:
Cannot load C:/Programmi/Apache Group/Apache2/modules/mod_python.so into
server: impossible to find the specified module.

Some suggestion?

Thanks
Valentino



From gdamjan at mail.net.mk  Fri Jan 17 14:32:31 2003
From: gdamjan at mail.net.mk (Damjan)
Date: Fri Jan  9 21:59:52 2004
Subject: [mod_python] ModPython modules and applications
Message-ID: <20030117133231.GA26276@legolas.on.net.mk>

It would be nice if there's a central place were all of the
mod_python modules, helpers and opensource applications are documented.

Please reply here if you have any info on this topic, and later
we can put all of this on some wiki page.


-- 
Damjan Georgievski

From thanos at 0x01.com  Fri Jan 17 09:58:09 2003
From: thanos at 0x01.com (thanos@0x01.com)
Date: Fri Jan  9 21:59:52 2004
Subject: [mod_python] Re: Query about client server interaction
In-Reply-To: <7F124BC48D56D411812500D0B747251403B7B433@FILESERVER002>
References: <7F124BC48D56D411812500D0B747251403B7B433@FILESERVER002>
Message-ID: <20030117145809.7867.qmail@0x01.com>

Use a meta-refresh in the html header of you status page. 

So your status page keeps loading itself until the work is ready. 


thanos 

ps: using pso would make your life easier.
http://sourceforge.net/projects/pso/
http://sourceforge.net/docman/?group_id=49265 

Tim Parker (UK) writes: 

> Hi,
>  
> This is both a bit of understanding mod_python and also how CGI scripts in
> general work, basically I have a long running query which can take up to a
> minute or so to process, I want to return a page to the User immediately
> saying what it is doing, ideally I would like this page to get updated
> during the processing of the other operation.  And then when it has finished
> the process it loads the resulting page on the Client.
>  
> I believe some of this is possible with server-push but this only works in
> Netscape as far as I can tell.  Also I can load a temporary page and have a
> refresh every few seconds which will check to see if the other process has
> finished, but I was wondering if anyone knows of a clever way to achieve
> this, ideally to have a dynamically updating page which checks the status of
> the process and when it has finished loads the final page.
>  
> Thanks in advance for anyone who has any ideas on this.
> Cheers
> Tim. 
> 
> 
> This e-mail and any attachments are confidential and may also be privileged and/or copyright 
> material of Intec Telecom Systems PLC (or its affiliated companies).  If you are not an 
> intended or authorised recipient of this e-mail or have received it in error, please delete 
> it immediately and notify the sender by e-mail.  In such a case, reading, reproducing, 
> printing or further dissemination of this e-mail is strictly prohibited and may be unlawful. 
> Intec Telecom Systems P

LC. does not represent or warrant that an attachment hereto is free
> from computer viruses or other defects. The opinions expressed in this e-mail and any 
> attachments may be those of the author and are not necessarily those of Intec Telecom 
> Systems PLC.  
> 
> This footnote also confirms that this email message has been swept by
> MIMEsweeper for the presence of computer viruses. 
> 
 


thanos vassilakis
127 greene street
New York
NY 10012-5401
w. 212 383 2777 


From listmail at xs4all.nl  Fri Jan 17 22:23:36 2003
From: listmail at xs4all.nl (baz)
Date: Fri Jan  9 21:59:52 2004
Subject: [mod_python] Query about client server interaction
In-Reply-To: <7F124BC48D56D411812500D0B747251403B7B433@FILESERVER002>
References: <7F124BC48D56D411812500D0B747251403B7B433@FILESERVER002>
Message-ID: <3E287458.1090500@xs4all.nl>


You can achieve this by sending pieces of javacript whenever you want to 
update something (like a progress bar or whatever).

You also need to be able to flush the output buffer to apache, (my setup 
seems to do this implicitly ?) otherwise i would've tried req.flush().

Works on major browsers, just make sure you send <script> tags everytime 
for this is needed by NN4 (or later?).

baz.

Tim Parker (UK) wrote:
> 
> 
> Hi,
> 
>  
> 
> This is both a bit of understanding mod_python and also how CGI scripts 
> in general work, basically I have a long running query which can take up 
> to a minute or so to process, I want to return a page to the User 
> immediately saying what it is doing, ideally I would like this page to 
> get updated during the processing of the other operation.  And then when 
> it has finished the process it loads the resulting page on the Client.
> 
>  
> 
> I believe some of this is possible with server-push but this only works 
> in Netscape as far as I can tell.  Also I can load a temporary page and 
> have a refresh every few seconds which will check to see if the other 
> process has finished, but I was wondering if anyone knows of a clever 
> way to achieve this, ideally to have a dynamically updating page which 
> checks the status of the process and when it has finished loads the 
> final page.
> 
>  
> 
> Thanks in advance for anyone who has any ideas on this.


From josh at janrain.com  Fri Jan 17 15:44:09 2003
From: josh at janrain.com (Josh Hoyt)
Date: Fri Jan  9 21:59:52 2004
Subject: [mod_python] mod_python and Python 2.3
Message-ID: <1042847049.2550.63.camel@rye>

Hello,

I'm trying to get mod_python working with python 2.3, and I've run into
some problems related to module importing. For some reason, it fails to
import the site module. The same setup works with Python 2.2, so I'm
pretty sure that it has something to do with the Python version and not
the configuration. Running with Python in verbose mode, the following
shows up in the apache error log file:

[...]
# trying /home/josh/scratch/python/lib/python2.3/site.py
# /home/josh/scratch/python/lib/python2.3/site.pyc matches /home/josh/scratch/python/lib/python2.3/site.py
import site # precompiled from /home/josh/scratch/python/lib/python2.3/site.pyc
[...]
'import site' failed; traceback:
ImportError: No module named site
[...]

I've attached the full error log in case there are any details there 
that I failed to make clear in the excerpts above.

This problem appears with:
Python 2.3a1, Apache 1.3.20, mod_python 2.7.6 or 2.7.8
Python 2.3a1, Apache 2.0.43, mod_python 3.0.1

It goes away with Python 2.2.2.

Any ideas about where to go from here?

Thanks,
Josh Hoyt
<josh@janrain.com>
-------------- next part --------------
# installing zipimport hook
import zipimport # builtin
# installed zipimport hook
# trying /home/josh/prj/top/josh/site.so
# trying /home/josh/prj/top/josh/sitemodule.so
# trying /home/josh/prj/top/josh/site.py
# trying /home/josh/prj/top/josh/site.pyc
# trying /home/josh/prj/top/site.so
# trying /home/josh/prj/top/sitemodule.so
# trying /home/josh/prj/top/site.py
# trying /home/josh/prj/top/site.pyc
# trying /home/josh/scratch/python/lib/python23.zip/site.so
# trying /home/josh/scratch/python/lib/python23.zip/sitemodule.so
# trying /home/josh/scratch/python/lib/python23.zip/site.py
# trying /home/josh/scratch/python/lib/python23.zip/site.pyc
# trying /home/josh/scratch/python/lib/python2.3/site.so
# trying /home/josh/scratch/python/lib/python2.3/sitemodule.so
# trying /home/josh/scratch/python/lib/python2.3/site.py
# /home/josh/scratch/python/lib/python2.3/site.pyc matches /home/josh/scratch/python/lib/python2.3/site.py
import site # precompiled from /home/josh/scratch/python/lib/python2.3/site.pyc
# trying /home/josh/prj/top/josh/os.so
# trying /home/josh/prj/top/josh/osmodule.so
# trying /home/josh/prj/top/josh/os.py
# trying /home/josh/prj/top/josh/os.pyc
# trying /home/josh/prj/top/os.so
# trying /home/josh/prj/top/osmodule.so
# trying /home/josh/prj/top/os.py
# trying /home/josh/prj/top/os.pyc
# trying /home/josh/scratch/python/lib/python23.zip/os.so
# trying /home/josh/scratch/python/lib/python23.zip/osmodule.so
# trying /home/josh/scratch/python/lib/python23.zip/os.py
# trying /home/josh/scratch/python/lib/python23.zip/os.pyc
# trying /home/josh/scratch/python/lib/python2.3/os.so
# trying /home/josh/scratch/python/lib/python2.3/osmodule.so
# trying /home/josh/scratch/python/lib/python2.3/os.py
# /home/josh/scratch/python/lib/python2.3/os.pyc matches /home/josh/scratch/python/lib/python2.3/os.py
import os # precompiled from /home/josh/scratch/python/lib/python2.3/os.pyc
import posix # builtin
# trying /home/josh/prj/top/josh/posixpath.so
# trying /home/josh/prj/top/josh/posixpathmodule.so
# trying /home/josh/prj/top/josh/posixpath.py
# trying /home/josh/prj/top/josh/posixpath.pyc
# trying /home/josh/prj/top/posixpath.so
# trying /home/josh/prj/top/posixpathmodule.so
# trying /home/josh/prj/top/posixpath.py
# trying /home/josh/prj/top/posixpath.pyc
# trying /home/josh/scratch/python/lib/python23.zip/posixpath.so
# trying /home/josh/scratch/python/lib/python23.zip/posixpathmodule.so
# trying /home/josh/scratch/python/lib/python23.zip/posixpath.py
# trying /home/josh/scratch/python/lib/python23.zip/posixpath.pyc
# trying /home/josh/scratch/python/lib/python2.3/posixpath.so
# trying /home/josh/scratch/python/lib/python2.3/posixpathmodule.so
# trying /home/josh/scratch/python/lib/python2.3/posixpath.py
# /home/josh/scratch/python/lib/python2.3/posixpath.pyc matches /home/josh/scratch/python/lib/python2.3/posixpath.py
import posixpath # precompiled from /home/josh/scratch/python/lib/python2.3/posixpath.pyc
# trying /home/josh/prj/top/josh/stat.so
# trying /home/josh/prj/top/josh/statmodule.so
# trying /home/josh/prj/top/josh/stat.py
# trying /home/josh/prj/top/josh/stat.pyc
# trying /home/josh/prj/top/stat.so
# trying /home/josh/prj/top/statmodule.so
# trying /home/josh/prj/top/stat.py
# trying /home/josh/prj/top/stat.pyc
# trying /home/josh/scratch/python/lib/python23.zip/stat.so
# trying /home/josh/scratch/python/lib/python23.zip/statmodule.so
# trying /home/josh/scratch/python/lib/python23.zip/stat.py
# trying /home/josh/scratch/python/lib/python23.zip/stat.pyc
# trying /home/josh/scratch/python/lib/python2.3/stat.so
# trying /home/josh/scratch/python/lib/python2.3/statmodule.so
# trying /home/josh/scratch/python/lib/python2.3/stat.py
# /home/josh/scratch/python/lib/python2.3/stat.pyc matches /home/josh/scratch/python/lib/python2.3/stat.py
import stat # precompiled from /home/josh/scratch/python/lib/python2.3/stat.pyc
# trying /home/josh/prj/top/josh/UserDict.so
# trying /home/josh/prj/top/josh/UserDictmodule.so
# trying /home/josh/prj/top/josh/UserDict.py
# trying /home/josh/prj/top/josh/UserDict.pyc
# trying /home/josh/prj/top/UserDict.so
# trying /home/josh/prj/top/UserDictmodule.so
# trying /home/josh/prj/top/UserDict.py
# trying /home/josh/prj/top/UserDict.pyc
# trying /home/josh/scratch/python/lib/python23.zip/UserDict.so
# trying /home/josh/scratch/python/lib/python23.zip/UserDictmodule.so
# trying /home/josh/scratch/python/lib/python23.zip/UserDict.py
# trying /home/josh/scratch/python/lib/python23.zip/UserDict.pyc
# trying /home/josh/scratch/python/lib/python2.3/UserDict.so
# trying /home/josh/scratch/python/lib/python2.3/UserDictmodule.so
# trying /home/josh/scratch/python/lib/python2.3/UserDict.py
# /home/josh/scratch/python/lib/python2.3/UserDict.pyc matches /home/josh/scratch/python/lib/python2.3/UserDict.py
import UserDict # precompiled from /home/josh/scratch/python/lib/python2.3/UserDict.pyc
# trying /home/josh/prj/top/josh/copy_reg.so
# trying /home/josh/prj/top/josh/copy_regmodule.so
# trying /home/josh/prj/top/josh/copy_reg.py
# trying /home/josh/prj/top/josh/copy_reg.pyc
# trying /home/josh/prj/top/copy_reg.so
# trying /home/josh/prj/top/copy_regmodule.so
# trying /home/josh/prj/top/copy_reg.py
# trying /home/josh/prj/top/copy_reg.pyc
# trying /home/josh/scratch/python/lib/python23.zip/copy_reg.so
# trying /home/josh/scratch/python/lib/python23.zip/copy_regmodule.so
# trying /home/josh/scratch/python/lib/python23.zip/copy_reg.py
# trying /home/josh/scratch/python/lib/python23.zip/copy_reg.pyc
# trying /home/josh/scratch/python/lib/python2.3/copy_reg.so
# trying /home/josh/scratch/python/lib/python2.3/copy_regmodule.so
# trying /home/josh/scratch/python/lib/python2.3/copy_reg.py
# /home/josh/scratch/python/lib/python2.3/copy_reg.pyc matches /home/josh/scratch/python/lib/python2.3/copy_reg.py
import copy_reg # precompiled from /home/josh/scratch/python/lib/python2.3/copy_reg.pyc
# trying /home/josh/prj/top/josh/types.so
# trying /home/josh/prj/top/josh/typesmodule.so
# trying /home/josh/prj/top/josh/types.py
# trying /home/josh/prj/top/josh/types.pyc
# trying /home/josh/prj/top/types.so
# trying /home/josh/prj/top/typesmodule.so
# trying /home/josh/prj/top/types.py
# trying /home/josh/prj/top/types.pyc
# trying /home/josh/scratch/python/lib/python23.zip/types.so
# trying /home/josh/scratch/python/lib/python23.zip/typesmodule.so
# trying /home/josh/scratch/python/lib/python23.zip/types.py
# trying /home/josh/scratch/python/lib/python23.zip/types.pyc
# trying /home/josh/scratch/python/lib/python2.3/types.so
# trying /home/josh/scratch/python/lib/python2.3/typesmodule.so
# trying /home/josh/scratch/python/lib/python2.3/types.py
# /home/josh/scratch/python/lib/python2.3/types.pyc matches /home/josh/scratch/python/lib/python2.3/types.py
import types # precompiled from /home/josh/scratch/python/lib/python2.3/types.pyc
# trying /home/josh/prj/top/josh/sitecustomize.so
# trying /home/josh/prj/top/josh/sitecustomizemodule.so
# trying /home/josh/prj/top/josh/sitecustomize.py
# trying /home/josh/prj/top/josh/sitecustomize.pyc
# trying /home/josh/prj/top/sitecustomize.so
# trying /home/josh/prj/top/sitecustomizemodule.so
# trying /home/josh/prj/top/sitecustomize.py
# trying /home/josh/prj/top/sitecustomize.pyc
# trying /home/josh/scratch/python/lib/python23.zip/sitecustomize.so
# trying /home/josh/scratch/python/lib/python23.zip/sitecustomizemodule.so
# trying /home/josh/scratch/python/lib/python23.zip/sitecustomize.py
# trying /home/josh/scratch/python/lib/python23.zip/sitecustomize.pyc
# trying /home/josh/scratch/python/lib/python2.3/sitecustomize.so
# trying /home/josh/scratch/python/lib/python2.3/sitecustomizemodule.so
# trying /home/josh/scratch/python/lib/python2.3/sitecustomize.py
# trying /home/josh/scratch/python/lib/python2.3/sitecustomize.pyc
# trying /home/josh/scratch/python/lib/python2.3/plat-linux2/sitecustomize.so
# trying /home/josh/scratch/python/lib/python2.3/plat-linux2/sitecustomizemodule.so
# trying /home/josh/scratch/python/lib/python2.3/plat-linux2/sitecustomize.py
# trying /home/josh/scratch/python/lib/python2.3/plat-linux2/sitecustomize.pyc
# trying /home/josh/scratch/python/lib/python2.3/lib-tk/sitecustomize.so
# trying /home/josh/scratch/python/lib/python2.3/lib-tk/sitecustomizemodule.so
# trying /home/josh/scratch/python/lib/python2.3/lib-tk/sitecustomize.py
# trying /home/josh/scratch/python/lib/python2.3/lib-tk/sitecustomize.pyc
# trying /home/josh/scratch/python/lib/python2.3/lib-dynload/sitecustomize.so
# trying /home/josh/scratch/python/lib/python2.3/lib-dynload/sitecustomizemodule.so
# trying /home/josh/scratch/python/lib/python2.3/lib-dynload/sitecustomize.py
# trying /home/josh/scratch/python/lib/python2.3/lib-dynload/sitecustomize.pyc
# trying /home/josh/scratch/python/lib/python2.3/site-packages/sitecustomize.so
# trying /home/josh/scratch/python/lib/python2.3/site-packages/sitecustomizemodule.so
# trying /home/josh/scratch/python/lib/python2.3/site-packages/sitecustomize.py
# trying /home/josh/scratch/python/lib/python2.3/site-packages/sitecustomize.pyc
[Fri Jan 17 15:04:46 2003] [warn] pid file /home/josh/scratch/apache2/logs/httpd.pid overwritten -- Unclean shutdown of previous Apache run?
import __builtin__ # previously loaded (__builtin__)
import sys # previously loaded (sys)
'import site' failed; traceback:
ImportError: No module named site
From dustin at ywlcs.org  Fri Jan 17 20:20:55 2003
From: dustin at ywlcs.org (Dustin Mitchell)
Date: Fri Jan  9 21:59:52 2004
Subject: [mod_python] Re: Query about client server interaction
In-Reply-To: <20030117145809.7867.qmail@0x01.com>
References: <7F124BC48D56D411812500D0B747251403B7B433@FILESERVER002> <20030117145809.7867.qmail@0x01.com>
Message-ID: <20030118022054.GN15058@eleanor.internal.ywlcs.org>

On Fri, Jan 17, 2003 at 09:58:09AM -0500, thanos@0x01.com wrote:
> Use a meta-refresh in the html header of you status page. 

I believe the Refresh HTTP header (with the same format) works as well.  I
think the use of meta-refresh grew out of people using it to make their
static HTML documents act dynamic.

(It works for me with Mozilla)

Dustin

-- 

  Dustin Mitchell
  dustin@ywlcs.org/djmitche@alumni.uchicago.edu
  http://people.cs.uchicago.edu/~dustin/

From geertj at boskant.nl  Sat Jan 18 12:53:36 2003
From: geertj at boskant.nl (Geert Jansen)
Date: Fri Jan  9 21:59:52 2004
Subject: [mod_python] mod_python and Python 2.3
In-Reply-To: <1042847049.2550.63.camel@rye>
References: <1042847049.2550.63.camel@rye>
Message-ID: <20030118115336.GA4522@vader.boskant.nl>

On Fri, Jan 17, 2003 at 03:44:09PM -0800, Josh Hoyt wrote:
> Hello,
> 
> I'm trying to get mod_python working with python 2.3, and I've run into
> some problems related to module importing. For some reason, it fails to
> import the site module. The same setup works with Python 2.2, so I'm
> pretty sure that it has something to do with the Python version and not
> the configuration. Running with Python in verbose mode, the following
> shows up in the apache error log file:

This is a Python bug in Py_NewInterpreter() (or in some other place that
makes Py_NewInterpreter() fail). I sumbitted it to the Python developers
but I got no reply yet. The bug is described here:

http://sourceforge.net/tracker/index.php?func=detail&aid=668708&group_id=5470&atid=105470

Greetings,
Geert

From tim.parker at intec-telecom-systems.com  Mon Jan 20 09:43:34 2003
From: tim.parker at intec-telecom-systems.com (Tim Parker (UK))
Date: Fri Jan  9 21:59:52 2004
Subject: [mod_python] Query about client server interaction
Message-ID: <7F124BC48D56D411812500D0B747251403B7B43B@FILESERVER002>

Thanks Baz,

Just to clarify this a bit as I am quite new to all this, I can output my
Initial Page, including some Java Script and then later on output some more
Java Script which will then update the page on the Client.

I don't suppose you know of somewhere where I can see an example of this, as
that would be really useful.

Thanks
Tim.

-----Original Message-----
From: baz [mailto:listmail@xs4all.nl]
Sent: 17 January 2003 21:24
To: Tim Parker (UK); mod_python@modpython.org
Subject: Re: [mod_python] Query about client server interaction


You can achieve this by sending pieces of javacript whenever you want to
update something (like a progress bar or whatever).

You also need to be able to flush the output buffer to apache, (my setup
seems to do this implicitly ?) otherwise i would've tried req.flush().

Works on major browsers, just make sure you send <script> tags everytime
for this is needed by NN4 (or later?).

baz.

Tim Parker (UK) wrote:
>
>
> Hi,
>
> 
>
> This is both a bit of understanding mod_python and also how CGI scripts
> in general work, basically I have a long running query which can take up
> to a minute or so to process, I want to return a page to the User
> immediately saying what it is doing, ideally I would like this page to
> get updated during the processing of the other operation.  And then when
> it has finished the process it loads the resulting page on the Client.
>
> 
>
> I believe some of this is possible with server-push but this only works
> in Netscape as far as I can tell.  Also I can load a temporary page and
> have a refresh every few seconds which will check to see if the other
> process has finished, but I was wondering if anyone knows of a clever
> way to achieve this, ideally to have a dynamically updating page which
> checks the status of the process and when it has finished loads the
> final page.
>
> 
>
> Thanks in advance for anyone who has any ideas on this.


This e-mail and any attachments are confidential and may also be privileged and/or copyright 
material of Intec Telecom Systems PLC (or its affiliated companies).  If you are not an 
intended or authorised recipient of this e-mail or have received it in error, please delete 
it immediately and notify the sender by e-mail.  In such a case, reading, reproducing, 
printing or further dissemination of this e-mail is strictly prohibited and may be unlawful. 
Intec Telecom Systems PLC. does not represent or warrant that an attachment hereto is free 
from computer viruses or other defects. The opinions expressed in this e-mail and any 
attachments may be those of the author and are not necessarily those of Intec Telecom 
Systems PLC. 

This footnote also confirms that this email message has been swept by
MIMEsweeper for the presence of computer viruses.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20030120/3b5ac633/attachment-0002.htm
From tim.parker at intec-telecom-systems.com  Mon Jan 20 16:25:28 2003
From: tim.parker at intec-telecom-systems.com (Tim Parker (UK))
Date: Fri Jan  9 21:59:52 2004
Subject: [mod_python] Wierd problem with API version mismatch
Message-ID: <7F124BC48D56D411812500D0B747251403B7B445@FILESERVER002>

I managed to install the mod_python module and it was working with no
problems at all with my Apache server running on Port 8080, I have now
migrated this server to be the main server and shutdown the original server
which was running on Port 80.  But whenever I try to access a python script
it gives me the following message in the error_log file:
 
[Mon Jan 20 16:17:25 2003] [notice] Digest: generating secret for digest
authentication ...
[Mon Jan 20 16:17:25 2003] [notice] Digest: done
[Mon Jan 20 16:17:25 2003] [notice] Apache/2.0.43 (Unix) mod_perl/1.99_08
Perl/v5.6.1 DAV/2 mod_python/3.0.1 Python/2.2.1 PHP/4.3.0s
warning: Python C API version mismatch for module strop: This Python has API
version 1011, module strop has version 1007.
Fatal Python error: can't initialize module strop
[Mon Jan 20 16:17:38 2003] [notice] child pid 6213 exit signal Aborted (6)
 
The Linux version the Apache 2 server is running on is : Linux thunder
2.4.18-17.7.x #1 Tue Oct 8 13:33:14 EDT 2002 i686 unknown
 
What I don't understand is this sometimes seems to work and then other times
it gives me this error message - does anyone know what could cause this as
it is very confusing as it used to work under the different port, but I
can't see how that would affect it, or what else could have caused the
problem to occur when it was working ok before.
 
Thanks for any help on this weird problem!!!!
Tim.


This e-mail and any attachments are confidential and may also be privileged and/or copyright 
material of Intec Telecom Systems PLC (or its affiliated companies).  If you are not an 
intended or authorised recipient of this e-mail or have received it in error, please delete 
it immediately and notify the sender by e-mail.  In such a case, reading, reproducing, 
printing or further dissemination of this e-mail is strictly prohibited and may be unlawful. 
Intec Telecom Systems PLC. does not represent or warrant that an attachment hereto is free 
from computer viruses or other defects. The opinions expressed in this e-mail and any 
attachments may be those of the author and are not necessarily those of Intec Telecom 
Systems PLC. 

This footnote also confirms that this email message has been swept by
MIMEsweeper for the presence of computer viruses.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20030120/1787c015/attachment-0002.htm
From josh at janrain.com  Mon Jan 20 15:31:14 2003
From: josh at janrain.com (Josh Hoyt)
Date: Fri Jan  9 21:59:52 2004
Subject: [mod_python] mod_python and Python 2.3
In-Reply-To: <20030118115336.GA4522@vader.boskant.nl>
References: <1042847049.2550.63.camel@rye> 
	<20030118115336.GA4522@vader.boskant.nl>
Message-ID: <1043105474.2669.7.camel@rye>

> This is a Python bug in Py_NewInterpreter() (or in some other place that
> makes Py_NewInterpreter() fail). I sumbitted it to the Python developers
> but I got no reply yet. The bug is described here:
> 
> http://sourceforge.net/tracker/index.php?func=detail&aid=668708&group_id=5470&atid=105470

The problem appears to be that meta_path is not being
initialized in the new interpreter. Adding
_PyImportHooks_Init to Py_NewInterpreter seems to fix the
problem, initializing the new import hooks before trying to
import modules into the new interpreter.

Patch 671459 contains this fix.

Yeah for mod_python in Python 2.3!

Josh

From gnb at itga.com.au  Tue Jan 21 11:28:27 2003
From: gnb at itga.com.au (Gregory Bond)
Date: Fri Jan  9 21:59:52 2004
Subject: [mod_python] Query about client server interaction 
In-Reply-To: Your message of Fri, 17 Jan 2003 11:26:15 -0000.
Message-ID: <200301210028.LAA29527@lightning.itga.com.au>

> This is both a bit of understanding mod_python and also how CGI scripts in
> general work, basically I have a long running query which can take up to a
> minute or so to process, I want to return a page to the User immediately
> saying what it is doing, ideally I would like this page to get updated
> during the processing of the other operation. 

Along with the other responses, I'd like to offer an alternative solution 
(that may or may not work, depending on how the job is structured).

Anything you send to the client gets sent straight away, so you can use this 
fact to write on-going status messages.  Something like this:

import time
from mod_python import apache

def handler(req):
    req.content_type = "text/html"
    req.write('''<html>
    <head><title>Example Delay Code</title></head>
    <body>
    Please wait.  This could take a long time!!!!
    <ul>
    ''')
    for i in range(20):
        time.sleep(2)
        req.write("<li> Still waiting.... %d\n" % i)
    req.write('</ul>\nAll Done!\n</body></html>')
    
    return apache.OK

(I've added this as FAQ 3.7.   Someone with more experience in redirects or 
refresh tags can add some alternatives.).



From tim.parker at intec-telecom-systems.com  Tue Jan 21 09:08:16 2003
From: tim.parker at intec-telecom-systems.com (Tim Parker (UK))
Date: Fri Jan  9 21:59:52 2004
Subject: [mod_python] Query about client server interaction 
Message-ID: <7F124BC48D56D411812500D0B747251403B7B449@FILESERVER002>

Thanks Gregory,

I am just wondering if it is possible to do this with the publisher handler
- as that is what I am using at present as I have several python modules and
functions that I need to use?

Thanks again for all your help on this
Tim.

-----Original Message-----
From: Gregory Bond [mailto:gnb@itga.com.au]
Sent: 21 January 2003 00:28
To: Tim Parker (UK)
Cc: 'mod_python@modpython.org'
Subject: Re: [mod_python] Query about client server interaction 

> This is both a bit of understanding mod_python and also how CGI scripts in
> general work, basically I have a long running query which can take up to a
> minute or so to process, I want to return a page to the User immediately
> saying what it is doing, ideally I would like this page to get updated
> during the processing of the other operation.

Along with the other responses, I'd like to offer an alternative solution
(that may or may not work, depending on how the job is structured).

Anything you send to the client gets sent straight away, so you can use this
fact to write on-going status messages.  Something like this:

import time
from mod_python import apache

def handler(req):
    req.content_type = "text/html"
    req.write('''<html>
    <head><title>Example Delay Code</title></head>
    <body>
    Please wait.  This could take a long time!!!!
    <ul>
    ''')
    for i in range(20):
        time.sleep(2)
        req.write("<li> Still waiting.... %d\n" % i)
    req.write('</ul>\nAll Done!\n</body></html>')
   
    return apache.OK

(I've added this as FAQ 3.7.   Someone with more experience in redirects or
refresh tags can add some alternatives.).


This e-mail and any attachments are confidential and may also be privileged and/or copyright 
material of Intec Telecom Systems PLC (or its affiliated companies).  If you are not an 
intended or authorised recipient of this e-mail or have received it in error, please delete 
it immediately and notify the sender by e-mail.  In such a case, reading, reproducing, 
printing or further dissemination of this e-mail is strictly prohibited and may be unlawful. 
Intec Telecom Systems PLC. does not represent or warrant that an attachment hereto is free 
from computer viruses or other defects. The opinions expressed in this e-mail and any 
attachments may be those of the author and are not necessarily those of Intec Telecom 
Systems PLC. 

This footnote also confirms that this email message has been swept by
MIMEsweeper for the presence of computer viruses.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20030121/8dc051ba/attachment-0002.htm
From tim.parker at intec-telecom-systems.com  Tue Jan 21 09:38:29 2003
From: tim.parker at intec-telecom-systems.com (Tim Parker (UK))
Date: Fri Jan  9 21:59:52 2004
Subject: [mod_python] Wierd problem with API version mismatch 
Message-ID: <7F124BC48D56D411812500D0B747251403B7B44A@FILESERVER002>

Thanks for that,

I have managed to sort out the problem now; it is to do with the Path
Environment Variable that Apache was running under, which has python (1.5)
as the first python executable on it, so this was causing the version
mismatch.  The only thing I am unsure about is where Apache is
getting/setting this environment variable as for all users the python
version that is on their path is version 2.2.1 (the one I want to use).  As
a work around I have linked python 2.2.1 to /bin/python and it now seems to
work without any problems.

Thanks again
Tim.

-----Original Message-----
From: Gregory Bond [mailto:gnb@itga.com.au]
Sent: 20 January 2003 22:17
To: Tim Parker (UK)
Subject: Re: [mod_python] Wierd problem with API version mismatch 

> warning: Python C API version mismatch for module strop: This Python has
API
> version 1011, module strop has version 1007.

My guess is that you have multiple versions of python installed, and apache
is
picking up a different python version based on a different PATH environment
or some such.


This e-mail and any attachments are confidential and may also be privileged and/or copyright 
material of Intec Telecom Systems PLC (or its affiliated companies).  If you are not an 
intended or authorised recipient of this e-mail or have received it in error, please delete 
it immediately and notify the sender by e-mail.  In such a case, reading, reproducing, 
printing or further dissemination of this e-mail is strictly prohibited and may be unlawful. 
Intec Telecom Systems PLC. does not represent or warrant that an attachment hereto is free 
from computer viruses or other defects. The opinions expressed in this e-mail and any 
attachments may be those of the author and are not necessarily those of Intec Telecom 
Systems PLC. 

This footnote also confirms that this email message has been swept by
MIMEsweeper for the presence of computer viruses.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20030121/96466f65/attachment-0002.htm
From sandor.kopanyi at mailbox.hu  Tue Jan 21 11:41:49 2003
From: sandor.kopanyi at mailbox.hu (sandor.kopanyi@mailbox.hu)
Date: Fri Jan  9 21:59:52 2004
Subject: [mod_python] calla function from form and via link
Message-ID: <20030121104149.15286.qmail@web2.mailbox.hu>

Hi,

I have a function which fetches some things from a database; it has
2 parameters: req and an id. The req is used to extract username and
password for the database connection, the second is info needed for
fetch.

I call it from a FORM, which has an INPUT field, called id, req is
passed "by default". Everything goes fine.

My problem: I would like to use the same function, with the same
purpose, but in this not from a FORM. but from a dynamically generated
web-page
(http://...module.py/function?id=somethingdynamicallygenerated).
But in this case I - obviously - miss the req, which is "given" to me
only
when calling a function from a FORM.

Is there any nice trick to solve this problem?

I use publisher handler, on RedHat 7.3, apache 1.3.23, mod_python 2.76,
python 1.5.2 (yes, it's old stuff, but is OK by me for the time being :)

/Sandor

________________________________________________
http://mailbox.hu - M?r SMS ?rtes?t?ssel is!



From grisha at modpython.org  Tue Jan 21 13:15:03 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:59:52 2004
Subject: [mod_python] calla function from form and via link
In-Reply-To: <20030121104149.15286.qmail@web2.mailbox.hu>
Message-ID: <20030121131254.I66432-100000@eden.ispol.com>


On Tue, 21 Jan 2003 sandor.kopanyi@mailbox.hu wrote:

> (http://...module.py/function?id=somethingdynamicallygenerated).
> But in this case I - obviously - miss the req, which is "given" to me
> only
> when calling a function from a FORM.

The req is *always* passed for as long as your function has it as one of
the arguments, regardless of method (form or not). If you define function
as:

def function(req, id):

then req will passed to you by the Publisher.

Grisha


From Mongryong at sympatico.ca  Tue Jan 21 20:48:59 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 21:59:52 2004
Subject: [mod_python] Re: [4suite] 4Suite Reliance on ENVIRONMENT & global variables
In-Reply-To: <1043129964.1419.305.camel@refugeeMedia>
References: <704B83C4-2D00-11D7-8B43-000393CFDA9C@fourthought.com> 
	<1043129964.1419.305.camel@refugeeMedia>
Message-ID: <1043200140.14051.86.camel@refugeeMedia>

Ok, here's an update.  I've tested things out with a variety of
environment scenarios:

Computer - RedHat 8, PIII, 256mb, > 60Gb

Scenario#1 - Works fine
Apache httpd Server 1.3.27
Python 2.2.2
mod_python 2.7.8
4Suite 0.11.1
PyXML 0.6.6

Scenario#2 - Works fine
Apache httpd Server 2.0.44
Python 2.2.2
mod_python 3.0.2 (CVS)
4Suite 0.11.1
PyXML 0.6.6

Scenario#3 - Fails (encoding problem??)
Apache httpd Server 1.3.27
Python 2.2.2
mod_python 2.7.8
4Suite 0.12a CVS latest
PyXML 0.8.x

Scenario#4 - Fails (encoding problem??)
Apache httpd Server 2.0.44
Python 2.2.2
mod_python 3.0.2 (CVS)
4Suite 0.12a CVS latest
PyXML 0.8.x

Scenario#5 - Fails (encoding problem??)
Apache httpd Server 2.1.0 CVS latest
Python 2.2.2
mod_python 3.0.2 CVS latest
4Suite 0.12a CVS latest
PyXML 0.8.x

Scenario#5 - Fails (encoding problem??)
Apache httpd Server 2.1.0 CVS latest
Python 2.3a CVS latest
mod_python 3.0.2 (CVS)
4Suite 0.12a CVS latest
PyXML 0.8.x

Summary of combinations that produced no 'encoding' problem:
Apache 1.3.27 to 2.1 CVS latest
mod_python 3.0.2 CVS latest
Python 2.2.2  
4Suite 0.11.1 
PyXML 0.6.6

To me, the encoding problem appears to have something to do with 4Suite
0.12.x or PyXML 0.8.x or a combination of the two.  

It would be nice to be able to test if the encoding problem appears in
another 'embedded python' app or module.  This would help strengthen the
case against 4Suite/PyXml.  My guess is that the encoding problem is not
unique to mod_python.

On Tue, 2003-01-21 at 01:19, Mongryong wrote:
> Ok, I've modified my simple test script so that it can be easily started
> from a shell (python main.py) as well as working with mod_python.
> 
> Again, here's the url to my server where you can view the mod_python
> result: http://rezquest.cjb.net/bin/main
> 
> So, now the test outputs the XML source as just a string and as dom node
> from NonvalidatingReader.
> 
> You should clearly see the difference between the standalone and
> mod_python results.
> 
> On Tue, 2003-01-21 at 00:23, Michael Olson wrote:
> > 
> > > The strange thing is that if I directly output the XML source without
> > > doing any XSLT processing, the XML source appears correctly.  Somewhere
> > > along the line where the strings are being passed from the python
> > > libraries to the 4Suite libraries (by Py_ParseArgs..???), the strings
> > > are being 'miscommunicated'.
> > >
> > 
> > By "output the XML source" do you mean just print it out (or fetch it 
> > from the file system) ro do you mean parse it into DOM, and print it 
> > out?
> > 
> > If not the later, can you try that instead of XSLT to see if this works.
> > 
> > Thanks
> > Mike
> > 
> > > Now, it might be a Python2.2.2 issue since libxml2/libxslt from the
> > > gnome project are having similar problems as well.
> > >
> > > In 4Suite, do the apps embedd the python interpretor or do the apps
> > > start purely from a python environment?
> > >
> > > It might be good to check to see whether this problem still occurs 
> > > other
> > > 'python embedded' application (ie. uses Py_NewInterpretor from C). I
> > > forget, does the command-line version of python dynamically link to the
> > > python libraries?  If so, I wonder if the command-line version of 
> > > python
> > > is doing anything special or different when it links up and initializes
> > > the python libraries.
> > >
> > > I'm reposting this message on to the Python mailing list to see if
> > > anybody there can help give us a clue.
> > >
> > > P.S Has there been any changes in Python2.2.3+ that might possibly fix
> > > this problem?
> > >
> > > On Mon, 2003-01-20 at 22:28, Uche Ogbuji wrote:
> > >> On Mon, 2003-01-20 at 14:52, Mongryong wrote:
> > >>> Hi,
> > >>>
> > >>> I'm having trouble getting the latest 4Suite XML/XSLT tools to work 
> > >>> the
> > >>> way I want in mod_python and I know I'm not the first one to 
> > >>> experience
> > >>> "out-of-the-box" success.
> > >>>
> > >>> I've determined that it's an encoding issue.   Now, with a 
> > >>> stand-alone
> > >>> script or CGI script under Apache, 4XSLT works fine.  But under
> > >>> mod_python (which doesn't have access to ENVIRONMENT variables), 
> > >>> 4XSLT
> > >>> library decodes the XML source file in a total different encoding.  
> > >>> XSL
> > >>> templates (ie. <xsl:template name="blah">) are never executed because
> > >>> the XML tag is never recognized by the XSL processor.  Hence, you 
> > >>> get an
> > >>> empty output.
> > >>>
> > >>> I've check the default system encoding codec and it returns 'ascii' 
> > >>> (ie.
> > >>> sys.getdefaultencoding).  Now, it could be that the python library
> > >>> relies on some ENVIRONMENT variable for its configuration.
> > >>>
> > >>> Anybody have any ideas what 'parameters' might not be initialized
> > >>> properly under a non-CGI or non-shell environment such as mod_python?
> > >>> Or, is there a parameter that one can set to change the XML input
> > >>> decoding?
> > >>
> > >> I don't think there is any environment variable that could affect 
> > >> this.
> > >>
> > >> However, there have been a lot of fixes recently, including to some
> > >> endianness bugs.  Do you mind trying again with latest 4Suite CVS and
> > >> telling us if it helps?  Either wait till tomorrow's snapshot, or 
> > >> check
> > >> out current CVS HEAD directly
> > >>
> > >> http://4suite.org/docs/4SuiteCVS.xml
> > >>
> > >> If it doesn't help, I hope you'll be able to help us work with you to
> > >> find a solution for mod_python users.
> > >>
> > >> -- 
> > >> Uche Ogbuji                                    Fourthought, Inc.
> > >> http://uche.ogbuji.net    http://4Suite.org    http://fourthought.com
> > >> Python Generators + DOM - 
> > >> http://www.xml.com/pub/a/2003/01/08/py-xml.html
> > >> 4Suite Repository Features - 
> > >> https://www6.software.ibm.com/reg/devworks/dw-x4suite5-i/
> > >> XML class warfare - http://www.adtmag.com/article.asp?id=6965
> > >> MusicBrainz  metadata - 
> > >> http://www-106.ibm.com/developerworks/xml/library/x-think14.html
> > >>
> > >
> > > <main.py>
> > Mike Olson                                Principal Consultant
> > mike.olson@fourthought.com                +1 303 583 9900 x 102
> > Fourthought, Inc.                         http://Fourthought.com
> > PO Box 270590,                            http://4Suite.org
> > Louisville, CO 80027-5009, USA
> > XML strategy, XML tools, knowledge management
> > 
> > _______________________________________________
> > 4suite mailing list
> > 4suite@lists.fourthought.com
> > http://lists.fourthought.com/mailman/listinfo/4suite
> 
> ----
> 

> #!/usr/local/bin/python
> 
> import sys
> import locale
> 
> #The identity transform: duplicates the input to output
> TRANSFORM = """<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
> <xsl:template match="@*|node()">
>   <xsl:copy>
>     <xsl:apply-templates select="@*|node()"/>
>   </xsl:copy>
> </xsl:template>
> 
> </xsl:stylesheet>
> """
> 
> SOURCE = """<spam id="eggs">I don't like spam</spam>"""
> 
> #The processor class is the core of the XSLT API
> import Ft
> from Ft.Xml.Xslt import Processor
> from Ft.Xml import InputSource
> 
> from xml.dom import Node
> from Ft.Xml.Domlette import Print, PrettyPrint
> from Ft.Xml.Domlette import NonvalidatingReader
> 
> #from mod_python import apache
> 
> from StringIO import StringIO
> 
> def test(req):
>     # TEST 1
>     req.write ( "Here's the result of just printing the string SOURCE\n" )
>     req.write ( SOURCE )
>     req.write ( "\n\n" )
> 
>     # TEST 2
>     buf = StringIO()
>     transform = InputSource.DefaultFactory.fromString(TRANSFORM, "http://spam.com/identity.xslt")
>     source = InputSource.DefaultFactory.fromString(SOURCE, "http://spam.com/doc.xml")
>     dom = NonvalidatingReader.parse ( source )   
> 
>     PrettyPrint (dom, buf)
>     
>     req.write ( "Here's the result of printing from the SOURCE dom tree (Domlette)\n" )
>     req.write ( buf.getvalue() )
>     req.write ( "\n\n" )
> 
>     buf.close ()
> 
>     # TEST 3
>     req.write("Here's the result of the XSLT processing\n")
>     processor = Processor.Processor()
>     processor.appendStylesheet(transform)
>     result = processor.runNode(dom, "http://spam.com/doc.xml")
>     
>     req.write( result + "\n\n" )
> 
>     # LOCALE STUFF
>     req.write("Ft.DEFAULT_ENCODING = " + Ft.DEFAULT_ENCODING + "\n")
>     req.write("sys.getdefaultencoding = " + sys.getdefaultencoding() + "\n")
>     req.write("local.getdefaultlocale()[1] = " + locale.getdefaultlocale()[1] + "\n\n")
> 
> def handler(req):    
> 
>     req.content_type = "text/plain"   
>     test(req)
>     
>     return 0
> 
> 
> if __name__ == "__main__":
>     test(sys.stdout)



From connie at core3d.com  Wed Jan 22 02:24:56 2003
From: connie at core3d.com (Connie Baggs)
Date: Fri Jan  9 21:59:52 2004
Subject: [mod_python] [error] make_obcallback: could not import mod_python.apache
Message-ID: <20030122.2245669@mis.configured.host>

Hi Im trying to use pyWM (version 0.9984b)webmail in conjunction with 
apache (2.0.43) and mod_python (3.0.1). Ive installed everything fine and 
Apache works however when I try and get the mail the following error is 
logged in the apache error_log file:

[Wed Jan 22 08:24:19 2003] [notice] Apache/2.0.43 (Unix) mod_python/3.0.1 
Python/2.2.1 configured -- resuming normal operations
[Wed Jan 22 08:24:45 2003] [error] make_obcallback: could not import 
mod_python.apache.


The 2nd entry appeared when I tried to connect to open the index.html of 
pyWM.

Any ideas??


From gnb at itga.com.au  Wed Jan 22 14:38:14 2003
From: gnb at itga.com.au (Gregory Bond)
Date: Fri Jan  9 21:59:52 2004
Subject: [mod_python] Query about client server interaction 
In-Reply-To: Your message of Tue, 21 Jan 2003 09:08:16 -0000.
Message-ID: <200301220338.OAA04954@lightning.itga.com.au>

> I am just wondering if it is possible to do this with the publisher handler
> - as that is what I am using at present as I have several python modules and
> functions that I need to use?

This seems to work:

File ltest.py:

	import time
	from mod_python import apache

	def longtime(req):
	    req.content_type = "text/html"
	    req.write('''<html>
	    <head><title>Example Delay Code</title></head>
	    <body>
	    Please wait.  This could take a long time!!!!
	    <ul>
	    ''')
	    for i in range(20):
	        time.sleep(2)
	        req.write("<li> Still waiting.... %d\n" % i)
	    return '</ul>\nAll Done!\n</body></html>'

with a URL like .../ltest.py/longtime and a config like
	<Files ltest.py>
	        PythonHandler   mod_python.publisher
	</Files>

Again, this won't work if your long-running job (here represented by
time.sleep() calls) is not able to stop and do a 'req.write()' every so often!



From mike_verdone at shaw.ca  Tue Jan 21 20:56:29 2003
From: mike_verdone at shaw.ca (Mike Verdone)
Date: Fri Jan  9 21:59:52 2004
Subject: [mod_python] calla function from form and via link
In-Reply-To: <20030121104149.15286.qmail@web2.mailbox.hu>
References: <20030121104149.15286.qmail@web2.mailbox.hu>
Message-ID: <200301212056.29386.mike_verdone@shaw.ca>

On January 21, 2003 03:41 am, sandor.kopanyi@mailbox.hu wrote:
> I have a function which fetches some things from a database; it has
> 2 parameters: req and an id. The req is used to extract username and
> password for the database connection, the second is info needed for
> fetch.
>
> My problem: I would like to use the same function, with the same
> purpose, but in this not from a FORM. but from a dynamically generated
> web-page
> (http://...module.py/function?id=somethingdynamicallygenerated).
> But in this case I - obviously - miss the req, which is "given" to me
> only
> when calling a function from a FORM.

I'm not sure if I know what you mean., but req should always be given to you, 
even when you are accessing a page with a plain old GET request. So:

http://.../function?id=blah

should give you the request object, and same with

http://.../function

Basically, just put the whole link to the function in an <A> tag, and it will 
work same as a form submission.

I'm not sure how the database password got into the req in the first place. Is 
it supplied by the user at some point, or is it the same for every user? If 
the user supplies it on some other page, you'll have to use some session 
handling (google for "python service objects" for some info). If it's always 
the same, hard code it into a module somewhere.

Do I understand correctly?

Mike.


From sandor.kopanyi at mailbox.hu  Wed Jan 22 08:59:21 2003
From: sandor.kopanyi at mailbox.hu (sandor.kopanyi@mailbox.hu)
Date: Fri Jan  9 21:59:52 2004
Subject: [mod_python] calla function from form and via link
In-Reply-To: <200301212056.29386.mike_verdone@shaw.ca>
Message-ID: <20030122075921.22872.qmail@web2.mailbox.hu>

Hi Mike,

> http://.../function?id=blah
> 
> should give you the request object, and same with

Yes, it does. I had a typo in my code (param name).
Thanks for the hint.

> I'm not sure how the database password got into the req in the first
> place. Is 
> it supplied by the user at some point, or is it the same for every
user?

I extract the password from req, as explained in section 3.3 of
mod_python
2.7 docs
(http://www.modpython.org/live/mod_python-2.7.8/doc-html/tut-more-complicated.html):

pw = req.get_basic_auth_pw()
user = req.connection.user

If I return an apache.UNAUTHORIZED the browser will ask for username/pw.

/Sandor

________________________________________________
http://mailbox.hu - M?r SMS ?rtes?t?ssel is!



From io219 at attbi.com  Sun Jan 26 06:50:27 2003
From: io219 at attbi.com (io219@attbi.com)
Date: Fri Jan  9 21:59:53 2004
Subject: [mod_python] Apache 2.0.43 & Windows 2000
Message-ID: <5211277896.20030126065027@attbi.com>

Seems to be all sorts of problems installing in Win2k.
For me, Apache starts, but when I try the mptest.py test,
I get an "Internal Server Error" when running the test.

If I comment the following lines in the .htaccess the error
goes away and Apache outputs the source of mptest.py

#PythonHandler mptest
#PythonDebug On

Any ideas?


From thm at duke.edu  Sun Jan 26 17:22:49 2003
From: thm at duke.edu (Hunter Matthews)
Date: Fri Jan  9 21:59:53 2004
Subject: [mod_python] Upgrade to mod_python 3.0.0 causes some handlers
	not to run.
In-Reply-To: <1042340165.1840.16.camel@jade.biology.duke.edu>
References: <1042340165.1840.16.camel@jade.biology.duke.edu>
Message-ID: <1043619770.1597.57.camel@jade.biology.duke.edu>

On Sat, 2003-01-11 at 21:56, Hunter Matthews wrote:
> I have program (current) that successfully uses the following
> confirguration under apache 1.3.24 and mod_python 2.7.8 (redhat 7.2 or
> 7.3, basically) to have a TypeHandler, AccessHandler, and PythonHander
> run on some get requests.

This has been fixed. I'm mailing the list to let other mod_python users
know what we found.

> 
> If I take this same configuration to httpd 2.0.40 and mod_python 3.0.0
> (redhat 8.0) the python handler runs for the /XMLRPC requests, but
> neither the TypeHandler or the AccessHandler is running for the
> /XMLRPC/$RHN requests.

The problem turned out to be that if you did NOT specify the
"SetHandler" and used PythonModuleHandler in a configuration, mod_python
would not run the handlers you implemented.

The fix is, apparently, to both upgrade to mod_python 3.0.1, and to not
use PythonModuleHandler if you're not using SetHandler.

It looks like 3.0.1 will do the right thing with no SetHandler, IF you
specify all the handlers out that you want to use. PythonHandlerModule
is apparently still broken.

Here's the relevant part of our old configuration.

> <Location ~ "/XMLRPC$">
>     PythonPath "sys.path + ['/usr/share/current']"
>     SetHandler python-program
>     PythonHandler current_apache
> </Location>
> 
> <Location /XMLRPC/$RHN>
>     PythonPath "sys.path + ['/usr/share/current']"
>     PythonHandlerModule current_apache
> </Location>

And here's the one that a user reported success with when using
mod_python 3.0.1:

<Location ~ "/XMLRPC$">
    PythonPath "sys.path + ['/usr/share/current']"
    SetHandler python-program
    PythonHandler current_apache
</Location>

<Location /XMLRPC/$RHN>
    PythonPath "sys.path + ['/usr/share/current']"
    PythonTypeHandler current_apache
    PythonAccessHandler current_apache
</Location>

-- 
Hunter Matthews                          Unix / Network Administrator
Office: BioScience 145/244               Duke Univ. Biology Department
Key: F0F88438 / FFB5 34C0 B350 99A4 BB02  9779 A5DB 8B09 F0F8 8438
Never take candy from strangers. Especially on the internet.


From vfranceschetti at virgilio.it  Mon Jan 27 11:08:28 2003
From: vfranceschetti at virgilio.it (vfranceschetti@virgilio.it)
Date: Fri Jan  9 21:59:53 2004
Subject: [mod_python] (no subject)
Message-ID: <3E316B5B0000351A@ims1a.cp.tin.it>

Hi,
i have these line in my module:
     lun = int(req.headers_in["content-length"])
     testo = req.read(lun)
     dummy=string.find(testo,'A')
     f=open("C:/Programmi/Apache Group/Apache2/py/post.txt","w+")
     f.write("Test :"+str(lun)+"> "+str(dummy)+"--------------"+str(len(testo)))
     f.close()

and this is the result:

Test :41009> -1--------------0

variable length is 0 instead of 41009, and the value is null (string.find
always return -1 but the character A is in the Post body.

Some suggestions?

Thanks

Valentino 

 

 





From tim.parker at intec-telecom-systems.com  Wed Jan 22 09:54:10 2003
From: tim.parker at intec-telecom-systems.com (Tim Parker (UK))
Date: Fri Jan  9 21:59:53 2004
Subject: [mod_python] Query about client server interaction 
Message-ID: <7F124BC48D56D411812500D0B747251403B7B455@FILESERVER002>

Thanks for this - it seems to work except it takes a few seconds to display
the page - and when it does it draws it with several of the "Still waiting"
lines.  After this it then continues as I would expect it to but it seems to
wait a few seconds - well 5 times round the for loop before output the HTML
page to the Client.

Why is this, I would expect it to draw the web page almost immediately with
the Please wait This could take a long time!!!! Line and then draw in the
remaining lines as the script processes.  But it seems to want to cache the
first few lines before drawing them on the client.

Is this some server/client setting or something that needs to be specified
in the Headers so that there is no caching?

Thanks again
Tim.

-----Original Message-----
From: Gregory Bond [mailto:gnb@itga.com.au]
Sent: 22 January 2003 03:38
To: Tim Parker (UK)
Cc: 'mod_python@modpython.org'
Subject: Re: [mod_python] Query about client server interaction 

> I am just wondering if it is possible to do this with the publisher
handler
> - as that is what I am using at present as I have several python modules
and
> functions that I need to use?

This seems to work:

File ltest.py:

        import time
        from mod_python import apache

        def longtime(req):
            req.content_type = "text/html"
            req.write('''<html>
            <head><title>Example Delay Code</title></head>
            <body>
            Please wait.  This could take a long time!!!!
            <ul>
            ''')
            for i in range(20):
                time.sleep(2)
                req.write("<li> Still waiting.... %d\n" % i)
            return '</ul>\nAll Done!\n</body></html>'

with a URL like .../ltest.py/longtime and a config like
        <Files ltest.py>
                PythonHandler   mod_python.publisher
        </Files>

Again, this won't work if your long-running job (here represented by
time.sleep() calls) is not able to stop and do a 'req.write()' every so
often!


This e-mail and any attachments are confidential and may also be privileged and/or copyright 
material of Intec Telecom Systems PLC (or its affiliated companies).  If you are not an 
intended or authorised recipient of this e-mail or have received it in error, please delete 
it immediately and notify the sender by e-mail.  In such a case, reading, reproducing, 
printing or further dissemination of this e-mail is strictly prohibited and may be unlawful. 
Intec Telecom Systems PLC. does not represent or warrant that an attachment hereto is free 
from computer viruses or other defects. The opinions expressed in this e-mail and any 
attachments may be those of the author and are not necessarily those of Intec Telecom 
Systems PLC. 

This footnote also confirms that this email message has been swept by
MIMEsweeper for the presence of computer viruses.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20030122/3ee38cd6/attachment-0002.htm
From gnb at itga.com.au  Thu Jan 23 09:07:22 2003
From: gnb at itga.com.au (Gregory Bond)
Date: Fri Jan  9 21:59:53 2004
Subject: [mod_python] Query about client server interaction 
In-Reply-To: Your message of Wed, 22 Jan 2003 09:54:10 -0000.
Message-ID: <200301222207.JAA14877@lightning.itga.com.au>

> Is this some server/client setting or something that needs to be specified
> in the Headers so that there is no caching?

As far as I can see (and I have done a fair bit of tcp packet tracing on a 
similar problem) this is basically just the way the client works.  The server 
sends stuff as you expect, but the client delays rendering (or displaying the 
results of the render) for some internal reason.

These initial delays will be much longer if the initial bit of the page
contains any other resources (such as style sheets or images) or if the layout
is complex (especially tables).  And if the time between updates is too short
(under 1 second?) then the client seems to batch up the info and only render it
in chunks every 5-10 seconds.

The examples I sent earlier work 100% as you would expect for me for both IE5
and Mozilla 1.1, both on quite slow (P2-class) machines, but a similar example
I had with stylesheets and 1-second status updates was much less successful.



From Mongryong at sympatico.ca  Wed Jan 22 20:51:40 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 21:59:53 2004
Subject: [mod_python] Re: [4suite] 4Suite Reliance on ENVIRONMENT & global variables
In-Reply-To: <200301222107.h0ML7ss1095885@chilled.skew.org>
References: <200301222107.h0ML7ss1095885@chilled.skew.org>
Message-ID: <1043286700.1420.80.camel@refugeeMedia>

Hey Mike, you're a GENIUS!!!  

Below are the results from two tests I did.  The first test set 
USE_MINIDOM=0.  The second test set USE_MINIDOM=1 Here's an output from
my simple little test:

Using 4Suite 0.12a CVS latest

Test#1: set USE_MINIDOM=0

Here's the result of just printing the string SOURCE:
<spam id="eggs">I don't like spam</spam>

Here's the result of printing from the SOURCE dom tree created via the
NonvalidatingReader:
<?xml version="1.0" encoding="UTF-8"?>
<?????? ???="?????????????????????????????????????
????????????????">???????????????????? ????????????????????</??????>

Here's the result of printing from the SOURCE dom tree created via
PyExpat (from PyXML 0.8.2):
<?xml version="1.0" encoding="UTF-8"?>
<spam id="eggs">I don't like spam</spam>

Here's the result of the XSLT processing (simple copy of source XML):
<?xml version="1.0" encoding="UTF-8"?>
<?????? ???="?????????????????????????????????????
????????????????">???????????????????? ????????????????????</??????>

Ft.DEFAULT_ENCODING = utf 
Ft.Xml.Domlette.MINIDOM = 0 
sys.getdefaultencoding = ascii 
local.getdefaultlocale()[1] = utf 
*******************************************
Test#2: set USE_MINIDOM=1

Here's the result of just printing the string SOURCE:
<spam id="eggs">I don't like spam</spam>

Here's the result of printing from the SOURCE dom tree created via the
NonvalidatingReader:
<?xml version="1.0" encoding="UTF-8"?>
<spam id="eggs">I don't like spam</spam>

Here's the result of printing from the SOURCE dom tree create via
PyExpat (from PyXML 0.8.2)
<?xml version="1.0" encoding="UTF-8"?>
<spam id="eggs">I don't like spam</spam>

Here's the result of the XSLT processing (simple copy of source XML): 
<?xml version="1.0" encoding="UTF-8"?>
<spam id="eggs">I don't like spam</spam>

Ft.DEFAULT_ENCODING = utf 
Ft.Xml.Domlette.MINIDOM = 1 
sys.getdefaultencoding = ascii 
local.getdefaultlocale()[1] = utf 

It appears that the encoding problem has nothing to do with PyXML
libraries.

Again, the encoding problem only occurs in an embedded application like
mod_python.  

Does 4Suite set any other ENVIRONMENT variables during its execution?

According to the mod_python documentation, any changes to the OS
environment variables after mod_python has started will not be seen by
any scripts or libraries.  That is, if I change an environment variable
from my shell console or a script changes an environment variable during
Apache's life-time, the changes will not be seen.

If the 4Suite developers could hypothesis what's going, it'd be great. 

On Wed, 2003-01-22 at 16:07, Mike Brown wrote:
> Mongryong wrote:
> > Summary of combinations that produced no 'encoding' problem:
> > Apache 1.3.27 to 2.1 CVS latest
> > mod_python 3.0.2 CVS latest
> > Python 2.2.2  
> > 4Suite 0.11.1 
> > PyXML 0.6.6
> > 
> > To me, the encoding problem appears to have something to do with 4Suite
> > 0.12.x or PyXML 0.8.x or a combination of the two.  
> 
> Unfortunately this doesn't tell us much.
> 
> 0.12.0 is almost a complete rewrite of 4Suite from 0.11.1. 0.11.1 did not use
> cDomlette by default, so my guess is that if you were using 0.11.1 and set
> BETA_DOMLETTE to 1 (I think that's how it was done... could be wrong), you
> might see the same misbehavior.
> 
> In 0.12.0, see what happens if you set USE_MINIDOM to 1 first. It'll probably 
> work (but will be slow).
> 
> Another shot int he dark -
> 
> If PyXML isn't required for mod_python, can you see what happens if you don't
> have it installed? 0.12.0 should be OK without PyXML as long as you don't need
> validation.
> 
> Mike
> 
> -- 
>   Mike J. Brown   |  http://skew.org/~mike/resume/
>   Denver, CO, USA |  http://skew.org/xml/
> _______________________________________________
> 4suite mailing list
> 4suite@lists.fourthought.com
> http://lists.fourthought.com/mailman/listinfo/4suite




From Mongryong at sympatico.ca  Thu Jan 23 00:09:48 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 21:59:53 2004
Subject: [mod_python] Re: [4suite] 4Suite Reliance on ENVIRONMENT & global variables
In-Reply-To: <200301230214.h0N2E16R096773@chilled.skew.org>
References: <200301230214.h0N2E16R096773@chilled.skew.org>
Message-ID: <1043298588.1514.106.camel@refugeeMedia>

> How does mod_python collect 4xslt's output?

I've used string and streams (stringio) for both input and output.  
ie input -> InputSource.DefaultFactory.fromString & fromStream
ie output -> res = p.run(iSrc..), res = runNode(domNode...), and
runX(...outputStream=buf)

The resultant string or stringio.getvalue() is then fed back to
mod_python which then feeds it back to Apache to output.

There's no issues with printing raw strings and streams that haven't been processed by the 4Suite libraries.  

PyXML's PyExpat has no encoding issue. 

The encoding problem isn't a random thing as well - it occurs everytime
mod_python executes the script (with USE_MINIDOM=0).

> 
> -- 
>   Mike J. Brown   |  http://skew.org/~mike/resume/
>   Denver, CO, USA |  http://skew.org/xml/
> _______________________________________________
> 4suite mailing list
> 4suite@lists.fourthought.com
> http://lists.fourthought.com/mailman/listinfo/4suite



From Mongryong at sympatico.ca  Thu Jan 23 00:16:34 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 21:59:53 2004
Subject: [mod_python] Re: [4suite] 4Suite Reliance on ENVIRONMENT & global variables
In-Reply-To: <1043289525.12442.30.camel@hades>
References: <200301230214.h0N2E16R096773@chilled.skew.org> 
	<1043289525.12442.30.camel@hades>
Message-ID: <1043298995.1416.118.camel@refugeeMedia>

> 
> When a sub-interpreter is created, a new module dictionary is created
> which no longer includes a pointer to the 'encodings' module although
> internally Python may say it exists (via a global variable).  This is
> really a bug in Python.
> 
Good plausible theory.  Any idea on how to prove this or test this?

> Try adding an "import encodings" and/or "import codecs" to the
> mod_python module that uses 4Suite.  I kind of remember having to do
> something like that when we had a mod_snake handler for Apache.
> 
Nope, did not work.  I believe 4Suite imports these modules too.  Is
there another place where you imported these modules (ie. at mod_snake
startup?)






From Mongryong at sympatico.ca  Thu Jan 23 16:16:32 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 21:59:53 2004
Subject: [mod_python] Re: [4suite] 4Suite Reliance on ENVIRONMENT & global variables
In-Reply-To: <200301230640.h0N6el2U097430@chilled.skew.org>
References: <200301230640.h0N6el2U097430@chilled.skew.org>
Message-ID: <1043356593.902.10.camel@refugeeMedia>

> Jeremy's answers on this thread may be a couple steps ahead of me, here, but
> take a look at Ft/Xml/src/StreamWriter.c. It is supposed to be the equivalent
> of Ft/Xml/Lib/StreamWriter.py.
> 
> Is there an obvious endianness bug in the C version somewhere?
> Is the test around lines 279-294 producing unexpected results?
> 
The c and py code look similar.  If there was an endianness bug,
wouldn't it just swap characters around?  Well, I can't see any
endianness problems.

I just find it strange that a shell or cgi script doesn't have this
problem.  And why are there no problems with PyExpat or when minidom is
used?  What is different?  If there are answers to these questions, I
think it would help.


From Mongryong at sympatico.ca  Thu Jan 23 19:02:22 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 21:59:53 2004
Subject: [mod_python] Re: [4suite] 4Suite Reliance on ENVIRONMENT & global variables
In-Reply-To: <1043358331.1488.8566.camel@localhost.localdomain>
References: <200301230640.h0N6el2U097430@chilled.skew.org>
	<1043356593.902.10.camel@refugeeMedia> 
	<1043358331.1488.8566.camel@localhost.localdomain>
Message-ID: <1043366543.583.26.camel@refugeeMedia>

Trying mod_python myself is
> still on my to-do.
> 
> Anyway, next wild guess...  ;-)
> 
> Could it be a dynamic library clash between cDomlette's expat, pyexpat
> and Apache's expat?
Okay, I'm just throwing something at you guys:

Is the expat library loaded dynamically or compiled statically in
4Suite?

Now, I've only managed to find libexpat in my /usr/lib directory.  There
it exists as 'libexpat.so.0.3.0' (Aug 19 2002) - I believe this is what
comes with the RedHat Distribution.  I'm suspicious of the 0.3.0.  Is
there a nice way to find out which libexpat is being used?

Here are the expat versions required:
4Suite -> expat 1.95.5
Apache -> expat 1.95.1
PyXML 0.8.2 -> expat 1.95.5
I believe the above is correct.  

Here's my /etc/ld.so.conf file:
/usr/kerberos/lib
/usr/X11R6/lib
/usr/lib/qt-3.0.5/lib
/usr/lib/sane/
/usr/local/lib
/usr/local/lib/mysql

Was this helpful?


> 
> 
> > -- 
> > Uche Ogbuji                                    Fourthought, Inc.
> > http://uche.ogbuji.net    http://4Suite.org    http://fourthought.com
> > The open office file format  - http://www-106.ibm.com/developerworks/xml/library/x-think15/
> > Python Generators + DOM - http://www.xml.com/pub/a/2003/01/08/py-xml.html
> > 4Suite Repository Features - https://www6.software.ibm.com/reg/devworks/dw-x4suite5-i/
> > XML class warfare - http://www.adtmag.com/article.asp?id=6965
> 
> _______________________________________________
> 4suite mailing list
> 4suite@lists.fourthought.com
> http://lists.fourthought.com/mailman/listinfo/4suite



From Mongryong at sympatico.ca  Thu Jan 23 19:36:48 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 21:59:53 2004
Subject: [mod_python] Re: [4suite] 4Suite Reliance on ENVIRONMENT & global variables
In-Reply-To: <1043366543.583.26.camel@refugeeMedia>
References: <200301230640.h0N6el2U097430@chilled.skew.org>
	<1043356593.902.10.camel@refugeeMedia> 
	<1043358331.1488.8566.camel@localhost.localdomain> 
	<1043366543.583.26.camel@refugeeMedia>
Message-ID: <1043368609.2147.68.camel@refugeeMedia>

The libexpat version in my /usr/lib directory is 1.95.4.

Thanks Mike.

On Thu, 2003-01-23 at 19:02, Mongryong wrote:
> Trying mod_python myself is
> > still on my to-do.
> > 
> > Anyway, next wild guess...  ;-)
> > 
> > Could it be a dynamic library clash between cDomlette's expat, pyexpat
> > and Apache's expat?
> Okay, I'm just throwing something at you guys:
> 
> Is the expat library loaded dynamically or compiled statically in
> 4Suite?
> 
> Now, I've only managed to find libexpat in my /usr/lib directory.  There
> it exists as 'libexpat.so.0.3.0' (Aug 19 2002) - I believe this is what
> comes with the RedHat Distribution.  I'm suspicious of the 0.3.0.  Is
> there a nice way to find out which libexpat is being used?
> 
> Here are the expat versions required:
> 4Suite -> expat 1.95.5
> Apache -> expat 1.95.1
> PyXML 0.8.2 -> expat 1.95.5
> I believe the above is correct.  
> 
> Here's my /etc/ld.so.conf file:
> /usr/kerberos/lib
> /usr/X11R6/lib
> /usr/lib/qt-3.0.5/lib
> /usr/lib/sane/
> /usr/local/lib
> /usr/local/lib/mysql
> 
> Was this helpful?
> 
> 
> > 
> > 
> > > -- 
> > > Uche Ogbuji                                    Fourthought, Inc.
> > > http://uche.ogbuji.net    http://4Suite.org    http://fourthought.com
> > > The open office file format  - http://www-106.ibm.com/developerworks/xml/library/x-think15/
> > > Python Generators + DOM - http://www.xml.com/pub/a/2003/01/08/py-xml.html
> > > 4Suite Repository Features - https://www6.software.ibm.com/reg/devworks/dw-x4suite5-i/
> > > XML class warfare - http://www.adtmag.com/article.asp?id=6965
> > 
> > _______________________________________________
> > 4suite mailing list
> > 4suite@lists.fourthought.com
> > http://lists.fourthought.com/mailman/listinfo/4suite
> 
> 
> _______________________________________________
> 4suite mailing list
> 4suite@lists.fourthought.com
> http://lists.fourthought.com/mailman/listinfo/4suite



From Mongryong at sympatico.ca  Thu Jan 23 19:56:15 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 21:59:53 2004
Subject: [mod_python] Re: [4suite] 4Suite Reliance on ENVIRONMENT & global variables
In-Reply-To: <200301232240.h0NMeapw001171@chilled.skew.org>
References: <200301232240.h0NMeapw001171@chilled.skew.org>
Message-ID: <1043369775.578.83.camel@refugeeMedia>

> Your email client mangled the data a bit, so I can't diagnose it correctly, 
> but basically what is happening is that the Unicode string u'spam', or, for 
> clarity, u'\u0073\u0070\u0061\u006d', is being interpreted as 
> u'\u7300\u7000\u6000\u6d00'. When UTF-8 encoded, this becomes bytes:
>    e7 8c 80 e7 80 80 e6 80 80 e6 b4 80
> 
> ...which is not going to look very pleasant in an iso-8859-1 environment.
You're welcome to view the output from my server at:

http://refugeemedia.cjb.net/test/main?ver=0.12



From vfranceschetti at virgilio.it  Mon Jan 27 15:39:11 2003
From: vfranceschetti at virgilio.it (vfranceschetti@virgilio.it)
Date: Fri Jan  9 21:59:53 2004
Subject: [mod_python] request.read problem
Message-ID: <3E316B5B00004378@ims1a.cp.tin.it>

This is a repost, i've forgotten the subject!!!

Hi,
i have these line in my module:
     lun = int(req.headers_in["content-length"])
     testo = req.read(lun)
     dummy=string.find(testo,'A')
     f=open("C:/Programmi/Apache Group/Apache2/py/post.txt","w+")
     f.write("Test :"+str(lun)+"> "+str(dummy)+"--------------"+str(len(testo)))
     f.close()

and this is the result:

Test :41009> -1--------------0

variable length is 0 instead of 41009, and the value is null (string.find
always return -1 but the character A is in the Post body.

Some suggestions?

Thanks

Valentino 





From terrall at oclc.org  Wed Jan 29 14:21:39 2003
From: terrall at oclc.org (Terrall,Tom)
Date: Fri Jan  9 21:59:53 2004
Subject: [mod_python] Apache with mod_python won't start!
Message-ID: <E5431CF93E29F9478878F623E5B9CE9843053E@OA3-SERVER.oa.oclc.org>

I have modified httpd.conf for an attempt to run a test of
apache+mod_python. When httpd needs to read htttpd.conf this error results.

======>
[root@deimos init.d]# ./httpd start
Syntax error on line 234 of /usr/local/apache/conf/httpd.conf:
Cannot load /usr/lib/apache/mod_python.so into server:
/usr/lib/apache/mod_python.so: undefined symbol: ap_null_cleanup
=====>

Line 234 is : LoadModule python_module /usr/lib/apache/mod_python.so

 We are running python 2.2 and apache 2.0.40 and python 2.7.8-1 .

Additions to a working httpd.conf which cause the failure.

========>
"
"
Listen 8400
"
"
LoadModule python_module /usr/lib/apache/mod_python.so
"
"
        <Directory /usr/local/apache/htdocs/test>
            AddHandler python-program .py
            PythonHandler mptest
            AllowOverride FileInfo
            PythonDebug on
        </Directory>
"
"
NameVirtualHost xxx.xxx.xxx.xxx:8400
"
"
<VirtualHost xxx.xxx.xxx.xxx:8400>
   ServerName anaximenter.out.oclc.org
  DocumentRoot /usr/local/apache/htdocs/test
</VirtualHost>
"
"
========>

Thanks in advance.

Tom Terrall


From grisha at modpython.org  Wed Jan 29 14:50:28 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 21:59:53 2004
Subject: [mod_python] Apache with mod_python won't start!
In-Reply-To: <E5431CF93E29F9478878F623E5B9CE9843053E@OA3-SERVER.oa.oclc.org>
Message-ID: <20030129144928.W94180-100000@eden.ispol.com>

Mod_python 2.7.8 does not work with Apache 2.0. I suggest you bring all of
Python, mod_python and Apache to the latest released versions.

Grisha

On Wed, 29 Jan 2003, Terrall,Tom wrote:

> I have modified httpd.conf for an attempt to run a test of
> apache+mod_python. When httpd needs to read htttpd.conf this error results.
>
> ======>
> [root@deimos init.d]# ./httpd start
> Syntax error on line 234 of /usr/local/apache/conf/httpd.conf:
> Cannot load /usr/lib/apache/mod_python.so into server:
> /usr/lib/apache/mod_python.so: undefined symbol: ap_null_cleanup
> =====>
>
> Line 234 is : LoadModule python_module /usr/lib/apache/mod_python.so
>
>  We are running python 2.2 and apache 2.0.40 and python 2.7.8-1 .
>
> Additions to a working httpd.conf which cause the failure.
>
> ========>
> "
> "
> Listen 8400
> "
> "
> LoadModule python_module /usr/lib/apache/mod_python.so
> "
> "
>         <Directory /usr/local/apache/htdocs/test>
>             AddHandler python-program .py
>             PythonHandler mptest
>             AllowOverride FileInfo
>             PythonDebug on
>         </Directory>
> "
> "
> NameVirtualHost xxx.xxx.xxx.xxx:8400
> "
> "
> <VirtualHost xxx.xxx.xxx.xxx:8400>
>    ServerName anaximenter.out.oclc.org
>   DocumentRoot /usr/local/apache/htdocs/test
> </VirtualHost>
> "
> "
> ========>
>
> Thanks in advance.
>
> Tom Terrall
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From terrall at oclc.org  Fri Jan 31 13:41:29 2003
From: terrall at oclc.org (Terrall,Tom)
Date: Fri Jan  9 21:59:53 2004
Subject: [mod_python] Need GLIBC_2.3 for RH7.3
Message-ID: <E5431CF93E29F9478878F623E5B9CE98430546@OA3-SERVER.oa.oclc.org>

Our configuration is apache 2.0.40, python 2.2, mod_python 3.0.1 on RH7.3.

Any suggestions on where might locate libc.so.6 (GLIBC_2.3) in rpm form for
RH7.3? Cannot start apache configured with mod_python because our GLIBC is
2.2.45.  Extensive searching has not found it.

Is it possible to tell mod_python were to find libc.so.6 so that we can
maintain two different versions?

Thanks - Tom Terrall

From gmurali at cs.uchicago.edu  Fri Jan 31 14:20:54 2003
From: gmurali at cs.uchicago.edu (ganapathy murali krishnan)
Date: Fri Jan  9 21:59:53 2004
Subject: [mod_python] cannot import mod_python.apache error
Message-ID: <3E3ADAA6.2010707@cs.uchicago.edu>

I just installed Python-2.3a1 + apache 2.0.44 + mod_python 3.0.1.
I have one vhost (say vhost) in addition to the main one (say mainhost).
The vhost has a python program as the main handler (using SetHandler).
This setup works correctly without any problems on another machine
(Python 1.5+ apache 1.3 + mod_python something), so the problem is not 
in the handler code itself.

When I run the httpd binary, all is fine. The mainhost serves up html 
files without any problems. The vhost is supposed to serve up .py files.
When I go to "http://vhost" I get the following error.

----
[Fri Jan 31 13:53:00 2003] [error] make_obcallback: could not import 
mod_python.apache.

'import site' failed; use -v for traceback
ImportError: No module named mod_python.apache
----

The apache.py is in 
/opt/python/default/lib/python2.3/site-packages/mod_python/apache.py.

I tried many of the suggested workarounds, I couldn't get any of them
to work. The content of my httpd.conf inside the <VirtualHost> and 
</VirtualHost> is enclosed below.

------------
   SetHandler python-program
   PythonDebug on
   # All handlers are stored in a different directory, for security
   PythonPath "sys.path+['/stage/w3serv/vhost.cs.uchicago.edu']"

   # This module handles reloading modules on demand
   PythonInitHandler handlers.init

   # Fire up the first Python handler
   PythonTransHandler handlers.translate

   # Logging configuration
   # PythonOption Log off
   PythonOption Log /stage/w3serv/vhost/logs/debug.log
   # Tell the Python site to ignore these paths, 

   PythonOption DontHandle /icons:/images:/~:/i/:/files/:/pipermail 

   # Tell the Python handler to ignore these extensions 

   PythonOption DontHandleExt html:htm:php:php3:phps:php4:cgi 

 

   # Then tell Apache how to handle them. 

   Alias /icons /stage/w3serv/common/docs/icons 

   Alias /images /stage/w3serv/common/docs/images 

   UserDir disable 

-----

Any help would be appreciated.

- Murali


From thm at duke.edu  Fri Jan 31 15:29:29 2003
From: thm at duke.edu (Hunter Matthews)
Date: Fri Jan  9 21:59:53 2004
Subject: [mod_python] Need GLIBC_2.3 for RH7.3
In-Reply-To: <E5431CF93E29F9478878F623E5B9CE98430546@OA3-SERVER.oa.oclc.org>
References: <E5431CF93E29F9478878F623E5B9CE98430546@OA3-SERVER.oa.oclc.org>
Message-ID: <1044044970.1873.43.camel@jade.biology.duke.edu>

The easiest way would be to download apache-devel, python2-devel (or
whatever you used to get python 2.2 on rh 7.3) and then simply rebuild
the mod_python source rpm. It should be clean.

On Fri, 2003-01-31 at 13:41, Terrall,Tom wrote:
> 
> Our configuration is apache 2.0.40, python 2.2, mod_python 3.0.1 on RH7.3.
> 
> Any suggestions on where might locate libc.so.6 (GLIBC_2.3) in rpm form for
> RH7.3? Cannot start apache configured with mod_python because our GLIBC is
> 2.2.45.  Extensive searching has not found it.
> 
> Is it possible to tell mod_python were to find libc.so.6 so that we can
> maintain two different versions?
> 
> Thanks - Tom Terrall

-- 
Hunter Matthews                          Unix / Network Administrator
Office: BioScience 145/244               Duke Univ. Biology Department
Key: F0F88438 / FFB5 34C0 B350 99A4 BB02  9779 A5DB 8B09 F0F8 8438
Never take candy from strangers. Especially on the internet.


From gmurali at cs.uchicago.edu  Fri Jan 31 16:37:40 2003
From: gmurali at cs.uchicago.edu (ganapathy murali krishnan)
Date: Fri Jan  9 21:59:53 2004
Subject: [mod_python] cannot import mod_python.apache error
References: <3E3ADAA6.2010707@cs.uchicago.edu> <1044049878.13789.42.camel@refugeeMedia>
Message-ID: <3E3AFAB4.8070205@cs.uchicago.edu>

The python library directories are readable and executable by "all".
More curiously, I created a mptest.py as suggested by the mod_python 
test, and it gave me the same error.

I then proceeded to remove the "from mod_python import apache" statement 
from mptest.py, figuring that in that sample code, all it wanted was the 
value "apache.OK". Removing the import statement and replacing 
"apache.OK" with 0 (its value as read from the actual apache.py file),
did not help! It still gave me the same error. So it looks as if 
mod_python.so is trying to import mod_python.apache, and it is triggered
every time I try to serve up a .py file.

I also confirmed that sys.path has the lib/python-2.3/site-packages 
(running python from command line).

I will try to see if strace can give me some information.

- Murali

Mongryong wrote:
> Have you checked out the FAQ section?
> Every newbie runs into this problem.  It's most likely because Apache
> does not  have permission to access python's lib directory.
> 
> Try starting Apache with root access if you can.  Check, the "user"
> paremeter in httpd.conf.  Make sure the "user" is somebody who can
> access python's lib directory.


From gmurali at cs.uchicago.edu  Fri Jan 31 17:15:50 2003
From: gmurali at cs.uchicago.edu (ganapathy murali krishnan)
Date: Fri Jan  9 21:59:53 2004
Subject: [mod_python] cannot import mod_python.apache error
References: <3E3ADAA6.2010707@cs.uchicago.edu>	<1044049878.13789.42.camel@refugeeMedia>  <3E3AFAB4.8070205@cs.uchicago.edu> <1044053589.1599.59.camel@refugeeMedia>
Message-ID: <3E3B03A6.60009@cs.uchicago.edu>

I tried an

strace HTTPDBINARY -d SERVERROOT -f conf/httpd.conf -X 2>/tmp/errlog

and then when I grep the output for site-packages, I dont see any 
site-packages/mod_python at all. All I see, is

-----grep 'site-packages' /tmp/errlog --------
stat64("/opt/python/default/lib/python2.3/site-packages", 
{st_mode=S_IFDIR|0755, st_size=4096, ...}) = 0
open("/opt/python/default/lib/python2.3/site-packages", 
O_RDONLY|O_NONBLOCK|O_LARGEFILE|O_DIRECTORY) = 9
stat64("/opt/python/default/lib/python2.3/site-packages", 
{st_mode=S_IFDIR|0755, st_size=4096, ...}) = 0
stat64("/opt/python/default/lib/python2.3/site-packages/sitecustomize", 
0xbfffe15c) = -1 ENOENT (No such file or directory)
open("/opt/python/default/lib/python2.3/site-packages/sitecustomize.so", 
O_RDONLY|O_LARGEFILE) = -1 ENOENT (No such file or directory)
open("/opt/python/default/lib/python2.3/site-packages/sitecustomizemodule.so", 
O_RDONLY|O_LARGEFILE) = -1 ENOENT (No such file or directory)
open("/opt/python/default/lib/python2.3/site-packages/sitecustomize.py", 
O_RDONLY|O_LARGEFILE) = -1 ENOENT (No such file or directory)
open("/opt/python/default/lib/python2.3/site-packages/sitecustomize.pyc", 
O_RDONLY|O_LARGEFILE) = -1 ENOENT (No such file or directory)
------------------------------------------------

and greping for mod_python gives
----------------------
open("/opt/apache/default/modules/mod_python.so", O_RDONLY) = 4
open("/opt/apache/default/modules/mod_python.so", O_RDONLY) = 5
write(2, "No module named mod_python.apach"..., 33) = 33
----------------------

finally 'grep "apache[^/-]" /tmp/errlog' gives
--------------
open("./php-apache2filter.ini", O_RDONLY) = -1 ENOENT (No such file or 
directory)
open("/opt/php/php-4.3.0/lib/php-apache2filter.ini", O_RDONLY) = -1 
ENOENT (No such file or directory)
read(8, "GET /apache_pb.gif HTTP/1.1\r\nHos"..., 8000) = 477
stat64("/stage/w3serv/vhost.cs.uchicago.edu/docs/apache_pb.gif", 
0xbffff81c) = -1 ENOENT (No such file or directory)
lstat64("/stage/w3serv/vhost.cs.uchicago.edu/docs/apache_pb.gif", 
0xbffff7ec) = -1 ENOENT (No such file or directory)
----------------

The [^/-] is to remove "apache/" and "apache-2.0.44".

It looks as if mod_python is not even trying to load the module?!

- Murali


From vmanera at manord.com  Thu Jan  2 11:09:59 2003
From: vmanera at manord.com (Manera, Villiam)
Date: Fri Jan  9 22:03:39 2004
Subject: I: [mod_python] problem with file download in mod-python 3.0.1
Message-ID: <52DC70C1C1575C418CB033523A29CF140E05AF@exchange2000.manord.com>

Da: Manera, Villiam 
Inviato: gioved? 2 gennaio 2003 11.08
A: 'Gregory (Grisha) Trubetskoy'
Oggetto: R: [mod_python] problem with file download in mod-python 3.0.1


The problem is in python 2.2, Christopher Sean Hilton [chris@vindaloo.com]
wrote:

His problem is that python 2.2 does not include the __methods__ attribute 
for classes but the publisher.py code which actually handles the file inload

depends on it. If he downgrades from python 2.2 to python 2.1 he'll have the

__methods__ attribute of the file class. Someone needs to address this in 
the mod_python code however:

        for m in field.file.__methods__:
            self.__dict__[m] = getattr(field.file, m)

        self.headers = field.headers
        self.filename = field.filename

doesn't work in python 2.2 because __methods__ doesn't exist. The code 
appears to be trying to make local copies of all of the methods in the 
object that gets passed to the user. I had this problem in Unix (FreeBSD) 
two weeks ago and downgrading my python from 2.2 to 2.1 solved it. A google 
search on python, __methods__, 2.1 and 2.2 will yield more information.

Chris

after this John D. Garberson [john.garberson@nexos.com] wrote:
Having to downgrade seems a bit extreme [;-)

I don't know much about the publisher.py module, never having used it.
But if you do this import:

------------------------------------------------------------------------

from types import BuiltinMethodType

------------------------------------------------------------------------

then this function:

------------------------------------------------------------------------

def sim_methods(obj):
    return filter(lambda s, t=obj:
           type(getattr(t, s)) == BuiltinMethodType,
                                             dir(obj))

--------------------------------------------------------------------------

works under both 2.0 and 2.2.1 (I don't have a 2.1 any more) and delivers
the list of methods that it seems you want, looking at the publisher.py
source.  If you're not a fan of the functional programming approach, then
a list comprehension:

-----------------------------------------------------------------------

def sim_methods(obj):
    return [m for m in dir(obj)
                   if type(getattr(obj, m)) == BuiltinMethodType]

-----------------------------------------------------------------------

works just as well.

You could just replace the 'for m in field.file.__methods__:'

with

'for m in sim_methods(field.file):'

Hope this helps.

John
==============================================================
This work fine and I don't investigate any more from more elegant solution
I'm not so good in python!!

Villiam M.
-----Messaggio originale-----
Da: Gregory (Grisha) Trubetskoy [mailto:grisha@modpython.org]
Inviato: venerd? 20 dicembre 2002 22.35
A: Manera, Villiam
Cc: Mod_python@modpython.org
Oggetto: Re: [mod_python] problem with file download in mod-python 3.0.1



I must be missing something obvious, but without testing it and just by
looking at the code, I'm not sure I understand what the benefit is of
filtering out BuiltinMethodType, as opposed to just using straight
dir(obj).

The above might be a moot point since just as Brian Hawthorne suggested
I'm not sure why we don't need the File class at all and am in the process
of trying to fish out any memories from my tired brain about how it came
about in the fist place....

Grisha

On Thu, 12 Dec 2002, Manera, Villiam wrote:

> I'm testing mod-python 3.0.1 with apache 2.0.43 and python 2.2.2
>
> I've founded a older problem in file download (from python 2.1 to 2.2)
>
> the workaround is still the same:
>
> in publisher.py:
>
>  class File:
>      """ Like a file, but also has headers and filename
>      """
>      def __init__(self, field):
>          # steal all the file-like methods
>          for m in dir(field.file):
> 		 self.__dict__[m] = getattr(field.file, m)
>
>          self.headers = field.headers
>          self.filename = field.filename
> ======================workaround
> ==============================================
>  class File:
>      """ Like a file, but also has headers and filename
>      """
>      def __init__(self, field):
>          # steal all the file-like methods
>          #for m in dir(field.file):    #dont' work
>          for m in self.sim_methods(field.file):
>              self.__dict__[m] = getattr(field.file, m)
>
>          self.headers = field.headers
>          self.filename = field.filename
>
> 	#new--------
>      def sim_methods(self,obj):
>          from types import BuiltinMethodType
>          return filter(lambda s, t=obj:
>             type(getattr(t, s)) == BuiltinMethodType, dir(obj))
>
>
> I hope it will be put in place
>
> regards
>
> Villiam Manera
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>



_______________________________________________
Mod_python mailing list
Mod_python@modpython.org
http://www.modpython.org/mailman/listinfo/mod_python


From Markus.Burrer at embedit.de  Thu Jan  2 17:24:02 2003
From: Markus.Burrer at embedit.de (Markus Burrer)
Date: Fri Jan  9 22:03:39 2004
Subject: [mod_python] Installing Python for Apache
Message-ID: <3E1467A2.2020603@embedit.de>

Hi,
i try to install mod_python, but when i add LoadModule to the http.conf 
i get the error message, that Apache could not found the module, but the 
path and the filename are ok and the file is in the modules dir.
I'm using Apache 2.0.43, Python 2.2.2 and python2.2.2-apache2.0.43.zip

Any idea?

Thx for any help and a happy new year

Markus


From wweng at kencast.com  Thu Jan  2 12:10:08 2003
From: wweng at kencast.com (Wei Weng)
Date: Fri Jan  9 22:03:39 2004
Subject: [mod_python] How to build mod_python on Windows NT?
Message-ID: <3E147270.6010409@kencast.com>

I am using Windows NT, Apache2, VC++ 5.0.

Couldn't find any documentation on the procedures in the source zip file 
and googling didn't help much either.

Thanks



From dylanvaughn at yahoo.com  Thu Jan  2 09:54:55 2003
From: dylanvaughn at yahoo.com (Dylan Vaughn)
Date: Fri Jan  9 22:03:39 2004
Subject: [mod_python] linking installation problem
Message-ID: <20030102175455.64670.qmail@web40708.mail.yahoo.com>

Hello all, 

I'm trying to install mod_python and am running into
some errors - I'm running Red Hat Linux 7.3 and I've
already installed:

python 2.2.2 (from source, installed in
/usr/local/bin)
apache 2.0.43 (from source, installed in
/usr/local/apache2)

This is what I'm telling configure:

./configure \
--with-apxs=/usr/local/apache2/bin/apxs \
--with-python=/usr/local/bin/python2.2

which works fine, but when I do make I get at the end:

...lots of other stuff...:
/usr/local/apache2/build/libtool --silent --mode=link
gcc -o mod_python.la
-I/usr/local/src/mod_python-3.0.1/src/include
-I/usr/local/apache2/include
-I/usr/local/include/python2.2  -rpath
/usr/local/apache2/modules -module -avoid-version 
hlistobject.lo hlist.lo filterobject.lo connobject.lo
serverobject.lo util.lo tableobject.lo
requestobject.lo _apachemodule.lo mod_python.lo
-L/usr/local/lib/python2.2/config -Xlinker
-export-dynamic -lm -lpython2.2 -ldl -lpthread -lutil
-lm

*** Warning: This library needs some functionality
provided by -lpython2.2.
*** I have the capability to make that library
automatically link in when
*** you link to this library.  But I can only do this
if you have a
*** shared version of the library, which you do not
appear to have.

*** Warning: libtool could not satisfy all declared
inter-library
*** dependencies of module mod_python.  Therefore,
libtool will create
*** a static module, that should work as long as the
dlopening
*** application is linked with the -dlopen flag.

Now su and make install
  (or, if you only want to perform a partial install,
   you can use make install_dso and make
install_py_lib)

make[1]: Leaving directory
`/usr/local/src/mod_python-3.0.1/src'

and when I try make install I get:

...lots of other stuff...:
/usr/local/apache2/build/libtool --silent
--mode=compile gcc   -DAP_HAVE_DESIGNATED_INITIALIZER
-DLINUX=2 -D_REENTRANT -D_XOPEN_SOURCE=500
-D_BSD_SOURCE -D_SVID_SOURCE -D_GNU_SOURCE -g -O2
-pthread -I/usr/local/apache2/include
-I/usr/local/src/mod_python-3.0.1/src/include
-I/usr/local/apache2/include
-I/usr/local/include/python2.2  -c -o hlistobject.lo
hlistobject.c && touch hlistobject.slo
/usr/local/apache2/build/libtool --silent --mode=link
gcc -o mod_python.la
-I/usr/local/src/mod_python-3.0.1/src/include
-I/usr/local/apache2/include
-I/usr/local/include/python2.2  -rpath
/usr/local/apache2/modules -module -avoid-version 
hlistobject.lo hlist.lo filterobject.lo connobject.lo
serverobject.lo util.lo tableobject.lo
requestobject.lo _apachemodule.lo mod_python.lo
-L/usr/local/lib/python2.2/config -Xlinker
-export-dynamic -lm -lpython2.2 -ldl -lpthread -lutil
-lm

*** Warning: This library needs some functionality
provided by -lpython2.2.
*** I have the capability to make that library
automatically link in when
*** you link to this library.  But I can only do this
if you have a
*** shared version of the library, which you do not
appear to have.

*** Warning: libtool could not satisfy all declared
inter-library
*** dependencies of module mod_python.  Therefore,
libtool will create
*** a static module, that should work as long as the
dlopening
*** application is linked with the -dlopen flag.

Now su and make install
  (or, if you only want to perform a partial install,
   you can use make install_dso and make
install_py_lib)

make[2]: Leaving directory
`/usr/local/src/mod_python-3.0.1/src'

Performing DSO installation.

/usr/bin/install -c src/mod_python.so
/usr/local/apache2/modules
/usr/bin/install: cannot stat `src/mod_python.so': No
such file or directory
make[1]: *** [install_dso] Error 1
make[1]: Leaving directory
`/usr/local/src/mod_python-3.0.1'
make: *** [install] Error 2
[root@dana mod_python-3.0.1]# 

I googled the errors and didn't get anywhere. 

Any ideas?

Thanks in advance,

Dylan


__________________________________________________
Do you Yahoo!?
Yahoo! Mail Plus - Powerful. Affordable. Sign up now.
http://mailplus.yahoo.com

From grisha at modpython.org  Thu Jan  2 14:02:54 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 22:03:39 2004
Subject: [mod_python] linking installation problem
In-Reply-To: <20030102175455.64670.qmail@web40708.mail.yahoo.com>
Message-ID: <20030102140142.N57575-100000@eden.ispol.com>

I think this is the same libtool problem that was reported earlier on this
list. Try rebuilding your apache, but run ./buildconf before running
./configure.

Grisha

On Thu, 2 Jan 2003, Dylan Vaughn wrote:

>
> Hello all,
>
> I'm trying to install mod_python and am running into
> some errors - I'm running Red Hat Linux 7.3 and I've
> already installed:
>
> python 2.2.2 (from source, installed in
> /usr/local/bin)
> apache 2.0.43 (from source, installed in
> /usr/local/apache2)
>
> This is what I'm telling configure:
>
> ./configure \
> --with-apxs=/usr/local/apache2/bin/apxs \
> --with-python=/usr/local/bin/python2.2
>
> which works fine, but when I do make I get at the end:
>
> ...lots of other stuff...:
> /usr/local/apache2/build/libtool --silent --mode=link
> gcc -o mod_python.la
> -I/usr/local/src/mod_python-3.0.1/src/include
> -I/usr/local/apache2/include
> -I/usr/local/include/python2.2  -rpath
> /usr/local/apache2/modules -module -avoid-version
> hlistobject.lo hlist.lo filterobject.lo connobject.lo
> serverobject.lo util.lo tableobject.lo
> requestobject.lo _apachemodule.lo mod_python.lo
> -L/usr/local/lib/python2.2/config -Xlinker
> -export-dynamic -lm -lpython2.2 -ldl -lpthread -lutil
> -lm
>
> *** Warning: This library needs some functionality
> provided by -lpython2.2.
> *** I have the capability to make that library
> automatically link in when
> *** you link to this library.  But I can only do this
> if you have a
> *** shared version of the library, which you do not
> appear to have.
>
> *** Warning: libtool could not satisfy all declared
> inter-library
> *** dependencies of module mod_python.  Therefore,
> libtool will create
> *** a static module, that should work as long as the
> dlopening
> *** application is linked with the -dlopen flag.
>
> Now su and make install
>   (or, if you only want to perform a partial install,
>    you can use make install_dso and make
> install_py_lib)
>
> make[1]: Leaving directory
> `/usr/local/src/mod_python-3.0.1/src'
>
> and when I try make install I get:
>
> ...lots of other stuff...:
> /usr/local/apache2/build/libtool --silent
> --mode=compile gcc   -DAP_HAVE_DESIGNATED_INITIALIZER
> -DLINUX=2 -D_REENTRANT -D_XOPEN_SOURCE=500
> -D_BSD_SOURCE -D_SVID_SOURCE -D_GNU_SOURCE -g -O2
> -pthread -I/usr/local/apache2/include
> -I/usr/local/src/mod_python-3.0.1/src/include
> -I/usr/local/apache2/include
> -I/usr/local/include/python2.2  -c -o hlistobject.lo
> hlistobject.c && touch hlistobject.slo
> /usr/local/apache2/build/libtool --silent --mode=link
> gcc -o mod_python.la
> -I/usr/local/src/mod_python-3.0.1/src/include
> -I/usr/local/apache2/include
> -I/usr/local/include/python2.2  -rpath
> /usr/local/apache2/modules -module -avoid-version
> hlistobject.lo hlist.lo filterobject.lo connobject.lo
> serverobject.lo util.lo tableobject.lo
> requestobject.lo _apachemodule.lo mod_python.lo
> -L/usr/local/lib/python2.2/config -Xlinker
> -export-dynamic -lm -lpython2.2 -ldl -lpthread -lutil
> -lm
>
> *** Warning: This library needs some functionality
> provided by -lpython2.2.
> *** I have the capability to make that library
> automatically link in when
> *** you link to this library.  But I can only do this
> if you have a
> *** shared version of the library, which you do not
> appear to have.
>
> *** Warning: libtool could not satisfy all declared
> inter-library
> *** dependencies of module mod_python.  Therefore,
> libtool will create
> *** a static module, that should work as long as the
> dlopening
> *** application is linked with the -dlopen flag.
>
> Now su and make install
>   (or, if you only want to perform a partial install,
>    you can use make install_dso and make
> install_py_lib)
>
> make[2]: Leaving directory
> `/usr/local/src/mod_python-3.0.1/src'
>
> Performing DSO installation.
>
> /usr/bin/install -c src/mod_python.so
> /usr/local/apache2/modules
> /usr/bin/install: cannot stat `src/mod_python.so': No
> such file or directory
> make[1]: *** [install_dso] Error 1
> make[1]: Leaving directory
> `/usr/local/src/mod_python-3.0.1'
> make: *** [install] Error 2
> [root@dana mod_python-3.0.1]#
>
> I googled the errors and didn't get anywhere.
>
> Any ideas?
>
> Thanks in advance,
>
> Dylan
>
>
> __________________________________________________
> Do you Yahoo!?
> Yahoo! Mail Plus - Powerful. Affordable. Sign up now.
> http://mailplus.yahoo.com
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From dylanvaughn at yahoo.com  Thu Jan  2 12:02:16 2003
From: dylanvaughn at yahoo.com (Dylan Vaughn)
Date: Fri Jan  9 22:03:39 2004
Subject: [mod_python] linking installation problem
In-Reply-To: <20030102140142.N57575-100000@eden.ispol.com>
Message-ID: <20030102200216.76213.qmail@web40702.mail.yahoo.com>

hey there, 

thanks for pointing out the earlier traffic - 

doing ./buildconf before ./configure gave me a
different linking error when rebuilding apache, but
copying over httpd-2.0.43/srclib/apr/libtool with
/usr/local/bin/libtool (suggested in the earlier
thread) and then rebuilding apache and mod_python did
fix the problem. 

thanks for your help! 

dylan



--- "Gregory (Grisha) Trubetskoy"
<grisha@modpython.org> wrote:
> 
> I think this is the same libtool problem that was
> reported earlier on this
> list. Try rebuilding your apache, but run
> ./buildconf before running
> ./configure.
> 
> Grisha
> 
> On Thu, 2 Jan 2003, Dylan Vaughn wrote:
> 
> >
> > Hello all,
> >
> > I'm trying to install mod_python and am running
> into
> > some errors - I'm running Red Hat Linux 7.3 and
> I've
> > already installed:
> >
> > python 2.2.2 (from source, installed in
> > /usr/local/bin)
> > apache 2.0.43 (from source, installed in
> > /usr/local/apache2)
> >
> > This is what I'm telling configure:
> >
> > ./configure \
> > --with-apxs=/usr/local/apache2/bin/apxs \
> > --with-python=/usr/local/bin/python2.2
> >
> > which works fine, but when I do make I get at the
> end:
> >
> > ...lots of other stuff...:
> > /usr/local/apache2/build/libtool --silent
> --mode=link
> > gcc -o mod_python.la
> > -I/usr/local/src/mod_python-3.0.1/src/include
> > -I/usr/local/apache2/include
> > -I/usr/local/include/python2.2  -rpath
> > /usr/local/apache2/modules -module -avoid-version
> > hlistobject.lo hlist.lo filterobject.lo
> connobject.lo
> > serverobject.lo util.lo tableobject.lo
> > requestobject.lo _apachemodule.lo mod_python.lo
> > -L/usr/local/lib/python2.2/config -Xlinker
> > -export-dynamic -lm -lpython2.2 -ldl -lpthread
> -lutil
> > -lm
> >
> > *** Warning: This library needs some functionality
> > provided by -lpython2.2.
> > *** I have the capability to make that library
> > automatically link in when
> > *** you link to this library.  But I can only do
> this
> > if you have a
> > *** shared version of the library, which you do
> not
> > appear to have.
> >
> > *** Warning: libtool could not satisfy all
> declared
> > inter-library
> > *** dependencies of module mod_python.  Therefore,
> > libtool will create
> > *** a static module, that should work as long as
> the
> > dlopening
> > *** application is linked with the -dlopen flag.
> >
> > Now su and make install
> >   (or, if you only want to perform a partial
> install,
> >    you can use make install_dso and make
> > install_py_lib)
> >
> > make[1]: Leaving directory
> > `/usr/local/src/mod_python-3.0.1/src'
> >
> > and when I try make install I get:
> >
> > ...lots of other stuff...:
> > /usr/local/apache2/build/libtool --silent
> > --mode=compile gcc  
> -DAP_HAVE_DESIGNATED_INITIALIZER
> > -DLINUX=2 -D_REENTRANT -D_XOPEN_SOURCE=500
> > -D_BSD_SOURCE -D_SVID_SOURCE -D_GNU_SOURCE -g -O2
> > -pthread -I/usr/local/apache2/include
> > -I/usr/local/src/mod_python-3.0.1/src/include
> > -I/usr/local/apache2/include
> > -I/usr/local/include/python2.2  -c -o
> hlistobject.lo
> > hlistobject.c && touch hlistobject.slo
> > /usr/local/apache2/build/libtool --silent
> --mode=link
> > gcc -o mod_python.la
> > -I/usr/local/src/mod_python-3.0.1/src/include
> > -I/usr/local/apache2/include
> > -I/usr/local/include/python2.2  -rpath
> > /usr/local/apache2/modules -module -avoid-version
> > hlistobject.lo hlist.lo filterobject.lo
> connobject.lo
> > serverobject.lo util.lo tableobject.lo
> > requestobject.lo _apachemodule.lo mod_python.lo
> > -L/usr/local/lib/python2.2/config -Xlinker
> > -export-dynamic -lm -lpython2.2 -ldl -lpthread
> -lutil
> > -lm
> >
> > *** Warning: This library needs some functionality
> > provided by -lpython2.2.
> > *** I have the capability to make that library
> > automatically link in when
> > *** you link to this library.  But I can only do
> this
> > if you have a
> > *** shared version of the library, which you do
> not
> > appear to have.
> >
> > *** Warning: libtool could not satisfy all
> declared
> > inter-library
> > *** dependencies of module mod_python.  Therefore,
> > libtool will create
> > *** a static module, that should work as long as
> the
> > dlopening
> > *** application is linked with the -dlopen flag.
> >
> > Now su and make install
> >   (or, if you only want to perform a partial
> install,
> >    you can use make install_dso and make
> > install_py_lib)
> >
> > make[2]: Leaving directory
> > `/usr/local/src/mod_python-3.0.1/src'
> >
> > Performing DSO installation.
> >
> > /usr/bin/install -c src/mod_python.so
> > /usr/local/apache2/modules
> > /usr/bin/install: cannot stat `src/mod_python.so':
> No
> > such file or directory
> > make[1]: *** [install_dso] Error 1
> > make[1]: Leaving directory
> > `/usr/local/src/mod_python-3.0.1'
> > make: *** [install] Error 2
> > [root@dana mod_python-3.0.1]#
> >
> > I googled the errors and didn't get anywhere.
> >
> > Any ideas?
> >
> > Thanks in advance,
> >
> > Dylan
> >
> >
> > __________________________________________________
> > Do you Yahoo!?
> > Yahoo! Mail Plus - Powerful. Affordable. Sign up
> now.
> > http://mailplus.yahoo.com
> > _______________________________________________
> > Mod_python mailing list
> > Mod_python@modpython.org
> >
> http://www.modpython.org/mailman/listinfo/mod_python
> >
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python


__________________________________________________
Do you Yahoo!?
Yahoo! Mail Plus - Powerful. Affordable. Sign up now.
http://mailplus.yahoo.com

From listmail at xs4all.nl  Sun Jan  5 01:47:26 2003
From: listmail at xs4all.nl (baz)
Date: Fri Jan  9 22:03:40 2004
Subject: [mod_python] linking installation problem [Fwd: Re: [mod_python]
 installation problems]
In-Reply-To: <20030102175455.64670.qmail@web40708.mail.yahoo.com>
References: <20030102175455.64670.qmail@web40708.mail.yahoo.com>
Message-ID: <3E17809E.7090206@xs4all.nl>


-------- Original Message --------
Subject: Re: [mod_python] installation problems
Date: Sun, 22 Dec 2002 14:22:24 +0100
From: baz <listmail@xs4all.nl>
To: Lex Berezhny <LBerezhny@DevIS.com>
References: <1040522021.12314.421.camel@hortus>


Hey, I don't think your problem is libtool related!!

I had the exact same thing, it's a Python thing, not apache..

My solution:

try
# locate libpython2.2.so

if nothing comes up you don't have the python shared library, which is
needed by mod python.

i used the following commands to build it from source and install it:

cd Python-2.2.2/
make distclean
./configure
make OPT="-fpic -O2"
mkdir .extract
(cd .extract; ar xv ../libpython2.2.a)
gcc -shared -o libpython2.2.so .extract/*.o
rm -rf .extract
make install


then proceed to build mod_python as usual..

have fun!

baz.



Lex Berezhny wrote:
 > hi all,
 >
 >   I'm having trouble installing mod_python.
 >
 > My environment:
 > Red Hat Linux release 7.3
 > gcc 2.96
 >
 >
 > My install process:
 >
 > wget http://www.apache.org/dist/httpd/httpd-2.0.43.tar.gz
 > tar xzvf httpd-2.0.43.tar.gz
 > wget http://apache.webmeta.com/dist/httpd/modpython/mod_python-3.0.1.tgz
 > tar xzvf mod_python-3.0.1.tgz
 > wget http://www.python.org/ftp/python/2.2.2/Python-2.2.2.tgz
 > tar xzvf Python-2.2.2.tgz
 >
 > cd httpd-2.0.43
 > ./configure --prefix=/usr/local/apache2
 > make
 > make install
 >
 > cd ../Python-2.2.2/
 > ./configure
 > make
 > make install
 >
 > cd ../mod_python-3.0.1/
 > ./configure --with-apxs=/usr/local/apache2/bin/apxs
 > --with-python=/usr/local/bin/python2.2
 > make
 > make install
 >
 >
 > Warning messages I get (during make):
 >
 > *** Warning: This library needs some functionality provided by
 > -lpython2.2.
 > *** I have the capability to make that library automatically link in
 > when
 > *** you link to this library.  But I can only do this if you have a
 > *** shared version of the library, which you do not appear to have.
 >
 > *** Warning: libtool could not satisfy all declared inter-library
 > *** dependencies of module mod_python.  Therefore, libtool will create
 > *** a static module, that should work as long as the dlopening
 > *** application is linked with the -dlopen flag.
 >
 >
 > The final, fatal, error (during make install):
 >
 > make[2]: Leaving directory
 > `/usr/local/apache2install/mod_python-3.0.1/src'
 >
 > Performing DSO installation.
 >
 > /usr/bin/install -c src/mod_python.so /usr/local/apache2/modules
 > /usr/bin/install: cannot stat `src/mod_python.so': No such file or
 > directory
 > make[1]: *** [install_dso] Error 1
 > make[1]: Leaving directory `/usr/local/apache2install/mod_python-3.0.1'
 > make: *** [install] Error 2
 >
 >
 >
 >
 > any help or pointers would be greatly appreciated,
 >
 >  - lex


From vmedina98 at unitec.edu.ve  Sat Jan  4 21:48:47 2003
From: vmedina98 at unitec.edu.ve (Victor Medina)
Date: Fri Jan  9 22:03:40 2004
Subject: [mod_python] Hello, this is my first post - Compiling mod_python on Windows
Message-ID: <5.2.0.9.0.20030104213024.0264bd50@200.35.82.226>

Hi everybody, have a happy new year!

My name is Victor Medina, I am from Venezuela. I am a c++, java, php and 
python developer (I just like OOP =) ) and also a web developer and I also 
have a open source project on SourceForge, it is named Ikirux.
Ikirux is an effort to build an easy to install completely integrated web 
development environment based around the Apache 2 webserver and other open 
source technology.
http://sourceforge.net/projects/ikirux
Ikirux severs currently support:

Apache, webdav, php4, the latest openssl, zlib and mod deflate, tomcat, 
mysql4, and i want perl and python support out of the box for the next 
release, every thing under a nice, configurable and fast installer built 
with the Inno Setup Compiler.

I am currently working on the next release of the Ikirux server. I want to 
integrate the mod_python module into the next release, but i am having 
problems getting it compiled on  my test machine. I am currently using 
Visual Studio 6 SP5 and Cygwin tools on a Windows 2000 Server SP3. Checking 
out the mod_python source I found a VC project for the Visual Studio .NET, 
which I don't own right now. Anyway, I read the project file (it is a xml 
file!) and try to build a VC++ 6 project out of the information on that 
file. Compiling fails awfully. I also have a complete install of Python 
2.2.2 that i built and the apache 2.0.43, complete; that is binary, 
libraries and source tree.

Is it possible to built mod_python with VC++ 6?

How can I built it?


Thanx for the help

Victor Medina
UNITEC - Venezuela
vmedina98@unitec.edu.ve
msn: victor_medina@hotmail.com   



From grisha at modpython.org  Sat Jan  4 21:55:32 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 22:03:40 2004
Subject: [mod_python] linking installation problem [Fwd: Re: [mod_python]
 installation problems]
In-Reply-To: <3E17809E.7090206@xs4all.nl>
Message-ID: <20030104215200.O3336-100000@eden.ispol.com>

Just to clarify it -

I have no shared library on my Red Hat machine (RH 8.0), and it compiles
fine, the shared library is not required to compile mod_python. If there
is one, mp will use it, but it is not required.

However, old versions of libtool *require* that you have a shared library
if you're making one, the latest versions of libtool do not require it,
but will issue a warning.

Grisha

On Sun, 5 Jan 2003, baz wrote:

>
>
> -------- Original Message --------
> Subject: Re: [mod_python] installation problems
> Date: Sun, 22 Dec 2002 14:22:24 +0100
> From: baz <listmail@xs4all.nl>
> To: Lex Berezhny <LBerezhny@DevIS.com>
> References: <1040522021.12314.421.camel@hortus>
>
>
> Hey, I don't think your problem is libtool related!!
>
> I had the exact same thing, it's a Python thing, not apache..
>
> My solution:
>
> try
> # locate libpython2.2.so
>
> if nothing comes up you don't have the python shared library, which is
> needed by mod python.
>
> i used the following commands to build it from source and install it:
>
> cd Python-2.2.2/
> make distclean
> ./configure
> make OPT="-fpic -O2"
> mkdir .extract
> (cd .extract; ar xv ../libpython2.2.a)
> gcc -shared -o libpython2.2.so .extract/*.o
> rm -rf .extract
> make install
>
>
> then proceed to build mod_python as usual..
>
> have fun!
>
> baz.
>
>
>
> Lex Berezhny wrote:
>  > hi all,
>  >
>  >   I'm having trouble installing mod_python.
>  >
>  > My environment:
>  > Red Hat Linux release 7.3
>  > gcc 2.96
>  >
>  >
>  > My install process:
>  >
>  > wget http://www.apache.org/dist/httpd/httpd-2.0.43.tar.gz
>  > tar xzvf httpd-2.0.43.tar.gz
>  > wget http://apache.webmeta.com/dist/httpd/modpython/mod_python-3.0.1.tgz
>  > tar xzvf mod_python-3.0.1.tgz
>  > wget http://www.python.org/ftp/python/2.2.2/Python-2.2.2.tgz
>  > tar xzvf Python-2.2.2.tgz
>  >
>  > cd httpd-2.0.43
>  > ./configure --prefix=/usr/local/apache2
>  > make
>  > make install
>  >
>  > cd ../Python-2.2.2/
>  > ./configure
>  > make
>  > make install
>  >
>  > cd ../mod_python-3.0.1/
>  > ./configure --with-apxs=/usr/local/apache2/bin/apxs
>  > --with-python=/usr/local/bin/python2.2
>  > make
>  > make install
>  >
>  >
>  > Warning messages I get (during make):
>  >
>  > *** Warning: This library needs some functionality provided by
>  > -lpython2.2.
>  > *** I have the capability to make that library automatically link in
>  > when
>  > *** you link to this library.  But I can only do this if you have a
>  > *** shared version of the library, which you do not appear to have.
>  >
>  > *** Warning: libtool could not satisfy all declared inter-library
>  > *** dependencies of module mod_python.  Therefore, libtool will create
>  > *** a static module, that should work as long as the dlopening
>  > *** application is linked with the -dlopen flag.
>  >
>  >
>  > The final, fatal, error (during make install):
>  >
>  > make[2]: Leaving directory
>  > `/usr/local/apache2install/mod_python-3.0.1/src'
>  >
>  > Performing DSO installation.
>  >
>  > /usr/bin/install -c src/mod_python.so /usr/local/apache2/modules
>  > /usr/bin/install: cannot stat `src/mod_python.so': No such file or
>  > directory
>  > make[1]: *** [install_dso] Error 1
>  > make[1]: Leaving directory `/usr/local/apache2install/mod_python-3.0.1'
>  > make: *** [install] Error 2
>  >
>  >
>  >
>  >
>  > any help or pointers would be greatly appreciated,
>  >
>  >  - lex
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From gnb at itga.com.au  Mon Jan  6 17:16:03 2003
From: gnb at itga.com.au (Gregory Bond)
Date: Fri Jan  9 22:03:40 2004
Subject: [mod_python] http 1.1 persistent connections 
In-Reply-To: Your message of Fri, 27 Dec 2002 00:16:36 -0800.
Message-ID: <200301060616.RAA02997@lightning.itga.com.au>

> I'm new to Python and mod_python - and I'm having trouble finding out if mod_
> python supports  http1.1's persistent connections.  

It seems to for me, at least for shorter-term connections (only 10s of seconds
in my case).  Just call req.write() to send stuff and it seems to come through 
with no delays or buffering or what-have-you.

But you'd have to think carefully about the possible implications of multiple, 
long-running mod_python apps on your server resources.....




From vmedina98 at unitec.edu.ve  Mon Jan  6 18:29:51 2003
From: vmedina98 at unitec.edu.ve (Victor Medina)
Date: Fri Jan  9 22:03:40 2004
Subject: [mod_python] Compiling mod_python on Win32
Message-ID: <5.2.0.9.0.20030106181338.00ba3798@200.35.82.226>

Hi guys!

I am still having problems with mod_python in windows. Hope not be 
bothering too much, but I really want to have mod_python for Apache 2. 
Please understand that compiling it myself is a must.

Ok, so this is what is happening, I am receiving to kinds of problems

PROBLEM #1
F:\IkiruxNXT-Source\mod_python-3.0.1\src\requestobject.c(1017) : error 
C2632: 'long' followed by 'long' is illegal
F:\IkiruxNXT-Source\mod_python-3.0.1\src\requestobject.c(1018) : error 
C2632: 'long' followed by 'long' is illegal
F:\IkiruxNXT-Source\mod_python-3.0.1\src\requestobject.c(1018) : error 
C2632: 'long' followed by 'long' is illegal

The problem seems pretty obvious there is an illegal long long declaration, 
but as far as I know I can use long long's in Win32, at least with the 
Borland Builder compiler, this is the code fragment:

static PyObject *getreq_recmbr_off(requestobject *self, void *name)
{
     PyMemberDef *md = find_memberdef(request_rec_mbrs, name);
     char *addr = (char *)self->request_rec + md->offset;
     if (sizeof(apr_off_t) == sizeof(long long)) { <---- HERE!!!
	long long l = *(long long*)addr; <---- HERE!!!
	return PyLong_FromLongLong(l);
     }
     else {
	/* assume it's long */
	long l = *(long*)addr;
	return PyLong_FromLong(l);
     }
}

PROBLEM #2

I am receiving several link errors(well ok, not errors, just plain 
warnings, I am concerned about the quantity of items), about inconsistent 
linkage: inconsistent dll linkage.  dllexport assumed.

I am attaching the complete output log, hope not be abusing or breaking any 
rules inside the list.

I am using Windows 2000 SP3, Visual Studio 6 SP5,  Python 2.2.2 (custom 
built, not Python.org release, not Activestate's release) and Apache 2.0.43 
(same here,  custom built). The include, lib, libs directory are in the 
VC++ Path, thou not includes as part of the project.

Thanxs for your time an cooperation, I would really a appreciate any 
comments or hints

Victor Medina
UNITEC
vmedina98@unitec.edu.ve
msn: victor_medina@hotmail.com
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mod_python OUTPUT Log.zip
Type: application/zip
Size: 1193 bytes
Desc: not available
Url : http://mailman.modpython.org/pipermail/mod_python/attachments/20030106/ee1bf528/mod_pythonOUTPUTLog-0003.zip
From grisha at modpython.org  Tue Jan  7 00:21:15 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 22:03:40 2004
Subject: [mod_python] Compiling mod_python on Win32
In-Reply-To: <5.2.0.9.0.20030106181338.00ba3798@200.35.82.226>
Message-ID: <20030106234207.V30614-100000@eden.ispol.com>

Microsoft C compiler doesn't support "long long", this has been fixed in
the latest CVS code. Make the functin look like this, and it will work
OK:

static PyObject *getreq_recmbr_off(requestobject *self, void *name)
{
    PyMemberDef *md = find_memberdef(request_rec_mbrs, name);
    char *addr = (char *)self->request_rec + md->offset;
    if (sizeof(apr_off_t) == sizeof(LONG_LONG)) {
	LONG_LONG l = *(LONG_LONG*)addr;
	return PyLong_FromLongLong(l);
    }
    else {
	/* assume it's long */
	long l = *(long*)addr;
	return PyLong_FromLong(l);
    }
}


On Mon, 6 Jan 2003, Victor Medina wrote:

> Hi guys!
>
> I am still having problems with mod_python in windows. Hope not be
> bothering too much, but I really want to have mod_python for Apache 2.
> Please understand that compiling it myself is a must.
>
> Ok, so this is what is happening, I am receiving to kinds of problems
>
> PROBLEM #1
> F:\IkiruxNXT-Source\mod_python-3.0.1\src\requestobject.c(1017) : error
> C2632: 'long' followed by 'long' is illegal
> F:\IkiruxNXT-Source\mod_python-3.0.1\src\requestobject.c(1018) : error
> C2632: 'long' followed by 'long' is illegal
> F:\IkiruxNXT-Source\mod_python-3.0.1\src\requestobject.c(1018) : error
> C2632: 'long' followed by 'long' is illegal
>
> The problem seems pretty obvious there is an illegal long long declaration,
> but as far as I know I can use long long's in Win32, at least with the
> Borland Builder compiler, this is the code fragment:
>
> static PyObject *getreq_recmbr_off(requestobject *self, void *name)
> {
>      PyMemberDef *md = find_memberdef(request_rec_mbrs, name);
>      char *addr = (char *)self->request_rec + md->offset;
>      if (sizeof(apr_off_t) == sizeof(long long)) { <---- HERE!!!
> 	long long l = *(long long*)addr; <---- HERE!!!
> 	return PyLong_FromLongLong(l);
>      }
>      else {
> 	/* assume it's long */
> 	long l = *(long*)addr;
> 	return PyLong_FromLong(l);
>      }
> }
>
> PROBLEM #2
>
> I am receiving several link errors(well ok, not errors, just plain
> warnings, I am concerned about the quantity of items), about inconsistent
> linkage: inconsistent dll linkage.  dllexport assumed.
>
> I am attaching the complete output log, hope not be abusing or breaking any
> rules inside the list.
>
> I am using Windows 2000 SP3, Visual Studio 6 SP5,  Python 2.2.2 (custom
> built, not Python.org release, not Activestate's release) and Apache 2.0.43
> (same here,  custom built). The include, lib, libs directory are in the
> VC++ Path, thou not includes as part of the project.
>
> Thanxs for your time an cooperation, I would really a appreciate any
> comments or hints
>
> Victor Medina
> UNITEC
> vmedina98@unitec.edu.ve
> msn: victor_medina@hotmail.com


From vmedina98 at unitec.edu.ve  Tue Jan  7 12:02:30 2003
From: vmedina98 at unitec.edu.ve (Victor Medina)
Date: Fri Jan  9 22:03:40 2004
Subject: [mod_python] Compiling mod_python on Win32
In-Reply-To: <5.2.0.9.0.20030106181338.00ba3798@200.35.82.226>
Message-ID: <5.2.0.9.0.20030107115502.00bf72d8@200.35.82.226>

Hi Guys!!!

Using LONG_LONG seems to have fixed that problem, although I still can't 
compile mod_python, things are getting better. =)

DOUBT#1: LONG_LONG is a macro for safe type conversion?

PROBLEM#1: I am attaching my output, I am concerned about several thing 
here, there is a lot of warnings about link problems, are they normal, 
expected stuff? Second; there are unresolved external symbols that the 
compiler can't map out here:

connobject.obj : error LNK2001: unresolved external symbol __imp__ntohs@4
connobject.obj : error LNK2001: unresolved external symbol __imp__ntohl@4

I included must of the libs inside the projects, the remaining libs are in 
the path, what is missing?

Thanxs for the help and the patience

Victor Medina
UNITEC
vmedina98@unitec.edu.ve
msn:victor_medina@hotmail.com



From vmedina98 at unitec.edu.ve  Tue Jan  7 12:04:22 2003
From: vmedina98 at unitec.edu.ve (Victor Medina)
Date: Fri Jan  9 22:03:40 2004
Subject: [mod_python] Compiling mod_python on Win32
Message-ID: <5.2.0.9.0.20030107120355.00c0c7b0@200.35.82.226>

Hi Guys!!!

Using LONG_LONG seems to have fixed that problem, although I still can't 
compile mod_python, things are getting better. =)

DOUBT#1: LONG_LONG is a macro for safe type conversion?

PROBLEM#1: I am attaching my output, I am concerned about several thing 
here, there is a lot of warnings about link problems, are they normal, 
expected stuff? Second; there are unresolved external symbols that the 
compiler can't map out here:

connobject.obj : error LNK2001: unresolved external symbol __imp__ntohs@4
connobject.obj : error LNK2001: unresolved external symbol __imp__ntohl@4

I included must of the libs inside the projects, the remaining libs are in 
the path, what is missing?

Thanxs for the help and the patience

Victor Medina
UNITEC
vmedina98@unitec.edu.ve
msn:victor_medina@hotmail.com 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mod_python.zip
Type: application/zip
Size: 10180 bytes
Desc: not available
Url : http://mailman.modpython.org/pipermail/mod_python/attachments/20030107/c4a6b014/mod_python-0003.zip
From jwyant at sfbcic.com  Tue Jan  7 10:14:12 2003
From: jwyant at sfbcic.com (Wyant, Jaime)
Date: Fri Jan  9 22:03:40 2004
Subject: [mod_python] Compiling mod_python on Win32
Message-ID: <654DAEACA633D511B5F500902784B0521890D2@MS-EXCHANGE>

>>>-----Original Message-----
>>>From: Victor Medina [mailto:vmedina98@unitec.edu.ve]
>>>Sent: Tuesday, January 07, 2003 10:04 AM
>>>To: mod_python@modpython.org
>>>Subject: Re: [mod_python] Compiling mod_python on Win32
>>>
>>>
>>>Hi Guys!!!
>>>
>>>Using LONG_LONG seems to have fixed that problem, although I 
>>>still can't 
>>>compile mod_python, things are getting better. =)
>>>
>>>DOUBT#1: LONG_LONG is a macro for safe type conversion?
>>>

Don't know about Doubt #1...

>>>PROBLEM#1: I am attaching my output, I am concerned about 
>>>several thing 
>>>here, there is a lot of warnings about link problems, are 
>>>they normal, 
>>>expected stuff? Second; there are unresolved external 
>>>symbols that the 
>>>compiler can't map out here:
>>>
>>>connobject.obj : error LNK2001: unresolved external symbol 
>>>__imp__ntohs@4
>>>connobject.obj : error LNK2001: unresolved external symbol 
>>>__imp__ntohl@4

Info about ntohl according to MSDN (see the last line):

QuickInfo
  Windows NT: Yes
  Windows: Yes
  Windows CE: Use version 1.0 and later.
  Header: Declared in winsock2.h.
  Import Library: Link with ws2_32.lib.

Good luck!
jaime

From m.syeda at public-health.ucl.ac.uk  Wed Jan  8 09:59:42 2003
From: m.syeda at public-health.ucl.ac.uk (Maheeba Syeda)
Date: Fri Jan  9 22:03:40 2004
Subject: [mod_python] installing apache,mod_python and python
Message-ID: <3E1BF68D.13048.30A809@localhost>

hi every1,


need some help with setting up the following.

I have Python 2.2.2, Apache 2.0.42 and mod_Python 3.0.1 on a 
Windows 2000 system, and want to
enable python files on an Apache hosted site.
How can I set it up?
I get the error:
Syntax error on line 491 of c:/program files/apache
group/apache2/conf/httpd.conf
:
Invalid command 'PythonHandler', perhaps mis-spelled or defined 
by a
module not
included in the server configuration

That section in the httpd.conf file contains:
<Directory "C:/Program Files/Apache 
Group/Apache/htdocs/python">
   AddHandler python-program .py
   PythonHandler mptest
   PythonDebug on
</Directory>


is there anythng i am missing? i have been trying to get it working 
for the last 2 days. is there anyone who will be able to help me with 
this? a step-by-step direction of what to do will be appreciated very 
much.

thanx in advance.
heeba




From hobb at mail.portland.co.uk  Wed Jan  8 23:39:44 2003
From: hobb at mail.portland.co.uk (hobb)
Date: Fri Jan  9 22:03:40 2004
Subject: [mod_python] Error during 'make install'
Message-ID: <002b01c2b76f$39496780$0201a8c0@mindcircus>

Hi, it looks like I'm doing something wrong and can't seem to properly
compile mod_python
This is how I'm compiling it and the error message at the end:

$ cd ~
$ wget http://apache.webmeta.com/dist/httpd/modpython/mod_python-3.0.1.tgz
$ tar -xzf mod_python-3.0.1.tgz
$ cd mod_python-3.0.1
$ ./configure --with-apxs=/usr/local/apache2/bin/apxs
$ make
$ su
# make install
[snip]
Performing DSO installation.

/usr/bin/install -c src/mod_python.so /usr/local/apache2/modules
/usr/bin/install: cannot stat `src/mod_python.so': No such file or directory
make[1]: *** [install_dso] Error 1
make[1]: Leaving directory `/home/hobb/mod_python-3.0.1'
make: *** [install] Error 2
#

What's going wrong?

This is more information of the box im trying to build mod_python on which
might help in troubleshooting:

$ uname -a
Linux Dagger 2.4.20 #2 Sat Jan 4 22:31:49 GMT 2003 i686 unknown
$ /usr/local/apache2/bin/apachectl -v
Server version: Apache/2.0.43
Server built:   Jan  5 2003 00:55:46
$ python -V
Python 2.2.2
$ gcc -v
Reading specs from /usr/lib/gcc-lib/i686-pc-linux-gnu/3.2.1/specs
Configured with:
../gcc-3.2.1/configure --prefix=/usr --enable-languages=c,c++,objc --enable-
threads=posix --enable-__cxa_atexit --disable-nls
Thread model: posix
gcc version 3.2.1 (CRUX)

TIA


From mike_verdone at shaw.ca  Wed Jan  8 18:04:11 2003
From: mike_verdone at shaw.ca (Mike Verdone)
Date: Fri Jan  9 22:03:40 2004
Subject: [mod_python] Persistent Database and Publisher problem
Message-ID: <200301081804.11560.mike_verdone@shaw.ca>

Hi,

I'm having some trouble using the persistent database example code from the 
FAQ and the publisher handler. The problem is that the persistent connection 
is not actually persistent. Instead, it connects on every request, and does 
not disconnect.

I put the database code in a file _database.py, and then I put all the 
database functions into a file _dbcommands.py. The problem is, how do I 
import _database in _dbcomands?

If I use:

import _database

then it make a new connection on every request. I figure that the correct way 
to do it is using the PythonImport apache directive, but the problem now is 
that I can't see the imported module when running through the publisher 
handler. i.e. this doesn't resolve without import _database:

_database.run_sql(...)

I ensured that that _database is being imported by the interpreter (8 
connections are made before any requests), and the module is imported in the 
correctly named interpreter. I suspect the module is "blocked" by 
publisher-handler. Is that the problem?

Any recommendations on how to get around this?

Mike.


From Mongryong at sympatico.ca  Wed Jan  8 20:05:49 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 22:03:40 2004
Subject: [mod_python] 4XSLT/XML (4Suite) is not functioning correctly
Message-ID: <1042074350.5118.15.camel@refugeeMedia>

Hi,

I'm having problems with 4Suite's XSLT processor working properly within
mod_python.  It appears to be an mod_python issue because my code works
fine as a cgi and stand-alone script.  I can't seem to figure out why
it's not working under mod_python and mod_python is not indicating that
any errors/exceptions are occuring.  It seems as if during XSLT
processing, the source XML document is being ignored.

Has anyone been successful in using 4Suite's XSLT tools with
mod_python?  If so, what is your configuration. Thanks.




From gnb at itga.com.au  Thu Jan  9 12:15:48 2003
From: gnb at itga.com.au (Gregory Bond)
Date: Fri Jan  9 22:03:40 2004
Subject: [mod_python] 4XSLT/XML (4Suite) is not functioning correctly 
In-Reply-To: Your message of 08 Jan 2003 20:05:49 -0500.
Message-ID: <200301090115.MAA28427@lightning.itga.com.au>

> any errors/exceptions are occuring.  It seems as if during XSLT
> processing, the source XML document is being ignored.

See FAQ 3.5 (http://www.modpython.org/FAQ/faqw.py?req=show&file=faq03.005.htp) 
for some hints about what changes between CGI and mod_python. My money is on 
environment variables or PWD.



From grisha at modpython.org  Wed Jan  8 21:22:35 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 22:03:40 2004
Subject: [mod_python] Persistent Database and Publisher problem
In-Reply-To: <200301081804.11560.mike_verdone@shaw.ca>
Message-ID: <20030108212029.A58150-100000@eden.ispol.com>


On Wed, 8 Jan 2003, Mike Verdone wrote:

> If I use:
>
> import _database
>
> then it make a new connection on every request.

Are you sure that it isn't making a connection for every Apache process
that's running? If you have 10 processes running, then the first 10
requests will make 10 connections, but the 11th should be reused.

Grisha


From connie at core3d.com  Thu Jan  9 08:24:55 2003
From: connie at core3d.com (Connie Baggs)
Date: Fri Jan  9 22:03:40 2004
Subject: [mod_python] parse error before '*'
Message-ID: <20030109.8245536@mis.configured.host>

Hi
Ive just compiled and installed apache 2.0.43 (apache2) and have 
previously installed python 2.1.1 I am now trying to install the 
mod_python module. The ./configure goes fine with the command 
#./configure ?with-apxs=/usr/local/apache2/bin/apxs 
-with-python=/usr/freeware/bin/python2 

However when I issue the make command it fails with the following error


/usr/local/apache2/build/libtool --silent --mode=compile gcc 
-DAP_HAVE_DESIGNATED_INITIALIZER -D_POSIX_THREAD_SAFE_FUNCTIONS -g -O2 
-I/usr/local/apache2/include 
-I/install/httpd-2.0.43/modules/mod_python-3.0.1/src/include 
-I/usr/local/apache2/include -I/usr/freeware/include/python2.1  -c -o 
mod_python.lo mod_python.c && touch mod_python.slo
In file included from 
/install/httpd-2.0.43/modules/mod_python-3.0.1/src/include/mod_python.h:
115,
 from mod_python.c:67:
/install/httpd-2.0.43/modules/mod_python-3.0.1/src/include/util.h:76: 
parse error before '*' token
/install/httpd-2.0.43/modules/mod_python-3.0.1/src/include/util.h:76: 
parse error before '*' token
/install/httpd-2.0.43/modules/mod_python-3.0.1/src/include/util.h:76: 
warning: data definition has no type or storage class
apxs:Error: Command failed with rc=65536
.
*** Error code 1 (bu21)
*** Error code 1 (bu21)



Any ideas on what is wrong?


From grisha at modpython.org  Thu Jan  9 09:43:09 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 22:03:40 2004
Subject: [mod_python] parse error before '*'
In-Reply-To: <20030109.8245536@mis.configured.host>
Message-ID: <20030109094228.E65000-100000@eden.ispol.com>

I think this is because your Python is too old. According to this:

http://www.modpython.org/live/mod_python-3.0.1/doc-html/inst-prerequisites.html

it has to be 2.2.1 or later.

Grisha

On Thu, 9 Jan 2003, Connie Baggs wrote:

> Hi
> Ive just compiled and installed apache 2.0.43 (apache2) and have
> previously installed python 2.1.1 I am now trying to install the
> mod_python module. The ./configure goes fine with the command
> #./configure ?with-apxs=/usr/local/apache2/bin/apxs
> -with-python=/usr/freeware/bin/python2
>
> However when I issue the make command it fails with the following error
>
>
> /usr/local/apache2/build/libtool --silent --mode=compile gcc
> -DAP_HAVE_DESIGNATED_INITIALIZER -D_POSIX_THREAD_SAFE_FUNCTIONS -g -O2
> -I/usr/local/apache2/include
> -I/install/httpd-2.0.43/modules/mod_python-3.0.1/src/include
> -I/usr/local/apache2/include -I/usr/freeware/include/python2.1  -c -o
> mod_python.lo mod_python.c && touch mod_python.slo
> In file included from
> /install/httpd-2.0.43/modules/mod_python-3.0.1/src/include/mod_python.h:
> 115,
>  from mod_python.c:67:
> /install/httpd-2.0.43/modules/mod_python-3.0.1/src/include/util.h:76:
> parse error before '*' token
> /install/httpd-2.0.43/modules/mod_python-3.0.1/src/include/util.h:76:
> parse error before '*' token
> /install/httpd-2.0.43/modules/mod_python-3.0.1/src/include/util.h:76:
> warning: data definition has no type or storage class
> apxs:Error: Command failed with rc=65536
> .
> *** Error code 1 (bu21)
> *** Error code 1 (bu21)
>
>
>
> Any ideas on what is wrong?
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From connie at core3d.com  Fri Jan 10 02:06:34 2003
From: connie at core3d.com (Connie Baggs)
Date: Fri Jan  9 22:03:40 2004
Subject: [mod_python] error making mod_python
Message-ID: <20030110.2063470@mis.configured.host>

Hi
Ive just compiled and installed apache 2.0.43 (apache2) and python 2.2.1 
I am now trying to install the 
mod_python module. The ./configure goes fine with the command 
#./configure ?with-apxs=/usr/local/apache2/bin/apxs 
-with-python=/usr/local/bin/python2.2

However when I issue the make command it fails with the following error


/usr/local/apache2/build/libtool --silent --mode=link gcc -o 
mod_python.la 
-I/install/httpd-2.0.43/modules/mod_python-3.0.1/src/include 
-I/usr/local/apache2/include -I/usr/local/include/python2.2  -rpath 
/usr/local/apache2/modules -module -avoid-version  hlistobject.lo 
hlist.lo filterobject.lo connobject.lo serverobject.lo util.lo 
tableobject.lo requestobject.lo _apachemodule.lo mod_python.lo 
-L/usr/local/lib/python2.2/config -lm -lpython2.2 -ldl -lpthread -lm
ld32: WARNING 84: /usr/lib32/libm.so is not used for resolving any 
symbol.
ld32: WARNING 84: /usr/lib32/libdl.so is not used for resolving any 
symbol.
Insufficient arguments
Usage: ln [-fis] file1 file2 
       ln [-fis] file1 ... file2 dir 
*** Error code 2 (bu21)
*** Error code 1 (bu21)
)



Any ideas on what is wrong?

_____________________________



From grisha at modpython.org  Thu Jan  9 23:30:09 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 22:03:40 2004
Subject: [mod_python] error making mod_python
In-Reply-To: <20030110.2063470@mis.configured.host>
Message-ID: <20030109232436.X73409-100000@eden.ispol.com>


On Fri, 10 Jan 2003, Connie Baggs wrote:

> Insufficient arguments
> Usage: ln [-fis] file1 file2
>        ln [-fis] file1 ... file2 dir
> *** Error code 2 (bu21)
> *** Error code 1 (bu21)
>
> Any ideas on what is wrong?

Interesting.... Is this IRIX by any chance? I have no access to an SGI
machine to test this, but it looks like ln needs two arguments and so the
args in src/Makefile are wrong. Try finding a line in src/Makefile that
looks like:

        @ln -s .libs/mod_python.so

and change it to

	@ln -s .libs/mod_python.so mod_python.so

then rerun make.

Grisha



From Mongryong at sympatico.ca  Fri Jan 10 00:57:05 2003
From: Mongryong at sympatico.ca (Kia Vang)
Date: Fri Jan  9 22:03:40 2004
Subject: [mod_python] 4XSLT/XML (4Suite) is not functioning correctly
In-Reply-To: <200301090115.MAA28427@lightning.itga.com.au>
References: <200301090115.MAA28427@lightning.itga.com.au>
Message-ID: <1042178225.27744.29.camel@refugeeMedia>

Okay, I'm really frustrated.  My code seems very simple, yet I can't get
mod_python to output it correctly.    

Here's the mod_python code:

from Ft.Xml import InputSource
from Ft.Xml.Xsl import Processor

from mod_python import apache

def handler(req):
	p = Processor.Processor()
	trans = InputSource.DefaultFactory.fromUri("request.xsl")
	src = InputSource.DefaultFactory.fromUri("request.xml")
	p.appendStylesheet(trans)
	res = p.run(src, topLevelParams={'error':0} )
	
	req.content_type="text/html"
	req.write(res)

	return apache.OK

Here's a cgi version:

from Ft.Xml import InputSource
from Ft.Xml.Xsl import Processor
import sys

if __name__ == "__main__":
	p = Processor.Processor()
	trans = InputSource.DefaultFactory.fromUri("request.xsl")
	src = InputSource.DefaultFactory.fromUri("request.xml")
	p.appendStylesheet(trans)
	
	sys.write("Content-type: text/html")
	p.run(src, topLevelParams={'error':0}, outputStream=sys.stdout )
	
Now, I've also done some tests with libxml2 and libxslt.  I get the same
result with mod_python outputting missing information.

Am I missing something?  I'm using the latest versions of apache,
python, and mod_python.	

On Wed, 2003-01-08 at 20:15, Gregory Bond wrote:
> > any errors/exceptions are occuring.  It seems as if during XSLT
> > processing, the source XML document is being ignored.
> 
> See FAQ 3.5 (http://www.modpython.org/FAQ/faqw.py?req=show&file=faq03.005.htp) 
> for some hints about what changes between CGI and mod_python. My money is on 
> environment variables or PWD.
> 
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20030110/55fe2ec7/request-0003.htm
-------------- next part --------------
<?xml version="1.0"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:template name="createObjectiveFormItems">
    <ol>
      <xsl:for-each select="/resume/objectiveList/objective">
        <xsl:variable name="objName">objective<xsl:value-of select="@id"/></xsl:variable>
        <li>
          <xsl:value-of select="@category"/>
          <input type="checkbox">
            <xsl:attribute name="value">
              <xsl:value-of select="$objName"/>
            </xsl:attribute>
          </input>
        </li>
      </xsl:for-each>
    </ol>
  </xsl:template>
  <xsl:template name="createCategoryFormItems">
    <ul>
      <xsl:for-each select="/resume/categoryList/category">
        <div>
          <input type="checkbox">
            <xsl:attribute name="value">
              <xsl:value-of select="@name"/>
            </xsl:attribute>
            <span>
              <xsl:value-of select="@name"/>
            </span>
          </input>
        </div>
      </xsl:for-each>
    </ul>
  </xsl:template>
  <xsl:template name="createCategoryStyle">
    <style type="text/css">
      <xsl:for-each select="/resume/categoryList/category">
        <xsl:text> .</xsl:text>
        <xsl:value-of select="@name"/>
        <xsl:text>{}</xsl:text>
      </xsl:for-each>
    </style>
  </xsl:template>
  <xsl:template name="createOccupationFormItems">
    <ul>
      <xsl:for-each select="/resume/occupationList/occupation">
        <div>
          <input type="checkbox">
            <xsl:attribute name="value">
              <xsl:value-of select="occupationType/@name"/>
            </xsl:attribute>
            <span>
              <xsl:value-of select="occupationType/@name"/>
            </span>
          </input>
        </div>
      </xsl:for-each>
    </ul> 
  </xsl:template>
  <xsl:template match="/">
    <html>
      <head>
        <title>RezQuest</title>
        <link rel="stylesheet" href="/rezquest/css/professional.css" type="text/css" title="professional" media="all"/>
        <link rel="stylesheet" href="/rezquest/css/elegant.css" type="text/css" title="elegant" media="all"/>
        <link rel="stylesheet" href="/rezquest/css/contemporary.css" type="text/css" title="contemporary" media="all"/>
        <script type="text/javascript" src="/rezquest/scripts/common.js"/>
        <script type="text/javascript" src="/rezquest/scripts/main.js"/>
        <xsl:call-template name="createCategoryStyle"/>
      </head>
      <body>
        <div id="menu">
          <div id="appTitle">
            <h3>RezQuest 0.1</h3>
          </div>
          <div id="styleForm" class="menuItem">
            <form name="styleForm">
              <h3>Select Style</h3>
              <div><input type="radio" name="style" value="professional"/>professional</div>
              <div><input type="radio" name="style" value="elegant"/>elegant</div>
              <div><input type="radio" name="style" value="contemporary"/>contemporary</div>
              <div><input id="refreshButton" type="button" name="refresh" value="Refresh"/></div>         
            </form>
          </div>
          <div id="fontForm" class="menuItem">
            <form name="fontForm" onSubmit="window.focus(); return false;">
              <h3>Adjust Base Font-Size</h3>
              <div><input type="radio" name="fontSizeType" value="%" checked="true"/>percent(%)</div>
              <div><input type="radio" name="fontSizeType" value="em"/>M-height(em)</div>
              <div><input type="radio" name="fontSizeType" value="ex"/>x-height(ex)</div>              
              <div>
                <input id="fontSizeVal" type="text" name="fontSizeVal" value="100" size="4" maxLength="3" onkeypress="return resume_fontSizeOnKeyDown(event);"/>
                <input id="fontSizeApply" type="button" name="fontSizeApply" value="Apply"/>
              </div>
            </form>
          </div>
          <div id="sectionForm" class="menuItem">
            <form name="sectionForm">
              <h3>Select Sections</h3>
              <div><input type="checkbox" value="personHeader"/>top header</div>
              <div><input type="checkbox" value="objective"/>objective</div>
              <div><input type="checkbox" value="skills"/>summary of skills</div>
              <div><input type="checkbox" value="education"/>education</div>
              <div><input type="checkbox" value="work"/>work experience</div>
              <div><input type="checkbox" value="projects"/>projects</div>
              <div><input type="checkbox" value="interests"/>interest</div>
              <div><input type="checkbox" value="references"/>references</div>
            </form>            
          </div>
          <div id="objectiveForm" class="menuItem">
            <form name="objectiveForm">
              <h3>Select Objective</h3>
              <xsl:call-template name="createObjectiveFormItems"/>
            </form>
          </div>
          <div id="categoryForm" class="menuItem">
            <form name="categoryForm">
              <h3>Select Categories</h3>
              <xsl:call-template name="createCategoryFormItems"/>
            </form>
          </div>
          <div id="occupationForm" class="menuItem">
            <form name="occupationForm">
              <h3>Select Occupations</h3>
              <xsl:call-template name="createOccupationFormItems"/>
            </form>
          </div>
          <div id="printForm" class="menuItem">
            <form name="printForm">
              <input style="width: 100%" id="previewButton" type="button" name="preview" value="Preview"/>
              <input style="width: 100%" id="printButton" type="button" name="print" value="Print"/>	      
            </form>
          </div>
          <div id="fileOptions" class="menuItem">
            <h3>File Options</h3>
            <div><a id="openResume" href="/cgi-bin/rezquest/main.py?request=login" title="Get another resume">Open New</a></div>
            <div><a id="exitresume" href="/rezquest/exit.html" title="Exit RezQuest">Exit</a></div>
          </div>
          <div id="copyRight">
            <span><xsl:text disable-output-escaping="yes">&#169;</xsl:text> 2002 by Refugee Media Networks.</span>
          </div>
        </div>
        <div id="main">
          <div id="personHeader" class="section">
            <div id="personInfo">
              <div id="residence" class="contactInfo">
                <xsl:apply-templates select="resume/residenceList"/>
              </div>
              <div id="phone" class="contactInfo">
                <xsl:apply-templates select="resume/phoneList"/>
              </div>
              <div id="email" class="contactInfo">
                <xsl:apply-templates select="resume/emailList"/>
              </div>
              <div id="filler1"/>
            </div>
            <xsl:apply-templates select="resume/person"/>
          </div>
          <div id="objective" class="section">
            <h2 class="title">Objective</h2>
            <div class="content">
              <xsl:apply-templates select="resume/objectiveList"/>
            </div>
            <div class="contentFiller">&#160;</div>
          </div>
          <div id="skills" class="section">
            <h2 class="title">Summary of Skills</h2>
            <div class="content">
              <xsl:apply-templates select="resume/skillList"/>
            </div>
            <div class="contentFiller">&#160;</div>
          </div>
          <div id="education" class="section">
            <h2 class="title">Education</h2>
            <div class="content">
              <xsl:apply-templates select="resume/educationList"/>
            </div>
            <div class="contentFiller">&#160;</div>
          </div>
          <div id="work" class="section">
            <h2 class="title">Work Experience</h2>
            <div class="content">
              <xsl:apply-templates select="resume/occupationList"/>
            </div>
            <div class="contentFiller">&#160;</div>
          </div>
          <div id="projects" class="section">
            <h2 class="title">Personal Projects</h2>
            <div class="content">
              <xsl:apply-templates select="resume/projectList"/>
              <div class="contentFiller">&#160;</div>
            </div>
            <div class="contentFiller">&#160;</div>
          </div>
          <div id="interests" class="section">
            <h2 class="title">Interests</h2>
            <div class="content">
              <xsl:apply-templates select="resume/interestList"/>
            </div>
            <div class="contentFiller">&#160;</div>
          </div>
          <div id="references" class="section">
            <h2 class="title">References</h2>
            <div class="content">
              <xsl:apply-templates select="resume/referenceList"/>
            </div>
            <div class="contentFiller">&#160;</div>
          </div>
        </div>
      </body>
    </html>
  </xsl:template>
  <xsl:template match="skillList">
    <ul>
      <xsl:for-each select="skill">
        <li>
          <xsl:attribute name="class">
            <xsl:value-of select="@category"/>
          </xsl:attribute>
          <xsl:value-of select="description"/>
        </li>
      </xsl:for-each>
    </ul>
  </xsl:template>
  <xsl:template match="objectiveList">
    <ul>
      <xsl:for-each select="objective">
        <li>          
          <xsl:attribute name="id">objective<xsl:value-of select="@id"/></xsl:attribute>
          <xsl:value-of select="description"/>
        </li>
      </xsl:for-each>
    </ul>
  </xsl:template>
  <xsl:template match="residenceList">
    <xsl:for-each select="residence">
      <xsl:if test="@type='home'">
        <div class="key">Residence</div>
        <div class="value">
          <div class="region">
            <xsl:value-of select="address"/>
          </div>
          <div class="region">
            <xsl:value-of select="city"/>
          </div>
          <div class="region">
            <xsl:value-of select="state/@code"/>
          </div>
          <div class="region">
            <xsl:value-of select="state/country/@code"/>
          </div>
          <div class="region">
            <xsl:value-of select="zip"/>
          </div>
        </div>
      </xsl:if>
    </xsl:for-each>
  </xsl:template>
  <xsl:template match="educationList">
    <xsl:for-each select="education">
      <xsl:if test="@degree='basc'">
        <h2>
          <xsl:value-of select="@major"/>
        </h2>
        <h3 class="subHead">
          <xsl:value-of select="institution/name"/>
        </h3>
        <h3 class="subHead">
          <span class="region">
            <xsl:value-of select="institution/location/city"/>
          </span>
          <span class="region">
            <xsl:value-of select="institution/location/state/@code"/>
          </span>
        </h3>
        <h3 class="subHead"><xsl:value-of select="substring(startDate,1,7)"/> to <xsl:value-of select="substring(endDate,1,7)"/></h3>
        <div class="contentFiller"/>
        <div>
          <ul>
            <li>Bachelor of Applied Science</li>
          </ul>
        </div>
      </xsl:if>
    </xsl:for-each>
  </xsl:template>
  <xsl:template match="occupationList">
    <xsl:for-each select="occupation">
<!--xsl:if test="occupationType/@name='dsp software' or occupationType/@name='windows'"-->
      <div class="subSection">
        <xsl:attribute name="name"><xsl:value-of select="occupationType/@name"/></xsl:attribute>
        <h2>
          <xsl:value-of select="occupationType/title"/>
        </h2>
        <h3 class="subHead">
          <xsl:value-of select="company/name"/>
        </h3>
        <h3 class="subHead">
          <span class="region">
            <xsl:value-of select="company/location/city"/>
          </span>
          <span class="region">
            <xsl:value-of select="company/location/state/@code"/>
          </span>
        </h3>
        <h3 class="subHead"><xsl:value-of select="substring(startDate,1,7)"/> to <xsl:value-of select="substring(endDate,1,7)"/></h3>
        <div class="contentFiller"/>
        <xsl:apply-templates select="summaryList"/>
      </div>
<!--/xsl:if-->
    </xsl:for-each>
  </xsl:template>
  <xsl:template match="referenceList">
    <xsl:for-each select="reference">
<!--xsl:if test="@degree='basc'"-->
      <div class="subSection">
        <h2>
          <xsl:value-of select="name"/>
        </h2>
        <h3 class="subHead">
          <xsl:value-of select="@position"/>
        </h3>
        <h3 class="subHead">
          <xsl:value-of select="company/name"/>
        </h3>
        <div class="contentFiller"/>
        <div class="subHead"><xsl:value-of select="phone/@area"/>.<xsl:value-of select="phone/number"/><xsl:if test="phone/ext &gt; 0"> ext.<xsl:value-of select="phone/ext"/></xsl:if></div>
        <div class="subHead">
          <xsl:value-of select="email"/>
        </div>
        <div id="filler2"/>
      </div>
<!--/xsl:if-->
    </xsl:for-each>
  </xsl:template>
  <xsl:template match="projectList">
    <ul>
      <xsl:for-each select="project">
        <li>
          <xsl:attribute name="class">
            <xsl:value-of select="@category"/>
          </xsl:attribute>
          <xsl:value-of select="description"/>
        </li>
      </xsl:for-each>
    </ul>
  </xsl:template>
  <xsl:template match="interestList">
    <ul>
      <xsl:for-each select="interest">
        <xsl:choose>
          <xsl:when test="position()!=last()">
            <li>
              <xsl:value-of select="@name"/>
            </li>
          </xsl:when>
          <xsl:otherwise>
            <li>
              <xsl:attribute name="id">lastInterest</xsl:attribute>
              <xsl:value-of select="@name"/>
            </li>
          </xsl:otherwise>
        </xsl:choose>
      </xsl:for-each>
    </ul>
  </xsl:template>
  <xsl:template match="summaryList">
    <ul>
      <xsl:for-each select="summary">
        <li>
          <xsl:attribute name="class">
            <xsl:value-of select="@category"/>
          </xsl:attribute>
          <xsl:value-of select="description"/>
        </li>
      </xsl:for-each>
    </ul>
  </xsl:template>
  <xsl:template match="phoneList">
    <xsl:for-each select="phone">
      <div class="keyValue">
        <div class="key">
          <xsl:value-of select="@type"/>
        </div>
        <div class="value"><xsl:value-of select="@area"/>.<xsl:value-of select="number"/></div>
      </div>
    </xsl:for-each>
  </xsl:template>
  <xsl:template match="emailList">
    <xsl:for-each select="email">
      <xsl:if test="@type='school'">
        <div class="keyValue">
          <div class="key">email</div>
          <div class="value">
            <xsl:value-of select="address"/>
          </div>
        </div>
      </xsl:if>
    </xsl:for-each>
  </xsl:template>
  <xsl:template match="person">
    <div id="personName">
      <div>
        <span id="firstName">
          <xsl:value-of select="firstName"/>
        </span>
        <span id="lastName">
          <xsl:value-of select="lastName"/>
        </span>
      </div>
    </div>
  </xsl:template>
</xsl:stylesheet>
From grisha at modpython.org  Fri Jan 10 11:05:25 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 22:03:40 2004
Subject: [mod_python] 4XSLT/XML (4Suite) is not functioning correctly
In-Reply-To: <1042178225.27744.29.camel@refugeeMedia>
Message-ID: <20030110110412.V80550-100000@eden.ispol.com>

On 10 Jan 2003, Kia Vang wrote:

> Okay, I'm really frustrated.  My code seems very simple, yet I can't get
> mod_python to output it correctly.
>
> Here's the mod_python code:
>
> from Ft.Xml import InputSource
> from Ft.Xml.Xsl import Processor
>
> from mod_python import apache
>
> def handler(req):
> 	p = Processor.Processor()
> 	trans = InputSource.DefaultFactory.fromUri("request.xsl")
> 	src = InputSource.DefaultFactory.fromUri("request.xml")
> 	p.appendStylesheet(trans)
> 	res = p.run(src, topLevelParams={'error':0} )
>
> 	req.content_type="text/html"
> 	req.write(res)
>
> 	return apache.OK

So what specifically is wrong with the above code's behaviour? What it is
supposed to do and what does it really do?

Grisha


From nick.fearn at openmethods.com  Fri Jan 10 16:42:19 2003
From: nick.fearn at openmethods.com (Nick Fearn)
Date: Fri Jan  9 22:03:40 2004
Subject: [mod_python] Mod_python compilation and install
Message-ID: <IDEBKIECLBLNHJABHGBHCEIJCLAA.nick.fearn@openmethods.com>

Hi

I am having trouble compiling and installing Mod_python 2.7.8 (DSO) with
apache-1.3.22-3b, python 1.5.2 on YDL 2.2.

I have recompile python with no threads. The mod_python compile completes OK
but Make ends with the following errors.

Thanks for any help. Nick


[root@linux2t mod_python-2.7.8]# ./configure --with-apxs=/usr/sbin/apxs
creating cache ./config.cache
checking for gcc... gcc
checking whether the C compiler (gcc  ) works... yes
checking whether the C compiler (gcc  ) is a cross-compiler... no
checking whether we are using GNU C... yes
checking whether gcc accepts -g... yes
checking for ranlib... ranlib
checking for ar... ar
checking for a BSD compatible install... /usr/bin/install -c
checking whether make sets ${MAKE}... yes
checking for main in -lm... yes
checking for working const... yes
checking your blood pressure... a bit high, but we can proceed
checking whether apxs is available
checking for --with-apxs... /usr/sbin/apxs executable, good
checking for Apache libexec directory... /usr/lib/apache
checking for Apache include directory... -I/usr/include/apache
checking for --with-apache... no
configure: warning: **** No apache sources specified, static compilation
will not be available.
configure: warning: **** You can use --with-apache to specify where your
Apache sources are.
checking for --with-python... no
checking for python... /usr/local/bin/python
checking Python version... 1.5
checking whether Python is compiled with thread support... no threads, good
checking Python install prefix... /usr/local
checking what libraries Python was linked with...
/usr/local/lib/python1.5/config/libpython1.5.a   -lieee -ldl    -lm
checking linker flags used to link Python...
checking where Python include files are... -I/usr/local/include/python1.5
checking for mkdep... no
checking for makedepend... no
updating cache ./config.cache
creating ./config.status
creating Makefile
creating src/Makefile
creating src/libpython.module
creating Doc/Makefile
[root@linux2t mod_python-2.7.8]# make
make[1]: Entering directory `/home/nick/mod_python-2.7.8/src'
gcc  -I/home/nick/mod_python-2.7.8/src/include -I/usr/include/apache -I/usr/
local/include/python1.5    -c -o mod_python.o mod_python.c
gcc  -I/home/nick/mod_python-2.7.8/src/include -I/usr/include/apache -I/usr/
local/include/python1.5    -c -o _apachemodule.o _apachemodule.c
gcc  -I/home/nick/mod_python-2.7.8/src/include -I/usr/include/apache -I/usr/
local/include/python1.5    -c -o requestobject.o requestobject.c
gcc  -I/home/nick/mod_python-2.7.8/src/include -I/usr/include/apache -I/usr/
local/include/python1.5    -c -o tableobject.o tableobject.c
gcc  -I/home/nick/mod_python-2.7.8/src/include -I/usr/include/apache -I/usr/
local/include/python1.5    -c -o util.o util.c
gcc  -I/home/nick/mod_python-2.7.8/src/include -I/usr/include/apache -I/usr/
local/include/python1.5    -c -o serverobject.o serverobject.c
gcc  -I/home/nick/mod_python-2.7.8/src/include -I/usr/include/apache -I/usr/
local/include/python1.5    -c -o connobject.o connobject.c

Compiling for DSO. For static, do "make static"

/usr/sbin/apxs -I/home/nick/mod_python-2.7.8/src/include -I/usr/include/apac
he -I/usr/local/include/python1.5 -c mod_python.o _apachemodule.o
requestobject.o tableobject.o util.o serverobject.o connobject.o  -lm
/usr/local/lib/python1.5/config/libpython1.5.a   -lieee -ldl    -lm
gcc -shared -o mod_python.so mod_python.o _apachemodule.o requestobject.o
tableobject.o util.o serverobject.o connobject.o -lm
/usr/local/lib/python1.5/config/libpython1.5.a -lieee -ldl -lm
/usr/bin/ld: mod_python.so: undefined versioned symbol name
_LIB_VERSION@@GLIBC_2.0
/usr/bin/ld: failed to set dynamic section sizes: Bad value
collect2: ld returned 1 exit status
apxs:Break: Command failed with rc=1
make[1]: *** [mod_python.so] Error 1
make[1]: Leaving directory `/home/nick/mod_python-2.7.8/src'
make: *** [do_dso] Error 2
[root@linux2t mod_python-2.7.8]#


From Mongryong at sympatico.ca  Fri Jan 10 12:31:37 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 22:03:40 2004
Subject: [mod_python] 4XSLT/XML (4Suite) is not functioning correctly
In-Reply-To: <20030110110412.V80550-100000@eden.ispol.com>
References: <20030110110412.V80550-100000@eden.ispol.com>
Message-ID: <1042219898.1298.13.camel@refugeeMedia>

I've attached two files:

cgi_result.html: the correct result as outputted by cgi/standalone
version of my script

modpython_result.html: the result as outputted by a mod_python version
of my script

From grisha at modpython.org  Fri Jan 10 12:39:06 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 22:03:40 2004
Subject: [mod_python] 4XSLT/XML (4Suite) is not functioning correctly
In-Reply-To: <1042219898.1298.13.camel@refugeeMedia>
Message-ID: <20030110123723.R80550-100000@eden.ispol.com>

My first guess would be something relating to current directory. In true
CGI, the current directory is set to that of where the script is located.
Mod_python doesn't do this because changing directory is not a thread-safe
thing to do. I'd try it with absolute paths to the files.

Grisha

On 10 Jan 2003, Mongryong wrote:

> I've attached two files:
>
> cgi_result.html: the correct result as outputted by cgi/standalone
> version of my script
>
> modpython_result.html: the result as outputted by a mod_python version
> of my script
>
> >From the result, you should see that the html body is empty in modpython
> version.  I've done some tests with the mod_python version of my script
> and everything seems correct up to this point:
>
> res = p.run(src, topLevelParams={'error':0} )
>
> 'res' is the result of the transformation as a string.  The
> 'request.xsl' provides instructions to the XSLT engine on how to
> transform 'request.xml' to a HTML document.  No errors or exceptions are
> thrown.  It just seems as if the 'values' in 'request.xml' are NULL
> (empty) - hence, the body of the HTML is empty.
>
> Like I said previously, I've tried switching to a different XML/XSLT
> library (libxml2/libxslt from GNOME project) and I get the same result.
>
> On Fri, 2003-01-10 at 11:05, Gregory (Grisha) Trubetskoy wrote:
> >
> > On 10 Jan 2003, Kia Vang wrote:
> >
> > > Okay, I'm really frustrated.  My code seems very simple, yet I can't get
> > > mod_python to output it correctly.
> > >
> > > Here's the mod_python code:
> > >
> > > from Ft.Xml import InputSource
> > > from Ft.Xml.Xsl import Processor
> > >
> > > from mod_python import apache
> > >
> > > def handler(req):
> > > 	p = Processor.Processor()
> > > 	trans = InputSource.DefaultFactory.fromUri("request.xsl")
> > > 	src = InputSource.DefaultFactory.fromUri("request.xml")
> > > 	p.appendStylesheet(trans)
> > > 	res = p.run(src, topLevelParams={'error':0} )
> > >
> > > 	req.content_type="text/html"
> > > 	req.write(res)
> > >
> > > 	return apache.OK
> >
> > So what specifically is wrong with the above code's behaviour? What it is
> > supposed to do and what does it really do?
> >
> > Grisha
> >
> > _______________________________________________
> > Mod_python mailing list
> > Mod_python@modpython.org
> > http://www.modpython.org/mailman/listinfo/mod_python
>
>


From Mongryong at sympatico.ca  Fri Jan 10 12:54:27 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 22:03:40 2004
Subject: [mod_python] 4XSLT/XML (4Suite) is not functioning correctly
In-Reply-To: <20030110123723.R80550-100000@eden.ispol.com>
References: <20030110123723.R80550-100000@eden.ispol.com>
Message-ID: <1042221267.1299.32.camel@refugeeMedia>

In my original script, I did include absolute paths.  I did not include
the absolute paths in the email version of the script.  But even with
the absolute path, I get the same 'empty' result.

On Fri, 2003-01-10 at 12:39, Gregory (Grisha) Trubetskoy wrote:
> 
> My first guess would be something relating to current directory. In true
> CGI, the current directory is set to that of where the script is located.
> Mod_python doesn't do this because changing directory is not a thread-safe
> thing to do. I'd try it with absolute paths to the files.
> 
> Grisha
> 
> On 10 Jan 2003, Mongryong wrote:
> 
> > I've attached two files:
> >
> > cgi_result.html: the correct result as outputted by cgi/standalone
> > version of my script
> >
> > modpython_result.html: the result as outputted by a mod_python version
> > of my script
> >
> > >From the result, you should see that the html body is empty in modpython
> > version.  I've done some tests with the mod_python version of my script
> > and everything seems correct up to this point:
> >
> > res = p.run(src, topLevelParams={'error':0} )
> >
> > 'res' is the result of the transformation as a string.  The
> > 'request.xsl' provides instructions to the XSLT engine on how to
> > transform 'request.xml' to a HTML document.  No errors or exceptions are
> > thrown.  It just seems as if the 'values' in 'request.xml' are NULL
> > (empty) - hence, the body of the HTML is empty.
> >
> > Like I said previously, I've tried switching to a different XML/XSLT
> > library (libxml2/libxslt from GNOME project) and I get the same result.
> >
> > On Fri, 2003-01-10 at 11:05, Gregory (Grisha) Trubetskoy wrote:
> > >
> > > On 10 Jan 2003, Kia Vang wrote:
> > >
> > > > Okay, I'm really frustrated.  My code seems very simple, yet I can't get
> > > > mod_python to output it correctly.
> > > >
> > > > Here's the mod_python code:
> > > >
> > > > from Ft.Xml import InputSource
> > > > from Ft.Xml.Xsl import Processor
> > > >
> > > > from mod_python import apache
> > > >
> > > > def handler(req):
> > > > 	p = Processor.Processor()
> > > > 	trans = InputSource.DefaultFactory.fromUri("request.xsl")
> > > > 	src = InputSource.DefaultFactory.fromUri("request.xml")
> > > > 	p.appendStylesheet(trans)
> > > > 	res = p.run(src, topLevelParams={'error':0} )
> > > >
> > > > 	req.content_type="text/html"
> > > > 	req.write(res)
> > > >
> > > > 	return apache.OK
> > >
> > > So what specifically is wrong with the above code's behaviour? What it is
> > > supposed to do and what does it really do?
> > >
> > > Grisha
> > >
> > > _______________________________________________
> > > Mod_python mailing list
> > > Mod_python@modpython.org
> > > http://www.modpython.org/mailman/listinfo/mod_python
> >
> >
> 



From thm at duke.edu  Sat Jan 11 21:56:00 2003
From: thm at duke.edu (Hunter Matthews)
Date: Fri Jan  9 22:03:41 2004
Subject: [mod_python] Upgrade to mod_python 3.0.0 causes some handlers not to run.
Message-ID: <1042340165.1840.16.camel@jade.biology.duke.edu>

I have program (current) that successfully uses the following
confirguration under apache 1.3.24 and mod_python 2.7.8 (redhat 7.2 or
7.3, basically) to have a TypeHandler, AccessHandler, and PythonHander
run on some get requests.

If I take this same configuration to httpd 2.0.40 and mod_python 3.0.0
(redhat 8.0) the python handler runs for the /XMLRPC requests, but
neither the TypeHandler or the AccessHandler is running for the
/XMLRPC/$RHN requests.

I'm assuming this a mod_python config issue, but some other 1.3-> 2.0
upgrade issue may have me here - my ignorance with apache 2.0 is nearly
complete.

Note that its the first block that works perfectly - all the  "/XMLRPC$"
are dealt with by the simple "handler()" function, and they seem to work
fine.

The "/XMLRPC/$RHN" hits _don't_ use the "handler()" function, but do
need to be run through the accesshandler() and the typehandler() (both,
for each request) but neither is running. 

Suggestions?
-----------------------------------------------------------------------------
Alias /XMLRPC/$RHN /local/linux/current/www

<Directory /local/linux/current/www>
    # Make certain this is set - current won't work without it
    Options FollowSymLinks
</Directory>

<Location ~ "/XMLRPC$">
    PythonPath "sys.path + ['/usr/share/current']"
    SetHandler python-program
    PythonHandler current_apache
</Location>

<Location /XMLRPC/$RHN>
    PythonPath "sys.path + ['/usr/share/current']"
    PythonHandlerModule current_apache
</Location>

-- 
Hunter Matthews                          Unix / Network Administrator
Office: BioScience 145/244               Duke Univ. Biology Department
Key: F0F88438 / FFB5 34C0 B350 99A4 BB02  9779 A5DB 8B09 F0F8 8438
Never take candy from strangers. Especially on the internet.


From LBerezhny at DevIS.com  Sun Jan 12 20:35:11 2003
From: LBerezhny at DevIS.com (Lex Berezhny)
Date: Fri Jan  9 22:03:41 2004
Subject: [mod_python] session data and shared memory
Message-ID: <1042421711.5857.17.camel@buddha>

hello,

I know the issue of session management has been brought up before, but I
have a more specific question on the topic. Is there a way to keep
session state across threads/forked apache processes?

Storing the session state in a database carries a lot of overhead since
every request requires at least one query.

Another solution I had in mind was to use the ZODB with ZEO, so that
when a user logs in for example a session object will be created in the
ZODB. But this seems like a great deal of hoops just to store a few
attributes of session.

I have also thought about implementing a very basic LDAP like session
registry service. Each mod_python process would open a connection to
this registry and be able to share session data with other processes.

Has anyone else faced such a problem? Are there any other ways to
synchronize data between mod_python instances?

thanks in advance,

 - lex

-- 
Lex Berezhny <LBerezhny@DevIS.com>


From gnb at itga.com.au  Mon Jan 13 13:40:51 2003
From: gnb at itga.com.au (Gregory Bond)
Date: Fri Jan  9 22:03:41 2004
Subject: [mod_python] session data and shared memory 
In-Reply-To: Your message of 12 Jan 2003 20:35:11 -0500.
Message-ID: <200301130240.NAA18281@lightning.itga.com.au>

LBerezhny@DevIS.com said:
> Has anyone else faced such a problem? Are there any other ways to
> synchronize data between mod_python instances? 

I'm using Albatross (http://www.object-craft.com.au/projects/albatross/) with 
great success for maintaining lots and lots of state in mod_python 
applications.  But it's a framework that might be hard to bolt on to existing 
mod_python code.



From jeffstearns at attbi.com  Sun Jan 12 18:53:37 2003
From: jeffstearns at attbi.com (Jeff Stearns)
Date: Fri Jan  9 22:03:41 2004
Subject: [mod_python] session data and shared memory
In-Reply-To: <1042421711.5857.17.camel@buddha>
Message-ID: <36FDCD68-26A2-11D7-8974-0030653DCC28@attbi.com>

I've had good success with a dedicated "session server".  It's a small 
python server which stores key/value pairs in memory using a Python 
dictionary.

Each apache child maintains a persistent TCP connection to the server. 
It uses a simple RPC protocol to store and fetch key/value pairs. The 
protocol allows for arbitrary binary data of unlimited size.

The server ages out stale data after it hasn't been used for a while.

I also wrote a tiny client-side connection manager in C which handles 
all the details of making and re-establishing connections.

I've used this in commercial web sites. Performance is excellent 
because overhead is so small. (It was originally developed on an 
ancient SPARC.) I might be able to dig up the source if you're 
interested, but it's not hard to write your own.

-jeff stearns

On Sunday, January 12, 2003, at 05:35 PM, Lex Berezhny wrote:

> hello,
>
> I know the issue of session management has been brought up before, but 
> I
> have a more specific question on the topic. Is there a way to keep
> session state across threads/forked apache processes?
>
> Storing the session state in a database carries a lot of overhead since
> every request requires at least one query.
>
> Another solution I had in mind was to use the ZODB with ZEO, so that
> when a user logs in for example a session object will be created in the
> ZODB. But this seems like a great deal of hoops just to store a few
> attributes of session.
>
> I have also thought about implementing a very basic LDAP like session
> registry service. Each mod_python process would open a connection to
> this registry and be able to share session data with other processes.
>
> Has anyone else faced such a problem? Are there any other ways to
> synchronize data between mod_python instances?
>
> thanks in advance,
>
>  - lex
>
> -- 
> Lex Berezhny <LBerezhny@DevIS.com>


From LBerezhny at DevIS.com  Sun Jan 12 22:41:12 2003
From: LBerezhny at DevIS.com (Lex Berezhny)
Date: Fri Jan  9 22:03:41 2004
Subject: [mod_python] session data and shared memory
In-Reply-To: <36FDCD68-26A2-11D7-8974-0030653DCC28@attbi.com>
References: <36FDCD68-26A2-11D7-8974-0030653DCC28@attbi.com>
Message-ID: <1042429272.6951.5.camel@buddha>

I would be most interested in this server, if you could find the code
that would be great.

I also took a look at Albatross (from Gregs post) and it contains a
rather simple but elegant session server, similar to what you have
described. If all else fails I will go with that, but I would like to
see your solution first :-)

thanks,

 - lex

On Sun, 2003-01-12 at 21:53, Jeff Stearns wrote:
> I've had good success with a dedicated "session server".  It's a small 
> python server which stores key/value pairs in memory using a Python 
> dictionary.
> 
> Each apache child maintains a persistent TCP connection to the server. 
> It uses a simple RPC protocol to store and fetch key/value pairs. The 
> protocol allows for arbitrary binary data of unlimited size.
> 
> The server ages out stale data after it hasn't been used for a while.
> 
> I also wrote a tiny client-side connection manager in C which handles 
> all the details of making and re-establishing connections.
> 
> I've used this in commercial web sites. Performance is excellent 
> because overhead is so small. (It was originally developed on an 
> ancient SPARC.) I might be able to dig up the source if you're 
> interested, but it's not hard to write your own.
> 
> -jeff stearns
> 
> On Sunday, January 12, 2003, at 05:35 PM, Lex Berezhny wrote:
> 
> > hello,
> >
> > I know the issue of session management has been brought up before, but 
> > I
> > have a more specific question on the topic. Is there a way to keep
> > session state across threads/forked apache processes?
> >
> > Storing the session state in a database carries a lot of overhead since
> > every request requires at least one query.
> >
> > Another solution I had in mind was to use the ZODB with ZEO, so that
> > when a user logs in for example a session object will be created in the
> > ZODB. But this seems like a great deal of hoops just to store a few
> > attributes of session.
> >
> > I have also thought about implementing a very basic LDAP like session
> > registry service. Each mod_python process would open a connection to
> > this registry and be able to share session data with other processes.
> >
> > Has anyone else faced such a problem? Are there any other ways to
> > synchronize data between mod_python instances?
> >
> > thanks in advance,
> >
> >  - lex
> >
> > -- 
> > Lex Berezhny <LBerezhny@DevIS.com>
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
-- 
Lex Berezhny <LBerezhny@DevIS.com>


From conrad at hep.caltech.edu  Sun Jan 12 20:07:29 2003
From: conrad at hep.caltech.edu (Conrad Steenberg)
Date: Fri Jan  9 22:03:41 2004
Subject: [mod_python] session data and shared memory
In-Reply-To: <1042421711.5857.17.camel@buddha>
References: <1042421711.5857.17.camel@buddha>
Message-ID: <1042430849.11468.94.camel@192.168.1.103>

Hi Lex

You can also take a look at using Berkeley DB, which carries a lot less
overhead than traditional DBs, and stores key value pairs (it looks like
a dictionary). It is very fast, persistent, and scales to TBs in size.
Which you hopefully don't need ;-)

The Python binding is at pybsddb.sf.net. I use it for an XML-RPC app
server at clarens.sf.net.

Cheers

Conrad

On Sun, 2003-01-12 at 17:35, Lex Berezhny wrote:
> hello,
> 
> I know the issue of session management has been brought up before, but I
> have a more specific question on the topic. Is there a way to keep
> session state across threads/forked apache processes?
> 
> Storing the session state in a database carries a lot of overhead since
> every request requires at least one query.
> 
> Another solution I had in mind was to use the ZODB with ZEO, so that
> when a user logs in for example a session object will be created in the
> ZODB. But this seems like a great deal of hoops just to store a few
> attributes of session.
> 
> I have also thought about implementing a very basic LDAP like session
> registry service. Each mod_python process would open a connection to
> this registry and be able to share session data with other processes.
> 
> Has anyone else faced such a problem? Are there any other ways to
> synchronize data between mod_python instances?
> 
> thanks in advance,
> 
>  - lex
-- 
Conrad Steenberg <conrad@hep.caltech.edu>


From Mongryong at sympatico.ca  Mon Jan 13 02:14:39 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 22:03:41 2004
Subject: [mod_python] 4XSLT/XML (4Suite) is not functioning correctly
In-Reply-To: <1042221267.1299.32.camel@refugeeMedia>
References: <20030110123723.R80550-100000@eden.ispol.com> 
	<1042221267.1299.32.camel@refugeeMedia>
Message-ID: <1042442079.1292.122.camel@refugeeMedia>

I forgot to mention this, but the same problem also occurs when the
source XML document is a string (or a cString.StringIO).

For example:

p = Processor.Processor()
trans = InputSource.DefaultFactory.fromUri("someXSLTdoc.xsl")
src = cString.StringIO ()
someModule.makeXMLdoc(src)
p.appendStylesheet(trans)
res = p.run(src)

req.content_type="text/html"
req.write(res)

return apache.OK  

On Fri, 2003-01-10 at 12:54, Mongryong wrote:
> In my original script, I did include absolute paths.  I did not include
> the absolute paths in the email version of the script.  But even with
> the absolute path, I get the same 'empty' result.
> 
> On Fri, 2003-01-10 at 12:39, Gregory (Grisha) Trubetskoy wrote:
> > 
> > My first guess would be something relating to current directory. In true
> > CGI, the current directory is set to that of where the script is located.
> > Mod_python doesn't do this because changing directory is not a thread-safe
> > thing to do. I'd try it with absolute paths to the files.
> > 
> > Grisha
> > 
> > On 10 Jan 2003, Mongryong wrote:
> > 
> > > I've attached two files:
> > >
> > > cgi_result.html: the correct result as outputted by cgi/standalone
> > > version of my script
> > >
> > > modpython_result.html: the result as outputted by a mod_python version
> > > of my script
> > >
> > > >From the result, you should see that the html body is empty in modpython
> > > version.  I've done some tests with the mod_python version of my script
> > > and everything seems correct up to this point:
> > >
> > > res = p.run(src, topLevelParams={'error':0} )
> > >
> > > 'res' is the result of the transformation as a string.  The
> > > 'request.xsl' provides instructions to the XSLT engine on how to
> > > transform 'request.xml' to a HTML document.  No errors or exceptions are
> > > thrown.  It just seems as if the 'values' in 'request.xml' are NULL
> > > (empty) - hence, the body of the HTML is empty.
> > >
> > > Like I said previously, I've tried switching to a different XML/XSLT
> > > library (libxml2/libxslt from GNOME project) and I get the same result.
> > >
> > > On Fri, 2003-01-10 at 11:05, Gregory (Grisha) Trubetskoy wrote:
> > > >
> > > > On 10 Jan 2003, Kia Vang wrote:
> > > >
> > > > > Okay, I'm really frustrated.  My code seems very simple, yet I can't get
> > > > > mod_python to output it correctly.
> > > > >
> > > > > Here's the mod_python code:
> > > > >
> > > > > from Ft.Xml import InputSource
> > > > > from Ft.Xml.Xsl import Processor
> > > > >
> > > > > from mod_python import apache
> > > > >
> > > > > def handler(req):
> > > > > 	p = Processor.Processor()
> > > > > 	trans = InputSource.DefaultFactory.fromUri("request.xsl")
> > > > > 	src = InputSource.DefaultFactory.fromUri("request.xml")
> > > > > 	p.appendStylesheet(trans)
> > > > > 	res = p.run(src, topLevelParams={'error':0} )
> > > > >
> > > > > 	req.content_type="text/html"
> > > > > 	req.write(res)
> > > > >
> > > > > 	return apache.OK
> > > >
> > > > So what specifically is wrong with the above code's behaviour? What it is
> > > > supposed to do and what does it really do?
> > > >
> > > > Grisha
> > > >
> > > > _______________________________________________
> > > > Mod_python mailing list
> > > > Mod_python@modpython.org
> > > > http://www.modpython.org/mailman/listinfo/mod_python
> > >
> > >
> > 
> 
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python



From thanos at 0x01.com  Mon Jan 13 20:06:38 2003
From: thanos at 0x01.com (thanos vassilakis)
Date: Fri Jan  9 22:03:41 2004
Subject: [mod_python] session data and shared memory
In-Reply-To: <1042430849.11468.94.camel@192.168.1.103>
Message-ID: <6F1E0EE9-275C-11D7-BC6F-00306559D868@0x01.com>

You should check out:
How-To: Easy mod_python Session Handling with pso.session
http://sourceforge.net/docman/display_doc.php?docid=10174&group_id=49265

We are using pso at the NYSE with success.

thanos


On Sunday, January 12, 2003, at 11:07  PM, Conrad Steenberg wrote:

> Hi Lex
>
> You can also take a look at using Berkeley DB, which carries a lot less
> overhead than traditional DBs, and stores key value pairs (it looks 
> like
> a dictionary). It is very fast, persistent, and scales to TBs in size.
> Which you hopefully don't need ;-)
>
> The Python binding is at pybsddb.sf.net. I use it for an XML-RPC app
> server at clarens.sf.net.
>
> Cheers
>
> Conrad
>
> On Sun, 2003-01-12 at 17:35, Lex Berezhny wrote:
>> hello,
>>
>> I know the issue of session management has been brought up before, 
>> but I
>> have a more specific question on the topic. Is there a way to keep
>> session state across threads/forked apache processes?
>>
>> Storing the session state in a database carries a lot of overhead 
>> since
>> every request requires at least one query.
>>
>> Another solution I had in mind was to use the ZODB with ZEO, so that
>> when a user logs in for example a session object will be created in 
>> the
>> ZODB. But this seems like a great deal of hoops just to store a few
>> attributes of session.
>>
>> I have also thought about implementing a very basic LDAP like session
>> registry service. Each mod_python process would open a connection to
>> this registry and be able to share session data with other processes.
>>
>> Has anyone else faced such a problem? Are there any other ways to
>> synchronize data between mod_python instances?
>>
>> thanks in advance,
>>
>>  - lex
> -- 
> Conrad Steenberg <conrad@hep.caltech.edu>
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python


From sa at sfsu.edu  Mon Jan 13 18:11:27 2003
From: sa at sfsu.edu (Sean Abrahams)
Date: Fri Jan  9 22:03:41 2004
Subject: [mod_python] Database Help
Message-ID: <17983005796.20030113181127@sfsu.edu>

I'm implementing mod_python and everything is working fine, until I
try to pass an UPDATE sql statement to a database.

I'm grabbing info from one database, and inserting/updating into
another database.

When grabbing, I call upon my dbSelect(db, keys, sql, rows) function,
which connects to a specified database (db) and selects the info.
Works great.

To update/insert I call upon my dbDo(db, sql) function. This function
connects to the specified database (db) and runs the sql. Python wise
everything seems to work fine. I call the dbDo and nothing appears to
go wrong. Except when I look at the data in the db, it wasn't updated.

All of this works fine from the interpreter, so I'm thinking it may
deal with the way mod_python handles processes and dbconnections, of
which I know very little of.

Thus, does connecting to two different databases, right after one
another, cause a problem in mod_python? I'm supposing I must change my
dbConnect() function to take this into consideration due to the way
mod_python/apache function.

Some ideas? I want to learn!

Thanks,
--Sean

Running:
Apache/2.0.43 (Debian GNU/Linux) DAV/2 mod_python/3.0.1 Python/2.2.1
cx_Oracle


From tim.parker at intec-telecom-systems.com  Tue Jan 14 14:49:53 2003
From: tim.parker at intec-telecom-systems.com (Tim Parker)
Date: Fri Jan  9 22:03:41 2004
Subject: [mod_python] Query about FieldStorage
Message-ID: <1042555792.16629.16.camel@isukws0321>

Hi,

I have recently installed Python 2.2.2 and Apache 2.0.43, and have
configured a directory to execute mod_python.  The problem I have is I
do not seem to be able to access any of the environment variables in the
Request Object form object.  Below is the part of my httpd.conf file and
also the python script that I am using.

# Adding directory for python
Alias /python/ "/usr/local/apache2/mod_python/"

<Directory "/usr/local/apache2/mod_python">
    AddHandler python-program .py
    SetHandler python-program
    PythonPath "sys.path+['/usr/local/apache2/mod_python']"
    PythonHandler mod_python.publisher
    Options +ExecCGI
    PythonDebug On
</Directory>

And the python function is as follows:

def my_test(req):
  dict = req.form

  list = req.form.list

  keys = dict.keys()
  str = dict_to_str(dict)

  str = "<H1>Test Page for FieldStorage</H1>\n"+ str + "\nlen(list) %d"
% len(list)

  return str


If anyone had any ideas or somewhere I can look at some examples for
using CGI Environment variables that would be really helpful.

Thanks in advance
regards
Tim.



This e-mail and any attachments are confidential and may also be privileged and/or copyright 
material of Intec Telecom Systems PLC (or its affiliated companies).  If you are not an 
intended or authorised recipient of this e-mail or have received it in error, please delete 
it immediately and notify the sender by e-mail.  In such a case, reading, reproducing, 
printing or further dissemination of this e-mail is strictly prohibited and may be unlawful. 
Intec Telecom Systems PLC. does not represent or warrant that an attachment hereto is free 
from computer viruses or other defects. The opinions expressed in this e-mail and any 
attachments may be those of the author and are not necessarily those of Intec Telecom 
Systems PLC. 

This footnote also confirms that this email message has been swept by
MIMEsweeper for the presence of computer viruses.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20030114/51d59bd9/attachment-0003.htm
From grisha at modpython.org  Tue Jan 14 11:23:31 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 22:03:41 2004
Subject: [mod_python] Query about FieldStorage
In-Reply-To: <1042555792.16629.16.camel@isukws0321>
Message-ID: <20030114112118.W76303-100000@eden.ispol.com>

Tim - look for "subprocess_env" here:

http://www.modpython.org/live/mod_python-3.0.1/doc-html/pyapi-mprequest-mem.html

Grisha

On 14 Jan 2003, Tim Parker wrote:

> Hi,
>
> I have recently installed Python 2.2.2 and Apache 2.0.43, and have
> configured a directory to execute mod_python.  The problem I have is I
> do not seem to be able to access any of the environment variables in the
> Request Object form object.  Below is the part of my httpd.conf file and
> also the python script that I am using.
>
> # Adding directory for python
> Alias /python/ "/usr/local/apache2/mod_python/"
>
> <Directory "/usr/local/apache2/mod_python">
>     AddHandler python-program .py
>     SetHandler python-program
>     PythonPath "sys.path+['/usr/local/apache2/mod_python']"
>     PythonHandler mod_python.publisher
>     Options +ExecCGI
>     PythonDebug On
> </Directory>
>
> And the python function is as follows:
>
> def my_test(req):
>   dict = req.form
>
>   list = req.form.list
>
>   keys = dict.keys()
>   str = dict_to_str(dict)
>
>   str = "<H1>Test Page for FieldStorage</H1>\n"+ str + "\nlen(list) %d"
> % len(list)
>
>   return str
>
>
> If anyone had any ideas or somewhere I can look at some examples for
> using CGI Environment variables that would be really helpful.
>
> Thanks in advance
> regards
> Tim.
>
>
>
> This e-mail and any attachments are confidential and may also be privileged and/or copyright
> material of Intec Telecom Systems PLC (or its affiliated companies).  If you are not an
> intended or authorised recipient of this e-mail or have received it in error, please delete
> it immediately and notify the sender by e-mail.  In such a case, reading, reproducing,
> printing or further dissemination of this e-mail is strictly prohibited and may be unlawful.
> Intec Telecom Systems PLC. does not represent or warrant that an attachment hereto is free
> from computer viruses or other defects. The opinions expressed in this e-mail and any
> attachments may be those of the author and are not necessarily those of Intec Telecom
> Systems PLC.
>
> This footnote also confirms that this email message has been swept by
> MIMEsweeper for the presence of computer viruses.
>
>


From sa at sfsu.edu  Tue Jan 14 10:43:49 2003
From: sa at sfsu.edu (Sean Abrahams)
Date: Fri Jan  9 22:03:41 2004
Subject: [mod_python] Database Help
In-Reply-To: <D31B04F24EDE7644BB169BB4F080778A06C236A9@s30342g004005>
References: <D31B04F24EDE7644BB169BB4F080778A06C236A9@s30342g004005>
Message-ID: <41042547859.20030114104349@sfsu.edu>

Thanks for all the replies, but I am indeed committing my statement.
Remember I said it worked when not using mod_python =).

Here's my dbDo function:

def dbDo(db, sql):
    dbCon = dbConnect(db)
    dbCursor = dbCon.cursor()

    dbCursor.execute(sql)
    dbCon.commit()

None of this really makes sense because the code seems to run fine,
giving back no errors. It doesn't even work when I tell it to
explicitly run commit via a sql statement.

I'm using cx_Oracle module to connect to an Oracle 8.1.6 database.

In mod_python must you first disconnect from a database, before
connecting to another one, within the same script?

Thanks for the help.

--Sean
    
Tuesday, January 14, 2003, 6:07:32 AM, you wrote:

YH> I am going to make a simple guess here. I might be wrong but I have been
YH> caught off guard when I forget to issue a commit statement. Maybe the
YH> database connections on the updates/inserts are not automatically
YH> committing.

YH> -----Original Message-----
YH> From: Sean Abrahams [mailto:sa@sfsu.edu]
YH> Sent: Monday, January 13, 2003 9:11 PM
YH> To: mod_python@modpython.org
YH> Subject: [mod_python] Database Help


YH> I'm implementing mod_python and everything is working fine, until I
YH> try to pass an UPDATE sql statement to a database.

YH> I'm grabbing info from one database, and inserting/updating into
YH> another database.

YH> When grabbing, I call upon my dbSelect(db, keys, sql, rows) function,
YH> which connects to a specified database (db) and selects the info.
YH> Works great.

YH> To update/insert I call upon my dbDo(db, sql) function. This function
YH> connects to the specified database (db) and runs the sql. Python wise
YH> everything seems to work fine. I call the dbDo and nothing appears to
YH> go wrong. Except when I look at the data in the db, it wasn't updated.

YH> All of this works fine from the interpreter, so I'm thinking it may
YH> deal with the way mod_python handles processes and dbconnections, of
YH> which I know very little of.

YH> Thus, does connecting to two different databases, right after one
YH> another, cause a problem in mod_python? I'm supposing I must change my
YH> dbConnect() function to take this into consideration due to the way
YH> mod_python/apache function.

YH> Some ideas? I want to learn!

YH> Thanks,
YH> --Sean

YH> Running:
YH> Apache/2.0.43 (Debian GNU/Linux) DAV/2 mod_python/3.0.1 Python/2.2.1
YH> cx_Oracle

YH> _______________________________________________
YH> Mod_python mailing list
YH> Mod_python@modpython.org
YH> http://www.modpython.org/mailman/listinfo/mod_python


From sa at sfsu.edu  Tue Jan 14 10:49:15 2003
From: sa at sfsu.edu (Sean Abrahams)
Date: Fri Jan  9 22:03:41 2004
Subject: [mod_python] Database Help
In-Reply-To: <D31B04F24EDE7644BB169BB4F080778A06C236A9@s30342g004005>
References: <D31B04F24EDE7644BB169BB4F080778A06C236A9@s30342g004005>
Message-ID: <481042874359.20030114104915@sfsu.edu>

Please ignore my last message. I solved the problem, and it wasn't
mod_python related. It had to do with a global variable mixup.

Ahh, the little things.

I apologize for the inconvenience and thanks again for everyones help.

--Sean


Tuesday, January 14, 2003, 6:07:32 AM, you wrote:

YH> I am going to make a simple guess here. I might be wrong but I have been
YH> caught off guard when I forget to issue a commit statement. Maybe the
YH> database connections on the updates/inserts are not automatically
YH> committing.

YH> -----Original Message-----
YH> From: Sean Abrahams [mailto:sa@sfsu.edu]
YH> Sent: Monday, January 13, 2003 9:11 PM
YH> To: mod_python@modpython.org
YH> Subject: [mod_python] Database Help


YH> I'm implementing mod_python and everything is working fine, until I
YH> try to pass an UPDATE sql statement to a database.

YH> I'm grabbing info from one database, and inserting/updating into
YH> another database.

YH> When grabbing, I call upon my dbSelect(db, keys, sql, rows) function,
YH> which connects to a specified database (db) and selects the info.
YH> Works great.

YH> To update/insert I call upon my dbDo(db, sql) function. This function
YH> connects to the specified database (db) and runs the sql. Python wise
YH> everything seems to work fine. I call the dbDo and nothing appears to
YH> go wrong. Except when I look at the data in the db, it wasn't updated.

YH> All of this works fine from the interpreter, so I'm thinking it may
YH> deal with the way mod_python handles processes and dbconnections, of
YH> which I know very little of.

YH> Thus, does connecting to two different databases, right after one
YH> another, cause a problem in mod_python? I'm supposing I must change my
YH> dbConnect() function to take this into consideration due to the way
YH> mod_python/apache function.

YH> Some ideas? I want to learn!

YH> Thanks,
YH> --Sean

YH> Running:
YH> Apache/2.0.43 (Debian GNU/Linux) DAV/2 mod_python/3.0.1 Python/2.2.1
YH> cx_Oracle

YH> _______________________________________________
YH> Mod_python mailing list
YH> Mod_python@modpython.org
YH> http://www.modpython.org/mailman/listinfo/mod_python


From Hans.Yandle at cingular.com  Tue Jan 14 13:57:00 2003
From: Hans.Yandle at cingular.com (Yandle, Hans)
Date: Fri Jan  9 22:03:41 2004
Subject: [mod_python] Database Help
Message-ID: <D31B04F24EDE7644BB169BB4F080778A06C236B1@s30342g004005>

Well, I do not have any experience with Oracle db connections. With MS ODBC
connections using the win32 extensions, I have had to issue commit() then
close() for information to take affect. I have used MySQL dbi and PySQLite
with no problems with just commits only. When you run your database update
script, test and see if it is actually committed the data before the
termination of the python script. To my knowledge when a python script
finishes the variables are cleaned up and connections closed. Perhaps the
termination of the python script is causing the buffers or information to be
committed. Maybe a question to the Oracle python dbi maintainer/group might
help.

-----Original Message-----
From: Sean Abrahams [mailto:sa@sfsu.edu]
Sent: Tuesday, January 14, 2003 1:44 PM
To: Yandle, Hans; mod_python@modpython.org
Subject: Re[2]: [mod_python] Database Help


Thanks for all the replies, but I am indeed committing my statement.
Remember I said it worked when not using mod_python =).

Here's my dbDo function:

def dbDo(db, sql):
    dbCon = dbConnect(db)
    dbCursor = dbCon.cursor()

    dbCursor.execute(sql)
    dbCon.commit()

None of this really makes sense because the code seems to run fine,
giving back no errors. It doesn't even work when I tell it to
explicitly run commit via a sql statement.

I'm using cx_Oracle module to connect to an Oracle 8.1.6 database.

In mod_python must you first disconnect from a database, before
connecting to another one, within the same script?

Thanks for the help.

--Sean
    
Tuesday, January 14, 2003, 6:07:32 AM, you wrote:

YH> I am going to make a simple guess here. I might be wrong but I have been
YH> caught off guard when I forget to issue a commit statement. Maybe the
YH> database connections on the updates/inserts are not automatically
YH> committing.

YH> -----Original Message-----
YH> From: Sean Abrahams [mailto:sa@sfsu.edu]
YH> Sent: Monday, January 13, 2003 9:11 PM
YH> To: mod_python@modpython.org
YH> Subject: [mod_python] Database Help


YH> I'm implementing mod_python and everything is working fine, until I
YH> try to pass an UPDATE sql statement to a database.

YH> I'm grabbing info from one database, and inserting/updating into
YH> another database.

YH> When grabbing, I call upon my dbSelect(db, keys, sql, rows) function,
YH> which connects to a specified database (db) and selects the info.
YH> Works great.

YH> To update/insert I call upon my dbDo(db, sql) function. This function
YH> connects to the specified database (db) and runs the sql. Python wise
YH> everything seems to work fine. I call the dbDo and nothing appears to
YH> go wrong. Except when I look at the data in the db, it wasn't updated.

YH> All of this works fine from the interpreter, so I'm thinking it may
YH> deal with the way mod_python handles processes and dbconnections, of
YH> which I know very little of.

YH> Thus, does connecting to two different databases, right after one
YH> another, cause a problem in mod_python? I'm supposing I must change my
YH> dbConnect() function to take this into consideration due to the way
YH> mod_python/apache function.

YH> Some ideas? I want to learn!

YH> Thanks,
YH> --Sean

YH> Running:
YH> Apache/2.0.43 (Debian GNU/Linux) DAV/2 mod_python/3.0.1 Python/2.2.1
YH> cx_Oracle

YH> _______________________________________________
YH> Mod_python mailing list
YH> Mod_python@modpython.org
YH> http://www.modpython.org/mailman/listinfo/mod_python
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20030114/a35ad92e/attachment-0003.htm
From thm at duke.edu  Tue Jan 14 18:37:34 2003
From: thm at duke.edu (Hunter Matthews)
Date: Fri Jan  9 22:03:41 2004
Subject: [mod_python] Upgrade to mod_python 3.0.0 causes some handlers
	not to run.
In-Reply-To: <1042340165.1840.16.camel@jade.biology.duke.edu>
References: <1042340165.1840.16.camel@jade.biology.duke.edu>
Message-ID: <1042587454.1423.25.camel@jade.biology.duke.edu>

Sorry to reply to my own email, but if anyone wants a simple working
test case, let me know I'll post that to this list - this has both the
developers of current completely stumped.



On Sat, 2003-01-11 at 21:56, Hunter Matthews wrote:
> I have program (current) that successfully uses the following
> confirguration under apache 1.3.24 and mod_python 2.7.8 (redhat 7.2 or
> 7.3, basically) to have a TypeHandler, AccessHandler, and PythonHander
> run on some get requests.
> 
> If I take this same configuration to httpd 2.0.40 and mod_python 3.0.0
> (redhat 8.0) the python handler runs for the /XMLRPC requests, but
> neither the TypeHandler or the AccessHandler is running for the
> /XMLRPC/$RHN requests.
> 
> I'm assuming this a mod_python config issue, but some other 1.3-> 2.0
> upgrade issue may have me here - my ignorance with apache 2.0 is nearly
> complete.
> 
> Note that its the first block that works perfectly - all the  "/XMLRPC$"
> are dealt with by the simple "handler()" function, and they seem to work
> fine.
> 
> The "/XMLRPC/$RHN" hits _don't_ use the "handler()" function, but do
> need to be run through the accesshandler() and the typehandler() (both,
> for each request) but neither is running. 
> 
> Suggestions?
> -----------------------------------------------------------------------------
> Alias /XMLRPC/$RHN /local/linux/current/www
> 
> <Directory /local/linux/current/www>
>     # Make certain this is set - current won't work without it
>     Options FollowSymLinks
> </Directory>
> 
> <Location ~ "/XMLRPC$">
>     PythonPath "sys.path + ['/usr/share/current']"
>     SetHandler python-program
>     PythonHandler current_apache
> </Location>
> 
> <Location /XMLRPC/$RHN>
>     PythonPath "sys.path + ['/usr/share/current']"
>     PythonHandlerModule current_apache
> </Location>
> 
> -- 
> Hunter Matthews                          Unix / Network Administrator
> Office: BioScience 145/244               Duke Univ. Biology Department
> Key: F0F88438 / FFB5 34C0 B350 99A4 BB02  9779 A5DB 8B09 F0F8 8438
> Never take candy from strangers. Especially on the internet.
> 
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
> 
> 
-- 
Hunter Matthews                          Unix / Network Administrator
Office: BioScience 145/244               Duke Univ. Biology Department
Key: F0F88438 / FFB5 34C0 B350 99A4 BB02  9779 A5DB 8B09 F0F8 8438
Never take candy from strangers. Especially on the internet.


From neo at https.ru  Wed Jan 15 03:17:12 2003
From: neo at https.ru (Neo Eureka)
Date: Fri Jan  9 22:03:41 2004
Subject: [mod_python] ?
Message-ID: <18341556445.20030115031712@https.ru>

  Hi, folks !

  Some questions for Grisha.
  I use Python and mod_python in commercial projects, where the
stability is very important. So I want to ask when do you plan to
issue the next stable version of mod_python (or at least the
alpha-beta stuff) with all the fixes and features which has been
reported and discussed on the mail lists and in the documentation, and
those which you, as the author, might want to include ?

--- 
Neo Eureka / mailto:neo@https.ru


From mark at camazotz.com  Wed Jan 15 14:48:22 2003
From: mark at camazotz.com (Mark Smith)
Date: Fri Jan  9 22:03:41 2004
Subject: [mod_python] mod_python and MultiViews
Message-ID: <4DFF2CEE-28C2-11D7-ADE3-00039364CE50@camazotz.com>

I have mod_python 3.0 running with Apache 2.0.43.  Using the publisher 
handler, a request for "/foo.py/bar" resolves correctly.  If I turn on 
MultiViews in httpd.conf and use the URL "/foo/bar", it fails.  In the 
error log, I get:

   Negotiation: discovered file(s) matching request: /apache2/htdocs/foo
   (None could be negotiated).

This is on an OpenBSD system, but the same thing works fine on Mac OS 
X.  Anyone know what I'm missing to convince Apache that it should 
accept foo.py?

thx


From jwm-modpython at sentinelchicken.net  Wed Jan 15 16:17:08 2003
From: jwm-modpython at sentinelchicken.net (Jason Morgan)
Date: Fri Jan  9 22:03:41 2004
Subject: [mod_python] IE not using cached images
Message-ID: <20030115211708.GA47149@sentinelchicken.net>

Please excuse me if this question is elementary. I am having trouble
with IE and its refusal to use images it caches. What happens is the
first time I hit my site, everything works as it should - all images are
downloaded, etc. If I then hit another page on my site with the same
images, IE refuses to use the images in its cache and instead requests
all of them again. Not only that, but the rollover images are requested
each and every time I put the mouse over the images. Now, if I hit
reload, then everything works fine again. If I hit another page, again,
the same problem, over and over and over again.

Now I've played with IE's settings and have discovered that setting
"Check for newer version of stored pages" to "Never" makes IE act as it
should. And I have checked if the images are actually getting cached,
they are. I have also tested other browsers (Opera, Netscape, etc.) and
none of these have the same problem.

Now to the question, should I be sending the client something (304?) to
tell it to use its cache unless the user specifically presses reload?

OS: FreeBSD 4.7
Apache: 1.3.27
Mod_python: 2.7.8
Python: 2.2.2

Thanks,

Jason


From geertj at boskant.nl  Wed Jan 15 22:55:57 2003
From: geertj at boskant.nl (Geert Jansen)
Date: Fri Jan  9 22:03:41 2004
Subject: [mod_python] IE not using cached images
In-Reply-To: <20030115211708.GA47149@sentinelchicken.net>
References: <20030115211708.GA47149@sentinelchicken.net>
Message-ID: <20030115215557.GA28196@vader.boskant.nl>

On Wed, Jan 15, 2003 at 04:17:08PM -0500, Jason Morgan wrote:

> Please excuse me if this question is elementary. I am having trouble
> with IE and its refusal to use images it caches. What happens is the
> first time I hit my site, everything works as it should - all images are
> downloaded, etc. If I then hit another page on my site with the same
> images, IE refuses to use the images in its cache and instead requests
> all of them again. Not only that, but the rollover images are requested
> each and every time I put the mouse over the images. Now, if I hit
> reload, then everything works fine again. If I hit another page, again,
> the same problem, over and over and over again.

I have seen this problem too. I did the following things:

* Make sure an appropriate "Last-Modified" http header is sent.
* If the image is dynamically generated, make sure that there is
  no query part in the URL, i.e. the part after '?'. I think MSIE
  reloads these URLs every time. You can still pass parameters by
  using path_info.

For me this worked.

Greetings,
Geert Jansen

From jwm-modpython at sentinelchicken.net  Wed Jan 15 19:45:27 2003
From: jwm-modpython at sentinelchicken.net (Jason Morgan)
Date: Fri Jan  9 22:03:41 2004
Subject: [mod_python] IE not using cached images
In-Reply-To: <20030115215557.GA28196@vader.boskant.nl>
References: <20030115211708.GA47149@sentinelchicken.net> <20030115215557.GA28196@vader.boskant.nl>
Message-ID: <20030116004527.GB47580@sentinelchicken.net>

On Wed, Jan 15, 2003 at 10:55:57PM +0100, Geert Jansen wrote:
>
> I have seen this problem too. I did the following things:
>
> * Make sure an appropriate "Last-Modified" http header is sent.

I'm sorry for my ignorance but how do I do this? Is this in addition to
send_http_header() or do I modify the http header to be sent?

> * If the image is dynamically generated, make sure that there is
>   no query part in the URL, i.e. the part after '?'. I think MSIE
>   reloads these URLs every time. You can still pass parameters by
>   using path_info.

This isn't an issue as all images are static.

Thanks,

Jason


From thanos at 0x01.com  Thu Jan 16 00:19:10 2003
From: thanos at 0x01.com (thanos vassilakis)
Date: Fri Jan  9 22:03:41 2004
Subject: [mod_python] Query about FieldStorage
In-Reply-To: <1042555792.16629.16.camel@isukws0321>
Message-ID: <0B1B5939-2912-11D7-8A98-00306559D868@0x01.com>

If you use pso you will have env available in a neat and easy manner:

http://sourceforge.net/docman/display_doc.php?docid=11314&group_id=49265

Or you can always see how in pso we get all the enviromental variables 
;)


good luck,

thanos


On Tuesday, January 14, 2003, at 09:49  AM, Tim Parker wrote:

> Hi,
>
> I have recently installed Python 2.2.2 and Apache 2.0.43, and have 
> configured a directory to execute mod_python.? The problem I have is I 
> do not seem to be able to access any of the environment variables in 
> the Request Object form object.? Below is the part of my httpd.conf 
> file and also the python script that I am using.
>
> # Adding directory for python
> Alias /python/ "/usr/local/apache2/mod_python/"
>
> <Directory "/usr/local/apache2/mod_python">
> ??? AddHandler python-program .py
> ??? SetHandler python-program
> ??? PythonPath "sys.path+['/usr/local/apache2/mod_python']"
> ??? PythonHandler mod_python.publisher
> ??? Options +ExecCGI
> ??? PythonDebug On
> </Directory>
>
> And the python function is as follows:
>
> def my_test(req):
> ? dict = req.form
>
> ? list = req.form.list
>
> ? keys = dict.keys()
> ? str = dict_to_str(dict)
>
> ? str = "<H1>Test Page for FieldStorage</H1>\n"+ str + "\nlen(list) 
> %d" % len(list)
>
> ? return str
>
>
> If anyone had any ideas or somewhere I can look at some examples for 
> using CGI Environment variables that would be really helpful.
>
> Thanks in advance
> regards
> Tim.
>
>
>
> This e-mail and any attachments are confidential and may also be 
> privileged and/or copyright
> material of Intec Telecom Systems PLC (or its affiliated companies). 
> If you are not an
> intended or authorised recipient of this e-mail or have received it in 
> error, please delete
> it immediately and notify the sender by e-mail. In such a case, 
> reading, reproducing,
> printing or further dissemination of this e-mail is strictly 
> prohibited and may be unlawful.
> Intec Telecom Systems PLC. does not represent or warrant that an 
> attachment hereto is free
> from computer viruses or other defects. The opinions expressed in this 
> e-mail and any
> attachments may be those of the author and are not necessarily those 
> of Intec Telecom
> Systems PLC.
>
> This footnote also confirms that this email message has been swept by
> MIMEsweeper for the presence of computer viruses.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: text/enriched
Size: 2398 bytes
Desc: not available
Url : http://mailman.modpython.org/pipermail/mod_python/attachments/20030116/bf4edf39/attachment-0003.bin
From jwm-modpython at sentinelchicken.net  Thu Jan 16 11:43:25 2003
From: jwm-modpython at sentinelchicken.net (Jason Morgan)
Date: Fri Jan  9 22:03:41 2004
Subject: [mod_python] IE not using cached images
In-Reply-To: <000901c2bd32$cc927540$bd6e4351@mixio7jpsmlatx>
References: <20030115211708.GA47149@sentinelchicken.net> <000901c2bd32$cc927540$bd6e4351@mixio7jpsmlatx>
Message-ID: <20030116164325.GD47580@sentinelchicken.net>

> This won't hurt:
> 
> req.headers_out.add("Cache-Control:","no-cache")
> req.headers_out.add("Pragma:","no-cache")

Won't this make the browser request the contents again? What I want is
for IE not to request what it already has cached.

> 
> as welll as adding this to your HTML header:
> 
> """<meta http-equiv="expires" content="Tue, 20 Aug 1996 01:00:00 GMT">\
> <meta http-equiv="Pragma" content="no-cache"><title>%s</title>%s</head>"""

Maybe the content expiration will work.

Thanks,

Jason

From jwm-modpython at sentinelchicken.net  Thu Jan 16 13:09:27 2003
From: jwm-modpython at sentinelchicken.net (Jason Morgan)
Date: Fri Jan  9 22:03:41 2004
Subject: [mod_python] IE not using cached images
In-Reply-To: <20030116164325.GD47580@sentinelchicken.net>
References: <20030115211708.GA47149@sentinelchicken.net> <000901c2bd32$cc927540$bd6e4351@mixio7jpsmlatx> <20030116164325.GD47580@sentinelchicken.net>
Message-ID: <20030116180927.GC49849@sentinelchicken.net>

As usual, the error was caused by my own ignorance. I fixed the problem
by sending adding an expiration date to the header.

req.headers_out.add('Expires',expire_date)

Thanks for everyone's help.

-Jason

On Thu, Jan 16, 2003 at 11:43:25AM -0500, Jason Morgan wrote:
> > This won't hurt:
> > 
> > req.headers_out.add("Cache-Control:","no-cache")
> > req.headers_out.add("Pragma:","no-cache")
> 
> Won't this make the browser request the contents again? What I want is
> for IE not to request what it already has cached.
> 
> > 
> > as welll as adding this to your HTML header:
> > 
> > """<meta http-equiv="expires" content="Tue, 20 Aug 1996 01:00:00 GMT">\
> > <meta http-equiv="Pragma" content="no-cache"><title>%s</title>%s</head>"""
> 
> Maybe the content expiration will work.
> 
> Thanks,
> 
> Jason
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python

From geertj at boskant.nl  Thu Jan 16 19:18:19 2003
From: geertj at boskant.nl (Geert Jansen)
Date: Fri Jan  9 22:03:41 2004
Subject: [mod_python] IE not using cached images
In-Reply-To: <20030116004527.GB47580@sentinelchicken.net>
References: <20030115211708.GA47149@sentinelchicken.net> <20030115215557.GA28196@vader.boskant.nl> <20030116004527.GB47580@sentinelchicken.net>
Message-ID: <20030116181819.GA9238@vader.boskant.nl>

On Wed, Jan 15, 2003 at 07:45:27PM -0500, Jason Morgan wrote:

Hello Jason,

> On Wed, Jan 15, 2003 at 10:55:57PM +0100, Geert Jansen wrote:
> >
> > I have seen this problem too. I did the following things:
> >
> > * Make sure an appropriate "Last-Modified" http header is sent.
> 
> I'm sorry for my ignorance but how do I do this? Is this in addition to
> send_http_header() or do I modify the http header to be sent?

You can use request.headers_out to add http headers.

But ... are you serving images with mod_python or are you using Apache for
that? Only if you are using mod_python, you can change the something about
the http response. But it would not make much sense IMHO to use mod_python
for this because Apache does a good job at serving static content.

When I wrote my response I was under the impression that you were using
mod_python for serving images.

> > * If the image is dynamically generated, make sure that there is
> >   no query part in the URL, i.e. the part after '?'. I think MSIE
> >   reloads these URLs every time. You can still pass parameters by
> >   using path_info.
> 
> This isn't an issue as all images are static.

Greetings,
Geert Jansen

From kriedel at syntricity.com  Thu Jan 16 16:13:46 2003
From: kriedel at syntricity.com (Klaus Riedel)
Date: Fri Jan  9 22:03:41 2004
Subject: [mod_python] mod_python installation on winnt
Message-ID: <NFBBIPNKHKMOHBPGHEIAIEPJCKAA.kriedel@syntricity.com>

Hello All,

I am learning Python and am trying to run/implement the code in "Leaning
Python" book chapter 10.  This is just an html form that calls some python
code feedback.py.

Before we get into whether or not I installed the mod_python.dll correctly
let me know if this behaviour is normal.  In my IE url address I point to
the html code that is a form, that when filled and submitted will call the
script feedback.py.  When I fill the form and hit submit, I get the text for
feedback.py to come up on my browser.  I would expect this if mod_python is
not installed.  If however, I place my curser in the url address ( it is
till pointing to
(E:\syntricity\home\armstrong\webserver\cgi-bin\feedback.py) and hit return
the script (feedback.py) which outputs html is actually run??? i.e. the cmd
window comes up and tells me that none of the form fields where filled out
and then quickly closes.  The reason I ask if this is normal is because if I
point to a perl script and run it from the browser I get the page not found
screen on the browser.

What is wierd is that I get the same response whether or not I am pointing
to my original working conf file or not which leads me to believe that I
have not installed correctly.  (I am just stopping and restarting my apache
services between conf edits).

I am running apache 1.3 and python 2.2 and I have downloaded the
mod_python-2.78 dll and placed it in my E:\Apache\modules directory, I have
placed my python scripts in
E:/syntricity/home/armstrong/webserver/cgi-bin/python and have the following
items in my conf file:

Could my options in my conf be wrong?
.
.

#
# Dynamic Shared Object (DSO) Support
#
LoadModule anon_auth_module modules/ApacheModuleAuthAnon.dll
LoadModule cern_meta_module modules/ApacheModuleCERNMeta.dll
LoadModule digest_module modules/ApacheModuleDigest.dll
LoadModule expires_module modules/ApacheModuleExpires.dll
LoadModule headers_module modules/ApacheModuleHeaders.dll
LoadModule proxy_module modules/ApacheModuleProxy.dll
LoadModule rewrite_module modules/ApacheModuleRewrite.dll
LoadModule speling_module modules/ApacheModuleSpeling.dll
LoadModule status_module modules/ApacheModuleStatus.dll
LoadModule usertrack_module modules/ApacheModuleUserTrack.dll
LoadModule python_module modules/mod_python.dll

ExtendedStatus On

.
.
.
ServerName armstrong
ServerAdmin webmaster@syntricity.com
DocumentRoot E:/syntricity/home/armstrong/webserver/htdocs
UserDir "E:/Apache/users/"
Alias /cgi-bin/ "E:/syntricity/home/armstrong/webserver/cgi-bin/"
Alias /python/  "E:/syntricity/home/armstrong/webserver/htdocs/python/"

ScriptAlias /cgi-bin/ "E:/syntricity/home/armstrong/webserver/cgi-bin/"
ScriptAlias /python/
"E:/syntricity/home/armstrong/webserver/htdocs/python/"

Alias /icons/ "E:/syntricity/home/armstrong/webserver/icons/"
<Directory />
    Options FollowSymLinks
    AllowOverride None
</Directory>
<Directory "E:/syntricity/home/armstrong/webserver/htdocs">
    Options  FollowSymLinks
    AllowOverride None
    Order allow,deny
    Allow from all
</Directory>
<Directory "E:/syntricity/home/armstrong/webserver/cgi-bin">
    AllowOverride None
    Options None
</Directory>

<Directory "E:/syntricity/home/armstrong/webserver/cgi-bin/python">
    AddHandler python-program .py
    PythonHandler mptest
    PythonDebug on
    Options +ExecCGI
</Directory>


From tim.parker at intec-telecom-systems.com  Fri Jan 17 11:26:15 2003
From: tim.parker at intec-telecom-systems.com (Tim Parker (UK))
Date: Fri Jan  9 22:03:41 2004
Subject: [mod_python] Query about client server interaction
Message-ID: <7F124BC48D56D411812500D0B747251403B7B433@FILESERVER002>

Hi,
 
This is both a bit of understanding mod_python and also how CGI scripts in
general work, basically I have a long running query which can take up to a
minute or so to process, I want to return a page to the User immediately
saying what it is doing, ideally I would like this page to get updated
during the processing of the other operation.  And then when it has finished
the process it loads the resulting page on the Client.
 
I believe some of this is possible with server-push but this only works in
Netscape as far as I can tell.  Also I can load a temporary page and have a
refresh every few seconds which will check to see if the other process has
finished, but I was wondering if anyone knows of a clever way to achieve
this, ideally to have a dynamically updating page which checks the status of
the process and when it has finished loads the final page.
 
Thanks in advance for anyone who has any ideas on this.
Cheers
Tim.


This e-mail and any attachments are confidential and may also be privileged and/or copyright 
material of Intec Telecom Systems PLC (or its affiliated companies).  If you are not an 
intended or authorised recipient of this e-mail or have received it in error, please delete 
it immediately and notify the sender by e-mail.  In such a case, reading, reproducing, 
printing or further dissemination of this e-mail is strictly prohibited and may be unlawful. 
Intec Telecom Systems PLC. does not represent or warrant that an attachment hereto is free 
from computer viruses or other defects. The opinions expressed in this e-mail and any 
attachments may be those of the author and are not necessarily those of Intec Telecom 
Systems PLC. 

This footnote also confirms that this email message has been swept by
MIMEsweeper for the presence of computer viruses.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20030117/5cfa159a/attachment-0003.htm
From vfranceschetti at virgilio.it  Fri Jan 17 13:30:19 2003
From: vfranceschetti at virgilio.it (vfranceschetti@virgilio.it)
Date: Fri Jan  9 22:03:41 2004
Subject: [mod_python] Proble starting Apache
Message-ID: <3E24FD9E00005F4A@ims1a.cp.tin.it>

Hi,
i've installed Python 2.2.1 and Apache 2.0 in a win2000 Professional.

i have put this line in httpd.conf 

LoadModule python_module modules/mod_python.so

and file mod_python.so under the /modules dir.

When i try to start Apache i get this error:

Syntax error on line 173 of C:/Programmi/Apache Group/Apache2/conf/httpd.conf:
Cannot load C:/Programmi/Apache Group/Apache2/modules/mod_python.so into
server: impossible to find the specified module.

Some suggestion?

Thanks
Valentino



From gdamjan at mail.net.mk  Fri Jan 17 14:32:31 2003
From: gdamjan at mail.net.mk (Damjan)
Date: Fri Jan  9 22:03:42 2004
Subject: [mod_python] ModPython modules and applications
Message-ID: <20030117133231.GA26276@legolas.on.net.mk>

It would be nice if there's a central place were all of the
mod_python modules, helpers and opensource applications are documented.

Please reply here if you have any info on this topic, and later
we can put all of this on some wiki page.


-- 
Damjan Georgievski

From thanos at 0x01.com  Fri Jan 17 09:58:09 2003
From: thanos at 0x01.com (thanos@0x01.com)
Date: Fri Jan  9 22:03:42 2004
Subject: [mod_python] Re: Query about client server interaction
In-Reply-To: <7F124BC48D56D411812500D0B747251403B7B433@FILESERVER002>
References: <7F124BC48D56D411812500D0B747251403B7B433@FILESERVER002>
Message-ID: <20030117145809.7867.qmail@0x01.com>

Use a meta-refresh in the html header of you status page. 

So your status page keeps loading itself until the work is ready. 


thanos 

ps: using pso would make your life easier.
http://sourceforge.net/projects/pso/
http://sourceforge.net/docman/?group_id=49265 

Tim Parker (UK) writes: 

> Hi,
>  
> This is both a bit of understanding mod_python and also how CGI scripts in
> general work, basically I have a long running query which can take up to a
> minute or so to process, I want to return a page to the User immediately
> saying what it is doing, ideally I would like this page to get updated
> during the processing of the other operation.  And then when it has finished
> the process it loads the resulting page on the Client.
>  
> I believe some of this is possible with server-push but this only works in
> Netscape as far as I can tell.  Also I can load a temporary page and have a
> refresh every few seconds which will check to see if the other process has
> finished, but I was wondering if anyone knows of a clever way to achieve
> this, ideally to have a dynamically updating page which checks the status of
> the process and when it has finished loads the final page.
>  
> Thanks in advance for anyone who has any ideas on this.
> Cheers
> Tim. 
> 
> 
> This e-mail and any attachments are confidential and may also be privileged and/or copyright 
> material of Intec Telecom Systems PLC (or its affiliated companies).  If you are not an 
> intended or authorised recipient of this e-mail or have received it in error, please delete 
> it immediately and notify the sender by e-mail.  In such a case, reading, reproducing, 
> printing or further dissemination of this e-mail is strictly prohibited and may be unlawful. 
> Intec Telecom Systems P

LC. does not represent or warrant that an attachment hereto is free
> from computer viruses or other defects. The opinions expressed in this e-mail and any 
> attachments may be those of the author and are not necessarily those of Intec Telecom 
> Systems PLC.  
> 
> This footnote also confirms that this email message has been swept by
> MIMEsweeper for the presence of computer viruses. 
> 
 


thanos vassilakis
127 greene street
New York
NY 10012-5401
w. 212 383 2777 


From listmail at xs4all.nl  Fri Jan 17 22:23:36 2003
From: listmail at xs4all.nl (baz)
Date: Fri Jan  9 22:03:42 2004
Subject: [mod_python] Query about client server interaction
In-Reply-To: <7F124BC48D56D411812500D0B747251403B7B433@FILESERVER002>
References: <7F124BC48D56D411812500D0B747251403B7B433@FILESERVER002>
Message-ID: <3E287458.1090500@xs4all.nl>


You can achieve this by sending pieces of javacript whenever you want to 
update something (like a progress bar or whatever).

You also need to be able to flush the output buffer to apache, (my setup 
seems to do this implicitly ?) otherwise i would've tried req.flush().

Works on major browsers, just make sure you send <script> tags everytime 
for this is needed by NN4 (or later?).

baz.

Tim Parker (UK) wrote:
> 
> 
> Hi,
> 
>  
> 
> This is both a bit of understanding mod_python and also how CGI scripts 
> in general work, basically I have a long running query which can take up 
> to a minute or so to process, I want to return a page to the User 
> immediately saying what it is doing, ideally I would like this page to 
> get updated during the processing of the other operation.  And then when 
> it has finished the process it loads the resulting page on the Client.
> 
>  
> 
> I believe some of this is possible with server-push but this only works 
> in Netscape as far as I can tell.  Also I can load a temporary page and 
> have a refresh every few seconds which will check to see if the other 
> process has finished, but I was wondering if anyone knows of a clever 
> way to achieve this, ideally to have a dynamically updating page which 
> checks the status of the process and when it has finished loads the 
> final page.
> 
>  
> 
> Thanks in advance for anyone who has any ideas on this.


From josh at janrain.com  Fri Jan 17 15:44:09 2003
From: josh at janrain.com (Josh Hoyt)
Date: Fri Jan  9 22:03:42 2004
Subject: [mod_python] mod_python and Python 2.3
Message-ID: <1042847049.2550.63.camel@rye>

Hello,

I'm trying to get mod_python working with python 2.3, and I've run into
some problems related to module importing. For some reason, it fails to
import the site module. The same setup works with Python 2.2, so I'm
pretty sure that it has something to do with the Python version and not
the configuration. Running with Python in verbose mode, the following
shows up in the apache error log file:

[...]
# trying /home/josh/scratch/python/lib/python2.3/site.py
# /home/josh/scratch/python/lib/python2.3/site.pyc matches /home/josh/scratch/python/lib/python2.3/site.py
import site # precompiled from /home/josh/scratch/python/lib/python2.3/site.pyc
[...]
'import site' failed; traceback:
ImportError: No module named site
[...]

I've attached the full error log in case there are any details there 
that I failed to make clear in the excerpts above.

This problem appears with:
Python 2.3a1, Apache 1.3.20, mod_python 2.7.6 or 2.7.8
Python 2.3a1, Apache 2.0.43, mod_python 3.0.1

It goes away with Python 2.2.2.

Any ideas about where to go from here?

Thanks,
Josh Hoyt
<josh@janrain.com>
-------------- next part --------------
# installing zipimport hook
import zipimport # builtin
# installed zipimport hook
# trying /home/josh/prj/top/josh/site.so
# trying /home/josh/prj/top/josh/sitemodule.so
# trying /home/josh/prj/top/josh/site.py
# trying /home/josh/prj/top/josh/site.pyc
# trying /home/josh/prj/top/site.so
# trying /home/josh/prj/top/sitemodule.so
# trying /home/josh/prj/top/site.py
# trying /home/josh/prj/top/site.pyc
# trying /home/josh/scratch/python/lib/python23.zip/site.so
# trying /home/josh/scratch/python/lib/python23.zip/sitemodule.so
# trying /home/josh/scratch/python/lib/python23.zip/site.py
# trying /home/josh/scratch/python/lib/python23.zip/site.pyc
# trying /home/josh/scratch/python/lib/python2.3/site.so
# trying /home/josh/scratch/python/lib/python2.3/sitemodule.so
# trying /home/josh/scratch/python/lib/python2.3/site.py
# /home/josh/scratch/python/lib/python2.3/site.pyc matches /home/josh/scratch/python/lib/python2.3/site.py
import site # precompiled from /home/josh/scratch/python/lib/python2.3/site.pyc
# trying /home/josh/prj/top/josh/os.so
# trying /home/josh/prj/top/josh/osmodule.so
# trying /home/josh/prj/top/josh/os.py
# trying /home/josh/prj/top/josh/os.pyc
# trying /home/josh/prj/top/os.so
# trying /home/josh/prj/top/osmodule.so
# trying /home/josh/prj/top/os.py
# trying /home/josh/prj/top/os.pyc
# trying /home/josh/scratch/python/lib/python23.zip/os.so
# trying /home/josh/scratch/python/lib/python23.zip/osmodule.so
# trying /home/josh/scratch/python/lib/python23.zip/os.py
# trying /home/josh/scratch/python/lib/python23.zip/os.pyc
# trying /home/josh/scratch/python/lib/python2.3/os.so
# trying /home/josh/scratch/python/lib/python2.3/osmodule.so
# trying /home/josh/scratch/python/lib/python2.3/os.py
# /home/josh/scratch/python/lib/python2.3/os.pyc matches /home/josh/scratch/python/lib/python2.3/os.py
import os # precompiled from /home/josh/scratch/python/lib/python2.3/os.pyc
import posix # builtin
# trying /home/josh/prj/top/josh/posixpath.so
# trying /home/josh/prj/top/josh/posixpathmodule.so
# trying /home/josh/prj/top/josh/posixpath.py
# trying /home/josh/prj/top/josh/posixpath.pyc
# trying /home/josh/prj/top/posixpath.so
# trying /home/josh/prj/top/posixpathmodule.so
# trying /home/josh/prj/top/posixpath.py
# trying /home/josh/prj/top/posixpath.pyc
# trying /home/josh/scratch/python/lib/python23.zip/posixpath.so
# trying /home/josh/scratch/python/lib/python23.zip/posixpathmodule.so
# trying /home/josh/scratch/python/lib/python23.zip/posixpath.py
# trying /home/josh/scratch/python/lib/python23.zip/posixpath.pyc
# trying /home/josh/scratch/python/lib/python2.3/posixpath.so
# trying /home/josh/scratch/python/lib/python2.3/posixpathmodule.so
# trying /home/josh/scratch/python/lib/python2.3/posixpath.py
# /home/josh/scratch/python/lib/python2.3/posixpath.pyc matches /home/josh/scratch/python/lib/python2.3/posixpath.py
import posixpath # precompiled from /home/josh/scratch/python/lib/python2.3/posixpath.pyc
# trying /home/josh/prj/top/josh/stat.so
# trying /home/josh/prj/top/josh/statmodule.so
# trying /home/josh/prj/top/josh/stat.py
# trying /home/josh/prj/top/josh/stat.pyc
# trying /home/josh/prj/top/stat.so
# trying /home/josh/prj/top/statmodule.so
# trying /home/josh/prj/top/stat.py
# trying /home/josh/prj/top/stat.pyc
# trying /home/josh/scratch/python/lib/python23.zip/stat.so
# trying /home/josh/scratch/python/lib/python23.zip/statmodule.so
# trying /home/josh/scratch/python/lib/python23.zip/stat.py
# trying /home/josh/scratch/python/lib/python23.zip/stat.pyc
# trying /home/josh/scratch/python/lib/python2.3/stat.so
# trying /home/josh/scratch/python/lib/python2.3/statmodule.so
# trying /home/josh/scratch/python/lib/python2.3/stat.py
# /home/josh/scratch/python/lib/python2.3/stat.pyc matches /home/josh/scratch/python/lib/python2.3/stat.py
import stat # precompiled from /home/josh/scratch/python/lib/python2.3/stat.pyc
# trying /home/josh/prj/top/josh/UserDict.so
# trying /home/josh/prj/top/josh/UserDictmodule.so
# trying /home/josh/prj/top/josh/UserDict.py
# trying /home/josh/prj/top/josh/UserDict.pyc
# trying /home/josh/prj/top/UserDict.so
# trying /home/josh/prj/top/UserDictmodule.so
# trying /home/josh/prj/top/UserDict.py
# trying /home/josh/prj/top/UserDict.pyc
# trying /home/josh/scratch/python/lib/python23.zip/UserDict.so
# trying /home/josh/scratch/python/lib/python23.zip/UserDictmodule.so
# trying /home/josh/scratch/python/lib/python23.zip/UserDict.py
# trying /home/josh/scratch/python/lib/python23.zip/UserDict.pyc
# trying /home/josh/scratch/python/lib/python2.3/UserDict.so
# trying /home/josh/scratch/python/lib/python2.3/UserDictmodule.so
# trying /home/josh/scratch/python/lib/python2.3/UserDict.py
# /home/josh/scratch/python/lib/python2.3/UserDict.pyc matches /home/josh/scratch/python/lib/python2.3/UserDict.py
import UserDict # precompiled from /home/josh/scratch/python/lib/python2.3/UserDict.pyc
# trying /home/josh/prj/top/josh/copy_reg.so
# trying /home/josh/prj/top/josh/copy_regmodule.so
# trying /home/josh/prj/top/josh/copy_reg.py
# trying /home/josh/prj/top/josh/copy_reg.pyc
# trying /home/josh/prj/top/copy_reg.so
# trying /home/josh/prj/top/copy_regmodule.so
# trying /home/josh/prj/top/copy_reg.py
# trying /home/josh/prj/top/copy_reg.pyc
# trying /home/josh/scratch/python/lib/python23.zip/copy_reg.so
# trying /home/josh/scratch/python/lib/python23.zip/copy_regmodule.so
# trying /home/josh/scratch/python/lib/python23.zip/copy_reg.py
# trying /home/josh/scratch/python/lib/python23.zip/copy_reg.pyc
# trying /home/josh/scratch/python/lib/python2.3/copy_reg.so
# trying /home/josh/scratch/python/lib/python2.3/copy_regmodule.so
# trying /home/josh/scratch/python/lib/python2.3/copy_reg.py
# /home/josh/scratch/python/lib/python2.3/copy_reg.pyc matches /home/josh/scratch/python/lib/python2.3/copy_reg.py
import copy_reg # precompiled from /home/josh/scratch/python/lib/python2.3/copy_reg.pyc
# trying /home/josh/prj/top/josh/types.so
# trying /home/josh/prj/top/josh/typesmodule.so
# trying /home/josh/prj/top/josh/types.py
# trying /home/josh/prj/top/josh/types.pyc
# trying /home/josh/prj/top/types.so
# trying /home/josh/prj/top/typesmodule.so
# trying /home/josh/prj/top/types.py
# trying /home/josh/prj/top/types.pyc
# trying /home/josh/scratch/python/lib/python23.zip/types.so
# trying /home/josh/scratch/python/lib/python23.zip/typesmodule.so
# trying /home/josh/scratch/python/lib/python23.zip/types.py
# trying /home/josh/scratch/python/lib/python23.zip/types.pyc
# trying /home/josh/scratch/python/lib/python2.3/types.so
# trying /home/josh/scratch/python/lib/python2.3/typesmodule.so
# trying /home/josh/scratch/python/lib/python2.3/types.py
# /home/josh/scratch/python/lib/python2.3/types.pyc matches /home/josh/scratch/python/lib/python2.3/types.py
import types # precompiled from /home/josh/scratch/python/lib/python2.3/types.pyc
# trying /home/josh/prj/top/josh/sitecustomize.so
# trying /home/josh/prj/top/josh/sitecustomizemodule.so
# trying /home/josh/prj/top/josh/sitecustomize.py
# trying /home/josh/prj/top/josh/sitecustomize.pyc
# trying /home/josh/prj/top/sitecustomize.so
# trying /home/josh/prj/top/sitecustomizemodule.so
# trying /home/josh/prj/top/sitecustomize.py
# trying /home/josh/prj/top/sitecustomize.pyc
# trying /home/josh/scratch/python/lib/python23.zip/sitecustomize.so
# trying /home/josh/scratch/python/lib/python23.zip/sitecustomizemodule.so
# trying /home/josh/scratch/python/lib/python23.zip/sitecustomize.py
# trying /home/josh/scratch/python/lib/python23.zip/sitecustomize.pyc
# trying /home/josh/scratch/python/lib/python2.3/sitecustomize.so
# trying /home/josh/scratch/python/lib/python2.3/sitecustomizemodule.so
# trying /home/josh/scratch/python/lib/python2.3/sitecustomize.py
# trying /home/josh/scratch/python/lib/python2.3/sitecustomize.pyc
# trying /home/josh/scratch/python/lib/python2.3/plat-linux2/sitecustomize.so
# trying /home/josh/scratch/python/lib/python2.3/plat-linux2/sitecustomizemodule.so
# trying /home/josh/scratch/python/lib/python2.3/plat-linux2/sitecustomize.py
# trying /home/josh/scratch/python/lib/python2.3/plat-linux2/sitecustomize.pyc
# trying /home/josh/scratch/python/lib/python2.3/lib-tk/sitecustomize.so
# trying /home/josh/scratch/python/lib/python2.3/lib-tk/sitecustomizemodule.so
# trying /home/josh/scratch/python/lib/python2.3/lib-tk/sitecustomize.py
# trying /home/josh/scratch/python/lib/python2.3/lib-tk/sitecustomize.pyc
# trying /home/josh/scratch/python/lib/python2.3/lib-dynload/sitecustomize.so
# trying /home/josh/scratch/python/lib/python2.3/lib-dynload/sitecustomizemodule.so
# trying /home/josh/scratch/python/lib/python2.3/lib-dynload/sitecustomize.py
# trying /home/josh/scratch/python/lib/python2.3/lib-dynload/sitecustomize.pyc
# trying /home/josh/scratch/python/lib/python2.3/site-packages/sitecustomize.so
# trying /home/josh/scratch/python/lib/python2.3/site-packages/sitecustomizemodule.so
# trying /home/josh/scratch/python/lib/python2.3/site-packages/sitecustomize.py
# trying /home/josh/scratch/python/lib/python2.3/site-packages/sitecustomize.pyc
[Fri Jan 17 15:04:46 2003] [warn] pid file /home/josh/scratch/apache2/logs/httpd.pid overwritten -- Unclean shutdown of previous Apache run?
import __builtin__ # previously loaded (__builtin__)
import sys # previously loaded (sys)
'import site' failed; traceback:
ImportError: No module named site
From dustin at ywlcs.org  Fri Jan 17 20:20:55 2003
From: dustin at ywlcs.org (Dustin Mitchell)
Date: Fri Jan  9 22:03:42 2004
Subject: [mod_python] Re: Query about client server interaction
In-Reply-To: <20030117145809.7867.qmail@0x01.com>
References: <7F124BC48D56D411812500D0B747251403B7B433@FILESERVER002> <20030117145809.7867.qmail@0x01.com>
Message-ID: <20030118022054.GN15058@eleanor.internal.ywlcs.org>

On Fri, Jan 17, 2003 at 09:58:09AM -0500, thanos@0x01.com wrote:
> Use a meta-refresh in the html header of you status page. 

I believe the Refresh HTTP header (with the same format) works as well.  I
think the use of meta-refresh grew out of people using it to make their
static HTML documents act dynamic.

(It works for me with Mozilla)

Dustin

-- 

  Dustin Mitchell
  dustin@ywlcs.org/djmitche@alumni.uchicago.edu
  http://people.cs.uchicago.edu/~dustin/

From geertj at boskant.nl  Sat Jan 18 12:53:36 2003
From: geertj at boskant.nl (Geert Jansen)
Date: Fri Jan  9 22:03:42 2004
Subject: [mod_python] mod_python and Python 2.3
In-Reply-To: <1042847049.2550.63.camel@rye>
References: <1042847049.2550.63.camel@rye>
Message-ID: <20030118115336.GA4522@vader.boskant.nl>

On Fri, Jan 17, 2003 at 03:44:09PM -0800, Josh Hoyt wrote:
> Hello,
> 
> I'm trying to get mod_python working with python 2.3, and I've run into
> some problems related to module importing. For some reason, it fails to
> import the site module. The same setup works with Python 2.2, so I'm
> pretty sure that it has something to do with the Python version and not
> the configuration. Running with Python in verbose mode, the following
> shows up in the apache error log file:

This is a Python bug in Py_NewInterpreter() (or in some other place that
makes Py_NewInterpreter() fail). I sumbitted it to the Python developers
but I got no reply yet. The bug is described here:

http://sourceforge.net/tracker/index.php?func=detail&aid=668708&group_id=5470&atid=105470

Greetings,
Geert

From tim.parker at intec-telecom-systems.com  Mon Jan 20 09:43:34 2003
From: tim.parker at intec-telecom-systems.com (Tim Parker (UK))
Date: Fri Jan  9 22:03:42 2004
Subject: [mod_python] Query about client server interaction
Message-ID: <7F124BC48D56D411812500D0B747251403B7B43B@FILESERVER002>

Thanks Baz,

Just to clarify this a bit as I am quite new to all this, I can output my
Initial Page, including some Java Script and then later on output some more
Java Script which will then update the page on the Client.

I don't suppose you know of somewhere where I can see an example of this, as
that would be really useful.

Thanks
Tim.

-----Original Message-----
From: baz [mailto:listmail@xs4all.nl]
Sent: 17 January 2003 21:24
To: Tim Parker (UK); mod_python@modpython.org
Subject: Re: [mod_python] Query about client server interaction


You can achieve this by sending pieces of javacript whenever you want to
update something (like a progress bar or whatever).

You also need to be able to flush the output buffer to apache, (my setup
seems to do this implicitly ?) otherwise i would've tried req.flush().

Works on major browsers, just make sure you send <script> tags everytime
for this is needed by NN4 (or later?).

baz.

Tim Parker (UK) wrote:
>
>
> Hi,
>
> 
>
> This is both a bit of understanding mod_python and also how CGI scripts
> in general work, basically I have a long running query which can take up
> to a minute or so to process, I want to return a page to the User
> immediately saying what it is doing, ideally I would like this page to
> get updated during the processing of the other operation.  And then when
> it has finished the process it loads the resulting page on the Client.
>
> 
>
> I believe some of this is possible with server-push but this only works
> in Netscape as far as I can tell.  Also I can load a temporary page and
> have a refresh every few seconds which will check to see if the other
> process has finished, but I was wondering if anyone knows of a clever
> way to achieve this, ideally to have a dynamically updating page which
> checks the status of the process and when it has finished loads the
> final page.
>
> 
>
> Thanks in advance for anyone who has any ideas on this.


This e-mail and any attachments are confidential and may also be privileged and/or copyright 
material of Intec Telecom Systems PLC (or its affiliated companies).  If you are not an 
intended or authorised recipient of this e-mail or have received it in error, please delete 
it immediately and notify the sender by e-mail.  In such a case, reading, reproducing, 
printing or further dissemination of this e-mail is strictly prohibited and may be unlawful. 
Intec Telecom Systems PLC. does not represent or warrant that an attachment hereto is free 
from computer viruses or other defects. The opinions expressed in this e-mail and any 
attachments may be those of the author and are not necessarily those of Intec Telecom 
Systems PLC. 

This footnote also confirms that this email message has been swept by
MIMEsweeper for the presence of computer viruses.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20030120/3b5ac633/attachment-0003.htm
From tim.parker at intec-telecom-systems.com  Mon Jan 20 16:25:28 2003
From: tim.parker at intec-telecom-systems.com (Tim Parker (UK))
Date: Fri Jan  9 22:03:42 2004
Subject: [mod_python] Wierd problem with API version mismatch
Message-ID: <7F124BC48D56D411812500D0B747251403B7B445@FILESERVER002>

I managed to install the mod_python module and it was working with no
problems at all with my Apache server running on Port 8080, I have now
migrated this server to be the main server and shutdown the original server
which was running on Port 80.  But whenever I try to access a python script
it gives me the following message in the error_log file:
 
[Mon Jan 20 16:17:25 2003] [notice] Digest: generating secret for digest
authentication ...
[Mon Jan 20 16:17:25 2003] [notice] Digest: done
[Mon Jan 20 16:17:25 2003] [notice] Apache/2.0.43 (Unix) mod_perl/1.99_08
Perl/v5.6.1 DAV/2 mod_python/3.0.1 Python/2.2.1 PHP/4.3.0s
warning: Python C API version mismatch for module strop: This Python has API
version 1011, module strop has version 1007.
Fatal Python error: can't initialize module strop
[Mon Jan 20 16:17:38 2003] [notice] child pid 6213 exit signal Aborted (6)
 
The Linux version the Apache 2 server is running on is : Linux thunder
2.4.18-17.7.x #1 Tue Oct 8 13:33:14 EDT 2002 i686 unknown
 
What I don't understand is this sometimes seems to work and then other times
it gives me this error message - does anyone know what could cause this as
it is very confusing as it used to work under the different port, but I
can't see how that would affect it, or what else could have caused the
problem to occur when it was working ok before.
 
Thanks for any help on this weird problem!!!!
Tim.


This e-mail and any attachments are confidential and may also be privileged and/or copyright 
material of Intec Telecom Systems PLC (or its affiliated companies).  If you are not an 
intended or authorised recipient of this e-mail or have received it in error, please delete 
it immediately and notify the sender by e-mail.  In such a case, reading, reproducing, 
printing or further dissemination of this e-mail is strictly prohibited and may be unlawful. 
Intec Telecom Systems PLC. does not represent or warrant that an attachment hereto is free 
from computer viruses or other defects. The opinions expressed in this e-mail and any 
attachments may be those of the author and are not necessarily those of Intec Telecom 
Systems PLC. 

This footnote also confirms that this email message has been swept by
MIMEsweeper for the presence of computer viruses.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20030120/1787c015/attachment-0003.htm
From josh at janrain.com  Mon Jan 20 15:31:14 2003
From: josh at janrain.com (Josh Hoyt)
Date: Fri Jan  9 22:03:42 2004
Subject: [mod_python] mod_python and Python 2.3
In-Reply-To: <20030118115336.GA4522@vader.boskant.nl>
References: <1042847049.2550.63.camel@rye> 
	<20030118115336.GA4522@vader.boskant.nl>
Message-ID: <1043105474.2669.7.camel@rye>

> This is a Python bug in Py_NewInterpreter() (or in some other place that
> makes Py_NewInterpreter() fail). I sumbitted it to the Python developers
> but I got no reply yet. The bug is described here:
> 
> http://sourceforge.net/tracker/index.php?func=detail&aid=668708&group_id=5470&atid=105470

The problem appears to be that meta_path is not being
initialized in the new interpreter. Adding
_PyImportHooks_Init to Py_NewInterpreter seems to fix the
problem, initializing the new import hooks before trying to
import modules into the new interpreter.

Patch 671459 contains this fix.

Yeah for mod_python in Python 2.3!

Josh

From gnb at itga.com.au  Tue Jan 21 11:28:27 2003
From: gnb at itga.com.au (Gregory Bond)
Date: Fri Jan  9 22:03:42 2004
Subject: [mod_python] Query about client server interaction 
In-Reply-To: Your message of Fri, 17 Jan 2003 11:26:15 -0000.
Message-ID: <200301210028.LAA29527@lightning.itga.com.au>

> This is both a bit of understanding mod_python and also how CGI scripts in
> general work, basically I have a long running query which can take up to a
> minute or so to process, I want to return a page to the User immediately
> saying what it is doing, ideally I would like this page to get updated
> during the processing of the other operation. 

Along with the other responses, I'd like to offer an alternative solution 
(that may or may not work, depending on how the job is structured).

Anything you send to the client gets sent straight away, so you can use this 
fact to write on-going status messages.  Something like this:

import time
from mod_python import apache

def handler(req):
    req.content_type = "text/html"
    req.write('''<html>
    <head><title>Example Delay Code</title></head>
    <body>
    Please wait.  This could take a long time!!!!
    <ul>
    ''')
    for i in range(20):
        time.sleep(2)
        req.write("<li> Still waiting.... %d\n" % i)
    req.write('</ul>\nAll Done!\n</body></html>')
    
    return apache.OK

(I've added this as FAQ 3.7.   Someone with more experience in redirects or 
refresh tags can add some alternatives.).



From tim.parker at intec-telecom-systems.com  Tue Jan 21 09:08:16 2003
From: tim.parker at intec-telecom-systems.com (Tim Parker (UK))
Date: Fri Jan  9 22:03:42 2004
Subject: [mod_python] Query about client server interaction 
Message-ID: <7F124BC48D56D411812500D0B747251403B7B449@FILESERVER002>

Thanks Gregory,

I am just wondering if it is possible to do this with the publisher handler
- as that is what I am using at present as I have several python modules and
functions that I need to use?

Thanks again for all your help on this
Tim.

-----Original Message-----
From: Gregory Bond [mailto:gnb@itga.com.au]
Sent: 21 January 2003 00:28
To: Tim Parker (UK)
Cc: 'mod_python@modpython.org'
Subject: Re: [mod_python] Query about client server interaction 

> This is both a bit of understanding mod_python and also how CGI scripts in
> general work, basically I have a long running query which can take up to a
> minute or so to process, I want to return a page to the User immediately
> saying what it is doing, ideally I would like this page to get updated
> during the processing of the other operation.

Along with the other responses, I'd like to offer an alternative solution
(that may or may not work, depending on how the job is structured).

Anything you send to the client gets sent straight away, so you can use this
fact to write on-going status messages.  Something like this:

import time
from mod_python import apache

def handler(req):
    req.content_type = "text/html"
    req.write('''<html>
    <head><title>Example Delay Code</title></head>
    <body>
    Please wait.  This could take a long time!!!!
    <ul>
    ''')
    for i in range(20):
        time.sleep(2)
        req.write("<li> Still waiting.... %d\n" % i)
    req.write('</ul>\nAll Done!\n</body></html>')
   
    return apache.OK

(I've added this as FAQ 3.7.   Someone with more experience in redirects or
refresh tags can add some alternatives.).


This e-mail and any attachments are confidential and may also be privileged and/or copyright 
material of Intec Telecom Systems PLC (or its affiliated companies).  If you are not an 
intended or authorised recipient of this e-mail or have received it in error, please delete 
it immediately and notify the sender by e-mail.  In such a case, reading, reproducing, 
printing or further dissemination of this e-mail is strictly prohibited and may be unlawful. 
Intec Telecom Systems PLC. does not represent or warrant that an attachment hereto is free 
from computer viruses or other defects. The opinions expressed in this e-mail and any 
attachments may be those of the author and are not necessarily those of Intec Telecom 
Systems PLC. 

This footnote also confirms that this email message has been swept by
MIMEsweeper for the presence of computer viruses.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20030121/8dc051ba/attachment-0003.htm
From tim.parker at intec-telecom-systems.com  Tue Jan 21 09:38:29 2003
From: tim.parker at intec-telecom-systems.com (Tim Parker (UK))
Date: Fri Jan  9 22:03:42 2004
Subject: [mod_python] Wierd problem with API version mismatch 
Message-ID: <7F124BC48D56D411812500D0B747251403B7B44A@FILESERVER002>

Thanks for that,

I have managed to sort out the problem now; it is to do with the Path
Environment Variable that Apache was running under, which has python (1.5)
as the first python executable on it, so this was causing the version
mismatch.  The only thing I am unsure about is where Apache is
getting/setting this environment variable as for all users the python
version that is on their path is version 2.2.1 (the one I want to use).  As
a work around I have linked python 2.2.1 to /bin/python and it now seems to
work without any problems.

Thanks again
Tim.

-----Original Message-----
From: Gregory Bond [mailto:gnb@itga.com.au]
Sent: 20 January 2003 22:17
To: Tim Parker (UK)
Subject: Re: [mod_python] Wierd problem with API version mismatch 

> warning: Python C API version mismatch for module strop: This Python has
API
> version 1011, module strop has version 1007.

My guess is that you have multiple versions of python installed, and apache
is
picking up a different python version based on a different PATH environment
or some such.


This e-mail and any attachments are confidential and may also be privileged and/or copyright 
material of Intec Telecom Systems PLC (or its affiliated companies).  If you are not an 
intended or authorised recipient of this e-mail or have received it in error, please delete 
it immediately and notify the sender by e-mail.  In such a case, reading, reproducing, 
printing or further dissemination of this e-mail is strictly prohibited and may be unlawful. 
Intec Telecom Systems PLC. does not represent or warrant that an attachment hereto is free 
from computer viruses or other defects. The opinions expressed in this e-mail and any 
attachments may be those of the author and are not necessarily those of Intec Telecom 
Systems PLC. 

This footnote also confirms that this email message has been swept by
MIMEsweeper for the presence of computer viruses.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20030121/96466f65/attachment-0003.htm
From sandor.kopanyi at mailbox.hu  Tue Jan 21 11:41:49 2003
From: sandor.kopanyi at mailbox.hu (sandor.kopanyi@mailbox.hu)
Date: Fri Jan  9 22:03:42 2004
Subject: [mod_python] calla function from form and via link
Message-ID: <20030121104149.15286.qmail@web2.mailbox.hu>

Hi,

I have a function which fetches some things from a database; it has
2 parameters: req and an id. The req is used to extract username and
password for the database connection, the second is info needed for
fetch.

I call it from a FORM, which has an INPUT field, called id, req is
passed "by default". Everything goes fine.

My problem: I would like to use the same function, with the same
purpose, but in this not from a FORM. but from a dynamically generated
web-page
(http://...module.py/function?id=somethingdynamicallygenerated).
But in this case I - obviously - miss the req, which is "given" to me
only
when calling a function from a FORM.

Is there any nice trick to solve this problem?

I use publisher handler, on RedHat 7.3, apache 1.3.23, mod_python 2.76,
python 1.5.2 (yes, it's old stuff, but is OK by me for the time being :)

/Sandor

________________________________________________
http://mailbox.hu - M?r SMS ?rtes?t?ssel is!



From grisha at modpython.org  Tue Jan 21 13:15:03 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 22:03:42 2004
Subject: [mod_python] calla function from form and via link
In-Reply-To: <20030121104149.15286.qmail@web2.mailbox.hu>
Message-ID: <20030121131254.I66432-100000@eden.ispol.com>


On Tue, 21 Jan 2003 sandor.kopanyi@mailbox.hu wrote:

> (http://...module.py/function?id=somethingdynamicallygenerated).
> But in this case I - obviously - miss the req, which is "given" to me
> only
> when calling a function from a FORM.

The req is *always* passed for as long as your function has it as one of
the arguments, regardless of method (form or not). If you define function
as:

def function(req, id):

then req will passed to you by the Publisher.

Grisha


From Mongryong at sympatico.ca  Tue Jan 21 20:48:59 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 22:03:42 2004
Subject: [mod_python] Re: [4suite] 4Suite Reliance on ENVIRONMENT & global variables
In-Reply-To: <1043129964.1419.305.camel@refugeeMedia>
References: <704B83C4-2D00-11D7-8B43-000393CFDA9C@fourthought.com> 
	<1043129964.1419.305.camel@refugeeMedia>
Message-ID: <1043200140.14051.86.camel@refugeeMedia>

Ok, here's an update.  I've tested things out with a variety of
environment scenarios:

Computer - RedHat 8, PIII, 256mb, > 60Gb

Scenario#1 - Works fine
Apache httpd Server 1.3.27
Python 2.2.2
mod_python 2.7.8
4Suite 0.11.1
PyXML 0.6.6

Scenario#2 - Works fine
Apache httpd Server 2.0.44
Python 2.2.2
mod_python 3.0.2 (CVS)
4Suite 0.11.1
PyXML 0.6.6

Scenario#3 - Fails (encoding problem??)
Apache httpd Server 1.3.27
Python 2.2.2
mod_python 2.7.8
4Suite 0.12a CVS latest
PyXML 0.8.x

Scenario#4 - Fails (encoding problem??)
Apache httpd Server 2.0.44
Python 2.2.2
mod_python 3.0.2 (CVS)
4Suite 0.12a CVS latest
PyXML 0.8.x

Scenario#5 - Fails (encoding problem??)
Apache httpd Server 2.1.0 CVS latest
Python 2.2.2
mod_python 3.0.2 CVS latest
4Suite 0.12a CVS latest
PyXML 0.8.x

Scenario#5 - Fails (encoding problem??)
Apache httpd Server 2.1.0 CVS latest
Python 2.3a CVS latest
mod_python 3.0.2 (CVS)
4Suite 0.12a CVS latest
PyXML 0.8.x

Summary of combinations that produced no 'encoding' problem:
Apache 1.3.27 to 2.1 CVS latest
mod_python 3.0.2 CVS latest
Python 2.2.2  
4Suite 0.11.1 
PyXML 0.6.6

To me, the encoding problem appears to have something to do with 4Suite
0.12.x or PyXML 0.8.x or a combination of the two.  

It would be nice to be able to test if the encoding problem appears in
another 'embedded python' app or module.  This would help strengthen the
case against 4Suite/PyXml.  My guess is that the encoding problem is not
unique to mod_python.

On Tue, 2003-01-21 at 01:19, Mongryong wrote:
> Ok, I've modified my simple test script so that it can be easily started
> from a shell (python main.py) as well as working with mod_python.
> 
> Again, here's the url to my server where you can view the mod_python
> result: http://rezquest.cjb.net/bin/main
> 
> So, now the test outputs the XML source as just a string and as dom node
> from NonvalidatingReader.
> 
> You should clearly see the difference between the standalone and
> mod_python results.
> 
> On Tue, 2003-01-21 at 00:23, Michael Olson wrote:
> > 
> > > The strange thing is that if I directly output the XML source without
> > > doing any XSLT processing, the XML source appears correctly.  Somewhere
> > > along the line where the strings are being passed from the python
> > > libraries to the 4Suite libraries (by Py_ParseArgs..???), the strings
> > > are being 'miscommunicated'.
> > >
> > 
> > By "output the XML source" do you mean just print it out (or fetch it 
> > from the file system) ro do you mean parse it into DOM, and print it 
> > out?
> > 
> > If not the later, can you try that instead of XSLT to see if this works.
> > 
> > Thanks
> > Mike
> > 
> > > Now, it might be a Python2.2.2 issue since libxml2/libxslt from the
> > > gnome project are having similar problems as well.
> > >
> > > In 4Suite, do the apps embedd the python interpretor or do the apps
> > > start purely from a python environment?
> > >
> > > It might be good to check to see whether this problem still occurs 
> > > other
> > > 'python embedded' application (ie. uses Py_NewInterpretor from C). I
> > > forget, does the command-line version of python dynamically link to the
> > > python libraries?  If so, I wonder if the command-line version of 
> > > python
> > > is doing anything special or different when it links up and initializes
> > > the python libraries.
> > >
> > > I'm reposting this message on to the Python mailing list to see if
> > > anybody there can help give us a clue.
> > >
> > > P.S Has there been any changes in Python2.2.3+ that might possibly fix
> > > this problem?
> > >
> > > On Mon, 2003-01-20 at 22:28, Uche Ogbuji wrote:
> > >> On Mon, 2003-01-20 at 14:52, Mongryong wrote:
> > >>> Hi,
> > >>>
> > >>> I'm having trouble getting the latest 4Suite XML/XSLT tools to work 
> > >>> the
> > >>> way I want in mod_python and I know I'm not the first one to 
> > >>> experience
> > >>> "out-of-the-box" success.
> > >>>
> > >>> I've determined that it's an encoding issue.   Now, with a 
> > >>> stand-alone
> > >>> script or CGI script under Apache, 4XSLT works fine.  But under
> > >>> mod_python (which doesn't have access to ENVIRONMENT variables), 
> > >>> 4XSLT
> > >>> library decodes the XML source file in a total different encoding.  
> > >>> XSL
> > >>> templates (ie. <xsl:template name="blah">) are never executed because
> > >>> the XML tag is never recognized by the XSL processor.  Hence, you 
> > >>> get an
> > >>> empty output.
> > >>>
> > >>> I've check the default system encoding codec and it returns 'ascii' 
> > >>> (ie.
> > >>> sys.getdefaultencoding).  Now, it could be that the python library
> > >>> relies on some ENVIRONMENT variable for its configuration.
> > >>>
> > >>> Anybody have any ideas what 'parameters' might not be initialized
> > >>> properly under a non-CGI or non-shell environment such as mod_python?
> > >>> Or, is there a parameter that one can set to change the XML input
> > >>> decoding?
> > >>
> > >> I don't think there is any environment variable that could affect 
> > >> this.
> > >>
> > >> However, there have been a lot of fixes recently, including to some
> > >> endianness bugs.  Do you mind trying again with latest 4Suite CVS and
> > >> telling us if it helps?  Either wait till tomorrow's snapshot, or 
> > >> check
> > >> out current CVS HEAD directly
> > >>
> > >> http://4suite.org/docs/4SuiteCVS.xml
> > >>
> > >> If it doesn't help, I hope you'll be able to help us work with you to
> > >> find a solution for mod_python users.
> > >>
> > >> -- 
> > >> Uche Ogbuji                                    Fourthought, Inc.
> > >> http://uche.ogbuji.net    http://4Suite.org    http://fourthought.com
> > >> Python Generators + DOM - 
> > >> http://www.xml.com/pub/a/2003/01/08/py-xml.html
> > >> 4Suite Repository Features - 
> > >> https://www6.software.ibm.com/reg/devworks/dw-x4suite5-i/
> > >> XML class warfare - http://www.adtmag.com/article.asp?id=6965
> > >> MusicBrainz  metadata - 
> > >> http://www-106.ibm.com/developerworks/xml/library/x-think14.html
> > >>
> > >
> > > <main.py>
> > Mike Olson                                Principal Consultant
> > mike.olson@fourthought.com                +1 303 583 9900 x 102
> > Fourthought, Inc.                         http://Fourthought.com
> > PO Box 270590,                            http://4Suite.org
> > Louisville, CO 80027-5009, USA
> > XML strategy, XML tools, knowledge management
> > 
> > _______________________________________________
> > 4suite mailing list
> > 4suite@lists.fourthought.com
> > http://lists.fourthought.com/mailman/listinfo/4suite
> 
> ----
> 

> #!/usr/local/bin/python
> 
> import sys
> import locale
> 
> #The identity transform: duplicates the input to output
> TRANSFORM = """<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
> <xsl:template match="@*|node()">
>   <xsl:copy>
>     <xsl:apply-templates select="@*|node()"/>
>   </xsl:copy>
> </xsl:template>
> 
> </xsl:stylesheet>
> """
> 
> SOURCE = """<spam id="eggs">I don't like spam</spam>"""
> 
> #The processor class is the core of the XSLT API
> import Ft
> from Ft.Xml.Xslt import Processor
> from Ft.Xml import InputSource
> 
> from xml.dom import Node
> from Ft.Xml.Domlette import Print, PrettyPrint
> from Ft.Xml.Domlette import NonvalidatingReader
> 
> #from mod_python import apache
> 
> from StringIO import StringIO
> 
> def test(req):
>     # TEST 1
>     req.write ( "Here's the result of just printing the string SOURCE\n" )
>     req.write ( SOURCE )
>     req.write ( "\n\n" )
> 
>     # TEST 2
>     buf = StringIO()
>     transform = InputSource.DefaultFactory.fromString(TRANSFORM, "http://spam.com/identity.xslt")
>     source = InputSource.DefaultFactory.fromString(SOURCE, "http://spam.com/doc.xml")
>     dom = NonvalidatingReader.parse ( source )   
> 
>     PrettyPrint (dom, buf)
>     
>     req.write ( "Here's the result of printing from the SOURCE dom tree (Domlette)\n" )
>     req.write ( buf.getvalue() )
>     req.write ( "\n\n" )
> 
>     buf.close ()
> 
>     # TEST 3
>     req.write("Here's the result of the XSLT processing\n")
>     processor = Processor.Processor()
>     processor.appendStylesheet(transform)
>     result = processor.runNode(dom, "http://spam.com/doc.xml")
>     
>     req.write( result + "\n\n" )
> 
>     # LOCALE STUFF
>     req.write("Ft.DEFAULT_ENCODING = " + Ft.DEFAULT_ENCODING + "\n")
>     req.write("sys.getdefaultencoding = " + sys.getdefaultencoding() + "\n")
>     req.write("local.getdefaultlocale()[1] = " + locale.getdefaultlocale()[1] + "\n\n")
> 
> def handler(req):    
> 
>     req.content_type = "text/plain"   
>     test(req)
>     
>     return 0
> 
> 
> if __name__ == "__main__":
>     test(sys.stdout)



From connie at core3d.com  Wed Jan 22 02:24:56 2003
From: connie at core3d.com (Connie Baggs)
Date: Fri Jan  9 22:03:42 2004
Subject: [mod_python] [error] make_obcallback: could not import mod_python.apache
Message-ID: <20030122.2245669@mis.configured.host>

Hi Im trying to use pyWM (version 0.9984b)webmail in conjunction with 
apache (2.0.43) and mod_python (3.0.1). Ive installed everything fine and 
Apache works however when I try and get the mail the following error is 
logged in the apache error_log file:

[Wed Jan 22 08:24:19 2003] [notice] Apache/2.0.43 (Unix) mod_python/3.0.1 
Python/2.2.1 configured -- resuming normal operations
[Wed Jan 22 08:24:45 2003] [error] make_obcallback: could not import 
mod_python.apache.


The 2nd entry appeared when I tried to connect to open the index.html of 
pyWM.

Any ideas??


From gnb at itga.com.au  Wed Jan 22 14:38:14 2003
From: gnb at itga.com.au (Gregory Bond)
Date: Fri Jan  9 22:03:42 2004
Subject: [mod_python] Query about client server interaction 
In-Reply-To: Your message of Tue, 21 Jan 2003 09:08:16 -0000.
Message-ID: <200301220338.OAA04954@lightning.itga.com.au>

> I am just wondering if it is possible to do this with the publisher handler
> - as that is what I am using at present as I have several python modules and
> functions that I need to use?

This seems to work:

File ltest.py:

	import time
	from mod_python import apache

	def longtime(req):
	    req.content_type = "text/html"
	    req.write('''<html>
	    <head><title>Example Delay Code</title></head>
	    <body>
	    Please wait.  This could take a long time!!!!
	    <ul>
	    ''')
	    for i in range(20):
	        time.sleep(2)
	        req.write("<li> Still waiting.... %d\n" % i)
	    return '</ul>\nAll Done!\n</body></html>'

with a URL like .../ltest.py/longtime and a config like
	<Files ltest.py>
	        PythonHandler   mod_python.publisher
	</Files>

Again, this won't work if your long-running job (here represented by
time.sleep() calls) is not able to stop and do a 'req.write()' every so often!



From mike_verdone at shaw.ca  Tue Jan 21 20:56:29 2003
From: mike_verdone at shaw.ca (Mike Verdone)
Date: Fri Jan  9 22:03:42 2004
Subject: [mod_python] calla function from form and via link
In-Reply-To: <20030121104149.15286.qmail@web2.mailbox.hu>
References: <20030121104149.15286.qmail@web2.mailbox.hu>
Message-ID: <200301212056.29386.mike_verdone@shaw.ca>

On January 21, 2003 03:41 am, sandor.kopanyi@mailbox.hu wrote:
> I have a function which fetches some things from a database; it has
> 2 parameters: req and an id. The req is used to extract username and
> password for the database connection, the second is info needed for
> fetch.
>
> My problem: I would like to use the same function, with the same
> purpose, but in this not from a FORM. but from a dynamically generated
> web-page
> (http://...module.py/function?id=somethingdynamicallygenerated).
> But in this case I - obviously - miss the req, which is "given" to me
> only
> when calling a function from a FORM.

I'm not sure if I know what you mean., but req should always be given to you, 
even when you are accessing a page with a plain old GET request. So:

http://.../function?id=blah

should give you the request object, and same with

http://.../function

Basically, just put the whole link to the function in an <A> tag, and it will 
work same as a form submission.

I'm not sure how the database password got into the req in the first place. Is 
it supplied by the user at some point, or is it the same for every user? If 
the user supplies it on some other page, you'll have to use some session 
handling (google for "python service objects" for some info). If it's always 
the same, hard code it into a module somewhere.

Do I understand correctly?

Mike.


From sandor.kopanyi at mailbox.hu  Wed Jan 22 08:59:21 2003
From: sandor.kopanyi at mailbox.hu (sandor.kopanyi@mailbox.hu)
Date: Fri Jan  9 22:03:42 2004
Subject: [mod_python] calla function from form and via link
In-Reply-To: <200301212056.29386.mike_verdone@shaw.ca>
Message-ID: <20030122075921.22872.qmail@web2.mailbox.hu>

Hi Mike,

> http://.../function?id=blah
> 
> should give you the request object, and same with

Yes, it does. I had a typo in my code (param name).
Thanks for the hint.

> I'm not sure how the database password got into the req in the first
> place. Is 
> it supplied by the user at some point, or is it the same for every
user?

I extract the password from req, as explained in section 3.3 of
mod_python
2.7 docs
(http://www.modpython.org/live/mod_python-2.7.8/doc-html/tut-more-complicated.html):

pw = req.get_basic_auth_pw()
user = req.connection.user

If I return an apache.UNAUTHORIZED the browser will ask for username/pw.

/Sandor

________________________________________________
http://mailbox.hu - M?r SMS ?rtes?t?ssel is!



From io219 at attbi.com  Sun Jan 26 06:50:27 2003
From: io219 at attbi.com (io219@attbi.com)
Date: Fri Jan  9 22:03:42 2004
Subject: [mod_python] Apache 2.0.43 & Windows 2000
Message-ID: <5211277896.20030126065027@attbi.com>

Seems to be all sorts of problems installing in Win2k.
For me, Apache starts, but when I try the mptest.py test,
I get an "Internal Server Error" when running the test.

If I comment the following lines in the .htaccess the error
goes away and Apache outputs the source of mptest.py

#PythonHandler mptest
#PythonDebug On

Any ideas?


From thm at duke.edu  Sun Jan 26 17:22:49 2003
From: thm at duke.edu (Hunter Matthews)
Date: Fri Jan  9 22:03:42 2004
Subject: [mod_python] Upgrade to mod_python 3.0.0 causes some handlers
	not to run.
In-Reply-To: <1042340165.1840.16.camel@jade.biology.duke.edu>
References: <1042340165.1840.16.camel@jade.biology.duke.edu>
Message-ID: <1043619770.1597.57.camel@jade.biology.duke.edu>

On Sat, 2003-01-11 at 21:56, Hunter Matthews wrote:
> I have program (current) that successfully uses the following
> confirguration under apache 1.3.24 and mod_python 2.7.8 (redhat 7.2 or
> 7.3, basically) to have a TypeHandler, AccessHandler, and PythonHander
> run on some get requests.

This has been fixed. I'm mailing the list to let other mod_python users
know what we found.

> 
> If I take this same configuration to httpd 2.0.40 and mod_python 3.0.0
> (redhat 8.0) the python handler runs for the /XMLRPC requests, but
> neither the TypeHandler or the AccessHandler is running for the
> /XMLRPC/$RHN requests.

The problem turned out to be that if you did NOT specify the
"SetHandler" and used PythonModuleHandler in a configuration, mod_python
would not run the handlers you implemented.

The fix is, apparently, to both upgrade to mod_python 3.0.1, and to not
use PythonModuleHandler if you're not using SetHandler.

It looks like 3.0.1 will do the right thing with no SetHandler, IF you
specify all the handlers out that you want to use. PythonHandlerModule
is apparently still broken.

Here's the relevant part of our old configuration.

> <Location ~ "/XMLRPC$">
>     PythonPath "sys.path + ['/usr/share/current']"
>     SetHandler python-program
>     PythonHandler current_apache
> </Location>
> 
> <Location /XMLRPC/$RHN>
>     PythonPath "sys.path + ['/usr/share/current']"
>     PythonHandlerModule current_apache
> </Location>

And here's the one that a user reported success with when using
mod_python 3.0.1:

<Location ~ "/XMLRPC$">
    PythonPath "sys.path + ['/usr/share/current']"
    SetHandler python-program
    PythonHandler current_apache
</Location>

<Location /XMLRPC/$RHN>
    PythonPath "sys.path + ['/usr/share/current']"
    PythonTypeHandler current_apache
    PythonAccessHandler current_apache
</Location>

-- 
Hunter Matthews                          Unix / Network Administrator
Office: BioScience 145/244               Duke Univ. Biology Department
Key: F0F88438 / FFB5 34C0 B350 99A4 BB02  9779 A5DB 8B09 F0F8 8438
Never take candy from strangers. Especially on the internet.


From vfranceschetti at virgilio.it  Mon Jan 27 11:08:28 2003
From: vfranceschetti at virgilio.it (vfranceschetti@virgilio.it)
Date: Fri Jan  9 22:03:42 2004
Subject: [mod_python] (no subject)
Message-ID: <3E316B5B0000351A@ims1a.cp.tin.it>

Hi,
i have these line in my module:
     lun = int(req.headers_in["content-length"])
     testo = req.read(lun)
     dummy=string.find(testo,'A')
     f=open("C:/Programmi/Apache Group/Apache2/py/post.txt","w+")
     f.write("Test :"+str(lun)+"> "+str(dummy)+"--------------"+str(len(testo)))
     f.close()

and this is the result:

Test :41009> -1--------------0

variable length is 0 instead of 41009, and the value is null (string.find
always return -1 but the character A is in the Post body.

Some suggestions?

Thanks

Valentino 

 

 





From tim.parker at intec-telecom-systems.com  Wed Jan 22 09:54:10 2003
From: tim.parker at intec-telecom-systems.com (Tim Parker (UK))
Date: Fri Jan  9 22:03:42 2004
Subject: [mod_python] Query about client server interaction 
Message-ID: <7F124BC48D56D411812500D0B747251403B7B455@FILESERVER002>

Thanks for this - it seems to work except it takes a few seconds to display
the page - and when it does it draws it with several of the "Still waiting"
lines.  After this it then continues as I would expect it to but it seems to
wait a few seconds - well 5 times round the for loop before output the HTML
page to the Client.

Why is this, I would expect it to draw the web page almost immediately with
the Please wait This could take a long time!!!! Line and then draw in the
remaining lines as the script processes.  But it seems to want to cache the
first few lines before drawing them on the client.

Is this some server/client setting or something that needs to be specified
in the Headers so that there is no caching?

Thanks again
Tim.

-----Original Message-----
From: Gregory Bond [mailto:gnb@itga.com.au]
Sent: 22 January 2003 03:38
To: Tim Parker (UK)
Cc: 'mod_python@modpython.org'
Subject: Re: [mod_python] Query about client server interaction 

> I am just wondering if it is possible to do this with the publisher
handler
> - as that is what I am using at present as I have several python modules
and
> functions that I need to use?

This seems to work:

File ltest.py:

        import time
        from mod_python import apache

        def longtime(req):
            req.content_type = "text/html"
            req.write('''<html>
            <head><title>Example Delay Code</title></head>
            <body>
            Please wait.  This could take a long time!!!!
            <ul>
            ''')
            for i in range(20):
                time.sleep(2)
                req.write("<li> Still waiting.... %d\n" % i)
            return '</ul>\nAll Done!\n</body></html>'

with a URL like .../ltest.py/longtime and a config like
        <Files ltest.py>
                PythonHandler   mod_python.publisher
        </Files>

Again, this won't work if your long-running job (here represented by
time.sleep() calls) is not able to stop and do a 'req.write()' every so
often!


This e-mail and any attachments are confidential and may also be privileged and/or copyright 
material of Intec Telecom Systems PLC (or its affiliated companies).  If you are not an 
intended or authorised recipient of this e-mail or have received it in error, please delete 
it immediately and notify the sender by e-mail.  In such a case, reading, reproducing, 
printing or further dissemination of this e-mail is strictly prohibited and may be unlawful. 
Intec Telecom Systems PLC. does not represent or warrant that an attachment hereto is free 
from computer viruses or other defects. The opinions expressed in this e-mail and any 
attachments may be those of the author and are not necessarily those of Intec Telecom 
Systems PLC. 

This footnote also confirms that this email message has been swept by
MIMEsweeper for the presence of computer viruses.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mailman.modpython.org/pipermail/mod_python/attachments/20030122/3ee38cd6/attachment-0003.htm
From gnb at itga.com.au  Thu Jan 23 09:07:22 2003
From: gnb at itga.com.au (Gregory Bond)
Date: Fri Jan  9 22:03:42 2004
Subject: [mod_python] Query about client server interaction 
In-Reply-To: Your message of Wed, 22 Jan 2003 09:54:10 -0000.
Message-ID: <200301222207.JAA14877@lightning.itga.com.au>

> Is this some server/client setting or something that needs to be specified
> in the Headers so that there is no caching?

As far as I can see (and I have done a fair bit of tcp packet tracing on a 
similar problem) this is basically just the way the client works.  The server 
sends stuff as you expect, but the client delays rendering (or displaying the 
results of the render) for some internal reason.

These initial delays will be much longer if the initial bit of the page
contains any other resources (such as style sheets or images) or if the layout
is complex (especially tables).  And if the time between updates is too short
(under 1 second?) then the client seems to batch up the info and only render it
in chunks every 5-10 seconds.

The examples I sent earlier work 100% as you would expect for me for both IE5
and Mozilla 1.1, both on quite slow (P2-class) machines, but a similar example
I had with stylesheets and 1-second status updates was much less successful.



From Mongryong at sympatico.ca  Wed Jan 22 20:51:40 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 22:03:42 2004
Subject: [mod_python] Re: [4suite] 4Suite Reliance on ENVIRONMENT & global variables
In-Reply-To: <200301222107.h0ML7ss1095885@chilled.skew.org>
References: <200301222107.h0ML7ss1095885@chilled.skew.org>
Message-ID: <1043286700.1420.80.camel@refugeeMedia>

Hey Mike, you're a GENIUS!!!  

Below are the results from two tests I did.  The first test set 
USE_MINIDOM=0.  The second test set USE_MINIDOM=1 Here's an output from
my simple little test:

Using 4Suite 0.12a CVS latest

Test#1: set USE_MINIDOM=0

Here's the result of just printing the string SOURCE:
<spam id="eggs">I don't like spam</spam>

Here's the result of printing from the SOURCE dom tree created via the
NonvalidatingReader:
<?xml version="1.0" encoding="UTF-8"?>
<?????? ???="?????????????????????????????????????
????????????????">???????????????????? ????????????????????</??????>

Here's the result of printing from the SOURCE dom tree created via
PyExpat (from PyXML 0.8.2):
<?xml version="1.0" encoding="UTF-8"?>
<spam id="eggs">I don't like spam</spam>

Here's the result of the XSLT processing (simple copy of source XML):
<?xml version="1.0" encoding="UTF-8"?>
<?????? ???="?????????????????????????????????????
????????????????">???????????????????? ????????????????????</??????>

Ft.DEFAULT_ENCODING = utf 
Ft.Xml.Domlette.MINIDOM = 0 
sys.getdefaultencoding = ascii 
local.getdefaultlocale()[1] = utf 
*******************************************
Test#2: set USE_MINIDOM=1

Here's the result of just printing the string SOURCE:
<spam id="eggs">I don't like spam</spam>

Here's the result of printing from the SOURCE dom tree created via the
NonvalidatingReader:
<?xml version="1.0" encoding="UTF-8"?>
<spam id="eggs">I don't like spam</spam>

Here's the result of printing from the SOURCE dom tree create via
PyExpat (from PyXML 0.8.2)
<?xml version="1.0" encoding="UTF-8"?>
<spam id="eggs">I don't like spam</spam>

Here's the result of the XSLT processing (simple copy of source XML): 
<?xml version="1.0" encoding="UTF-8"?>
<spam id="eggs">I don't like spam</spam>

Ft.DEFAULT_ENCODING = utf 
Ft.Xml.Domlette.MINIDOM = 1 
sys.getdefaultencoding = ascii 
local.getdefaultlocale()[1] = utf 

It appears that the encoding problem has nothing to do with PyXML
libraries.

Again, the encoding problem only occurs in an embedded application like
mod_python.  

Does 4Suite set any other ENVIRONMENT variables during its execution?

According to the mod_python documentation, any changes to the OS
environment variables after mod_python has started will not be seen by
any scripts or libraries.  That is, if I change an environment variable
from my shell console or a script changes an environment variable during
Apache's life-time, the changes will not be seen.

If the 4Suite developers could hypothesis what's going, it'd be great. 

On Wed, 2003-01-22 at 16:07, Mike Brown wrote:
> Mongryong wrote:
> > Summary of combinations that produced no 'encoding' problem:
> > Apache 1.3.27 to 2.1 CVS latest
> > mod_python 3.0.2 CVS latest
> > Python 2.2.2  
> > 4Suite 0.11.1 
> > PyXML 0.6.6
> > 
> > To me, the encoding problem appears to have something to do with 4Suite
> > 0.12.x or PyXML 0.8.x or a combination of the two.  
> 
> Unfortunately this doesn't tell us much.
> 
> 0.12.0 is almost a complete rewrite of 4Suite from 0.11.1. 0.11.1 did not use
> cDomlette by default, so my guess is that if you were using 0.11.1 and set
> BETA_DOMLETTE to 1 (I think that's how it was done... could be wrong), you
> might see the same misbehavior.
> 
> In 0.12.0, see what happens if you set USE_MINIDOM to 1 first. It'll probably 
> work (but will be slow).
> 
> Another shot int he dark -
> 
> If PyXML isn't required for mod_python, can you see what happens if you don't
> have it installed? 0.12.0 should be OK without PyXML as long as you don't need
> validation.
> 
> Mike
> 
> -- 
>   Mike J. Brown   |  http://skew.org/~mike/resume/
>   Denver, CO, USA |  http://skew.org/xml/
> _______________________________________________
> 4suite mailing list
> 4suite@lists.fourthought.com
> http://lists.fourthought.com/mailman/listinfo/4suite




From Mongryong at sympatico.ca  Thu Jan 23 00:09:48 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 22:03:43 2004
Subject: [mod_python] Re: [4suite] 4Suite Reliance on ENVIRONMENT & global variables
In-Reply-To: <200301230214.h0N2E16R096773@chilled.skew.org>
References: <200301230214.h0N2E16R096773@chilled.skew.org>
Message-ID: <1043298588.1514.106.camel@refugeeMedia>

> How does mod_python collect 4xslt's output?

I've used string and streams (stringio) for both input and output.  
ie input -> InputSource.DefaultFactory.fromString & fromStream
ie output -> res = p.run(iSrc..), res = runNode(domNode...), and
runX(...outputStream=buf)

The resultant string or stringio.getvalue() is then fed back to
mod_python which then feeds it back to Apache to output.

There's no issues with printing raw strings and streams that haven't been processed by the 4Suite libraries.  

PyXML's PyExpat has no encoding issue. 

The encoding problem isn't a random thing as well - it occurs everytime
mod_python executes the script (with USE_MINIDOM=0).

> 
> -- 
>   Mike J. Brown   |  http://skew.org/~mike/resume/
>   Denver, CO, USA |  http://skew.org/xml/
> _______________________________________________
> 4suite mailing list
> 4suite@lists.fourthought.com
> http://lists.fourthought.com/mailman/listinfo/4suite



From Mongryong at sympatico.ca  Thu Jan 23 00:16:34 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 22:03:43 2004
Subject: [mod_python] Re: [4suite] 4Suite Reliance on ENVIRONMENT & global variables
In-Reply-To: <1043289525.12442.30.camel@hades>
References: <200301230214.h0N2E16R096773@chilled.skew.org> 
	<1043289525.12442.30.camel@hades>
Message-ID: <1043298995.1416.118.camel@refugeeMedia>

> 
> When a sub-interpreter is created, a new module dictionary is created
> which no longer includes a pointer to the 'encodings' module although
> internally Python may say it exists (via a global variable).  This is
> really a bug in Python.
> 
Good plausible theory.  Any idea on how to prove this or test this?

> Try adding an "import encodings" and/or "import codecs" to the
> mod_python module that uses 4Suite.  I kind of remember having to do
> something like that when we had a mod_snake handler for Apache.
> 
Nope, did not work.  I believe 4Suite imports these modules too.  Is
there another place where you imported these modules (ie. at mod_snake
startup?)






From Mongryong at sympatico.ca  Thu Jan 23 16:16:32 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 22:03:43 2004
Subject: [mod_python] Re: [4suite] 4Suite Reliance on ENVIRONMENT & global variables
In-Reply-To: <200301230640.h0N6el2U097430@chilled.skew.org>
References: <200301230640.h0N6el2U097430@chilled.skew.org>
Message-ID: <1043356593.902.10.camel@refugeeMedia>

> Jeremy's answers on this thread may be a couple steps ahead of me, here, but
> take a look at Ft/Xml/src/StreamWriter.c. It is supposed to be the equivalent
> of Ft/Xml/Lib/StreamWriter.py.
> 
> Is there an obvious endianness bug in the C version somewhere?
> Is the test around lines 279-294 producing unexpected results?
> 
The c and py code look similar.  If there was an endianness bug,
wouldn't it just swap characters around?  Well, I can't see any
endianness problems.

I just find it strange that a shell or cgi script doesn't have this
problem.  And why are there no problems with PyExpat or when minidom is
used?  What is different?  If there are answers to these questions, I
think it would help.


From Mongryong at sympatico.ca  Thu Jan 23 19:02:22 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 22:03:43 2004
Subject: [mod_python] Re: [4suite] 4Suite Reliance on ENVIRONMENT & global variables
In-Reply-To: <1043358331.1488.8566.camel@localhost.localdomain>
References: <200301230640.h0N6el2U097430@chilled.skew.org>
	<1043356593.902.10.camel@refugeeMedia> 
	<1043358331.1488.8566.camel@localhost.localdomain>
Message-ID: <1043366543.583.26.camel@refugeeMedia>

Trying mod_python myself is
> still on my to-do.
> 
> Anyway, next wild guess...  ;-)
> 
> Could it be a dynamic library clash between cDomlette's expat, pyexpat
> and Apache's expat?
Okay, I'm just throwing something at you guys:

Is the expat library loaded dynamically or compiled statically in
4Suite?

Now, I've only managed to find libexpat in my /usr/lib directory.  There
it exists as 'libexpat.so.0.3.0' (Aug 19 2002) - I believe this is what
comes with the RedHat Distribution.  I'm suspicious of the 0.3.0.  Is
there a nice way to find out which libexpat is being used?

Here are the expat versions required:
4Suite -> expat 1.95.5
Apache -> expat 1.95.1
PyXML 0.8.2 -> expat 1.95.5
I believe the above is correct.  

Here's my /etc/ld.so.conf file:
/usr/kerberos/lib
/usr/X11R6/lib
/usr/lib/qt-3.0.5/lib
/usr/lib/sane/
/usr/local/lib
/usr/local/lib/mysql

Was this helpful?


> 
> 
> > -- 
> > Uche Ogbuji                                    Fourthought, Inc.
> > http://uche.ogbuji.net    http://4Suite.org    http://fourthought.com
> > The open office file format  - http://www-106.ibm.com/developerworks/xml/library/x-think15/
> > Python Generators + DOM - http://www.xml.com/pub/a/2003/01/08/py-xml.html
> > 4Suite Repository Features - https://www6.software.ibm.com/reg/devworks/dw-x4suite5-i/
> > XML class warfare - http://www.adtmag.com/article.asp?id=6965
> 
> _______________________________________________
> 4suite mailing list
> 4suite@lists.fourthought.com
> http://lists.fourthought.com/mailman/listinfo/4suite



From Mongryong at sympatico.ca  Thu Jan 23 19:36:48 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 22:03:43 2004
Subject: [mod_python] Re: [4suite] 4Suite Reliance on ENVIRONMENT & global variables
In-Reply-To: <1043366543.583.26.camel@refugeeMedia>
References: <200301230640.h0N6el2U097430@chilled.skew.org>
	<1043356593.902.10.camel@refugeeMedia> 
	<1043358331.1488.8566.camel@localhost.localdomain> 
	<1043366543.583.26.camel@refugeeMedia>
Message-ID: <1043368609.2147.68.camel@refugeeMedia>

The libexpat version in my /usr/lib directory is 1.95.4.

Thanks Mike.

On Thu, 2003-01-23 at 19:02, Mongryong wrote:
> Trying mod_python myself is
> > still on my to-do.
> > 
> > Anyway, next wild guess...  ;-)
> > 
> > Could it be a dynamic library clash between cDomlette's expat, pyexpat
> > and Apache's expat?
> Okay, I'm just throwing something at you guys:
> 
> Is the expat library loaded dynamically or compiled statically in
> 4Suite?
> 
> Now, I've only managed to find libexpat in my /usr/lib directory.  There
> it exists as 'libexpat.so.0.3.0' (Aug 19 2002) - I believe this is what
> comes with the RedHat Distribution.  I'm suspicious of the 0.3.0.  Is
> there a nice way to find out which libexpat is being used?
> 
> Here are the expat versions required:
> 4Suite -> expat 1.95.5
> Apache -> expat 1.95.1
> PyXML 0.8.2 -> expat 1.95.5
> I believe the above is correct.  
> 
> Here's my /etc/ld.so.conf file:
> /usr/kerberos/lib
> /usr/X11R6/lib
> /usr/lib/qt-3.0.5/lib
> /usr/lib/sane/
> /usr/local/lib
> /usr/local/lib/mysql
> 
> Was this helpful?
> 
> 
> > 
> > 
> > > -- 
> > > Uche Ogbuji                                    Fourthought, Inc.
> > > http://uche.ogbuji.net    http://4Suite.org    http://fourthought.com
> > > The open office file format  - http://www-106.ibm.com/developerworks/xml/library/x-think15/
> > > Python Generators + DOM - http://www.xml.com/pub/a/2003/01/08/py-xml.html
> > > 4Suite Repository Features - https://www6.software.ibm.com/reg/devworks/dw-x4suite5-i/
> > > XML class warfare - http://www.adtmag.com/article.asp?id=6965
> > 
> > _______________________________________________
> > 4suite mailing list
> > 4suite@lists.fourthought.com
> > http://lists.fourthought.com/mailman/listinfo/4suite
> 
> 
> _______________________________________________
> 4suite mailing list
> 4suite@lists.fourthought.com
> http://lists.fourthought.com/mailman/listinfo/4suite



From Mongryong at sympatico.ca  Thu Jan 23 19:56:15 2003
From: Mongryong at sympatico.ca (Mongryong)
Date: Fri Jan  9 22:03:43 2004
Subject: [mod_python] Re: [4suite] 4Suite Reliance on ENVIRONMENT & global variables
In-Reply-To: <200301232240.h0NMeapw001171@chilled.skew.org>
References: <200301232240.h0NMeapw001171@chilled.skew.org>
Message-ID: <1043369775.578.83.camel@refugeeMedia>

> Your email client mangled the data a bit, so I can't diagnose it correctly, 
> but basically what is happening is that the Unicode string u'spam', or, for 
> clarity, u'\u0073\u0070\u0061\u006d', is being interpreted as 
> u'\u7300\u7000\u6000\u6d00'. When UTF-8 encoded, this becomes bytes:
>    e7 8c 80 e7 80 80 e6 80 80 e6 b4 80
> 
> ...which is not going to look very pleasant in an iso-8859-1 environment.
You're welcome to view the output from my server at:

http://refugeemedia.cjb.net/test/main?ver=0.12



From vfranceschetti at virgilio.it  Mon Jan 27 15:39:11 2003
From: vfranceschetti at virgilio.it (vfranceschetti@virgilio.it)
Date: Fri Jan  9 22:03:43 2004
Subject: [mod_python] request.read problem
Message-ID: <3E316B5B00004378@ims1a.cp.tin.it>

This is a repost, i've forgotten the subject!!!

Hi,
i have these line in my module:
     lun = int(req.headers_in["content-length"])
     testo = req.read(lun)
     dummy=string.find(testo,'A')
     f=open("C:/Programmi/Apache Group/Apache2/py/post.txt","w+")
     f.write("Test :"+str(lun)+"> "+str(dummy)+"--------------"+str(len(testo)))
     f.close()

and this is the result:

Test :41009> -1--------------0

variable length is 0 instead of 41009, and the value is null (string.find
always return -1 but the character A is in the Post body.

Some suggestions?

Thanks

Valentino 





From terrall at oclc.org  Wed Jan 29 14:21:39 2003
From: terrall at oclc.org (Terrall,Tom)
Date: Fri Jan  9 22:03:43 2004
Subject: [mod_python] Apache with mod_python won't start!
Message-ID: <E5431CF93E29F9478878F623E5B9CE9843053E@OA3-SERVER.oa.oclc.org>

I have modified httpd.conf for an attempt to run a test of
apache+mod_python. When httpd needs to read htttpd.conf this error results.

======>
[root@deimos init.d]# ./httpd start
Syntax error on line 234 of /usr/local/apache/conf/httpd.conf:
Cannot load /usr/lib/apache/mod_python.so into server:
/usr/lib/apache/mod_python.so: undefined symbol: ap_null_cleanup
=====>

Line 234 is : LoadModule python_module /usr/lib/apache/mod_python.so

 We are running python 2.2 and apache 2.0.40 and python 2.7.8-1 .

Additions to a working httpd.conf which cause the failure.

========>
"
"
Listen 8400
"
"
LoadModule python_module /usr/lib/apache/mod_python.so
"
"
        <Directory /usr/local/apache/htdocs/test>
            AddHandler python-program .py
            PythonHandler mptest
            AllowOverride FileInfo
            PythonDebug on
        </Directory>
"
"
NameVirtualHost xxx.xxx.xxx.xxx:8400
"
"
<VirtualHost xxx.xxx.xxx.xxx:8400>
   ServerName anaximenter.out.oclc.org
  DocumentRoot /usr/local/apache/htdocs/test
</VirtualHost>
"
"
========>

Thanks in advance.

Tom Terrall


From grisha at modpython.org  Wed Jan 29 14:50:28 2003
From: grisha at modpython.org (Gregory (Grisha) Trubetskoy)
Date: Fri Jan  9 22:03:43 2004
Subject: [mod_python] Apache with mod_python won't start!
In-Reply-To: <E5431CF93E29F9478878F623E5B9CE9843053E@OA3-SERVER.oa.oclc.org>
Message-ID: <20030129144928.W94180-100000@eden.ispol.com>

Mod_python 2.7.8 does not work with Apache 2.0. I suggest you bring all of
Python, mod_python and Apache to the latest released versions.

Grisha

On Wed, 29 Jan 2003, Terrall,Tom wrote:

> I have modified httpd.conf for an attempt to run a test of
> apache+mod_python. When httpd needs to read htttpd.conf this error results.
>
> ======>
> [root@deimos init.d]# ./httpd start
> Syntax error on line 234 of /usr/local/apache/conf/httpd.conf:
> Cannot load /usr/lib/apache/mod_python.so into server:
> /usr/lib/apache/mod_python.so: undefined symbol: ap_null_cleanup
> =====>
>
> Line 234 is : LoadModule python_module /usr/lib/apache/mod_python.so
>
>  We are running python 2.2 and apache 2.0.40 and python 2.7.8-1 .
>
> Additions to a working httpd.conf which cause the failure.
>
> ========>
> "
> "
> Listen 8400
> "
> "
> LoadModule python_module /usr/lib/apache/mod_python.so
> "
> "
>         <Directory /usr/local/apache/htdocs/test>
>             AddHandler python-program .py
>             PythonHandler mptest
>             AllowOverride FileInfo
>             PythonDebug on
>         </Directory>
> "
> "
> NameVirtualHost xxx.xxx.xxx.xxx:8400
> "
> "
> <VirtualHost xxx.xxx.xxx.xxx:8400>
>    ServerName anaximenter.out.oclc.org
>   DocumentRoot /usr/local/apache/htdocs/test
> </VirtualHost>
> "
> "
> ========>
>
> Thanks in advance.
>
> Tom Terrall
>
> _______________________________________________
> Mod_python mailing list
> Mod_python@modpython.org
> http://www.modpython.org/mailman/listinfo/mod_python
>


From terrall at oclc.org  Fri Jan 31 13:41:29 2003
From: terrall at oclc.org (Terrall,Tom)
Date: Fri Jan  9 22:03:43 2004
Subject: [mod_python] Need GLIBC_2.3 for RH7.3
Message-ID: <E5431CF93E29F9478878F623E5B9CE98430546@OA3-SERVER.oa.oclc.org>

Our configuration is apache 2.0.40, python 2.2, mod_python 3.0.1 on RH7.3.

Any suggestions on where might locate libc.so.6 (GLIBC_2.3) in rpm form for
RH7.3? Cannot start apache configured with mod_python because our GLIBC is
2.2.45.  Extensive searching has not found it.

Is it possible to tell mod_python were to find libc.so.6 so that we can
maintain two different versions?

Thanks - Tom Terrall

From gmurali at cs.uchicago.edu  Fri Jan 31 14:20:54 2003
From: gmurali at cs.uchicago.edu (ganapathy murali krishnan)
Date: Fri Jan  9 22:03:43 2004
Subject: [mod_python] cannot import mod_python.apache error
Message-ID: <3E3ADAA6.2010707@cs.uchicago.edu>

I just installed Python-2.3a1 + apache 2.0.44 + mod_python 3.0.1.
I have one vhost (say vhost) in addition to the main one (say mainhost).
The vhost has a python program as the main handler (using SetHandler).
This setup works correctly without any problems on another machine
(Python 1.5+ apache 1.3 + mod_python something), so the problem is not 
in the handler code itself.

When I run the httpd binary, all is fine. The mainhost serves up html 
files without any problems. The vhost is supposed to serve up .py files.
When I go to "http://vhost" I get the following error.

----
[Fri Jan 31 13:53:00 2003] [error] make_obcallback: could not import 
mod_python.apache.

'import site' failed; use -v for traceback
ImportError: No module named mod_python.apache
----

The apache.py is in 
/opt/python/default/lib/python2.3/site-packages/mod_python/apache.py.

I tried many of the suggested workarounds, I couldn't get any of them
to work. The content of my httpd.conf inside the <VirtualHost> and 
</VirtualHost> is enclosed below.

------------
   SetHandler python-program
   PythonDebug on
   # All handlers are stored in a different directory, for security
   PythonPath "sys.path+['/stage/w3serv/vhost.cs.uchicago.edu']"

   # This module handles reloading modules on demand
   PythonInitHandler handlers.init

   # Fire up the first Python handler
   PythonTransHandler handlers.translate

   # Logging configuration
   # PythonOption Log off
   PythonOption Log /stage/w3serv/vhost/logs/debug.log
   # Tell the Python site to ignore these paths, 

   PythonOption DontHandle /icons:/images:/~:/i/:/files/:/pipermail 

   # Tell the Python handler to ignore these extensions 

   PythonOption DontHandleExt html:htm:php:php3:phps:php4:cgi 

 

   # Then tell Apache how to handle them. 

   Alias /icons /stage/w3serv/common/docs/icons 

   Alias /images /stage/w3serv/common/docs/images 

   UserDir disable 

-----

Any help would be appreciated.

- Murali


From thm at duke.edu  Fri Jan 31 15:29:29 2003
From: thm at duke.edu (Hunter Matthews)
Date: Fri Jan  9 22:03:43 2004
Subject: [mod_python] Need GLIBC_2.3 for RH7.3
In-Reply-To: <E5431CF93E29F9478878F623E5B9CE98430546@OA3-SERVER.oa.oclc.org>
References: <E5431CF93E29F9478878F623E5B9CE98430546@OA3-SERVER.oa.oclc.org>
Message-ID: <1044044970.1873.43.camel@jade.biology.duke.edu>

The easiest way would be to download apache-devel, python2-devel (or
whatever you used to get python 2.2 on rh 7.3) and then simply rebuild
the mod_python source rpm. It should be clean.

On Fri, 2003-01-31 at 13:41, Terrall,Tom wrote:
> 
> Our configuration is apache 2.0.40, python 2.2, mod_python 3.0.1 on RH7.3.
> 
> Any suggestions on where might locate libc.so.6 (GLIBC_2.3) in rpm form for
> RH7.3? Cannot start apache configured with mod_python because our GLIBC is
> 2.2.45.  Extensive searching has not found it.
> 
> Is it possible to tell mod_python were to find libc.so.6 so that we can
> maintain two different versions?
> 
> Thanks - Tom Terrall

-- 
Hunter Matthews                          Unix / Network Administrator
Office: BioScience 145/244               Duke Univ. Biology Department
Key: F0F88438 / FFB5 34C0 B350 99A4 BB02  9779 A5DB 8B09 F0F8 8438
Never take candy from strangers. Especially on the internet.


From gmurali at cs.uchicago.edu  Fri Jan 31 16:37:40 2003
From: gmurali at cs.uchicago.edu (ganapathy murali krishnan)
Date: Fri Jan  9 22:03:43 2004
Subject: [mod_python] cannot import mod_python.apache error
References: <3E3ADAA6.2010707@cs.uchicago.edu> <1044049878.13789.42.camel@refugeeMedia>
Message-ID: <3E3AFAB4.8070205@cs.uchicago.edu>

The python library directories are readable and executable by "all".
More curiously, I created a mptest.py as suggested by the mod_python 
test, and it gave me the same error.

I then proceeded to remove the "from mod_python import apache" statement 
from mptest.py, figuring that in that sample code, all it wanted was the 
value "apache.OK". Removing the import statement and replacing 
"apache.OK" with 0 (its value as read from the actual apache.py file),
did not help! It still gave me the same error. So it looks as if 
mod_python.so is trying to import mod_python.apache, and it is triggered
every time I try to serve up a .py file.

I also confirmed that sys.path has the lib/python-2.3/site-packages 
(running python from command line).

I will try to see if strace can give me some information.

- Murali

Mongryong wrote:
> Have you checked out the FAQ section?
> Every newbie runs into this problem.  It's most likely because Apache
> does not  have permission to access python's lib directory.
> 
> Try starting Apache with root access if you can.  Check, the "user"
> paremeter in httpd.conf.  Make sure the "user" is somebody who can
> access python's lib directory.


From gmurali at cs.uchicago.edu  Fri Jan 31 17:15:50 2003
From: gmurali at cs.uchicago.edu (ganapathy murali krishnan)
Date: Fri Jan  9 22:03:43 2004
Subject: [mod_python] cannot import mod_python.apache error
References: <3E3ADAA6.2010707@cs.uchicago.edu>	<1044049878.13789.42.camel@refugeeMedia>  <3E3AFAB4.8070205@cs.uchicago.edu> <1044053589.1599.59.camel@refugeeMedia>
Message-ID: <3E3B03A6.60009@cs.uchicago.edu>

I tried an

strace HTTPDBINARY -d SERVERROOT -f conf/httpd.conf -X 2>/tmp/errlog

and then when I grep the output for site-packages, I dont see any 
site-packages/mod_python at all. All I see, is

-----grep 'site-packages' /tmp/errlog --------
stat64("/opt/python/default/lib/python2.3/site-packages", 
{st_mode=S_IFDIR|0755, st_size=4096, ...}) = 0
open("/opt/python/default/lib/python2.3/site-packages", 
O_RDONLY|O_NONBLOCK|O_LARGEFILE|O_DIRECTORY) = 9
stat64("/opt/python/default/lib/python2.3/site-packages", 
{st_mode=S_IFDIR|0755, st_size=4096, ...}) = 0
stat64("/opt/python/default/lib/python2.3/site-packages/sitecustomize", 
0xbfffe15c) = -1 ENOENT (No such file or directory)
open("/opt/python/default/lib/python2.3/site-packages/sitecustomize.so", 
O_RDONLY|O_LARGEFILE) = -1 ENOENT (No such file or directory)
open("/opt/python/default/lib/python2.3/site-packages/sitecustomizemodule.so", 
O_RDONLY|O_LARGEFILE) = -1 ENOENT (No such file or directory)
open("/opt/python/default/lib/python2.3/site-packages/sitecustomize.py", 
O_RDONLY|O_LARGEFILE) = -1 ENOENT (No such file or directory)
open("/opt/python/default/lib/python2.3/site-packages/sitecustomize.pyc", 
O_RDONLY|O_LARGEFILE) = -1 ENOENT (No such file or directory)
------------------------------------------------

and greping for mod_python gives
----------------------
open("/opt/apache/default/modules/mod_python.so", O_RDONLY) = 4
open("/opt/apache/default/modules/mod_python.so", O_RDONLY) = 5
write(2, "No module named mod_python.apach"..., 33) = 33
----------------------

finally 'grep "apache[^/-]" /tmp/errlog' gives
--------------
open("./php-apache2filter.ini", O_RDONLY) = -1 ENOENT (No such file or 
directory)
open("/opt/php/php-4.3.0/lib/php-apache2filter.ini", O_RDONLY) = -1 
ENOENT (No such file or directory)
read(8, "GET /apache_pb.gif HTTP/1.1\r\nHos"..., 8000) = 477
stat64("/stage/w3serv/vhost.cs.uchicago.edu/docs/apache_pb.gif", 
0xbffff81c) = -1 ENOENT (No such file or directory)
lstat64("/stage/w3serv/vhost.cs.uchicago.edu/docs/apache_pb.gif", 
0xbffff7ec) = -1 ENOENT (No such file or directory)
----------------

The [^/-] is to remove "apache/" and "apache-2.0.44".

It looks as if mod_python is not even trying to load the module?!

- Murali


