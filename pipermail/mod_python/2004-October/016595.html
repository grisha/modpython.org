<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Udate python modules without restarting Apache
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Udate%20python%20modules%20without%20restarting%20Apache&In-Reply-To=680bcd9504100714507dfc01be%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016594.html">
   <LINK REL="Next"  HREF="016596.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Udate python modules without restarting Apache</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Udate%20python%20modules%20without%20restarting%20Apache&In-Reply-To=680bcd9504100714507dfc01be%40mail.gmail.com"
       TITLE="[mod_python] Udate python modules without restarting Apache">grahamd at dscpl.com.au
       </A><BR>
    <I>Thu Oct  7 18:10:49 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="016594.html">[mod_python] Udate python modules without restarting Apache
</A></li>
        <LI>Next message: <A HREF="016596.html">[mod_python] Udate python modules without restarting Apache
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16595">[ date ]</a>
              <a href="thread.html#16595">[ thread ]</a>
              <a href="subject.html#16595">[ subject ]</a>
              <a href="author.html#16595">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Oct 07 23:50, berry groenendijk &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">berry.groenendijk at gmail.com</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> Subject: Re: [mod_python] Udate python modules without restarting Apache
</I>&gt;<i>
</I>&gt;<i> My handler is servlet.py. The excellent module build by Daniel
</I>&gt;<i> Popowich. I do not place this servlet.py in the mod_python
</I>&gt;<i> installation directory, but I have the servlet.py in the root of my
</I>&gt;<i> website. In a .htaccess file I have the following entries:
</I>&gt;<i> 
</I>&gt;<i> PythonAutoReload On
</I>&gt;<i> SetHandler mod_python
</I>&gt;<i> PythonHandler servlet
</I>&gt;<i> PythonDebug on
</I>&gt;<i> 
</I>&gt;<i> I think the problem is in the servlet.py. Because, as soon as I touch
</I>&gt;<i> this file I get this error:
</I>&gt;<i> 
</I>&gt;<i> ValueError: index is not a subclass of Servlet (in E:/Program
</I>&gt;<i> Files/Apache Group/Apache2/htdocs/MySite/index.mps)
</I>&gt;<i> 
</I>&gt;<i> Before I touched servlet.py the index file loaded perfectly.
</I>&gt;<i> Apparently apache tried reloading the servlet file effectively
</I>&gt;<i> creating a new Servlet object in memory. Other pages that have already
</I>&gt;<i> created in memory and that are subclasses from Servlet have now
</I>&gt;<i> apparently lost their 'parent'.
</I>&gt;<i> 
</I>&gt;<i> Any suggestions how to solve this?
</I>
Hmmm, I haven't tried MPS as yet, looks like it might be time to do so
in order to understand it a bit better.

One of the issues with reloading that isn't obvious is that it doesn't
actually clean out the namespace of the existing loaded module before
loading it again. In effect it lays the reloading module back over the top
of the old one. You can thus still have strange things happen if you keep
state in global variables or remove methods.

The easiest to explain is the removal of a method from a module which
is imported by mod_python.publisher. Even though the method is removed
from the code file, when it reloads the code module it doesn't actually
delete the existing method, so it still exists and can still be accessed by
a request.

Anyway, I'll get down MPS and have a bit of a play.

--
Graham Dumpleton (<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">grahamd at dscpl.com.au</A>)
</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016594.html">[mod_python] Udate python modules without restarting Apache
</A></li>
	<LI>Next message: <A HREF="016596.html">[mod_python] Udate python modules without restarting Apache
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16595">[ date ]</a>
              <a href="thread.html#16595">[ thread ]</a>
              <a href="subject.html#16595">[ subject ]</a>
              <a href="author.html#16595">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
