<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Udate python modules without restarting Apache
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Udate%20python%20modules%20without%20restarting%20Apache&In-Reply-To=11A043F1-18A8-11D9-90EF-000393BB31F6%40dscpl.com.au">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016593.html">
   <LINK REL="Next"  HREF="016595.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Udate python modules without restarting Apache</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>berry groenendijk</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Udate%20python%20modules%20without%20restarting%20Apache&In-Reply-To=11A043F1-18A8-11D9-90EF-000393BB31F6%40dscpl.com.au"
       TITLE="[mod_python] Udate python modules without restarting Apache">berry.groenendijk at gmail.com
       </A><BR>
    <I>Fri Oct  8 00:50:54 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="016593.html">[mod_python] Udate python modules without restarting Apache
</A></li>
        <LI>Next message: <A HREF="016595.html">[mod_python] Udate python modules without restarting Apache
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16594">[ date ]</a>
              <a href="thread.html#16594">[ thread ]</a>
              <a href="subject.html#16594">[ subject ]</a>
              <a href="author.html#16594">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>My handler is servlet.py. The excellent module build by Daniel
Popowich. I do not place this servlet.py in the mod_python
installation directory, but I have the servlet.py in the root of my
website. In a .htaccess file I have the following entries:

PythonAutoReload On
SetHandler mod_python
PythonHandler servlet
PythonDebug on

I think the problem is in the servlet.py. Because, as soon as I touch
this file I get this error:

ValueError: index is not a subclass of Servlet (in E:/Program
Files/Apache Group/Apache2/htdocs/MySite/index.mps)

Before I touched servlet.py the index file loaded perfectly.
Apparently apache tried reloading the servlet file effectively
creating a new Servlet object in memory. Other pages that have already
created in memory and that are subclasses from Servlet have now
apparently lost their 'parent'.

Any suggestions how to solve this?

Thanks,
Berry

On Fri, 8 Oct 2004 07:30:11 +1000, Graham Dumpleton
&lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">grahamd at dscpl.com.au</A>&gt; wrote:
&gt;<i> 
</I>&gt;<i> On Friday, October 8, 2004, at 07:09  AM, berry groenendijk wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; There is indeed very little information on the Internet about the
</I>&gt;<i> &gt; apache.import_module funtion. I did find this Wiki page:
</I>&gt;<i> &gt; <A HREF="http://modpython.coedit.net/ReloadingModules">http://modpython.coedit.net/ReloadingModules</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I now import all my Python modules using apache.import_module, except
</I>&gt;<i> &gt; for all the Standard Library imports. All indirectly imported modules
</I>&gt;<i> &gt; are also imported with apache.import_module. In my .htaccess file I
</I>&gt;<i> &gt; have set PythonAutoReload On.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; But, when I make a change in a module, save it and refresh my browser,
</I>&gt;<i> &gt; the module is NOT reloaded. Why? Has anyone succefully used
</I>&gt;<i> &gt; apache.import_module?
</I>&gt;<i> 
</I>&gt;<i> Is the module you change one that is directly listed in a PythonHandler
</I>&gt;<i> directive, or if using mod_python.publisher, is it a module which is
</I>&gt;<i> being directly loaded by mod_python.publisher?
</I>&gt;<i> 
</I>&gt;<i> If it isn't and it is one of your common modules which is imported by
</I>&gt;<i> one falling into the above class of modules, then you still may at
</I>&gt;<i> least need to touch all the top level modules which use it. This is
</I>&gt;<i> because import_module() will not reload a top level module if what is
</I>&gt;<i> changed is actually in a module it imports.
</I>&gt;<i> 
</I>&gt;<i> Ie., if a.py imports b.py using import_module() and b.py is changed, but
</I>&gt;<i> then access is to a.py for the web page, neither a.py nor b.py will be
</I>&gt;<i> imported. You need to touch a.py first as well. If I understand things
</I>&gt;<i> correctly, it should then import a.py again, which in turn, since b.py
</I>&gt;<i> was modified should see import_module() import it as well.
</I>&gt;<i> 
</I>&gt;<i> What content handler system are you using, publisher, psp, home grown?
</I>&gt;<i> Can you describe how the modules/files relate and what is being changed?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> --
</I>&gt;<i> Graham Dumpleton (<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">grahamd at dscpl.com.au</A>)
</I>&gt;<i> 
</I>&gt;<i>
</I></PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016593.html">[mod_python] Udate python modules without restarting Apache
</A></li>
	<LI>Next message: <A HREF="016595.html">[mod_python] Udate python modules without restarting Apache
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16594">[ date ]</a>
              <a href="thread.html#16594">[ thread ]</a>
              <a href="subject.html#16594">[ subject ]</a>
              <a href="author.html#16594">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
