<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] vampire form validation
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20vampire%20form%20validation&In-Reply-To=1098225959.29801%40dscpl.com.au">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016655.html">
   <LINK REL="Next"  HREF="016667.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] vampire form validation</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Johannes Erdfelt</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20vampire%20form%20validation&In-Reply-To=1098225959.29801%40dscpl.com.au"
       TITLE="[mod_python] vampire form validation">johannes at erdfelt.com
       </A><BR>
    <I>Tue Oct 19 19:53:36 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="016655.html">[mod_python] vampire form validation
</A></li>
        <LI>Next message: <A HREF="016667.html">[mod_python] vampire form validation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16658">[ date ]</a>
              <a href="thread.html#16658">[ thread ]</a>
              <a href="subject.html#16658">[ subject ]</a>
              <a href="author.html#16658">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, Oct 19, 2004, Graham Dumpleton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">grahamd at dscpl.com.au</A>&gt; wrote:
&gt;<i> On Oct 19 14:11, Johannes Erdfelt &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">johannes at erdfelt.com</A>&gt; wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Subject: [mod_python] vampire form validation
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The list is built using objects, allowing for extensibility, and is
</I>&gt;<i> &gt; passed to the application as a class object with the members
</I>&gt;<i> &gt; automatically created from the name of the variable.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Something like this (I'm in the middle of porting and making some
</I>&gt;<i> &gt; changes to existing code, so this is a rough draft):
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; from vampire import form
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; __form_vars__ = [
</I>&gt;<i> &gt;   form.integer(&quot;userid&quot;, required = 0),
</I>&gt;<i> &gt;   form.submit(&quot;submit&quot;, [
</I>&gt;<i> &gt;     form.string(&quot;name&quot;, required = 1),	# 1 could be the default
</I>&gt;<i> &gt;     form.string(&quot;address&quot;),
</I>&gt;<i> &gt;     form.string(&quot;city&quot;),
</I>&gt;<i> &gt;     form.string(&quot;state&quot;),
</I>&gt;<i> &gt;     form.string(&quot;country&quot;, default = &quot;US&quot;),
</I>&gt;<i> &gt;   ]),
</I>&gt;<i> &gt; ]
</I>&gt;<i> 
</I>&gt;<i> Would the fact that methods are named based on type be limiting? In
</I>&gt;<i> order to be more generic, might you have a single method to register
</I>&gt;<i> fields and use type objects instead.
</I>&gt;<i> 
</I>&gt;<i>   form.define(&quot;address&quot;,types.StringType)
</I>&gt;<i>   form.define(&quot;count&quot;,types.IntType)
</I>&gt;<i> 
</I>&gt;<i> I guess it still means that internally you have to enumerate out some
</I>&gt;<i> methods which do the conversions for the differing types, but if one
</I>&gt;<i> had a registration mechanism of some form, it might open up the
</I>&gt;<i> possibility where you could define your own custom type objects and
</I>&gt;<i> register special decoders for that type to have input automatically
</I>&gt;<i> converted into an instance of a special class object you have written
</I>&gt;<i> rather than just basic types and lists.
</I>
I figure this can all be done via classes. The implementation I've done
has a base class, and then all of the type clases derived. If one wanted
to make a phone number validator, they could extend the form.string class
to do some extra validation to ensure the type is a string and it's a
well formed phone number.

Although I don't know how useful that will be. All of the cases I've
thought of have complex interdependencies that might not be easy to
implement (phone number formats vary from country to country so to
ensure it's valid, it would need to know the country, etc...)

Atleast it's possible to be done :)

&gt;<i> &gt; The handler would then expect a variable called 'form', which could be
</I>&gt;<i> &gt; used like this:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;   req.write(&quot;you requested we create a user with this address:\n&quot;)
</I>&gt;<i> &gt;   req.write(&quot;  %s\n&quot; % form.name)
</I>&gt;<i> &gt;   req.write(&quot;  %s\n&quot; % form.address)
</I>&gt;<i> &gt;   req.write(&quot;  %s, %s\n&quot; % (form.city, form.state))
</I>&gt;<i> &gt;   req.write(&quot;  %s\n&quot; % form.state)
</I>&gt;<i> 
</I>&gt;<i> In mod_python.publisher the util.FieldStorage instance is stuffed into
</I>&gt;<i> the req object as req.form. It might be better to do something similar
</I>&gt;<i> and stuff it in the req object rather than introduce another special name
</I>&gt;<i> that then can't be used as a form field name.
</I>
That's a good point. It's not necessary and should probably be left in
the req object like it currently is.

&gt;<i> I certainly think something to assist in form validation would be a good
</I>&gt;<i> thing and I am sure it is something a few people have probably tackled
</I>&gt;<i> before. Thus will be interested to here how other people have approached
</I>&gt;<i> it as well. Amongst all the different variants, we can come up with a
</I>&gt;<i> nice general approach that suits a lot of needs.
</I>
Yes, that was what I was hoping for while I ported and modified my
implementation.

When I get mine done, I'll post a patch for comments.

JE

</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016655.html">[mod_python] vampire form validation
</A></li>
	<LI>Next message: <A HREF="016667.html">[mod_python] vampire form validation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16658">[ date ]</a>
              <a href="thread.html#16658">[ thread ]</a>
              <a href="subject.html#16658">[ subject ]</a>
              <a href="author.html#16658">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
