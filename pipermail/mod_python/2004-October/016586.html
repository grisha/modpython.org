<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] 3.X equivalent of 2.X req.get_dirs()
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%203.X%20equivalent%20of%202.X%20req.get_dirs%28%29&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016590.html">
   <LINK REL="Next"  HREF="016587.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] 3.X equivalent of 2.X req.get_dirs()</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%203.X%20equivalent%20of%202.X%20req.get_dirs%28%29&In-Reply-To="
       TITLE="[mod_python] 3.X equivalent of 2.X req.get_dirs()">grahamd at dscpl.com.au
       </A><BR>
    <I>Thu Oct  7 00:04:01 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="016590.html">[mod_python] Forcing a confirmation page after authentication
</A></li>
        <LI>Next message: <A HREF="016587.html">[mod_python] 3.X equivalent of 2.X req.get_dirs()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16586">[ date ]</a>
              <a href="thread.html#16586">[ thread ]</a>
              <a href="subject.html#16586">[ subject ]</a>
              <a href="author.html#16586">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Todays hard question. :-)

Is there an equivalent in mod_python 3.X to the req.get_dirs() method
that appears in mod_python 2.X? Ie., in 2.X it would for example return:

{'PythonHandler': '/usr/local/etc/httpd/htdocs/projects/vampire/',
 'PythonDebug': '/usr/local/etc/httpd/htdocs/projects/vampire/'}

That is, the directory in the hierarchy where the Apache directives such
as PythonHandler were defined.

Previously I asked about a way to more or less determine exactly this.
That is, the directory in the hierarchy where PythonHandler was defined
for the currently active content handler.

When I asked that time, the only solution proposed was to use sys.path
by looking at the first entry in it. It actually had to be a bit smarter
than that, as sys.path could be modified by other things and so one
had to look for the directory in sys.path which was the longest match
for the start of req.filename.

The problem with using sys.path for what I was doing is that if PythonPath
is set explicitly as a directive, the directory in the document hierarchy may
not end up being put in sys.path.

The req.get_dirs() method turns out instead to be exactly what I wanted
in the first place, but it dissappeared in 3.X. Is there some way of getting
the same information in 3.X?

Other possibilities for doing what I want are to require that the directive
PythonInterpPerDirective be specified in the same spot as the directive
for PythonHandler. In 3.X you can then at least use req.interpreter, which
for this option will then be set to the directory where PythonHandler was
set.

Under 2.X there is no req.interpreter or equivalent that I could find,
although one can still use req.get_dirs() in that case to see where it
was that either PythonHandler or PythonInterPerDirective was set.

The only issue for what I want is that if someone uses PythonInterpreter
to override the interpreter name, it will no longer be the directory where
the PythonHandler was set.

Anyone else got any thoughts on an equivalent to req.get_dirs() in 3.X?
I haven't dug into the 3.X code base enough to see how this stores it,
but it doesn't look as simple any more and certainly doesn't seem to be
able to be queried.

--
Graham Dumpleton (<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">grahamd at dscpl.com.au</A>)
</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016590.html">[mod_python] Forcing a confirmation page after authentication
</A></li>
	<LI>Next message: <A HREF="016587.html">[mod_python] 3.X equivalent of 2.X req.get_dirs()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16586">[ date ]</a>
              <a href="thread.html#16586">[ thread ]</a>
              <a href="subject.html#16586">[ subject ]</a>
              <a href="author.html#16586">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
