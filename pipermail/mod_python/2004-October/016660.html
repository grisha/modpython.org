<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Re: [patch] vampire 1.1 remove unknown query variables
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20%5Bpatch%5D%20vampire%201.1%20remove%20unknown%20query%20variables&In-Reply-To=1098230739.38457%40dscpl.com.au">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016659.html">
   <LINK REL="Next"  HREF="016662.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Re: [patch] vampire 1.1 remove unknown query variables</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Johannes Erdfelt</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20%5Bpatch%5D%20vampire%201.1%20remove%20unknown%20query%20variables&In-Reply-To=1098230739.38457%40dscpl.com.au"
       TITLE="[mod_python] Re: [patch] vampire 1.1 remove unknown query variables">johannes at erdfelt.com
       </A><BR>
    <I>Tue Oct 19 20:17:38 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="016659.html">[mod_python] Re: [patch] vampire 1.1 remove unknown query variables
</A></li>
        <LI>Next message: <A HREF="016662.html">[mod_python] Re: [patch] vampire 1.1 remove unknown query variables
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16660">[ date ]</a>
              <a href="thread.html#16660">[ thread ]</a>
              <a href="subject.html#16660">[ subject ]</a>
              <a href="author.html#16660">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, Oct 19, 2004, Graham Dumpleton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">grahamd at dscpl.com.au</A>&gt; wrote:
&gt;<i> On Oct 19 16:50, Johannes Erdfelt &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">johannes at erdfelt.com</A>&gt; wrote:
</I>&gt;<i> &gt; On Tue, Oct 19, 2004, Graham Dumpleton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">grahamd at dscpl.com.au</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; I am a bit wary of directly generating an error response from this point in
</I>&gt;<i> &gt; &gt; the code.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; What may be better is to raise a Python RuntimeWarning exception with the
</I>&gt;<i> &gt; &gt; description of the problem. This will cause mod_python to still return an
</I>&gt;<i> &gt; &gt; internal server error, but one where the details would only be visible when
</I>&gt;<i> &gt; &gt; PythonDebug option is set to On. The error would also be logged into the
</I>&gt;<i> &gt; &gt; log file automatically.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; That's a good point. Some people may not want this level of information
</I>&gt;<i> &gt; to be returned to the user.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; On the other hand, I hate Internal Server Error messages (and shame on
</I>&gt;<i> &gt; me for returning that as the error too :). They are kind of misleading
</I>&gt;<i> &gt; in this case because the error isn't internal to the server, but in the
</I>&gt;<i> &gt; request from the client.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; To some extent, the error code that is returned is a problem since it
</I>&gt;<i> &gt; causes alarms with my log analysis scripts, but I'm more concerned with
</I>&gt;<i> &gt; the message that is returned.
</I>&gt;<i> 
</I>&gt;<i> Well, it could still be done in Vampire as you propose, but simply have it
</I>&gt;<i> honour the PythonDebug setting. It may be more approriate to return a
</I>&gt;<i> HTTP_BAD_REQUEST if HTTP_INTERNAL_SERVER_ERROR is not appropriate
</I>&gt;<i> in this case.
</I>
I looked at HTTP_BAD_REQUEST, but the HTTP specs seem to imply that it
should only be returned when there is a parsing error during the command
parsing phase. Like if the &quot;GET&quot; or &quot;PUT&quot; command is malformed.

I guess it's all a matter of preference.

&gt;<i> Unfortunately the mod_python routine for generating internal server
</I>&gt;<i> error responses, with details as appropriate if PyhonDebug is on isn't a
</I>&gt;<i> generically usable routine that could be used to do it and I don't think
</I>&gt;<i> it allows an alternate status anyway. Vampire could provide such a
</I>&gt;<i> generic routine that might even also be usable in some way from a user
</I>&gt;<i> content handler when they want to return errors, but with a message
</I>&gt;<i> when PythonDebug is set.
</I>
I've actually done something similar in my old vampire-like handler. It
would catch an exception and print an error message to the client.

I had implemented a UserError and InternalError handler. UserError would
always be sent back to the client. Generally it would be used for errors
the client won't generally generate, but might be useful. I used it for
the error message about query variables and in my original form
processing code if a radio button variable had an invalid value or
similar.

InternalError would either send the error to the client if PythonDebug
was enabled, or log it to the Apache error log and print a generic
message to the client. This was used for internal consistency errors
that are probably not useful to the client.

After reading your emails, I'm sure that some administrators probably
won't want errors like UserError being returned to the client.

JE

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016659.html">[mod_python] Re: [patch] vampire 1.1 remove unknown query variables
</A></li>
	<LI>Next message: <A HREF="016662.html">[mod_python] Re: [patch] vampire 1.1 remove unknown query variables
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16660">[ date ]</a>
              <a href="thread.html#16660">[ thread ]</a>
              <a href="subject.html#16660">[ subject ]</a>
              <a href="author.html#16660">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
