<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] &quot;File&quot; class object in form fields.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20%22File%22%20class%20object%20in%20form%20fields.&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016667.html">
   <LINK REL="Next"  HREF="016657.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] &quot;File&quot; class object in form fields.</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20%22File%22%20class%20object%20in%20form%20fields.&In-Reply-To="
       TITLE="[mod_python] &quot;File&quot; class object in form fields.">grahamd at dscpl.com.au
       </A><BR>
    <I>Tue Oct 19 18:31:02 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="016667.html">[mod_python] vampire form validation
</A></li>
        <LI>Next message: <A HREF="016657.html">[mod_python] Approaches to handling input forms.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16654">[ date ]</a>
              <a href="thread.html#16654">[ thread ]</a>
              <a href="subject.html#16654">[ subject ]</a>
              <a href="author.html#16654">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>In mod_python 2.X, there is code in publisher which says:

       # if it is a file, make File()
       if field.filename:
           val = File(field)
       else:
           val = field.value

class File:
    &quot;&quot;&quot; Like a file, but also has headers and filename
    &quot;&quot;&quot;

    def __init__(self, field):

        # steal all the file-like methods
        for m in field.file.__methods__:
            self.__dict__[m] = getattr(field.file, m)

        self.headers = field.headers
        self.filename = field.filename

In mod_python 3.X, it is:

    # add form data to args
    for field in fs.list:
        if field.filename:
            val = field
        else:
            val = field.value
        args.setdefault(field.name, []).append(val)

The difference being that in mod_python 2.X, it would wrap what it saw as
a file input field into an instance of a special File object.

In Vampire I originally wrote code having only access to mod_python 2.X
and so similarly wrapped fields into a File object if needed. Now seeing that
mod_python 3.X doesn't do it, should I also now not be doing it if it is seen
to be better not do it.

For those who have actually done input forms with file uploading (I haven't)
what does the difference really mean in practice? Which is the better way?

At this stage I am inclined to do it like mod_python 3.X, especially how that
was how I had done this stuff in another system before I even ever looked at
mod_python.

--
Graham Dumpleton (<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">grahamd at dscpl.com.au</A>)
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016667.html">[mod_python] vampire form validation
</A></li>
	<LI>Next message: <A HREF="016657.html">[mod_python] Approaches to handling input forms.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16654">[ date ]</a>
              <a href="thread.html#16654">[ thread ]</a>
              <a href="subject.html#16654">[ subject ]</a>
              <a href="author.html#16654">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
