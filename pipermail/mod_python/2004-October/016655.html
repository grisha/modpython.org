<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] vampire form validation
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20vampire%20form%20validation&In-Reply-To=20041019211125.GE15993%40sventech.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016651.html">
   <LINK REL="Next"  HREF="016658.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] vampire form validation</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20vampire%20form%20validation&In-Reply-To=20041019211125.GE15993%40sventech.com"
       TITLE="[mod_python] vampire form validation">grahamd at dscpl.com.au
       </A><BR>
    <I>Tue Oct 19 18:46:03 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="016651.html">[mod_python] vampire form validation
</A></li>
        <LI>Next message: <A HREF="016658.html">[mod_python] vampire form validation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16655">[ date ]</a>
              <a href="thread.html#16655">[ thread ]</a>
              <a href="subject.html#16655">[ subject ]</a>
              <a href="author.html#16655">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Oct 19 14:11, Johannes Erdfelt &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">johannes at erdfelt.com</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> Subject: [mod_python] vampire form validation
</I>&gt;<i>
</I>&gt;<i> The list is built using objects, allowing for extensibility, and is
</I>&gt;<i> passed to the application as a class object with the members
</I>&gt;<i> automatically created from the name of the variable.
</I>&gt;<i> 
</I>&gt;<i> Something like this (I'm in the middle of porting and making some
</I>&gt;<i> changes to existing code, so this is a rough draft):
</I>&gt;<i> 
</I>&gt;<i> from vampire import form
</I>&gt;<i> 
</I>&gt;<i> __form_vars__ = [
</I>&gt;<i>   form.integer(&quot;userid&quot;, required = 0),
</I>&gt;<i>   form.submit(&quot;submit&quot;, [
</I>&gt;<i>     form.string(&quot;name&quot;, required = 1),	# 1 could be the default
</I>&gt;<i>     form.string(&quot;address&quot;),
</I>&gt;<i>     form.string(&quot;city&quot;),
</I>&gt;<i>     form.string(&quot;state&quot;),
</I>&gt;<i>     form.string(&quot;country&quot;, default = &quot;US&quot;),
</I>&gt;<i>   ]),
</I>&gt;<i> ]
</I>
Would the fact that methods are named based on type be limiting? In
order to be more generic, might you have a single method to register
fields and use type objects instead.

  form.define(&quot;address&quot;,types.StringType)
  form.define(&quot;count&quot;,types.IntType)

I guess it still means that internally you have to enumerate out some
methods which do the conversions for the differing types, but if one
had a registration mechanism of some form, it might open up the
possibility where you could define your own custom type objects and
register special decoders for that type to have input automatically
converted into an instance of a special class object you have written
rather than just basic types and lists.

&gt;<i> The handler would then expect a variable called 'form', which could be
</I>&gt;<i> used like this:
</I>&gt;<i> 
</I>&gt;<i>   req.write(&quot;you requested we create a user with this address:\n&quot;)
</I>&gt;<i>   req.write(&quot;  %s\n&quot; % form.name)
</I>&gt;<i>   req.write(&quot;  %s\n&quot; % form.address)
</I>&gt;<i>   req.write(&quot;  %s, %s\n&quot; % (form.city, form.state))
</I>&gt;<i>   req.write(&quot;  %s\n&quot; % form.state)
</I>
In mod_python.publisher the util.FieldStorage instance is stuffed into
the req object as req.form. It might be better to do something similar
and stuff it in the req object rather than introduce another special name
that then can't be used as a form field name.

I certainly think something to assist in form validation would be a good
thing and I am sure it is something a few people have probably tackled
before. Thus will be interested to here how other people have approached
it as well. Amongst all the different variants, we can come up with a
nice general approach that suits a lot of needs.

--
Graham Dumpleton (<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">grahamd at dscpl.com.au</A>)
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016651.html">[mod_python] vampire form validation
</A></li>
	<LI>Next message: <A HREF="016658.html">[mod_python] vampire form validation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16655">[ date ]</a>
              <a href="thread.html#16655">[ thread ]</a>
              <a href="subject.html#16655">[ subject ]</a>
              <a href="author.html#16655">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
