<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Udate python modules without restarting Apache
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Udate%20python%20modules%20without%20restarting%20Apache&In-Reply-To=20041009081038.1F587C6B8%40postfix3-2.free.fr">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016602.html">
   <LINK REL="Next"  HREF="016605.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Udate python modules without restarting Apache</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Udate%20python%20modules%20without%20restarting%20Apache&In-Reply-To=20041009081038.1F587C6B8%40postfix3-2.free.fr"
       TITLE="[mod_python] Udate python modules without restarting Apache">grahamd at dscpl.com.au
       </A><BR>
    <I>Sat Oct  9 19:42:40 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="016602.html">[mod_python] Udate python modules without restarting Apache
</A></li>
        <LI>Next message: <A HREF="016605.html">[mod_python] Udate python modules without restarting Apache
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16603">[ date ]</a>
              <a href="thread.html#16603">[ thread ]</a>
              <a href="subject.html#16603">[ subject ]</a>
              <a href="author.html#16603">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 09/10/2004, at 6:10 PM, Nicolas Lehuen wrote:

&gt;<i> Hi Graham, what are the pros and cons of using the imp module versus an
</I>&gt;<i> execfile call or an exec call ?
</I>&gt;<i>
</I>&gt;<i> Using Apache 2.0.52 on win32, with a multithreaded MPM, I have noticed 
</I>&gt;<i> a few
</I>&gt;<i> problem with mod_python.publisher which reloads the same module many 
</I>&gt;<i> times
</I>&gt;<i> when many threads try to load it concurrently. It seems that either
</I>&gt;<i> mod_python.publisher or the imp module does not properly handle this
</I>&gt;<i> situation. The result is that I have many instances of the same module 
</I>&gt;<i> in
</I>&gt;<i> memory, so I got many connection pools instead of only one and so on. 
</I>&gt;<i> That's
</I>&gt;<i> why I decided to fix this and other problems (the famous 'only one 
</I>&gt;<i> index.py
</I>&gt;<i> in your application') by reimplementing my own variant of the 
</I>&gt;<i> publisher.
</I>
You have asked me about the one thing that I can't yet comment on. That 
is, how
threading affects all this. Reason is that I don't have access to a 
copy of
Apache which runs with threads to try things out. Not sure if I can 
build
Apache on Mac OS X to use threading or not.

To look at the whole threading issue was one of the next things to do 
on my
list. I need to go back through previous posts on the mailing list to 
see what
has been said before, see what the documentation says and also troll 
through
the source code.

The threading stuff worries me enough to say that only &quot;prefork&quot; should 
be
used with the Vampire package I make available. There is currently 
nothing
in the code to protect against multithread access to critical bits, so 
bound to
fail at some point.

--
Graham Dumpleton (<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">grahamd at dscpl.com.au</A>)

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016602.html">[mod_python] Udate python modules without restarting Apache
</A></li>
	<LI>Next message: <A HREF="016605.html">[mod_python] Udate python modules without restarting Apache
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16603">[ date ]</a>
              <a href="thread.html#16603">[ thread ]</a>
              <a href="subject.html#16603">[ subject ]</a>
              <a href="author.html#16603">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
