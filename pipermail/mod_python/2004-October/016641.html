<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Re: Bug in mod_python.c causing multiple/redundant
	interpreter creation.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20Bug%20in%20mod_python.c%20causing%20multiple/redundant%0A%09interpreter%20creation.&In-Reply-To=20041016093010.T47684%40onyx.ispol.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016637.html">
   <LINK REL="Next"  HREF="016599.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Re: Bug in mod_python.c causing multiple/redundant
	interpreter creation.</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20Bug%20in%20mod_python.c%20causing%20multiple/redundant%0A%09interpreter%20creation.&In-Reply-To=20041016093010.T47684%40onyx.ispol.com"
       TITLE="[mod_python] Re: Bug in mod_python.c causing multiple/redundant
	interpreter creation.">grahamd at dscpl.com.au
       </A><BR>
    <I>Sun Oct 17 10:01:17 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="016637.html">[mod_python] Re: Bug in mod_python.c causing multiple/redundant
	interpreter creation.
</A></li>
        <LI>Next message: <A HREF="016599.html">[mod_python] moving file handle
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16641">[ date ]</a>
              <a href="thread.html#16641">[ thread ]</a>
              <a href="subject.html#16641">[ subject ]</a>
              <a href="author.html#16641">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 16/10/2004, at 11:31 PM, Gregory (Grisha) Trubetskoy wrote:

&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Sat, 16 Oct 2004, Graham Dumpleton wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Since the Python apache.import_module() function is going to be called
</I>&gt;&gt;<i> to load your content handler, and that has to do file i/o, would be a 
</I>&gt;&gt;<i> very
</I>&gt;&gt;<i> good candidate for the GIL being given up and thus letting the other 
</I>&gt;&gt;<i> threads
</I>&gt;&gt;<i> in to be able to check to see if the interpreter needs creating.
</I>&gt;<i>
</I>&gt;<i> I'm pretty sure Python already does release the GIL where necessary 
</I>&gt;<i> (such as IO during import), so there is no need to do that from within 
</I>&gt;<i> mod_python.
</I>
I realise that Python already releases the GIL. I mentioned it as the 
reason why
it possibly gets released and the other threads are getting in, not 
that we have
to do it. :-)

Anyway, import_module() is actually irrelevant in this case, as it 
isn't going
to get called when the interpreter is being first created, but later. 
All the same,
there will still be other stuff which can result in the GIL being 
released. This
might be file i/o or it might be that Python will release it every so 
often when
executing Python code in case there are other threads also running in 
Python code
that want to do something.



--
Graham Dumpleton (<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">grahamd at dscpl.com.au</A>)

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016637.html">[mod_python] Re: Bug in mod_python.c causing multiple/redundant
	interpreter creation.
</A></li>
	<LI>Next message: <A HREF="016599.html">[mod_python] moving file handle
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16641">[ date ]</a>
              <a href="thread.html#16641">[ thread ]</a>
              <a href="subject.html#16641">[ subject ]</a>
              <a href="author.html#16641">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
