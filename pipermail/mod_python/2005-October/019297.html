<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] apache log handler
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20apache%20log%20handler&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019296.html">
   <LINK REL="Next"  HREF="019304.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] apache log handler</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20apache%20log%20handler&In-Reply-To="
       TITLE="[mod_python] apache log handler">grahamd at dscpl.com.au
       </A><BR>
    <I>Sun Oct 16 20:41:53 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="019296.html">[mod_python] apache log handler
</A></li>
        <LI>Next message: <A HREF="019304.html">[mod_python] apache log handler
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19297">[ date ]</a>
              <a href="thread.html#19297">[ thread ]</a>
              <a href="subject.html#19297">[ subject ]</a>
              <a href="author.html#19297">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Such things probably haven't been added for a couple of reasons.

The first is that mod_python up to 3.1.4 worked with older versions of
Python such as 2.2, but the &quot;logging&quot; module didn't exist in those older
versions of Python. With mod_python 3.2 there is opportunity to use
newer features as Python 2.3 or later will be a requirement, but ....

Second is that the intention is that mod_python be good at its core
functionality and not accumulate a lot of extra baggage. Given that the
logging interface is simple enough that users can write their own and
given that logging interfaces are often customised to specific
applications and therefore a generic one may not always be suitable
anyway, I am sure that some will argue that it shouldn't be in
mod_python.

What I might suggest is that you post up your code as an example on
the Python cookbook site.

  <A HREF="http://aspn.activestate.com/ASPN/Python/Cookbook/">http://aspn.activestate.com/ASPN/Python/Cookbook/</A>

Graham

Nic Ferrier wrote ..
&gt;<i> Does mod_python have a standard interface between python logging and
</I>&gt;<i> Apache's logging? 
</I>&gt;<i> 
</I>&gt;<i> I can't see one included in the dist. I know lots of other people have
</I>&gt;<i> written one. I've written one.
</I>&gt;<i> 
</I>&gt;<i> If there isn't one why isn't there one?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Nic Ferrier
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> PS for what it's worth here's mine:
</I>&gt;<i> 
</I>&gt;<i> # A log handler for mod-python
</I>&gt;<i> 
</I>&gt;<i> from mod_python import apache
</I>&gt;<i> import logging
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> class ProxyLogThing:
</I>&gt;<i>     &quot;&quot;&quot;A proxy for default Apache logging.&quot;&quot;&quot;
</I>&gt;<i> 
</I>&gt;<i>     def __init__(self):
</I>&gt;<i>         # No need to do anything.
</I>&gt;<i> 
</I>&gt;<i>     def log_error(msg, lvl):
</I>&gt;<i>         apache.log_error(msg, lvl)
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> class ApacheLogHandler(logging.Handler):
</I>&gt;<i>     &quot;&quot;&quot;A handler class which sends all logging to Apache.&quot;&quot;&quot;
</I>&gt;<i> 
</I>&gt;<i>     def __init__(self, ref = None):
</I>&gt;<i>         &quot;&quot;&quot;
</I>&gt;<i>         Initialize the handler (does nothing)
</I>&gt;<i>         &quot;&quot;&quot;
</I>&gt;<i>         logging.Handler.__init__(self)
</I>&gt;<i> 
</I>&gt;<i>         if ref == None:
</I>&gt;<i>             self.ref = ProxyLogThing()
</I>&gt;<i>         else:
</I>&gt;<i>             self.ref = ref
</I>&gt;<i> 
</I>&gt;<i>         # Set up the thing
</I>&gt;<i>         self.level_mapping = { logging.CRITICAL: apache.APLOG.CRIT,
</I>&gt;<i>                                logging.ERROR: apache.APLOG_ERR,
</I>&gt;<i>                                logging.WARNING: apache.APLOG_WARNING,
</I>&gt;<i>                                logging.INFO: apache.APLOG_INFO,
</I>&gt;<i>                                logging.debug: apache.APLOG_DEBUG }
</I>&gt;<i> 
</I>&gt;<i>     def emit(self, record):
</I>&gt;<i>         &quot;&quot;&quot;Emit a record.&quot;&quot;&quot;
</I>&gt;<i>         self.ref.log_error(record.msg, record.lvl)
</I>&gt;<i> 
</I>&gt;<i> # End
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I></PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019296.html">[mod_python] apache log handler
</A></li>
	<LI>Next message: <A HREF="019304.html">[mod_python] apache log handler
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19297">[ date ]</a>
              <a href="thread.html#19297">[ thread ]</a>
              <a href="subject.html#19297">[ subject ]</a>
              <a href="author.html#19297">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
