<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] PyhtonImport
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20PyhtonImport&In-Reply-To=b117fb190510141041p407c61a0r42388103f98ac689%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019272.html">
   <LINK REL="Next"  HREF="019267.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] PyhtonImport</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Nicolas Lehuen</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20PyhtonImport&In-Reply-To=b117fb190510141041p407c61a0r42388103f98ac689%40mail.gmail.com"
       TITLE="[mod_python] PyhtonImport">nicolas.lehuen at gmail.com
       </A><BR>
    <I>Fri Oct 14 15:41:16 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="019272.html">[mod_python] PyhtonImport
</A></li>
        <LI>Next message: <A HREF="019267.html">[mod_python] PyThreadState_Delete: tstate is still current
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19268">[ date ]</a>
              <a href="thread.html#19268">[ thread ]</a>
              <a href="subject.html#19268">[ subject ]</a>
              <a href="author.html#19268">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Paul,

PythonImport makes sure that the module is imported when the interpreter is
started. So you'll find it in sys.module. However, to see it amongst your
module's global variables, you need it import it in your module. This is
exactly the same in a standard Python interpreter : it's not because a
module has been imported by a module that it is present in all the other
modules' global variables.

So your published module should be :

import my_test

def t(req):
return globals()

Note two things :

1) I've renamed test to my_test, because test is a standard Python module
and trouble may ensue if you use this module name.
2) str() around globals is not needed IIRC. The publisher will apply it. But
that's a detail.

Regards,
Nicolas

2005/10/14, Paul Hide &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">paul.hide at gmail.com</A>&gt;:
&gt;<i>
</I>&gt;<i> Server is: Apache 2.0.54, mod_python 3.1.3 Debian 3.1
</I>&gt;<i> Client is Firefox 1.0.7 on ms win 2k
</I>&gt;<i> The following file is successfully imported by a PythonImport directive.
</I>&gt;<i>
</I>&gt;<i> #PythonImport test
</I>&gt;<i>
</I>&gt;<i> from mod_python import apache
</I>&gt;<i>
</I>&gt;<i> apache.log_error('q8 q8 q8 q8')
</I>&gt;<i>
</I>&gt;<i> I know this because it writes to the error log.
</I>&gt;<i>
</I>&gt;<i> The directive that loads it is:
</I>&gt;<i>
</I>&gt;<i> PythonImport pyimp localhost.localdomain
</I>&gt;<i>
</I>&gt;<i> I know that my publisher programs are being run in this interpreter
</I>&gt;<i> because:
</I>&gt;<i>
</I>&gt;<i> def t(req):
</I>&gt;<i> return str(req.interpreter) #probably is a string anyway
</I>&gt;<i>
</I>&gt;<i> returns localhost.localdomain into my browser.
</I>&gt;<i>
</I>&gt;<i> If I now change my publisher program to say:
</I>&gt;<i>
</I>&gt;<i> def t(req):
</I>&gt;<i> return str(globals()) #probably is a string anyway
</I>&gt;<i>
</I>&gt;<i> then why can't I see any reference to pyimp in the resulting output?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Paul Hide
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20051014/483ad065/attachment.html">http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20051014/483ad065/attachment.html</A>
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019272.html">[mod_python] PyhtonImport
</A></li>
	<LI>Next message: <A HREF="019267.html">[mod_python] PyThreadState_Delete: tstate is still current
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19268">[ date ]</a>
              <a href="thread.html#19268">[ thread ]</a>
              <a href="subject.html#19268">[ subject ]</a>
              <a href="author.html#19268">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
