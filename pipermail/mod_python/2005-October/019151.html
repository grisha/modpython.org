<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Re: Strange HTTP Response
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20Strange%20HTTP%20Response&In-Reply-To=263c8df0050928223572cd510e%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019161.html">
   <LINK REL="Next"  HREF="019152.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Re: Strange HTTP Response</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Iwasso 80s</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20Strange%20HTTP%20Response&In-Reply-To=263c8df0050928223572cd510e%40mail.gmail.com"
       TITLE="[mod_python] Re: Strange HTTP Response">iwasso80s at gmail.com
       </A><BR>
    <I>Mon Oct  3 17:10:52 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="019161.html">[mod_python] publishers error handling
</A></li>
        <LI>Next message: <A HREF="019152.html">[mod_python] Re: Strange HTTP Response
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19151">[ date ]</a>
              <a href="thread.html#19151">[ thread ]</a>
              <a href="subject.html#19151">[ subject ]</a>
              <a href="author.html#19151">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I think we finally resolved the problem -- sort of.

We were using the util.redirect.  However, the problem went away after
replacing it with these two lines:

req.headers_out['Location'] = newPath
return apache.HTTP_TEMPORARY_REDIRECT

The primary difference between, the two methods is that util.redirect
uses a 302 and HTTP_TEMPORARY_REDIRECT returns a 307 response code.

The only problem is that IE on Mac doesn't seem to like 307 response
codes.  We're sticking with this for the time being.  However, does
anyone have any thoughts on what's causing this?  302 shouldn't be
causing these kinds of problems, no?

If you want to see the problem/solution first hand, here's the URL: 
<A HREF="http://www.iwasso80s.com/">http://www.iwasso80s.com/</A>

If anyone has any thoughts, we'd really appreciate it.


On 9/28/05, Iwasso 80s &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">iwasso80s at gmail.com</A>&gt; wrote:
&gt;<i> We've been having a very strange problem with some variants of IE (on
</I>&gt;<i> Windows 98, Server 2003) and Safari (OS X 10.3).  If you aggressively
</I>&gt;<i> click around our site one of two things will often happen: the body of
</I>&gt;<i> the page will return &quot;0&quot; as the entire result set of the request; or
</I>&gt;<i> it will return &quot;0&quot; followed by what appears to be the header data (see
</I>&gt;<i> attached gif).  All other requests will return quickly and without
</I>&gt;<i> errors.
</I>&gt;<i>
</I>&gt;<i> Some interesting data points:
</I>&gt;<i>
</I>&gt;<i> If we reduce the keep-alive settings on Apache it seems to get worse
</I>&gt;<i> (meaning more likely to respond with a &quot;0&quot;).  However, if we increase
</I>&gt;<i> the keep-alive setting to say around 15 seconds and aggressively click
</I>&gt;<i> around the site, the Apache server will become unresponsive.  I'm
</I>&gt;<i> assuming all the procs are getting used up before the keep-alive on
</I>&gt;<i> available procs has expired (although, that behavior seems fishy as
</I>&gt;<i> well).  Throughout all of these tests the cpu, io, etc is only
</I>&gt;<i> marginally taxed and no errors are reported in the error log.  We set
</I>&gt;<i> up a super simple testing page, with no db, etc and the problem still
</I>&gt;<i> persists.
</I>&gt;<i> Our config:
</I>&gt;<i>
</I>&gt;<i> Debian Etch (fully updated)
</I>&gt;<i>  Apache 2.0.54
</I>&gt;<i>  Python 2.3
</I>&gt;<i>  Mod_python 3.1
</I>&gt;<i>  Clearsilver .9 (but we aren't using cgi functionality)
</I>&gt;<i>
</I>&gt;<i> We'd really appreciate any help we could get.
</I>&gt;<i>
</I>&gt;<i> Thanks in advance for your patience and consideration.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019161.html">[mod_python] publishers error handling
</A></li>
	<LI>Next message: <A HREF="019152.html">[mod_python] Re: Strange HTTP Response
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19151">[ date ]</a>
              <a href="thread.html#19151">[ thread ]</a>
              <a href="subject.html#19151">[ subject ]</a>
              <a href="author.html#19151">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
