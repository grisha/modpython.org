<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Unable to import modules in subdirs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Unable%20to%20import%20modules%20in%20subdirs&In-Reply-To=e3a291250510280740x3e21d112t9208416df0686e6%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019443.html">
   <LINK REL="Next"  HREF="019447.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Unable to import modules in subdirs</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Jorey Bump</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Unable%20to%20import%20modules%20in%20subdirs&In-Reply-To=e3a291250510280740x3e21d112t9208416df0686e6%40mail.gmail.com"
       TITLE="[mod_python] Unable to import modules in subdirs">list at joreybump.com
       </A><BR>
    <I>Fri Oct 28 11:39:27 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="019443.html">[mod_python] Unable to import modules in subdirs
</A></li>
        <LI>Next message: <A HREF="019447.html">[mod_python] Unable to import modules in subdirs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19444">[ date ]</a>
              <a href="thread.html#19444">[ thread ]</a>
              <a href="subject.html#19444">[ subject ]</a>
              <a href="author.html#19444">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Brandon N wrote:
&gt;<i> Are you forced, with mod_python, to write all package code within the 
</I>&gt;<i> __init__.py? I ask because of what you've mentioned a few times now and 
</I>&gt;<i> what I keep encountering.
</I>
No. This isn't a mod_python issue, the first step in creating a Python 
package (as opposed to module) is to create a directory that contains a 
__init__.py file. This file can be empty, but I generally put my main 
code in it, and create parallel modules for separate importing. Let's 
say my module search path contains /var/www/python. The contents might 
look like this:

/var/www/python/foo.py
/var/www/python/apps/__init__.py (empty file)
/var/www/python/apps/bar/__init__.py (main code for application)
/var/www/python/apps/bar/db.py (db connection and functions for app)

So I can use import statements like:

  # import a &quot;normal&quot; module
  import foo
  # import a package
  import apps
  # importing apps doesn't automatically import apps.bar
  import apps.bar
  # importing apps.bar doesn't automatically import apps.bar.db
  import apps.bar.db

Note that you can also do this, as long as there are no namespace 
collisions:

  from apps import bar

But I like to preserve dotted notation for clarity, and it sometimes has 
the side effect of offering more security (against traversal exploits, 
for example).

Python packaging is an advanced subject, and not well documented. This 
is only the tip of the iceberg, look at the standard library to get an 
idea of how the experts do it. Sorry to bore you with a primer if you're 
already aware of these issues.

&gt;<i> I have Vampire up and running, though from a doc it specifies &quot;...The 
</I>&gt;<i> mechanism will also not work where a module is actually a package. Any 
</I>&gt;<i> application specific modules should therefore not be structured as 
</I>&gt;<i> packages...&quot; which I imagine is a restriction coming from mod_python. I 
</I>&gt;<i> have existing code that is already structured in various packages and 
</I>&gt;<i> I'd like to keep it that way.
</I>
This is handler-specific. Graham doesn't like packages. :)

&gt;<i> I'm able to import Admin but Admin.RemoteAdmin fails (as before). The 
</I>&gt;<i> only way I've found around this is via an import of RemoteAdmin within 
</I>&gt;<i> Admin's __init__.py which isn't much of a fix.
</I>&gt;<i> 
</I>&gt;<i> With that klunky method I get the desired:
</I>&gt;<i> import Admin.RemoteAdmin as RA
</I>&gt;<i> A = RA.RemoteAdmin( )
</I>&gt;<i> 
</I>&gt;<i> Is there a more pythonic way to accomplish this from within mod_python?
</I>
Try Publisher. I still need to test my apps against 3.2, but older 
versions respect package imports (I'm in *big* trouble if 3.2 breaks this).

Note that Graham's put a lot of work into Vampire to address some of the 
  stumbling blocks encountered by mod_python.publisher users. You may 
welcome his approach after comparing the two. There's no doubt that they 
both have caveats unlike anything you'll encounter in a PHP-like 
environment. This is also true of mod_python.psp and just about any 
other handler/framework written for mod_python. But you couldn't pay me 
to go back to PHP after developing web applications in Python (well, you 
could, but I'm going to charge double). :)

</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019443.html">[mod_python] Unable to import modules in subdirs
</A></li>
	<LI>Next message: <A HREF="019447.html">[mod_python] Unable to import modules in subdirs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19444">[ date ]</a>
              <a href="thread.html#19444">[ thread ]</a>
              <a href="subject.html#19444">[ subject ]</a>
              <a href="author.html#19444">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
