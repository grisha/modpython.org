<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Mod Python Output Filter Behavior
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Mod%20Python%20Output%20Filter%20Behavior&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019413.html">
   <LINK REL="Next"  HREF="019415.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Mod Python Output Filter Behavior</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Lee Brown</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Mod%20Python%20Output%20Filter%20Behavior&In-Reply-To="
       TITLE="[mod_python] Mod Python Output Filter Behavior">administrator at leebrown.org
       </A><BR>
    <I>Tue Oct 25 12:52:35 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="019413.html">[mod_python] Vampire and XML-RPC example service
</A></li>
        <LI>Next message: <A HREF="019415.html">[mod_python] onunload ie mod_python 
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19411">[ date ]</a>
              <a href="thread.html#19411">[ thread ]</a>
              <a href="subject.html#19411">[ subject ]</a>
              <a href="author.html#19411">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Greetings!

I've been dorking around with writing a mod_python output filter and I have
a question:  In the documentation under Section 4.3, it says:

	&quot;When writing filters, keep in mind that a filter will be called any
time anything upstream requests an IO operation, and
	the filter has no control over the amount of data passed through it
and no notion of where in the request processing it
	is called. For example, within a single request, a filter may be
called once or five times, and there is no way for the
	filter to know beforehand that the request is over and which of
calls is last or first for this request, thought encounter
	of an EOS (None returned from a read operation) is a fairly strong
indication of an end of a request.&quot;

The filter I'm working on performs xslt transformations, so it is important
that each entrance into the filter handler gets either the whole xml
document or a well-formed xml fragment.

As a test, I wrote the following filter:

	def outputfilter (filter):
	    filter.write('&lt;p&gt;entering filter&lt;/p&gt;')
	    data = filter.read()
	    while data:
	        filter.write(data)
	        data = filter.read()
	    filter.write('&lt;p&gt;leaving filter&lt;/p&gt;')
	    if data is None:
	        filter.write('&lt;p&gt;closing filter&lt;/p&gt;')
	        filter.close()

Every page I've thrown at this begins with &quot;entering filter&quot; and ends with
&quot;leaving filter&quot; followed by &quot;closing filter.&quot;  In other words, the entire
request was pushed through one call to the filter.

Under what circumstances would the comments in Section 4.3 about multiple
calls to the filter actually occur?  So far, I haven't been able to
stimulate that behavior.

Best Regards,
Lee E. Brown
(<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">leebrown at leebrown.org</A>)

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20051025/c2e67051/attachment.html">http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20051025/c2e67051/attachment.html</A>
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019413.html">[mod_python] Vampire and XML-RPC example service
</A></li>
	<LI>Next message: <A HREF="019415.html">[mod_python] onunload ie mod_python 
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19411">[ date ]</a>
              <a href="thread.html#19411">[ thread ]</a>
              <a href="subject.html#19411">[ subject ]</a>
              <a href="author.html#19411">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
