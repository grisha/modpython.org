<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Session Pickling Error II - 3.2.2b
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Session%20Pickling%20Error%20II%20-%203.2.2b&In-Reply-To=20051004045353.53993.qmail%40web31909.mail.mud.yahoo.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019157.html">
   <LINK REL="Next"  HREF="019167.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Session Pickling Error II - 3.2.2b</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Nicolas Lehuen</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Session%20Pickling%20Error%20II%20-%203.2.2b&In-Reply-To=20051004045353.53993.qmail%40web31909.mail.mud.yahoo.com"
       TITLE="[mod_python] Session Pickling Error II - 3.2.2b">nicolas.lehuen at gmail.com
       </A><BR>
    <I>Tue Oct  4 01:40:36 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="019157.html">[mod_python] Session Pickling Error  II - 3.2.2b 
</A></li>
        <LI>Next message: <A HREF="019167.html">[mod_python] Session Pickling Error  II - 3.2.2b
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19159">[ date ]</a>
              <a href="thread.html#19159">[ thread ]</a>
              <a href="subject.html#19159">[ subject ]</a>
              <a href="author.html#19159">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

As explained in the error message, function objects can't be pickled. This
is not a mod_python limitation, rather a Python limitation.

There are three workarounds I can think of :

1) If you are using the threaded MPM (but I think you're not), use
MemorySession instead of DBMSession or FileSession. This way, session are
never pickled. The disadvantage is that all sessions are lost as soon as
Apache is restarted, since sessions are stored in RAM and not on disk.

2) Do not store any function object in the session and implement a
workaround by yourself, i.e. try to store a pickable value from which you
can infer the function. This means that you must forget about directly
storing functions in the session and having a kind of naming system (store
the name of the function in the session and fetch the function according to
its name).

3) Customize the pickling / unpickling of the objects you want to store in
the session, using __getstate__ and __setstate__ (see the Python
documentation).

Regards,
Nicolas

2005/10/4, GATOR AIDE &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">gator_aide2000 at yahoo.com</A>&gt;:
&gt;<i>
</I>&gt;<i> After updating mod_python 3.1.4 to 3.2.2b I am getting
</I>&gt;<i> an error:
</I>&gt;<i>
</I>&gt;<i> PythonHandler mod_python.publisher: TypeError: can't
</I>&gt;<i> pickle function objects
</I>&gt;<i>
</I>&gt;<i> I am storing a function in the session and calling
</I>&gt;<i> session.save(). (Which is when the error is raised.)
</I>&gt;<i>
</I>&gt;<i> Using mod_python 3.1.4 the code works just fine but
</I>&gt;<i> after the update I am now seeing this error.
</I>&gt;<i>
</I>&gt;<i> The code simply stores a dictionary and few function
</I>&gt;<i> callbacks in the session and loops through several
</I>&gt;<i> functions until it is done processing.
</I>&gt;<i>
</I>&gt;<i> Not sure if anyone else has had this problem? I
</I>&gt;<i> running centos 2.4.21-27.0.4.ELsmp on a x86_64
</I>&gt;<i> platform. Python 2.4.2 (same error w/2.4.1). Apache
</I>&gt;<i> 2.0.46.
</I>&gt;<i>
</I>&gt;<i> I wasn't sure if this is the right place to post this,
</I>&gt;<i> so I apologize if I should have posted the question
</I>&gt;<i> elsewhere.
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i> Mike
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> __________________________________
</I>&gt;<i> Yahoo! Mail - PC Magazine Editors' Choice 2005
</I>&gt;<i> <A HREF="http://mail.yahoo.com">http://mail.yahoo.com</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20051004/3dac7fc5/attachment.html">http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20051004/3dac7fc5/attachment.html</A>
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019157.html">[mod_python] Session Pickling Error  II - 3.2.2b 
</A></li>
	<LI>Next message: <A HREF="019167.html">[mod_python] Session Pickling Error  II - 3.2.2b
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19159">[ date ]</a>
              <a href="thread.html#19159">[ thread ]</a>
              <a href="subject.html#19159">[ subject ]</a>
              <a href="author.html#19159">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
