<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Re: PyChart into web site error
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20PyChart%20into%20web%20site%20error&In-Reply-To=38b66b83d7cabbc418678a2e93b1cb81%40dscpl.com.au">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019360.html">
   <LINK REL="Next"  HREF="019379.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Re: PyChart into web site error</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>G.M.Dall'Olio</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20PyChart%20into%20web%20site%20error&In-Reply-To=38b66b83d7cabbc418678a2e93b1cb81%40dscpl.com.au"
       TITLE="[mod_python] Re: PyChart into web site error">dalloliogm at gmail.com
       </A><BR>
    <I>Wed Oct 19 18:42:38 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="019360.html">[mod_python] Re: PyChart into web site error
</A></li>
        <LI>Next message: <A HREF="019379.html">[mod_python] Re: PyChart into web site error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19376">[ date ]</a>
              <a href="thread.html#19376">[ thread ]</a>
              <a href="subject.html#19376">[ subject ]</a>
              <a href="author.html#19376">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Graham Dumpleton wrote:

&gt;<i> It isn't mod_python that requires sys.argv, it is pychart that is the 
</I>&gt;<i> problem based
</I>&gt;<i> on the traceback you provide. Ie., pychart has:
</I>&gt;<i>
</I>&gt;<i>   self.title = re.sub(&quot;(.*)\\.py$&quot;, &quot;\\1&quot;, sys.argv[0])
</I>&gt;<i>
</I>&gt;<i> In short, pychart is written so as it can only work on the command line.
</I>&gt;<i>
</I>
Ok, thank you very much!
I've solved the problem of sys.argv. But then I've found another error.

The simplest way to fix this sys.argv's problem is to add it on the same 
module, without using PythonImport or similar:

[python_code]
import sys
sys.argv = ['pychart']

def plot2():       

        data = [[&quot;Jan&quot;, 10], [&quot;Feb&quot;, 22], [&quot;Mar&quot;, 30]]
        ar = area.T(x_coord = category_coord.T(data, 0),
        y_range = (0, None),
        x_axis = axis.X(),
        y_axis = axis.Y())
        ar.add_plot(bar_plot.T(data = data, label = &quot;Something&quot;))
        return ar.draw()
[/python_code]

The problem is that this code returns 'None'; because the graph is drawn 
on stdout, and not returned.
So I'm trying to find a way to take stdout in the script, but I receive 
security errors from apache.
For example, there is a module in PyChart called 'canvas' that enable to 
turn the output to a file-like object:

[python_code]
import sys
sys.argv = ['pychart']

def plot2():

        can_obj = StringIO.StringIO()                # create a 
file-like object with StringIO
        can = canvas.init(can_obj)                      # this is 
equivalent to 'sys.stdout = can_obj', so the output will be written in 
can_obj
        can.set_title('Title1')                                # (By the 
way, this doesn't work in skipping the sys.argv error. See 
$PythonSitePackages/pychart/basecanvas.py at line 70)

        data = [[&quot;Jan&quot;, 10], [&quot;Feb&quot;, 22], [&quot;Mar&quot;, 30]]
        ar = area.T(x_coord = category_coord.T(data, 0),
        y_range = (0, None),
        x_axis = axis.X(),
        y_axis = axis.Y())
        ar.add_plot(bar_plot.T(data = data, label = &quot;Something&quot;))

        ar.draw(can)
        return str(can_obj.read())                       # Try to read 
can_obj. It doesn't work for security problems in Apache. Do I have to 
configure the Directive in a different way?
[/python_code]

The error returned is this:

----------------
*Internal Server Error*

The server encountered an internal error or misconfiguration and was 
unable to complete your request.

Please contact the server administrator, <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">root at localhost</A> and inform them 
of the time the error occurred, and anything you might have done that 
may have caused the error.

More information about this error may be available in the server error log.

------------------------------------------------------------------------
Apache/2.0.54 (Fedora) Server at localhost Port 80
-----------


So, I don't know how to continue now. By the way, do you know of any 
other module that I can use the generate graphs? I have to generate them 
from a simple list written in xml format. Thank you!




-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20051020/f5ce197d/attachment.html">http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20051020/f5ce197d/attachment.html</A>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019360.html">[mod_python] Re: PyChart into web site error
</A></li>
	<LI>Next message: <A HREF="019379.html">[mod_python] Re: PyChart into web site error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19376">[ date ]</a>
              <a href="thread.html#19376">[ thread ]</a>
              <a href="subject.html#19376">[ subject ]</a>
              <a href="author.html#19376">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
