<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] The DOs and DONTs of mod_python: one problem found
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20The%20DOs%20and%20DONTs%20of%20mod_python%3A%20one%20problem%20found&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019337.html">
   <LINK REL="Next"  HREF="019341.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] The DOs and DONTs of mod_python: one problem found</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20The%20DOs%20and%20DONTs%20of%20mod_python%3A%20one%20problem%20found&In-Reply-To="
       TITLE="[mod_python] The DOs and DONTs of mod_python: one problem found">grahamd at dscpl.com.au
       </A><BR>
    <I>Tue Oct 18 21:26:24 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="019337.html">[mod_python] The DOs and DONTs of mod_python: second problem
	maybecornered.
</A></li>
        <LI>Next message: <A HREF="019341.html">[mod_python] The DOs and DONTs of mod_python: one problem found
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19339">[ date ]</a>
              <a href="thread.html#19339">[ thread ]</a>
              <a href="subject.html#19339">[ subject ]</a>
              <a href="author.html#19339">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Nic Ferrier wrote ..
&gt;<i> &quot;Graham Dumpleton&quot; &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">grahamd at dscpl.com.au</A>&gt; writes:
</I>&gt;<i> 
</I>&gt;<i> &gt; Also be aware that the current working directory of Apache is not
</I>&gt;<i> &gt; guaranteed. Thus, when a handler is executed, the current working
</I>&gt;<i> &gt; directory WILL NOT be that of where the handler code resides. It
</I>&gt;<i> &gt; is therefore very important to use absolute pathnames to resources
</I>&gt;<i> &gt; you need to access. If such resource files are located in proximity
</I>&gt;<i> &gt; to the handler code file, best to use something like:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;   import os
</I>&gt;<i> &gt;   __here__ = os.path.dirname(__file__)
</I>&gt;<i> 
</I>&gt;<i> Isn't a better approach to abstract out the fixed file refs and pass
</I>&gt;<i> in docroot as a reference?
</I>&gt;<i> 
</I>&gt;<i>   def handler(http):
</I>&gt;<i>      docroot = http.document_root()
</I>&gt;<i>      do_some_call(docroot)
</I>
Depends on your setup. Other setups may not stick everything under the
true document root, but locate it elsewhere using an Alias directive.
You also have the issue of UserDir accounts, eg. &quot;/~user/some/path&quot;.

Thus, basing it on where the code file is, is sometimes the simplest thing
to do.

The other alternative one can often use is:

  req.hlist.directory

This will be set to the pathname of the directory for which the
PythonHandler directive (or other handler dependent on phase) was
defined. This one is good to use where you have numerous applications
hosted in the one server, each with their own PythonHandler directive.
In essence it gives you a local root for that application.

Graham
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019337.html">[mod_python] The DOs and DONTs of mod_python: second problem
	maybecornered.
</A></li>
	<LI>Next message: <A HREF="019341.html">[mod_python] The DOs and DONTs of mod_python: one problem found
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19339">[ date ]</a>
              <a href="thread.html#19339">[ thread ]</a>
              <a href="subject.html#19339">[ subject ]</a>
              <a href="author.html#19339">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
