<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] strange import behaviour out of the blue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20strange%20import%20behaviour%20out%20of%20the%20blue&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019425.html">
   <LINK REL="Next"  HREF="019427.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] strange import behaviour out of the blue</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20strange%20import%20behaviour%20out%20of%20the%20blue&In-Reply-To="
       TITLE="[mod_python] strange import behaviour out of the blue">grahamd at dscpl.com.au
       </A><BR>
    <I>Thu Oct 27 03:01:24 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="019425.html">[mod_python] strange import behaviour out of the blue
</A></li>
        <LI>Next message: <A HREF="019427.html">[mod_python] Vampire and XML-RPC example service
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19426">[ date ]</a>
              <a href="thread.html#19426">[ thread ]</a>
              <a href="subject.html#19426">[ subject ]</a>
              <a href="author.html#19426">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>What version of mod_python are you using? You didn't by chance upgrade
your mod_python version lately, for example to 3.2 beta?

Also, are you using mod_python.publisher or are you using your own top
level handler? Are you using module reloading on the module the import
occurs in? This could be explicitly using apache.import_module() or by
virtue of PythonAutoReload defaulting to On or being set explicitly On.

There are a lot of known issues with module loading/reloading in
mod_python. Version 3.2 starts to remedy some of these issues, but
even so those changes are really an interim fix until 3.3 tries to fix
all problems properly in some way.

For some background reading you might check out:

  <A HREF="http://www.dscpl.com.au/articles/modpython-003.html">http://www.dscpl.com.au/articles/modpython-003.html</A>

Graham

Kevin J. Smith wrote ..
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> I have been running an app under mod_python for quite some time. In one
</I>&gt;<i> bit
</I>&gt;<i> of the code I do an import of mx.DateTime like so:
</I>&gt;<i> 
</I>&gt;<i> from mx.DateTime import *
</I>&gt;<i> 
</I>&gt;<i> and I later make a call to the function localtime(). I did a restart on
</I>&gt;<i> the
</I>&gt;<i> server a week or so ago and now I am getting an exception being thrown
</I>&gt;<i> saying that localtime doesn't exist! I have tried importing differently,
</I>&gt;<i> directly, calling it directly like mx.DateTime.localtime() but all are
</I>&gt;<i> unsuccessful. I have logged a call to mx.DateTime.__path__ with the
</I>&gt;<i> following result:
</I>&gt;<i> 
</I>&gt;<i> 2005-10-27 02:04:14,347 Domain -1208703296 DEBUG here is the datetime path:
</I>&gt;<i> ['/usr/lib/python2.3/site-packages/mx/DateTime']
</I>&gt;<i> 
</I>&gt;<i> It looks like it is getting the right module, but logging a call to dir(
</I>&gt;<i> mx.DateTime) yields this:
</I>&gt;<i> 
</I>&gt;<i> 2005-10-27 02:04:14,347 Domain -1208703296 DEBUG here is datetime funcs:
</I>&gt;<i> ['DateTime', '__builtins__', '__doc__', '__file__', '__name__'
</I>&gt;<i> , '__path__', 'mxDateTime']
</I>&gt;<i> 
</I>&gt;<i> Where did all the stuff go?!?
</I>&gt;<i> 
</I>&gt;<i> If I go on the command line and do the same I get the same path but the
</I>&gt;<i> following for the dir():
</I>&gt;<i> 
</I>&gt;<i> ['ARPA', 'Age', 'April', 'August', 'Date', 'DateFrom', ... AND MANY, MANY
</I>&gt;<i> OTHERS ... 'localtime', 'mktime', 'mxDateTime', 'mxDateTimeAPI', 'now',
</I>&gt;<i> ...
</I>&gt;<i> etc. etc. ]
</I>&gt;<i> 
</I>&gt;<i> Why is mod_python all of a sudden failing to import the module correctly?
</I>&gt;<i> I
</I>&gt;<i> am really, really stumped because I have been using this app for close
</I>&gt;<i> to
</I>&gt;<i> two years and have never ran into this problem.
</I>&gt;<i> 
</I>&gt;<i> I would be greatful for any insight that anyone can provide as to what
</I>&gt;<i> is
</I>&gt;<i> going on!
</I>&gt;<i> 
</I>&gt;<i> Cheers
</I></PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019425.html">[mod_python] strange import behaviour out of the blue
</A></li>
	<LI>Next message: <A HREF="019427.html">[mod_python] Vampire and XML-RPC example service
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19426">[ date ]</a>
              <a href="thread.html#19426">[ thread ]</a>
              <a href="subject.html#19426">[ subject ]</a>
              <a href="author.html#19426">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
