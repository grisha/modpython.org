<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Smart Card and mod_python and browser pluggins
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Smart%20Card%20and%20mod_python%20and%20browser%20pluggins&In-Reply-To=c298f2d70510190742i63ccb6d4j%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019369.html">
   <LINK REL="Next"  HREF="019371.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Smart Card and mod_python and browser pluggins</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Philippe C. Martin</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Smart%20Card%20and%20mod_python%20and%20browser%20pluggins&In-Reply-To=c298f2d70510190742i63ccb6d4j%40mail.gmail.com"
       TITLE="[mod_python] Smart Card and mod_python and browser pluggins">pmartin at snakecard.com
       </A><BR>
    <I>Wed Oct 19 11:01:05 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="019369.html">[mod_python] Smart Card and mod_python and browser pluggins
</A></li>
        <LI>Next message: <A HREF="019371.html">[mod_python] Smart Card and mod_python and browser pluggins
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19370">[ date ]</a>
              <a href="thread.html#19370">[ thread ]</a>
              <a href="subject.html#19370">[ subject ]</a>
              <a href="author.html#19370">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wednesday 19 October 2005 02:43 pm, Nicolas Lehuen wrote:
&gt;<i> A good book and a lot of reading on the web can't harm you, but your
</I>&gt;<i> problem is not a typical web application design problem.
</I>OK
&gt;<i>
</I>&gt;<i> What you must straighten out is where you card reader resides : on the
</I>&gt;<i> client side or on the server side ? First you asked us questions about
</I>&gt;<i> running the card reader API on the server side, and now you ask us about
</I>&gt;<i> running it on the client side...
</I>&gt;<i>
</I>
&gt;<i> If the card reader is on the client side, as I guess it is, then you're in
</I>&gt;<i> deep shtrouble. How deep depends on whether the client side is closed
</I>&gt;<i> (limited to a single enterprise) or opened (your app will be used by many
</I>&gt;<i> customers).
</I>&gt;<i>
</I>
(****)
Both; I'll get a bit into the smart card issue here:

1) On the server side there is a &quot;Master&quot; card which holds a Master crypto key
2) On the client sides there are &quot;Children&quot; cards each with a &quot;diversified&quot; 
crypto key
3) The point is for the Master card to decide whether such or such protected 
page can be accessed by the client. In order to do so, the following must 
happen:
3.a) the client card sends some card unique data to the master card
3.b) the master card sends a random sequence to the client card
3.c) the client card encrypts the random sequence (with its diversified key) 
and sends the result to the Master card
3.d) the Master card re-generates the client key with the earlier received 
data, uses it to decrypt the encrypted sequence and matches it with the 
earlier sent random sequence. if they match, the requested page access is 
allowed.



&gt;<i> Neither Java or Flash applets can simply access low-level hardware nor call
</I>&gt;<i> a C API. You could try writing a JNI wrapper around your C API and see if a
</I>&gt;<i> signed applet loaded through the Sun JVM (which will have to be installed
</I>&gt;<i> on the clients) can use it, but it will be difficult and non-portable.
</I>I do not know about Flash, but the java VM will forbid me to access a local 
hardware device.

&gt;<i>
</I>&gt;<i> Then, you can go the plugin way but it's even more difficult than the
</I>&gt;<i> applet way. All the more if you want to be multi-browser (as I've
</I>&gt;<i> understood since you wrote about IE and Firefox) and multi-platform. You'll
</I>&gt;<i> have to learn two different plugin APIs, learn COM and ATL, master the
</I>&gt;<i> delicate art of C/C++ multi-platform programming, etc. etc.
</I>Yeap

&gt;<i>
</I>&gt;<i> In both cases, Javascript could be used to provide the glue between the
</I>&gt;<i> applet / plugin and the rest of the HTML app, but tthat's another level of
</I>&gt;<i> crap to handle since supporting scripting from a plugin is not something
</I>&gt;<i> automatically granted.
</I>
OK
&gt;<i>
</I>&gt;<i> Believe me, your problem is far from trivial, and given the level of the
</I>&gt;<i> other questions you asked, it will be way out of your league. You'd better
</I>&gt;<i> seek professional (and expensive) help. I'm sorry to be harsh but that's
</I>&gt;<i> the sad truth.
</I>
Time will tell :-)
&gt;<i>
</I>&gt;<i> If the card reader is on the server side, then it'll be difficult (you'll
</I>&gt;<i> have troubles with the API support for re-entrant calls or multi-threading)
</I>&gt;<i> but far more feasable.
</I>I understood that apache had &quot;global&quot; flags, I need to use something like that 
to keep two client from accessing the card at the same time (as it is not 
feasible for concurent access to an ISO7816 SC)


My question on this NG is on the issue (****) and this back and forth of data 
without any user interaction - but again that is possibly a very trivial 
question.

Regards,

Philippe



&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i> Nicolas
</I>&gt;<i>
</I>&gt;<i> 2005/10/19, Philippe C. Martin &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">pmartin at snakecard.com</A>&gt;:
</I>&gt;<i> &gt; PS: are these basic web dev questions, and I should just go read a book/
</I>&gt;<i> &gt; join
</I>&gt;<i> &gt; a web design newsgroup ?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Thanks
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Philippe
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On Wednesday 19 October 2005 03:03 am, Philippe C. Martin wrote:
</I>&gt;<i> &gt; &gt; Hi,
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; I have &quot;disabled&quot; the xml feature for now to go on with my study.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; I can talk to my smart card on the server side and get the information
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; on
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; the browser.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; On the browser side, I will, most likely, need to write browsers
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; pluggins
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; as it seem the only way (besides stuff like activeX which does not
</I>&gt;<i> &gt; &gt; cover all the necessary platforms :-) to get access to a hardware
</I>&gt;<i> &gt; &gt; device from
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; the
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; browser.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; The current authentication mechanism my cards use requires that data go
</I>&gt;<i> &gt; &gt; back and forth a couple of times between the server (master/mother
</I>&gt;<i> &gt; &gt; card) and the client (child card).
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Also the data exchanged, if possible, must not appear on the display.
</I>&gt;<i> &gt; &gt; So
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; need some type of handler that'll allow that &quot;back and forth/hidden
</I>&gt;<i> &gt; &gt; exchange&quot;.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; My current assumption is that the two pluggins I will attack:
</I>&gt;<i> &gt; &gt; firefox/mozilla and I/E will give me access to Javascript to discuss
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; with
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; mod_python.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; I know a _little_ about Javascript and it always has to do with writing
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; and
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; reading HTML tags (I'm not even sure that's the correct term)
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Is there some common mechanism avaialbe ?
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Is one of the solution to put the data on the page (maybe hidden tags
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; ?).
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; Still there is a need for some type of synchronization between both
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; world.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; I hope my questions make sense.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Thanks and regards,
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Philippe
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; --
</I>&gt;<i> &gt; *************************************
</I>&gt;<i> &gt; Philippe C. Martin
</I>&gt;<i> &gt; SnakeCard, LLC
</I>&gt;<i> &gt; www.snakecard.com &lt;<A HREF="http://www.snakecard.com">http://www.snakecard.com</A>&gt;
</I>&gt;<i> &gt; +1 405 694 8098
</I>&gt;<i> &gt; *************************************
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Mod_python mailing list
</I>&gt;<i> &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>
-- 
*************************************
Philippe C. Martin
SnakeCard, LLC
www.snakecard.com
+1 405 694 8098
*************************************
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019369.html">[mod_python] Smart Card and mod_python and browser pluggins
</A></li>
	<LI>Next message: <A HREF="019371.html">[mod_python] Smart Card and mod_python and browser pluggins
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19370">[ date ]</a>
              <a href="thread.html#19370">[ thread ]</a>
              <a href="subject.html#19370">[ subject ]</a>
              <a href="author.html#19370">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
