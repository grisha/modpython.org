<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Re: PyChart into web site error
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20PyChart%20into%20web%20site%20error&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019358.html">
   <LINK REL="Next"  HREF="019360.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Re: PyChart into web site error</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>G.M.Dall'Olio</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20PyChart%20into%20web%20site%20error&In-Reply-To="
       TITLE="[mod_python] Re: PyChart into web site error">dalloliogm at gmail.com
       </A><BR>
    <I>Wed Oct 19 07:32:48 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="019358.html">R: [mod_python] Serius problem in mod_python-3.2.2b
</A></li>
        <LI>Next message: <A HREF="019360.html">[mod_python] Re: PyChart into web site error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19357">[ date ]</a>
              <a href="thread.html#19357">[ thread ]</a>
              <a href="subject.html#19357">[ subject ]</a>
              <a href="author.html#19357">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all, I'm getting this error from mod_python, when I try to use 
PyChart to create a simple chart:

Traceback (most recent call last):

  File &quot;/usr/lib/python2.4/site-packages/mod_python/apache.py&quot;, line 299, in HandlerDispatch
    result = object(req)

  File &quot;/usr/lib/python2.4/site-packages/mod_python/publisher.py&quot;, line 136, in handler
    result = util.apply_fs_data(object, req.form, req=req)

  File &quot;/usr/lib/python2.4/site-packages/mod_python/util.py&quot;, line 361, in apply_fs_data
    return object(**args)

  File &quot;/home/motif/public_html/Exp/PyChart/index.py&quot;, line 8, in home
    chart = plot1.plot2()

  File &quot;/home/motif/public_html/Exp/PyChart/plot1.py&quot;, line 57, in plot2
    return ar.draw()

  File &quot;/usr/lib/python2.4/site-packages/pychart/area.py&quot;, line 188, in draw
    can = canvas.default_canvas()

  File &quot;/usr/lib/python2.4/site-packages/pychart/canvas.py&quot;, line 73, in default_canvas
    return init(None)

  File &quot;/usr/lib/python2.4/site-packages/pychart/canvas.py&quot;, line 58, in init
    can = pscanvas.T(fname)

  File &quot;/usr/lib/python2.4/site-packages/pychart/pscanvas.py&quot;, line 25, in __init__
    basecanvas.T.__init__(self)

  File &quot;/usr/lib/python2.4/site-packages/pychart/basecanvas.py&quot;, line 70, in __init__
    self.title = re.sub(&quot;(.*)\\.py$&quot;, &quot;\\1&quot;, sys.argv[0])

AttributeError: 'module' object has no attribute 'argv'


I've searched with google and found that this topic has been already 
addressed on this list, but still there is not solution. I've asked to 
the author of the original post and he has resolved using spyce instead 
of mod_python, but since I'm a newbie of mod_python, I would like to 
continue with it.
Since the script works on the command line, probably it may be some 
security setting in mod_python that restricts access to certain modules, 
but I can't understand how to change this.
The python code in plot1.py is this:

from pychart import *
def plot2():

        data = [[&quot;Jan&quot;, 10], [&quot;Feb&quot;, 22], [&quot;Mar&quot;, 30]]

        ar = area.T(x_coord = category_coord.T(data, 0),
        y_range = (0, None),
        x_axis = axis.X(),
        y_axis = axis.Y())
        ar.add_plot(bar_plot.T(data = data, label = &quot;Something&quot;))

        return ar.draw()

and the Directive in Apache configuration is this:

&lt;Directory /home/motif/public_html/&gt;
    AllowOverride FileInfo
    AddHandler mod_python .py
    PythonHandler mod_python.publisher
    PythonDebug On
&lt;/Directory&gt;

It's about a month that I'm trying to resolve this... Can someone give 
me some hints? Why mod_python requires sys.argv? Is this a problem only 
of italian peoples? ;)
Thank you...


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20051019/3bf1534e/attachment.html">http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20051019/3bf1534e/attachment.html</A>
</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019358.html">R: [mod_python] Serius problem in mod_python-3.2.2b
</A></li>
	<LI>Next message: <A HREF="019360.html">[mod_python] Re: PyChart into web site error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19357">[ date ]</a>
              <a href="thread.html#19357">[ thread ]</a>
              <a href="subject.html#19357">[ subject ]</a>
              <a href="author.html#19357">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
