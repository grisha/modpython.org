<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Unable to import modules in subdirs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Unable%20to%20import%20modules%20in%20subdirs&In-Reply-To=e3a291250510280740x3e21d112t9208416df0686e6%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019447.html">
   <LINK REL="Next"  HREF="019445.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Unable to import modules in subdirs</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Unable%20to%20import%20modules%20in%20subdirs&In-Reply-To=e3a291250510280740x3e21d112t9208416df0686e6%40mail.gmail.com"
       TITLE="[mod_python] Unable to import modules in subdirs">grahamd at dscpl.com.au
       </A><BR>
    <I>Fri Oct 28 18:03:50 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="019447.html">[mod_python] Unable to import modules in subdirs
</A></li>
        <LI>Next message: <A HREF="019445.html">[mod_python] Unable to import modules in subdirs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19446">[ date ]</a>
              <a href="thread.html#19446">[ thread ]</a>
              <a href="subject.html#19446">[ subject ]</a>
              <a href="author.html#19446">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 29/10/2005, at 12:40 AM, Brandon N wrote:

&gt;<i> Are you forced, with mod_python, to write all package code within the 
</I>&gt;<i> __init__.py?
</I>
As Jorey explained, that is a general requirement of Python. See:

   <A HREF="http://www.python.org/doc/essays/packages.html">http://www.python.org/doc/essays/packages.html</A>

&gt;<i> I ask because of what you've mentioned a few times now and what I keep 
</I>&gt;<i> encountering.
</I>&gt;<i>
</I>&gt;<i>  I have Vampire up and running, though from a doc it specifies &quot;...The 
</I>&gt;<i> mechanism will also not work where a module is actually a package. Any 
</I>&gt;<i> application specific modules should therefore not be structured as 
</I>&gt;<i> packages...&quot; which I imagine is a restriction coming from mod_python. 
</I>&gt;<i> I have existing code that is already structured in various packages 
</I>&gt;<i> and I'd like to keep it that way.
</I>
The bit of documentation you are referring to is the optionally enabled
feature of Vampire whereby use of the &quot;import&quot; statement will overlay
and make use of vampire.importModule() for a file based module within
the same directory of the document tree or selected other directories.

The vampire.importModule() mechanism only supports file based modules
and not full Python packages because it is not really possible to get
a depth checking module reloading mechanism to work with full Python
package based modules to work correctly.

This doesn't mean you cannot use full Python packages, you just can't
use them with vampire.importModule() and when you use the &quot;import&quot;
statement on modules local to the document tree with the overlay feature
enabled, any local Python package base packages will be ignored. If
however your Python package based module is kept in an area outside of
the document tree somewhere on the Python module search path, as perhaps
defined by the PythonPath directive, then &quot;import&quot; overlay will fall
back to using standard Python __import__ and find your package that way
and import it as Python would normally do.

In summary, put your Python package based module outside your document
tree and use PythonPath to specify where it is. Then use &quot;import&quot;
statement to import it.

&gt;<i>  I'm able to import Admin but Admin.RemoteAdmin fails (as before). The 
</I>&gt;<i> only way I've found around this is via an import of RemoteAdmin within 
</I>&gt;<i> Admin's __init__.py which isn't much of a fix.
</I>&gt;<i>
</I>&gt;<i>  With that klunky method I get the desired:
</I>&gt;<i>  import Admin.RemoteAdmin as RA
</I>&gt;<i>  A = RA.RemoteAdmin( )
</I>&gt;<i>
</I>&gt;<i>  Is there a more pythonic way to accomplish this from within 
</I>&gt;<i> mod_python?
</I>&gt;<i>
</I>&gt;<i> On 10/27/05, Jorey Bump &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">list at joreybump.com</A> &gt; wrote:Brandon N wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; I meant seeing as others had pointed out the concern that one 
</I>&gt;&gt;<i> shouldn't
</I>&gt;&gt;<i> &gt; put .py files under htdocs/ or similar directories for fear that 
</I>&gt;&gt;<i> someone
</I>&gt;&gt;<i> &gt; might find access to one's source files, wholly intact.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Though
</I>&gt;&gt;<i> &gt;&#160;&#160;&gt; In order for
</I>&gt;&gt;<i> &gt;&#160;&#160;&gt; Apache to make this determination, the .py files must be in the 
</I>&gt;&gt;<i> public
</I>&gt;&gt;<i> &gt;&#160;&#160;&gt; directories that Apache is managing.
</I>&gt;&gt;<i> &gt; made it clear for me.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Is that at all a security issue. Or rather, is there a standard 
</I>&gt;&gt;<i> method
</I>&gt;&gt;<i> &gt; of referencing code outside of the public directories?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Yes. You import it, as you would with most Python applications. I use
</I>&gt;&gt;<i> Publisher, and typically have only a few lines of code in my published
</I>&gt;&gt;<i> modules, which act as interfaces to packages in my extended path:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /var/www/vhosts/walamaloo/website/mp/six.py:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &quot;&quot;&quot;
</I>&gt;&gt;<i> Published module used as interface to rules package.
</I>&gt;&gt;<i> &quot;&quot;&quot;
</I>&gt;&gt;<i> # all the code is in this package
</I>&gt;&gt;<i> # /var/www/vhosts/walamaloo/python/bruce/faculty/rules/__init__.py
</I>&gt;&gt;<i> import bruce.faculty.rules
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> def index(req):
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160; &quot;&quot;&quot;
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160; Default function for users.
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160; &quot;&quot;&quot;
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160; return bruce.faculty.rules.four(req)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> def admin(req):
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160; &quot;&quot;&quot;
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160; Requires authentication using proprietary mechanism.
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160; &quot;&quot;&quot;
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160; return bruce.faculty.rules.onethreefiveseven(req)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This is just my preference. You can put all of your code in a 
</I>&gt;&gt;<i> published
</I>&gt;&gt;<i> module, if you want. But this approach allows me to hide sensitive
</I>&gt;&gt;<i> information outside of the DocumentRoot and encourages code reuse. I 
</I>&gt;&gt;<i> can
</I>&gt;&gt;<i> build apps relatively quickly because my extended path is filled with
</I>&gt;&gt;<i>  various utility modules.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> You might find some similarities to PHP's require() or include(), but
</I>&gt;&gt;<i> those are a bit simplistic compared to Python's import mechanism. On 
</I>&gt;&gt;<i> the
</I>&gt;&gt;<i> other hand, I have to restart apache often when developing new
</I>&gt;&gt;<i> applications, so PHP does have have one thing going for it (but only
</I>&gt;&gt;<i> one). :)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Mod_python mailing list
</I>&gt;&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019447.html">[mod_python] Unable to import modules in subdirs
</A></li>
	<LI>Next message: <A HREF="019445.html">[mod_python] Unable to import modules in subdirs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19446">[ date ]</a>
              <a href="thread.html#19446">[ thread ]</a>
              <a href="subject.html#19446">[ subject ]</a>
              <a href="author.html#19446">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
