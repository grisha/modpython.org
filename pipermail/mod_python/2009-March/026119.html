<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] multiple processing of the same python script by the
	handler
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20multiple%20processing%20of%20the%20same%20python%20script%20by%20the%0A%09handler&In-Reply-To=88e286470903290245s1c4c6fccx65e5510bcc846f6%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026116.html">
   <LINK REL="Next"  HREF="026120.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] multiple processing of the same python script by the
	handler</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>David Sfiligoi</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20multiple%20processing%20of%20the%20same%20python%20script%20by%20the%0A%09handler&In-Reply-To=88e286470903290245s1c4c6fccx65e5510bcc846f6%40mail.gmail.com"
       TITLE="[mod_python] multiple processing of the same python script by the
	handler">webmaster at world-vr.com
       </A><BR>
    <I>Sun Mar 29 22:15:31 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="026116.html">[mod_python] multiple processing of the same python script by the
	handler
</A></li>
        <LI>Next message: <A HREF="026120.html">[mod_python] multiple processing of the same python script by the
	handler
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26119">[ date ]</a>
              <a href="thread.html#26119">[ thread ]</a>
              <a href="subject.html#26119">[ subject ]</a>
              <a href="author.html#26119">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Graham,

Yes I agree defining my logger outside the mod python handler was a bad idea.  
Using the req.log_error works of course.  Obviously if I wanted integrate 
this into all the other apps that revolve around those logs, i'd have to 
write a converter or change each apps which parses the log data.

I'd like to understand this a bit better, perhaps I have the wrong basic idea 
on how the python handler works in overall, but if I install the log handler 
in the handler function and delete the log objects before ending, shouldn't 
that take care of the multiple logging issue?  

Or are you saying that each piece of code that should not produce multiple 
entries of the same thing should really be inside a module so I can let 
import_module() take care of it?

Im seeing the same 'multiplicity' issue when I open a socket while in handler 
function. This is really what trigger the question.

Thanks,

David




On Sunday 29 March 2009 05:45:01 am Graham Dumpleton wrote:
&gt;<i>
</I>&gt;<i> If you change a mod_python handler script, it will be automatically
</I>&gt;<i> reloaded. This would be a problem in your code as you installed a log
</I>&gt;<i> handler each time it is loaded into the same process. Having multiple
</I>&gt;<i> instances of the log handler installed would result in the same
</I>&gt;<i> information possibly being logged multiple times.
</I>&gt;<i>
</I>&gt;<i> I would suggest you add inside your handler script:
</I>&gt;<i>
</I>&gt;<i>   req.log_error(&quot;I have been called&quot;)
</I>&gt;<i>
</I>&gt;<i> If that appears twice in the Apache error log file then I would be
</I>&gt;<i> concerned, otherwise I would say the problem is with your use of the
</I>&gt;<i> logging module.
</I>&gt;<i>
</I>&gt;<i> Also read about import_module() in:
</I>&gt;<i>
</I>&gt;<i>   <A HREF="http://www.modpython.org/live/current/doc-html/pyapi-apmeth.html">http://www.modpython.org/live/current/doc-html/pyapi-apmeth.html</A>
</I>&gt;<i>
</I>&gt;<i> as it explains a bit about module reloading and the way to preserve
</I>&gt;<i> global data or avoid stuff which performs additive operations each
</I>&gt;<i> time it is loaded.
</I>&gt;<i>
</I>&gt;<i> Graham
</I>

</PRE>


















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026116.html">[mod_python] multiple processing of the same python script by the
	handler
</A></li>
	<LI>Next message: <A HREF="026120.html">[mod_python] multiple processing of the same python script by the
	handler
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26119">[ date ]</a>
              <a href="thread.html#26119">[ thread ]</a>
              <a href="subject.html#26119">[ subject ]</a>
              <a href="author.html#26119">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
