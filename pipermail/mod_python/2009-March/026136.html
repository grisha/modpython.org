<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Reloading PSP sometimes shows old pages
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Reloading%20PSP%20sometimes%20shows%20old%20pages&In-Reply-To=20090330060156.GM24998%40samus.subfocal.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026133.html">
   <LINK REL="Next"  HREF="026137.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Reloading PSP sometimes shows old pages</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Reloading%20PSP%20sometimes%20shows%20old%20pages&In-Reply-To=20090330060156.GM24998%40samus.subfocal.net"
       TITLE="[mod_python] Reloading PSP sometimes shows old pages">graham.dumpleton at gmail.com
       </A><BR>
    <I>Mon Mar 30 02:09:08 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="026133.html">[mod_python] Reloading PSP sometimes shows old pages
</A></li>
        <LI>Next message: <A HREF="026137.html">[mod_python] Reloading PSP sometimes shows old pages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26136">[ date ]</a>
              <a href="thread.html#26136">[ thread ]</a>
              <a href="subject.html#26136">[ subject ]</a>
              <a href="author.html#26136">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>2009/3/30 Mike Mueller &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mike at subfocal.net</A>&gt;:
&gt;<i> On Mon, Mar 30, 2009 at 04:47:02PM +1100, Graham Dumpleton wrote:
</I>&gt;&gt;<i> 2009/3/30 Mike Mueller &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mike at subfocal.net</A>&gt;:
</I>&gt;&gt;<i> &gt; Good point, here's the exact situation:
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Page1.psp and Page2.psp both include common.psp, using the &lt;%@include %&gt;
</I>&gt;&gt;<i> &gt; syntax. &#160;common.psp has the navigation menu and other common page
</I>&gt;&gt;<i> &gt; contents, in a function called gen_header(). &#160;I was changing the code of
</I>&gt;&gt;<i> &gt; this function, while reloading a window pointed at Page1.psp (or
</I>&gt;&gt;<i> &gt; Page2.psp).
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Yes, the problem occurs with MaxRequestsPerChild 1.
</I>&gt;&gt;<i> &gt; (And I restarted apache after setting this.)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If MaxRequestsPerChild is 1 then it can't be a caching problem within
</I>&gt;&gt;<i> mod_python.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> What is the actual URL path (don't care about host), are you relying
</I>&gt;&gt;<i> on additional path information passed to the request or query string
</I>&gt;&gt;<i> arguments?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Do you connect your browser direct to that Apache instance or do you
</I>&gt;&gt;<i> go via some firewall proxy/cache? Do you have any sort of caching
</I>&gt;&gt;<i> enabled in Apache?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Graham
</I>&gt;<i>
</I>&gt;<i> The URL has no query string, it's just <A HREF="http://host:81/~mike/test/page.psp.">http://host:81/~mike/test/page.psp.</A>
</I>&gt;<i> No POST parameters or anything, a very simple page.
</I>&gt;<i>
</I>&gt;<i> No proxy. &#160;Browser is on the same host as Apache. &#160;As I said in the
</I>&gt;<i> first email, no caching in Apache, as far as I can tell. &#160;(I grepped
</I>&gt;<i> around the config files looking for any caching that might've been
</I>&gt;<i> enabled by default, and came up empty.)
</I>&gt;<i>
</I>&gt;<i> The more I play with it, the more I think it may just be Firefox that
</I>&gt;<i> sucks. &#160;The bouncing-between-versions only happens in it. &#160;I thought
</I>&gt;<i> Opera had it because the first time I loaded my page in Opera, I got an
</I>&gt;<i> old version (several versions prior) of the page. &#160;That was before
</I>&gt;<i> changing MaxRequestsPerChild. &#160;But I haven't seen that in Opera since.
</I>&gt;<i>
</I>&gt;<i> Opera's only problem is that reload doesn't always update to latest...
</I>&gt;<i> sometimes I have to navigate away and come back, or it'll keep showing
</I>&gt;<i> me the version it has loaded. &#160;(I've tried various combos of shift,
</I>&gt;<i> ctrl+shift, etc. while clicking reload).
</I>&gt;<i>
</I>&gt;<i> Also, after a certain length of time (a minute or two?), both browsers
</I>&gt;<i> simply load the latest version, with no weird old versions appearing.
</I>&gt;<i>
</I>&gt;<i> This is frustrating.
</I>
All I can suggest is that log using req.log_error() from the PSP page
and include in the response of the page, both the date/time and the
process ID.

Logging will help to verify if page actually being processed. It being
in the page should make it easier to verify that data is actually
changing or not. If that part of data changes but remainder of page
doesn't then would have to be a caching issue with mod_python and
MaxRequestsPerChild isn't working.

See if that shows any pattern. Logically every request should have a
different date/time and pid if MaxRequestsPerChild is set to 1.

Graham

</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026133.html">[mod_python] Reloading PSP sometimes shows old pages
</A></li>
	<LI>Next message: <A HREF="026137.html">[mod_python] Reloading PSP sometimes shows old pages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26136">[ date ]</a>
              <a href="thread.html#26136">[ thread ]</a>
              <a href="subject.html#26136">[ subject ]</a>
              <a href="author.html#26136">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
