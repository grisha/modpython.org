<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Modpython, Apache, Matplotlib which is responsible
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Modpython%2C%20Apache%2C%20Matplotlib%20which%20is%20responsible&In-Reply-To=1237432168.6165.2.camel%40quirky">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026097.html">
   <LINK REL="Next"  HREF="026099.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Modpython, Apache, Matplotlib which is responsible</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Bart</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Modpython%2C%20Apache%2C%20Matplotlib%20which%20is%20responsible&In-Reply-To=1237432168.6165.2.camel%40quirky"
       TITLE="[mod_python] Modpython, Apache, Matplotlib which is responsible">scarfboy at gmail.com
       </A><BR>
    <I>Thu Mar 19 07:48:25 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="026097.html">[mod_python] Modpython, Apache, Matplotlib which is responsible
</A></li>
        <LI>Next message: <A HREF="026099.html">[mod_python] Modpython, Apache, Matplotlib which is responsible
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26098">[ date ]</a>
              <a href="thread.html#26098">[ thread ]</a>
              <a href="subject.html#26098">[ subject ]</a>
              <a href="author.html#26098">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, Mar 19, 2009 at 4:09 AM, Ron Phelps &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">rphelps at redshift.com</A>&gt; wrote:
&gt;<i> Trying to get Apache to display an graph plotfile.png but get an error
</I>&gt;<i>
</I>&gt;<i> The website has
</I>&gt;<i>
</I>&gt;<i> index.py with links to
</I>&gt;<i>
</I>&gt;<i> page1.py
</I>&gt;<i> page2.py
</I>&gt;<i> ...
</I>&gt;<i> pagen.py
</I>&gt;<i>
</I>&gt;<i> page1.py calls matplotlib to plot some data retrieved from a database.
</I>&gt;<i> Matplotlib can't write to the www-data root (permissions problem) so I
</I>&gt;<i> have it write to /tmp.
</I>&gt;<i> I then copy the file to the www-data root using pexpect.run('cp
</I>&gt;<i> plotfile.png').
</I>&gt;<i> However page1.py fails to display the graph. The error is
</I>&gt;<i> &quot;can't find /page1.py/plotfile.png.&quot; &#160;Page1.py is not a directory
</I>&gt;<i> The file has the owner:group of www-data.
</I>&gt;<i>
</I>&gt;<i> I have verified that the file is in the www-root directory.
</I>&gt;<i>
</I>&gt;<i> Don't know if it is an issue but page1.py has two frames. One which is
</I>&gt;<i> for displaying data.
</I>&gt;<i>
</I>&gt;<i> Is Apache or Mod_python the cause?
</I>

You seem to have used SetHandler, to hand over control to mod_python
unconditionally (for all URLs).
You also seem to be using mod_python.publisher, which is fine
(although it's a pain with relative URLs), but which won't fall back
to serving files, which things like vampire will do.

IIRC, you can just use AddHandler to handle only .py URLs via
mod_python (though I'm not sure, I only used publisher briefly and
it's a good while back now).

A simpler option may be copying those files to a subdirectory and
telling apache &quot;SetHandler none&quot; for it, which gets you basic apache
treatment (in this case for its file serving).


By the way, you can have matplotlib serve things via memory, avoiding
the bother of files completely (for most backends, anyway).


--Bart

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026097.html">[mod_python] Modpython, Apache, Matplotlib which is responsible
</A></li>
	<LI>Next message: <A HREF="026099.html">[mod_python] Modpython, Apache, Matplotlib which is responsible
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26098">[ date ]</a>
              <a href="thread.html#26098">[ thread ]</a>
              <a href="subject.html#26098">[ subject ]</a>
              <a href="author.html#26098">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
