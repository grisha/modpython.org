<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] python_init errors
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20python_init%20errors&In-Reply-To=49BC8605.7010100%40ns.sympatico.ca">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026091.html">
   <LINK REL="Next"  HREF="026093.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] python_init errors</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20python_init%20errors&In-Reply-To=49BC8605.7010100%40ns.sympatico.ca"
       TITLE="[mod_python] python_init errors">graham.dumpleton at gmail.com
       </A><BR>
    <I>Sun Mar 15 01:11:17 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="026091.html">[mod_python] python_init errors
</A></li>
        <LI>Next message: <A HREF="026093.html">[mod_python] python_init errors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26092">[ date ]</a>
              <a href="thread.html#26092">[ thread ]</a>
              <a href="subject.html#26092">[ subject ]</a>
              <a href="author.html#26092">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> 2009/3/15 Jim McDonald &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">jimmcd at ns.sympatico.ca</A>&gt;:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> OK.
</I>&gt;<i>
</I>&gt;<i> The mod_python.publisher problem is like this:
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160; Following the instructions in the mod_python manual, I created a test
</I>&gt;<i> directory under my Apache server root called 'Python' and added to
</I>&gt;<i> httpd.conf these lines:
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160; &lt;Directory &quot;C:/Program Files/Apache Software
</I>&gt;<i> Foundation/Apache2.2/htdocs/Python/&quot;&gt;
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160; AddHandler mod_python .py
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160; PythonHandler mptest
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160; PythonDebug On
</I>&gt;<i> &#160;&#160;&#160; &lt;/Directory&gt;
</I>&gt;<i>
</I>&gt;<i> Mptest.py is, of course, the test script described in the manual.
</I>&gt;<i>
</I>&gt;<i> It worked as described.
</I>&gt;<i>
</I>&gt;<i> I then proceeded to the 'Tutorial' in the manual and substituted
</I>&gt;<i> mod_python.publisher for mptest in httpd.conf. I also added the form.htm
</I>&gt;<i> page to /htdocs and form.py to the Python directory. This resulted in a 404
</I>&gt;<i> error--&quot;The requested URL /Python/form.py/email was not found on this
</I>&gt;<i> server.&quot; Simpler scripts (like mptest.py) in the same directory fail in the
</I>&gt;<i> same way.
</I>&gt;<i>
</I>&gt;<i> No error shows up in Apache's error log.
</I>&gt;<i>
</I>&gt;<i> It's very puzzling to me that Apache is unable to find files that are
</I>&gt;<i> plainly present in the places where it says it can't find them. Any advice?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Post the contents of the form.py file.
</I>&gt;<i>
</I>&gt;<i> Also have a read of:
</I>&gt;<i>
</I>&gt;<i>   <A HREF="http://webpython.codepoint.net/mod_python_tutorial">http://webpython.codepoint.net/mod_python_tutorial</A>
</I>&gt;<i>
</I>&gt;<i> It is a better tutorial.
</I>&gt;<i>
</I>&gt;<i> Graham
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Form.py goes like this:
</I>&gt;<i>
</I>&gt;<i> import smtplib
</I>&gt;<i>
</I>&gt;<i> WEBMASTER = &quot;webmaster&quot;&#160;&#160;&#160; #webmaster email
</I>&gt;<i> SMTP_SERVER = &quot;SIRIUS&quot;&#160;&#160; &#160; # That's the name of my server.
</I>&gt;<i> &#160;&#160;&#160; &#160;&#160; &#160;&#160; &#160;&#160; &#160;&#160; &#160;&#160; &#160;&#160; &#160;&#160; &#160; # The rest of the code is cut-and-pasted
</I>&gt;<i> &#160;&#160;&#160; &#160;&#160; &#160;&#160; &#160;&#160; &#160;&#160; &#160;&#160; &#160;&#160; &#160;&#160; &#160; # out of the tutorial.
</I>&gt;<i> def email(req, name, email, comment):
</I>&gt;<i> &#160;&#160;&#160; if not (name and email and comment):
</I>&gt;<i> &#160;&#160;&#160; &#160;&#160;&#160; return &quot;A required parameter is missing, \
</I>&gt;<i> &#160;&#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; please go back and complete the form.&quot;
</I>&gt;<i> &#160;&#160;&#160; msg = &quot;&quot;&quot;\
</I>&gt;<i> From: %s
</I>&gt;<i> SubjectL feedback
</I>&gt;<i> To: %s
</I>&gt;<i>
</I>&gt;<i> I have the following comment:
</I>&gt;<i>
</I>&gt;<i> %s
</I>&gt;<i>
</I>&gt;<i> Thank you,
</I>&gt;<i>
</I>&gt;<i> %s
</I>&gt;<i>
</I>&gt;<i> &quot;&quot;&quot; % (email, WEBMASTER, comment, name)
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160; # send it out
</I>&gt;<i> &#160;&#160;&#160; conn = smtplib.SMTP(SMTP_SERVER)
</I>&gt;<i> &#160;&#160;&#160; conn.sendmail(email, (WEBMASTER), msg)
</I>&gt;<i> &#160;&#160;&#160; conn.quit()
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160; # provide feedback to the user
</I>&gt;<i> &#160;&#160;&#160; s = &quot;&quot;&quot;\
</I>&gt;<i> &lt;html&gt;
</I>&gt;<i>
</I>&gt;<i> Dear %s,&lt;br&gt;
</I>&gt;<i> Thank you for your kind comments. \n
</I>&gt;<i> We will get back to you shortly.
</I>&gt;<i>
</I>&gt;<i> &lt;/html&gt;&quot;&quot;&quot; % name
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160; return s
</I>&gt;<i>
</I>&gt;<i> It takes input from this web form:
</I>&gt;<i>
</I>&gt;<i> &#160;&lt;html&gt;
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160; Please provide feedback below:
</I>&gt;<i> &#160; &lt;p&gt;
</I>&gt;<i> &#160; &lt;form action=&quot;Python/form.py/email&quot; method=&quot;POST&quot;&gt;
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160; Name:&#160;&#160;&#160; &lt;input type=&quot;text&quot; name=&quot;name&quot;&gt;&lt;br&gt;
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160; Email:&#160;&#160; &lt;input type=&quot;text&quot; name=&quot;email&quot;&gt;&lt;br&gt;
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160; Comment: &lt;textarea name=&quot;comment&quot; rows=4 cols=20&gt;&lt;/textarea&gt;&lt;br&gt;
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160; &lt;input type=&quot;submit&quot;&gt;
</I>&gt;<i>
</I>&gt;<i> &#160; &lt;/form&gt;
</I>&gt;<i> &#160; &lt;/html&gt;
</I>&gt;<i>
</I>&gt;<i> I hope this sheds light.
</I>&gt;<i>
</I>&gt;<i> Thanks very much for your attention to this and for your quick response.
</I>&gt;<i>
</I>&gt;<i> I'll go and have a look now at the tutorial you mentioned.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> This only has a chance of working if HTML file is in too directory of
</I>&gt;<i> server. Where have you put it? If in same directory as .py file,
</I>&gt;<i> change 'action' in form to be just 'form.py/email'.
</I>&gt;<i>
</I>&gt;<i> Please use reply-all and keep followups on the list
</I>&gt;<i>
</I>&gt;<i> It was in the root directory. I moved it to the Python directory, amended
</I>&gt;<i> the path as suggested, and ran it from there. Same result.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Hmmm, is your code file really called 'Form.py' as you said. Your
</I>&gt;<i> action is referencing 'form.py'. This isn't Windows, the case of names
</I>&gt;<i> is important.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Good point. No, it was actually called 'FORM.PY'
</I>&gt;<i>
</I>&gt;<i> Unhappily, though, changing the reference made no difference.
</I>&gt;<i>
</I>&gt;<i> I want to emphasize, though, that I have several python files in the the
</I>&gt;<i> Python directory (which is the subject of the httpd.conf directive), and, as
</I>&gt;<i> long as mod_python.publisher is the handler, Apache can't see any of them.
</I>&gt;<i> Even the charmingly simple mptest.py.
</I>&gt;<i>
</I>&gt;<i> Well, hardly any of them. There's one called index.py that runs when I
</I>&gt;<i> navigate to the Python directory and click on it. Its code looks like this:
</I>&gt;<i> &#160;&#160;&#160; &#160;&#160;&#160; &#160; def index(req):
</I>&gt;<i> &#160;&#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160; return &quot;We are in index()&quot;
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160; &#160;&#160;&#160; &#160; def hello(req):
</I>&gt;<i> &#160;&#160; &#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; return &quot;We are in hello()&quot;
</I>&gt;<i>
</I>&gt;<i> The others not only refuse to run, they give a 404 error. I can't see what
</I>&gt;<i> distinguishes this one from the others in that respect. Do you see anything
</I>&gt;<i> special about it?
</I>
What exactly is the URL in the web browser when you access 'index.py'
and it works?

The 'index.py' file is special. The documentation explains, as it
should about the 'index' function within a file being special.

Graham

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026091.html">[mod_python] python_init errors
</A></li>
	<LI>Next message: <A HREF="026093.html">[mod_python] python_init errors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26092">[ date ]</a>
              <a href="thread.html#26092">[ thread ]</a>
              <a href="subject.html#26092">[ subject ]</a>
              <a href="author.html#26092">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
