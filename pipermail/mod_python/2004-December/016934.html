<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Still displaying source instead of results...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Still%20displaying%20source%20instead%20of%20results...&In-Reply-To=002d01c4d8f0%241b5dcfa0%24d91abfd0%40saffers">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016925.html">
   <LINK REL="Next"  HREF="016942.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Still displaying source instead of results...</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Jorey Bump</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Still%20displaying%20source%20instead%20of%20results...&In-Reply-To=002d01c4d8f0%241b5dcfa0%24d91abfd0%40saffers"
       TITLE="[mod_python] Still displaying source instead of results...">list at joreybump.com
       </A><BR>
    <I>Fri Dec  3 09:27:15 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="016925.html">[mod_python] Still displaying source instead of results...
</A></li>
        <LI>Next message: <A HREF="016942.html">[mod_python] Still displaying source instead of results...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16934">[ date ]</a>
              <a href="thread.html#16934">[ thread ]</a>
              <a href="subject.html#16934">[ subject ]</a>
              <a href="author.html#16934">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Anthony M. Saffer wrote:
&gt;&gt;<i>  &lt;Directory /some/directory/htdocs/test&gt;
</I>&gt;&gt;<i>   AddHandler python-program .py
</I>&gt;&gt;<i>   PythonHandler mptest
</I>&gt;&gt;<i>   PythonDebug On
</I>&gt;&gt;<i>&lt;/Directory&gt;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Okay, I've done that. Now, the request at least seems to actually GET to
</I>&gt;<i> mod_python. But it is telling me it can't find the mptest module. I
</I>&gt;<i> installed mod_python from source. Did I forget to download something that
</I>&gt;<i> was not part of the source package?
</I>
You need to create mptest.py yourself, after the example in the manual.

&gt;&gt;<i>You're not reading the right manual:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  <A HREF="http://www.modpython.org/live/mod_python-2.7.8/doc-html/">http://www.modpython.org/live/mod_python-2.7.8/doc-html/</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> This is the manual I am reading. I've read the entire &quot;configuring apache&quot;
</I>&gt;<i> section and, with the exception of having to recompile apache, I've followed
</I>&gt;<i> it to the best of my understanding. Did I miss something?
</I>
The lines you listed are from the 3.1 manual. You're using 2.7.

&gt;&gt;<i>It's not a script, it's a module. It doesn't execute like a CGI, it gets
</I>&gt;&gt;<i>loaded into the interpreter. Therefore it doesn't need to be made
</I>&gt;&gt;<i>executable, only readable.
</I>&gt;<i> 
</I>&gt;<i> I didn't mean I chmod +x the module. I meant that I did that to the .py
</I>&gt;<i> script (I don't know why, it just was a last ditch effort I suppose). But I
</I>&gt;<i> do understand what you are saying here.
</I>
I know it sounds like quibbling, but any code you run with mod_python is 
imported by python and treated as a module (with its own namespace). 
Therefore, mptest.py becomes the module mptest. This is in contrast with 
a python script that is made executable and run from the command line. 
Such a script has its own interpreter and automatically runs as the 
module __main__.

So, your .py applications are actually modules that will most likely 
share an interpreter and not run as individual scripts. This is very 
important to remember! If you grasp this at the beginning, you will 
spare yourself attempts to force apache and mod_python to behave the way 
you *think* it should.

I mention this to you in anticipation of future roadblocks you may 
encounter, especially if you are approaching this from a php or perl 
standpoint. Give your modules (files ending with .py) unique names 
*everywhere*, because they are imported into python like any other 
module in your path, with the directory names stripped.

Fortunately, there are advanced programming techniques that allow you to 
customize your environment to suit your style, including creating 
packages, and using frameworks.

Grisha's been kind enough to include a lot of technical details in the 
manual, and it merits a thourough reading. But I find that beginners get 
hung up on trying to create their own handlers and customizing apache, 
when the real gem is the Publisher handler. Here is a simple example to 
test your installation and get you started:

In httpd.conf:

&lt;Directory /var/www/documentroot&gt;
    AddHandler python-program .py
    PythonHandler mod_python.publisher
    PythonDebug On
&lt;/Directory&gt;

Create test.py in your DocumentRoot:

def hello(req):
     x = &quot;Hello, world!&quot;
     return x

Restart apache (if you modified httpd.conf), point your browser at:

  <A HREF="http://localhost/test.py/hello">http://localhost/test.py/hello</A>

Note that I use AddHandler, unlike the example in the manual, which uses 
SetHandler. SetHandler forces all files in the directory to be handled 
by the PythonHandler. AddHandler limits this behaviour to a specific 
extension, allowing other types of files to peacefully coexist in the 
same directory:

  <A HREF="http://httpd.apache.org/docs/mod/mod_mime.html">http://httpd.apache.org/docs/mod/mod_mime.html</A>

This information is somewhat biased towards mod_python 2.7 and apache 
1.3. There may be important changes in recent versions. Good luck!

</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016925.html">[mod_python] Still displaying source instead of results...
</A></li>
	<LI>Next message: <A HREF="016942.html">[mod_python] Still displaying source instead of results...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16934">[ date ]</a>
              <a href="thread.html#16934">[ thread ]</a>
              <a href="subject.html#16934">[ subject ]</a>
              <a href="author.html#16934">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
