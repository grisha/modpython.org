<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Newbie Publisher Handler questions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Newbie%20Publisher%20Handler%20questions&In-Reply-To=521C6E5D-5964-11D9-A6F9-000393798102%40berkeley.edu">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017021.html">
   <LINK REL="Next"  HREF="017023.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Newbie Publisher Handler questions</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Jorey Bump</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Newbie%20Publisher%20Handler%20questions&In-Reply-To=521C6E5D-5964-11D9-A6F9-000393798102%40berkeley.edu"
       TITLE="[mod_python] Newbie Publisher Handler questions">list at joreybump.com
       </A><BR>
    <I>Wed Dec 29 11:20:56 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="017021.html">[mod_python] Newbie Publisher Handler questions
</A></li>
        <LI>Next message: <A HREF="017023.html">[mod_python] Python2.4 and expat Info
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17022">[ date ]</a>
              <a href="thread.html#17022">[ thread ]</a>
              <a href="subject.html#17022">[ subject ]</a>
              <a href="author.html#17022">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>John Ward wrote:

&gt;<i> 1. With mod_python, do I no longer have to worry about limiting the path 
</I>&gt;<i> available to the script?  (I do my best to maintain an appropriate level 
</I>&gt;<i> of paranoia, so one thing I'd like to learn is what security mod_python 
</I>&gt;<i> handles for me and what security I need to write into my scripts.)
</I>
Frankly, I'd leave the path alone. Depending on your environment, it 
could affect other users or applications. For example, if I set the 
environment path using mod_python in a virtual host, it also changes the 
path for perl CGI scripts, where the correct path is more likely to 
matter. It may seem fine in an environment you control, but makes your 
application less portable. If you must use popen, set up a variable that 
contains the complete path to your binary,  and change that when you 
deploy it somewhere else. With that said, your mod_python applications 
will have the same rights as the apache user, so plan accordingly.

For mod_python newbies, here's a simple module to show your path, using 
the publisher handler:

# path.py
import os
	
def show(req):
	# uncomment to set path
         # os.environ['PATH'] = '/usr/bin:/bin'
         return os.environ['PATH']

Access it via <A HREF="http://host/path.py/show">http://host/path.py/show</A>

&gt;<i> 2. How do mod_python programmers typically handle sanitizing form input?
</I>
For me, this depends on the intended use of the data, and also partly on 
the version of python. For simple validation, I might turn the input 
into a list and check the members for illegal characters. The sets 
module introduced in python 2.3 is now a built-in in 2.4, making this a 
trivial task. But if your application might run under older versions of 
python, you'll have to use something a bit more universal.

For database input, I use placeholders, somewhere along these lines:

     query = &quot;&quot;&quot;INSERT INTO users ( name, quest ) VALUES ( %s, %s )&quot;&quot;&quot;
     cursor = dbh.cursor()
     cursor.execute(query, (req.formdata['name'], req.formdata['quest']))

Note that this is *not* typical python string replacement. This 
construct allows you to send any VALUE string to the database, with 
necessary escapes inserted behind the scenes. It's very handy. You are 
encouraged to find out more about python and placeholders for your db 
and test it on your platform (I found a lot of misleading info, but the 
form above works best for me when using MySQLdb).

&gt;<i> 3. Assuming one has an SMTP server listening on localhost, what is the 
</I>&gt;<i> recommended way to add messages to the mail queue?
</I>
I prefer smtplib because it's portable, powerful, and offers excellent 
error handling. Of course, if you want the message queued instead of 
sent immediately, you'll need to configure your SMTP daemon to do so. 
You could do this for the MSA on port 587 to avoid running a separate 
instance.

&gt;<i> 4. When writing CGI scripts in Perl using CGI.pm, one has the option of 
</I>&gt;<i> limiting the size of POSTs by setting a value for the '$MAX_POST' 
</I>&gt;<i> variable.  Is there a way to do this using mod_python?  Or is this even 
</I>&gt;<i> something I need to worry about?
</I>
I haven't run into a need for this, but I do have some textarea form 
inputs that I'm concerned about, so I'd be interested if this is 
possible, as well.


</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017021.html">[mod_python] Newbie Publisher Handler questions
</A></li>
	<LI>Next message: <A HREF="017023.html">[mod_python] Python2.4 and expat Info
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17022">[ date ]</a>
              <a href="thread.html#17022">[ thread ]</a>
              <a href="subject.html#17022">[ subject ]</a>
              <a href="author.html#17022">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
