<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Problems with Apache locking up when passing session
 variables in mod_python
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Problems%20with%20Apache%20locking%20up%20when%20passing%20session%0A%20variables%20in%20mod_python&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015573.html">
   <LINK REL="Next"  HREF="015582.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Problems with Apache locking up when passing session
 variables in mod_python</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Mark Jordan</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Problems%20with%20Apache%20locking%20up%20when%20passing%20session%0A%20variables%20in%20mod_python&In-Reply-To="
       TITLE="[mod_python] Problems with Apache locking up when passing session
 variables in mod_python">mjordan at nngov.com
       </A><BR>
    <I>Wed May 12 16:53:52 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="015573.html">[mod_python] index.py
</A></li>
        <LI>Next message: <A HREF="015582.html">[mod_python] Bug in mod_python previously reported
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15578">[ date ]</a>
              <a href="thread.html#15578">[ thread ]</a>
              <a href="subject.html#15578">[ subject ]</a>
              <a href="author.html#15578">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>We are building a web based application using Apache 2.0.48, mod_python 
3.1.2b, Python 2.3.2. and are having problems setting/passing session 
variables in mod_python .  It seems like a common enough task, to pass 
login info from one screen to another by means of a session variable.  
But we can't seem to get it working.  I have scoured the list and don't 
see a complete sample of code for setting, passing and outputting/using 
session variables for something like this.

We have a form on a page called &quot;login.htm&quot;  which passes the form input 
(a user name and password) to a psp page (&quot;contents.psp&quot;) with the 
statement:

  &lt;FORM NAME=&quot;electForm&quot; METHOD=&quot;POST&quot; ACTION=&quot;psp/contents2.psp&quot;&gt;

This is just one simple text box and a password type input box (at this 
point there is not even any validation or security going on)

The psp page &quot;contents.psp&quot; begins with:

&lt;%
#ESTABLISH SESSION VARIABLES
#-----------------------------------------------------------------
req.session = Session.Session(req)
req.session['userid'] = form.getfirst(&quot;login&quot;)
req.session['userPass'] = form.getfirst(&quot;password&quot;)
req.session['dbUser'] = &quot;username&quot;
req.session['dbPass'] = &quot;passwordtxt&quot;
req.session.save()
#req.session.unlock()
#-----------------------------------------------------------------
%&gt;

&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0 Transitional//EN&quot; 
&quot;<A HREF="http://www.w3.org/TR/REC-html40/loose.dtd&quot;">http://www.w3.org/TR/REC-html40/loose.dtd&quot;</A>&gt;
&lt;HTML&gt;
&lt;HEAD&gt;

Then after the head, body, div stuff at the top of the html in the psp 
page, we are outputting the two passed variable as a check

&lt;%
req.write(req.session['userid'])
req.write(req.session['userPass'])
%&gt;

Althought this works the first two or three times, even after completly 
stopping the Apache server and restarting it, after the first two or 
three times the Apache server locks up.  It keeps polling and never 
returns.  Even closing the browser and restarting the browser or 
entirely different brower doesn't help. 
Only a complete restart of the Apache server will correct it and then we 
are back where we started.

Any assistance would be greatly appreciated!   We are trying to get some 
sample government applications off the ground to prove to the existing 
programming staff that the Opensource community is a viable alternative 
to M$ commercial products.  So all sticking points are viewed as another 
black mark against Python/Apache etc. 

Thanks
Mark
</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015573.html">[mod_python] index.py
</A></li>
	<LI>Next message: <A HREF="015582.html">[mod_python] Bug in mod_python previously reported
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15578">[ date ]</a>
              <a href="thread.html#15578">[ thread ]</a>
              <a href="subject.html#15578">[ subject ]</a>
              <a href="author.html#15578">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
