<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Problem with mapping URIs to filesystem/Python
	modules
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Problem%20with%20mapping%20URIs%20to%20filesystem/Python%0A%09modules&In-Reply-To=1084370279.410.3.camel%40ack.dwerg.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015570.html">
   <LINK REL="Next"  HREF="015580.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Problem with mapping URIs to filesystem/Python
	modules</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Fabian Fagerholm</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Problem%20with%20mapping%20URIs%20to%20filesystem/Python%0A%09modules&In-Reply-To=1084370279.410.3.camel%40ack.dwerg.net"
       TITLE="[mod_python] Problem with mapping URIs to filesystem/Python
	modules">fabbe at paniq.net
       </A><BR>
    <I>Wed May 12 23:55:58 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="015570.html">[mod_python] Problem with mapping URIs to filesystem/Python
	modules
</A></li>
        <LI>Next message: <A HREF="015580.html">[mod_python] Problem with mapping URIs to filesystem/Python
	modules
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15579">[ date ]</a>
              <a href="thread.html#15579">[ thread ]</a>
              <a href="subject.html#15579">[ subject ]</a>
              <a href="author.html#15579">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, 2004-05-12 at 16:57, Manfred Stienstra wrote:
&gt;<i> You can let python handle all the request on a path:
</I>&gt;<i> 
</I>&gt;<i> SetHandler python-program
</I>&gt;<i> PythonHandler handler
</I>&gt;<i> 
</I>&gt;<i> This will call handler.py - handler(req) for every request on this path.
</I>&gt;<i> If you don't want to call your handler handler:
</I>&gt;<i> 
</I>&gt;<i> PythonHandler myhandlerfilename:myhandlerfunctionname
</I>
Ok, this works nicely, and I can override it for subdirectories by their
own .htaccess files, I presume.

&gt;<i> If you still want to serve real files from this path, just return
</I>&gt;<i> apache.DECLINED from your handler and apache will retry the request with
</I>&gt;<i> the core handler.
</I>
This doesn't seem to work. It does work with AddHandler, but if I use
SetHandler and return apache.DECLINED, then I only get a 404 not found
error. I presume this is because SetHandler overrides all other handlers
and there are no other handlers left to use after that. But AddHandler
had the problem described earlier.

So this is not yet the complete solution. To repeat the goal:
      * I want to hide mymodule.py in the URI.
      * I want requests to be handled by a handler function in
        mymodule.py.
      * I want to be able to use the specified path as a parameter
        (req.path_info) to the handler function.
      * When the path matches a directory, I want the contents of that
        directory to be displayed (either by normal processing or by
        another python module located in that directory).

Using the publisher handler works, as Grisha suggested. I'll summarize
it below for reference.

.htaccess:
SetHandler mod_python
PythonHandler mod_python.publisher

index.py:
def index (req):
  return &quot;We are in index()\npath_info: &quot;+ repr(req.path_info)

Any directory will then be assumed to contain an index.py with a
function named index(). If that is not desired, it can be turned off by
placing a .htaccess file in that directory saying &quot;SetHandler None&quot;.
Normal processing will then apply to that directory. Other functions can
be called by naming them in the URI, and they can be given &quot;parameters&quot;
by appending them to the URI. This way, the user will never know the
difference between a &quot;real&quot; directory and output produced by a python
script.

So, having that sorted out I can proceed with my experiments. Thanks for
the suggestions! :)

Cheers,
-- 
Fabian Fagerholm &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">fabbe at paniq.net</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
Url : <A HREF="http://modpython.org/pipermail/mod_python/attachments/20040512/a21f028d/attachment.bin">http://modpython.org/pipermail/mod_python/attachments/20040512/a21f028d/attachment.bin</A>
</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015570.html">[mod_python] Problem with mapping URIs to filesystem/Python
	modules
</A></li>
	<LI>Next message: <A HREF="015580.html">[mod_python] Problem with mapping URIs to filesystem/Python
	modules
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15579">[ date ]</a>
              <a href="thread.html#15579">[ thread ]</a>
              <a href="subject.html#15579">[ subject ]</a>
              <a href="author.html#15579">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
