<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Persistent Database and Publisher problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Persistent%20Database%20and%20Publisher%20problem&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005933.html">
   <LINK REL="Next"  HREF="005938.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Persistent Database and Publisher problem</H1>
    <B>Mike Verdone</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Persistent%20Database%20and%20Publisher%20problem&In-Reply-To="
       TITLE="[mod_python] Persistent Database and Publisher problem">mike_verdone at shaw.ca
       </A><BR>
    <I>Wed Jan  8 18:04:11 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="005933.html">[mod_python] installing apache,mod_python and python
</A></li>
        <LI>Next message: <A HREF="005938.html">[mod_python] Persistent Database and Publisher problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5935">[ date ]</a>
              <a href="thread.html#5935">[ thread ]</a>
              <a href="subject.html#5935">[ subject ]</a>
              <a href="author.html#5935">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<table border=0 width="100%"><tr><td>
<!--beginarticle-->
<PRE>Hi,

I'm having some trouble using the persistent database example code from the 
FAQ and the publisher handler. The problem is that the persistent connection 
is not actually persistent. Instead, it connects on every request, and does 
not disconnect.

I put the database code in a file _database.py, and then I put all the 
database functions into a file _dbcommands.py. The problem is, how do I 
import _database in _dbcomands?

If I use:

import _database

then it make a new connection on every request. I figure that the correct way 
to do it is using the PythonImport apache directive, but the problem now is 
that I can't see the imported module when running through the publisher 
handler. i.e. this doesn't resolve without import _database:

_database.run_sql(...)

I ensured that that _database is being imported by the interpreter (8 
connections are made before any requests), and the module is imported in the 
correctly named interpreter. I suspect the module is &quot;blocked&quot; by 
publisher-handler. Is that the problem?

Any recommendations on how to get around this?

Mike.


</PRE>
<!--endarticle-->
</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005933.html">[mod_python] installing apache,mod_python and python
</A></li>
	<LI>Next message: <A HREF="005938.html">[mod_python] Persistent Database and Publisher problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5935">[ date ]</a>
              <a href="thread.html#5935">[ thread ]</a>
              <a href="subject.html#5935">[ subject ]</a>
              <a href="author.html#5935">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
