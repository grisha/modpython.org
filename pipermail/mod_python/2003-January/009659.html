<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Database Help
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Database%20Help&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009658.html">
   <LINK REL="Next"  HREF="009655.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
<table border=0 width="100%"><tr><td valign="top">
   <H1>[mod_python] Database Help</H1>
    <B>Yandle, Hans</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Database%20Help&In-Reply-To="
       TITLE="[mod_python] Database Help">Hans.Yandle at cingular.com
       </A><BR>
    <I>Tue Jan 14 13:57:00 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="009658.html">[mod_python] Database Help
</A></li>
        <LI>Next message: <A HREF="009655.html">[mod_python] Query about FieldStorage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9659">[ date ]</a>
              <a href="thread.html#9659">[ thread ]</a>
              <a href="subject.html#9659">[ subject ]</a>
              <a href="author.html#9659">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Well, I do not have any experience with Oracle db connections. With MS ODBC
connections using the win32 extensions, I have had to issue commit() then
close() for information to take affect. I have used MySQL dbi and PySQLite
with no problems with just commits only. When you run your database update
script, test and see if it is actually committed the data before the
termination of the python script. To my knowledge when a python script
finishes the variables are cleaned up and connections closed. Perhaps the
termination of the python script is causing the buffers or information to be
committed. Maybe a question to the Oracle python dbi maintainer/group might
help.

-----Original Message-----
From: Sean Abrahams [mailto:<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">sa at sfsu.edu</A>]
Sent: Tuesday, January 14, 2003 1:44 PM
To: Yandle, Hans; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython.org</A>
Subject: Re[2]: [mod_python] Database Help


Thanks for all the replies, but I am indeed committing my statement.
Remember I said it worked when not using mod_python =).

Here's my dbDo function:

def dbDo(db, sql):
    dbCon = dbConnect(db)
    dbCursor = dbCon.cursor()

    dbCursor.execute(sql)
    dbCon.commit()

None of this really makes sense because the code seems to run fine,
giving back no errors. It doesn't even work when I tell it to
explicitly run commit via a sql statement.

I'm using cx_Oracle module to connect to an Oracle 8.1.6 database.

In mod_python must you first disconnect from a database, before
connecting to another one, within the same script?

Thanks for the help.

--Sean
    
Tuesday, January 14, 2003, 6:07:32 AM, you wrote:

YH&gt; I am going to make a simple guess here. I might be wrong but I have been
YH&gt; caught off guard when I forget to issue a commit statement. Maybe the
YH&gt; database connections on the updates/inserts are not automatically
YH&gt; committing.

YH&gt; -----Original Message-----
YH&gt; From: Sean Abrahams [mailto:<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">sa at sfsu.edu</A>]
YH&gt; Sent: Monday, January 13, 2003 9:11 PM
YH&gt; To: <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython.org</A>
YH&gt; Subject: [mod_python] Database Help


YH&gt; I'm implementing mod_python and everything is working fine, until I
YH&gt; try to pass an UPDATE sql statement to a database.

YH&gt; I'm grabbing info from one database, and inserting/updating into
YH&gt; another database.

YH&gt; When grabbing, I call upon my dbSelect(db, keys, sql, rows) function,
YH&gt; which connects to a specified database (db) and selects the info.
YH&gt; Works great.

YH&gt; To update/insert I call upon my dbDo(db, sql) function. This function
YH&gt; connects to the specified database (db) and runs the sql. Python wise
YH&gt; everything seems to work fine. I call the dbDo and nothing appears to
YH&gt; go wrong. Except when I look at the data in the db, it wasn't updated.

YH&gt; All of this works fine from the interpreter, so I'm thinking it may
YH&gt; deal with the way mod_python handles processes and dbconnections, of
YH&gt; which I know very little of.

YH&gt; Thus, does connecting to two different databases, right after one
YH&gt; another, cause a problem in mod_python? I'm supposing I must change my
YH&gt; dbConnect() function to take this into consideration due to the way
YH&gt; mod_python/apache function.

YH&gt; Some ideas? I want to learn!

YH&gt; Thanks,
YH&gt; --Sean

YH&gt; Running:
YH&gt; Apache/2.0.43 (Debian GNU/Linux) DAV/2 mod_python/3.0.1 Python/2.2.1
YH&gt; cx_Oracle

YH&gt; _______________________________________________
YH&gt; Mod_python mailing list
YH&gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
YH&gt; <A HREF="http://www.modpython.org/mailman/listinfo/mod_python">http://www.modpython.org/mailman/listinfo/mod_python</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://mailman.modpython.org/pipermail/mod_python/attachments/20030114/a35ad92e/attachment-0002.htm">http://mailman.modpython.org/pipermail/mod_python/attachments/20030114/a35ad92e/attachment-0002.htm</A>
</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009658.html">[mod_python] Database Help
</A></li>
	<LI>Next message: <A HREF="009655.html">[mod_python] Query about FieldStorage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9659">[ date ]</a>
              <a href="thread.html#9659">[ thread ]</a>
              <a href="subject.html#9659">[ subject ]</a>
              <a href="author.html#9659">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
