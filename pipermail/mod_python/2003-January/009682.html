<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Query about client server interaction 
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Query%20about%20client%20server%20interaction%20&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009684.html">
   <LINK REL="Next"  HREF="009685.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
<table border=0 width="100%"><tr><td valign="top">
   <H1>[mod_python] Query about client server interaction </H1>
    <B>Gregory Bond</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Query%20about%20client%20server%20interaction%20&In-Reply-To="
       TITLE="[mod_python] Query about client server interaction ">gnb at itga.com.au
       </A><BR>
    <I>Tue Jan 21 11:28:27 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="009684.html">[mod_python] Wierd problem with API version mismatch 
</A></li>
        <LI>Next message: <A HREF="009685.html">[mod_python] calla function from form and via link
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9682">[ date ]</a>
              <a href="thread.html#9682">[ thread ]</a>
              <a href="subject.html#9682">[ subject ]</a>
              <a href="author.html#9682">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> This is both a bit of understanding mod_python and also how CGI scripts in
</I>&gt;<i> general work, basically I have a long running query which can take up to a
</I>&gt;<i> minute or so to process, I want to return a page to the User immediately
</I>&gt;<i> saying what it is doing, ideally I would like this page to get updated
</I>&gt;<i> during the processing of the other operation. 
</I>
Along with the other responses, I'd like to offer an alternative solution 
(that may or may not work, depending on how the job is structured).

Anything you send to the client gets sent straight away, so you can use this 
fact to write on-going status messages.  Something like this:

import time
from mod_python import apache

def handler(req):
    req.content_type = &quot;text/html&quot;
    req.write('''&lt;html&gt;
    &lt;head&gt;&lt;title&gt;Example Delay Code&lt;/title&gt;&lt;/head&gt;
    &lt;body&gt;
    Please wait.  This could take a long time!!!!
    &lt;ul&gt;
    ''')
    for i in range(20):
        time.sleep(2)
        req.write(&quot;&lt;li&gt; Still waiting.... %d\n&quot; % i)
    req.write('&lt;/ul&gt;\nAll Done!\n&lt;/body&gt;&lt;/html&gt;')
    
    return apache.OK

(I've added this as FAQ 3.7.   Someone with more experience in redirects or 
refresh tags can add some alternatives.).



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009684.html">[mod_python] Wierd problem with API version mismatch 
</A></li>
	<LI>Next message: <A HREF="009685.html">[mod_python] calla function from form and via link
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9682">[ date ]</a>
              <a href="thread.html#9682">[ thread ]</a>
              <a href="subject.html#9682">[ subject ]</a>
              <a href="author.html#9682">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
