<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Query about client server interaction 
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Query%20about%20client%20server%20interaction%20&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013385.html">
   <LINK REL="Next"  HREF="013386.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Query about client server interaction </H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Tim Parker (UK)</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Query%20about%20client%20server%20interaction%20&In-Reply-To="
       TITLE="[mod_python] Query about client server interaction ">tim.parker at intec-telecom-systems.com
       </A><BR>
    <I>Wed Jan 22 09:54:10 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="013385.html">[mod_python] [error] make_obcallback: could not import mod_python.apache
</A></li>
        <LI>Next message: <A HREF="013386.html">[mod_python] Query about client server interaction 
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13392">[ date ]</a>
              <a href="thread.html#13392">[ thread ]</a>
              <a href="subject.html#13392">[ subject ]</a>
              <a href="author.html#13392">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks for this - it seems to work except it takes a few seconds to display
the page - and when it does it draws it with several of the &quot;Still waiting&quot;
lines.  After this it then continues as I would expect it to but it seems to
wait a few seconds - well 5 times round the for loop before output the HTML
page to the Client.

Why is this, I would expect it to draw the web page almost immediately with
the Please wait This could take a long time!!!! Line and then draw in the
remaining lines as the script processes.  But it seems to want to cache the
first few lines before drawing them on the client.

Is this some server/client setting or something that needs to be specified
in the Headers so that there is no caching?

Thanks again
Tim.

-----Original Message-----
From: Gregory Bond [mailto:<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">gnb at itga.com.au</A>]
Sent: 22 January 2003 03:38
To: Tim Parker (UK)
Cc: '<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython.org</A>'
Subject: Re: [mod_python] Query about client server interaction 

&gt;<i> I am just wondering if it is possible to do this with the publisher
</I>handler
&gt;<i> - as that is what I am using at present as I have several python modules
</I>and
&gt;<i> functions that I need to use?
</I>
This seems to work:

File ltest.py:

        import time
        from mod_python import apache

        def longtime(req):
            req.content_type = &quot;text/html&quot;
            req.write('''&lt;html&gt;
            &lt;head&gt;&lt;title&gt;Example Delay Code&lt;/title&gt;&lt;/head&gt;
            &lt;body&gt;
            Please wait.  This could take a long time!!!!
            &lt;ul&gt;
            ''')
            for i in range(20):
                time.sleep(2)
                req.write(&quot;&lt;li&gt; Still waiting.... %d\n&quot; % i)
            return '&lt;/ul&gt;\nAll Done!\n&lt;/body&gt;&lt;/html&gt;'

with a URL like .../ltest.py/longtime and a config like
        &lt;Files ltest.py&gt;
                PythonHandler   mod_python.publisher
        &lt;/Files&gt;

Again, this won't work if your long-running job (here represented by
time.sleep() calls) is not able to stop and do a 'req.write()' every so
often!


This e-mail and any attachments are confidential and may also be privileged and/or copyright 
material of Intec Telecom Systems PLC (or its affiliated companies).  If you are not an 
intended or authorised recipient of this e-mail or have received it in error, please delete 
it immediately and notify the sender by e-mail.  In such a case, reading, reproducing, 
printing or further dissemination of this e-mail is strictly prohibited and may be unlawful. 
Intec Telecom Systems PLC. does not represent or warrant that an attachment hereto is free 
from computer viruses or other defects. The opinions expressed in this e-mail and any 
attachments may be those of the author and are not necessarily those of Intec Telecom 
Systems PLC. 

This footnote also confirms that this email message has been swept by
MIMEsweeper for the presence of computer viruses.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://mailman.modpython.org/pipermail/mod_python/attachments/20030122/3ee38cd6/attachment-0003.htm">http://mailman.modpython.org/pipermail/mod_python/attachments/20030122/3ee38cd6/attachment-0003.htm</A>
</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013385.html">[mod_python] [error] make_obcallback: could not import mod_python.apache
</A></li>
	<LI>Next message: <A HREF="013386.html">[mod_python] Query about client server interaction 
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13392">[ date ]</a>
              <a href="thread.html#13392">[ thread ]</a>
              <a href="subject.html#13392">[ subject ]</a>
              <a href="author.html#13392">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
