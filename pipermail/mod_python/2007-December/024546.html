<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] How to read raw post in mod_python?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20How%20to%20read%20raw%20post%20in%20mod_python%3F&In-Reply-To=ddb7d9250712081242q650afcaduc7d295b9c770ea0%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024545.html">
   <LINK REL="Next"  HREF="024547.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] How to read raw post in mod_python?</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20How%20to%20read%20raw%20post%20in%20mod_python%3F&In-Reply-To=ddb7d9250712081242q650afcaduc7d295b9c770ea0%40mail.gmail.com"
       TITLE="[mod_python] How to read raw post in mod_python?">graham.dumpleton at gmail.com
       </A><BR>
    <I>Sat Dec  8 15:54:33 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="024545.html">[mod_python] How to read raw post in mod_python?
</A></li>
        <LI>Next message: <A HREF="024547.html">[mod_python] How to read raw post in mod_python?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24546">[ date ]</a>
              <a href="thread.html#24546">[ thread ]</a>
              <a href="subject.html#24546">[ subject ]</a>
              <a href="author.html#24546">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>When using mod_python.publisher the POST data is always consumed. It
does this as by definition publisher always parses content for form
parameters. That is does this even when content type isn't form data
is arguable wrong. See:

  <A HREF="https://issues.apache.org/jira/browse/MODPYTHON-29">https://issues.apache.org/jira/browse/MODPYTHON-29</A>

You would need to add an override for the specific URL in question and
route it to a basic mod_python handler and then you have full control
and thus full access to content of request.

Graham

On 09/12/2007, Marco Lopes &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mlopes at orangeway.org</A>&gt; wrote:
&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> I'm giving my first steps in mod_python and I seem to be having some
</I>&gt;<i> problems to get the unprocessed post data.
</I>&gt;<i> I've been trying req.read() but the return result is empty, I tried it
</I>&gt;<i> without parameters, with the content-length and with some value higher than
</I>&gt;<i> the content-length but it still returned empty.
</I>&gt;<i> The content-length in the req.headers_in come with a non-zero value but the
</I>&gt;<i> variable req.clength is always 0.
</I>&gt;<i>
</I>&gt;<i> First I used the following mod_python apache configuration:
</I>&gt;<i>
</I>&gt;<i>     &lt;Directory /var/www/test&gt;
</I>&gt;<i>             AllowOverride AuthConfig
</I>&gt;<i>             Order allow,deny
</I>&gt;<i>             Allow from all
</I>&gt;<i>
</I>&gt;<i>             DirectoryIndex index.py
</I>&gt;<i>             SetHandler mod_python
</I>&gt;<i>             PythonHandler mod_python.publisher
</I>&gt;<i>             PythonDebug On
</I>&gt;<i>     &lt;/Directory&gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Then I found something in the mailling list about a problem that could occur
</I>&gt;<i> with that configuration that could cause strange behaviour leading to empty
</I>&gt;<i> or corrupt data in GET and/or POST data (because of not using the index.py
</I>&gt;<i> file name, this could be an old problem alredy addressed but I can't
</I>&gt;<i> remember the message date) and I tried the following configuration:
</I>&gt;<i>
</I>&gt;<i>     &lt;Directory /var/www/test&gt;
</I>&gt;<i>             AllowOverride AuthConfig
</I>&gt;<i>             Order allow,deny
</I>&gt;<i>             Allow from all
</I>&gt;<i>
</I>&gt;<i>             AddHandler mod_python .py
</I>&gt;<i>             PythonHandler mod_python.publisher
</I>&gt;<i>             PythonDebug On
</I>&gt;<i>     &lt;/Directory&gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> The req.read() call continued to return empty.
</I>&gt;<i> I checked the req.form and the POST is there already processed, I'm thinking
</I>&gt;<i> that if I could find a way to tell mod_python not to process the post I
</I>&gt;<i> could then use req.read() to get the raw post.
</I>&gt;<i>
</I>&gt;<i> Can anyone give-me any information that could help me with this?
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i> Marco Lopes
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i>
</I>&gt;<i>
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024545.html">[mod_python] How to read raw post in mod_python?
</A></li>
	<LI>Next message: <A HREF="024547.html">[mod_python] How to read raw post in mod_python?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24546">[ date ]</a>
              <a href="thread.html#24546">[ thread ]</a>
              <a href="subject.html#24546">[ subject ]</a>
              <a href="author.html#24546">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
