<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Session Hanging Problems
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Session%20Hanging%20Problems&In-Reply-To=21e523c20712040148n74cfcb86u996c34f0c0badfc%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024534.html">
   <LINK REL="Next"  HREF="024536.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Session Hanging Problems</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Harish Agarwal</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Session%20Hanging%20Problems&In-Reply-To=21e523c20712040148n74cfcb86u996c34f0c0badfc%40mail.gmail.com"
       TITLE="[mod_python] Session Hanging Problems">harish at octopart.com
       </A><BR>
    <I>Tue Dec  4 12:28:06 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="024534.html">[mod_python] Session Hanging Problems
</A></li>
        <LI>Next message: <A HREF="024536.html">[mod_python] Session Hanging Problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24535">[ date ]</a>
              <a href="thread.html#24535">[ thread ]</a>
              <a href="subject.html#24535">[ subject ]</a>
              <a href="author.html#24535">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Have you noticed any performance issues?  I want to make sure to keep  
things fast and am worried that departing from the Apache lock system  
will degrade performance.  Why was mod python designed to use the  
apache system and not use session specific locks?

Also a note for the list - I'm now explicitly unlocking the session  
after each save to ensure that the session isn't locked during a  
req.write call.  I've seen one hang since then, but in twelve hours,  
that is much much better than the issues I was seeing before.

I think that this problem directly contradicts the general philosophy  
behind using the mod_python session handling scheme - I feel like I've  
read, a few times now, that there is no reason to have to explicitly  
unlock sessions, but this is an instance where running everything in  
its default configuration (not unlocking sessions, flushing the buffer  
on req.writes) causes serious hanging problems...  In addition,  
unlocking the session after each save doesn't sit well with me - I  
don't think the session is thread-safe now (given that there can be  
multiple save's per request).

-Harish


On Dec 4, 2007, at 1:48 AM, David Janes wrote:

&gt;<i> I'll note for the list that I put in the changes I outlined above ---
</I>&gt;<i> that is, handled locking entirely ourselves rather than using Apache's
</I>&gt;<i> lock function -- and I haven't had a hang since.
</I>&gt;<i>
</I>&gt;<i> Regards, etc...
</I>&gt;<i>
</I>&gt;<i> -- 
</I>&gt;<i> David Janes
</I>&gt;<i> Founder, BlogMatrix
</I>&gt;<i> <A HREF="http://www.blogmatrix.com">http://www.blogmatrix.com</A>
</I>&gt;<i> <A HREF="http://blogmatrix.blogmatrix.com">http://blogmatrix.blogmatrix.com</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024534.html">[mod_python] Session Hanging Problems
</A></li>
	<LI>Next message: <A HREF="024536.html">[mod_python] Session Hanging Problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24535">[ date ]</a>
              <a href="thread.html#24535">[ thread ]</a>
              <a href="subject.html#24535">[ subject ]</a>
              <a href="author.html#24535">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
