<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Singleton Object
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Singleton%20Object&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024571.html">
   <LINK REL="Next"  HREF="024577.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Singleton Object</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Tom Wells</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Singleton%20Object&In-Reply-To="
       TITLE="[mod_python] Singleton Object">drshade at gmail.com
       </A><BR>
    <I>Thu Dec 13 02:58:07 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="024571.html">[mod_python] Add mod_python function on a web server wrote in
	python
</A></li>
        <LI>Next message: <A HREF="024577.html">[mod_python] Singleton Object
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24576">[ date ]</a>
              <a href="thread.html#24576">[ thread ]</a>
              <a href="subject.html#24576">[ subject ]</a>
              <a href="author.html#24576">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi everyone,

I've been evaluating mod_python to implement a particular set of
requirements, and am now convinced that it is going to work for me, however
I have one remaining problem to solve:

I need to be able to spawn a single &quot;watchdog&quot; thread within my module which
connects back to a central server (via webservice calls) to provide
monitoring data, plus synchronize certain session data. I need to support
apache2.2 running in worker mpm (on linux platform), as well as winnt. In
the winnt deployment it's easy to spawn a single thread, as i can do this
the first time my module imports, but in worker mpm my module is imported
for each apache process started (I haven't actually tested the winnt side so
it's an assumption after some heavy reading up on the apache threading
models).

After some research with the C apache api I've noticed a hook called
&quot;ap_hook_post_config&quot; which seems like a good place to spawn singleton
objects, but I couldn't track this down in the mod_python hooks, nor have I
actually tried it with the C api, so I could be very wrong!

I've also taken a look at the mod_python Session bits, hoping to be able to
possibly set a global flag somewhere so that further module imports don't
spawn more threads, but I need something which is non-persistent (so if
apache restarts that cache is cleared, which I get from the MemorySession,
except I can't share this across processes, catch-22).

Anyways, any suggestions would be greatly appreciated!

Thanks,
Tom


-- 
<A HREF="http://www.tomwells.org">http://www.tomwells.org</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20071213/cc195c39/attachment.html">http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20071213/cc195c39/attachment.html</A>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024571.html">[mod_python] Add mod_python function on a web server wrote in
	python
</A></li>
	<LI>Next message: <A HREF="024577.html">[mod_python] Singleton Object
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24576">[ date ]</a>
              <a href="thread.html#24576">[ thread ]</a>
              <a href="subject.html#24576">[ subject ]</a>
              <a href="author.html#24576">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
