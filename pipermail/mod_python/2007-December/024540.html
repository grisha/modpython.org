<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Session Hanging Problems
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Session%20Hanging%20Problems&In-Reply-To=47559EC9.1060104%40jgassociates.ca">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024537.html">
   <LINK REL="Next"  HREF="024539.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Session Hanging Problems</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Session%20Hanging%20Problems&In-Reply-To=47559EC9.1060104%40jgassociates.ca"
       TITLE="[mod_python] Session Hanging Problems">graham.dumpleton at gmail.com
       </A><BR>
    <I>Tue Dec  4 16:32:07 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="024537.html">[mod_python] Session Hanging Problems
</A></li>
        <LI>Next message: <A HREF="024539.html">[mod_python] Session Hanging Problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24540">[ date ]</a>
              <a href="thread.html#24540">[ thread ]</a>
              <a href="subject.html#24540">[ subject ]</a>
              <a href="author.html#24540">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 05/12/2007, Jim Gallacher &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">jpg at jgassociates.ca</A>&gt; wrote:
&gt;<i> Harish Agarwal wrote:
</I>&gt;<i> &gt; Have you noticed any performance issues?  I want to make sure to keep
</I>&gt;<i> &gt; things fast and am worried that departing from the Apache lock system
</I>&gt;<i> &gt; will degrade performance.  Why was mod python designed to use the apache
</I>&gt;<i> &gt; system and not use session specific locks?
</I>&gt;<i>
</I>&gt;<i> I wasn't around when session handling was first introduced, but I assume
</I>&gt;<i> the apache mutexes where used so that mod_python would be as
</I>&gt;<i> cross-platform as possible. Python's fcntl.flock() is only available on
</I>&gt;<i> *nix platforms.
</I>
Important thing to note is that the session locks must be cross
process on UNIX. Part of the problem is then that certain types of
lock mechanisms may not be able to be used by arbitrary processes.
Instead, a parent process needs to initialise the lock. That lock must
then be inherited through a process fork, with some reinitialisation
done in the child to cope with process owner changes, and then used.
Typically, the most efficient sorts of cross process locks work this
way.

Because no mod_python specific Python code is run within Apache parent
process, there is no opportunity for such style of locks to be setup
from Python code, so the APR C interfaces are used to do it and then
those interfaces exposed through to Python code.

In some respects it is a bad design as it means that Session code is
tightly bound to Apache. If it wasn't done this way then feasibly one
could more or less port the Python frameworkish code to work on a
different web server infrastructure.

BTW, the portability argument isn't necessarily valid as on Windows,
the only other platform mod_python really runs on, you can use Python
in process locks as session locks. This is because you don't have
multiple processes and so don't need cross process locks.

&gt;<i> The big drawback with apache's mutexes is that we are dealing with
</I>&gt;<i> limited resource.
</I>
Only the case for certain types of cross process locks, eg., sysvsem.

Graham
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024537.html">[mod_python] Session Hanging Problems
</A></li>
	<LI>Next message: <A HREF="024539.html">[mod_python] Session Hanging Problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24540">[ date ]</a>
              <a href="thread.html#24540">[ thread ]</a>
              <a href="subject.html#24540">[ subject ]</a>
              <a href="author.html#24540">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
