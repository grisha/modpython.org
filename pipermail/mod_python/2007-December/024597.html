<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Problem with .psp_
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Problem%20with%20.psp_&In-Reply-To=88e286470712202046h13f8708ep1edac2a27c317052%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024596.html">
   <LINK REL="Next"  HREF="024598.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Problem with .psp_</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Charles Perreault</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Problem%20with%20.psp_&In-Reply-To=88e286470712202046h13f8708ep1edac2a27c317052%40mail.gmail.com"
       TITLE="[mod_python] Problem with .psp_">muganor at videotron.ca
       </A><BR>
    <I>Fri Dec 21 00:13:47 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="024596.html">[mod_python] Problem with .psp_
</A></li>
        <LI>Next message: <A HREF="024598.html">[mod_python] Problem with .psp_
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24597">[ date ]</a>
              <a href="thread.html#24597">[ thread ]</a>
              <a href="subject.html#24597">[ subject ]</a>
              <a href="author.html#24597">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Graham Dumpleton wrote:
&gt;<i> On 21/12/2007, Charles Perreault &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">muganor at videotron.ca</A>&gt; wrote:
</I>&gt;<i>   
</I>&gt;&gt;<i> ~$: ls -las /home/user/public_html/
</I>&gt;&gt;<i>  8 drwx--x--x  7 user user  4096 2007-12-20 21:58 .
</I>&gt;&gt;<i> 64 drwx--x--x 71 user user 49152 2007-12-20 23:01 ..
</I>&gt;&gt;<i>  8 drwx--x--x  5 user user  4096 2007-12-16 22:04 cgi-bin
</I>&gt;&gt;<i>  0 drwxr-xr-x  2 user user     1 2007-12-16 11:24 download
</I>&gt;&gt;<i>  4 -rw-r--r--  1 user user  1150 2007-11-06 20:45 favicon.ico
</I>&gt;&gt;<i>  4 -rw-r--r--  1 user user    66 2007-12-16 22:29 test.psp
</I>&gt;&gt;<i>  4 -rw-r--r--  1 user user   401 2007-12-16 00:31 index.html
</I>&gt;&gt;<i>  4 -rw-r--r--  1 user user   106 2007-12-17 16:16 komodo.html
</I>&gt;&gt;<i>  4 -rw-r--r--  1 user user   206 2007-12-16 23:57 komodo.py
</I>&gt;&gt;<i>  4 -rw-r--r--  1 user user   134 2007-12-16 23:23 mptest.py
</I>&gt;&gt;<i>  4 drwx--x--x  5 user user    72 2007-12-17 16:24 noel
</I>&gt;&gt;<i>  8 drwx--x--x 10 user user  4096 2007-12-16 01:01 photos
</I>&gt;&gt;<i>  0 drwx------  4 user user    16 2007-11-26 21:56 upload
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Yes Apache is running as user and group 'www-data'.  I know about file
</I>&gt;&gt;<i> permissions and ACL a lot.  The complaint in error.log is about Apache
</I>&gt;&gt;<i> Multiviews, which I don't care if it doesn't work.  In fact I'm thinking
</I>&gt;&gt;<i> about disabling it.  You say Apache needs reading option on directories,
</I>&gt;&gt;<i> which from my experience is only true IF you want it to be able to
</I>&gt;&gt;<i> create a directory listing (which is a minor security issue and must be
</I>&gt;&gt;<i> enabled on a per-directory basis).
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> True, although looks like MultiViews may depend on getting directory
</I>&gt;<i> listing as well and thus the error.
</I>&gt;<i>   
</I>Indeed it does need to get the directory listing.  Multiview tries to 
match inexisting requests with the best match it can find in a 
directory.  Therefore, it needs to get the listing and parse it.  
Example:  <A HREF="http://localhost/mypage">http://localhost/mypage</A>  may be redirected to 
<A HREF="http://localhost/mypage.php">http://localhost/mypage.php</A> if mypage don't exist.  However, if  
mypage.xhtml, mypage.html, mypage.html3, mypage.psp, mypage.php all 
exists, it's hard to know which file will be picked.
&gt;<i>   
</I>&gt;&gt;<i>  Else, indeed files need reading
</I>&gt;&gt;<i> permissions and folders only need execute.  Does mod_python .psp_
</I>&gt;&gt;<i> debugging rely on Multiview and therefore on folder reading permissions ???
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> No, doesn't require MultiViews so safe to disable that option. Can't
</I>&gt;<i> see how it would make a difference though.
</I>&gt;<i>   
</I>Same here.
&gt;<i> Can't think of anything else at the moment and don't have access to
</I>&gt;<i> mod_python code to look at it.
</I>&gt;<i>   
</I>Maybe multiview can make .psp_ work, since it will try to match the 
request with an existing file, which will surely be the .psp file.  But 
I doubt that is the correct way to make .psp_ work.
&gt;<i> BTW, as far as teaching a class, any reason why you didn't go for web
</I>&gt;<i> stuff that works to WSGI interface rather than mod_python? WSGI is the
</I>&gt;<i> way Python is heading and way more hosting options available for it.
</I>&gt;<i>
</I>&gt;<i>   
</I>Most of my material is already prepared (notes, assignments, etc) and 
translated in French (Universit&#233; de Sherbrooke, Qu&#233;bec, Canada).  Of 
course Django, WSGI, ASP.NET, Ruby on rails, are all very fun to learn 
and use, but a choice must be made.  I'm going to teach web programming 
to a class of geo-scientists, not programmers.  They don't even know 
for-loops and html... So, we must start from the bottom (html) and go 
up.  In a 15 weeks semester, there isn't enough time to teach html, 
javascript, css, python, cgi, parallel computing, distributed systems, 
wsgi and django, and plone, and etc.  mod_python fills the gap between 
cgi and frameworks, and is similar to php/asp, which is very common 
nonetheless.  Python is easier to learn than php, IMHO.  Students will 
learn the basis, and from there continue with real world tools if they 
need too.  The philosophy here is to learn people how things work, under 
the hood, and become versatile.  Then, the use of higher level 
frameworks and real life tools is somewhat easier, and will be done if 
the students need to in their future job.

Charles
&gt;&gt;<i>
</I>&gt;&gt;<i> Graham Dumpleton wrote:
</I>&gt;&gt;<i>     
</I>&gt;&gt;&gt;<i> What do you get if you run:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>   ls -las /home/user/public_html/
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Apache complaining about directory permissions is pretty significant.
</I>&gt;&gt;&gt;<i> Because Apache is running as a special user, it must have read/search
</I>&gt;&gt;&gt;<i> access to that directory plus the parent user directory.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> It is odd though that you would get this complaint if straight .psp
</I>&gt;&gt;&gt;<i> file is working.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Graham
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> On 21/12/2007, Charles Perreault &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">muganor at videotron.ca</A>&gt; wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>       
</I>&gt;&gt;&gt;&gt;<i> The Apache access/error log don't say much :
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> access.log :
</I>&gt;&gt;&gt;&gt;<i> 127.0.0.1 - - [20/Dec/2007:21:59:48 -0500] &quot;GET /~user/test.psp_
</I>&gt;&gt;&gt;&gt;<i> HTTP/1.1&quot; 403 326 &quot;-&quot; &quot;Mozilla/5.0 (X11; U; Linux i686; en-US;
</I>&gt;&gt;&gt;&gt;<i> rv:1.8.1.10) Gecko/20071128 Ubuntu/8.04 (hardy) Firefox/2.0.0.10&quot;
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> error.log :
</I>&gt;&gt;&gt;&gt;<i> [Thu Dec 20 21:59:48 2007] [error] [client 127.0.0.1] (13)Permission
</I>&gt;&gt;&gt;&gt;<i> denied: cannot read directory for multi: /home/user/public_html/
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> The same lines are repeated for each access to test.psp_.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Thank you,
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Charles
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Graham Dumpleton wrote:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>         
</I>&gt;&gt;&gt;&gt;&gt;<i> In the Apache access/error log, what is it saying when trying to
</I>&gt;&gt;&gt;&gt;&gt;<i> access the .psp_ file?
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> There should be an indication as to what Apache has matched the URL to
</I>&gt;&gt;&gt;&gt;&gt;<i> in the file system. With that can tell why configuration may not be
</I>&gt;&gt;&gt;&gt;&gt;<i> working.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Graham
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> On 21/12/2007, Charles Perreault &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">muganor at videotron.ca</A>&gt; wrote:
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>           
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>  Hello,
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>  I'm teaching a class on web applications and I want my students to use
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> mod_python.  They'll have a couple of assignments during the semester, all
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> to be done in python cgi (first assignment, just to get started) and psp.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> I'm now setuping Apache on our Ubuntu 7.10 server (Apache/2.2.4 (Ubuntu)
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> mod_python/3.3.1 Python/2.5.1 Server).  All configuration have to be done on
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> server / virtual host config, forget the .htaccess (way to much trouble for
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> students).
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>  My students will program their sites in their home folder (~/public_html).
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> I want them to be able to both use mod_python.psp and mod_python.publisher,
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> as I'll show them to use the both methods to create web applications.  So
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> far, I've easily been able to make both work in the same directory using the
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> following configuration (on Debian/Ubuntu httpd.conf is splitted in multiple
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> files, allowing to enable/disable modules easily) :
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>  userdir.conf
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>  ----------------------
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>  &lt;IfModule mod_userdir.c&gt;
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>         UserDir public_html
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>         UserDir disabled root
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>         &lt;Directory /home/*/public_html&gt;
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>                 AllowOverride FileInfo AuthConfig Limit
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>                 Options MultiViews Indexes SymLinksIfOwnerMatch
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> IncludesNoExec
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>                 AddHandler mod_python .py .psp .psp_
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>                 PythonHandler mod_python.psp | .psp .psp_
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>                 PythonHandler mod_python.publisher | .py
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>                 PythonDebug On
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>         &lt;/Directory&gt;
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>  &lt;/IfModule&gt;
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>  So you see I'm trying to assign .psp and .psp_ to mod_python.psp and .py to
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> publisher.  So <A HREF="http://localhost/~user/test.py">http://localhost/~user/test.py</A> and
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> <A HREF="http://localhost/~user/test.psp">http://localhost/~user/test.psp</A> both work.  However, psp debugging with the
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> underscore trick (.psp_) don't work.  I get a 403 forbidden error when I try
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> to access <A HREF="http://localhost/~user/test.psp_.">http://localhost/~user/test.psp_.</A>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>  Of course, test.psp exists.  From what I read, test.psp_ don't need to
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> exist because the psp handler will understand that a debug request was done.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>  But it's not working.  However, if I create a symbolic link to test.psp :
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>  ln -s test.psp test.psp_
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>  the debug request works.  I get to see the generated PSP-produced python
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> code and psp-html source.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>  I must be missing something.  Is there an Apache configuration that could
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> be enabled by default that would prevent me to access .psp_ files that don't
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> exist, before the mod_python.psp handler could do its magic ?
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>  Anyone please can help ?  Thank you,
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>             
</I>&gt;&gt;<i>     
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20071221/bd1d5ecf/attachment-0001.html">http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20071221/bd1d5ecf/attachment-0001.html</A>
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024596.html">[mod_python] Problem with .psp_
</A></li>
	<LI>Next message: <A HREF="024598.html">[mod_python] Problem with .psp_
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24597">[ date ]</a>
              <a href="thread.html#24597">[ thread ]</a>
              <a href="subject.html#24597">[ subject ]</a>
              <a href="author.html#24597">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
