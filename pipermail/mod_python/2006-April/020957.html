<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] PythonAuthzHandler not working
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20PythonAuthzHandler%20not%20working&In-Reply-To=1145585717.22189%40dscpl.user.openhosting.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020928.html">
   <LINK REL="Next"  HREF="020959.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] PythonAuthzHandler not working</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Jim Gallacher</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20PythonAuthzHandler%20not%20working&In-Reply-To=1145585717.22189%40dscpl.user.openhosting.com"
       TITLE="[mod_python] PythonAuthzHandler not working">jpg at jgassociates.ca
       </A><BR>
    <I>Sat Apr 22 15:22:36 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020928.html">[mod_python] PythonAuthzHandler not working
</A></li>
        <LI>Next message: <A HREF="020959.html">[mod_python] PythonAuthzHandler not working
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20957">[ date ]</a>
              <a href="thread.html#20957">[ thread ]</a>
              <a href="subject.html#20957">[ subject ]</a>
              <a href="author.html#20957">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Graham Dumpleton wrote:
&gt;<i> Add to config:
</I>&gt;<i> 
</I>&gt;<i>   AuthAuthoritative Off
</I>
That doesn't really make sense to me. Nothing like this is mentioned for 
other auth modules like mod_auth_ldap.

&gt;<i>   Require dummy
</I>&gt;<i> 
</I>&gt;<i> The value to Require cannot be:
</I>&gt;<i> 
</I>&gt;<i>   valid-user
</I>&gt;<i>   user ???
</I>&gt;<i>   group ???
</I>&gt;<i> 
</I>&gt;<i> it has to be something of your own creation that your authz handler then
</I>&gt;<i> interprets.
</I>&gt;<i> 
</I>&gt;<i> I am noting that authzhandler() can't return DECLINED, but must be OK,
</I>&gt;<i> or presumable HTTP_UNAUTHORIZED. Returning DECLINED results in 500
</I>&gt;<i> error and:
</I>&gt;<i> 
</I>&gt;<i> [Fri Apr 21 12:10:43 2006] [crit] [client ::1] configuration error:  couldn't check access.  No groups file?: /~grahamd/authz/index.py
</I>&gt;<i> 
</I>
I've worn my fingers to bloody stumps trying every directive that seems 
even vaguely related to authentication or authorization and I just can't 
get my authzhandler to fire.

Well, screw it, I thought. I'll just use a stacked handler:

   PythonAuthenHandler mprest.auth mprest.auth::authzhandler

This works just fine, although I'd prefer to use PythonAuthzHandler as 
it makes the intention clearer, but I've wasted enough time on this already.

So I'm working away, watching the &quot;new module loader&quot; thread float by on 
the the mailing list and I say to myself, &quot;Gee, I really should turn on 
the new importer to give it a bit of a workout&quot;. I turn it on, and give 
my authen/authz login function a whirl... and...

Aaaaahhhhhrrrrggggg.....

It sails right past the second handler in the stack - 
mprest.auth::authzhanlder is ignored. Putting them in separate 
directives makes no difference:

   PythonAuthenHandler mprest.auth
   PythonAuthenHandler mprest.auth::authzhandler

No joy. (And of course PythonAuthzHandler is a lost cause for me).

I've decided that there is some powerful supernatural force that does 
not want me to do authorization testing.

I think discussion of this should be shifted to the python-dev list as 
importer.py is only in the development branch at this time.

Jim





</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020928.html">[mod_python] PythonAuthzHandler not working
</A></li>
	<LI>Next message: <A HREF="020959.html">[mod_python] PythonAuthzHandler not working
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20957">[ date ]</a>
              <a href="thread.html#20957">[ thread ]</a>
              <a href="subject.html#20957">[ subject ]</a>
              <a href="author.html#20957">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
