<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] The new module loader
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20The%20new%20module%20loader&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020933.html">
   <LINK REL="Next"  HREF="020935.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] The new module loader</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20The%20new%20module%20loader&In-Reply-To="
       TITLE="[mod_python] The new module loader">grahamd at dscpl.com.au
       </A><BR>
    <I>Fri Apr 21 01:44:10 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020933.html">[mod_python] The new module loader
</A></li>
        <LI>Next message: <A HREF="020935.html">[mod_python] The new module loader
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20934">[ date ]</a>
              <a href="thread.html#20934">[ thread ]</a>
              <a href="subject.html#20934">[ subject ]</a>
              <a href="author.html#20934">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Graham Dumpleton wrote ..
&gt;<i> Dan Eloff wrote ..
</I>&gt;<i> &gt; &lt;Directory /&gt;
</I>&gt;<i> &gt;     SetHandler mod_python
</I>&gt;<i> &gt;     PythonHandler PyServer.pyserver
</I>&gt;<i> 
</I>&gt;<i> The new module importer completely ignores packages as it is practically
</I>&gt;<i> impossible to get any form of automatic module reloading to work
</I>&gt;<i> correctly with them when they are more than trivial. As such, packages
</I>&gt;<i> are handed off to standard Python __import__ to deal with. That it even
</I>&gt;<i> finds the package means that you have it installed in sys.path. Even if
</I>&gt;<i> it was a file based module, because it is on sys.path and thus likely to
</I>&gt;<i> be installed in a standard location, the new module importer would again
</I>&gt;<i> ignore it as it leaves all sys.path modules up to Python __import__
</I>&gt;<i> as too dangerous to be mixing importing schemes.
</I>&gt;<i> 
</I>&gt;<i> Anyway, that all only applies if you were expecting PyServer.pyserver to
</I>&gt;<i> automatically reload upon changes.
</I>
BTW, that something outside of the document tree, possibly in sys.path,
is dealt with by Python __import__ doesn't mean you can't have module
reloading on stuff outside of the document tree. The idea is that if it is
part of the web application and needs to be reloadable, that it doesn't
really belong in standard Python directories anyway. People only install
it there at present because it is convenient.

The better way of dealing with this with the new module importer is to
put your web application modules elsewhere, ie., not on sys.path. You then
specify an absolute path to the actual .py file in the handler directive.

 &lt;Directory /&gt;
     SetHandler mod_python
     PythonHandler /path/to/web/application/PyServer/pserver.py
     ...

Most cases I have seen is that people use packages purely to create a
namespace to group the modules. With the new module importer that
doesn't really need to be done anymore. That is because you can
directly reference an arbitrary module by its path. When you use the
&quot;import&quot; statement in files in that directory, one of the places it will
automatically look, without that directory needing to be in sys.path,
is the same directory the file is in. This achieves the same result as
what people are using packages for now but you can still have module
reloading work.

If you need a working example of this let me know.

Graham

</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020933.html">[mod_python] The new module loader
</A></li>
	<LI>Next message: <A HREF="020935.html">[mod_python] The new module loader
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20934">[ date ]</a>
              <a href="thread.html#20934">[ thread ]</a>
              <a href="subject.html#20934">[ subject ]</a>
              <a href="author.html#20934">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
