<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] The new module loader
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20The%20new%20module%20loader&In-Reply-To=4817b6fc0604211335w6be447cdwcf37cec188908d9e%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020945.html">
   <LINK REL="Next"  HREF="020951.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] The new module loader</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20The%20new%20module%20loader&In-Reply-To=4817b6fc0604211335w6be447cdwcf37cec188908d9e%40mail.gmail.com"
       TITLE="[mod_python] The new module loader">grahamd at dscpl.com.au
       </A><BR>
    <I>Fri Apr 21 18:57:18 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020945.html">[mod_python] The new module loader
</A></li>
        <LI>Next message: <A HREF="020951.html">[mod_python] The new module loader
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20948">[ date ]</a>
              <a href="thread.html#20948">[ thread ]</a>
              <a href="subject.html#20948">[ subject ]</a>
              <a href="author.html#20948">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 22/04/2006, at 6:35 AM, Dan Eloff wrote:

&gt;<i> Hey Graham,
</I>&gt;<i>
</I>&gt;<i> I'm running into one problem related to taking things out of the
</I>&gt;<i> packages. I've imported PyServer.module_name in many places in my
</I>&gt;<i> modules but of course now PyServer no longer exists and all it's
</I>&gt;<i> modules are in the directory with pyserver.py which contains the
</I>&gt;<i> handler. I changed import PyServer.config to just import config, but
</I>&gt;<i> it doesn't find it.
</I>&gt;<i>
</I>&gt;<i> I'm loathe to use absolute or even relative paths because of how many
</I>&gt;<i> different places I'd have to modify it. Is there some way to globally
</I>&gt;<i> add the handler's directory to the search path?
</I>
I gotta run out the door, so no time to answer all questions right now.

Can you clarify when you say &quot;handler directory&quot; whether you mean
the directory that pserver.py is in, or the directory indicated by the
Directory directive where you specified PythonHandler?

Also, are you setting PythonPath directive?

Oh, and give locations of pyserver.py and config.py, along with any path
used with Directory directive so I have context.

In a rush, so take note of comments in:

   <A HREF="http://issues.apache.org/jira/browse/MODPYTHON-154">http://issues.apache.org/jira/browse/MODPYTHON-154</A>
   <A HREF="http://www.dscpl.com.au/articles/modpython-007.html#setting-of-">http://www.dscpl.com.au/articles/modpython-007.html#setting-of-</A> 
pythonpath

in the mean time.

You may be coming up against preserved behaviour from old
importer that frankly I think should not be kept.

Thanks.

Graham


&gt;<i> On 4/21/06, Dan Eloff &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">dan.eloff at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i> Whoops. I was looking over the code for import_module and I  
</I>&gt;&gt;<i> figured it
</I>&gt;&gt;<i> out. path is meant to be a list, duh. Maybe add an
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> assert not path or isinstance(path, list), 'path must be a list of
</I>&gt;&gt;<i> paths to search for the module.'
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> to your code near the top of the function. Otherwise if path is a
</I>&gt;&gt;<i> string, search_path.extend(path) doesn't throw, but it makes a huge
</I>&gt;&gt;<i> search_path of single character locations and fails utterly (and
</I>&gt;&gt;<i> silently)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> -Dan
</I>&gt;&gt;<i>
</I>
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020945.html">[mod_python] The new module loader
</A></li>
	<LI>Next message: <A HREF="020951.html">[mod_python] The new module loader
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20948">[ date ]</a>
              <a href="thread.html#20948">[ thread ]</a>
              <a href="subject.html#20948">[ subject ]</a>
              <a href="author.html#20948">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
