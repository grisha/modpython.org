<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Output Filters Redeaux
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Output%20Filters%20Redeaux&In-Reply-To=5c06fa770604171503s2ab6bd9dsba9a60969a7062eb%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020884.html">
   <LINK REL="Next"  HREF="020880.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Output Filters Redeaux</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Nick</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Output%20Filters%20Redeaux&In-Reply-To=5c06fa770604171503s2ab6bd9dsba9a60969a7062eb%40mail.gmail.com"
       TITLE="[mod_python] Output Filters Redeaux">nick at dd.revealed.net
       </A><BR>
    <I>Mon Apr 17 18:17:27 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020884.html">[mod_python] Output Filters Redeaux
</A></li>
        <LI>Next message: <A HREF="020880.html">[mod_python] Problem with PSP on mod_python 3.13
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20885">[ date ]</a>
              <a href="thread.html#20885">[ thread ]</a>
              <a href="subject.html#20885">[ subject ]</a>
              <a href="author.html#20885">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Deron Meranda wrote:
&gt;<i> On 4/17/06, Nick &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">nick at dd.revealed.net</A>&gt; wrote:
</I>&gt;&gt;<i> The iterator would stop when None was read, so that's implicit.  Again, this
</I>&gt;&gt;<i> idea assumes a producer/consumer model rather than the repeated calling
</I>&gt;&gt;<i> model that is supported now.  And that, of course, implies some kind of
</I>&gt;&gt;<i> thread or fork and communication through a pipe or some other form of IPC,
</I>&gt;&gt;<i> unless there's some aspect of the apache API that I'm not aware of (which is
</I>&gt;&gt;<i> highly possible :)
</I>&gt;<i> 
</I>&gt;<i> Not sure why you're thinking about threads and IPC?
</I>
Mostly because a filter is called multiple times by apache, as new
information is available to be read.  As I understand the apache API, your
filter gets called the first time, ctx is NULL signaling the start of the
filtering, and you read buckets until you run out of input, then the handler
returns, waiting to be called again.  Apache will call the filter over and
over for the request until a read reaches the end of the BB stream, at which
point this will be the last time the filter is called.

&gt;<i> Anyway creating a generator-wrapper is the quickest way.  But you
</I>&gt;<i> could modify the filter class so it acts like an iterator pretty easy.
</I>
That won't work in this case, because you can read in some stuff, then get
interrupted, then get called again to read in more stuff.  I don't think
there's a real advantage to making the filter object an iterator as the
handler currently works.

&gt;<i> And as Graham pointed out, doing the replace '\r\n' as you're
</I>&gt;<i> doing it is quite fragile.  It will break when you least expect it to.
</I>
I guess that part is addressed to Lee :)

Nick
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020884.html">[mod_python] Output Filters Redeaux
</A></li>
	<LI>Next message: <A HREF="020880.html">[mod_python] Problem with PSP on mod_python 3.13
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20885">[ date ]</a>
              <a href="thread.html#20885">[ thread ]</a>
              <a href="subject.html#20885">[ subject ]</a>
              <a href="author.html#20885">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
