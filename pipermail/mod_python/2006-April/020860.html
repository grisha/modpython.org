<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Re: Speaking of Output Filters....
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20Speaking%20of%20Output%20Filters....&In-Reply-To=34db274e3939b31689df2e825de6e0d5%40dscpl.com.au">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020849.html">
   <LINK REL="Next"  HREF="020861.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Re: Speaking of Output Filters....</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Lee Brown</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20Speaking%20of%20Output%20Filters....&In-Reply-To=34db274e3939b31689df2e825de6e0d5%40dscpl.com.au"
       TITLE="[mod_python] Re: Speaking of Output Filters....">administrator at leebrown.org
       </A><BR>
    <I>Wed Apr 12 08:25:32 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020849.html">[mod_python] Re: Speaking of Output Filters....
</A></li>
        <LI>Next message: <A HREF="020861.html">[mod_python] Re: Speaking of Output Filters....
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20860">[ date ]</a>
              <a href="thread.html#20860">[ thread ]</a>
              <a href="subject.html#20860">[ subject ]</a>
              <a href="author.html#20860">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Greetings!

Thanks to Graham and Daniel for the info on bucket brigades. I think I've
got my head wrapped around it now.

If I'm grasping this correctly: not only can one request call the filter
multiple times, but overlapping requests may be calling the filter multiple
times.  The filter therefore needs to preserve its state in a thread-safe
way, and as far as the filter is concerned the req object is a persistent,
thread-safe place to put a buffer.

If filter.read() returns '', this means you've hit the bottom of the current
bucket and it's time to update the buffer.  If filter.read returns None,
you've hit the end of the request stream and it's time to proceede with the
filter operation.

If I'm still missing something, please let me know....

Best Regards,
Lee E. Brown
(<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">administrator at leebrown.org</A>)


</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020849.html">[mod_python] Re: Speaking of Output Filters....
</A></li>
	<LI>Next message: <A HREF="020861.html">[mod_python] Re: Speaking of Output Filters....
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20860">[ date ]</a>
              <a href="thread.html#20860">[ thread ]</a>
              <a href="subject.html#20860">[ subject ]</a>
              <a href="author.html#20860">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
