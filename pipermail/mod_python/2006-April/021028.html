<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Re: DbmSession
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20DbmSession&In-Reply-To=82105edc0604290756y3d39d1b1o5aff5242ccdb1c01%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021026.html">
   <LINK REL="Next"  HREF="021032.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Re: DbmSession</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Jim Gallacher</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Re%3A%20DbmSession&In-Reply-To=82105edc0604290756y3d39d1b1o5aff5242ccdb1c01%40mail.gmail.com"
       TITLE="[mod_python] Re: DbmSession">jpg at jgassociates.ca
       </A><BR>
    <I>Sat Apr 29 11:56:15 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021026.html">[mod_python] Re: DbmSession
</A></li>
        <LI>Next message: <A HREF="021032.html">[mod_python] Re: DbmSession
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21028">[ date ]</a>
              <a href="thread.html#21028">[ thread ]</a>
              <a href="subject.html#21028">[ subject ]</a>
              <a href="author.html#21028">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Any chance you were doing a req.write call *before* creating the session 
instance? The first req.write() causes the response headers to be sent, 
so if Session.Session() comes later in your code it will not be able to 
set the cookie. (Actually, it will set it, but the headers have already 
been sent, so it is effectively a noop).

Jim

Stefan Glaus wrote:
&gt;&gt;<i> From what I understand (This very well could be wrong), session.save()
</I>&gt;<i> does the save to the dbm file, and doesn't really have anything to do
</I>&gt;<i> with the cookies.
</I>&gt;<i> 
</I>&gt;<i> Thanks!
</I>&gt;<i> 
</I>&gt;<i> On 4/28/06, Graham Dumpleton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">grahamd at dscpl.com.au</A>&gt; wrote:
</I>&gt;&gt;<i> I hope you are doing a session.save() somewhere. You don't show
</I>&gt;&gt;<i> it in your code and without it, you will get a new session
</I>&gt;&gt;<i> every time.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Graham
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On 29/04/2006, at 12:35 AM, Stefan Glaus wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; The relevant code is as follows:
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; session = Session.Session(req)
</I>&gt;&gt;<i> &gt; if session.is_new():
</I>&gt;&gt;<i> &gt;       req.write(&quot;new&quot;)
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; req.write(session.id() + '&lt;BR&gt;&lt;BR&gt;')
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; I'm running this on apache 2.0 with python 2.4.2 and mod_python 3.2
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; The code works now, it is setting cookies but I don't know what
</I>&gt;&gt;<i> &gt; changed. Sorry for the lack of detail in the original post... first
</I>&gt;&gt;<i> &gt; time :)
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Thanks for your reply and if I figure out what I've changed in order
</I>&gt;&gt;<i> &gt; for it to work, I'll follow up
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; On 4/28/06, Jim Gallacher &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">jpg at jgassociates.ca</A>&gt; wrote:
</I>&gt;&gt;<i> &gt;&gt; Daniel Nogradi wrote:
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; I'm trying to use the DbmSession class. MemorySession works (for a
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; single process) but whenever I try using DbmSession, no cookies are
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; being set in my browser.. Is there something I'm overlooking here?
</I>&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;<i> &gt;&gt; &gt; Please post the (minimal) code that you use, that way it will be
</I>&gt;&gt;<i> &gt;&gt; &gt; easier to tell what might go wrong. For example: are the db files
</I>&gt;&gt;<i> &gt;&gt; &gt; created on your server where the session data should be stored?
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; Also, your OS and mod_python version would be helpful. :)
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; Jim
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; _______________________________________________
</I>&gt;&gt;<i> &gt; Mod_python mailing list
</I>&gt;&gt;<i> &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;&gt;<i> &gt; <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mod_python mailing list
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">Mod_python at modpython.org</A>
</I>&gt;<i> <A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">http://mailman.modpython.org/mailman/listinfo/mod_python</A>
</I>&gt;<i> 
</I>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021026.html">[mod_python] Re: DbmSession
</A></li>
	<LI>Next message: <A HREF="021032.html">[mod_python] Re: DbmSession
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21028">[ date ]</a>
              <a href="thread.html#21028">[ thread ]</a>
              <a href="subject.html#21028">[ subject ]</a>
              <a href="author.html#21028">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
