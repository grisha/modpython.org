<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] Speaking of Output Filters....
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Speaking%20of%20Output%20Filters....&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020842.html">
   <LINK REL="Next"  HREF="020848.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] Speaking of Output Filters....</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20Speaking%20of%20Output%20Filters....&In-Reply-To="
       TITLE="[mod_python] Speaking of Output Filters....">grahamd at dscpl.com.au
       </A><BR>
    <I>Mon Apr 10 18:34:20 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020842.html">[mod_python] When I try to use include directive an SyntaxError
	error occurs
</A></li>
        <LI>Next message: <A HREF="020848.html">[mod_python] Re: Speaking of Output Filters....
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20843">[ date ]</a>
              <a href="thread.html#20843">[ thread ]</a>
              <a href="subject.html#20843">[ subject ]</a>
              <a href="author.html#20843">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Lee Brown wrote ..
&gt;<i> Greetings!
</I>&gt;<i> 
</I>&gt;<i> I am probably remiss for not having shared this before now.  Here are two
</I>&gt;<i> output filters for mod_python that I have developed.
</I>&gt;<i>
</I>&gt;<i> ...
</I>&gt;<i>
</I>&gt;<i> def outputfilter (filter):
</I>&gt;<i>     xmlstring = filter.read()
</I>&gt;<i>     doc = lxml.etree.parse(StringIO(xmlstring))
</I>&gt;<i>     doc.xinclude()
</I>&gt;<i>     result = str(transformer(doc))
</I>&gt;<i>     filter.write(result)
</I>&gt;<i>     filter.close()
</I>
I suspect that these filters will not work in all situations. This is because
a filter can be called multiple times for a single request and within one
invocation, it is not guaranteed that filter.read() will return all the data.

In short, your filter will only work when serving up static files and maybe
only files up to a certain size at that perhaps. It is not likely to work where
the XML is generated by a content handler.

This is why the prior posters filters would accumulate data in a list held
in request object until read() returned None and only then process data,
write it out and close the filter off.

Graham
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020842.html">[mod_python] When I try to use include directive an SyntaxError
	error occurs
</A></li>
	<LI>Next message: <A HREF="020848.html">[mod_python] Re: Speaking of Output Filters....
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20843">[ date ]</a>
              <a href="thread.html#20843">[ thread ]</a>
              <a href="subject.html#20843">[ subject ]</a>
              <a href="author.html#20843">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
