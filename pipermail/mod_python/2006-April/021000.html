<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> &amp;nbsp;Re:&amp;nbsp;[mod_python]&amp;nbsp;s
 ession&amp;nbsp;lock
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%26nbsp%3BRe%3A%26nbsp%3B%5Bmod_python%5D%26nbsp%3Bs%0A%20ession%26nbsp%3Block&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021004.html">
   <LINK REL="Next"  HREF="021005.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>&amp;nbsp;Re:&amp;nbsp;[mod_python]&amp;nbsp;s
 ession&amp;nbsp;lock</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>yjfuk</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%26nbsp%3BRe%3A%26nbsp%3B%5Bmod_python%5D%26nbsp%3Bs%0A%20ession%26nbsp%3Block&In-Reply-To="
       TITLE="&amp;nbsp;Re:&amp;nbsp;[mod_python]&amp;nbsp;s
 ession&amp;nbsp;lock">yjfuk at 126.com
       </A><BR>
    <I>Fri Apr 28 05:30:40 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021004.html">&amp;nbsp;Re:&amp;nbsp;[mod_python]&amp;nbsp;s ession&amp;nbsp;lock
</A></li>
        <LI>Next message: <A HREF="021005.html">&amp;nbsp;Re:&amp;nbsp;[mod_python]&amp;nbsp;s ession&amp;nbsp;lock
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21000">[ date ]</a>
              <a href="thread.html#21000">[ thread ]</a>
              <a href="subject.html#21000">[ subject ]</a>
              <a href="author.html#21000">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>in the mod_python's Session module ,I analyse the code.
when it use sid ,it invoke lock method .why does it lock sid?
when it unlock sid? end of the request it auto unlock?
 
 
 



-----&#212;&#173;&#202;&#188;&#211;&#202;&#188;&#254;-----
&#183;&#162;&#188;&#254;&#200;&#203;:&quot;Graham Dumpleton&quot; 
&#183;&#162;&#203;&#205;&#202;&#177;&#188;&#228;:2006-04-24 12:10:38
&#202;&#213;&#188;&#254;&#200;&#203;:&quot;yjfuk&quot; 
&#179;&#173;&#203;&#205;:&quot;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">mod_python at modpython...</A>&quot; 
&#214;&#247;&#204;&#226;:Re: Re: [mod_python] session lock


yjfuk wrote ..
&gt;<i> the mod_python startup message in the Apache error log file is :
</I>&gt;<i>  
</I>&gt;<i> [Sat Jan 28 18:40:19 2006] [notice] mod_python: Creating 8 session mutexes
</I>&gt;<i> based on 25 max processes and 30 max threads
</I>&gt;<i>  
</I>&gt;<i> the Apache is configured for worker MPM
</I>
You didn't say what operating system you were using.

From what I gather from mailing list archives, the cause of the problem
for why global mutex locks cannot be acquired is sometimes elusive.

The usual problem is that the operating system only has a limited number of
the types of locks used. In the case of Linux it may be necessary to increase
the number kernel locks available for use. Mod_python will output
error messages warning of an ability to acquire the locks initially, but
not sure if this happens in 3.2.2b that you are using.

Thus, upgrade to mod_python 3.2.8 to begin with, then look carefully
in the log files for messages something like:

       mod_python: We can probably continue, but with diminished ability to process session locks.
       mod_python: Hint: On Linux, the problem may be the number of available semaphores, check 'sysctl kernel.sem'

This would be immediately after that startup message.

So, upgrade mod_python first and if it still persists, look into 'sysctl kernel.sem'
command if your on Linux and increasing number of locks. Else, get back to
us and we can see what else we can come up with.

Graham
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20060428/7d05c79a/attachment.html">http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20060428/7d05c79a/attachment.html</A>
</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021004.html">&amp;nbsp;Re:&amp;nbsp;[mod_python]&amp;nbsp;s ession&amp;nbsp;lock
</A></li>
	<LI>Next message: <A HREF="021005.html">&amp;nbsp;Re:&amp;nbsp;[mod_python]&amp;nbsp;s ession&amp;nbsp;lock
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21000">[ date ]</a>
              <a href="thread.html#21000">[ thread ]</a>
              <a href="subject.html#21000">[ subject ]</a>
              <a href="author.html#21000">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
