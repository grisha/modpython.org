<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] internal error again!
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20internal%20error%20again%21&In-Reply-To=20060408132842.2qnn71genko4wkwo%40webmail.naeberg.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020819.html">
   <LINK REL="Next"  HREF="020815.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] internal error again!</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Jim Gallacher</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20internal%20error%20again%21&In-Reply-To=20060408132842.2qnn71genko4wkwo%40webmail.naeberg.org"
       TITLE="[mod_python] internal error again!">jpg at jgassociates.ca
       </A><BR>
    <I>Sat Apr  8 12:25:18 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020819.html">[mod_python] internal error again!
</A></li>
        <LI>Next message: <A HREF="020815.html">[mod_python] win32 binaries of mod_python ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20818">[ date ]</a>
              <a href="thread.html#20818">[ thread ]</a>
              <a href="subject.html#20818">[ subject ]</a>
              <a href="author.html#20818">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">nemesis128 at atarax.org</A> wrote:
&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i> First i'd like to thank alll the people behind mod_python! =)
</I>&gt;<i> 
</I>&gt;<i> All worked fine for me with apache 1.3.
</I>&gt;<i> Now i have installed apache 2 and i have that usual problem of Internal Server
</I>&gt;<i> Error 500.
</I>&gt;<i> 
</I>&gt;<i> I've read all the faqs about it, nothing works.
</I>&gt;<i> 
</I>&gt;<i> Detailed:
</I>&gt;<i> 
</I>&gt;<i>  - Mandriva Linux 2006
</I>&gt;<i>  - Compiled python 2.4.3
</I>&gt;<i>  - Compiled apache 2.0.55
</I>&gt;<i>  - mod python 3.2.8 (i even tried to compile it with the latest flex 2.5.33)
</I>&gt;<i>  - i tried htaccess &amp; httpd.conf directives
</I>&gt;<i>  - with all examples given in the doc.
</I>&gt;<i>  - i always get the same error log:
</I>&gt;<i> 
</I>&gt;<i> -------------------------------------------------------------------
</I>&gt;<i> [Fri Apr 07 23:19:20 2006] [notice] mod_python: Creating 32 session mutexes
</I>&gt;<i> based on 150 max processes and 0 max threads.
</I>&gt;<i> [Fri Apr 07 23:19:20 2006] [notice] Apache/2.0.55 (Unix) mod_python/3.2.8
</I>&gt;<i> Python/2.4.3 configured -
</I>&gt;<i> - resuming normal operations
</I>&gt;<i> [Fri Apr 07 23:19:23 2006] [error] make_obcallback: could not import
</I>&gt;<i> mod_python.apache.\n
</I>&gt;<i> 'import site' failed; use -v for traceback
</I>&gt;<i> 'import site' failed; use -v for traceback
</I>&gt;<i> ImportError: No module named mod_python.apache
</I>&gt;<i> [Fri Apr 07 23:19:23 2006] [error] python_handler: no interpreter callback
</I>&gt;<i> found.
</I>&gt;<i> [Fri Apr 07 23:19:23 2006] [error] [client ::1] python_handler: Can't get/create
</I>&gt;<i> interpreter., refe
</I>&gt;<i> rer: <A HREF="http://localhost/%7Esm/">http://localhost/%7Esm/</A>
</I>&gt;<i> ----------------------------------------------------------------------
</I>
Since you compiled your own python and apache, I going to assume that 
you have multiple versions of each on your system.

Quoting from Graham,
&quot;Having multiple versions of Python available can often be a problem as
Apache/mod_python will attempt to use the one found in $PATH of user 
Apache is started as and not that which mod_python was compiled against. 
This can result in a unhealthy mix of stuff from different versions of 
Python being used.&quot;

&gt;<i> Well, sys.path is OK too, but cannot import site (nor mod_python) !!
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> I also get that kind of error on apache startup sometimes, and i just don't know
</I>&gt;<i> if it has something to do with the problem explained above:
</I>&gt;<i> 
</I>&gt;<i> ----------------------------------------------------------------------
</I>&gt;<i> [Sat Apr 08 02:13:37 2006] [notice] mod_python: Creating 32 session mutexes
</I>&gt;<i> based on 150 max proces
</I>&gt;<i> ses and 0 max threads.
</I>&gt;<i> [Sat Apr 08 02:13:37 2006] [error] (28)No space left on device: mod_python:
</I>&gt;<i> Failed to create global
</I>&gt;<i>  mutex 21 of 32 (/tmp/mpmtx1145121).
</I>&gt;<i> [Sat Apr 08 02:13:37 2006] [error] mod_python: We can probably continue, but
</I>&gt;<i> with diminished abilit
</I>&gt;<i> y to process session locks.
</I>&gt;<i> [Sat Apr 08 02:13:37 2006] [error] mod_python: Hint: On Linux, the problem may
</I>&gt;<i> be the number of ava
</I>&gt;<i> ilable semaphores, check 'sysctl kernel.sem'
</I>&gt;<i> [Sat Apr 08 02:13:37 2006] [notice] Apache/2.0.55 (Unix) mod_python/3.2.8
</I>&gt;<i> Python/2.4.3 configured -
</I>&gt;<i> - resuming normal operations
</I>&gt;<i> -------------------------------------------------------------------------
</I>
This may be the result of Apache not shutting down cleanly. Normally it 
will remove the semaphores but if things are badly borked this may not 
happen. You can remove the dead semaphores by running the following 
command as root, subsituting the correct apache user for &quot;apache-user&quot;:

localhost:~# ipcs -s | awk '/apache-user/ { system(&quot;ipcrm sem &quot; $2) }'

Also, you likely don't need 32 mutexes. I'd stick with the default of 8 
until you've done some benchmarking to prove that you really do need 32.

Jim








</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020819.html">[mod_python] internal error again!
</A></li>
	<LI>Next message: <A HREF="020815.html">[mod_python] win32 binaries of mod_python ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20818">[ date ]</a>
              <a href="thread.html#20818">[ thread ]</a>
              <a href="subject.html#20818">[ subject ]</a>
              <a href="author.html#20818">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
