<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] PSP/Mac OS X line ending gotcha
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20PSP/Mac%20OS%20X%20line%20ending%20gotcha&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021033.html">
   <LINK REL="Next"  HREF="021030.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] PSP/Mac OS X line ending gotcha</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Jeffrey A. Zelt</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20PSP/Mac%20OS%20X%20line%20ending%20gotcha&In-Reply-To="
       TITLE="[mod_python] PSP/Mac OS X line ending gotcha">jeffreyz at broadpark.no
       </A><BR>
    <I>Sat Apr 29 13:14:10 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="021033.html">[mod_python] Problems with mod_python after reboots
</A></li>
        <LI>Next message: <A HREF="021030.html">[mod_python] PSP/Mac OS X line ending gotcha
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21029">[ date ]</a>
              <a href="thread.html#21029">[ thread ]</a>
              <a href="subject.html#21029">[ subject ]</a>
              <a href="author.html#21029">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I've only just started using mod_python, so please excuse this if it  
is documented in an obvious place.  Let me put it very simply.  On  
Mac OS X, make sure that your HTML files are terminated by :

    a line feed (ascii 10) and NOT a carriage return (ascii 13).

The Windows line ending of CRLF is also OK because it includes the  
line feed.  PSP does *not* like lines terminated by only a carriage  
return.  Here is how I encountered this.  It should also indicate  
when you should look out for this issue.

I successfully implemented some functionality through a custom  
generic python handler - that went pretty smoothly.  Then I wanted to  
use PSP for simple templating.  Everything worked perfectly when I  
first introduced python expressions delimited by:

    &#8216;&lt;%=&#8217;  and  &#8216;%&gt;&#8217;

However, as soon as I tried using python code delimited by:

    &#8216;&lt;%&#8217;  and  &#8216;%&gt;&#8217;

all hell broke loose and I could not get anything to work.  A  
simplified version of what I was trying was something like:

     &lt;%
    for i in range(n):
        # start for loop
    %&gt;

         HTML code to repeat n times

    &lt;%
    # terminate for loop
    %&gt;

This just repeats the block of HTML code n times.  The details of the  
python code here are not important.  This construction triggered  
various errors, depending on the details of the python code I  
inserted into the page.  The problem was that I was using Adobe  
GoLive to edit my web pages and to insert the python code in the page  
(I am talking about the source view, not the WYSIWYG/Layout view).   
My version of GoLive is a little old and still prefers to write files  
with carriage return line endings.  This was the default for the Mac  
OS before Mac OS X.  Everything *looks* OK in the GoLive editor and  
it also looked OK in the other editors I chose to check the code  
(other editors would have tipped me off, but I did not use one of  
those).

However, it seems that the PSP engine, or whatever you want to call  
it, does not treat carriage returns as line endings, and therefore  
chokes badly when encountering code written this way.

GoLive has a menu item where you can select  the desired line  
terminator.  I selected &quot;Unix (LF)&quot;.  This made no visible change to  
the document when viewed in GoLive, but then suddenly the &lt;% ... %&gt;  
PSP parts of the document worked perfectly.

It is probably obvious when you think about it, but it is tricky to  
detect if you are bit by it because you may not visibly see anything  
wrong with the code you are editing.

I hope this helps someone avoid what I went through.

Jeff 
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021033.html">[mod_python] Problems with mod_python after reboots
</A></li>
	<LI>Next message: <A HREF="021030.html">[mod_python] PSP/Mac OS X line ending gotcha
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21029">[ date ]</a>
              <a href="thread.html#21029">[ thread ]</a>
              <a href="subject.html#21029">[ subject ]</a>
              <a href="author.html#21029">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
