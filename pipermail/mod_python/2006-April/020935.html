<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] The new module loader
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20The%20new%20module%20loader&In-Reply-To=1145598250.8774%40dscpl.user.openhosting.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020934.html">
   <LINK REL="Next"  HREF="020942.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] The new module loader</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Dan Eloff</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20The%20new%20module%20loader&In-Reply-To=1145598250.8774%40dscpl.user.openhosting.com"
       TITLE="[mod_python] The new module loader">dan.eloff at gmail.com
       </A><BR>
    <I>Fri Apr 21 02:48:16 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020934.html">[mod_python] The new module loader
</A></li>
        <LI>Next message: <A HREF="020942.html">[mod_python] The new module loader
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20935">[ date ]</a>
              <a href="thread.html#20935">[ thread ]</a>
              <a href="subject.html#20935">[ subject ]</a>
              <a href="author.html#20935">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks a bundle Graham, I get the gist of it. Tomorrow I'll back everything
up and then start reworking it with all that in mind. Much appreciated. The
pyserver stuff wasn't being reloaded because it's in site-packages, and the
rest of the stuff was being loaded *AFTER* being placed in sys.path. I did a
pretty good job of shooting myself in the foot there. I'll fix it all up and
give it another go and let you know what happens.

You're right about the packages too, other than as a namespace and for
convenience, I don't need it, and it makes more sense for it to live
elsewhere. You put an awful lot of thought into this, I think it will be the
death of all those auto reload woes.

Thanks again,
-Dan

On 4/20/06, Graham Dumpleton &lt;<A HREF="http://mailman.modpython.org/mailman/listinfo/mod_python">grahamd at dscpl.com.au</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> Graham Dumpleton wrote ..
</I>&gt;<i> &gt; Dan Eloff wrote ..
</I>&gt;<i> &gt; &gt; &lt;Directory /&gt;
</I>&gt;<i> &gt; &gt;     SetHandler mod_python
</I>&gt;<i> &gt; &gt;     PythonHandler PyServer.pyserver
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The new module importer completely ignores packages as it is practically
</I>&gt;<i> &gt; impossible to get any form of automatic module reloading to work
</I>&gt;<i> &gt; correctly with them when they are more than trivial. As such, packages
</I>&gt;<i> &gt; are handed off to standard Python __import__ to deal with. That it even
</I>&gt;<i> &gt; finds the package means that you have it installed in sys.path. Even if
</I>&gt;<i> &gt; it was a file based module, because it is on sys.path and thus likely to
</I>&gt;<i> &gt; be installed in a standard location, the new module importer would again
</I>&gt;<i> &gt; ignore it as it leaves all sys.path modules up to Python __import__
</I>&gt;<i> &gt; as too dangerous to be mixing importing schemes.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Anyway, that all only applies if you were expecting PyServer.pyserver to
</I>&gt;<i> &gt; automatically reload upon changes.
</I>&gt;<i>
</I>&gt;<i> BTW, that something outside of the document tree, possibly in sys.path,
</I>&gt;<i> is dealt with by Python __import__ doesn't mean you can't have module
</I>&gt;<i> reloading on stuff outside of the document tree. The idea is that if it is
</I>&gt;<i> part of the web application and needs to be reloadable, that it doesn't
</I>&gt;<i> really belong in standard Python directories anyway. People only install
</I>&gt;<i> it there at present because it is convenient.
</I>&gt;<i>
</I>&gt;<i> The better way of dealing with this with the new module importer is to
</I>&gt;<i> put your web application modules elsewhere, ie., not on sys.path. You then
</I>&gt;<i> specify an absolute path to the actual .py file in the handler directive.
</I>&gt;<i>
</I>&gt;<i> &lt;Directory /&gt;
</I>&gt;<i>      SetHandler mod_python
</I>&gt;<i>      PythonHandler /path/to/web/application/PyServer/pserver.py
</I>&gt;<i>      ...
</I>&gt;<i>
</I>&gt;<i> Most cases I have seen is that people use packages purely to create a
</I>&gt;<i> namespace to group the modules. With the new module importer that
</I>&gt;<i> doesn't really need to be done anymore. That is because you can
</I>&gt;<i> directly reference an arbitrary module by its path. When you use the
</I>&gt;<i> &quot;import&quot; statement in files in that directory, one of the places it will
</I>&gt;<i> automatically look, without that directory needing to be in sys.path,
</I>&gt;<i> is the same directory the file is in. This achieves the same result as
</I>&gt;<i> what people are using packages for now but you can still have module
</I>&gt;<i> reloading work.
</I>&gt;<i>
</I>&gt;<i> If you need a working example of this let me know.
</I>&gt;<i>
</I>&gt;<i> Graham
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20060420/7ec81dd4/attachment.html">http://mm_cfg_has_not_been_edited_to_set_host_domains/pipermail/mod_python/attachments/20060420/7ec81dd4/attachment.html</A>
</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020934.html">[mod_python] The new module loader
</A></li>
	<LI>Next message: <A HREF="020942.html">[mod_python] The new module loader
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20935">[ date ]</a>
              <a href="thread.html#20935">[ thread ]</a>
              <a href="subject.html#20935">[ subject ]</a>
              <a href="author.html#20935">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42971867-2', 'modpython.org');
  ga('send', 'pageview');
</script>

</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
