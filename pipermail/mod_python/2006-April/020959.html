<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [mod_python] PythonAuthzHandler not working
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20PythonAuthzHandler%20not%20working&In-Reply-To=444A827C.7080800%40jgassociates.ca">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020957.html">
   <LINK REL="Next"  HREF="020960.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mod_python] PythonAuthzHandler not working</H1>
<table border=0 width="100%"><tr><td valign="top">
    <B>Graham Dumpleton</B> 
    <A HREF="mailto:mod_python%40modpython.org?Subject=%5Bmod_python%5D%20PythonAuthzHandler%20not%20working&In-Reply-To=444A827C.7080800%40jgassociates.ca"
       TITLE="[mod_python] PythonAuthzHandler not working">grahamd at dscpl.com.au
       </A><BR>
    <I>Sat Apr 22 18:19:13 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="020957.html">[mod_python] PythonAuthzHandler not working
</A></li>
        <LI>Next message: <A HREF="020960.html">[mod_python] PythonAuthzHandler not working
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20959">[ date ]</a>
              <a href="thread.html#20959">[ thread ]</a>
              <a href="subject.html#20959">[ subject ]</a>
              <a href="author.html#20959">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 23/04/2006, at 5:22 AM, Jim Gallacher wrote:

&gt;<i> Graham Dumpleton wrote:
</I>&gt;&gt;<i> Add to config:
</I>&gt;&gt;<i>   AuthAuthoritative Off
</I>&gt;<i>
</I>&gt;<i> That doesn't really make sense to me. Nothing like this is  
</I>&gt;<i> mentioned for other auth modules like mod_auth_ldap.
</I>
I couldn't even find it documented. It is mentioned in source code  
for 2.0.
Turns of inbuilt auth.

&gt;&gt;<i>   Require dummy
</I>&gt;&gt;<i> The value to Require cannot be:
</I>&gt;&gt;<i>   valid-user
</I>&gt;&gt;<i>   user ???
</I>&gt;&gt;<i>   group ???
</I>&gt;&gt;<i> it has to be something of your own creation that your authz  
</I>&gt;&gt;<i> handler then
</I>&gt;&gt;<i> interprets.
</I>&gt;&gt;<i> I am noting that authzhandler() can't return DECLINED, but must be  
</I>&gt;&gt;<i> OK,
</I>&gt;&gt;<i> or presumable HTTP_UNAUTHORIZED. Returning DECLINED results in 500
</I>&gt;&gt;<i> error and:
</I>&gt;&gt;<i> [Fri Apr 21 12:10:43 2006] [crit] [client ::1] configuration  
</I>&gt;&gt;<i> error:  couldn't check access.  No groups file?: /~grahamd/authz/ 
</I>&gt;&gt;<i> index.py
</I>&gt;<i>
</I>&gt;<i> I've worn my fingers to bloody stumps trying every directive that  
</I>&gt;<i> seems even vaguely related to authentication or authorization and I  
</I>&gt;<i> just can't get my authzhandler to fire.
</I>&gt;<i>
</I>&gt;<i> Well, screw it, I thought. I'll just use a stacked handler:
</I>&gt;<i>
</I>&gt;<i>   PythonAuthenHandler mprest.auth mprest.auth::authzhandler
</I>&gt;<i>
</I>&gt;<i> This works just fine, although I'd prefer to use PythonAuthzHandler  
</I>&gt;<i> as it makes the intention clearer, but I've wasted enough time on  
</I>&gt;<i> this already.
</I>&gt;<i>
</I>&gt;<i> So I'm working away, watching the &quot;new module loader&quot; thread float  
</I>&gt;<i> by on the the mailing list and I say to myself, &quot;Gee, I really  
</I>&gt;<i> should turn on the new importer to give it a bit of a workout&quot;. I  
</I>&gt;<i> turn it on, and give my authen/authz login function a whirl... and...
</I>&gt;<i>
</I>&gt;<i> Aaaaahhhhhrrrrggggg.....
</I>&gt;<i>
</I>&gt;<i> It sails right past the second handler in the stack -  
</I>&gt;<i> mprest.auth::authzhanlder is ignored. Putting them in separate  
</I>&gt;<i> directives makes no difference:
</I>&gt;<i>
</I>&gt;<i>   PythonAuthenHandler mprest.auth
</I>&gt;<i>   PythonAuthenHandler mprest.auth::authzhandler
</I>&gt;<i>
</I>&gt;<i> No joy. (And of course PythonAuthzHandler is a lost cause for me).
</I>
See:

   <A HREF="http://issues.apache.org/jira/browse/MODPYTHON-129">http://issues.apache.org/jira/browse/MODPYTHON-129</A>

Your first handler should return apache.DECLINED now if it doesn't do  
anything.
Problem is you are using stacked handlers here for two different  
purposes.

Graham
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020957.html">[mod_python] PythonAuthzHandler not working
</A></li>
	<LI>Next message: <A HREF="020960.html">[mod_python] PythonAuthzHandler not working
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20959">[ date ]</a>
              <a href="thread.html#20959">[ thread ]</a>
              <a href="subject.html#20959">[ subject ]</a>
              <a href="author.html#20959">[ author ]</a>
         </LI>
       </UL>

</td>
<td align="right" valign="top">
<script type="text/javascript"><!--
google_ad_client = "pub-9718360309690383";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666";
google_color_text = "333333";
//--></script>
<script type="text/javascript"
  src="DISABLEhttp://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td>
</table>

<hr>
<a href="http://mailman.modpython.org/mailman/listinfo/mod_python">More information about the Mod_python
mailing list</a><br>
</body></html>
